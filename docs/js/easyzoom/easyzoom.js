!function(){"use strict";var t="undefined"!=typeof window?window:global;if("function"!=typeof t.requirejs){var e={},i={},o=function(t,e){return{}.hasOwnProperty.call(t,e)},s=function(t,e){for(var i,o,s=[],n=0,r=(i=/^\.\.?(\/|$)/.test(e)?[t,e].join("/").split("/"):e.split("/")).length;n<r;n++)".."===(o=i[n])?s.pop():"."!==o&&""!==o&&s.push(o);return s.join("/")},n=function(e,o){var n,r={id:e,exports:{}};return i[e]=r,o(r.exports,(n=e,function(e){var i=function(t){return t.split("/").slice(0,-1).join("/")}(n),o=s(i,e);return t.requirejs(o,n)}),r),r.exports},r=function(t,i){if("object"==typeof t)for(var s in t)o(t,s)&&(e[s]=t[s]);else e[t]=i};t.requirejs=function(t,r){var h=s(t,".");if(null==r&&(r="/"),o(i,h))return i[h].exports;if(o(e,h))return n(h,e[h]);var a=s(h,"./index");if(o(i,a))return i[a].exports;if(o(e,a))return n(a,e[a]);throw new Error('Cannot find module "'+t+'" from "'+r+'"')},t.requirejs.define=r,t.requirejs.register=r,t.requirejs.list=function(){var t=[];for(var i in e)o(e,i)&&t.push(i);return t},t.requirejs.brunch=!0}}(),function(t){"use strict";function e(e,i){this.$target=t(e),this.opts=t.extend({},a,i,this.$target.data()),void 0===this.isOpen&&this._init()}var i,o,s,n,r,h,a={loadingNotice:"Loading image",errorNotice:"The image could not be loaded",errorDuration:2500,linkAttribute:"href",preventClicks:!0,beforeShow:t.noop,beforeHide:t.noop,onShow:t.noop,onHide:t.noop,onMove:t.noop};e.prototype._init=function(){this.$link=this.$target.find("a"),this.$image=this.$target.find("img"),this.$flyout=t('<div class="easyzoom-flyout" />'),this.$notice=t('<div class="easyzoom-notice" />'),this.$target.on({"mousemove.easyzoom touchmove.easyzoom":t.proxy(this._onMove,this),"mouseleave.easyzoom touchend.easyzoom":t.proxy(this._onLeave,this),"mouseenter.easyzoom touchstart.easyzoom":t.proxy(this._onEnter,this)}),this.opts.preventClicks&&this.$target.on("click.easyzoom",(function(t){t.preventDefault()}))},e.prototype.show=function(t,e){var r,h,a,u,c=this;if(!1!==this.opts.beforeShow.call(this)){if(!this.isReady)return this._loadImage(this.$link.attr(this.opts.linkAttribute),(function(){(c.isMouseOver||!e)&&c.show(t)}));this.$target.append(this.$flyout),r=this.$target.width(),h=this.$target.height(),a=this.$flyout.width(),u=this.$flyout.height(),i=this.$zoom.width()-a,o=this.$zoom.height()-u,0>i&&(i=0),0>o&&(o=0),s=i/r,n=o/h,this.isOpen=!0,this.opts.onShow.call(this),t&&this._move(t)}},e.prototype._onEnter=function(t){var e=t.originalEvent.touches;this.isMouseOver=!0,e&&1!=e.length||(t.preventDefault(),this.show(t,!0))},e.prototype._onMove=function(t){this.isOpen&&(t.preventDefault(),this._move(t))},e.prototype._onLeave=function(){this.isMouseOver=!1,this.isOpen&&this.hide()},e.prototype._onLoad=function(t){t.currentTarget.width&&(this.isReady=!0,this.$notice.detach(),this.$flyout.html(this.$zoom),this.$target.removeClass("is-loading").addClass("is-ready"),t.data.call&&t.data())},e.prototype._onError=function(){var t=this;this.$notice.text(this.opts.errorNotice),this.$target.removeClass("is-loading").addClass("is-error"),this.detachNotice=setTimeout((function(){t.$notice.detach(),t.detachNotice=null}),this.opts.errorDuration)},e.prototype._loadImage=function(e,i){var o=new Image;this.$target.addClass("is-loading").append(this.$notice.text(this.opts.loadingNotice)),this.$zoom=t(o).on("error",t.proxy(this._onError,this)).on("load",i,t.proxy(this._onLoad,this)),o.style.position="absolute",o.src=e},e.prototype._move=function(t){if(0===t.type.indexOf("touch")){var e=t.touches||t.originalEvent.touches;r=e[0].pageX,h=e[0].pageY}else r=t.pageX||r,h=t.pageY||h;var a=this.$target.offset(),u=h-a.top,c=r-a.left,l=Math.ceil(u*n),d=Math.ceil(c*s);if(0>d||0>l||d>i||l>o)this.hide();else{var p=-1*l,f=-1*d;this.$zoom.css({top:p,left:f}),this.opts.onMove.call(this,p,f)}},e.prototype.hide=function(){this.isOpen&&!1!==this.opts.beforeHide.call(this)&&(this.$flyout.detach(),this.isOpen=!1,this.opts.onHide.call(this))},e.prototype.swap=function(e,i,o){this.hide(),this.isReady=!1,this.detachNotice&&clearTimeout(this.detachNotice),this.$notice.parent().length&&this.$notice.detach(),this.$target.removeClass("is-loading is-ready is-error"),this.$image.attr({src:e,srcset:t.isArray(o)?o.join():o}),this.$link.attr(this.opts.linkAttribute,i)},e.prototype.teardown=function(){this.hide(),this.$target.off(".easyzoom").removeClass("is-loading is-ready is-error"),this.detachNotice&&clearTimeout(this.detachNotice),delete this.$link,delete this.$zoom,delete this.$image,delete this.$notice,delete this.$flyout,delete this.isOpen,delete this.isReady},t.fn.easyZoom=function(i){return this.each((function(){var o=t.data(this,"easyZoom");o?void 0===o.isOpen&&o._init():t.data(this,"easyZoom",new e(this,i))}))},"function"==typeof define&&define.amd?define((function(){return e})):"undefined"!=typeof module&&module.exports&&(module.exports=e)}(jQuery);
