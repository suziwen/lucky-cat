function RainyDay(t,i){if(this===window)return new RainyDay(t,i);this.img=t.image;var e={opacity:1,blur:10,crop:[0,0,this.img.naturalWidth,this.img.naturalHeight],enableSizeChange:!0,parentElement:document.getElementsByTagName("body")[0],fps:30,fillStyle:"#8ED6FF",enableCollisions:!0,gravityThreshold:3,gravityAngle:Math.PI/2,gravityAngleVariance:0,reflectionScaledownFactor:5,reflectionDropMappingWidth:200,reflectionDropMappingHeight:200,width:this.img.clientWidth,height:this.img.clientHeight,position:"absolute",top:0,left:0};for(var n in e)void 0===t[n]&&(t[n]=e[n]);this.options=t,this.drops=[],this.canvas=i||this.prepareCanvas(),this.prepareBackground(),this.prepareGlass(),this.reflection=this.REFLECTION_MINIATURE,this.trail=this.TRAIL_DROPS,this.gravity=this.GRAVITY_NON_LINEAR,this.collision=this.COLLISION_SIMPLE,this.setRequestAnimFrame()}function Drop(t,i,e,n,s){this.x=Math.floor(i),this.y=Math.floor(e),this.r=Math.random()*s+n,this.rainyday=t,this.context=t.context,this.reflection=t.reflected}function BlurStack(){this.r=0,this.g=0,this.b=0,this.next=null}function CollisionMatrix(t,i,e){this.resolution=e,this.xc=t,this.yc=i,this.matrix=new Array(t);for(var n=0;n<=t+5;n++){this.matrix[n]=new Array(i);for(var s=0;s<=i+5;++s)this.matrix[n][s]=new DropItem(null)}}function DropItem(t){this.drop=t,this.next=null}!function(){"use strict";var t="undefined"!=typeof window?window:global;if("function"!=typeof t.requirejs){var i={},e={},n=function(t,i){return{}.hasOwnProperty.call(t,i)},s=function(t,i){for(var e,n,s=[],r=0,o=(e=/^\.\.?(\/|$)/.test(i)?[t,i].join("/").split("/"):i.split("/")).length;r<o;r++)".."===(n=e[r])?s.pop():"."!==n&&""!==n&&s.push(n);return s.join("/")},r=function(i,n){var r,o={id:i,exports:{}};return e[i]=o,n(o.exports,(r=i,function(i){var e=function(t){return t.split("/").slice(0,-1).join("/")}(r),n=s(e,i);return t.requirejs(n,r)}),o),o.exports},o=function(t,e){if("object"==typeof t)for(var s in t)n(t,s)&&(i[s]=t[s]);else i[t]=e};t.requirejs=function(t,o){var a=s(t,".");if(null==o&&(o="/"),n(e,a))return e[a].exports;if(n(i,a))return r(a,i[a]);var h=s(a,"./index");if(n(e,h))return e[h].exports;if(n(i,h))return r(h,i[h]);throw new Error('Cannot find module "'+t+'" from "'+o+'"')},t.requirejs.define=o,t.requirejs.register=o,t.requirejs.list=function(){var t=[];for(var e in i)n(i,e)&&t.push(e);return t},t.requirejs.brunch=!0}}(),
/*!
 * rippler v0.1.1
 * http://blivesta.github.io/rippler/
 * Licensed under MIT
 * Author : blivesta
 * http://blivesta.com/
 */
function(t){"use strict";var i={init:function(e){return e=t.extend({effectClass:"rippler-effect",effectSize:16,addElement:"div",duration:600},e),this.each((function(){var n=this,s=t(this);s.data("rippler")||(e=t.extend({},e),s.data("rippler",{options:e}),void 0!==document.ontouchstart?(s.on("touchstart.rippler",(function(e){var s=t(this);i.elementAdd.call(n,s,e)})),s.on("touchend.rippler",(function(e){var s=t(this);i.effect.call(n,s,e)}))):(s.on("mousedown.rippler",(function(e){var s=t(this);i.elementAdd.call(n,s,e)})),s.on("mouseup.rippler",(function(e){var s=t(this);i.effect.call(n,s,e)}))))}))},template:function(i){var e='<circle cx="'+(i=t(this).data("rippler").options).effectSize+'" cy="'+i.effectSize+'" r="'+i.effectSize/2+'">',n='<svg class="'+i.effectClass+' rippler-svg" xmlns="http://www.w3.org/2000/svg" viewBox="'+i.effectSize/2+" "+i.effectSize/2+" "+i.effectSize+" "+i.effectSize+'">'+e+"</svg>",s='<div class="'+i.effectClass+' rippler-div"></div>';return"svg"===i.addElement?n:s},elementAdd:function(e,n,s){s=t(this).data("rippler").options,e.append(i.template.call(this));var r=e.find("."+s.effectClass),o=e.offset(),a=i.targetX.call(this,n),h=i.targetY.call(this,n);return r.css({width:s.effectSize,height:s.effectSize,left:a-o.left-s.effectSize/2,top:h-o.top-s.effectSize/2}),this},effect:function(e,n,s){var r=t(this);s=r.data("rippler").options;var o=t("."+s.effectClass),a=e.offset(),h=r.outerWidth(),c=r.outerHeight(),l=2*i.diagonal(h,c),p=i.targetX.call(this,n),d=i.targetY.call(this,n);return o.css({width:l,height:l,left:p-a.left-l/2,top:d-a.top-l/2,transition:"all "+s.duration/1e3+"s ease-out"}),i.elementRemove.call(this)},elementRemove:function(i){var e=t(this);i=e.data("rippler").options;var n=t("."+i.effectClass);return setTimeout((function(){n.css({opacity:0,transition:"all "+i.duration/1e3+"s ease-out"}),setTimeout((function(){n.remove()}),1.5*i.duration)}),i.duration),this},targetX:function(t){var i=t.originalEvent;return void 0!==document.ontouchstart?i.changedTouches[0].pageX:i.pageX},targetY:function(t){var i=t.originalEvent;return void 0!==document.ontouchstart?i.changedTouches[0].pageY:i.pageY},diagonal:function(t,i){return t>0&&i>0&&Math.sqrt(Math.pow(t,2)+Math.pow(i,2))},destroy:function(){return this.each((function(){var i=t(this);t(window).unbind(".rippler"),i.removeData("rippler")}))}};t.fn.rippler=function(e){return i[e]?i[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist on jQuery.rippler"):i.init.apply(this,arguments)}}(jQuery),RainyDay.prototype.prepareCanvas=function(){var t=document.createElement("canvas");return t.style.position=this.options.position,t.style.top=this.options.top,t.style.left=this.options.left,t.width=this.options.width,t.height=this.options.height,this.options.parentElement.appendChild(t),this.options.enableSizeChange&&this.setResizeHandler(),t},RainyDay.prototype.setResizeHandler=function(){null!==window.onresize?this.intervalID=window.setInterval(this.checkSize.bind(this),100):(window.onresize=this.checkSize.bind(this),window.onorientationchange=this.checkSize.bind(this))},RainyDay.prototype.checkSize=function(){var t=this.img.clientWidth,i=this.img.clientHeight,e=this.img.offsetLeft,n=this.img.offsetTop,s=this.canvas.width,r=this.canvas.height,o=this.canvas.offsetLeft,a=this.canvas.offsetTop;s===t&&r===i||(this.canvas.width=t,this.canvas.height=i,this.prepareBackground(),this.glass.width=this.canvas.width,this.glass.height=this.canvas.height,this.prepareReflections()),o===e&&a===n||(this.canvas.offsetLeft=e,this.canvas.offsetTop=n)},RainyDay.prototype.animateDrops=function(){this.addDropCallback&&this.addDropCallback();for(var t=this.drops.slice(),i=[],e=0;e<t.length;++e)t[e].animate()&&i.push(t[e]);this.drops=i,this.animateId=window.requestAnimFrame(this.animateDrops.bind(this))},RainyDay.prototype.setRequestAnimFrame=function(){for(var t=0,i=["ms","moz","webkit","o"],e=0;e<i.length&&!window.requestAnimationFrame;++e)window.requestAnimationFrame=window[i[e]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[i[e]+"CancelAnimationFrame"]||window[i[e]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(i,e){var n=(new Date).getTime(),s=Math.max(0,16-(n-t)),r=window.setTimeout((function(){i(n+s)}),s);return t=n+s,r}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})},RainyDay.prototype.prepareReflections=function(){this.reflected=document.createElement("canvas"),this.reflected.width=this.canvas.width/this.options.reflectionScaledownFactor,this.reflected.height=this.canvas.height/this.options.reflectionScaledownFactor,this.reflected.getContext("2d").drawImage(this.img,this.options.crop[0],this.options.crop[1],this.options.crop[2],this.options.crop[3],0,0,this.reflected.width,this.reflected.height)},RainyDay.prototype.prepareGlass=function(){this.glass=document.createElement("canvas"),this.glass.width=this.canvas.width,this.glass.height=this.canvas.height,this.context=this.glass.getContext("2d")},RainyDay.prototype.destroy=function(){window.cancelAnimationFrame(this.animateId),window.clearInterval(this.intervalID)},RainyDay.prototype.rain=function(t,i){if(this.reflection!==this.REFLECTION_NONE&&this.prepareReflections(),this.animateDrops(),this.presets=t,this.PRIVATE_GRAVITY_FORCE_FACTOR_Y=.001*this.options.fps/25,this.PRIVATE_GRAVITY_FORCE_FACTOR_X=(Math.PI/2-this.options.gravityAngle)*(.001*this.options.fps)/50,this.options.enableCollisions){for(var e=0,n=0;n<t.length;n++)t[n][0]+t[n][1]>e&&(e=Math.floor(t[n][0]+t[n][1]));if(e>0){var s=Math.ceil(this.canvas.width/e),r=Math.ceil(this.canvas.height/e);this.matrix=new CollisionMatrix(s,r,e)}else this.options.enableCollisions=!1}for(n=0;n<t.length;n++)t[n][3]||(t[n][3]=-1);var o=0;this.addDropCallback=function(){var e=(new Date).getTime();if(!(e-o<i)){o=e;var n,s=this.canvas.getContext("2d");s.clearRect(0,0,this.canvas.width,this.canvas.height),s.drawImage(this.background,0,0,this.canvas.width,this.canvas.height);for(var r=0;r<t.length;r++)if(t[r][2]>1||-1===t[r][3]){if(0!==t[r][3]){t[r][3]--;for(var a=0;a<t[r][2];++a)this.putDrop(new Drop(this,Math.random()*this.canvas.width,Math.random()*this.canvas.height,t[r][0],t[r][1]))}}else if(Math.random()<t[r][2]){n=t[r];break}n&&this.putDrop(new Drop(this,Math.random()*this.canvas.width,Math.random()*this.canvas.height,n[0],n[1])),s.save(),s.globalAlpha=this.options.opacity,s.drawImage(this.glass,0,0,this.canvas.width,this.canvas.height),s.restore()}}.bind(this)},RainyDay.prototype.putDrop=function(t){t.draw(),this.gravity&&t.r>this.options.gravityThreshold&&(this.options.enableCollisions&&this.matrix.update(t),this.drops.push(t))},RainyDay.prototype.clearDrop=function(t,i){var e=t.clear(i);if(e){var n=this.drops.indexOf(t);n>=0&&this.drops.splice(n,1)}return e},Drop.prototype.draw=function(){this.context.save(),this.context.beginPath();var t=this.r;if(this.r=.95*this.r,this.r<3)this.context.arc(this.x,this.y,this.r,0,2*Math.PI,!0),this.context.closePath();else if(this.colliding||this.yspeed>2){if(this.colliding){var i=this.colliding;this.r=1.001*(this.r>i.r?this.r:i.r),this.x+=i.x-this.x,this.colliding=null}var e=1+.1*this.yspeed;this.context.moveTo(this.x-this.r/e,this.y),this.context.bezierCurveTo(this.x-this.r,this.y-2*this.r,this.x+this.r,this.y-2*this.r,this.x+this.r/e,this.y),this.context.bezierCurveTo(this.x+this.r,this.y+e*this.r,this.x-this.r,this.y+e*this.r,this.x-this.r/e,this.y)}else this.context.arc(this.x,this.y,.9*this.r,0,2*Math.PI,!0),this.context.closePath();this.context.clip(),this.r=t,this.rainyday.reflection&&this.rainyday.reflection(this),this.context.restore()},Drop.prototype.clear=function(t){return this.context.clearRect(this.x-this.r-1,this.y-this.r-2,2*this.r+2,2*this.r+2),t?(this.terminate=!0,!0):this.y-this.r>this.rainyday.canvas.height||this.x-this.r>this.rainyday.canvas.width||this.x+this.r<0},Drop.prototype.animate=function(){if(this.terminate)return!1;var t=this.rainyday.gravity(this);if(!t&&this.rainyday.trail&&this.rainyday.trail(this),this.rainyday.options.enableCollisions){var i=this.rainyday.matrix.update(this,t);i&&this.rainyday.collision(this,i)}return!t||this.terminate},RainyDay.prototype.TRAIL_NONE=function(){},RainyDay.prototype.TRAIL_DROPS=function(t){(!t.trailY||t.y-t.trailY>=100*Math.random()*t.r)&&(t.trailY=t.y,this.putDrop(new Drop(this,t.x+(2*Math.random()-1)*Math.random(),t.y-t.r-5,Math.ceil(t.r/5),0)))},RainyDay.prototype.TRAIL_SMUDGE=function(t){var i=t.y-t.r-3,e=t.x-t.r/2+2*Math.random();i<0||e<0||this.context.drawImage(this.clearbackground,e,i,t.r,2,e,i,t.r,2)},RainyDay.prototype.GRAVITY_NONE=function(){return!0},RainyDay.prototype.GRAVITY_LINEAR=function(t){return!!this.clearDrop(t)||(t.yspeed?(t.yspeed+=this.PRIVATE_GRAVITY_FORCE_FACTOR_Y*Math.floor(t.r),t.xspeed+=this.PRIVATE_GRAVITY_FORCE_FACTOR_X*Math.floor(t.r)):(t.yspeed=this.PRIVATE_GRAVITY_FORCE_FACTOR_Y,t.xspeed=this.PRIVATE_GRAVITY_FORCE_FACTOR_X),t.y+=t.yspeed,t.draw(),!1)},RainyDay.prototype.GRAVITY_NON_LINEAR=function(t){return!!this.clearDrop(t)||(t.collided?(t.collided=!1,t.seed=Math.floor(t.r*Math.random()*this.options.fps),t.skipping=!1,t.slowing=!1):(!t.seed||t.seed<0)&&(t.seed=Math.floor(t.r*Math.random()*this.options.fps),t.skipping=!1===t.skipping,t.slowing=!0),t.seed--,t.yspeed?t.slowing?(t.yspeed/=1.1,t.xspeed/=1.1,t.yspeed<this.PRIVATE_GRAVITY_FORCE_FACTOR_Y&&(t.slowing=!1)):t.skipping?(t.yspeed=this.PRIVATE_GRAVITY_FORCE_FACTOR_Y,t.xspeed=this.PRIVATE_GRAVITY_FORCE_FACTOR_X):(t.yspeed+=1*this.PRIVATE_GRAVITY_FORCE_FACTOR_Y*Math.floor(t.r),t.xspeed+=1*this.PRIVATE_GRAVITY_FORCE_FACTOR_X*Math.floor(t.r)):(t.yspeed=this.PRIVATE_GRAVITY_FORCE_FACTOR_Y,t.xspeed=this.PRIVATE_GRAVITY_FORCE_FACTOR_X),0!==this.options.gravityAngleVariance&&(t.xspeed+=(2*Math.random()-1)*t.yspeed*this.options.gravityAngleVariance),t.y+=t.yspeed,t.x+=t.xspeed,t.draw(),!1)},RainyDay.prototype.positiveMin=function(t,i){var e=0;return(e=t<i?t<=0?i:t:i<=0?t:i)<=0?1:e},RainyDay.prototype.REFLECTION_NONE=function(){this.context.fillStyle=this.options.fillStyle,this.context.fill()},RainyDay.prototype.REFLECTION_MINIATURE=function(t){var i=Math.max((t.x-this.options.reflectionDropMappingWidth)/this.options.reflectionScaledownFactor,0),e=Math.max((t.y-this.options.reflectionDropMappingHeight)/this.options.reflectionScaledownFactor,0),n=this.positiveMin(2*this.options.reflectionDropMappingWidth/this.options.reflectionScaledownFactor,this.reflected.width-i),s=this.positiveMin(2*this.options.reflectionDropMappingHeight/this.options.reflectionScaledownFactor,this.reflected.height-e),r=Math.max(t.x-1.1*t.r,0),o=Math.max(t.y-1.1*t.r,0);this.context.drawImage(this.reflected,i,e,n,s,r,o,2*t.r,2*t.r)},RainyDay.prototype.COLLISION_SIMPLE=function(t,i){for(var e,n,s,r=i;null!=r;){var o=r.drop;if(Math.sqrt(Math.pow(t.x-o.x,2)+Math.pow(t.y-o.y,2))<t.r+o.r){e=o;break}r=r.next}e&&(t.y>e.y?(n=t,s=e):(n=e,s=t),this.clearDrop(s),this.clearDrop(n,!0),this.matrix.remove(n),s.draw(),s.colliding=n,s.collided=!0)},RainyDay.prototype.prepareBackground=function(){this.background=document.createElement("canvas"),this.background.width=this.canvas.width,this.background.height=this.canvas.height,this.clearbackground=document.createElement("canvas"),this.clearbackground.width=this.canvas.width,this.clearbackground.height=this.canvas.height;var t=this.background.getContext("2d");t.clearRect(0,0,this.canvas.width,this.canvas.height),t.drawImage(this.img,this.options.crop[0],this.options.crop[1],this.options.crop[2],this.options.crop[3],0,0,this.canvas.width,this.canvas.height),(t=this.clearbackground.getContext("2d")).clearRect(0,0,this.canvas.width,this.canvas.height),t.drawImage(this.img,this.options.crop[0],this.options.crop[1],this.options.crop[2],this.options.crop[3],0,0,this.canvas.width,this.canvas.height),!isNaN(this.options.blur)&&this.options.blur>=1&&this.stackBlurCanvasRGB(this.canvas.width,this.canvas.height,this.options.blur)},RainyDay.prototype.stackBlurCanvasRGB=function(t,i,e){var n=[[0,9],[1,11],[2,12],[3,13],[5,14],[7,15],[11,16],[15,17],[22,18],[31,19],[45,20],[63,21],[90,22],[127,23],[181,24]];e|=0;var s,r,o,a,h,c,l,p,d,f,u,g,y,m,v,x,w,R,A,I,D=this.background.getContext("2d"),C=D.getImageData(0,0,t,i),T=C.data,_=e+1,M=_*(_+1)/2,E=new BlurStack,b=new BlurStack,F=E;for(o=1;o<2*e+1;o++)F=F.next=new BlurStack,o===_&&(b=F);F.next=E;var O=null,S=null;l=c=0;for(var k,V=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259][e],Y=0;Y<n.length;++Y)if(e<=n[Y][0]){k=n[Y-1][1];break}for(r=0;r<i;r++){for(m=v=x=p=d=f=0,u=_*(w=T[c]),g=_*(R=T[c+1]),y=_*(A=T[c+2]),p+=M*w,d+=M*R,f+=M*A,F=E,o=0;o<_;o++)F.r=w,F.g=R,F.b=A,F=F.next;for(o=1;o<_;o++)a=c+((t-1<o?t-1:o)<<2),p+=(F.r=w=T[a])*(I=_-o),d+=(F.g=R=T[a+1])*I,f+=(F.b=A=T[a+2])*I,m+=w,v+=R,x+=A,F=F.next;for(O=E,S=b,s=0;s<t;s++)T[c]=p*V>>k,T[c+1]=d*V>>k,T[c+2]=f*V>>k,p-=u,d-=g,f-=y,u-=O.r,g-=O.g,y-=O.b,a=l+((a=s+e+1)<t-1?a:t-1)<<2,p+=m+=O.r=T[a],d+=v+=O.g=T[a+1],f+=x+=O.b=T[a+2],O=O.next,u+=w=S.r,g+=R=S.g,y+=A=S.b,m-=w,v-=R,x-=A,S=S.next,c+=4;l+=t}for(s=0;s<t;s++){for(v=x=m=d=f=p=0,u=_*(w=T[c=s<<2]),g=_*(R=T[c+1]),y=_*(A=T[c+2]),p+=M*w,d+=M*R,f+=M*A,F=E,o=0;o<_;o++)F.r=w,F.g=R,F.b=A,F=F.next;for(h=t,o=1;o<_;o++)c=h+s<<2,p+=(F.r=w=T[c])*(I=_-o),d+=(F.g=R=T[c+1])*I,f+=(F.b=A=T[c+2])*I,m+=w,v+=R,x+=A,F=F.next,o<i-1&&(h+=t);for(c=s,O=E,S=b,r=0;r<i;r++)T[a=c<<2]=p*V>>k,T[a+1]=d*V>>k,T[a+2]=f*V>>k,p-=u,d-=g,f-=y,u-=O.r,g-=O.g,y-=O.b,a=s+((a=r+_)<i-1?a:i-1)*t<<2,p+=m+=O.r=T[a],d+=v+=O.g=T[a+1],f+=x+=O.b=T[a+2],O=O.next,u+=w=S.r,g+=R=S.g,y+=A=S.b,m-=w,v-=R,x-=A,S=S.next,c+=t}D.putImageData(C,0,0)},CollisionMatrix.prototype.update=function(t,i){if(t.gid){if(!this.matrix[t.gmx]||!this.matrix[t.gmx][t.gmy])return null;if(this.matrix[t.gmx][t.gmy].remove(t),i)return null;if(t.gmx=Math.floor(t.x/this.resolution),t.gmy=Math.floor(t.y/this.resolution),!this.matrix[t.gmx]||!this.matrix[t.gmx][t.gmy])return null;this.matrix[t.gmx][t.gmy].add(t);var e=this.collisions(t);if(e&&null!=e.next)return e.next}else{if(t.gid=Math.random().toString(36).substr(2,9),t.gmx=Math.floor(t.x/this.resolution),t.gmy=Math.floor(t.y/this.resolution),!this.matrix[t.gmx]||!this.matrix[t.gmx][t.gmy])return null;this.matrix[t.gmx][t.gmy].add(t)}return null},CollisionMatrix.prototype.collisions=function(t){var i=new DropItem(null),e=i;return i=this.addAll(i,t.gmx-1,t.gmy+1),i=this.addAll(i,t.gmx,t.gmy+1),i=this.addAll(i,t.gmx+1,t.gmy+1),e},CollisionMatrix.prototype.addAll=function(t,i,e){if(i>0&&e>0&&i<this.xc&&e<this.yc)for(var n=this.matrix[i][e];null!=n.next;)n=n.next,t.next=new DropItem(n.drop),t=t.next;return t},CollisionMatrix.prototype.remove=function(t){this.matrix[t.gmx][t.gmy].remove(t)},DropItem.prototype.add=function(t){for(var i=this;null!=i.next;)i=i.next;i.next=new DropItem(t)},DropItem.prototype.remove=function(t){for(var i=this,e=null;null!=i.next;)e=i,(i=i.next).drop.gid===t.gid&&(e.next=i.next)};
