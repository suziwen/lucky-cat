!function(){"use strict";var t="undefined"!=typeof window?window:global;if("function"!=typeof t.requirejs){var i={},e={},s=function(t,i){return{}.hasOwnProperty.call(t,i)},o=function(t,i){for(var e,s,o=[],n=0,a=(e=/^\.\.?(\/|$)/.test(i)?[t,i].join("/").split("/"):i.split("/")).length;n<a;n++)".."===(s=e[n])?o.pop():"."!==s&&""!==s&&o.push(s);return o.join("/")},n=function(i,s){var n,a={id:i,exports:{}};return e[i]=a,s(a.exports,(n=i,function(i){var e=function(t){return t.split("/").slice(0,-1).join("/")}(n),s=o(e,i);return t.requirejs(s,n)}),a),a.exports},a=function(t,e){if("object"==typeof t)for(var o in t)s(t,o)&&(i[o]=t[o]);else i[t]=e};t.requirejs=function(t,a){var r=o(t,".");if(null==a&&(a="/"),s(e,r))return e[r].exports;if(s(i,r))return n(r,i[r]);var l=o(r,"./index");if(s(e,l))return e[l].exports;if(s(i,l))return n(l,i[l]);throw new Error('Cannot find module "'+t+'" from "'+a+'"')},t.requirejs.define=a,t.requirejs.register=a,t.requirejs.list=function(){var t=[];for(var e in i)s(i,e)&&t.push(e);return t},t.requirejs.brunch=!0}}(),window.requirejs.define({"lib/notifier":function(t,i,e){var s,o,n,a,r;o=(o=$(".notifications.top-right")).length>0?o:$('<div class="notifications top-right"></div>').appendTo("body"),n=(n=$(".notifications.bottom-right")).length>0?n:$('<div class="notifications bottom-right"></div>').appendTo("body"),a=n.notify({fadeOut:{enabled:!1},message:{text:"\u5904\u7406\u4e2d...",type:"info"}}),r=null,s={showMessage:function(t,i,e,s){var n,r,l,h;return null==s&&(s={}),s=$.extend({},{onClosed:$.noop,onClose:$.noop},s),h="object"==typeof t?t:{text:t},l=!0,r=!1,"error"!==e&&-1!==i||(l=!1,r=!0,a.hide()),(n=o.notify({fadeOut:{enabled:l,delay:i||1e3},closable:r,message:h,type:e||"info",onClosed:s.onClosed,onClose:s.onClose})).show(),n},showHandling:function(t,i){if(r&&(clearTimeout(r),r=null),a.$note.html(t||"\u5904\u7406\u4e2d..."),a.$note.prepend("<i class='asterisk loading icon'></i>"),a.show(),i)return r=setTimeout((function(){return r=null,a.hide()}),1e3)},hideHandling:function(){return a.hide()}},e.exports=s}}),function(t){"use strict";"function"==typeof define&&define.amd?define(["./blueimp-helper"],t):(window.blueimp=window.blueimp||{},window.blueimp.Gallery=t(window.blueimp.helper||window.jQuery))}((function(t){"use strict";var i=/^(width|height|left|top|marginLeft|marginTop)$/,e=Math.min,s=Math.max,o=Math.abs,n=Math.sqrt,a=(Math.round,Object.prototype),r=a.toString,l=(a.hasOwnProperty,Array.prototype.slice);function h(t){return r.call(t).slice(8,-1).toLowerCase()}function d(t){return"number"==typeof t&&!isNaN(t)}function c(t){return void 0===t}function u(t){return"object"==typeof t&&null!==t}function p(t){return"function"===h(t)}function f(t,i){return i=i>=0?i:0,Array.from?Array.from(t).slice(i):l.call(t,i)}function m(t,i){var e,s,o;if(t&&p(i))if(o=t,(Array.isArray?Array.isArray(o):"array"===h(o))||d(t.length))for(s=0,e=t.length;s<e&&!1!==i.call(t,t[s],s,t);s++);else if(u(t))for(s in t)if(t.hasOwnProperty(s)&&!1===i.call(t,t[s],s,t))break;return t}function g(t){var i,e=t||window.event;return e.originalEvent&&(e=e.originalEvent),e.target||(e.target=e.srcElement||document),d(e.pageX)||(i=document.documentElement,e.pageX=e.clientX+(window.scrollX||i&&i.scrollLeft||0)-(i&&i.clientLeft||0),e.pageY=e.clientY+(window.scrollY||i&&i.scrollTop||0)-(i&&i.clientTop||0)),e}function v(t,i){return void 0===document.body.style.maxHeight?null:this&&this.options===v.prototype.options?void(t&&t.length?(this.list=t,this.num=t.length,window.focus(),this.initOptions(i),this.initialize()):this.console.log("blueimp Gallery: No or empty list provided as first argument.",t)):new v(t,i)}return t.extend(v.prototype,{options:{movable:!0,zoomable:!0,zoomRatio:.1,minZoomRatio:.01,maxZoomRatio:100,container:"#blueimp-gallery",slidesContainer:"div",titleElement:"h3",displayClass:"blueimp-gallery-display",controlsClass:"blueimp-gallery-controls",singleClass:"blueimp-gallery-single",leftEdgeClass:"blueimp-gallery-left",rightEdgeClass:"blueimp-gallery-right",playingClass:"blueimp-gallery-playing",slideClass:"slide",slideLoadingClass:"slide-loading",slideErrorClass:"slide-error",slideContentClass:"slide-content",toggleClass:"toggle",prevClass:"prev",nextClass:"next",closeClass:"close",oneToOneClass:"one-to-one",playPauseClass:"play-pause",typeProperty:"type",titleProperty:"title",urlProperty:"href",srcsetProperty:"urlset",displayTransition:!0,clearSlides:!0,stretchImages:!1,toggleControlsOnReturn:!0,toggleControlsOnSlideClick:!0,toggleSlideshowOnSpace:!0,enableKeyboardNavigation:!0,closeOnEscape:!0,closeOnSlideClick:!0,closeOnSwipeUpOrDown:!0,emulateTouchEvents:!0,stopTouchEventsPropagation:!1,hidePageScrollbars:!0,disableScroll:!0,carousel:!1,continuous:!0,unloadElements:!0,startSlideshow:!1,slideshowInterval:5e3,index:0,preloadRange:2,transitionSpeed:400,slideshowTransitionSpeed:void 0,event:void 0,onopen:void 0,onopened:void 0,onslide:void 0,onslideend:void 0,onslidecomplete:void 0,onclose:void 0,onclosed:void 0},carouselOptions:{hidePageScrollbars:!1,toggleControlsOnReturn:!1,toggleSlideshowOnSpace:!1,enableKeyboardNavigation:!1,closeOnEscape:!1,closeOnSlideClick:!1,closeOnSwipeUpOrDown:!1,disableScroll:!1,startSlideshow:!0},console:window.console&&"function"==typeof window.console.log?window.console:{log:function(){}},support:function(i){var e,s={touch:void 0!==window.ontouchstart||window.DocumentTouch&&document instanceof DocumentTouch},o={webkitTransition:{end:"webkitTransitionEnd",prefix:"-webkit-"},MozTransition:{end:"transitionend",prefix:"-moz-"},OTransition:{end:"otransitionend",prefix:"-o-"},transition:{end:"transitionend",prefix:""}};for(e in o)if(o.hasOwnProperty(e)&&void 0!==i.style[e]){s.transition=o[e],s.transition.name=e;break}function n(){var t,e,o=s.transition;document.body.appendChild(i),o&&(t=o.name.slice(0,-9)+"ransform",void 0!==i.style[t]&&(i.style[t]="translateZ(0)",e=window.getComputedStyle(i).getPropertyValue(o.prefix+"transform"),s.transform={prefix:o.prefix,name:t,translate:!0,translateZ:!!e&&"none"!==e})),void 0!==i.style.backgroundSize&&(s.backgroundSize={},i.style.backgroundSize="contain",s.backgroundSize.contain="contain"===window.getComputedStyle(i).getPropertyValue("background-size"),i.style.backgroundSize="cover",s.backgroundSize.cover="cover"===window.getComputedStyle(i).getPropertyValue("background-size")),document.body.removeChild(i)}return document.body?n():t(document).on("DOMContentLoaded",n),s}(document.createElement("div")),requestAnimationFrame:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame,initialize:function(){if(this.initStartIndex(),!1===this.initWidget())return!1;this.initEventListeners(),this.onslide(this.index),this.ontransitionend(),this.options.startSlideshow&&this.play()},slide:function(t,i){var e=this;e.initImage((function(){e.renderImage()})),window.clearTimeout(this.timeout);var s,o,n,a=this.index;if(a!==t&&1!==this.num){if(i||(i=this.options.transitionSpeed),this.support.transform){for(this.options.continuous||(t=this.circle(t)),s=Math.abs(a-t)/(a-t),this.options.continuous&&(o=s,(s=-this.positions[this.circle(t)]/this.slideWidth)!==o&&(t=-s*this.num+t)),n=Math.abs(a-t)-1;n;)n-=1,this.move(this.circle((t>a?t:a)-n-1),this.slideWidth*s,0);t=this.circle(t),this.move(a,this.slideWidth*s,i),this.move(t,0,i),this.options.continuous&&this.move(this.circle(t-s),-this.slideWidth*s,0)}else t=this.circle(t),this.animate(a*-this.slideWidth,t*-this.slideWidth,i);this.onslide(t)}},getIndex:function(){return this.index},getNumber:function(){return this.num},prev:function(){(this.options.continuous||this.index)&&this.slide(this.index-1)},next:function(){(this.options.continuous||this.index<this.num-1)&&this.slide(this.index+1)},play:function(t){var i=this;window.clearTimeout(this.timeout),this.interval=t||this.options.slideshowInterval,this.elements[this.index]>1&&(this.timeout=this.setTimeout(!this.requestAnimationFrame&&this.slide||function(t,e){i.animationFrameId=i.requestAnimationFrame.call(window,(function(){i.slide(t,e)}))},[this.index+1,this.options.slideshowTransitionSpeed],this.interval)),this.container.addClass(this.options.playingClass)},pause:function(){window.clearTimeout(this.timeout),this.interval=null,this.container.removeClass(this.options.playingClass)},add:function(t){var i;for(t.concat||(t=Array.prototype.slice.call(t)),this.list.concat||(this.list=Array.prototype.slice.call(this.list)),this.list=this.list.concat(t),this.num=this.list.length,this.num>2&&null===this.options.continuous&&(this.options.continuous=!0,this.container.removeClass(this.options.leftEdgeClass)),this.container.removeClass(this.options.rightEdgeClass).removeClass(this.options.singleClass),i=this.num-t.length;i<this.num;i+=1)this.addSlide(i),this.positionSlide(i);this.positions.length=this.num,this.initSlides(!0)},resetSlides:function(){this.slidesContainer.empty(),this.unloadAllSlides(),this.slides=[]},handleClose:function(){var t=this.options;this.destroyEventListeners(),this.pause(),this.container[0].style.display="none",this.container.removeClass(t.displayClass).removeClass(t.singleClass).removeClass(t.leftEdgeClass).removeClass(t.rightEdgeClass),t.hidePageScrollbars&&(document.body.style.overflow=this.bodyOverflowStyle),this.options.clearSlides&&this.resetSlides(),this.options.onclosed&&this.options.onclosed.call(this)},close:function(){var t=this;this.options.onclose&&this.options.onclose.call(this),this.support.transition&&this.options.displayTransition?(this.container.on(this.support.transition.end,(function i(e){e.target===t.container[0]&&(t.container.off(t.support.transition.end,i),t.handleClose())})),this.container.removeClass(this.options.displayClass)):this.handleClose()},circle:function(t){return(this.num+t%this.num)%this.num},move:function(t,i,e){this.translateX(t,i,e),this.positions[t]=i},translate:function(t,i,e,s){var o=this.slides[t].style,n=this.support.transition,a=this.support.transform;o[n.name+"Duration"]=s+"ms",o[a.name]="translate("+i+"px, "+e+"px)"+(a.translateZ?" translateZ(0)":"")},translateX:function(t,i,e){this.translate(t,i,0,e)},translateY:function(t,i,e){this.translate(t,0,i,e)},animate:function(t,i,e){if(e)var s=this,o=(new Date).getTime(),n=window.setInterval((function(){var a=(new Date).getTime()-o;if(a>e)return s.slidesContainer[0].style.left=i+"px",s.ontransitionend(),void window.clearInterval(n);s.slidesContainer[0].style.left=(i-t)*(Math.floor(a/e*100)/100)+t+"px"}),4);else this.slidesContainer[0].style.left=i+"px"},preventDefault:function(t){t.preventDefault?t.preventDefault():t.returnValue=!1},stopPropagation:function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},onresize:function(){this.initSlides(!0)},onmousedown:function(t){t.which&&1===t.which&&"VIDEO"!==t.target.nodeName&&(t.preventDefault(),(t.originalEvent||t).touches=[{pageX:t.pageX,pageY:t.pageY}],this.ontouchstart(t))},onmousemove:function(t){this.touchStart&&((t.originalEvent||t).touches=[{pageX:t.pageX,pageY:t.pageY}],this.ontouchmove(t))},onmouseup:function(t){this.touchStart&&(this.ontouchend(t),delete this.touchStart)},onmouseout:function(i){if(this.action=!1,this.touchStart){var e=i.target,s=i.relatedTarget;s&&(s===e||t.contains(e,s))||this.onmouseup(i)}},ontouchstart:function(t){this.options.stopTouchEventsPropagation&&this.stopPropagation(t);var i=(t.originalEvent||t).touches[0];this.touchStart={x:i.pageX,y:i.pageY,time:Date.now()},this.isScrolling=void 0,this.touchDelta={},this.isZoom&&(this.action="move",this.mousedown(t))},ontouchmove:function(t){this.options.stopTouchEventsPropagation&&this.stopPropagation(t);var i,e,s=(t.originalEvent||t).touches[0],o=(t.originalEvent||t).scale,n=this.index;if(!(s.length>1||o&&1!==o))if(this.options.disableScroll&&t.preventDefault(),this.touchDelta={x:s.pageX-this.touchStart.x,y:s.pageY-this.touchStart.y},i=this.touchDelta.x,void 0===this.isScrolling&&(this.isScrolling=this.isScrolling||Math.abs(i)<Math.abs(this.touchDelta.y)),this.isZoom)this.mousemove(t);else if(this.isScrolling)this.options.closeOnSwipeUpOrDown&&this.translateY(n,this.touchDelta.y+this.positions[n],0);else for(t.preventDefault(),window.clearTimeout(this.timeout),this.options.continuous?e=[this.circle(n+1),n,this.circle(n-1)]:(this.touchDelta.x=i/=!n&&i>0||n===this.num-1&&i<0?Math.abs(i)/this.slideWidth+1:1,e=[n],n&&e.push(n-1),n<this.num-1&&e.unshift(n+1));e.length;)n=e.pop(),this.translateX(n,i+this.positions[n],0)},ontouchend:function(t){if(this.action=!1,this.isZoom)this.mouseup(t);else{this.options.stopTouchEventsPropagation&&this.stopPropagation(t);var i,e,s,o,n,a=this.index,r=this.options.transitionSpeed,l=this.slideWidth,h=Number(Date.now()-this.touchStart.time)<250,d=h&&Math.abs(this.touchDelta.x)>20||Math.abs(this.touchDelta.x)>l/2,c=!a&&this.touchDelta.x>0||a===this.num-1&&this.touchDelta.x<0,u=!d&&this.options.closeOnSwipeUpOrDown&&(h&&Math.abs(this.touchDelta.y)>20||Math.abs(this.touchDelta.y)>this.slideHeight/2);this.options.continuous&&(c=!1),i=this.touchDelta.x<0?-1:1,this.isScrolling?u?this.close():this.translateY(a,0,r):d&&!c?(e=a+i,s=a-i,o=l*i,n=-l*i,this.options.continuous?(this.move(this.circle(e),o,0),this.move(this.circle(a-2*i),n,0)):e>=0&&e<this.num&&this.move(e,o,0),this.move(a,this.positions[a]+o,r),this.move(this.circle(s),this.positions[this.circle(s)]+o,r),a=this.circle(s),this.onslide(a)):this.options.continuous?(this.move(this.circle(a-1),-l,r),this.move(a,0,r),this.move(this.circle(a+1),l,r)):(a&&this.move(a-1,-l,r),this.move(a,0,r),a<this.num-1&&this.move(a+1,l,r))}},ontouchcancel:function(t){this.touchStart&&(this.ontouchend(t),delete this.touchStart)},ontransitionend:function(t){var i=this.slides[this.index];t&&i!==t.target||(this.interval&&this.play(),this.setTimeout(this.options.onslideend,[this.index,i]))},oncomplete:function(i){var e,s=i.target||i.srcElement,o=s&&s.parentNode;if(s&&o){e=this.getNodeIndex(o),t(o).removeClass(this.options.slideLoadingClass),"error"===i.type?(t(o).addClass(this.options.slideErrorClass),this.elements[e]=3):this.elements[e]=2;var n=this;n.initImage((function(){n.renderImage()})),s.clientHeight>this.container[0].clientHeight&&(s.style.maxHeight=this.container[0].clientHeight),this.interval&&this.slides[this.index]===o&&this.play(),this.setTimeout(this.options.onslidecomplete,[e,o])}},onload:function(t){this.oncomplete(t)},onerror:function(t){this.oncomplete(t)},onwheel:function(t){this.wheel(t)},wheel:function(t){var i=this,e=g(t),s=Number(i.options.zoomRatio)||.1,o=1;this.preventDefault(e),i.wheeling||(i.wheeling=!0,window.setTimeout((function(){i.wheeling=!1}),50),e.deltaY?o=e.deltaY>0?1:-1:e.wheelDelta?o=-e.wheelDelta/120:e.detail&&(o=e.detail>0?1:-1),i.zoom(-o*s,!0,e))},moveForZoom:function(t,i){var e=this.imageData;return this.moveTo(c(t)?t:e.left+Number(t),c(i)?i:e.top+Number(i)),this},moveTo:function(t,i){var e=this.imageData,s=!1;return c(i)&&(i=t),t=Number(t),i=Number(i),this.isPlayed||(d(t)&&(e.left=t,s=!0),d(i)&&(e.top=i,s=!0),s&&this.renderImage()),this},zoom:function(t,i,e){var s=this.imageData;if(s)return t=(t=Number(t))<0?1/(1-t):1+t,this.zoomTo(s.width*t/s.naturalWidth,i,e),this},zoomTo:function(t,i,o,n){var a,r,l,h,c,u,p,f,g,v,y,w=this.options,b=.01,C=100,x=this.imageData;return this.isZoom=!0,this.container.addClass("zoom"),d(t=s(0,t))&&!this.isPlayed&&(n||w.zoomable)&&(n||(b=s(b,w.minZoomRatio),C=e(C,w.maxZoomRatio),t=e(s(t,b),C)),t>.95&&t<1.05&&(t=1),a=x.naturalWidth*t,r=x.naturalHeight*t,o?(g=this.container[0],v=document.documentElement,l={left:(y=g.getBoundingClientRect()).left+(window.scrollX||v&&v.scrollLeft||0)-(v&&v.clientLeft||0),top:y.top+(window.scrollY||v&&v.scrollTop||0)-(v&&v.clientTop||0)},h=o.touches?(c=o.touches,u=c.length,p=0,f=0,u&&(m(c,(function(t){p+=t.pageX,f+=t.pageY})),p/=u,f/=u),{pageX:p,pageY:f}):{pageX:o.pageX,pageY:o.pageY},x.left-=(a-x.width)*((h.pageX-l.left-x.left)/x.width),x.top-=(r-x.height)*((h.pageY-l.top-x.top)/x.height)):(x.left-=(a-x.width)/2,x.top-=(r-x.height)/2),x.width=a,x.height=r,x.ratio=t,this.renderImage()),this},rotate:function(t){return this.rotateTo((this.imageData.rotate||0)+Number(t)),this},rotateTo:function(t){var i=this.imageData;return d(t=Number(t))&&(i.rotate=t,this.renderImage((function(){}))),this},change:function(t){var i,e,s,a,r,l=this.endX-this.startX,h=this.endY-this.startY;switch(this.action){case"move":this.moveForZoom(l,h);break;case"zoom":this.zoom((i=o(this.startX-this.startX2),e=o(this.startY-this.startY2),s=o(this.endX-this.endX2),a=o(this.endY-this.endY2),r=n(i*i+e*e),(n(s*s+a*a)-r)/r),!1,t),this.startX2=this.endX2,this.startY2=this.endY2;break;case"switch":this.action="switched",o(l)>o(h)&&(l>1?this.prev():l<-1&&this.next())}this.startX=this.endX,this.startY=this.endY},isSwitchable:function(){var t=this.imageData;return this.isZoom?t.left<-t.width||t.top<-t.height||t.left>this.slideWidth||t.top>this.slideHeight:t.left>=0&&t.top>=0&&t.width<=this.slideWidth&&t.height<=this.slideHeight},mousedown:function(t){var i,e,s=this.options,o=g(t),n=!!s.movable&&"move",a=o.touches;if(a){if((i=a.length)>1){if(!s.zoomable||2!==i)return;e=a[1],this.startX2=e.pageX,this.startY2=e.pageY,n="zoom"}else this.isSwitchable()&&(n="switch");e=a[0]}n&&(this.preventDefault(o),this.action=n,this.startX=e?e.pageX:o.pageX,this.startY=e?e.pageY:o.pageY)},mousemove:function(t){var i=this.options,e=g(t),s=this.action;if(this.slides[this.index].children[0]){var o,n,a=e.touches;if(a){if((o=a.length)>1){if(!i.zoomable||2!==o)return;n=a[1],this.endX2=n.pageX,this.endY2=n.pageY}n=a[0]}s&&(this.preventDefault(e),this.endX=n?n.pageX:e.pageX,this.endY=n?n.pageY:e.pageY,this.change(e))}},mouseup:function(t){var i=g(t);this.action&&(this.preventDefault(i),this.action=!1)},initImage:function(t){var i=this.options;this.index;this.container.removeClass("zoom"),this.isZoom=!1;var s=this.slides[this.index].children[0];if(s){var o=this.slideWidth,n=this.slideHeight,a=this.imageData||{},r=s.naturalWidth;if(r&&!(r<=0)){var l,h,d=s.naturalHeight,c=r/d,u=o,g=n;n*c>o?g=o/c:u=n*c,l=function(t){var i;if(arguments.length>1){if(i=f(arguments),Object.assign)return Object.assign.apply(Object,i);i.shift(),m(i,(function(i){m(i,(function(i,e){t[e]=i}))}))}return t}({},h={naturalWidth:r,naturalHeight:d,aspectRatio:c,ratio:(u=e(.9*u,r))/r,width:u,height:g=e(.9*g,d),left:(o-u)/2,top:(n-g)/2}),i.rotatable&&(h.rotate=a.rotate||0,l.rotate=0),i.scalable&&(h.scaleX=a.scaleX||1,h.scaleY=a.scaleY||1,l.scaleX=1,l.scaleY=1),this.imageData=h,this.initialImageData=l,p(t)&&t()}}},renderImage:function(){var t,e,s,o,n,a,r,l,h=this.slides[this.index].children[0],c=this.imageData,u=(e=[],s=(t=c).rotate,o=t.scaleX,n=t.scaleY,d(s)&&e.push("rotate("+s+"deg)"),d(o)&&e.push("scaleX("+o+")"),d(n)&&e.push("scaleY("+n+")"),e.length?e.join(" "):"none");a=h,r={width:c.width,height:c.height,marginLeft:c.left,marginTop:c.top,WebkitTransform:u,msTransform:u,transform:u},l=a.style,m(r,(function(t,e){i.test(e)&&d(t)&&(t+="px"),l[e]=t}))},onkeydown:function(t){switch(t.which||t.keyCode){case 13:this.options.toggleControlsOnReturn&&(this.preventDefault(t),this.toggleControls());break;case 27:this.options.closeOnEscape&&(this.close(),t.stopImmediatePropagation());break;case 32:this.options.toggleSlideshowOnSpace&&(this.preventDefault(t),this.toggleSlideshow());break;case 37:this.options.enableKeyboardNavigation&&(this.preventDefault(t),this.prev());break;case 39:this.options.enableKeyboardNavigation&&(this.preventDefault(t),this.next())}},handleClick:function(i){var e=this.options,s=i.target||i.srcElement,o=s.parentNode;function n(i){return t(s).hasClass(i)||t(o).hasClass(i)}n(e.toggleClass)?(this.preventDefault(i),this.toggleControls()):n(e.prevClass)?(this.preventDefault(i),this.prev()):n(e.nextClass)?(this.preventDefault(i),this.next()):n(e.closeClass)?(this.preventDefault(i),this.close()):n(e.oneToOneClass)?(this.preventDefault(i),1==this.imageData.ratio?this.initSlides(!0):this.zoomTo(1,!0)):n(e.playPauseClass)?(this.preventDefault(i),this.toggleSlideshow()):o===this.slidesContainer[0]?e.closeOnSlideClick?(this.preventDefault(i),this.close()):e.toggleControlsOnSlideClick&&(this.preventDefault(i),this.toggleControls()):o.parentNode&&o.parentNode===this.slidesContainer[0]&&e.toggleControlsOnSlideClick&&(this.preventDefault(i),this.toggleControls())},onclick:function(t){if(!(this.options.emulateTouchEvents&&this.touchDelta&&(Math.abs(this.touchDelta.x)>20||Math.abs(this.touchDelta.y)>20)))return this.handleClick(t);delete this.touchDelta},updateEdgeClasses:function(t){t?this.container.removeClass(this.options.leftEdgeClass):this.container.addClass(this.options.leftEdgeClass),t===this.num-1?this.container.addClass(this.options.rightEdgeClass):this.container.removeClass(this.options.rightEdgeClass)},handleSlide:function(t){this.options.continuous||this.updateEdgeClasses(t),this.loadElements(t),this.options.unloadElements&&this.unloadElements(t),this.setTitle(t)},onslide:function(t){this.index=t,this.handleSlide(t);var i=this;i.initImage((function(){i.renderImage()})),this.setTimeout(this.options.onslide,[t,this.slides[t]])},setTitle:function(t){var i=this.slides[t].firstChild.title,e=this.titleElement;e.length&&(this.titleElement.empty(),i&&e[0].appendChild(document.createTextNode(i)))},setTimeout:function(t,i,e){var s=this;return t&&window.setTimeout((function(){t.apply(s,i||[])}),e||0)},imageFactory:function(i,e){var s,o,n,a=this,r=this.imagePrototype.cloneNode(!1),l=i,h=this.options.stretchImages;return"string"!=typeof l&&(l=this.getItemProperty(i,this.options.urlProperty),n=this.getItemProperty(i,this.options.titleProperty)),!0===h&&(h="contain"),(h=this.support.backgroundSize&&this.support.backgroundSize[h]&&h)?o=this.elementPrototype.cloneNode(!1):(o=r,r.draggable=!1),n&&(o.title=n),t(r).on("load error",(function i(n){if(!s){if(n={type:n.type,target:o},!o.parentNode)return a.setTimeout(i,[n]);s=!0,t(r).off("load error",i),h&&"load"===n.type&&(o.style.background='url("'+l+'") center no-repeat',o.style.backgroundSize=h),e(n)}})),r.src=l,o},createElement:function(i,e){var s=i&&this.getItemProperty(i,this.options.typeProperty),o=s&&this[s.split("/")[0]+"Factory"]||this.imageFactory,n=i&&o.call(this,i,e),a=this.getItemProperty(i,this.options.srcsetProperty);return n||(n=this.elementPrototype.cloneNode(!1),this.setTimeout(e,[{type:"error",target:n}])),a&&n.setAttribute("srcset",a),t(n).addClass(this.options.slideContentClass),n},loadElement:function(i){this.elements[i]||(this.slides[i].firstChild?this.elements[i]=t(this.slides[i]).hasClass(this.options.slideErrorClass)?3:2:(this.elements[i]=1,t(this.slides[i]).addClass(this.options.slideLoadingClass),this.slides[i].appendChild(this.createElement(this.list[i],this.proxyListener))))},loadElements:function(t){var i,e=Math.min(this.num,2*this.options.preloadRange+1),s=t;for(i=0;i<e;i+=1)s+=i*(i%2==0?-1:1),s=this.circle(s),this.loadElement(s)},unloadElements:function(t){var i,e;for(i in this.elements)this.elements.hasOwnProperty(i)&&(e=Math.abs(t-i))>this.options.preloadRange&&e+this.options.preloadRange<this.num&&(this.unloadSlide(i),delete this.elements[i])},addSlide:function(t){var i=this.slidePrototype.cloneNode(!1);i.setAttribute("data-index",t),this.slidesContainer[0].appendChild(i),this.slides.push(i)},positionSlide:function(t){var i=this.slides[t];i.style.width=this.slideWidth+"px",this.support.transform&&(i.style.left=t*-this.slideWidth+"px",this.move(t,this.index>t?-this.slideWidth:this.index<t?this.slideWidth:0,0))},initSlides:function(i){var e,s;for(i||(this.positions=[],this.positions.length=this.num,this.elements={},this.imagePrototype=document.createElement("img"),this.elementPrototype=document.createElement("div"),this.slidePrototype=document.createElement("div"),t(this.slidePrototype).addClass(this.options.slideClass),this.slides=this.slidesContainer[0].children,e=this.options.clearSlides||this.slides.length!==this.num),this.slideWidth=this.container[0].offsetWidth,this.slideHeight=this.container[0].offsetHeight,this.slidesContainer[0].style.width=this.num*this.slideWidth+"px",e&&this.resetSlides(),s=0;s<this.num;s+=1)e&&this.addSlide(s),this.positionSlide(s);this.options.continuous&&this.support.transform&&(this.move(this.circle(this.index-1),-this.slideWidth,0),this.move(this.circle(this.index+1),this.slideWidth,0)),this.support.transform||(this.slidesContainer[0].style.left=this.index*-this.slideWidth+"px");var o=this;o.initImage((function(){o.renderImage()}))},unloadSlide:function(t){var i,e;null!==(e=(i=this.slides[t]).firstChild)&&i.removeChild(e)},unloadAllSlides:function(){var t,i;for(t=0,i=this.slides.length;t<i;t++)this.unloadSlide(t)},toggleControls:function(){var t=this.options.controlsClass;this.container.hasClass(t)?this.container.removeClass(t):this.container.addClass(t)},toggleSlideshow:function(){this.interval?this.pause():this.play()},getNodeIndex:function(t){return parseInt(t.getAttribute("data-index"),10)},getNestedProperty:function(t,i){return i.replace(/\[(?:'([^']+)'|"([^"]+)"|(\d+))\]|(?:(?:^|\.)([^\.\[]+))/g,(function(i,e,s,o,n){var a=n||e||s||o&&parseInt(o,10);i&&t&&(t=t[a])})),t},getDataProperty:function(i,e){if(i.getAttribute){var s=i.getAttribute("data-"+e.replace(/([A-Z])/g,"-$1").toLowerCase());if("string"==typeof s){if(/^(true|false|null|-?\d+(\.\d+)?|\{[\s\S]*\}|\[[\s\S]*\])$/.test(s))try{return t.parseJSON(s)}catch(t){}return s}}},getItemProperty:function(t,i){var e=t[i];return void 0===e&&void 0===(e=this.getDataProperty(t,i))&&(e=this.getNestedProperty(t,i)),e},initStartIndex:function(){var t,i=this.options.index,e=this.options.urlProperty;if(i&&"number"!=typeof i)for(t=0;t<this.num;t+=1)if(this.list[t]===i||this.getItemProperty(this.list[t],e)===this.getItemProperty(i,e)){i=t;break}this.index=this.circle(parseInt(i,10)||0)},initEventListeners:function(){var i=this,e=this.slidesContainer;function s(t){var e=i.support.transition&&i.support.transition.end===t.type?"transitionend":t.type;i["on"+e](t)}t(window).on("resize",s),t(document.body).on("keydown",s),this.container.on("click",s),e.on("wheel",s),this.support.touch?e.on("touchstart touchmove touchend touchcancel",s):this.options.emulateTouchEvents&&this.support.transition&&e.on("mousedown mousemove mouseup mouseout",s),this.support.transition&&e.on(this.support.transition.end,s),this.proxyListener=s},destroyEventListeners:function(){var i=this.slidesContainer,e=this.proxyListener;t(window).off("resize",e),t(document.body).off("keydown",e),this.container.off("click",e),i.off("wheel mousewheel DOMMouseScroll",e),this.support.touch?i.off("touchstart touchmove touchend touchcancel",e):this.options.emulateTouchEvents&&this.support.transition&&i.off("mousedown mousemove mouseup mouseout",e),this.support.transition&&i.off(this.support.transition.end,e)},handleOpen:function(){this.options.onopened&&this.options.onopened.call(this)},initWidget:function(){var i=this;return this.container=t(this.options.container),this.container.length?(this.slidesContainer=this.container.find(this.options.slidesContainer).first(),this.slidesContainer.length?(this.titleElement=this.container.find(this.options.titleElement).first(),1===this.num&&this.container.addClass(this.options.singleClass),this.options.onopen&&this.options.onopen.call(this),this.support.transition&&this.options.displayTransition?this.container.on(this.support.transition.end,(function t(e){e.target===i.container[0]&&(i.container.off(i.support.transition.end,t),i.handleOpen())})):this.handleOpen(),this.options.hidePageScrollbars&&(this.bodyOverflowStyle=document.body.style.overflow,document.body.style.overflow="hidden"),this.container[0].style.display="block",this.initSlides(),void this.container.addClass(this.options.displayClass)):(this.console.log("blueimp Gallery: Slides container not found.",this.options.slidesContainer),!1)):(this.console.log("blueimp Gallery: Widget container not found.",this.options.container),!1)},initOptions:function(i){this.options=t.extend({},this.options),(i&&i.carousel||this.options.carousel&&(!i||!1!==i.carousel))&&t.extend(this.options,this.carouselOptions),t.extend(this.options,i),this.num<3&&(this.options.continuous=!!this.options.continuous&&null),this.support.transition||(this.options.emulateTouchEvents=!1),this.options.event&&this.preventDefault(this.options.event)}}),v})),function(t){"use strict";"function"==typeof define&&define.amd?define(["./blueimp-helper","./blueimp-gallery"],t):t(window.blueimp.helper||window.jQuery,window.blueimp.Gallery)}((function(t,i){"use strict";t.extend(i.prototype.options,{indicatorContainer:"ol",activeIndicatorClass:"active",thumbnailProperty:"thumbnail",thumbnailIndicators:!0});var e=i.prototype.initSlides,s=i.prototype.addSlide,o=i.prototype.resetSlides,n=i.prototype.handleClick,a=i.prototype.handleSlide,r=i.prototype.handleClose,l={},h=!0;return t.extend(i.prototype,{createIndicator:function(i){h=!1;var e,s,o=this.indicatorPrototype.cloneNode(!1),n=this.getItemProperty(i,this.options.titleProperty),a=this.options.thumbnailProperty;return this.options.thumbnailIndicators&&(a&&(e=this.getItemProperty(i,a)),void 0===e&&(s=i.getElementsByTagName&&t(i).find("img")[0])&&(e=s.src),e?o.style.backgroundImage='url("'+e+'")':function(t,i,e){var s=l[i]||"";if(s)t.style.backgroundImage='url("'+s+'")';else{var o=new Image;o.onload=function(){if(!h){if(o.width>e){var n=document.createElement("canvas"),a=n.getContext("2d");n.width=o.width,n.height=o.height,a.drawImage(o,0,0),o.width>o.height?(n.height=o.height/o.width*e,n.width=e):(n.width=o.width/o.height*e,n.height=e),a.drawImage(n,0,0,n.width,n.height),a.drawImage(o,0,0,n.width,n.height),s=n.toDataURL()}else s=i;l[i]=s,t.style.backgroundImage='url("'+s+'")'}},o.src=i}}(o,i.href,20)),n&&(o.title=n),o},addIndicator:function(t){if(this.indicatorContainer.length){var i=this.createIndicator(this.list[t]);i.setAttribute("data-index",t),this.indicatorContainer[0].appendChild(i),this.indicators.push(i)}},setActiveIndicator:function(i){this.indicators&&(this.activeIndicator&&this.activeIndicator.removeClass(this.options.activeIndicatorClass),this.activeIndicator=t(this.indicators[i]),this.activeIndicator.addClass(this.options.activeIndicatorClass))},initSlides:function(t){t||(this.indicatorContainer=this.container.find(this.options.indicatorContainer),this.indicatorContainer.length&&(this.indicatorPrototype=document.createElement("li"),this.indicators=this.indicatorContainer[0].children)),e.call(this,t)},addSlide:function(t){s.call(this,t),this.addIndicator(t)},resetSlides:function(){o.call(this),this.indicatorContainer.empty(),this.indicators=[]},handleClick:function(t){var i=t.target||t.srcElement,e=i.parentNode;if(e===this.indicatorContainer[0])this.preventDefault(t),this.slide(this.getNodeIndex(i));else{if(e.parentNode!==this.indicatorContainer[0])return n.call(this,t);this.preventDefault(t),this.slide(this.getNodeIndex(e))}},handleSlide:function(t){a.call(this,t),this.setActiveIndicator(t)},resetThumbnailCaches:function(){l={}},handleClose:function(){this.activeIndicator&&this.activeIndicator.removeClass(this.options.activeIndicatorClass),h=!0,r.call(this)}}),i})),function(t,i){if("function"==typeof define&&define.amd)define([],i);else if("undefined"!=typeof exports)i();else{i(),t.FileSaver={}}}(this,(function(){"use strict";var t="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0;function i(t,i,e){var s=new XMLHttpRequest;s.open("GET",t),s.responseType="blob",s.onload=function(){o(s.response,i,e)},s.onerror=function(){console.error("could not download file")},s.send()}function e(t){var i=new XMLHttpRequest;i.open("HEAD",t,!1);try{i.send()}catch(t){}return i.status>=200&&i.status<=299}function s(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(e){var i=document.createEvent("MouseEvents");i.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(i)}}var o=t.saveAs||("object"!=typeof window||window!==t?function(){}:"download"in HTMLAnchorElement.prototype?function(o,n,a){var r=t.URL||t.webkitURL,l=document.createElement("a");n=n||o.name||"download",l.download=n,l.rel="noopener","string"==typeof o?(l.href=o,l.origin!==location.origin?e(l.href)?i(o,n,a):s(l,l.target="_blank"):s(l)):(l.href=r.createObjectURL(o),setTimeout((function(){r.revokeObjectURL(l.href)}),4e4),setTimeout((function(){s(l)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,o,n){if(o=o||t.name||"download","string"==typeof t)if(e(t))i(t,o,n);else{var a=document.createElement("a");a.href=t,a.target="_blank",setTimeout((function(){s(a)}))}else navigator.msSaveOrOpenBlob(function(t,i){return void 0===i?i={autoBom:!1}:"object"!=typeof i&&(console.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t}(t,n),o)}:function(e,s,o,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),"string"==typeof e)return i(e,s,o);var a="application/octet-stream"===e.type,r=/constructor/i.test(t.HTMLElement)||t.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||a&&r)&&"undefined"!=typeof FileReader){var h=new FileReader;h.onloadend=function(){var t=h.result;t=l?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=t:location=t,n=null},h.readAsDataURL(e)}else{var d=t.URL||t.webkitURL,c=d.createObjectURL(e);n?n.location=c:location.href=c,n=null,setTimeout((function(){d.revokeObjectURL(c)}),4e4)}});t.saveAs=o.saveAs=o,"undefined"!=typeof module&&(module.exports=o)})),function(t){var i=function(i,s){if(this.$element=t(i),this.$note=t('<div class="ui message"></div>'),this.options=t.extend(!0,{},t.fn.notify.defaults,s),this.options.transition?"fade"==this.options.transition?this.$note.addClass("in").addClass(this.options.transition):this.$note.addClass(this.options.transition):this.$note.addClass("fade").addClass("in"),this.options.type?this.$note.addClass(""+this.options.type):this.$note.addClass("info"),this.options.message||""===this.$element.data("message")?"object"==typeof this.options.message&&(this.options.message.html?this.$note.html(this.options.message.html):this.options.message.text?this.$note.text(this.options.message.text):this.$note.html(this.options.message)):this.$note.html(this.$element.data("message")),this.options.closable){var o=t('<i class="close_self close icon"></i>'),n=t('<i class="close_all close icon"></i>');t(o).one("click",t.proxy(e,this)),t(n).one("click",(function(){t(".notifications>.ui.message>.close").not(".close_all").trigger("click")})),this.$note.addClass("closable"),this.$note.prepend(o),this.$note.prepend(n),closables=this.$element.find(".closable"),closables.removeClass("closable_first"),closables.length>0&&t(closables[0]).addClass("closable_first")}var a="info";switch(this.options.type){case"warning":a="exclamation circle";break;case"error":a="exclamation triangle"}return this.options.icon&&(a=this.options.icon),this.$note.prepend("<i class='icon "+a+" corner_icon'></i>"),this},e=function(){var i=this;$note=t(this.$note),$note.transition("fly left",500,(function(){t.proxy(s,i)()}))},s=function(){return this.options.onClose(),$note=t(this.$note),$note.remove(),this.options.onClosed(),closables=this.$element.find(".closable"),closables.removeClass("closable_first"),closables.length>1&&t(closables[0]).addClass("closable_first"),!1};i.prototype.show=function(){this.options.fadeOut.enabled&&this.$note.delay(this.options.fadeOut.delay||3e3).fadeOut("slow",t.proxy(s,this)),this.$element.append(this.$note),this.$note.show()},i.prototype.hide=function(){this.options.fadeOut.enabled?this.$note.delay(this.options.fadeOut.delay||3e3).fadeOut("slow",t.proxy(s,this)):s.call(this)},t.fn.notify=function(t){return new i(this,t)},t.fn.notify.defaults={type:"info",closable:!1,transition:"fade",fadeOut:{enabled:!0,delay:3e3},message:null,onClose:function(){},onClosed:function(){}}}(window.jQuery);
