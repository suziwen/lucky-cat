/*! For license information please see app.js.LICENSE.txt */
var G6Network;(()=>{var t={62238:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=function(t,e){var n=t.nodes,i=t.edges,r=[],o={};if(!n)throw new Error("invalid nodes data!");return n&&n.forEach((function(t,e){o[t.id]=e;r.push([])})),i&&i.forEach((function(t){var n=t.source,i=t.target,a=o[n],s=o[i];!a&&0!==a||!s&&0!==s||(r[a][s]=1,e||(r[s][a]=1))})),r};e.default=n},10369:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"getAdjMatrixAsync",{enumerable:!0,get:function(){return i.getAdjMatrixAsync}}),Object.defineProperty(e,"connectedComponentAsync",{enumerable:!0,get:function(){return i.connectedComponentAsync}}),Object.defineProperty(e,"getDegreeAsync",{enumerable:!0,get:function(){return i.getDegreeAsync}}),Object.defineProperty(e,"getInDegreeAsync",{enumerable:!0,get:function(){return i.getInDegreeAsync}}),Object.defineProperty(e,"getOutDegreeAsync",{enumerable:!0,get:function(){return i.getOutDegreeAsync}}),Object.defineProperty(e,"detectCycleAsync",{enumerable:!0,get:function(){return i.detectCycleAsync}}),Object.defineProperty(e,"detectAllCyclesAsync",{enumerable:!0,get:function(){return i.detectAllCyclesAsync}}),Object.defineProperty(e,"detectAllDirectedCycleAsync",{enumerable:!0,get:function(){return i.detectAllDirectedCycleAsync}}),Object.defineProperty(e,"detectAllUndirectedCycleAsync",{enumerable:!0,get:function(){return i.detectAllUndirectedCycleAsync}}),Object.defineProperty(e,"dijkstraAsync",{enumerable:!0,get:function(){return i.dijkstraAsync}}),Object.defineProperty(e,"findAllPathAsync",{enumerable:!0,get:function(){return i.findAllPathAsync}}),Object.defineProperty(e,"findShortestPathAsync",{enumerable:!0,get:function(){return i.findShortestPathAsync}}),Object.defineProperty(e,"floydWarshallAsync",{enumerable:!0,get:function(){return i.floydWarshallAsync}}),Object.defineProperty(e,"labelPropagationAsync",{enumerable:!0,get:function(){return i.labelPropagationAsync}}),Object.defineProperty(e,"louvainAsync",{enumerable:!0,get:function(){return i.louvainAsync}}),Object.defineProperty(e,"minimumSpanningTreeAsync",{enumerable:!0,get:function(){return i.minimumSpanningTreeAsync}}),Object.defineProperty(e,"pageRankAsync",{enumerable:!0,get:function(){return i.pageRankAsync}}),Object.defineProperty(e,"getNeighborsAsync",{enumerable:!0,get:function(){return i.getNeighborsAsync}}),Object.defineProperty(e,"GADDIAsync",{enumerable:!0,get:function(){return i.GADDIAsync}}),e.default=e.detectDirectedCycleAsync=void 0;var i=n(30485),r=i.detectCycleAsync;e.detectDirectedCycleAsync=r;var o={getAdjMatrixAsync:i.getAdjMatrixAsync,connectedComponentAsync:i.connectedComponentAsync,getDegreeAsync:i.getDegreeAsync,getInDegreeAsync:i.getInDegreeAsync,getOutDegreeAsync:i.getOutDegreeAsync,detectCycleAsync:i.detectCycleAsync,detectDirectedCycleAsync:r,detectAllCyclesAsync:i.detectAllCyclesAsync,detectAllDirectedCycleAsync:i.detectAllDirectedCycleAsync,detectAllUndirectedCycleAsync:i.detectAllUndirectedCycleAsync,dijkstraAsync:i.dijkstraAsync,findAllPathAsync:i.findAllPathAsync,findShortestPathAsync:i.findShortestPathAsync,floydWarshallAsync:i.floydWarshallAsync,labelPropagationAsync:i.labelPropagationAsync,louvainAsync:i.louvainAsync,minimumSpanningTreeAsync:i.minimumSpanningTreeAsync,pageRankAsync:i.pageRankAsync,getNeighborsAsync:i.getNeighborsAsync,GADDIAsync:i.GADDIAsync};e.default=o},83764:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i,r=(i=n(93026))&&i.__esModule?i:{default:i},o=n(70643);var a=function(t,e,n,i){void 0===i&&(i=!0);var a=function(t){void 0===t&&(t={});var e,n=t,i=function(){},r=(e={},function(t){var n=t.next;return!e[n]&&(e[n]=!0,!0)});return n.allowTraversal=t.allowTraversal||r,n.enter=t.enter||i,n.leave=t.leave||i,n}(n),s=new r.default,l=t.edges,u=void 0===l?[]:l;s.enqueue(e);for(var c="",h=function(){var t=s.dequeue();a.enter({current:t,previous:c}),(0,o.getNeighbors)(t,u,i?"target":void 0).forEach((function(e){a.allowTraversal({previous:c,current:t,next:e})&&s.enqueue(e)})),a.leave({current:t,previous:c}),c=t};!s.isEmpty();)h()};e.default=a},59527:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return e?o(t):r(t)},e.detectStrongConnectComponents=e.detectConnectedComponents=void 0;var i=n(70643),r=function(t){for(var e=t.nodes,n=void 0===e?[]:e,r=t.edges,o=void 0===r?[]:r,a=[],s={},l=[],u=function t(e){l.push(e),s[e.id]=!0;for(var r=(0,i.getNeighbors)(e.id,o),a=function(e){var i=r[e];if(!s[i]){var o=n.filter((function(t){return t.id===i}));o.length>0&&t(o[0])}},u=0;u<r.length;++u)a(u)},c=0;c<n.length;c++){var h=n[c];if(!s[h.id]){u(h);for(var d=[];l.length>0;)d.push(l.pop());a.push(d)}}return a};e.detectConnectedComponents=r;var o=function(t){for(var e=t.nodes,n=void 0===e?[]:e,r=t.edges,o=void 0===r?[]:r,a=[],s={},l={},u={},c=[],h=0,d=function t(e){l[e.id]=h,u[e.id]=h,h+=1,a.push(e),s[e.id]=!0;for(var r=(0,i.getNeighbors)(e.id,o,"target").filter((function(t){return n.map((function(t){return t.id})).indexOf(t)>-1})),d=function(i){var o=r[i];if(l[o]||0===l[o])s[o]&&(u[e.id]=Math.min(u[e.id],l[o]));else{var a=n.filter((function(t){return t.id===o}));a.length>0&&t(a[0]),u[e.id]=Math.min(u[e.id],u[o])}},f=0;f<r.length;f++)d(f);if(u[e.id]===l[e.id]){for(var p=[];a.length>0;){var m=a.pop();if(s[m.id]=!1,p.push(m),m===e)break}p.length>0&&c.push(p)}},f=0,p=n;f<p.length;f++){var m=p[f];l[m.id]||0===l[m.id]||d(m)}return c};e.detectStrongConnectComponents=o},82556:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getOutDegree=e.getInDegree=e.default=void 0;var n=function(t){var e={},n=t.nodes,i=void 0===n?[]:n,r=t.edges,o=void 0===r?[]:r;return i.forEach((function(t){e[t.id]={degree:0,inDegree:0,outDegree:0}})),o.forEach((function(t){e[t.source].degree++,e[t.source].outDegree++,e[t.target].degree++,e[t.target].inDegree++})),e},i=n;e.default=i;e.getInDegree=function(t,e){return n(t)[e]?n(t)[e].inDegree:0};e.getOutDegree=function(t,e){return n(t)[e]?n(t)[e].outDegree:0}},94282:(t,e,n)=>{"use strict";function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.detectAllCycles=e.detectAllDirectedCycle=e.detectAllUndirectedCycle=void 0;var r,o=(r=n(45891))&&r.__esModule?r:{default:r},a=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==i(t)&&"function"!=typeof t)return{default:t};var e=l();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var a=r?Object.getOwnPropertyDescriptor(t,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=t[o]}n.default=t,e&&e.set(t,n);return n}(n(59527)),s=n(70643);function l(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return l=function(){return t},t}var u=function(t,e,n){var i,r;void 0===n&&(n=!0);for(var o=[],l=0,u=(0,a.default)(t,!1);l<u.length;l++){var c=u[l];if(c.length)for(var h=c[0],d=h.id,f=[h],p=((i={})[d]=h,i),m=((r={})[d]=new Set,r);f.length>0;)for(var g=f.pop(),v=g.id,y=(0,s.getNeighbors)(v,t.edges),b=function(i){var r,a=y[i],s=t.nodes.find((function(t){return t.id===a}));if(a===v)o.push(((r={})[a]=g,r));else if(a in m){if(!m[v].has(s)){for(var l=!0,u=[s,g],c=p[v];m[a].size&&!m[a].has(c)&&(u.push(c),c!==p[c.id]);)c=p[c.id];if(u.push(c),e&&n?(l=!1,u.findIndex((function(t){return e.indexOf(t.id)>-1}))>-1&&(l=!0)):e&&!n&&u.findIndex((function(t){return e.indexOf(t.id)>-1}))>-1&&(l=!1),l){for(var h={},d=1;d<u.length;d+=1)h[u[d-1].id]=u[d];u.length&&(h[u[u.length-1].id]=u[0]),o.push(h)}m[a].add(g)}}else p[a]=g,f.push(s),m[a]=new Set([g])},_=0;_<y.length;_+=1)b(_)}return o};e.detectAllUndirectedCycle=u;var c=function(t,e,n){void 0===n&&(n=!0);for(var i=[],r=new Set,o=[],l=[],u={},c={},h=function t(a,s,c){var h=!1;if(e&&!1===n&&e.indexOf(a.id)>-1)return h;i.push(a),r.add(a);for(var d=c[a.id],f=0;f<d.length;f+=1){if((g=u[d[f]])===s){for(var p={},m=1;m<i.length;m+=1)p[i[m-1].id]=i[m];i.length&&(p[i[i.length-1].id]=i[0]),l.push(p),h=!0}else r.has(g)||t(g,s,c)&&(h=!0)}if(h)!function(t){for(var e=[t];e.length>0;){var n=e.pop();r.has(n)&&(r.delete(n),o[n.id].forEach((function(t){e.push(t)})),o[n.id].clear())}}(a);else for(f=0;f<d.length;f+=1){var g=u[d[f]];o[g.id].has(a)||o[g.id].add(a)}return i.pop(),h},d=t.nodes,f=void 0===d?[]:d,p=0;p<f.length;p+=1){var m=f[p],g=m.id;c[g]=p,u[p]=m}if(e&&n){var v=function(t){var n=e[t];c[f[t].id]=c[n],c[n]=0,u[0]=f.find((function(t){return t.id===n})),u[c[f[t].id]]=f[t]};for(p=0;p<e.length;p++)v(p)}for(var y=function(i){for(var r,o,a=1/0,u=0;u<i.length;u+=1)for(var h=i[u],d=0;d<h.length;d++){var f=c[h[d].id];f<a&&(a=f,o=u)}var p=i[o],m=[];for(u=0;u<p.length;u+=1){var g=p[u];m[g.id]=[];for(var v=0,y=(0,s.getNeighbors)(g.id,t.edges,"target").filter((function(t){return p.map((function(t){return t.id})).indexOf(t)>-1}));v<y.length;v++){var b=y[v];b!==g.id||!1===n&&e.indexOf(g.id)>-1?m[g.id].push(c[b]):l.push(((r={})[g.id]=g,r))}}return{component:p,adjList:m,minIdx:a}},b=0;b<f.length;){var _=f.filter((function(t){return c[t.id]>=b})),w=(0,a.detectStrongConnectComponents)({nodes:_,edges:t.edges}).filter((function(t){return t.length>1}));if(0===w.length)break;var x=y(w),M=x.minIdx,E=x.adjList,S=x.component;if(!(S.length>1))break;S.forEach((function(t){o[t.id]=new Set}));var k=u[M];if(e&&n&&-1===e.indexOf(k.id))return l;h(k,k,E),b=M+1}return l};e.detectAllDirectedCycle=c;e.detectAllCycles=function(t,e,n,i){return void 0===i&&(i=!0),e?c(t,n,i):u(t,n,i)};var h=function(t){var e=null,n=t.nodes,i={},r={},a={},s={};(void 0===n?[]:n).forEach((function(t){r[t.id]=t}));for(var l={enter:function(t){var n=t.current,o=t.previous;if(a[n]){e={};for(var s=n,l=o;l!==n;)e[s]=l,s=l,l=i[l];e[s]=l}else a[n]=n,delete r[n],i[n]=o},leave:function(t){var e=t.current;s[e]=e,delete a[e]},allowTraversal:function(t){var n=t.next;return!e&&!s[n]}};Object.keys(r).length;){var u=Object.keys(r)[0];(0,o.default)(t,u,l)}return e};e.default=h},45891:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n){r(t,e,"",function(t){void 0===t&&(t={});var e=t,n=function(){},i=(r={},function(t){var e=t.next;return!r[e]&&(r[e]=!0,!0)});var r;return e.allowTraversal=t.allowTraversal||i,e.enter=t.enter||n,e.leave=t.leave||n,e}(n))};var i=n(70643);function r(t,e,n,o){o.enter({current:e,previous:n});var a=t.edges,s=void 0===a?[]:a;(0,i.getNeighbors)(e,s,"target").forEach((function(i){o.allowTraversal({previous:n,current:e,next:i})&&r(t,i,e,o)})),o.leave({current:e,previous:n})}},78089:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(70655),r=n(49242),o=n(70643),a=function(t,e,n,i){var r=t.nodes,a=void 0===r?[]:r,l=t.edges,u=void 0===l?[]:l,c=[],h={},d={},f={};a.forEach((function(t,n){var i=t.id;c.push(i),d[i]=1/0,i===e&&(d[i]=0)}));for(var p=a.length,m=function(t){var e=function(t,e,n){for(var i,r=1/0,o=0;o<e.length;o++){var a=e[o].id;!n[a]&&t[a]<=r&&(r=t[a],i=e[o])}return i}(d,a,h),r=e.id;if(h[r]=!0,d[r]===1/0)return"continue";(n?(0,o.getOutEdgesNodeId)(r,u):(0,o.getEdgesByNodeId)(r,u)).forEach((function(t){var n=t.target,o=t.source,a=n===r?o:n,s=i&&t[i]?t[i]:1;d[a]>d[e.id]+s?(d[a]=d[e.id]+s,f[a]=[e.id]):d[a]===d[e.id]+s&&f[a].push(e.id)}))},g=0;g<p;g++)m();f[e]=[e];var v={};for(var y in d)d[y]!==1/0&&s(e,y,f,v);var b={};for(var y in v)b[y]=v[y][0];return{length:d,path:b,allPath:v}};function s(t,e,n,o){if(t===e)return[t];if(o[e])return o[e];for(var a=[],l=0,u=n[e];l<u.length;l++){var c=s(t,u[l],n,o);if(!c)return;for(var h=0,d=c;h<d.length;h++){var f=d[h];(0,r.isArray)(f)?a.push((0,i.__spreadArray)((0,i.__spreadArray)([],f),[e])):a.push([f,e])}}return o[e]=a,o[e]}e.default=a},41727:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.findAllPath=e.findShortestPath=void 0;var i,r=(i=n(78089))&&i.__esModule?i:{default:i},o=n(70643);e.findShortestPath=function(t,e,n,i,o){var a=(0,r.default)(t,e,i,o),s=a.length,l=a.path,u=a.allPath;return{length:s[n],path:l[n],allPath:u[n]}};e.findAllPath=function(t,e,n,i){var r;if(e===n)return[[e]];var a=t.edges,s=void 0===a?[]:a,l=[e],u=((r={})[e]=!0,r),c=[],h=[],d=i?(0,o.getNeighbors)(e,s,"target"):(0,o.getNeighbors)(e,s);for(c.push(d);l.length>0&&c.length>0;){var f=c[c.length-1];if(f.length){var p=f.shift();if(p&&(l.push(p),u[p]=!0,d=i?(0,o.getNeighbors)(p,s,"target"):(0,o.getNeighbors)(p,s),c.push(d.filter((function(t){return!u[t]})))),l[l.length-1]===n){var m=l.map((function(t){return t}));h.push(m);g=l.pop();u[g]=!1,c.pop()}}else{var g=l.pop();u[g]=!1,c.pop()}}return h}},75033:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i,r=(i=n(62238))&&i.__esModule?i:{default:i};var o=function(t,e){for(var n=(0,r.default)(t,e),i=[],o=n.length,a=0;a<o;a+=1){i[a]=[];for(var s=0;s<o;s+=1)a===s?i[a][s]=0:0!==n[a][s]&&n[a][s]?i[a][s]=n[a][s]:i[a][s]=1/0}for(var l=0;l<o;l+=1)for(a=0;a<o;a+=1)for(s=0;s<o;s+=1)i[a][s]>i[a][l]+i[l][s]&&(i[a][s]=i[a][l]+i[l][s]);return i};e.default=o},21146:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(49242),r=n(68575),o=function(){function t(t,e,n,i,o){this.fromNode=t,this.toNode=e,this.nodeEdgeNodeLabel={nodeLabel1:n||r.VACANT_NODE_LABEL,edgeLabel:i||r.VACANT_EDGE_LABEL,nodeLabel2:o||r.VACANT_NODE_LABEL}}return t.prototype.equalTo=function(t){return this.fromNode===t.formNode&&this.toNode===t.toNode&&this.nodeEdgeNodeLabel===t.nodeEdgeNodeLabel},t.prototype.notEqualTo=function(t){return!this.equalTo(t)},t}(),a=function(){function t(){this.rmpath=[],this.dfsEdgeList=[]}return t.prototype.equalTo=function(t){var e=this.dfsEdgeList.length;if(e!==t.length)return!1;for(var n=0;n<e;n++)if(this.dfsEdgeList[n]!==t[n])return!1;return!0},t.prototype.notEqualTo=function(t){return!this.equalTo(t)},t.prototype.pushBack=function(t,e,n,i,r){return this.dfsEdgeList.push(new o(t,e,n,i,r)),this.dfsEdgeList},t.prototype.toGraph=function(t,e){void 0===t&&(t=r.VACANT_GRAPH_ID),void 0===e&&(e=!1);var n=new r.Graph(t,!0,e);return this.dfsEdgeList.forEach((function(t){var e=t.fromNode,i=t.toNode,o=t.nodeEdgeNodeLabel,a=o.nodeLabel1,s=o.edgeLabel,l=o.nodeLabel2;a!==r.VACANT_NODE_LABEL&&n.addNode(e,a),l!==r.VACANT_NODE_LABEL&&n.addNode(i,l),a!==r.VACANT_NODE_LABEL&&l!==a&&n.addEdge(void 0,e,i,s)})),n},t.prototype.buildRmpath=function(){this.rmpath=[];for(var t=void 0,e=this.dfsEdgeList.length-1;e>=0;e--){var n=this.dfsEdgeList[e],i=n.fromNode,r=n.toNode;i<r&&(void 0===t||r===t)&&(this.rmpath.push(e),t=i)}return this.rmpath},t.prototype.getNodeNum=function(){var t={};return this.dfsEdgeList.forEach((function(e){t[e.fromNode]||(t[e.fromNode]=!0),t[e.toNode]||(t[e.toNode]=!0)})),Object.keys(t).length},t}(),s=function(){function t(t){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],t){for(;t;){var e=t.edge;this.edges.push(e),this.nodesUsed[e.from]=1,this.nodesUsed[e.to]=1,this.edgesUsed[e.id]=1,t=t.preNode}this.edges=this.edges.reverse()}}return t.prototype.hasNode=function(t){return 1===this.nodesUsed[t.id]},t.prototype.hasEdge=function(t){return 1===this.edgesUsed[t.id]},t}(),l=function(){function t(t){var e=t.graphs,n=t.minSupport,i=void 0===n?2:n,r=t.minNodeNum,o=void 0===r?1:r,s=t.maxNodeNum,l=void 0===s?4:s,u=t.top,c=void 0===u?10:u,h=t.directed,d=void 0!==h&&h,f=t.verbose,p=void 0!==f&&f;this.graphs=e,this.dfsCode=new a,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=i,this.top=c,this.directed=d,this.counter=0,this.maxNodeNum=l,this.minNodeNum=o,this.verbose=p,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return t.prototype.findForwardRootEdges=function(t,e){var n=this,i=[],r=t.nodeMap;return e.edges.forEach((function(t){(n.directed||e.label<=r[t.to].label)&&i.push(t)})),i},t.prototype.findBackwardEdge=function(t,e,n,i){if(!this.directed&&e===n)return null;for(var r=t.nodeMap,o=r[n.to].edges,a=o.length,s=0;s<a;s++){var l=o[s];if(!i.hasEdge(l)&&l.to===e.from)if(this.directed){if(r[e.from].label<r[n.to].label||r[e.from].label===r[n.to].label&&e.label<=l.label)return l}else if(e.label<l.label||e.label===l.label&&r[e.to].label<=r[n.to].label)return l}return null},t.prototype.findForwardPureEdges=function(t,e,n,i){for(var r=[],o=e.to,a=t.nodeMap[o].edges,s=a.length,l=0;l<s;l++){var u=a[l],c=t.nodeMap[u.to];n<=c.label&&!i.hasNode(c)&&r.push(u)}return r},t.prototype.findForwardRmpathEdges=function(t,e,n,i){for(var r=[],o=t.nodeMap,a=o[e.to].label,s=o[e.from].edges,l=s.length,u=0;u<l;u++){var c=s[u],h=o[c.to].label;e.to===c.to||n>h||i.hasNode(o[c.to])||(e.label<c.label||e.label===c.label&&a<=h)&&r.push(c)}return r},t.prototype.getSupport=function(t){var e={};return t.forEach((function(t){e[t.graphId]||(e[t.graphId]=!0)})),Object.keys(e).length},t.prototype.findMinLabel=function(t){var e=void 0;return Object.keys(t).forEach((function(n){var i=t[n],r=i.nodeLabel1,o=i.edgeLabel,a=i.nodeLabel2;e?(r<e.nodeLabel1||r===e.nodeLabel1&&o<e.edgeLabel||r===e.nodeLabel1&&o===e.edgeLabel&&a<e.nodeLabel2)&&(e={nodeLabel1:r,edgeLabel:o,nodeLabel2:a}):e={nodeLabel1:r,edgeLabel:o,nodeLabel2:a}})),e},t.prototype.isMin=function(){var t=this,e=this.dfsCode;if(this.verbose&&console.log("isMin checking",e),1===e.dfsEdgeList.length)return!0;var n=this.directed,i=e.toGraph(r.VACANT_GRAPH_ID,n),l=i.nodeMap,u=new a,c={};i.nodes.forEach((function(e){t.findForwardRootEdges(i,e).forEach((function(t){var n=l[t.to],r=e.label+"-"+t.label+"-"+n.label;c[r]||(c[r]={projected:[],nodeLabel1:e.label,edgeLabel:t.label,nodeLabel2:n.label});var o={graphId:i.id,edge:t,preNode:null};c[r].projected.push(o)}))}));var h=this.findMinLabel(c);if(h){u.dfsEdgeList.push(new o(0,1,h.nodeLabel1,h.edgeLabel,h.nodeLabel2));var d=h.nodeLabel1+"-"+h.edgeLabel+"-"+h.nodeLabel2;return function a(c){for(var h=u.buildRmpath(),d=u.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,f=u.dfsEdgeList[h[0]].toNode,p={},m=!1,g=0,v=n?-1:0,y=function(e){if(m)return"break";c.forEach((function(n){var r=new s(n),o=t.findBackwardEdge(i,r.edges[h[e]],r.edges[h[0]],r);o&&(p[o.label]||(p[o.label]={projected:[],edgeLabel:o.label}),p[o.label].projected.push({graphId:i.id,edge:p,preNode:n}),g=u.dfsEdgeList[h[e]].fromNode,m=!0)}))},b=h.length-1;b>v;b--){if("break"===y(b))break}if(m){var _=t.findMinLabel(p);u.dfsEdgeList.push(new o(f,g,r.VACANT_NODE_LABEL,_.edgeLabel,r.VACANT_NODE_LABEL));var w=u.dfsEdgeList.length-1;return t.dfsCode.dfsEdgeList[w]===u.dfsEdgeList[w]&&a(p[_.edgeLabel].projected)}var x={};m=!1;var M=0;c.forEach((function(e){var n=new s(e),r=t.findForwardPureEdges(i,n.edges[h[0]],d,n);r.length>0&&(m=!0,M=f,r.forEach((function(t){var n=t.label+"-"+l[t.to].label;x[n]||(x[n]={projected:[],edgeLabel:t.label,nodeLabel2:l[t.to].label}),x[n].projected.push({graphId:i.id,edge:t,preNode:e})})))}));var E=h.length,S=function(e){if(m)return"break";var n=h[e];c.forEach((function(e){var r=new s(e),o=t.findForwardRmpathEdges(i,r.edges[n],d,r);o.length>0&&(m=!0,M=u.dfsEdgeList[n].fromNode,o.forEach((function(t){var n=t.label+"-"+l[t.to].label;x[n]||(x[n]={projected:[],edgeLabel:t.label,nodeLabel2:l[t.to].label}),x[n].projected.push({graphId:i.id,edge:t,preNode:e})})))}))};for(b=0;b<E;b++){if("break"===S(b))break}if(!m)return!0;var k=t.findMinLabel(x);u.dfsEdgeList.push(new o(M,f+1,r.VACANT_NODE_LABEL,k.edgeLabel,k.nodeLabel2));var C=u.dfsEdgeList.length-1;return e.dfsEdgeList[C]===u.dfsEdgeList[C]&&a(x[k.edgeLabel+"-"+k.nodeLabel2].projected)}(c[d].projected)}},t.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var t=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push((0,i.clone)(t))}},t.prototype.subGraphMining=function(t){var e=this;if(!(this.getSupport(t)<this.minSupport)&&this.isMin()){this.report();var n=this.dfsCode.getNodeNum(),i=this.dfsCode.buildRmpath(),a=this.dfsCode.dfsEdgeList[i[0]].toNode,l=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,u={},c={};t.forEach((function(t){for(var r=e.graphs[t.graphId],o=r.nodeMap,h=new s(t),d=i.length-1;d>=0;d--){var f=e.findBackwardEdge(r,h.edges[i[d]],h.edges[i[0]],h);if(f){var p=e.dfsCode.dfsEdgeList[i[d]].fromNode+"-"+f.label;c[p]||(c[p]={projected:[],toNodeId:e.dfsCode.dfsEdgeList[i[d]].fromNode,edgeLabel:f.label}),c[p].projected.push({graphId:t.graphId,edge:f,preNode:t})}}if(!(n>=e.maxNodeNum)){e.findForwardPureEdges(r,h.edges[i[0]],l,h).forEach((function(e){var n=a+"-"+e.label+"-"+o[e.to].label;u[n]||(u[n]={projected:[],fromNodeId:a,edgeLabel:e.label,nodeLabel2:o[e.to].label}),u[n].projected.push({graphId:t.graphId,edge:e,preNode:t})}));var m=function(n){e.findForwardRmpathEdges(r,h.edges[i[n]],l,h).forEach((function(r){var a=e.dfsCode.dfsEdgeList[i[n]].fromNode+"-"+r.label+"-"+o[r.to].label;u[a]||(u[a]={projected:[],fromNodeId:e.dfsCode.dfsEdgeList[i[n]].fromNode,edgeLabel:r.label,nodeLabel2:o[r.to].label}),u[a].projected.push({graphId:t.graphId,edge:r,preNode:t})}))};for(d=0;d<i.length;d++)m(d)}})),Object.keys(c).forEach((function(t){var n=c[t],i=n.toNodeId,r=n.edgeLabel;e.dfsCode.dfsEdgeList.push(new o(a,i,"-1",r,"-1")),e.subGraphMining(c[t].projected),e.dfsCode.dfsEdgeList.pop()})),Object.keys(u).forEach((function(t){var n=u[t],i=n.fromNodeId,s=n.edgeLabel,l=n.nodeLabel2;e.dfsCode.dfsEdgeList.push(new o(i,a+1,r.VACANT_NODE_LABEL,s,l)),e.subGraphMining(u[t].projected),e.dfsCode.dfsEdgeList.pop()}))}},t.prototype.generate1EdgeFrequentSubGraphs=function(){var t=this.graphs,e=this.directed,n=this.minSupport,i=this.frequentSize1Subgraphs,r={},o={},a={},s={};return Object.keys(t).forEach((function(n){var i=t[n],l=i.nodeMap;i.nodes.forEach((function(t,i){var u=t.label,c=n+"-"+u;if(!a[c]){var h=r[u]||0;h++,r[u]=h}a[c]={graphKey:n,label:u},t.edges.forEach((function(t){var i=u,r=l[t.to].label;if(!e&&i>r){var a=r;r=i,i=a}var c=t.label,h=n+"-"+i+"-"+c+"-"+r,d=i+"-"+c+"-"+r;if(!o[d]){var f=o[d]||0;f++,o[d]=f}s[h]={graphId:n,nodeLabel1:i,edgeLabel:c,nodeLabel2:r}}))}))})),Object.keys(r).forEach((function(t){if(!(r[t]<n)){var e={nodes:[],edges:[]};e.nodes.push({id:"0",label:t}),i.push(e)}})),i},t.prototype.run=function(){var t=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var e=this.graphs,n=(this.directed,{});Object.keys(e).forEach((function(i){var r=e[i],o=r.nodeMap;r.nodes.forEach((function(e){t.findForwardRootEdges(r,e).forEach((function(t){var r=o[t.to],a=e.label+"-"+t.label+"-"+r.label;n[a]||(n[a]={projected:[],nodeLabel1:e.label,edgeLabel:t.label,nodeLabel2:r.label});var s={graphId:i,edge:t,preNode:null};n[a].projected.push(s)}))}))})),Object.keys(n).forEach((function(e){var i=n[e],r=i.projected,a=i.nodeLabel1,s=i.edgeLabel,l=i.nodeLabel2;t.dfsCode.dfsEdgeList.push(new o(0,1,a,s,l)),t.subGraphMining(r),t.dfsCode.dfsEdgeList.pop()}))}},t}(),u="cluster",c=function(t){var e=t.graphs,n=t.directed,i=void 0!==n&&n,o=t.nodeLabelProp,a=void 0===o?u:o,s=t.edgeLabelProp,c=void 0===s?u:s,h=function(t,e,n,i){var o={};return Object.keys(t).forEach((function(a,s){var l=t[a],u=new r.Graph(s,!0,e),c={};l.nodes.forEach((function(t,e){u.addNode(e,t[n]),c[t.id]=e})),l.edges.forEach((function(t,e){var n=c[t.source],r=c[t.target];u.addEdge(-1,n,r,t[i])})),u&&u.getNodeNum()&&(o[u.id]=u)})),o}(e,i,a,c),d=t.minSupport,f=t.maxNodeNum,p=t.minNodeNum,m=t.verbose,g=t.top,v=new l({graphs:h,minSupport:d,maxNodeNum:f,minNodeNum:p,top:g,verbose:m,directed:i});v.run();var y=function(t,e,n){var i=[];return t.forEach((function(t){var r={nodes:[],edges:[]};t.nodes.forEach((function(t){var n;r.nodes.push(((n={id:""+t.id})[e]=t.label,n))})),t.edges.forEach((function(t){var e;r.edges.push(((e={source:""+t.from,target:""+t.to})[n]=t.label,e))})),i.push(r)})),i}(v.frequentSubgraphs,a,c);return y};e.default=c},68575:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Graph=e.Node=e.Edge=e.AUTO_EDGE_ID=e.VACANT_GRAPH_ID=e.VACANT_NODE_LABEL=e.VACANT_EDGE_LABEL=e.VACANT_NODE_ID=e.VACANT_EDGE_ID=void 0;e.VACANT_EDGE_ID=-1;e.VACANT_NODE_ID=-1;e.VACANT_EDGE_LABEL="-1";e.VACANT_NODE_LABEL="-1";e.VACANT_GRAPH_ID=-1;e.AUTO_EDGE_ID="-1";var n=function(t,e,n,i){void 0===t&&(t=-1),void 0===e&&(e=-1),void 0===n&&(n=-1),void 0===i&&(i="-1"),this.id=t,this.from=e,this.to=n,this.label=i};e.Edge=n;var i=function(){function t(t,e){void 0===t&&(t=-1),void 0===e&&(e="-1"),this.id=t,this.label=e,this.edges=[],this.edgeMap={}}return t.prototype.addEdge=function(t){this.edges.push(t),this.edgeMap[t.id]=t},t}();e.Node=i;var r=function(){function t(t,e,n){void 0===t&&(t=-1),void 0===e&&(e=!0),void 0===n&&(n=!1),this.id=t,this.edgeIdAutoIncrease=e,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=n}return t.prototype.getNodeNum=function(){return this.nodes.length},t.prototype.addNode=function(t,e){if(!this.nodeMap[t]){var n=new i(t,e);this.nodes.push(n),this.nodeMap[t]=n,this.nodeLabelMap[e]||(this.nodeLabelMap[e]=[]),this.nodeLabelMap[e].push(t)}},t.prototype.addEdge=function(t,e,i,r){if((this.edgeIdAutoIncrease||void 0===t)&&(t=this.counter++),!(this.nodeMap[e]&&this.nodeMap[i]&&this.nodeMap[i].edgeMap[t])){var o=new n(t,e,i,r);if(this.edges.push(o),this.edgeMap[t]=o,this.nodeMap[e].addEdge(o),this.edgeLabelMap[r]||(this.edgeLabelMap[r]=[]),this.edgeLabelMap[r].push(o),!this.directed){var a=new n(t,i,e,r);this.nodeMap[i].addEdge(a),this.edgeLabelMap[r].push(a)}}},t}();e.Graph=r},82812:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(70655),r=l(n(75033)),o=l(n(21146)),a=l(n(78089)),s=n(70643);function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t,e,n,i){void 0===n&&(n="cluster"),void 0===i&&(i=2);var r=[],o=t.nodes;return e.forEach((function(t,e){r.push(c(o,t,e,n,i))})),r},c=function(t,e,n,i,r){var o=[n],a=[],s={};return e.forEach((function(e,l){if(e<=r&&n!==l){o.push(l),a.push(t[l]);var u=t[l][i];s[u]?(s[u].count++,s[u].dists.push(e)):s[u]={count:1,dists:[e]}}})),Object.keys(s).forEach((function(t){s[t].dists=s[t].dists.sort((function(t,e){return t-e}))})),{nodeIdx:n,nodeId:t[n].id,nodeIdxs:o,neighbors:a,neighborNum:o.length-1,nodeLabelCountMap:s}},h=function(t,e,n,i){var r=n.nodes;return i||(i={}),Object.keys(t).forEach((function(o){var a,s;if(!i||!i[o]){i[o]={nodes:[],edges:[]};var l=t[o],u=null===(a=e[l.start])||void 0===a?void 0:a.nodeIdxs,c=null===(s=e[l.end])||void 0===s?void 0:s.nodeIdxs;if(u&&c){var h=new Set(c),d=u.filter((function(t){return h.has(t)}));if(d&&d.length){for(var f={},p=d.length,m=0;m<p;m++){var g=r[d[m]];i[o].nodes.push(g),f[g.id]=!0}n.edges.forEach((function(t){f[t.source]&&f[t.target]&&i[o].edges.push(t)}))}}}})),i},d=function(t,e,n,i){var r,o,a={};t.nodes.forEach((function(t){a[t.id]=t}));var s=0;return!(null===(r=null==e?void 0:e.edges)||void 0===r?void 0:r.length)||(null===(o=null==e?void 0:e.nodes)||void 0===o?void 0:o.length)<2?0:(t.edges.forEach((function(t){var r=a[t.source][n],o=a[t.target][n],l=null==e?void 0:e.nodes[0][n],u=null==e?void 0:e.nodes[1][n],c=null==e?void 0:e.edges[0][i];t[i]===c&&(r===l&&o===u||r===u&&o===l)&&s++})),s)},f=function(t,e){var n={},i={};return t.forEach((function(t,r){n[t.id]={idx:r,node:t,degree:0,inDegree:0,outDegree:0};var o=t[e];i[o]||(i[o]=[]),i[o].push(t)})),{nodeMap:n,nodeLabelMap:i}},p=function(t,e,n){var i={},r={};return t.forEach((function(t,o){i[""+s.uniqueId]={idx:o,edge:t};var a=t[e];r[a]||(r[a]=[]),r[a].push(t);var l=n[t.source];l&&(l.degree++,l.outDegree++);var u=n[t.target];u&&(u.degree++,u.inDegree++)})),{edgeMap:i,edgeLabelMap:r}},m=function(t,e,n){var i=e.length,r={};return e.forEach((function(e,o){for(var a=n?0:o+1,s=t[o].id,l=a;l<i;l++)if(o!==l){var u=t[l].id,c=e[l];r[s+"-"+u]=c,n||(r[u+"-"+s]=c)}})),r},g=function(t,e,n,i,r,o,a,s,l,u,c){var f,p=e.id+"-"+n.id;if(u&&u[p])return u[p];var m=c?c[p]:void 0;if(!m){var g=((f={})[p]={start:i[e.id].idx,end:i[n.id].idx,distance:r},f);m=(c=h(g,o,t,c))[p]}return d(m,a,s,l)},v=function(t,e,n,i){var r,o,a,s=null===(r=t[e])||void 0===r?void 0:r.degree,l=null===(o=t[e])||void 0===o?void 0:o.inDegree,u=null===(a=t[e])||void 0===a?void 0:a.outDegree;return void 0===t[e]&&(s=1/0,l=1/0,u=1/0,i[e].forEach((function(t){var e=n[t.id].degree;s>e&&(s=e);var i=n[t.id].inDegree;l>i&&(l=i);var r=n[t.id].outDegree;u>r&&(u=r)})),t[e]={degree:s,inDegree:l,outDegree:u}),{minPatternNodeLabelDegree:s,minPatternNodeLabelInDegree:l,minPatternNodeLabelOutDegree:u}},y=function(t,e,n,s,l,y,b){if(void 0===n&&(n=!1),void 0===y&&(y="cluster"),void 0===b&&(b="cluster"),t&&t.nodes){var _=t.nodes.length;if(_){var w=(0,r.default)(t,n),x=(0,r.default)(e,n),M=m(t.nodes,w,n),E=m(e.nodes,x,n),S=f(t.nodes,y),k=S.nodeMap,C=S.nodeLabelMap,T=f(e.nodes,y),D=T.nodeMap,L=T.nodeLabelMap;p(t.edges,b,k);var A=p(e.edges,b,D).edgeLabelMap,O=[];null==x||x.forEach((function(t){O=O.concat(t)})),l||(l=Math.max.apply(Math,(0,i.__spreadArray)((0,i.__spreadArray)([],O),[2]))),s||(s=l);var P=u(t,w,y,s),I=u(e,x,y,s),N=function(t,e,n,i,r){var o=Math.ceil(n/e),a={},s=0;return i.forEach((function(t,i){for(var l=0,u=0,c=t.nodeIdxs,h=t.neighborNum-1;l<o;){for(var d=c[1+Math.floor(Math.random()*h)],f=0;(a[i+"-"+d]||a[d+"-"+i])&&(d=Math.floor(Math.random()*e),!(++f>2*e)););if(f<2*e&&(a[i+"-"+d]={start:i,end:d,distance:r[i][d]},l++,++s>=n))return a;if(++u>2*e)break}l<o&&(o=(o+(o-l))/(e-i-1))})),a}(0,_,Math.min(100,_*(_-1)/2),I,w),R=h(N,P,t),Y={graphs:R,nodeLabelProp:y,edgeLabelProp:b,minSupport:1,minNodeNum:1,maxNodeNum:4,directed:n},j=(0,o.default)(Y).slice(0,10),F=j.length,B=[];j.forEach((function(t,e){B[e]={},Object.keys(R).forEach((function(n){var i=R[n],r=d(i,t,y,b);B[e][n]=r}))}));var z=function(t,e,n){for(var i=1/0,r=0,o=function(e){var n=t[e],o=Object.keys(n).sort((function(t,e){return n[t]-n[e]})),a=[];o.forEach((function(t,e){a[e%10]||(a[e%10]={graphs:[],totalCount:0,aveCount:0}),a[e%10].graphs.push(t),a[e%10].totalCount+=n[t]}));var s=0,l=[];a.forEach((function(t){var e=t.totalCount/t.graphs.length;t.aveCount=e,l.push(e);var i=0,r=t.length;t.graphs.forEach((function(e,r){var o=n[e];t.graphs.forEach((function(t,e){r!==e&&(i+=Math.abs(o-n[t]))}))})),s+=i/=r*(r-1)/2})),s/=a.length;var u=0;l.forEach((function(t,e){l.forEach((function(n,i){e!==i&&(u+=Math.abs(t-n))})),u/=l.length*(l.length-1)/2}));var c=u-s;i<c&&(i=c,r=e)},a=0;a<e;a++)o(a);return{structure:n[r],structureCountMap:t[r]}}(B,F,j),H=z.structure,G=z.structureCountMap,W=e.nodes[0],U=W[y],V=C[U],X={},q={},K={},$={},Z={},J={};Object.keys(L).forEach((function(i,r){Z[i]=[],n&&(J[i]=[]);var o=-1/0,a=L[i],s={};a.forEach((function(t){var e=E[W.id+"-"+t.id];if(e&&Z[i].push(e),o<e&&(o=e),s[W.id+"-"+t.id]={start:0,end:D[t.id].idx,distance:e},n){var r=E[t.id+"-"+W.id];r&&J[i].push(r)}})),Z[i]=Z[i].sort((function(t,e){return t-e})),n&&(J[i]=J[i].sort((function(t,e){return t-e}))),q=h(s,I,e,q);var l=[];if(Object.keys(s).forEach((function(t){if(K[t])l.push(K[t]);else{var e=q[t];K[t]=d(e,H,y,b),l.push(K[t])}})),l=l.sort((function(t,e){return e-t})),$[W.id+"-"+i]=l,i!==U)for(var u=function(e){var n=V[e],r=P[k[n.id].idx],o=r.nodeLabelCountMap[i],a=L[i].length;if(!o||o.count<a)return V.splice(e,1),"continue";for(var s=!1,u=0;u<a;u++)if(o.dists[u]>Z[i][u]){s=!0;break}if(s)return V.splice(e,1),"continue";var c={};r.neighbors.forEach((function(t){var e=M[n.id+"-"+t.id];c[n.id+"-"+t.id]={start:k[n.id].idx,end:k[t.id].idx,distance:e}})),R=h(c,P,t,R);var f=[];Object.keys(c).forEach((function(t){if(G[t])f.push(G[t]);else{var e=R[t];G[t]=d(e,H,y,b),f.push(G[t])}})),f=f.sort((function(t,e){return e-t}));var p=!1;for(u=0;u<a;u++)if(f[u]<l[u]){p=!0;break}return p?(V.splice(e,1),"continue"):void 0},c=V.length-1;c>=0;c--)u(c)}));var Q=[];null==V||V.forEach((function(i){for(var r=k[i.id].idx,o=c(t.nodes,w[r],r,y,l).neighbors,a=!1,s=o.length-1;s>=0;s--){if(o.length+1<e.nodes.length)return void(a=!0);var u=o[s],h=u[y];if(L[h]&&L[h].length)if(Z[h]&&Z[h].length){var d=i.id+"-"+u.id,f=M[d],p=Z[h].length-1;if(f>Z[h][p])o.splice(s,1);else{if(n){var m=u.id+"-"+i.id,_=M[m];if(p=J[h].length-1,_>J[h][p]){o.splice(s,1);continue}}var x=G[d]?G[d]:g(t,i,u,k,f,P,H,y,b,G,R),E=W.id+"-"+h;if(x<$[E][$[E].length-1])o.splice(s,1);else{var S=v(X,h,D,L),C=S.minPatternNodeLabelDegree;S.minPatternNodeLabelInDegree,S.minPatternNodeLabelOutDegree;k[u.id].degree<C&&o.splice(s,1)}}}else o.splice(s,1);else o.splice(s,1)}a||Q.push({nodes:[i].concat(o)})}));var tt=(0,a.default)(e,W.id,!1).length,et={};n?(Object.keys(tt).forEach((function(t){var e=D[t].node[y];et[e]?et[e].push(tt[t]):et[e]=[tt[t]]})),Object.keys(et).forEach((function(t){et[t].sort((function(t,e){return t-e}))}))):et=Z;for(var nt=function(i){var r=Q[i],o=r.nodes[0],s={},l={};r.nodes.forEach((function(t,e){l[t.id]={idx:e,node:t,degree:0,inDegree:0,outDegree:0};var n=t[y];s[n]?s[n]++:s[n]=1}));var u=[],c={};t.edges.forEach((function(t){l[t.source]&&l[t.target]&&(u.push(t),c[t[b]]?c[t[b]]++:c[t[b]]=1,l[t.source].degree++,l[t.target].degree++,l[t.source].outDegree++,l[t.target].inDegree++)}));for(var h=Object.keys(A).length,d=!1,f=0;f<h;f++){var p=Object.keys(A)[f];if(!c[p]||c[p]<A[p].length){d=!0;break}}if(d)return Q.splice(i,1),"continue";var m=u.length;if(m<e.edges.length)return Q.splice(i,1),"break";var g=!1,_=function(t){var e=u[t],i=e[b],r=A[i];if(!r||!r.length)return c[i]--,r&&c[i]<r.length?(g=!0,"break"):(u.splice(t,1),l[e.source].degree--,l[e.target].degree--,l[e.source].outDegree--,l[e.target].inDegree--,"continue");var o=l[e.source].node[y],a=l[e.target].node[y],s=!1;return r.forEach((function(t){var e=D[t.source].node,i=D[t.target].node;e[y]===o&&i[y]===a&&(s=!0),n||e[y]!==a||i[y]!==o||(s=!0)})),s?void 0:(c[i]--,r&&c[i]<r.length?(g=!0,"break"):(u.splice(t,1),l[e.source].degree--,l[e.target].degree--,l[e.source].outDegree--,l[e.target].inDegree--,"continue"))};for(f=m-1;f>=0;f--){if("break"===_(f))break}if(g)return Q.splice(i,1),"continue";r.edges=u;var w=(0,a.default)(r,r.nodes[0].id,!1).length;if(Object.keys(w).reverse().forEach((function(t){if(t!==r.nodes[0].id&&!g){if(w[t]===1/0){var e=l[t].node[y];if(s[e]--,s[e]<L[e].length)return void(g=!0);var n=r.nodes.indexOf(l[t].node);return r.nodes.splice(n,1),void(l[t]=void 0)}var i=k[t].node[y];if(!et[i]||!et[i].length||w[t]>et[i][et[i].length-1]){e=l[t].node[y];if(s[e]--,s[e]<L[e].length)return void(g=!0);n=r.nodes.indexOf(l[t].node);r.nodes.splice(n,1),l[t]=void 0}}})),g)return Q.splice(i,1),"continue";for(var x=!0,M=0;x&&!g;){if(x=!1,n?l[o.id].degree<D[W.id].degree||l[o.id].inDegree<D[W.id].inDegree||l[o.id].outDegree<D[W.id].outDegree:l[o.id].degree<D[W.id].degree){g=!0;break}if(s[o[y]]<L[o[y]].length){g=!0;break}for(var E=r.nodes.length-1;E>=0;E--){var S=r.nodes[E],C=l[S.id].degree,T=l[S.id].inDegree,O=l[S.id].outDegree,P=S[y],I=v(X,P,D,L),N=I.minPatternNodeLabelDegree,R=I.minPatternNodeLabelInDegree,Y=I.minPatternNodeLabelOutDegree;if(n?C<N||T<R||O<Y:C<N){if(s[S[y]]--,s[S[y]]<L[S[y]].length){g=!0;break}r.nodes.splice(E,1),l[S.id]=void 0,x=!0}}if(g||!x&&0!==M)break;for(var j=(m=u.length)-1;j>=0;j--){var F=u[j];if(!l[F.source]||!l[F.target]){u.splice(j,1);var B=F[b];if(c[B]--,l[F.source]&&(l[F.source].degree--,l[F.source].outDegree--),l[F.target]&&(l[F.target].degree--,l[F.target].inDegree--),A[B]&&c[B]<A[B].length){g=!0;break}x=!0}}M++}return g||g||r.nodes.length<e.nodes.length||u.length<e.edges.length?(Q.splice(i,1),"continue"):void 0},it=Q.length-1;it>=0;it--){if("break"===nt(it))break}var rt=Q.length,ot=function(t){var e=Q[t],n={};e.edges.forEach((function(t){var e=t.source+"-"+t.target+"-"+t.label;n[e]?n[e]++:n[e]=1}));for(var i=function(t){var e=Q[t],i={};e.edges.forEach((function(t){var e=t.source+"-"+t.target+"-"+t.label;i[e]?i[e]++:i[e]=1}));var r=!0;Object.keys(i).length!==Object.keys(n).length?r=!1:Object.keys(n).forEach((function(t){i[t]!==n[t]&&(r=!1)})),r&&Q.splice(t,1)},r=rt-1;r>t;r--)i(r);rt=Q.length};for(it=0;it<=rt-1;it++)ot(it);return Q}}};e.default=y},5170:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i,r=(i=n(62238))&&i.__esModule?i:{default:i},o=n(70643);var a=function(t,e,n,i){void 0===e&&(e=!1),void 0===n&&(n="weight"),void 0===i&&(i=1e3);var a=t.nodes,s=void 0===a?[]:a,l=t.edges,u=void 0===l?[]:l,c={},h={};s.forEach((function(t,e){var n=(0,o.uniqueId)();t.clusterId=n,c[n]={id:n,nodes:[t]},h[t.id]={node:t,idx:e}}));var d=(0,r.default)(t,e),f=[],p={};d.forEach((function(t,e){var n=0,i=s[e].id;p[i]={},t.forEach((function(t,e){if(t){n+=t;var r=s[e].id;p[i][r]=t}})),f.push(n)}));for(var m=0,g=function(){var t=!1;if(s.forEach((function(e){var n={};Object.keys(p[e.id]).forEach((function(t){var i=p[e.id][t],r=h[t].node.clusterId;n[r]||(n[r]=0),n[r]+=i}));var i=-1/0,r=[];if(Object.keys(n).forEach((function(t){i<n[t]?(i=n[t],r=[t]):i===n[t]&&r.push(t)})),1!==r.length||r[0]!==e.clusterId){var o=r.indexOf(e.clusterId);if(o>=0&&r.splice(o,1),r&&r.length){t=!0;var a=c[e.clusterId],s=a.nodes.indexOf(e);a.nodes.splice(s,1);var l=Math.floor(Math.random()*r.length),u=c[r[l]];u.nodes.push(e),e.clusterId=u.id}}})),!t)return"break";m++};m<i;){if("break"===g())break}Object.keys(c).forEach((function(t){var e=c[t];e.nodes&&e.nodes.length||delete c[t]}));var v=[],y={};u.forEach((function(t){var e=t.source,i=t.target,r=t[n]||1,o=h[e].node.clusterId,a=h[i].node.clusterId,s=o+"---"+a;if(y[s])y[s].weight+=r,y[s].count++;else{var l={source:o,target:a,weight:r,count:1};y[s]=l,v.push(l)}}));var b=[];return Object.keys(c).forEach((function(t){b.push(c[t])})),{clusters:b,clusterEdges:v}};e.default=a},35179:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i,r=(i=n(62238))&&i.__esModule?i:{default:i};var o=function(t,e,n,i){for(var r=e.length,o=2*i,a=0,s=0;s<r;s++)for(var l=t[s].clusterId,u=0;u<r;u++){if(l===t[u].clusterId)a+=(e[s][u]||0)-(n[s]||0)*(n[u]||0)/o}return a*=1/o},a=function(t,e,n,i){void 0===e&&(e=!1),void 0===n&&(n="weight"),void 0===i&&(i=1e-4);var a=t.nodes,s=void 0===a?[]:a,l=t.edges,u=void 0===l?[]:l,c=1,h={},d={};s.forEach((function(t,e){var n=String(c++);t.clusterId=n,h[n]={id:n,nodes:[t]},d[t.id]={node:t,idx:e}}));var f=(0,r.default)(t,e),p=[],m={},g=0;f.forEach((function(t,e){var n=0,i=s[e].id;m[i]={},t.forEach((function(t,e){if(t){n+=t;var r=s[e].id;m[i][r]=t,g+=t}})),p.push(n)})),g/=2;for(var v=1/0,y=1/0,b=0;v=o(s,f,p,g),!(Math.abs(v-y)<i||b>100);)y=v,b++,Object.keys(h).forEach((function(t){var e=0;u.forEach((function(i){var r=i.source,o=i.target,a=d[r].node.clusterId,s=d[o].node.clusterId;(a===t&&s!==t||s===t&&a!==t)&&(e+=i[n]||1)})),h[t].sumTot=e})),s.forEach((function(t,e){var i,r=h[t.clusterId],o=0,a=p[e]/(2*g),s=0;r.nodes.forEach((function(t){var n=d[t.id].idx;s+=f[e][n]||0}));var l=s-r.sumTot*a,c=m[t.id];if(Object.keys(c).forEach((function(n){var r=d[n].node.clusterId;if(r!==t.clusterId){var s=h[r],u=s.nodes;if(u&&u.length){var c=0;u.forEach((function(t){var n=d[t.id].idx;c+=f[e][n]||0}));var p=c-s.sumTot*a-l;p>o&&(o=p,i=s)}}})),o>0){i.nodes.push(t);var v=t.clusterId;t.clusterId=i.id;var y=r.nodes.indexOf(t);r.nodes.splice(y,1);var b=0,_=0;u.forEach((function(t){var e=t.source,r=t.target,o=d[e].node.clusterId,a=d[r].node.clusterId;(o===i.id&&a!==i.id||a===i.id&&o!==i.id)&&(b+=t[n]||1),(o===v&&a!==v||a===v&&o!==v)&&(_+=t[n]||1)})),i.sumTot=b,r.sumTot=_}}));var _={},w=0;Object.keys(h).forEach((function(t){var e=h[t];if(e.nodes&&e.nodes.length){var n=String(w+1);n!==t&&(e.id=n,e.nodes=e.nodes.map((function(t){return{id:t.id,clusterId:n}})),h[n]=e,_[t]=n,delete h[t],w++)}else delete h[t]})),s.forEach((function(t){t.clusterId&&_[t.clusterId]&&(t.clusterId=_[t.clusterId])}));var x=[],M={};u.forEach((function(t){var e=t.source,i=t.target,r=t[n]||1,o=d[e].node.clusterId,a=d[i].node.clusterId,s=o+"---"+a;if(M[s])M[s].weight+=r,M[s].count++;else{var l={source:o,target:a,weight:r,count:1};M[s]=l,x.push(l)}}));var E=[];return Object.keys(h).forEach((function(t){E.push(h[t])})),{clusters:E,clusterEdges:x}};e.default=a},89454:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n(38823)),r=a(n(57085)),o=n(70643);function a(t){return t&&t.__esModule?t:{default:t}}var s=function(t,e){var n=[],i=t.nodes,a=void 0===i?[]:i,s=t.edges,l=void 0===s?[]:s;if(0===a.length)return n;var u=a[0],c=new Set;c.add(u);var h=new r.default((function(t,n){return e?t.weight-n.weight:0}));for((0,o.getEdgesByNodeId)(u.id,l).forEach((function(t){h.insert(t)}));!h.isEmpty();){var d=h.delMin(),f=d.source,p=d.target;c.has(f)&&c.has(p)||(n.push(d),c.has(f)||(c.add(f),(0,o.getEdgesByNodeId)(f,l).forEach((function(t){h.insert(t)}))),c.has(p)||(c.add(p),(0,o.getEdgesByNodeId)(p,l).forEach((function(t){h.insert(t)}))))}return n},l=function(t,e){var n=[],r=t.nodes,o=void 0===r?[]:r,a=t.edges,s=void 0===a?[]:a;if(0===o.length)return n;var l=s.map((function(t){return t}));e&&l.sort((function(t,e){return t.weight-e.weight}));for(var u=new i.default(o.map((function(t){return t.id})));l.length>0;){var c=l.shift(),h=c.source,d=c.target;u.connected(h,d)||(n.push(c),u.union(h,d))}return n},u=function(t,e,n){return n?{prim:s,kruskal:l}[n](t,e):l(t,e)};e.default=u},74926:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i,r=(i=n(82556))&&i.__esModule?i:{default:i},o=n(70643);var a=function(t,e,n){"number"!=typeof e&&(e=1e-6),"number"!=typeof n&&(n=.85);for(var i,a=1,s=0,l=1e3,u=t.nodes,c=void 0===u?[]:u,h=t.edges,d=void 0===h?[]:h,f=c.length,p={},m={},g=0;g<f;++g){p[y=(M=c[g]).id]=1/f,m[y]=1/f}for(var v=(0,r.default)(t);l>0&&a>e;){s=0;for(g=0;g<f;++g){var y=(M=c[g]).id;if(i=0,0===v[M.id].inDegree)p[y]=0;else{for(var b=(0,o.getNeighbors)(y,d,"source"),_=0;_<b.length;++_){var w=b[_],x=v[w].outDegree;x>0&&(i+=m[w]/x)}p[y]=n*i,s+=p[y]}}s=(1-s)/f,a=0;for(g=0;g<f;++g){var M;i=p[y=(M=c[g]).id]+s,a+=Math.abs(i-m[y]),m[y]=i}l-=1}return m};e.default=a},57085:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=function(t,e){return t-e},i=function(){function t(t){void 0===t&&(t=n),this.compareFn=t,this.list=[]}return t.prototype.getLeft=function(t){return 2*t+1},t.prototype.getRight=function(t){return 2*t+2},t.prototype.getParent=function(t){return 0===t?null:Math.floor((t-1)/2)},t.prototype.isEmpty=function(){return this.list.length<=0},t.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},t.prototype.delMin=function(){var t=this.top(),e=this.list.pop();return this.list.length>0&&(this.list[0]=e,this.moveDown(0)),t},t.prototype.insert=function(t){if(null!==t){this.list.push(t);var e=this.list.length-1;return this.moveUp(e),!0}return!1},t.prototype.moveUp=function(t){for(var e=this.getParent(t);t&&t>0&&this.compareFn(this.list[e],this.list[t])>0;){var n=this.list[e];this.list[e]=this.list[t],this.list[t]=n,t=e,e=this.getParent(t)}},t.prototype.moveDown=function(t){var e,n=t,i=this.getLeft(t),r=this.getRight(t),o=this.list.length;null!==i&&i<o&&this.compareFn(this.list[n],this.list[i])>0?n=i:null!==r&&r<o&&this.compareFn(this.list[n],this.list[r])>0&&(n=r),t!==n&&(e=[this.list[n],this.list[t]],this.list[t]=e[0],this.list[n]=e[1],this.moveDown(n))},t}();e.default=i},88481:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.LinkedListNode=void 0;var n=function(t,e){return t===e},i=function(){function t(t,e){void 0===e&&(e=null),this.value=t,this.next=e}return t.prototype.toString=function(t){return t?t(this.value):""+this.value},t}();e.LinkedListNode=i;var r=function(){function t(t){void 0===t&&(t=n),this.head=null,this.tail=null,this.compare=t}return t.prototype.prepend=function(t){var e=new i(t,this.head);return this.head=e,this.tail||(this.tail=e),this},t.prototype.append=function(t){var e=new i(t);return this.head?(this.tail.next=e,this.tail=e,this):(this.head=e,this.tail=e,this)},t.prototype.delete=function(t){if(!this.head)return null;for(var e=null;this.head&&this.compare(this.head.value,t);)e=this.head,this.head=this.head.next;var n=this.head;if(null!==n)for(;n.next;)this.compare(n.next.value,t)?(e=n.next,n.next=n.next.next):n=n.next;return this.compare(this.tail.value,t)&&(this.tail=n),e},t.prototype.find=function(t){var e=t.value,n=void 0===e?void 0:e,i=t.callback,r=void 0===i?void 0:i;if(!this.head)return null;for(var o=this.head;o;){if(r&&r(o.value))return o;if(void 0!==n&&this.compare(o.value,n))return o;o=o.next}return null},t.prototype.deleteTail=function(){var t=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,t;for(var e=this.head;e.next;)e.next.next?e=e.next:e.next=null;return this.tail=e,t},t.prototype.deleteHead=function(){if(!this.head)return null;var t=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),t},t.prototype.fromArray=function(t){var e=this;return t.forEach((function(t){return e.append(t)})),this},t.prototype.toArray=function(){for(var t=[],e=this.head;e;)t.push(e),e=e.next;return t},t.prototype.reverse=function(){for(var t=this.head,e=null,n=null;t;)n=t.next,t.next=e,e=t,t=n;this.tail=this.head,this.head=e},t.prototype.toString=function(t){return void 0===t&&(t=void 0),this.toArray().map((function(e){return e.toString(t)})).toString()},t}();e.default=r},93026:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i,r=(i=n(88481))&&i.__esModule?i:{default:i};var o=function(){function t(){this.linkedList=new r.default}return t.prototype.isEmpty=function(){return!this.linkedList.head},t.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},t.prototype.enqueue=function(t){this.linkedList.append(t)},t.prototype.dequeue=function(){var t=this.linkedList.deleteHead();return t?t.value:null},t.prototype.toString=function(t){return this.linkedList.toString(t)},t}();e.default=o},38823:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=function(){function t(t){this.count=t.length,this.parent={};for(var e=0,n=t;e<n.length;e++){var i=n[e];this.parent[i]=i}}return t.prototype.find=function(t){for(;this.parent[t]!==t;)t=this.parent[t];return t},t.prototype.union=function(t,e){var n=this.find(t),i=this.find(e);n!==i&&(n<i?(this.parent[e]!==e&&this.union(this.parent[e],t),this.parent[e]=this.parent[t]):(this.parent[t]!==t&&this.union(this.parent[t],e),this.parent[t]=this.parent[e]))},t.prototype.connected=function(t,e){return this.find(t)===this.find(e)},t}();e.default=n},70643:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.uniqueId=e.getEdgesByNodeId=e.getOutEdgesNodeId=e.getNeighbors=void 0;e.getNeighbors=function(t,e,n){void 0===e&&(e=[]);var i=e.filter((function(e){return e.source===t||e.target===t}));if("target"===n){return i.filter((function(e){return e.source===t})).map((function(t){return t.target}))}if("source"===n){return i.filter((function(e){return e.target===t})).map((function(t){return t.source}))}return i.map((function(e){return e.source===t?e.target:e.source}))};e.getOutEdgesNodeId=function(t,e){return e.filter((function(e){return e.source===t}))};e.getEdgesByNodeId=function(t,e){return e.filter((function(e){return e.source===t||e.target===t}))};e.uniqueId=function(t){return void 0===t&&(t=0),t+"-"+(""+Math.random()).split(".")[1].substr(0,5)+(""+Math.random()).split(".")[1].substr(0,5)}},31656:(t,e,n)=>{"use strict";function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"getAdjMatrix",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"breadthFirstSearch",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"connectedComponent",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"getDegree",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"getInDegree",{enumerable:!0,get:function(){return s.getInDegree}}),Object.defineProperty(e,"getOutDegree",{enumerable:!0,get:function(){return s.getOutDegree}}),Object.defineProperty(e,"detectCycle",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"depthFirstSearch",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"dijkstra",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"findAllPath",{enumerable:!0,get:function(){return h.findAllPath}}),Object.defineProperty(e,"findShortestPath",{enumerable:!0,get:function(){return h.findShortestPath}}),Object.defineProperty(e,"floydWarshall",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(e,"labelPropagation",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(e,"louvain",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(e,"minimumSpanningTree",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(e,"pageRank",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(e,"GADDI",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(e,"getNeighbors",{enumerable:!0,get:function(){return y.getNeighbors}});var r=_(n(62238)),o=_(n(83764)),a=_(n(59527)),s=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==i(t)&&"function"!=typeof t)return{default:t};var e=b();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var a=r?Object.getOwnPropertyDescriptor(t,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=t[o]}n.default=t,e&&e.set(t,n);return n}(n(82556)),l=_(n(94282)),u=_(n(45891)),c=_(n(78089)),h=n(41727),d=_(n(75033)),f=_(n(5170)),p=_(n(35179)),m=_(n(89454)),g=_(n(74926)),v=_(n(82812)),y=n(70643);function b(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return b=function(){return t},t}function _(t){return t&&t.__esModule?t:{default:t}}},66044:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MESSAGE=e.ALGORITHM=void 0;e.ALGORITHM={pageRank:"pageRank",breadthFirstSearch:"breadthFirstSearch",connectedComponent:"connectedComponent",depthFirstSearch:"depthFirstSearch",detectCycle:"detectCycle",detectDirectedCycle:"detectDirectedCycle",detectAllCycles:"detectAllCycles",detectAllDirectedCycle:"detectAllDirectedCycle",detectAllUndirectedCycle:"detectAllUndirectedCycle",dijkstra:"dijkstra",findAllPath:"findAllPath",findShortestPath:"findShortestPath",floydWarshall:"floydWarshall",getAdjMatrix:"getAdjMatrix",getDegree:"getDegree",getInDegree:"getInDegree",getNeighbors:"getNeighbors",getOutDegree:"getOutDegree",labelPropagation:"labelPropagation",louvain:"louvain",GADDI:"GADDI",minimumSpanningTree:"minimumSpanningTree",SUCCESS:"SUCCESS",FAILURE:"FAILURE"};e.MESSAGE={SUCCESS:"SUCCESS",FAILURE:"FAILURE"}},70585:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i,r=n(66044),o=(i=n(12067))&&i.__esModule?i:{default:i};var a=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return new Promise((function(n,i){var a=new o.default;a.postMessage({_algorithmType:t,data:e}),a.onmessage=function(t){var e=t.data,o=e.data,s=e._algorithmType;r.MESSAGE.SUCCESS===s?n(o):i(),a.terminate()}}))}};e.default=a},30485:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GADDIAsync=e.getNeighborsAsync=e.pageRankAsync=e.minimumSpanningTreeAsync=e.louvainAsync=e.labelPropagationAsync=e.floydWarshallAsync=e.findShortestPathAsync=e.findAllPathAsync=e.dijkstraAsync=e.detectAllUndirectedCycleAsync=e.detectAllDirectedCycleAsync=e.detectAllCyclesAsync=e.detectCycleAsync=e.getOutDegreeAsync=e.getInDegreeAsync=e.getDegreeAsync=e.connectedComponentAsync=e.getAdjMatrixAsync=void 0;var i,r=(i=n(70585))&&i.__esModule?i:{default:i},o=n(66044);e.getAdjMatrixAsync=function(t,e){return(0,r.default)(o.ALGORITHM.getAdjMatrix).apply(void 0,[t,e])};e.connectedComponentAsync=function(t,e){return(0,r.default)(o.ALGORITHM.connectedComponent).apply(void 0,[t,e])};e.getDegreeAsync=function(t){return(0,r.default)(o.ALGORITHM.getDegree)(t)};e.getInDegreeAsync=function(t,e){return(0,r.default)(o.ALGORITHM.getInDegree)(t,e)};e.getOutDegreeAsync=function(t,e){return(0,r.default)(o.ALGORITHM.getOutDegree)(t,e)};e.detectCycleAsync=function(t){return(0,r.default)(o.ALGORITHM.detectCycle)(t)};e.detectAllCyclesAsync=function(t){return(0,r.default)(o.ALGORITHM.detectAllCycles)(t)};e.detectAllDirectedCycleAsync=function(t){return(0,r.default)(o.ALGORITHM.detectAllDirectedCycle)(t)};e.detectAllUndirectedCycleAsync=function(t){return(0,r.default)(o.ALGORITHM.detectAllUndirectedCycle)(t)};e.dijkstraAsync=function(t,e,n,i){return(0,r.default)(o.ALGORITHM.dijkstra).apply(void 0,[t,e,n,i])};e.findAllPathAsync=function(t,e,n,i){return(0,r.default)(o.ALGORITHM.findAllPath).apply(void 0,[t,e,n,i])};e.findShortestPathAsync=function(t,e,n,i,a){return(0,r.default)(o.ALGORITHM.findShortestPath).apply(void 0,[t,e,n,i,a])};e.floydWarshallAsync=function(t,e){return(0,r.default)(o.ALGORITHM.floydWarshall).apply(void 0,[t,e])};e.labelPropagationAsync=function(t,e,n,i){return void 0===i&&(i=1e3),(0,r.default)(o.ALGORITHM.labelPropagation)(t,e,n,i)};e.louvainAsync=function(t,e,n,i){return(0,r.default)(o.ALGORITHM.louvain)(t,e,n,i)};e.minimumSpanningTreeAsync=function(t,e,n){return(0,r.default)(o.ALGORITHM.minimumSpanningTree).apply(void 0,[t,e,n])};e.pageRankAsync=function(t,e,n){return(0,r.default)(o.ALGORITHM.pageRank).apply(void 0,[t,e,n])};e.getNeighborsAsync=function(t,e,n){return(0,r.default)(o.ALGORITHM.getNeighbors).apply(void 0,[t,e,n])};e.GADDIAsync=function(t,e,n,i,a,s,l){return void 0===n&&(n=!1),void 0===s&&(s="cluster"),void 0===l&&(l="cluster"),(0,r.default)(o.ALGORITHM.GADDI).apply(void 0,[t,e,n,i,a,s,l])}},12067:(t,e,n)=>{"use strict";function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==i(t)&&"function"!=typeof t)return{default:t};var e=a();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var s=r?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=t[o]}n.default=t,e&&e.set(t,n);return n}(n(31656)),o=n(66044);function a(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return a=function(){return t},t}var s="undefined"!=typeof self?self:{};s.onmessage=function(t){var e=t.data,n=e._algorithmType,i=e.data;if(n)if("function"!=typeof r[n])s.postMessage({_algorithmType:o.MESSAGE.FAILURE});else{var a=r[n].apply(r,i);s.postMessage({_algorithmType:o.MESSAGE.SUCCESS,data:a})}};e.default=null},20499:()=>{},64851:()=>{},59518:()=>{},26199:()=>{},14156:()=>{},71468:()=>{},48871:()=>{},9871:()=>{},25612:()=>{},92777:()=>{},20159:()=>{},61622:()=>{},58811:(t,e,n)=>{"use strict";n.r(e),n.d(e,{AbstractEvent:()=>_l,AbstractGraph:()=>Ks,AbstractLayout:()=>yl,Algorithm:()=>$T,Arrow:()=>hl,BaseGlobal:()=>kl,Bundling:()=>QT,Combo:()=>fs,Edge:()=>rs,EdgeFilterLens:()=>aD,Fisheye:()=>eD,G6Event:()=>wl,G6GraphEvent:()=>Ta,Global:()=>Ch,Graph:()=>YM,Grid:()=>ZT,Hull:()=>Vs,ImageMinimap:()=>oD,Layout:()=>Kx,Legend:()=>lD,Marker:()=>dl,Menu:()=>tD,Minimap:()=>JT,Node:()=>ss,Shape:()=>fl,SnapLine:()=>sD,TimeBar:()=>rD,ToolBar:()=>nD,Tooltip:()=>iD,TreeGraph:()=>zM,TreeLayout:()=>cM,Util:()=>sM,default:()=>cD,registerBehavior:()=>Sl,registerCombo:()=>El,registerEdge:()=>Ml,registerLayout:()=>hM,registerNode:()=>xl,version:()=>hD});var i={};n.r(i),n.d(i,{add:()=>J,adjoint:()=>Y,clone:()=>L,copy:()=>A,create:()=>T,determinant:()=>j,equals:()=>it,exactEquals:()=>nt,frob:()=>Z,fromMat2d:()=>V,fromMat4:()=>D,fromQuat:()=>X,fromRotation:()=>W,fromScaling:()=>U,fromTranslation:()=>G,fromValues:()=>O,identity:()=>I,invert:()=>R,mul:()=>rt,multiply:()=>F,multiplyScalar:()=>tt,multiplyScalarAndAdd:()=>et,normalFromMat4:()=>q,projection:()=>K,rotate:()=>z,scale:()=>H,set:()=>P,str:()=>$,sub:()=>ot,subtract:()=>Q,translate:()=>B,transpose:()=>N});var r={};n.r(r),n.d(r,{GADDI:()=>ge,Stack:()=>ye,breadthFirstSearch:()=>wt,connectedComponent:()=>Mt,default:()=>_e,depthFirstSearch:()=>Dt,detectAllCycles:()=>Ot,detectAllDirectedCycle:()=>At,detectAllUndirectedCycle:()=>Lt,detectCycle:()=>Pt,detectDirectedCycle:()=>be,dijkstra:()=>It,findAllPath:()=>Yt,findShortestPath:()=>Rt,floydWarshall:()=>jt,getAdjMatrix:()=>ht,getDegree:()=>St,getInDegree:()=>kt,getNeighbors:()=>yt,getOutDegree:()=>Ct,labelPropagation:()=>Ft,louvain:()=>zt,minimumSpanningTree:()=>Kt,pageRank:()=>$t});var o={};n.r(o),n.d(o,{Line:()=>_n,applyMatrix:()=>rn,compare:()=>Ze,distance:()=>sn,floydWarshall:()=>un,fractionToLine:()=>En,getAdjMatrix:()=>cn,getBBoxBoundLine:()=>wn,getCircleCenterByPoints:()=>an,getCircleIntersectByPoint:()=>en,getDegree:()=>mn,getEllipseIntersectByPoint:()=>nn,getLineIntersect:()=>Qe,getPointsCenter:()=>Sn,getRectIntersectByPoint:()=>tn,intersectBBox:()=>yn,invertMatrix:()=>on,isPointInPolygon:()=>vn,isPointsOverlap:()=>Tn,isPolygonsIntersect:()=>bn,itemIntersectByLine:()=>Mn,move:()=>dn,pointLineDistance:()=>Ln,pointLineSquareDist:()=>Cn,pointRectSquareDist:()=>Dn,rotate:()=>pn,scale:()=>fn,scaleMatrix:()=>ln,squareDist:()=>kn,translate:()=>hn});var a={};n.r(a),n.d(a,{cloneBesidesImg:()=>ai,getBBox:()=>Xn,getComboBBox:()=>ri,getLabelPosition:()=>Kn,getLetterWidth:()=>ti,getLoopCfgs:()=>qn,getTextSize:()=>ei,plainCombosToTrees:()=>ni,reconstructTree:()=>ii,shouldRefreshEdge:()=>oi,traverseTree:()=>Jn,traverseTreeUp:()=>Qn});var s={};n.r(s),n.d(s,{catmullRomToBezier:()=>pi,fillPath:()=>Ri,fillPathByDiff:()=>Fi,formatPath:()=>Hi,intersection:()=>Pi,parsePathArray:()=>xi,parsePathString:()=>fi,pathToAbsolute:()=>gi,pathToCurve:()=>_i,rectPath:()=>Ti});var l={};n.r(l),n.d(l,{easeBack:()=>io,easeBackIn:()=>eo,easeBackInOut:()=>io,easeBackOut:()=>no,easeBounce:()=>Jr,easeBounceIn:()=>Zr,easeBounceInOut:()=>Qr,easeBounceOut:()=>Jr,easeCircle:()=>qr,easeCircleIn:()=>Vr,easeCircleInOut:()=>qr,easeCircleOut:()=>Xr,easeCubic:()=>Pr.tw,easeCubicIn:()=>Pr.yD,easeCubicInOut:()=>Pr.tw,easeCubicOut:()=>Pr._e,easeElastic:()=>ao,easeElasticIn:()=>oo,easeElasticInOut:()=>so,easeElasticOut:()=>ao,easeExp:()=>Ur,easeExpIn:()=>Gr,easeExpInOut:()=>Ur,easeExpOut:()=>Wr,easeLinear:()=>Dr,easePoly:()=>Rr,easePolyIn:()=>Ir,easePolyInOut:()=>Rr,easePolyOut:()=>Nr,easeQuad:()=>Or,easeQuadIn:()=>Lr,easeQuadInOut:()=>Or,easeQuadOut:()=>Ar,easeSin:()=>zr,easeSinIn:()=>Fr,easeSinInOut:()=>zr,easeSinOut:()=>Br});var u={};n.r(u),n.d(u,{calculationItemsBBox:()=>Ia,cloneEvent:()=>Aa,formatPadding:()=>La,isNaN:()=>Pa,isViewportChanged:()=>Oa,processParallelEdges:()=>Na,uniqueId:()=>Da});var c={};n.r(c),n.d(c,{getClosedSpline:()=>Ls,getControlPoint:()=>Cs,getSpline:()=>ks,paddedHull:()=>Ns,pathToPoints:()=>Ds,pointsToPolygon:()=>Ts,roundedHull:()=>Is});var h={};n.r(h),n.d(h,{defaultSubjectColors:()=>pl});var d={};n.r(d),n.d(d,{Base:()=>hu,Circle:()=>fu,Ellipse:()=>gu,Image:()=>bu,Line:()=>xu,Marker:()=>Su,Path:()=>Fu,Polygon:()=>Hu,Polyline:()=>Wu,Rect:()=>Vu,Text:()=>qu});var f={};n.r(f),n.d(f,{Base:()=>dc,Circle:()=>pc,Dom:()=>gc,Ellipse:()=>yc,Image:()=>_c,Line:()=>xc,Marker:()=>kc,Path:()=>Tc,Polygon:()=>Lc,Polyline:()=>Oc,Rect:()=>Ic,Text:()=>Fc});var p={};n.r(p),n.d(p,{getColorSetsBySubjectColors:()=>Eh,getColorsWithSubjectColor:()=>Mh,mixColor:()=>xh});var m={};n.r(m),n.d(m,{arrayToTextureData:()=>rM,attributesToTextureData:()=>iM,buildTextureData:()=>tM,buildTextureDataWithOneEdgeAttr:()=>eM,buildTextureDataWithTwoEdgeAttr:()=>nM,proccessToFunc:()=>Qx,radialLayout:()=>oM});var g={};n.r(g),n.d(g,{gpuDetector:()=>aM});var v={};n.r(v),n.d(v,{assign:()=>RE,default:()=>nS,defaultI18n:()=>BE,format:()=>tS,parse:()=>eS,setGlobalDateI18n:()=>HE,setGlobalDateMasks:()=>QE});var y=n(70655),b=n(49242);const _={getDefaultCfg:function(){return{}},getEvents:function(){return{}},updateCfg:function(t){return Object.assign(this,t),!0},shouldBegin:function(){return!0},shouldUpdate:function(){return!0},shouldEnd:function(){return!0},bind:function(t){var e=this,n=this.events;this.graph=t,"drag-canvas"!==this.type&&"brush-select"!==this.type&&"lasso-select"!==this.type||t.get("canvas").set("draggable",!0),(0,b.each)(n,(function(e,n){t.on(n,e)})),document.addEventListener("visibilitychange",(function(){e.keydown=!1}))},unbind:function(t){var e=this.events,n=t.get("canvas").get("draggable");"drag-canvas"!==this.type&&"brush-select"!==this.type&&"lasso-select"!==this.type||t.get("canvas").set("draggable",!1),(0,b.each)(e,(function(e,n){t.off(n,e)})),t.get("canvas").set("draggable",n)},get:function(t){return this[t]},set:function(t,e){return this[t]=e,this}};var w=function(){function t(){}return t.registerBehavior=function(e,n){if(!n)throw new Error("please specify handler for this behavior: "+e);var i=(0,b.clone)(_);Object.assign(i,n);var r=function(t){var e=this;Object.assign(this,this.getDefaultCfg(),t);var n=this.getEvents();this.events=null;var i={};n&&((0,b.each)(n,(function(t,n){i[n]=(0,b.wrapBehavior)(e,t)})),this.events=i)};r.prototype=i,t.types[e]=r},t.hasBehavior=function(e){return!!t.types[e]},t.getBehavior=function(e){return t.types[e]},t.types={},t}();const x=w,M=x;var E=function(){function t(){this._events={}}return t.prototype.on=function(t,e,n){return this._events[t]||(this._events[t]=[]),this._events[t].push({callback:e,once:!!n}),this},t.prototype.once=function(t,e){return this.on(t,e,!0),this},t.prototype.emit=function(t){for(var e=this,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var r=this._events[t]||[],o=this._events["*"]||[],a=function(i){for(var r=i.length,o=0;o<r;o++)if(i[o]){var a=i[o],s=a.callback;a.once&&(i.splice(o,1),0===i.length&&delete e._events[t],r--,o--),s.apply(e,n)}};a(r),a(o)},t.prototype.off=function(t,e){if(t)if(e){for(var n=this._events[t]||[],i=n.length,r=0;r<i;r++)n[r].callback===e&&(n.splice(r,1),i--,r--);0===n.length&&delete this._events[t]}else delete this._events[t];else this._events={};return this},t.prototype.getEvents=function(){return this._events},t}();const S=E;var k=1e-6,C="undefined"!=typeof Float32Array?Float32Array:Array;Math.random;Math.PI;function T(){var t=new C(9);return C!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function D(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function L(t){var e=new C(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function A(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function O(t,e,n,i,r,o,a,s,l){var u=new C(9);return u[0]=t,u[1]=e,u[2]=n,u[3]=i,u[4]=r,u[5]=o,u[6]=a,u[7]=s,u[8]=l,u}function P(t,e,n,i,r,o,a,s,l,u){return t[0]=e,t[1]=n,t[2]=i,t[3]=r,t[4]=o,t[5]=a,t[6]=s,t[7]=l,t[8]=u,t}function I(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function N(t,e){if(t===e){var n=e[1],i=e[2],r=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=i,t[7]=r}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function R(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],h=c*a-s*u,d=-c*o+s*l,f=u*o-a*l,p=n*h+i*d+r*f;return p?(p=1/p,t[0]=h*p,t[1]=(-c*i+r*u)*p,t[2]=(s*i-r*a)*p,t[3]=d*p,t[4]=(c*n-r*l)*p,t[5]=(-s*n+r*o)*p,t[6]=f*p,t[7]=(-u*n+i*l)*p,t[8]=(a*n-i*o)*p,t):null}function Y(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8];return t[0]=a*c-s*u,t[1]=r*u-i*c,t[2]=i*s-r*a,t[3]=s*l-o*c,t[4]=n*c-r*l,t[5]=r*o-n*s,t[6]=o*u-a*l,t[7]=i*l-n*u,t[8]=n*a-i*o,t}function j(t){var e=t[0],n=t[1],i=t[2],r=t[3],o=t[4],a=t[5],s=t[6],l=t[7],u=t[8];return e*(u*o-a*l)+n*(-u*r+a*s)+i*(l*r-o*s)}function F(t,e,n){var i=e[0],r=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],d=n[0],f=n[1],p=n[2],m=n[3],g=n[4],v=n[5],y=n[6],b=n[7],_=n[8];return t[0]=d*i+f*a+p*u,t[1]=d*r+f*s+p*c,t[2]=d*o+f*l+p*h,t[3]=m*i+g*a+v*u,t[4]=m*r+g*s+v*c,t[5]=m*o+g*l+v*h,t[6]=y*i+b*a+_*u,t[7]=y*r+b*s+_*c,t[8]=y*o+b*l+_*h,t}function B(t,e,n){var i=e[0],r=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],d=n[0],f=n[1];return t[0]=i,t[1]=r,t[2]=o,t[3]=a,t[4]=s,t[5]=l,t[6]=d*i+f*a+u,t[7]=d*r+f*s+c,t[8]=d*o+f*l+h,t}function z(t,e,n){var i=e[0],r=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],d=Math.sin(n),f=Math.cos(n);return t[0]=f*i+d*a,t[1]=f*r+d*s,t[2]=f*o+d*l,t[3]=f*a-d*i,t[4]=f*s-d*r,t[5]=f*l-d*o,t[6]=u,t[7]=c,t[8]=h,t}function H(t,e,n){var i=n[0],r=n[1];return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=r*e[3],t[4]=r*e[4],t[5]=r*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function G(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function W(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=n,t[2]=0,t[3]=-n,t[4]=i,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function U(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function V(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function X(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],a=n+n,s=i+i,l=r+r,u=n*a,c=i*a,h=i*s,d=r*a,f=r*s,p=r*l,m=o*a,g=o*s,v=o*l;return t[0]=1-h-p,t[3]=c-v,t[6]=d+g,t[1]=c+v,t[4]=1-u-p,t[7]=f-m,t[2]=d-g,t[5]=f+m,t[8]=1-u-h,t}function q(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],h=e[9],d=e[10],f=e[11],p=e[12],m=e[13],g=e[14],v=e[15],y=n*s-i*a,b=n*l-r*a,_=n*u-o*a,w=i*l-r*s,x=i*u-o*s,M=r*u-o*l,E=c*m-h*p,S=c*g-d*p,k=c*v-f*p,C=h*g-d*m,T=h*v-f*m,D=d*v-f*g,L=y*D-b*T+_*C+w*k-x*S+M*E;return L?(L=1/L,t[0]=(s*D-l*T+u*C)*L,t[1]=(l*k-a*D-u*S)*L,t[2]=(a*T-s*k+u*E)*L,t[3]=(r*T-i*D-o*C)*L,t[4]=(n*D-r*k+o*S)*L,t[5]=(i*k-n*T-o*E)*L,t[6]=(m*M-g*x+v*w)*L,t[7]=(g*_-p*M-v*b)*L,t[8]=(p*x-m*_+v*y)*L,t):null}function K(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function $(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function Z(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}function J(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t}function Q(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}function tt(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t}function et(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t[3]=e[3]+n[3]*i,t[4]=e[4]+n[4]*i,t[5]=e[5]+n[5]*i,t[6]=e[6]+n[6]*i,t[7]=e[7]+n[7]*i,t[8]=e[8]+n[8]*i,t}function nt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function it(t,e){var n=t[0],i=t[1],r=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8],h=e[0],d=e[1],f=e[2],p=e[3],m=e[4],g=e[5],v=e[6],y=e[7],b=e[8];return Math.abs(n-h)<=k*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(i-d)<=k*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(r-f)<=k*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(o-p)<=k*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(a-m)<=k*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(s-g)<=k*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(l-v)<=k*Math.max(1,Math.abs(l),Math.abs(v))&&Math.abs(u-y)<=k*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(c-b)<=k*Math.max(1,Math.abs(c),Math.abs(b))}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var rt=F,ot=Q;function at(t,e,n){var i=[0,0,0,0,0,0,0,0,0];return G(i,n),F(t,i,e)}function st(t,e,n){var i=[0,0,0,0,0,0,0,0,0];return W(i,n),F(t,i,e)}function lt(t,e,n){var i=[0,0,0,0,0,0,0,0,0];return U(i,n),F(t,i,e)}function ut(t,e,n){return F(t,n,e)}function ct(t,e){for(var n=t?[].concat(t):[1,0,0,0,1,0,0,0,1],i=0,r=e.length;i<r;i++){var o=e[i];switch(o[0]){case"t":at(n,n,[o[1],o[2]]);break;case"s":lt(n,n,[o[1],o[2]]);break;case"r":st(n,n,o[1]);break;case"m":ut(n,n,o[1])}}return n}const ht=function(t,e){var n=t.nodes,i=t.edges,r=[],o={};if(!n)throw new Error("invalid nodes data!");return n&&n.forEach((function(t,e){o[t.id]=e;r.push([])})),i&&i.forEach((function(t){var n=t.source,i=t.target,a=o[n],s=o[i];!a&&0!==a||!s&&0!==s||(r[a][s]=1,e||(r[s][a]=1))})),r};var dt=function(t,e){return t===e},ft=function(){function t(t,e){void 0===e&&(e=null),this.value=t,this.next=e}return t.prototype.toString=function(t){return t?t(this.value):""+this.value},t}(),pt=function(){function t(t){void 0===t&&(t=dt),this.head=null,this.tail=null,this.compare=t}return t.prototype.prepend=function(t){var e=new ft(t,this.head);return this.head=e,this.tail||(this.tail=e),this},t.prototype.append=function(t){var e=new ft(t);return this.head?(this.tail.next=e,this.tail=e,this):(this.head=e,this.tail=e,this)},t.prototype.delete=function(t){if(!this.head)return null;for(var e=null;this.head&&this.compare(this.head.value,t);)e=this.head,this.head=this.head.next;var n=this.head;if(null!==n)for(;n.next;)this.compare(n.next.value,t)?(e=n.next,n.next=n.next.next):n=n.next;return this.compare(this.tail.value,t)&&(this.tail=n),e},t.prototype.find=function(t){var e=t.value,n=void 0===e?void 0:e,i=t.callback,r=void 0===i?void 0:i;if(!this.head)return null;for(var o=this.head;o;){if(r&&r(o.value))return o;if(void 0!==n&&this.compare(o.value,n))return o;o=o.next}return null},t.prototype.deleteTail=function(){var t=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,t;for(var e=this.head;e.next;)e.next.next?e=e.next:e.next=null;return this.tail=e,t},t.prototype.deleteHead=function(){if(!this.head)return null;var t=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),t},t.prototype.fromArray=function(t){var e=this;return t.forEach((function(t){return e.append(t)})),this},t.prototype.toArray=function(){for(var t=[],e=this.head;e;)t.push(e),e=e.next;return t},t.prototype.reverse=function(){for(var t=this.head,e=null,n=null;t;)n=t.next,t.next=e,e=t,t=n;this.tail=this.head,this.head=e},t.prototype.toString=function(t){return void 0===t&&(t=void 0),this.toArray().map((function(e){return e.toString(t)})).toString()},t}();const mt=pt;var gt=function(){function t(){this.linkedList=new mt}return t.prototype.isEmpty=function(){return!this.linkedList.head},t.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},t.prototype.enqueue=function(t){this.linkedList.append(t)},t.prototype.dequeue=function(){var t=this.linkedList.deleteHead();return t?t.value:null},t.prototype.toString=function(t){return this.linkedList.toString(t)},t}();const vt=gt;var yt=function(t,e,n){void 0===e&&(e=[]);var i=e.filter((function(e){return e.source===t||e.target===t}));if("target"===n){return i.filter((function(e){return e.source===t})).map((function(t){return t.target}))}if("source"===n){return i.filter((function(e){return e.target===t})).map((function(t){return t.source}))}return i.map((function(e){return e.source===t?e.target:e.source}))},bt=function(t,e){return e.filter((function(e){return e.source===t||e.target===t}))},_t=function(t){return void 0===t&&(t=0),t+"-"+(""+Math.random()).split(".")[1].substr(0,5)+(""+Math.random()).split(".")[1].substr(0,5)};const wt=function(t,e,n,i){void 0===i&&(i=!0);var r=function(t){void 0===t&&(t={});var e,n=t,i=function(){},r=(e={},function(t){var n=t.next;return!e[n]&&(e[n]=!0,!0)});return n.allowTraversal=t.allowTraversal||r,n.enter=t.enter||i,n.leave=t.leave||i,n}(n),o=new vt,a=t.edges,s=void 0===a?[]:a;o.enqueue(e);for(var l="",u=function(){var t=o.dequeue();r.enter({current:t,previous:l}),yt(t,s,i?"target":void 0).forEach((function(e){r.allowTraversal({previous:l,current:t,next:e})&&o.enqueue(e)})),r.leave({current:t,previous:l}),l=t};!o.isEmpty();)u()};var xt=function(t){for(var e=t.nodes,n=void 0===e?[]:e,i=t.edges,r=void 0===i?[]:i,o=[],a={},s={},l={},u=[],c=0,h=function t(e){s[e.id]=c,l[e.id]=c,c+=1,o.push(e),a[e.id]=!0;for(var i=yt(e.id,r,"target").filter((function(t){return n.map((function(t){return t.id})).indexOf(t)>-1})),h=function(r){var o=i[r];if(s[o]||0===s[o])a[o]&&(l[e.id]=Math.min(l[e.id],s[o]));else{var u=n.filter((function(t){return t.id===o}));u.length>0&&t(u[0]),l[e.id]=Math.min(l[e.id],l[o])}},d=0;d<i.length;d++)h(d);if(l[e.id]===s[e.id]){for(var f=[];o.length>0;){var p=o.pop();if(a[p.id]=!1,f.push(p),p===e)break}f.length>0&&u.push(f)}},d=0,f=n;d<f.length;d++){var p=f[d];s[p.id]||0===s[p.id]||h(p)}return u};function Mt(t,e){return e?xt(t):function(t){for(var e=t.nodes,n=void 0===e?[]:e,i=t.edges,r=void 0===i?[]:i,o=[],a={},s=[],l=function t(e){s.push(e),a[e.id]=!0;for(var i=yt(e.id,r),o=function(e){var r=i[e];if(!a[r]){var o=n.filter((function(t){return t.id===r}));o.length>0&&t(o[0])}},l=0;l<i.length;++l)o(l)},u=0;u<n.length;u++){var c=n[u];if(!a[c.id]){l(c);for(var h=[];s.length>0;)h.push(s.pop());o.push(h)}}return o}(t)}var Et=function(t){var e={},n=t.nodes,i=void 0===n?[]:n,r=t.edges,o=void 0===r?[]:r;return i.forEach((function(t){e[t.id]={degree:0,inDegree:0,outDegree:0}})),o.forEach((function(t){e[t.source].degree++,e[t.source].outDegree++,e[t.target].degree++,e[t.target].inDegree++})),e};const St=Et;var kt=function(t,e){return Et(t)[e]?Et(t)[e].inDegree:0},Ct=function(t,e){return Et(t)[e]?Et(t)[e].outDegree:0};function Tt(t,e,n,i){i.enter({current:e,previous:n});var r=t.edges;yt(e,void 0===r?[]:r,"target").forEach((function(r){i.allowTraversal({previous:n,current:e,next:r})&&Tt(t,r,e,i)})),i.leave({current:e,previous:n})}function Dt(t,e,n){Tt(t,e,"",function(t){void 0===t&&(t={});var e,n=t,i=function(){},r=(e={},function(t){var n=t.next;return!e[n]&&(e[n]=!0,!0)});return n.allowTraversal=t.allowTraversal||r,n.enter=t.enter||i,n.leave=t.leave||i,n}(n))}var Lt=function(t,e,n){var i,r;void 0===n&&(n=!0);for(var o=[],a=0,s=Mt(t,!1);a<s.length;a++){var l=s[a];if(l.length)for(var u=l[0],c=u.id,h=[u],d=((i={})[c]=u,i),f=((r={})[c]=new Set,r);h.length>0;)for(var p=h.pop(),m=p.id,g=yt(m,t.edges),v=function(i){var r,a=g[i],s=t.nodes.find((function(t){return t.id===a}));if(a===m)o.push(((r={})[a]=p,r));else if(a in f){if(!f[m].has(s)){for(var l=!0,u=[s,p],c=d[m];f[a].size&&!f[a].has(c)&&(u.push(c),c!==d[c.id]);)c=d[c.id];if(u.push(c),e&&n?(l=!1,u.findIndex((function(t){return e.indexOf(t.id)>-1}))>-1&&(l=!0)):e&&!n&&u.findIndex((function(t){return e.indexOf(t.id)>-1}))>-1&&(l=!1),l){for(var v={},y=1;y<u.length;y+=1)v[u[y-1].id]=u[y];u.length&&(v[u[u.length-1].id]=u[0]),o.push(v)}f[a].add(p)}}else d[a]=p,h.push(s),f[a]=new Set([p])},y=0;y<g.length;y+=1)v(y)}return o},At=function(t,e,n){void 0===n&&(n=!0);for(var i=[],r=new Set,o=[],a=[],s={},l={},u=function t(l,u,c){var h=!1;if(e&&!1===n&&e.indexOf(l.id)>-1)return h;i.push(l),r.add(l);for(var d=c[l.id],f=0;f<d.length;f+=1){if((g=s[d[f]])===u){for(var p={},m=1;m<i.length;m+=1)p[i[m-1].id]=i[m];i.length&&(p[i[i.length-1].id]=i[0]),a.push(p),h=!0}else r.has(g)||t(g,u,c)&&(h=!0)}if(h)!function(t){for(var e=[t];e.length>0;){var n=e.pop();r.has(n)&&(r.delete(n),o[n.id].forEach((function(t){e.push(t)})),o[n.id].clear())}}(l);else for(f=0;f<d.length;f+=1){var g=s[d[f]];o[g.id].has(l)||o[g.id].add(l)}return i.pop(),h},c=t.nodes,h=void 0===c?[]:c,d=0;d<h.length;d+=1){var f=h[d],p=f.id;l[p]=d,s[d]=f}if(e&&n){var m=function(t){var n=e[t];l[h[t].id]=l[n],l[n]=0,s[0]=h.find((function(t){return t.id===n})),s[l[h[t].id]]=h[t]};for(d=0;d<e.length;d++)m(d)}for(var g=function(i){for(var r,o,s=1/0,u=0;u<i.length;u+=1)for(var c=i[u],h=0;h<c.length;h++){var d=l[c[h].id];d<s&&(s=d,o=u)}var f=i[o],p=[];for(u=0;u<f.length;u+=1){var m=f[u];p[m.id]=[];for(var g=0,v=yt(m.id,t.edges,"target").filter((function(t){return f.map((function(t){return t.id})).indexOf(t)>-1}));g<v.length;g++){var y=v[g];y!==m.id||!1===n&&e.indexOf(m.id)>-1?p[m.id].push(l[y]):a.push(((r={})[m.id]=m,r))}}return{component:f,adjList:p,minIdx:s}},v=0;v<h.length;){var y=h.filter((function(t){return l[t.id]>=v})),b=xt({nodes:y,edges:t.edges}).filter((function(t){return t.length>1}));if(0===b.length)break;var _=g(b),w=_.minIdx,x=_.adjList,M=_.component;if(!(M.length>1))break;M.forEach((function(t){o[t.id]=new Set}));var E=s[w];if(e&&n&&-1===e.indexOf(E.id))return a;u(E,E,x),v=w+1}return a},Ot=function(t,e,n,i){return void 0===i&&(i=!0),e?At(t,n,i):Lt(t,n,i)};const Pt=function(t){var e=null,n=t.nodes,i={},r={},o={},a={};(void 0===n?[]:n).forEach((function(t){r[t.id]=t}));for(var s={enter:function(t){var n=t.current,a=t.previous;if(o[n]){e={};for(var s=n,l=a;l!==n;)e[s]=l,s=l,l=i[l];e[s]=l}else o[n]=n,delete r[n],i[n]=a},leave:function(t){var e=t.current;a[e]=e,delete o[e]},allowTraversal:function(t){var n=t.next;return!e&&!a[n]}};Object.keys(r).length;){Dt(t,Object.keys(r)[0],s)}return e};const It=function(t,e,n,i){var r=t.nodes,o=void 0===r?[]:r,a=t.edges,s=void 0===a?[]:a,l=[],u={},c={},h={};o.forEach((function(t,n){var i=t.id;l.push(i),c[i]=1/0,i===e&&(c[i]=0)}));for(var d=o.length,f=function(t){var e=function(t,e,n){for(var i,r=1/0,o=0;o<e.length;o++){var a=e[o].id;!n[a]&&t[a]<=r&&(r=t[a],i=e[o])}return i}(c,o,u),r=e.id;if(u[r]=!0,c[r]===1/0)return"continue";var a=[];a=n?function(t,e){return e.filter((function(e){return e.source===t}))}(r,s):bt(r,s),a.forEach((function(t){var n=t.target,o=t.source,a=n===r?o:n,s=i&&t[i]?t[i]:1;c[a]>c[e.id]+s?(c[a]=c[e.id]+s,h[a]=[e.id]):c[a]===c[e.id]+s&&h[a].push(e.id)}))},p=0;p<d;p++)f();h[e]=[e];var m={};for(var g in c)c[g]!==1/0&&Nt(e,g,h,m);var v={};for(var g in m)v[g]=m[g][0];return{length:c,path:v,allPath:m}};function Nt(t,e,n,i){if(t===e)return[t];if(i[e])return i[e];for(var r=[],o=0,a=n[e];o<a.length;o++){var s=Nt(t,a[o],n,i);if(!s)return;for(var l=0,u=s;l<u.length;l++){var c=u[l];(0,b.isArray)(c)?r.push((0,y.__spreadArray)((0,y.__spreadArray)([],c),[e])):r.push([c,e])}}return i[e]=r,i[e]}var Rt=function(t,e,n,i,r){var o=It(t,e,i,r),a=o.length,s=o.path,l=o.allPath;return{length:a[n],path:s[n],allPath:l[n]}},Yt=function(t,e,n,i){var r;if(e===n)return[[e]];var o=t.edges,a=void 0===o?[]:o,s=[e],l=((r={})[e]=!0,r),u=[],c=[],h=i?yt(e,a,"target"):yt(e,a);for(u.push(h);s.length>0&&u.length>0;){var d=u[u.length-1];if(d.length){var f=d.shift();if(f&&(s.push(f),l[f]=!0,h=i?yt(f,a,"target"):yt(f,a),u.push(h.filter((function(t){return!l[t]})))),s[s.length-1]===n){var p=s.map((function(t){return t}));c.push(p);m=s.pop();l[m]=!1,u.pop()}}else{var m=s.pop();l[m]=!1,u.pop()}}return c};const jt=function(t,e){for(var n=ht(t,e),i=[],r=n.length,o=0;o<r;o+=1){i[o]=[];for(var a=0;a<r;a+=1)o===a?i[o][a]=0:0!==n[o][a]&&n[o][a]?i[o][a]=n[o][a]:i[o][a]=1/0}for(var s=0;s<r;s+=1)for(o=0;o<r;o+=1)for(a=0;a<r;a+=1)i[o][a]>i[o][s]+i[s][a]&&(i[o][a]=i[o][s]+i[s][a]);return i};const Ft=function(t,e,n,i){void 0===e&&(e=!1),void 0===n&&(n="weight"),void 0===i&&(i=1e3);var r=t.nodes,o=void 0===r?[]:r,a=t.edges,s=void 0===a?[]:a,l={},u={};o.forEach((function(t,e){var n=_t();t.clusterId=n,l[n]={id:n,nodes:[t]},u[t.id]={node:t,idx:e}}));var c=ht(t,e),h=[],d={};c.forEach((function(t,e){var n=0,i=o[e].id;d[i]={},t.forEach((function(t,e){if(t){n+=t;var r=o[e].id;d[i][r]=t}})),h.push(n)}));for(var f=0,p=function(){var t=!1;if(o.forEach((function(e){var n={};Object.keys(d[e.id]).forEach((function(t){var i=d[e.id][t],r=u[t].node.clusterId;n[r]||(n[r]=0),n[r]+=i}));var i=-1/0,r=[];if(Object.keys(n).forEach((function(t){i<n[t]?(i=n[t],r=[t]):i===n[t]&&r.push(t)})),1!==r.length||r[0]!==e.clusterId){var o=r.indexOf(e.clusterId);if(o>=0&&r.splice(o,1),r&&r.length){t=!0;var a=l[e.clusterId],s=a.nodes.indexOf(e);a.nodes.splice(s,1);var c=Math.floor(Math.random()*r.length),h=l[r[c]];h.nodes.push(e),e.clusterId=h.id}}})),!t)return"break";f++};f<i;){if("break"===p())break}Object.keys(l).forEach((function(t){var e=l[t];e.nodes&&e.nodes.length||delete l[t]}));var m=[],g={};s.forEach((function(t){var e=t.source,i=t.target,r=t[n]||1,o=u[e].node.clusterId,a=u[i].node.clusterId,s=o+"---"+a;if(g[s])g[s].weight+=r,g[s].count++;else{var l={source:o,target:a,weight:r,count:1};g[s]=l,m.push(l)}}));var v=[];return Object.keys(l).forEach((function(t){v.push(l[t])})),{clusters:v,clusterEdges:m}};var Bt=function(t,e,n,i){for(var r=e.length,o=2*i,a=0,s=0;s<r;s++)for(var l=t[s].clusterId,u=0;u<r;u++){if(l===t[u].clusterId)a+=(e[s][u]||0)-(n[s]||0)*(n[u]||0)/o}return a*=1/o};const zt=function(t,e,n,i){void 0===e&&(e=!1),void 0===n&&(n="weight"),void 0===i&&(i=1e-4);var r=t.nodes,o=void 0===r?[]:r,a=t.edges,s=void 0===a?[]:a,l=1,u={},c={};o.forEach((function(t,e){var n=String(l++);t.clusterId=n,u[n]={id:n,nodes:[t]},c[t.id]={node:t,idx:e}}));var h=ht(t,e),d=[],f={},p=0;h.forEach((function(t,e){var n=0,i=o[e].id;f[i]={},t.forEach((function(t,e){if(t){n+=t;var r=o[e].id;f[i][r]=t,p+=t}})),d.push(n)})),p/=2;for(var m=1/0,g=1/0,v=0;m=Bt(o,h,d,p),!(Math.abs(m-g)<i||v>100);)g=m,v++,Object.keys(u).forEach((function(t){var e=0;s.forEach((function(i){var r=i.source,o=i.target,a=c[r].node.clusterId,s=c[o].node.clusterId;(a===t&&s!==t||s===t&&a!==t)&&(e+=i[n]||1)})),u[t].sumTot=e})),o.forEach((function(t,e){var i,r=u[t.clusterId],o=0,a=d[e]/(2*p),l=0;r.nodes.forEach((function(t){var n=c[t.id].idx;l+=h[e][n]||0}));var m=l-r.sumTot*a,g=f[t.id];if(Object.keys(g).forEach((function(n){var r=c[n].node.clusterId;if(r!==t.clusterId){var s=u[r],l=s.nodes;if(l&&l.length){var d=0;l.forEach((function(t){var n=c[t.id].idx;d+=h[e][n]||0}));var f=d-s.sumTot*a-m;f>o&&(o=f,i=s)}}})),o>0){i.nodes.push(t);var v=t.clusterId;t.clusterId=i.id;var y=r.nodes.indexOf(t);r.nodes.splice(y,1);var b=0,_=0;s.forEach((function(t){var e=t.source,r=t.target,o=c[e].node.clusterId,a=c[r].node.clusterId;(o===i.id&&a!==i.id||a===i.id&&o!==i.id)&&(b+=t[n]||1),(o===v&&a!==v||a===v&&o!==v)&&(_+=t[n]||1)})),i.sumTot=b,r.sumTot=_}}));var y={},b=0;Object.keys(u).forEach((function(t){var e=u[t];if(e.nodes&&e.nodes.length){var n=String(b+1);n!==t&&(e.id=n,e.nodes=e.nodes.map((function(t){return{id:t.id,clusterId:n}})),u[n]=e,y[t]=n,delete u[t],b++)}else delete u[t]})),o.forEach((function(t){t.clusterId&&y[t.clusterId]&&(t.clusterId=y[t.clusterId])}));var _=[],w={};s.forEach((function(t){var e=t.source,i=t.target,r=t[n]||1,o=c[e].node.clusterId,a=c[i].node.clusterId,s=o+"---"+a;if(w[s])w[s].weight+=r,w[s].count++;else{var l={source:o,target:a,weight:r,count:1};w[s]=l,_.push(l)}}));var x=[];return Object.keys(u).forEach((function(t){x.push(u[t])})),{clusters:x,clusterEdges:_}};var Ht=function(){function t(t){this.count=t.length,this.parent={};for(var e=0,n=t;e<n.length;e++){var i=n[e];this.parent[i]=i}}return t.prototype.find=function(t){for(;this.parent[t]!==t;)t=this.parent[t];return t},t.prototype.union=function(t,e){var n=this.find(t),i=this.find(e);n!==i&&(n<i?(this.parent[e]!==e&&this.union(this.parent[e],t),this.parent[e]=this.parent[t]):(this.parent[t]!==t&&this.union(this.parent[t],e),this.parent[t]=this.parent[e]))},t.prototype.connected=function(t,e){return this.find(t)===this.find(e)},t}();const Gt=Ht;var Wt=function(t,e){return t-e},Ut=function(){function t(t){void 0===t&&(t=Wt),this.compareFn=t,this.list=[]}return t.prototype.getLeft=function(t){return 2*t+1},t.prototype.getRight=function(t){return 2*t+2},t.prototype.getParent=function(t){return 0===t?null:Math.floor((t-1)/2)},t.prototype.isEmpty=function(){return this.list.length<=0},t.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},t.prototype.delMin=function(){var t=this.top(),e=this.list.pop();return this.list.length>0&&(this.list[0]=e,this.moveDown(0)),t},t.prototype.insert=function(t){if(null!==t){this.list.push(t);var e=this.list.length-1;return this.moveUp(e),!0}return!1},t.prototype.moveUp=function(t){for(var e=this.getParent(t);t&&t>0&&this.compareFn(this.list[e],this.list[t])>0;){var n=this.list[e];this.list[e]=this.list[t],this.list[t]=n,t=e,e=this.getParent(t)}},t.prototype.moveDown=function(t){var e,n=t,i=this.getLeft(t),r=this.getRight(t),o=this.list.length;null!==i&&i<o&&this.compareFn(this.list[n],this.list[i])>0?n=i:null!==r&&r<o&&this.compareFn(this.list[n],this.list[r])>0&&(n=r),t!==n&&(e=[this.list[n],this.list[t]],this.list[t]=e[0],this.list[n]=e[1],this.moveDown(n))},t}();const Vt=Ut;var Xt=function(t,e){var n=[],i=t.nodes,r=void 0===i?[]:i,o=t.edges,a=void 0===o?[]:o;if(0===r.length)return n;var s=r[0],l=new Set;l.add(s);var u=new Vt((function(t,n){return e?t.weight-n.weight:0}));for(bt(s.id,a).forEach((function(t){u.insert(t)}));!u.isEmpty();){var c=u.delMin(),h=c.source,d=c.target;l.has(h)&&l.has(d)||(n.push(c),l.has(h)||(l.add(h),bt(h,a).forEach((function(t){u.insert(t)}))),l.has(d)||(l.add(d),bt(d,a).forEach((function(t){u.insert(t)}))))}return n},qt=function(t,e){var n=[],i=t.nodes,r=void 0===i?[]:i,o=t.edges,a=void 0===o?[]:o;if(0===r.length)return n;var s=a.map((function(t){return t}));e&&s.sort((function(t,e){return t.weight-e.weight}));for(var l=new Gt(r.map((function(t){return t.id})));s.length>0;){var u=s.shift(),c=u.source,h=u.target;l.connected(c,h)||(n.push(u),l.union(c,h))}return n};const Kt=function(t,e,n){return n?{prim:Xt,kruskal:qt}[n](t,e):qt(t,e)};const $t=function(t,e,n){"number"!=typeof e&&(e=1e-6),"number"!=typeof n&&(n=.85);for(var i,r=1,o=0,a=1e3,s=t.nodes,l=void 0===s?[]:s,u=t.edges,c=void 0===u?[]:u,h=l.length,d={},f={},p=0;p<h;++p){d[g=(w=l[p]).id]=1/h,f[g]=1/h}for(var m=St(t);a>0&&r>e;){o=0;for(p=0;p<h;++p){var g=(w=l[p]).id;if(i=0,0===m[w.id].inDegree)d[g]=0;else{for(var v=yt(g,c,"source"),y=0;y<v.length;++y){var b=v[y],_=m[b].outDegree;_>0&&(i+=f[b]/_)}d[g]=n*i,o+=d[g]}}o=(1-o)/h,r=0;for(p=0;p<h;++p){var w;i=d[g=(w=l[p]).id]+o,r+=Math.abs(i-f[g]),f[g]=i}a-=1}return f};var Zt="-1",Jt=function(t,e,n,i){void 0===t&&(t=-1),void 0===e&&(e=-1),void 0===n&&(n=-1),void 0===i&&(i="-1"),this.id=t,this.from=e,this.to=n,this.label=i},Qt=function(){function t(t,e){void 0===t&&(t=-1),void 0===e&&(e=Zt),this.id=t,this.label=e,this.edges=[],this.edgeMap={}}return t.prototype.addEdge=function(t){this.edges.push(t),this.edgeMap[t.id]=t},t}(),te=function(){function t(t,e,n){void 0===t&&(t=-1),void 0===e&&(e=!0),void 0===n&&(n=!1),this.id=t,this.edgeIdAutoIncrease=e,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=n}return t.prototype.getNodeNum=function(){return this.nodes.length},t.prototype.addNode=function(t,e){if(!this.nodeMap[t]){var n=new Qt(t,e);this.nodes.push(n),this.nodeMap[t]=n,this.nodeLabelMap[e]||(this.nodeLabelMap[e]=[]),this.nodeLabelMap[e].push(t)}},t.prototype.addEdge=function(t,e,n,i){if((this.edgeIdAutoIncrease||void 0===t)&&(t=this.counter++),!(this.nodeMap[e]&&this.nodeMap[n]&&this.nodeMap[n].edgeMap[t])){var r=new Jt(t,e,n,i);if(this.edges.push(r),this.edgeMap[t]=r,this.nodeMap[e].addEdge(r),this.edgeLabelMap[i]||(this.edgeLabelMap[i]=[]),this.edgeLabelMap[i].push(r),!this.directed){var o=new Jt(t,n,e,i);this.nodeMap[n].addEdge(o),this.edgeLabelMap[i].push(o)}}},t}(),ee=function(){function t(t,e,n,i,r){this.fromNode=t,this.toNode=e,this.nodeEdgeNodeLabel={nodeLabel1:n||Zt,edgeLabel:i||"-1",nodeLabel2:r||Zt}}return t.prototype.equalTo=function(t){return this.fromNode===t.formNode&&this.toNode===t.toNode&&this.nodeEdgeNodeLabel===t.nodeEdgeNodeLabel},t.prototype.notEqualTo=function(t){return!this.equalTo(t)},t}(),ne=function(){function t(){this.rmpath=[],this.dfsEdgeList=[]}return t.prototype.equalTo=function(t){var e=this.dfsEdgeList.length;if(e!==t.length)return!1;for(var n=0;n<e;n++)if(this.dfsEdgeList[n]!==t[n])return!1;return!0},t.prototype.notEqualTo=function(t){return!this.equalTo(t)},t.prototype.pushBack=function(t,e,n,i,r){return this.dfsEdgeList.push(new ee(t,e,n,i,r)),this.dfsEdgeList},t.prototype.toGraph=function(t,e){void 0===t&&(t=-1),void 0===e&&(e=!1);var n=new te(t,!0,e);return this.dfsEdgeList.forEach((function(t){var e=t.fromNode,i=t.toNode,r=t.nodeEdgeNodeLabel,o=r.nodeLabel1,a=r.edgeLabel,s=r.nodeLabel2;o!==Zt&&n.addNode(e,o),s!==Zt&&n.addNode(i,s),o!==Zt&&s!==o&&n.addEdge(void 0,e,i,a)})),n},t.prototype.buildRmpath=function(){this.rmpath=[];for(var t=void 0,e=this.dfsEdgeList.length-1;e>=0;e--){var n=this.dfsEdgeList[e],i=n.fromNode,r=n.toNode;i<r&&(void 0===t||r===t)&&(this.rmpath.push(e),t=i)}return this.rmpath},t.prototype.getNodeNum=function(){var t={};return this.dfsEdgeList.forEach((function(e){t[e.fromNode]||(t[e.fromNode]=!0),t[e.toNode]||(t[e.toNode]=!0)})),Object.keys(t).length},t}(),ie=function(){function t(t){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],t){for(;t;){var e=t.edge;this.edges.push(e),this.nodesUsed[e.from]=1,this.nodesUsed[e.to]=1,this.edgesUsed[e.id]=1,t=t.preNode}this.edges=this.edges.reverse()}}return t.prototype.hasNode=function(t){return 1===this.nodesUsed[t.id]},t.prototype.hasEdge=function(t){return 1===this.edgesUsed[t.id]},t}(),re=function(){function t(t){var e=t.graphs,n=t.minSupport,i=void 0===n?2:n,r=t.minNodeNum,o=void 0===r?1:r,a=t.maxNodeNum,s=void 0===a?4:a,l=t.top,u=void 0===l?10:l,c=t.directed,h=void 0!==c&&c,d=t.verbose,f=void 0!==d&&d;this.graphs=e,this.dfsCode=new ne,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=i,this.top=u,this.directed=h,this.counter=0,this.maxNodeNum=s,this.minNodeNum=o,this.verbose=f,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return t.prototype.findForwardRootEdges=function(t,e){var n=this,i=[],r=t.nodeMap;return e.edges.forEach((function(t){(n.directed||e.label<=r[t.to].label)&&i.push(t)})),i},t.prototype.findBackwardEdge=function(t,e,n,i){if(!this.directed&&e===n)return null;for(var r=t.nodeMap,o=r[n.to].edges,a=o.length,s=0;s<a;s++){var l=o[s];if(!i.hasEdge(l)&&l.to===e.from)if(this.directed){if(r[e.from].label<r[n.to].label||r[e.from].label===r[n.to].label&&e.label<=l.label)return l}else if(e.label<l.label||e.label===l.label&&r[e.to].label<=r[n.to].label)return l}return null},t.prototype.findForwardPureEdges=function(t,e,n,i){for(var r=[],o=e.to,a=t.nodeMap[o].edges,s=a.length,l=0;l<s;l++){var u=a[l],c=t.nodeMap[u.to];n<=c.label&&!i.hasNode(c)&&r.push(u)}return r},t.prototype.findForwardRmpathEdges=function(t,e,n,i){for(var r=[],o=t.nodeMap,a=o[e.to].label,s=o[e.from].edges,l=s.length,u=0;u<l;u++){var c=s[u],h=o[c.to].label;e.to===c.to||n>h||i.hasNode(o[c.to])||(e.label<c.label||e.label===c.label&&a<=h)&&r.push(c)}return r},t.prototype.getSupport=function(t){var e={};return t.forEach((function(t){e[t.graphId]||(e[t.graphId]=!0)})),Object.keys(e).length},t.prototype.findMinLabel=function(t){var e=void 0;return Object.keys(t).forEach((function(n){var i=t[n],r=i.nodeLabel1,o=i.edgeLabel,a=i.nodeLabel2;e?(r<e.nodeLabel1||r===e.nodeLabel1&&o<e.edgeLabel||r===e.nodeLabel1&&o===e.edgeLabel&&a<e.nodeLabel2)&&(e={nodeLabel1:r,edgeLabel:o,nodeLabel2:a}):e={nodeLabel1:r,edgeLabel:o,nodeLabel2:a}})),e},t.prototype.isMin=function(){var t=this,e=this.dfsCode;if(this.verbose&&console.log("isMin checking",e),1===e.dfsEdgeList.length)return!0;var n=this.directed,i=e.toGraph(-1,n),r=i.nodeMap,o=new ne,a={};i.nodes.forEach((function(e){t.findForwardRootEdges(i,e).forEach((function(t){var n=r[t.to],o=e.label+"-"+t.label+"-"+n.label;a[o]||(a[o]={projected:[],nodeLabel1:e.label,edgeLabel:t.label,nodeLabel2:n.label});var s={graphId:i.id,edge:t,preNode:null};a[o].projected.push(s)}))}));var s=this.findMinLabel(a);if(s){o.dfsEdgeList.push(new ee(0,1,s.nodeLabel1,s.edgeLabel,s.nodeLabel2));var l=s.nodeLabel1+"-"+s.edgeLabel+"-"+s.nodeLabel2;return function a(s){for(var l=o.buildRmpath(),u=o.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,c=o.dfsEdgeList[l[0]].toNode,h={},d=!1,f=0,p=n?-1:0,m=function(e){if(d)return"break";s.forEach((function(n){var r=new ie(n),a=t.findBackwardEdge(i,r.edges[l[e]],r.edges[l[0]],r);a&&(h[a.label]||(h[a.label]={projected:[],edgeLabel:a.label}),h[a.label].projected.push({graphId:i.id,edge:h,preNode:n}),f=o.dfsEdgeList[l[e]].fromNode,d=!0)}))},g=l.length-1;g>p;g--){if("break"===m(g))break}if(d){var v=t.findMinLabel(h);o.dfsEdgeList.push(new ee(c,f,Zt,v.edgeLabel,Zt));var y=o.dfsEdgeList.length-1;return t.dfsCode.dfsEdgeList[y]===o.dfsEdgeList[y]&&a(h[v.edgeLabel].projected)}var b={};d=!1;var _=0;s.forEach((function(e){var n=new ie(e),o=t.findForwardPureEdges(i,n.edges[l[0]],u,n);o.length>0&&(d=!0,_=c,o.forEach((function(t){var n=t.label+"-"+r[t.to].label;b[n]||(b[n]={projected:[],edgeLabel:t.label,nodeLabel2:r[t.to].label}),b[n].projected.push({graphId:i.id,edge:t,preNode:e})})))}));var w=l.length,x=function(e){if(d)return"break";var n=l[e];s.forEach((function(e){var a=new ie(e),s=t.findForwardRmpathEdges(i,a.edges[n],u,a);s.length>0&&(d=!0,_=o.dfsEdgeList[n].fromNode,s.forEach((function(t){var n=t.label+"-"+r[t.to].label;b[n]||(b[n]={projected:[],edgeLabel:t.label,nodeLabel2:r[t.to].label}),b[n].projected.push({graphId:i.id,edge:t,preNode:e})})))}))};for(g=0;g<w;g++){if("break"===x(g))break}if(!d)return!0;var M=t.findMinLabel(b);o.dfsEdgeList.push(new ee(_,c+1,Zt,M.edgeLabel,M.nodeLabel2));var E=o.dfsEdgeList.length-1;return e.dfsEdgeList[E]===o.dfsEdgeList[E]&&a(b[M.edgeLabel+"-"+M.nodeLabel2].projected)}(a[l].projected)}},t.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var t=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push((0,b.clone)(t))}},t.prototype.subGraphMining=function(t){var e=this;if(!(this.getSupport(t)<this.minSupport)&&this.isMin()){this.report();var n=this.dfsCode.getNodeNum(),i=this.dfsCode.buildRmpath(),r=this.dfsCode.dfsEdgeList[i[0]].toNode,o=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,a={},s={};t.forEach((function(t){for(var l=e.graphs[t.graphId],u=l.nodeMap,c=new ie(t),h=i.length-1;h>=0;h--){var d=e.findBackwardEdge(l,c.edges[i[h]],c.edges[i[0]],c);if(d){var f=e.dfsCode.dfsEdgeList[i[h]].fromNode+"-"+d.label;s[f]||(s[f]={projected:[],toNodeId:e.dfsCode.dfsEdgeList[i[h]].fromNode,edgeLabel:d.label}),s[f].projected.push({graphId:t.graphId,edge:d,preNode:t})}}if(!(n>=e.maxNodeNum)){e.findForwardPureEdges(l,c.edges[i[0]],o,c).forEach((function(e){var n=r+"-"+e.label+"-"+u[e.to].label;a[n]||(a[n]={projected:[],fromNodeId:r,edgeLabel:e.label,nodeLabel2:u[e.to].label}),a[n].projected.push({graphId:t.graphId,edge:e,preNode:t})}));var p=function(n){e.findForwardRmpathEdges(l,c.edges[i[n]],o,c).forEach((function(r){var o=e.dfsCode.dfsEdgeList[i[n]].fromNode+"-"+r.label+"-"+u[r.to].label;a[o]||(a[o]={projected:[],fromNodeId:e.dfsCode.dfsEdgeList[i[n]].fromNode,edgeLabel:r.label,nodeLabel2:u[r.to].label}),a[o].projected.push({graphId:t.graphId,edge:r,preNode:t})}))};for(h=0;h<i.length;h++)p(h)}})),Object.keys(s).forEach((function(t){var n=s[t],i=n.toNodeId,o=n.edgeLabel;e.dfsCode.dfsEdgeList.push(new ee(r,i,"-1",o,"-1")),e.subGraphMining(s[t].projected),e.dfsCode.dfsEdgeList.pop()})),Object.keys(a).forEach((function(t){var n=a[t],i=n.fromNodeId,o=n.edgeLabel,s=n.nodeLabel2;e.dfsCode.dfsEdgeList.push(new ee(i,r+1,Zt,o,s)),e.subGraphMining(a[t].projected),e.dfsCode.dfsEdgeList.pop()}))}},t.prototype.generate1EdgeFrequentSubGraphs=function(){var t=this.graphs,e=this.directed,n=this.minSupport,i=this.frequentSize1Subgraphs,r={},o={},a={},s={};return Object.keys(t).forEach((function(n){var i=t[n],l=i.nodeMap;i.nodes.forEach((function(t,i){var u=t.label,c=n+"-"+u;if(!a[c]){var h=r[u]||0;h++,r[u]=h}a[c]={graphKey:n,label:u},t.edges.forEach((function(t){var i=u,r=l[t.to].label;if(!e&&i>r){var a=r;r=i,i=a}var c=t.label,h=n+"-"+i+"-"+c+"-"+r,d=i+"-"+c+"-"+r;if(!o[d]){var f=o[d]||0;f++,o[d]=f}s[h]={graphId:n,nodeLabel1:i,edgeLabel:c,nodeLabel2:r}}))}))})),Object.keys(r).forEach((function(t){if(!(r[t]<n)){var e={nodes:[],edges:[]};e.nodes.push({id:"0",label:t}),i.push(e)}})),i},t.prototype.run=function(){var t=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var e=this.graphs,n=(this.directed,{});Object.keys(e).forEach((function(i){var r=e[i],o=r.nodeMap;r.nodes.forEach((function(e){t.findForwardRootEdges(r,e).forEach((function(t){var r=o[t.to],a=e.label+"-"+t.label+"-"+r.label;n[a]||(n[a]={projected:[],nodeLabel1:e.label,edgeLabel:t.label,nodeLabel2:r.label});var s={graphId:i,edge:t,preNode:null};n[a].projected.push(s)}))}))})),Object.keys(n).forEach((function(e){var i=n[e],r=i.projected,o=i.nodeLabel1,a=i.edgeLabel,s=i.nodeLabel2;t.dfsCode.dfsEdgeList.push(new ee(0,1,o,a,s)),t.subGraphMining(r),t.dfsCode.dfsEdgeList.pop()}))}},t}(),oe="cluster";const ae=function(t){var e=t.graphs,n=t.directed,i=void 0!==n&&n,r=t.nodeLabelProp,o=void 0===r?oe:r,a=t.edgeLabelProp,s=void 0===a?oe:a,l=function(t,e,n,i){var r={};return Object.keys(t).forEach((function(o,a){var s=t[o],l=new te(a,!0,e),u={};s.nodes.forEach((function(t,e){l.addNode(e,t[n]),u[t.id]=e})),s.edges.forEach((function(t,e){var n=u[t.source],r=u[t.target];l.addEdge(-1,n,r,t[i])})),l&&l.getNodeNum()&&(r[l.id]=l)})),r}(e,i,o,s),u=t.minSupport,c=t.maxNodeNum,h=t.minNodeNum,d=t.verbose,f=t.top,p=new re({graphs:l,minSupport:u,maxNodeNum:c,minNodeNum:h,top:f,verbose:d,directed:i});p.run();var m=function(t,e,n){var i=[];return t.forEach((function(t){var r={nodes:[],edges:[]};t.nodes.forEach((function(t){var n;r.nodes.push(((n={id:""+t.id})[e]=t.label,n))})),t.edges.forEach((function(t){var e;r.edges.push(((e={source:""+t.from,target:""+t.to})[n]=t.label,e))})),i.push(r)})),i}(p.frequentSubgraphs,o,s);return m};var se=function(t,e,n,i){void 0===n&&(n="cluster"),void 0===i&&(i=2);var r=[],o=t.nodes;return e.forEach((function(t,e){r.push(le(o,t,e,n,i))})),r},le=function(t,e,n,i,r){var o=[n],a=[],s={};return e.forEach((function(e,l){if(e<=r&&n!==l){o.push(l),a.push(t[l]);var u=t[l][i];s[u]?(s[u].count++,s[u].dists.push(e)):s[u]={count:1,dists:[e]}}})),Object.keys(s).forEach((function(t){s[t].dists=s[t].dists.sort((function(t,e){return t-e}))})),{nodeIdx:n,nodeId:t[n].id,nodeIdxs:o,neighbors:a,neighborNum:o.length-1,nodeLabelCountMap:s}},ue=function(t,e,n,i){var r=n.nodes;return i||(i={}),Object.keys(t).forEach((function(o){var a,s;if(!i||!i[o]){i[o]={nodes:[],edges:[]};var l=t[o],u=null===(a=e[l.start])||void 0===a?void 0:a.nodeIdxs,c=null===(s=e[l.end])||void 0===s?void 0:s.nodeIdxs;if(u&&c){var h=new Set(c),d=u.filter((function(t){return h.has(t)}));if(d&&d.length){for(var f={},p=d.length,m=0;m<p;m++){var g=r[d[m]];i[o].nodes.push(g),f[g.id]=!0}n.edges.forEach((function(t){f[t.source]&&f[t.target]&&i[o].edges.push(t)}))}}}})),i},ce=function(t,e,n,i){var r,o,a={};t.nodes.forEach((function(t){a[t.id]=t}));var s=0;return!(null===(r=null==e?void 0:e.edges)||void 0===r?void 0:r.length)||(null===(o=null==e?void 0:e.nodes)||void 0===o?void 0:o.length)<2?0:(t.edges.forEach((function(t){var r=a[t.source][n],o=a[t.target][n],l=null==e?void 0:e.nodes[0][n],u=null==e?void 0:e.nodes[1][n],c=null==e?void 0:e.edges[0][i];t[i]===c&&(r===l&&o===u||r===u&&o===l)&&s++})),s)},he=function(t,e){var n={},i={};return t.forEach((function(t,r){n[t.id]={idx:r,node:t,degree:0,inDegree:0,outDegree:0};var o=t[e];i[o]||(i[o]=[]),i[o].push(t)})),{nodeMap:n,nodeLabelMap:i}},de=function(t,e,n){var i={},r={};return t.forEach((function(t,o){i[""+_t]={idx:o,edge:t};var a=t[e];r[a]||(r[a]=[]),r[a].push(t);var s=n[t.source];s&&(s.degree++,s.outDegree++);var l=n[t.target];l&&(l.degree++,l.inDegree++)})),{edgeMap:i,edgeLabelMap:r}},fe=function(t,e,n){var i=e.length,r={};return e.forEach((function(e,o){for(var a=n?0:o+1,s=t[o].id,l=a;l<i;l++)if(o!==l){var u=t[l].id,c=e[l];r[s+"-"+u]=c,n||(r[u+"-"+s]=c)}})),r},pe=function(t,e,n,i,r,o,a,s,l,u,c){var h,d=e.id+"-"+n.id;if(u&&u[d])return u[d];var f=c?c[d]:void 0;if(!f){var p=((h={})[d]={start:i[e.id].idx,end:i[n.id].idx,distance:r},h);f=(c=ue(p,o,t,c))[d]}return ce(f,a,s,l)},me=function(t,e,n,i){var r,o,a,s=null===(r=t[e])||void 0===r?void 0:r.degree,l=null===(o=t[e])||void 0===o?void 0:o.inDegree,u=null===(a=t[e])||void 0===a?void 0:a.outDegree;return void 0===t[e]&&(s=1/0,l=1/0,u=1/0,i[e].forEach((function(t){var e=n[t.id].degree;s>e&&(s=e);var i=n[t.id].inDegree;l>i&&(l=i);var r=n[t.id].outDegree;u>r&&(u=r)})),t[e]={degree:s,inDegree:l,outDegree:u}),{minPatternNodeLabelDegree:s,minPatternNodeLabelInDegree:l,minPatternNodeLabelOutDegree:u}};const ge=function(t,e,n,i,r,o,a){if(void 0===n&&(n=!1),void 0===o&&(o="cluster"),void 0===a&&(a="cluster"),t&&t.nodes){var s=t.nodes.length;if(s){var l=jt(t,n),u=jt(e,n),c=fe(t.nodes,l,n),h=fe(e.nodes,u,n),d=he(t.nodes,o),f=d.nodeMap,p=d.nodeLabelMap,m=he(e.nodes,o),g=m.nodeMap,v=m.nodeLabelMap;de(t.edges,a,f);var b=de(e.edges,a,g).edgeLabelMap,_=[];null==u||u.forEach((function(t){_=_.concat(t)})),r||(r=Math.max.apply(Math,(0,y.__spreadArray)((0,y.__spreadArray)([],_),[2]))),i||(i=r);var w=se(t,l,o,i),x=se(e,u,o,i),M=function(t,e,n,i,r){var o=Math.ceil(n/e),a={},s=0;return i.forEach((function(t,i){for(var l=0,u=0,c=t.nodeIdxs,h=t.neighborNum-1;l<o;){for(var d=c[1+Math.floor(Math.random()*h)],f=0;(a[i+"-"+d]||a[d+"-"+i])&&(d=Math.floor(Math.random()*e),!(++f>2*e)););if(f<2*e&&(a[i+"-"+d]={start:i,end:d,distance:r[i][d]},l++,++s>=n))return a;if(++u>2*e)break}l<o&&(o=(o+(o-l))/(e-i-1))})),a}(0,s,Math.min(100,s*(s-1)/2),x,l),E=ue(M,w,t),S=ae({graphs:E,nodeLabelProp:o,edgeLabelProp:a,minSupport:1,minNodeNum:1,maxNodeNum:4,directed:n}).slice(0,10),k=S.length,C=[];S.forEach((function(t,e){C[e]={},Object.keys(E).forEach((function(n){var i=E[n],r=ce(i,t,o,a);C[e][n]=r}))}));var T=function(t,e,n){for(var i=1/0,r=0,o=function(e){var n=t[e],o=Object.keys(n).sort((function(t,e){return n[t]-n[e]})),a=[];o.forEach((function(t,e){a[e%10]||(a[e%10]={graphs:[],totalCount:0,aveCount:0}),a[e%10].graphs.push(t),a[e%10].totalCount+=n[t]}));var s=0,l=[];a.forEach((function(t){var e=t.totalCount/t.graphs.length;t.aveCount=e,l.push(e);var i=0,r=t.length;t.graphs.forEach((function(e,r){var o=n[e];t.graphs.forEach((function(t,e){r!==e&&(i+=Math.abs(o-n[t]))}))})),s+=i/=r*(r-1)/2})),s/=a.length;var u=0;l.forEach((function(t,e){l.forEach((function(n,i){e!==i&&(u+=Math.abs(t-n))})),u/=l.length*(l.length-1)/2}));var c=u-s;i<c&&(i=c,r=e)},a=0;a<e;a++)o(a);return{structure:n[r],structureCountMap:t[r]}}(C,k,S),D=T.structure,L=T.structureCountMap,A=e.nodes[0],O=A[o],P=p[O],I={},N={},R={},Y={},j={},F={};Object.keys(v).forEach((function(i,r){j[i]=[],n&&(F[i]=[]);var s=-1/0,l=v[i],u={};l.forEach((function(t){var e=h[A.id+"-"+t.id];if(e&&j[i].push(e),s<e&&(s=e),u[A.id+"-"+t.id]={start:0,end:g[t.id].idx,distance:e},n){var r=h[t.id+"-"+A.id];r&&F[i].push(r)}})),j[i]=j[i].sort((function(t,e){return t-e})),n&&(F[i]=F[i].sort((function(t,e){return t-e}))),N=ue(u,x,e,N);var d=[];if(Object.keys(u).forEach((function(t){if(R[t])d.push(R[t]);else{var e=N[t];R[t]=ce(e,D,o,a),d.push(R[t])}})),d=d.sort((function(t,e){return e-t})),Y[A.id+"-"+i]=d,i!==O)for(var p=function(e){var n=P[e],r=w[f[n.id].idx],s=r.nodeLabelCountMap[i],l=v[i].length;if(!s||s.count<l)return P.splice(e,1),"continue";for(var u=!1,h=0;h<l;h++)if(s.dists[h]>j[i][h]){u=!0;break}if(u)return P.splice(e,1),"continue";var p={};r.neighbors.forEach((function(t){var e=c[n.id+"-"+t.id];p[n.id+"-"+t.id]={start:f[n.id].idx,end:f[t.id].idx,distance:e}})),E=ue(p,w,t,E);var m=[];Object.keys(p).forEach((function(t){if(L[t])m.push(L[t]);else{var e=E[t];L[t]=ce(e,D,o,a),m.push(L[t])}})),m=m.sort((function(t,e){return e-t}));var g=!1;for(h=0;h<l;h++)if(m[h]<d[h]){g=!0;break}return g?(P.splice(e,1),"continue"):void 0},m=P.length-1;m>=0;m--)p(m)}));var B=[];null==P||P.forEach((function(i){for(var s=f[i.id].idx,u=le(t.nodes,l[s],s,o,r).neighbors,h=!1,d=u.length-1;d>=0;d--){if(u.length+1<e.nodes.length)return void(h=!0);var p=u[d],m=p[o];if(v[m]&&v[m].length)if(j[m]&&j[m].length){var y=i.id+"-"+p.id,b=c[y],_=j[m].length-1;if(b>j[m][_])u.splice(d,1);else{if(n){var x=p.id+"-"+i.id,M=c[x];if(_=F[m].length-1,M>F[m][_]){u.splice(d,1);continue}}var S=L[y]?L[y]:pe(t,i,p,f,b,w,D,o,a,L,E),k=A.id+"-"+m;if(S<Y[k][Y[k].length-1])u.splice(d,1);else{var C=me(I,m,g,v),T=C.minPatternNodeLabelDegree;C.minPatternNodeLabelInDegree,C.minPatternNodeLabelOutDegree;f[p.id].degree<T&&u.splice(d,1)}}}else u.splice(d,1);else u.splice(d,1)}h||B.push({nodes:[i].concat(u)})}));var z=It(e,A.id,!1).length,H={};n?(Object.keys(z).forEach((function(t){var e=g[t].node[o];H[e]?H[e].push(z[t]):H[e]=[z[t]]})),Object.keys(H).forEach((function(t){H[t].sort((function(t,e){return t-e}))}))):H=j;for(var G=function(i){var r=B[i],s=r.nodes[0],l={},u={};r.nodes.forEach((function(t,e){u[t.id]={idx:e,node:t,degree:0,inDegree:0,outDegree:0};var n=t[o];l[n]?l[n]++:l[n]=1}));var c=[],h={};t.edges.forEach((function(t){u[t.source]&&u[t.target]&&(c.push(t),h[t[a]]?h[t[a]]++:h[t[a]]=1,u[t.source].degree++,u[t.target].degree++,u[t.source].outDegree++,u[t.target].inDegree++)}));for(var d=Object.keys(b).length,p=!1,m=0;m<d;m++){var y=Object.keys(b)[m];if(!h[y]||h[y]<b[y].length){p=!0;break}}if(p)return B.splice(i,1),"continue";var _=c.length;if(_<e.edges.length)return B.splice(i,1),"break";var w=!1,x=function(t){var e=c[t],i=e[a],r=b[i];if(!r||!r.length)return h[i]--,r&&h[i]<r.length?(w=!0,"break"):(c.splice(t,1),u[e.source].degree--,u[e.target].degree--,u[e.source].outDegree--,u[e.target].inDegree--,"continue");var s=u[e.source].node[o],l=u[e.target].node[o],d=!1;return r.forEach((function(t){var e=g[t.source].node,i=g[t.target].node;e[o]===s&&i[o]===l&&(d=!0),n||e[o]!==l||i[o]!==s||(d=!0)})),d?void 0:(h[i]--,r&&h[i]<r.length?(w=!0,"break"):(c.splice(t,1),u[e.source].degree--,u[e.target].degree--,u[e.source].outDegree--,u[e.target].inDegree--,"continue"))};for(m=_-1;m>=0;m--){if("break"===x(m))break}if(w)return B.splice(i,1),"continue";r.edges=c;var M=It(r,r.nodes[0].id,!1).length;if(Object.keys(M).reverse().forEach((function(t){if(t!==r.nodes[0].id&&!w){if(M[t]===1/0){var e=u[t].node[o];if(l[e]--,l[e]<v[e].length)return void(w=!0);var n=r.nodes.indexOf(u[t].node);return r.nodes.splice(n,1),void(u[t]=void 0)}var i=f[t].node[o];if(!H[i]||!H[i].length||M[t]>H[i][H[i].length-1]){e=u[t].node[o];if(l[e]--,l[e]<v[e].length)return void(w=!0);n=r.nodes.indexOf(u[t].node);r.nodes.splice(n,1),u[t]=void 0}}})),w)return B.splice(i,1),"continue";for(var E=!0,S=0;E&&!w;){if(E=!1,n?u[s.id].degree<g[A.id].degree||u[s.id].inDegree<g[A.id].inDegree||u[s.id].outDegree<g[A.id].outDegree:u[s.id].degree<g[A.id].degree){w=!0;break}if(l[s[o]]<v[s[o]].length){w=!0;break}for(var k=r.nodes.length-1;k>=0;k--){var C=r.nodes[k],T=u[C.id].degree,D=u[C.id].inDegree,L=u[C.id].outDegree,O=C[o],P=me(I,O,g,v),N=P.minPatternNodeLabelDegree,R=P.minPatternNodeLabelInDegree,Y=P.minPatternNodeLabelOutDegree;if(n?T<N||D<R||L<Y:T<N){if(l[C[o]]--,l[C[o]]<v[C[o]].length){w=!0;break}r.nodes.splice(k,1),u[C.id]=void 0,E=!0}}if(w||!E&&0!==S)break;for(var j=(_=c.length)-1;j>=0;j--){var F=c[j];if(!u[F.source]||!u[F.target]){c.splice(j,1);var z=F[a];if(h[z]--,u[F.source]&&(u[F.source].degree--,u[F.source].outDegree--),u[F.target]&&(u[F.target].degree--,u[F.target].inDegree--),b[z]&&h[z]<b[z].length){w=!0;break}E=!0}}S++}return w||w||r.nodes.length<e.nodes.length||c.length<e.edges.length?(B.splice(i,1),"continue"):void 0},W=B.length-1;W>=0;W--){if("break"===G(W))break}var U=B.length,V=function(t){var e=B[t],n={};e.edges.forEach((function(t){var e=t.source+"-"+t.target+"-"+t.label;n[e]?n[e]++:n[e]=1}));for(var i=function(t){var e=B[t],i={};e.edges.forEach((function(t){var e=t.source+"-"+t.target+"-"+t.label;i[e]?i[e]++:i[e]=1}));var r=!0;Object.keys(i).length!==Object.keys(n).length?r=!1:Object.keys(n).forEach((function(t){i[t]!==n[t]&&(r=!1)})),r&&B.splice(t,1)},r=U-1;r>t;r--)i(r);U=B.length};for(W=0;W<=U-1;W++)V(W);return B}}};var ve=function(){function t(t){void 0===t&&(t=10),this.linkedList=new mt,this.maxStep=t}return Object.defineProperty(t.prototype,"length",{get:function(){return this.linkedList.toArray().length},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){return!this.linkedList.head},t.prototype.isMaxStack=function(){return this.toArray().length>=this.maxStep},t.prototype.peek=function(){return this.isEmpty()?null:this.linkedList.head.value},t.prototype.push=function(t){this.linkedList.prepend(t),this.length>this.maxStep&&this.linkedList.deleteTail()},t.prototype.pop=function(){var t=this.linkedList.deleteHead();return t?t.value:null},t.prototype.toArray=function(){return this.linkedList.toArray().map((function(t){return t.value}))},t.prototype.clear=function(){for(;!this.isEmpty();)this.pop()},t}();const ye=ve;var be=Pt;const _e={getAdjMatrix:ht,breadthFirstSearch:wt,connectedComponent:Mt,getDegree:St,getInDegree:kt,getOutDegree:Ct,detectCycle:Pt,detectDirectedCycle:be,detectAllCycles:Ot,detectAllDirectedCycle:At,detectAllUndirectedCycle:Lt,depthFirstSearch:Dt,dijkstra:It,findAllPath:Yt,findShortestPath:Rt,floydWarshall:jt,labelPropagation:Ft,louvain:zt,minimumSpanningTree:Kt,pageRank:$t,getNeighbors:yt,Stack:ye,GADDI:ge};function we(){var t=new C(3);return C!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function xe(t){var e=new C(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Me(t){var e=t[0],n=t[1],i=t[2];return Math.hypot(e,n,i)}function Ee(t,e,n){var i=new C(3);return i[0]=t,i[1]=e,i[2]=n,i}function Se(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function ke(t,e,n,i){return t[0]=e,t[1]=n,t[2]=i,t}function Ce(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function Te(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function De(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function Le(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function Ae(t,e){var n=e[0],i=e[1],r=e[2],o=n*n+i*i+r*r;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t}function Oe(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Pe(t,e,n){var i=e[0],r=e[1],o=e[2],a=n[0],s=n[1],l=n[2];return t[0]=r*l-o*s,t[1]=o*a-i*l,t[2]=i*s-r*a,t}function Ie(t,e,n,i){var r=e[0],o=e[1],a=e[2];return t[0]=r+i*(n[0]-r),t[1]=o+i*(n[1]-o),t[2]=a+i*(n[2]-a),t}function Ne(t,e,n){var i=e[0],r=e[1],o=e[2],a=n[3]*i+n[7]*r+n[11]*o+n[15];return a=a||1,t[0]=(n[0]*i+n[4]*r+n[8]*o+n[12])/a,t[1]=(n[1]*i+n[5]*r+n[9]*o+n[13])/a,t[2]=(n[2]*i+n[6]*r+n[10]*o+n[14])/a,t}function Re(t,e,n){var i=e[0],r=e[1],o=e[2];return t[0]=i*n[0]+r*n[3]+o*n[6],t[1]=i*n[1]+r*n[4]+o*n[7],t[2]=i*n[2]+r*n[5]+o*n[8],t}var Ye,je=Te,Fe=function(t,e){var n=e[0]-t[0],i=e[1]-t[1],r=e[2]-t[2];return Math.hypot(n,i,r)},Be=Me;Ye=we();function ze(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function He(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}function Ge(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}function We(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function Ue(t,e){var n=e[0]-t[0],i=e[1]-t[1];return Math.hypot(n,i)}function Ve(t,e){var n=e[0],i=e[1],r=n*n+i*i;return r>0&&(r=1/Math.sqrt(r)),t[0]=e[0]*r,t[1]=e[1]*r,t}function Xe(t,e){return t[0]*e[0]+t[1]*e[1]}function qe(t,e){return t[0]===e[0]&&t[1]===e[1]}var Ke=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t},$e=(function(){var t,e=(t=new C(2),C!=Float32Array&&(t[0]=0,t[1]=0),t)}(),ct),Ze=function(t){return function(e,n){return e[t]-n[t]}},Je=function(t,e,n){return t>=e&&t<=n},Qe=function(t,e,n,i){var r=n.x-t.x,o=n.y-t.y,a=e.x-t.x,s=e.y-t.y,l=i.x-n.x,u=i.y-n.y,c=a*u-s*l,h=1/c;if(c*c>1e-4*(a*a+s*s)*(l*l+u*u)){var d=(r*u-o*l)*h,f=(r*s-o*a)*h;return Je(d,0,1)&&Je(f,0,1)?{x:t.x+d*a,y:t.y+d*s}:null}return null},tn=function(t,e){var n=t.x,i=t.y,r=t.width,o=t.height,a=[],s={x:n+r/2,y:i+o/2};a.push({x:n,y:i}),a.push({x:n+r,y:i}),a.push({x:n+r,y:i+o}),a.push({x:n,y:i+o}),a.push({x:n,y:i});for(var l=null,u=1;u<a.length&&!(l=Qe(a[u-1],a[u],s,e));u++);return l},en=function(t,e){var n=t.x,i=t.y,r=t.r,o=e.x-n,a=e.y-i;if(Math.sqrt(o*o+a*a)<r)return null;var s=Math.sign(o),l=Math.sign(a),u=Math.atan(a/o);return{x:n+Math.abs(r*Math.cos(u))*s,y:i+Math.abs(r*Math.sin(u))*l}},nn=function(t,e){var n=t.rx,i=t.ry,r=t.x,o=t.y,a=e.x-r,s=e.y-o,l=Math.atan2(s/i,a/n);return l<0&&(l+=2*Math.PI),{x:r+n*Math.cos(l),y:o+i*Math.sin(l)}},rn=function(t,e,n){void 0===n&&(n=1);var i=[t.x,t.y,n];return e&&!isNaN(e[0])||(e=[1,0,0,0,1,0,0,0,1]),Re(i,i,e),{x:i[0],y:i[1]}},on=function(t,e,n){void 0===n&&(n=1),e&&!isNaN(e[0])||(e=[1,0,0,0,1,0,0,0,1]);var i=R([1,0,0,0,1,0,0,0,1],e);i||(i=[1,0,0,0,1,0,0,0,1]);var r=[t.x,t.y,n];return Re(r,r,i),{x:r[0],y:r[1]}},an=function(t,e,n){var i=t.x-e.x,r=t.y-e.y,o=t.x-n.x,a=t.y-n.y,s=(t.x*t.x-e.x*e.x-e.y*e.y+t.y*t.y)/2,l=(t.x*t.x-n.x*n.x-n.y*n.y+t.y*t.y)/2,u=r*o-i*a;return{x:-(a*s-r*l)/u,y:-(i*l-o*s)/u}},sn=function(t,e){var n=t.x-e.x,i=t.y-e.y;return Math.sqrt(n*n+i*i)},ln=function(t,e){var n=[];return t.forEach((function(t){var i=[];t.forEach((function(t){i.push(t*e)})),n.push(i)})),n},un=function(t){for(var e=[],n=t.length,i=0;i<n;i+=1){e[i]=[];for(var r=0;r<n;r+=1)i===r?e[i][r]=0:0!==t[i][r]&&t[i][r]?e[i][r]=t[i][r]:e[i][r]=1/0}for(var o=0;o<n;o+=1)for(i=0;i<n;i+=1)for(r=0;r<n;r+=1)e[i][r]>e[i][o]+e[o][r]&&(e[i][r]=e[i][o]+e[o][r]);return e},cn=function(t,e){var n=t.nodes,i=t.edges,r=[],o={};if(!n)throw new Error("invalid nodes data!");return n&&n.forEach((function(t,e){o[t.id]=e;r.push([])})),i&&i.forEach((function(t){var n=t.source,i=t.target,a=o[n],s=o[i];r[a][s]=1,e||(r[s][a]=1)})),r},hn=function(t,e){t.translate(e.x,e.y)},dn=function(t,e,n,i){void 0===i&&(i={duration:500});var r=t.getMatrix();r||(r=[1,0,0,0,1,0,0,0,1]);var o=t.getCanvasBBox(),a=e.x-o.minX,s=e.y-o.minY;if(n){var l=a*r[0],u=s*r[4],c=0,h=0,d=0,f=0;t.animate((function(t){return r=$e(r,[["t",(d=l*t)-c,(f=u*t)-h]]),c=d,h=f,{matrix:r}}),i)}else{var p=$e(r,[["t",a,s]]);t.setMatrix(p)}},fn=function(t,e){var n=t.getMatrix();n||(n=[1,0,0,0,1,0,0,0,1]);var i=e;(0,b.isArray)(e)||(i=[e,e]),(0,b.isArray)(e)&&1===e.length&&(i=[e[0],e[0]]),n=$e(n,[["s",i[0],i[1]]]),t.setMatrix(n)},pn=function(t,e){var n=t.getMatrix();n||(n=[1,0,0,0,1,0,0,0,1]),n=$e(n,[["r",e]]),t.setMatrix(n)},mn=function(t,e,n){for(var i=[],r=0;r<t;r++)i[r]=0;return n.forEach((function(t){t.source&&(i[e[t.source]]+=1),t.target&&(i[e[t.target]]+=1)})),i};function gn(t,e,n){return(n[0]-t[0])*(e[1]-t[1])==(e[0]-t[0])*(n[1]-t[1])&&Math.min(t[0],e[0])<=n[0]&&n[0]<=Math.max(t[0],e[0])&&Math.min(t[1],e[1])<=n[1]&&n[1]<=Math.max(t[1],e[1])}var vn=function(t,e,n){var i=!1,r=t.length;function o(t){return Math.abs(t)<1e-6?0:t<0?-1:1}if(r<=2)return!1;for(var a=0;a<r;a++){var s=t[a],l=t[(a+1)%r];if(gn(s,l,[e,n]))return!0;o(s[1]-n)>0!=o(l[1]-n)>0&&o(e-(n-s[1])*(s[0]-l[0])/(s[1]-l[1])-s[0])<0&&(i=!i)}return i},yn=function(t,e){return!(e.minX>t.maxX||e.maxX<t.minX||e.minY>t.maxY||e.maxY<t.minY)},bn=function(t,e){var n=function(t){var e=t.map((function(t){return t[0]})),n=t.map((function(t){return t[1]}));return{minX:Math.min.apply(null,e),maxX:Math.max.apply(null,e),minY:Math.min.apply(null,n),maxY:Math.max.apply(null,n)}},i=function(t){for(var e=[],n=t.length,i=0;i<n-1;i++){var r=t[i],o=t[i+1];e.push({from:{x:r[0],y:r[1]},to:{x:o[0],y:o[1]}})}if(e.length>1){var a=t[0],s=t[n-1];e.push({from:{x:s[0],y:s[1]},to:{x:a[0],y:a[1]}})}return e};if(t.length<2||e.length<2)return!1;var r=n(t),o=n(e);if(!yn(r,o))return!1;var a=!1;if((0,b.each)(e,(function(e){if(vn(t,e[0],e[1]))return a=!0,!1})),a)return!0;if((0,b.each)(t,(function(t){if(vn(e,t[0],t[1]))return a=!0,!1})),a)return!0;var s=i(t),l=i(e),u=!1;return(0,b.each)(l,(function(t){if(function(t,e){var n=!1;return(0,b.each)(t,(function(t){if(Qe(t.from,t.to,e.from,e.to))return n=!0,!1})),n}(s,t))return u=!0,!1})),u},_n=function(){function t(t,e,n,i){this.x1=t,this.y1=e,this.x2=n,this.y2=i}return t.prototype.getBBox=function(){var t=Math.min(this.x1,this.x2),e=Math.min(this.y1,this.y2),n=Math.max(this.x1,this.x2),i=Math.max(this.y1,this.y2);return{x:t,y:e,minX:t,minY:e,maxX:n,maxY:i,width:n-t,height:i-e}},t}(),wn=function(t,e){return{top:[t.minX,t.minY,t.maxX,t.minY],left:[t.minX,t.minY,t.minX,t.maxY],bottom:[t.minX,t.maxY,t.maxX,t.maxY],right:[t.maxX,t.minY,t.maxX,t.maxY]}[e]},xn=function(t,e){var n=(e.x2-e.x1)*(t.y1-e.y1)-(e.y2-e.y1)*(t.x1-e.x1),i=(t.x2-t.x1)*(t.y1-e.y1)-(t.y2-t.y1)*(t.x1-e.x1),r=(e.y2-e.y1)*(t.x2-t.x1)-(e.x2-e.x1)*(t.y2-t.y1);if(r){var o=n/r,a=i/r;if(o>=0&&o<=1&&a>=0&&a<=1)return o}return Number.POSITIVE_INFINITY},Mn=function(t,e){for(var n=["top","left","bottom","right"],i=t.getBBox(),r=0,o=[],a=0;a<4;a++){var s=wn(i,n[a]),l=s[0],u=s[1],c=s[2],h=s[3];o[a]=Qe({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},{x:l,y:u},{x:c,y:h}),o[a]&&(r+=1)}return[o,r]},En=function(t,e){for(var n=["top","left","bottom","right"],i=t.getBBox(),r=Number.POSITIVE_INFINITY,o=0,a=0;a<4;a++){var s=wn(i,n[a]),l=s[0],u=s[1],c=s[2],h=s[3],d=xn(e,new _n(l,u,c,h));(d=Math.abs(d-.5))>=0&&d<=1&&(o+=1,r=d<r?d:r)}return 0===o?-1:r},Sn=function(t){var e=0,n=0;if(t.length>0){for(var i=0,r=t;i<r.length;i++){var o=r[i];e+=o.x,n+=o.y}e/=t.length,n/=t.length}return{x:e,y:n}},kn=function(t,e){return Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)},Cn=function(t,e){var n,i=e.x1,r=e.y1,o=e.x2-i,a=e.y2-r,s=t.x-i,l=t.y-r,u=s*o+l*a;n=u<=0||(u=(s=o-s)*o+(l=a-l)*a)<=0?0:u*u/(o*o+a*a);var c=s*s+l*l-n;return c<0&&(c=0),c},Tn=function(t,e,n){return void 0===n&&(n=.001),Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)<Math.pow(n,2)},Dn=function(t,e){var n=t.x<e.x,i=t.x>e.x+e.width,r=t.y>e.y+e.height,o=t.y<e.y;if(!(n||i||r||o))return 0;if(r&&!n&&!i)return Math.pow(e.y+e.height-t.y,2);if(o&&!n&&!i)return Math.pow(t.y-e.y,2);if(n&&!r&&!o)return Math.pow(e.x-t.x,2);if(i&&!r&&!o)return Math.pow(e.x+e.width-t.x,2);var a=Math.min(Math.abs(e.x-t.x),Math.abs(e.x+e.width-t.x)),s=Math.min(Math.abs(e.y-t.y),Math.abs(e.y+e.height-t.y));return a*a+s*s},Ln=function(t,e){var n=t[0],i=t[1],r=t[2],o=t[3],a=e.x,s=e.y,l=[r-n,o-i];if(qe(l,[0,0]))return NaN;var u=[-l[1],l[0]];Ve(u,u);var c=[a-n,s-i];return Math.abs(Xe(c,u))},An="rgb(95, 149, 255)",On="rgb(0, 0, 0)",Pn="rgb(247, 250, 255)",In="rgb(239, 244, 255)",Nn="rgb(253, 253, 253)",Rn="rgb(250, 250, 250)",Yn="rgb(224, 224, 224)",jn="rgb(234, 234, 234)",Fn="#4572d9";const Bn={version:"0.3.11",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:An,fill:In},size:20,color:An,linkPoints:{size:8,lineWidth:1,fill:Pn,stroke:An}},nodeStateStyles:{active:{fill:Pn,stroke:An,lineWidth:2,shadowColor:An,shadowBlur:10},selected:{fill:"rgb(255, 255, 255)",stroke:An,lineWidth:4,shadowColor:An,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:"rgb(223, 234, 255)",stroke:Fn,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:Pn,stroke:"rgb(191, 213, 255)",lineWidth:1},disable:{fill:Rn,stroke:Yn,lineWidth:1}},edgeLabel:{style:{fill:On,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:Yn,lineAppendWidth:2},color:Yn},edgeStateStyles:{active:{stroke:An,lineWidth:1},selected:{stroke:An,lineWidth:2,shadowColor:An,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:An,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:jn,lineWidth:1},disable:{stroke:"rgb(245, 245, 245)",lineWidth:1}},comboLabel:{style:{fill:On,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:Nn,lineWidth:1,stroke:Yn,r:5,width:20,height:10},size:[20,5],color:Yn,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:An,lineWidth:1,fill:Pn},selected:{stroke:An,lineWidth:2,fill:Nn,shadowColor:An,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:Fn,lineWidth:2,fill:Nn,"text-shape":{fontWeight:500}},inactive:{stroke:Yn,fill:Nn,lineWidth:1},disable:{stroke:jn,fill:Rn,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]}},zn={" ":.3329986572265625,a:.5589996337890625,A:.6569992065429687,b:.58599853515625,B:.6769989013671875,c:.5469985961914062,C:.7279998779296875,d:.58599853515625,D:.705999755859375,e:.554998779296875,E:.63699951171875,f:.37299957275390627,F:.5769989013671875,g:.5909988403320312,G:.7479995727539063,h:.555999755859375,H:.7199996948242188,i:.255999755859375,I:.23699951171875,j:.26699981689453123,J:.5169998168945312,k:.5289993286132812,K:.6899993896484375,l:.23499908447265624,L:.5879989624023437,m:.854998779296875,M:.8819992065429687,n:.5589996337890625,N:.7189987182617188,o:.58599853515625,O:.7669998168945312,p:.58599853515625,P:.6419998168945312,q:.58599853515625,Q:.7669998168945312,r:.3649993896484375,R:.6759994506835938,s:.504998779296875,S:.6319992065429687,t:.354998779296875,T:.6189987182617187,u:.5599990844726562,U:.7139999389648437,v:.48199920654296874,V:.6389999389648438,w:.754998779296875,W:.929998779296875,x:.5089996337890625,X:.63699951171875,y:.4959991455078125,Y:.66199951171875,z:.48699951171875,Z:.6239990234375,0:.6,1:.40099945068359377,2:.6,3:.6,4:.6,5:.6,6:.6,7:.5469985961914062,8:.6,9:.6,"[":.3329986572265625,"]":.3329986572265625,",":.26399993896484375,".":.26399993896484375,";":.26399993896484375,":":.26399993896484375,"{":.3329986572265625,"}":.3329986572265625,"\\":.5,"|":.19499969482421875,"=":.604998779296875,"+":.604998779296875,"-":.604998779296875,_:.5,"`":.3329986572265625," ~":.8329986572265625,"!":.3329986572265625,"@":.8579986572265625,"#":.6,$:.6,"%":.9699996948242188,"^":.517999267578125,"&":.7259994506835937,"*":.505999755859375,"(":.3329986572265625,")":.3329986572265625,"<":.604998779296875,">":.604998779296875,"/":.5,"?":.53699951171875};var Hn=Math.PI,Gn=Math.sin,Wn=Math.cos,Un=Gn(Hn/8),Vn=Wn(Hn/8),Xn=function(t,e){var n=t.getBBox(),i={x:n.minX,y:n.minY},r={x:n.maxX,y:n.maxY};if(e){var o=e.getMatrix();o||(o=[1,0,0,0,1,0,0,0,1]),i=rn(i,o),r=rn(r,o)}var a=i.x,s=i.y,l=r.x,u=r.y;return{x:a,y:s,minX:a,minY:s,maxX:l,maxY:u,width:l-a,height:u-s}},qn=function(t){var e=t.sourceNode||t.targetNode,n=e.get("group").getMatrix();n||(n=[1,0,0,0,1,0,0,0,1]);var i=e.getKeyShape().getBBox(),r=t.loopCfg||{},o=r.dist||2*Math.max(i.width,i.height),a=r.position||Bn.defaultLoopPosition,s=[n[6],n[7]],l=[t.startPoint.x,t.startPoint.y],u=[t.endPoint.x,t.endPoint.y],c=i.height/2,h=i.height/2,d=c*Un,f=c*Vn,p=h*Un,m=h*Vn;if(l[0]===u[0]&&l[1]===u[1]){switch(a){case"top":l=[s[0]-d,s[1]-f],u=[s[0]+p,s[1]-m];break;case"top-right":c=i.height/2,h=i.width/2,l=[s[0]+(d=c*Un),s[1]-(f=c*Vn)],u=[s[0]+(m=h*Vn),s[1]-(p=h*Un)];break;case"right":c=i.width/2,h=i.width/2,l=[s[0]+(f=c*Vn),s[1]-(d=c*Un)],u=[s[0]+(m=h*Vn),s[1]+(p=h*Un)];break;case"bottom-right":c=i.width/2,h=i.height/2,l=[s[0]+(f=c*Vn),s[1]+(d=c*Un)],u=[s[0]+(p=h*Un),s[1]+(m=h*Vn)];break;case"bottom":c=i.height/2,h=i.height/2,l=[s[0]+(d=c*Un),s[1]+(f=c*Vn)],u=[s[0]-(p=h*Un),s[1]+(m=h*Vn)];break;case"bottom-left":c=i.height/2,h=i.width/2,l=[s[0]-(d=c*Un),s[1]+(f=c*Vn)],u=[s[0]-(m=h*Vn),s[1]+(p=h*Un)];break;case"left":c=i.width/2,h=i.width/2,l=[s[0]-(f=c*Vn),s[1]+(d=c*Un)],u=[s[0]-(m=h*Vn),s[1]-(p=h*Un)];break;case"top-left":c=i.width/2,h=i.height/2,l=[s[0]-(f=c*Vn),s[1]-(d=c*Un)],u=[s[0]-(p=h*Un),s[1]-(m=h*Vn)];break;default:c=i.width/2,h=i.width/2,l=[s[0]-(d=c*Un),s[1]-(f=c*Vn)],u=[s[0]+(p=h*Un),s[1]-(m=h*Vn)]}if(!1===r.clockwise){var g=[l[0],l[1]];l=[u[0],u[1]],u=[g[0],g[1]]}}var v=[l[0]-s[0],l[1]-s[1]],y=(c+o)/c,b=(h+o)/h;!1===r.clockwise&&(y=(h+o)/h,b=(c+o)/c);var _=We([0,0],v,y),w=[s[0]+_[0],s[1]+_[1]],x=We([0,0],[u[0]-s[0],u[1]-s[1]],b),M=[s[0]+x[0],s[1]+x[1]];return t.startPoint={x:l[0],y:l[1]},t.endPoint={x:u[0],y:u[1]},t.controlPoints=[{x:w[0],y:w[1]},{x:M[0],y:M[1]}],t},Kn=function(t,e,n,i,r){var o=1e-4,a=[],s=null==t?void 0:t.getPoint(e);if(!s)return{x:0,y:0,angle:0};if(e<o)a=t.getStartTangent().reverse();else if(e>.9999)a=t.getEndTangent();else{var l=null==t?void 0:t.getPoint(e+o);a.push([s.x,s.y]),a.push([l.x,l.y])}var u=Math.atan2(a[1][1]-a[0][1],a[1][0]-a[0][0]);if(u<0&&(u+=2*Hn),n&&(s.x+=Wn(u)*n,s.y+=Gn(u)*n),i){var c=u-Hn/2;u>.5*Hn&&u<1.5*Hn&&(c-=Hn),s.x+=Wn(c)*i,s.y+=Gn(c)*i}var h={x:s.x,y:s.y,angle:u};return r?(u>.5*Hn&&u<1.5*Hn&&(u-=Hn),(0,y.__assign)({rotate:u},h)):h},$n=function t(e,n){if(!1===n(e))return!1;if(e&&e.children)for(var i=e.children.length-1;i>=0;i--)if(!t(e.children[i],n))return!1;return!0},Zn=function t(e,n){if(e&&e.children)for(var i=e.children.length-1;i>=0;i--)if(!t(e.children[i],n))return;return!1!==n(e)},Jn=function(t,e){"function"==typeof e&&$n(t,e)},Qn=function(t,e){"function"==typeof e&&Zn(t,e)},ti=function(t,e){return e*(zn[t]||1)},ei=function(t,e){var n=0,i=new RegExp("[-]+");return t.split("").forEach((function(t){i.test(t)?n+=e:n+=ti(t,e)})),[n,e]},ni=function(t,e){var n=[],i={},r={};t.forEach((function(t){r[t.id]=t})),t.forEach((function(t,e){var o=(0,b.clone)(t);o.itemType="combo",o.children=void 0,o.parentId===o.id?(console.warn("The parentId for combo "+o.id+" can not be the same as the combo's id"),delete o.parentId):o.parentId&&!r[o.parentId]&&(console.warn("The parent combo for combo "+o.id+" does not exist!"),delete o.parentId);var a=i[o.id];if(a){if(o.children=a.children,i[o.id]=o,!(a=o).parentId)return void n.push(a);var s=i[a.parentId];if(s)s.children?s.children.push(o):s.children=[o];else{var l={id:a.parentId,children:[a]};i[a.parentId]=l,i[o.id]=o}}else if((0,b.isString)(t.parentId)){var u=i[t.parentId];if(u)u.children?u.children.push(o):u.children=[o],i[o.id]=o;else{var c={id:t.parentId,children:[o]};i[c.id]=c,i[o.id]=o}}else n.push(o),i[o.id]=o}));var o={};(e||[]).forEach((function(t){o[t.id]=t;var e=i[t.comboId];if(e){var n={id:t.id,comboId:t.comboId};e.children?e.children.push(n):e.children=[n],n.itemType="node",i[t.id]=n}}));var a=0;return n.forEach((function(t){t.depth=a+10,$n(t,(function(t){var e,n=i[t.id].itemType;e="node"===n?i[t.comboId]:i[t.parentId],t.depth=e&&"node"===n?a+1:a+10,a<t.depth&&(a=t.depth);var r=o[t.id];return r&&(r.depth=t.depth),!0}))})),n},ii=function(t,e,n){var i,r=t,o={root:{children:t}},a=!1,s="root";(t||[]).forEach((function(t){if(!a)return t.id===e?(i=t,"combo"===t.itemType?i.parentId=n:i.comboId=n,void(a=!0)):void Jn(t,(function(t){return o[t.id]={children:t.children},r=o[t.parentId||t.comboId||"root"].children,!t||!t.removed&&e!==t.id||!r||(s=t.parentId||t.comboId||"root",i=t,"combo"===t.itemType?i.parentId=n:i.comboId=n,a=!0,!1)}))}));var l=(r=o[s].children)?r.indexOf(i):-1;if(l>-1&&r.splice(l,1),a||(i={id:e,itemType:"node",comboId:n},o[e]={children:void 0}),e){var u=!1;if(n){var c=0;(t||[]).forEach((function(t){u||Jn(t,(function(t){return n!==t.id||(u=!0,t.children?t.children.push(i):t.children=[i],c=t.depth,"node"===i.itemType?i.depth=c+2:i.depth=c+1,!1)}))}))}else n&&u||"node"===i.itemType||t.push(i);var h=i.depth;Jn(i,(function(t){return"node"===t.itemType?h+=2:h+=1,t.depth=h,!0}))}return t},ri=function(t,e){var n={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0,x:void 0,y:void 0,width:void 0,height:void 0,centerX:void 0,centerY:void 0};return t&&0!==t.length?(t.forEach((function(t){var i=e.findById(t.id);if(i&&i.isVisible()){i.set("bboxCanvasCache",void 0);var r=i.getCanvasBBox();r.x&&n.minX>r.minX&&(n.minX=r.minX),r.y&&n.minY>r.minY&&(n.minY=r.minY),r.x&&n.maxX<r.maxX&&(n.maxX=r.maxX),r.y&&n.maxY<r.maxY&&(n.maxY=r.maxY)}})),n.x=(n.minX+n.maxX)/2,n.y=(n.minY+n.maxY)/2,n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2,Object.keys(n).forEach((function(t){n[t]!==1/0&&n[t]!==-1/0||(n[t]=void 0)})),n):n},oi=function(t){var e=(0,b.isNumber)(t.x)||(0,b.isNumber)(t.y)||t.type||t.anchorPoints||t.size;return t.style&&(e=e||(0,b.isNumber)(t.style.r)||(0,b.isNumber)(t.style.width)||(0,b.isNumber)(t.style.height)||(0,b.isNumber)(t.style.rx)||(0,b.isNumber)(t.style.ry)),e},ai=function(t){var e={};return Object.keys(t).forEach((function(n){var i=t[n];if((0,b.isObject)(i)){var r={};Object.keys(i).forEach((function(t){var e=i[t];("img"!==t||(0,b.isString)(e))&&(r[t]=(0,b.clone)(e))})),e[n]=r}else e[n]=(0,b.clone)(i)})),e},si=function(t){if(!t)return console.error("G6 Error Tips: the data must be defined"),!1;var e=t.nodes,n=t.edges,i=t.combos,r=void 0===i?[]:i;if(!e&&!n){var o=!0;return Jn(t,(function(t){return!!(0,b.isString)(t.id)||(o=!1,!1)})),o}var a=(e||[]).find((function(t){return!(0,b.isString)(t.id)}));if(a)return console.warn("G6 Warning Tips: missing 'id' property, or %c"+a.id+"%c is not a string.","font-size: 20px; color: red;",""),!1;var s=(e||[]).map((function(t){return t.id})),l=r.map((function(t){return t.id})),u=(0,y.__spreadArray)((0,y.__spreadArray)([],s),l),c=(n||[]).find((function(t){return!u.includes(t.source)||!u.includes(t.target)}));return!c||(console.warn("G6 Warning Tips: The source %c"+c.source+"%c or the target %c"+c.target+"%c of the edge do not exist in the nodes or combos.","font-size: 20px; color: red;","","font-size: 20px; color: red;",""),!1)},li=function(){function t(t){this.graph=t,this.destroyed=!1,this.modes=t.get("modes")||{default:[]},this.formatModes(),this.mode=t.get("defaultMode")||"default",this.currentBehaves=[],this.setMode(this.mode)}return t.prototype.formatModes=function(){var t=this.modes;(0,b.each)(t,(function(t){(0,b.each)(t,(function(e,n){(0,b.isString)(e)&&(t[n]={type:e})}))}))},t.prototype.setBehaviors=function(t){var e,n=this.graph,i=this.modes[t],r=[];(0,b.each)(i||[],(function(t){var i=x.getBehavior(t.type||t);i&&(e=new i(t))&&(e.bind(n),r.push(e))})),this.currentBehaves=r},t.mergeBehaviors=function(t,e){return(0,b.each)(e,(function(e){t.indexOf(e)<0&&((0,b.isString)(e)&&(e={type:e}),t.push(e))})),t},t.filterBehaviors=function(t,e){var n=[];return t.forEach((function(t){var i="";i=(0,b.isString)(t)?t:t.type,e.indexOf(i)<0&&n.push(t)})),n},t.prototype.setMode=function(t){var e=this.modes,n=this.graph,i=t;e[i]&&(n.emit("beforemodechange",{mode:t}),(0,b.each)(this.currentBehaves,(function(t){t.delegate&&t.delegate.remove(),t.unbind(n)})),this.setBehaviors(i),n.emit("aftermodechange",{mode:t}),this.mode=t)},t.prototype.getMode=function(){return this.mode},t.prototype.manipulateBehaviors=function(e,n,i){var r,o=this;if(r=(0,b.isArray)(e)?e:[e],(0,b.isArray)(n))return(0,b.each)(n,(function(e){o.modes[e]?o.modes[e]=i?t.mergeBehaviors(o.modes[e]||[],r):t.filterBehaviors(o.modes[e]||[],r):i&&(o.modes[e]=r)})),this;var a=n;return n||(a=this.mode),this.modes[a]||i&&(this.modes[a]=r),this.modes[a]=i?t.mergeBehaviors(this.modes[a]||[],r):t.filterBehaviors(this.modes[a]||[],r),this.formatModes(),this.setMode(this.mode),this},t.prototype.updateBehavior=function(t,e,n){(0,b.isString)(t)&&(t={type:t});var i=[];if(n&&n!==this.mode&&"default"!==n){if(!(i=this.modes[n])||!i.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;var r=i.length;for(a=0;a<r;a++){if((s=i[a]).type===t.type||s===t.type)return s===t.type&&(s={type:s}),Object.assign(s,e),i[a]=s,this;a===r-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}else{if(!(i=this.currentBehaves)||!i.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var o=i.length,a=0;a<o;a++){var s;if((s=i[a]).type===t.type)return s.updateCfg(e),this;a===o-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}return this},t.prototype.destroy=function(){this.graph=null,this.modes=null,this.currentBehaves=null,this.destroyed=!0},t}();const ui=li;var ci="\t\n\v\f\r \u2028\u2029",hi=new RegExp("([a-z])["+ci+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+ci+"]*,?["+ci+"]*)+)","ig"),di=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+ci+"]*,?["+ci+"]*","ig"),fi=function(t){if(!t)return null;if((0,b.isArray)(t))return t;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},n=[];return String(t).replace(hi,(function(i,r,o){var a=[],s=r.toLowerCase();if(o.replace(di,(function(t,e){e&&a.push(+e)})),"m"===s&&a.length>2&&(n.push([r].concat(a.splice(0,2))),s="l",r="m"===r?"l":"L"),"o"===s&&1===a.length&&n.push([r,a[0]]),"r"===s)n.push([r].concat(a));else for(;a.length>=e[s]&&(n.push([r].concat(a.splice(0,e[s]))),e[s]););return t})),n},pi=function(t,e){for(var n=[],i=0,r=t.length;r-2*!e>i;i+=2){var o=[{x:+t[i-2],y:+t[i-1]},{x:+t[i],y:+t[i+1]},{x:+t[i+2],y:+t[i+3]},{x:+t[i+4],y:+t[i+5]}];e?i?r-4===i?o[3]={x:+t[0],y:+t[1]}:r-2===i&&(o[2]={x:+t[0],y:+t[1]},o[3]={x:+t[2],y:+t[3]}):o[0]={x:+t[r-2],y:+t[r-1]}:r-4===i?o[3]=o[2]:i||(o[0]={x:+t[i],y:+t[i+1]}),n.push(["C",(-o[0].x+6*o[1].x+o[2].x)/6,(-o[0].y+6*o[1].y+o[2].y)/6,(o[1].x+6*o[2].x-o[3].x)/6,(o[1].y+6*o[2].y-o[3].y)/6,o[2].x,o[2].y])}return n},mi=function(t,e,n,i,r){var o=[];if(null===r&&null===i&&(i=n),t=+t,e=+e,n=+n,i=+i,null!==r){var a=Math.PI/180,s=t+n*Math.cos(-i*a),l=t+n*Math.cos(-r*a);o=[["M",s,e+n*Math.sin(-i*a)],["A",n,n,0,+(r-i>180),0,l,e+n*Math.sin(-r*a)]]}else o=[["M",t,e],["m",0,-i],["a",n,i,0,1,1,0,2*i],["a",n,i,0,1,1,0,-2*i],["z"]];return o},gi=function(t){if(!(t=fi(t))||!t.length)return[["M",0,0]];var e,n,i=[],r=0,o=0,a=0,s=0,l=0;"M"===t[0][0]&&(a=r=+t[0][1],s=o=+t[0][2],l++,i[0]=["M",r,o]);for(var u=3===t.length&&"M"===t[0][0]&&"R"===t[1][0].toUpperCase()&&"Z"===t[2][0].toUpperCase(),c=void 0,h=void 0,d=l,f=t.length;d<f;d++){if(i.push(c=[]),(e=(h=t[d])[0])!==e.toUpperCase())switch(c[0]=e.toUpperCase(),c[0]){case"A":c[1]=h[1],c[2]=h[2],c[3]=h[3],c[4]=h[4],c[5]=h[5],c[6]=+h[6]+r,c[7]=+h[7]+o;break;case"V":c[1]=+h[1]+o;break;case"H":c[1]=+h[1]+r;break;case"R":for(var p=2,m=(n=[r,o].concat(h.slice(1))).length;p<m;p++)n[p]=+n[p]+r,n[++p]=+n[p]+o;i.pop(),i=i.concat(pi(n,u));break;case"O":i.pop(),(n=mi(r,o,h[1],h[2])).push(n[0]),i=i.concat(n);break;case"U":i.pop(),i=i.concat(mi(r,o,h[1],h[2],h[3])),c=["U"].concat(i[i.length-1].slice(-2));break;case"M":a=+h[1]+r,s=+h[2]+o;break;default:for(p=1,m=h.length;p<m;p++)c[p]=+h[p]+(p%2?r:o)}else if("R"===e)n=[r,o].concat(h.slice(1)),i.pop(),i=i.concat(pi(n,u)),c=["R"].concat(h.slice(-2));else if("O"===e)i.pop(),(n=mi(r,o,h[1],h[2])).push(n[0]),i=i.concat(n);else if("U"===e)i.pop(),i=i.concat(mi(r,o,h[1],h[2],h[3])),c=["U"].concat(i[i.length-1].slice(-2));else for(var g=0,v=h.length;g<v;g++)c[g]=h[g];if("O"!==(e=e.toUpperCase()))switch(c[0]){case"Z":r=+a,o=+s;break;case"H":r=c[1];break;case"V":o=c[1];break;case"M":a=c[c.length-2],s=c[c.length-1];break;default:r=c[c.length-2],o=c[c.length-1]}}return i},vi=function(t,e,n,i){return[t,e,n,i,n,i]},yi=function(t,e,n,i,r,o){var a=1/3,s=2/3;return[a*t+s*n,a*e+s*i,a*r+s*n,a*o+s*i,r,o]},bi=function(t,e,n,i,r,o,a,s,l,u){n===i&&(n+=1);var c,h,d,f,p,m=120*Math.PI/180,g=Math.PI/180*(+r||0),v=[],y=function(t,e,n){return{x:t*Math.cos(n)-e*Math.sin(n),y:t*Math.sin(n)+e*Math.cos(n)}};if(u)h=u[0],d=u[1],f=u[2],p=u[3];else{t=(c=y(t,e,-g)).x,e=c.y,s=(c=y(s,l,-g)).x,l=c.y,t===s&&e===l&&(s+=1,l+=1);var b=(t-s)/2,_=(e-l)/2,w=b*b/(n*n)+_*_/(i*i);w>1&&(n*=w=Math.sqrt(w),i*=w);var x=n*n,M=i*i,E=(o===a?-1:1)*Math.sqrt(Math.abs((x*M-x*_*_-M*b*b)/(x*_*_+M*b*b)));f=E*n*_/i+(t+s)/2,p=E*-i*b/n+(e+l)/2,h=Math.asin(((e-p)/i).toFixed(9)),d=Math.asin(((l-p)/i).toFixed(9)),h=t<f?Math.PI-h:h,d=s<f?Math.PI-d:d,h<0&&(h=2*Math.PI+h),d<0&&(d=2*Math.PI+d),a&&h>d&&(h-=2*Math.PI),!a&&d>h&&(d-=2*Math.PI)}var S=d-h;if(Math.abs(S)>m){var k=d,C=s,T=l;d=h+m*(a&&d>h?1:-1),s=f+n*Math.cos(d),l=p+i*Math.sin(d),v=bi(s,l,n,i,r,0,a,C,T,[d,k,f,p])}S=d-h;var D=Math.cos(h),L=Math.sin(h),A=Math.cos(d),O=Math.sin(d),P=Math.tan(S/4),I=4/3*n*P,N=4/3*i*P,R=[t,e],Y=[t+I*L,e-N*D],j=[s+I*O,l-N*A],F=[s,l];if(Y[0]=2*R[0]-Y[0],Y[1]=2*R[1]-Y[1],u)return[Y,j,F].concat(v);for(var B=[],z=0,H=(v=[Y,j,F].concat(v).join().split(",")).length;z<H;z++)B[z]=z%2?y(v[z-1],v[z],g).y:y(v[z],v[z+1],g).x;return B},_i=function(t,e){var n,i=gi(t),r=e&&gi(e),o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},s=[],l=[],u="",c="",h=function(t,e,n){var i,r;if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(!(t[0]in{T:1,Q:1})&&(e.qx=e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=["C"].concat(bi.apply(0,[e.x,e.y].concat(t.slice(1))));break;case"S":"C"===n||"S"===n?(i=2*e.x-e.bx,r=2*e.y-e.by):(i=e.x,r=e.y),t=["C",i,r].concat(t.slice(1));break;case"T":"Q"===n||"T"===n?(e.qx=2*e.x-e.qx,e.qy=2*e.y-e.qy):(e.qx=e.x,e.qy=e.y),t=["C"].concat(yi(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"].concat(yi(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"].concat(vi(e.x,e.y,t[1],t[2]));break;case"H":t=["C"].concat(vi(e.x,e.y,t[1],e.y));break;case"V":t=["C"].concat(vi(e.x,e.y,e.x,t[1]));break;case"Z":t=["C"].concat(vi(e.x,e.y,e.X,e.Y))}return t},d=function(t,e){if(t[e].length>7){t[e].shift();for(var o=t[e];o.length;)s[e]="A",r&&(l[e]="A"),t.splice(e++,0,["C"].concat(o.splice(0,6)));t.splice(e,1),n=Math.max(i.length,r&&r.length||0)}},f=function(t,e,o,a,s){t&&e&&"M"===t[s][0]&&"M"!==e[s][0]&&(e.splice(s,0,["M",a.x,a.y]),o.bx=0,o.by=0,o.x=t[s][1],o.y=t[s][2],n=Math.max(i.length,r&&r.length||0))};n=Math.max(i.length,r&&r.length||0);for(var p=0;p<n;p++){i[p]&&(u=i[p][0]),"C"!==u&&(s[p]=u,p&&(c=s[p-1])),i[p]=h(i[p],o,c),"A"!==s[p]&&"C"===u&&(s[p]="C"),d(i,p),r&&(r[p]&&(u=r[p][0]),"C"!==u&&(l[p]=u,p&&(c=l[p-1])),r[p]=h(r[p],a,c),"A"!==l[p]&&"C"===u&&(l[p]="C"),d(r,p)),f(i,r,o,a,p),f(r,i,a,o,p);var m=i[p],g=r&&r[p],v=m.length,y=r&&g.length;o.x=m[v-2],o.y=m[v-1],o.bx=parseFloat(m[v-4])||o.x,o.by=parseFloat(m[v-3])||o.y,a.bx=r&&(parseFloat(g[y-4])||a.x),a.by=r&&(parseFloat(g[y-3])||a.y),a.x=r&&g[y-2],a.y=r&&g[y-1]}return r?[i,r]:i},wi=/,?([a-z]),?/gi,xi=function(t){return t.join(",").replace(wi,"$1")},Mi=function(t,e,n,i,r){return t*(t*(-3*e+9*n-9*i+3*r)+6*e-12*n+6*i)-3*e+3*n},Ei=function(t,e,n,i,r,o,a,s,l){null===l&&(l=1);for(var u=(l=l>1?1:l<0?0:l)/2,c=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],h=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],d=0,f=0;f<12;f++){var p=u*c[f]+u,m=Mi(p,t,n,r,a),g=Mi(p,e,i,o,s),v=m*m+g*g;d+=h[f]*Math.sqrt(v)}return u*d},Si=function(t,e,n,i,r,o,a,s){for(var l,u,c,h,d=[],f=[[],[]],p=0;p<2;++p)if(0===p?(u=6*t-12*n+6*r,l=-3*t+9*n-9*r+3*a,c=3*n-3*t):(u=6*e-12*i+6*o,l=-3*e+9*i-9*o+3*s,c=3*i-3*e),Math.abs(l)<1e-12){if(Math.abs(u)<1e-12)continue;(h=-c/u)>0&&h<1&&d.push(h)}else{var m=u*u-4*c*l,g=Math.sqrt(m);if(!(m<0)){var v=(-u+g)/(2*l);v>0&&v<1&&d.push(v);var y=(-u-g)/(2*l);y>0&&y<1&&d.push(y)}}for(var b,_=d.length,w=_;_--;)b=1-(h=d[_]),f[0][_]=b*b*b*t+3*b*b*h*n+3*b*h*h*r+h*h*h*a,f[1][_]=b*b*b*e+3*b*b*h*i+3*b*h*h*o+h*h*h*s;return f[0][w]=t,f[1][w]=e,f[0][w+1]=a,f[1][w+1]=s,f[0].length=f[1].length=w+2,{min:{x:Math.min.apply(0,f[0]),y:Math.min.apply(0,f[1])},max:{x:Math.max.apply(0,f[0]),y:Math.max.apply(0,f[1])}}},ki=function(t,e,n,i,r,o,a,s){if(!(Math.max(t,n)<Math.min(r,a)||Math.min(t,n)>Math.max(r,a)||Math.max(e,i)<Math.min(o,s)||Math.min(e,i)>Math.max(o,s))){var l=(t-n)*(o-s)-(e-i)*(r-a);if(l){var u=((t*i-e*n)*(r-a)-(t-n)*(r*s-o*a))/l,c=((t*i-e*n)*(o-s)-(e-i)*(r*s-o*a))/l,h=+u.toFixed(2),d=+c.toFixed(2);if(!(h<+Math.min(t,n).toFixed(2)||h>+Math.max(t,n).toFixed(2)||h<+Math.min(r,a).toFixed(2)||h>+Math.max(r,a).toFixed(2)||d<+Math.min(e,i).toFixed(2)||d>+Math.max(e,i).toFixed(2)||d<+Math.min(o,s).toFixed(2)||d>+Math.max(o,s).toFixed(2)))return{x:u,y:c}}}},Ci=function(t,e,n){return e>=t.x&&e<=t.x+t.width&&n>=t.y&&n<=t.y+t.height},Ti=function(t,e,n,i,r){if(r)return[["M",+t+ +r,e],["l",n-2*r,0],["a",r,r,0,0,1,r,r],["l",0,i-2*r],["a",r,r,0,0,1,-r,r],["l",2*r-n,0],["a",r,r,0,0,1,-r,-r],["l",0,2*r-i],["a",r,r,0,0,1,r,-r],["z"]];var o=[["M",t,e],["l",n,0],["l",0,i],["l",-n,0],["z"]];return o.parsePathArray=xi,o},Di=function(t,e,n,i){return null===t&&(t=e=n=i=0),null===e&&(e=t.y,n=t.width,i=t.height,t=t.x),{x:t,y:e,width:n,w:n,height:i,h:i,x2:t+n,y2:e+i,cx:t+n/2,cy:e+i/2,r1:Math.min(n,i)/2,r2:Math.max(n,i)/2,r0:Math.sqrt(n*n+i*i)/2,path:Ti(t,e,n,i),vb:[t,e,n,i].join(" ")}},Li=function(t,e,n,i,r,o,a,s){(0,b.isArray)(t)||(t=[t,e,n,i,r,o,a,s]);var l=Si.apply(null,t);return Di(l.min.x,l.min.y,l.max.x-l.min.x,l.max.y-l.min.y)},Ai=function(t,e,n,i,r,o,a,s,l){var u=1-l,c=Math.pow(u,3),h=Math.pow(u,2),d=l*l,f=d*l,p=t+2*l*(n-t)+d*(r-2*n+t),m=e+2*l*(i-e)+d*(o-2*i+e),g=n+2*l*(r-n)+d*(a-2*r+n),v=i+2*l*(o-i)+d*(s-2*o+i);return{x:c*t+3*h*l*n+3*u*l*l*r+f*a,y:c*e+3*h*l*i+3*u*l*l*o+f*s,m:{x:p,y:m},n:{x:g,y:v},start:{x:u*t+l*n,y:u*e+l*i},end:{x:u*r+l*a,y:u*o+l*s},alpha:90-180*Math.atan2(p-g,m-v)/Math.PI}},Oi=function(t,e,n){if(!function(t,e){return t=Di(t),e=Di(e),Ci(e,t.x,t.y)||Ci(e,t.x2,t.y)||Ci(e,t.x,t.y2)||Ci(e,t.x2,t.y2)||Ci(t,e.x,e.y)||Ci(t,e.x2,e.y)||Ci(t,e.x,e.y2)||Ci(t,e.x2,e.y2)||(t.x<e.x2&&t.x>e.x||e.x<t.x2&&e.x>t.x)&&(t.y<e.y2&&t.y>e.y||e.y<t.y2&&e.y>t.y)}(Li(t),Li(e)))return n?0:[];for(var i=~~(Ei.apply(0,t)/8),r=~~(Ei.apply(0,e)/8),o=[],a=[],s={},l=n?0:[],u=0;u<i+1;u++){var c=Ai.apply(0,t.concat(u/i));o.push({x:c.x,y:c.y,t:u/i})}for(u=0;u<r+1;u++){c=Ai.apply(0,e.concat(u/r));a.push({x:c.x,y:c.y,t:u/r})}for(u=0;u<i;u++)for(var h=0;h<r;h++){var d=o[u],f=o[u+1],p=a[h],m=a[h+1],g=Math.abs(f.x-d.x)<.001?"y":"x",v=Math.abs(m.x-p.x)<.001?"y":"x",y=ki(d.x,d.y,f.x,f.y,p.x,p.y,m.x,m.y);if(y){if(s[y.x.toFixed(4)]===y.y.toFixed(4))continue;s[y.x.toFixed(4)]=y.y.toFixed(4);var b=d.t+Math.abs((y[g]-d[g])/(f[g]-d[g]))*(f.t-d.t),_=p.t+Math.abs((y[v]-p[v])/(m[v]-p[v]))*(m.t-p.t);b>=0&&b<=1&&_>=0&&_<=1&&(n?l+=1:l.push({x:y.x,y:y.y,t1:b,t2:_}))}}return l},Pi=function(t,e){return function(t,e,n){var i,r,o,a,s,l,u,c,h,d;t=_i(t),e=_i(e);for(var f=n?0:[],p=0,m=t.length;p<m;p++){var g=t[p];if("M"===g[0])i=s=g[1],r=l=g[2];else{"C"===g[0]?(h=[i,r].concat(g.slice(1)),i=h[6],r=h[7]):(h=[i,r,i,r,s,l,s,l],i=s,r=l);for(var v=0,y=e.length;v<y;v++){var b=e[v];if("M"===b[0])o=u=b[1],a=c=b[2];else{"C"===b[0]?(d=[o,a].concat(b.slice(1)),o=d[6],a=d[7]):(d=[o,a,o,a,u,c,u,c],o=u,a=c);var _=Oi(h,d,n);if(n)f+=_;else{for(var w=0,x=_.length;w<x;w++)_[w].segment1=p,_[w].segment2=v,_[w].bez1=h,_[w].bez2=d;f=f.concat(_)}}}}}return f}(t,e)};function Ii(t,e){var n=[],i=[];return t.length&&function t(e,r){if(1===e.length)n.push(e[0]),i.push(e[0]);else{for(var o=[],a=0;a<e.length-1;a++)0===a&&n.push(e[0]),a===e.length-2&&i.push(e[a+1]),o[a]=[(1-r)*e[a][0]+r*e[a+1][0],(1-r)*e[a][1]+r*e[a+1][1]];t(o,r)}}(t,e),{left:n,right:i.reverse()}}var Ni=function(t,e,n){if(1===n)return[[].concat(t)];var i=[];if("L"===e[0]||"C"===e[0]||"Q"===e[0])i=i.concat(function(t,e,n){var i=[[t[1],t[2]]];n=n||2;var r=[];"A"===e[0]?(i.push(e[6]),i.push(e[7])):"C"===e[0]?(i.push([e[1],e[2]]),i.push([e[3],e[4]]),i.push([e[5],e[6]])):"S"===e[0]||"Q"===e[0]?(i.push([e[1],e[2]]),i.push([e[3],e[4]])):i.push([e[1],e[2]]);for(var o=i,a=1/n,s=0;s<n-1;s++){var l=Ii(o,a/(1-a*s));r.push(l.left),o=l.right}return r.push(o),r.map((function(t){var e=[];return 4===t.length&&(e.push("C"),e=e.concat(t[2])),t.length>=3&&(3===t.length&&e.push("Q"),e=e.concat(t[1])),2===t.length&&e.push("L"),e.concat(t[t.length-1])}))}(t,e,n));else{var r=[].concat(t);"M"===r[0]&&(r[0]="L");for(var o=0;o<=n-1;o++)i.push(r)}return i},Ri=function(t,e){if(1===t.length)return t;var n=t.length-1,i=e.length-1,r=n/i,o=[];if(1===t.length&&"M"===t[0][0]){for(var a=0;a<i-n;a++)t.push(t[0]);return t}for(a=0;a<i;a++){var s=Math.floor(r*a);o[s]=(o[s]||0)+1}var l=o.reduce((function(e,i,r){return r===n?e.concat(t[n]):e.concat(Ni(t[r],t[r+1],i))}),[]);return l.unshift(t[0]),"Z"!==e[i]&&"z"!==e[i]||l.push("Z"),l},Yi=function(t,e){if(t.length!==e.length)return!1;var n=!0;return(0,b.each)(t,(function(t,i){if(t!==e[i])return n=!1,!1})),n};function ji(t,e,n){var i=null,r=n;return e<r&&(r=e,i="add"),t<r&&(r=t,i="del"),{type:i,min:r}}var Fi=function(t,e){var n=function(t,e){var n,i,r=t.length,o=e.length,a=0;if(0===r||0===o)return null;for(var s=[],l=0;l<=r;l++)s[l]=[],s[l][0]={min:l};for(var u=0;u<=o;u++)s[0][u]={min:u};for(l=1;l<=r;l++)for(n=t[l-1],u=1;u<=o;u++){i=e[u-1],a=Yi(n,i)?0:1;var c=s[l-1][u].min+1,h=s[l][u-1].min+1,d=s[l-1][u-1].min+a;s[l][u]=ji(c,h,d)}return s}(t,e),i=t.length,r=e.length,o=[],a=1,s=1;if(n[i][r].min!==i){for(var l=1;l<=i;l++){var u=n[l][l].min;s=l;for(var c=a;c<=r;c++)n[l][c].min<u&&(u=n[l][c].min,s=c);a=s,n[l][a].type&&o.push({index:l-1,type:n[l][a].type})}for(l=o.length-1;l>=0;l--)a=o[l].index,"add"===o[l].type?t.splice(a,0,[].concat(t[a])):t.splice(a,1)}var h=r-(i=t.length);if(i<r)for(l=0;l<h;l++)"z"===t[i-1][0]||"Z"===t[i-1][0]?t.splice(i-2,0,t[i-2]):t.push(t[i-1]),i+=1;return t};function Bi(t,e,n){for(var i,r=[].concat(t),o=1/(n+1),a=zi(e)[0],s=1;s<=n;s++)o*=s,0===(i=Math.floor(t.length*o))?r.unshift([a[0]*o+t[i][0]*(1-o),a[1]*o+t[i][1]*(1-o)]):r.splice(i,0,[a[0]*o+t[i][0]*(1-o),a[1]*o+t[i][1]*(1-o)]);return r}function zi(t){var e=[];switch(t[0]){case"M":case"L":case"T":e.push([t[1],t[2]]);break;case"A":e.push([t[6],t[7]]);break;case"Q":case"S":e.push([t[3],t[4]]),e.push([t[1],t[2]]);break;case"C":e.push([t[5],t[6]]),e.push([t[1],t[2]]),e.push([t[3],t[4]]);break;case"H":case"V":e.push([t[1],t[1]])}return e}var Hi=function(t,e){if(t.length<=1)return t;for(var n,i=0;i<e.length;i++)if(t[i][0]!==e[i][0])switch(n=zi(t[i]),e[i][0]){case"M":t[i]=["M"].concat(n[0]);break;case"L":t[i]=["L"].concat(n[0]);break;case"A":t[i]=[].concat(e[i]),t[i][6]=n[0][0],t[i][7]=n[0][1];break;case"Q":if(n.length<2){if(!(i>0)){t[i]=e[i];break}n=Bi(n,t[i-1],1)}t[i]=["Q"].concat(n.reduce((function(t,e){return t.concat(e)}),[]));break;case"T":t[i]=["T"].concat(n[0]);break;case"C":if(n.length<3){if(!(i>0)){t[i]=e[i];break}n=Bi(n,t[i-1],2)}t[i]=["C"].concat(n.reduce((function(t,e){return t.concat(e)}),[]));break;case"S":if(n.length<2){if(!(i>0)){t[i]=e[i];break}n=Bi(n,t[i-1],1)}t[i]=["S"].concat(n.reduce((function(t,e){return t.concat(e)}),[]));break;default:t[i]=e[i]}return t};const Gi=function(){function t(t,e){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=t,this.name=t,this.originalEvent=e,this.timeStamp=e.timeStamp}return t.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t.prototype.toString=function(){return"[Event (type="+this.type+")]"},t.prototype.save=function(){},t.prototype.restore=function(){},t}();function Wi(t,e){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}var Ui="undefined"!=typeof window&&void 0!==window.document;function Vi(t,e){if(t.isCanvas())return!0;for(var n=e.getParent(),i=!1;n;){if(n===t){i=!0;break}n=n.getParent()}return i}function Xi(t){return t.cfg.visible&&t.cfg.capture}var qi=function(t){function e(e){var n=t.call(this)||this;n.destroyed=!1;var i=n.getDefaultCfg();return n.cfg=(0,b.mix)(i,e),n}return(0,y.__extends)(e,t),e.prototype.getDefaultCfg=function(){return{}},e.prototype.get=function(t){return this.cfg[t]},e.prototype.set=function(t,e){this.cfg[t]=e},e.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},e}(S);var Ki=function(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},$i=function(t,e,n){this.name=t,this.version=e,this.os=n,this.type="browser"},Zi=function(t){this.version=t,this.type="node",this.name="node",this.os=process.platform},Ji=function(t,e,n,i){this.name=t,this.version=e,this.os=n,this.bot=i,this.type="bot-device"},Qi=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},tr=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},er=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,nr=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],ir=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function rr(t){return t?ar(t):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new tr:"undefined"!=typeof navigator?ar(navigator.userAgent):"undefined"!=typeof process&&process.version?new Zi(process.version.slice(1)):null}function or(t){return""!==t&&nr.reduce((function(e,n){var i=n[0],r=n[1];if(e)return e;var o=r.exec(t);return!!o&&[i,o]}),!1)}function ar(t){var e=or(t);if(!e)return null;var n=e[0],i=e[1];if("searchbot"===n)return new Qi;var r=i[1]&&i[1].split(".").join("_").split("_").slice(0,3);r?r.length<3&&(r=Ki(Ki([],r,!0),function(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}(3-r.length),!0)):r=[];var o=r.join("."),a=function(t){for(var e=0,n=ir.length;e<n;e++){var i=ir[e],r=i[0];if(i[1].exec(t))return r}return null}(t),s=er.exec(t);return s&&s[1]?new Ji(n,o,a,s[1]):new $i(n,o,a)}function sr(t,e,n){var i=[0,0,0,0,0,0,0,0,0];return G(i,n),F(t,i,e)}function lr(t,e,n){var i=[0,0,0,0,0,0,0,0,0];return W(i,n),F(t,i,e)}function ur(t,e,n){var i=[0,0,0,0,0,0,0,0,0];return U(i,n),F(t,i,e)}function cr(t,e,n){return F(t,n,e)}function hr(t,e){var n=[],i=t[0],r=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],h=t[8],d=e[0],f=e[1],p=e[2],m=e[3],g=e[4],v=e[5],y=e[6],b=e[7],_=e[8];return n[0]=d*i+f*a+p*u,n[1]=d*r+f*s+p*c,n[2]=d*o+f*l+p*h,n[3]=m*i+g*a+v*u,n[4]=m*r+g*s+v*c,n[5]=m*o+g*l+v*h,n[6]=y*i+b*a+_*u,n[7]=y*r+b*s+_*c,n[8]=y*o+b*l+_*h,n}function dr(t,e){var n=[],i=e[0],r=e[1];return n[0]=t[0]*i+t[3]*r+t[6],n[1]=t[1]*i+t[4]*r+t[7],n}function fr(t){var e=[],n=t[0],i=t[1],r=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8],h=c*a-s*u,d=-c*o+s*l,f=u*o-a*l,p=n*h+i*d+r*f;return p?(p=1/p,e[0]=h*p,e[1]=(-c*i+r*u)*p,e[2]=(s*i-r*a)*p,e[3]=d*p,e[4]=(c*n-r*l)*p,e[5]=(-s*n+r*o)*p,e[6]=f*p,e[7]=(-u*n+i*l)*p,e[8]=(a*n-i*o)*p,e):null}var pr=function(t,e){for(var n=t?[].concat(t):[1,0,0,0,1,0,0,0,1],i=0,r=e.length;i<r;i++){var o=e[i];switch(o[0]){case"t":sr(n,n,[o[1],o[2]]);break;case"s":ur(n,n,[o[1],o[2]]);break;case"r":lr(n,n,o[1]);break;case"m":cr(n,n,o[1])}}return n},mr="matrix",gr=["zIndex","capture","visible","type"],vr=["repeat"];function yr(t,e){var n={},i=e.attrs;for(var r in t)n[r]=i[r];return n}function br(t,e){var n={},i=e.attr();return(0,b.each)(t,(function(t,e){-1!==vr.indexOf(e)||(0,b.isEqual)(i[e],t)||(n[e]=t)})),n}function _r(t,e){if(e.onFrame)return t;var n=e.startTime,i=e.delay,r=e.duration,o=Object.prototype.hasOwnProperty;return(0,b.each)(t,(function(t){n+i<t.startTime+t.delay+t.duration&&r>t.delay&&(0,b.each)(e.toAttrs,(function(e,n){o.call(t.toAttrs,n)&&(delete t.toAttrs[n],delete t.fromAttrs[n])}))})),t}var wr=function(t){function e(e){var n=t.call(this,e)||this;n.attrs={};var i=n.getDefaultAttrs();return(0,b.mix)(i,e.attrs),n.attrs=i,n.initAttrs(i),n.initAnimate(),n}return(0,y.__extends)(e,t),e.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},e.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},e.prototype.onCanvasChange=function(t){},e.prototype.initAttrs=function(t){},e.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},e.prototype.isGroup=function(){return!1},e.prototype.getParent=function(){return this.get("parent")},e.prototype.getCanvas=function(){return this.get("canvas")},e.prototype.attr=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=e[0],r=e[1];if(!i)return this.attrs;if((0,b.isObject)(i)){for(var o in i)this.setAttr(o,i[o]);return this.afterAttrsChange(i),this}return 2===e.length?(this.setAttr(i,r),this.afterAttrsChange(((t={})[i]=r,t)),this):this.attrs[i]},e.prototype.isClipped=function(t,e){var n=this.getClip();return n&&!n.isHit(t,e)},e.prototype.setAttr=function(t,e){var n=this.attrs[t];n!==e&&(this.attrs[t]=e,this.onAttrChange(t,e,n))},e.prototype.onAttrChange=function(t,e,n){"matrix"===t&&this.set("totalMatrix",null)},e.prototype.afterAttrsChange=function(t){if(this.cfg.isClipShape){var e=this.cfg.applyTo;e&&e.onCanvasChange("clip")}else this.onCanvasChange("attr")},e.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},e.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},e.prototype.setZIndex=function(t){this.set("zIndex",t);var e=this.getParent();return e&&e.sort(),this},e.prototype.toFront=function(){var t=this.getParent();if(t){var e=t.getChildren(),n=(this.get("el"),e.indexOf(this));e.splice(n,1),e.push(this),this.onCanvasChange("zIndex")}},e.prototype.toBack=function(){var t=this.getParent();if(t){var e=t.getChildren(),n=(this.get("el"),e.indexOf(this));e.splice(n,1),e.unshift(this),this.onCanvasChange("zIndex")}},e.prototype.remove=function(t){void 0===t&&(t=!0);var e=this.getParent();e?(Wi(e.getChildren(),this),e.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),t&&this.destroy()},e.prototype.resetMatrix=function(){this.attr(mr,this.getDefaultMatrix()),this.onCanvasChange("matrix")},e.prototype.getMatrix=function(){return this.attr(mr)},e.prototype.setMatrix=function(t){this.attr(mr,t),this.onCanvasChange("matrix")},e.prototype.getTotalMatrix=function(){var t=this.cfg.totalMatrix;if(!t){var e=this.attr("matrix"),n=this.cfg.parentMatrix;t=n&&e?hr(n,e):e||n,this.set("totalMatrix",t)}return t},e.prototype.applyMatrix=function(t){var e=this.attr("matrix"),n=null;n=t&&e?hr(t,e):e||t,this.set("totalMatrix",n),this.set("parentMatrix",t)},e.prototype.getDefaultMatrix=function(){return null},e.prototype.applyToMatrix=function(t){var e=this.attr("matrix");return e?dr(e,t):t},e.prototype.invertFromMatrix=function(t){var e=this.attr("matrix");if(e){var n=fr(e);if(n)return dr(n,t)}return t},e.prototype.setClip=function(t){var e=this.getCanvas(),n=null;if(t){var i=this.getShapeBase()[(0,b.upperFirst)(t.type)];i&&(n=new i({type:t.type,isClipShape:!0,applyTo:this,attrs:t.attrs,canvas:e}))}return this.set("clipShape",n),this.onCanvasChange("clip"),n},e.prototype.getClip=function(){var t=this.cfg.clipShape;return t||null},e.prototype.clone=function(){var t=this,e=this.attrs,n={};(0,b.each)(e,(function(t,i){(0,b.isArray)(e[i])?n[i]=function(t){for(var e=[],n=0;n<t.length;n++)(0,b.isArray)(t[n])?e.push([].concat(t[n])):e.push(t[n]);return e}(e[i]):n[i]=e[i]}));var i=new(0,this.constructor)({attrs:n});return(0,b.each)(gr,(function(e){i.set(e,t.get(e))})),i},e.prototype.destroy=function(){this.destroyed||(this.attrs={},t.prototype.destroy.call(this))},e.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},e.prototype.animate=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(this.get("timeline")||this.get("canvas")){this.set("animating",!0);var n=this.get("timeline");n||(n=this.get("canvas").get("timeline"),this.set("timeline",n));var i=this.get("animations")||[];n.timer||n.initTimer();var r,o,a,s,l,u=t[0],c=t[1],h=t[2],d=void 0===h?"easeLinear":h,f=t[3],p=void 0===f?b.noop:f,m=t[4],g=void 0===m?0:m;(0,b.isFunction)(u)?(r=u,u={}):(0,b.isObject)(u)&&u.onFrame&&(r=u.onFrame,o=u.repeat),(0,b.isObject)(c)?(c=(l=c).duration,d=l.easing||"easeLinear",g=l.delay||0,o=l.repeat||o||!1,p=l.callback||b.noop,a=l.pauseCallback||b.noop,s=l.resumeCallback||b.noop):((0,b.isNumber)(p)&&(g=p,p=null),(0,b.isFunction)(d)?(p=d,d="easeLinear"):d=d||"easeLinear");var v=br(u,this),y={fromAttrs:yr(v,this),toAttrs:v,duration:c,easing:d,repeat:o,callback:p,pauseCallback:a,resumeCallback:s,delay:g,startTime:n.getTime(),id:(0,b.uniqueId)(),onFrame:r,pathFormatted:!1};i.length>0?i=_r(i,y):n.addAnimator(this),i.push(y),this.set("animations",i),this.set("_pause",{isPaused:!1})}},e.prototype.stopAnimate=function(t){var e=this;void 0===t&&(t=!0);var n=this.get("animations");(0,b.each)(n,(function(n){t&&(n.onFrame?e.attr(n.onFrame(1)):e.attr(n.toAttrs)),n.callback&&n.callback()})),this.set("animating",!1),this.set("animations",[])},e.prototype.pauseAnimate=function(){var t=this.get("timeline"),e=this.get("animations"),n=t.getTime();return(0,b.each)(e,(function(t){t._paused=!0,t._pauseTime=n,t.pauseCallback&&t.pauseCallback()})),this.set("_pause",{isPaused:!0,pauseTime:n}),this},e.prototype.resumeAnimate=function(){var t=this.get("timeline").getTime(),e=this.get("animations"),n=this.get("_pause").pauseTime;return(0,b.each)(e,(function(e){e.startTime=e.startTime+(t-n),e._paused=!1,e._pauseTime=null,e.resumeCallback&&e.resumeCallback()})),this.set("_pause",{isPaused:!1}),this.set("animations",e),this},e.prototype.emitDelegation=function(t,e){var n,i=this,r=e.propagationPath;this.getEvents();"mouseenter"===t?n=e.fromShape:"mouseleave"===t&&(n=e.toShape);for(var o=function(t){var o=r[t],s=o.get("name");if(s){if((o.isGroup()||o.isCanvas&&o.isCanvas())&&n&&Vi(o,n))return"break";(0,b.isArray)(s)?(0,b.each)(s,(function(t){i.emitDelegateEvent(o,t,e)})):a.emitDelegateEvent(o,s,e)}},a=this,s=0;s<r.length;s++){if("break"===o(s))break}},e.prototype.emitDelegateEvent=function(t,e,n){var i=this.getEvents(),r=e+":"+n.type;(i[r]||i["*"])&&(n.name=r,n.currentTarget=t,n.delegateTarget=this,n.delegateObject=t.get("delegateObject"),this.emit(r,n))},e.prototype.translate=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0);var n=this.getMatrix(),i=pr(n,[["t",t,e]]);return this.setMatrix(i),this},e.prototype.move=function(t,e){var n=this.attr("x")||0,i=this.attr("y")||0;return this.translate(t-n,e-i),this},e.prototype.moveTo=function(t,e){return this.move(t,e)},e.prototype.scale=function(t,e){var n=this.getMatrix(),i=pr(n,[["s",t,e||t]]);return this.setMatrix(i),this},e.prototype.rotate=function(t){var e=this.getMatrix(),n=pr(e,[["r",t]]);return this.setMatrix(n),this},e.prototype.rotateAtStart=function(t){var e=this.attr(),n=e.x,i=e.y,r=this.getMatrix(),o=pr(r,[["t",-n,-i],["r",t],["t",n,i]]);return this.setMatrix(o),this},e.prototype.rotateAtPoint=function(t,e,n){var i=this.getMatrix(),r=pr(i,[["t",-t,-e],["r",n],["t",t,e]]);return this.setMatrix(r),this},e}(qi);const xr=wr;var Mr={};function Er(t,e){if(t.set("canvas",e),t.isGroup()){var n=t.get("children");n.length&&n.forEach((function(t){Er(t,e)}))}}function Sr(t,e){if(t.set("timeline",e),t.isGroup()){var n=t.get("children");n.length&&n.forEach((function(t){Sr(t,e)}))}}var kr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,y.__extends)(e,t),e.prototype.isCanvas=function(){return!1},e.prototype.getBBox=function(){var t=1/0,e=-1/0,n=1/0,i=-1/0,r=[],o=[],a=this.getChildren().filter((function(t){return t.get("visible")&&(!t.isGroup()||t.isGroup()&&t.getChildren().length>0)}));return a.length>0?((0,b.each)(a,(function(t){var e=t.getBBox();r.push(e.minX,e.maxX),o.push(e.minY,e.maxY)})),t=(0,b.min)(r),e=(0,b.max)(r),n=(0,b.min)(o),i=(0,b.max)(o)):(t=0,e=0,n=0,i=0),{x:t,y:n,minX:t,minY:n,maxX:e,maxY:i,width:e-t,height:i-n}},e.prototype.getCanvasBBox=function(){var t=1/0,e=-1/0,n=1/0,i=-1/0,r=[],o=[],a=this.getChildren().filter((function(t){return t.get("visible")&&(!t.isGroup()||t.isGroup()&&t.getChildren().length>0)}));return a.length>0?((0,b.each)(a,(function(t){var e=t.getCanvasBBox();r.push(e.minX,e.maxX),o.push(e.minY,e.maxY)})),t=(0,b.min)(r),e=(0,b.max)(r),n=(0,b.min)(o),i=(0,b.max)(o)):(t=0,e=0,n=0,i=0),{x:t,y:n,minX:t,minY:n,maxX:e,maxY:i,width:e-t,height:i-n}},e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.children=[],e},e.prototype.onAttrChange=function(e,n,i){if(t.prototype.onAttrChange.call(this,e,n,i),"matrix"===e){var r=this.getTotalMatrix();this._applyChildrenMarix(r)}},e.prototype.applyMatrix=function(e){var n=this.getTotalMatrix();t.prototype.applyMatrix.call(this,e);var i=this.getTotalMatrix();i!==n&&this._applyChildrenMarix(i)},e.prototype._applyChildrenMarix=function(t){var e=this.getChildren();(0,b.each)(e,(function(e){e.applyMatrix(t)}))},e.prototype.addShape=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[0],i=t[1];(0,b.isObject)(n)?i=n:i.type=n;var r=Mr[i.type];r||(r=(0,b.upperFirst)(i.type),Mr[i.type]=r);var o=this.getShapeBase(),a=new o[r](i);return this.add(a),a},e.prototype.addGroup=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n,i=t[0],r=t[1];if((0,b.isFunction)(i))n=new i(r||{parent:this});else{var o=i||{},a=this.getGroupBase();n=new a(o)}return this.add(n),n},e.prototype.getCanvas=function(){return this.isCanvas()?this:this.get("canvas")},e.prototype.getShape=function(t,e,n){if(!Xi(this))return null;var i,r=this.getChildren();if(this.isCanvas())i=this._findShape(r,t,e,n);else{var o=[t,e,1];o=this.invertFromMatrix(o),this.isClipped(o[0],o[1])||(i=this._findShape(r,o[0],o[1],n))}return i},e.prototype._findShape=function(t,e,n,i){for(var r=null,o=t.length-1;o>=0;o--){var a=t[o];if(Xi(a)&&(a.isGroup()?r=a.getShape(e,n,i):a.isHit(e,n)&&(r=a)),r)break}return r},e.prototype.add=function(t){var e=this.getCanvas(),n=this.getChildren(),i=this.get("timeline"),r=t.getParent();r&&function(t,e,n){void 0===n&&(n=!0),n?e.destroy():(e.set("parent",null),e.set("canvas",null)),Wi(t.getChildren(),e)}(r,t,!1),t.set("parent",this),e&&Er(t,e),i&&Sr(t,i),n.push(t),t.onCanvasChange("add"),this._applyElementMatrix(t)},e.prototype._applyElementMatrix=function(t){var e=this.getTotalMatrix();e&&t.applyMatrix(e)},e.prototype.getChildren=function(){return this.get("children")},e.prototype.sort=function(){var t=this.getChildren();(0,b.each)(t,(function(t,e){return t._INDEX=e,t})),t.sort(function(t){return function(e,n){var i=t(e,n);return 0===i?e._INDEX-n._INDEX:i}}((function(t,e){return t.get("zIndex")-e.get("zIndex")}))),this.onCanvasChange("sort")},e.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var t=this.getChildren(),e=t.length-1;e>=0;e--)t[e].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},e.prototype.destroy=function(){this.get("destroyed")||(this.clear(),t.prototype.destroy.call(this))},e.prototype.getFirst=function(){return this.getChildByIndex(0)},e.prototype.getLast=function(){var t=this.getChildren();return this.getChildByIndex(t.length-1)},e.prototype.getChildByIndex=function(t){return this.getChildren()[t]},e.prototype.getCount=function(){return this.getChildren().length},e.prototype.contain=function(t){return this.getChildren().indexOf(t)>-1},e.prototype.removeChild=function(t,e){void 0===e&&(e=!0),this.contain(t)&&t.remove(e)},e.prototype.findAll=function(t){var e=[],n=this.getChildren();return(0,b.each)(n,(function(n){t(n)&&e.push(n),n.isGroup()&&(e=e.concat(n.findAll(t)))})),e},e.prototype.find=function(t){var e=null,n=this.getChildren();return(0,b.each)(n,(function(n){if(t(n)?e=n:n.isGroup()&&(e=n.find(t)),e)return!1})),e},e.prototype.findById=function(t){return this.find((function(e){return e.get("id")===t}))},e.prototype.findByClassName=function(t){return this.find((function(e){return e.get("className")===t}))},e.prototype.findAllByName=function(t){return this.findAll((function(e){return e.get("name")===t}))},e}(xr);const Cr=kr;var Tr=n(35374);function Dr(t){return+t}function Lr(t){return t*t}function Ar(t){return t*(2-t)}function Or(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}var Pr=n(68716),Ir=function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n}(3),Nr=function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(3),Rr=function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(3),Yr=Math.PI,jr=Yr/2;function Fr(t){return 1==+t?1:1-Math.cos(t*jr)}function Br(t){return Math.sin(t*jr)}function zr(t){return(1-Math.cos(Yr*t))/2}function Hr(t){return 1.0009775171065494*(Math.pow(2,-10*t)-.0009765625)}function Gr(t){return Hr(1-+t)}function Wr(t){return 1-Hr(t)}function Ur(t){return((t*=2)<=1?Hr(1-t):2-Hr(t-1))/2}function Vr(t){return 1-Math.sqrt(1-t*t)}function Xr(t){return Math.sqrt(1- --t*t)}function qr(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var Kr=4/11,$r=7.5625;function Zr(t){return 1-Jr(1-t)}function Jr(t){return(t=+t)<Kr?$r*t*t:t<.7272727272727273?$r*(t-=.5454545454545454)*t+.75:t<.9090909090909091?$r*(t-=.8181818181818182)*t+.9375:$r*(t-=.9545454545454546)*t+.984375}function Qr(t){return((t*=2)<=1?1-Jr(1-t):Jr(t-1)+1)/2}var to=1.70158,eo=function t(e){function n(t){return(t=+t)*t*(e*(t-1)+t)}return e=+e,n.overshoot=t,n}(to),no=function t(e){function n(t){return--t*t*((t+1)*e+t)+1}return e=+e,n.overshoot=t,n}(to),io=function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}(to),ro=2*Math.PI,oo=function t(e,n){var i=Math.asin(1/(e=Math.max(1,e)))*(n/=ro);function r(t){return e*Hr(- --t)*Math.sin((i-t)/n)}return r.amplitude=function(e){return t(e,n*ro)},r.period=function(n){return t(e,n)},r}(1,.3),ao=function t(e,n){var i=Math.asin(1/(e=Math.max(1,e)))*(n/=ro);function r(t){return 1-e*Hr(t=+t)*Math.sin((t+i)/n)}return r.amplitude=function(e){return t(e,n*ro)},r.period=function(n){return t(e,n)},r}(1,.3),so=function t(e,n){var i=Math.asin(1/(e=Math.max(1,e)))*(n/=ro);function r(t){return((t=2*t-1)<0?e*Hr(-t)*Math.sin((i-t)/n):2-e*Hr(t)*Math.sin((i+t)/n))/2}return r.amplitude=function(e){return t(e,n*ro)},r.period=function(n){return t(e,n)},r}(1,.3),lo=n(81655),uo=n(88122),co=[1,0,0,0,1,0,0,0,1];function ho(t,e,n){var i,r=e.startTime;if(n<r+e.delay||e._paused)return!1;var o=e.duration,a=e.easing;if(n=n-r-e.delay,e.repeat)i=n%o/o,i=l[a](i);else{if(!((i=n/o)<1))return e.onFrame?t.attr(e.onFrame(1)):t.attr(e.toAttrs),!0;i=l[a](i)}if(e.onFrame){var s=e.onFrame(i);t.attr(s)}else!function(t,e,n){var i={},r=e.fromAttrs,o=e.toAttrs;if(!t.destroyed){var a,s;for(var l in o)if(!(0,b.isEqual)(r[l],o[l]))if("path"===l){var u=o[l],c=r[l];u.length>c.length?(u=fi(o[l]),c=fi(r[l]),c=Fi(c,u),c=Hi(c,u),e.fromAttrs.path=c,e.toAttrs.path=u):e.pathFormatted||(u=fi(o[l]),c=fi(r[l]),c=Hi(c,u),e.fromAttrs.path=c,e.toAttrs.path=u,e.pathFormatted=!0),i[l]=[];for(var h=0;h<u.length;h++){for(var d=u[h],f=c[h],p=[],m=0;m<d.length;m++)(0,b.isNumber)(d[m])&&f&&(0,b.isNumber)(f[m])?(a=(0,lo.Z)(f[m],d[m]),p.push(a(n))):p.push(d[m]);i[l].push(p)}}else if("matrix"===l){var g=(0,uo.Z)(r[l]||co,o[l]||co)(n);i[l]=g}else["fill","stroke","fillStyle","strokeStyle"].includes(l)&&(s=o[l],/^[r,R,L,l]{1}[\s]*\(/.test(s))?i[l]=o[l]:(0,b.isFunction)(o[l])||(a=(0,lo.Z)(r[l],o[l]),i[l]=a(n));t.attr(i)}}(t,e,i);return!1}var fo=function(){function t(t){this.animators=[],this.current=0,this.timer=null,this.canvas=t}return t.prototype.initTimer=function(){var t,e,n,i=this;this.timer=Tr.HT((function(r){if(i.current=r,i.animators.length>0){for(var o=i.animators.length-1;o>=0;o--)if((t=i.animators[o]).destroyed)i.removeAnimator(o);else{if(!t.isAnimatePaused())for(var a=(e=t.get("animations")).length-1;a>=0;a--)n=e[a],ho(t,n,r)&&(e.splice(a,1),!1,n.callback&&n.callback());0===e.length&&i.removeAnimator(o)}i.canvas.get("autoDraw")||i.canvas.draw()}}))},t.prototype.addAnimator=function(t){this.animators.push(t)},t.prototype.removeAnimator=function(t){this.animators.splice(t,1)},t.prototype.isAnimating=function(){return!!this.animators.length},t.prototype.stop=function(){this.timer&&this.timer.stop()},t.prototype.stopAllAnimations=function(t){void 0===t&&(t=!0),this.animators.forEach((function(e){e.stopAnimate(t)})),this.animators=[],this.canvas.draw()},t.prototype.getTime=function(){return this.current},t}();const po=fo;var mo=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function go(t,e,n){n.name=e,n.target=t,n.currentTarget=t,n.delegateTarget=t,t.emit(e,n)}function vo(t,e,n){if(n.bubbles){var i=void 0,r=!1;if("mouseenter"===e?(i=n.fromShape,r=!0):"mouseleave"===e&&(r=!0,i=n.toShape),t.isCanvas()&&r)return;if(i&&Vi(t,i))return void(n.bubbles=!1);n.name=e,n.currentTarget=t,n.delegateTarget=t,t.emit(e,n)}}var yo=function(){function t(t){var e=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(t){var n=t.type;e._triggerEvent(n,t)},this._onDocumentMove=function(t){if(e.canvas.get("el")!==t.target&&(e.dragging||e.currentShape)){var n=e._getPointInfo(t);e.dragging&&e._emitEvent("drag",t,n,e.draggingShape)}},this._onDocumentMouseUp=function(t){if(e.canvas.get("el")!==t.target&&e.dragging){var n=e._getPointInfo(t);e.draggingShape&&e._emitEvent("drop",t,n,null),e._emitEvent("dragend",t,n,e.draggingShape),e._afterDrag(e.draggingShape,n,t)}},this.canvas=t.canvas}return t.prototype.init=function(){this._bindEvents()},t.prototype._bindEvents=function(){var t=this,e=this.canvas.get("el");(0,b.each)(mo,(function(n){e.addEventListener(n,t._eventCallback)})),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},t.prototype._clearEvents=function(){var t=this,e=this.canvas.get("el");(0,b.each)(mo,(function(n){e.removeEventListener(n,t._eventCallback)})),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},t.prototype._getEventObj=function(t,e,n,i,r,o){var a=new Gi(t,e);return a.fromShape=r,a.toShape=o,a.x=n.x,a.y=n.y,a.clientX=n.clientX,a.clientY=n.clientY,a.propagationPath.push(i),a},t.prototype._getShape=function(t,e){return this.canvas.getShape(t.x,t.y,e)},t.prototype._getPointInfo=function(t){var e=this.canvas,n=e.getClientByEvent(t),i=e.getPointByEvent(t);return{x:i.x,y:i.y,clientX:n.x,clientY:n.y}},t.prototype._triggerEvent=function(t,e){var n=this._getPointInfo(e),i=this._getShape(n,e),r=this["_on"+t],o=!1;if(r)r.call(this,n,i,e);else{var a=this.currentShape;"mouseenter"===t||"dragenter"===t||"mouseover"===t?(this._emitEvent(t,e,n,null,null,i),i&&this._emitEvent(t,e,n,i,null,i),"mouseenter"===t&&this.draggingShape&&this._emitEvent("dragenter",e,n,null)):"mouseleave"===t||"dragleave"===t||"mouseout"===t?(o=!0,a&&this._emitEvent(t,e,n,a,a,null),this._emitEvent(t,e,n,null,a,null),"mouseleave"===t&&this.draggingShape&&this._emitEvent("dragleave",e,n,null)):this._emitEvent(t,e,n,i,null,null)}if(o||(this.currentShape=i),i&&!i.get("destroyed")){var s=this.canvas;s.get("el").style.cursor=i.attr("cursor")||s.get("cursor")}},t.prototype._onmousedown=function(t,e,n){0===n.button&&(this.mousedownShape=e,this.mousedownPoint=t,this.mousedownTimeStamp=n.timeStamp),this._emitEvent("mousedown",n,t,e,null,null)},t.prototype._emitMouseoverEvents=function(t,e,n,i){var r=this.canvas.get("el");n!==i&&(n&&(this._emitEvent("mouseout",t,e,n,n,i),this._emitEvent("mouseleave",t,e,n,n,i),i&&!i.get("destroyed")||(r.style.cursor=this.canvas.get("cursor"))),i&&(this._emitEvent("mouseover",t,e,i,n,i),this._emitEvent("mouseenter",t,e,i,n,i)))},t.prototype._emitDragoverEvents=function(t,e,n,i,r){i?(i!==n&&(n&&this._emitEvent("dragleave",t,e,n,n,i),this._emitEvent("dragenter",t,e,i,n,i)),r||this._emitEvent("dragover",t,e,i)):n&&this._emitEvent("dragleave",t,e,n,n,i),r&&this._emitEvent("dragover",t,e,i)},t.prototype._afterDrag=function(t,e,n){t&&(t.set("capture",!0),this.draggingShape=null),this.dragging=!1;var i=this._getShape(e,n);i!==t&&this._emitMouseoverEvents(n,e,t,i),this.currentShape=i},t.prototype._onmouseup=function(t,e,n){if(0===n.button){var i=this.draggingShape;this.dragging?(i&&this._emitEvent("drop",n,t,e),this._emitEvent("dragend",n,t,i),this._afterDrag(i,t,n)):(this._emitEvent("mouseup",n,t,e),e===this.mousedownShape&&this._emitEvent("click",n,t,e),this.mousedownShape=null,this.mousedownPoint=null)}},t.prototype._ondragover=function(t,e,n){n.preventDefault();var i=this.currentShape;this._emitDragoverEvents(n,t,i,e,!0)},t.prototype._onmousemove=function(t,e,n){var i=this.canvas,r=this.currentShape,o=this.draggingShape;if(this.dragging)o&&this._emitDragoverEvents(n,t,r,e,!1),this._emitEvent("drag",n,t,o);else{var a=this.mousedownPoint;if(a){var s=this.mousedownShape,l=n.timeStamp-this.mousedownTimeStamp,u=a.clientX-t.clientX,c=a.clientY-t.clientY;l>120||u*u+c*c>40?s&&s.get("draggable")?((o=this.mousedownShape).set("capture",!1),this.draggingShape=o,this.dragging=!0,this._emitEvent("dragstart",n,t,o),this.mousedownShape=null,this.mousedownPoint=null):!s&&i.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",n,t,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(n,t,r,e),this._emitEvent("mousemove",n,t,e)):(this._emitMouseoverEvents(n,t,r,e),this._emitEvent("mousemove",n,t,e))}else this._emitMouseoverEvents(n,t,r,e),this._emitEvent("mousemove",n,t,e)}},t.prototype._emitEvent=function(t,e,n,i,r,o){var a=this._getEventObj(t,e,n,i,r,o);if(i){a.shape=i,go(i,t,a);for(var s=i.getParent();s;)s.emitDelegation(t,a),a.propagationStopped||vo(s,t,a),a.propagationPath.push(s),s=s.getParent()}else{go(this.canvas,t,a)}},t.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},t}();const bo=yo;var _o=rr(),wo=_o&&"firefox"===_o.name,xo=function(t){function e(e){var n=t.call(this,e)||this;return n.initContainer(),n.initDom(),n.initEvents(),n.initTimeline(),n}return(0,y.__extends)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.cursor="default",e.supportCSSTransform=!1,e},e.prototype.initContainer=function(){var t=this.get("container");(0,b.isString)(t)&&(t=document.getElementById(t),this.set("container",t))},e.prototype.initDom=function(){var t=this.createDom();this.set("el",t),this.get("container").appendChild(t),this.setDOMSize(this.get("width"),this.get("height"))},e.prototype.initEvents=function(){var t=new bo({canvas:this});t.init(),this.set("eventController",t)},e.prototype.initTimeline=function(){var t=new po(this);this.set("timeline",t)},e.prototype.setDOMSize=function(t,e){var n=this.get("el");Ui&&(n.style.width=t+"px",n.style.height=e+"px")},e.prototype.changeSize=function(t,e){this.setDOMSize(t,e),this.set("width",t),this.set("height",e),this.onCanvasChange("changeSize")},e.prototype.getRenderer=function(){return this.get("renderer")},e.prototype.getCursor=function(){return this.get("cursor")},e.prototype.setCursor=function(t){this.set("cursor",t);var e=this.get("el");Ui&&e&&(e.style.cursor=t)},e.prototype.getPointByEvent=function(t){if(this.get("supportCSSTransform")){if(wo&&!(0,b.isNil)(t.layerX)&&t.layerX!==t.offsetX)return{x:t.layerX,y:t.layerY};if(!(0,b.isNil)(t.offsetX))return{x:t.offsetX,y:t.offsetY}}var e=this.getClientByEvent(t),n=e.x,i=e.y;return this.getPointByClient(n,i)},e.prototype.getClientByEvent=function(t){var e=t;return t.touches&&(e="touchend"===t.type?t.changedTouches[0]:t.touches[0]),{x:e.clientX,y:e.clientY}},e.prototype.getPointByClient=function(t,e){var n=this.get("el").getBoundingClientRect();return{x:t-n.left,y:e-n.top}},e.prototype.getClientByPoint=function(t,e){var n=this.get("el").getBoundingClientRect();return{x:t+n.left,y:e+n.top}},e.prototype.draw=function(){},e.prototype.removeDom=function(){var t=this.get("el");t.parentNode.removeChild(t)},e.prototype.clearEvents=function(){this.get("eventController").destroy()},e.prototype.isCanvas=function(){return!0},e.prototype.getParent=function(){return null},e.prototype.destroy=function(){var e=this.get("timeline");this.get("destroyed")||(this.clear(),e&&e.stop(),this.clearEvents(),this.removeDom(),t.prototype.destroy.call(this))},e}(Cr);const Mo=xo;var Eo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,y.__extends)(e,t),e.prototype.isGroup=function(){return!0},e.prototype.isEntityGroup=function(){return!1},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),n=this.getChildren(),i=0;i<n.length;i++){var r=n[i];e.add(r.clone())}return e},e}(Cr);const So=Eo;var ko=function(t){function e(e){return t.call(this,e)||this}return(0,y.__extends)(e,t),e.prototype._isInBBox=function(t,e){var n=this.getBBox();return n.minX<=t&&n.maxX>=t&&n.minY<=e&&n.maxY>=e},e.prototype.afterAttrsChange=function(e){t.prototype.afterAttrsChange.call(this,e),this.clearCacheBBox()},e.prototype.getBBox=function(){var t=this.cfg.bbox;return t||(t=this.calculateBBox(),this.set("bbox",t)),t},e.prototype.getCanvasBBox=function(){var t=this.cfg.canvasBBox;return t||(t=this.calculateCanvasBBox(),this.set("canvasBBox",t)),t},e.prototype.applyMatrix=function(e){t.prototype.applyMatrix.call(this,e),this.set("canvasBBox",null)},e.prototype.calculateCanvasBBox=function(){var t=this.getBBox(),e=this.getTotalMatrix(),n=t.minX,i=t.minY,r=t.maxX,o=t.maxY;if(e){var a=dr(e,[t.minX,t.minY]),s=dr(e,[t.maxX,t.minY]),l=dr(e,[t.minX,t.maxY]),u=dr(e,[t.maxX,t.maxY]);n=Math.min(a[0],s[0],l[0],u[0]),r=Math.max(a[0],s[0],l[0],u[0]),i=Math.min(a[1],s[1],l[1],u[1]),o=Math.max(a[1],s[1],l[1],u[1])}var c=this.attrs;if(c.shadowColor){var h=c.shadowBlur,d=void 0===h?0:h,f=c.shadowOffsetX,p=void 0===f?0:f,m=c.shadowOffsetY,g=void 0===m?0:m,v=n-d+p,y=r+d+p,b=i-d+g,_=o+d+g;n=Math.min(n,v),r=Math.max(r,y),i=Math.min(i,b),o=Math.max(o,_)}return{x:n,y:i,minX:n,minY:i,maxX:r,maxY:o,width:r-n,height:o-i}},e.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},e.prototype.isClipShape=function(){return this.get("isClipShape")},e.prototype.isInShape=function(t,e){return!1},e.prototype.isOnlyHitBox=function(){return!1},e.prototype.isHit=function(t,e){var n=this.get("startArrowShape"),i=this.get("endArrowShape"),r=[t,e,1],o=(r=this.invertFromMatrix(r))[0],a=r[1],s=this._isInBBox(o,a);if(this.isOnlyHitBox())return s;if(s&&!this.isClipped(o,a)){if(this.isInShape(o,a))return!0;if(n&&n.isHit(o,a))return!0;if(i&&i.isHit(o,a))return!0}return!1},e}(xr);const Co=ko;var To=new Map;function Do(t,e){To.set(t,e)}function Lo(t){return To.get(t)}function Ao(t){var e=t.attr();return{x:e.x,y:e.y,width:e.width,height:e.height}}function Oo(t){var e=t.attr(),n=e.x,i=e.y,r=e.r;return{x:n-r,y:i-r,width:2*r,height:2*r}}function Po(t){return Math.min.apply(null,t)}function Io(t){return Math.max.apply(null,t)}function No(t,e,n,i){var r=t-n,o=e-i;return Math.sqrt(r*r+o*o)}function Ro(t,e){return Math.abs(t-e)<.001}function Yo(t,e){var n=Po(t),i=Po(e);return{x:n,y:i,width:Io(t)-n,height:Io(e)-i}}function jo(t){return(t+2*Math.PI)%(2*Math.PI)}const Fo={box:function(t,e,n,i){return Yo([t,n],[e,i])},length:function(t,e,n,i){return No(t,e,n,i)},pointAt:function(t,e,n,i,r){return{x:(1-r)*t+r*n,y:(1-r)*e+r*i}},pointDistance:function(t,e,n,i,r,o){var a=(n-t)*(r-t)+(i-e)*(o-e);return a<0?No(t,e,r,o):a>(n-t)*(n-t)+(i-e)*(i-e)?No(n,i,r,o):this.pointToLine(t,e,n,i,r,o)},pointToLine:function(t,e,n,i,r,o){var a=[n-t,i-e];if(qe(a,[0,0]))return Math.sqrt((r-t)*(r-t)+(o-e)*(o-e));var s=[-a[1],a[0]];Ve(s,s);var l=[r-t,o-e];return Math.abs(Xe(l,s))},tangentAngle:function(t,e,n,i){return Math.atan2(i-e,n-t)}};function Bo(t,e,n,i,r,o){var a,s=1/0,l=[n,i],u=20;o&&o>200&&(u=o/10);for(var c=1/u,h=c/10,d=0;d<=u;d++){var f=d*c,p=[r.apply(null,t.concat([f])),r.apply(null,e.concat([f]))];(y=No(l[0],l[1],p[0],p[1]))<s&&(a=f,s=y)}if(0===a)return{x:t[0],y:e[0]};if(1===a){var m=t.length;return{x:t[m-1],y:e[m-1]}}s=1/0;for(d=0;d<32&&!(h<1e-4);d++){var g=a-h,v=a+h,y=(p=[r.apply(null,t.concat([g])),r.apply(null,e.concat([g]))],No(l[0],l[1],p[0],p[1]));if(g>=0&&y<s)a=g,s=y;else{var b=[r.apply(null,t.concat([v])),r.apply(null,e.concat([v]))],_=No(l[0],l[1],b[0],b[1]);v<=1&&_<s?(a=v,s=_):h*=.5}}return{x:r.apply(null,t.concat([a])),y:r.apply(null,e.concat([a]))}}function zo(t,e,n,i){var r=1-i;return r*r*t+2*i*r*e+i*i*n}function Ho(t,e,n){var i=t+n-2*e;if(Ro(i,0))return[.5];var r=(t-e)/i;return r<=1&&r>=0?[r]:[]}function Go(t,e,n,i){return 2*(1-i)*(e-t)+2*i*(n-e)}function Wo(t,e,n,i,r,o,a){var s=zo(t,n,r,a),l=zo(e,i,o,a),u=Fo.pointAt(t,e,n,i,a),c=Fo.pointAt(n,i,r,o,a);return[[t,e,u.x,u.y,s,l],[s,l,c.x,c.y,r,o]]}function Uo(t,e,n,i,r,o,a){if(0===a)return(No(t,e,n,i)+No(n,i,r,o)+No(t,e,r,o))/2;var s=Wo(t,e,n,i,r,o,.5),l=s[0],u=s[1];return l.push(a-1),u.push(a-1),Uo.apply(null,l)+Uo.apply(null,u)}const Vo={box:function(t,e,n,i,r,o){var a=Ho(t,n,r)[0],s=Ho(e,i,o)[0],l=[t,r],u=[e,o];return void 0!==a&&l.push(zo(t,n,r,a)),void 0!==s&&u.push(zo(e,i,o,s)),Yo(l,u)},length:function(t,e,n,i,r,o){return Uo(t,e,n,i,r,o,3)},nearestPoint:function(t,e,n,i,r,o,a,s){return Bo([t,n,r],[e,i,o],a,s,zo)},pointDistance:function(t,e,n,i,r,o,a,s){var l=this.nearestPoint(t,e,n,i,r,o,a,s);return No(l.x,l.y,a,s)},interpolationAt:zo,pointAt:function(t,e,n,i,r,o,a){return{x:zo(t,n,r,a),y:zo(e,i,o,a)}},divide:function(t,e,n,i,r,o,a){return Wo(t,e,n,i,r,o,a)},tangentAngle:function(t,e,n,i,r,o,a){var s=Go(t,n,r,a),l=Go(e,i,o,a);return jo(Math.atan2(l,s))}};function Xo(t,e,n,i,r){var o=1-r;return o*o*o*t+3*e*r*o*o+3*n*r*r*o+i*r*r*r}function qo(t,e,n,i,r){var o=1-r;return 3*(o*o*(e-t)+2*o*r*(n-e)+r*r*(i-n))}function Ko(t,e,n,i){var r,o,a,s=-3*t+9*e-9*n+3*i,l=6*t-12*e+6*n,u=3*e-3*t,c=[];if(Ro(s,0))Ro(l,0)||(r=-u/l)>=0&&r<=1&&c.push(r);else{var h=l*l-4*s*u;Ro(h,0)?c.push(-l/(2*s)):h>0&&(o=(-l-(a=Math.sqrt(h)))/(2*s),(r=(-l+a)/(2*s))>=0&&r<=1&&c.push(r),o>=0&&o<=1&&c.push(o))}return c}function $o(t,e,n,i,r,o,a,s,l){var u=Xo(t,n,r,a,l),c=Xo(e,i,o,s,l),h=Fo.pointAt(t,e,n,i,l),d=Fo.pointAt(n,i,r,o,l),f=Fo.pointAt(r,o,a,s,l),p=Fo.pointAt(h.x,h.y,d.x,d.y,l),m=Fo.pointAt(d.x,d.y,f.x,f.y,l);return[[t,e,h.x,h.y,p.x,p.y,u,c],[u,c,m.x,m.y,f.x,f.y,a,s]]}function Zo(t,e,n,i,r,o,a,s,l){if(0===l)return function(t,e){for(var n=0,i=t.length,r=0;r<i;r++)n+=No(t[r],e[r],t[(r+1)%i],e[(r+1)%i]);return n/2}([t,n,r,a],[e,i,o,s]);var u=$o(t,e,n,i,r,o,a,s,.5),c=u[0],h=u[1];return c.push(l-1),h.push(l-1),Zo.apply(null,c)+Zo.apply(null,h)}const Jo={extrema:Ko,box:function(t,e,n,i,r,o,a,s){for(var l=[t,a],u=[e,s],c=Ko(t,n,r,a),h=Ko(e,i,o,s),d=0;d<c.length;d++)l.push(Xo(t,n,r,a,c[d]));for(d=0;d<h.length;d++)u.push(Xo(e,i,o,s,h[d]));return Yo(l,u)},length:function(t,e,n,i,r,o,a,s){return Zo(t,e,n,i,r,o,a,s,3)},nearestPoint:function(t,e,n,i,r,o,a,s,l,u,c){return Bo([t,n,r,a],[e,i,o,s],l,u,Xo,c)},pointDistance:function(t,e,n,i,r,o,a,s,l,u,c){var h=this.nearestPoint(t,e,n,i,r,o,a,s,l,u,c);return No(h.x,h.y,l,u)},interpolationAt:Xo,pointAt:function(t,e,n,i,r,o,a,s,l){return{x:Xo(t,n,r,a,l),y:Xo(e,i,o,s,l)}},divide:function(t,e,n,i,r,o,a,s,l){return $o(t,e,n,i,r,o,a,s,l)},tangentAngle:function(t,e,n,i,r,o,a,s,l){var u=qo(t,n,r,a,l),c=qo(e,i,o,s,l);return jo(Math.atan2(c,u))}};function Qo(t,e,n,i,r,o){return n*Math.cos(r)*Math.cos(o)-i*Math.sin(r)*Math.sin(o)+t}function ta(t,e,n,i,r,o){return n*Math.sin(r)*Math.cos(o)+i*Math.cos(r)*Math.sin(o)+e}const ea=function(t,e,n,i,r,o,a){for(var s=function(t,e,n){return Math.atan(-e/t*Math.tan(n))}(n,i,r),l=1/0,u=-1/0,c=[o,a],h=2*-Math.PI;h<=2*Math.PI;h+=Math.PI){var d=s+h;o<a?o<d&&d<a&&c.push(d):a<d&&d<o&&c.push(d)}for(h=0;h<c.length;h++){var f=Qo(t,0,n,i,r,c[h]);f<l&&(l=f),f>u&&(u=f)}var p=function(t,e,n){return Math.atan(e/(t*Math.tan(n)))}(n,i,r),m=1/0,g=-1/0,v=[o,a];for(h=2*-Math.PI;h<=2*Math.PI;h+=Math.PI){var y=p+h;o<a?o<y&&y<a&&v.push(y):a<y&&y<o&&v.push(y)}for(h=0;h<v.length;h++){var b=ta(0,e,n,i,r,v[h]);b<m&&(m=b),b>g&&(g=b)}return{x:l,y:m,width:u-l,height:g-m}};function na(t){if(t.length<2)return 0;for(var e=0,n=0;n<t.length-1;n++){var i=t[n],r=t[n+1];e+=No(i[0],i[1],r[0],r[1])}return e}const ia=function(t){return na(t)};function ra(t,e){return t&&e?{minX:Math.min(t.minX,e.minX),minY:Math.min(t.minY,e.minY),maxX:Math.max(t.maxX,e.maxX),maxY:Math.max(t.maxY,e.maxY)}:t||e}function oa(t,e){var n=t.get("startArrowShape"),i=t.get("endArrowShape");return n&&(e=ra(e,n.getCanvasBBox())),i&&(e=ra(e,i.getCanvasBBox())),e}var aa=null;function sa(){if(!aa){var t=document.createElement("canvas");t.width=1,t.height=1,aa=t.getContext("2d")}return aa}function la(t,e,n){var i=1;if((0,b.isString)(t)&&(i=t.split("\n").length),i>1){var r=function(t,e){return e?e-t:.14*t}(e,n);return e*i+r*(i-1)}return e}function ua(t){var e=t.fontSize,n=t.fontFamily,i=t.fontWeight;return[t.fontStyle,t.fontVariant,i,e+"px",n].join(" ").trim()}var ca=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,ha=/[^\s\,]+/gi;const da=function(t){var e=t||[];return(0,b.isArray)(e)?e:(0,b.isString)(e)?(e=e.match(ca),(0,b.each)(e,(function(t,n){if((t=t.match(ha))[0].length>1){var i=t[0].charAt(0);t.splice(1,0,t[0].substr(1)),t[0]=i}(0,b.each)(t,(function(e,n){isNaN(e)||(t[n]=+e)})),e[n]=t})),e):void 0};const fa=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=[[0,0],[1,1]]);for(var i=!!e,r=[],o=0,a=t.length;o<a;o+=2)r.push([t[o],t[o+1]]);var s,l,u,c=function(t,e,n,i){var r,o,a,s,l,u,c,h=[],d=!!i;if(d){a=i[0],s=i[1];for(var f=0,p=t.length;f<p;f+=1)a=He([0,0],a,g=t[f]),s=Ge([0,0],s,g)}f=0;for(var m=t.length;f<m;f+=1){var g=t[f];if(0!==f||n)if(f!==m-1||n){r=t[[f?f-1:m-1,f-1][n?0:1]],o=t[n?(f+1)%m:f+1];var v=[0,0];v=We(v=Ke(v,o,r),v,e);var y=Ue(g,r),b=Ue(g,o),_=y+b;0!==_&&(y/=_,b/=_);var w=We([0,0],v,-y),x=We([0,0],v,b);u=ze([0,0],g,w),l=He([0,0],l=ze([0,0],g,x),Ge([0,0],o,g)),l=Ge([0,0],l,He([0,0],o,g)),u=He([0,0],u=ze([0,0],g,w=We([0,0],w=Ke([0,0],l,g),-y/b)),Ge([0,0],r,g)),u=Ge([0,0],u,He([0,0],r,g)),l=ze([0,0],g,x=We([0,0],x=Ke([0,0],g,u),b/y)),d&&(u=He([0,0],u=Ge([0,0],u,a),s),l=He([0,0],l=Ge([0,0],l,a),s)),h.push(c),h.push(u),c=l}else u=g,h.push(c),h.push(u);else c=g}return n&&h.push(h.shift()),h}(r,.4,i,n),h=r.length,d=[];for(o=0;o<h-1;o+=1)s=c[2*o],l=c[2*o+1],u=r[o+1],d.push(["C",s[0],s[1],l[0],l[1],u[0],u[1]]);return i&&(s=c[h],l=c[h+1],u=r[0],d.push(["C",s[0],s[1],l[0],l[1],u[0],u[1]])),d};var pa=new RegExp("([a-z])[\t\n\v\f\r \u2028\u2029,]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?[\t\n\v\f\r \u2028\u2029]*,?[\t\n\v\f\r \u2028\u2029]*)+)","ig"),ma=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)[\t\n\v\f\r \u2028\u2029]*,?[\t\n\v\f\r \u2028\u2029]*","ig");function ga(t){if(!t)return null;if((0,b.isArray)(t))return t;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},n=[];return String(t).replace(pa,(function(t,i,r){var o=[],a=i.toLowerCase();if(r.replace(ma,(function(t,e){e&&o.push(+e)})),"m"===a&&o.length>2&&(n.push([i].concat(o.splice(0,2))),a="l",i="m"===i?"l":"L"),"o"===a&&1===o.length&&n.push([i,o[0]]),"r"===a)n.push([i].concat(o));else for(;o.length>=e[a]&&(n.push([i].concat(o.splice(0,e[a]))),e[a]););return""})),n}var va=/[a-z]/;function ya(t,e){return[e[0]+(e[0]-t[0]),e[1]+(e[1]-t[1])]}function ba(t){var e=ga(t);if(!e||!e.length)return[["M",0,0]];for(var n=!1,i=0;i<e.length;i++){var r=e[i][0];if(va.test(r)||["V","H","T","S"].indexOf(r)>=0){n=!0;break}}if(!n)return e;var o=[],a=0,s=0,l=0,u=0,c=0,h=e[0];"M"!==h[0]&&"m"!==h[0]||(l=a=+h[1],u=s=+h[2],c++,o[0]=["M",a,s]);i=c;for(var d=e.length;i<d;i++){var f=e[i],p=o[i-1],m=[],g=(r=f[0]).toUpperCase();if(r!==g)switch(m[0]=g,g){case"A":m[1]=f[1],m[2]=f[2],m[3]=f[3],m[4]=f[4],m[5]=f[5],m[6]=+f[6]+a,m[7]=+f[7]+s;break;case"V":m[1]=+f[1]+s;break;case"H":m[1]=+f[1]+a;break;case"M":l=+f[1]+a,u=+f[2]+s,m[1]=l,m[2]=u;break;default:for(var v=1,y=f.length;v<y;v++)m[v]=+f[v]+(v%2?a:s)}else m=e[i];switch(g){case"Z":a=+l,s=+u;break;case"H":m=["L",a=m[1],s];break;case"V":m=["L",a,s=m[1]];break;case"T":a=m[1],s=m[2];var b=ya([p[1],p[2]],[p[3],p[4]]);m=["Q",b[0],b[1],a,s];break;case"S":a=m[m.length-2],s=m[m.length-1];var _=p.length,w=ya([p[_-4],p[_-3]],[p[_-2],p[_-1]]);m=["C",w[0],w[1],m[1],m[2],a,s];break;case"M":l=m[m.length-2],u=m[m.length-1];break;default:a=m[m.length-2],s=m[m.length-1]}o.push(m)}return o}Math.PI;function _a(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function wa(t,e){return _a(t)*_a(e)?(t[0]*e[0]+t[1]*e[1])/(_a(t)*_a(e)):1}function xa(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(wa(t,e))}function Ma(t,e){return t[0]===e[0]&&t[1]===e[1]}function Ea(t,e){var n=e[1],i=e[2],r=(0,b.mod)((0,b.toRadian)(e[3]),2*Math.PI),o=e[4],a=e[5],s=t[0],l=t[1],u=e[6],c=e[7],h=Math.cos(r)*(s-u)/2+Math.sin(r)*(l-c)/2,d=-1*Math.sin(r)*(s-u)/2+Math.cos(r)*(l-c)/2,f=h*h/(n*n)+d*d/(i*i);f>1&&(n*=Math.sqrt(f),i*=Math.sqrt(f));var p=n*n*(d*d)+i*i*(h*h),m=p?Math.sqrt((n*n*(i*i)-p)/p):1;o===a&&(m*=-1),isNaN(m)&&(m=0);var g=i?m*n*d/i:0,v=n?m*-i*h/n:0,y=(s+u)/2+Math.cos(r)*g-Math.sin(r)*v,_=(l+c)/2+Math.sin(r)*g+Math.cos(r)*v,w=[(h-g)/n,(d-v)/i],x=[(-1*h-g)/n,(-1*d-v)/i],M=xa([1,0],w),E=xa(w,x);return wa(w,x)<=-1&&(E=Math.PI),wa(w,x)>=1&&(E=0),0===a&&E>0&&(E-=2*Math.PI),1===a&&E<0&&(E+=2*Math.PI),{cx:y,cy:_,rx:Ma(t,[u,c])?0:n,ry:Ma(t,[u,c])?0:i,startAngle:M,endAngle:M+E,xRotation:r,arcFlag:o,sweepFlag:a}}function Sa(t,e){return[e[0]+(e[0]-t[0]),e[1]+(e[1]-t[1])]}function ka(t){for(var e=[],n=null,i=null,r=null,o=0,a=(t=da(t)).length,s=0;s<a;s++){var l=t[s];i=t[s+1];var u=l[0],c={command:u,prePoint:n,params:l,startTangent:null,endTangent:null};switch(u){case"M":r=[l[1],l[2]],o=s;break;case"A":var h=Ea(n,l);c.arcParams=h}if("Z"===u)n=r,i=t[o+1];else{var d=l.length;n=[l[d-2],l[d-1]]}i&&"Z"===i[0]&&(i=t[o],e[o]&&(e[o].prePoint=n)),c.currentPoint=n,e[o]&&Ma(n,e[o].currentPoint)&&(e[o].prePoint=c.prePoint);var f=i?[i[i.length-2],i[i.length-1]]:null;c.nextPoint=f;var p=c.prePoint;if(["L","H","V"].includes(u))c.startTangent=[p[0]-n[0],p[1]-n[1]],c.endTangent=[n[0]-p[0],n[1]-p[1]];else if("Q"===u){var m=[l[1],l[2]];c.startTangent=[p[0]-m[0],p[1]-m[1]],c.endTangent=[n[0]-m[0],n[1]-m[1]]}else if("T"===u){m=Sa((y=e[s-1]).currentPoint,p);"Q"===y.command?(c.command="Q",c.startTangent=[p[0]-m[0],p[1]-m[1]],c.endTangent=[n[0]-m[0],n[1]-m[1]]):(c.command="TL",c.startTangent=[p[0]-n[0],p[1]-n[1]],c.endTangent=[n[0]-p[0],n[1]-p[1]])}else if("C"===u){var g=[l[1],l[2]],v=[l[3],l[4]];c.startTangent=[p[0]-g[0],p[1]-g[1]],c.endTangent=[n[0]-v[0],n[1]-v[1]],0===c.startTangent[0]&&0===c.startTangent[1]&&(c.startTangent=[g[0]-v[0],g[1]-v[1]]),0===c.endTangent[0]&&0===c.endTangent[1]&&(c.endTangent=[v[0]-g[0],v[1]-g[1]])}else if("S"===u){var y;g=Sa((y=e[s-1]).currentPoint,p),v=[l[1],l[2]];"C"===y.command?(c.command="C",c.startTangent=[p[0]-g[0],p[1]-g[1]],c.endTangent=[n[0]-v[0],n[1]-v[1]]):(c.command="SQ",c.startTangent=[p[0]-v[0],p[1]-v[1]],c.endTangent=[n[0]-v[0],n[1]-v[1]])}else if("A"===u){var b=.001,_=c.arcParams||{},w=_.cx,x=void 0===w?0:w,M=_.cy,E=void 0===M?0:M,S=_.rx,k=void 0===S?0:S,C=_.ry,T=void 0===C?0:C,D=_.sweepFlag,L=void 0===D?0:D,A=_.startAngle,O=void 0===A?0:A,P=_.endAngle,I=void 0===P?0:P;0===L&&(b*=-1);var N=k*Math.cos(O-b)+x,R=T*Math.sin(O-b)+E;c.startTangent=[N-r[0],R-r[1]];var Y=k*Math.cos(O+I+b)+x,j=T*Math.sin(O+I-b)+E;c.endTangent=[p[0]-Y,p[1]-j]}e.push(c)}return e}function Ca(t,e){var n=t.prePoint,i=t.currentPoint,r=t.nextPoint,o=Math.pow(i[0]-n[0],2)+Math.pow(i[1]-n[1],2),a=Math.pow(i[0]-r[0],2)+Math.pow(i[1]-r[1],2),s=Math.pow(n[0]-r[0],2)+Math.pow(n[1]-r[1],2),l=Math.acos((o+a-s)/(2*Math.sqrt(o)*Math.sqrt(a)));if(!l||0===Math.sin(l)||(0,b.isNumberEqual)(l,0))return{xExtra:0,yExtra:0};var u=Math.abs(Math.atan2(r[1]-i[1],r[0]-i[0])),c=Math.abs(Math.atan2(r[0]-i[0],r[1]-i[1]));return u=u>Math.PI/2?Math.PI-u:u,c=c>Math.PI/2?Math.PI-c:c,{xExtra:Math.cos(l/2-u)*(e/2*(1/Math.sin(l/2)))-e/2||0,yExtra:Math.cos(c-l/2)*(e/2*(1/Math.sin(l/2)))-e/2||0}}Do("rect",Ao),Do("image",Ao),Do("circle",Oo),Do("marker",Oo),Do("polyline",(function(t){for(var e=t.attr().points,n=[],i=[],r=0;r<e.length;r++){var o=e[r];n.push(o[0]),i.push(o[1])}var a=Yo(n,i),s=a.x,l=a.y,u={minX:s,minY:l,maxX:s+a.width,maxY:l+a.height};return{x:(u=oa(t,u)).minX,y:u.minY,width:u.maxX-u.minX,height:u.maxY-u.minY}})),Do("polygon",(function(t){for(var e=t.attr().points,n=[],i=[],r=0;r<e.length;r++){var o=e[r];n.push(o[0]),i.push(o[1])}return Yo(n,i)})),Do("text",(function(t){var e=t.attr(),n=e.x,i=e.y,r=e.text,o=e.fontSize,a=e.lineHeight,s=e.font;s||(s=ua(e));var l,u=function(t,e){var n=sa(),i=0;if((0,b.isNil)(t)||""===t)return i;if(n.save(),n.font=e,(0,b.isString)(t)&&t.includes("\n")){var r=t.split("\n");(0,b.each)(r,(function(t){var e=n.measureText(t).width;i<e&&(i=e)}))}else i=n.measureText(t).width;return n.restore(),i}(r,s);if(u){var c=e.textAlign,h=e.textBaseline,d=la(r,o,a),f={x:n,y:i-d};c&&("end"===c||"right"===c?f.x-=u:"center"===c&&(f.x-=u/2)),h&&("top"===h?f.y+=d:"middle"===h&&(f.y+=d/2)),l={x:f.x,y:f.y,width:u,height:d}}else l={x:n,y:i,width:0,height:0};return l})),Do("path",(function(t){var e=t.attr(),n=e.path,i=e.stroke?e.lineWidth:0,r=function(t,e){for(var n=[],i=[],r=[],o=0;o<t.length;o++){var a=(m=t[o]).currentPoint,s=m.params,l=m.prePoint,u=void 0;switch(m.command){case"Q":u=Vo.box(l[0],l[1],s[1],s[2],s[3],s[4]);break;case"C":u=Jo.box(l[0],l[1],s[1],s[2],s[3],s[4],s[5],s[6]);break;case"A":var c=m.arcParams;u=ea(c.cx,c.cy,c.rx,c.ry,c.xRotation,c.startAngle,c.endAngle);break;default:n.push(a[0]),i.push(a[1])}u&&(m.box=u,n.push(u.x,u.x+u.width),i.push(u.y,u.y+u.height)),e&&("L"===m.command||"M"===m.command)&&m.prePoint&&m.nextPoint&&r.push(m)}n=n.filter((function(t){return!Number.isNaN(t)})),i=i.filter((function(t){return!Number.isNaN(t)}));var h=(0,b.min)(n),d=(0,b.min)(i),f=(0,b.max)(n),p=(0,b.max)(i);if(0===r.length)return{x:h,y:d,width:f-h,height:p-d};for(o=0;o<r.length;o++){var m;(a=(m=r[o]).currentPoint)[0]===h?h-=Ca(m,e).xExtra:a[0]===f&&(f+=Ca(m,e).xExtra),a[1]===d?d-=Ca(m,e).yExtra:a[1]===p&&(p+=Ca(m,e).yExtra)}return{x:h,y:d,width:f-h,height:p-d}}(t.get("segments")||ka(n),i),o=r.x,a=r.y,s={minX:o,minY:a,maxX:o+r.width,maxY:a+r.height};return{x:(s=oa(t,s)).minX,y:s.minY,width:s.maxX-s.minX,height:s.maxY-s.minY}})),Do("line",(function(t){var e=t.attr(),n=e.x1,i=e.y1,r=e.x2,o=e.y2,a={minX:Math.min(n,r),maxX:Math.max(n,r),minY:Math.min(i,o),maxY:Math.max(i,o)};return{x:(a=oa(t,a)).minX,y:a.minY,width:a.maxX-a.minX,height:a.maxY-a.minY}})),Do("ellipse",(function(t){var e=t.attr(),n=e.x,i=e.y,r=e.rx,o=e.ry;return{x:n-r,y:i-o,width:2*r,height:2*o}}));var Ta=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.item=n.item,i.canvasX=n.canvasX,i.canvasY=n.canvasY,i.wheelDelta=n.wheelDelta,i.detail=n.detail,i}return(0,y.__extends)(e,t),e}(Gi),Da=function(t){return t+"-"+Math.random()+Date.now()},La=function(t){var e=0,n=0,i=0,r=0;if((0,b.isNumber)(t))e=n=i=r=t;else if((0,b.isString)(t)){e=n=i=r=parseInt(t,10)}else(0,b.isArray)(t)&&(e=t[0],i=(0,b.isNil)(t[1])?t[0]:t[1],r=(0,b.isNil)(t[2])?t[0]:t[2],n=(0,b.isNil)(t[3])?i:t[3]);return[e,i,r,n]},Aa=function(t){var e=new Ta(t.type,t);return e.clientX=t.clientX,e.clientY=t.clientY,e.x=t.x,e.y=t.y,e.target=t.target,e.currentTarget=t.currentTarget,e.bubbles=!0,e.item=t.item,e},Oa=function(t){if(!t)return!1;for(var e=[1,0,0,0,1,0,0,0,1],n=0;n<9;n++)if(t[n]!==e[n])return!0;return!1},Pa=function(t){return Number.isNaN(Number(t))},Ia=function(t){for(var e=1/0,n=-1/0,i=1/0,r=-1/0,o=0;o<t.length;o++){var a=t[o].getBBox(),s=a.minX,l=a.minY,u=a.maxX,c=a.maxY;s<e&&(e=s),l<i&&(i=l),u>n&&(n=u),c>r&&(r=c)}return{x:Math.floor(e),y:Math.floor(i),width:Math.ceil(n)-Math.floor(e),height:Math.ceil(r)-Math.floor(i),minX:e,minY:i,maxX:n,maxY:r}},Na=function(t,e,n,i,r){void 0===e&&(e=15),void 0===n&&(n="quadratic"),void 0===i&&(i=void 0),void 0===r&&(r=void 0);for(var o=t.length,a=2*e,s=["top","top-right","right","bottom-right","bottom","bottom-left","left","top-left"],l={},u=[],c={},h=0;h<o;h++){var d=t[h],f=d.source,p=d.target,m=f+"-"+p;if(!u[h]){l[m]||(l[m]=[]),u[h]=!0,l[m].push(d);for(var g=0;g<o;g++)if(h!==g){var v=t[g],y=v.source,b=v.target;u[g]||(f===b&&p===y?(l[m].push(v),u[g]=!0,c[y+"|"+b+"|"+(l[m].length-1)]=!0):f===y&&p===b&&(l[m].push(v),u[g]=!0))}}}for(var _ in l)for(var w=l[_],x=w.length,M=0;M<x;M++){var E=w[M];if(E.source!==E.target)if(1===x&&i&&E.source!==E.target)E.type=i;else{E.type=n;var S=(M%2==0?1:-1)*(c[E.source+"|"+E.target+"|"+M]?-1:1);E.curveOffset=x%2==1?S*Math.ceil(M/2)*a:S*(Math.floor(M/2)*a+e)}else r&&(E.type=r),E.loopCfg={position:s[M%8],dist:20*Math.floor(M/8)+50}}return t},Ra=function(){function t(t){this.destroyed=!1,this.graph=t,this.destroyed=!1}return t.prototype.getViewCenter=function(){var t=this.getFormatPadding(),e=this.graph,n=this.graph.get("width"),i=e.get("height");return{x:(n-t[1]-t[3])/2+t[3],y:(i-t[0]-t[2])/2+t[0]}},t.prototype.fitCenter=function(){var t=this.graph,e=t.get("group");e.resetMatrix();var n=e.getCanvasBBox();if(0!==n.width&&0!==n.height){var i=this.getViewCenter(),r=n.x+n.width/2,o=n.y+n.height/2;t.translate(i.x-r,i.y-o)}},t.prototype.fitView=function(){var t=this.graph,e=this.getFormatPadding(),n=t.get("width"),i=t.get("height"),r=t.get("group");r.resetMatrix();var o=r.getCanvasBBox();if(0!==o.width&&0!==o.height){var a=this.getViewCenter(),s=o.x+o.width/2,l=o.y+o.height/2;t.translate(a.x-s,a.y-l);var u=(n-e[1]-e[3])/o.width,c=(i-e[0]-e[2])/o.height,h=u;u>c&&(h=c),t.zoom(h,a)||console.warn("zoom failed, ratio out of range, ratio: %f",h)}},t.prototype.getFormatPadding=function(){var t=this.graph.get("fitViewPadding");return La(t)},t.prototype.focusPoint=function(t,e,n){var i=this,r=this.getViewCenter(),o=this.getPointByCanvas(r.x,r.y),a=this.graph.get("group").getMatrix();if(a||(a=[1,0,0,0,1,0,0,0,1]),e){var s=(o.x-t.x)*a[0],l=(o.y-t.y)*a[4],u=0,c=0,h=0,d=0;this.graph.get("canvas").animate((function(t){h=s*t,d=l*t,i.graph.translate(h-u,d-c),u=h,c=d}),(0,y.__assign)({},n))}else this.graph.translate((o.x-t.x)*a[0],(o.y-t.y)*a[4])},t.prototype.getPointByCanvas=function(t,e){var n=this.graph.get("group").getMatrix();return n||(n=[1,0,0,0,1,0,0,0,1]),on({x:t,y:e},n)},t.prototype.getPointByClient=function(t,e){var n=this.graph.get("canvas").getPointByClient(t,e);return this.getPointByCanvas(n.x,n.y)},t.prototype.getClientByPoint=function(t,e){var n=this.graph.get("canvas"),i=this.getCanvasByPoint(t,e),r=n.getClientByPoint(i.x,i.y);return{x:r.x,y:r.y}},t.prototype.getCanvasByPoint=function(t,e){var n=this.graph.get("group").getMatrix();return n||(n=[1,0,0,0,1,0,0,0,1]),rn({x:t,y:e},n)},t.prototype.focus=function(t,e,n){if((0,b.isString)(t)&&(t=this.graph.findById(t)),t){var i=0,r=0;if(t.getType&&"edge"===t.getType()){var o=t.getSource().get("group").getMatrix(),a=t.getTarget().get("group").getMatrix();o&&a?(i=(o[6]+a[6])/2,r=(o[7]+a[7])/2):(o||a)&&(i=o?o[6]:a[6],r=o?o[7]:a[7])}else{var s=t.get("group").getMatrix();s||(s=[1,0,0,0,1,0,0,0,1]),i=s[6],r=s[7]}this.focusPoint({x:i,y:r},e,n)}},t.prototype.changeSize=function(t,e){var n=this.graph;if(!(0,b.isNumber)(t)||!(0,b.isNumber)(e))throw Error("invalid canvas width & height, please make sure width & height type is number");n.set({width:t,height:e}),n.get("canvas").changeSize(t,e),n.get("plugins").forEach((function(t){t.get("gridContainer")&&t.positionInit()}))},t.prototype.destroy=function(){this.graph=null,this.destroyed=!1},t}();const Ya=Ra;function ja(t){return ja="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ja(t)}function Fa(t){if("string"!=typeof t)return t;var e=function(t){if("string"!=typeof t)return t;try{return JSON.parse(t.trim())}catch(e){return t.trim()}},n=e(t);if("string"!=typeof n)return n;for(var i=function(t){return t[t.length-1]},r=t.trim(),o=[],a=[],s=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.some((function(t){return i(a)===t}))},l=null,u=0,c="";u<r.length;){var h=r[u],d=s('"',"'");if(d||h.trim()){var f="\\"===r[u-1],p=s("}"),m=s("]"),g=s(","),v=i(o);if(d)if(i(a)!==h||f)c+=h;else{a.pop();var y=e(c);v.push(y),l=y,c=""}else if(m&&","===h)c&&(v.push(e(c)),c="");else if(p&&":"===h)a.push(","),c&&(v.push(c),c="");else if(g&&","===h)c&&(v.push(e(c)),c=""),a.pop();else if("}"===h&&(p||g)){c&&(v.push(e(c)),c=""),g&&a.pop();for(var b={},_=1;_<v.length;_+=2)b[v[_-1]]=v[_];o.pop(),o.length&&i(o).push(b),a.pop(),l=b}else"]"===h&&m?(c&&(v.push(e(c)),c=""),o.pop(),o.length&&i(o).push(v),a.pop(),l=v):"{"===h?(o.push([]),a.push("}")):"["===h?(o.push([]),a.push("]")):'"'===h?a.push('"'):"'"===h?a.push("'"):c+=h;u+=1}else u+=1}return l||c}function Ba(t,e){var n={},i=t.getAttributeNames&&t.getAttributeNames()||[],r=t.children&&Array.from(t.children).map((function(t){return Ba(t,e)})),o={},a=t.tagName?t.tagName.toLowerCase():"group";return"text"===a&&(n.text=t.innerText),o.type=a,"img"===a&&(o.type="image"),Array.from(i).forEach((function(e){var i=function(t){return t.split("-").reduce((function(t,e){return t+e.charAt(0).toUpperCase()+e.slice(1)}))}(e),r=t.getAttribute(e);try{if("style"===i||"attrs"===i){var a=Fa(r);n=(0,y.__assign)((0,y.__assign)({},n),a)}else o[i]=Fa(r)}catch(t){if("style"===i)throw t;o[i]=r}})),o.attrs=n,e&&e.style&&o.name&&"object"===ja(e.style[o.name])&&(o.attrs=(0,y.__assign)((0,y.__assign)({},o.attrs),e.style[o.name])),e&&e.style&&o.keyshape&&(o.attrs=(0,y.__assign)((0,y.__assign)({},o.attrs),e.style)),r.length&&(o.children=r),o}function za(t,e){var n;void 0===e&&(e={x:0,y:0});var i=(0,y.__assign)({x:0,y:0,width:0,height:0},e);if(null===(n=t.children)||void 0===n?void 0:n.length){var r=t.attrs,o=void 0===r?{}:r,a=o.marginTop,s=(0,y.__assign)({},e);a&&(s.y+=a);for(var l=0;l<t.children.length;l++){t.children[l].attrs.key=(o.key||"root")+" -"+l+" ";var u=za(t.children[l],s);if(u.bbox){var c=u.bbox;"inline"===u.attrs.next?s.x+=u.bbox.width:s.y+=u.bbox.height,c.width+c.x>i.width&&(i.width=c.width+c.x),c.height+c.y>i.height&&(i.height=c.height+c.y)}}}return t.bbox=function(t,e,n){var i,r,o=t.attrs,a=void 0===o?{}:o,s={x:e.x||0,y:e.y||0,width:n.width||0,height:n.height||0};switch(t.type){case"maker":case"circle":a.r&&(r=2*a.r,i=2*a.r);break;case"text":a.text&&(r=ei(a.text,a.fontSize||12)[0],i=16,s.y+=i,s.height=i,s.width=r,t.attrs=(0,y.__assign)({fontSize:12,fill:"#000"},a));break;default:a.width&&(r=a.width),a.height&&(i=a.height)}return i>=0&&(s.height=i),r>=0&&(s.width=r),a.marginTop&&(s.y+=a.marginTop),a.marginLeft&&(s.x+=a.marginLeft),s}(t,e,i),t.attrs=(0,y.__assign)((0,y.__assign)({},t.attrs),t.bbox),t}function Ha(t,e){var n,i,r,o,a=(t||{}).type,s=((null==e?void 0:e.attrs)||{}).key;if(s&&t&&(t.attrs.key=s),!t&&e)return{action:"delete",val:e,type:a,key:s};if(t&&!e)return{action:"add",val:t,type:a};if(!t&&!e)return{action:"same",type:a};var l=[];if((null===(n=t.children)||void 0===n?void 0:n.length)>0||(null===(i=e.children)||void 0===i?void 0:i.length)>0)for(var u=Math.max(null===(r=t.children)||void 0===r?void 0:r.length,null===(o=e.children)||void 0===o?void 0:o.length),c=e.children||[],h=t.children||[],d=0;d<u;d+=1)l.push(Ha(h[d],c[d]));var f=Object.keys(e.attrs),p=Object.keys(t.attrs);return e.type!==t.type?{action:"restructure",nowTarget:t,formerTarget:e,key:s,children:l}:f.filter((function(t){return"children"!==t})).some((function(n){return t.attrs[n]!==e.attrs[n]||!p.includes(n)}))?{action:"change",val:t,children:l,type:a,key:s}:{action:"same",children:l,type:a,key:s}}function Ga(t){var e={},n=function(e){var n=function(t){return function(e){for(var n=t.length,i=[],r=0,o="";r<n;)if("{"===t[r]&&"{"===t[r+1])i.push(o),o="",r+=2;else if("}"===t[r]&&"}"===t[r+1]){if(i.length){var a=i.pop();o=(0,b.get)(e,o,a.endsWith("=")?'"{'+o+'}"':o),i.push(a+o)}r+=2,o=""}else o+=t[r],r+=1;return i.push(o),i.map((function(t,e){return i[e-1]&&i[e-1].endsWith("=")?'"{'+t+'}"':t})).join("")}}("function"==typeof t?t(e):t)(e),i=document.createElement("div");i.innerHTML=n;var r=za(Ba(i.children[0],e));return i.remove(),r};return{draw:function(t,i){var r=n(t),o=i;return function t(e){var n=e.attrs,r=void 0===n?{}:n,a=e.bbox,s=e.type,l=e.children,u=(0,y.__rest)(e,["attrs","bbox","type","children"]);if("group"!==e.type){var c=i.addShape(e.type,(0,y.__assign)({attrs:r,origin:{bbox:a,type:s,children:l}},u));e.keyshape&&(o=c)}e.children&&e.children.forEach((function(e){return t(e)}))}(r),e[t.id]=[r],o},update:function(t,i){e[t.id]||(e[t.id]=[]);var r=i.getContainer(),o=r.get("children"),a=n(t),s=Ha(a,e[t.id].pop()),l=function t(e){var n;"group"!==e.type&&r.addShape(e.type,{attrs:e.attrs}),(null===(n=e.children)||void 0===n?void 0:n.length)&&e.children.map((function(e){return t(e)}))},u=function t(e){var n,i=o.find((function(t){return t.attrs.key===e.attrs.key}));i&&r.removeChild(i),(null===(n=e.children)||void 0===n?void 0:n.length)&&e.children.map((function(e){return t(e)}))};!function t(e){var n=e.key;if("group"!==e.type){var r=o.find((function(t){return t.attrs.key===n}));switch(e.action){case"change":if(r){var a=e.val.keyshape?i.getOriginStyle():{};r.attr((0,y.__assign)((0,y.__assign)({},a),e.val.attrs))}break;case"add":l(e.val);break;case"delete":u(e.val);break;case"restructure":u(e.formerTarget),l(e.nowTarget)}}e.children&&e.children.forEach((function(e){return t(e)}))}(s),e[t.id].push(a)},getAnchorPoints:function(){return[[0,.5],[1,.5],[.5,1],[.5,0]]}}}var Wa={};function Ua(t){return Wa[t]||(Wa[t]=(0,b.upperFirst)(t)),Wa[t]}var Va={defaultShapeType:"defaultType",className:null,getShape:function(t){var e=this;return e[t]||e[e.defaultShapeType]||e["simple-circle"]},draw:function(t,e,n){var i=this.getShape(t),r=i.draw(e,n);return i.afterDraw&&i.afterDraw(e,n,r),r},baseUpdate:function(t,e,n,i){var r=this.getShape(t);r.update&&r.update(e,n,i),r.afterUpdate&&r.afterUpdate(e,n)},setState:function(t,e,n,i){this.getShape(t).setState(e,n,i)},shouldUpdate:function(t){return!!this.getShape(t).update},getControlPoints:function(t,e){return this.getShape(t).getControlPoints(e)},getAnchorPoints:function(t,e){return this.getShape(t).getAnchorPoints(e)}},Xa={options:{},draw:function(t,e){return this.drawShape(t,e)},drawShape:function(){},afterDraw:function(){},afterUpdate:function(){},setState:function(){},getControlPoints:function(t){return t.controlPoints},getAnchorPoints:function(t){var e=this.options.anchorPoints;return t.anchorPoints||e}},qa=function(){function t(){}return t.registerFactory=function(e,n){var i=Ua(e),r=Va,o=(0,y.__assign)((0,y.__assign)({},r),n);return t[i]=o,o.className=i,o},t.getFactory=function(e){return t[Ua(e)]},t.registerNode=function(e,n,i){var r,o=t.Node;if("string"==typeof n||"function"==typeof n){var a=Ga(n);r=(0,y.__assign)((0,y.__assign)({},o.getShape("single-node")),a)}else if(n.jsx){a=Ga(n.jsx);r=(0,y.__assign)((0,y.__assign)((0,y.__assign)({},o.getShape("single-node")),a),n)}else{o.getShape(i);var s=i?o.getShape(i):Xa;r=(0,y.__assign)((0,y.__assign)({},s),n)}return r.type=e,r.itemType="node",o[e]=r,r},t.registerEdge=function(e,n,i){var r=t.Edge,o=i?r.getShape(i):Xa,a=(0,y.__assign)((0,y.__assign)({},o),n);return a.type=e,a.itemType="edge",r[e]=a,a},t.registerCombo=function(e,n,i){var r=t.Combo,o=i?r.getShape(i):Xa,a=(0,y.__assign)((0,y.__assign)({},o),n);return a.type=e,a.itemType="combo",r[e]=a,a},t}();const Ka=qa;qa.registerFactory("node",{defaultShapeType:"circle"}),qa.registerFactory("edge",{defaultShapeType:"line"}),qa.registerFactory("combo",{defaultShapeType:"circle"});var $a="bboxCache",Za="bboxCanvasCache",Ja=function(){function t(t){this._cfg={},this.destroyed=!1;var e={id:void 0,type:"item",model:{},group:void 0,animate:!1,visible:!0,locked:!1,event:!0,keyShape:void 0,states:[]};this._cfg=Object.assign(e,this.getDefaultCfg(),t);var n=this.get("model"),i=n.id,r=this.get("type");i||(i=Da(r),this.get("model").id=i),this.set("id",i);var o=t.group;o&&(o.set("item",this),o.set("id",i)),this.init(),this.draw();var a=n.shape||n.type||("edge"===r?"line":"circle"),s=this.get("shapeFactory");if(s&&s[a]){var l=s[a].options;if(l&&l.stateStyles){var u=this.get("styles")||n.stateStyles;u=(0,b.deepMix)({},l.stateStyles,u),this.set("styles",u)}}}return t.prototype.calculateBBox=function(){var t=this.get("keyShape"),e=this.get("group"),n=Xn(t,e);return n.x=n.minX,n.y=n.minY,n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2,n},t.prototype.calculateCanvasBBox=function(){var t=this.get("keyShape"),e=this.get("group"),n=Xn(t,e);return n.x=n.minX,n.y=n.minY,n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2,n},t.prototype.drawInner=function(){var t=this,e=t.get("shapeFactory"),n=t.get("group"),i=t.get("model");n.clear();var r=i.visible;if(void 0===r||r||t.changeVisibility(r),e){t.updatePosition(i);var o=t.getShapeCfg(i),a=o.type,s=e.draw(a,o,n);s&&(t.set("keyShape",s),s.set("isKeyShape",!0),s.set("draggable",!0)),this.setOriginStyle(),this.set("currentShape",a),this.restoreStates(e,a)}},t.prototype.setOriginStyle=function(){var t=this.get("group").get("children"),e=this.getKeyShape(),n=this,i=e.get("name");if(this.get("originStyle")){var r=this.getOriginStyle();i&&!r[i]&&(r[i]={});var o=this.getCurrentStatesStyle();(0,b.each)(t,(function(t){var e=t.get("name"),a=t.attr();if(e&&e!==i){var s=o[e];r[e]||(r[e]={}),s?Object.keys(a).forEach((function(t){var n=a[t];n!==s[t]&&(r[e][t]=n)})):r[e]="image"!==t.get("type")?(0,b.clone)(a):n.getShapeStyleByName(e)}else{var l=t.attr(),u={};Object.keys(o).forEach((function(t){var e=o[t];(0,b.isPlainObject)(e)&&t!==i||(u[t]=e)})),Object.keys(l).forEach((function(t){var e=l[t];u[t]!==e&&(i?r[i][t]=e:r[t]=e)}))}})),r.path&&delete r.path,r.matrix&&delete r.matrix,r.x&&delete r.x,r.y&&delete r.y,r[i]&&(delete r[i].x,delete r[i].y,delete r[i].matrix,delete r[i].path),n.set("originStyle",r)}else{var a={};(0,b.each)(t,(function(t){var e=t.get("type"),r=t.get("name");if(r&&r!==i)a[r]="image"!==e?(0,b.clone)(t.attr()):n.getShapeStyleByName(r),a[r]&&"text"===e&&(delete a[r].x,delete a[r].y,delete a[r].matrix);else{var o=n.getShapeStyleByName();if(delete o.path,delete o.matrix,i)if(r)a[i]=o;else{var s=Da("shape");t.set("name",s),a[s]="image"!==e?(0,b.clone)(t.attr()):n.getShapeStyleByName(r)}else Object.assign(a,o)}})),n.set("originStyle",a)}},t.prototype.restoreStates=function(t,e){var n=this,i=n.get("states");(0,b.each)(i,(function(i){t.setState(e,i,!0,n)}))},t.prototype.init=function(){var t=Ka.getFactory(this.get("type"));this.set("shapeFactory",t)},t.prototype.get=function(t){return this._cfg[t]},t.prototype.set=function(t,e){(0,b.isPlainObject)(t)?this._cfg=(0,y.__assign)((0,y.__assign)({},this._cfg),t):this._cfg[t]=e},t.prototype.getDefaultCfg=function(){return{}},t.prototype.clearCache=function(){this.set($a,null),this.set(Za,null)},t.prototype.beforeDraw=function(){},t.prototype.afterDraw=function(){},t.prototype.afterUpdate=function(){},t.prototype.draw=function(){this.beforeDraw(),this.drawInner(),this.afterDraw()},t.prototype.getShapeStyleByName=function(t){var e,n=this.get("group");if(e=t?n.find((function(e){return e.get("name")===t})):this.getKeyShape()){var i={};return(0,b.each)(e.attr(),(function(t,e){("img"!==e||(0,b.isString)(t))&&(i[e]=t)})),i}return{}},t.prototype.getShapeCfg=function(t,e){var n=this.get("styles");if(n){var i=t;return i.style=(0,y.__assign)((0,y.__assign)({},n),t.style),i}return t},t.prototype.getStateStyle=function(t){var e=this.get("styles");return e&&e[t]},t.prototype.getOriginStyle=function(){return this.get("originStyle")},t.prototype.getCurrentStatesStyle=function(){var t=this,e={},n=t.getStates();return n&&n.length?((0,b.each)(t.getStates(),(function(n){e=Object.assign(e,t.getStateStyle(n))})),e):this.getOriginStyle()},t.prototype.setState=function(t,e){var n=this.get("states"),i=this.get("shapeFactory"),r=t,o=t;(0,b.isString)(e)&&(r=t+":"+e,o=t+":");var a=n;if((0,b.isBoolean)(e)){var s=n.indexOf(o);if(e){if(s>-1)return;n.push(r)}else s>-1&&n.splice(s,1)}else if((0,b.isString)(e)){var l=n.filter((function(t){return t.includes(o)}));l.length>0&&this.clearStates(l),(a=a.filter((function(t){return!t.includes(o)}))).push(r),this.set("states",a)}if(i){var u=this.get("model").type;i.setState(u,t,e,this)}},t.prototype.clearStates=function(t){var e=this,n=e.getStates(),i=e.get("shapeFactory"),r=e.get("model").type;t||(t=n),(0,b.isString)(t)&&(t=[t]);var o=n.filter((function(e){return-1===t.indexOf(e)}));e.set("states",o),t.forEach((function(t){i.setState(r,t,!1,e)}))},t.prototype.getContainer=function(){return this.get("group")},t.prototype.getKeyShape=function(){return this.get("keyShape")},t.prototype.getModel=function(){return this.get("model")},t.prototype.getType=function(){return this.get("type")},t.prototype.getID=function(){return this.get("id")},t.prototype.isItem=function(){return!0},t.prototype.getStates=function(){return this.get("states")},t.prototype.hasState=function(t){return this.getStates().indexOf(t)>=0},t.prototype.refresh=function(t){var e=this.get("model");this.updatePosition(e),this.updateShape(t),this.afterUpdate(),this.clearCache()},t.prototype.getUpdateType=function(t){},t.prototype.update=function(t,e){void 0===e&&(e=void 0);var n=this.get("model");if("move"===e)this.updatePosition(t);else{var i=n.visible,r=t.visible;i!==r&&void 0!==r&&this.changeVisibility(r);var o={x:n.x,y:n.y};t.x=isNaN(+t.x)?n.x:+t.x,t.y=isNaN(+t.y)?n.y:+t.y;var a=this.get("styles");if(t.stateStyles){var s=t.stateStyles;(0,b.mix)(a,s),delete t.stateStyles}Object.assign(n,t),o.x===t.x&&o.y===t.y||this.updatePosition(t),this.updateShape()}this.afterUpdate(),this.clearCache()},t.prototype.updateShape=function(t){var e=this.get("shapeFactory"),n=this.get("model"),i=n.type;if(e.shouldUpdate(i)&&i===this.get("currentShape")){var r=this.getShapeCfg(n,t);e.baseUpdate(i,r,this,t),"move"!==t&&this.setOriginStyle()}else this.draw();this.restoreStates(e,i)},t.prototype.updatePosition=function(t){var e=this.get("model"),n=isNaN(+t.x)?+e.x:+t.x,i=isNaN(+t.y)?+e.y:+t.y,r=this.get("group");if(isNaN(n)||isNaN(i))return!1;e.x=n,e.y=i;var o=r.getMatrix();return(!o||o[6]!==n||o[7]!==i)&&(r.resetMatrix(),hn(r,{x:n,y:i}),this.clearCache(),!0)},t.prototype.getBBox=function(){var t=this.get($a);return t||(t=this.calculateBBox(),this.set($a,t)),t},t.prototype.getCanvasBBox=function(){var t=this.get(Za);return t||(t=this.calculateCanvasBBox(),this.set(Za,t)),t},t.prototype.toFront=function(){this.get("group").toFront()},t.prototype.toBack=function(){this.get("group").toBack()},t.prototype.show=function(){this.changeVisibility(!0)},t.prototype.hide=function(){this.changeVisibility(!1)},t.prototype.changeVisibility=function(t){var e=this.get("group");t?e.show():e.hide(),this.set("visible",t)},t.prototype.isVisible=function(){return this.get("visible")},t.prototype.enableCapture=function(t){var e=this.get("group");e&&e.set("capture",t)},t.prototype.destroy=function(){if(!this.destroyed){var t=this.get("animate"),e=this.get("group");t&&e.stopAnimate(),this.clearCache(),e.remove(),this._cfg=null,this.destroyed=!0}},t}();const Qa=Ja;var ts={source:"start",target:"end"},es="Node",ns="Point",is=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,y.__extends)(e,t),e.prototype.getDefaultCfg=function(){return{type:"edge",sourceNode:null,targetNode:null,startPoint:null,endPoint:null,linkCenter:!1}},e.prototype.setEnd=function(t,e){var n=ts[t]+ns,i=t+es,r=this.get(i);r&&!r.destroyed&&r.removeEdge(this),(0,b.isPlainObject)(e)?(this.set(n,e),this.set(i,null)):e&&(e.addEdge(this),this.set(i,e),this.set(n,null))},e.prototype.getLinkPoint=function(t,e,n){var i=ts[t]+ns,r=t+es,o=this.get(i);if(!o){var a=this.get(r),s=t+"Anchor",l=this.getPrePoint(t,n),u=e[s];(0,b.isNil)(u)||(o=a.getLinkPointByAnchor(u)),o=o||a.getLinkPoint(l),(0,b.isNil)(o.index)||this.set(t+"AnchorIndex",o.index)}return o},e.prototype.getPrePoint=function(t,e){if(e&&e.length)return e["source"===t?0:e.length-1];var n="source"===t?"target":"source";return this.getEndPoint(n)},e.prototype.getEndPoint=function(t){var e=t+es,n=ts[t]+ns,i=this.get(e);return i?i.get("model"):this.get(n)},e.prototype.getControlPointsByCenter=function(t){var e=this.getEndPoint("source"),n=this.getEndPoint("target"),i=this.get("shapeFactory"),r=t.type;return i.getControlPoints(r,{startPoint:e,endPoint:n})},e.prototype.getEndCenter=function(t){var e=t+es,n=ts[t]+ns,i=this.get(e);if(i){var r=i.getBBox();return{x:r.centerX,y:r.centerY}}return this.get(n)},e.prototype.init=function(){t.prototype.init.call(this),this.setSource(this.get("source")),this.setTarget(this.get("target"))},e.prototype.getShapeCfg=function(e,n){var i=this,r=i.get("linkCenter"),o="move"===n?e:t.prototype.getShapeCfg.call(this,e);if(r)o.startPoint=i.getEndCenter("source"),o.endPoint=i.getEndCenter("target");else{var a=o.controlPoints||i.getControlPointsByCenter(o);o.startPoint=i.getLinkPoint("source",e,a),o.endPoint=i.getLinkPoint("target",e,a)}return o.sourceNode=i.get("sourceNode"),o.targetNode=i.get("targetNode"),o},e.prototype.getModel=function(){var t=this.get("model"),e=this.get("sourceNode"),n=this.get("targetNode");return e?delete t.sourceNode:t.source=this.get("startPoint"),n?delete t.targetNode:t.target=this.get("endPoint"),(0,b.isString)(t.source)||(0,b.isPlainObject)(t.source)||(t.source=t.source.getID()),(0,b.isString)(t.target)||(0,b.isPlainObject)(t.target)||(t.target=t.target.getID()),t},e.prototype.setSource=function(t){this.setEnd("source",t),this.set("source",t)},e.prototype.setTarget=function(t){this.setEnd("target",t),this.set("target",t)},e.prototype.getSource=function(){return this.get("source")},e.prototype.getTarget=function(){return this.get("target")},e.prototype.updatePosition=function(){return!1},e.prototype.update=function(t,e){void 0===e&&(e=void 0);var n=this.get("model"),i=n.visible,r=t.visible;i!==r&&void 0!==r&&this.changeVisibility(r);var o=this.get("styles");if(t.stateStyles){var a=t.stateStyles;(0,b.mix)(o,a),delete t.stateStyles}Object.assign(n,t),this.updateShape(e),this.afterUpdate(),this.clearCache()},e.prototype.destroy=function(){var e=this.get("sourceNode"),n=this.get("targetNode");e&&!e.destroyed&&e.removeEdge(this),n&&!n.destroyed&&n.removeEdge(this),t.prototype.destroy.call(this)},e}(Qa);const rs=is;var os="anchorPointsCache",as=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,y.__extends)(e,t),e.prototype.getNearestPoint=function(t,e){for(var n=0,i=t[0],r=sn(t[0],e),o=0;o<t.length;o++){var a=t[o],s=sn(a,e);s<r&&(i=a,r=s,n=o)}return i.anchorIndex=n,i},e.prototype.getDefaultCfg=function(){return{type:"node",edges:[]}},e.prototype.getEdges=function(){return this.get("edges")},e.prototype.getInEdges=function(){var t=this;return this.get("edges").filter((function(e){return e.get("target")===t}))},e.prototype.getOutEdges=function(){var t=this;return this.get("edges").filter((function(e){return e.get("source")===t}))},e.prototype.getNeighbors=function(t){var e=this,n=this.get("edges");if("target"===t){return n.filter((function(t){return t.getSource()===e})).map((function(t){return t.getTarget()}))}if("source"===t){return n.filter((function(t){return t.getTarget()===e})).map((function(t){return t.getSource()}))}return n.map((function(t){return t.getSource()===e?t.getTarget():t.getSource()}))},e.prototype.getLinkPointByAnchor=function(t){return this.getAnchorPoints()[t]},e.prototype.getLinkPoint=function(t){var e,n,i=this.get("keyShape").get("type"),r=this.get("type"),o=this.getBBox();"combo"===r?(e=o.centerX||(o.maxX+o.minX)/2,n=o.centerY||(o.maxY+o.minY)/2):(e=o.centerX,n=o.centerY);var a,s=this.getAnchorPoints();switch(i){case"circle":a=en({x:e,y:n,r:o.width/2},t);break;case"ellipse":a=nn({x:e,y:n,rx:o.width/2,ry:o.height/2},t);break;default:a=tn(o,t)}var l=a;return s.length&&(l||(l=t),l=this.getNearestPoint(s,l)),l||(l={x:e,y:n}),l},e.prototype.getAnchorPoints=function(){var t=this.get(os);if(!t){t=[];var e=this.get("shapeFactory"),n=this.getBBox(),i=this.get("model"),r=this.getShapeCfg(i),o=i.type,a=e.getAnchorPoints(o,r)||[];(0,b.each)(a,(function(e,i){var r={x:n.minX+e[0]*n.width,y:n.minY+e[1]*n.height,anchorIndex:i};t.push(r)})),this.set(os,t)}return t},e.prototype.addEdge=function(t){this.get("edges").push(t)},e.prototype.lock=function(){this.set("locked",!0)},e.prototype.unlock=function(){this.set("locked",!1)},e.prototype.hasLocked=function(){return this.get("locked")},e.prototype.removeEdge=function(t){var e=this.getEdges(),n=e.indexOf(t);n>-1&&e.splice(n,1)},e.prototype.clearCache=function(){this.set("bboxCache",null),this.set(os,null)},e.prototype.getUpdateType=function(t){var e,n,i,r,o;if(t){var a=!(0,b.isNil)(t.x),s=!(0,b.isNil)(t.y),l=Object.keys(t);return 1===l.length&&(a||s)||2===l.length&&a&&s?"move":(0,b.isNumber)(t.x)||(0,b.isNumber)(t.y)||t.type||t.anchorPoints||t.size||(null==t?void 0:t.style)&&((null===(e=null==t?void 0:t.style)||void 0===e?void 0:e.r)||(null===(n=null==t?void 0:t.style)||void 0===n?void 0:n.width)||(null===(i=null==t?void 0:t.style)||void 0===i?void 0:i.height)||(null===(r=null==t?void 0:t.style)||void 0===r?void 0:r.rx)||(null===(o=null==t?void 0:t.style)||void 0===o?void 0:o.ry))?"bbox":"style"}},e}(Qa);const ss=as;var ls="bboxCache",us="bboxCanvasCache",cs="sizeCache",hs="anchorPointsCache",ds=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,y.__extends)(e,t),e.prototype.getDefaultCfg=function(){return{type:"combo",nodes:[],edges:[],combos:[]}},e.prototype.getShapeCfg=function(t){var e=this.get("styles"),n=this.get("bbox");if(e&&n){var i=t,r={r:Math.hypot(n.height,n.width)/2||Bn.defaultCombo.size[0]/2,width:n.width||Bn.defaultCombo.size[0],height:n.height||Bn.defaultCombo.size[1]};i.style=(0,y.__assign)((0,y.__assign)((0,y.__assign)({},e),t.style),r);var o=t.padding||Bn.defaultCombo.padding;return(0,b.isNumber)(o)?(r.r+=o,r.width+=2*o,r.height+=2*o):(r.r+=o[0],r.width+=o[1]+o[3]||2*o[1],r.height+=o[0]+o[2]||2*o[0]),this.set(cs,r),i}return t},e.prototype.calculateCanvasBBox=function(){if(!this.destroyed){var t=this.get("keyShape"),e=this.get("group"),n=Xn(t,e);n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2;var i=this.get(cs),r=this.get(ls)||{},o=r.x,a=r.x;if(i)i.width=Math.max(i.width,n.width),i.height=Math.max(i.height,n.height),"circle"===t.get("type")?(n.width=2*i.r,n.height=2*i.r):(n.width=i.width,n.height=i.height),n.minX=n.centerX-n.width/2,n.minY=n.centerY-n.height/2,n.maxX=n.centerX+n.width/2,n.maxY=n.centerY+n.height/2;else n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2;return n.x=n.minX,n.y=n.minY,n.x===o&&n.y===a||this.set(hs,null),n}},e.prototype.getChildren=function(){return{nodes:this.getNodes(),combos:this.getCombos()}},e.prototype.getNodes=function(){return this.get("nodes")},e.prototype.getCombos=function(){return this.get("combos")},e.prototype.addChild=function(t){switch(t.getType()){case"node":this.addNode(t);break;case"combo":this.addCombo(t);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},e.prototype.addCombo=function(t){return this.get("combos").push(t),!0},e.prototype.addNode=function(t){return this.get("nodes").push(t),!0},e.prototype.removeChild=function(t){switch(t.getType()){case"node":this.removeNode(t);break;case"combo":this.removeCombo(t);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},e.prototype.removeCombo=function(t){if(t){var e=this.getCombos(),n=e.indexOf(t);return n>-1&&(e.splice(n,1),!0)}},e.prototype.removeNode=function(t){if(t){var e=this.getNodes(),n=e.indexOf(t);return n>-1&&(e.splice(n,1),!0)}},e.prototype.getUpdateType=function(t){},e.prototype.getBBox=function(){return this.set(us,null),this.calculateCanvasBBox()},e.prototype.clearCache=function(){this.set(ls,null),this.set(us,null),this.set(hs,null)},e.prototype.destroy=function(){if(!this.destroyed){var t=this.get("animate"),e=this.get("group");t&&e.stopAnimate(),this.clearCache(),this.set(cs,null),this.set("bbox",null),e.remove(),this._cfg=null,this.destroyed=!0}},e}(ss);const fs=ds;var ps="node",ms="edge",gs="vedge",vs="combo",ys="Mapper",bs="stateStyles",_s=function(){function t(t){var e=this;this.edgeToBeUpdateMap={},this.throttleRefresh=(0,b.throttle)((function(t){var n,i=e.graph;if(i&&!i.get("destroyed")){var r=e.edgeToBeUpdateMap;r&&(null===(n=Object.keys(r))||void 0===n?void 0:n.length)&&(Object.keys(r).forEach((function(t){var e=r[t].edge;e&&!e.destroyed&&e.refresh(r[t].updateType)})),e.edgeToBeUpdateMap={})}}),16,{trailing:!0,leading:!0}),this.graph=t,this.destroyed=!1}return t.prototype.addItem=function(t,e){var n=this.graph,i=t===gs?ms:t,r=n.get(i+"Group")||n.get("group"),o=(0,b.upperFirst)(i),a=null,s=n.get(i+(0,b.upperFirst)(bs))||{},l=n.get("default"+o);e.stateStyles&&(s=e.stateStyles),l&&(0,b.each)(l,(function(t,n){(0,b.isObject)(t)&&!(0,b.isArray)(t)?e[n]=(0,b.deepMix)({},t,e[n]):(0,b.isArray)(t)?e[n]=e[n]||(0,b.clone)(l[n]):e[n]=e[n]||l[n]}));var u=n.get(i+ys);if(u){var c=u(e);c.stateStyles&&(s=c.stateStyles,delete c.stateStyles),(0,b.each)(c,(function(t,n){(0,b.isObject)(t)&&!(0,b.isArray)(t)?e[n]=(0,b.deepMix)({},e[n],t):e[n]=c[n]||e[n]}))}if(n.emit("beforeadditem",{type:t,model:e}),t===ms||t===gs){var h=void 0,d=void 0;if(h=e.source,d=e.target,h&&(0,b.isString)(h)&&(h=n.findById(h)),d&&(0,b.isString)(d)&&(d=n.findById(d)),!h||!d)return void console.warn("The source or target node of edge "+e.id+" does not exist!");h.getType&&"combo"===h.getType()&&(e.isComboEdge=!0),d.getType&&"combo"===d.getType()&&(e.isComboEdge=!0),a=new rs({model:e,source:h,target:d,styles:s,linkCenter:n.get("linkCenter"),group:r.addGroup()})}else if(t===ps)a=new ss({model:e,styles:s,group:r.addGroup()});else if(t===vs){var f=e.children,p=ri(f,n);isNaN(p.x)?isNaN(e.x)&&(e.x=100*Math.random()):e.x=p.x,isNaN(p.y)?isNaN(e.y)&&(e.y=100*Math.random()):e.y=p.y;var m=r.addGroup();m.setZIndex(e.depth);var g=(a=new fs({model:e,styles:s,bbox:e.collapsed?ri([],n):p,group:m})).getModel();(f||[]).forEach((function(t){var e=n.findById(t.id);a.addChild(e),t.depth=g.depth+2})),e.collapsed&&setTimeout((function(){a.destroyed||n.collapseCombo(a)}),0)}if(a)return n.get(t+"s").push(a),n.get("itemMap")[a.get("id")]=a,n.emit("afteradditem",{item:a,model:e}),a},t.prototype.updateItem=function(t,e){var n,i,r=this,o=this.graph;if((0,b.isString)(t)&&(t=o.findById(t)),t&&!t.destroyed){var a="";t.getType&&(a=t.getType());var s=o.get(a+ys),l=t.getModel(),u=t.getUpdateType(e);if(s){var c=s((0,b.deepMix)({},l,e)),h=(0,b.deepMix)({},l,c,e);c.stateStyles&&(t.set("styles",h.stateStyles),delete h.stateStyles),(0,b.each)(h,(function(t,n){e[n]=t}))}else(0,b.each)(e,(function(t,n){l[n]&&(0,b.isObject)(t)&&!(0,b.isArray)(t)&&(e[n]=(0,y.__assign)((0,y.__assign)({},l[n]),e[n]))}));if(o.emit("beforeupdateitem",{item:t,cfg:e}),a===ms){if(e.source){var d=e.source;(0,b.isString)(d)&&(d=o.findById(d)),t.setSource(d)}if(e.target){var f=e.target;(0,b.isString)(f)&&(f=o.findById(f)),t.setTarget(f)}t.update(e)}if(a===ps||a===vs){t.update(e,u);var p=t.getEdges(),m="bbox"===u||"move"===u;if(a===ps)"move"===u?(0,b.each)(p,(function(t){r.edgeToBeUpdateMap[t.getID()]={edge:t,updateType:u},r.throttleRefresh()})):m&&(0,b.each)(p,(function(t){t.refresh()}));else if(m&&a===vs){var g=t.get("shapeFactory"),v=l.type||"circle";(void 0===l.animate||void 0===e.animate?null===(i=null===(n=g[v])||void 0===n?void 0:n.options)||void 0===i?void 0:i.animate:l.animate||e.animate)?setTimeout((function(){if(t&&!t.destroyed){var e=t.getKeyShape();e&&!e.destroyed&&(0,b.each)(p,(function(t){t&&!t.destroyed&&t.refresh()}))}}),201):(0,b.each)(p,(function(t){t.refresh()}))}}o.emit("afterupdateitem",{item:t,cfg:e})}},t.prototype.updateCombo=function(t,e){var n,i,r=this,o=this.graph;if((0,b.isString)(t)&&(t=o.findById(t)),t&&!t.destroyed){var a=t.getModel(),s=ri(a.collapsed?[]:e,o),l=a.collapsed?ri(e,o):s,u=l.x,c=l.y;t.set("bbox",s),t.update({x:u,y:c});var h=t.get("shapeFactory"),d=a.type||"circle";(void 0===a.animate?null===(i=null===(n=h[d])||void 0===n?void 0:n.options)||void 0===i?void 0:i.animate:a.animate)?setTimeout((function(){if(t&&!t.destroyed){var e=t.getKeyShape();e&&!e.destroyed&&(t.getShapeCfg(a),r.updateComboEdges(t))}}),201):this.updateComboEdges(t)}},t.prototype.updateComboEdges=function(t){for(var e=t.getEdges()||[],n=0;n<e.length;n++){var i=e[n];if(i&&!i.destroyed){var r=i.get("shapeFactory"),o=i.getShapeCfg(i.getModel()),a=i.getContainer();a.clear();var s=r.draw(o.type,o,a);i.set("keyShape",s),s.set("isKeyShape",!0),s.set("draggable",!0),i.setOriginStyle()}}},t.prototype.collapseCombo=function(t){var e=this.graph;(0,b.isString)(t)&&(t=e.findById(t));var n=t.getChildren();n.nodes.forEach((function(t){e.hideItem(t)})),n.combos.forEach((function(t){e.hideItem(t)}))},t.prototype.expandCombo=function(t){var e=this.graph;(0,b.isString)(t)&&(t=e.findById(t));var n=t.getChildren();n.nodes.forEach((function(t){e.showItem(t)})),n.combos.forEach((function(t){t.getModel().collapsed?t.show():e.showItem(t)}))},t.prototype.removeItem=function(t){var e=this,n=this.graph;if((0,b.isString)(t)&&(t=n.findById(t)),t&&!t.destroyed){var i=(0,b.clone)(t.getModel());n.emit("beforeremoveitem",{item:i});var r="";t.getType&&(r=t.getType());var o=n.get(r+"s"),a=o.indexOf(t);if(a>-1&&o.splice(a,1),r===ms){var s=n.get("v"+r+"s"),l=s.indexOf(t);l>-1&&s.splice(l,1)}var u=t.get("id");delete n.get("itemMap")[u];var c=n.get("comboTrees"),h=t.get("id");if(r===ps){var d=t.getModel().comboId;if(c&&d){var f=c,p=!1;c.forEach((function(t){p||Jn(t,(function(t){if(t.id===h&&f){var e=f.indexOf(t);return f.splice(e,1),p=!0,!1}return f=t.children,!0}))}))}for(var m=(_=t.getEdges()).length-1;m>=0;m--)n.removeItem(_[m],!1);d&&n.updateCombo(d)}else if(r===vs){var g,v=t.getModel().parentId,y=!1;(c||[]).forEach((function(t){y||Jn(t,(function(t){return t.id!==h||(g=t,y=!0,!1)}))})),g.removed=!0,g&&g.children&&g.children.forEach((function(t){e.removeItem(t.id)}));var _;for(m=(_=t.getEdges()).length;m>=0;m--)n.removeItem(_[m],!1);v&&n.updateCombo(v)}t.destroy(),n.emit("afterremoveitem",{item:i})}},t.prototype.setItemState=function(t,e,n){var i=this.graph,r=e;(0,b.isString)(n)&&(r=e+":"+n),t.hasState(r)===n&&n||(0,b.isString)(n)&&t.hasState(r)||(i.emit("beforeitemstatechange",{item:t,state:r,enabled:n}),t.setState(e,n),i.autoPaint(),i.emit("afteritemstatechange",{item:t,state:r,enabled:n}))},t.prototype.priorityState=function(t,e){var n=this.graph,i=t;(0,b.isString)(t)&&(i=n.findById(t)),this.setItemState(i,e,!1),this.setItemState(i,e,!0)},t.prototype.clearItemStates=function(t,e){var n=this.graph;(0,b.isString)(t)&&(t=n.findById(t)),n.emit("beforeitemstatesclear",{item:t,states:e}),t.clearStates(e),n.emit("afteritemstatesclear",{item:t,states:e})},t.prototype.refreshItem=function(t){var e=this.graph;(0,b.isString)(t)&&(t=e.findById(t)),e.emit("beforeitemrefresh",{item:t}),t.refresh(),e.emit("afteritemrefresh",{item:t})},t.prototype.addCombos=function(t,e){var n=this,i=this.graph;(t||[]).forEach((function(t){Qn(t,(function(t){var i;return e.forEach((function(e){e.id===t.id&&(e.children=t.children,e.depth=t.depth,i=e)})),i&&n.addItem("combo",i),!0}))}));var r=i.get("comboGroup");r&&r.sort()},t.prototype.changeItemVisibility=function(t,e){var n=this,i=this.graph;if((0,b.isString)(t)&&(t=i.findById(t)),t){if(i.emit("beforeitemvisibilitychange",{item:t,visible:e}),t.changeVisibility(e),t.getType&&t.getType()===ps){var r=t.getEdges();(0,b.each)(r,(function(t){(!e||t.get("source").isVisible()&&t.get("target").isVisible())&&n.changeItemVisibility(t,e)}))}else if(t.getType&&t.getType()===vs){var o=i.get("comboTrees"),a=t.get("id"),s=[],l=!1;(o||[]).forEach((function(t){l||t.children&&0!==t.children.length&&Jn(t,(function(t){return t.id!==a||(s=t.children,l=!0,!1)}))})),s&&(!e||e&&!t.getModel().collapsed)&&s.forEach((function(t){var r=i.findById(t.id);n.changeItemVisibility(r,e)}));r=t.getEdges();(0,b.each)(r,(function(t){(!e||t.get("source").isVisible()&&t.get("target").isVisible())&&n.changeItemVisibility(t,e)}))}return i.emit("afteritemvisibilitychange",{item:t,visible:e}),t}console.warn("The item to be shown or hidden does not exist!")},t.prototype.destroy=function(){this.graph=null,this.destroyed=!0},t}();const ws=_s;var xs=null,Ms=function(){function t(t){this.graph=t,this.cachedStates={enabled:{},disabled:{}},this.destroyed=!1}return t.checkCache=function(t,e,n){if(n[e]){var i=n[e].indexOf(t);i>=0&&n[e].splice(i,1)}},t.cacheState=function(t,e,n){n[e]||(n[e]=[]),n[e].push(t)},t.prototype.updateState=function(e,n,i){var r=this,o=t.checkCache,a=t.cacheState;if(!e.destroyed){var s=this.cachedStates,l=s.enabled,u=s.disabled;i?(o(e,n,u),a(e,n,l)):(o(e,n,l),a(e,n,u)),xs&&clearTimeout(xs),xs=setTimeout((function(){xs=null,r.updateGraphStates()}),16)}},t.prototype.updateStates=function(t,e,n){var i=this;(0,b.isString)(e)?this.updateState(t,e,n):e.forEach((function(e){i.updateState(t,e,n)}))},t.prototype.updateGraphStates=function(){var t=this.graph.get("states"),e=this.cachedStates;(0,b.each)(e.disabled,(function(e,n){t[n]&&(t[n]=t[n].filter((function(t){return e.indexOf(t)<0&&!e.destroyed})))})),(0,b.each)(e.enabled,(function(e,n){if(t[n]){var i={};t[n].forEach((function(t){t.destroyed||(i[t.get("id")]=!0)})),e.forEach((function(e){if(!e.destroyed){var r=e.get("id");i[r]||(i[r]=!0,t[n].push(e))}}))}else t[n]=e})),this.graph.emit("graphstatechange",{states:t}),this.cachedStates={enabled:{},disabled:{}}},t.prototype.destroy=function(){this.graph=null,this.cachedStates=null,xs&&clearTimeout(xs),xs=null,this.destroyed=!0},t}();const Es=Ms;var Ss=function(t,e){return t&&e?t.replace(/\\?\{([^{}]+)\}/g,(function(t,n){if("\\"===t.charAt(0))return t.slice(1);var i=e[n];return 0===i&&(i="0"),i||""})):t},ks=function(t){var e=[];if(t.length<2)throw new Error("point length must largn than 2, now it's "+t.length);for(var n=0,i=t;n<i.length;n++){var r=i[n],o=r.x,a=r.y;e.push(o),e.push(a)}var s=fa(e);return s.unshift(["M",t[0].x,t[0].y]),s},Cs=function(t,e,n,i){void 0===n&&(n=0),void 0===i&&(i=0);var r={x:(1-n)*t.x+n*e.x,y:(1-n)*t.y+n*e.y},o=[0,0];Ve(o,[e.x-t.x,e.y-t.y]),o&&(o[0]||o[1])||(o=[0,0]);var a=[-o[1]*i,o[0]*i];return r.x+=a[0],r.y+=a[1],r},Ts=function(t,e){var n=t.length;if(!n)return"";for(var i="",r=0;r<n;r++){var o=t[r];i+=Ss(0===r?"M{x} {y}":"L{x} {y}",o)}return e&&(i+="Z"),i},Ds=function(t){var e=[];return t.forEach((function(t){if("A"!==t[0])for(var n=1;n<t.length;n+=2)e.push([t[n],t[n+1]]);else{var i=t.length;e.push([t[i-2],t[i-1]])}})),e},Ls=function(t){if(t.length<2)throw new Error("point length must largn than 2, now it's "+t.length);var e=t[0],n=t[1],i=t[t.length-1],r=t[t.length-2];t.unshift(i),t.unshift(r),t.push(e),t.push(n);for(var o=[],a=1;a<t.length-2;a+=1){var s=t[a-1].x,l=t[a-1].y,u=t[a].x,c=t[a].y,h=t[a+1].x,d=t[a+1].y,f=u+(h-s)/6,p=c+(d-l)/6,m=h-((a!==t.length-2?t[a+2].x:h)-u)/6,g=d-((a!==t.length-2?t[a+2].y:d)-c)/6;o.push(["C",f,p,m,g,h,d])}return o.unshift(["M",i.x,i.y]),o},As=function(t,e){return We([0,0],Ve([0,0],t),e)},Os=function(t,e){var n=[t[1]-e[1],e[0]-t[0]],i=Math.sqrt(n[0]*n[0]+n[1]*n[1]);if(0===i)throw new Error("p0 should not be equal to p1");return[n[0]/i,n[1]/i]},Ps=function(t,e){return[e[0]-t[0],e[1]-t[1]]};function Is(t,e){if(!t||t.length<1)return"";if(1===t.length)return function(t){var n=[t[0][0],t[0][1]-e],i=[t[0][0],t[0][1]+e];return"M "+n+" A "+e+","+e+",0,0,0,"+i+" A "+e+","+e+",0,0,0,"+n}(t);if(2===t.length)return function(t){var n=We([0,0],Os(t[0],t[1]),e),i=We([0,0],n,-1),r=ze([0,0],t[0],n),o=ze([0,0],t[1],n),a=ze([0,0],t[1],i),s=ze([0,0],t[0],i);return"M "+r+" L "+o+" A "+[e,e,"0,0,0",a].join(",")+" L "+s+" A "+[e,e,"0,0,0",r].join(",")}(t);for(var n=new Array(t.length),i=0;i<n.length;++i){var r=0===i?t[t.length-1]:t[i-1],o=t[i],a=We([0,0],Os(r,o),e);n[i]=[ze([0,0],r,a),ze([0,0],o,a)]}var s="A "+[e,e,"0,0,0,"].join(",");return n=n.map((function(t,e){var i="";return 0===e&&(i="M "+n[n.length-1][1]+" "),i+=s+t[0]+" L "+t[1]})),n.join(" ")}function Ns(t,e){var n,i,r,o=t.length;if(!t||o<1)return"";if(1===o)return i=[(n=t)[0][0],n[0][1]-e],r=[n[0][0],n[0][1]+e],"M "+i+" A "+[e,e,"0,0,0",r].join(",")+" A "+[e,e,"0,0,0",i].join(",");if(2===o)return function(t){var n=Ps(t[0],t[1]),i=As(n,e),r=ze([0,0],t[0],We([0,0],i,-1)),o=ze([0,0],t[1],i),a=1.2*e,s=As(Ve([0,0],n),a),l=We([0,0],s,-1),u=ze([0,0],r,l),c=ze([0,0],o,l),h=ze([0,0],r,s);return"M "+r+" C "+[u,c,o].join(",")+" S "+[h,r].join(",")+" Z"}(t);for(var a=t.map((function(e,n){var i=t[(n+1)%o];return{p:e,v:Ve([0,0],Ps(e,i))}})),s=0;s<a.length;++s){var l=Ve([0,0],ze([0,0],a[s>0?s-1:o-1].v,We([0,0],a[s].v,-1)));a[s].p=ze([0,0],a[s].p,We([0,0],l,e))}return a.map((function(t){var e=t.p;return{x:e[0],y:e[1]}}))}var Rs=function(t,e,n){return(t.y-n.y)*(e.x-n.x)-(t.x-n.x)*(e.y-n.y)},Ys=function(t){var e=t.map((function(t){return{x:t.getModel().x,y:t.getModel().y}}));if(e.sort((function(t,e){return t.x===e.x?t.y-e.y:t.x-e.x})),1===e.length)return e;for(var n=[],i=0;i<e.length;i++){for(;n.length>=2&&Rs(n[n.length-2],n[n.length-1],e[i])<=0;)n.pop();n.push(e[i])}var r=[];for(i=e.length-1;i>=0;i--){for(;r.length>=2&&Rs(r[r.length-2],r[r.length-1],e[i])<=0;)r.pop();r.push(e[i])}return r.pop(),n.pop(),n.concat(r)},js={maxRoutingIterations:100,maxMarchingIterations:100,pixelGroupSize:2,edgeR0:10,edgeR1:10,nodeR0:5,nodeR1:10,morphBuffer:5,threshold:.001,skip:16,nodeInfluenceFactor:1,edgeInfluenceFactor:1,negativeNodeInfluenceFactor:-.5};function Fs(t,e,n){var i=!1,r=function(t,n){return e.cells[t+n*e.width]},o=function(t,e){var i=0;return r(t-1,e-1)>=n&&(i+=1),r(t,e-1)>n&&(i+=2),r(t-1,e)>n&&(i+=4),r(t,e)>n&&(i+=8),i},a=function(n,i){for(var r,a,s=n,l=i,u=0;u<e.width*e.height;u++){if(r=s,a=l,t.findIndex((function(t){return t.x===s&&t.y===l}))>-1){if(t[0].x===s&&t[0].y===l)return!0}else t.push({x:s,y:l});var c=o(s,l);switch(c){case-1:return console.warn("Marched out of bounds"),!0;case 0:case 3:case 2:case 7:s++;break;case 12:case 14:case 4:s--;break;case 6:0===r&&(-1===a?s-=1:s+=1);break;case 1:case 13:case 5:l--;break;case 9:1===r&&(0===a?l-=1:l+=1);break;case 10:case 8:case 11:l++;break;default:return console.warn("Marching squares invalid state: "+c),!0}}};this.march=function(){for(var t=0;t<e.width&&!i;t+=1)for(var s=0;s<e.height&&!i;s+=1)r(t,s)>n&&15!==o(t,s)&&(i=a(t,s));return i}}var Bs=function(t,e){var n=Number.POSITIVE_INFINITY,i=null;return t.forEach((function(t){var r=En(t,e);r>=0&&r<n&&(i=t,n=r)})),i};function zs(t,e,n,i,r){var o=function(t,e,n){var i=null,r=Number.POSITIVE_INFINITY;return e.forEach((function(e){var o={x:t.getModel().x,y:t.getModel().y},a={x:e.getModel().x,y:e.getModel().y},s=kn(o,a),l=new _n(o.x,o.y,a.x,a.y),u=n.reduce((function(t,e){return En(e,l)>0?t+1:t}),0);s*Math.pow(u+1,2)<r&&(i=e,r=s*Math.pow(u+1,2))})),i}(t,n,e);if(null===o)return[];var a=function(t,e,n,i){var r=[],o=[];o.push(t);for(var a=!0,s=0,l=function(t,e){var n=!1;return e.forEach((function(e){n||(Tn(t,{x:e.x1,y:e.y1})||Tn(t,{x:e.x2,y:e.y2}))&&(n=!0)})),n},u=function(t,e){for(var n=0,i=e;n<i.length;n++){var r=i[n].getBBox(),o=[[r.x,r.y],[r.x+r.width,r.y],[r.x,r.y+r.height],[r.x+r.width,r.y+r.height]];if(vn(o,t.x,t.y))return!0}return!1};a&&s<n;){a=!1;for(var c=function(){var t=o.pop(),n=Bs(e,t);if(n){var c=Mn(n,t),h=c[0];if(2===c[1]){var d=function(s){for(var c=i,d=Ws(n,c,h,s),f=l(d,o)||l(d,r),p=u(d,e);!f&&p&&c>=1;)d=Ws(n,c/=1.5,h,s),f=l(d,o)||l(d,r),p=u(d,e);!d||f||s&&p||(o.push(new _n(t.x1,t.y1,d.x,d.y)),o.push(new _n(d.x,d.y,t.x2,t.y2)),a=!0)};d(!0),a||d(!1)}}a||r.push(t),s+=1};!a&&o.length;)c()}for(;o.length;)r.push(o.pop());return r}(new _n(t.getModel().x,t.getModel().y,o.getModel().x,o.getModel().y),e,i,r),s=function(t){for(var n=[];t.length>0;){var i=t.pop();if(0===t.length){n.push(i);break}var r=t.pop(),o=new _n(i.x1,i.y1,r.x2,r.y2);Bs(e,o)?(n.push(i),t.push(r)):t.push(o)}return n}(a);return s}var Hs=function(t,e,n){var i=Object.assign(js,n),r=Sn(t.map((function(t){return{x:t.getModel().x,y:t.getModel().y}})));t=t.sort((function(t,e){return kn({x:t.getModel().x,y:t.getModel().y},r)-kn({x:e.getModel().x,y:e.getModel().y},r)}));var o=[],a=[];t.forEach((function(t){zs(t,e,o,i.maxRoutingIterations,i.morphBuffer).forEach((function(t){a.push(t)})),o.push(t)}));for(var s,l,u,c,h,d=function(t,e,n){var i={minX:Number.POSITIVE_INFINITY,minY:Number.POSITIVE_INFINITY,maxX:Number.NEGATIVE_INFINITY,maxY:Number.NEGATIVE_INFINITY,width:0,height:0,x:0,y:0},r=[];t.forEach((function(t){r.push(t.getBBox())})),e.forEach((function(t){r.push(t.getBBox())}));for(var o=0,a=r;o<a.length;o++){var s=a[o];i.minX=(s.minX<i.minX?s.minX:i.minX)-n,i.minY=(s.minY<i.minY?s.minY:i.minY)-n,i.maxX=(s.maxX>i.maxX?s.maxX:i.maxX)+n,i.maxY=(s.maxY>i.maxY?s.maxY:i.maxY)+n}return i.width=i.maxX-i.minX,i.height=i.maxY-i.minY,i.x=i.minX,i.y=i.minY,i}(t,a,i.nodeR0),f=(s=d.width,l=d.height,u=i.pixelGroupSize,c=Math.ceil(s/u),h=Math.ceil(l/u),{cells:new Float32Array(Math.max(0,c*h)).fill(0),width:c,height:h}),p=[],m=[],g=0;g<i.maxMarchingIterations;g++)if(Gs(t,e,a,d,f,i),m=[],new Fs(p=[],f,i.threshold).march()){var v=p.map((function(t){return{x:Math.round(t.x*i.pixelGroupSize+d.minX),y:Math.round(t.y*i.pixelGroupSize+d.minY)}}));if(v){var y=v.length;if(i.skip>1)for(y=Math.floor(v.length/i.skip);y<3&&i.skip>1;)i.skip-=1,y=Math.floor(v.length/i.skip);for(var b=0,_=0;_<y;_+=1,b+=i.skip)m.push({x:v[b].x,y:v[b].y})}if(m&&function(){for(var e=0,n=t;e<n.length;e++){var i=n[e],r=m.map((function(t){return[t.x,t.y]}));if(!vn(r,i.getBBox().centerX,i.getBBox().centerY))return!1}return!0}())return m;if(i.threshold*=.9,g<=.5*i.maxMarchingIterations)i.memberInfluenceFactor*=1.2,i.edgeInfluenceFactor*=1.2;else{if(!(0!==i.nonMemberInfluenceFactor&&e.length>0))break;i.nonMemberInfluenceFactor*=.8}}return m};function Gs(t,e,n,i,r,o){function a(t,e){var n=Math.floor((t-e)/o.pixelGroupSize);return n<0?0:n}function s(t,e){return t*o.pixelGroupSize+e}var l=(o.nodeR0-o.nodeR1)*(o.nodeR0-o.nodeR1),u=(o.edgeR0-o.edgeR1)*(o.edgeR0-o.edgeR1),c=function(t,e){return[Math.min(a(t.minX,e+i.minX),r.width),Math.min(a(t.minY,e+i.minY),r.height),Math.min(a(t.maxX,-e+i.minX),r.width),Math.min(a(t.maxY,-e+i.minY),r.height)]},h=function(t,e){for(var n=t.getBBox(),a=c(n,o.nodeR1),l=a[0],u=a[1],h=a[2],d=a[3],f=u;f<d;f+=1)for(var p=l;p<h;p+=1)if(!(e<0&&r[p+f*r.width]<=0)){var m=s(p,i.minX),g=s(f,i.minY),v=Dn({x:m,y:g},{x:n.minX,y:n.minY,width:n.width,height:n.height});if(v<Math.pow(o.nodeR1,2)){var y=Math.sqrt(v)-o.nodeR1;r.cells[p+f*r.width]+=e*y*y}}};o.nodeInfluenceFactor&&t.forEach((function(t){h(t,o.nodeInfluenceFactor/l)})),o.edgeInfluenceFactor&&n.forEach((function(t){!function(t,e){for(var n=t.getBBox(),a=c(n,o.edgeR1),l=a[0],u=a[1],h=a[2],d=a[3],f=u;f<d;f+=1)for(var p=l;p<h;p+=1)if(!(e<0&&r.cells[p+f*r.width]<=0)){var m=s(p,i.minX),g=s(f,i.minY),v=Cn({x:m,y:g},t);if(v<Math.pow(o.edgeR1,2)){var y=Math.sqrt(v)-o.edgeR1;r.cells[p+f*r.width]+=e*y*y}}}(t,o.edgeInfluenceFactor/u)})),o.negativeNodeInfluenceFactor&&e.forEach((function(t){h(t,o.negativeNodeInfluenceFactor/l)}))}function Ws(t,e,n,i){var r=t.getBBox(),o=n[0],a=n[1],s=n[2],l=n[3],u={topLeft:{x:r.minX-e,y:r.minY-e},topRight:{x:r.maxX+e,y:r.minY-e},bottomLeft:{x:r.minX-e,y:r.maxY+e},bottomRight:{x:r.maxX+e,y:r.maxY+e}},c=r.height*r.width;function h(t,e){return r.width*(.5*(t.y-r.minY+(e.y-r.minY)))}if(a)return o?i?u.topLeft:u.bottomRight:s?i?u.bottomLeft:u.topRight:h(a,l)<.5*c?a.y>l.y?i?u.topLeft:u.bottomRight:i?u.topRight:u.bottomLeft:a.y<l.y?i?u.bottomLeft:u.topRight:i?u.bottomRight:u.topLeft;if(l){if(o)return i?u.topRight:u.bottomLeft;if(s)return i?u.bottomRight:u.topLeft}return h(o,s)<.5*c?o.x>s.x?i?u.topLeft:u.bottomRight:i?u.bottomLeft:u.topRight:o.x<s.x?i?u.topRight:u.bottomLeft:i?u.bottomRight:u.topLeft}var Us=function(){function t(t,e){this.cfg=(0,b.deepMix)(this.getDefaultCfg(),e),this.graph=t,this.id=this.cfg.id,this.group=this.cfg.group,this.members=this.cfg.members.map((function(e){return(0,b.isString)(e)?t.findById(e):e})),this.nonMembers=this.cfg.nonMembers.map((function(e){return(0,b.isString)(e)?t.findById(e):e})),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()}return t.prototype.getDefaultCfg=function(){return{id:"g6-hull",type:"round-convex",members:[],nonMembers:[],style:{fill:"lightblue",stroke:"blue",opacity:.2},padding:10}},t.prototype.setPadding=function(){var t=this.members.length&&this.members[0].getKeyShape().getCanvasBBox().width/2;this.padding=this.cfg.padding>0?this.cfg.padding+t:10+t,this.cfg.bubbleCfg={nodeR0:this.padding-t,nodeR1:this.padding-t,morphBuffer:this.padding-t}},t.prototype.setType=function(){this.type=this.cfg.type,this.members.length<3&&(this.type="round-convex"),"round-convex"!==this.type&&"smooth-convex"!==this.type&&"bubble"!==this.type&&(console.warn("The hull type should be either round-convex, smooth-convex or bubble, round-convex is used by default."),this.type="round-convex")},t.prototype.calcPath=function(t,e){var n,i,r;switch(this.type){case"round-convex":i=ga(r=Is((n=Ys(t)).map((function(t){return[t.x,t.y]})),this.padding));break;case"smooth-convex":2===(n=Ys(t)).length?i=ga(r=Is(n.map((function(t){return[t.x,t.y]})),this.padding)):n.length>2&&(r=Ns(n.map((function(t){return[t.x,t.y]})),this.padding),i=Ls(r));break;case"bubble":i=(n=Hs(t,e,this.cfg.bubbleCfg)).length>=2&&Ls(n)}return i},t.prototype.render=function(){this.group.addShape("path",{attrs:(0,y.__assign)({path:this.path},this.cfg.style),id:this.id,name:this.cfg.id}),this.group.toBack()},t.prototype.addMember=function(t){if(t){(0,b.isString)(t)&&(t=this.graph.findById(t)),this.members.push(t);var e=this.nonMembers.indexOf(t);return e>-1&&this.nonMembers.splice(e,1),this.updateData(this.members,this.nonMembers),!0}},t.prototype.addNonMember=function(t){if(t){(0,b.isString)(t)&&(t=this.graph.findById(t)),this.nonMembers.push(t);var e=this.members.indexOf(t);return e>-1&&this.members.splice(e,1),this.updateData(this.members,this.nonMembers),!0}},t.prototype.removeMember=function(t){if(t){(0,b.isString)(t)&&(t=this.graph.findById(t));var e=this.members.indexOf(t);return e>-1&&(this.members.splice(e,1),this.updateData(this.members,this.nonMembers),!0)}},t.prototype.removeNonMember=function(t){if(t){(0,b.isString)(t)&&(t=this.graph.findById(t));var e=this.nonMembers.indexOf(t);return e>-1&&(this.nonMembers.splice(e,1),this.updateData(this.members,this.nonMembers),!0)}},t.prototype.updateData=function(t,e){var n=this;this.group.findById(this.id).remove(),t&&(this.members=t.map((function(t){return(0,b.isString)(t)?n.graph.findById(t):t}))),e&&(this.nonMembers=e.map((function(t){return(0,b.isString)(t)?n.graph.findById(t):t}))),this.path=this.calcPath(this.members,this.nonMembers),this.render()},t.prototype.updateStyle=function(t){this.group.findById(this.id).attr((0,y.__assign)({},t))},t.prototype.updateCfg=function(t){var e=this;this.cfg=(0,b.deepMix)(this.cfg,t),this.id=this.cfg.id,this.group=this.cfg.group,t.members&&(this.members=this.cfg.members.map((function(t){return(0,b.isString)(t)?e.graph.findById(t):t}))),t.nonMembers&&(this.nonMembers=this.cfg.nonMembers.map((function(t){return(0,b.isString)(t)?e.graph.findById(t):t}))),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()},t.prototype.contain=function(t){var e,n,i=this,r=(e=(0,b.isString)(t)?this.graph.findById(t):t).getKeyShape();if("path"===e.get("type"))n=Ds(r.attr("path"));else{var o=r.getCanvasBBox();n=[[o.minX,o.minY],[o.maxX,o.minY],[o.maxX,o.maxY],[o.minX,o.maxY]]}return n=n.map((function(t){var e=i.graph.getPointByCanvas(t[0],t[1]);return[e.x,e.y]})),bn(n,Ds(this.path))},t.prototype.destroy=function(){this.group.remove(),this.cfg=null},t}();const Vs=Us;var Xs=ct,qs=function(t){function e(e){var n=t.call(this)||this;return n.cfg=(0,b.deepMix)(n.getDefaultCfg(),e),n.init(),n.animating=!1,n.destroyed=!1,n.cfg.enabledStack&&(n.undoStack=new ye(n.cfg.maxStep),n.redoStack=new ye(n.cfg.maxStep)),n}return(0,y.__extends)(e,t),e.prototype.init=function(){this.initCanvas();var t=new Ya(this),e=new ui(this),n=new ws(this),i=new Es(this);this.set({viewController:t,modeController:e,itemController:n,stateController:i}),this.initLayoutController(),this.initEventController(),this.initGroups(),this.initPlugins()},e.prototype.initGroups=function(){var t=this.get("canvas"),e=(null==t?void 0:t.get("el")).id,n=t.addGroup({id:e+"-root",className:Bn.rootContainerClassName});if(this.get("groupByTypes")){var i=n.addGroup({id:e+"-edge",className:Bn.edgeContainerClassName}),r=n.addGroup({id:e+"-node",className:Bn.nodeContainerClassName}),o=n.addGroup({id:e+"-combo",className:Bn.comboContainerClassName});o.toBack(),this.set({nodeGroup:r,edgeGroup:i,comboGroup:o})}var a=n.addGroup({id:e+"-delegate",className:Bn.delegateContainerClassName});this.set({delegateGroup:a}),this.set("group",n)},e.prototype.getDefaultCfg=function(){return{container:void 0,width:void 0,height:void 0,renderer:"canvas",modes:{},plugins:[],data:{},fitViewPadding:10,minZoom:.2,maxZoom:10,event:!0,groupByTypes:!0,directed:!1,autoPaint:!0,nodes:[],edges:[],combos:[],vedges:[],itemMap:{},linkCenter:!1,defaultNode:{},defaultEdge:{},nodeStateStyles:{},edgeStateStyles:{},states:{},animate:!1,animateCfg:{onFrame:void 0,duration:500,easing:"easeLinear"},callback:void 0,enabledStack:!1,maxStep:10,tooltips:[]}},e.prototype.set=function(t,e){return(0,b.isPlainObject)(t)?this.cfg=(0,y.__assign)((0,y.__assign)({},this.cfg),t):this.cfg[t]=e,this},e.prototype.get=function(t){var e;return null===(e=this.cfg)||void 0===e?void 0:e[t]},e.prototype.getGroup=function(){return this.get("group")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.getMinZoom=function(){return this.get("minZoom")},e.prototype.setMinZoom=function(t){return this.set("minZoom",t)},e.prototype.getMaxZoom=function(){return this.get("maxZoom")},e.prototype.setMaxZoom=function(t){return this.set("maxZoom",t)},e.prototype.getWidth=function(){return this.get("width")},e.prototype.getHeight=function(){return this.get("height")},e.prototype.clearItemStates=function(t,e){(0,b.isString)(t)&&(t=this.findById(t));var n=this.get("itemController");e||(e=t.get("states")),n.clearItemStates(t,e),this.get("stateController").updateStates(t,e,!1)},e.prototype.node=function(t){"function"==typeof t&&this.set("nodeMapper",t)},e.prototype.edge=function(t){"function"==typeof t&&this.set("edgeMapper",t)},e.prototype.combo=function(t){"function"==typeof t&&this.set("comboMapper",t)},e.prototype.findById=function(t){return this.get("itemMap")[t]},e.prototype.find=function(t,e){var n,i=this.get(t+"s");return(0,b.each)(i,(function(t,i){if(e(t,i))return n=t})),n},e.prototype.findAll=function(t,e){var n=[];return(0,b.each)(this.get(t+"s"),(function(t,i){e(t,i)&&n.push(t)})),n},e.prototype.findAllByState=function(t,e){return this.findAll(t,(function(t){return t.hasState(e)}))},e.prototype.translate=function(t,e){var n=this.get("group"),i=(0,b.clone)(n.getMatrix());i||(i=[1,0,0,0,1,0,0,0,1]),i=Xs(i,[["t",t,e]]),n.setMatrix(i),this.emit("viewportchange",{action:"translate",matrix:n.getMatrix()}),this.autoPaint()},e.prototype.moveTo=function(t,e,n,i){var r=this.get("group");dn(r,{x:t,y:e},n,i||{duration:500,easing:"easeCubic"}),this.emit("viewportchange",{action:"move",matrix:r.getMatrix()})},e.prototype.fitView=function(t){t&&this.set("fitViewPadding",t),this.get("viewController").fitView(),this.autoPaint()},e.prototype.fitCenter=function(){this.get("viewController").fitCenter(),this.autoPaint()},e.prototype.addBehaviors=function(t,e){return this.get("modeController").manipulateBehaviors(t,e,!0),this},e.prototype.removeBehaviors=function(t,e){return this.get("modeController").manipulateBehaviors(t,e,!1),this},e.prototype.updateBehavior=function(t,e,n){return this.get("modeController").updateBehavior(t,e,n),this},e.prototype.zoom=function(t,e){var n=this.get("group"),i=(0,b.clone)(n.getMatrix()),r=this.get("minZoom"),o=this.get("maxZoom");return i||(i=[1,0,0,0,1,0,0,0,1]),i=Xs(i,e?[["t",-e.x,-e.y],["s",t,t],["t",e.x,e.y]]:[["s",t,t]]),!(r&&i[0]<r||o&&i[0]>o)&&(n.setMatrix(i),this.emit("viewportchange",{action:"zoom",matrix:i}),this.autoPaint(),!0)},e.prototype.zoomTo=function(t,e){var n=t/this.getZoom();return this.zoom(n,e)},e.prototype.focusItem=function(t,e,n){var i=this.get("viewController"),r=!1;e?r=!0:void 0===e&&(r=this.get("animate"));var o={};n?o=n:void 0===n&&(o=this.get("animateCfg")),i.focus(t,r,o),this.autoPaint()},e.prototype.autoPaint=function(){this.get("autoPaint")&&this.paint()},e.prototype.paint=function(){this.emit("beforepaint"),this.get("canvas").draw(),this.emit("afterpaint")},e.prototype.getPointByClient=function(t,e){return this.get("viewController").getPointByClient(t,e)},e.prototype.getClientByPoint=function(t,e){return this.get("viewController").getClientByPoint(t,e)},e.prototype.getPointByCanvas=function(t,e){return this.get("viewController").getPointByCanvas(t,e)},e.prototype.getCanvasByPoint=function(t,e){return this.get("viewController").getCanvasByPoint(t,e)},e.prototype.getGraphCenterPoint=function(){var t=this.get("group").getCanvasBBox();return{x:(t.minX+t.maxX)/2,y:(t.minY+t.maxY)/2}},e.prototype.getViewPortCenterPoint=function(){return this.getPointByCanvas(this.get("width")/2,this.get("height")/2)},e.prototype.showItem=function(t,e){void 0===e&&(e=!0);var n=this.get("itemController").changeItemVisibility(t,!0);if(e&&this.get("enabledStack")){var i=n.getID(),r={},o={};switch(n.getType()){case"node":r.nodes=[{id:i,visible:!1}],o.nodes=[{id:i,visible:!0}];break;case"edge":r.nodes=[{id:i,visible:!1}],o.edges=[{id:i,visible:!0}];break;case"combo":r.nodes=[{id:i,visible:!1}],o.combos=[{id:i,visible:!0}]}this.pushStack("visible",{before:r,after:o})}},e.prototype.hideItem=function(t,e){void 0===e&&(e=!0);var n=this.get("itemController").changeItemVisibility(t,!1);if(e&&this.get("enabledStack")){var i=n.getID(),r={},o={};switch(n.getType()){case"node":r.nodes=[{id:i,visible:!0}],o.nodes=[{id:i,visible:!1}];break;case"edge":r.nodes=[{id:i,visible:!0}],o.edges=[{id:i,visible:!1}];break;case"combo":r.nodes=[{id:i,visible:!0}],o.combos=[{id:i,visible:!1}]}this.pushStack("visible",{before:r,after:o})}},e.prototype.refreshItem=function(t){this.get("itemController").refreshItem(t)},e.prototype.setAutoPaint=function(t){this.set("autoPaint",t),this.get("canvas").set("autoDraw",t)},e.prototype.remove=function(t,e){void 0===e&&(e=!0),this.removeItem(t,e)},e.prototype.removeItem=function(t,e){void 0===e&&(e=!0);var n=t;if((0,b.isString)(t)&&(n=this.findById(t)),!n&&(0,b.isString)(t))console.warn("The item to be removed does not exist!");else if(n){var i="";if(n.getType&&(i=n.getType()),e&&this.get("enabledStack")){var r=(0,y.__assign)((0,y.__assign)({},n.getModel()),{itemType:i}),o={};switch(i){case"node":o.nodes=[r],o.edges=[];for(var a=n.getEdges(),s=a.length-1;s>=0;s--)o.edges.push((0,y.__assign)((0,y.__assign)({},a[s].getModel()),{itemType:"edge"}));break;case"edge":o.edges=[r];break;case"combo":o.combos=[r]}this.pushStack("delete",{before:o,after:{}})}if("node"===i)n.getModel().comboId&&this.updateComboTree(n,void 0,!1);if(this.get("itemController").removeItem(n),"combo"===i){var l=ii(this.get("comboTrees"));this.set("comboTrees",l)}}},e.prototype.addItem=function(t,e,n,i){void 0===n&&(n=!0),void 0===i&&(i=!0);var r=this.get("comboSorted");this.set("comboSorted",r&&!i);var o=this.get("itemController");if(!function(t,e){if("node"===t||"combo"===t){if(e.id&&!(0,b.isString)(e.id))return console.warn("G6 Warning Tips: missing 'id' property, or the 'id' %c"+e.id+"%c is not a string.","font-size: 20px; color: red;",""),!1}else if(!("edge"!==t||e.source&&e.target))return console.warn("G6 Warning Tips: missing 'source' or 'target' for the edge."),!1;return!0}(t,e))return!1;if(!e.id||!this.findById(e.id)){var a,s=this.get("comboTrees");if(s||(s=[]),"combo"===t){var l=this.get("itemMap"),u=!1;if(s.forEach((function(n){u||Qn(n,(function(n){if(e.parentId===n.id){u=!0;var i=(0,y.__assign)({id:e.id,depth:n.depth+2},e);n.children?n.children.push(i):n.children=[i],e.depth=i.depth,a=o.addItem(t,e)}var r=l[n.id];return u&&r&&r.getType&&"combo"===r.getType()&&o.updateCombo(r,n.children),!0}))})),!u){var c=(0,y.__assign)({id:e.id,depth:0},e);e.depth=c.depth,s.push(c),a=o.addItem(t,e)}this.set("comboTrees",s)}else if("node"===t&&(0,b.isString)(e.comboId)&&s){var h;(h=this.findById(e.comboId))&&h.getType&&"combo"!==h.getType()&&console.warn("'"+e.comboId+"' is not a id of a combo in the graph, the node will be added without combo."),a=o.addItem(t,e);var d=this.get("itemMap"),f=!1,p=!1;(s||[]).forEach((function(t){p||f||Qn(t,(function(t){if(t.id===e.id)return p=!0,!1;if(e.comboId===t.id&&!p){f=!0;var n=(0,b.clone)(e);n.itemType="node",t.children?t.children.push(n):t.children=[n],n.depth=t.depth+1}return f&&d[t.id].getType&&"combo"===d[t.id].getType()&&o.updateCombo(d[t.id],t.children),!0}))}))}else a=o.addItem(t,e);if("node"===t&&e.comboId||"combo"===t&&e.parentId)(h=this.findById(e.comboId||e.parentId))&&h.getType&&"combo"===h.getType()&&h.addChild(a);var m=this.get("combos");if(m&&m.length>0&&this.sortCombos(),this.autoPaint(),n&&this.get("enabledStack")){var g=(0,y.__assign)((0,y.__assign)({},a.getModel()),{itemType:t}),v={};switch(t){case"node":v.nodes=[g];break;case"edge":v.edges=[g];break;case"combo":v.combos=[g]}this.pushStack("add",{before:{},after:v})}return a}console.warn("This item exists already. Be sure the id %c"+e.id+"%c is unique.","font-size: 20px; color: red;","")},e.prototype.add=function(t,e,n,i){return void 0===n&&(n=!0),void 0===i&&(i=!0),this.addItem(t,e,n,i)},e.prototype.updateItem=function(t,e,n){var i=this;void 0===n&&(n=!0);var r,o=this.get("itemController");r=(0,b.isString)(t)?this.findById(t):t;var a=(0,b.clone)(r.getModel()),s="";r.getType&&(s=r.getType());var l=(0,y.__spreadArray)([],r.getStates());if("combo"===s&&(0,b.each)(l,(function(t){return i.setItemState(r,t,!1)})),o.updateItem(r,e),"combo"===s&&(0,b.each)(l,(function(t){return i.setItemState(r,t,!0)})),n&&this.get("enabledStack")){var u={nodes:[],edges:[],combos:[]},c={nodes:[],edges:[],combos:[]},h=(0,y.__assign)({id:a.id},e);switch(s){case"node":u.nodes.push(a),c.nodes.push(h);break;case"edge":u.edges.push(a),c.edges.push(h);break;case"combo":u.combos.push(a),c.combos.push(h)}"node"===s&&u.nodes.push(a),this.pushStack("update",{before:u,after:c})}},e.prototype.update=function(t,e,n){void 0===n&&(n=!0),this.updateItem(t,e,n)},e.prototype.setItemState=function(t,e,n){(0,b.isString)(t)&&(t=this.findById(t)),this.get("itemController").setItemState(t,e,n);var i=this.get("stateController");(0,b.isString)(n)?i.updateState(t,e+":"+n,!0):i.updateState(t,e,n)},e.prototype.priorityState=function(t,e){this.get("itemController").priorityState(t,e)},e.prototype.data=function(t){si(t),this.set("data",t)},e.prototype.render=function(){var t=this;this.set("comboSorted",!1);var e=this.get("data");if(this.get("enabledStack")&&this.clearStack(),!e)throw new Error("data must be defined first");var n=e.nodes,i=void 0===n?[]:n,r=e.edges,o=void 0===r?[]:r,a=e.combos,s=void 0===a?[]:a;if(this.clear(!0),this.emit("beforerender"),(0,b.each)(i,(function(e){t.add("node",e,!1,!1)})),s&&0!==s.length){var l=ni(s,i);this.set("comboTrees",l),t.addCombos(s)}(0,b.each)(o,(function(e){t.add("edge",e,!1,!1)}));var u=t.get("animate");(t.get("fitView")||t.get("fitCenter"))&&t.set("animate",!1);var c=t.get("layoutController");if(c){if(c.layout((function(){t.get("fitView")?t.fitView():t.get("fitCenter")&&t.fitCenter();t.autoPaint(),t.emit("afterrender"),(t.get("fitView")||t.get("fitCenter"))&&t.set("animate",u)})),this.destroyed)return}else t.get("fitView")&&t.fitView(),t.get("fitCenter")&&t.fitCenter(),t.emit("afterrender"),t.set("animate",u);this.get("groupByTypes")||(s&&0!==s.length?this.sortCombos():e.nodes&&e.edges&&e.nodes.length<e.edges.length?this.getNodes().forEach((function(t){t.toFront()})):this.getEdges().forEach((function(t){t.toBack()})));this.get("enabledStack")&&this.pushStack("render")},e.prototype.read=function(t){this.data(t),this.render()},e.prototype.diffItems=function(t,e,n){var i,r=this,o=this.get("itemMap");(0,b.each)(n,(function(n){if(i=o[n.id]){if(r.get("animate")&&"node"===t){var a=i.getContainer().getMatrix();a||(a=[1,0,0,0,1,0,0,0,1]),i.set("originAttrs",{x:a[6],y:a[7]})}r.updateItem(i,n,!1)}else i=r.addItem(t,n,!1);i&&e[t+"s"].push(i)}))},e.prototype.changeData=function(t,e){void 0===e&&(e=!0);var n=this;if(!si(t))return this;e&&this.get("enabledStack")&&this.pushStack("changedata",{before:n.save(),after:t}),this.set("comboSorted",!1),this.removeHulls(),this.getNodes().map((function(t){return n.clearItemStates(t)})),this.getEdges().map((function(t){return n.clearItemStates(t)}));var i=this.get("canvas"),r=i.get("localRefresh");i.set("localRefresh",!1),n.get("data")||(n.data(t),n.render());var o=this.get("itemMap"),a={nodes:[],edges:[]},s=t.combos;if(s){var l=ni(s,t.nodes);this.set("comboTrees",l)}else this.set("comboTrees",[]);this.diffItems("node",a,t.nodes),(0,b.each)(o,(function(t,e){o[e].getModel().depth=0,t.getType&&"edge"===t.getType()||(t.getType&&"combo"===t.getType()?(delete o[e],t.destroy()):a.nodes.indexOf(t)<0&&(delete o[e],n.remove(t,!1)))}));for(var u=this.getCombos(),c=u.length-1;c>=0;c--)u[c].destroyed&&u.splice(c,1);s&&(n.addCombos(s),this.get("groupByTypes")||this.sortCombos()),this.diffItems("edge",a,t.edges),(0,b.each)(o,(function(t,e){(!t.getType||"node"!==t.getType()&&"combo"!==t.getType())&&a.edges.indexOf(t)<0&&(delete o[e],n.remove(t,!1))})),this.set({nodes:a.nodes,edges:a.edges});var h=this.get("layoutController");return h&&(h.changeData(),n.get("animate")&&!h.getLayoutType()?n.positionsAnimate():n.autoPaint()),setTimeout((function(){i.set("localRefresh",r)}),16),this},e.prototype.addCombos=function(t){var e=this.get("comboTrees");this.get("itemController").addCombos(e,t)},e.prototype.createCombo=function(t,e){var n=this;this.set("comboSorted",!1);var i,r="";if(t){if((0,b.isString)(t))r=t,i={id:t};else{if(!(r=t.id))return void console.warn("Create combo failed. Please assign a unique string id for the adding combo.");i=t}var o=e.map((function(t){var e=n.findById(t),i=e.getModel(),o="";e.getType&&(o=e.getType());var a={id:e.getID(),itemType:o};return"combo"===o?(a.parentId=r,i.parentId=r):"node"===o&&(a.comboId=r,i.comboId=r),a}));i.children=o,this.addItem("combo",i,!1),this.set("comboSorted",!1);var a=this.get("comboTrees");(a||[]).forEach((function(t){Qn(t,(function(t){return t.id!==r||(t.itemType="combo",t.children=o,!1)}))})),a&&this.sortCombos()}},e.prototype.uncombo=function(t){var e=this,n=t;if((0,b.isString)(t)&&(n=this.findById(t)),!n||n.getType&&"combo"!==n.getType())console.warn("The item is not a combo!");else{var i=n.getModel().parentId,r=this.get("comboTrees");r||(r=[]);var o,a=this.get("itemMap"),s=n.get("id"),l=[],u=this.get("combos"),c=this.findById(i);if(r.forEach((function(t){o||Qn(t,(function(t){if(t.id===s){o=t,n.getEdges().forEach((function(t){e.removeItem(t,!1)}));var r=u.indexOf(n);u.splice(r,1),delete a[s],n.destroy(),e.emit("afterremoveitem",{item:n})}return!i||!o||t.id!==i||(c.removeCombo(n),-1!==(r=(l=t.children).indexOf(o))&&l.splice(r,1),o.children.forEach((function(t){var n=e.findById(t.id),r=n.getModel();n.getType&&"combo"===n.getType()?(t.parentId=i,delete t.comboId,r.parentId=i,delete r.comboId):n.getType&&"node"===n.getType()&&(t.comboId=i,r.comboId=i),c.addChild(n),l.push(t)})),!1)}))})),!i&&o){var h=r.indexOf(o);r.splice(h,1),o.children.forEach((function(t){t.parentId=void 0;var n=e.findById(t.id).getModel();delete n.parentId,delete n.comboId,"node"!==t.itemType&&r.push(t)}))}}},e.prototype.updateCombos=function(){var t=this,e=this,n=this.get("comboTrees"),i=e.get("itemController"),r=e.get("itemMap");(n||[]).forEach((function(e){Qn(e,(function(e){if(!e)return!0;var n=r[e.id];if(n&&n.getType&&"combo"===n.getType()){var o=(0,y.__spreadArray)([],n.getStates());(0,b.each)(o,(function(e){return t.setItemState(n,e,!1)})),i.updateCombo(n,e.children),(0,b.each)(o,(function(e){return t.setItemState(n,e,!0)}))}return!0}))})),e.sortCombos()},e.prototype.updateCombo=function(t){var e,n=this,i=t;if((0,b.isString)(t)&&(i=this.findById(t)),!i||i.getType&&"combo"!==i.getType())console.warn("The item to be updated is not a combo!");else{e=i.get("id");var r=this.get("comboTrees"),o=this.get("itemController"),a=this.get("itemMap");(r||[]).forEach((function(t){Qn(t,(function(t){if(!t)return!0;var i=a[t.id];if(e===t.id&&i&&i.getType&&"combo"===i.getType()){var r=(0,y.__spreadArray)([],i.getStates());(0,b.each)(r,(function(t){i.getStateStyle(t)&&n.setItemState(i,t,!1)})),o.updateCombo(i,t.children),(0,b.each)(r,(function(t){i.getStateStyle(t)&&n.setItemState(i,t,!0)})),e&&(e=t.parentId)}return!0}))}))}},e.prototype.updateComboTree=function(t,e,n){void 0===n&&(n=!0);var i;this.set("comboSorted",!1);var r,o=(i=(0,b.isString)(t)?this.findById(t):t).getModel(),a=o.comboId||o.parentId,s="";if(i.getType&&(s=i.getType()),e&&"combo"===s){var l,u=this.get("comboTrees"),c=!0;if((u||[]).forEach((function(t){l||Jn(t,(function(t){if(!l)return t.id===i.getID()&&(l=t),!0}))})),Jn(l,(function(t){return t.id!==e||(c=!1,!1)})),!c)return void console.warn("Failed to update the combo tree! The parentId points to a descendant of the combo!")}if(n&&this.get("enabledStack")){var h={},d={};"combo"===s?(h.combos=[{id:o.id,parentId:o.parentId}],d.combos=[{id:o.id,parentId:e}]):"node"===s&&(h.nodes=[{id:o.id,parentId:o.comboId}],d.nodes=[{id:o.id,parentId:e}]),this.pushStack("updateComboTree",{before:h,after:d})}if(o.parentId||o.comboId){var f=this.findById(o.parentId||o.comboId);f&&f.removeChild(i)}("combo"===s?o.parentId=e:"node"===s&&(o.comboId=e),e)&&((r=this.findById(e))&&r.addChild(i));a&&((r=this.findById(a))&&r.removeChild(i));var p=ii(this.get("comboTrees"),o.id,e);this.set("comboTrees",p),this.updateCombos()},e.prototype.save=function(){var t=[],e=[],n=[];return(0,b.each)(this.get("nodes"),(function(e){t.push(e.getModel())})),(0,b.each)(this.get("edges"),(function(t){e.push(t.getModel())})),(0,b.each)(this.get("combos"),(function(t){n.push(t.getModel())})),{nodes:t,edges:e,combos:n}},e.prototype.changeSize=function(t,e){return this.get("viewController").changeSize(t,e),this},e.prototype.refresh=function(){var t=this;if(t.emit("beforegraphrefresh"),t.get("animate"))t.positionsAnimate();else{var e=t.get("nodes"),n=t.get("edges"),i=t.get("edges");(0,b.each)(e,(function(t){t.refresh()})),(0,b.each)(n,(function(t){t.refresh()})),(0,b.each)(i,(function(t){t.refresh()}))}t.emit("aftergraphrefresh"),t.autoPaint()},e.prototype.getNodes=function(){return this.get("nodes")},e.prototype.getEdges=function(){return this.get("edges")},e.prototype.getCombos=function(){return this.get("combos")},e.prototype.getComboChildren=function(t){if((0,b.isString)(t)&&(t=this.findById(t)),t&&(!t.getType||"combo"===t.getType()))return t.getChildren();console.warn("The combo does not exist!")},e.prototype.positionsAnimate=function(){var t=this;t.emit("beforeanimate");var e=t.get("animateCfg"),n=e.onFrame,i=t.getNodes(),r=i.map((function(t){var e=t.getModel();return{id:e.id,x:e.x,y:e.y}}));t.isAnimating()&&t.stopAnimate(),t.get("canvas").animate((function(e){(0,b.each)(r,(function(i){var r=t.findById(i.id);if(r&&!r.destroyed){var o=r.get("originAttrs"),a=r.get("model");if(!o){var s=r.getContainer().getMatrix();s||(s=[1,0,0,0,1,0,0,0,1]),o={x:s[6],y:s[7]},r.set("originAttrs",o)}if(n){var l=n(r,e,i,o);r.set("model",Object.assign(a,l))}else a.x=o.x+(i.x-o.x)*e,a.y=o.y+(i.y-o.y)*e}})),t.refreshPositions()}),{duration:e.duration,easing:e.easing,callback:function(){(0,b.each)(i,(function(t){t.set("originAttrs",null)})),e.callback&&e.callback(),t.emit("afteranimate"),t.animating=!1}})},e.prototype.refreshPositions=function(){var t=this;t.emit("beforegraphrefreshposition");var e,n=t.get("nodes"),i=t.get("edges"),r=t.get("vedges"),o=t.get("combos"),a={};(0,b.each)(n,(function(t){e=t.getModel();var n=t.get("originAttrs");if(!n||e.x!==n.x||e.y!==n.y){var i=t.updatePosition({x:e.x,y:e.y});a[e.id]=i,e.comboId&&(a[e.comboId]=a[e.comboId]||i)}})),o&&0!==o.length&&t.updateCombos(),(0,b.each)(i,(function(t){var e=t.getSource().getModel(),n=t.getTarget();if(!(0,b.isPlainObject)(n)){var i=n.getModel();(a[e.id]||a[i.id]||t.getModel().isComboEdge)&&t.refresh()}})),(0,b.each)(r,(function(t){t.refresh()})),t.emit("aftergraphrefreshposition"),t.autoPaint()},e.prototype.stopAnimate=function(){this.get("canvas").stopAnimate()},e.prototype.isAnimating=function(){return this.animating},e.prototype.getZoom=function(){var t=this.get("group").getMatrix();return t?t[0]:1},e.prototype.getCurrentMode=function(){return this.get("modeController").getMode()},e.prototype.setMode=function(t){return this.get("modeController").setMode(t),this},e.prototype.clear=function(t){var e;return void 0===t&&(t=!1),null===(e=this.get("canvas"))||void 0===e||e.clear(),this.initGroups(),this.set({itemMap:{},nodes:[],edges:[],groups:[],combos:[],comboTrees:[]}),t||this.emit("afterrender"),this},e.prototype.updateLayout=function(t,e,n){var i=this,r=this.get("layoutController");if((0,b.isString)(t)&&(t={type:t}),e){var o=n;o||(o="begin"===e?{x:0,y:0}:{x:this.getWidth()/2,y:this.getHeight()/2}),o=this.getPointByCanvas(o.x,o.y);var a=["force","gForce","fruchterman"];a.includes(t.type)||!t.type&&a.includes(null==r?void 0:r.layoutType)?t.center=[o.x,o.y]:this.once("afterlayout",(function(t){var n=i.getGroup().getMatrix()||[1,0,0,0,1,0,0,0,1];o.x=o.x*n[0]+n[6],o.y=o.y*n[0]+n[7];var r=i.getGroup().getCanvasBBox(),a=r.minX,s=r.maxX,l=r.minY,u={x:(a+s)/2,y:(l+r.maxY)/2};"begin"===e&&(u.x=a,u.y=l),i.translate(o.x-u.x,o.y-u.y)}))}var s=this.get("layout"),l={};Object.assign(l,s,t),this.set("layout",l),r.isLayoutTypeSame(l)&&l.gpuEnabled===s.gpuEnabled?r.updateLayoutCfg(l):r.changeLayout(l)},e.prototype.destroyLayout=function(){this.get("layoutController").destroyLayout()},e.prototype.layout=function(){var t=this.get("layoutController"),e=this.get("layout");e&&t&&(e.workerEnabled?t.layout():t.layoutMethod?t.relayout(!0):t.layout())},e.prototype.collapseCombo=function(t){var e=this;if((0,b.isString)(t)&&(t=this.findById(t)),t){this.emit("beforecollapseexpandcombo",{action:"expand",item:t});var n=t.getModel();this.get("itemController").collapseCombo(t),n.collapsed=!0;var i=this.getEdges().concat(this.get("vedges")),r=[],o=[],a=this.get("comboTrees"),s=!1;(a||[]).forEach((function(t){s||Jn(t,(function(t){if(s&&t.depth<=n.depth)return!1;if(n.id===t.id&&(s=!0),s){var i=e.findById(t.id);i&&i.getType&&"combo"===i.getType()&&(r=r.concat(i.getNodes()),o=o.concat(i.getCombos()))}return!0}))}));var l={},u=[];i.forEach((function(t){if(!t.isVisible()||t.getModel().isVEdge){var i=t.getSource(),a=t.getTarget();if((r.includes(i)||o.includes(i))&&!r.includes(a)&&!o.includes(a)||i.getModel().id===n.id){if((d=t.getModel()).isVEdge)return void e.removeItem(t,!1);for(var s=a.getModel();!a.isVisible();){if(!(a=e.findById(s.parentId||s.comboId))||!s.parentId&&!s.comboId)return;s=a.getModel()}var c=s.id;if(l[n.id+"-"+c])return void(l[n.id+"-"+c]+=d.size||1);var h=e.addItem("vedge",{source:n.id,target:c,isVEdge:!0},!1);l[n.id+"-"+c]=d.size||1,u.push(h)}else if(!r.includes(i)&&!o.includes(i)&&(r.includes(a)||o.includes(a))||a.getModel().id===n.id){var d;if((d=t.getModel()).isVEdge)return void e.removeItem(t,!1);for(var f=i.getModel();!i.isVisible();){if(!(i=e.findById(f.parentId||f.comboId))||!f.parentId&&!f.comboId)return;f=i.getModel()}var p=f.id;if(l[p+"-"+n.id])return void(l[p+"-"+n.id]+=d.size||1);h=e.addItem("vedge",{target:n.id,source:p,isVEdge:!0},!1);l[p+"-"+n.id]=d.size||1,u.push(h)}}})),u.forEach((function(t){var n=t.getModel();e.updateItem(t,{size:l[n.source+"-"+n.target]},!1)})),this.emit("aftercollapseexpandcombo",{action:"collapse",item:t})}else console.warn("The combo to be collapsed does not exist!")},e.prototype.expandCombo=function(t){var e=this;if((0,b.isString)(t)&&(t=this.findById(t)),!t||t.getType&&"combo"!==t.getType())console.warn("The combo to be collapsed does not exist!");else{this.emit("beforecollapseexpandcombo",{action:"expand",item:t});var n=t.getModel();this.get("itemController").expandCombo(t),n.collapsed=!1;var i=this.getEdges().concat(this.get("vedges")),r=[],o=[],a=this.get("comboTrees"),s=!1;(a||[]).forEach((function(t){s||Jn(t,(function(t){if(s&&t.depth<=n.depth)return!1;if(n.id===t.id&&(s=!0),s){var i=e.findById(t.id);i&&i.getType&&"combo"===i.getType()&&(r=r.concat(i.getNodes()),o=o.concat(i.getCombos()))}return!0}))}));var l={},u={};i.forEach((function(t){if(!t.isVisible()||t.getModel().isVEdge){var i=t.getSource(),a=t.getTarget(),s=i.get("id"),c=a.get("id");if((r.includes(i)||o.includes(i))&&!r.includes(a)&&!o.includes(a)||s===n.id){if(t.getModel().isVEdge)return void e.removeItem(t,!1);for(var h=a.getModel();!a.isVisible();){if(!(a=e.findById(h.comboId||h.parentId))||!h.parentId&&!h.comboId)return;h=a.getModel()}c=h.id;for(var d=i.getModel();!i.isVisible();){if(!(i=e.findById(d.comboId||d.parentId))||!d.parentId&&!d.comboId)return;if(d.comboId===n.id||d.parentId===n.id)break;d=i.getModel()}if(s=d.id,c){if(l[p=s+"-"+c])return l[p]+=t.getModel().size||1,void e.updateItem(u[p],{size:l[p]},!1);var f=e.addItem("vedge",{source:s,target:c,isVEdge:!0},!1);l[p]=t.getModel().size||1,u[p]=f}}else if(!r.includes(i)&&!o.includes(i)&&(r.includes(a)||o.includes(a))||c===n.id){if(t.getModel().isVEdge)return void e.removeItem(t,!1);for(d=i.getModel();!i.isVisible();){if(!(i=e.findById(d.comboId||d.parentId))||!d.parentId&&!d.comboId)return;d=i.getModel()}s=d.id;for(h=a.getModel();!a.isVisible();){if(!(a=e.findById(h.comboId||h.parentId))||!h.parentId&&!h.comboId)return;if(h.comboId===n.id||h.parentId===n.id)break;h=a.getModel()}if(c=h.id,s){var p;if(l[p=s+"-"+c])return l[p]+=t.getModel().size||1,void e.updateItem(u[p],{size:l[p]},!1);f=e.addItem("vedge",{target:c,source:s,isVEdge:!0},!1);l[p]=t.getModel().size||1,u[p]=f}}else(r.includes(i)||o.includes(i))&&(r.includes(a)||o.includes(a))&&i.isVisible()&&a.isVisible()&&t.show()}})),this.emit("aftercollapseexpandcombo",{action:"expand",item:t})}},e.prototype.collapseExpandCombo=function(t){if((0,b.isString)(t)&&(t=this.findById(t)),t&&(!t.getType||"combo"===t.getType())){for(var e=t.getModel(),n=this.findById(e.parentId);n;){var i=n.getModel();if(i.collapsed)return console.warn("Fail to expand the combo since it's ancestor combo is collapsed."),void(n=void 0);n=this.findById(i.parentId)}e.collapsed?this.expandCombo(t):this.collapseCombo(t),this.updateCombo(t)}},e.prototype.sortCombos=function(){var t=this;if(!this.get("comboSorted")){this.set("comboSorted",!0);var e=[],n={};(this.get("comboTrees")||[]).forEach((function(t){Jn(t,(function(t){return e[t.depth]?e[t.depth].push(t.id):e[t.depth]=[t.id],n[t.id]=t.depth,!0}))})),(this.getEdges().concat(this.get("vedges"))||[]).forEach((function(t){var i=t.getModel(),r=n[i.source]||0,o=n[i.target]||0,a=Math.max(r,o);e[a]?e[a].push(i.id):e[a]=[i.id]})),e.forEach((function(e){if(e&&e.length)for(var n=e.length-1;n>=0;n--){var i=t.findById(e[n]);i&&i.toFront()}}))}},e.prototype.getNeighbors=function(t,e){var n=t;return(0,b.isString)(t)&&(n=this.findById(t)),n.getNeighbors(e)},e.prototype.getNodeDegree=function(t,e,n){void 0===e&&(e=void 0),void 0===n&&(n=!1);var i=t;(0,b.isString)(t)&&(i=this.findById(t));var r=this.get("degrees");r&&!n||(r=St(this.save()),this.set("degrees",r));var o=r[i.getID()],a=0;if(!o)return 0;switch(e){case"in":a=o.inDegree;break;case"out":a=o.outDegree;break;case"all":a=o;break;default:a=o.degree}return a},e.prototype.getUndoStack=function(){return this.undoStack},e.prototype.getRedoStack=function(){return this.redoStack},e.prototype.getStackData=function(){return this.get("enabledStack")?{undoStack:this.undoStack.toArray(),redoStack:this.redoStack.toArray()}:null},e.prototype.clearStack=function(){this.get("enabledStack")&&(this.undoStack.clear(),this.redoStack.clear())},e.prototype.pushStack=function(t,e,n){if(void 0===t&&(t="update"),void 0===n&&(n="undo"),this.get("enabledStack")){var i=e?(0,b.clone)(e):{before:{},after:(0,b.clone)(this.save())};"redo"===n?this.redoStack.push({action:t,data:i}):this.undoStack.push({action:t,data:i}),this.emit("stackchange",{undoStack:this.undoStack,redoStack:this.redoStack})}else console.warn(" undo & redo  Graph  enabledStack: true !")},e.prototype.getAdjMatrix=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=this.get("directed"));var n=this.get("adjMatrix");return n&&t||(n=ht(this.save(),e),this.set("adjMatrix",n)),n},e.prototype.getShortestPathMatrix=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=this.get("directed"));var n=this.get("adjMatrix"),i=this.get("shortestPathMatrix");return n&&t||(n=ht(this.save(),e),this.set("adjMatrix",n)),i&&t||(i=jt(this.save(),e),this.set("shortestPathMatrix",i)),i},e.prototype.on=function(e,n,i){return t.prototype.on.call(this,e,n,i)},e.prototype.destroy=function(){this.clear(),this.clearStack(),this.get("itemController").destroy(),this.get("modeController").destroy(),this.get("viewController").destroy(),this.get("stateController").destroy(),this.get("canvas").destroy(),this.cfg=null,this.destroyed=!0,this.redoStack=null,this.undoStack=null},e.prototype.createHull=function(t){if(t.members&&!(t.members.length<1)){var e=this.get("hullGroup"),n=this.get("hullMap");if(n||(n={},this.set("hullMap",n)),e&&!e.get("destroyed")||((e=this.get("group").addGroup({id:"hullGroup"})).toBack(),this.set("hullGroup",e)),n[t.id])return console.warn("Existed hull id."),n[t.id];var i=e.addGroup({id:t.id+"-container"}),r=new Vs(this,(0,y.__assign)((0,y.__assign)({},t),{group:i}));return n[r.id]=r,r}console.warn("Create hull failed! The members is empty.")},e.prototype.getHulls=function(){return this.get("hullMap")},e.prototype.getHullById=function(t){return this.get("hullMap")[t]},e.prototype.removeHull=function(t){var e;e=(0,b.isString)(t)?this.getHullById(t):t,delete this.get("hullMap")[e.id],e.destroy()},e.prototype.removeHulls=function(){var t=this.getHulls();t&&Object.keys(t).length&&(Object.keys(t).forEach((function(e){t[e].destroy()})),this.set("hullMap",{}))},e}(S);const Ks=qs;function $s(t){return $s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$s(t)}var Zs=ct,Js="-label",Qs=["startArrow","endArrow"],tl={lineWidth:1,stroke:void 0,fill:void 0,lineAppendWidth:1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,x:0,y:0,r:10,width:20,height:20,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},el={edge:{lineWidth:1,stroke:"#000",lineDash:void 0,startArrow:!1,endArrow:!1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},node:tl,combo:tl},nl="-label-bg",il={options:{},itemType:"",type:"",getCustomConfig:function(t){return{}},getOptions:function(t,e){return"move"===e||"bbox"===e?{}:(0,b.deepMix)({labelCfg:{style:{fontFamily:"undefined"!=typeof window&&window.getComputedStyle&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"}},descriptionCfg:{style:{fontFamily:"undefined"!=typeof window&&window.getComputedStyle&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"}}},this.options,this.getCustomConfig(t)||{},t)},draw:function(t,e){var n=this.drawShape(t,e);(n.set("className",this.itemType+"-shape"),t.label)&&this.drawLabel(t,e).set("className",this.itemType+Js);return n},afterDraw:function(t,e,n){},drawShape:function(t,e){return null},drawLabel:function(t,e){var n=this.getOptions(t).labelCfg||{},i=this.getLabelStyle(t,n,e),r=i.rotate;delete i.rotate;var o=e.addShape("text",{attrs:i,draggable:!0,className:"text-shape",name:"text-shape"});if(!isNaN(r)&&""!==r){var a=o.getBBox(),s=[1,0,0,0,1,0,0,0,1];if(i.rotateCenter)switch(i.rotateCenter){default:s=Zs(s,[["t",-a.width/2,-a.height/2],["r",r],["t",a.width/2,a.height/2]]);break;case"lefttop":s=Zs(s,[["t",-i.x,-i.y],["r",r],["t",i.x,i.y]]);break;case"leftcenter":s=Zs(s,[["t",-i.x,-i.y-a.height/2],["r",r],["t",i.x,i.y+a.height/2]])}else s=Zs(s,[["t",-i.x,-i.y-a.height/2],["r",r],["t",i.x,i.y+a.height/2]]);o.setMatrix(s)}if(i.background){var l=this.drawLabelBg(t,e,o),u=this.itemType+nl;l.set("classname",u),o.toFront()}return o},drawLabelBg:function(t,e,n){var i=this.options.labelCfg,r=(0,b.mix)({},i,t.labelCfg),o=this.getLabelBgStyleByPosition(n,t,r,e);return e.addShape("rect",{name:"text-bg-shape",attrs:o})},getLabelStyleByPosition:function(t,e,n){return{text:t.label}},getLabelBgStyleByPosition:function(t,e,n,i){return{}},getLabelStyle:function(t,e,n){var i=this.getLabelStyleByPosition(t,e,n),r=this.itemType+"Label",o=Bn[r]?Bn[r].style:null;return(0,y.__assign)((0,y.__assign)((0,y.__assign)({},o),i),e.style)},getShapeStyle:function(t){return t.style},update:function(t,e,n){this.updateShapeStyle(t,e,n),this.updateLabel(t,e,n)},updateShapeStyle:function(t,e,n){var i=e.getContainer(),r=e.getKeyShape(),o=(0,b.mix)({},r.attr(),t.style),a=function(t){var e,n=o[t];if((0,b.isPlainObject)(n)){var a=i.find((function(e){return e.get("name")===t}));a&&a.attr(n)}else r.attr(((e={})[t]=n,e))};for(var s in o)a(s)},updateLabel:function(t,e,n){var i=e.getContainer(),r=this.getOptions({},n).labelCfg,o=this.itemType+Js,a=i.find((function(t){return t.get("className")===o})),s=this.itemType+nl,l=i.find((function(t){return t.get("classname")===s}));if(t.label||""===t.label)if(a){var u={};e.getModel&&(u=e.getModel().labelCfg);var c=(0,b.deepMix)({},r,u,t.labelCfg),h=this.getLabelStyleByPosition(t,c,i),d=t.labelCfg?t.labelCfg.style:void 0,f=c.style&&c.style.background,p=(0,y.__assign)((0,y.__assign)((0,y.__assign)({},a.attr()),h),d),m=p.rotate;if(delete p.rotate,isNaN(m)||""===m)a.resetMatrix(),a.attr(p);else{var g=[1,0,0,0,1,0,0,0,1];g=Zs(g,[["t",-p.x,-p.y],["r",m],["t",p.x,p.y]]),a.resetMatrix(),a.attr((0,y.__assign)((0,y.__assign)({},p),{matrix:g}))}if(l)if(p.background){var v=this.getLabelBgStyleByPosition(a,t,c,i),_=(0,y.__assign)((0,y.__assign)({},v),f);if(l.resetMatrix(),!isNaN(m)&&""!==m){var w=[1,0,0,0,1,0,0,0,1];w=Zs(w,[["t",-_.x,-_.y],["r",m],["t",_.x,_.y]]),_.matrix=w}l.attr(_)}else i.removeChild(l);else p.background&&((l=this.drawLabelBg(t,i,a)).set("classname",s),a.toFront())}else{this.drawLabel(t,i).set("className",o)}},afterUpdate:function(t,e){},setState:function(t,e,n){var i,r,o=n.get("keyShape");if(o&&!o.destroyed){var a=n.getType(),s=(0,b.isBoolean)(e)?t:t+":"+e,l=this.getStateStyle(s,n),u=n.getStateStyle(s);if(u||l){var c=(0,b.mix)({},u||l),h=n.getContainer(),d={x:1,y:1,cx:1,cy:1};if("combo"===a&&(d.r=1,d.width=1,d.height=1),e){var f=function(t){var e,n=c[t];if((0,b.isPlainObject)(n)&&!Qs.includes(t)){var i=h.find((function(e){return e.get("name")===t}));i&&i.attr(n)}else o.attr(((e={})[t]=n,e))};for(var p in c)f(p)}else{var m=ai(n.getCurrentStatesStyle()),g=n.getModel(),v=(0,b.mix)({},g.style,ai(n.getOriginStyle())),y=o.get("name"),_=o.attr(),w={};Object.keys(_).forEach((function(t){if("img"!==t){var e=_[t];e&&"object"===$s(e)?w[t]=(0,b.clone)(e):w[t]=e}}));var x={},M=function(t){var e=c[t];if((0,b.isPlainObject)(e)&&!Qs.includes(t)){var n=h.find((function(e){return e.get("name")===t}));if(n){var i=ai(n.attr());(0,b.each)(e,(function(e,r){if(t===y&&w[r]&&!d[r]){delete w[r];var s=v[t][r]||el[a][r];o.attr(r,s)}else if(i[r]||0===i[r]){delete i[r];var l=v[t][r]||el[a][r];n.attr(r,l)}})),x[t]=i}}else if(w[t]&&!d[t]){delete w[t];var r=v[t]||(v[y]?v[y][t]:void 0)||el[a][t];o.attr(t,r)}};for(var E in c)M(E);for(var p in y?x[y]=w:(0,b.mix)(x,w),m)if(!d[p]){var S=m[p];(0,b.isPlainObject)(S)&&!Qs.includes(p)||(y?((0,b.mix)(v[y],((r={})[p]=S,r)),delete v[p]):(0,b.mix)(v,((i={})[p]=S,i)),delete m[p])}var k={};(0,b.deepMix)(k,v,x,m);var C=!1,T=function(t){var e,n,i=k[t];if((0,b.isPlainObject)(i)&&!Qs.includes(t)){var r=h.find((function(e){return e.get("name")===t}));r&&("text"===r.get("type")&&(delete i.x,delete i.y,delete i.matrix),t===y&&("combo"===a&&(delete i.r,delete i.width,delete i.height),C=!0),r.attr(i))}else if(!C){var s=i||el[a][t];"combo"===a?y||o.attr(((e={})[t]=s,e)):o.attr(((n={})[t]=s,n))}};for(var D in k)T(D)}}}},getStateStyle:function(t,e){var n=e.getModel(),i=e.getType(),r=this.getOptions(n),o=r.stateStyles,a=r.style,s=void 0===a?{}:a,l=n.stateStyles?n.stateStyles[t]:o&&o[t];return"combo"===i?(0,b.clone)(l):(0,b.mix)({},s,l)},getControlPoints:function(t){return t.controlPoints},getAnchorPoints:function(t){var e,n;return(null==t?void 0:t.anchorPoints)||(null===(e=this.getCustomConfig(t))||void 0===e?void 0:e.anchorPoints)||(null===(n=this.options)||void 0===n?void 0:n.anchorPoints)}},rl={itemType:"node",shapeType:"single-node",labelPosition:"center",offset:Bn.nodeLabel.offset,getSize:function(t){var e=t.size||this.getOptions({}).size||Bn.defaultNode.size;return(0,b.isArray)(e)&&1===e.length&&(e=[e[0],e[0]]),(0,b.isArray)(e)||(e=[e,e]),e},getLabelStyleByPosition:function(t,e){var n=e.position||this.labelPosition;if("center"===n)return{x:0,y:0,text:t.label};var i=e.offset;(0,b.isNil)(i)&&(i=this.offset);var r,o=this.getSize(t),a=o[0],s=o[1];switch(n){case"top":r={x:0,y:0-s/2-i,textBaseline:"bottom"};break;case"bottom":r={x:0,y:s/2+i,textBaseline:"top"};break;case"left":r={x:0-a/2-i,y:0,textAlign:"right"};break;default:r={x:a/2+i,y:0,textAlign:"left"}}return r.text=t.label,r},getLabelBgStyleByPosition:function(t,e,n,i){if(!t)return{};var r=t.getBBox(),o=n.style&&n.style.background;if(!o)return{};var a,s=La(o.padding),l=r.width+s[1]+s[3],u=r.height+s[0]+s[2],c=n.offset;return(0,b.isNil)(c)&&(c=this.offset),a={x:r.minX-s[3],y:r.minY-s[0]},a=(0,y.__assign)((0,y.__assign)((0,y.__assign)({},a),o),{width:l,height:u})},drawShape:function(t,e){var n=this.shapeType,i=this.getShapeStyle(t);return e.addShape(n,{attrs:i,draggable:!0,name:"node-shape"})},updateLinkPoints:function(t,e){var n,i=this.getOptions(t).linkPoints,r=e.find((function(t){return"link-point-left"===t.get("className")})),o=e.find((function(t){return"link-point-right"===t.get("className")})),a=e.find((function(t){return"link-point-top"===t.get("className")})),s=e.find((function(t){return"link-point-bottom"===t.get("className")}));r&&(n=r.attr()),o&&!n&&(n=o.attr()),a&&!n&&(n=a.attr()),s&&!n&&(n=s.attr()),n||(n=i);var l=(0,b.mix)({},n,t.linkPoints),u=l.fill,c=l.stroke,h=l.lineWidth,d=l.size/2;d||(d=l.r);var f=t.linkPoints?t.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},p=f.left,m=f.right,g=f.top,v=f.bottom,_=this.getSize(t),w=_[0],x=_[1],M={r:d,fill:u,stroke:c,lineWidth:h};r?p||void 0===p?r.attr((0,y.__assign)((0,y.__assign)({},M),{x:-w/2,y:0})):r.remove():p&&e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},M),{x:-w/2,y:0}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),o?(m||void 0===m||o.remove(),o.attr((0,y.__assign)((0,y.__assign)({},M),{x:w/2,y:0}))):m&&e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},M),{x:w/2,y:0}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),a?(g||void 0===g||a.remove(),a.attr((0,y.__assign)((0,y.__assign)({},M),{x:0,y:-x/2}))):g&&e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},M),{x:0,y:-x/2}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),s?v||void 0===v?s.attr((0,y.__assign)((0,y.__assign)({},M),{x:0,y:x/2})):s.remove():v&&e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},M),{x:0,y:x/2}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},updateShape:function(t,e,n,i){e.get("keyShape").attr((0,y.__assign)({},n)),this.updateLabel(t,e),i&&this.updateIcon(t,e)},updateIcon:function(t,e){var n=this,i=e.getContainer(),r=this.getOptions(t).icon,o=(t.icon?t.icon:{show:void 0}).show,a=i.find((function(t){return t.get("className")===n.type+"-icon"}));if(a)if(o||void 0===o){var s=(0,b.mix)({},a.attr(),r),l=s.width,u=void 0===l?20:l,c=s.height,h=void 0===c?20:c;a.attr((0,y.__assign)((0,y.__assign)({},s),{x:-u/2,y:-h/2}))}else a.remove();else if(o){u=r.width,h=r.height;i.addShape("image",{attrs:(0,y.__assign)((0,y.__assign)({},r),{x:-u/2,y:-h/2}),className:this.type+"-icon",name:this.type+"-icon"});var d=i.find((function(t){return"node-label"===t.get("className")}));d&&d.toFront()}}},ol=(0,y.__assign)((0,y.__assign)({},il),rl);Ka.registerNode("single-node",ol);var al="edge-shape";var sl={itemType:"edge",labelPosition:"center",refX:0,refY:0,labelAutoRotate:!1,options:{size:Bn.defaultEdge.size,style:{x:0,y:0,stroke:Bn.defaultEdge.style.stroke,lineAppendWidth:Bn.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:Bn.edgeLabel.style.fill,fontSize:Bn.edgeLabel.style.fontSize}},stateStyles:(0,y.__assign)({},Bn.edgeStateStyles)},getPath:function(t){var e=[];return(0,b.each)(t,(function(t,n){0===n?e.push(["M",t.x,t.y]):e.push(["L",t.x,t.y])})),e},getShapeStyle:function(t){var e=this.options.style,n={stroke:t.color},i=(0,b.mix)({},e,n,t.style),r=t.size||Bn.defaultEdge.size,o=(t=this.getPathPoints(t)).startPoint,a=t.endPoint,s=this.getControlPoints(t),l=[o];s&&(l=l.concat(s)),l.push(a);var u=this.getPath(l);return(0,b.mix)({},Bn.defaultEdge.style,{stroke:Bn.defaultEdge.color,lineWidth:r,path:u},i)},updateShapeStyle:function(t,e,n){var i,r=e.getContainer(),o={stroke:t.color},a=(null===(i=e.getKeyShape)||void 0===i?void 0:i.call(e))||r.find((function(t){return"edge-shape"===t.get("className")})),s=t.size,l=(t=this.getPathPoints(t)).startPoint,u=t.endPoint,c=this.getControlPoints(t),h=[l];c&&(h=h.concat(c)),h.push(u);var d=a.attr(),f=(0,b.mix)({},o,d,t.style),p=t.sourceNode,m=t.targetNode,g={radius:f.radius};c||(g={source:p,target:m,offset:f.offset,radius:f.radius});var v=this.getPath(h,g),y={};"move"===n?y={path:v}:(d.endArrow&&!1===f.endArrow&&(t.style.endArrow={path:""}),d.startArrow&&!1===f.startArrow&&(t.style.startArrow={path:""}),y=(0,b.mix)(o,d,{lineWidth:s,path:v},t.style)),a&&a.attr(y)},getLabelStyleByPosition:function(t,e,n){var i,r=e.position||this.labelPosition,o={},a=n&&n.find((function(t){return t.get("className")===al}));i="start"===r?0:"end"===r?1:.5;var s,l=e.refX||this.refX,u=e.refY||this.refY;if(t.startPoint.x===t.endPoint.x&&t.startPoint.y===t.endPoint.y)return o.x=t.startPoint.x+l,o.y=t.startPoint.y+u,o.text=t.label,o;s=(0,b.isNil)(e.autoRotate)?this.labelAutoRotate:e.autoRotate;var c=Kn(a,i,l,u,s);return o.x=c.x,o.y=c.y,o.rotate=c.rotate,o.textAlign=this._getTextAlign(r,c.angle),o.text=t.label,o},getLabelBgStyleByPosition:function(t,e,n,i){if(!t)return{};var r=t.getBBox(),o=n.style&&n.style.background;if(!o)return{};var a,s=o.padding,l=r.width+s[1]+s[3],u=r.height+s[0]+s[2],c=n.position||this.labelPosition,h=(0,y.__assign)((0,y.__assign)({},o),{width:l,height:u,x:r.minX-s[2],y:r.minY-s[0],rotate:0});a=(0,b.isNil)(n.autoRotate)?this.labelAutoRotate:n.autoRotate;var d,f=i&&i.find((function(t){return t.get("className")===al}));d="start"===c?0:"end"===c?1:.5;var p=n.refX||this.refX,m=n.refY||this.refY;if(e.startPoint.x===e.endPoint.x&&e.startPoint.y===e.endPoint.y)return h.x=e.startPoint.x+p-l/2,h.y=e.startPoint.y+m-u/2,h;var g=p-l/2;"start"===n.position?g=p-s[2]:"end"===n.position&&(g=p-l);var v=Kn(f,d,g,m+u/2,a);return a&&(h.x=v.x,h.y=v.y),h.rotate=v.rotate,h},_getTextAlign:function(t,e){var n="center";return e?(e%=2*Math.PI,"center"!==t&&(n=e>=0&&e<=Math.PI/2||e>=1.5*Math.PI&&e<2*Math.PI?t:function(t){var e=t;return"start"===t?e="end":"end"===t&&(e="start"),e}(t)),n):t},getControlPoints:function(t){return t.controlPoints},getPathPoints:function(t){return t},drawShape:function(t,e){var n=this.getShapeStyle(t);return e.addShape("path",{className:al,name:al,attrs:n})},drawLabel:function(t,e){var n,i=this.options.labelCfg;n="undefined"!=typeof window&&void 0!==window.getComputedStyle&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif";var r=(0,b.deepMix)({fontFamily:n},i,t.labelCfg),o=this.getLabelStyle(t,r,e),a=o.rotate;delete o.rotate;var s=e.addShape("text",{attrs:o,name:"text-shape"});if(isNaN(a)||""===a||s.rotateAtStart(a),o.background){var l=this.drawLabelBg(t,e,s,o,a),u=this.itemType+nl;l.set("classname",u),s.toFront()}return s},drawLabelBg:function(t,e,n,i,r){var o=this.options.labelCfg,a=(0,b.deepMix)({},o,t.labelCfg),s=this.getLabelBgStyleByPosition(n,t,a,e);delete s.rotate;var l=e.addShape("rect",{name:"text-bg-shape",attrs:s});return isNaN(r)||l.rotateAtStart(r),l}},ll=(0,y.__assign)((0,y.__assign)({},il),sl);Ka.registerEdge("single-edge",ll),Ka.registerEdge("line",{getControlPoints:function(){}},"single-edge"),Ka.registerEdge("spline",{getPath:function(t){return ks(t)}},"single-edge"),Ka.registerEdge("arc",{curveOffset:20,clockwise:1,getControlPoints:function(t){var e,n,i=t.startPoint,r=t.endPoint,o=(i.x+r.x)/2,a=(i.y+r.y)/2;if(void 0!==t.controlPoints){if(n=t.controlPoints[0],e=an(i,n,r),i.x<=r.x&&i.y>r.y?this.clockwise=e.x>n.x?0:1:i.x<=r.x&&i.y<r.y?this.clockwise=e.x>n.x?1:0:i.x>r.x&&i.y<=r.y?this.clockwise=e.y<n.y?0:1:this.clockwise=e.y<n.y?1:0,(n.x-i.x)/(n.y-i.y)==(r.x-i.x)/(r.y-i.y))return[]}else{void 0===t.curveOffset&&(t.curveOffset=this.curveOffset),(0,b.isArray)(t.curveOffset)&&(t.curveOffset=t.curveOffset[0]),t.curveOffset<0?this.clockwise=0:this.clockwise=1;var s={x:r.x-i.x,y:r.y-i.y},l=Math.atan2(s.y,s.x);n={x:t.curveOffset*Math.cos(-Math.PI/2+l)+o,y:t.curveOffset*Math.sin(-Math.PI/2+l)+a},e=an(i,n,r)}var u=sn(i,e);return[{x:u,y:u}]},getPath:function(t){var e=[];return e.push(["M",t[0].x,t[0].y]),2===t.length?e.push(["L",t[1].x,t[1].y]):e.push(["A",t[1].x,t[1].y,0,0,this.clockwise,t[2].x,t[2].y]),e}},"single-edge"),Ka.registerEdge("quadratic",{curvePosition:.5,curveOffset:-20,getControlPoints:function(t){var e=t.controlPoints;if(!e||!e.length){var n=t.startPoint,i=t.endPoint;void 0===t.curveOffset&&(t.curveOffset=this.curveOffset),void 0===t.curvePosition&&(t.curvePosition=this.curvePosition),(0,b.isArray)(this.curveOffset)&&(t.curveOffset=t.curveOffset[0]),(0,b.isArray)(this.curvePosition)&&(t.curvePosition=t.curveOffset[0]),e=[Cs(n,i,t.curvePosition,t.curveOffset)]}return e},getPath:function(t){var e=[];return e.push(["M",t[0].x,t[0].y]),e.push(["Q",t[1].x,t[1].y,t[2].x,t[2].y]),e}},"single-edge"),Ka.registerEdge("cubic",{curvePosition:[.5,.5],curveOffset:[-20,20],getControlPoints:function(t){var e=t.controlPoints;if(void 0===t.curveOffset&&(t.curveOffset=this.curveOffset),void 0===t.curvePosition&&(t.curvePosition=this.curvePosition),(0,b.isNumber)(t.curveOffset)&&(t.curveOffset=[t.curveOffset,-t.curveOffset]),(0,b.isNumber)(t.curvePosition)&&(t.curvePosition=[t.curvePosition,1-t.curvePosition]),!e||!e.length||e.length<2){var n=t.startPoint,i=t.endPoint;e=[Cs(n,i,t.curvePosition[0],t.curveOffset[0]),Cs(n,i,t.curvePosition[1],t.curveOffset[1])]}return e},getPath:function(t){var e=[];return e.push(["M",t[0].x,t[0].y]),e.push(["C",t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y]),e}},"single-edge"),Ka.registerEdge("cubic-vertical",{curvePosition:[.5,.5],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(t){var e=t.startPoint,n=t.endPoint;void 0===t.curvePosition&&(t.curvePosition=this.curvePosition),void 0===t.curveOffset&&(t.curveOffset=this.curveOffset),void 0===t.minCurveOffset&&(t.minCurveOffset=this.minCurveOffset),(0,b.isNumber)(t.curveOffset)&&(t.curveOffset=[t.curveOffset,-t.curveOffset]),(0,b.isNumber)(t.minCurveOffset)&&(t.minCurveOffset=[t.minCurveOffset,-t.minCurveOffset]),(0,b.isNumber)(t.curvePosition)&&(t.curvePosition=[t.curvePosition,1-t.curvePosition]);var i=n.y-e.y,r=[0,0];return t.curveOffset?r=t.curveOffset:Math.abs(i)<Math.abs(t.minCurveOffset[0])&&(r=t.minCurveOffset),[{x:e.x,y:e.y+i*this.curvePosition[0]+r[0]},{x:n.x,y:n.y-i*this.curvePosition[1]+r[1]}]}},"cubic"),Ka.registerEdge("cubic-horizontal",{curvePosition:[.5,.5],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(t){var e=t.startPoint,n=t.endPoint;void 0===t.curvePosition&&(t.curvePosition=this.curvePosition),void 0===t.curveOffset&&(t.curveOffset=this.curveOffset),void 0===t.minCurveOffset&&(t.minCurveOffset=this.minCurveOffset),(0,b.isNumber)(t.curveOffset)&&(t.curveOffset=[t.curveOffset,-t.curveOffset]),(0,b.isNumber)(t.minCurveOffset)&&(t.minCurveOffset=[t.minCurveOffset,-t.minCurveOffset]),(0,b.isNumber)(t.curvePosition)&&(t.curvePosition=[t.curvePosition,1-t.curvePosition]);var i=n.x-e.x,r=[0,0];return t.curveOffset?r=t.curveOffset:Math.abs(i)<Math.abs(t.minCurveOffset[0])&&(r=t.minCurveOffset),[{x:e.x+i*this.curvePosition[0]+r[0],y:e.y},{x:n.x-i*this.curvePosition[1]+r[1],y:n.y}]}},"cubic"),Ka.registerEdge("loop",{getPathPoints:function(t){return qn(t)},getControlPoints:function(t){return t.controlPoints},afterDraw:function(t){t.controlPoints=void 0},afterUpdate:function(t){t.controlPoints=void 0}},"cubic");var ul={itemType:"combo",shapeType:"single-combo",labelPosition:"top",refX:Bn.comboLabel.refX,refY:Bn.comboLabel.refY,options:{style:{stroke:Bn.defaultCombo.style.stroke,fill:Bn.defaultCombo.style.fill,lineWidth:Bn.defaultCombo.style.lineWidth},labelCfg:{style:{fill:Bn.comboLabel.style.fill,fontSize:Bn.comboLabel.style.fontSize}},stateStyles:(0,y.__assign)({},Bn.comboStateStyles)},getSize:function(t){var e=(0,b.clone)(t.size||this.options.size||Bn.defaultCombo.size);return(0,b.isArray)(e)&&1===e.length&&(e=[e[0],e[0]]),(0,b.isArray)(e)||(e=[e,e]),e},getLabelStyleByPosition:function(t,e){var n=e.position||this.labelPosition,i=t.style,r=t.padding||this.options.padding;(0,b.isArray)(r)&&(r=r[0]);var o=e.refX,a=e.refY;(0,b.isNil)(o)&&(o=this.refX),(0,b.isNil)(a)&&(a=this.refY);var s,l=this.getSize(t),u=(Math.max(i.r,l[0]/2)||l[0]/2)+r;switch(n){case"top":s={x:0,y:-u-a,textBaseline:"bottom",textAlign:"center"};break;case"bottom":s={x:0,y:u+a,textBaseline:"bottom",textAlign:"center"};break;case"left":s={x:-u+o,y:0,textAlign:"left"};break;case"center":s={x:0,y:0,text:t.label,textAlign:"center"};break;default:s={x:u+o,y:0,textAlign:"right"}}return s.text=t.label,s},drawShape:function(t,e){var n=this.shapeType,i=this.getShapeStyle(t);return e.addShape(n,{attrs:i,draggable:!0,name:"combo-shape"})},updateShape:function(t,e,n){var i=e.get("keyShape");(void 0===t.animate?this.options.animate:t.animate)&&i.animate?i.animate(n,{duration:200,easing:"easeLinear"}):i.attr((0,y.__assign)({},n)),this.updateLabel(t,e)}},cl=(0,y.__assign)((0,y.__assign)({},il),ul);Ka.registerCombo("single-combo",cl),Ka.registerCombo("circle",{options:{size:[Bn.defaultCombo.size[0],Bn.defaultCombo.size[0]],padding:Bn.defaultCombo.padding[0],animate:!0,style:{stroke:Bn.defaultCombo.style.stroke,fill:Bn.defaultCombo.style.fill,lineWidth:Bn.defaultCombo.style.lineWidth},labelCfg:{style:{fill:Bn.comboLabel.style.fill,fontSize:Bn.comboLabel.style.fontSize},refX:0,refY:0},stateStyles:(0,y.__assign)({},Bn.comboStateStyles)},shapeType:"circle",labelPosition:"top",drawShape:function(t,e){var n=this.getShapeStyle(t);return delete n.height,delete n.width,e.addShape("circle",{attrs:n,className:"circle-combo",name:"circle-combo",draggable:!0})},getShapeStyle:function(t){var e=this.options.style,n=t.padding||this.options.padding;(0,b.isArray)(n)&&(n=n[0]);var i,r={stroke:t.color},o=(0,b.mix)({},e,r,t.style);if(t.fixSize)i=(0,b.isNumber)(t.fixSize)?t.fixSize:t.fixSize[0];else{var a=this.getSize(t);i=!(0,b.isNumber)(o.r)||isNaN(o.r)?a[0]/2||Bn.defaultCombo.style.r:Math.max(o.r,a[0]/2)||a[0]/2}o.r=i+n;var s=(0,y.__assign)({x:0,y:0},o);return t.style?t.style.r=i:t.style={r:i},s},update:function(t,e){var n=this.getSize(t),i=t.padding||this.options.padding;(0,b.isArray)(i)&&(i=i[0]);var r,o=(0,b.clone)(t.style);r=t.fixSize?(0,b.isNumber)(t.fixSize)?t.fixSize:t.fixSize[0]:Math.max(o.r,n[0]/2)||n[0]/2,o.r=r+i;var a=e.get("sizeCache");a&&(a.r=o.r);var s={stroke:t.color},l=e.get("keyShape"),u=(0,b.mix)({},l.attr(),s,o);t.style?t.style.r=r:t.style={r},this.updateShape(t,e,u,!0)}},"single-combo"),Ka.registerCombo("rect",{options:{size:[40,5],padding:[25,20,15,20],animate:!0,style:{radius:0,stroke:Bn.defaultCombo.style.stroke,fill:Bn.defaultCombo.style.fill,lineWidth:Bn.defaultCombo.style.lineWidth},labelCfg:{style:{fill:Bn.comboLabel.style.fill,fontSize:Bn.comboLabel.style.fontSize}},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,y.__assign)({},Bn.comboStateStyles)},shapeType:"rect",labelPosition:"top",drawShape:function(t,e){var n=this.getShapeStyle(t);return e.addShape("rect",{attrs:n,className:"rect-combo",name:"rect-combo",draggable:!0})},getLabelStyleByPosition:function(t,e){var n=e.position||this.labelPosition,i=t.style,r=t.padding||this.options.padding;(0,b.isNumber)(r)&&(r=[r,r,r,r]);var o=e.refX,a=e.refY;(0,b.isNil)(o)&&(o=this.refX),(0,b.isNil)(a)&&(a=this.refY);var s,l=i.width/2+r[3],u=i.height/2+r[0];switch(n){case"top":s={x:0-l+o,y:0-u+a,textBaseline:"top",textAlign:"left"};break;case"bottom":s={x:0,y:u+a,textBaseline:"bottom",textAlign:"center"};break;case"left":s={x:0-l+a,y:0,textAlign:"left"};break;case"center":s={x:0,y:0,text:t.label,textAlign:"center"};break;default:s={x:l+o,y:0,textAlign:"right"}}return s.text=t.label,s},getShapeStyle:function(t){var e=this.options.style,n=t.padding||this.options.padding;(0,b.isNumber)(n)&&(n=[n,n,n,n]);var i,r,o={stroke:t.color},a=(0,b.mix)({},e,o,t.style),s=this.getSize(t),l=t.collapsed&&t.fixCollapseSize?t.fixCollapseSize:t.fixSize;l?(0,b.isNumber)(l)?(i=l,r=l):(i=l[0],r=l[1]):(i=!(0,b.isNumber)(a.width)||isNaN(a.width)?s[0]||Bn.defaultCombo.style.width:Math.max(a.width,s[0])||s[0],r=!(0,b.isNumber)(a.height)||isNaN(a.height)?s[1]||Bn.defaultCombo.style.height:Math.max(a.height,s[1])||s[1]);var u=-i/2-n[3],c=-r/2-n[0];a.width=i+n[1]+n[3],a.height=r+n[0]+n[2];var h=(0,y.__assign)({x:u,y:c},a);return t.style?(t.style.width=i,t.style.height=r):t.style={width:i,height:r},h},update:function(t,e){var n=this.getSize(t),i=t.padding||this.options.padding;(0,b.isNumber)(i)&&(i=[i,i,i,i]);var r,o,a=(0,b.clone)(t.style),s=t.collapsed&&t.fixCollapseSize?t.fixCollapseSize:t.fixSize;s?(0,b.isNumber)(s)?(r=s,o=s):(r=s[0],o=s[1]):(r=Math.max(a.width,n[0])||n[0],o=Math.max(a.height,n[1])||n[1]),a.width=r+i[1]+i[3],a.height=o+i[0]+i[2];var l=e.get("sizeCache");l&&(l.width=a.width,l.height=a.height),a.x=-r/2-i[3],a.y=-o/2-i[0];var u={stroke:t.color},c=e.get("keyShape"),h=(0,b.mix)({},c.attr(),u,a);t.style?(t.style.width=r,t.style.height=o):t.style={width:r,height:o},this.updateShape(t,e,h,!1)},updateShape:function(t,e,n){var i=e.get("keyShape");(void 0===t.animate?this.options.animate:t.animate)&&i.animate?i.animate(n,{duration:200,easing:"easeLinear"}):i.attr((0,y.__assign)({},n)),this.updateLabel(t,e)}},"single-combo"),Ka.registerNode("simple-circle",{options:{size:Bn.defaultNode.size,style:{x:0,y:0,stroke:Bn.defaultNode.style.stroke,fill:Bn.defaultNode.style.fill,lineWidth:Bn.defaultNode.style.lineWidth},labelCfg:{style:{fill:Bn.nodeLabel.style.fill,fontSize:Bn.nodeLabel.style.fontSize}},stateStyles:(0,y.__assign)({},Bn.nodeStateStyles)},shapeType:"simple-circle",labelPosition:"center",drawShape:function(t,e){var n=this.getShapeStyle(t);return e.addShape("circle",{attrs:n,className:this.type+"-keyShape",draggable:!0})},getShapeStyle:function(t){var e=this.getOptions(t).style,n={stroke:t.color},i=(0,b.deepMix)({},e,n),r=this.getSize(t)[0]/2;return(0,y.__assign)({x:0,y:0,r},i)},update:function(t,e){var n=this.getSize(t),i={stroke:t.color,r:n[0]/2},r=e.get("keyShape"),o=(0,b.deepMix)({},r.attr(),i,t.style);this.updateShape(t,e,o,!0)}},"single-node"),Ka.registerNode("simple-rect",{options:{size:[100,30],style:{radius:0,stroke:Bn.defaultNode.style.stroke,fill:Bn.defaultNode.style.fill,lineWidth:Bn.defaultNode.style.lineWidth},labelCfg:{style:{fill:Bn.nodeLabel.style.fill,fontSize:Bn.nodeLabel.style.fontSize}},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,y.__assign)({},Bn.nodeStateStyles)},shapeType:"simple-rect",labelPosition:"center",drawShape:function(t,e){var n=this.getShapeStyle(t);return e.addShape("rect",{attrs:n,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0})},getShapeStyle:function(t){var e=this.getOptions(t).style,n={stroke:t.color},i=(0,b.mix)({},e,n),r=this.getSize(t),o=i.width||r[0],a=i.height||r[1];return(0,y.__assign)({x:-o/2,y:-a/2,width:o,height:a},i)},update:function(t,e){e.getContainer();var n=this.getOptions({}).style,i=this.getSize(t),r=e.get("keyShape");t.size||(i[0]=r.attr("width")||n.width,i[1]=r.attr("height")||n.height);var o={stroke:t.color,x:-i[0]/2,y:-i[1]/2,width:i[0],height:i[1]},a=(0,b.mix)({},n,r.attr(),o);a=(0,b.mix)(a,t.style),this.updateShape(t,e,a,!1)}},"single-node"),Ka.registerNode("image",{options:{img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*eD7nT6tmYgAAAAAAAAAAAABkARQnAQ",size:200,clipCfg:{show:!1,type:"circle",r:50,rx:50,ry:35,width:50,height:35,points:[[30,12],[12,30],[30,48],[48,30]],path:[["M",25,25],["L",50,25],["A",12.5,12.5,0,1,1,50,50],["A",12.5,12.5,0,1,0,50,50],["L",25,75],["Z"]],x:0,y:0}},shapeType:"image",labelPosition:"bottom",drawShape:function(t,e){var n=this.shapeType,i=this.getShapeStyle(t);delete i.fill;var r=e.addShape(n,{attrs:i,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0});return this.drawClip(t,r),r},drawClip:function(t,e){var n=this.getOptions(t).clipCfg;if(n.show){var i=n.type,r=n.x,o=n.y,a=n.style;if("circle"===i){var s=n.r;e.setClip({type:"circle",attrs:(0,y.__assign)({r:s,x:r,y:o},a)})}else if("rect"===i){var l=n.width,u=n.height,c=r-l/2,h=o-u/2;e.setClip({type:"rect",attrs:(0,y.__assign)({x:c,y:h,width:l,height:u},a)})}else if("ellipse"===i){var d=n.rx,f=n.ry;e.setClip({type:"ellipse",attrs:(0,y.__assign)({x:r,y:o,rx:d,ry:f},a)})}else if("polygon"===i){var p=n.points;e.setClip({type:"polygon",attrs:(0,y.__assign)({points:p},a)})}else if("path"===i){var m=n.path;e.setClip({type:"path",attrs:(0,y.__assign)({path:m},a)})}}},getShapeStyle:function(t){var e=this.getOptions(t).style,n=this.getSize(t),i=this.getOptions(t).img,r=n[0],o=n[1];return e&&(r=e.width||n[0],o=e.height||n[1]),(0,y.__assign)({x:-r/2,y:-o/2,width:r,height:o,img:i},e)},updateShapeStyle:function(t,e){var n=e.getContainer(),i=this.itemType+"-shape",r=n.find((function(t){return t.get("className")===i}))||e.getKeyShape(),o=this.getShapeStyle(t);r&&r.attr(o)}},"single-node");const hl={triangle:function(t,e,n){void 0===t&&(t=10),void 0===e&&(e=15),void 0===n&&(n=0);var i=2*n;return"M "+i+",0 L "+(i+e)+",-"+t/2+" L "+(i+e)+","+t/2+" Z"},vee:function(t,e,n){void 0===t&&(t=15),void 0===e&&(e=20),void 0===n&&(n=0);var i=2*n;return"M "+i+",0 L "+(i+e)+",-"+t/2+"\n        L "+(i+2*e/3)+",0 L "+(i+e)+","+t/2+" Z"},circle:function(t,e){return void 0===t&&(t=5),void 0===e&&(e=0),"M "+2*e+", 0\n            a "+t+","+t+" 0 1,0 "+2*t+",0\n            a "+t+","+t+" 0 1,0 "+2*-t+",0"},rect:function(t,e,n){void 0===t&&(t=10),void 0===e&&(e=10),void 0===n&&(n=0);var i=2*n;return"M "+i+","+-t/2+" \n        L "+(i+e)+","+-t/2+" \n        L "+(i+e)+","+t/2+" \n        L "+i+","+t/2+" Z"},diamond:function(t,e,n){void 0===t&&(t=15),void 0===e&&(e=15),void 0===n&&(n=0);var i=2*n;return"M "+i+",0 \n        L "+(i+e/2)+","+-t/2+" \n        L "+(i+e)+",0 \n        L "+(i+e/2)+","+t/2+" Z"},triangleRect:function(t,e,n,i,r,o){void 0===t&&(t=15),void 0===e&&(e=15),void 0===n&&(n=15),void 0===i&&(i=3),void 0===r&&(r=5),void 0===o&&(o=0);var a=2*o,s=a+e+r;return"M "+a+",0 L "+(a+e)+",-"+t/2+" L "+(a+e)+","+t/2+" Z\n            M "+s+", -"+n/2+"\n            L "+(s+i)+" -"+n/2+"\n            L "+(s+i)+" "+n/2+"\n            L "+s+" "+n/2+"\n            Z"}},dl={collapse:function(t,e,n){return[["M",t-n,e],["a",n,n,0,1,0,2*n,0],["a",n,n,0,1,0,2*-n,0],["M",t-n+4,e],["L",t+n-4,e]]},expand:function(t,e,n){return[["M",t-n,e],["a",n,n,0,1,0,2*n,0],["a",n,n,0,1,0,2*-n,0],["M",t-n+4,e],["L",t-n+2*n-4,e],["M",t-n+n,e-n+4],["L",t,e+n-4]]},upTriangle:function(t,e,n){var i=n*Math.cos(Math.PI/6),r=n*Math.sin(Math.PI/6);return[["M",t-i,e+r],["L",t+i,e+r],["L",t,e-n],["Z"]]},downTriangle:function(t,e,n){var i=n*Math.cos(Math.PI/6),r=n*Math.sin(Math.PI/6);return[["M",t-i,e-r],["L",t+i,e-r],["L",t,e+n],["Z"]]}},fl=Ka;var pl=["#5F95FF","#61DDAA","#65789B","#F6BD16","#7262FD","#78D3F8","#9661BC","#F6903D","#008685","#F08BB4"],ml=ct;const gl=(0,y.__assign)((0,y.__assign)((0,y.__assign)((0,y.__assign)((0,y.__assign)((0,y.__assign)({},u),a),c),o),h),{transform:ml,mat3:i});var vl=function(){function t(t){this.graph=t,this.layoutCfg=t.get("layout")||{},this.layoutType=this.getLayoutType(),this.layoutMethods=[],this.initLayout()}return t.prototype.initLayout=function(){},t.prototype.getLayoutType=function(){return this.getLayoutCfgType(this.layoutCfg)},t.prototype.getLayoutCfgType=function(t){var e=t.type;if(e)return e;var n=t.pipes;return Array.isArray(n)?n.map((function(t){return(null==t?void 0:t.type)||""})):null},t.prototype.isLayoutTypeSame=function(t){var e=this.getLayoutCfgType(t);return Array.isArray(this.layoutType)?this.layoutType.every((function(t,n){return t===e[n]})):(null==t?void 0:t.type)===this.layoutType},t.prototype.refreshLayout=function(){var t=this.graph;t&&(t.get("animate")?t.positionsAnimate():t.refreshPositions())},t.prototype.changeLayout=function(t){this.layoutCfg=t,this.destoryLayoutMethods(),this.layout()},t.prototype.changeData=function(){this.destoryLayoutMethods(),this.layout()},t.prototype.destoryLayoutMethods=function(){var t=this.layoutMethods;null==t||t.forEach((function(t){t.destroy()})),this.layoutMethods=[]},t.prototype.destroyLayout=function(){var t=this.graph;this.destoryLayoutMethods(),t.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0},t.prototype.setDataFromGraph=function(){for(var t=[],e=[],n=[],i=[],r=[],o=[],a=this.graph.getNodes(),s=this.graph.getEdges(),l=this.graph.getCombos(),u=a.length,c=0;c<u;c++){var h=a[c];if(h&&!h.destroyed){var d=h.getModel();h.isVisible()?t.push(d):e.push(d)}}var f=s.length;for(c=0;c<f;c++){var p=s[c];if(p&&!p.destroyed){d=p.getModel();p.isVisible()?d.isComboEdge?r.push(d):n.push(d):i.push(d)}}var m=l.length;for(c=0;c<m;c++){var g=l[c];if(!g.destroyed){d=g.getModel();g.isVisible()?o.push(d):i.push(d)}}return{nodes:t,hiddenNodes:e,edges:n,hiddenEdges:i,combos:o,hiddenCombos:[],comboEdges:r}},t.prototype.reLayoutMethod=function(t,e){var n=this;return new Promise((function(i,r){var o=n.graph,a=null==e?void 0:e.type;e.onLayoutEnd=function(){o.emit("aftersublayout",{type:a}),i()},t.init(n.data),"force"===a&&(t.ticking=!1,t.forceSimulation.stop()),o.emit("beforesublayout",{type:a}),t.execute(),t.isCustomLayout&&e.onLayoutEnd&&e.onLayoutEnd()}))},t.prototype.relayout=function(t){var e=this,n=this,i=n.graph,r=n.layoutMethods,o=n.layoutCfg;if(t){this.data=this.setDataFromGraph();var a=this.data.nodes;if(!a)return!1;this.initPositions(o.center,a)}i.emit("beforelayout");var s=Promise.resolve();null==r||r.forEach((function(t,n){var i=o[n];s=s.then((function(){return e.reLayoutMethod(t,i)}))})),s.then((function(){o.onAllLayoutEnd&&o.onAllLayoutEnd()})).catch((function(t){console.warn("relayout failed",t)}))},t.prototype.filterLayoutData=function(t,e){var n,i,r=t.nodes,o=t.edges,a=(0,y.__rest)(t,["nodes","edges"]);if(!r)return t;n=(0,b.isFunction)(null==e?void 0:e.nodesFilter)?e.nodesFilter:function(){return!0};var s=r.filter(n);if((0,b.isFunction)(null==e?void 0:e.edgesFilter))i=e.edgesFilter;else{var l=s.reduce((function(t,e){return t[e.id]=!0,t}),{});i=function(t){return l[t.source]&&l[t.target]}}return(0,y.__assign)({nodes:s,edges:o.filter(i)},a)},t.prototype.getLayoutBBox=function(t){var e=this.graph,n=(0,b.groupBy)(e.getNodes(),(function(t){return t.getModel().layoutOrder})),i=Object.values(n).map((function(t){var e=Ia(t);return e.size=[e.width,e.height],e}));return{groupNodes:Object.values((0,b.groupBy)(t,"layoutOrder")),layoutNodes:i}},t.prototype.layoutAnimate=function(){},t.prototype.moveToZero=function(){var t=this.graph.get("data").nodes;if(void 0!==t[0].x&&null!==t[0].x&&!Pa(t[0].x)){for(var e=[0,0],n=t.length,i=0;i<n;i++){var r=t[i];e[0]+=r.x,e[1]+=r.y}e[0]/=t.length,e[1]/=t.length;for(i=0;i<n;i++){(r=t[i]).x-=e[0],r.y-=e[1]}}},t.prototype.initPositions=function(t,e){var n=this.graph;if(!e)return!1;var i=e?e.length:0;if(i){var r=.85*n.get("width"),o=.85*n.get("height"),a=Math.ceil(Math.sqrt(i)*(r/o)),s=r/(a-1),l=o/(Math.ceil(i/a)-1);isFinite(s)&&s||(s=0),isFinite(l)&&s||(l=0);for(var u=t[0]-r/2,c=t[1]-o/2,h=!0,d=0;d<i;d++){var f=e[d];Pa(+f.x)&&(h=!1,f.x=d%a*s+u),Pa(+f.y)&&(h=!1,f.y=Math.floor(d/a)*l+c)}return h}},t.prototype.destroy=function(){this.graph=null,this.destoryLayoutMethods(),this.destroyed=!0},t}();const yl=vl;var bl=function(t){this.graph=t,this.destroyed=!1,this.initEvents()};const _l=bl;var wl;!function(t){t.CLICK="click",t.DBLCLICK="dblclick",t.MOUSEDOWN="mousedown",t.MOUDEUP="mouseup",t.CONTEXTMENU="contextmenu",t.MOUSEENTER="mouseenter",t.MOUSEOUT="mouseout",t.MOUSEOVER="mouseover",t.MOUSEMOVE="mousemove",t.MOUSELEAVE="mouseleave",t.DRAGSTART="dragstart",t.DRAGEND="dragend",t.DRAG="drag",t.DRAGENTER="dragenter",t.DRAGLEAVE="dragleave",t.DRAGOVER="dragover",t.DRAGOUT="dragout",t.DDROP="drop",t.KEYUP="keyup",t.KEYDOWN="keydown",t.WHEEL="wheel",t.FOCUS="focus",t.BLUR="blur",t.TOUCHSTART="touchstart",t.TOUCHMOVE="touchmove",t.TOUCHEND="touchend",t.CANVAS_TOUCHSTART="canvas:touchstart",t.CANVAS_TOUCHMOVE="canvas:touchmove",t.CANVAS_TOUCHEND="canvas:touchend",t.NODE_TOUCHSTART="node:touchstart",t.NODE_TOUCHMOVE="node:touchmove",t.NODE_TOUCHEND="node:touchend",t.COMBO_TOUCHSTART="combo:touchstart",t.COMBO_TOUCHMOVE="combo:touchmove",t.COMBO_TOUCHEND="combo:touchend",t.EDGE_TOUCHSTART="edge:touchstart",t.EDGE_TOUCHMOVE="edge:touchmove",t.EDGE_TOUCHEND="edge:touchend",t.NODE_CONTEXTMENU="node:contextmenu",t.NODE_CLICK="node:click",t.NODE_DBLCLICK="node:dblclick",t.NODE_MOUSEDOWN="node:mousedown",t.NODE_MOUSEUP="node:mouseup",t.NODE_MOUSEENTER="node:mouseenter",t.NODE_MOUSELEAVE="node:mouseleave",t.NODE_MOUSEMOVE="node:mousemove",t.NODE_MOUSEOUT="node:mouseout",t.NODE_MOUSEOVER="node:mouseover",t.NODE_DROP="node:drop",t.NODE_DRAGOVER="node:dragover",t.NODE_DRAGENTER="node:dragenter",t.NODE_DRAGLEAVE="node:dragleave",t.NODE_DRAGSTART="node:dragstart",t.NODE_DRAG="node:drag",t.NODE_DRAGEND="node:dragend",t.NODE_TAP="node:tap",t.NODE_PANSTART="node:panstart",t.NODE_PANMOVE="node:panmove",t.NODE_PANEND="node:panend",t.COMBO_CONTEXTMENU="combo:contextmenu",t.COMBO_CLICK="combo:click",t.COMBO_DBLCLICK="combo:dblclick",t.COMBO_MOUSEDOWN="combo:mousedown",t.COMBO_MOUSEUP="combo:mouseup",t.COMBO_MOUSEENTER="combo:mouseenter",t.COMBO_MOUSELEAVE="combo:mouseleave",t.COMBO_MOUSEMOVE="combo:mousemove",t.COMBO_MOUSEOUT="combo:mouseout",t.COMBO_MOUSEOVER="combo:mouseover",t.COMBO_DROP="combo:drop",t.COMBO_DRAGOVER="combo:dragover",t.COMBO_DRAGENTER="combo:dragenter",t.COMBO_DRAGLEAVE="combo:dragleave",t.COMBO_DRAGSTART="combo:dragstart",t.COMBO_DRAG="combo:drag",t.COMBO_DRAGEND="combo:dragend",t.COMBO_TAP="combo:tap",t.COMBO_PANSTART="combo:panstart",t.COMBO_PANMOVE="combo:panmove",t.COMBO_PANEND="combo:panend",t.EDGE_CONTEXTMENU="edge:contextmenu",t.EDGE_CLICK="edge:click",t.EDGE_DBLCLICK="edge:dblclick",t.EDGE_MOUSEDOWN="edge:mousedown",t.EDGE_MOUSEUP="edge:mouseup",t.EDGE_MOUSEENTER="edge:mouseenter",t.EDGE_MOUSELEAVE="edge:mouseleave",t.EDGE_MOUSEMOVE="edge:mousemove",t.EDGE_MOUSEOUT="edge:mouseout",t.EDGE_MOUSEOVER="edge:mouseover",t.EDGE_DROP="edge:drop",t.EDGE_DRAGOVER="edge:dragover",t.EDGE_DRAGENTER="edge:dragenter",t.EDGE_DRAGLEAVE="edge:dragleave",t.CANVAS_CONTEXTMENU="canvas:contextmenu",t.CANVAS_CLICK="canvas:click",t.CANVAS_DBLCLICK="canvas:dblclick",t.CANVAS_MOUSEDOWN="canvas:mousedown",t.CANVAS_MOUSEUP="canvas:mouseup",t.CANVAS_MOUSEENTER="canvas:mouseenter",t.CANVAS_MOUSELEAVE="canvas:mouseleave",t.CANVAS_MOUSEMOVE="canvas:mousemove",t.CANVAS_MOUSEOUT="canvas:mouseout",t.CANVAS_MOUSEOVER="canvas:mouseover",t.CANVAS_DROP="canvas:drop",t.CANVAS_DRAGENTER="canvas:dragenter",t.CANVAS_DRAGLEAVE="canvas:dragleave",t.CANVAS_DRAGSTART="canvas:dragstart",t.CANVAS_DRAG="canvas:drag",t.CANVAS_DRAGEND="canvas:dragend",t.CANVAS_TAP="canvas:tap",t.CANVAS_PANSTART="canvas:panstart",t.CANVAS_PANMOVE="canvas:panmove",t.CANVAS_PANEND="canvas:panend",t.BEFORERENDER="beforerender",t.AFTERRENDER="afterrender",t.BEFOREADDITEM="beforeadditem",t.AFTERADDITEM="afteradditem",t.BEFOREREMOVEITEM="beforeremoveitem",t.AFTERREMOVEITEM="afterremoveitem",t.BEFOREUPDATEITEM="beforeupdateitem",t.AFTERUPDATEITEM="afterupdateitem",t.BEFOREITEMVISIBILITYCHANGE="beforeitemvisibilitychange",t.AFTERITEMVISIBILITYCHANGE="afteritemvisibilitychange",t.BEFOREITEMSTATECHANGE="beforeitemstatechange",t.AFTERITEMSTATECHANGE="afteritemstatechange",t.BEFOREITEMREFRESH="beforeitemrefresh",t.AFTERITEMREFRESH="afteritemrefresh",t.BEFOREITEMSTATESCLEAR="beforeitemstatesclear",t.AFTERITEMSTATESCLEAR="afteritemstatesclear",t.BEFOREMODECHANGE="beforemodechange",t.AFTERMODECHANGE="aftermodechange",t.BEFORELAYOUT="beforelayout",t.AFTERLAYOUT="afterlayout",t.BEFORECREATEEDGE="beforecreateedge",t.AFTERCREATEEDGE="aftercreateedge",t.BEFOREGRAPHREFRESHPOSITION="beforegraphrefreshposition",t.AFTERGRAPHREFRESHPOSITION="aftergraphrefreshposition",t.BEFOREGRAPHREFRESH="beforegraphrefresh",t.AFTERGRAPHREFRESH="aftergraphrefresh",t.BEFOREANIMATE="beforeanimate",t.AFTERANIMATE="afteranimate",t.BEFOREPAINT="beforepaint",t.AFTERPAINT="afterpaint",t.BEFORECOLLAPSEEXPANDCOMBO="beforecollapseexpandcombo",t.AFTERCOLLAPSEEXPANDCOMBO="aftercollapseexpandcombo",t.GRAPHSTATECHANGE="graphstatechange",t.AFTERACTIVATERELATIONS="afteractivaterelations",t.NODESELECTCHANGE="nodeselectchange",t.TOOLTIPCHANGE="tooltipchange",t.WHEELZOOM="wheelzoom",t.VIEWPORTCHANGE="viewportchange",t.DRAGNODEEND="dragnodeend",t.STACKCHANGE="stackchange",t.TAP="tap",t.PINCHSTART="pinchstart",t.PINCHMOVE="pinchmove",t.PANSTART="panstart",t.PANMOVE="panmove",t.PANEND="panend"}(wl||(wl={}));var xl=fl.registerNode,Ml=fl.registerEdge,El=fl.registerCombo,Sl=M.registerBehavior,kl=Bn;fl.registerNode,fl.registerEdge,fl.registerCombo,M.registerBehavior;var Cl=n(10369);function Tl(t,e,n,i){var r=t-n,o=e-i;return Math.sqrt(r*r+o*o)}function Dl(t,e,n,i,r,o){return r>=t&&r<=t+n&&o>=e&&o<=e+i}function Ll(t,e){return!(e.minX>t.maxX||e.maxX<t.minX||e.minY>t.maxY||e.maxY<t.minY)}function Al(t,e){return t[0]===e[0]&&t[1]===e[1]}var Ol=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,Pl=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,Il=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,Nl=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function Rl(t,e){var n=t.match(Nl);(0,b.each)(n,(function(t){var n=t.split(":");e.addColorStop(n[0],n[1])}))}function Yl(t,e,n){var i=e.getBBox();if(isNaN(i.x)||isNaN(i.y)||isNaN(i.width)||isNaN(i.height))return n;if((0,b.isString)(n)){if("("===n[1]||"("===n[2]){if("l"===n[0])return function(t,e,n){var i,r,o=Ol.exec(n),a=parseFloat(o[1])%360*(Math.PI/180),s=o[2],l=e.getBBox();a>=0&&a<.5*Math.PI?(i={x:l.minX,y:l.minY},r={x:l.maxX,y:l.maxY}):.5*Math.PI<=a&&a<Math.PI?(i={x:l.maxX,y:l.minY},r={x:l.minX,y:l.maxY}):Math.PI<=a&&a<1.5*Math.PI?(i={x:l.maxX,y:l.maxY},r={x:l.minX,y:l.minY}):(i={x:l.minX,y:l.maxY},r={x:l.maxX,y:l.minY});var u=Math.tan(a),c=u*u,h=(r.x-i.x+u*(r.y-i.y))/(c+1)+i.x,d=u*(r.x-i.x+u*(r.y-i.y))/(c+1)+i.y,f=t.createLinearGradient(i.x,i.y,h,d);return Rl(s,f),f}(t,e,n);if("r"===n[0])return function(t,e,n){var i=Pl.exec(n),r=parseFloat(i[1]),o=parseFloat(i[2]),a=parseFloat(i[3]),s=i[4];if(0===a){var l=s.match(Nl);return l[l.length-1].split(":")[1]}var u=e.getBBox(),c=u.maxX-u.minX,h=u.maxY-u.minY,d=Math.sqrt(c*c+h*h)/2,f=t.createRadialGradient(u.minX+c*r,u.minY+h*o,0,u.minX+c/2,u.minY+h/2,a*d);return Rl(s,f),f}(t,e,n);if("p"===n[0])return function(t,e,n){if(e.get("patternSource")&&e.get("patternSource")===n)return e.get("pattern");var i,r,o=Il.exec(n),a=o[1],s=o[2];function l(){i=t.createPattern(r,a),e.set("pattern",i),e.set("patternSource",n)}switch(a){case"a":a="repeat";break;case"x":a="repeat-x";break;case"y":a="repeat-y";break;default:a="no-repeat"}return r=new Image,s.match(/^data:/i)||(r.crossOrigin="Anonymous"),r.src=s,r.complete?l():(r.onload=l,r.src=r.src),i}(t,e,n)}return n}return n instanceof CanvasPattern?n:void 0}function jl(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Fl(t,e){return jl(t)*jl(e)?(t[0]*e[0]+t[1]*e[1])/(jl(t)*jl(e)):1}function Bl(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(Fl(t,e))}function zl(t,e){var n=e[1],i=e[2],r=(0,b.mod)((0,b.toRadian)(e[3]),2*Math.PI),o=e[4],a=e[5],s=t[0],l=t[1],u=e[6],c=e[7],h=Math.cos(r)*(s-u)/2+Math.sin(r)*(l-c)/2,d=-1*Math.sin(r)*(s-u)/2+Math.cos(r)*(l-c)/2,f=h*h/(n*n)+d*d/(i*i);f>1&&(n*=Math.sqrt(f),i*=Math.sqrt(f));var p=n*n*(d*d)+i*i*(h*h),m=p?Math.sqrt((n*n*(i*i)-p)/p):1;o===a&&(m*=-1),isNaN(m)&&(m=0);var g=i?m*n*d/i:0,v=n?m*-i*h/n:0,y=(s+u)/2+Math.cos(r)*g-Math.sin(r)*v,_=(l+c)/2+Math.sin(r)*g+Math.cos(r)*v,w=[(h-g)/n,(d-v)/i],x=[(-1*h-g)/n,(-1*d-v)/i],M=Bl([1,0],w),E=Bl(w,x);return Fl(w,x)<=-1&&(E=Math.PI),Fl(w,x)>=1&&(E=0),0===a&&E>0&&(E-=2*Math.PI),1===a&&E<0&&(E+=2*Math.PI),{cx:y,cy:_,rx:Al(t,[u,c])?0:n,ry:Al(t,[u,c])?0:i,startAngle:M,endAngle:M+E,xRotation:r,arcFlag:o,sweepFlag:a}}var Hl=Math.sin,Gl=Math.cos,Wl=Math.atan2,Ul=Math.PI;function Vl(t,e,n,i,r,o,a){var s=e.stroke,l=e.lineWidth,u=Wl(i-o,n-r),c=new Fu({type:"path",canvas:t.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*Gl(Ul/6)+","+10*Hl(Ul/6)+" L0,0 L"+10*Gl(Ul/6)+",-"+10*Hl(Ul/6),stroke:s,lineWidth:l}});c.translate(r,o),c.rotateAtPoint(r,o,u),t.set(a?"startArrowShape":"endArrowShape",c)}function Xl(t,e,n,i,r,o,a){var s=e.startArrow,l=e.endArrow,u=e.stroke,c=e.lineWidth,h=a?s:l,d=h.d,f=h.fill,p=h.stroke,m=h.lineWidth,g=(0,y.__rest)(h,["d","fill","stroke","lineWidth"]),v=Wl(i-o,n-r);d&&(r-=Gl(v)*d,o-=Hl(v)*d);var b=new Fu({type:"path",canvas:t.get("canvas"),isArrowShape:!0,attrs:(0,y.__assign)((0,y.__assign)({},g),{stroke:p||u,lineWidth:m||c,fill:f})});b.translate(r,o),b.rotateAtPoint(r,o,v),t.set(a?"startArrowShape":"endArrowShape",b)}function ql(t,e,n,i,r){var o=Wl(i-e,n-t);return{dx:Gl(o)*r,dy:Hl(o)*r}}function Kl(t,e,n,i,r,o){"object"==typeof e.startArrow?Xl(t,e,n,i,r,o,!0):e.startArrow?Vl(t,e,n,i,r,o,!0):t.set("startArrowShape",null)}function $l(t,e,n,i,r,o){"object"==typeof e.endArrow?Xl(t,e,n,i,r,o,!1):e.endArrow?Vl(t,e,n,i,r,o,!1):t.set("startArrowShape",null)}var Zl={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function Jl(t,e){var n=e.attr();for(var i in n){var r=n[i],o=Zl[i]?Zl[i]:i;"matrix"===o&&r?t.transform(r[0],r[1],r[3],r[4],r[6],r[7]):"lineDash"===o&&t.setLineDash?(0,b.isArray)(r)&&t.setLineDash(r):("strokeStyle"===o||"fillStyle"===o?r=Yl(t,e,r):"globalAlpha"===o&&(r*=t.globalAlpha),t[o]=r)}}function Ql(t,e,n){for(var i=0;i<e.length;i++){var r=e[i];r.cfg.visible?r.draw(t,n):r.skipDraw()}}function tu(t,e,n){var i=t.get("refreshElements");(0,b.each)(i,(function(e){if(e!==t)for(var n=e.cfg.parent;n&&n!==t&&!n.cfg.refresh;)n.cfg.refresh=!0,n=n.cfg.parent})),i[0]===t?iu(e,n):eu(e,n)}function eu(t,e){for(var n=0;n<t.length;n++){var i=t[n];if(i.cfg.visible)if(i.cfg.hasChanged)i.cfg.refresh=!0,i.isGroup()&&iu(i.cfg.children,e);else if(i.cfg.refresh)i.isGroup()&&eu(i.cfg.children,e);else{var r=ru(i,e);i.cfg.refresh=r,r&&i.isGroup()&&eu(i.cfg.children,e)}}}function nu(t){for(var e=0;e<t.length;e++){var n=t[e];n.cfg.hasChanged=!1,n.isGroup()&&!n.destroyed&&nu(n.cfg.children)}}function iu(t,e){for(var n=0;n<t.length;n++){var i=t[n];i.cfg.refresh=!0,i.isGroup()&&iu(i.get("children"),e)}}function ru(t,e){var n=t.cfg.cacheCanvasBBox;return t.cfg.isInView&&n&&Ll(n,e)}function ou(t,e,n,i){var r=n.path,o=n.startArrow,a=n.endArrow;if(r){var s=[0,0],l=[0,0],u={dx:0,dy:0};e.beginPath();for(var c=0;c<r.length;c++){var h=r[c],d=h[0];if(0===c&&o&&o.d)u=ql((f=t.getStartTangent())[0][0],f[0][1],f[1][0],f[1][1],o.d);else if(c===r.length-2&&"Z"===r[c+1][0]&&a&&a.d){if("Z"===r[c+1][0])u=ql((f=t.getEndTangent())[0][0],f[0][1],f[1][0],f[1][1],a.d)}else if(c===r.length-1&&a&&a.d){var f;if("Z"!==r[0])u=ql((f=t.getEndTangent())[0][0],f[0][1],f[1][0],f[1][1],a.d)}var p=u.dx,m=u.dy;switch(d){case"M":e.moveTo(h[1]-p,h[2]-m),l=[h[1],h[2]];break;case"L":e.lineTo(h[1]-p,h[2]-m);break;case"Q":e.quadraticCurveTo(h[1],h[2],h[3]-p,h[4]-m);break;case"C":e.bezierCurveTo(h[1],h[2],h[3],h[4],h[5]-p,h[6]-m);break;case"A":var g=void 0;i?(g=i[c])||(g=zl(s,h),i[c]=g):g=zl(s,h);var v=g.cx,y=g.cy,b=g.rx,_=g.ry,w=g.startAngle,x=g.endAngle,M=g.xRotation,E=g.sweepFlag;if(e.ellipse)e.ellipse(v,y,b,_,M,w,x,1-E);else{var S=b>_?b:_,k=b>_?1:b/_,C=b>_?_/b:1;e.translate(v,y),e.rotate(M),e.scale(k,C),e.arc(0,0,S,w,x,1-E),e.scale(1/k,1/C),e.rotate(-M),e.translate(-v,-y)}break;case"Z":e.closePath()}if("Z"===d)s=l;else{var T=h.length;s=[h[T-2],h[T-1]]}}}}function au(t,e){var n=t.get("canvas");n&&("remove"===e&&(t._cacheCanvasBBox=t.get("cacheCanvasBBox")),t.get("hasChanged")||(t.set("hasChanged",!0),t.cfg.parent&&t.cfg.parent.get("hasChanged")||(n.refreshElement(t,e,n),n.get("autoDraw")&&n.draw())))}function su(t){var e,n,i;if(t.destroyed)e=t._cacheCanvasBBox;else{var r=t.get("cacheCanvasBBox"),o=r&&!(!r.width||!r.height),a=t.getCanvasBBox(),s=a&&!(!a.width||!a.height);o&&s?(i=a,e=(n=r)&&i?{minX:Math.min(n.minX,i.minX),minY:Math.min(n.minY,i.minY),maxX:Math.max(n.maxX,i.maxX),maxY:Math.max(n.maxY,i.maxY)}:n||i):o?e=r:s&&(e=a)}return e}var lu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,y.__extends)(e,t),e.prototype.onCanvasChange=function(t){au(this,t)},e.prototype.getShapeBase=function(){return d},e.prototype.getGroupBase=function(){return e},e.prototype._applyClip=function(t,e){e&&(t.save(),Jl(t,e),e.createPath(t),t.restore(),t.clip(),e._afterDraw())},e.prototype.cacheCanvasBBox=function(){var t=this.cfg.children,e=[],n=[];(0,b.each)(t,(function(t){var i=t.cfg.cacheCanvasBBox;i&&t.cfg.isInView&&(e.push(i.minX,i.maxX),n.push(i.minY,i.maxY))}));var i=null;if(e.length){var r=(0,b.min)(e),o=(0,b.max)(e),a=(0,b.min)(n),s=(0,b.max)(n);i={minX:r,minY:a,x:r,y:a,maxX:o,maxY:s,width:o-r,height:s-a};var l=this.cfg.canvas;if(l){var u=l.getViewRange();this.set("isInView",Ll(i,u))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",i)},e.prototype.draw=function(t,e){var n=this.cfg.children,i=!e||this.cfg.refresh;n.length&&i&&(t.save(),Jl(t,this),this._applyClip(t,this.getClip()),Ql(t,n,e),t.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},e.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},e}(So);const uu=lu;var cu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,y.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},e),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},e.prototype.getShapeBase=function(){return d},e.prototype.getGroupBase=function(){return uu},e.prototype.onCanvasChange=function(t){au(this,t)},e.prototype.calculateBBox=function(){var t=this.get("type"),e=this.getHitLineWidth(),n=Lo(t)(this),i=e/2,r=n.x-i,o=n.y-i,a=n.x+n.width+i,s=n.y+n.height+i;return{x:r,minX:r,y:o,minY:o,width:n.width+e,height:n.height+e,maxX:a,maxY:s}},e.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},e.prototype.isStroke=function(){return!!this.attrs.stroke},e.prototype._applyClip=function(t,e){e&&(t.save(),Jl(t,e),e.createPath(t),t.restore(),t.clip(),e._afterDraw())},e.prototype.draw=function(t,e){var n=this.cfg.clipShape;if(e){if(!1===this.cfg.refresh)return void this.set("hasChanged",!1);if(!Ll(e,this.getCanvasBBox()))return this.set("hasChanged",!1),void(this.cfg.isInView&&this._afterDraw())}t.save(),Jl(t,this),this._applyClip(t,n),this.drawPath(t),t.restore(),this._afterDraw()},e.prototype.getCanvasViewBox=function(){var t=this.cfg.canvas;return t?t.getViewRange():null},e.prototype.cacheCanvasBBox=function(){var t=this.getCanvasViewBox();if(t){var e=this.getCanvasBBox(),n=Ll(e,t);this.set("isInView",n),n?this.set("cacheCanvasBBox",e):this.set("cacheCanvasBBox",null)}},e.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},e.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},e.prototype.drawPath=function(t){this.createPath(t),this.strokeAndFill(t),this.afterDrawPath(t)},e.prototype.fill=function(t){t.fill()},e.prototype.stroke=function(t){t.stroke()},e.prototype.strokeAndFill=function(t){var e=this.attrs,n=e.lineWidth,i=e.opacity,r=e.strokeOpacity,o=e.fillOpacity;this.isFill()&&((0,b.isNil)(o)||1===o?this.fill(t):(t.globalAlpha=o,this.fill(t),t.globalAlpha=i)),this.isStroke()&&n>0&&((0,b.isNil)(r)||1===r||(t.globalAlpha=r),this.stroke(t)),this.afterDrawPath(t)},e.prototype.createPath=function(t){},e.prototype.afterDrawPath=function(t){},e.prototype.isInShape=function(t,e){var n=this.isStroke(),i=this.isFill(),r=this.getHitLineWidth();return this.isInStrokeOrPath(t,e,n,i,r)},e.prototype.isInStrokeOrPath=function(t,e,n,i,r){return!1},e.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var t=this.attrs;return t.lineWidth+t.lineAppendWidth},e}(Co);const hu=cu;var du=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,y.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},e),{x:0,y:0,r:0})},e.prototype.isInStrokeOrPath=function(t,e,n,i,r){var o=this.attr(),a=o.x,s=o.y,l=o.r,u=r/2,c=Tl(a,s,t,e);return i&&n?c<=l+u:i?c<=l:!!n&&(c>=l-u&&c<=l+u)},e.prototype.createPath=function(t){var e=this.attr(),n=e.x,i=e.y,r=e.r;t.beginPath(),t.arc(n,i,r,0,2*Math.PI,!1),t.closePath()},e}(hu);const fu=du;function pu(t,e,n,i){return t/(n*n)+e/(i*i)}var mu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,y.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},e),{x:0,y:0,rx:0,ry:0})},e.prototype.isInStrokeOrPath=function(t,e,n,i,r){var o=this.attr(),a=r/2,s=o.x,l=o.y,u=o.rx,c=o.ry,h=(t-s)*(t-s),d=(e-l)*(e-l);return i&&n?pu(h,d,u+a,c+a)<=1:i?pu(h,d,u,c)<=1:!!n&&(pu(h,d,u-a,c-a)>=1&&pu(h,d,u+a,c+a)<=1)},e.prototype.createPath=function(t){var e=this.attr(),n=e.x,i=e.y,r=e.rx,o=e.ry;if(t.beginPath(),t.ellipse)t.ellipse(n,i,r,o,0,0,2*Math.PI,!1);else{var a=r>o?r:o,s=r>o?1:r/o,l=r>o?o/r:1;t.save(),t.translate(n,i),t.scale(s,l),t.arc(0,0,a,0,2*Math.PI),t.restore(),t.closePath()}},e}(hu);const gu=mu;function vu(t){return t instanceof HTMLElement&&(0,b.isString)(t.nodeName)&&"CANVAS"===t.nodeName.toUpperCase()}var yu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,y.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},e),{x:0,y:0,width:0,height:0})},e.prototype.initAttrs=function(t){this._setImage(t.img)},e.prototype.isStroke=function(){return!1},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._afterLoading=function(){if(!0===this.get("toDraw")){var t=this.get("canvas");t?t.draw():this.createPath(this.get("context"))}},e.prototype._setImage=function(t){var e=this,n=this.attrs;if((0,b.isString)(t)){var i=new Image;i.onload=function(){if(e.destroyed)return!1;e.attr("img",i),e.set("loading",!1),e._afterLoading();var t=e.get("callback");t&&t.call(e)},i.crossOrigin="Anonymous",i.src=t,this.set("loading",!0)}else t instanceof Image?(n.width||(n.width=t.width),n.height||(n.height=t.height)):vu(t)&&(n.width||(n.width=Number(t.getAttribute("width"))),n.height||(n.height,Number(t.getAttribute("height"))))},e.prototype.onAttrChange=function(e,n,i){t.prototype.onAttrChange.call(this,e,n,i),"img"===e&&this._setImage(n)},e.prototype.createPath=function(t){if(this.get("loading"))return this.set("toDraw",!0),void this.set("context",t);var e=this.attr(),n=e.x,i=e.y,r=e.width,o=e.height,a=e.sx,s=e.sy,l=e.swidth,u=e.sheight,c=e.img;(c instanceof Image||vu(c))&&((0,b.isNil)(a)||(0,b.isNil)(s)||(0,b.isNil)(l)||(0,b.isNil)(u)?t.drawImage(c,n,i,r,o):t.drawImage(c,a,s,l,u,n,i,r,o))},e}(hu);const bu=yu;function _u(t,e,n,i,r,o,a){var s=Math.min(t,n),l=Math.max(t,n),u=Math.min(e,i),c=Math.max(e,i),h=r/2;return o>=s-h&&o<=l+h&&a>=u-h&&a<=c+h&&Fo.pointToLine(t,e,n,i,o,a)<=r/2}var wu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,y.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},e),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this.setArrow()},e.prototype.onAttrChange=function(e,n,i){t.prototype.onAttrChange.call(this,e,n,i),this.setArrow()},e.prototype.setArrow=function(){var t=this.attr(),e=t.x1,n=t.y1,i=t.x2,r=t.y2,o=t.startArrow,a=t.endArrow;o&&Kl(this,t,i,r,e,n),a&&$l(this,t,e,n,i,r)},e.prototype.isInStrokeOrPath=function(t,e,n,i,r){if(!n||!r)return!1;var o=this.attr();return _u(o.x1,o.y1,o.x2,o.y2,r,t,e)},e.prototype.createPath=function(t){var e=this.attr(),n=e.x1,i=e.y1,r=e.x2,o=e.y2,a=e.startArrow,s=e.endArrow,l={dx:0,dy:0},u={dx:0,dy:0};a&&a.d&&(l=ql(n,i,r,o,e.startArrow.d)),s&&s.d&&(u=ql(n,i,r,o,e.endArrow.d)),t.beginPath(),t.moveTo(n+l.dx,i+l.dy),t.lineTo(r-u.dx,o-u.dy)},e.prototype.afterDrawPath=function(t){var e=this.get("startArrowShape"),n=this.get("endArrowShape");e&&e.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.attr(),e=t.x1,n=t.y1,i=t.x2,r=t.y2;return Fo.length(e,n,i,r)},e.prototype.getPoint=function(t){var e=this.attr(),n=e.x1,i=e.y1,r=e.x2,o=e.y2;return Fo.pointAt(n,i,r,o,t)},e}(hu);const xu=wu;var Mu={circle:function(t,e,n){return[["M",t-n,e],["A",n,n,0,1,0,t+n,e],["A",n,n,0,1,0,t-n,e]]},square:function(t,e,n){return[["M",t-n,e-n],["L",t+n,e-n],["L",t+n,e+n],["L",t-n,e+n],["Z"]]},diamond:function(t,e,n){return[["M",t-n,e],["L",t,e-n],["L",t+n,e],["L",t,e+n],["Z"]]},triangle:function(t,e,n){var i=n*Math.sin(1/3*Math.PI);return[["M",t-n,e+i],["L",t,e-i],["L",t+n,e+i],["Z"]]},"triangle-down":function(t,e,n){var i=n*Math.sin(1/3*Math.PI);return[["M",t-n,e-i],["L",t+n,e-i],["L",t,e+i],["Z"]]}},Eu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,y.__extends)(e,t),e.prototype.initAttrs=function(t){this._resetParamsCache()},e.prototype._resetParamsCache=function(){this.set("paramsCache",{})},e.prototype.onAttrChange=function(e,n,i){t.prototype.onAttrChange.call(this,e,n,i),-1!==["symbol","x","y","r","radius"].indexOf(e)&&this._resetParamsCache()},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._getR=function(t){return(0,b.isNil)(t.r)?t.radius:t.r},e.prototype._getPath=function(){var t,n,i=this.attr(),r=i.x,o=i.y,a=i.symbol||"circle",s=this._getR(i);if((0,b.isFunction)(a))n=ba(n=(t=a)(r,o,s));else{if(!(t=e.Symbols[a]))return console.warn(a+" marker is not supported."),null;n=t(r,o,s)}return n},e.prototype.createPath=function(t){ou(this,t,{path:this._getPath()},this.get("paramsCache"))},e.Symbols=Mu,e}(hu);const Su=Eu;function ku(t,e,n){var i=sa();return t.createPath(i),i.isPointInPath(e,n)}function Cu(t){return Math.abs(t)<1e-6?0:t<0?-1:1}function Tu(t,e,n){return(n[0]-t[0])*(e[1]-t[1])==(e[0]-t[0])*(n[1]-t[1])&&Math.min(t[0],e[0])<=n[0]&&n[0]<=Math.max(t[0],e[0])&&Math.min(t[1],e[1])<=n[1]&&n[1]<=Math.max(t[1],e[1])}function Du(t,e,n){var i=!1,r=t.length;if(r<=2)return!1;for(var o=0;o<r;o++){var a=t[o],s=t[(o+1)%r];if(Tu(a,s,[e,n]))return!0;Cu(a[1]-n)>0!=Cu(s[1]-n)>0&&Cu(e-(n-a[1])*(a[0]-s[0])/(a[1]-s[1])-a[0])<0&&(i=!i)}return i}function Lu(t,e,n){var i=[0,0,0,0,0,0,0,0,0];return G(i,n),F(t,i,e)}function Au(t,e,n){var i=[0,0,0,0,0,0,0,0,0];return W(i,n),F(t,i,e)}function Ou(t,e,n){var i=[0,0,0,0,0,0,0,0,0];return U(i,n),F(t,i,e)}function Pu(t,e,n){return F(t,n,e)}function Iu(t,e,n,i,r,o,a,s){var l=(Math.atan2(s-e,a-t)+2*Math.PI)%(2*Math.PI);if(l<i||l>r)return!1;var u={x:t+n*Math.cos(l),y:e+n*Math.sin(l)};return Tl(u.x,u.y,a,s)<=o/2}var Nu=function(t,e){for(var n=t?[].concat(t):[1,0,0,0,1,0,0,0,1],i=0,r=e.length;i<r;i++){var o=e[i];switch(o[0]){case"t":Lu(n,n,[o[1],o[2]]);break;case"s":Ou(n,n,[o[1],o[2]]);break;case"r":Au(n,n,o[1]);break;case"m":Pu(n,n,o[1])}}return n};const Ru=(0,y.__assign)({hasArc:function(t){for(var e=!1,n=t.length,i=0;i<n;i++){var r=t[i][0];if("C"===r||"A"===r||"Q"===r){e=!0;break}}return e},extractPolygons:function(t){for(var e=t.length,n=[],i=[],r=[],o=0;o<e;o++){var a=t[o],s=a[0];"M"===s?(r.length&&(i.push(r),r=[]),r.push([a[1],a[2]])):"Z"===s?r.length&&(n.push(r),r=[]):r.push([a[1],a[2]])}return r.length>0&&i.push(r),{polygons:n,polylines:i}},isPointInStroke:function(t,e,n,i,r){for(var o=!1,a=e/2,s=0;s<t.length;s++){var l=t[s],u=l.currentPoint,c=l.params,h=l.prePoint,d=l.box;if(!d||Dl(d.x-a,d.y-a,d.width+e,d.height+e,n,i)){switch(l.command){case"L":case"Z":o=_u(h[0],h[1],u[0],u[1],e,n,i);break;case"Q":o=Vo.pointDistance(h[0],h[1],c[1],c[2],c[3],c[4],n,i)<=e/2;break;case"C":o=Jo.pointDistance(h[0],h[1],c[1],c[2],c[3],c[4],c[5],c[6],n,i,r)<=e/2;break;case"A":var f=l.arcParams,p=f.cx,m=f.cy,g=f.rx,v=f.ry,y=f.startAngle,b=f.endAngle,_=f.xRotation,w=[n,i,1],x=g>v?g:v;Re(w,w,Nu(null,[["t",-p,-m],["r",-_],["s",1/(g>v?1:g/v),1/(g>v?v/g:1)]])),o=Iu(0,0,x,y,b,e,w[0],w[1])}if(o)break}}return o}},s);function Yu(t,e,n){for(var i=!1,r=0;r<t.length;r++){if(i=Du(t[r],e,n))break}return i}var ju=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,y.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},e),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this._setPathArr(t.path),this.setArrow()},e.prototype.onAttrChange=function(e,n,i){t.prototype.onAttrChange.call(this,e,n,i),"path"===e&&this._setPathArr(n),this.setArrow()},e.prototype._setPathArr=function(t){this.attrs.path=ba(t);var e=Ru.hasArc(t);this.set("hasArc",e),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},e.prototype.getSegments=function(){var t=this.get("segements");return t||(t=ka(this.attr("path")),this.set("segments",t)),t},e.prototype.setArrow=function(){var t,e=this.attr(),n=e.startArrow,i=e.endArrow;n&&Kl(this,e,(t=this.getStartTangent())[0][0],t[0][1],t[1][0],t[1][1]);i&&$l(this,e,(t=this.getEndTangent())[0][0],t[0][1],t[1][0],t[1][1])},e.prototype.isInStrokeOrPath=function(t,e,n,i,r){var o=this.getSegments(),a=this.get("hasArc"),s=!1;if(n){var l=this.getTotalLength();s=Ru.isPointInStroke(o,r,t,e,l)}if(!s&&i)if(a)s=ku(this,t,e);else{var u=this.attr("path"),c=Ru.extractPolygons(u);s=Yu(c.polygons,t,e)||Yu(c.polylines,t,e)}return s},e.prototype.createPath=function(t){ou(this,t,this.attr(),this.get("paramsCache"))},e.prototype.afterDrawPath=function(t){var e=this.get("startArrowShape"),n=this.get("endArrowShape");e&&e.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.get("totalLength");return(0,b.isNil)(t)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):t},e.prototype.getPoint=function(t){var e,n,i=this.get("tCache");i||(this._calculateCurve(),this._setTcache(),i=this.get("tCache"));var r=this.get("curve");if(!i||0===i.length)return r?{x:r[0][1],y:r[0][2]}:null;(0,b.each)(i,(function(i,r){t>=i[0]&&t<=i[1]&&(e=(t-i[0])/(i[1]-i[0]),n=r)}));var o=r[n];if((0,b.isNil)(o)||(0,b.isNil)(n))return null;var a=o.length,s=r[n+1];return Jo.pointAt(o[a-2],o[a-1],s[1],s[2],s[3],s[4],s[5],s[6],e)},e.prototype._calculateCurve=function(){var t=this.attr().path;this.set("curve",Ru.pathToCurve(t))},e.prototype._setTcache=function(){var t,e,n,i,r=0,o=0,a=[],s=this.get("curve");s&&((0,b.each)(s,(function(t,e){n=s[e+1],i=t.length,n&&(r+=Jo.length(t[i-2],t[i-1],n[1],n[2],n[3],n[4],n[5],n[6])||0)})),this.set("totalLength",r),0!==r?((0,b.each)(s,(function(l,u){n=s[u+1],i=l.length,n&&((t=[])[0]=o/r,e=Jo.length(l[i-2],l[i-1],n[1],n[2],n[3],n[4],n[5],n[6]),o+=e||0,t[1]=o/r,a.push(t))})),this.set("tCache",a)):this.set("tCache",[]))},e.prototype.getStartTangent=function(){var t,e=this.getSegments();if(e.length>1){var n=e[0].currentPoint,i=e[1].currentPoint,r=e[1].startTangent;t=[],r?(t.push([n[0]-r[0],n[1]-r[1]]),t.push([n[0],n[1]])):(t.push([i[0],i[1]]),t.push([n[0],n[1]]))}return t},e.prototype.getEndTangent=function(){var t,e=this.getSegments(),n=e.length;if(n>1){var i=e[n-2].currentPoint,r=e[n-1].currentPoint,o=e[n-1].endTangent;t=[],o?(t.push([r[0]-o[0],r[1]-o[1]]),t.push([r[0],r[1]])):(t.push([i[0],i[1]]),t.push([r[0],r[1]]))}return t},e}(hu);const Fu=ju;function Bu(t,e,n,i,r){var o=t.length;if(o<2)return!1;for(var a=0;a<o-1;a++){if(_u(t[a][0],t[a][1],t[a+1][0],t[a+1][1],e,n,i))return!0}if(r){var s=t[0],l=t[o-1];if(_u(s[0],s[1],l[0],l[1],e,n,i))return!0}return!1}var zu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,y.__extends)(e,t),e.prototype.isInStrokeOrPath=function(t,e,n,i,r){var o=this.attr().points,a=!1;return n&&(a=Bu(o,r,t,e,!0)),!a&&i&&(a=Du(o,t,e)),a},e.prototype.createPath=function(t){var e=this.attr().points;if(!(e.length<2)){t.beginPath();for(var n=0;n<e.length;n++){var i=e[n];0===n?t.moveTo(i[0],i[1]):t.lineTo(i[0],i[1])}t.closePath()}},e}(hu);const Hu=zu;var Gu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,y.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},e),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this.setArrow()},e.prototype.onAttrChange=function(e,n,i){t.prototype.onAttrChange.call(this,e,n,i),this.setArrow(),-1!==["points"].indexOf(e)&&this._resetCache()},e.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},e.prototype.setArrow=function(){var t=this.attr(),e=this.attrs,n=e.points,i=e.startArrow,r=e.endArrow,o=n.length,a=n[0][0],s=n[0][1],l=n[o-1][0],u=n[o-1][1];i&&Kl(this,t,n[1][0],n[1][1],a,s),r&&$l(this,t,n[o-2][0],n[o-2][1],l,u)},e.prototype.isFill=function(){return!1},e.prototype.isInStrokeOrPath=function(t,e,n,i,r){return!(!n||!r)&&Bu(this.attr().points,r,t,e,!1)},e.prototype.isStroke=function(){return!0},e.prototype.createPath=function(t){var e=this.attr(),n=e.points,i=e.startArrow,r=e.endArrow,o=n.length;if(!(n.length<2)){var a,s=n[0][0],l=n[0][1],u=n[o-1][0],c=n[o-1][1];if(i&&i.d)s+=(a=ql(s,l,n[1][0],n[1][1],i.d)).dx,l+=a.dy;if(r&&r.d)u-=(a=ql(n[o-2][0],n[o-2][1],u,c,r.d)).dx,c-=a.dy;t.beginPath(),t.moveTo(s,l);for(var h=0;h<o-1;h++){var d=n[h];t.lineTo(d[0],d[1])}t.lineTo(u,c)}},e.prototype.afterDrawPath=function(t){var e=this.get("startArrowShape"),n=this.get("endArrowShape");e&&e.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.attr().points,e=this.get("totalLength");return(0,b.isNil)(e)?(this.set("totalLength",ia(t)),this.get("totalLength")):e},e.prototype.getPoint=function(t){var e,n,i=this.attr().points,r=this.get("tCache");return r||(this._setTcache(),r=this.get("tCache")),(0,b.each)(r,(function(i,r){t>=i[0]&&t<=i[1]&&(e=(t-i[0])/(i[1]-i[0]),n=r)})),Fo.pointAt(i[n][0],i[n][1],i[n+1][0],i[n+1][1],e)},e.prototype._setTcache=function(){var t=this.attr().points;if(t&&0!==t.length){var e=this.getTotalLength();if(!(e<=0)){var n,i,r=0,o=[];(0,b.each)(t,(function(a,s){t[s+1]&&((n=[])[0]=r/e,i=Fo.length(a[0],a[1],t[s+1][0],t[s+1][1]),r+=i,n[1]=r/e,o.push(n))})),this.set("tCache",o)}}},e.prototype.getStartTangent=function(){var t=this.attr().points,e=[];return e.push([t[1][0],t[1][1]]),e.push([t[0][0],t[0][1]]),e},e.prototype.getEndTangent=function(){var t=this.attr().points,e=t.length-1,n=[];return n.push([t[e-1][0],t[e-1][1]]),n.push([t[e][0],t[e][1]]),n},e}(hu);const Wu=Gu;var Uu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,y.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},e),{x:0,y:0,width:0,height:0,radius:0})},e.prototype.isInStrokeOrPath=function(t,e,n,i,r){var o=this.attr(),a=o.x,s=o.y,l=o.width,u=o.height,c=o.radius;if(c){var h=!1;return n&&(h=function(t,e,n,i,r,o,a,s){return _u(t+r,e,t+n-r,e,o,a,s)||_u(t+n,e+r,t+n,e+i-r,o,a,s)||_u(t+n-r,e+i,t+r,e+i,o,a,s)||_u(t,e+i-r,t,e+r,o,a,s)||Iu(t+n-r,e+r,r,1.5*Math.PI,2*Math.PI,o,a,s)||Iu(t+n-r,e+i-r,r,0,.5*Math.PI,o,a,s)||Iu(t+r,e+i-r,r,.5*Math.PI,Math.PI,o,a,s)||Iu(t+r,e+r,r,Math.PI,1.5*Math.PI,o,a,s)}(a,s,l,u,c,r,t,e)),!h&&i&&(h=ku(this,t,e)),h}var d=r/2;return i&&n?Dl(a-d,s-d,l+d,u+d,t,e):i?Dl(a,s,l,u,t,e):n?function(t,e,n,i,r,o,a){var s=r/2;return Dl(t-s,e-s,n,r,o,a)||Dl(t+n-s,e-s,r,i,o,a)||Dl(t+s,e+i-s,n,r,o,a)||Dl(t-s,e+s,r,i,o,a)}(a,s,l,u,r,t,e):void 0},e.prototype.createPath=function(t){var e=this.attr(),n=e.x,i=e.y,r=e.width,o=e.height,a=e.radius;if(t.beginPath(),0===a)t.rect(n,i,r,o);else{var s=function(t){var e=0,n=0,i=0,r=0;return(0,b.isArray)(t)?1===t.length?e=n=i=r=t[0]:2===t.length?(e=i=t[0],n=r=t[1]):3===t.length?(e=t[0],n=r=t[1],i=t[2]):(e=t[0],n=t[1],i=t[2],r=t[3]):e=n=i=r=t,[e,n,i,r]}(a),l=s[0],u=s[1],c=s[2],h=s[3];t.moveTo(n+l,i),t.lineTo(n+r-u,i),0!==u&&t.arc(n+r-u,i+u,u,-Math.PI/2,0),t.lineTo(n+r,i+o-c),0!==c&&t.arc(n+r-c,i+o-c,c,0,Math.PI/2),t.lineTo(n+h,i+o),0!==h&&t.arc(n+h,i+o-h,h,Math.PI/2,Math.PI),t.lineTo(n,i+l),0!==l&&t.arc(n+l,i+l,l,Math.PI,1.5*Math.PI),t.closePath()}},e}(hu);const Vu=Uu;var Xu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,y.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},e),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},e.prototype.isOnlyHitBox=function(){return!0},e.prototype.initAttrs=function(t){this._assembleFont(),t.text&&this._setText(t.text)},e.prototype._assembleFont=function(){var t=this.attrs;t.font=ua(t)},e.prototype._setText=function(t){var e=null;(0,b.isString)(t)&&-1!==t.indexOf("\n")&&(e=t.split("\n")),this.set("textArr",e)},e.prototype.onAttrChange=function(e,n,i){t.prototype.onAttrChange.call(this,e,n,i),e.startsWith("font")&&this._assembleFont(),"text"===e&&this._setText(n)},e.prototype._getSpaceingY=function(){var t=this.attrs,e=t.lineHeight,n=1*t.fontSize;return e?e-n:.14*n},e.prototype._drawTextArr=function(t,e,n){var i,r=this.attrs,o=r.textBaseline,a=r.x,s=r.y,l=1*r.fontSize,u=this._getSpaceingY(),c=la(r.text,r.fontSize,r.lineHeight);(0,b.each)(e,(function(e,r){i=s+r*(u+l)-c+l,"middle"===o&&(i+=c-l-(c-l)/2),"top"===o&&(i+=c-l),(0,b.isNil)(e)||(n?t.fillText(e,a,i):t.strokeText(e,a,i))}))},e.prototype._drawText=function(t,e){var n=this.attr(),i=n.x,r=n.y,o=this.get("textArr");if(o)this._drawTextArr(t,o,e);else{var a=n.text;(0,b.isNil)(a)||(e?t.fillText(a,i,r):t.strokeText(a,i,r))}},e.prototype.strokeAndFill=function(t){var e=this.attrs,n=e.lineWidth,i=e.opacity,r=e.strokeOpacity,o=e.fillOpacity;this.isStroke()&&n>0&&((0,b.isNil)(r)||1===r||(t.globalAlpha=i),this.stroke(t)),this.isFill()&&((0,b.isNil)(o)||1===o?this.fill(t):(t.globalAlpha=o,this.fill(t),t.globalAlpha=i)),this.afterDrawPath(t)},e.prototype.fill=function(t){this._drawText(t,!0)},e.prototype.stroke=function(t){this._drawText(t,!1)},e}(hu);const qu=Xu;function Ku(t,e,n){var i,r,o=t.getTotalMatrix();if(o){var a=(i=[e,n,1],(r=o)?dr(fr(r),i):i);return[a[0],a[1]]}return[e,n]}function $u(t,e,n){if(t.isCanvas&&t.isCanvas())return!0;if(!Xi(t)||!1===t.cfg.isInView)return!1;if(t.cfg.clipShape){var i=Ku(t,e,n),r=i[0],o=i[1];if(t.isClipped(r,o))return!1}var a=t.cfg.cacheCanvasBBox||t.getCanvasBBox();return e>=a.minX&&e<=a.maxX&&n>=a.minY&&n<=a.maxY}function Zu(t,e,n){if(!$u(t,e,n))return null;for(var i=null,r=t.getChildren(),o=r.length-1;o>=0;o--){var a=r[o];if(a.isGroup())i=Zu(a,e,n);else if($u(a,e,n)){var s=a,l=Ku(a,e,n),u=l[0],c=l[1];s.isInShape(u,c)&&(i=a)}if(i)break}return i}var Ju=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,y.__extends)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.renderer="canvas",e.autoDraw=!0,e.localRefresh=!0,e.refreshElements=[],e.clipView=!0,e.quickHit=!1,e},e.prototype.onCanvasChange=function(t){"attr"!==t&&"sort"!==t&&"changeSize"!==t||(this.set("refreshElements",[this]),this.draw())},e.prototype.getShapeBase=function(){return d},e.prototype.getGroupBase=function(){return uu},e.prototype.getPixelRatio=function(){var t=this.get("pixelRatio")||(window?window.devicePixelRatio:1);return t>=1?Math.ceil(t):1},e.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},e.prototype.createDom=function(){var t=document.createElement("canvas"),e=t.getContext("2d");return this.set("context",e),t},e.prototype.setDOMSize=function(e,n){t.prototype.setDOMSize.call(this,e,n);var i=this.get("context"),r=this.get("el"),o=this.getPixelRatio();r.width=o*e,r.height=o*n,o>1&&i.scale(o,o)},e.prototype.clear=function(){t.prototype.clear.call(this),this._clearFrame();var e=this.get("context"),n=this.get("el");e.clearRect(0,0,n.width,n.height)},e.prototype.getShape=function(e,n){return this.get("quickHit")?Zu(this,e,n):t.prototype.getShape.call(this,e,n,null)},e.prototype._getRefreshRegion=function(){var t,e=this.get("refreshElements"),n=this.getViewRange();e.length&&e[0]===this?t=n:(t=function(t){if(!t.length)return null;var e=[],n=[],i=[],r=[];return(0,b.each)(t,(function(t){var o=su(t);o&&(e.push(o.minX),n.push(o.minY),i.push(o.maxX),r.push(o.maxY))})),{minX:(0,b.min)(e),minY:(0,b.min)(n),maxX:(0,b.max)(i),maxY:(0,b.max)(r)}}(e),t&&(t.minX=Math.floor(t.minX),t.minY=Math.floor(t.minY),t.maxX=Math.ceil(t.maxX),t.maxY=Math.ceil(t.maxY),t.maxY+=1,this.get("clipView")&&(t=function(t,e){return t&&e&&Ll(t,e)?{minX:Math.max(t.minX,e.minX),minY:Math.max(t.minY,e.minY),maxX:Math.min(t.maxX,e.maxX),maxY:Math.min(t.maxY,e.maxY)}:null}(t,n))));return t},e.prototype.refreshElement=function(t){this.get("refreshElements").push(t)},e.prototype._clearFrame=function(){var t=this.get("drawFrame");t&&((0,b.clearAnimationFrame)(t),this.set("drawFrame",null),this.set("refreshElements",[]))},e.prototype.draw=function(){var t=this.get("drawFrame");this.get("autoDraw")&&t||this._startDraw()},e.prototype._drawAll=function(){var t=this.get("context"),e=this.get("el"),n=this.getChildren();t.clearRect(0,0,e.width,e.height),Jl(t,this),Ql(t,n),this.set("refreshElements",[])},e.prototype._drawRegion=function(){var t=this.get("context"),e=this.get("refreshElements"),n=this.getChildren(),i=this._getRefreshRegion();i?(t.clearRect(i.minX,i.minY,i.maxX-i.minX,i.maxY-i.minY),t.save(),t.beginPath(),t.rect(i.minX,i.minY,i.maxX-i.minX,i.maxY-i.minY),t.clip(),Jl(t,this),tu(this,n,i),Ql(t,n,i),t.restore()):e.length&&nu(e),(0,b.each)(e,(function(t){t.get("hasChanged")&&t.set("hasChanged",!1)})),this.set("refreshElements",[])},e.prototype._startDraw=function(){var t=this,e=this.get("drawFrame");e||(e=(0,b.requestAnimationFrame)((function(){t.get("localRefresh")?t._drawRegion():t._drawAll(),t.set("drawFrame",null)})),this.set("drawFrame",e))},e.prototype.skipDraw=function(){},e.prototype.removeDom=function(){var t=this.get("el");t.width=0,t.height=0,t.parentNode.removeChild(t)},e}(Mo);const Qu=Ju;var tc={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"},ec={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"};function nc(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function ic(t){var e=tc[t.type],n=t.getParent();if(!e)throw new Error("the type "+t.type+" is not supported by svg");var i=nc(e);if(t.get("id")&&(i.id=t.get("id")),t.set("el",i),t.set("attrs",{}),n){var r=n.get("el");r||(r=n.createDom(),n.set("el",r)),r.appendChild(i)}return i}function rc(t,e){var n=t.get("el"),i=(0,b.toArray)(n.children).sort(e),r=document.createDocumentFragment();i.forEach((function(t){r.appendChild(t)})),n.appendChild(r)}function oc(t){var e=t.attr().matrix;if(e){for(var n=t.cfg.el,i=[],r=0;r<9;r+=3)i.push(e[r]+","+e[r+1]);-1===(i=i.join(",")).indexOf("NaN")?n.setAttribute("transform","matrix("+i+")"):console.warn("invalid matrix:",e)}}function ac(t,e){var n=t.getClip(),i=t.get("el");if(n){if(n&&!i.hasAttribute("clip-path")){ic(n),n.createPath(e);var r=e.addClip(n);i.setAttribute("clip-path","url(#"+r+")")}}else i.removeAttribute("clip-path")}function sc(t,e){e.forEach((function(e){e.draw(t)}))}function lc(t,e){var n=t.get("canvas");if(n&&n.get("autoDraw")){var i=n.get("context"),r=t.getParent(),o=r?r.getChildren():[n],a=t.get("el");if("remove"===e)if(t.get("isClipShape")){var s=a&&a.parentNode,l=s&&s.parentNode;s&&l&&l.removeChild(s)}else a&&a.parentNode&&a.parentNode.removeChild(a);else if("show"===e)a.setAttribute("visibility","visible");else if("hide"===e)a.setAttribute("visibility","hidden");else if("zIndex"===e)!function(t,e){var n=t.parentNode,i=Array.from(n.childNodes).filter((function(t){return 1===t.nodeType&&"defs"!==t.nodeName.toLowerCase()})),r=i[e],o=i.indexOf(t);if(r){if(o>e)n.insertBefore(t,r);else if(o<e){var a=i[e+1];a?n.insertBefore(t,a):n.appendChild(t)}}else n.appendChild(t)}(a,o.indexOf(t));else if("sort"===e){var u=t.get("children");u&&u.length&&rc(t,(function(t,e){return u.indexOf(t)-u.indexOf(e)?1:0}))}else"clear"===e?a&&(a.innerHTML=""):"matrix"===e?oc(t):"clip"===e?ac(t,i):"attr"===e||"add"===e&&t.draw(i)}}var uc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,y.__extends)(e,t),e.prototype.isEntityGroup=function(){return!0},e.prototype.createDom=function(){var t=nc("g");this.set("el",t);var e=this.getParent();if(e){var n=e.get("el");n||(n=e.createDom(),e.set("el",n)),n.appendChild(t)}return t},e.prototype.afterAttrsChange=function(e){t.prototype.afterAttrsChange.call(this,e);var n=this.get("canvas");if(n&&n.get("autoDraw")){var i=n.get("context");this.createPath(i,e)}},e.prototype.onCanvasChange=function(t){lc(this,t)},e.prototype.getShapeBase=function(){return f},e.prototype.getGroupBase=function(){return e},e.prototype.draw=function(t){var e=this.getChildren(),n=this.get("el");this.get("destroyed")?n&&n.parentNode.removeChild(n):(n||this.createDom(),ac(this,t),this.createPath(t),e.length&&sc(t,e))},e.prototype.createPath=function(t,e){var n=this.attr(),i=this.get("el");(0,b.each)(e||n,(function(t,e){ec[e]&&i.setAttribute(ec[e],t)})),oc(this)},e}(So);const cc=uc;var hc=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="svg",e.canFill=!1,e.canStroke=!1,e}return(0,y.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},e),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},e.prototype.afterAttrsChange=function(e){t.prototype.afterAttrsChange.call(this,e);var n=this.get("canvas");if(n&&n.get("autoDraw")){var i=n.get("context");this.draw(i,e)}},e.prototype.getShapeBase=function(){return f},e.prototype.getGroupBase=function(){return cc},e.prototype.onCanvasChange=function(t){lc(this,t)},e.prototype.calculateBBox=function(){var t=this.get("el"),e=null;if(t)e=t.getBBox();else{var n=Lo(this.get("type"));n&&(e=n(this))}if(e){var i=e.x,r=e.y,o=e.width,a=e.height,s=this.getHitLineWidth(),l=s/2,u=i-l,c=r-l;return{x:u,y:c,minX:u,minY:c,maxX:i+o+l,maxY:r+a+l,width:o+s,height:a+s}}return{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},e.prototype.isFill=function(){var t=this.attr(),e=t.fill,n=t.fillStyle;return(e||n||this.isClipShape())&&this.canFill},e.prototype.isStroke=function(){var t=this.attr(),e=t.stroke,n=t.strokeStyle;return(e||n)&&this.canStroke},e.prototype.draw=function(t,e){var n=this.get("el");this.get("destroyed")?n&&n.parentNode.removeChild(n):(n||ic(this),ac(this,t),this.createPath(t,e),this.shadow(t,e),this.strokeAndFill(t,e),this.transform(e))},e.prototype.createPath=function(t,e){},e.prototype.strokeAndFill=function(t,e){var n=e||this.attr(),i=n.fill,r=n.fillStyle,o=n.stroke,a=n.strokeStyle,s=n.fillOpacity,l=n.strokeOpacity,u=n.lineWidth,c=this.get("el");this.canFill&&(e?"fill"in n?this._setColor(t,"fill",i):"fillStyle"in n&&this._setColor(t,"fill",r):this._setColor(t,"fill",i||r),s&&c.setAttribute(ec.fillOpacity,s)),this.canStroke&&u>0&&(e?"stroke"in n?this._setColor(t,"stroke",o):"strokeStyle"in n&&this._setColor(t,"stroke",a):this._setColor(t,"stroke",o||a),l&&c.setAttribute(ec.strokeOpacity,l),u&&c.setAttribute(ec.lineWidth,u))},e.prototype._setColor=function(t,e,n){var i=this.get("el");if(n)if(n=n.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(n))(r=t.find("gradient",n))||(r=t.addGradient(n)),i.setAttribute(ec[e],"url(#"+r+")");else if(/^[p,P]{1}[\s]*\(/.test(n)){var r;(r=t.find("pattern",n))||(r=t.addPattern(n)),i.setAttribute(ec[e],"url(#"+r+")")}else i.setAttribute(ec[e],n);else i.setAttribute(ec[e],"none")},e.prototype.shadow=function(t,e){var n=this.attr(),i=e||n,r=i.shadowOffsetX,o=i.shadowOffsetY,a=i.shadowBlur,s=i.shadowColor;(r||o||a||s)&&function(t,e){var n=t.cfg.el,i=t.attr(),r={dx:i.shadowOffsetX,dy:i.shadowOffsetY,blur:i.shadowBlur,color:i.shadowColor};if(r.dx||r.dy||r.blur||r.color){var o=e.find("filter",r);o||(o=e.addShadow(r)),n.setAttribute("filter","url(#"+o+")")}else n.removeAttribute("filter")}(this,t)},e.prototype.transform=function(t){var e=this.attr();(t||e).matrix&&oc(this)},e.prototype.isInShape=function(t,e){return this.isPointInPath(t,e)},e.prototype.isPointInPath=function(t,e){var n=this.get("el"),i=this.get("canvas").get("el").getBoundingClientRect(),r=t+i.left,o=e+i.top,a=document.elementFromPoint(r,o);return!(!a||!a.isEqualNode(n))},e.prototype.getHitLineWidth=function(){var t=this.attrs,e=t.lineWidth,n=t.lineAppendWidth;return this.isStroke()?e+n:0},e}(Co);const dc=hc;var fc=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="circle",e.canFill=!0,e.canStroke=!0,e}return(0,y.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},e),{x:0,y:0,r:0})},e.prototype.createPath=function(t,e){var n=this.attr(),i=this.get("el");(0,b.each)(e||n,(function(t,e){"x"===e||"y"===e?i.setAttribute("c"+e,t):ec[e]&&i.setAttribute(ec[e],t)}))},e}(dc);const pc=fc;var mc=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="dom",e.canFill=!1,e.canStroke=!1,e}return(0,y.__extends)(e,t),e.prototype.createPath=function(t,e){var n=this.attr(),i=this.get("el");if((0,b.each)(e||n,(function(t,e){ec[e]&&i.setAttribute(ec[e],t)})),"function"==typeof n.html){var r=n.html.call(this,n);if(r instanceof Element||r instanceof HTMLDocument){for(var o=i.childNodes,a=o.length-1;a>=0;a--)i.removeChild(o[a]);i.appendChild(r)}else i.innerHTML=r}else i.innerHTML=n.html},e}(dc);const gc=mc;var vc=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="ellipse",e.canFill=!0,e.canStroke=!0,e}return(0,y.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},e),{x:0,y:0,rx:0,ry:0})},e.prototype.createPath=function(t,e){var n=this.attr(),i=this.get("el");(0,b.each)(e||n,(function(t,e){"x"===e||"y"===e?i.setAttribute("c"+e,t):ec[e]&&i.setAttribute(ec[e],t)}))},e}(dc);const yc=vc;var bc=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="image",e.canFill=!1,e.canStroke=!1,e}return(0,y.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},e),{x:0,y:0,width:0,height:0})},e.prototype.createPath=function(t,e){var n=this,i=this.attr(),r=this.get("el");(0,b.each)(e||i,(function(t,e){"img"===e?n._setImage(i.img):ec[e]&&r.setAttribute(ec[e],t)}))},e.prototype.setAttr=function(t,e){this.attrs[t]=e,"img"===t&&this._setImage(e)},e.prototype._setImage=function(t){var e=this.attr(),n=this.get("el");if((0,b.isString)(t))n.setAttribute("href",t);else if(t instanceof window.Image)e.width||(n.setAttribute("width",t.width),this.attr("width",t.width)),e.height||(n.setAttribute("height",t.height),this.attr("height",t.height)),n.setAttribute("href",t.src);else if(t instanceof HTMLElement&&(0,b.isString)(t.nodeName)&&"CANVAS"===t.nodeName.toUpperCase())n.setAttribute("href",t.toDataURL());else if(t instanceof ImageData){var i=document.createElement("canvas");i.setAttribute("width",""+t.width),i.setAttribute("height",""+t.height),i.getContext("2d").putImageData(t,0,0),e.width||(n.setAttribute("width",""+t.width),this.attr("width",t.width)),e.height||(n.setAttribute("height",""+t.height),this.attr("height",t.height)),n.setAttribute("href",i.toDataURL())}},e}(dc);const _c=bc;var wc=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="line",e.canFill=!1,e.canStroke=!0,e}return(0,y.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},e),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},e.prototype.createPath=function(t,e){var n=this.attr(),i=this.get("el");(0,b.each)(e||n,(function(e,r){if("startArrow"===r||"endArrow"===r)if(e){var o=(0,b.isObject)(e)?t.addArrow(n,ec[r]):t.getDefaultArrow(n,ec[r]);i.setAttribute(ec[r],"url(#"+o+")")}else i.removeAttribute(ec[r]);else ec[r]&&i.setAttribute(ec[r],e)}))},e.prototype.getTotalLength=function(){var t=this.attr(),e=t.x1,n=t.y1,i=t.x2,r=t.y2;return Fo.length(e,n,i,r)},e.prototype.getPoint=function(t){var e=this.attr(),n=e.x1,i=e.y1,r=e.x2,o=e.y2;return Fo.pointAt(n,i,r,o,t)},e}(dc);const xc=wc;var Mc={circle:function(t,e,n){return[["M",t,e],["m",-n,0],["a",n,n,0,1,0,2*n,0],["a",n,n,0,1,0,2*-n,0]]},square:function(t,e,n){return[["M",t-n,e-n],["L",t+n,e-n],["L",t+n,e+n],["L",t-n,e+n],["Z"]]},diamond:function(t,e,n){return[["M",t-n,e],["L",t,e-n],["L",t+n,e],["L",t,e+n],["Z"]]},triangle:function(t,e,n){var i=n*Math.sin(1/3*Math.PI);return[["M",t-n,e+i],["L",t,e-i],["L",t+n,e+i],["z"]]},triangleDown:function(t,e,n){var i=n*Math.sin(1/3*Math.PI);return[["M",t-n,e-i],["L",t+n,e-i],["L",t,e+i],["Z"]]}};const Ec={get:function(t){return Mc[t]},register:function(t,e){Mc[t]=e},remove:function(t){delete Mc[t]},getAll:function(){return Mc}};var Sc=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="marker",e.canFill=!0,e.canStroke=!0,e}return(0,y.__extends)(e,t),e.prototype.createPath=function(t){this.get("el").setAttribute("d",this._assembleMarker())},e.prototype._assembleMarker=function(){var t=this._getPath();return(0,b.isArray)(t)?t.map((function(t){return t.join(" ")})).join(""):t},e.prototype._getPath=function(){var t,e=this.attr(),n=e.x,i=e.y,r=e.r||e.radius,o=e.symbol||"circle";return(t=(0,b.isFunction)(o)?o:Ec.get(o))?t(n,i,r):(console.warn(t+" symbol is not exist."),null)},e.symbolsFactory=Ec,e}(dc);const kc=Sc;var Cc=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="path",e.canFill=!0,e.canStroke=!0,e}return(0,y.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},e),{startArrow:!1,endArrow:!1})},e.prototype.createPath=function(t,e){var n=this,i=this.attr(),r=this.get("el");(0,b.each)(e||i,(function(e,o){if("path"===o&&(0,b.isArray)(e))r.setAttribute("d",n._formatPath(e));else if("startArrow"===o||"endArrow"===o)if(e){var a=(0,b.isObject)(e)?t.addArrow(i,ec[o]):t.getDefaultArrow(i,ec[o]);r.setAttribute(ec[o],"url(#"+a+")")}else r.removeAttribute(ec[o]);else ec[o]&&r.setAttribute(ec[o],e)}))},e.prototype._formatPath=function(t){var e=t.map((function(t){return t.join(" ")})).join("");return~e.indexOf("NaN")?"":e},e.prototype.getTotalLength=function(){var t=this.get("el");return t?t.getTotalLength():null},e.prototype.getPoint=function(t){var e=this.get("el"),n=this.getTotalLength();if(0===n)return null;var i=e?e.getPointAtLength(t*n):null;return i?{x:i.x,y:i.y}:null},e}(dc);const Tc=Cc;var Dc=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="polygon",e.canFill=!0,e.canStroke=!0,e}return(0,y.__extends)(e,t),e.prototype.createPath=function(t,e){var n=this.attr(),i=this.get("el");(0,b.each)(e||n,(function(t,e){"points"===e&&(0,b.isArray)(t)&&t.length>=2?i.setAttribute("points",t.map((function(t){return t[0]+","+t[1]})).join(" ")):ec[e]&&i.setAttribute(ec[e],t)}))},e}(dc);const Lc=Dc;var Ac=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="polyline",e.canFill=!0,e.canStroke=!0,e}return(0,y.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},e),{startArrow:!1,endArrow:!1})},e.prototype.onAttrChange=function(e,n,i){t.prototype.onAttrChange.call(this,e,n,i),-1!==["points"].indexOf(e)&&this._resetCache()},e.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},e.prototype.createPath=function(t,e){var n=this.attr(),i=this.get("el");(0,b.each)(e||n,(function(t,e){"points"===e&&(0,b.isArray)(t)&&t.length>=2?i.setAttribute("points",t.map((function(t){return t[0]+","+t[1]})).join(" ")):ec[e]&&i.setAttribute(ec[e],t)}))},e.prototype.getTotalLength=function(){var t=this.attr().points,e=this.get("totalLength");return(0,b.isNil)(e)?(this.set("totalLength",ia(t)),this.get("totalLength")):e},e.prototype.getPoint=function(t){var e,n,i=this.attr().points,r=this.get("tCache");return r||(this._setTcache(),r=this.get("tCache")),(0,b.each)(r,(function(i,r){t>=i[0]&&t<=i[1]&&(e=(t-i[0])/(i[1]-i[0]),n=r)})),Fo.pointAt(i[n][0],i[n][1],i[n+1][0],i[n+1][1],e)},e.prototype._setTcache=function(){var t=this.attr().points;if(t&&0!==t.length){var e=this.getTotalLength();if(!(e<=0)){var n,i,r=0,o=[];(0,b.each)(t,(function(a,s){t[s+1]&&((n=[])[0]=r/e,i=Fo.length(a[0],a[1],t[s+1][0],t[s+1][1]),r+=i,n[1]=r/e,o.push(n))})),this.set("tCache",o)}}},e.prototype.getStartTangent=function(){var t=this.attr().points,e=[];return e.push([t[1][0],t[1][1]]),e.push([t[0][0],t[0][1]]),e},e.prototype.getEndTangent=function(){var t=this.attr().points,e=t.length-1,n=[];return n.push([t[e-1][0],t[e-1][1]]),n.push([t[e][0],t[e][1]]),n},e}(dc);const Oc=Ac;var Pc=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="rect",e.canFill=!0,e.canStroke=!0,e}return(0,y.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},e),{x:0,y:0,width:0,height:0,radius:0})},e.prototype.createPath=function(t,e){var n=this,i=this.attr(),r=this.get("el"),o=!1,a=["x","y","width","height","radius"];(0,b.each)(e||i,(function(t,e){-1===a.indexOf(e)||o?-1===a.indexOf(e)&&ec[e]&&r.setAttribute(ec[e],t):(r.setAttribute("d",n._assembleRect(i)),o=!0)}))},e.prototype._assembleRect=function(t){var e=t.x,n=t.y,i=t.width,r=t.height,o=t.radius;if(!o)return"M "+e+","+n+" l "+i+",0 l 0,"+r+" l"+-i+" 0 z";var a=function(t){var e=0,n=0,i=0,r=0;return(0,b.isArray)(t)?1===t.length?e=n=i=r=t[0]:2===t.length?(e=i=t[0],n=r=t[1]):3===t.length?(e=t[0],n=r=t[1],i=t[2]):(e=t[0],n=t[1],i=t[2],r=t[3]):e=n=i=r=t,{r1:e,r2:n,r3:i,r4:r}}(o);return(0,b.isArray)(o)?1===o.length?a.r1=a.r2=a.r3=a.r4=o[0]:2===o.length?(a.r1=a.r3=o[0],a.r2=a.r4=o[1]):3===o.length?(a.r1=o[0],a.r2=a.r4=o[1],a.r3=o[2]):(a.r1=o[0],a.r2=o[1],a.r3=o[2],a.r4=o[3]):a.r1=a.r2=a.r3=a.r4=o,[["M "+(e+a.r1)+","+n],["l "+(i-a.r1-a.r2)+",0"],["a "+a.r2+","+a.r2+",0,0,1,"+a.r2+","+a.r2],["l 0,"+(r-a.r2-a.r3)],["a "+a.r3+","+a.r3+",0,0,1,"+-a.r3+","+a.r3],["l "+(a.r3+a.r4-i)+",0"],["a "+a.r4+","+a.r4+",0,0,1,"+-a.r4+","+-a.r4],["l 0,"+(a.r4+a.r1-r)],["a "+a.r1+","+a.r1+",0,0,1,"+a.r1+","+-a.r1],["z"]].join(" ")},e}(dc);const Ic=Pc;var Nc={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},Rc={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},Yc={left:"left",start:"left",center:"middle",right:"end",end:"end"},jc=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="text",e.canFill=!0,e.canStroke=!0,e}return(0,y.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},e),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},e.prototype.createPath=function(t,e){var n=this,i=this.attr(),r=this.get("el");this._setFont(),(0,b.each)(e||i,(function(t,e){"text"===e?n._setText(""+t):"matrix"===e&&t?oc(n):ec[e]&&r.setAttribute(ec[e],t)})),r.setAttribute("paint-order","stroke"),r.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},e.prototype._setFont=function(){var t=this.get("el"),e=this.attr(),n=e.textBaseline,i=e.textAlign,r=rr();r&&"firefox"===r.name?t.setAttribute("dominant-baseline",Rc[n]||"alphabetic"):t.setAttribute("alignment-baseline",Nc[n]||"baseline"),t.setAttribute("text-anchor",Yc[i]||"left")},e.prototype._setText=function(t){var e=this.get("el"),n=this.attr(),i=n.x,r=n.textBaseline,o=void 0===r?"bottom":r;if(t)if(~t.indexOf("\n")){var a=t.split("\n"),s=a.length-1,l="";(0,b.each)(a,(function(t,e){0===e?"alphabetic"===o?l+='<tspan x="'+i+'" dy="'+-s+'em">'+t+"</tspan>":"top"===o?l+='<tspan x="'+i+'" dy="0.9em">'+t+"</tspan>":"middle"===o?l+='<tspan x="'+i+'" dy="'+-(s-1)/2+'em">'+t+"</tspan>":"bottom"===o?l+='<tspan x="'+i+'" dy="-'+(s+.3)+'em">'+t+"</tspan>":"hanging"===o&&(l+='<tspan x="'+i+'" dy="'+(-(s-1)-.3)+'em">'+t+"</tspan>"):l+='<tspan x="'+i+'" dy="1em">'+t+"</tspan>"})),e.innerHTML=l}else e.innerHTML=t;else e.innerHTML=""},e}(dc);const Fc=jc;var Bc=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,zc=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,Hc=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function Gc(t){var e=t.match(Hc);if(!e)return"";var n="";return e.sort((function(t,e){return t=t.split(":"),e=e.split(":"),Number(t[0])-Number(e[0])})),(0,b.each)(e,(function(t){t=t.split(":"),n+='<stop offset="'+t[0]+'" stop-color="'+t[1]+'"></stop>'})),n}var Wc=function(){function t(t){this.cfg={};var e=null,n=(0,b.uniqueId)("gradient_");return"l"===t.toLowerCase()[0]?function(t,e){var n,i,r=Bc.exec(t),o=(0,b.mod)((0,b.toRadian)(parseFloat(r[1])),2*Math.PI),a=r[2];o>=0&&o<.5*Math.PI?(n={x:0,y:0},i={x:1,y:1}):.5*Math.PI<=o&&o<Math.PI?(n={x:1,y:0},i={x:0,y:1}):Math.PI<=o&&o<1.5*Math.PI?(n={x:1,y:1},i={x:0,y:0}):(n={x:0,y:1},i={x:1,y:0});var s=Math.tan(o),l=s*s,u=(i.x-n.x+s*(i.y-n.y))/(l+1)+n.x,c=s*(i.x-n.x+s*(i.y-n.y))/(l+1)+n.y;e.setAttribute("x1",n.x),e.setAttribute("y1",n.y),e.setAttribute("x2",u),e.setAttribute("y2",c),e.innerHTML=Gc(a)}(t,e=nc("linearGradient")):function(t,e){var n=zc.exec(t),i=parseFloat(n[1]),r=parseFloat(n[2]),o=parseFloat(n[3]),a=n[4];e.setAttribute("cx",i),e.setAttribute("cy",r),e.setAttribute("r",o),e.innerHTML=Gc(a)}(t,e=nc("radialGradient")),e.setAttribute("id",n),this.el=e,this.id=n,this.cfg=t,this}return t.prototype.match=function(t,e){return this.cfg===e},t}();const Uc=Wc;var Vc={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},Xc={x:"-40%",y:"-40%",width:"200%",height:"200%"},qc=function(){function t(t){this.type="filter",this.cfg={},this.type="filter";var e=nc("filter");return(0,b.each)(Xc,(function(t,n){e.setAttribute(n,t)})),this.el=e,this.id=(0,b.uniqueId)("filter_"),this.el.id=this.id,this.cfg=t,this._parseShadow(t,e),this}return t.prototype.match=function(t,e){if(this.type!==t)return!1;var n=!0,i=this.cfg;return(0,b.each)(Object.keys(i),(function(t){if(i[t]!==e[t])return n=!1,!1})),n},t.prototype.update=function(t,e){var n=this.cfg;return n[Vc[t]]=e,this._parseShadow(n,this.el),this},t.prototype._parseShadow=function(t,e){var n='<feDropShadow\n      dx="'+(t.dx||0)+'"\n      dy="'+(t.dy||0)+'"\n      stdDeviation="'+(t.blur?t.blur/10:0)+'"\n      flood-color="'+(t.color?t.color:"#000")+'"\n      flood-opacity="'+(t.opacity?t.opacity:1)+'"\n      />';e.innerHTML=n},t}();const Kc=qc;var $c=function(){function t(t,e){this.cfg={};var n=nc("marker"),i=(0,b.uniqueId)("marker_");n.setAttribute("id",i);var r=nc("path");r.setAttribute("stroke",t.stroke||"none"),r.setAttribute("fill",t.fill||"none"),n.appendChild(r),n.setAttribute("overflow","visible"),n.setAttribute("orient","auto-start-reverse"),this.el=n,this.child=r,this.id=i;var o=t["marker-start"===e?"startArrow":"endArrow"];return this.stroke=t.stroke||"#000",!0===o?this._setDefaultPath(e,r):(this.cfg=o,this._setMarker(t.lineWidth,r)),this}return t.prototype.match=function(){return!1},t.prototype._setDefaultPath=function(t,e){var n=this.el;e.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),n.setAttribute("refX",""+10*Math.cos(Math.PI/6)),n.setAttribute("refY","5")},t.prototype._setMarker=function(t,e){var n=this.el,i=this.cfg.path,r=this.cfg.d;(0,b.isArray)(i)&&(i=i.map((function(t){return t.join(" ")})).join("")),e.setAttribute("d",i),n.appendChild(e),r&&n.setAttribute("refX",""+r/t)},t.prototype.update=function(t){var e=this.child;e.attr?e.attr("fill",t):e.setAttribute("fill",t)},t}();const Zc=$c;const Jc=function(){function t(t){this.type="clip",this.cfg={};var e=nc("clipPath");this.el=e,this.id=(0,b.uniqueId)("clip_"),e.id=this.id;var n=t.cfg.el;return e.appendChild(n),this.cfg=t,this}return t.prototype.match=function(){return!1},t.prototype.remove=function(){var t=this.el;t.parentNode.removeChild(t)},t}();var Qc=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i;const th=function(){function t(t){this.cfg={};var e=nc("pattern");e.setAttribute("patternUnits","userSpaceOnUse");var n=nc("image");e.appendChild(n);var i=(0,b.uniqueId)("pattern_");e.id=i,this.el=e,this.id=i,this.cfg=t;var r=Qc.exec(t)[2];n.setAttribute("href",r);var o=new Image;function a(){e.setAttribute("width",""+o.width),e.setAttribute("height",""+o.height)}return r.match(/^data:/i)||(o.crossOrigin="Anonymous"),o.src=r,o.complete?a():(o.onload=a,o.src=o.src),this}return t.prototype.match=function(t,e){return this.cfg===e},t}();var eh=function(){function t(t){var e=nc("defs"),n=(0,b.uniqueId)("defs_");e.id=n,t.appendChild(e),this.children=[],this.defaultArrow={},this.el=e,this.canvas=t}return t.prototype.find=function(t,e){for(var n=this.children,i=null,r=0;r<n.length;r++)if(n[r].match(t,e)){i=n[r].id;break}return i},t.prototype.findById=function(t){for(var e=this.children,n=null,i=0;i<e.length;i++)if(e[i].id===t){n=e[i];break}return n},t.prototype.add=function(t){this.children.push(t),t.canvas=this.canvas,t.parent=this},t.prototype.getDefaultArrow=function(t,e){var n=t.stroke||t.strokeStyle;if(this.defaultArrow[n])return this.defaultArrow[n].id;var i=new Zc(t,e);return this.defaultArrow[n]=i,this.el.appendChild(i.el),this.add(i),i.id},t.prototype.addGradient=function(t){var e=new Uc(t);return this.el.appendChild(e.el),this.add(e),e.id},t.prototype.addArrow=function(t,e){var n=new Zc(t,e);return this.el.appendChild(n.el),this.add(n),n.id},t.prototype.addShadow=function(t){var e=new Kc(t);return this.el.appendChild(e.el),this.add(e),e.id},t.prototype.addPattern=function(t){var e=new th(t);return this.el.appendChild(e.el),this.add(e),e.id},t.prototype.addClip=function(t){var e=new Jc(t);return this.el.appendChild(e.el),this.add(e),e.id},t}();const nh=eh;var ih=function(t){function e(e){return t.call(this,(0,y.__assign)((0,y.__assign)({},e),{autoDraw:!0,renderer:"svg"}))||this}return(0,y.__extends)(e,t),e.prototype.getShapeBase=function(){return f},e.prototype.getGroupBase=function(){return cc},e.prototype.getShape=function(t,e,n){var i=n.target||n.srcElement;if(!tc[i.tagName]){for(var r=i.parentNode;r&&!tc[r.tagName];)r=r.parentNode;i=r}return this.find((function(t){return t.get("el")===i}))},e.prototype.createDom=function(){var t=nc("svg"),e=new nh(t);return t.setAttribute("width",""+this.get("width")),t.setAttribute("height",""+this.get("height")),this.set("context",e),t},e.prototype.onCanvasChange=function(t){var e=this.get("context"),n=this.get("el");if("sort"===t){var i=this.get("children");i&&i.length&&rc(this,(function(t,e){return i.indexOf(t)-i.indexOf(e)?1:0}))}else if("clear"===t){if(n){n.innerHTML="";var r=e.el;r.innerHTML="",n.appendChild(r)}}else"matrix"===t?oc(this):"clip"===t?ac(this,e):"changeSize"===t&&(n.setAttribute("width",""+this.get("width")),n.setAttribute("height",""+this.get("height")))},e.prototype.draw=function(){var t=this.get("context"),e=this.getChildren();ac(this,t),e.length&&sc(t,e)},e}(Mo);const rh=ih;function oh(t,e,n){var i=[0,0,0,0,0,0,0,0,0];return G(i,n),F(t,i,e)}function ah(t,e,n){var i=[0,0,0,0,0,0,0,0,0];return W(i,n),F(t,i,e)}function sh(t,e,n){var i=[0,0,0,0,0,0,0,0,0];return U(i,n),F(t,i,e)}function lh(t,e,n){return F(t,n,e)}function uh(t,e){for(var n=t?[].concat(t):[1,0,0,0,1,0,0,0,1],i=0,r=e.length;i<r;i++){var o=e[i];switch(o[0]){case"t":oh(n,n,[o[1],o[2]]);break;case"s":sh(n,n,[o[1],o[2]]);break;case"r":ah(n,n,o[1]);break;case"m":lh(n,n,o[1])}}return n}var ch=n(6767),hh=n.n(ch),dh=n(17621),fh=n.n(dh),ph=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function mh(t,e,n){var i;return(i=Math.round(t.h)>=60&&Math.round(t.h)<=240?n?Math.round(t.h)-2*e:Math.round(t.h)+2*e:n?Math.round(t.h)+2*e:Math.round(t.h)-2*e)<0?i+=360:i>=360&&(i-=360),i}function gh(t,e,n){return 0===t.h&&0===t.s?t.s:((i=n?t.s-.16*e:4===e?t.s+.16:t.s+.05*e)>1&&(i=1),n&&5===e&&i>.1&&(i=.1),i<.06&&(i=.06),Number(i.toFixed(2)));var i}function vh(t,e,n){var i;return(i=n?t.v+.05*e:t.v-.15*e)>1&&(i=1),Number(i.toFixed(2))}function yh(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[],i=fh()(t),r=5;r>0;r-=1){var o=i.toHsv(),a=fh()({h:mh(o,r,!0),s:gh(o,r,!0),v:vh(o,r,!0)}).toHexString();n.push(a)}n.push(i.toHexString());for(var s=1;s<=4;s+=1){var l=i.toHsv(),u=fh()({h:mh(l,s),s:gh(l,s),v:vh(l,s)}).toHexString();n.push(u)}return"dark"===e.theme?ph.map((function(t){var i=t.index,r=t.opacity;return fh().mix(e.backgroundColor||"#141414",n[i],100*r).toHexString()})):n}var bh={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},_h={},wh={};Object.keys(bh).forEach((function(t){_h[t]=yh(bh[t]),_h[t].primary=_h[t][5],wh[t]=yh(bh[t],{theme:"dark",backgroundColor:"#141414"}),wh[t].primary=wh[t][5]}));_h.red,_h.volcano,_h.gold,_h.orange,_h.yellow,_h.lime,_h.green,_h.cyan,_h.blue,_h.geekblue,_h.purple,_h.magenta,_h.grey;var xh=function(t,e,n){var i=hh()(t),r=hh()(e);return hh()([(1-n)*i.red()+n*r.red(),(1-n)*i.green()+n*r.green(),(1-n)*i.blue()+n*r.blue()]).rgb()},Mh=function(t,e,n,i){return void 0===e&&(e="#fff"),void 0===n&&(n="default"),void 0===i&&(i="rgb(150, 150, 150)"),"default"===n?function(t,e,n){void 0===e&&(e="#fff"),void 0===n&&(n="rgb(150, 150, 150)");var i=xh(e,t,.05).rgb().toString(),r=xh(e,t,.1).rgb().toString(),o=xh(e,t,.2).rgb().toString(),a=xh(e,t,.4).rgb().toString(),s=xh(e,n,.02).rgb().toString(),l=xh(e,n,.05).rgb().toString(),u=xh(e,n,.1).rgb().toString(),c=xh(e,n,.2).rgb().toString(),h=xh(e,n,.3).rgb().toString(),d=yh(t,{theme:"default",backgroundColor:e}),f=hh()(t).hex().toLowerCase(),p=d.indexOf(f),m=t;return-1!==p&&(m=d[p+1]),{mainStroke:t,mainFill:r,activeStroke:t,activeFill:i,inactiveStroke:a,inactiveFill:i,selectedStroke:t,selectedFill:e,highlightStroke:m,highlightFill:o,disableStroke:h,disableFill:l,edgeMainStroke:h,edgeActiveStroke:t,edgeInactiveStroke:c,edgeSelectedStroke:t,edgeHighlightStroke:t,edgeDisableStroke:u,comboMainStroke:h,comboMainFill:s,comboActiveStroke:t,comboActiveFill:i,comboInactiveStroke:h,comboInactiveFill:s,comboSelectedStroke:t,comboSelectedFill:s,comboHighlightStroke:m,comboHighlightFill:s,comboDisableStroke:c,comboDisableFill:l}}(t,e,"rgb(150, 150, 150)"):function(t,e,n){void 0===e&&(e="#fff"),void 0===n&&(n="#777");var i=xh(e,t,.2).rgb().toString(),r=xh(e,t,.3).rgb().toString(),o=xh(e,t,.6).rgb().toString(),a=xh(e,t,.8).rgb().toString(),s=xh(e,n,.2).rgb().toString(),l=xh(e,n,.25).rgb().toString(),u=xh(e,n,.3).rgb().toString(),c=xh(e,n,.4).rgb().toString(),h=xh(e,n,.5).rgb().toString(),d=yh(t,{theme:"dark",backgroundColor:e}),f=hh()(t).hex().toLowerCase(),p=d.indexOf(f),m=t;return-1!==p&&(m=d[p+1]),{mainStroke:a,mainFill:i,activeStroke:t,activeFill:r,inactiveStroke:a,inactiveFill:i,selectedStroke:t,selectedFill:i,highlightStroke:t,highlightFill:o,disableStroke:h,disableFill:l,edgeMainStroke:n,edgeActiveStroke:t,edgeInactiveStroke:n,edgeSelectedStroke:t,edgeHighlightStroke:t,edgeDisableStroke:u,comboMainStroke:c,comboMainFill:l,comboActiveStroke:t,comboActiveFill:s,comboInactiveStroke:c,comboInactiveFill:l,comboSelectedStroke:t,comboSelectedFill:s,comboHighlightStroke:m,comboHighlightFill:l,comboDisableStroke:c,comboDisableFill:s}}(t,e,"#777")},Eh=function(t,e,n,i){void 0===e&&(e="#fff"),void 0===n&&(n="default"),void 0===i&&(i="rgb(150, 150, 150)");var r=[];return t.forEach((function(t){r.push(Mh(t,e,n,i))})),r},Sh="rgb(0, 0, 0)",kh=Mh("rgb(95, 149, 255)","rgb(255, 255, 255)");const Ch={version:"0.3.11",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:kh.mainStroke,fill:kh.mainFill},size:20,color:kh.mainStroke,linkPoints:{size:8,lineWidth:1,fill:kh.activeFill,stroke:kh.activeStroke}},nodeStateStyles:{active:{fill:kh.activeFill,stroke:kh.activeStroke,lineWidth:2,shadowColor:kh.mainStroke,shadowBlur:10},selected:{fill:kh.selectedFill,stroke:kh.selectedStroke,lineWidth:4,shadowColor:kh.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:kh.highlightFill,stroke:kh.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:kh.inactiveFill,stroke:kh.inactiveStroke,lineWidth:1},disable:{fill:kh.disableFill,stroke:kh.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:Sh,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:kh.edgeMainStroke,lineAppendWidth:2},color:kh.edgeMainStroke},edgeStateStyles:{active:{stroke:kh.edgeActiveStroke,lineWidth:1},selected:{stroke:kh.edgeSelectedStroke,lineWidth:2,shadowColor:kh.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:kh.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:kh.edgeInactiveStroke,lineWidth:1},disable:{stroke:kh.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:Sh,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:kh.comboMainFill,lineWidth:1,stroke:kh.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:kh.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:kh.comboActiveStroke,lineWidth:1,fill:kh.comboActiveFill},selected:{stroke:kh.comboSelectedStroke,lineWidth:2,fill:kh.comboSelectedFill,shadowColor:kh.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:kh.comboHighlightStroke,lineWidth:2,fill:kh.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:kh.comboInactiveStroke,fill:kh.comboInactiveFill,lineWidth:1},disable:{stroke:kh.comboDisableStroke,fill:kh.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},textWaterMarkerConfig:{width:150,height:100,compatible:!1,text:{x:0,y:60,lineHeight:20,rotate:20,fontSize:14,fontFamily:"Microsoft YaHei",fill:"rgba(0, 0, 0, 0.1)",baseline:"Middle"}},imageWaterMarkerConfig:{width:150,height:130,compatible:!1,image:{x:0,y:0,width:30,height:20,rotate:0}},waterMarkerImage:"https://gw.alipayobjects.com/os/s/prod/antv/assets/image/logo-with-text-73b8a.svg"};function Th(t,e,n){if(t){if("function"==typeof t.addEventListener)return t.addEventListener(e,n,!1),{remove:function(){t.removeEventListener(e,n,!1)}};if("function"==typeof t.attachEvent)return t.attachEvent("on"+e,n),{remove:function(){t.detachEvent("on"+e,n)}}}}var Dh=gl.cloneEvent,Lh=gl.isViewportChanged,Ah=function(t){function e(e){var n=t.call(this,e)||this;return n.extendEvents=[],n.dragging=!1,n.preItem=null,n.graph=e,n.destroyed=!1,n.initEvents(),n}return(0,y.__extends)(e,t),e.prototype.initEvents=function(){var t=this.graph,e=this.extendEvents,n=void 0===e?[]:e,i=t.get("canvas"),r=i.get("el"),o=(0,b.wrapBehavior)(this,"onCanvasEvents"),a=(0,b.wrapBehavior)(this,"onExtendEvents"),s=(0,b.wrapBehavior)(this,"onWheelEvent");i.off("*").on("*",o),this.canvasHandler=o,n.push(Th(r,"DOMMouseScroll",s)),n.push(Th(r,"mousewheel",s)),"undefined"!=typeof window&&(n.push(Th(window,"keydown",a)),n.push(Th(window,"keyup",a)),n.push(Th(window,"focus",a)))},e.getItemRoot=function(t){for(;t&&!t.get("item");)t=t.get("parent");return t},e.prototype.onCanvasEvents=function(t){var n=this.graph,i=n.get("canvas"),r=t.target,o=t.type;t.canvasX=t.x,t.canvasY=t.y;var a={x:t.canvasX,y:t.canvasY},s=n.get("group").getMatrix();if(s||(s=[1,0,0,0,1,0,0,0,1]),Lh(s)&&(a=n.getPointByClient(t.clientX,t.clientY)),t.x=a.x,t.y=a.y,t.currentTarget=n,r===i)return"mousemove"!==o&&"mouseleave"!==o||this.handleMouseMove(t,"canvas"),t.target=i,t.item=null,n.emit(o,t),void n.emit("canvas:"+o,t);var l=e.getItemRoot(r);if(l){var u=l.get("item");if(!u.destroyed){var c=u.getType();if(t.target=r,t.item=u,t.canvasX===t.x&&t.canvasY===t.y){var h=n.getCanvasByPoint(t.x,t.y);t.canvasX=h.x,t.canvasY=h.y}n.emit(o,t),t.name&&!t.name.includes(":")?n.emit(c+":"+o,t):n.emit(t.name,t),"dragstart"===o&&(this.dragging=!0),"dragend"===o&&(this.dragging=!1),"mousemove"===o&&this.handleMouseMove(t,c)}}else n.emit(o,t)},e.prototype.onExtendEvents=function(t){this.graph.emit(t.type,t)},e.prototype.onWheelEvent=function(t){(0,b.isNil)(t.wheelDelta)&&(t.wheelDelta=-t.detail),this.graph.emit("wheel",t)},e.prototype.handleMouseMove=function(t,e){var n=this.graph,i=this.preItem,r=n.get("canvas"),o=t.target===r?null:t.item;t=Dh(t),i&&i!==o&&!i.destroyed&&(t.item=i,this.emitCustomEvent(i.getType(),"mouseleave",t),this.dragging&&this.emitCustomEvent(i.getType(),"dragleave",t)),o&&i!==o&&(t.item=o,this.emitCustomEvent(e,"mouseenter",t),this.dragging&&this.emitCustomEvent(e,"dragenter",t)),this.preItem=o},e.prototype.emitCustomEvent=function(t,e,n){n.type=e,this.graph.emit(t+":"+e,n)},e.prototype.destroy=function(){var t=this,e=t.graph,n=t.canvasHandler,i=t.extendEvents;e.get("canvas").off("*",n),(0,b.each)(i,(function(t){t.remove()})),this.dragging=!1,this.preItem=null,this.extendEvents.length=0,this.canvasHandler=null,this.destroyed=!0},e}(_l);const Oh=Ah;class Ph{constructor(){this.nodes=[],this.edges=[],this.combos=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=()=>{}}layout(t){return this.init(t),this.execute(!0)}init(t){this.nodes=t.nodes||[],this.edges=t.edges||[],this.combos=t.combos||[]}execute(t){}executeWithWorker(){}getDefaultCfg(){return{}}updateCfg(t){t&&Object.assign(this,t)}getType(){return"base"}destroy(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0}}const Ih=t=>"string"==typeof t,Nh=/-(\w)/g,Rh=((t=>{const e=Object.create(null)})((t=>t.replace(Nh,((t,e)=>e?e.toUpperCase():"")))),Array.isArray),Yh=t=>"number"==typeof t,jh=t=>Number.isNaN(Number(t)),Fh=t=>null!==t&&"object"==typeof t,Bh=t=>{if(null===t)return t;if(t instanceof Date)return new Date(t.getTime());if(t instanceof Array){const e=[];return t.forEach((t=>{e.push(t)})),e.map((t=>Bh(t)))}if("object"==typeof t&&t!=={}){const e=Object.assign({},t);return Object.keys(e).forEach((t=>{e[t]=Bh(e[t])})),e}return t},zh=(t,e)=>{const n=t[e];return Fh(n)?n.cell:n},Hh=(t,e,n)=>{const i=[];for(let e=0;e<t;e++)i[e]=0;return n?(n.forEach((t=>{const n=zh(t,"source"),r=zh(t,"target");n&&(i[e[n]]+=1),r&&(i[e[r]]+=1)})),i):i},Gh=t=>{const e=[],n=t.length;for(let i=0;i<n;i+=1){e[i]=[];for(let r=0;r<n;r+=1)i===r?e[i][r]=0:0!==t[i][r]&&t[i][r]?e[i][r]=t[i][r]:e[i][r]=1/0}for(let t=0;t<n;t+=1)for(let i=0;i<n;i+=1)for(let r=0;r<n;r+=1)e[i][r]>e[i][t]+e[t][r]&&(e[i][r]=e[i][t]+e[t][r]);return e},Wh=(t,e)=>{const{nodes:n,edges:i}=t,r=[],o={};if(!n)throw new Error("invalid nodes data!");return n&&n.forEach(((t,e)=>{o[t.id]=e;r.push([])})),i&&i.forEach((t=>{const n=zh(t,"source"),i=zh(t,"target"),a=o[n],s=o[i];r[a][s]=1,e||(r[s][a]=1)})),r},Uh=(t,e)=>{if(t&&t.children)for(let n=t.children.length-1;n>=0;n--)if(!Uh(t.children[n],e))return;return!!e(t)},Vh=(t,e)=>{"function"==typeof e&&Uh(t,e)},Xh=t=>"function"==typeof t,qh=new Map,Kh=(t,e)=>{if(qh.get(t)&&console.warn(`The layout with the name ${t} exists already, it will be overridden`),Fh(e)){class n extends Ph{constructor(t){super();const n=this,i={},r=n.getDefaultCfg();Object.assign(i,r,e,t),Object.keys(i).forEach((t=>{const e=i[t];n[t]=e}))}}qh.set(t,n)}else qh.set(t,e)};const $h=(t,e)=>{let n;return n=t?Yh(t)?e=>t:t:t=>e||1,n};function Zh(t,e,n,i){if(isNaN(e)||isNaN(n))return t;var r,o,a,s,l,u,c,h,d,f=t._root,p={data:i},m=t._x0,g=t._y0,v=t._x1,y=t._y1;if(!f)return t._root=p,t;for(;f.length;)if((u=e>=(o=(m+v)/2))?m=o:v=o,(c=n>=(a=(g+y)/2))?g=a:y=a,r=f,!(f=f[h=c<<1|u]))return r[h]=p,t;if(s=+t._x.call(null,f.data),l=+t._y.call(null,f.data),e===s&&n===l)return p.next=f,r?r[h]=p:t._root=p,t;do{r=r?r[h]=new Array(4):t._root=new Array(4),(u=e>=(o=(m+v)/2))?m=o:v=o,(c=n>=(a=(g+y)/2))?g=a:y=a}while((h=c<<1|u)==(d=(l>=a)<<1|s>=o));return r[d]=f,r[h]=p,t}function Jh(t,e,n,i,r){this.node=t,this.x0=e,this.y0=n,this.x1=i,this.y1=r}function Qh(t){return t[0]}function td(t){return t[1]}function ed(t,e,n){var i=new nd(null==e?Qh:e,null==n?td:n,NaN,NaN,NaN,NaN);return null==t?i:i.addAll(t)}function nd(t,e,n,i,r,o){this._x=t,this._y=e,this._x0=n,this._y0=i,this._x1=r,this._y1=o,this._root=void 0}function id(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var rd=ed.prototype=nd.prototype;function od(t){return function(){return t}}function ad(t){return 1e-6*(t()-.5)}rd.copy=function(){var t,e,n=new nd(this._x,this._y,this._x0,this._y0,this._x1,this._y1),i=this._root;if(!i)return n;if(!i.length)return n._root=id(i),n;for(t=[{source:i,target:n._root=new Array(4)}];i=t.pop();)for(var r=0;r<4;++r)(e=i.source[r])&&(e.length?t.push({source:e,target:i.target[r]=new Array(4)}):i.target[r]=id(e));return n},rd.add=function(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return Zh(this.cover(e,n),e,n,t)},rd.addAll=function(t){var e,n,i,r,o=t.length,a=new Array(o),s=new Array(o),l=1/0,u=1/0,c=-1/0,h=-1/0;for(n=0;n<o;++n)isNaN(i=+this._x.call(null,e=t[n]))||isNaN(r=+this._y.call(null,e))||(a[n]=i,s[n]=r,i<l&&(l=i),i>c&&(c=i),r<u&&(u=r),r>h&&(h=r));if(l>c||u>h)return this;for(this.cover(l,u).cover(c,h),n=0;n<o;++n)Zh(this,a[n],s[n],t[n]);return this},rd.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,i=this._y0,r=this._x1,o=this._y1;if(isNaN(n))r=(n=Math.floor(t))+1,o=(i=Math.floor(e))+1;else{for(var a,s,l=r-n||1,u=this._root;n>t||t>=r||i>e||e>=o;)switch(s=(e<i)<<1|t<n,(a=new Array(4))[s]=u,u=a,l*=2,s){case 0:r=n+l,o=i+l;break;case 1:n=r-l,o=i+l;break;case 2:r=n+l,i=o-l;break;case 3:n=r-l,i=o-l}this._root&&this._root.length&&(this._root=u)}return this._x0=n,this._y0=i,this._x1=r,this._y1=o,this},rd.data=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},rd.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},rd.find=function(t,e,n){var i,r,o,a,s,l,u,c=this._x0,h=this._y0,d=this._x1,f=this._y1,p=[],m=this._root;for(m&&p.push(new Jh(m,c,h,d,f)),null==n?n=1/0:(c=t-n,h=e-n,d=t+n,f=e+n,n*=n);l=p.pop();)if(!(!(m=l.node)||(r=l.x0)>d||(o=l.y0)>f||(a=l.x1)<c||(s=l.y1)<h))if(m.length){var g=(r+a)/2,v=(o+s)/2;p.push(new Jh(m[3],g,v,a,s),new Jh(m[2],r,v,g,s),new Jh(m[1],g,o,a,v),new Jh(m[0],r,o,g,v)),(u=(e>=v)<<1|t>=g)&&(l=p[p.length-1],p[p.length-1]=p[p.length-1-u],p[p.length-1-u]=l)}else{var y=t-+this._x.call(null,m.data),b=e-+this._y.call(null,m.data),_=y*y+b*b;if(_<n){var w=Math.sqrt(n=_);c=t-w,h=e-w,d=t+w,f=e+w,i=m.data}}return i},rd.remove=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var e,n,i,r,o,a,s,l,u,c,h,d,f=this._root,p=this._x0,m=this._y0,g=this._x1,v=this._y1;if(!f)return this;if(f.length)for(;;){if((u=o>=(s=(p+g)/2))?p=s:g=s,(c=a>=(l=(m+v)/2))?m=l:v=l,e=f,!(f=f[h=c<<1|u]))return this;if(!f.length)break;(e[h+1&3]||e[h+2&3]||e[h+3&3])&&(n=e,d=h)}for(;f.data!==t;)if(i=f,!(f=f.next))return this;return(r=f.next)&&delete f.next,i?(r?i.next=r:delete i.next,this):e?(r?e[h]=r:delete e[h],(f=e[0]||e[1]||e[2]||e[3])&&f===(e[3]||e[2]||e[1]||e[0])&&!f.length&&(n?n[d]=f:this._root=f),this):(this._root=r,this)},rd.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},rd.root=function(){return this._root},rd.size=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},rd.visit=function(t){var e,n,i,r,o,a,s=[],l=this._root;for(l&&s.push(new Jh(l,this._x0,this._y0,this._x1,this._y1));e=s.pop();)if(!t(l=e.node,i=e.x0,r=e.y0,o=e.x1,a=e.y1)&&l.length){var u=(i+o)/2,c=(r+a)/2;(n=l[3])&&s.push(new Jh(n,u,c,o,a)),(n=l[2])&&s.push(new Jh(n,i,c,u,a)),(n=l[1])&&s.push(new Jh(n,u,r,o,c)),(n=l[0])&&s.push(new Jh(n,i,r,u,c))}return this},rd.visitAfter=function(t){var e,n=[],i=[];for(this._root&&n.push(new Jh(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var r=e.node;if(r.length){var o,a=e.x0,s=e.y0,l=e.x1,u=e.y1,c=(a+l)/2,h=(s+u)/2;(o=r[0])&&n.push(new Jh(o,a,s,c,h)),(o=r[1])&&n.push(new Jh(o,c,s,l,h)),(o=r[2])&&n.push(new Jh(o,a,h,c,u)),(o=r[3])&&n.push(new Jh(o,c,h,l,u))}i.push(e)}for(;e=i.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},rd.x=function(t){return arguments.length?(this._x=t,this):this._x},rd.y=function(t){return arguments.length?(this._y=t,this):this._y};var sd=n(92626);const ld=4294967296;function ud(t){return t.x}function cd(t){return t.y}var hd=Math.PI*(3-Math.sqrt(5));function dd(t){var e,n=1,i=.001,r=1-Math.pow(i,1/300),o=0,a=.6,s=new Map,l=(0,Tr.HT)(h),u=(0,sd.Z)("tick","end"),c=function(){let t=1;return()=>(t=(1664525*t+1013904223)%ld)/ld}();function h(){d(),u.call("tick",e),n<i&&(l.stop(),u.call("end",e))}function d(i){var l,u,c=t.length;void 0===i&&(i=1);for(var h=0;h<i;++h)for(n+=(o-n)*r,s.forEach((function(t){t(n)})),l=0;l<c;++l)null==(u=t[l]).fx?u.x+=u.vx*=a:(u.x=u.fx,u.vx=0),null==u.fy?u.y+=u.vy*=a:(u.y=u.fy,u.vy=0);return e}function f(){for(var e,n=0,i=t.length;n<i;++n){if((e=t[n]).index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var r=10*Math.sqrt(.5+n),o=n*hd;e.x=r*Math.cos(o),e.y=r*Math.sin(o)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function p(e){return e.initialize&&e.initialize(t,c),e}return null==t&&(t=[]),f(),e={tick:d,restart:function(){return l.restart(h),e},stop:function(){return l.stop(),e},nodes:function(n){return arguments.length?(t=n,f(),s.forEach(p),e):t},alpha:function(t){return arguments.length?(n=+t,e):n},alphaMin:function(t){return arguments.length?(i=+t,e):i},alphaDecay:function(t){return arguments.length?(r=+t,e):+r},alphaTarget:function(t){return arguments.length?(o=+t,e):o},velocityDecay:function(t){return arguments.length?(a=1-t,e):1-a},randomSource:function(t){return arguments.length?(c=t,s.forEach(p),e):c},force:function(t,n){return arguments.length>1?(null==n?s.delete(t):s.set(t,p(n)),e):s.get(t)},find:function(e,n,i){var r,o,a,s,l,u=0,c=t.length;for(null==i?i=1/0:i*=i,u=0;u<c;++u)(a=(r=e-(s=t[u]).x)*r+(o=n-s.y)*o)<i&&(l=s,i=a);return l},on:function(t,n){return arguments.length>1?(u.on(t,n),e):u.on(t)}}}function fd(){var t,e,n,i,r,o=od(-30),a=1,s=1/0,l=.81;function u(n){var r,o=t.length,a=ed(t,ud,cd).visitAfter(h);for(i=n,r=0;r<o;++r)e=t[r],a.visit(d)}function c(){if(t){var e,n,i=t.length;for(r=new Array(i),e=0;e<i;++e)n=t[e],r[n.index]=+o(n,e,t)}}function h(t){var e,n,i,o,a,s=0,l=0;if(t.length){for(i=o=a=0;a<4;++a)(e=t[a])&&(n=Math.abs(e.value))&&(s+=e.value,l+=n,i+=n*e.x,o+=n*e.y);t.x=i/l,t.y=o/l}else{(e=t).x=e.data.x,e.y=e.data.y;do{s+=r[e.data.index]}while(e=e.next)}t.value=s}function d(t,o,u,c){if(!t.value)return!0;var h=t.x-e.x,d=t.y-e.y,f=c-o,p=h*h+d*d;if(f*f/l<p)return p<s&&(0===h&&(p+=(h=ad(n))*h),0===d&&(p+=(d=ad(n))*d),p<a&&(p=Math.sqrt(a*p)),e.vx+=h*t.value*i/p,e.vy+=d*t.value*i/p),!0;if(!(t.length||p>=s)){(t.data!==e||t.next)&&(0===h&&(p+=(h=ad(n))*h),0===d&&(p+=(d=ad(n))*d),p<a&&(p=Math.sqrt(a*p)));do{t.data!==e&&(f=r[t.data.index]*i/p,e.vx+=h*f,e.vy+=d*f)}while(t=t.next)}}return u.initialize=function(e,i){t=e,n=i,c()},u.strength=function(t){return arguments.length?(o="function"==typeof t?t:od(+t),c(),u):o},u.distanceMin=function(t){return arguments.length?(a=t*t,u):Math.sqrt(a)},u.distanceMax=function(t){return arguments.length?(s=t*t,u):Math.sqrt(s)},u.theta=function(t){return arguments.length?(l=t*t,u):Math.sqrt(l)},u}function pd(t){return t.index}function md(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function gd(t){var e,n,i,r,o,a,s=pd,l=function(t){return 1/Math.min(r[t.source.index],r[t.target.index])},u=od(30),c=1;function h(i){for(var r=0,s=t.length;r<c;++r)for(var l,u,h,d,f,p,m,g=0;g<s;++g)u=(l=t[g]).source,d=(h=l.target).x+h.vx-u.x-u.vx||ad(a),f=h.y+h.vy-u.y-u.vy||ad(a),d*=p=((p=Math.sqrt(d*d+f*f))-n[g])/p*i*e[g],f*=p,h.vx-=d*(m=o[g]),h.vy-=f*m,u.vx+=d*(m=1-m),u.vy+=f*m}function d(){if(i){var a,l,u=i.length,c=t.length,h=new Map(i.map(((t,e)=>[s(t,e,i),t])));for(a=0,r=new Array(u);a<c;++a)(l=t[a]).index=a,"object"!=typeof l.source&&(l.source=md(h,l.source)),"object"!=typeof l.target&&(l.target=md(h,l.target)),r[l.source.index]=(r[l.source.index]||0)+1,r[l.target.index]=(r[l.target.index]||0)+1;for(a=0,o=new Array(c);a<c;++a)l=t[a],o[a]=r[l.source.index]/(r[l.source.index]+r[l.target.index]);e=new Array(c),f(),n=new Array(c),p()}}function f(){if(i)for(var n=0,r=t.length;n<r;++n)e[n]=+l(t[n],n,t)}function p(){if(i)for(var e=0,r=t.length;e<r;++e)n[e]=+u(t[e],e,t)}return null==t&&(t=[]),h.initialize=function(t,e){i=t,a=e,d()},h.links=function(e){return arguments.length?(t=e,d(),h):t},h.id=function(t){return arguments.length?(s=t,h):s},h.iterations=function(t){return arguments.length?(c=+t,h):c},h.strength=function(t){return arguments.length?(l="function"==typeof t?t:od(+t),f(),h):l},h.distance=function(t){return arguments.length?(u="function"==typeof t?t:od(+t),p(),h):u},h}function vd(t){return t.x+t.vx}function yd(t){return t.y+t.vy}function bd(t){var e,n,i,r=1,o=1;function a(){for(var t,a,l,u,c,h,d,f=e.length,p=0;p<o;++p)for(a=ed(e,vd,yd).visitAfter(s),t=0;t<f;++t)l=e[t],h=n[l.index],d=h*h,u=l.x+l.vx,c=l.y+l.vy,a.visit(m);function m(t,e,n,o,a){var s=t.data,f=t.r,p=h+f;if(!s)return e>u+p||o<u-p||n>c+p||a<c-p;if(s.index>l.index){var m=u-s.x-s.vx,g=c-s.y-s.vy,v=m*m+g*g;v<p*p&&(0===m&&(v+=(m=ad(i))*m),0===g&&(v+=(g=ad(i))*g),v=(p-(v=Math.sqrt(v)))/v*r,l.vx+=(m*=v)*(p=(f*=f)/(d+f)),l.vy+=(g*=v)*p,s.vx-=m*(p=1-p),s.vy-=g*p)}}}function s(t){if(t.data)return t.r=n[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function l(){if(e){var i,r,o=e.length;for(n=new Array(o),i=0;i<o;++i)r=e[i],n[r.index]=+t(r,i,e)}}return"function"!=typeof t&&(t=od(null==t?1:+t)),a.initialize=function(t,n){e=t,i=n,l()},a.iterations=function(t){return arguments.length?(o=+t,a):o},a.strength=function(t){return arguments.length?(r=+t,a):r},a.radius=function(e){return arguments.length?(t="function"==typeof e?e:od(+e),l(),a):t},a}function _d(t){var e,n,i,r=od(.1);function o(t){for(var r,o=0,a=e.length;o<a;++o)(r=e[o]).vx+=(i[o]-r.x)*n[o]*t}function a(){if(e){var o,a=e.length;for(n=new Array(a),i=new Array(a),o=0;o<a;++o)n[o]=isNaN(i[o]=+t(e[o],o,e))?0:+r(e[o],o,e)}}return"function"!=typeof t&&(t=od(null==t?0:+t)),o.initialize=function(t){e=t,a()},o.strength=function(t){return arguments.length?(r="function"==typeof t?t:od(+t),a(),o):r},o.x=function(e){return arguments.length?(t="function"==typeof e?e:od(+e),a(),o):t},o}function wd(t){var e,n,i,r=od(.1);function o(t){for(var r,o=0,a=e.length;o<a;++o)(r=e[o]).vy+=(i[o]-r.y)*n[o]*t}function a(){if(e){var o,a=e.length;for(n=new Array(a),i=new Array(a),o=0;o<a;++o)n[o]=isNaN(i[o]=+t(e[o],o,e))?0:+r(e[o],o,e)}}return"function"!=typeof t&&(t=od(null==t?0:+t)),o.initialize=function(t){e=t,a()},o.strength=function(t){return arguments.length?(r="function"==typeof t?t:od(+t),a(),o):r},o.y=function(e){return arguments.length?(t="function"==typeof e?e:od(+e),a(),o):t},o}function xd(){function t(t){return()=>t}let e,n=t=>t.cluster,i=t(1),r=t(-1),o=t(100),a=t(.1),s=[0,0],l=[],u={},c=[],h=100,d=100,f={none:{x:0,y:0}},p=[],m="force",g=!0,v=.1;function y(t){if(!g)return y;e.tick(),_();for(let e,i=0,r=l.length,o=t*v;i<r;++i)e=l[i],e.vx+=(f[n(e)].x-e.x)*o,e.vy+=(f[n(e)].y-e.y)*o}function b(){l&&function(){if(!l||!l.length)return;if(void 0===n(l[0]))throw Error("Couldnt find the grouping attribute for the nodes. Make sure to set it up with forceInABox.groupBy('clusterAttr') before calling .links()");const t=function(){const t=[],e=[],r={};let o=[],a={},s=[];return a=function(t){const e={};return t.forEach((t=>{const i=n(t);e[i]||(e[i]={count:0,sumforceNodeSize:0})})),t.forEach((t=>{const r=n(t),o=i(t),a=e[r];a.count=a.count+1,a.sumforceNodeSize=a.sumforceNodeSize+Math.PI*(o*o)*1.3,e[r]=a})),e}(l),s=function(t){const e={},i=[];t.forEach((t=>{const i=function(t){const e=zh(t,"source"),i=zh(t,"target"),r=n(u[e]),o=n(u[i]);return r<=o?`${r}~${o}`:`${o}~${r}`}(t);let r=0;void 0!==e[i]&&(r=e[i]),r+=1,e[i]=r}));return Object.entries(e).forEach((([t,e])=>{const n=t.split("~")[0],r=t.split("~")[1];void 0!==n&&void 0!==r&&i.push({source:n,target:r,count:e})})),i}(c),o=Object.keys(a),o.forEach(((e,n)=>{const i=a[e];t.push({id:e,size:i.count,r:Math.sqrt(i.sumforceNodeSize/Math.PI)}),r[e]=n})),s.forEach((t=>{const n=zh(t,"source"),i=zh(t,"target"),o=r[n],a=r[i];void 0!==o&&void 0!==a&&e.push({source:o,target:a,count:t.count})})),{nodes:t,links:e}}();e=dd(t.nodes).force("x",_d(h).strength(.1)).force("y",wd(d).strength(.1)).force("collide",bd((t=>t.r)).iterations(4)).force("charge",fd().strength(r)).force("links",gd(t.nodes.length?t.links:[]).distance(o).strength(a)),p=e.nodes(),_()}()}function _(){return f={none:{x:0,y:0}},p.forEach((t=>{f[t.id]={x:t.x-s[0],y:t.y-s[1]}})),f}function w(t){u={},t.forEach((t=>{u[t.id]=t}))}return y.initialize=t=>{l=t,b()},y.template=function(t){return arguments.length?(m=t,b(),y):m},y.groupBy=function(t){return arguments.length?"string"==typeof t?(n=e=>e[t],y):(n=t,y):n},y.enableGrouping=function(t){return arguments.length?(g=t,y):g},y.strength=function(t){return arguments.length?(v=t,y):v},y.centerX=function(t){return arguments.length?(h=t,y):h},y.centerY=function(t){return arguments.length?(d=t,y):d},y.nodes=function(t){return arguments.length?(w(t||[]),l=t||[],y):l},y.links=function(t){return arguments.length?(c=t||[],b(),y):c},y.forceNodeSize=function(e){return arguments.length?(i="function"==typeof e?e:t(+e),b(),y):i},y.nodeSize=y.forceNodeSize,y.forceCharge=function(e){return arguments.length?(r="function"==typeof e?e:t(+e),b(),y):r},y.forceLinkDistance=function(e){return arguments.length?(o="function"==typeof e?e:t(+e),b(),y):o},y.forceLinkStrength=function(e){return arguments.length?(a="function"==typeof e?e:t(+e),b(),y):a},y.offset=function(t){return arguments.length?(s=t,y):s},y.getFocis=_,y}const Md="LAYOUT_TICK",Ed="GPU_LAYOUT_END";function Sd(){return"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope}function kd(t,e){const n=t.degree,i=e.degree;return n<i?-1:n>i?1:0}var Cd=n(70681),Td=n.n(Cd);function Dd(t,e,n){let i;return i=t||(Yh(e)?()=>e:()=>n),i}const Ld=Object.prototype.toString;function Ad(t){return Ld.call(t).endsWith("Array]")}const Od=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Ad(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");var n=e.fromIndex,i=void 0===n?0:n,r=e.toIndex,o=void 0===r?t.length:r;if(i<0||i>=t.length||!Number.isInteger(i))throw new Error("fromIndex must be a positive integer smaller than length");if(o<=i||o>t.length||!Number.isInteger(o))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var a=t[i],s=i+1;s<o;s++)t[s]>a&&(a=t[s]);return a};const Pd=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Ad(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");var n=e.fromIndex,i=void 0===n?0:n,r=e.toIndex,o=void 0===r?t.length:r;if(i<0||i>=t.length||!Number.isInteger(i))throw new Error("fromIndex must be a positive integer smaller than length");if(o<=i||o>t.length||!Number.isInteger(o))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var a=t[i],s=i+1;s<o;s++)t[s]<a&&(a=t[s]);return a};function Id(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Ad(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");if(void 0!==n.output){if(!Ad(n.output))throw new TypeError("output option must be an array if specified");e=n.output}else e=new Array(t.length);var i=Pd(t),r=Od(t);if(i===r)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var o=n.min,a=void 0===o?n.autoMinMax?i:0:o,s=n.max,l=void 0===s?n.autoMinMax?r:1:s;if(a>=l)throw new RangeError("min option must be smaller than max option");for(var u=(l-a)/(r-i),c=0;c<t.length;c++)e[c]=(t[c]-i)*u+a;return e}const Nd=" ".repeat(2),Rd=" ".repeat(4);function Yd(t,e={}){const{maxRows:n=15,maxColumns:i=10,maxNumSize:r=8}=e;return`${t.constructor.name} {\n${Nd}[\n${Rd}${function(t,e,n,i){const{rows:r,columns:o}=t,a=Math.min(r,e),s=Math.min(o,n),l=[];for(let e=0;e<a;e++){let n=[];for(let r=0;r<s;r++)n.push(jd(t.get(e,r),i));l.push(`${n.join(" ")}`)}s!==o&&(l[l.length-1]+=` ... ${o-n} more columns`);a!==r&&l.push(`... ${r-e} more rows`);return l.join(`\n${Rd}`)}(t,n,i,r)}\n${Nd}]\n${Nd}rows: ${t.rows}\n${Nd}columns: ${t.columns}\n}`}function jd(t,e){const n=String(t);if(n.length<=e)return n.padEnd(e," ");const i=t.toPrecision(e-2);if(i.length<=e)return i;const r=t.toExponential(e-2),o=r.indexOf("e"),a=r.slice(o);return r.slice(0,e-a.length)+a}function Fd(t,e,n){let i=n?t.rows:t.rows-1;if(e<0||e>i)throw new RangeError("Row index out of range")}function Bd(t,e,n){let i=n?t.columns:t.columns-1;if(e<0||e>i)throw new RangeError("Column index out of range")}function zd(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.columns)throw new RangeError("vector size must be the same as the number of columns");return e}function Hd(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.rows)throw new RangeError("vector size must be the same as the number of rows");return e}function Gd(t,e){if("object"!=typeof e)throw new TypeError("unexpected type for row indices");if(e.some((e=>e<0||e>=t.rows)))throw new RangeError("row indices are out of range");return Array.isArray(e)||(e=Array.from(e)),e}function Wd(t,e){if("object"!=typeof e)throw new TypeError("unexpected type for column indices");let n=e.some((e=>e<0||e>=t.columns));if(n)throw new RangeError("column indices are out of range");return Array.isArray(e)||(e=Array.from(e)),e}function Ud(t,e,n,i,r){if(5!==arguments.length)throw new RangeError("expected 4 arguments");if(Xd("startRow",e),Xd("endRow",n),Xd("startColumn",i),Xd("endColumn",r),e>n||i>r||e<0||e>=t.rows||n<0||n>=t.rows||i<0||i>=t.columns||r<0||r>=t.columns)throw new RangeError("Submatrix indices are out of range")}function Vd(t,e=0){let n=[];for(let i=0;i<t;i++)n.push(e);return n}function Xd(t,e){if("number"!=typeof e)throw new TypeError(`${t} must be a number`)}function qd(t){if(t.isEmpty())throw new Error("Empty matrix has no elements to index")}class Kd{static from1DArray(t,e,n){if(t*e!==n.length)throw new RangeError("data length does not match given dimensions");let i=new Zd(t,e);for(let r=0;r<t;r++)for(let t=0;t<e;t++)i.set(r,t,n[r*e+t]);return i}static rowVector(t){let e=new Zd(1,t.length);for(let n=0;n<t.length;n++)e.set(0,n,t[n]);return e}static columnVector(t){let e=new Zd(t.length,1);for(let n=0;n<t.length;n++)e.set(n,0,t[n]);return e}static zeros(t,e){return new Zd(t,e)}static ones(t,e){return new Zd(t,e).fill(1)}static rand(t,e,n={}){if("object"!=typeof n)throw new TypeError("options must be an object");const{random:i=Math.random}=n;let r=new Zd(t,e);for(let n=0;n<t;n++)for(let t=0;t<e;t++)r.set(n,t,i());return r}static randInt(t,e,n={}){if("object"!=typeof n)throw new TypeError("options must be an object");const{min:i=0,max:r=1e3,random:o=Math.random}=n;if(!Number.isInteger(i))throw new TypeError("min must be an integer");if(!Number.isInteger(r))throw new TypeError("max must be an integer");if(i>=r)throw new RangeError("min must be smaller than max");let a=r-i,s=new Zd(t,e);for(let n=0;n<t;n++)for(let t=0;t<e;t++){let e=i+Math.round(o()*a);s.set(n,t,e)}return s}static eye(t,e,n){void 0===e&&(e=t),void 0===n&&(n=1);let i=Math.min(t,e),r=this.zeros(t,e);for(let t=0;t<i;t++)r.set(t,t,n);return r}static diag(t,e,n){let i=t.length;void 0===e&&(e=i),void 0===n&&(n=e);let r=Math.min(i,e,n),o=this.zeros(e,n);for(let e=0;e<r;e++)o.set(e,e,t[e]);return o}static min(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);let n=t.rows,i=t.columns,r=new Zd(n,i);for(let o=0;o<n;o++)for(let n=0;n<i;n++)r.set(o,n,Math.min(t.get(o,n),e.get(o,n)));return r}static max(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);let n=t.rows,i=t.columns,r=new this(n,i);for(let o=0;o<n;o++)for(let n=0;n<i;n++)r.set(o,n,Math.max(t.get(o,n),e.get(o,n)));return r}static checkMatrix(t){return Kd.isMatrix(t)?t:new Zd(t)}static isMatrix(t){return null!=t&&"Matrix"===t.klass}get size(){return this.rows*this.columns}apply(t){if("function"!=typeof t)throw new TypeError("callback must be a function");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)t.call(this,e,n);return this}to1DArray(){let t=[];for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)t.push(this.get(e,n));return t}to2DArray(){let t=[];for(let e=0;e<this.rows;e++){t.push([]);for(let n=0;n<this.columns;n++)t[e].push(this.get(e,n))}return t}toJSON(){return this.to2DArray()}isRowVector(){return 1===this.rows}isColumnVector(){return 1===this.columns}isVector(){return 1===this.rows||1===this.columns}isSquare(){return this.rows===this.columns}isEmpty(){return 0===this.rows||0===this.columns}isSymmetric(){if(this.isSquare()){for(let t=0;t<this.rows;t++)for(let e=0;e<=t;e++)if(this.get(t,e)!==this.get(e,t))return!1;return!0}return!1}isEchelonForm(){let t=0,e=0,n=-1,i=!0,r=!1;for(;t<this.rows&&i;){for(e=0,r=!1;e<this.columns&&!1===r;)0===this.get(t,e)?e++:1===this.get(t,e)&&e>n?(r=!0,n=e):(i=!1,r=!0);t++}return i}isReducedEchelonForm(){let t=0,e=0,n=-1,i=!0,r=!1;for(;t<this.rows&&i;){for(e=0,r=!1;e<this.columns&&!1===r;)0===this.get(t,e)?e++:1===this.get(t,e)&&e>n?(r=!0,n=e):(i=!1,r=!0);for(let n=e+1;n<this.rows;n++)0!==this.get(t,n)&&(i=!1);t++}return i}echelonForm(){let t=this.clone(),e=0,n=0;for(;e<t.rows&&n<t.columns;){let i=e;for(let r=e;r<t.rows;r++)t.get(r,n)>t.get(i,n)&&(i=r);if(0===t.get(i,n))n++;else{t.swapRows(e,i);let r=t.get(e,n);for(let i=n;i<t.columns;i++)t.set(e,i,t.get(e,i)/r);for(let i=e+1;i<t.rows;i++){let r=t.get(i,n)/t.get(e,n);t.set(i,n,0);for(let o=n+1;o<t.columns;o++)t.set(i,o,t.get(i,o)-t.get(e,o)*r)}e++,n++}}return t}reducedEchelonForm(){let t=this.echelonForm(),e=t.columns,n=t.rows,i=n-1;for(;i>=0;)if(0===t.maxRow(i))i--;else{let r=0,o=!1;for(;r<n&&!1===o;)1===t.get(i,r)?o=!0:r++;for(let n=0;n<i;n++){let o=t.get(n,r);for(let a=r;a<e;a++){let e=t.get(n,a)-o*t.get(i,a);t.set(n,a,e)}}i--}return t}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(t={}){if("object"!=typeof t)throw new TypeError("options must be an object");const{rows:e=1,columns:n=1}=t;if(!Number.isInteger(e)||e<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(n)||n<=0)throw new TypeError("columns must be a positive integer");let i=new Zd(this.rows*e,this.columns*n);for(let t=0;t<e;t++)for(let e=0;e<n;e++)i.setSubMatrix(this,this.rows*t,this.columns*e);return i}fill(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,t);return this}neg(){return this.mulS(-1)}getRow(t){Fd(this,t);let e=[];for(let n=0;n<this.columns;n++)e.push(this.get(t,n));return e}getRowVector(t){return Zd.rowVector(this.getRow(t))}setRow(t,e){Fd(this,t),e=zd(this,e);for(let n=0;n<this.columns;n++)this.set(t,n,e[n]);return this}swapRows(t,e){Fd(this,t),Fd(this,e);for(let n=0;n<this.columns;n++){let i=this.get(t,n);this.set(t,n,this.get(e,n)),this.set(e,n,i)}return this}getColumn(t){Bd(this,t);let e=[];for(let n=0;n<this.rows;n++)e.push(this.get(n,t));return e}getColumnVector(t){return Zd.columnVector(this.getColumn(t))}setColumn(t,e){Bd(this,t),e=Hd(this,e);for(let n=0;n<this.rows;n++)this.set(n,t,e[n]);return this}swapColumns(t,e){Bd(this,t),Bd(this,e);for(let n=0;n<this.rows;n++){let i=this.get(n,t);this.set(n,t,this.get(n,e)),this.set(n,e,i)}return this}addRowVector(t){t=zd(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t[n]);return this}subRowVector(t){t=zd(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t[n]);return this}mulRowVector(t){t=zd(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t[n]);return this}divRowVector(t){t=zd(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t[n]);return this}addColumnVector(t){t=Hd(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t[e]);return this}subColumnVector(t){t=Hd(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t[e]);return this}mulColumnVector(t){t=Hd(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t[e]);return this}divColumnVector(t){t=Hd(this,t);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t[e]);return this}mulRow(t,e){Fd(this,t);for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e);return this}mulColumn(t,e){Bd(this,t);for(let n=0;n<this.rows;n++)this.set(n,t,this.get(n,t)*e);return this}max(){if(this.isEmpty())return NaN;let t=this.get(0,0);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.get(e,n)>t&&(t=this.get(e,n));return t}maxIndex(){qd(this);let t=this.get(0,0),e=[0,0];for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.get(n,i)>t&&(t=this.get(n,i),e[0]=n,e[1]=i);return e}min(){if(this.isEmpty())return NaN;let t=this.get(0,0);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.get(e,n)<t&&(t=this.get(e,n));return t}minIndex(){qd(this);let t=this.get(0,0),e=[0,0];for(let n=0;n<this.rows;n++)for(let i=0;i<this.columns;i++)this.get(n,i)<t&&(t=this.get(n,i),e[0]=n,e[1]=i);return e}maxRow(t){if(Fd(this,t),this.isEmpty())return NaN;let e=this.get(t,0);for(let n=1;n<this.columns;n++)this.get(t,n)>e&&(e=this.get(t,n));return e}maxRowIndex(t){Fd(this,t),qd(this);let e=this.get(t,0),n=[t,0];for(let i=1;i<this.columns;i++)this.get(t,i)>e&&(e=this.get(t,i),n[1]=i);return n}minRow(t){if(Fd(this,t),this.isEmpty())return NaN;let e=this.get(t,0);for(let n=1;n<this.columns;n++)this.get(t,n)<e&&(e=this.get(t,n));return e}minRowIndex(t){Fd(this,t),qd(this);let e=this.get(t,0),n=[t,0];for(let i=1;i<this.columns;i++)this.get(t,i)<e&&(e=this.get(t,i),n[1]=i);return n}maxColumn(t){if(Bd(this,t),this.isEmpty())return NaN;let e=this.get(0,t);for(let n=1;n<this.rows;n++)this.get(n,t)>e&&(e=this.get(n,t));return e}maxColumnIndex(t){Bd(this,t),qd(this);let e=this.get(0,t),n=[0,t];for(let i=1;i<this.rows;i++)this.get(i,t)>e&&(e=this.get(i,t),n[0]=i);return n}minColumn(t){if(Bd(this,t),this.isEmpty())return NaN;let e=this.get(0,t);for(let n=1;n<this.rows;n++)this.get(n,t)<e&&(e=this.get(n,t));return e}minColumnIndex(t){Bd(this,t),qd(this);let e=this.get(0,t),n=[0,t];for(let i=1;i<this.rows;i++)this.get(i,t)<e&&(e=this.get(i,t),n[0]=i);return n}diag(){let t=Math.min(this.rows,this.columns),e=[];for(let n=0;n<t;n++)e.push(this.get(n,n));return e}norm(t="frobenius"){let e=0;if("max"===t)return this.max();if("frobenius"===t){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)e+=this.get(t,n)*this.get(t,n);return Math.sqrt(e)}throw new RangeError(`unknown norm type: ${t}`)}cumulativeSum(){let t=0;for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)t+=this.get(e,n),this.set(e,n,t);return this}dot(t){Kd.isMatrix(t)&&(t=t.to1DArray());let e=this.to1DArray();if(e.length!==t.length)throw new RangeError("vectors do not have the same size");let n=0;for(let i=0;i<e.length;i++)n+=e[i]*t[i];return n}mmul(t){t=Zd.checkMatrix(t);let e=this.rows,n=this.columns,i=t.columns,r=new Zd(e,i),o=new Float64Array(n);for(let a=0;a<i;a++){for(let e=0;e<n;e++)o[e]=t.get(e,a);for(let t=0;t<e;t++){let e=0;for(let i=0;i<n;i++)e+=this.get(t,i)*o[i];r.set(t,a,e)}}return r}strassen2x2(t){t=Zd.checkMatrix(t);let e=new Zd(2,2);const n=this.get(0,0),i=t.get(0,0),r=this.get(0,1),o=t.get(0,1),a=this.get(1,0),s=t.get(1,0),l=this.get(1,1),u=t.get(1,1),c=(n+l)*(i+u),h=(a+l)*i,d=n*(o-u),f=l*(s-i),p=(n+r)*u,m=c+f-p+(r-l)*(s+u),g=d+p,v=h+f,y=c-h+d+(a-n)*(i+o);return e.set(0,0,m),e.set(0,1,g),e.set(1,0,v),e.set(1,1,y),e}strassen3x3(t){t=Zd.checkMatrix(t);let e=new Zd(3,3);const n=this.get(0,0),i=this.get(0,1),r=this.get(0,2),o=this.get(1,0),a=this.get(1,1),s=this.get(1,2),l=this.get(2,0),u=this.get(2,1),c=this.get(2,2),h=t.get(0,0),d=t.get(0,1),f=t.get(0,2),p=t.get(1,0),m=t.get(1,1),g=t.get(1,2),v=t.get(2,0),y=t.get(2,1),b=t.get(2,2),_=(n-o)*(-d+m),w=(-n+o+a)*(h-d+m),x=(o+a)*(-h+d),M=n*h,E=(-n+l+u)*(h-f+g),S=(-n+l)*(f-g),k=(l+u)*(-h+f),C=(-r+u+c)*(m+v-y),T=(r-c)*(m-y),D=r*v,L=(u+c)*(-v+y),A=(-r+a+s)*(g+v-b),O=(r-s)*(g-b),P=(a+s)*(-v+b),I=M+D+i*p,N=(n+i+r-o-a-u-c)*m+w+x+M+C+D+L,R=M+E+k+(n+i+r-a-s-l-u)*g+D+A+P,Y=_+a*(-h+d+p-m-g-v+b)+w+M+D+A+O,j=_+w+x+M+s*y,F=D+A+O+P+o*f,B=M+E+S+u*(-h+f+p-m-g-v+y)+C+T+D,z=C+T+D+L+l*d,H=M+E+S+k+c*b;return e.set(0,0,I),e.set(0,1,N),e.set(0,2,R),e.set(1,0,Y),e.set(1,1,j),e.set(1,2,F),e.set(2,0,B),e.set(2,1,z),e.set(2,2,H),e}mmulStrassen(t){t=Zd.checkMatrix(t);let e=this.clone(),n=e.rows,i=e.columns,r=t.rows,o=t.columns;function a(t,e,n){let i=t.rows,r=t.columns;if(i===e&&r===n)return t;{let i=Kd.zeros(e,n);return i=i.setSubMatrix(t,0,0),i}}i!==r&&console.warn(`Multiplying ${n} x ${i} and ${r} x ${o} matrix: dimensions do not match.`);let s=Math.max(n,r),l=Math.max(i,o);return e=a(e,s,l),function t(e,n,i,r){if(i<=512||r<=512)return e.mmul(n);i%2==1&&r%2==1?(e=a(e,i+1,r+1),n=a(n,i+1,r+1)):i%2==1?(e=a(e,i+1,r),n=a(n,i+1,r)):r%2==1&&(e=a(e,i,r+1),n=a(n,i,r+1));let o=parseInt(e.rows/2,10),s=parseInt(e.columns/2,10),l=e.subMatrix(0,o-1,0,s-1),u=n.subMatrix(0,o-1,0,s-1),c=e.subMatrix(0,o-1,s,e.columns-1),h=n.subMatrix(0,o-1,s,n.columns-1),d=e.subMatrix(o,e.rows-1,0,s-1),f=n.subMatrix(o,n.rows-1,0,s-1),p=e.subMatrix(o,e.rows-1,s,e.columns-1),m=n.subMatrix(o,n.rows-1,s,n.columns-1),g=t(Kd.add(l,p),Kd.add(u,m),o,s),v=t(Kd.add(d,p),u,o,s),y=t(l,Kd.sub(h,m),o,s),b=t(p,Kd.sub(f,u),o,s),_=t(Kd.add(l,c),m,o,s),w=t(Kd.sub(d,l),Kd.add(u,h),o,s),x=t(Kd.sub(c,p),Kd.add(f,m),o,s),M=Kd.add(g,b);M.sub(_),M.add(x);let E=Kd.add(y,_),S=Kd.add(v,b),k=Kd.sub(g,v);k.add(y),k.add(w);let C=Kd.zeros(2*M.rows,2*M.columns);return C=C.setSubMatrix(M,0,0),C=C.setSubMatrix(E,M.rows,0),C=C.setSubMatrix(S,0,M.columns),C=C.setSubMatrix(k,M.rows,M.columns),C.subMatrix(0,i-1,0,r-1)}(e,t=a(t,s,l),s,l)}scaleRows(t={}){if("object"!=typeof t)throw new TypeError("options must be an object");const{min:e=0,max:n=1}=t;if(!Number.isFinite(e))throw new TypeError("min must be a number");if(!Number.isFinite(n))throw new TypeError("max must be a number");if(e>=n)throw new RangeError("min must be smaller than max");let i=new Zd(this.rows,this.columns);for(let t=0;t<this.rows;t++){const r=this.getRow(t);r.length>0&&Id(r,{min:e,max:n,output:r}),i.setRow(t,r)}return i}scaleColumns(t={}){if("object"!=typeof t)throw new TypeError("options must be an object");const{min:e=0,max:n=1}=t;if(!Number.isFinite(e))throw new TypeError("min must be a number");if(!Number.isFinite(n))throw new TypeError("max must be a number");if(e>=n)throw new RangeError("min must be smaller than max");let i=new Zd(this.rows,this.columns);for(let t=0;t<this.columns;t++){const r=this.getColumn(t);r.length&&Id(r,{min:e,max:n,output:r}),i.setColumn(t,r)}return i}flipRows(){const t=Math.ceil(this.columns/2);for(let e=0;e<this.rows;e++)for(let n=0;n<t;n++){let t=this.get(e,n),i=this.get(e,this.columns-1-n);this.set(e,n,i),this.set(e,this.columns-1-n,t)}return this}flipColumns(){const t=Math.ceil(this.rows/2);for(let e=0;e<this.columns;e++)for(let n=0;n<t;n++){let t=this.get(n,e),i=this.get(this.rows-1-n,e);this.set(n,e,i),this.set(this.rows-1-n,e,t)}return this}kroneckerProduct(t){t=Zd.checkMatrix(t);let e=this.rows,n=this.columns,i=t.rows,r=t.columns,o=new Zd(e*i,n*r);for(let a=0;a<e;a++)for(let e=0;e<n;e++)for(let n=0;n<i;n++)for(let s=0;s<r;s++)o.set(i*a+n,r*e+s,this.get(a,e)*t.get(n,s));return o}kroneckerSum(t){if(t=Zd.checkMatrix(t),!this.isSquare()||!t.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");let e=this.rows,n=t.rows,i=this.kroneckerProduct(Zd.eye(n,n)),r=Zd.eye(e,e).kroneckerProduct(t);return i.add(r)}transpose(){let t=new Zd(this.columns,this.rows);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)t.set(n,e,this.get(e,n));return t}sortRows(t=$d){for(let e=0;e<this.rows;e++)this.setRow(e,this.getRow(e).sort(t));return this}sortColumns(t=$d){for(let e=0;e<this.columns;e++)this.setColumn(e,this.getColumn(e).sort(t));return this}subMatrix(t,e,n,i){Ud(this,t,e,n,i);let r=new Zd(e-t+1,i-n+1);for(let o=t;o<=e;o++)for(let e=n;e<=i;e++)r.set(o-t,e-n,this.get(o,e));return r}subMatrixRow(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=this.columns-1),e>n||e<0||e>=this.columns||n<0||n>=this.columns)throw new RangeError("Argument out of range");let i=new Zd(t.length,n-e+1);for(let r=0;r<t.length;r++)for(let o=e;o<=n;o++){if(t[r]<0||t[r]>=this.rows)throw new RangeError(`Row index out of range: ${t[r]}`);i.set(r,o-e,this.get(t[r],o))}return i}subMatrixColumn(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=this.rows-1),e>n||e<0||e>=this.rows||n<0||n>=this.rows)throw new RangeError("Argument out of range");let i=new Zd(n-e+1,t.length);for(let r=0;r<t.length;r++)for(let o=e;o<=n;o++){if(t[r]<0||t[r]>=this.columns)throw new RangeError(`Column index out of range: ${t[r]}`);i.set(o-e,r,this.get(o,t[r]))}return i}setSubMatrix(t,e,n){if((t=Zd.checkMatrix(t)).isEmpty())return this;Ud(this,e,e+t.rows-1,n,n+t.columns-1);for(let i=0;i<t.rows;i++)for(let r=0;r<t.columns;r++)this.set(e+i,n+r,t.get(i,r));return this}selection(t,e){let n=function(t,e,n){return{row:Gd(t,e),column:Wd(t,n)}}(this,t,e),i=new Zd(t.length,e.length);for(let t=0;t<n.row.length;t++){let e=n.row[t];for(let r=0;r<n.column.length;r++){let o=n.column[r];i.set(t,r,this.get(e,o))}}return i}trace(){let t=Math.min(this.rows,this.columns),e=0;for(let n=0;n<t;n++)e+=this.get(n,n);return e}clone(){let t=new Zd(this.rows,this.columns);for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)t.set(e,n,this.get(e,n));return t}sum(t){switch(t){case"row":return function(t){let e=Vd(t.rows);for(let n=0;n<t.rows;++n)for(let i=0;i<t.columns;++i)e[n]+=t.get(n,i);return e}(this);case"column":return function(t){let e=Vd(t.columns);for(let n=0;n<t.rows;++n)for(let i=0;i<t.columns;++i)e[i]+=t.get(n,i);return e}(this);case void 0:return function(t){let e=0;for(let n=0;n<t.rows;n++)for(let i=0;i<t.columns;i++)e+=t.get(n,i);return e}(this);default:throw new Error(`invalid option: ${t}`)}}product(t){switch(t){case"row":return function(t){let e=Vd(t.rows,1);for(let n=0;n<t.rows;++n)for(let i=0;i<t.columns;++i)e[n]*=t.get(n,i);return e}(this);case"column":return function(t){let e=Vd(t.columns,1);for(let n=0;n<t.rows;++n)for(let i=0;i<t.columns;++i)e[i]*=t.get(n,i);return e}(this);case void 0:return function(t){let e=1;for(let n=0;n<t.rows;n++)for(let i=0;i<t.columns;i++)e*=t.get(n,i);return e}(this);default:throw new Error(`invalid option: ${t}`)}}mean(t){const e=this.sum(t);switch(t){case"row":for(let t=0;t<this.rows;t++)e[t]/=this.columns;return e;case"column":for(let t=0;t<this.columns;t++)e[t]/=this.rows;return e;case void 0:return e/this.size;default:throw new Error(`invalid option: ${t}`)}}variance(t,e={}){if("object"==typeof t&&(e=t,t=void 0),"object"!=typeof e)throw new TypeError("options must be an object");const{unbiased:n=!0,mean:i=this.mean(t)}=e;if("boolean"!=typeof n)throw new TypeError("unbiased must be a boolean");switch(t){case"row":if(!Array.isArray(i))throw new TypeError("mean must be an array");return function(t,e,n){const i=t.rows,r=t.columns,o=[];for(let a=0;a<i;a++){let i=0,s=0,l=0;for(let e=0;e<r;e++)l=t.get(a,e)-n[a],i+=l,s+=l*l;e?o.push((s-i*i/r)/(r-1)):o.push((s-i*i/r)/r)}return o}(this,n,i);case"column":if(!Array.isArray(i))throw new TypeError("mean must be an array");return function(t,e,n){const i=t.rows,r=t.columns,o=[];for(let a=0;a<r;a++){let r=0,s=0,l=0;for(let e=0;e<i;e++)l=t.get(e,a)-n[a],r+=l,s+=l*l;e?o.push((s-r*r/i)/(i-1)):o.push((s-r*r/i)/i)}return o}(this,n,i);case void 0:if("number"!=typeof i)throw new TypeError("mean must be a number");return function(t,e,n){const i=t.rows,r=t.columns,o=i*r;let a=0,s=0,l=0;for(let e=0;e<i;e++)for(let i=0;i<r;i++)l=t.get(e,i)-n,a+=l,s+=l*l;return e?(s-a*a/o)/(o-1):(s-a*a/o)/o}(this,n,i);default:throw new Error(`invalid option: ${t}`)}}standardDeviation(t,e){"object"==typeof t&&(e=t,t=void 0);const n=this.variance(t,e);if(void 0===t)return Math.sqrt(n);for(let t=0;t<n.length;t++)n[t]=Math.sqrt(n[t]);return n}center(t,e={}){if("object"==typeof t&&(e=t,t=void 0),"object"!=typeof e)throw new TypeError("options must be an object");const{center:n=this.mean(t)}=e;switch(t){case"row":if(!Array.isArray(n))throw new TypeError("center must be an array");return function(t,e){for(let n=0;n<t.rows;n++)for(let i=0;i<t.columns;i++)t.set(n,i,t.get(n,i)-e[n])}(this,n),this;case"column":if(!Array.isArray(n))throw new TypeError("center must be an array");return function(t,e){for(let n=0;n<t.rows;n++)for(let i=0;i<t.columns;i++)t.set(n,i,t.get(n,i)-e[i])}(this,n),this;case void 0:if("number"!=typeof n)throw new TypeError("center must be a number");return function(t,e){for(let n=0;n<t.rows;n++)for(let i=0;i<t.columns;i++)t.set(n,i,t.get(n,i)-e)}(this,n),this;default:throw new Error(`invalid option: ${t}`)}}scale(t,e={}){if("object"==typeof t&&(e=t,t=void 0),"object"!=typeof e)throw new TypeError("options must be an object");let n=e.scale;switch(t){case"row":if(void 0===n)n=function(t){const e=[];for(let n=0;n<t.rows;n++){let i=0;for(let e=0;e<t.columns;e++)i+=Math.pow(t.get(n,e),2)/(t.columns-1);e.push(Math.sqrt(i))}return e}(this);else if(!Array.isArray(n))throw new TypeError("scale must be an array");return function(t,e){for(let n=0;n<t.rows;n++)for(let i=0;i<t.columns;i++)t.set(n,i,t.get(n,i)/e[n])}(this,n),this;case"column":if(void 0===n)n=function(t){const e=[];for(let n=0;n<t.columns;n++){let i=0;for(let e=0;e<t.rows;e++)i+=Math.pow(t.get(e,n),2)/(t.rows-1);e.push(Math.sqrt(i))}return e}(this);else if(!Array.isArray(n))throw new TypeError("scale must be an array");return function(t,e){for(let n=0;n<t.rows;n++)for(let i=0;i<t.columns;i++)t.set(n,i,t.get(n,i)/e[i])}(this,n),this;case void 0:if(void 0===n)n=function(t){const e=t.size-1;let n=0;for(let i=0;i<t.columns;i++)for(let r=0;r<t.rows;r++)n+=Math.pow(t.get(r,i),2)/e;return Math.sqrt(n)}(this);else if("number"!=typeof n)throw new TypeError("scale must be a number");return function(t,e){for(let n=0;n<t.rows;n++)for(let i=0;i<t.columns;i++)t.set(n,i,t.get(n,i)/e)}(this,n),this;default:throw new Error(`invalid option: ${t}`)}}toString(t){return Yd(this,t)}}function $d(t,e){return t-e}Kd.prototype.klass="Matrix","undefined"!=typeof Symbol&&(Kd.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return Yd(this)}),Kd.random=Kd.rand,Kd.randomInt=Kd.randInt,Kd.diagonal=Kd.diag,Kd.prototype.diagonal=Kd.prototype.diag,Kd.identity=Kd.eye,Kd.prototype.negate=Kd.prototype.neg,Kd.prototype.tensorProduct=Kd.prototype.kroneckerProduct;class Zd extends Kd{constructor(t,e){if(super(),Zd.isMatrix(t))return t.clone();if(Number.isInteger(t)&&t>=0){if(this.data=[],!(Number.isInteger(e)&&e>=0))throw new TypeError("nColumns must be a positive integer");for(let n=0;n<t;n++)this.data.push(new Float64Array(e))}else{if(!Array.isArray(t))throw new TypeError("First argument must be a positive number or an array");{const n=t;if("number"!=typeof(e=(t=n.length)?n[0].length:0))throw new TypeError("Data must be a 2D array with at least one element");this.data=[];for(let i=0;i<t;i++){if(n[i].length!==e)throw new RangeError("Inconsistent array dimensions");this.data.push(Float64Array.from(n[i]))}}}this.rows=t,this.columns=e}set(t,e,n){return this.data[t][e]=n,this}get(t,e){return this.data[t][e]}removeRow(t){return Fd(this,t),this.data.splice(t,1),this.rows-=1,this}addRow(t,e){return void 0===e&&(e=t,t=this.rows),Fd(this,t,!0),e=Float64Array.from(zd(this,e)),this.data.splice(t,0,e),this.rows+=1,this}removeColumn(t){Bd(this,t);for(let e=0;e<this.rows;e++){const n=new Float64Array(this.columns-1);for(let i=0;i<t;i++)n[i]=this.data[e][i];for(let i=t+1;i<this.columns;i++)n[i-1]=this.data[e][i];this.data[e]=n}return this.columns-=1,this}addColumn(t,e){void 0===e&&(e=t,t=this.columns),Bd(this,t,!0),e=Hd(this,e);for(let n=0;n<this.rows;n++){const i=new Float64Array(this.columns+1);let r=0;for(;r<t;r++)i[r]=this.data[n][r];for(i[r++]=e[n];r<this.columns+1;r++)i[r]=this.data[n][r-1];this.data[n]=i}return this.columns+=1,this}}!function(t,e){t.prototype.add=function(t){return"number"==typeof t?this.addS(t):this.addM(t)},t.prototype.addS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t);return this},t.prototype.addM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t.get(e,n));return this},t.add=function(t,n){return new e(t).add(n)},t.prototype.sub=function(t){return"number"==typeof t?this.subS(t):this.subM(t)},t.prototype.subS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t);return this},t.prototype.subM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t.get(e,n));return this},t.sub=function(t,n){return new e(t).sub(n)},t.prototype.subtract=t.prototype.sub,t.prototype.subtractS=t.prototype.subS,t.prototype.subtractM=t.prototype.subM,t.subtract=t.sub,t.prototype.mul=function(t){return"number"==typeof t?this.mulS(t):this.mulM(t)},t.prototype.mulS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t);return this},t.prototype.mulM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t.get(e,n));return this},t.mul=function(t,n){return new e(t).mul(n)},t.prototype.multiply=t.prototype.mul,t.prototype.multiplyS=t.prototype.mulS,t.prototype.multiplyM=t.prototype.mulM,t.multiply=t.mul,t.prototype.div=function(t){return"number"==typeof t?this.divS(t):this.divM(t)},t.prototype.divS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t);return this},t.prototype.divM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t.get(e,n));return this},t.div=function(t,n){return new e(t).div(n)},t.prototype.divide=t.prototype.div,t.prototype.divideS=t.prototype.divS,t.prototype.divideM=t.prototype.divM,t.divide=t.div,t.prototype.mod=function(t){return"number"==typeof t?this.modS(t):this.modM(t)},t.prototype.modS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)%t);return this},t.prototype.modM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)%t.get(e,n));return this},t.mod=function(t,n){return new e(t).mod(n)},t.prototype.modulus=t.prototype.mod,t.prototype.modulusS=t.prototype.modS,t.prototype.modulusM=t.prototype.modM,t.modulus=t.mod,t.prototype.and=function(t){return"number"==typeof t?this.andS(t):this.andM(t)},t.prototype.andS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)&t);return this},t.prototype.andM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)&t.get(e,n));return this},t.and=function(t,n){return new e(t).and(n)},t.prototype.or=function(t){return"number"==typeof t?this.orS(t):this.orM(t)},t.prototype.orS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)|t);return this},t.prototype.orM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)|t.get(e,n));return this},t.or=function(t,n){return new e(t).or(n)},t.prototype.xor=function(t){return"number"==typeof t?this.xorS(t):this.xorM(t)},t.prototype.xorS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)^t);return this},t.prototype.xorM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)^t.get(e,n));return this},t.xor=function(t,n){return new e(t).xor(n)},t.prototype.leftShift=function(t){return"number"==typeof t?this.leftShiftS(t):this.leftShiftM(t)},t.prototype.leftShiftS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)<<t);return this},t.prototype.leftShiftM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)<<t.get(e,n));return this},t.leftShift=function(t,n){return new e(t).leftShift(n)},t.prototype.signPropagatingRightShift=function(t){return"number"==typeof t?this.signPropagatingRightShiftS(t):this.signPropagatingRightShiftM(t)},t.prototype.signPropagatingRightShiftS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)>>t);return this},t.prototype.signPropagatingRightShiftM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)>>t.get(e,n));return this},t.signPropagatingRightShift=function(t,n){return new e(t).signPropagatingRightShift(n)},t.prototype.rightShift=function(t){return"number"==typeof t?this.rightShiftS(t):this.rightShiftM(t)},t.prototype.rightShiftS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)>>>t);return this},t.prototype.rightShiftM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)>>>t.get(e,n));return this},t.rightShift=function(t,n){return new e(t).rightShift(n)},t.prototype.zeroFillRightShift=t.prototype.rightShift,t.prototype.zeroFillRightShiftS=t.prototype.rightShiftS,t.prototype.zeroFillRightShiftM=t.prototype.rightShiftM,t.zeroFillRightShift=t.rightShift,t.prototype.not=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,~this.get(t,e));return this},t.not=function(t){return new e(t).not()},t.prototype.abs=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.abs(this.get(t,e)));return this},t.abs=function(t){return new e(t).abs()},t.prototype.acos=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.acos(this.get(t,e)));return this},t.acos=function(t){return new e(t).acos()},t.prototype.acosh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.acosh(this.get(t,e)));return this},t.acosh=function(t){return new e(t).acosh()},t.prototype.asin=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.asin(this.get(t,e)));return this},t.asin=function(t){return new e(t).asin()},t.prototype.asinh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.asinh(this.get(t,e)));return this},t.asinh=function(t){return new e(t).asinh()},t.prototype.atan=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.atan(this.get(t,e)));return this},t.atan=function(t){return new e(t).atan()},t.prototype.atanh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.atanh(this.get(t,e)));return this},t.atanh=function(t){return new e(t).atanh()},t.prototype.cbrt=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.cbrt(this.get(t,e)));return this},t.cbrt=function(t){return new e(t).cbrt()},t.prototype.ceil=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.ceil(this.get(t,e)));return this},t.ceil=function(t){return new e(t).ceil()},t.prototype.clz32=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.clz32(this.get(t,e)));return this},t.clz32=function(t){return new e(t).clz32()},t.prototype.cos=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.cos(this.get(t,e)));return this},t.cos=function(t){return new e(t).cos()},t.prototype.cosh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.cosh(this.get(t,e)));return this},t.cosh=function(t){return new e(t).cosh()},t.prototype.exp=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.exp(this.get(t,e)));return this},t.exp=function(t){return new e(t).exp()},t.prototype.expm1=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.expm1(this.get(t,e)));return this},t.expm1=function(t){return new e(t).expm1()},t.prototype.floor=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.floor(this.get(t,e)));return this},t.floor=function(t){return new e(t).floor()},t.prototype.fround=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.fround(this.get(t,e)));return this},t.fround=function(t){return new e(t).fround()},t.prototype.log=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.log(this.get(t,e)));return this},t.log=function(t){return new e(t).log()},t.prototype.log1p=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.log1p(this.get(t,e)));return this},t.log1p=function(t){return new e(t).log1p()},t.prototype.log10=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.log10(this.get(t,e)));return this},t.log10=function(t){return new e(t).log10()},t.prototype.log2=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.log2(this.get(t,e)));return this},t.log2=function(t){return new e(t).log2()},t.prototype.round=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.round(this.get(t,e)));return this},t.round=function(t){return new e(t).round()},t.prototype.sign=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.sign(this.get(t,e)));return this},t.sign=function(t){return new e(t).sign()},t.prototype.sin=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.sin(this.get(t,e)));return this},t.sin=function(t){return new e(t).sin()},t.prototype.sinh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.sinh(this.get(t,e)));return this},t.sinh=function(t){return new e(t).sinh()},t.prototype.sqrt=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.sqrt(this.get(t,e)));return this},t.sqrt=function(t){return new e(t).sqrt()},t.prototype.tan=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.tan(this.get(t,e)));return this},t.tan=function(t){return new e(t).tan()},t.prototype.tanh=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.tanh(this.get(t,e)));return this},t.tanh=function(t){return new e(t).tanh()},t.prototype.trunc=function(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.columns;e++)this.set(t,e,Math.trunc(this.get(t,e)));return this},t.trunc=function(t){return new e(t).trunc()},t.pow=function(t,n){return new e(t).pow(n)},t.prototype.pow=function(t){return"number"==typeof t?this.powS(t):this.powM(t)},t.prototype.powS=function(t){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,Math.pow(this.get(e,n),t));return this},t.prototype.powM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)this.set(e,n,Math.pow(this.get(e,n),t.get(e,n)));return this}}(Kd,Zd);class Jd extends Kd{constructor(t){super(),this.data=t,this.rows=t.length,this.columns=t[0].length}set(t,e,n){return this.data[t][e]=n,this}get(t,e){return this.data[t][e]}}function Qd(t,e){let n=0;return Math.abs(t)>Math.abs(e)?(n=e/t,Math.abs(t)*Math.sqrt(1+n*n)):0!==e?(n=t/e,Math.abs(e)*Math.sqrt(1+n*n)):0}class tf{constructor(t,e={}){if((t=Jd.checkMatrix(t)).isEmpty())throw new Error("Matrix must be non-empty");let n=t.rows,i=t.columns;const{computeLeftSingularVectors:r=!0,computeRightSingularVectors:o=!0,autoTranspose:a=!1}=e;let s,l=Boolean(r),u=Boolean(o),c=!1;if(n<i)if(a){s=t.transpose(),n=s.rows,i=s.columns,c=!0;let e=l;l=u,u=e}else s=t.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else s=t.clone();let h=Math.min(n,i),d=Math.min(n+1,i),f=new Float64Array(d),p=new Zd(n,h),m=new Zd(i,i),g=new Float64Array(i),v=new Float64Array(n),y=new Float64Array(d);for(let t=0;t<d;t++)y[t]=t;let b=Math.min(n-1,i),_=Math.max(0,Math.min(i-2,n)),w=Math.max(b,_);for(let t=0;t<w;t++){if(t<b){f[t]=0;for(let e=t;e<n;e++)f[t]=Qd(f[t],s.get(e,t));if(0!==f[t]){s.get(t,t)<0&&(f[t]=-f[t]);for(let e=t;e<n;e++)s.set(e,t,s.get(e,t)/f[t]);s.set(t,t,s.get(t,t)+1)}f[t]=-f[t]}for(let e=t+1;e<i;e++){if(t<b&&0!==f[t]){let i=0;for(let r=t;r<n;r++)i+=s.get(r,t)*s.get(r,e);i=-i/s.get(t,t);for(let r=t;r<n;r++)s.set(r,e,s.get(r,e)+i*s.get(r,t))}g[e]=s.get(t,e)}if(l&&t<b)for(let e=t;e<n;e++)p.set(e,t,s.get(e,t));if(t<_){g[t]=0;for(let e=t+1;e<i;e++)g[t]=Qd(g[t],g[e]);if(0!==g[t]){g[t+1]<0&&(g[t]=0-g[t]);for(let e=t+1;e<i;e++)g[e]/=g[t];g[t+1]+=1}if(g[t]=-g[t],t+1<n&&0!==g[t]){for(let e=t+1;e<n;e++)v[e]=0;for(let e=t+1;e<n;e++)for(let n=t+1;n<i;n++)v[e]+=g[n]*s.get(e,n);for(let e=t+1;e<i;e++){let i=-g[e]/g[t+1];for(let r=t+1;r<n;r++)s.set(r,e,s.get(r,e)+i*v[r])}}if(u)for(let e=t+1;e<i;e++)m.set(e,t,g[e])}}let x=Math.min(i,n+1);if(b<i&&(f[b]=s.get(b,b)),n<x&&(f[x-1]=0),_+1<x&&(g[_]=s.get(_,x-1)),g[x-1]=0,l){for(let t=b;t<h;t++){for(let e=0;e<n;e++)p.set(e,t,0);p.set(t,t,1)}for(let t=b-1;t>=0;t--)if(0!==f[t]){for(let e=t+1;e<h;e++){let i=0;for(let r=t;r<n;r++)i+=p.get(r,t)*p.get(r,e);i=-i/p.get(t,t);for(let r=t;r<n;r++)p.set(r,e,p.get(r,e)+i*p.get(r,t))}for(let e=t;e<n;e++)p.set(e,t,-p.get(e,t));p.set(t,t,1+p.get(t,t));for(let e=0;e<t-1;e++)p.set(e,t,0)}else{for(let e=0;e<n;e++)p.set(e,t,0);p.set(t,t,1)}}if(u)for(let t=i-1;t>=0;t--){if(t<_&&0!==g[t])for(let e=t+1;e<i;e++){let n=0;for(let r=t+1;r<i;r++)n+=m.get(r,t)*m.get(r,e);n=-n/m.get(t+1,t);for(let r=t+1;r<i;r++)m.set(r,e,m.get(r,e)+n*m.get(r,t))}for(let e=0;e<i;e++)m.set(e,t,0);m.set(t,t,1)}let M=x-1,E=0,S=Number.EPSILON;for(;x>0;){let t,e;for(t=x-2;t>=-1&&-1!==t;t--){const e=Number.MIN_VALUE+S*Math.abs(f[t]+Math.abs(f[t+1]));if(Math.abs(g[t])<=e||Number.isNaN(g[t])){g[t]=0;break}}if(t===x-2)e=4;else{let n;for(n=x-1;n>=t&&n!==t;n--){let e=(n!==x?Math.abs(g[n]):0)+(n!==t+1?Math.abs(g[n-1]):0);if(Math.abs(f[n])<=S*e){f[n]=0;break}}n===t?e=3:n===x-1?e=1:(e=2,t=n)}switch(t++,e){case 1:{let e=g[x-2];g[x-2]=0;for(let n=x-2;n>=t;n--){let r=Qd(f[n],e),o=f[n]/r,a=e/r;if(f[n]=r,n!==t&&(e=-a*g[n-1],g[n-1]=o*g[n-1]),u)for(let t=0;t<i;t++)r=o*m.get(t,n)+a*m.get(t,x-1),m.set(t,x-1,-a*m.get(t,n)+o*m.get(t,x-1)),m.set(t,n,r)}break}case 2:{let e=g[t-1];g[t-1]=0;for(let i=t;i<x;i++){let r=Qd(f[i],e),o=f[i]/r,a=e/r;if(f[i]=r,e=-a*g[i],g[i]=o*g[i],l)for(let e=0;e<n;e++)r=o*p.get(e,i)+a*p.get(e,t-1),p.set(e,t-1,-a*p.get(e,i)+o*p.get(e,t-1)),p.set(e,i,r)}break}case 3:{const e=Math.max(Math.abs(f[x-1]),Math.abs(f[x-2]),Math.abs(g[x-2]),Math.abs(f[t]),Math.abs(g[t])),r=f[x-1]/e,o=f[x-2]/e,a=g[x-2]/e,s=f[t]/e,c=g[t]/e,h=((o+r)*(o-r)+a*a)/2,d=r*a*(r*a);let v=0;0===h&&0===d||(v=h<0?0-Math.sqrt(h*h+d):Math.sqrt(h*h+d),v=d/(h+v));let y=(s+r)*(s-r)+v,b=s*c;for(let e=t;e<x-1;e++){let r=Qd(y,b);0===r&&(r=Number.MIN_VALUE);let o=y/r,a=b/r;if(e!==t&&(g[e-1]=r),y=o*f[e]+a*g[e],g[e]=o*g[e]-a*f[e],b=a*f[e+1],f[e+1]=o*f[e+1],u)for(let t=0;t<i;t++)r=o*m.get(t,e)+a*m.get(t,e+1),m.set(t,e+1,-a*m.get(t,e)+o*m.get(t,e+1)),m.set(t,e,r);if(r=Qd(y,b),0===r&&(r=Number.MIN_VALUE),o=y/r,a=b/r,f[e]=r,y=o*g[e]+a*f[e+1],f[e+1]=-a*g[e]+o*f[e+1],b=a*g[e+1],g[e+1]=o*g[e+1],l&&e<n-1)for(let t=0;t<n;t++)r=o*p.get(t,e)+a*p.get(t,e+1),p.set(t,e+1,-a*p.get(t,e)+o*p.get(t,e+1)),p.set(t,e,r)}g[x-2]=y,E+=1;break}case 4:if(f[t]<=0&&(f[t]=f[t]<0?-f[t]:0,u))for(let e=0;e<=M;e++)m.set(e,t,-m.get(e,t));for(;t<M&&!(f[t]>=f[t+1]);){let e=f[t];if(f[t]=f[t+1],f[t+1]=e,u&&t<i-1)for(let n=0;n<i;n++)e=m.get(n,t+1),m.set(n,t+1,m.get(n,t)),m.set(n,t,e);if(l&&t<n-1)for(let i=0;i<n;i++)e=p.get(i,t+1),p.set(i,t+1,p.get(i,t)),p.set(i,t,e);t++}E=0,x--}}if(c){let t=m;m=p,p=t}this.m=n,this.n=i,this.s=f,this.U=p,this.V=m}solve(t){let e=t,n=this.threshold,i=this.s.length,r=Zd.zeros(i,i);for(let t=0;t<i;t++)Math.abs(this.s[t])<=n?r.set(t,t,0):r.set(t,t,1/this.s[t]);let o=this.U,a=this.rightSingularVectors,s=a.mmul(r),l=a.rows,u=o.rows,c=Zd.zeros(l,u);for(let t=0;t<l;t++)for(let e=0;e<u;e++){let n=0;for(let r=0;r<i;r++)n+=s.get(t,r)*o.get(e,r);c.set(t,e,n)}return c.mmul(e)}solveForDiagonal(t){return this.solve(Zd.diag(t))}inverse(){let t=this.V,e=this.threshold,n=t.rows,i=t.columns,r=new Zd(n,this.s.length);for(let o=0;o<n;o++)for(let n=0;n<i;n++)Math.abs(this.s[n])>e&&r.set(o,n,t.get(o,n)/this.s[n]);let o=this.U,a=o.rows,s=o.columns,l=new Zd(n,a);for(let t=0;t<n;t++)for(let e=0;e<a;e++){let n=0;for(let i=0;i<s;i++)n+=r.get(t,i)*o.get(e,i);l.set(t,e,n)}return l}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){let t=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,e=0,n=this.s;for(let i=0,r=n.length;i<r;i++)n[i]>t&&e++;return e}get diagonal(){return Array.from(this.s)}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return this.U}get rightSingularVectors(){return this.V}get diagonalMatrix(){return Zd.diag(this.s)}}class ef{constructor(t){this.distances=t.distances,this.dimension=t.dimension||2,this.linkDistance=t.linkDistance}layout(){const{dimension:t,distances:e,linkDistance:n}=this;try{const n=Zd.mul(Zd.pow(e,2),-.5),i=n.mean("row"),r=n.mean("column"),o=n.mean();n.add(o).subRowVector(i).subColumnVector(r);const a=new tf(n),s=Zd.sqrt(a.diagonalMatrix).diagonal();return a.leftSingularVectors.toJSON().map((e=>Zd.mul([e],[s]).toJSON()[0].splice(0,t)))}catch(t){const i=[];for(let t=0;t<e.length;t++){const t=Math.random()*n,e=Math.random()*n;i.push([t,e])}return i}}}class nf{constructor(t){this.disp=[],this.positions=t.positions,this.adjMatrix=t.adjMatrix,this.focusID=t.focusID,this.radii=t.radii,this.iterations=t.iterations||10,this.height=t.height||10,this.width=t.width||10,this.speed=t.speed||100,this.gravity=t.gravity||10,this.nodeSizeFunc=t.nodeSizeFunc,this.k=t.k||5,this.strictRadial=t.strictRadial,this.nodes=t.nodes}layout(){const t=this,e=t.positions,n=[],i=t.iterations,r=t.width/10;t.maxDisplace=r,t.disp=n;for(let r=0;r<i;r++)e.forEach(((t,e)=>{n[e]={x:0,y:0}})),t.getRepulsion(),t.updatePositions();return e}getRepulsion(){const t=this,e=t.positions,n=t.nodes,i=t.disp,r=t.k,o=t.radii||[];e.forEach(((a,s)=>{i[s]={x:0,y:0},e.forEach(((e,l)=>{if(s===l)return;if(o[s]!==o[l])return;let u=a[0]-e[0],c=a[1]-e[1],h=Math.sqrt(u*u+c*c);if(0===h){h=1;const t=s>l?1:-1;u=.01*t,c=.01*t}if(h<t.nodeSizeFunc(n[s])/2+t.nodeSizeFunc(n[l])/2){const t=r*r/h;i[s].x+=u/h*t,i[s].y+=c/h*t}}))}))}updatePositions(){const t=this,e=t.positions,n=t.disp,i=t.speed,r=t.strictRadial,o=t.focusID,a=t.maxDisplace||t.width/10;r&&n.forEach(((t,n)=>{const i=e[n][0]-e[o][0],r=e[n][1]-e[o][1],a=Math.sqrt(i*i+r*r);let s=r/a,l=-i/a;const u=Math.sqrt(t.x*t.x+t.y*t.y);let c=Math.acos((s*t.x+l*t.y)/u);c>Math.PI/2&&(c-=Math.PI/2,s*=-1,l*=-1);const h=Math.cos(c)*u;t.x=s*h,t.y=l*h}));const s=t.radii;e.forEach(((t,l)=>{if(l===o)return;const u=Math.sqrt(n[l].x*n[l].x+n[l].y*n[l].y);if(u>0&&l!==o){const c=Math.min(a*(i/800),u);if(t[0]+=n[l].x/u*c,t[1]+=n[l].y/u*c,r){let n=t[0]-e[o][0],i=t[1]-e[o][1];const r=Math.sqrt(n*n+i*i);n=n/r*s[l],i=i/r*s[l],t[0]=e[o][0]+n,t[1]=e[o][1]+i}}}))}}function rf(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}function of(t,e,n,i){n&&Object.defineProperty(t,e,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function af(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function sf(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function lf(t,e,n){return e&&sf(t.prototype,e),n&&sf(t,n),t}function uf(t,e,n,i,r){var o={};return Object.keys(i).forEach((function(t){o[t]=i[t]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,i){return i(t,e,n)||n}),o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null),o}n(28660);var cf=n(87757),hf=n.n(cf);function df(t,e,n,i,r,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(i,r)}function ff(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var o=t.apply(e,n);function a(t){df(o,i,r,a,s,"next",t)}function s(t){df(o,i,r,a,s,"throw",t)}a(void 0)}))}}var pf=1;function mf(){return pf++}var gf=function t(e){af(this,t)},vf=function(){function t(e){af(this,t),this.clazz=void 0,this.components=[],this.entities=[],this.lookup={},this.clazz=e}var e;return lf(t,[{key:"clear",value:function(){this.components=[],this.entities=[],this.lookup={}}},{key:"contains",value:function(t){return this.lookup[t]>-1}},{key:"create",value:function(t,e){this.lookup[t]=this.components.length;var n=new this.clazz(e||{});return this.components.push(n),this.entities.push(t),n}},{key:"remove",value:function(t){var e=this.lookup[t];e>-1&&e<this.components.length-1&&(this.components[e]=this.components[this.components.length-1],this.entities[e]=this.entities[this.entities.length-1],this.lookup[this.entities[e]]=e),this.components.pop(),this.entities.pop(),delete this.lookup[t]}},{key:"removeKeepSorted",value:function(t){var e=this.lookup[t];if(e>-1){var n=this.entities[e];if(e<this.components.length-1){for(var i=e+1;i<this.components.length;++i)this.components[i-1]=this.components[i];for(var r=e+1;r<this.entities.length;++r)this.entities[r-1]=this.entities[r],this.lookup[this.entities[r-1]]=r-1}this.components.pop(),this.entities.pop(),delete this.lookup[n]}}},{key:"moveItem",value:function(t,e){if(t!==e){for(var n=this.components[t],i=this.entities[t],r=t<e?1:-1,o=t;o!==e;o+=r){var a=o+r;this.components[o]=this.components[a],this.entities[o]=this.entities[a],this.lookup[this.entities[o]]=o}this.components[e]=n,this.entities[e]=i,this.lookup[i]=e}}},{key:"getEntity",value:function(t){return this.entities[t]}},{key:"getComponent",value:function(t){return this.components[t]}},{key:"getComponentByEntity",value:function(t){var e=this.lookup[t];return e>-1?this.components[e]:null}},{key:"getCount",value:function(){return this.components.length}},{key:"getEntityByComponentIndex",value:function(t){for(var e=0,n=Object.keys(this.lookup);e<n.length;e++){var i=n[e],r=Number(i);if(this.lookup[r]===t)return r}return-1}},{key:"find",value:function(t){for(var e=0;e<this.getCount();e++){var n=this.getComponent(e);if(t(n,e))return n}return null}},{key:"findIndex",value:function(t){for(var e=0;e<this.getCount();e++){if(t(this.getComponent(e),e))return e}return-1}},{key:"forEach",value:function(t){for(var e=0,n=Object.keys(this.lookup);e<n.length;e++){var i=n[e],r=Number(i),o=this.lookup[r];t(r,this.getComponent(o))}}},{key:"forEachAsync",value:(e=ff(hf().mark((function t(e){var n,i,r,o,a;return hf().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=0,i=Object.keys(this.lookup);case 1:if(!(n<i.length)){t.next=10;break}return r=i[n],o=Number(r),a=this.lookup[o],t.next=7,e(o,this.getComponent(a));case 7:n++,t.next=1;break;case 10:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"map",value:function(t){for(var e=[],n=0,i=Object.keys(this.lookup);n<i.length;n++){var r=i[n],o=Number(r),a=this.lookup[o];e.push(t(o,this.getComponent(a)))}return e}}]),t}();function yf(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function bf(t,e){if(t){if("string"==typeof t)return yf(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?yf(t,e):void 0}}function _f(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(i=n.next()).done)&&(o.push(i.value),!e||o.length!==e);a=!0);}catch(t){s=!0,r=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw r}}return o}}(t,e)||bf(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var wf=n(86700),xf={HierarchyComponentManager:Symbol("HierarchyComponentManager"),TransformComponentManager:Symbol("TransformComponentManager"),NameComponentManager:Symbol("NameComponentManager"),SceneGraphSystem:Symbol("SceneGraphSystem"),FrameGraphSystem:Symbol("FrameGraphSystem"),ResourcePool:Symbol("ResourcePool"),ResourceHandleComponentManager:Symbol("ResourceHandleComponentManager"),PassNodeComponentManager:Symbol("PassNodeComponentManager"),RendererSystem:Symbol("RendererSystem"),RenderPass:Symbol("RenderPass"),RenderPassFactory:Symbol("Factory<IRenderPass>"),Renderable:Symbol("Factory<IRenderPass>"),MeshSystem:Symbol("MeshSystem"),MeshComponentManager:Symbol("MeshComponentManager"),CullableComponentManager:Symbol("CullableComponentManager"),Geometry:Symbol("Geometry"),GeometrySystem:Symbol("GeometrySystem"),GeometryComponentManager:Symbol("GeometryComponentManager"),Material:Symbol("Material"),MaterialSystem:Symbol("MaterialSystem"),MaterialComponentManager:Symbol("MaterialComponentManager"),ForwardRenderPath:Symbol("ForwardRenderPath"),ComputeSystem:Symbol("ComputeSystem"),ComputeComponentManager:Symbol("ComputeComponentManager"),ComputeStrategy:Symbol("ComputeStrategy"),Systems:Symbol("Systems"),World:Symbol("World"),RenderEngine:Symbol("RenderEngine"),WebGPUEngine:Symbol("WebGPUEngine"),WebGLEngine:Symbol("WebGLEngine"),ShaderModuleService:Symbol("ShaderModuleService"),ConfigService:Symbol("ConfigService"),InteractorService:Symbol("InteractorService"),IEventEmitter:Symbol("IEventEmitter"),Light:Symbol("Light")},Mf=function t(){af(this,t),this.index=void 0},Ef=function t(){af(this,t),this.name=void 0,this.data=void 0,this.execute=void 0,this.tearDown=void 0},Sf=function(){function t(){af(this,t),this.name=void 0,this.refCount=0,this.hasSideEffect=!1,this.devirtualize=[],this.destroy=[],this.reads=[],this.writes=[]}return lf(t,[{key:"read",value:function(t){return this.reads.find((function(e){return e.index===t.index}))||this.reads.push(t),t}},{key:"sample",value:function(t){return this.read(t),t}},{key:"write",value:function(t,e){if(this.writes.find((function(t){return t.index===e.index})))return e;var n=t.getResourceNode(e);n.resource.version++,n.resource.imported&&(this.hasSideEffect=!0);var i=t.createResourceNode(n.resource);return t.getResourceNode(i).writer=this,this.writes.push(i),i}}]),t}();function kf(t,e){return kf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},kf(t,e)}function Cf(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&kf(t,e)}function Tf(t){return Tf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tf(t)}function Df(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Lf(t,e){if(e&&("object"===Tf(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Df(t)}function Af(t){return Af=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Af(t)}function Of(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Af(t);if(e){var r=Af(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Lf(this,n)}}var Pf,If,Nf,Rf,Yf,jf,Ff=function(t){Cf(n,t);var e=Of(n);function n(){var t;af(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))).version=0,t.refs=0,t.name=void 0,t.imported=void 0,t.priority=void 0,t.discardStart=!0,t.discardEnd=!1,t.descriptor=void 0,t.resource=void 0,t}return lf(n,[{key:"preExecuteDestroy",value:function(){this.discardEnd=!0}},{key:"postExecuteDestroy",value:function(){this.imported}},{key:"postExecuteDevirtualize",value:function(){this.discardStart=!1}},{key:"preExecuteDevirtualize",value:function(){this.imported}}]),n}((function t(){af(this,t),this.first=void 0,this.last=void 0})),Bf=function t(){af(this,t),this.resource=void 0,this.writer=void 0,this.readerCount=0,this.version=void 0};function zf(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Hf(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Hf(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Hf(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var Gf=(Pf=(0,wf.b2)(),If=(0,wf.f3)(xf.RenderEngine),Pf((jf=function(){function t(){af(this,t),this.passNodes=[],this.resourceNodes=[],this.frameGraphPasses=[],of(this,"engine",Yf,this)}var e,n;return lf(t,[{key:"execute",value:(n=ff(hf().mark((function t(e){return hf().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.compile(),t.next=3,this.executePassNodes(e);case 3:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"tearDown",value:function(){this.frameGraphPasses.forEach((function(t){t.tearDown&&t.tearDown()})),this.reset()}},{key:"addPass",value:function(t,e,n,i){var r=new Ef;r.execute=n,i&&(r.tearDown=i),r.name=t;var o=new Sf;return o.name=t,this.passNodes.push(o),this.frameGraphPasses.push(r),e(this,o,r),r}},{key:"getPass",value:function(t){return this.frameGraphPasses.find((function(e){return e.name===t}))}},{key:"compile",value:function(){var t,e=this,n=zf(this.passNodes);try{for(n.s();!(t=n.n()).done;){var i=t.value;i.refCount=i.writes.length+(i.hasSideEffect?1:0),i.reads.forEach((function(t){e.resourceNodes[t.index].readerCount++}))}}catch(t){n.e(t)}finally{n.f()}var r,o=[],a=zf(this.resourceNodes);try{for(a.s();!(r=a.n()).done;){var s=r.value;0===s.readerCount&&o.push(s)}}catch(t){a.e(t)}finally{a.f()}for(;o.length;){var l=o.pop(),u=l&&l.writer;if(u&&0==--u.refCount){var c,h=zf(u.reads);try{for(h.s();!(c=h.n()).done;){var d=c.value,f=this.resourceNodes[d.index];0==--f.readerCount&&o.push(f)}}catch(t){h.e(t)}finally{h.f()}}}this.resourceNodes.forEach((function(t){t.resource.refs+=t.readerCount}));var p,m=zf(this.passNodes);try{for(m.s();!(p=m.n()).done;){var g=p.value;if(g.refCount){var v,y=zf(g.reads);try{for(y.s();!(v=y.n()).done;){var b=v.value,_=this.resourceNodes[b.index].resource;_.first=_.first?_.first:g,_.last=g}}catch(t){y.e(t)}finally{y.f()}var w,x=zf(g.writes);try{for(x.s();!(w=x.n()).done;){var M=w.value,E=this.resourceNodes[M.index].resource;E.first=E.first?E.first:g,E.last=g}}catch(t){x.e(t)}finally{x.f()}}}}catch(t){m.e(t)}finally{m.f()}for(var S=0;S<2;S++){var k,C=zf(this.resourceNodes);try{for(C.s();!(k=C.n()).done;){var T=k.value.resource;if(T.priority===S&&T.refs){var D=T.first,L=T.last;D&&L&&(D.devirtualize.push(T),L.destroy.push(T))}}}catch(t){C.e(t)}finally{C.f()}}}},{key:"executePassNodes",value:(e=ff(hf().mark((function t(e){var n,i,r,o,a,s,l,u,c,h,d,f,p;return hf().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=zf(this.passNodes.entries()),t.prev=1,n.s();case 3:if((i=n.n()).done){t.next=18;break}if(r=_f(i.value,2),o=r[0],!(a=r[1]).refCount){t.next=16;break}s=zf(a.devirtualize);try{for(s.s();!(l=s.n()).done;)l.value.preExecuteDevirtualize(this.engine)}catch(t){s.e(t)}finally{s.f()}u=zf(a.destroy);try{for(u.s();!(c=u.n()).done;)c.value.preExecuteDestroy(this.engine)}catch(t){u.e(t)}finally{u.f()}return t.next=12,this.frameGraphPasses[o].execute(this,this.frameGraphPasses[o],e);case 12:h=zf(a.devirtualize);try{for(h.s();!(d=h.n()).done;)d.value.postExecuteDevirtualize(this.engine)}catch(t){h.e(t)}finally{h.f()}f=zf(a.destroy);try{for(f.s();!(p=f.n()).done;)p.value.postExecuteDestroy(this.engine)}catch(t){f.e(t)}finally{f.f()}case 16:t.next=3;break;case 18:t.next=23;break;case 20:t.prev=20,t.t0=t.catch(1),n.e(t.t0);case 23:return t.prev=23,n.f(),t.finish(23);case 26:this.reset();case 27:case"end":return t.stop()}}),t,this,[[1,20,23,26]])}))),function(t){return e.apply(this,arguments)})},{key:"reset",value:function(){this.passNodes=[],this.resourceNodes=[],this.frameGraphPasses=[]}},{key:"getResourceNode",value:function(t){return this.resourceNodes[t.index]}},{key:"createResourceNode",value:function(t){var e=new Bf;e.resource=t,e.version=t.version,this.resourceNodes.push(e);var n=new Mf;return n.index=this.resourceNodes.length-1,n}},{key:"createTexture",value:function(t,e,n){var i=new Ff;return i.name=e,i.descriptor=n,this.createResourceNode(i)}},{key:"createRenderTarget",value:function(t,e,n){var i=new Ff;return i.name=e,i.descriptor=n,this.createResourceNode(i)}},{key:"present",value:function(t){this.addPass("Present",(function(e,n){n.read(t),n.hasSideEffect=!0}),ff(hf().mark((function t(){return hf().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))))}}]),t}(),Yf=uf((Rf=jf).prototype,"engine",[If],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Nf=Rf))||Nf);function Wf(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Uf(){var t=new C(4);return C!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function Vf(t,e,n,i){var r=new C(4);return r[0]=t,r[1]=e,r[2]=n,r[3]=i,r}function Xf(t,e,n){var i=e[0],r=e[1],o=e[2],a=e[3];return t[0]=n[0]*i+n[4]*r+n[8]*o+n[12]*a,t[1]=n[1]*i+n[5]*r+n[9]*o+n[13]*a,t[2]=n[2]*i+n[6]*r+n[10]*o+n[14]*a,t[3]=n[3]*i+n[7]*r+n[11]*o+n[15]*a,t}!function(){var t=Uf()}();var qf=9007199254740991,Kf={};Kf["[object Float32Array]"]=Kf["[object Float64Array]"]=Kf["[object Int8Array]"]=Kf["[object Int16Array]"]=Kf["[object Int32Array]"]=Kf["[object Uint8Array]"]=Kf["[object Uint8ClampedArray]"]=Kf["[object Uint16Array]"]=Kf["[object Uint32Array]"]=!0,Kf["[object Arguments]"]=Kf["[object Array]"]=Kf["[object ArrayBuffer]"]=Kf["[object Boolean]"]=Kf["[object DataView]"]=Kf["[object Date]"]=Kf["[object Error]"]=Kf["[object Function]"]=Kf["[object Map]"]=Kf["[object Number]"]=Kf["[object Object]"]=Kf["[object RegExp]"]=Kf["[object Set]"]=Kf["[object String]"]=Kf["[object WeakMap]"]=!1;var $f=Object.prototype.toString;var Zf=function(t){return function(t){return!!t&&"object"===Tf(t)}(t)&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=qf}(t.length)&&!!Kf[$f.call(t)]};function Jf(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Qf(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Jf(Object(n),!0).forEach((function(e){Wf(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Jf(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function tp(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Af(t);if(e){var r=Af(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Lf(this,n)}}var ep,np,ip,rp,op,ap,sp,lp,up,cp=function(t){Cf(n,t);var e=tp(n);function n(t){var i;return af(this,n),(i=e.call(this,t)).dirty=!0,i.attributes=[],i.indices=void 0,i.indicesBuffer=void 0,i.vertexCount=0,i.maxInstancedCount=void 0,i.aabb=void 0,i.entity=void 0,Object.assign(Df(i),t),i}return lf(n,[{key:"setAttribute",value:function(t,e,n,i){var r=this.attributes.find((function(e){return e.name===t}));return r?(r.data=e,r.dirty=!0):this.attributes.push(Qf(Qf({dirty:!0,name:t,data:e},n),{},{bufferGetter:i})),this.dirty=!0,this}},{key:"setIndex",value:function(t){return this.indices=new Uint32Array(t.buffer?t.buffer:t),this.dirty=!0,this}},{key:"applyMatrix",value:function(t){var e=this.attributes.find((function(t){return"position"===t.name})),n=this.attributes.find((function(t){return"normal"===t.name}));if(e&&(e.dirty=!0,e.data&&e.data.length))for(var i=0;i<e.data.length;i+=3){var r=Vf(e.data[i],e.data[i+1],e.data[i+2],1);Xf(r,r,t),Zf(e.data)?e.data.set([r[0],r[1],r[2]],i):(e.data[i]=r[0],e.data[i+1]=r[1],e.data[i+2]=r[2])}if(n){var o=q(T(),t);if(n.data&&n.data.length)for(var a=0;a<n.data.length;a+=3){var s=Ee(n.data[a],n.data[a+1],n.data[a+2]);Re(s,s,o),Ae(s,s),Zf(n.data)?n.data.set([s[0],s[1],s[2]],a):(n.data[a]=s[0],n.data[a+1]=s[1],n.data[a+2]=s[2])}}}}]),n}(gf);!function(t){t[t.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",t[t.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",t[t.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN",t[t.ZERO=0]="ZERO",t[t.ONE=1]="ONE",t[t.SRC_COLOR=768]="SRC_COLOR",t[t.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",t[t.SRC_ALPHA=770]="SRC_ALPHA",t[t.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",t[t.DST_ALPHA=772]="DST_ALPHA",t[t.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",t[t.DST_COLOR=774]="DST_COLOR",t[t.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",t[t.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",t[t.FUNC_ADD=32774]="FUNC_ADD",t[t.BLEND_EQUATION=32777]="BLEND_EQUATION",t[t.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",t[t.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",t[t.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",t[t.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",t[t.MAX_EXT=32776]="MAX_EXT",t[t.MIN_EXT=32775]="MIN_EXT",t[t.BLEND_DST_RGB=32968]="BLEND_DST_RGB",t[t.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",t[t.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",t[t.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",t[t.CONSTANT_COLOR=32769]="CONSTANT_COLOR",t[t.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",t[t.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",t[t.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",t[t.BLEND_COLOR=32773]="BLEND_COLOR",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",t[t.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",t[t.STREAM_DRAW=35040]="STREAM_DRAW",t[t.STATIC_DRAW=35044]="STATIC_DRAW",t[t.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",t[t.BUFFER_SIZE=34660]="BUFFER_SIZE",t[t.BUFFER_USAGE=34661]="BUFFER_USAGE",t[t.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",t[t.FRONT=1028]="FRONT",t[t.BACK=1029]="BACK",t[t.FRONT_AND_BACK=1032]="FRONT_AND_BACK",t[t.CULL_FACE=2884]="CULL_FACE",t[t.BLEND=3042]="BLEND",t[t.DITHER=3024]="DITHER",t[t.STENCIL_TEST=2960]="STENCIL_TEST",t[t.DEPTH_TEST=2929]="DEPTH_TEST",t[t.SCISSOR_TEST=3089]="SCISSOR_TEST",t[t.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",t[t.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",t[t.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",t[t.NO_ERROR=0]="NO_ERROR",t[t.INVALID_ENUM=1280]="INVALID_ENUM",t[t.INVALID_VALUE=1281]="INVALID_VALUE",t[t.INVALID_OPERATION=1282]="INVALID_OPERATION",t[t.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",t[t.CW=2304]="CW",t[t.CCW=2305]="CCW",t[t.LINE_WIDTH=2849]="LINE_WIDTH",t[t.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",t[t.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",t[t.CULL_FACE_MODE=2885]="CULL_FACE_MODE",t[t.FRONT_FACE=2886]="FRONT_FACE",t[t.DEPTH_RANGE=2928]="DEPTH_RANGE",t[t.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",t[t.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",t[t.DEPTH_FUNC=2932]="DEPTH_FUNC",t[t.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",t[t.STENCIL_FUNC=2962]="STENCIL_FUNC",t[t.STENCIL_FAIL=2964]="STENCIL_FAIL",t[t.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",t[t.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",t[t.STENCIL_REF=2967]="STENCIL_REF",t[t.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",t[t.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",t[t.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",t[t.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",t[t.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",t[t.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",t[t.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",t[t.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",t[t.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",t[t.VIEWPORT=2978]="VIEWPORT",t[t.SCISSOR_BOX=3088]="SCISSOR_BOX",t[t.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",t[t.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",t[t.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",t[t.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",t[t.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",t[t.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",t[t.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",t[t.RED_BITS=3410]="RED_BITS",t[t.GREEN_BITS=3411]="GREEN_BITS",t[t.BLUE_BITS=3412]="BLUE_BITS",t[t.ALPHA_BITS=3413]="ALPHA_BITS",t[t.DEPTH_BITS=3414]="DEPTH_BITS",t[t.STENCIL_BITS=3415]="STENCIL_BITS",t[t.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",t[t.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",t[t.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",t[t.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",t[t.SAMPLES=32937]="SAMPLES",t[t.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",t[t.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",t[t.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",t[t.DONT_CARE=4352]="DONT_CARE",t[t.FASTEST=4353]="FASTEST",t[t.NICEST=4354]="NICEST",t[t.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",t[t.BYTE=5120]="BYTE",t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.SHORT=5122]="SHORT",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.INT=5124]="INT",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.FLOAT=5126]="FLOAT",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.ALPHA=6406]="ALPHA",t[t.RGB=6407]="RGB",t[t.RGBA=6408]="RGBA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",t[t.VERTEX_SHADER=35633]="VERTEX_SHADER",t[t.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",t[t.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",t[t.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",t[t.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",t[t.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",t[t.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",t[t.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",t[t.SHADER_TYPE=35663]="SHADER_TYPE",t[t.DELETE_STATUS=35712]="DELETE_STATUS",t[t.LINK_STATUS=35714]="LINK_STATUS",t[t.VALIDATE_STATUS=35715]="VALIDATE_STATUS",t[t.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",t[t.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",t[t.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",t[t.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",t[t.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",t[t.NEVER=512]="NEVER",t[t.LESS=513]="LESS",t[t.EQUAL=514]="EQUAL",t[t.LEQUAL=515]="LEQUAL",t[t.GREATER=516]="GREATER",t[t.NOTEQUAL=517]="NOTEQUAL",t[t.GEQUAL=518]="GEQUAL",t[t.ALWAYS=519]="ALWAYS",t[t.KEEP=7680]="KEEP",t[t.REPLACE=7681]="REPLACE",t[t.INCR=7682]="INCR",t[t.DECR=7683]="DECR",t[t.INVERT=5386]="INVERT",t[t.INCR_WRAP=34055]="INCR_WRAP",t[t.DECR_WRAP=34056]="DECR_WRAP",t[t.VENDOR=7936]="VENDOR",t[t.RENDERER=7937]="RENDERER",t[t.VERSION=7938]="VERSION",t[t.NEAREST=9728]="NEAREST",t[t.LINEAR=9729]="LINEAR",t[t.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",t[t.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",t[t.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",t[t.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",t[t.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",t[t.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",t[t.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",t[t.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE=5890]="TEXTURE",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t[t.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",t[t.TEXTURE0=33984]="TEXTURE0",t[t.TEXTURE1=33985]="TEXTURE1",t[t.TEXTURE2=33986]="TEXTURE2",t[t.TEXTURE3=33987]="TEXTURE3",t[t.TEXTURE4=33988]="TEXTURE4",t[t.TEXTURE5=33989]="TEXTURE5",t[t.TEXTURE6=33990]="TEXTURE6",t[t.TEXTURE7=33991]="TEXTURE7",t[t.TEXTURE8=33992]="TEXTURE8",t[t.TEXTURE9=33993]="TEXTURE9",t[t.TEXTURE10=33994]="TEXTURE10",t[t.TEXTURE11=33995]="TEXTURE11",t[t.TEXTURE12=33996]="TEXTURE12",t[t.TEXTURE13=33997]="TEXTURE13",t[t.TEXTURE14=33998]="TEXTURE14",t[t.TEXTURE15=33999]="TEXTURE15",t[t.TEXTURE16=34e3]="TEXTURE16",t[t.TEXTURE17=34001]="TEXTURE17",t[t.TEXTURE18=34002]="TEXTURE18",t[t.TEXTURE19=34003]="TEXTURE19",t[t.TEXTURE20=34004]="TEXTURE20",t[t.TEXTURE21=34005]="TEXTURE21",t[t.TEXTURE22=34006]="TEXTURE22",t[t.TEXTURE23=34007]="TEXTURE23",t[t.TEXTURE24=34008]="TEXTURE24",t[t.TEXTURE25=34009]="TEXTURE25",t[t.TEXTURE26=34010]="TEXTURE26",t[t.TEXTURE27=34011]="TEXTURE27",t[t.TEXTURE28=34012]="TEXTURE28",t[t.TEXTURE29=34013]="TEXTURE29",t[t.TEXTURE30=34014]="TEXTURE30",t[t.TEXTURE31=34015]="TEXTURE31",t[t.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",t[t.REPEAT=10497]="REPEAT",t[t.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",t[t.FLOAT_VEC2=35664]="FLOAT_VEC2",t[t.FLOAT_VEC3=35665]="FLOAT_VEC3",t[t.FLOAT_VEC4=35666]="FLOAT_VEC4",t[t.INT_VEC2=35667]="INT_VEC2",t[t.INT_VEC3=35668]="INT_VEC3",t[t.INT_VEC4=35669]="INT_VEC4",t[t.BOOL=35670]="BOOL",t[t.BOOL_VEC2=35671]="BOOL_VEC2",t[t.BOOL_VEC3=35672]="BOOL_VEC3",t[t.BOOL_VEC4=35673]="BOOL_VEC4",t[t.FLOAT_MAT2=35674]="FLOAT_MAT2",t[t.FLOAT_MAT3=35675]="FLOAT_MAT3",t[t.FLOAT_MAT4=35676]="FLOAT_MAT4",t[t.SAMPLER_2D=35678]="SAMPLER_2D",t[t.SAMPLER_CUBE=35680]="SAMPLER_CUBE",t[t.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",t[t.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",t[t.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",t[t.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",t[t.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",t[t.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",t[t.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",t[t.COMPILE_STATUS=35713]="COMPILE_STATUS",t[t.LOW_FLOAT=36336]="LOW_FLOAT",t[t.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",t[t.HIGH_FLOAT=36338]="HIGH_FLOAT",t[t.LOW_INT=36339]="LOW_INT",t[t.MEDIUM_INT=36340]="MEDIUM_INT",t[t.HIGH_INT=36341]="HIGH_INT",t[t.FRAMEBUFFER=36160]="FRAMEBUFFER",t[t.RENDERBUFFER=36161]="RENDERBUFFER",t[t.RGBA4=32854]="RGBA4",t[t.RGB5_A1=32855]="RGB5_A1",t[t.RGB565=36194]="RGB565",t[t.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",t[t.STENCIL_INDEX=6401]="STENCIL_INDEX",t[t.STENCIL_INDEX8=36168]="STENCIL_INDEX8",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL",t[t.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",t[t.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",t[t.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",t[t.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",t[t.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",t[t.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",t[t.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",t[t.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",t[t.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",t[t.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",t[t.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",t[t.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",t[t.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",t[t.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",t[t.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",t[t.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",t[t.NONE=0]="NONE",t[t.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",t[t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",t[t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",t[t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",t[t.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",t[t.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",t[t.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",t[t.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",t[t.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",t[t.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",t[t.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",t[t.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",t[t.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",t[t.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",t[t.COPY_SRC=1]="COPY_SRC",t[t.COPY_DST=2]="COPY_DST",t[t.SAMPLED=4]="SAMPLED",t[t.STORAGE=8]="STORAGE",t[t.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"}(ep||(ep={}));var hp=(np=(0,wf.b2)(),ip=(0,wf.f3)(xf.GeometryComponentManager),rp=(0,wf.f3)(xf.RenderEngine),np((up=function(){function t(){af(this,t),of(this,"geometry",sp,this),of(this,"engine",lp,this)}var e;return lf(t,[{key:"execute",value:(e=ff(hf().mark((function t(){var e=this;return hf().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.geometry.forEach((function(t,n){n.dirty&&(n.attributes.forEach((function(t){var n;t.dirty&&t.data&&(t.buffer?null===(n=t.buffer)||void 0===n||n.subData({data:t.data,offset:0}):t.buffer=e.engine.createBuffer({data:t.data,type:ep.FLOAT}),t.dirty=!1)})),n.indices&&(n.indicesBuffer?n.indicesBuffer.subData({data:n.indices,offset:0}):n.indicesBuffer=e.engine.createElements({data:n.indices,count:n.indices.length,type:ep.UNSIGNED_INT,usage:ep.STATIC_DRAW})),n.dirty=!1)}));case 1:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"tearDown",value:function(){this.geometry.forEach((function(t,e){e.indicesBuffer&&e.indicesBuffer.destroy(),e.attributes.forEach((function(t){t.buffer&&t.buffer.destroy()}))})),this.geometry.clear()}},{key:"createBufferGeometry",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{vertexCount:3},e=t.vertexCount,n=mf();return this.geometry.create(n,{vertexCount:e})}},{key:"createInstancedBufferGeometry",value:function(t){var e=t.maxInstancedCount,n=t.vertexCount,i=mf();return this.geometry.create(i,{maxInstancedCount:e,vertexCount:n})}}]),t}(),sp=uf((ap=up).prototype,"geometry",[ip],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lp=uf(ap.prototype,"engine",[rp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),op=ap))||op);function dp(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function fp(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?dp(Object(n),!0).forEach((function(e){Wf(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dp(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function pp(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Af(t);if(e){var r=Af(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Lf(this,n)}}var mp,gp,vp,yp,bp,_p,wp,xp,Mp,Ep,Sp=function(t){Cf(n,t);var e=pp(n);function n(t){var i;return af(this,n),(i=e.call(this,t)).vertexShaderGLSL=void 0,i.fragmentShaderGLSL=void 0,i.defines={},i.dirty=!0,i.uniforms=[],i.cull={enable:!0,face:ep.BACK},i.depth={enable:!0},i.blend=void 0,i.entity=void 0,i.type=void 0,Object.assign(Df(i),t),i}return lf(n,[{key:"setDefines",value:function(t){return this.defines=fp(fp({},this.defines),t),this}},{key:"setCull",value:function(t){return this.cull=t,this}},{key:"setDepth",value:function(t){return this.depth=t,this}},{key:"setBlend",value:function(t){return this.blend=t,this}},{key:"setUniform",value:function(t,e){var n=this;if("string"!=typeof t)return Object.keys(t).forEach((function(e){return n.setUniform(e,t[e])})),this;var i=this.uniforms.find((function(e){return e.name===t}));return i?(i.dirty=!0,i.data=e):this.uniforms.push({name:t,dirty:!0,data:e}),this.dirty=!0,this}}]),n}(gf);function kp(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Cp(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?kp(Object(n),!0).forEach((function(e){Wf(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kp(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Tp,Dp=(mp=(0,wf.b2)(),gp=(0,wf.f3)(xf.MaterialComponentManager),vp=(0,wf.f3)(xf.RenderEngine),yp=(0,wf.f3)(xf.ShaderModuleService),mp((Ep=function(){function t(){af(this,t),of(this,"material",wp,this),of(this,"engine",xp,this),of(this,"shaderModule",Mp,this)}var e;return lf(t,[{key:"execute",value:(e=ff(hf().mark((function t(){return hf().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),function(){return e.apply(this,arguments)})},{key:"tearDown",value:function(){this.material.clear()}},{key:"createShaderMaterial",value:function(t){var e=mf(),n=t.vertexShader,i=t.fragmentShader,r=[];if(!this.engine.supportWebGPU){var o="material-".concat(e);this.shaderModule.registerModule(o,{vs:t.vertexShader,fs:t.fragmentShader});var a=this.shaderModule.getModule(o);n=a.vs,i=a.fs,a.uniforms&&(r=Object.keys(a.uniforms).map((function(t){return{dirty:!0,name:t,data:a.uniforms[t]}})))}return this.material.create(e,Cp(Cp({vertexShaderGLSL:n,fragmentShaderGLSL:i},t),{},{uniforms:r}))}}]),t}(),wp=uf((_p=Ep).prototype,"material",[gp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xp=uf(_p.prototype,"engine",[vp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Mp=uf(_p.prototype,"shaderModule",[yp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bp=_p))||bp);function Lp(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Af(t);if(e){var r=Af(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Lf(this,n)}}!function(t){t[t.Standard=0]="Standard"}(Tp||(Tp={}));var Ap=function(t){Cf(n,t);var e=Lp(n);function n(t){var i;return af(this,n),(i=e.call(this,t)).strategy=Tp.Standard,i.visibilityPlaneMask=0,i.visible=!1,Object.assign(Df(i),t),i}return n}(gf),Op=function(){function t(e,n){af(this,t),this.center=void 0,this.halfExtents=void 0,this.min=we(),this.max=we(),this.update(e,n)}return lf(t,[{key:"update",value:function(t,e){this.center=t||we(),this.halfExtents=e||Ee(.5,.5,.5),this.min=je(this.min,this.center,this.halfExtents),this.max=Ce(this.max,this.center,this.halfExtents)}},{key:"setMinMax",value:function(t,e){Ce(this.center,e,t),Le(this.center,this.center,.5),je(this.halfExtents,e,t),Le(this.halfExtents,this.halfExtents,.5),Se(this.min,t),Se(this.max,e)}},{key:"getMin",value:function(){return this.min}},{key:"getMax",value:function(){return this.max}},{key:"add",value:function(t){var e=this.center,n=e[0],i=e[1],r=e[2],o=this.halfExtents,a=o[0],s=o[1],l=o[2],u=n-a,c=n+a,h=i-s,d=i+s,f=r-l,p=r+l,m=t.center,g=m[0],v=m[1],y=m[2],b=t.halfExtents,_=b[0],w=b[1],x=b[2],M=g-_,E=g+_,S=v-w,k=v+w,C=y-x,T=y+x;M<u&&(u=M),E>c&&(c=E),S<h&&(h=S),k>d&&(d=k),C<f&&(f=C),T>p&&(p=T),e[0]=.5*(u+c),e[1]=.5*(h+d),e[2]=.5*(f+p),o[0]=.5*(c-u),o[1]=.5*(d-h),o[2]=.5*(p-f),this.min[0]=u,this.min[1]=h,this.min[2]=f,this.max[0]=c,this.max[1]=d,this.max[2]=p}},{key:"intersects",value:function(t){var e=this.getMax(),n=this.getMin(),i=t.getMax(),r=t.getMin();return n[0]<=i[0]&&e[0]>=r[0]&&n[1]<=i[1]&&e[1]>=r[1]&&n[2]<=i[2]&&e[2]>=r[2]}},{key:"containsPoint",value:function(t){var e=this.getMin(),n=this.getMax();return!(t[0]<e[0]||t[0]>n[0]||t[1]<e[1]||t[1]>n[1]||t[2]<e[2]||t[2]>n[2])}},{key:"getNegativeFarPoint",value:function(t){return 273===t.pnVertexFlag?Se(we(),this.min):272===t.pnVertexFlag?Ee(this.min[0],this.min[1],this.max[2]):257===t.pnVertexFlag?Ee(this.min[0],this.max[1],this.min[2]):256===t.pnVertexFlag?Ee(this.min[0],this.max[1],this.max[2]):17===t.pnVertexFlag?Ee(this.max[0],this.min[1],this.min[2]):16===t.pnVertexFlag?Ee(this.max[0],this.min[1],this.max[2]):1===t.pnVertexFlag?Ee(this.max[0],this.max[1],this.min[2]):Ee(this.max[0],this.max[1],this.max[2])}},{key:"getPositiveFarPoint",value:function(t){return 273===t.pnVertexFlag?Se(we(),this.max):272===t.pnVertexFlag?Ee(this.max[0],this.max[1],this.min[2]):257===t.pnVertexFlag?Ee(this.max[0],this.min[1],this.max[2]):256===t.pnVertexFlag?Ee(this.max[0],this.min[1],this.min[2]):17===t.pnVertexFlag?Ee(this.min[0],this.max[1],this.max[2]):16===t.pnVertexFlag?Ee(this.min[0],this.max[1],this.min[2]):1===t.pnVertexFlag?Ee(this.min[0],this.min[1],this.max[2]):Ee(this.min[0],this.min[1],this.min[2])}}]),t}();function Pp(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Af(t);if(e){var r=Af(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Lf(this,n)}}var Ip,Np=function(t){Cf(n,t);var e=Pp(n);function n(t){var i;return af(this,n),(i=e.call(this,t)).material=void 0,i.geometry=void 0,i.aabb=new Op,i.aabbDirty=!0,i.model=void 0,i.visible=!0,i.children=[],Object.assign(Df(i),t),i}return n}(gf),Rp=function(){function t(e,n){af(this,t),this.distance=void 0,this.normal=void 0,this.pnVertexFlag=void 0,this.distance=e||0,this.normal=n||Ee(0,1,0),this.updatePNVertexFlag()}return lf(t,[{key:"updatePNVertexFlag",value:function(){this.pnVertexFlag=(Number(this.normal[0]>=0)<<8)+(Number(this.normal[1]>=0)<<4)+Number(this.normal[2]>=0)}},{key:"distanceToPoint",value:function(t){return Oe(t,this.normal)-this.distance}},{key:"normalize",value:function(){var t=1/Be(this.normal);Le(this.normal,this.normal,t),this.distance*=t}},{key:"intersectsLine",value:function(t,e,n){var i=this.distanceToPoint(t),r=i/(i-this.distanceToPoint(e)),o=r>=0&&r<=1;return o&&n&&Ie(n,t,e,r),o}}]),t}();!function(t){t[t.OUTSIDE=4294967295]="OUTSIDE",t[t.INSIDE=0]="INSIDE",t[t.INDETERMINATE=2147483647]="INDETERMINATE"}(Ip||(Ip={}));var Yp,jp,Fp,Bp,zp,Hp,Gp,Wp,Up,Vp,Xp,qp,Kp,$p,Zp=function(){function t(e){if(af(this,t),this.planes=[],e)this.planes=e;else for(var n=0;n<6;n++)this.planes.push(new Rp)}return lf(t,[{key:"extractFromVPMatrix",value:function(t){var e=_f(t,16),n=e[0],i=e[1],r=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],h=e[9],d=e[10],f=e[11],p=e[12],m=e[13],g=e[14],v=e[15];ke(this.planes[0].normal,o-n,u-a,f-c),this.planes[0].distance=-(v-p),ke(this.planes[1].normal,o+n,u+a,f+c),this.planes[1].distance=-(v+p),ke(this.planes[2].normal,o+i,u+s,f+h),this.planes[2].distance=-(v+m),ke(this.planes[3].normal,o-i,u-s,f-h),this.planes[3].distance=-(v-m),ke(this.planes[4].normal,o-r,u-l,f-d),this.planes[4].distance=-(v-g),ke(this.planes[5].normal,o+r,u+l,f+d),this.planes[5].distance=-(v+g),this.planes.forEach((function(t){t.normalize(),t.updatePNVertexFlag()}))}}]),t}();function Jp(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Qp(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qp(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Qp(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var tm=(Yp=(0,wf.b2)(),jp=(0,wf.f3)(xf.MeshComponentManager),Fp=(0,wf.f3)(xf.CullableComponentManager),Bp=(0,wf.f3)(xf.GeometryComponentManager),zp=(0,wf.f3)(xf.HierarchyComponentManager),Hp=(0,wf.f3)(xf.TransformComponentManager),Yp(($p=function(){function t(){af(this,t),of(this,"mesh",Up,this),of(this,"cullable",Vp,this),of(this,"geometry",Xp,this),of(this,"hierarchy",qp,this),of(this,"transform",Kp,this),this.planes=void 0}var e;return lf(t,[{key:"setFrustumPlanes",value:function(t){this.planes=t}},{key:"execute",value:(e=ff(hf().mark((function t(e){var n,i,r,o,a,s,l,u,c,h,d,f,p,m,g,v,y,b,_,w,x;return hf().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=Jp(e);try{for(n.s();!(i=n.n()).done;){r=i.value,o=r.getScene(),a=r.getCamera(),s=Jp(o.getEntities());try{for(s.s();!(l=s.n()).done;)u=l.value,(c=this.mesh.getComponentByEntity(u))&&(h=this.hierarchy.getComponentByEntity(u),d=this.cullable.getComponentByEntity(u),f=c.geometry,p=this.transform.getComponentByEntity(u),f&&f.aabb&&p&&c.aabbDirty&&(m=p.worldTransform,g=f.aabb,v=g.center,y=g.halfExtents,b=Ne(we(),v,m),M=m,(E=T())[0]=M[0],E[1]=M[1],E[2]=M[2],E[3]=M[4],E[4]=M[5],E[5]=M[6],E[6]=M[8],E[7]=M[9],E[8]=M[10],_=E,w=Re(we(),y,_),c.aabb.update(b,w),c.aabbDirty=!1),d&&f&&(x=this.cullable.getComponentByEntity((null==h?void 0:h.parentID)||-1),d.visibilityPlaneMask=this.computeVisibilityWithPlaneMask(c.aabb,(null==x?void 0:x.visibilityPlaneMask)||Ip.INDETERMINATE,this.planes||a.getFrustum().planes),d.visible=d.visibilityPlaneMask!==Ip.OUTSIDE))}catch(t){s.e(t)}finally{s.f()}}}catch(t){n.e(t)}finally{n.f()}case 2:case"end":return t.stop()}var M,E}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"tearDown",value:function(){this.cullable.clear(),this.mesh.clear()}},{key:"computeVisibilityWithPlaneMask",value:function(t,e,n){if(e===Ip.OUTSIDE||e===Ip.INSIDE)return e;for(var i=Ip.INSIDE,r=0,o=n.length;r<o;++r){var a=r<31?1<<r:0;if(!(r<31&&0==(e&a))){var s=n[r],l=s.normal,u=s.distance;if(Oe(l,t.getNegativeFarPoint(n[r]))+u>0)return Ip.OUTSIDE;Oe(l,t.getPositiveFarPoint(n[r]))+u>0&&(i|=a)}}return i}}]),t}(),Up=uf((Wp=$p).prototype,"mesh",[jp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Vp=uf(Wp.prototype,"cullable",[Fp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xp=uf(Wp.prototype,"geometry",[Bp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qp=uf(Wp.prototype,"hierarchy",[zp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Kp=uf(Wp.prototype,"transform",[Hp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Gp=Wp))||Gp);function em(){var t=new C(16);return C!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function nm(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function im(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function rm(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],h=e[9],d=e[10],f=e[11],p=e[12],m=e[13],g=e[14],v=e[15],y=n*s-i*a,b=n*l-r*a,_=n*u-o*a,w=i*l-r*s,x=i*u-o*s,M=r*u-o*l,E=c*m-h*p,S=c*g-d*p,k=c*v-f*p,C=h*g-d*m,T=h*v-f*m,D=d*v-f*g,L=y*D-b*T+_*C+w*k-x*S+M*E;return L?(L=1/L,t[0]=(s*D-l*T+u*C)*L,t[1]=(r*T-i*D-o*C)*L,t[2]=(m*M-g*x+v*w)*L,t[3]=(d*x-h*M-f*w)*L,t[4]=(l*k-a*D-u*S)*L,t[5]=(n*D-r*k+o*S)*L,t[6]=(g*_-p*M-v*b)*L,t[7]=(c*M-d*_+f*b)*L,t[8]=(a*T-s*k+u*E)*L,t[9]=(i*k-n*T-o*E)*L,t[10]=(p*x-m*_+v*y)*L,t[11]=(h*_-c*x-f*y)*L,t[12]=(s*S-a*C-l*E)*L,t[13]=(n*C-i*S+r*E)*L,t[14]=(m*b-p*w-g*y)*L,t[15]=(c*w-h*b+d*y)*L,t):null}function om(t,e,n){var i=e[0],r=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],d=e[9],f=e[10],p=e[11],m=e[12],g=e[13],v=e[14],y=e[15],b=n[0],_=n[1],w=n[2],x=n[3];return t[0]=b*i+_*s+w*h+x*m,t[1]=b*r+_*l+w*d+x*g,t[2]=b*o+_*u+w*f+x*v,t[3]=b*a+_*c+w*p+x*y,b=n[4],_=n[5],w=n[6],x=n[7],t[4]=b*i+_*s+w*h+x*m,t[5]=b*r+_*l+w*d+x*g,t[6]=b*o+_*u+w*f+x*v,t[7]=b*a+_*c+w*p+x*y,b=n[8],_=n[9],w=n[10],x=n[11],t[8]=b*i+_*s+w*h+x*m,t[9]=b*r+_*l+w*d+x*g,t[10]=b*o+_*u+w*f+x*v,t[11]=b*a+_*c+w*p+x*y,b=n[12],_=n[13],w=n[14],x=n[15],t[12]=b*i+_*s+w*h+x*m,t[13]=b*r+_*l+w*d+x*g,t[14]=b*o+_*u+w*f+x*v,t[15]=b*a+_*c+w*p+x*y,t}function am(t,e,n){var i,r,o,a,s,l,u,c,h,d,f,p,m=n[0],g=n[1],v=n[2];return e===t?(t[12]=e[0]*m+e[4]*g+e[8]*v+e[12],t[13]=e[1]*m+e[5]*g+e[9]*v+e[13],t[14]=e[2]*m+e[6]*g+e[10]*v+e[14],t[15]=e[3]*m+e[7]*g+e[11]*v+e[15]):(i=e[0],r=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],d=e[9],f=e[10],p=e[11],t[0]=i,t[1]=r,t[2]=o,t[3]=a,t[4]=s,t[5]=l,t[6]=u,t[7]=c,t[8]=h,t[9]=d,t[10]=f,t[11]=p,t[12]=i*m+s*g+h*v+e[12],t[13]=r*m+l*g+d*v+e[13],t[14]=o*m+u*g+f*v+e[14],t[15]=a*m+c*g+p*v+e[15]),t}function sm(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function lm(t,e){var n=e[0],i=e[1],r=e[2],o=e[4],a=e[5],s=e[6],l=e[8],u=e[9],c=e[10];return t[0]=Math.hypot(n,i,r),t[1]=Math.hypot(o,a,s),t[2]=Math.hypot(l,u,c),t}function um(t,e){var n=new C(3);lm(n,e);var i=1/n[0],r=1/n[1],o=1/n[2],a=e[0]*i,s=e[1]*r,l=e[2]*o,u=e[4]*i,c=e[5]*r,h=e[6]*o,d=e[8]*i,f=e[9]*r,p=e[10]*o,m=a+c+p,g=0;return m>0?(g=2*Math.sqrt(m+1),t[3]=.25*g,t[0]=(h-f)/g,t[1]=(d-l)/g,t[2]=(s-u)/g):a>c&&a>p?(g=2*Math.sqrt(1+a-c-p),t[3]=(h-f)/g,t[0]=.25*g,t[1]=(s+u)/g,t[2]=(d+l)/g):c>p?(g=2*Math.sqrt(1+c-a-p),t[3]=(d-l)/g,t[0]=(s+u)/g,t[1]=.25*g,t[2]=(h+f)/g):(g=2*Math.sqrt(1+p-a-c),t[3]=(s-u)/g,t[0]=(d+l)/g,t[1]=(h+f)/g,t[2]=.25*g),t}function cm(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],a=n+n,s=i+i,l=r+r,u=n*a,c=i*a,h=i*s,d=r*a,f=r*s,p=r*l,m=o*a,g=o*s,v=o*l;return t[0]=1-h-p,t[1]=c+v,t[2]=d-g,t[3]=0,t[4]=c-v,t[5]=1-u-p,t[6]=f+m,t[7]=0,t[8]=d+g,t[9]=f-m,t[10]=1-u-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}var hm=function(t,e,n,i,r){var o,a=1/Math.tan(e/2);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=r&&r!==1/0?(o=1/(i-r),t[10]=(r+i)*o,t[14]=2*r*i*o):(t[10]=-1,t[14]=-2*i),t};var dm=function(t,e,n,i,r,o,a){var s=1/(e-n),l=1/(i-r),u=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+n)*s,t[13]=(r+i)*l,t[14]=(a+o)*u,t[15]=1,t};var fm,pm,mm,gm,vm,ym,bm,_m,wm,xm,Mm,Em,Sm,km,Cm,Tm,Dm,Lm,Am,Om,Pm,Im,Nm,Rm;function Ym(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return jm(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jm(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function jm(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var Fm,Bm,zm,Hm,Gm,Wm,Um,Vm,Xm,qm,Km,$m,Zm,Jm=(fm=(0,wf.b2)(),pm=(0,wf.f3)(xf.MeshComponentManager),mm=(0,wf.f3)(xf.GeometryComponentManager),gm=(0,wf.f3)(xf.MaterialComponentManager),vm=(0,wf.f3)(xf.CullableComponentManager),ym=(0,wf.f3)(xf.TransformComponentManager),bm=(0,wf.f3)(xf.HierarchyComponentManager),_m=(0,wf.f3)(xf.Systems),wm=(0,wf.t6)(xf.FrameGraphSystem),xm=(0,wf.f3)(xf.RenderEngine),Mm=(0,wf.f3)(xf.ResourcePool),fm((Rm=Nm=function(){function t(){var e=this;af(this,t),of(this,"mesh",km,this),of(this,"geometry",Cm,this),of(this,"material",Tm,this),of(this,"cullable",Dm,this),of(this,"transform",Lm,this),of(this,"hierarchy",Am,this),of(this,"frameGraphSystem",Om,this),of(this,"engine",Pm,this),of(this,"resourcePool",Im,this),this.modelCache={},this.setup=function(t,e,n){var i=t.createRenderTarget(e,"color buffer",{width:1,height:1,usage:ep.RENDER_ATTACHMENT|ep.SAMPLED|ep.COPY_SRC});n.data={output:e.write(t,i)}},this.execute=function(){var t=ff(hf().mark((function t(n,i,r){var o,a,s,l,u,c;return hf().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o=n.getResourceNode(i.data.output),a=e.resourcePool.getOrCreateResource(o.resource),s=Ym(r),t.prev=3,s.s();case 5:if((l=s.n()).done){t.next=11;break}return u=l.value,t.next=9,e.initView(u);case 9:t.next=5;break;case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(3),s.e(t.t0);case 16:return t.prev=16,s.f(),t.finish(16);case 19:c=e.engine.getCanvas(),a.resize({width:c.width,height:c.height}),e.engine.setScissor({enable:!1}),e.engine.clear({framebuffer:a,color:r[0].getClearColor(),depth:1}),e.engine.useFramebuffer(a,(function(){var t,n=Ym(r);try{for(n.s();!(t=n.n()).done;){var i=t.value;e.renderView(i)}}catch(t){n.e(t)}finally{n.f()}}));case 24:case"end":return t.stop()}}),t,null,[[3,13,16,19]])})));return function(e,n,i){return t.apply(this,arguments)}}()}var e,n;return lf(t,[{key:"renderView",value:function(t){var e=t.getScene(),n=t.getCamera(),i=n.getViewTransform(),r=om(em(),n.getPerspective(),i);n.getFrustum().extractFromVPMatrix(r);var o=t.getViewport(),a=o.x,s=o.y,l=o.width,u=o.height;this.engine.viewport({x:a,y:s,width:l,height:u});var c,h=Ym(e.getEntities());try{for(h.s();!(c=h.n()).done;){var d=c.value;this.renderMesh(d,{camera:n,view:t,viewMatrix:i})}}catch(t){h.e(t)}finally{h.f()}}},{key:"renderMesh",value:function(t,e){var n=e.camera,i=e.view,r=e.viewMatrix,o=this.mesh.getComponentByEntity(t);if(o&&o.visible){var a=o.material,s=o.geometry;if(s&&!s.dirty&&a){var l=this.transform.getComponentByEntity(t),u=om(em(),r,l.worldTransform),c=i.getViewport(),h=c.width,d=c.height;a.setUniform({projectionMatrix:n.getPerspective(),modelViewMatrix:u,modelMatrix:l.worldTransform,viewMatrix:r,cameraPosition:n.getPosition(),u_viewport:[h,d]}),o.model&&(o.model.draw({uniforms:a.uniforms.reduce((function(t,e){return t[e.name]=e.data,t}),{})}),a.uniforms.forEach((function(t){t.dirty=!1})),a.dirty=!1)}}}},{key:"initMesh",value:(n=ff(hf().mark((function t(e,n){var i,r,o,a,s,l,u,c;return hf().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=this.mesh.getComponentByEntity(e)){t.next=3;break}return t.abrupt("return");case 3:if(r=i.material,(o=i.geometry)&&!o.dirty&&r){t.next=7;break}return t.abrupt("return");case 7:if(i.model){t.next=24;break}if(a="m-".concat(r.entity,"-g-").concat(o.entity),!this.modelCache[a]){t.next=12;break}return i.model=this.modelCache[a],t.abrupt("return");case 12:return r.setUniform({projectionMatrix:1,modelViewMatrix:1,modelMatrix:1,viewMatrix:1,cameraPosition:1,u_viewport:1}),s=this.engine,l=s.createModel,u=s.createAttribute,c={vs:r.vertexShaderGLSL,fs:r.fragmentShaderGLSL,defines:r.defines,attributes:o.attributes.reduce((function(t,e){return e.data&&e.buffer&&(t[e.name]=u({buffer:e.buffer,attributes:e.attributes,arrayStride:e.arrayStride,stepMode:e.stepMode,divisor:"vertex"===e.stepMode?0:1})),t}),{}),uniforms:r.uniforms.reduce((function(t,e){return t[e.name]=e.data,t}),{}),scissor:{enable:!0,box:function(){return n.getViewport()}}},r.cull&&(c.cull=r.cull),r.depth&&(c.depth=r.depth),r.blend&&(c.blend=r.blend),o.indicesBuffer&&(c.elements=o.indicesBuffer),o.maxInstancedCount&&(c.instances=o.maxInstancedCount,c.count=o.vertexCount||3),t.next=22,l(c);case 22:i.model=t.sent,this.modelCache[a]=i.model;case 24:case"end":return t.stop()}}),t,this)}))),function(t,e){return n.apply(this,arguments)})},{key:"initView",value:(e=ff(hf().mark((function t(e){var n,i,r,o;return hf().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.getScene(),i=Ym(n.getEntities()),t.prev=2,i.s();case 4:if((r=i.n()).done){t.next=10;break}return o=r.value,t.next=8,this.initMesh(o,e);case 8:t.next=4;break;case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(2),i.e(t.t0);case 15:return t.prev=15,i.f(),t.finish(15);case 18:case"end":return t.stop()}}),t,this,[[2,12,15,18]])}))),function(t){return e.apply(this,arguments)})}]),t}(),Nm.IDENTIFIER="Render Pass",km=uf((Sm=Rm).prototype,"mesh",[pm],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Cm=uf(Sm.prototype,"geometry",[mm],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Tm=uf(Sm.prototype,"material",[gm],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Dm=uf(Sm.prototype,"cullable",[vm],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Lm=uf(Sm.prototype,"transform",[ym],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Am=uf(Sm.prototype,"hierarchy",[bm],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Om=uf(Sm.prototype,"frameGraphSystem",[_m,wm],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pm=uf(Sm.prototype,"engine",[xm],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Im=uf(Sm.prototype,"resourcePool",[Mm],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Em=Sm))||Em);function Qm(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return tg(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tg(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function tg(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var eg,ng,ig,rg,og,ag,sg,lg,ug,cg,hg,dg,fg,pg,mg,gg,vg,yg,bg,_g,wg,xg,Mg=1,Eg=2,Sg=(Fm=(0,wf.b2)(),Bm=(0,wf.f3)(xf.RenderEngine),zm=(0,wf.f3)(xf.ResourcePool),Hm=(0,wf.f3)(xf.RenderPassFactory),Gm=(0,wf.f3)(xf.MeshComponentManager),Fm((Zm=$m=function(){function t(){var e=this;af(this,t),of(this,"engine",Vm,this),of(this,"resourcePool",Xm,this),of(this,"renderPassFactory",qm,this),of(this,"mesh",Km,this),this.pickingFBO=void 0,this.views=void 0,this.highlightEnabled=!0,this.highlightColor=[255,0,0,255],this.alreadyInRendering=!1,this.setup=function(t,e,n){var i=t.createRenderTarget(e,"picking fbo",{width:1,height:1});n.data={output:e.write(t,i)},e.hasSideEffect=!0},this.execute=function(){var t=ff(hf().mark((function t(n,i,r){var o,a,s;return hf().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.views=r,!e.alreadyInRendering){t.next=3;break}return t.abrupt("return");case 3:o=Qm(r);try{for(s=function(){var t=a.value,r=t.getViewport(),o=r.width,s=r.height;e.alreadyInRendering=!0;var l=n.getResourceNode(i.data.output);e.pickingFBO=e.resourcePool.getOrCreateResource(l.resource),e.pickingFBO.resize({width:o,height:s}),e.engine.useFramebuffer(e.pickingFBO,(function(){e.engine.clear({framebuffer:e.pickingFBO,color:[0,0,0,0],stencil:0,depth:1});var n,i=e.renderPassFactory(Jm.IDENTIFIER),r=[],o=Qm(t.getScene().getEntities());try{for(o.s();!(n=o.n()).done;){var a=n.value,s=e.mesh.getComponentByEntity(a);s.material.setUniform("u_PickingStage",Mg),r.push(s)}}catch(t){o.e(t)}finally{o.f()}i.renderView(t),r.forEach((function(t){t.material.setUniform("u_PickingStage",Eg)})),e.alreadyInRendering=!1}))},o.s();!(a=o.n()).done;)s()}catch(t){o.e(t)}finally{o.f()}case 5:case"end":return t.stop()}}),t)})));return function(e,n,i){return t.apply(this,arguments)}}(),this.pick=function(t,n){var i,r,o=t.x,a=t.y,s=e.engine,l=s.readPixels,u=s.useFramebuffer,c=n.getViewport(),h=c.width,d=c.height,f=o*window.devicePixelRatio,p=a*window.devicePixelRatio;if(!(f>h||f<0||p>d||p<0))return u(e.pickingFBO,(function(){0===(i=l({x:Math.round(f),y:Math.round(d-(a+1)*window.devicePixelRatio),width:1,height:1,data:new Uint8Array(4),framebuffer:e.pickingFBO}))[0]&&0===i[1]&&0===i[2]||(r=function(t){var e=_f(t,3);return e[0]+256*e[1]+65536*e[2]-1}(i),e.highlightEnabled&&e.highlightPickedFeature(i,n))})),r}}return lf(t,[{key:"enableHighlight",value:function(t){this.highlightEnabled=t}},{key:"setHighlightColor",value:function(t){this.highlightColor=t}},{key:"highlightPickedFeature",value:function(t,e){if(t){var n,i=Qm(e.getScene().getEntities());try{for(i.s();!(n=i.n()).done;){var r=n.value,o=this.mesh.getComponentByEntity(r).material;o.setUniform("u_PickingStage",Eg),o.setUniform("u_PickingColor",[t[0],t[1],t[2]]),o.setUniform("u_HighlightColor",this.highlightColor)}}catch(t){i.e(t)}finally{i.f()}}}}]),t}(),$m.IDENTIFIER="PixelPicking Pass",Vm=uf((Um=Zm).prototype,"engine",[Bm],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xm=uf(Um.prototype,"resourcePool",[zm],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qm=uf(Um.prototype,"renderPassFactory",[Hm],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Km=uf(Um.prototype,"mesh",[Gm],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wm=Um))||Wm),kg=(eg=(0,wf.b2)(),ng=(0,wf.f3)(xf.RenderEngine),ig=(0,wf.f3)(xf.ResourcePool),eg((ug=lg=function t(){var e=this;af(this,t),of(this,"engine",ag,this),of(this,"resourcePool",sg,this),this.model=void 0,this.setup=function(t,e,n){var i=t.getPass(Jm.IDENTIFIER);if(i){var r=t.createRenderTarget(e,"render to screen",{width:1,height:1});n.data={input:e.read(i.data.output),output:e.write(t,r)}}},this.execute=function(){var t=ff(hf().mark((function t(n,i){var r,o,a,s,l,u,c;return hf().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.engine,o=r.createModel,a=r.createAttribute,s=r.createBuffer,e.model){t.next=6;break}return t.next=4,o({vs:e.engine.supportWebGPU?"layout(location = 0) in vec2 a_Position;\nlayout(location = 0) out vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}":"attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",fs:e.engine.supportWebGPU?"layout(set = 0, binding = 0) uniform sampler u_TextureSampler;\nlayout(set = 0, binding = 1) uniform texture2D u_Texture;\n\nlayout(location = 0) in vec2 v_UV;\nlayout(location = 0) out vec4 outColor;\n\nvoid main() {\n  outColor = texture(sampler2D(u_Texture, u_TextureSampler), v_UV);\n}":"varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\n\nvoid main() {\n  gl_FragColor = vec4(texture2D(u_Texture, v_UV));\n}",attributes:{a_Position:a({buffer:s({data:[-4,-4,4,-4,0,4],type:ep.FLOAT}),size:2,arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]})},uniforms:{u_Texture:null},depth:{enable:!1},count:3,blend:{enable:!0}});case 4:l=t.sent,e.model=l;case 6:u=n.getResourceNode(i.data.input),c=e.resourcePool.getOrCreateResource(u.resource),e.engine.useFramebuffer(null,(function(){e.engine.clear({framebuffer:null,color:[0,0,0,0],depth:1,stencil:0}),e.model.draw({uniforms:{u_Texture:c}})}));case 9:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),this.tearDown=function(){e.model=void 0}},lg.IDENTIFIER="Copy Pass",ag=uf((og=ug).prototype,"engine",[ng],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sg=uf(og.prototype,"resourcePool",[ig],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rg=og))||rg),Cg=(cg=(0,wf.b2)(),hg=(0,wf.f3)(xf.Systems),dg=(0,wf.t6)(xf.FrameGraphSystem),fg=(0,wf.f3)(xf.RenderPassFactory),pg=(0,wf.f3)(xf.ConfigService),mg=(0,wf.f3)(xf.ResourcePool),cg((xg=function(){function t(){af(this,t),of(this,"frameGraphSystem",yg,this),of(this,"renderPassFactory",bg,this),of(this,"configService",_g,this),of(this,"resourcePool",wg,this)}var e;return lf(t,[{key:"execute",value:(e=ff(hf().mark((function t(e){var n,i,r,o,a,s,l,u;return hf().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=this.renderPassFactory(Jm.IDENTIFIER),i=n.setup,r=n.execute,this.frameGraphSystem.addPass(Jm.IDENTIFIER,i,r),o=this.renderPassFactory(kg.IDENTIFIER),a=o.setup,s=o.execute,l=o.tearDown,u=this.frameGraphSystem.addPass(kg.IDENTIFIER,a,s,l),this.frameGraphSystem.present(u.data.output);case 5:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"tearDown",value:function(){this.resourcePool.clean()}},{key:"pick",value:function(t,e){return this.renderPassFactory(Sg.IDENTIFIER).pick(t,e)}}]),t}(),yg=uf((vg=xg).prototype,"frameGraphSystem",[hg,dg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bg=uf(vg.prototype,"renderPassFactory",[fg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_g=uf(vg.prototype,"configService",[pg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wg=uf(vg.prototype,"resourcePool",[mg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gg=vg))||gg);function Tg(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Af(t);if(e){var r=Af(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Lf(this,n)}}var Dg,Lg,Ag,Og,Pg,Ig,Ng,Rg,Yg,jg,Fg=function(t){Cf(n,t);var e=Tg(n);function n(t){var i;return af(this,n),(i=e.call(this,t)).parentID=void 0,Object.assign(Df(i),t),i}return n}(gf),Bg=(Dg=(0,wf.b2)(),Lg=(0,wf.f3)(xf.HierarchyComponentManager),Ag=(0,wf.f3)(xf.TransformComponentManager),Og=(0,wf.f3)(xf.MeshComponentManager),Dg((jg=function(){function t(){af(this,t),of(this,"hierarchy",Ng,this),of(this,"transform",Rg,this),of(this,"mesh",Yg,this)}var e;return lf(t,[{key:"execute",value:(e=ff(hf().mark((function t(){return hf().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.runTransformUpdateSystem(),this.runHierarchyUpdateSystem();case 2:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"tearDown",value:function(){this.hierarchy.clear(),this.transform.clear()}},{key:"getHierarchyComponentManager",value:function(){return this.hierarchy}},{key:"getTransformComponentManager",value:function(){return this.transform}},{key:"runTransformUpdateSystem",value:function(){var t=this;this.transform.forEach((function(e,n){(n.isDirty()||n.isLocalDirty())&&(t.setMeshAABBDirty(t.mesh.getComponentByEntity(e)),n.updateTransform())}))}},{key:"runHierarchyUpdateSystem",value:function(){var t=this;this.hierarchy.forEach((function(e,n){var i=t.transform.getComponentByEntity(e),r=t.transform.getComponentByEntity(n.parentID);null!==i&&null!==r&&i.updateTransformWithParent(r)}))}},{key:"attach",value:function(t,e,n){this.hierarchy.contains(t)&&this.detach(t),this.hierarchy.create(t,{parentID:e});var i=this.mesh.getComponentByEntity(e);if(this.setMeshAABBDirty(i),i&&-1===i.children.indexOf(t)&&i.children.push(t),this.hierarchy.getCount()>1)for(var r=this.hierarchy.getCount()-1;r>0;--r)for(var o=this.hierarchy.getEntity(r),a=0;a<r;++a){if(this.hierarchy.getComponent(a).parentID===o){this.hierarchy.moveItem(r,a),++r;break}}this.hierarchy.getComponentByEntity(t);var s=this.transform.getComponentByEntity(e);null===s&&(s=this.transform.create(e));var l=this.transform.getComponentByEntity(t);null===l&&(l=this.transform.create(t),s=this.transform.getComponentByEntity(e)),l.parent=s,!n&&s&&(l.matrixTransform(rm(em(),s.worldTransform)),l.updateTransform()),s&&l.updateTransformWithParent(s)}},{key:"detach",value:function(t){var e=this.hierarchy.getComponentByEntity(t);if(null!==e){var n=this.transform.getComponentByEntity(t);null!==n&&(n.parent=null,n.applyTransform()),this.hierarchy.removeKeepSorted(t);var i=this.mesh.getComponentByEntity(e.parentID);if(i){var r=i.children.indexOf(t);i.children.splice(r,1)}this.setMeshAABBDirty(i)}}},{key:"detachChildren",value:function(t){var e=this.mesh.getComponentByEntity(t);e&&(e.children=[]);for(var n=0;n<this.hierarchy.getCount();){var i;if((null===(i=this.hierarchy.getComponent(n))||void 0===i?void 0:i.parentID)===t){var r=this.hierarchy.getEntity(n);this.detach(r)}else++n}}},{key:"setMeshAABBDirty",value:function(t){t&&(t.aabbDirty=!0)}}]),t}(),Ng=uf((Ig=jg).prototype,"hierarchy",[Lg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Rg=uf(Ig.prototype,"transform",[Ag],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Yg=uf(Ig.prototype,"mesh",[Og],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pg=Ig))||Pg);function zg(){var t=new C(4);return C!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Hg(t,e,n){n*=.5;var i=Math.sin(n);return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=Math.cos(n),t}function Gg(t,e,n){var i=e[0],r=e[1],o=e[2],a=e[3],s=n[0],l=n[1],u=n[2],c=n[3];return t[0]=i*c+a*s+r*u-o*l,t[1]=r*c+a*l+o*s-i*u,t[2]=o*c+a*u+i*l-r*s,t[3]=a*c-i*s-r*l-o*u,t}function Wg(t,e,n,i){var r,o,a,s,l,u=e[0],c=e[1],h=e[2],d=e[3],f=n[0],p=n[1],m=n[2],g=n[3];return(o=u*f+c*p+h*m+d*g)<0&&(o=-o,f=-f,p=-p,m=-m,g=-g),1-o>k?(r=Math.acos(o),a=Math.sin(r),s=Math.sin((1-i)*r)/a,l=Math.sin(i*r)/a):(s=1-i,l=i),t[0]=s*u+l*f,t[1]=s*c+l*p,t[2]=s*h+l*m,t[3]=s*d+l*g,t}function Ug(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],a=n*n+i*i+r*r+o*o,s=a?1/a:0;return t[0]=-n*s,t[1]=-i*s,t[2]=-r*s,t[3]=o*s,t}function Vg(t,e,n,i){var r=.5*Math.PI/180;e*=r,n*=r,i*=r;var o=Math.sin(e),a=Math.cos(e),s=Math.sin(n),l=Math.cos(n),u=Math.sin(i),c=Math.cos(i);return t[0]=o*l*c-a*s*u,t[1]=a*s*c+o*l*u,t[2]=a*l*u-o*s*c,t[3]=a*l*c+o*s*u,t}var Xg,qg,Kg,$g,Zg,Jg,Qg=Vf,tv=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},ev=Gg,nv=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],a=n*n+i*i+r*r+o*o;return a>0&&(a=1/Math.sqrt(a)),t[0]=n*a,t[1]=i*a,t[2]=r*a,t[3]=o*a,t};Xg=we(),qg=Ee(1,0,0),Kg=Ee(0,1,0),$g=zg(),Zg=zg(),Jg=T();function iv(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Af(t);if(e){var r=Af(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Lf(this,n)}}var rv=function(t){Cf(n,t);var e=iv(n);function n(t){var i,r,o,a,s,l,u,c,h,d,f,p,m,g,v;return af(this,n),(i=e.call(this,t)).dirtyFlag=void 0,i.localDirtyFlag=void 0,i.parent=null,i.localPosition=Ee(0,0,0),i.localRotation=Qg(0,0,0,1),i.localScale=Ee(1,1,1),i.localTransform=em(),i.position=Ee(0,0,0),i.rotation=Qg(0,0,0,1),i.scaling=Ee(1,1,1),i.worldTransform=em(),i.matrixTransform=(r=em(),function(t){om(r,i.getLocalTransform(),t),lm(i.localScale,r),sm(i.localPosition,r),um(i.localRotation,r)}),i.rotateRollPitchYaw=(o=zg(),a=zg(),s=zg(),function(t,e,n){i.setDirty(),Vg(o,t,0,0),Vg(a,0,e,0),Vg(s,0,0,n),Gg(i.localRotation,o,i.localRotation),Gg(i.localRotation,i.localRotation,a),Gg(i.localRotation,s,i.localRotation),nv(i.localRotation,i.localRotation)}),i.lerp=(l=we(),u=zg(),c=we(),h=we(),d=zg(),f=we(),function(t,e,n){i.setDirty(),lm(l,t.worldTransform),sm(c,t.worldTransform),um(u,t.worldTransform),lm(h,e.worldTransform),sm(f,e.worldTransform),um(d,e.worldTransform),Ie(i.localScale,l,h,n),Wg(i.localRotation,u,d,n),Ie(i.localPosition,c,f,n)}),i.translate=(p=we(),function(t){return Ce(p,i.getPosition(),t),i.setPosition(p),i.setDirty(!0),Df(i)}),i.translateLocal=function(t){return function(t,e,n){var i=n[0],r=n[1],o=n[2],a=n[3],s=e[0],l=e[1],u=e[2],c=r*u-o*l,h=o*s-i*u,d=i*l-r*s,f=r*d-o*h,p=o*c-i*d,m=i*h-r*c,g=2*a;c*=g,h*=g,d*=g,f*=2,p*=2,m*=2,t[0]=s+c+f,t[1]=l+h+p,t[2]=u+d+m}(t,t,i.localRotation),Ce(i.localPosition,i.localPosition,t),i.setLocalDirty(!0),Df(i)},i.setPosition=(m=em(),function(t){return i.position=t,i.setLocalDirty(!0),null===i.parent?Se(i.localPosition,t):(nm(m,i.parent.worldTransform),rm(m,m),Ne(i.localPosition,t,m)),Df(i)}),i.rotate=(g=zg(),function(t){if(null===i.parent)Gg(i.localRotation,i.localRotation,t),nv(i.localRotation,i.localRotation);else{var e=i.getRotation(),n=i.parent.getRotation();tv(g,n),Ug(g,g),Gg(g,g,t),Gg(i.localRotation,t,e),nv(i.localRotation,i.localRotation)}return i.setLocalDirty(),Df(i)}),i.rotateLocal=function(t){return Gg(i.localRotation,i.localRotation,t),nv(i.localRotation,i.localRotation),i.setLocalDirty(!0),Df(i)},i.setRotation=(v=zg(),function(t){return null===i.parent?tv(i.localRotation,t):(tv(v,i.parent.getRotation()),Ug(v,v),tv(i.localRotation,v),ev(i.localRotation,i.localRotation,t)),i.setLocalDirty(!0),Df(i)}),i}return lf(n,[{key:"setLocalPosition",value:function(t){Se(this.localPosition,t),this.setLocalDirty(!0)}},{key:"setLocalScale",value:function(t){Se(this.localScale,t),this.setLocalDirty(!0)}},{key:"setLocalRotation",value:function(t){return tv(this.localRotation,t),this.setLocalDirty(!0),this}},{key:"isDirty",value:function(){return this.dirtyFlag}},{key:"setDirty",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t?this.dirtyFlag|=n.DIRTY:this.dirtyFlag&=~n.DIRTY}},{key:"isLocalDirty",value:function(){return this.localDirtyFlag}},{key:"setLocalDirty",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t?(this.localDirtyFlag|=n.DIRTY,this.setDirty(!0)):this.localDirtyFlag&=~n.DIRTY}},{key:"updateTransform",value:function(){this.isLocalDirty()&&this.getLocalTransform(),this.isDirty()&&null===this.parent&&(nm(this.worldTransform,this.getLocalTransform()),this.setDirty(!1))}},{key:"updateTransformWithParent",value:function(t){om(this.worldTransform,t.worldTransform,this.getLocalTransform())}},{key:"applyTransform",value:function(){this.setDirty(),lm(this.localScale,this.worldTransform),sm(this.localPosition,this.worldTransform),um(this.localRotation,this.worldTransform)}},{key:"clearTransform",value:function(){this.setDirty(),this.localPosition=Ee(0,0,0),this.localRotation=Qg(0,0,0,1),this.localScale=Ee(1,1,1)}},{key:"scaleLocal",value:function(t){return this.setLocalDirty(),De(this.localScale,this.localScale,t),this}},{key:"getLocalPosition",value:function(){return this.localPosition}},{key:"getLocalRotation",value:function(){return this.localRotation}},{key:"getLocalScale",value:function(){return this.localScale}},{key:"getLocalTransform",value:function(){return this.localDirtyFlag&&(!function(t,e,n,i){var r=e[0],o=e[1],a=e[2],s=e[3],l=r+r,u=o+o,c=a+a,h=r*l,d=r*u,f=r*c,p=o*u,m=o*c,g=a*c,v=s*l,y=s*u,b=s*c,_=i[0],w=i[1],x=i[2];t[0]=(1-(p+g))*_,t[1]=(d+b)*_,t[2]=(f-y)*_,t[3]=0,t[4]=(d-b)*w,t[5]=(1-(h+g))*w,t[6]=(m+v)*w,t[7]=0,t[8]=(f+y)*x,t[9]=(m-v)*x,t[10]=(1-(h+p))*x,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1}(this.localTransform,this.localRotation,this.localPosition,this.localScale),this.setLocalDirty(!1)),this.localTransform}},{key:"getWorldTransform",value:function(){return this.isLocalDirty()||this.isDirty()?(this.parent&&this.parent.getWorldTransform(),this.updateTransform(),this.worldTransform):this.worldTransform}},{key:"getPosition",value:function(){return sm(this.position,this.worldTransform),this.position}},{key:"getRotation",value:function(){return um(this.rotation,this.worldTransform),this.rotation}},{key:"getScale",value:function(){return lm(this.scaling,this.worldTransform),this.scaling}}]),n}(gf);rv.DIRTY=1;var ov,av,sv,lv,uv,cv,hv=n(84879),dv=(ov=(0,wf.b2)(),av=(0,wf.f3)(xf.RenderEngine),ov((cv=function(){function t(){af(this,t),of(this,"engine",uv,this),this.resourcePool={}}return lf(t,[{key:"getOrCreateResource",value:function(t){if(!this.resourcePool[t.name]){var e=t.descriptor,n=e.width,i=e.height,r=e.usage;this.resourcePool[t.name]=this.engine.createFramebuffer({color:this.engine.createTexture2D({width:n,height:i,wrapS:ep.CLAMP_TO_EDGE,wrapT:ep.CLAMP_TO_EDGE,usage:r})})}return this.resourcePool[t.name]}},{key:"clean",value:function(){this.resourcePool={}}}]),t}(),uv=uf((lv=cv).prototype,"engine",[av],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sv=lv))||sv);function fv(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Af(t);if(e){var r=Af(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Lf(this,n)}}var pv,mv,gv,vv,yv=function(t){Cf(n,t);var e=fv(n);function n(t){var i;return af(this,n),(i=e.call(this,t)).name=void 0,i.name=t.name||"",i}return n}(gf),bv=(0,wf.b2)()((mv=function(){function t(){af(this,t),this.config=void 0}return lf(t,[{key:"get",value:function(){return this.config}},{key:"set",value:function(t){this.config=t}}]),t}(),pv=mv))||pv;!function(t){t.PANSTART="PANSTART",t.PANEND="PANEND",t.PANMOVE="PANMOVE",t.PINCH="PINCH",t.KEYDOWN="KEYDOWN",t.KEYUP="KEYUP",t.HOVER="HOVER"}(vv||(vv={}));var _v=(0,wf.b2)()(gv=function(){function t(){af(this,t)}return lf(t,[{key:"listen",value:function(t){}},{key:"on",value:function(t,e){}},{key:"connect",value:function(){}},{key:"disconnect",value:function(){}},{key:"destroy",value:function(){}}]),t}())||gv;var wv,xv,Mv=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g;function Ev(t){var e={};return t=t.replace(Mv,(function(t,n,i){var r=i.split(":"),o=r[0].trim(),a="";switch(r.length>1&&(a=r[1].trim()),n){case"bool":a="true"===a;break;case"float":case"int":a=Number(a);break;case"vec2":case"vec3":case"vec4":case"ivec2":case"ivec3":case"ivec4":case"mat2":case"mat3":case"mat4":a=a?a.replace("[","").replace("]","").split(",").reduce((function(t,e){return t.push(Number(e.trim())),t}),[]):new Array(function(t){var e=0;switch(t){case"vec2":case"ivec2":e=2;break;case"vec3":case"ivec3":e=3;break;case"vec4":case"ivec4":case"mat2":e=4;break;case"mat3":e=9;break;case"mat4":e=16}return e}(n)).fill(0)}return e[o]=a,"uniform ".concat(n," ").concat(o,";\n")})),{content:t,uniforms:e}}function Sv(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function kv(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Sv(Object(n),!0).forEach((function(e){Wf(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Sv(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Cv=/precision\s+(high|low|medium)p\s+float/,Tv=/#pragma include (["^+"]?["\ "[a-zA-Z_0-9](.*)"]*?)/g,Dv=(0,wf.b2)()((xv=function(){function t(){af(this,t),this.moduleCache={},this.rawContentCache={}}return lf(t,[{key:"registerBuiltinModules",value:function(){this.destroy(),this.registerModule("picking",{vs:"attribute vec3 a_PickingColor;\nvarying vec4 v_PickingResult;\n\nuniform vec3 u_PickingColor : [0, 0, 0];\nuniform vec4 u_HighlightColor : [0, 0, 0, 0];\nuniform float u_PickingStage : 0.0;\nuniform float u_PickingThreshold : 1.0;\nuniform float u_PickingBuffer: 0.0;\n\n#define PICKING_ENCODE 1.0\n#define PICKING_HIGHLIGHT 2.0\n#define COLOR_SCALE 1. / 255.\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    abs(vertexColor.r - u_PickingColor.r) < u_PickingThreshold &&\n    abs(vertexColor.g - u_PickingColor.g) < u_PickingThreshold &&\n    abs(vertexColor.b - u_PickingColor.b) < u_PickingThreshold;\n}\n\nvoid setPickingColor(vec3 pickingColor) {\n  // compares only in highlight stage\n  v_PickingResult.a = float((u_PickingStage == PICKING_HIGHLIGHT) && isVertexPicked(pickingColor));\n\n  // Stores the picking color so that the fragment shader can render it during picking\n  v_PickingResult.rgb = pickingColor * COLOR_SCALE;\n}\n\nfloat setPickingSize(float x) {\n   return u_PickingStage == PICKING_ENCODE ? x + u_PickingBuffer : x;\n}",fs:"varying vec4 v_PickingResult;\nuniform vec4 u_HighlightColor : [0, 0, 0, 0];\nuniform float u_PickingStage : 0.0;\n\n#define PICKING_ENCODE 1.0\n#define PICKING_HIGHLIGHT 2.0\n#define COLOR_SCALE 1. / 255.\n\n/*\n * Returns highlight color if this item is selected.\n */\nvec4 filterHighlightColor(vec4 color) {\n  bool selected = bool(v_PickingResult.a);\n\n  if (selected) {\n    vec4 highLightColor = u_HighlightColor * COLOR_SCALE;\n\n    float highLightAlpha = highLightColor.a;\n    float highLightRatio = highLightAlpha / (highLightAlpha + color.a * (1.0 - highLightAlpha));\n\n    vec3 resultRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);\n    return vec4(resultRGB, color.a);\n  } else {\n    return color;\n  }\n}\n\n/*\n * Returns picking color if picking enabled else unmodified argument.\n */\nvec4 filterPickingColor(vec4 color) {\n  vec3 pickingColor = v_PickingResult.rgb;\n  if (u_PickingStage == PICKING_ENCODE && length(pickingColor) < 0.001) {\n    discard;\n  }\n  return u_PickingStage == PICKING_ENCODE ? vec4(pickingColor, step(0.001,color.a)): color;\n}\n\n/*\n * Returns picking color if picking is enabled if not\n * highlight color if this item is selected, otherwise unmodified argument.\n */\nvec4 filterColor(vec4 color) {\n  return filterPickingColor(filterHighlightColor(color));\n}\n"}),this.registerModule("sdf2d",{vs:"",fs:"/**\n * 2D signed distance field functions\n * @see http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm\n */\n\nfloat ndot(vec2 a, vec2 b ) { return a.x*b.x - a.y*b.y; }\n\nfloat sdCircle(vec2 p, float r) {\n  return length(p) - r;\n}\n\nfloat sdEquilateralTriangle(vec2 p) {\n  float k = sqrt(3.0);\n  p.x = abs(p.x) - 1.0;\n  p.y = p.y + 1.0/k;\n  if( p.x + k*p.y > 0.0 ) p = vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;\n  p.x -= clamp( p.x, -2.0, 0.0 );\n  return -length(p)*sign(p.y);\n}\n\nfloat sdBox(vec2 p, vec2 b) {\n  vec2 d = abs(p)-b;\n  return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0);\n}\n\nfloat sdPentagon(vec2 p, float r) {\n  vec3 k = vec3(0.809016994,0.587785252,0.726542528);\n  p.x = abs(p.x);\n  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);\n  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);\n  p -= vec2(clamp(p.x,-r*k.z,r*k.z),r);\n  return length(p)*sign(p.y);\n}\n\nfloat sdHexagon(vec2 p, float r) {\n  vec3 k = vec3(-0.866025404,0.5,0.577350269);\n  p = abs(p);\n  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;\n  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);\n  return length(p)*sign(p.y);\n}\n\nfloat sdOctogon(vec2 p, float r) {\n  vec3 k = vec3(-0.9238795325, 0.3826834323, 0.4142135623 );\n  p = abs(p);\n  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);\n  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);\n  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);\n  return length(p)*sign(p.y);\n}\n\nfloat sdHexagram(vec2 p, float r) {\n  vec4 k=vec4(-0.5,0.8660254038,0.5773502692,1.7320508076);\n  p = abs(p);\n  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;\n  p -= 2.0*min(dot(k.yx,p),0.0)*k.yx;\n  p -= vec2(clamp(p.x,r*k.z,r*k.w),r);\n  return length(p)*sign(p.y);\n}\n\nfloat sdRhombus(vec2 p, vec2 b) {\n  vec2 q = abs(p);\n  float h = clamp((-2.0*ndot(q,b)+ndot(b,b))/dot(b,b),-1.0,1.0);\n  float d = length( q - 0.5*b*vec2(1.0-h,1.0+h) );\n  return d * sign( q.x*b.y + q.y*b.x - b.x*b.y );\n}\n\nfloat sdVesica(vec2 p, float r, float d) {\n  p = abs(p);\n  float b = sqrt(r*r-d*d); // can delay this sqrt\n  return ((p.y-b)*d>p.x*b)\n          ? length(p-vec2(0.0,b))\n          : length(p-vec2(-d,0.0))-r;\n}"})}},{key:"registerModule",value:function(t,e){if(!this.rawContentCache[t]){var n=e.vs,i=void 0===n?"":n,r=e.fs,o=void 0===r?"":r,a=e.uniforms,s=Ev(i),l=s.content,u=s.uniforms,c=Ev(o),h=c.content,d=c.uniforms;this.rawContentCache[t]={fs:h,uniforms:kv(kv(kv({},u),d),a),vs:l}}}},{key:"destroy",value:function(){this.moduleCache={},this.rawContentCache={}}},{key:"getModule",value:function(t){var e=this;if(this.moduleCache[t])return this.moduleCache[t];var n=this.rawContentCache[t].vs||"",i=this.rawContentCache[t].fs||"",r=this.processModule(n,[],"vs"),o=r.content,a=r.includeList,s=this.processModule(i,[],"fs"),l=s.content,u=s.includeList,c=l,h=function(t){return t.filter((function(t,e,n){return n.indexOf(t)===e}))}(a.concat(u).concat(t)).reduce((function(t,n){return kv(kv({},t),e.rawContentCache[n].uniforms)}),{});return Cv.test(l)||(c="#ifdef GL_FRAGMENT_PRECISION_HIGH\n precision highp float;\n #else\n precision mediump float;\n#endif\n"+l),this.moduleCache[t]={fs:c.trim(),uniforms:h,vs:o.trim()},this.moduleCache[t]}},{key:"processModule",value:function(t,e,n){var i=this;return{content:t.replace(Tv,(function(t,r){var o=r.split(" ")[0].replace(/"/g,"");if(e.indexOf(o)>-1)return"";var a=i.rawContentCache[o][n];return e.push(o),i.processModule(a||"",e,n).content})),includeList:e}}}]),t}(),wv=xv))||wv,Lv=new wf.W2;(0,hv.Z)(Lv,!1);function Av(){var t=new wf.W2;return t.parent=Lv,t.bind(xf.Systems).to(Bg).inSingletonScope().whenTargetNamed(xf.SceneGraphSystem),t.bind(xf.Systems).to(Gf).inSingletonScope().whenTargetNamed(xf.FrameGraphSystem),t.bind(xf.Systems).to(tm).inSingletonScope().whenTargetNamed(xf.MeshSystem),t.bind(xf.Systems).to(hp).inSingletonScope().whenTargetNamed(xf.GeometrySystem),t.bind(xf.Systems).to(Dp).inSingletonScope().whenTargetNamed(xf.MaterialSystem),t.bind(xf.Systems).to(Cg).inSingletonScope().whenTargetNamed(xf.RendererSystem),t.bind(xf.ResourcePool).to(dv).inSingletonScope(),t.bind(xf.ConfigService).to(bv).inSingletonScope(),t.bind(xf.InteractorService).to(_v).inSingletonScope(),t.bind(xf.RenderPass).to(Jm).inSingletonScope().whenTargetNamed(Jm.IDENTIFIER),t.bind(xf.RenderPass).to(kg).inSingletonScope().whenTargetNamed(kg.IDENTIFIER),t.bind(xf.RenderPass).to(Sg).inSingletonScope().whenTargetNamed(Sg.IDENTIFIER),t.bind(xf.RenderPassFactory).toFactory((function(t){return function(e){return t.container.getNamed(xf.RenderPass,e)}})),t}function Ov(t){for(var e=new Op,n=Ee(t[0],t[1],t[2]),i=Ee(t[0],t[1],t[2]),r=3;r<t.length;){var o=t[r++],a=t[r++],s=t[r++];o<n[0]&&(n[0]=o),a<n[1]&&(n[1]=a),s<n[2]&&(n[2]=s),o>i[0]&&(i[0]=o),a>i[1]&&(i[1]=a),s>i[2]&&(i[2]=s)}return e.setMinMax(n,i),e}Lv.bind(xf.ShaderModuleService).to(Dv).inSingletonScope(),Lv.bind(xf.NameComponentManager).toConstantValue(new vf(yv)),Lv.bind(xf.HierarchyComponentManager).toConstantValue(new vf(Fg)),Lv.bind(xf.TransformComponentManager).toConstantValue(new vf(rv)),Lv.bind(xf.MeshComponentManager).toConstantValue(new vf(Np)),Lv.bind(xf.CullableComponentManager).toConstantValue(new vf(Ap)),Lv.bind(xf.GeometryComponentManager).toConstantValue(new vf(cp)),Lv.bind(xf.MaterialComponentManager).toConstantValue(new vf(Sp));var Pv,Iv="undefined"!=typeof navigator&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent);we(),we(),we(),we(),we(),we(),n(59518),n(26199),n(14156),n(71468),n(48871),n(9871);!function(t){t.Normal="normal",t.PostProcessing="post-processing"}(Pv||(Pv={}));var Nv,Rv,Yv,jv;n(25612),n(92777),n(20159),n(61622),n(20499),n(64851);!function(t){t.Void="Void",t.Boolean="Boolean",t.Float="Float",t.Uint32="Uint32",t.Int32="Int32",t.Vector="Vector",t.Vector2Float="vec2<f32>",t.Vector3Float="vec3<f32>",t.Vector4Float="vec4<f32>",t.Vector2Boolean="vec2<bool>",t.Vector3Boolean="vec3<bool>",t.Vector4Boolean="vec4<bool>",t.Vector2Uint="vec2<u32>",t.Vector3Uint="vec3<u32>",t.Vector4Uint="vec4<u32>",t.Vector2Int="vec2<i32>",t.Vector3Int="vec3<i32>",t.Vector4Int="vec4<i32>",t.Matrix="Matrix",t.Matrix3x3Float="mat3x3<f32>",t.Matrix4x4Float="mat4x4<i32>",t.Struct="Struct",t.FloatArray="Float[]",t.Vector4FloatArray="vec4<f32>[]"}(Nv||(Nv={})),function(t){t.Program="Program",t.Identifier="Identifier",t.VariableDeclaration="VariableDeclaration",t.BlockStatement="BlockStatement",t.ReturnStatement="ReturnStatement",t.FunctionDeclaration="FunctionDeclaration",t.VariableDeclarator="VariableDeclarator",t.AssignmentExpression="AssignmentExpression",t.LogicalExpression="LogicalExpression",t.BinaryExpression="BinaryExpression",t.ArrayExpression="ArrayExpression",t.UnaryExpression="UnaryExpression",t.UpdateExpression="UpdateExpression",t.FunctionExpression="FunctionExpression",t.MemberExpression="MemberExpression",t.ConditionalExpression="ConditionalExpression",t.ExpressionStatement="ExpressionStatement",t.CallExpression="CallExpression",t.NumThreadStatement="NumThreadStatement",t.StorageStatement="StorageStatement",t.DoWhileStatement="DoWhileStatement",t.WhileStatement="WhileStatement",t.ForStatement="ForStatement",t.BreakStatement="BreakStatement",t.ContinueStatement="ContinueStatement",t.IfStatement="IfStatement",t.ImportedFunctionStatement="ImportedFunctionStatement"}(Rv||(Rv={})),function(t){t.Input="Input",t.Output="Output",t.Uniform="Uniform",t.Workgroup="Workgroup",t.UniformConstant="UniformConstant",t.Image="Image",t.StorageBuffer="StorageBuffer",t.Private="Private",t.Function="Function"}(Yv||(Yv={})),function(t){t.GLSL100="GLSL100",t.GLSL450="GLSL450",t.WGSL="WGSL"}(jv||(jv={}));function Fv(t){return"number"==typeof t}function Bv(t){return void 0===t?0:t>360||t<-360?t%360:t}function zv(t,e,n){return Fv(t)?Ee(t,e,n):3===t.length?xe(t):Ee(t[0],t[1],t[2])}var Hv,Gv,Wv,Uv,Vv,Xv,qv,Kv,$v,Zv,Jv=function(){function t(e,n){af(this,t),this.name=void 0,this.matrix=void 0,this.right=void 0,this.up=void 0,this.forward=void 0,this.position=void 0,this.focalPoint=void 0,this.distanceVector=void 0,this.distance=void 0,this.dollyingStep=void 0,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.name=e,this.matrix=function(t){var e=new C(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}(n.matrix),this.right=xe(n.right),this.up=xe(n.up),this.forward=xe(n.forward),this.position=xe(n.position),this.focalPoint=xe(n.focalPoint),this.distanceVector=xe(n.distanceVector),this.azimuth=n.azimuth,this.elevation=n.elevation,this.roll=n.roll,this.relAzimuth=n.relAzimuth,this.relElevation=n.relElevation,this.relRoll=n.relRoll,this.dollyingStep=n.dollyingStep,this.distance=n.distance}return lf(t,[{key:"getPosition",value:function(){return this.position}},{key:"getFocalPoint",value:function(){return this.focalPoint}},{key:"getRoll",value:function(){return this.roll}},{key:"retrieve",value:function(t){t.matrix=nm(t.matrix,this.matrix),t.right=Se(t.right,this.right),t.up=Se(t.up,this.up),t.forward=Se(t.forward,this.forward),t.position=Se(t.position,this.position),t.focalPoint=Se(t.focalPoint,this.focalPoint),t.distanceVector=Se(t.distanceVector,this.distanceVector),t.azimuth=this.azimuth,t.elevation=this.elevation,t.roll=this.roll,t.relAzimuth=this.relAzimuth,t.relElevation=this.relElevation,t.relRoll=this.relRoll,t.dollyingStep=this.dollyingStep,t.distance=this.distance}}]),t}();!function(t){t.ORBITING="ORBITING",t.EXPLORING="EXPLORING",t.TRACKING="TRACKING"}(Kv||(Kv={})),function(t){t.DEFAULT="DEFAULT",t.ROTATIONAL="ROTATIONAL",t.TRANSLATIONAL="TRANSLATIONAL",t.CINEMATIC="CINEMATIC"}($v||($v={})),function(t){t.ORTHOGRAPHIC="ORTHOGRAPHIC",t.PERSPECTIVE="PERSPECTIVE"}(Zv||(Zv={}));var Qv,ty,ey,ny,iy,ry,oy,ay=Math.PI/180,sy=180/Math.PI,ly=(Hv=(0,wf.b2)(),Gv=(0,wf.f3)(xf.InteractorService),Hv((qv=Xv=function(){function t(){af(this,t),this.matrix=em(),this.right=Ee(1,0,0),this.up=Ee(0,1,0),this.forward=Ee(0,0,1),this.position=Ee(0,0,1),this.focalPoint=Ee(0,0,0),this.distanceVector=Ee(0,0,0),this.distance=1,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.dollyingStep=0,this.maxDistance=1/0,this.minDistance=-1/0,this.rotateWorld=!1,of(this,"interactor",Vv,this),this.fov=30,this.near=.1,this.far=1e4,this.aspect=1,this.left=void 0,this.rright=void 0,this.top=void 0,this.bottom=void 0,this.zoom=1,this.perspective=em(),this.view=void 0,this.following=void 0,this.type=Kv.EXPLORING,this.trackingMode=$v.DEFAULT,this.projectionMode=Zv.PERSPECTIVE,this.frustum=new Zp,this.landmarks=[],this.landmarkAnimationID=void 0}return lf(t,[{key:"clone",value:function(){var e=new t;return e.setType(this.type,void 0),e.interactor=this.interactor,e}},{key:"getProjectionMode",value:function(){return this.projectionMode}},{key:"getPerspective",value:function(){return this.perspective}},{key:"getFrustum",value:function(){return this.frustum}},{key:"getPosition",value:function(){return this.position}},{key:"setType",value:function(t,e){return this.type=t,this.type===Kv.EXPLORING?this.setWorldRotation(!0):this.setWorldRotation(!1),this._getAngles(),this.type===Kv.TRACKING&&void 0!==e&&this.setTrackingMode(e),this}},{key:"setProjectionMode",value:function(t){return this.projectionMode=t,this}},{key:"setTrackingMode",value:function(t){if(this.type!==Kv.TRACKING)throw new Error("Impossible to set a tracking mode if the camera is not of tracking type");return this.trackingMode=t,this}},{key:"setWorldRotation",value:function(t){this.rotateWorld=t,this._getAngles()}},{key:"getViewTransform",value:function(){return rm(em(),this.matrix)}},{key:"getWorldTransform",value:function(){return this.matrix}},{key:"setMatrix",value:function(t){return this.matrix=t,this._update(),this}},{key:"setAspect",value:function(t){return this.setPerspective(this.near,this.far,this.fov,t),this}},{key:"setViewOffset",value:function(t,e,n,i,r,o){return this.aspect=t/e,void 0===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=o,this.projectionMode===Zv.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"clearViewOffset",value:function(){return void 0!==this.view&&(this.view.enabled=!1),this.projectionMode===Zv.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"setPerspective",value:function(t,e,n,i){return this.projectionMode=Zv.PERSPECTIVE,this.fov=n,this.near=t,this.far=e,this.aspect=i,hm(this.perspective,this.fov*ay,this.aspect,this.near,this.far),this}},{key:"setOrthographic",value:function(t,e,n,i,r,o){this.projectionMode=Zv.ORTHOGRAPHIC,this.rright=e,this.left=t,this.top=n,this.bottom=i,this.near=r,this.far=o;var a=(this.rright-this.left)/(2*this.zoom),s=(this.top-this.bottom)/(2*this.zoom),l=(this.rright+this.left)/2,u=(this.top+this.bottom)/2,c=l-a,h=l+a,d=u+s,f=u-s;if(void 0!==this.view&&this.view.enabled){var p=(this.rright-this.left)/this.view.fullWidth/this.zoom,m=(this.top-this.bottom)/this.view.fullHeight/this.zoom;h=(c+=p*this.view.offsetX)+p*this.view.width,f=(d-=m*this.view.offsetY)-m*this.view.height}return dm(this.perspective,c,h,d,f,r,o),this}},{key:"setPosition",value:function(t,e,n){return this._setPosition(t,e,n),this.setFocalPoint(this.focalPoint),this}},{key:"setFocalPoint",value:function(t,e,n){var i=Ee(0,1,0);if(this.focalPoint=zv(t,e,n),this.trackingMode===$v.CINEMATIC){var r=Te(we(),this.focalPoint,this.position);t=r[0],e=r[1],n=r[2];var o=Me(r),a=Math.asin(e/o)*sy,s=90+Math.atan2(n,t)*sy,l=em();!function(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[0],a=e[1],s=e[2],l=e[3],u=e[8],c=e[9],h=e[10],d=e[11];e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*r-u*i,t[1]=a*r-c*i,t[2]=s*r-h*i,t[3]=l*r-d*i,t[8]=o*i+u*r,t[9]=a*i+c*r,t[10]=s*i+h*r,t[11]=l*i+d*r}(l,l,s*ay),function(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[4],a=e[5],s=e[6],l=e[7],u=e[8],c=e[9],h=e[10],d=e[11];e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*r+u*i,t[5]=a*r+c*i,t[6]=s*r+h*i,t[7]=l*r+d*i,t[8]=u*r-o*i,t[9]=c*r-a*i,t[10]=h*r-s*i,t[11]=d*r-l*i}(l,l,a*ay),i=Ne(we(),[0,1,0],l)}return rm(this.matrix,function(t,e,n,i){var r,o,a,s,l,u,c,h,d,f,p=e[0],m=e[1],g=e[2],v=i[0],y=i[1],b=i[2],_=n[0],w=n[1],x=n[2];return Math.abs(p-_)<k&&Math.abs(m-w)<k&&Math.abs(g-x)<k?im(t):(c=p-_,h=m-w,d=g-x,r=y*(d*=f=1/Math.hypot(c,h,d))-b*(h*=f),o=b*(c*=f)-v*d,a=v*h-y*c,(f=Math.hypot(r,o,a))?(r*=f=1/f,o*=f,a*=f):(r=0,o=0,a=0),s=h*a-d*o,l=d*r-c*a,u=c*o-h*r,(f=Math.hypot(s,l,u))?(s*=f=1/f,l*=f,u*=f):(s=0,l=0,u=0),t[0]=r,t[1]=s,t[2]=c,t[3]=0,t[4]=o,t[5]=l,t[6]=h,t[7]=0,t[8]=a,t[9]=u,t[10]=d,t[11]=0,t[12]=-(r*p+o*m+a*g),t[13]=-(s*p+l*m+u*g),t[14]=-(c*p+h*m+d*g),t[15]=1,t)}(em(),this.position,this.focalPoint,i)),this._getAxes(),this._getDistance(),this._getAngles(),this}},{key:"setDistance",value:function(t){if(!(this.distance===t||t<0)){this.distance=t,this.distance<2e-4&&(this.distance=2e-4),this.dollyingStep=this.distance/100;var e=we();t=this.distance;var n=this.forward,i=this.focalPoint;return e[0]=t*n[0]+i[0],e[1]=t*n[1]+i[1],e[2]=t*n[2]+i[2],this._setPosition(e),this}}},{key:"setMaxDistance",value:function(t){return this.maxDistance=t,this}},{key:"setMinDistance",value:function(t){return this.minDistance=t,this}},{key:"changeAzimuth",value:function(t){return this.setAzimuth(this.azimuth+t),this}},{key:"changeElevation",value:function(t){return this.setElevation(this.elevation+t),this}},{key:"changeRoll",value:function(t){return this.setRoll(this.roll+t),this}},{key:"setAzimuth",value:function(t){return this.azimuth=Bv(t),this.computeMatrix(),this._getAxes(),this.type===Kv.ORBITING||this.type===Kv.EXPLORING?this._getPosition():this.type===Kv.TRACKING&&this._getFocalPoint(),this}},{key:"getAzimuth",value:function(){return this.azimuth}},{key:"setElevation",value:function(t){return this.elevation=Bv(t),this.computeMatrix(),this._getAxes(),this.type===Kv.ORBITING||this.type===Kv.EXPLORING?this._getPosition():this.type===Kv.TRACKING&&this._getFocalPoint(),this}},{key:"setRoll",value:function(t){return this.roll=Bv(t),this.computeMatrix(),this._getAxes(),this.type===Kv.ORBITING||this.type===Kv.EXPLORING?this._getPosition():this.type===Kv.TRACKING&&this._getFocalPoint(),this}},{key:"rotate",value:function(t,e,n){if(this.type===Kv.EXPLORING){t=Bv(t),e=Bv(e),n=Bv(n);var i=Hg(zg(),[1,0,0],(this.rotateWorld?1:-1)*e*ay),r=Hg(zg(),[0,1,0],(this.rotateWorld?1:-1)*t*ay),o=Hg(zg(),[0,0,1],n*ay),a=Gg(zg(),r,i);a=Gg(zg(),a,o);var s=cm(em(),a);am(this.matrix,this.matrix,[0,0,-this.distance]),om(this.matrix,this.matrix,s),am(this.matrix,this.matrix,[0,0,this.distance])}else{if(Math.abs(this.elevation+e)>90)return;this.relElevation=Bv(e),this.relAzimuth=Bv(t),this.relRoll=Bv(n),this.elevation+=this.relElevation,this.azimuth+=this.relAzimuth,this.roll+=this.relRoll,this.computeMatrix()}return this._getAxes(),this.type===Kv.ORBITING||this.type===Kv.EXPLORING?this._getPosition():this.type===Kv.TRACKING&&this._getFocalPoint(),this._update(),this}},{key:"pan",value:function(t,e){var n=zv(t,e,0),i=xe(this.position);return Ce(i,i,Le(we(),this.right,n[0])),Ce(i,i,Le(we(),this.up,n[1])),this._setPosition(i),this}},{key:"dolly",value:function(t){var e=this.forward,n=xe(this.position),i=this.dollyingStep,r=this.distance+t*this.dollyingStep;return i=Math.max(Math.min(r,this.maxDistance),this.minDistance)-this.distance,n[0]+=i*e[0],n[1]+=i*e[1],n[2]+=i*e[2],this._setPosition(n),this.type===Kv.ORBITING||this.type===Kv.EXPLORING?this._getDistance():this.type===Kv.TRACKING&&Ce(this.focalPoint,n,this.distanceVector),this}},{key:"createLandmark",value:function(t,e){var n=this.clone();n.setPosition(e.position),n.setFocalPoint(e.focalPoint),void 0!==e.roll&&n.setRoll(e.roll);var i=new Jv(t,n);return this.landmarks.push(i),i}},{key:"setLandmark",value:function(t){var e=new Jv(t,this);return this.landmarks.push(e),this}},{key:"gotoLandmark",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,i=this.landmarks.find((function(e){return e.name===t}));if(i){if(0===n)return void i.retrieve(this);void 0!==this.landmarkAnimationID&&window.cancelAnimationFrame(this.landmarkAnimationID),this.interactor.disconnect();var r,o=i.getPosition(),a=i.getFocalPoint(),s=i.getRoll(),l=function t(i){void 0===r&&(r=i);var l,u=i-r,c=(1-Math.cos(u/n*Math.PI))/2,h=we(),d=we();if(Ie(h,e.focalPoint,a,c),Ie(d,e.position,o,c),l=e.roll*(1-c)+s*c,e.setFocalPoint(h),e.setPosition(d),e.setRoll(l),e.computeMatrix(),!(Fe(h,a)+Fe(d,o)>.01))return e.setFocalPoint(h),e.setPosition(d),e.setRoll(l),e.computeMatrix(),void e.interactor.connect();u<n&&(e.landmarkAnimationID=window.requestAnimationFrame(t))};window.requestAnimationFrame(l)}}},{key:"_update",value:function(){this._getAxes(),this._getPosition(),this._getDistance(),this._getAngles()}},{key:"computeMatrix",value:function(){var t,e,n=Hg(zg(),[0,0,1],this.roll*ay);im(this.matrix),t=Hg(zg(),[1,0,0],(this.rotateWorld&&this.type!==Kv.TRACKING||this.type===Kv.TRACKING?1:-1)*this.elevation*ay),e=Hg(zg(),[0,1,0],(this.rotateWorld&&this.type!==Kv.TRACKING||this.type===Kv.TRACKING?1:-1)*this.azimuth*ay);var i=Gg(zg(),e,t);i=Gg(zg(),i,n);var r=cm(em(),i);this.type===Kv.ORBITING||this.type===Kv.EXPLORING?(am(this.matrix,this.matrix,this.focalPoint),om(this.matrix,this.matrix,r),am(this.matrix,this.matrix,[0,0,this.distance])):this.type===Kv.TRACKING&&(am(this.matrix,this.matrix,this.position),om(this.matrix,this.matrix,r))}},{key:"_setPosition",value:function(t,e,n){this.position=zv(t,e,n);var i=this.matrix;i[12]=this.position[0],i[13]=this.position[1],i[14]=this.position[2],i[15]=1}},{key:"_getAxes",value:function(){Se(this.right,zv(Xf(Uf(),[1,0,0,0],this.matrix))),Se(this.up,zv(Xf(Uf(),[0,1,0,0],this.matrix))),Se(this.forward,zv(Xf(Uf(),[0,0,1,0],this.matrix))),Ae(this.right,this.right),Ae(this.up,this.up),Ae(this.forward,this.forward)}},{key:"_getAngles",value:function(){var t=this.distanceVector[0],e=this.distanceVector[1],n=this.distanceVector[2],i=Me(this.distanceVector);if(0===i)return this.elevation=0,void(this.azimuth=0);this.type===Kv.TRACKING||this.rotateWorld?(this.elevation=Math.asin(e/i)*sy,this.azimuth=Math.atan2(-t,-n)*sy):(this.elevation=-Math.asin(e/i)*sy,this.azimuth=-Math.atan2(-t,-n)*sy)}},{key:"_getPosition",value:function(){Se(this.position,zv(Xf(Uf(),[0,0,0,1],this.matrix))),this._getDistance()}},{key:"_getFocalPoint",value:function(){Re(this.distanceVector,[0,0,-this.distance],D(T(),this.matrix)),Ce(this.focalPoint,this.position,this.distanceVector),this._getDistance()}},{key:"_getDistance",value:function(){this.distanceVector=Te(we(),this.focalPoint,this.position),this.distance=Me(this.distanceVector),this.dollyingStep=this.distance/100}}]),t}(),Xv.ProjectionMode={ORTHOGRAPHIC:"ORTHOGRAPHIC",PERSPECTIVE:"PERSPECTIVE"},Vv=uf((Uv=qv).prototype,"interactor",[Gv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wv=Uv))||Wv),uy=(Qv=(0,wf.b2)(),ty=(0,wf.f3)(xf.GeometryComponentManager),Qv((oy=ry=function(){function t(){af(this,t),this.config=void 0,of(this,"geometry",iy,this),this.entity=void 0,this.component=void 0}return lf(t,[{key:"getEntity",value:function(){return this.entity}},{key:"getComponent",value:function(){return this.component}},{key:"setConfig",value:function(t){this.config=t}},{key:"setEntity",value:function(t){this.entity=t,this.component=this.geometry.create(t),this.component.entity=t,this.onEntityCreated()}},{key:"onEntityCreated",value:function(){}}]),t}(),ry.BOX="box",ry.SPHERE="sphere",ry.PLANE="plane",ry.MERGED="merged",iy=uf((ny=oy).prototype,"geometry",[ty],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ey=ny))||ey),cy=n(49469);function hy(){if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}var dy={}.toString;const fy=function(t,e){return dy.call(t)==="[object "+e+"]"};var py=9007199254740991,my={};my["[object Float32Array]"]=my["[object Float64Array]"]=my["[object Int8Array]"]=my["[object Int16Array]"]=my["[object Int32Array]"]=my["[object Uint8Array]"]=my["[object Uint8ClampedArray]"]=my["[object Uint16Array]"]=my["[object Uint32Array]"]=!0,my["[object Arguments]"]=my["[object Array]"]=my["[object ArrayBuffer]"]=my["[object Boolean]"]=my["[object DataView]"]=my["[object Date]"]=my["[object Error]"]=my["[object Function]"]=my["[object Map]"]=my["[object Number]"]=my["[object Object]"]=my["[object RegExp]"]=my["[object Set]"]=my["[object String]"]=my["[object WeakMap]"]=!1;var gy=Object.prototype.toString;var vy,yy,by,_y,wy,xy,My,Ey,Sy=function(t){return function(t){return!!t&&"object"===Tf(t)}(t)&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=py}(t.length)&&!!my[gy.call(t)]};function ky(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Cy(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ky(Object(n),!0).forEach((function(e){Wf(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ky(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Ty,Dy,Ly,Ay,Oy,Py,Iy,Ny,Ry,Yy,jy,Fy,By,zy,Hy,Gy,Wy,Uy,Vy,Xy,qy,Ky,$y,Zy,Jy,Qy,tb,eb,nb,ib,rb,ob,ab,sb,lb,ub=(vy=(0,wf.b2)(),yy=(0,wf.f3)(xf.RenderEngine),by=(0,wf.f3)(xf.ConfigService),vy((Ey=function(){function t(){af(this,t),of(this,"engine",xy,this),of(this,"configService",My,this),this.entity=mf(),this.model=void 0,this.dirty=!0,this.compiledBundle=void 0,this.initPromise=void 0}var e,n,i;return lf(t,[{key:"init",value:function(){var t=this.configService.get(),e=t.canvas,n=t.engineOptions;this.initPromise=this.engine.init(Cy({canvas:e||hy(),swapChainFormat:cy.EV.BGRA8Unorm,antialiasing:!1},n))}},{key:"setBundle",value:function(t){this.compiledBundle=JSON.parse(JSON.stringify(t))}},{key:"setDispatch",value:function(t){return this.compiledBundle.context&&(this.compiledBundle.context.dispatch=t),this}},{key:"setMaxIteration",value:function(t){return this.compiledBundle.context&&(this.compiledBundle.context.maxIteration=t),this}},{key:"setBinding",value:function(t,e){var n=this;if("string"==typeof t){var i=Fv(e)||Sy(e)||function(t){return Array.isArray?Array.isArray(t):fy(t,"Array")}(e);if(this.compiledBundle&&this.compiledBundle.context){var r=this.compiledBundle.context.defines.find((function(e){return e.name===t}));if(r)return r.value=e,this;var o=this.compiledBundle.context.uniforms.find((function(e){return e.name===t}));o&&(i?(o.data=e,o.isReferer=!1,o.storageClass===Yv.Uniform?this.model&&this.model.updateUniform(t,e):this.model&&this.model.updateBuffer(t,e)):(o.isReferer=!0,o.data=e))}}else Object.keys(t).forEach((function(e){n.setBinding(e,t[e])}));return this}},{key:"execute",value:(i=ff(hf().mark((function t(){var e,n,i=this,r=arguments;return hf().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=r.length>0&&void 0!==r[0]?r[0]:1,!this.dirty){t.next=6;break}return this.compiledBundle.context&&(e>1?this.compiledBundle.context.maxIteration=e:this.compiledBundle.context.maxIteration++),t.next=5,this.compile();case 5:this.dirty=!1;case 6:for(this.engine.beginFrame(),this.engine.clear({}),this.compiledBundle.context&&this.compiledBundle.context.uniforms.filter((function(t){return t.isReferer})).forEach((function(t){var e=t.data,n=t.name;i.model.confirmInput(e.model,n)})),n=0;n<e;n++)this.model.run();return this.engine.endFrame(),t.abrupt("return",this);case 12:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"getOutput",value:(n=ff(hf().mark((function t(){return hf().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.model.readData());case 1:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"compile",value:(e=ff(hf().mark((function t(){var e,n,i;return hf().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.initPromise;case 2:return e=Cy({},this.compiledBundle.context),n=this.engine.supportWebGPU?this.engine.useWGSL?jv.WGSL:jv.GLSL450:jv.GLSL100,i=this.compiledBundle.shaders[n],e.defines.filter((function(t){return t.runtime})).forEach((function(t){var e="".concat("__DefineValuePlaceholder__").concat(t.name);i=i.replace(e,"".concat(t.value))})),e.shader=i,e.uniforms.forEach((function(t){if(!t.data&&t.storageClass===Yv.StorageBuffer){var n=1;t.type===Nv.FloatArray?n=1:t.type===Nv.Vector4FloatArray&&(n=4),t.data=new Float32Array(e.output.length*n).fill(0)}})),this.compiledBundle.context=e,t.next=11,this.engine.createComputeModel(this.compiledBundle.context);case 11:this.model=t.sent;case 12:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}]),t}(),xy=uf((wy=Ey).prototype,"engine",[yy],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),My=uf(wy.prototype,"configService",[by],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_y=wy))||_y),cb=(Ty=(0,wf.b2)(),Dy=(0,wf.f3)(xf.MaterialComponentManager),Ty((Iy=Py=function(){function t(){af(this,t),this.config=void 0,of(this,"material",Oy,this),this.entity=void 0,this.component=void 0}return lf(t,[{key:"getEntity",value:function(){return this.entity}},{key:"getComponent",value:function(){return this.component}},{key:"setConfig",value:function(t){this.config=t}},{key:"setEntity",value:function(t,e){this.entity=t,this.component=this.material.create(t),this.component.entity=t,this.component.type=e,this.onEntityCreated()}},{key:"onEntityCreated",value:function(){}}]),t}(),Py.BASIC="basic",Oy=uf((Ay=Iy).prototype,"material",[Dy],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ly=Ay))||Ly),hb=(Ny=(0,wf.b2)(),Ry=(0,wf.f3)(xf.MeshComponentManager),Yy=(0,wf.f3)(xf.CullableComponentManager),jy=(0,wf.f3)(xf.TransformComponentManager),Fy=(0,wf.f3)(xf.Systems),By=(0,wf.t6)(xf.SceneGraphSystem),Ny((qy=Xy=function(){function t(){af(this,t),this.attributes={},this.config=void 0,of(this,"mesh",Gy,this),of(this,"cullable",Wy,this),of(this,"transform",Uy,this),of(this,"sceneGraphSystem",Vy,this),this.meshComponent=void 0,this.transformComponent=void 0,this.entity=void 0}return lf(t,[{key:"getEntity",value:function(){return this.entity}},{key:"getTransformComponent",value:function(){return this.transformComponent}},{key:"getMeshComponent",value:function(){return this.meshComponent}},{key:"setConfig",value:function(t){this.config=t}},{key:"setEntity",value:function(t){this.entity=t,this.cullable.create(t),this.meshComponent=this.mesh.create(t),this.transformComponent=this.transform.create(t),this.onEntityCreated()}},{key:"setMaterial",value:function(t){return this.meshComponent.material=t,this}},{key:"setGeometry",value:function(t){return this.meshComponent.geometry=t,this}},{key:"setAttributes",value:function(t){var e=this;Object.keys(t).forEach((function(n){void 0!==t[n]&&t[n]!==e.attributes[n]&&(e.onAttributeChanged({name:n,data:t[n]}),e.attributes[n]=t[n])}))}},{key:"setVisible",value:function(t){var e=this;return this.meshComponent.visible=t,this.meshComponent.children.forEach((function(n){var i=e.mesh.getComponentByEntity(n);i&&(i.visible=t)})),this}},{key:"isVisible",value:function(){return this.meshComponent.visible}},{key:"attach",value:function(t){return this.sceneGraphSystem.attach(this.entity,t.entity),this}},{key:"detach",value:function(){return this.sceneGraphSystem.detach(this.entity),this}},{key:"detachChildren",value:function(){return this.sceneGraphSystem.detachChildren(this.entity),this}},{key:"onEntityCreated",value:function(){}},{key:"onAttributeChanged",value:function(t){var e=t.name,n=t.data;this.meshComponent&&this.meshComponent.material&&this.meshComponent.material.setUniform(this.convertAttributeName2UniformName(e),n)}},{key:"convertAttributeName2UniformName",value:function(t){return t}}]),t}(),Xy.POINT="point",Xy.LINE="line",Xy.GRID="grid",Gy=uf((Hy=qy).prototype,"mesh",[Ry],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wy=uf(Hy.prototype,"cullable",[Yy],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Uy=uf(Hy.prototype,"transform",[jy],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Vy=uf(Hy.prototype,"sceneGraphSystem",[Fy,By],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),zy=Hy))||zy),db=n(81550),fb=n.n(db),pb=function(){function t(e,n){af(this,t),this.attribute=void 0,this.buffer=void 0;var i=n.buffer,r=n.offset,o=n.stride,a=n.normalized,s=n.size,l=n.divisor;this.buffer=i,this.attribute={buffer:i.get(),offset:r||0,stride:o||0,normalized:a||!1,divisor:l||0},s&&(this.attribute.size=s)}return lf(t,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(t){this.buffer.subData(t)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),t}(),mb=(Wf(Ky={},ep.POINTS,"points"),Wf(Ky,ep.LINES,"lines"),Wf(Ky,ep.LINE_LOOP,"line loop"),Wf(Ky,ep.LINE_STRIP,"line strip"),Wf(Ky,ep.TRIANGLES,"triangles"),Wf(Ky,ep.TRIANGLE_FAN,"triangle fan"),Wf(Ky,ep.TRIANGLE_STRIP,"triangle strip"),Ky),gb=(Wf($y={},ep.STATIC_DRAW,"static"),Wf($y,ep.DYNAMIC_DRAW,"dynamic"),Wf($y,ep.STREAM_DRAW,"stream"),$y),vb=(Wf(Zy={},ep.BYTE,"int8"),Wf(Zy,ep.UNSIGNED_INT,"int16"),Wf(Zy,ep.INT,"int32"),Wf(Zy,ep.UNSIGNED_BYTE,"uint8"),Wf(Zy,ep.UNSIGNED_SHORT,"uint16"),Wf(Zy,ep.UNSIGNED_INT,"uint32"),Wf(Zy,ep.FLOAT,"float"),Zy),yb=(Wf(Jy={},ep.ALPHA,"alpha"),Wf(Jy,ep.LUMINANCE,"luminance"),Wf(Jy,ep.LUMINANCE_ALPHA,"luminance alpha"),Wf(Jy,ep.RGB,"rgb"),Wf(Jy,ep.RGBA,"rgba"),Wf(Jy,ep.RGBA4,"rgba4"),Wf(Jy,ep.RGB5_A1,"rgb5 a1"),Wf(Jy,ep.RGB565,"rgb565"),Wf(Jy,ep.DEPTH_COMPONENT,"depth"),Wf(Jy,ep.DEPTH_STENCIL,"depth stencil"),Jy),bb=(Wf(Qy={},ep.DONT_CARE,"dont care"),Wf(Qy,ep.NICEST,"nice"),Wf(Qy,ep.FASTEST,"fast"),Qy),_b=(Wf(tb={},ep.NEAREST,"nearest"),Wf(tb,ep.LINEAR,"linear"),Wf(tb,ep.LINEAR_MIPMAP_LINEAR,"mipmap"),Wf(tb,ep.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),Wf(tb,ep.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),Wf(tb,ep.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),tb),wb=(Wf(eb={},ep.REPEAT,"repeat"),Wf(eb,ep.CLAMP_TO_EDGE,"clamp"),Wf(eb,ep.MIRRORED_REPEAT,"mirror"),eb),xb=(Wf(nb={},ep.NONE,"none"),Wf(nb,ep.BROWSER_DEFAULT_WEBGL,"browser"),nb),Mb=(Wf(ib={},ep.NEVER,"never"),Wf(ib,ep.ALWAYS,"always"),Wf(ib,ep.LESS,"less"),Wf(ib,ep.LEQUAL,"lequal"),Wf(ib,ep.GREATER,"greater"),Wf(ib,ep.GEQUAL,"gequal"),Wf(ib,ep.EQUAL,"equal"),Wf(ib,ep.NOTEQUAL,"notequal"),ib),Eb=(Wf(rb={},ep.FUNC_ADD,"add"),Wf(rb,ep.MIN_EXT,"min"),Wf(rb,ep.MAX_EXT,"max"),Wf(rb,ep.FUNC_SUBTRACT,"subtract"),Wf(rb,ep.FUNC_REVERSE_SUBTRACT,"reverse subtract"),rb),Sb=(Wf(ob={},ep.ZERO,"zero"),Wf(ob,ep.ONE,"one"),Wf(ob,ep.SRC_COLOR,"src color"),Wf(ob,ep.ONE_MINUS_SRC_COLOR,"one minus src color"),Wf(ob,ep.SRC_ALPHA,"src alpha"),Wf(ob,ep.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),Wf(ob,ep.DST_COLOR,"dst color"),Wf(ob,ep.ONE_MINUS_DST_COLOR,"one minus dst color"),Wf(ob,ep.DST_ALPHA,"dst alpha"),Wf(ob,ep.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),Wf(ob,ep.CONSTANT_COLOR,"constant color"),Wf(ob,ep.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),Wf(ob,ep.CONSTANT_ALPHA,"constant alpha"),Wf(ob,ep.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),Wf(ob,ep.SRC_ALPHA_SATURATE,"src alpha saturate"),ob),kb=(Wf(ab={},ep.NEVER,"never"),Wf(ab,ep.ALWAYS,"always"),Wf(ab,ep.LESS,"less"),Wf(ab,ep.LEQUAL,"lequal"),Wf(ab,ep.GREATER,"greater"),Wf(ab,ep.GEQUAL,"gequal"),Wf(ab,ep.EQUAL,"equal"),Wf(ab,ep.NOTEQUAL,"notequal"),ab),Cb=(Wf(sb={},ep.ZERO,"zero"),Wf(sb,ep.KEEP,"keep"),Wf(sb,ep.REPLACE,"replace"),Wf(sb,ep.INVERT,"invert"),Wf(sb,ep.INCR,"increment"),Wf(sb,ep.DECR,"decrement"),Wf(sb,ep.INCR_WRAP,"increment wrap"),Wf(sb,ep.DECR_WRAP,"decrement wrap"),sb),Tb=(Wf(lb={},ep.FRONT,"front"),Wf(lb,ep.BACK,"back"),lb),Db=function(){function t(e,n){af(this,t),this.buffer=void 0;var i=n.data,r=n.usage,o=n.type;this.buffer=e.buffer({data:i,usage:gb[r||ep.STATIC_DRAW],type:vb[o||ep.UNSIGNED_BYTE]})}return lf(t,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){}},{key:"subData",value:function(t){var e=t.data,n=t.offset;this.buffer.subdata(e,n)}}]),t}();function Lb(t){return function(t){if(Array.isArray(t))return yf(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||bf(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Ab=9007199254740991,Ob={};Ob["[object Float32Array]"]=Ob["[object Float64Array]"]=Ob["[object Int8Array]"]=Ob["[object Int16Array]"]=Ob["[object Int32Array]"]=Ob["[object Uint8Array]"]=Ob["[object Uint8ClampedArray]"]=Ob["[object Uint16Array]"]=Ob["[object Uint32Array]"]=!0,Ob["[object Arguments]"]=Ob["[object Array]"]=Ob["[object ArrayBuffer]"]=Ob["[object Boolean]"]=Ob["[object DataView]"]=Ob["[object Date]"]=Ob["[object Error]"]=Ob["[object Function]"]=Ob["[object Map]"]=Ob["[object Number]"]=Ob["[object Object]"]=Ob["[object RegExp]"]=Ob["[object Set]"]=Ob["[object String]"]=Ob["[object WeakMap]"]=!1;var Pb=Object.prototype.toString;var Ib=function(t){return function(t){return!!t&&"object"===Tf(t)}(t)&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Ab}(t.length)&&!!Ob[Pb.call(t)]};function Nb(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Rb(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Nb(Object(n),!0).forEach((function(e){Wf(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Nb(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Yb=0,jb=function(){function t(e,n){var i=this;af(this,t),this.reGl=e,this.context=n,this.entity=mf(),this.texFBO=void 0,this.computeCommand=void 0,this.textureCache={},this.outputTextureName=void 0,this.swapOutputTextureName=void 0,this.compiledPingpong=void 0,this.dynamicPingpong=void 0;var r={};this.context.uniforms.forEach((function(t){var e=t.name,n=t.type,o=t.data,a=t.isReferer,s=t.storageClass;if(s===Yv.StorageBuffer){if(a)i.textureCache[e]={data:void 0},r["".concat(e,"Size")]=function(){return o.compiledBundle.context.output.textureSize};else{i.textureCache[e]=i.calcDataTexture(e,n,o);var l=i.textureCache[e],u=l.textureWidth,c=l.isOutput;r["".concat(e,"Size")]=[u,u],c&&(i.outputTextureName=e,i.context.needPingpong&&(i.outputTextureName="".concat(e,"Output"),i.textureCache[i.outputTextureName]=i.calcDataTexture(e,n,o)))}r[e]=function(){return i.textureCache[e].texture}}else if(s===Yv.Uniform){if(o&&(Array.isArray(o)||Ib(o))&&o.length>16)throw new Error("invalid data type ".concat(n));r[e]=function(){return t.data}}}));var o=this.getOuputDataTexture(),a=o.textureWidth,s=o.texelCount;r.u_OutputTextureSize=[a,a],r.u_OutputTexelCount=s,this.context.output.textureSize=[a,a];var l={attributes:{a_Position:[[-1,1,0],[-1,-1,0],[1,1,0],[1,-1,0]],a_TexCoord:[[0,1],[0,0],[1,1],[1,0]]},frag:"#ifdef GL_FRAGMENT_PRECISION_HIGH\n  precision highp float;\n#else\n  precision mediump float;\n#endif\n".concat(this.context.shader),uniforms:r,vert:"attribute vec3 a_Position;\nattribute vec2 a_TexCoord;\n\nvarying vec2 v_TexCoord;\n\nvoid main() {\n  gl_Position = vec4(a_Position, 1.0);\n  v_TexCoord = a_TexCoord;\n}",primitive:"triangle strip",count:4};this.computeCommand=this.reGl(l)}var e;return lf(t,[{key:"run",value:function(){var t=this;this.context.maxIteration>1&&this.context.needPingpong&&(this.compiledPingpong=!0),(this.compiledPingpong||this.dynamicPingpong)&&this.swap(),this.texFBO=this.reGl.framebuffer({color:this.getOuputDataTexture().texture}),this.texFBO.use((function(){t.computeCommand()}))}},{key:"readData",value:(e=ff(hf().mark((function t(){var e,n,i,r,o,a,s,l,u=this;return hf().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.reGl({framebuffer:this.texFBO})((function(){e=u.reGl.read()})),!e){t.next=6;break}if(n=this.getOuputDataTexture(),i=n.originalDataLength,r=n.elementsPerTexel,o=n.typedArrayConstructor,a=void 0===o?Float32Array:o,s=[],4!==r)for(l=0;l<e.length;l+=4)1===r?s.push(e[l]):2===r?s.push(e[l],e[l+1]):s.push(e[l],e[l+1],e[l+2]);else s=e;return t.abrupt("return",new a(s.slice(0,i)));case 6:return t.abrupt("return",new Float32Array);case 7:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"confirmInput",value:function(t,e){var n;this.entity===t.entity?(this.dynamicPingpong=!0,n=this):n=t,this.textureCache[e].id=n.getOuputDataTexture().id,this.textureCache[e].texture=n.getOuputDataTexture().texture}},{key:"updateUniform",value:function(){}},{key:"updateBuffer",value:function(t,e){var n=this.context.uniforms.find((function(e){return e.name===t}));if(n){var i=this.calcDataTexture(t,n.type,e),r=i.texture,o=i.data;this.textureCache[t].data=o,this.textureCache[t].texture=r}}},{key:"destroy",value:function(){}},{key:"swap",value:function(){if(this.swapOutputTextureName||this.createSwapOutputDataTexture(),this.compiledPingpong){var t=this.context.output.name;this.textureCache[t].id=this.getOuputDataTexture().id,this.textureCache[t].texture=this.getOuputDataTexture().texture}var e=this.outputTextureName;this.outputTextureName=this.swapOutputTextureName,this.swapOutputTextureName=e}},{key:"getOuputDataTexture",value:function(){return this.textureCache[this.outputTextureName]}},{key:"createSwapOutputDataTexture",value:function(){var t=this.cloneDataTexture(this.getOuputDataTexture());this.swapOutputTextureName="".concat(this.entity,"-swap"),this.textureCache[this.swapOutputTextureName]=t}},{key:"cloneDataTexture",value:function(t){var e=t.data,n=t.textureWidth;return Rb(Rb({},t),{},{id:Yb++,texture:this.reGl.texture({width:n,height:n,data:e,type:"float"})})}},{key:"calcDataTexture",value:function(t,e,n){var i=1;e===Nv.Vector4FloatArray&&(i=4);for(var r=[],o=0;o<n.length;o+=i)1===i?r.push(n[o],0,0,0):2===i?r.push(n[o],n[o+1],0,0):3===i?r.push(n[o],n[o+1],n[o+2],0):4===i&&r.push(n[o],n[o+1],n[o+2],n[o+3]);var a=n.length,s=Math.ceil(a/i),l=Math.ceil(Math.sqrt(s)),u=l*l;s<u&&r.push.apply(r,Lb(new Array(4*(u-s)).fill(0)));var c=this.reGl.texture({width:l,height:l,data:r,type:"float"});return{id:Yb++,data:r,originalDataLength:a,typedArrayConstructor:Ib(n)?n.constructor:void 0,textureWidth:l,texture:c,texelCount:s,elementsPerTexel:i,isOutput:t===this.context.output.name}}}]),t}(),Fb=function(){function t(e,n){af(this,t),this.elements=void 0;var i=n.data,r=n.usage,o=n.type,a=n.count;this.elements=e.elements({data:i,usage:gb[r||ep.STATIC_DRAW],type:vb[o||ep.UNSIGNED_BYTE],count:a})}return lf(t,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(t){var e=t.data;this.elements.subdata(e)}},{key:"destroy",value:function(){this.elements.destroy()}}]),t}(),Bb=function(){function t(e,n){af(this,t),this.framebuffer=void 0;var i=n.width,r=n.height,o=n.color,a=n.colors,s=(n.depth,n.stencil,{width:i,height:r});Array.isArray(a)&&(s.colors=a.map((function(t){return t.get()}))),o&&"boolean"!=typeof o&&(s.color=o.get()),this.framebuffer=e.framebuffer(s)}return lf(t,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(t){var e=t.width,n=t.height;this.framebuffer.resize(e,n)}}]),t}();function zb(t){var e={};return Object.keys(t).forEach((function(n){Hb(n,t[n],e,"")})),e}function Hb(t,e,n,i){null===e||"number"==typeof e||"boolean"==typeof e||Array.isArray(e)&&"number"==typeof e[0]||Ib(e)||""===e||void 0!==e.resize?n["".concat(i&&i+".").concat(t)]=e:(function(t){var e=Tf(t);return null!=t&&("object"===e||"function"===e)}(e)&&Object.keys(e).forEach((function(r){Hb(r,e[r],n,"".concat(i&&i+".").concat(t))})),Array.isArray(e)&&e.forEach((function(e,r){Object.keys(e).forEach((function(o){Hb(o,e[o],n,"".concat(i&&i+".").concat(t,"[").concat(r,"]"))}))})))}function Gb(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Wb(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Gb(Object(n),!0).forEach((function(e){Wf(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Gb(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Ub,Vb,Xb,qb=function(){function t(e,n){af(this,t),this.reGl=void 0,this.drawCommand=void 0,this.uniforms={},this.reGl=e;var i=n.vs,r=n.fs,o=n.defines,a=n.attributes,s=n.uniforms,l=n.primitive,u=n.count,c=n.elements,h=n.depth,d=n.blend,f=n.stencil,p=n.cull,m=n.instances,g=n.scissor,v=n.viewport,y={};s&&(this.uniforms=zb(s),Object.keys(s).forEach((function(t){y[t]=e.prop(t)})));var b={};Object.keys(a).forEach((function(t){b[t]=a[t].get()}));var _=o&&this.generateDefines(o)||"",w={attributes:b,frag:"#ifdef GL_FRAGMENT_PRECISION_HIGH\n  precision highp float;\n#else\n  precision mediump float;\n#endif\n".concat(_,"\n").concat(r),uniforms:y,vert:"\n".concat(_,"\n").concat(i),primitive:mb[void 0===l?ep.TRIANGLES:l]};m&&(w.instances=m),u&&(w.count=u),c&&(w.elements=c.get()),g&&(w.scissor=g),v&&(w.viewport=v),this.initDepthDrawParams({depth:h},w),this.initBlendDrawParams({blend:d},w),this.initStencilDrawParams({stencil:f},w),this.initCullDrawParams({cull:p},w),this.drawCommand=e(w)}return lf(t,[{key:"addUniforms",value:function(t){this.uniforms=Wb(Wb({},this.uniforms),zb(t))}},{key:"draw",value:function(t){var e=Wb(Wb({},this.uniforms),zb(t.uniforms||{})),n={};Object.keys(e).forEach((function(t){var i=Tf(e[t]);"boolean"===i||"number"===i||Array.isArray(e[t])||e[t].BYTES_PER_ELEMENT?n[t]=e[t]:"string"===i||(n[t]=e[t].get())})),this.drawCommand(n)}},{key:"destroy",value:function(){}},{key:"initDepthDrawParams",value:function(t,e){var n=t.depth;n&&(e.depth={enable:void 0===n.enable||!!n.enable,mask:void 0===n.mask||!!n.mask,func:Mb[n.func||ep.LESS],range:n.range||[0,1]})}},{key:"initBlendDrawParams",value:function(t,e){var n=t.blend;if(n){var i=n.enable,r=n.func,o=n.equation,a=n.color,s=void 0===a?[0,0,0,0]:a;e.blend={enable:!!i,func:{srcRGB:Sb[r&&r.srcRGB||ep.SRC_ALPHA],srcAlpha:Sb[r&&r.srcAlpha||ep.SRC_ALPHA],dstRGB:Sb[r&&r.dstRGB||ep.ONE_MINUS_SRC_ALPHA],dstAlpha:Sb[r&&r.dstAlpha||ep.ONE_MINUS_SRC_ALPHA]},equation:{rgb:Eb[o&&o.rgb||ep.FUNC_ADD],alpha:Eb[o&&o.alpha||ep.FUNC_ADD]},color:s}}}},{key:"initStencilDrawParams",value:function(t,e){var n=t.stencil;if(n){var i=n.enable,r=n.mask,o=void 0===r?-1:r,a=n.func,s=void 0===a?{cmp:ep.ALWAYS,ref:0,mask:-1}:a,l=n.opFront,u=void 0===l?{fail:ep.KEEP,zfail:ep.KEEP,zpass:ep.KEEP}:l,c=n.opBack,h=void 0===c?{fail:ep.KEEP,zfail:ep.KEEP,zpass:ep.KEEP}:c;e.stencil={enable:!!i,mask:o,func:Wb(Wb({},s),{},{cmp:kb[s.cmp]}),opFront:{fail:Cb[u.fail],zfail:Cb[u.zfail],zpass:Cb[u.zpass]},opBack:{fail:Cb[h.fail],zfail:Cb[h.zfail],zpass:Cb[h.zpass]}}}}},{key:"initCullDrawParams",value:function(t,e){var n=t.cull;if(n){var i=n.enable,r=n.face,o=void 0===r?ep.BACK:r;e.cull={enable:!!i,face:Tb[o]}}}},{key:"generateDefines",value:function(t){return Object.keys(t).map((function(e){return"#define ".concat(e," ").concat(Number(t[e]))})).join("\n")}}]),t}(),Kb=function(){function t(e,n){af(this,t),this.texture=void 0,this.width=void 0,this.height=void 0;var i=n.data,r=n.type,o=void 0===r?ep.UNSIGNED_BYTE:r,a=n.width,s=n.height,l=n.flipY,u=void 0!==l&&l,c=n.format,h=void 0===c?ep.RGBA:c,d=n.mipmap,f=void 0!==d&&d,p=n.wrapS,m=void 0===p?ep.CLAMP_TO_EDGE:p,g=n.wrapT,v=void 0===g?ep.CLAMP_TO_EDGE:g,y=n.aniso,b=void 0===y?0:y,_=n.alignment,w=void 0===_?1:_,x=n.premultiplyAlpha,M=void 0!==x&&x,E=n.mag,S=void 0===E?ep.NEAREST:E,k=n.min,C=void 0===k?ep.NEAREST:k,T=n.colorSpace,D=void 0===T?ep.BROWSER_DEFAULT_WEBGL:T;this.width=a,this.height=s;var L={width:a,height:s,type:vb[o],format:yb[h],wrapS:wb[m],wrapT:wb[v],mag:_b[S],min:_b[C],alignment:w,flipY:u,colorSpace:xb[D],premultiplyAlpha:M,aniso:b};i&&(L.data=i),"number"==typeof f?L.mipmap=bb[f]:"boolean"==typeof f&&(L.mipmap=f),this.texture=e.texture(L)}return lf(t,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(t){var e=t.width,n=t.height;this.texture.resize(e,n),this.width=e,this.height=n}},{key:"destroy",value:function(){this.texture.destroy()}}]),t}(),$b=(0,wf.b2)()((Vb=function(){function t(){var e=this;af(this,t),this.supportWebGPU=!1,this.useWGSL=!1,this.$canvas=void 0,this.gl=void 0,this.inited=void 0,this.createModel=function(){var t=ff(hf().mark((function t(n){return hf().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.uniforms){t.next=3;break}return t.next=3,Promise.all(Object.keys(n.uniforms).map(function(){var t=ff(hf().mark((function t(e){var i;return hf().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.uniforms[e]||void 0===n.uniforms[e].load){t.next=5;break}return t.next=3,n.uniforms[e].load();case 3:i=t.sent,n.uniforms[e]=i;case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 3:return t.abrupt("return",new qb(e.gl,n));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.createAttribute=function(t){return new pb(e.gl,t)},this.createBuffer=function(t){return new Db(e.gl,t)},this.createElements=function(t){return new Fb(e.gl,t)},this.createTexture2D=function(t){return new Kb(e.gl,t)},this.createFramebuffer=function(t){return new Bb(e.gl,t)},this.useFramebuffer=function(t,n){e.gl({framebuffer:t?t.get():null})(n)},this.createComputeModel=function(){var t=ff(hf().mark((function t(n){return hf().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new jb(e.gl,n));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.clear=function(t){var n=t.color,i=t.depth,r=t.stencil,o=t.framebuffer,a=void 0===o?null:o,s={color:n,depth:i,stencil:r};s.framebuffer=null===a?a:a.get(),e.gl.clear(s)},this.setScissor=function(t){e.gl&&e.gl._gl&&(t.enable&&t.box?(e.gl._gl.enable(ep.SCISSOR_TEST),e.gl._gl.scissor(t.box.x,t.box.y,t.box.width,t.box.height)):e.gl._gl.disable(ep.SCISSOR_TEST),e.gl._refresh())},this.viewport=function(t){var n=t.x,i=t.y,r=t.width,o=t.height;e.gl&&e.gl._gl&&(e.gl._gl.viewport(n,i,r,o),e.gl._refresh())},this.readPixels=function(t){var n=t.framebuffer,i={x:t.x,y:t.y,width:t.width,height:t.height};return n&&(i.framebuffer=n.get()),e.gl.read(i)},this.getCanvas=function(){return e.$canvas},this.getGLContext=function(){return e.gl._gl},this.destroy=function(){e.gl&&(e.gl.destroy(),e.inited=!1)}}var e;return lf(t,[{key:"init",value:(e=ff(hf().mark((function t(e){return hf().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.inited){t.next=2;break}return t.abrupt("return");case 2:return this.$canvas=e.canvas,t.next=5,new Promise((function(t,n){fb()({canvas:e.canvas,attributes:{alpha:!0,antialias:e.antialias,premultipliedAlpha:!0},pixelRatio:1,extensions:["OES_element_index_uint","OES_texture_float","OES_standard_derivatives","angle_instanced_arrays"],optionalExtensions:["EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(e,i){!e&&i||n(e),t(i)}})}));case 5:this.gl=t.sent,this.inited=!0;case 7:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"isFloatSupported",value:function(){return this.gl.limits.readFloat}},{key:"beginFrame",value:function(){}},{key:"endFrame",value:function(){}}]),t}(),Ub=Vb))||Ub;function Zb(t,e,n,i){if("undefined"!=typeof window){var r=document.getElementsByTagName("head")[0],o=document.createElement("script");o.setAttribute("type","text/javascript"),o.setAttribute("src",t),i&&(o.id=i),o.onload=function(){e&&e()},o.onerror=function(e){n&&n("Unable to load script '".concat(t,"'"),e)},r.appendChild(o)}}function Jb(t,e){return new Promise((function(e,n){Zb(t,(function(){e()}),(function(t,e){n(e)}))}))}function Qb(){return t_.apply(this,arguments)}function t_(){return(t_=ff(hf().mark((function t(){return hf().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Xb){t.next=2;break}return t.abrupt("return",Xb);case 2:return t.next=4,Jb("https://preview.babylonjs.com/glslang/glslang.js");case 4:return Xb=window.glslang("https://preview.babylonjs.com/glslang/glslang.wasm"),t.abrupt("return",Xb);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var e_=function(){function t(e,n){af(this,t),this.engine=e,this.options=n,this.attribute=void 0,this.buffer=void 0;var i=n,r=i.buffer,o=i.offset,a=i.stride,s=i.normalized,l=i.size,u=i.divisor,c=i.arrayStride,h=i.attributes,d=i.stepMode;this.buffer=r,this.attribute={buffer:r.get(),offset:o||0,stride:a||0,normalized:s||!1,divisor:u||0,arrayStride:c||0,attributes:h,stepMode:d||"vertex"},l&&(this.attribute.size=l)}return lf(t,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(t){this.buffer.subData(t)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),t}(),n_=function(){function t(e,n){af(this,t),this.engine=e,this.options=n,this.buffer=void 0;var i=n,r=i.data,o=i.usage;i.type;this.buffer=this.createBuffer(r instanceof Array?new Float32Array(r):r,o||cy.FB.Vertex|cy.FB.CopyDst)}return lf(t,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){this.buffer.destroy()}},{key:"subData",value:function(t){var e=t.data,n=t.offset;this.setSubData(this.buffer,n,e instanceof Array?new Float32Array(e):e)}},{key:"createBuffer",value:function(t,e){var n=t.byteLength%4,i={size:t.byteLength+n,usage:e},r=this.engine.device.createBuffer(i);return this.setSubData(r,0,t),r}},{key:"setSubData",value:function(t,e,n){(Iv?this.engine.device.getQueue():this.engine.device.defaultQueue).writeBuffer(t,e,n)}}]),t}();function i_(t){return"number"==typeof t}var r_,o_,a_,s_,l_,u_,c_,h_=function(){function t(e,n){af(this,t),this.engine=e,this.context=n,this.entity=mf(),this.uniformGPUBufferLayout=[],this.uniformBuffer=void 0,this.vertexBuffers={},this.outputBuffer=void 0,this.bindGroupEntries=void 0,this.bindGroup=void 0,this.computePipeline=void 0}var e,n,i;return lf(t,[{key:"init",value:(i=ff(hf().mark((function t(){var e,n,i,r,o,a,s,l=this;return hf().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.compileComputePipelineStageDescriptor(this.context.shader);case 2:e=t.sent,n=e.computeStage,i=this.context.uniforms.filter((function(t){return t.storageClass===Yv.StorageBuffer})),r=this.context.uniforms.filter((function(t){return t.storageClass===Yv.Uniform})),o=r.length?1:0,this.bindGroupEntries=[],o&&(a=0,s=[],r.forEach((function(t){if(i_(t.data))l.uniformGPUBufferLayout.push({name:t.name,offset:a}),a+=4,s.push(t.data);else{var e,n=(null===(e=t.data)||void 0===e?void 0:e.length)||1;3===n&&(n=4,t.data.push(0));var i=a/4%4;if(i>0){var r=4-i;if(n>1&&n<=r)2===n&&(3===r&&(a+=4,s.push(0)),s.push.apply(s,Lb(t.data)),l.uniformGPUBufferLayout.push({name:t.name,offset:a}));else{for(var o=0;o<r;o++)a+=4,s.push(0);s.push.apply(s,Lb(t.data)),l.uniformGPUBufferLayout.push({name:t.name,offset:a})}}a+=4*n}})),this.uniformBuffer=new n_(this.engine,{data:s instanceof Array?new Float32Array(s):s,usage:cy.FB.Uniform|cy.FB.CopyDst}),this.bindGroupEntries.push({binding:0,resource:{buffer:this.uniformBuffer.get()}})),i.forEach((function(t){var e;null!==t.data&&(t.type!==Nv.Vector4FloatArray&&t.type!==Nv.FloatArray||(t.name===l.context.output.name?(e=new n_(l.engine,{data:isFinite(Number(t.data))?[t.data]:t.data,usage:cy.FB.Storage|cy.FB.CopyDst|cy.FB.CopySrc}),l.outputBuffer=e,l.context.output={name:t.name,length:isFinite(Number(t.data))?1:t.data.length,typedArrayConstructor:Float32Array,gpuBuffer:e.get()}):t.isReferer?t.data.model&&t.data.model.outputBuffer&&(e=t.data.model.outputBuffer):e=new n_(l.engine,{data:isFinite(Number(t.data))?[t.data]:t.data,usage:cy.FB.Storage|cy.FB.CopyDst|cy.FB.CopySrc}),l.vertexBuffers[t.name]=e,l.bindGroupEntries.push({binding:o,resource:{name:t.name,refer:e?void 0:t.data,buffer:e?e.get():void 0}}),o++))})),this.computePipeline=this.engine.device.createComputePipeline({computeStage:n}),console.log(this.bindGroupEntries),this.bindGroup=this.engine.device.createBindGroup({layout:this.computePipeline.getBindGroupLayout(0),entries:this.bindGroupEntries});case 13:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"destroy",value:function(){var t=this;this.uniformBuffer&&this.uniformBuffer.destroy(),Object.keys(this.vertexBuffers).forEach((function(e){return t.vertexBuffers[e].destroy()}))}},{key:"readData",value:(n=ff(hf().mark((function t(){var e,n,i,r,o,a,s,l,u;return hf().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=this.context.output)){t.next=16;break}if(n=e.length,i=e.typedArrayConstructor,!(r=e.gpuBuffer)){t.next=16;break}return o=n*i.BYTES_PER_ELEMENT,a=this.engine.device.createBuffer({size:o,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),(s=this.engine.device.createCommandEncoder()).copyBufferToBuffer(r,0,a,0,o),(Iv?this.engine.device.getQueue():this.engine.device.defaultQueue).submit([s.finish()]),t.next=12,a.mapAsync(cy.gc.Read);case 12:return l=a.getMappedRange(),u=new i(l.slice(0)),a.unmap(),t.abrupt("return",u);case 16:return t.abrupt("return",new Float32Array);case 17:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"run",value:function(){var t;this.engine.currentComputePass&&(this.engine.currentComputePass.setPipeline(this.computePipeline),this.engine.currentComputePass.setBindGroup(0,this.bindGroup),(t=this.engine.currentComputePass).dispatch.apply(t,Lb(this.context.dispatch)))}},{key:"updateBuffer",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=this.vertexBuffers[t];i&&i.subData({data:e,offset:n})}},{key:"updateUniform",value:function(t,e){var n=this.uniformGPUBufferLayout.find((function(e){return e.name===t}));n&&this.uniformBuffer.subData({data:Number.isFinite(e)?new Float32Array([e]):new Float32Array(e),offset:n.offset})}},{key:"confirmInput",value:function(t,e){var n=this.vertexBuffers[e],i=t.outputBuffer;if(n&&i&&n!==i){var r=this.engine.device.createCommandEncoder(),o=t.context.output,a=o.length*o.typedArrayConstructor.BYTES_PER_ELEMENT;r.copyBufferToBuffer(i.get(),0,n.get(),0,a),(Iv?this.engine.device.getQueue():this.engine.device.defaultQueue).submit([r.finish()])}}},{key:"compileShaderToSpirV",value:function(t,e,n){return this.compileRawShaderToSpirV(n+t,e)}},{key:"compileRawShaderToSpirV",value:function(t,e){return this.engine.glslang.compileGLSL(t,e)}},{key:"compileComputePipelineStageDescriptor",value:(e=ff(hf().mark((function t(e){var n;return hf().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e,this.engine.options.useWGSL){t.next=6;break}return t.next=5,this.compileShaderToSpirV(e,"compute","#version 450\n");case 5:n=t.sent;case 6:return t.abrupt("return",{computeStage:{module:this.engine.device.createShaderModule({code:n,isWHLSL:Iv}),entryPoint:"main"}});case 7:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})}]),t}(),d_=function(){function t(e,n){af(this,t),this.engine=e,this.options=n,this.indexCount=void 0,this.buffer=void 0;var i=n,r=i.data,o=(i.usage,i.type,i.count);this.indexCount=o||0,this.buffer=new n_(e,{data:r instanceof Array?new Uint16Array(r):r,usage:cy.FB.Index|cy.FB.CopyDst})}return lf(t,[{key:"get",value:function(){return this.buffer}},{key:"subData",value:function(t){this.buffer.subData(t)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),t}(),f_=function(){function t(e,n){af(this,t),this.engine=e,this.options=n,this.colorTexture=void 0,this.depthTexture=void 0,this.width=0,this.height=0;var i=n,r=(i.width,i.height,i.color),o=(i.colors,i.depth);i.stencil;r&&(this.colorTexture=r),o&&(this.depthTexture=o)}return lf(t,[{key:"get",value:function(){var t,e;return{color:null===(t=this.colorTexture)||void 0===t?void 0:t.get(),depth:null===(e=this.depthTexture)||void 0===e?void 0:e.get()}}},{key:"destroy",value:function(){var t,e;null===(t=this.colorTexture)||void 0===t||t.destroy(),null===(e=this.depthTexture)||void 0===e||e.destroy()}},{key:"resize",value:function(t){var e,n,i=t.width,r=t.height;i===this.width&&r===this.height||(null===(e=this.colorTexture)||void 0===e||e.resize({width:i,height:r}),null===(n=this.depthTexture)||void 0===n||n.resize({width:i,height:r}));this.width=i,this.height=r}}]),t}(),p_=(Wf(r_={},ep.POINTS,cy.YV.PointList),Wf(r_,ep.LINES,cy.YV.LineList),Wf(r_,ep.LINE_LOOP,cy.YV.LineList),Wf(r_,ep.LINE_STRIP,cy.YV.LineStrip),Wf(r_,ep.TRIANGLES,cy.YV.TriangleList),Wf(r_,ep.TRIANGLE_FAN,cy.YV.TriangleList),Wf(r_,ep.TRIANGLE_STRIP,cy.YV.TriangleStrip),r_),m_=(Wf(o_={},ep.NEVER,cy.wb.Never),Wf(o_,ep.ALWAYS,cy.wb.Always),Wf(o_,ep.LESS,cy.wb.Less),Wf(o_,ep.LEQUAL,cy.wb.LessEqual),Wf(o_,ep.GREATER,cy.wb.Greater),Wf(o_,ep.GEQUAL,cy.wb.GreaterEqual),Wf(o_,ep.EQUAL,cy.wb.Equal),Wf(o_,ep.NOTEQUAL,cy.wb.NotEqual),o_),g_=(Wf(a_={},ep.FUNC_ADD,cy.db.Add),Wf(a_,ep.MIN_EXT,cy.db.Min),Wf(a_,ep.MAX_EXT,cy.db.Max),Wf(a_,ep.FUNC_SUBTRACT,cy.db.Subtract),Wf(a_,ep.FUNC_REVERSE_SUBTRACT,cy.db.ReverseSubtract),a_),v_=(Wf(s_={},ep.ZERO,cy.zi.Zero),Wf(s_,ep.ONE,cy.zi.One),Wf(s_,ep.SRC_COLOR,cy.zi.SrcColor),Wf(s_,ep.ONE_MINUS_SRC_COLOR,cy.zi.OneMinusSrcColor),Wf(s_,ep.SRC_ALPHA,cy.zi.SrcAlpha),Wf(s_,ep.ONE_MINUS_SRC_ALPHA,cy.zi.OneMinusSrcAlpha),Wf(s_,ep.DST_COLOR,cy.zi.DstColor),Wf(s_,ep.ONE_MINUS_DST_COLOR,cy.zi.OneMinusDstColor),Wf(s_,ep.DST_ALPHA,cy.zi.DstAlpha),Wf(s_,ep.ONE_MINUS_DST_ALPHA,cy.zi.OneMinusDstAlpha),Wf(s_,ep.CONSTANT_COLOR,cy.zi.BlendColor),Wf(s_,ep.ONE_MINUS_CONSTANT_COLOR,cy.zi.OneMinusBlendColor),Wf(s_,ep.SRC_ALPHA_SATURATE,cy.zi.SrcAlphaSaturated),s_),y_=(Wf(l_={},ep.ALPHA,"r8unorm"),Wf(l_,ep.RGBA,"rgba8unorm"),Wf(l_,ep.DEPTH_COMPONENT,"depth32float"),Wf(l_,ep.DEPTH_STENCIL,"depth24plus-stencil8"),l_),b_=(Wf(u_={},ep.NEAREST,"nearest"),Wf(u_,ep.LINEAR,"linear"),u_),__=(Wf(c_={},ep.REPEAT,"repeat"),Wf(c_,ep.CLAMP_TO_EDGE,"clamp-to-edge"),Wf(c_,ep.MIRRORED_REPEAT,"mirror-repeat"),c_);function w_(t){var e=t.cull;return e&&e.enable?e.face?e.face===ep.FRONT?cy.Wf.Front:cy.Wf.Back:void 0:cy.Wf.None}function x_(t){var e=t.depth,n=(t.stencil,{compare:cy.wb.Always,depthFailOp:cy.xS.Keep,failOp:cy.xS.Keep,passOp:cy.xS.Keep});return{depthWriteEnabled:e&&e.enable,depthCompare:m_[(null==e?void 0:e.func)||ep.ALWAYS],format:cy.EV.Depth24PlusStencil8,stencilFront:n,stencilBack:n,stencilReadMask:4294967295,stencilWriteMask:4294967295}}function M_(t,e){var n=t.blend;return[{format:e,alphaBlend:{srcFactor:v_[n&&n.func&&n.func.srcAlpha||ep.ONE],dstFactor:v_[n&&n.func&&n.func.dstAlpha||ep.ZERO],operation:g_[n&&n.equation&&n.equation.alpha||ep.FUNC_ADD]},colorBlend:{srcFactor:v_[n&&n.func&&n.func.srcRGB||ep.ONE],dstFactor:v_[n&&n.func&&n.func.dstRGB||ep.ZERO],operation:g_[n&&n.equation&&n.equation.rgb||ep.FUNC_ADD]},writeMask:cy.Yw.All}]}function E_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function S_(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?E_(Object(n),!0).forEach((function(e){Wf(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function k_(t){for(var e=0,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];for(var o=0,a=i;o<a.length;o++){var s=a[o];e+=s.length}for(var l=new t(e),u=0,c=0,h=i;c<h.length;c++){var d=h[c];l.set(d,u),u+=d.length}return l}var C_,T_,D_,L_=function(){function t(e,n){af(this,t),this.engine=e,this.options=n,this.pipelineLayout=void 0,this.renderPipeline=void 0,this.uniformsBindGroupLayout=void 0,this.uniformBindGroup=void 0,this.uniformBuffer=void 0,this.uniforms={},this.uniformGPUBufferLayout=[],this.attributeCache={},this.indexBuffer=void 0,this.indexCount=void 0}var e,n;return lf(t,[{key:"init",value:(n=ff(hf().mark((function t(){var e,n,i,r,o,a,s,l,u,c,h,d,f,p,m,g,v=this;return hf().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.options,n=e.vs,i=e.fs,r=e.attributes,o=e.uniforms,a=e.primitive,e.count,s=e.elements,l=e.depth,u=e.blend,c=e.stencil,h=e.cull,e.instances,t.next=3,this.compilePipelineStageDescriptor(n,i,null);case 3:d=t.sent,f=d.vertexStage,p=d.fragmentStage,o&&this.buildUniformBindGroup(o),s&&(this.indexBuffer=s.get(),this.indexCount=s.indexCount),m={vertexBuffers:Object.keys(r).map((function(t,e){var n=r[t],i=n.get(),o=i.arrayStride,a=i.stepMode,s=i.attributes;return v.attributeCache[t]=n,{arrayStride:o,stepMode:a,attributes:s}}))},g={sampleCount:this.engine.mainPassSampleCount,primitiveTopology:p_[a||ep.TRIANGLES],rasterizationState:S_(S_({},this.getDefaultRasterizationStateDescriptor()),{},{cullMode:w_({cull:h})}),depthStencilState:x_({depth:l,stencil:c}),colorStates:M_({blend:u},this.engine.options.swapChainFormat),layout:this.pipelineLayout,vertexStage:f,fragmentStage:p,vertexState:m},this.renderPipeline=this.engine.device.createRenderPipeline(g);case 11:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"addUniforms",value:function(t){this.uniforms=S_(S_({},this.uniforms),zb(t))}},{key:"draw",value:function(t){var e=this,n=this.engine.getCurrentRenderPass(),i=S_(S_({},this.uniforms),zb(t.uniforms||{})),r=[];Object.keys(i).forEach((function(t){var n=Tf(i[t]);if("boolean"===n||"number"===n||Array.isArray(i[t])||i[t].BYTES_PER_ELEMENT){var o,a=null===(o=e.uniformGPUBufferLayout.find((function(e){return e.name===t})))||void 0===o?void 0:o.offset;null!==a&&e.uniformBuffer.subData({data:i[t],offset:a})}else{var s,l=null===(s=e.uniformGPUBufferLayout.find((function(e){return e.name===t})))||void 0===s?void 0:s.offset;if(null!==l){var u=i[t].get(),c=u.color||u,h=c.texture,d=c.sampler;d&&(r.push({binding:l,resource:d}),l++),r.push({binding:l,resource:h.createView()})}}})),this.uniformBuffer&&(r[0]={binding:0,resource:{buffer:this.uniformBuffer.get()}}),this.uniformBindGroup=this.engine.device.createBindGroup({layout:this.uniformsBindGroupLayout,entries:r}),this.renderPipeline&&n.setPipeline(this.renderPipeline),n.setBindGroup(0,this.uniformBindGroup),this.indexBuffer&&n.setIndexBuffer(this.indexBuffer.get(),cy.iD.Uint32,0),Object.keys(this.attributeCache).forEach((function(t,i){n.setVertexBuffer(0+i,e.attributeCache[t].get().buffer,0)})),this.indexBuffer?n.drawIndexed(this.indexCount,this.options.instances||1,0,0,0):n.draw(this.options.count||0,this.options.instances||0,0,0)}},{key:"destroy",value:function(){throw new Error("Method not implemented.")}},{key:"compilePipelineStageDescriptor",value:(e=ff(hf().mark((function t(e,n,i){var r,o,a;return hf().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r="#version 450\n",o=e,a=n,this.engine.options.useWGSL){t.next=10;break}return t.next=6,this.compileShaderToSpirV(e,"vertex",r);case 6:return o=t.sent,t.next=9,this.compileShaderToSpirV(n,"fragment",r);case 9:a=t.sent;case 10:return t.abrupt("return",this.createPipelineStageDescriptor(o,a));case 11:case"end":return t.stop()}}),t,this)}))),function(t,n,i){return e.apply(this,arguments)})},{key:"compileShaderToSpirV",value:function(t,e,n){return this.compileRawShaderToSpirV(n+t,e)}},{key:"compileRawShaderToSpirV",value:function(t,e){return this.engine.glslang.compileGLSL(t,e)}},{key:"createPipelineStageDescriptor",value:function(t,e){return{vertexStage:{module:this.engine.device.createShaderModule({code:t,isWHLSL:Iv}),entryPoint:"main"},fragmentStage:{module:this.engine.device.createShaderModule({code:e,isWHLSL:Iv}),entryPoint:"main"}}}},{key:"getDefaultRasterizationStateDescriptor",value:function(){return{frontFace:cy.zX.CCW,cullMode:cy.Wf.None,depthBias:0,depthBiasSlopeScale:0,depthBiasClamp:0}}},{key:"buildUniformBindGroup",value:function(t){var e=this,n=0,i=k_.apply(void 0,[Float32Array].concat(Lb(Object.keys(t).map((function(i){return t[i]?(e.uniformGPUBufferLayout.push({name:i,offset:n}),n+=4*(t[i].length||1),t[i]):[]}))))),r=[],o=!1;i.length&&(o=!0,r.push({binding:0,visibility:cy.$X.Fragment|cy.$X.Vertex,type:cy.$l.UniformBuffer})),Object.keys(t).filter((function(e){return null===t[e]})).forEach((function(t,n){e.uniformGPUBufferLayout.push({name:t,offset:2*n+(o?1:0)}),r.push({binding:2*n+(o?1:0),visibility:cy.$X.Fragment,type:cy.$l.Sampler},{binding:2*n+(o?1:0)+1,visibility:cy.$X.Fragment,type:cy.$l.SampledTexture})})),this.uniformsBindGroupLayout=this.engine.device.createBindGroupLayout({entries:r}),this.pipelineLayout=this.engine.device.createPipelineLayout({bindGroupLayouts:[this.uniformsBindGroupLayout]}),o&&(this.uniformBuffer=new n_(this.engine,{data:i instanceof Array?new Float32Array(i):i,usage:cy.FB.Uniform|cy.FB.CopyDst}))}}]),t}(),A_=function(){function t(e,n){af(this,t),this.engine=e,this.options=n,this.texture=void 0,this.sampler=void 0,this.width=void 0,this.height=void 0,this.createTexture()}return lf(t,[{key:"get",value:function(){return{texture:this.texture,sampler:this.sampler}}},{key:"update",value:function(){}},{key:"resize",value:function(t){var e=t.width,n=t.height;e===this.width&&n===this.height||(this.destroy(),this.createTexture()),this.width=e,this.height=n}},{key:"destroy",value:function(){this.texture&&this.texture.destroy()}},{key:"createTexture",value:function(){var t=this.options,e=(t.data,t.type),n=(void 0===e&&ep.UNSIGNED_BYTE,t.width),i=t.height,r=(t.flipY,t.format),o=void 0===r?ep.RGBA:r,a=(t.mipmap,t.wrapS),s=void 0===a?ep.CLAMP_TO_EDGE:a,l=t.wrapT,u=void 0===l?ep.CLAMP_TO_EDGE:l,c=t.aniso,h=void 0===c?0:c,d=(t.alignment,t.premultiplyAlpha,t.mag),f=void 0===d?ep.NEAREST:d,p=t.min,m=void 0===p?ep.NEAREST:p,g=t.colorSpace,v=(void 0===g&&ep.BROWSER_DEFAULT_WEBGL,t.usage);this.width=n,this.height=i,this.texture=this.engine.device.createTexture({size:[n,i,1],mipLevelCount:1,sampleCount:1,dimension:cy.kd.E2d,format:y_[o],usage:v||cy.v2.Sampled|cy.v2.CopyDst}),(!v||v&cy.v2.Sampled)&&(this.sampler=this.engine.device.createSampler({addressModeU:__[s],addressModeV:__[u],addressModeW:__[s],magFilter:b_[f],minFilter:b_[m],maxAnisotropy:h}))}}]),t}(),O_=(0,wf.b2)()((T_=function(){function t(){var e=this;af(this,t),this.supportWebGPU=!0,this.useWGSL=!1,this.options=void 0,this.canvas=void 0,this.context=void 0,this.glslang=void 0,this.adapter=void 0,this.device=void 0,this.swapChain=void 0,this.mainPassSampleCount=void 0,this.mainTexture=void 0,this.depthTexture=void 0,this.mainColorAttachments=void 0,this.mainTextureExtends=void 0,this.mainDepthAttachment=void 0,this.uploadEncoder=void 0,this.renderEncoder=void 0,this.computeEncoder=void 0,this.renderTargetEncoder=void 0,this.commandBuffers=new Array(4).fill(void 0),this.currentRenderPass=null,this.mainRenderPass=null,this.currentRenderTargetViewDescriptor=void 0,this.currentComputePass=null,this.bundleEncoder=void 0,this.tempBuffers=[],this.currentRenderTarget=null,this.uploadEncoderDescriptor={label:"upload"},this.renderEncoderDescriptor={label:"render"},this.renderTargetEncoderDescriptor={label:"renderTarget"},this.computeEncoderDescriptor={label:"compute"},this.pipelines={},this.computePipelines={},this.defaultSampleCount=4,this.clearDepthValue=1,this.clearStencilValue=0,this.transientViewport={x:1/0,y:0,width:0,height:0},this.cachedViewport={x:0,y:0,width:0,height:0},this.clear=function(t){t.framebuffer;var n=t.color,i=t.depth,r=t.stencil;e.options.supportCompute&&e.startComputePass(),e.currentRenderTarget?(e.currentRenderPass&&e.endRenderTargetRenderPass(),e.startRenderTargetRenderPass(e.currentRenderTarget,n||null,!!i,!!r)):(e.mainColorAttachments[0].loadValue=n||cy.Ws.Load,e.mainDepthAttachment.depthLoadValue=i||cy.Ws.Load,e.mainDepthAttachment.stencilLoadValue=r?e.clearStencilValue:cy.Ws.Load,e.mainRenderPass&&e.endMainRenderPass(),e.startMainRenderPass())},this.createModel=function(){var t=ff(hf().mark((function t(n){var i;return hf().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=new L_(e,n),t.next=3,i.init();case 3:return t.abrupt("return",i);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.createAttribute=function(t){return new e_(e,t)},this.createBuffer=function(t){return new n_(e,t)},this.createElements=function(t){return new d_(e,t)},this.createTexture2D=function(t){return new A_(e,t)},this.createFramebuffer=function(t){return new f_(e,t)},this.useFramebuffer=function(t,n){e.currentRenderTarget&&e.unbindFramebuffer(e.currentRenderTarget),e.currentRenderTarget=t,e.currentRenderTargetViewDescriptor={dimension:cy.p_.E2d,arrayLayerCount:1,aspect:cy.H7.All},e.currentRenderPass=null,n()},this.createComputeModel=function(){var t=ff(hf().mark((function t(n){var i;return hf().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=new h_(e,n),t.next=3,i.init();case 3:return t.abrupt("return",i);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.getCanvas=function(){return e.canvas},this.getGLContext=function(){throw new Error("Method not implemented.")},this.viewport=function(t){var n=t.x,i=t.y,r=t.width,o=t.height;if(e.currentRenderPass){if(e.transientViewport.x!==1/0){e.getCurrentRenderPass().setViewport(e.transientViewport.x,e.transientViewport.y,e.transientViewport.width,e.transientViewport.height,0,1)}else if(n!==e.cachedViewport.x||i!==e.cachedViewport.y||r!==e.cachedViewport.width||o!==e.cachedViewport.height){e.cachedViewport={x:n,y:i,width:r,height:o},e.getCurrentRenderPass().setViewport(n,i,r,o,0,1)}}else e.transientViewport={x:n,y:i,width:r,height:o}},this.readPixels=function(t){throw new Error("Method not implemented.")}}var e,n;return lf(t,[{key:"isFloatSupported",value:function(){return!0}},{key:"init",value:(n=ff(hf().mark((function t(e){return hf().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.canvas=e.canvas,this.options=e,this.useWGSL=!!e.useWGSL,this.mainPassSampleCount=e.antialiasing?this.defaultSampleCount:1,t.next=6,this.initGlslang();case 6:this.initContextAndSwapChain(),this.initMainAttachments();case 8:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"setScissor",value:function(t){throw new Error("Method not implemented.")}},{key:"destroy",value:function(){this.mainTexture&&this.mainTexture.destroy(),this.depthTexture&&this.depthTexture.destroy(),this.tempBuffers.forEach((function(t){return t.destroy()})),this.tempBuffers=[]}},{key:"beginFrame",value:function(){this.uploadEncoder=this.device.createCommandEncoder(this.uploadEncoderDescriptor),this.renderEncoder=this.device.createCommandEncoder(this.renderEncoderDescriptor),this.renderTargetEncoder=this.device.createCommandEncoder(this.renderTargetEncoderDescriptor),this.options.supportCompute&&(this.computeEncoder=this.device.createCommandEncoder(this.computeEncoderDescriptor))}},{key:"endFrame",value:function(){this.options.supportCompute&&this.endComputePass(),this.endMainRenderPass(),this.commandBuffers[0]=this.uploadEncoder.finish(),this.commandBuffers[1]=this.renderEncoder.finish(),this.options.supportCompute&&(this.commandBuffers[2]=this.computeEncoder.finish()),this.commandBuffers[3]=this.renderTargetEncoder.finish(),Iv?this.device.getQueue().submit(this.commandBuffers.filter((function(t){return t}))):this.device.defaultQueue.submit(this.commandBuffers.filter((function(t){return t})))}},{key:"getCurrentRenderPass",value:function(){return this.currentRenderTarget&&!this.currentRenderPass?this.startRenderTargetRenderPass(this.currentRenderTarget,null,!1,!1):this.currentRenderPass||this.startMainRenderPass(),this.currentRenderPass}},{key:"initGlslang",value:(e=ff(hf().mark((function t(){var e,n;return hf().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Qb();case 2:return this.glslang=t.sent,t.next=5,null===(e=navigator)||void 0===e||null===(n=e.gpu)||void 0===n?void 0:n.requestAdapter();case 5:return this.adapter=t.sent,t.next=8,this.adapter.requestDevice();case 8:this.device=t.sent;case 9:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"initContextAndSwapChain",value:function(){this.context=this.canvas.getContext(Iv?"gpu":"gpupresent"),this.swapChain=this.context.configureSwapChain({device:this.device,format:this.options.swapChainFormat,usage:cy.v2.OutputAttachment|cy.v2.CopySrc})}},{key:"initMainAttachments",value:function(){if(this.mainTextureExtends={width:this.canvas.width,height:this.canvas.height,depth:1},this.options.antialiasing){var t={size:this.mainTextureExtends,mipLevelCount:1,sampleCount:this.mainPassSampleCount,dimension:cy.kd.E2d,format:cy.EV.BGRA8Unorm,usage:cy.v2.OutputAttachment};this.mainTexture&&this.mainTexture.destroy(),this.mainTexture=this.device.createTexture(t),this.mainColorAttachments=[{attachment:Iv?this.mainTexture.createDefaultView():this.mainTexture.createView(),loadValue:[0,0,0,1],storeOp:cy.EG.Store}]}else this.mainColorAttachments=[{attachment:Iv?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView(),loadValue:[0,0,0,1],storeOp:cy.EG.Store}];var e={size:this.mainTextureExtends,mipLevelCount:1,sampleCount:this.mainPassSampleCount,dimension:cy.kd.E2d,format:Iv?"depth32float-stencil8":cy.EV.Depth24PlusStencil8,usage:cy.v2.OutputAttachment};this.depthTexture&&this.depthTexture.destroy(),this.depthTexture=this.device.createTexture(e),this.mainDepthAttachment={attachment:Iv?this.depthTexture.createDefaultView():this.depthTexture.createView(),depthLoadValue:this.clearDepthValue,depthStoreOp:cy.EG.Store,stencilLoadValue:this.clearStencilValue,stencilStoreOp:cy.EG.Store}}},{key:"startComputePass",value:function(){this.currentComputePass&&this.endComputePass(),this.currentComputePass=this.computeEncoder.beginComputePass()}},{key:"startMainRenderPass",value:function(){this.currentRenderPass&&!this.currentRenderTarget&&this.endMainRenderPass(),this.options.antialiasing?this.mainColorAttachments[0].resolveTarget=Iv?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView():this.mainColorAttachments[0].attachment=Iv?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView(),this.currentRenderPass=this.renderEncoder.beginRenderPass({colorAttachments:this.mainColorAttachments,depthStencilAttachment:this.mainDepthAttachment}),this.mainRenderPass=this.currentRenderPass,this.cachedViewport&&this.viewport(this.cachedViewport)}},{key:"startRenderTargetRenderPass",value:function(t,e,n){var i,r,o,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=null===(i=t.get().color)||void 0===i?void 0:i.texture;s&&(o=s.createView(this.currentRenderTargetViewDescriptor));var l,u=null===(r=t.get().depth)||void 0===r?void 0:r.texture;u&&(l=u.createView());var c=this.renderTargetEncoder.beginRenderPass({colorAttachments:[{attachment:o,loadValue:null!==e?e:cy.Ws.Load,storeOp:cy.EG.Store}],depthStencilAttachment:u&&l?{attachment:l,depthLoadValue:n?this.clearDepthValue:cy.Ws.Load,depthStoreOp:cy.EG.Store,stencilLoadValue:a?this.clearStencilValue:cy.Ws.Load,stencilStoreOp:cy.EG.Store}:void 0});this.currentRenderPass=c,this.cachedViewport&&this.viewport(this.cachedViewport)}},{key:"endMainRenderPass",value:function(){this.currentRenderPass===this.mainRenderPass&&null!==this.currentRenderPass&&(this.currentRenderPass.endPass(),this.resetCachedViewport(),this.currentRenderPass=null,this.mainRenderPass=null)}},{key:"endComputePass",value:function(){this.currentComputePass&&(this.currentComputePass.endPass(),this.currentComputePass=null)}},{key:"endRenderTargetRenderPass",value:function(){this.currentRenderPass&&(this.currentRenderPass.endPass(),this.resetCachedViewport())}},{key:"resetCachedViewport",value:function(){this.cachedViewport={x:0,y:0,width:0,height:0}}},{key:"unbindFramebuffer",value:function(t){this.currentRenderPass&&this.currentRenderPass!==this.mainRenderPass&&this.endRenderTargetRenderPass(),this.transientViewport.x=1/0,this.currentRenderTarget=null,this.currentRenderPass=this.mainRenderPass}}]),t}(),C_=T_))||C_;function P_(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Af(t);if(e){var r=Af(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Lf(this,n)}}var I_,N_=4/64,R_=(0,wf.b2)()(D_=function(t){Cf(n,t);var e=P_(n);function n(){return af(this,n),e.apply(this,arguments)}return lf(n,[{key:"onEntityCreated",value:function(){var t=this.config,e=t.widthSegments,n=void 0===e?1:e,i=t.heightSegments,r=void 0===i?1:i,o=t.depthSegments,a=void 0===o?1:o,s=t.halfExtents,l=n,u=r,c=a,h=_f(void 0===s?Ee(.5,.5,.5):s,3),d=h[0],f=h[1],p=h[2],m=[Ee(-d,-f,p),Ee(d,-f,p),Ee(d,f,p),Ee(-d,f,p),Ee(d,-f,-p),Ee(-d,-f,-p),Ee(-d,f,-p),Ee(d,f,-p)],g=[[0,1,3],[4,5,7],[3,2,6],[1,0,4],[1,4,2],[5,0,6]],v=[[0,0,1],[0,0,-1],[0,1,0],[0,-1,0],[1,0,0],[-1,0,0]],y=1,b=2,_=3,w=4,x=5,M=[],E=[],S=[],k=[],C=[],T=0,D=function(t,e,n){var i,r,o,a;for(o=0;o<=e;o++)for(a=0;a<=n;a++){var s=we(),l=we(),u=we(),c=we();Ie(s,m[g[t][0]],m[g[t][1]],o/e),Ie(l,m[g[t][0]],m[g[t][2]],a/n),je(u,l,m[g[t][0]]),Ce(c,s,u),i=o/e,r=a/n,M.push(c[0],c[1],c[2]),E.push(v[t][0],v[t][1],v[t][2]),S.push(i,r),i=.875*(i/=3)+N_,r=.875*(r/=3)+N_,i+=t%3/3,r+=Math.floor(t/3)/3,k.push(i,r),o<e&&a<n&&(C.push(T+n+1,T+1,T),C.push(T+n+1,T+n+2,T+1)),T++}};D(0,l,u),D(y,l,u),D(b,l,c),D(_,l,c),D(w,c,u),D(x,c,u);var L=Ov(M),A=this.getComponent();A.indices=Uint32Array.from(C),A.aabb=L,A.vertexCount=T,A.attributes=[{dirty:!0,name:"position",data:Float32Array.from(M),arrayStride:12,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float3"}]},{dirty:!0,name:"normal",data:Float32Array.from(E),arrayStride:12,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float3"}]},{dirty:!0,name:"uv",data:Float32Array.from(S),arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float2"}]}]}}]),n}(uy))||D_;function Y_(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Af(t);if(e){var r=Af(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Lf(this,n)}}var j_,F_=(0,wf.b2)()(I_=function(t){Cf(n,t);var e=Y_(n);function n(){return af(this,n),e.apply(this,arguments)}return lf(n,[{key:"onEntityCreated",value:function(){var t=this.config.geometries,e=void 0===t?[]:t,n=this.getComponent();n.aabb=new Op;var i=[],r=[],o=0;e.forEach((function(t){var e=t.aabb,a=t.indices,s=t.vertexCount,l=t.attributes;n.aabb.add(e),n.vertexCount+=s,a&&r.push.apply(r,Lb(a.map((function(t){return t+o})))),o+=s,l.forEach((function(t,e){i[e]?t.data&&(Fv(t.data)?i[e].push(t.data):Sy(t.data)?i[e].data=function(t,e){if(!t&&!e)throw new Error("Please specify valid arguments for parameters a and b.");if(!e||0===e.length)return t;if(!t||0===t.length)return e;if(Object.prototype.toString.call(t)!==Object.prototype.toString.call(e))throw new Error("The types of the two arguments passed for parameters a and b do not match.");var n=new t.constructor(t.length+e.length);return n.set(t),n.set(e,t.length),n}(i[e].data,t.data):i[e].data=i[e].data.concat(t.data)):(i[e]=t,i[e].dirty=!0)}))})),n.attributes=i,n.indices=Uint32Array.from(r),n.dirty=!0}}]),n}(uy))||I_;function B_(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Af(t);if(e){var r=Af(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Lf(this,n)}}var z_,H_=(0,wf.b2)()(j_=function(t){Cf(n,t);var e=B_(n);function n(){return af(this,n),e.apply(this,arguments)}return lf(n,[{key:"onEntityCreated",value:function(){for(var t=this.config,e=t.halfExtents,n=void 0===e?[.5,.5]:e,i=t.widthSegments,r=void 0===i?5:i,o=t.lengthSegments,a=void 0===o?5:o,s=[],l=[],u=[],c=[],h=0,d=0;d<=r;d++)for(var f=0;f<=a;f++){var p=-n[0]+2*n[0]*d/r,m=-(-n[1]+2*n[1]*f/a),g=d/r,v=f/a;s.push(p,0,m),l.push(0,1,0),u.push(g,v),d<r&&f<a&&(c.push(h+a+1,h+1,h),c.push(h+a+1,h+a+2,h+1)),h++}var y=Ov(s),b=this.getComponent();b.indices=Uint32Array.from(c),b.aabb=y,b.vertexCount=h,b.attributes=[{dirty:!0,name:"position",data:Float32Array.from(s),arrayStride:12,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float3"}]},{dirty:!0,name:"normal",data:Float32Array.from(l),arrayStride:12,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float3"}]},{dirty:!0,name:"uv",data:Float32Array.from(u),arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float2"}]}]}}]),n}(uy))||j_;function G_(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Af(t);if(e){var r=Af(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Lf(this,n)}}var W_,U_,V_,X_,q_,K_,$_,Z_,J_=(0,wf.b2)()(z_=function(t){Cf(n,t);var e=G_(n);function n(){return af(this,n),e.apply(this,arguments)}return lf(n,[{key:"onEntityCreated",value:function(){for(var t=this.config,e=t.radius,n=void 0===e?.5:e,i=t.latitudeBands,r=void 0===i?16:i,o=t.longitudeBands,a=void 0===o?16:o,s=[],l=[],u=[],c=[],h=0;h<=r;h++)for(var d=h*Math.PI/r,f=Math.sin(d),p=Math.cos(d),m=0;m<=a;m++){var g=2*m*Math.PI/a-Math.PI/2,v=Math.sin(g),y=Math.cos(g)*f,b=p,_=v*f,w=1-m/a,x=1-h/r;s.push(y*n,b*n,_*n),l.push(y,b,_),u.push(w,x)}for(var M=0;M<r;++M)for(var E=0;E<a;++E){var S=M*(a+1)+E,k=S+a+1;c.push(S+1,k,S),c.push(S+1,k+1,k)}var C=Ov(s),T=this.getComponent();T.indices=Uint32Array.from(c),T.aabb=C,T.vertexCount=s.length/3,T.attributes=[{dirty:!0,name:"position",data:Float32Array.from(s),arrayStride:12,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float3"}]},{dirty:!0,name:"normal",data:Float32Array.from(l),arrayStride:12,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float3"}]},{dirty:!0,name:"uv",data:Float32Array.from(u),arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float2"}]}]}}]),n}(uy))||z_;function Q_(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Af(t);if(e){var r=Af(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Lf(this,n)}}var tw,ew,nw,iw,rw,ow,aw,sw,lw,uw,cw,hw,dw=(W_=(0,wf.b2)(),U_=(0,wf.f3)(xf.RenderEngine),V_=(0,wf.f3)(xf.ShaderModuleService),W_((Z_=function(t){Cf(n,t);var e=Q_(n);function n(){var t;af(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return of(t=e.call.apply(e,[this].concat(r)),"engine",K_,Df(t)),of(t,"shaderModuleService",$_,Df(t)),t}return lf(n,[{key:"onEntityCreated",value:function(){var t=this.getComponent(),e=this.engine.supportWebGPU?"layout(set = 0, binding = 0) uniform Uniforms {\n  vec4 color;\n  mat4 projectionMatrix;\n  mat4 modelViewMatrix;\n} uniforms;\n\nlayout(location = 0) in vec3 position;\n// layout(location = 1) in vec3 barycentric;\n\nlayout(location = 0) out vec4 fragColor;\n// layout(location = 1) out vec3 v_Barycentric;\n\nvoid main() {\n  gl_Position = uniforms.projectionMatrix * uniforms.modelViewMatrix * vec4(position, 1.0);\n  fragColor = uniforms.color;\n  // v_Barycentric = barycentric;\n}":'attribute vec3 position;\nattribute vec3 normal;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\nuniform vec4 color;\n\nvarying vec4 fragColor;\n\n#pragma include "uv.vert.declaration"\n\nvoid main() {\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n  fragColor = color;\n\n  #pragma include "uv.vert.main"\n}',n=this.engine.supportWebGPU?"// layout(set = 0, binding = 1) uniform WireframeUniforms {\n//   float lineWidth;\n//   vec4 lineColor;\n// } wireframe;\n\nlayout(location = 0) in vec4 fragColor;\n// layout(location = 1) in vec3 v_Barycentric;\n\nlayout(location = 0) out vec4 outColor;\n\n// wireframe\n// float edgeFactor() {\n//   vec3 d = fwidth(v_Barycentric);\n//   vec3 a3 = smoothstep(vec3(0.0), d * wireframe.lineWidth, v_Barycentric);\n//   return min(min(a3.x, a3.y), a3.z);\n// }\n\nvoid main() {\n  // outColor = mix(fragColor, wireframe.lineColor, (1.0 - edgeFactor()));\n  outColor = fragColor;\n}":'varying vec4 fragColor;\n\n#pragma include "uv.frag.declaration"\n#pragma include "map.frag.declaration"\n\nvoid main() {\n  vec4 diffuseColor = fragColor;\n\n  #pragma include "map.frag.main"\n\n  gl_FragColor = diffuseColor;\n}';this.shaderModuleService.registerModule("material-basic",{vs:e,fs:n});var i=this.shaderModuleService.getModule("material-basic"),r=i.vs,o=i.fs,a=i.uniforms;t.vertexShaderGLSL=r,t.fragmentShaderGLSL=o,t.setUniform(a),this.config.map&&(t.setDefines({USE_UV:1,USE_MAP:1}),t.setUniform({map:this.config.map,uvTransform:T()}))}}]),n}(cb),K_=uf((q_=Z_).prototype,"engine",[U_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$_=uf(q_.prototype,"shaderModuleService",[V_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X_=q_))||X_);function fw(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Af(t);if(e){var r=Af(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Lf(this,n)}}var pw,mw,gw,vw,yw,bw,_w,ww,xw,Mw,Ew,Sw,kw=(tw=(0,wf.b2)(),ew=(0,wf.f3)(xf.Systems),nw=(0,wf.t6)(xf.MaterialSystem),iw=(0,wf.f3)(xf.Systems),rw=(0,wf.t6)(xf.GeometrySystem),ow=(0,wf.f3)(xf.ShaderModuleService),tw((hw=function(t){Cf(n,t);var e=fw(n);function n(){var t;af(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return of(t=e.call.apply(e,[this].concat(r)),"materialSystem",lw,Df(t)),of(t,"geometrySystem",uw,Df(t)),of(t,"shaderModuleService",cw,Df(t)),t}return lf(n,[{key:"onAttributeChanged",value:function(t){var e=t.name,n=t.data,i=this.getMeshComponent();i&&i.material&&("gridColor"===e?(i.material.setUniform("u_GridColor",n),i.material.setUniform("u_GridColor2",n)):"gridSize"===e&&(i.material.setUniform("u_GridSize",n),i.material.setUniform("u_GridSize2",n)))}},{key:"onEntityCreated",value:function(){this.shaderModuleService.registerModule("grid",{vs:"attribute vec3 a_Position;\n\nvarying vec3 v_Position;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\n\nvoid main() {\n  v_Position = a_Position;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(a_Position, 1.);\n}",fs:"// generate grid, borrow from clay.gl viewer\n// @see https://github.com/pissang/clay-viewer/blob/master/src/graphic/ground.glsl\n#extension GL_OES_standard_derivatives : enable\n\nvarying vec3 v_Position;\n// varying vec3 v_Normal;\n\nuniform float u_GridSize : 5;\nuniform float u_GridSize2 : .5;\nuniform vec4 u_GridColor : [0, 0, 0, 1];\nuniform vec4 u_GridColor2 : [0.3, 0.3, 0.3, 1];\nuniform bool u_GridEnabled : true;\n\n// uniform vec3 u_LightDirection;\n// uniform vec3 u_LightColor;\n// uniform vec3 u_Camera;\n\nvoid main() {\n  // vec3 n = v_Normal;\n  // vec3 l = normalize(u_LightDirection);\n  // float NdotL = clamp(dot(n, l), 0.001, 1.0);\n\n  gl_FragColor = vec4(1.);\n\n  if (u_GridEnabled) {\n    float wx = v_Position.x;\n    float wz = v_Position.z;\n    // float x0 = abs(fract(wx / u_GridSize - 0.5) - 0.5) / fwidth(wx) * u_GridSize / 2.0;\n    // float z0 = abs(fract(wz / u_GridSize - 0.5) - 0.5) / fwidth(wz) * u_GridSize / 2.0;\n\n    float x1 = abs(fract(wx / u_GridSize2 - 0.5) - 0.5) / fwidth(wx) * u_GridSize2;\n    float z1 = abs(fract(wz / u_GridSize2 - 0.5) - 0.5) / fwidth(wz) * u_GridSize2;\n\n    // float v0 = 1.0 - clamp(min(x0, z0), 0.0, 1.0);\n    float v1 = 1.0 - clamp(min(x1, z1), 0.0, 1.0);\n    // if (v0 > 0.1) {\n        // gl_FragColor = mix(gl_FragColor, u_GridColor, v0);\n    // }\n    // else {\n        gl_FragColor = mix(gl_FragColor, u_GridColor2, v1);\n    // }\n  }\n\n  // float shadowFactor = calcShadow(u_ShadowMap, v_PositionFromLight, l, n);\n  // vec3 diffuseColor = u_LightColor * NdotL * shadowFactor;\n\n  // gl_FragColor.rgb *= diffuseColor;\n}"});var t=this.shaderModuleService.getModule("grid"),e=t.vs,n=t.fs,i=t.uniforms,r=this.materialSystem.createShaderMaterial({vertexShader:e,fragmentShader:n});this.setMaterial(r);var o=this.geometrySystem.createBufferGeometry({vertexCount:4});this.setGeometry(o),r.setCull({enable:!1,face:ep.BACK}).setDepth({enable:!0,func:ep.LESS}),r.setUniform(i),this.setAttributes({gridColor:this.config.gridColor,gridSize:this.config.gridSize}),o.setIndex([0,3,2,2,1,0]),o.setAttribute("a_Position",Float32Array.from([-4,-1,-4,4,-1,-4,4,-1,4,-4,-1,4]),{arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]})}}]),n}(hb),lw=uf((sw=hw).prototype,"materialSystem",[ew,nw],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uw=uf(sw.prototype,"geometrySystem",[iw,rw],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cw=uf(sw.prototype,"shaderModuleService",[ow],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),aw=sw))||aw),Cw=n(32644),Tw=n(40582);function Dw(t,e,n,i,r){Lw(e,i,-r),Lw(e,i,r),t.push(n),t.push(n)}function Lw(t,e,n){t.push([[e[0],e[1]],n])}function Aw(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Af(t);if(e){var r=Af(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Lf(this,n)}}var Ow,Pw,Iw,Nw,Rw,Yw,jw,Fw,Bw,zw,Hw,Gw,Ww=(pw=(0,wf.b2)(),mw=(0,wf.f3)(xf.Systems),gw=(0,wf.t6)(xf.MaterialSystem),vw=(0,wf.f3)(xf.Systems),yw=(0,wf.t6)(xf.GeometrySystem),bw=(0,wf.f3)(xf.ShaderModuleService),pw((Sw=function(t){Cf(n,t);var e=Aw(n);function n(){var t;af(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return of(t=e.call.apply(e,[this].concat(r)),"materialSystem",xw,Df(t)),of(t,"geometrySystem",Mw,Df(t)),of(t,"shaderModuleService",Ew,Df(t)),t.vertexCount=void 0,t}return lf(n,[{key:"onAttributeChanged",value:function(t){var e=t.name,n=t.data,i=this.getMeshComponent();if(i&&i.material)switch(e){case"dashArray":i.material.setUniform("u_dash_array",n);break;case"dashOffset":i.material.setUniform("u_dash_offset",n);break;case"dashRatio":i.material.setUniform("u_dash_ratio",n);break;case"thickness":i.material.setUniform("u_thickness",n);break;case"color":var r=new Array(this.vertexCount).fill(void 0).map((function(){return n})).reduce((function(t,e){return[].concat(Lb(t),Lb(e))}),[]);i.geometry.setAttribute("a_color",Float32Array.from(r),{arrayStride:16,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float4"}]})}}},{key:"onEntityCreated",value:function(){var t=this;this.shaderModuleService.registerModule("line",{vs:"attribute vec2 a_pos;\nattribute vec4 a_color;\nattribute float a_line_miter;\nattribute vec2 a_line_normal;\nattribute float a_counters;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\nuniform float u_thickness : 0.02;\nuniform vec2 u_viewport;\n\nvarying vec4 v_color;\nvarying vec2 v_normal;\nvarying float v_counters;\n\nvoid main() {\n  v_color = a_color;\n  v_counters = a_counters;\n\n  vec3 normal = normalize(vec3(a_line_normal, 0.0));\n\n  vec4 offset = vec4(normal * u_thickness / 2.0 * a_line_miter, 0.0);\n\n  v_normal = vec2(normal * sign(a_line_miter));\n\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(a_pos, 0.0, 1.0) + offset;\n}\n",fs:"uniform float u_dash_array : 0.02;\nuniform float u_dash_offset : 0;\nuniform float u_dash_ratio : 0;\nuniform float u_thickness : 0.02;\n\nvarying vec4 v_color;\nvarying vec2 v_normal;\nvarying float v_counters;\n\nvoid main() {\n    float blur = 1. - smoothstep(0.98, 1., length(v_normal));\n\n    gl_FragColor = v_color;\n    gl_FragColor.a *= blur * ceil(mod(v_counters + u_dash_offset, u_dash_array) - (u_dash_array * u_dash_ratio));\n}"});var e=this.shaderModuleService.getModule("line"),n=e.vs,i=e.fs,r=e.uniforms,o=this.materialSystem.createShaderMaterial({vertexShader:n,fragmentShader:i}),a=function(t,e,n){var i=[0,0],r=[0,0],o=[0,0],a=[0,0],s=-1,l=!1,u=null,c=(0,Cw.create)(),h=n||0,d=[],f=[],p=[],m=[0,0];e&&(t=t.slice()).push(t[0]);for(var g=t.length,v=1;v<g;v++){var y=h,b=t[v-1],_=t[v],w=v<t.length-1?t[v+1]:null;if(m.push(v/g,v/g),(0,Tw.o7)(i,_,b),u||(u=[0,0],(0,Tw.mJ)(u,i)),l||(l=!0,Dw(f,d,b,u,1)),p.push([y+0,y+1,y+2]),w){(0,Tw.o7)(r,w,_);var x=(0,Tw.x7)(o,a,i,r,1),M=(0,Cw.dot)(o,u)<0?-1:1,E=x>3;if(!isFinite(x)){(0,Tw.mJ)(u,i),Dw(f,d,_,u,1),p.push(1===s?[y,y+2,y+3]:[y+2,y+1,y+3]),h+=2,s=M;continue}E?(x=3,m.push(v/g),Lw(d,u,-M),f.push(_),Lw(d,a,x*M),f.push(_),p.push(s!==-M?[y,y+2,y+3]:[y+2,y+1,y+3]),p.push([y+2,y+3,y+4]),(0,Tw.mJ)(c,r),(0,Cw.copy)(u,c),Lw(d,u,-M),f.push(_),h+=3):(Dw(f,d,_,a,x),p.push(1===s?[y,y+2,y+3]:[y+2,y+1,y+3]),M=-1,(0,Cw.copy)(u,a),h+=2),s=M}else(0,Tw.mJ)(u,i),Dw(f,d,_,u,1),p.push(1===s?[y,y+2,y+3]:[y+2,y+1,y+3]),h+=2}return{normals:d,attrIndex:p,attrPos:f,attrCounters:m}}(this.config.points,!1),s=a.normals,l=a.attrIndex,u=a.attrPos,c=a.attrCounters,h=u.length;this.vertexCount=h;var d=this.geometrySystem.createBufferGeometry({vertexCount:h});this.setMaterial(o),this.setGeometry(d),o.setCull({enable:!1,face:ep.BACK}).setUniform(r),this.setAttributes({dashArray:this.config.dashArray,dashOffset:this.config.dashOffset,dashRatio:this.config.dashRatio,thickness:this.config.thickness});var f=[],p=[];s.forEach((function(t){var e=t[0],n=t[1];f.push([e[0],e[1]]),p.push(n)})),d.setIndex(l.reduce((function(t,e){return[].concat(Lb(t),Lb(e))}),[])),d.setAttribute("a_pos",Float32Array.from(u.reduce((function(t,e){return[].concat(Lb(t),Lb(e))}),[])),{arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]});var m=new Array(h).fill(void 0).map((function(){return Lb(t.config.color)})).reduce((function(t,e){return[].concat(Lb(t),Lb(e))}),[]);d.setAttribute("a_color",Float32Array.from(m),{arrayStride:16,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float4"}]}),d.setAttribute("a_line_miter",Float32Array.from(p),{arrayStride:4,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float"}]}),d.setAttribute("a_line_normal",Float32Array.from(f.reduce((function(t,e){return[].concat(Lb(t),Lb(e))}),[])),{arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:3,offset:0,format:"float2"}]}),d.setAttribute("a_counters",Float32Array.from(c),{arrayStride:4,stepMode:"vertex",attributes:[{shaderLocation:4,offset:0,format:"float"}]})}}]),n}(hb),xw=uf((ww=Sw).prototype,"materialSystem",[mw,gw],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Mw=uf(ww.prototype,"geometrySystem",[vw,yw],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ew=uf(ww.prototype,"shaderModuleService",[bw],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_w=ww))||_w);function Uw(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Vw(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Af(t);if(e){var r=Af(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Lf(this,n)}}var Xw,qw,Kw,$w,Zw,Jw,Qw,tx,ex,nx,ix=["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"],rx=(Ow=(0,wf.b2)(),Pw=(0,wf.f3)(xf.Systems),Iw=(0,wf.t6)(xf.MaterialSystem),Nw=(0,wf.f3)(xf.Systems),Rw=(0,wf.t6)(xf.GeometrySystem),Yw=(0,wf.f3)(xf.ShaderModuleService),Ow((Gw=function(t){Cf(n,t);var e=Vw(n);function n(){var t;af(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return of(t=e.call.apply(e,[this].concat(r)),"materialSystem",Bw,Df(t)),of(t,"geometrySystem",zw,Df(t)),of(t,"shaderModuleService",Hw,Df(t)),t}return lf(n,[{key:"onAttributeChanged",value:function(t){var e=t.name,n=t.data,i=this.getMeshComponent();i&&i.material&&("strokeWidth"===e?i.material.setUniform("u_stroke_width",n):"strokeColor"===e?i.material.setUniform("u_stroke_color",n):"strokeOpacity"===e?i.material.setUniform("u_stroke_opacity",n):"opacity"===e?i.material.setUniform("u_opacity",n):"blur"===e&&i.material.setUniform("u_blur",n))}},{key:"onEntityCreated",value:function(){this.shaderModuleService.registerModule("grid",{vs:'attribute vec2 position;\nattribute vec4 color;\nattribute float shape;\nattribute vec2 offset;\nattribute float size;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\n\nuniform float u_stroke_width : 0.01;\nuniform float u_device_pixel_ratio;\nuniform vec2 u_viewport;\n\nvarying vec4 v_color;\nvarying vec4 v_data;\nvarying float v_radius;\n\n#pragma include "picking"\n\nvoid main() {\n  v_color = color;\n  v_radius = size;\n\n  lowp float antialiasblur = 1.0 / u_device_pixel_ratio * (size + u_stroke_width);\n\n  // construct point coords\n  v_data = vec4(position, antialiasblur, shape);\n\n  gl_Position = projectionMatrix * modelViewMatrix\n    * vec4(position * size + offset, 0.0, 1.0);\n\n  setPickingColor(a_PickingColor);\n}',fs:"uniform float u_blur : 0.05;\nuniform float u_opacity : 0.7;\nuniform float u_stroke_width : 0.01;\nuniform vec4 u_stroke_color : [0, 0, 0, 0];\nuniform float u_stroke_opacity : 1;\n\nvarying vec4 v_color;\nvarying vec4 v_data;\nvarying float v_radius;\n\n#pragma include \"sdf2d\"\n#pragma include \"picking\"\n\nvoid main() {\n  int shape = int(floor(v_data.w + 0.5));\n\n  float antialiasblur = v_data.z;\n  float antialiased_blur = -max(u_blur, antialiasblur);\n  float r = v_radius / (v_radius + u_stroke_width);\n\n  float outer_df;\n  float inner_df;\n  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'\n  // if (shape == 0) {\n    outer_df = sdCircle(v_data.xy, 1.0);\n    inner_df = sdCircle(v_data.xy, r);\n  // } else if (shape == 1) {\n  //   outer_df = sdEquilateralTriangle(1.1 * v_data.xy);\n  //   inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);\n  // } else if (shape == 2) {\n  //   outer_df = sdBox(v_data.xy, vec2(1.));\n  //   inner_df = sdBox(v_data.xy, vec2(r));\n  // } else if (shape == 3) {\n  //   outer_df = sdPentagon(v_data.xy, 0.8);\n  //   inner_df = sdPentagon(v_data.xy, r * 0.8);\n  // } else if (shape == 4) {\n  //   outer_df = sdHexagon(v_data.xy, 0.8);\n  //   inner_df = sdHexagon(v_data.xy, r * 0.8);\n  // } else if (shape == 5) {\n  //   outer_df = sdOctogon(v_data.xy, 1.0);\n  //   inner_df = sdOctogon(v_data.xy, r);\n  // } else if (shape == 6) {\n  //   outer_df = sdHexagram(v_data.xy, 0.52);\n  //   inner_df = sdHexagram(v_data.xy, r * 0.52);\n  // } else if (shape == 7) {\n  //   outer_df = sdRhombus(v_data.xy, vec2(1.0));\n  //   inner_df = sdRhombus(v_data.xy, vec2(r));\n  // } else if (shape == 8) {\n  //   outer_df = sdVesica(v_data.xy, 1.1, 0.8);\n  //   inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);\n  // }\n\n  float opacity_t = smoothstep(0.0, antialiased_blur, outer_df);\n\n  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(\n    antialiased_blur,\n    0.0,\n    inner_df\n  );\n  vec4 strokeColor = u_stroke_color == vec4(0) ? v_color : u_stroke_color;\n\n  gl_FragColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), strokeColor * u_stroke_opacity, color_t);\n  gl_FragColor.a = gl_FragColor.a * opacity_t;\n\n  gl_FragColor = filterColor(gl_FragColor);\n}"});var t=this.shaderModuleService.getModule("grid"),e=t.vs,n=t.fs,i=t.uniforms,r=this.materialSystem.createShaderMaterial({vertexShader:e,fragmentShader:n,cull:{enable:!1},depth:{enable:!1},blend:{enable:!0,func:{srcRGB:ep.SRC_ALPHA,dstRGB:ep.ONE_MINUS_SRC_ALPHA,srcAlpha:1,dstAlpha:1}}});r.setUniform(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Uw(Object(n),!0).forEach((function(e){Wf(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Uw(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({u_device_pixel_ratio:window.devicePixelRatio},i));var o=this.buildAttributes(),a=this.geometrySystem.createInstancedBufferGeometry({maxInstancedCount:o.instancedOffsets.length/2,vertexCount:6});a.setIndex([0,2,1,0,3,2]),a.setAttribute("position",Float32Array.from(o.positions),{arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]}),a.setAttribute("offset",Float32Array.from(o.instancedOffsets),{arrayStride:8,stepMode:"instance",attributes:[{shaderLocation:1,offset:0,format:"float2"}]}),a.setAttribute("color",Float32Array.from(o.instancedColors),{arrayStride:16,stepMode:"instance",attributes:[{shaderLocation:2,offset:0,format:"float4"}]}),a.setAttribute("size",Float32Array.from(o.instancedSizes),{arrayStride:4,stepMode:"instance",attributes:[{shaderLocation:3,offset:0,format:"float"}]}),a.setAttribute("shape",Float32Array.from(o.instancedShapes),{arrayStride:4,stepMode:"instance",attributes:[{shaderLocation:4,offset:0,format:"float"}]}),a.setAttribute("a_PickingColor",Float32Array.from(o.instancedPickingColors),{arrayStride:12,stepMode:"instance",attributes:[{shaderLocation:6,offset:0,format:"float3"}]}),this.setMaterial(r),this.setGeometry(a)}},{key:"buildAttribute",value:function(t,e,n){var i,r,o,a,s;(i=e.instancedPickingColors).push.apply(i,Lb([(s=t.id||n)+1&255,s+1>>8&255,s+1>>8>>8&255])),e.instancedShapes.push(ix.indexOf(t.shape||"circle")),(r=e.instancedColors).push.apply(r,Lb(t.color||[1,0,0,1])),(o=e.instancedOffsets).push.apply(o,Lb(t.position||[0,0])),(a=e.instancedSizes).push.apply(a,Lb(t.size||[.2,.2]))}},{key:"buildAttributes",value:function(){var t=this,e={positions:[1,1,1,-1,-1,-1,-1,1],instancedOffsets:[],instancedColors:[],instancedSizes:[],instancedShapes:[],instancedPickingColors:[]};return Array.isArray(this.config)?this.config.forEach((function(n,i){t.buildAttribute(n,e,i)})):this.buildAttribute(this.config,e,0),e}}]),n}(hb),Bw=uf((Fw=Gw).prototype,"materialSystem",[Pw,Iw],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),zw=uf(Fw.prototype,"geometrySystem",[Nw,Rw],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Hw=uf(Fw.prototype,"shaderModuleService",[Yw],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jw=Fw))||jw);function ox(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return ax(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ax(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function ax(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var sx,lx,ux,cx,hx,dx,fx,px,mx,gx,vx,yx,bx=(Xw=(0,wf.b2)(),qw=(0,wf.f3)(xf.RenderEngine),Kw=(0,wf.f3)(xf.ShaderModuleService),$w=(0,wf.f3)(xf.ConfigService),Xw((nx=function(){function t(){af(this,t),this.container=void 0,of(this,"engine",Qw,this),of(this,"shaderModule",tx,this),of(this,"configService",ex,this),this.inited=!1,this.rendering=!1,this.pendings=[],this.views=[],this.size=void 0}var e,n;return lf(t,[{key:"init",value:(n=ff(hf().mark((function t(){var e,n,i,r,o;return hf().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.shaderModule.registerBuiltinModules(),this.shaderModule.registerModule("uv.vert.declaration",{vs:"#ifdef USE_UV\n  attribute vec2 uv;\n\t#ifdef UVS_VERTEX_ONLY\n    vec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif"}),this.shaderModule.registerModule("uv.vert.main",{vs:"#ifdef USE_UV\n  vUv = (uvTransform * vec3(uv, 1)).xy;\n#endif"}),this.shaderModule.registerModule("uv.frag.declaration",{fs:"#if (defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ))\n  varying vec2 vUv;\n#endif"}),this.shaderModule.registerModule("map.frag.declaration",{fs:"#ifdef USE_MAP\n  uniform sampler2D map;\n#endif"}),this.shaderModule.registerModule("map.frag.main",{fs:"#ifdef USE_MAP\n  vec4 texelColor = texture2D(map, vUv);\n  // texelColor = mapTexelToLinear(texelColor);\n  diffuseColor *= texelColor;\n#endif"}),e=this.container.getAll(xf.Systems),!(n=this.configService.get()).canvas){t.next=30;break}return t.next=11,this.engine.init({canvas:n.canvas,swapChainFormat:cy.EV.BGRA8Unorm,antialiasing:!1});case 11:i=ox(e),t.prev=12,i.s();case 14:if((r=i.n()).done){t.next=21;break}if(!(o=r.value).initialize){t.next=19;break}return t.next=19,o.initialize();case 19:t.next=14;break;case 21:t.next=26;break;case 23:t.prev=23,t.t0=t.catch(12),i.e(t.t0);case 26:return t.prev=26,i.f(),t.finish(26);case 29:this.inited=!0;case 30:case"end":return t.stop()}}),t,this,[[12,23,26,29]])}))),function(){return n.apply(this,arguments)})},{key:"render",value:(e=ff(hf().mark((function t(){var e,n,i,r,o,a,s,l=arguments;return hf().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.inited&&!this.rendering){t.next=2;break}return t.abrupt("return");case 2:for(this.pendings.length&&this.pendings.forEach((function(t){t()})),this.rendering=!0,this.engine.beginFrame(),e=this.container.getAll(xf.Systems),n=l.length,i=new Array(n),r=0;r<n;r++)i[r]=l[r];o=ox(e),t.prev=8,o.s();case 10:if((a=o.n()).done){t.next=17;break}if(!(s=a.value).execute){t.next=15;break}return t.next=15,s.execute(i);case 15:t.next=10;break;case 17:t.next=22;break;case 19:t.prev=19,t.t0=t.catch(8),o.e(t.t0);case 22:return t.prev=22,o.f(),t.finish(22);case 25:this.engine.endFrame(),this.rendering=!1;case 27:case"end":return t.stop()}}),t,this,[[8,19,22,25]])}))),function(){return e.apply(this,arguments)})},{key:"clear",value:function(t){var e=this;return this.inited?this.engine.clear(t):this.pendings.unshift((function(){e.engine.clear(t),e.pendings.shift()})),this}},{key:"setSize",value:function(t){var e=t.width,n=t.height,i=this.engine.getCanvas();return this.size={width:e,height:n},i.width=e,i.height=n,this}},{key:"getSize",value:function(){return this.size}}]),t}(),Qw=uf((Jw=nx).prototype,"engine",[qw],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tx=uf(Jw.prototype,"shaderModule",[Kw],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ex=uf(Jw.prototype,"configService",[$w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Zw=Jw))||Zw),_x=(0,wf.b2)()((lx=function(){function t(){af(this,t),this.entities=[]}return lf(t,[{key:"getEntities",value:function(){return this.entities}},{key:"addRenderable",value:function(t){return this.addEntity(t.getEntity()),this}},{key:"removeRenderable",value:function(t){return this.removeEntity(t.getEntity()),this}},{key:"addLight",value:function(){}},{key:"addEntity",value:function(t){return-1===this.entities.indexOf(t)&&this.entities.push(t),this}},{key:"removeEntity",value:function(t){var e=this.entities.indexOf(t);return this.entities.splice(e,1),this}}]),t}(),sx=lx))||sx,wx=(0,wf.b2)()((cx=function(){function t(){af(this,t),this.cache={}}return lf(t,[{key:"get",value:function(t){return this.cache[t]}},{key:"set",value:function(t,e){this.cache[t]=e}}]),t}(),ux=cx))||ux;function xx(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Mx(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?xx(Object(n),!0).forEach((function(e){Wf(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xx(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Ex,Sx,kx,Cx,Tx,Dx,Lx,Ax,Ox,Px,Ix,Nx,Rx,Yx=(hx=(0,wf.b2)(),dx=(0,wf.f3)(wx),fx=(0,wf.f3)(xf.RenderEngine),hx((yx=function(){function t(){af(this,t),of(this,"textureCache",gx,this),of(this,"engine",vx,this),this.config=void 0,this.loaded=!1,this.texture=void 0}var e;return lf(t,[{key:"setConfig",value:function(t){this.config=t}},{key:"isLoaded",value:function(){return this.loaded}},{key:"load",value:(e=ff(hf().mark((function t(){var e=this;return hf().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.config.url){t.next=4;break}return t.abrupt("return",new Promise((function(t,n){var i=e.textureCache.get(e.config.url);if(i)t(i);else{var r=new Image;r.crossOrigin="Anonymous",r.src=e.config.url,r.onload=function(){var n=e.engine.createTexture2D(Mx(Mx({},e.config),{},{data:r,width:r.width,height:r.height,flipY:!0}));e.textureCache.set(e.config.url,n),e.texture=n,e.loaded=!0,t(n)},r.onerror=function(){n()}}})));case 4:return this.loaded=!0,this.texture=this.engine.createTexture2D(this.config),t.abrupt("return",this.texture);case 7:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}]),t}(),gx=uf((mx=yx).prototype,"textureCache",[dx],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vx=uf(mx.prototype,"engine",[fx],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),px=mx))||px),jx=(Ex=(0,wf.b2)(),Sx=(0,wf.f3)(xf.Systems),kx=(0,wf.t6)(xf.RendererSystem),Ex((Lx=function(){function t(){af(this,t),of(this,"rendererSystem",Dx,this),this.camera=void 0,this.scene=void 0,this.viewport={x:0,y:0,width:0,height:0},this.clearColor=[1,1,1,1]}return lf(t,[{key:"getCamera",value:function(){return this.camera}},{key:"getScene",value:function(){return this.scene}},{key:"getViewport",value:function(){return this.viewport}},{key:"getClearColor",value:function(){return this.clearColor}},{key:"setCamera",value:function(t){return this.camera=t,this}},{key:"setScene",value:function(t){return this.scene=t,this}},{key:"setViewport",value:function(t){return this.viewport=t,this}},{key:"setClearColor",value:function(t){return this.clearColor=t,this}},{key:"pick",value:function(t){return this.rendererSystem.pick(t,this)}}]),t}(),Dx=uf((Tx=Lx).prototype,"rendererSystem",[Sx,kx],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Cx=Tx))||Cx);function Fx(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Bx(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Fx(Object(n),!0).forEach((function(e){Wf(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Fx(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var zx=(Ax=(0,wf.b2)(),Ox=(0,wf.f3)(xf.ConfigService),Ax((Rx=function(){function t(){af(this,t),of(this,"configService",Nx,this),this.container=void 0}var e;return lf(t,[{key:"getEngine",value:(e=ff(hf().mark((function t(){var e,n,i,r;return hf().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.container.get(xf.RenderEngine),n=this.configService.get(),i=n.canvas,r=n.engineOptions,t.next=4,e.init(Bx({canvas:i||hy(),swapChainFormat:cy.EV.BGRA8Unorm,antialiasing:!1},r));case 4:return t.abrupt("return",e);case 5:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"getTransformComponent",value:function(t){return this.container.get(xf.TransformComponentManager).getComponentByEntity(t)}},{key:"getMeshComponent",value:function(t){return this.container.get(xf.MeshComponentManager).getComponentByEntity(t)}},{key:"setConfig",value:function(t){this.configService.set(t)}},{key:"setContainer",value:function(t){this.container=t}},{key:"getContainer",value:function(){return this.container}},{key:"createEntity",value:function(){return mf()}},{key:"createScene",value:function(){return this.container.get(_x)}},{key:"createCamera",value:function(){return this.container.get(ly)}},{key:"createView",value:function(){return this.container.get(jx)}},{key:"createRenderable",value:function(t,e){var n=t?this.container.getNamed(xf.Renderable,t):this.container.get(hb),i=mf();return n.setConfig(e||{}),n.setEntity(i),n}},{key:"createGeometry",value:function(t,e){var n=this.container.getNamed(xf.Geometry,t),i=mf();return n.setConfig(e||{}),n.setEntity(i),n.getComponent()}},{key:"createMaterial",value:function(t,e){var n=this.container.getNamed(xf.Material,t),i=mf();return n.setConfig(e||{}),n.setEntity(i,t),n.getComponent()}},{key:"createTexture2D",value:function(t){var e=this.container.get(Yx);return e.setConfig(t),e}},{key:"createBufferGeometry",value:function(t){return this.container.getNamed(xf.Systems,xf.GeometrySystem).createBufferGeometry(t)}},{key:"createInstancedBufferGeometry",value:function(t){return this.container.getNamed(xf.Systems,xf.GeometrySystem).createInstancedBufferGeometry(t)}},{key:"createShaderMaterial",value:function(t){return this.container.getNamed(xf.Systems,xf.MaterialSystem).createShaderMaterial(t)}},{key:"createKernel",value:function(t){var e=this.container.get(ub);return"string"==typeof t?e.setBundle(JSON.parse(t)):e.setBundle(t),e.init(),e}},{key:"createRenderer",value:function(){var t=this.container.get(bx);return t.container=this.container,t.init(),t}},{key:"destroy",value:function(){this.container.getAll(xf.Systems).forEach((function(t){t.tearDown&&t.tearDown()})),this.container.get(xf.RenderEngine).destroy(),this.container.get(xf.InteractorService).destroy()}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Av(),i=navigator.gpu?O_:$b;n.isBound(xf.RenderEngine)||n.bind(xf.RenderEngine).to(i).inSingletonScope(),n.bind(bx).toSelf(),n.bind(ub).toSelf(),n.bind(hb).toSelf(),n.bind(jx).toSelf(),n.bind(ly).toSelf(),n.bind(_x).toSelf(),n.bind(t).toSelf(),n.bind(wx).toSelf(),n.bind(Yx).toSelf(),n.bind(xf.Geometry).to(R_).whenTargetNamed(uy.BOX),n.bind(xf.Geometry).to(J_).whenTargetNamed(uy.SPHERE),n.bind(xf.Geometry).to(H_).whenTargetNamed(uy.PLANE),n.bind(xf.Geometry).to(F_).whenTargetNamed(uy.MERGED),n.bind(xf.Material).to(dw).whenTargetNamed(cb.BASIC),n.bind(xf.Renderable).to(rx).whenTargetNamed(hb.POINT),n.bind(xf.Renderable).to(Ww).whenTargetNamed(hb.LINE),n.bind(xf.Renderable).to(kw).whenTargetNamed(hb.GRID);var r=n.get(t);return r.setContainer(n),r.setConfig(e),r}}]),t}(),Nx=uf((Ix=Rx).prototype,"configService",[Ox],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Px=Ix))||Px);const Hx=(t,e)=>{let n;return n=t?Yh(t)?()=>t:t:()=>e||1,n},Gx=t=>{const e=[],n=t.length,i=t[0].length;for(let r=0;r<i;r++)t.forEach(((t,i)=>{if(e.push(t[r]),i===n-1)for(;e.length%4!=0;)e.push(0)}));return new Float32Array(e)};var Wx=function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function a(t){try{l(i.next(t))}catch(t){o(t)}}function s(t){try{l(i.throw(t))}catch(t){o(t)}}function l(t){t.done?r(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(a,s)}l((i=i.apply(t,e||[])).next())}))};var Ux=function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function a(t){try{l(i.next(t))}catch(t){o(t)}}function s(t){try{l(i.throw(t))}catch(t){o(t)}}function l(t){t.done?r(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(a,s)}l((i=i.apply(t,e||[])).next())}))};class Vx{constructor(t){this.id=t.id||0,this.rx=t.rx,this.ry=t.ry,this.fx=0,this.fy=0,this.mass=t.mass,this.degree=t.degree,this.g=t.g||0}distanceTo(t){const e=this.rx-t.rx,n=this.ry-t.ry;return Math.hypot(e,n)}setPos(t,e){this.rx=t,this.ry=e}resetForce(){this.fx=0,this.fy=0}addForce(t){const e=t.rx-this.rx,n=t.ry-this.ry;let i=Math.hypot(e,n);i=i<1e-4?1e-4:i;const r=this.g*(this.degree+1)*(t.degree+1)/i;this.fx+=r*e/i,this.fy+=r*n/i}in(t){return t.contains(this.rx,this.ry)}add(t){const e=this.mass+t.mass,n=(this.rx*this.mass+t.rx*t.mass)/e,i=(this.ry*this.mass+t.ry*t.mass)/e,r=this.degree+t.degree;return new Vx({rx:n,ry:i,mass:e,degree:r})}}class Xx{constructor(t){this.xmid=t.xmid,this.ymid=t.ymid,this.length=t.length,this.massCenter=t.massCenter||[0,0],this.mass=t.mass||1}getLength(){return this.length}contains(t,e){const n=this.length/2;return t<=this.xmid+n&&t>=this.xmid-n&&e<=this.ymid+n&&e>=this.ymid-n}NW(){const t=this.xmid-this.length/4,e=this.ymid+this.length/4,n=this.length/2;return new Xx({xmid:t,ymid:e,length:n})}NE(){const t=this.xmid+this.length/4,e=this.ymid+this.length/4,n=this.length/2;return new Xx({xmid:t,ymid:e,length:n})}SW(){const t=this.xmid-this.length/4,e=this.ymid-this.length/4,n=this.length/2;return new Xx({xmid:t,ymid:e,length:n})}SE(){const t=this.xmid+this.length/4,e=this.ymid-this.length/4,n=this.length/2;return new Xx({xmid:t,ymid:e,length:n})}}class qx{constructor(t){this.body=null,this.quad=null,this.NW=null,this.NE=null,this.SW=null,this.SE=null,this.theta=.5,null!=t&&(this.quad=t)}insert(t){null!=this.body?this._isExternal()?(this.quad&&(this.NW=new qx(this.quad.NW()),this.NE=new qx(this.quad.NE()),this.SW=new qx(this.quad.SW()),this.SE=new qx(this.quad.SE())),this._putBody(this.body),this._putBody(t),this.body=this.body.add(t)):(this.body=this.body.add(t),this._putBody(t)):this.body=t}_putBody(t){this.quad&&(t.in(this.quad.NW())&&this.NW?this.NW.insert(t):t.in(this.quad.NE())&&this.NE?this.NE.insert(t):t.in(this.quad.SW())&&this.SW?this.SW.insert(t):t.in(this.quad.SE())&&this.SE&&this.SE.insert(t))}_isExternal(){return null==this.NW&&null==this.NE&&null==this.SW&&null==this.SE}updateForce(t){if(null!=this.body&&t!==this.body)if(this._isExternal())t.addForce(this.body);else{(this.quad?this.quad.getLength():0)/this.body.distanceTo(t)<this.theta?t.addForce(this.body):(this.NW&&this.NW.updateForce(t),this.NE&&this.NE.updateForce(t),this.SW&&this.SW.updateForce(t),this.SE&&this.SE.updateForce(t))}}}const Kx=new Proxy({},{get:(t,e)=>{return n=e,qh.has(n)?qh.get(n):null;var n},set:(t,e,n)=>(Kh(e,n),!0)});var $x=n(81746),Zx=n.n($x),Jx=gl.traverseTree,Qx=function(t,e){return t?(0,b.isNumber)(t)?function(e){return t}:t:function(t){return e||1}},tM=function(t,e){var n=[],i=[],r={},o=0;for(o=0;o<t.length;o++){var a=t[o];r[a.id]=o,n.push(a.x),n.push(a.y),n.push(0),n.push(0),i.push([])}for(o=0;o<e.length;o++){var s=e[o];i[r[s.source]].push(r[s.target]),i[r[s.target]].push(r[s.source])}var l=0;for(o=0;o<t.length;o++){var u=n.length,c=i[o],h=c.length;n[4*o+2]=u,n[4*o+3]=c.length,l=Math.max(l,c.length);for(var d=0;d<h;++d){var f=c[d];n.push(+f)}}for(;n.length%4!=0;)n.push(0);return{array:new Float32Array(n),maxEdgePerVetex:l}},eM=function(t,e,n){var i=[],r=[],o={},a=0;for(a=0;a<t.length;a++){var s=t[a];o[s.id]=a,i.push(s.x),i.push(s.y),i.push(0),i.push(0),r.push([])}for(a=0;a<e.length;a++){var l=e[a];r[o[l.source]].push(o[l.target]),r[o[l.source]].push(n(l)),r[o[l.target]].push(o[l.source]),r[o[l.target]].push(n(l))}var u=0;for(a=0;a<t.length;a++){var c=i.length,h=r[a],d=h.length;i[4*a+2]=c,i[4*a+3]=d/2,u=Math.max(u,d/2);for(var f=0;f<d;++f){var p=h[f];i.push(+p)}}for(;i.length%4!=0;)i.push(0);return{array:new Float32Array(i),maxEdgePerVetex:u}},nM=function(t,e,n,i){var r=[],o=[],a={},s=0;for(s=0;s<t.length;s++){var l=t[s];a[l.id]=s,r.push(l.x),r.push(l.y),r.push(0),r.push(0),o.push([])}for(s=0;s<e.length;s++){var u=e[s];o[a[u.source]].push(a[u.target]),o[a[u.source]].push(n(u)),o[a[u.source]].push(i(u)),o[a[u.source]].push(0),o[a[u.target]].push(a[u.source]),o[a[u.target]].push(n(u)),o[a[u.target]].push(i(u)),o[a[u.target]].push(0)}var c=0;for(s=0;s<t.length;s++){var h=r.length,d=o[s],f=d.length;r[4*s+2]=h+1048576*f/4,r[4*s+3]=0,c=Math.max(c,f/4);for(var p=0;p<f;++p){var m=d[p];r.push(+m)}}for(;r.length%4!=0;)r.push(0);return{array:new Float32Array(r),maxEdgePerVetex:c}},iM=function(t,e){var n=[],i=t.length,r={};return e.forEach((function(e){t.forEach((function(t,o){if(void 0===r[e[t]]&&(r[e[t]]=Object.keys(r).length),n.push(r[e[t]]),o===i-1)for(;n.length%4!=0;)n.push(0)}))})),{array:new Float32Array(n),count:Object.keys(r).length}},rM=function(t){for(var e=[],n=t.length,i=t[0].length,r=function(i){t.forEach((function(t,r){if(e.push(t[i]),r===n-1)for(;e.length%4!=0;)e.push(0)}))},o=0;o<i;o++)r(o);return new Float32Array(e)},oM=function(t,e){var n={x:1/0,y:1/0},i={x:-1/0,y:-1/0},r="x",o="y";e&&["V","TB","BT"].indexOf(e)>=0&&(o="x",r="y");var a=0;Jx(t,(function(t){return a++,t.x>i.x&&(i.x=t.x),t.x<n.x&&(n.x=t.x),t.y>i.y&&(i.y=t.y),t.y<n.y&&(n.y=t.y),!0}));var s=2*Math.PI/a,l=i[o]-n[o];return 0===l||Jx(t,(function(e){var i=(e[o]-n[o])/l*(2*Math.PI-s)+s,a=Math.abs("x"===r?e.x-t.x:e.y-t.y);return e.x=a*Math.cos(i),e.y=a*Math.sin(i),!0})),t},aM=function t(){return"undefined"==typeof window||"undefined"==typeof document?{}:{canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var t=document.createElement("canvas");return!(!window.WebGLRenderingContext||!t.getContext("webgl")&&!t.getContext("experimental-webgl"))}catch(t){return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var t=document.createElement("div");return t.id="webgl-error-message",t.style.fontFamily="monospace",t.style.fontSize="13px",t.style.fontWeight="normal",t.style.textAlign="center",t.style.background="#fff",t.style.color="#000",t.style.padding="1.5em",t.style.width="400px",t.style.margin="5em auto 0",this.webgl||(t.innerHTML=window.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join("\n"):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join("\n")),t},addGetWebGLMessage:function(e){var n=void 0!==(e=e||{}).parent?e.parent:document.body,i=void 0!==e.id?e.id:"oldie",r=t().getWebGLErrorMessage();r.id=i,n.appendChild(r)}}};const sM=(0,y.__assign)((0,y.__assign)((0,y.__assign)((0,y.__assign)({},gl),p),m),g);var lM=sM.radialLayout,uM=function(){function t(t){this.type=t.type,this.radial=t.radial,this.config=t}return t.prototype.init=function(t){var e=this;this.data=t,this.radial?this.layoutMethod=function(t){var n=Zx()[e.type](t,e.config);return lM(n),n}:this.layoutMethod=function(t){return Zx()[e.type](t,e.config)}},t.prototype.execute=function(){return this.layoutMethod(this.data,this.config)},t.prototype.layout=function(t){return this.init(t),this.execute()},t}();const cM=uM;Kh("grid",class extends Ph{constructor(t){super(),this.begin=[0,0],this.preventOverlap=!0,this.preventOverlapPadding=10,this.condense=!1,this.sortBy="degree",this.nodeSize=30,this.nodes=[],this.edges=[],this.width=300,this.height=300,this.row=0,this.col=0,this.cellWidth=0,this.cellHeight=0,this.cellUsed={},this.id2manPos={},this.onLayoutEnd=()=>{},this.updateCfg(t)}getDefaultCfg(){return{begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30}}execute(){const t=this,e=t.nodes,n=t.edges,i=e.length,r=t.begin;if(0===i)return t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:n};if(1===i)return e[0].x=r[0],e[0].y=r[1],t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:n};const o=[];e.forEach((t=>{o.push(t)}));const a={};if(o.forEach(((t,e)=>{a[t.id]=e})),("degree"===t.sortBy||!Ih(t.sortBy)||void 0===o[0][t.sortBy])&&(t.sortBy="degree",jh(e[0].degree))){const t=Hh(o.length,a,n);o.forEach(((e,n)=>{e.degree=t[n]}))}o.sort(((e,n)=>n[t.sortBy]-e[t.sortBy])),t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight);const s=t.rows,l=null!=t.cols?t.cols:t.columns;if(t.cells=i,null!=s&&null!=l?(t.rows=s,t.cols=l):null!=s&&null==l?(t.rows=s,t.cols=Math.ceil(t.cells/t.rows)):null==s&&null!=l?(t.cols=l,t.rows=Math.ceil(t.cells/t.cols)):(t.splits=Math.sqrt(t.cells*t.height/t.width),t.rows=Math.round(t.splits),t.cols=Math.round(t.width/t.height*t.splits)),t.cols*t.rows>t.cells){const e=t.small(),n=t.large();(e-1)*n>=t.cells?t.small(e-1):(n-1)*e>=t.cells&&t.large(n-1)}else for(;t.cols*t.rows<t.cells;){const e=t.small(),n=t.large();(n+1)*e>=t.cells?t.large(n+1):t.small(e+1)}t.cellWidth=t.width/t.cols,t.cellHeight=t.height/t.rows,t.condense&&(t.cellWidth=0,t.cellHeight=0),t.preventOverlap&&o.forEach((e=>{let n,i;e.x&&e.y||(e.x=0,e.y=0),Rh(e.size)?(n=e.size[0],i=e.size[1]):Yh(e.size)?(n=e.size,i=e.size):Fh(e.size)&&(n=e.size.width,i=e.size.height),void 0!==n&&void 0!==i||(Rh(t.nodeSize)?(n=t.nodeSize[0],i=t.nodeSize[1]):Yh(t.nodeSize)?(n=t.nodeSize,i=t.nodeSize):(n=30,i=30));const r=t.preventOverlapPadding,o=n+r,a=i+r;t.cellWidth=Math.max(t.cellWidth,o),t.cellHeight=Math.max(t.cellHeight,a)})),t.cellUsed={},t.row=0,t.col=0,t.id2manPos={};for(let e=0;e<o.length;e++){const n=o[e];let i;if(t.position&&(i=t.position(n)),i&&(void 0!==i.row||void 0!==i.col)){const e={row:i.row,col:i.col};if(void 0===e.col)for(e.col=0;t.used(e.row,e.col);)e.col++;else if(void 0===e.row)for(e.row=0;t.used(e.row,e.col);)e.row++;t.id2manPos[n.id]=e,t.use(e.row,e.col)}t.getPos(n)}return t.onLayoutEnd&&t.onLayoutEnd(),{edges:n,nodes:o}}small(t){const e=this;let n;const i=e.rows||5,r=e.cols||5;if(null==t)n=Math.min(i,r);else{Math.min(i,r)===e.rows?e.rows=t:e.cols=t}return n}large(t){const e=this;let n;const i=e.rows||5,r=e.cols||5;if(null==t)n=Math.max(i,r);else{Math.max(i,r)===e.rows?e.rows=t:e.cols=t}return n}used(t,e){return this.cellUsed[`c-${t}-${e}`]||!1}use(t,e){this.cellUsed[`c-${t}-${e}`]=!0}moveToNextCell(){const t=this,e=t.cols||5;t.col++,t.col>=e&&(t.col=0,t.row++)}getPos(t){const e=this,n=e.begin,i=e.cellWidth,r=e.cellHeight;let o,a;const s=e.id2manPos[t.id];if(s)o=s.col*i+i/2+n[0],a=s.row*r+r/2+n[1];else{for(;e.used(e.row,e.col);)e.moveToNextCell();o=e.col*i+i/2+n[0],a=e.row*r+r/2+n[1],e.use(e.row,e.col),e.moveToNextCell()}t.x=o,t.y=a}getType(){return"grid"}}),Kh("random",class extends Ph{constructor(t){super(),this.center=[0,0],this.width=300,this.height=300,this.nodes=[],this.edges=[],this.onLayoutEnd=()=>{},this.updateCfg(t)}getDefaultCfg(){return{center:[0,0],width:300,height:300}}execute(){const t=this,e=t.nodes,n=t.center;return t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight),e&&e.forEach((e=>{e.x=.9*(Math.random()-.5)*t.width+n[0],e.y=.9*(Math.random()-.5)*t.height+n[1]})),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:this.edges}}getType(){return"random"}}),Kh("force",class extends Ph{constructor(t){super(),this.center=[0,0],this.nodeStrength=null,this.edgeStrength=null,this.preventOverlap=!1,this.clusterNodeStrength=null,this.clusterEdgeStrength=null,this.clusterEdgeDistance=null,this.clusterNodeSize=null,this.clusterFociStrength=null,this.linkDistance=50,this.alphaDecay=.028,this.alphaMin=.001,this.alpha=.3,this.collideStrength=1,this.workerEnabled=!1,this.tick=()=>{},this.onLayoutEnd=()=>{},this.ticking=void 0,t&&this.updateCfg(t)}getDefaultCfg(){return{center:[0,0],nodeStrength:null,edgeStrength:null,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,linkDistance:50,forceSimulation:null,alphaDecay:.028,alphaMin:.001,alpha:.3,collideStrength:1,clustering:!1,clusterNodeStrength:-1,clusterEdgeStrength:.1,clusterEdgeDistance:100,clusterFociStrength:.8,clusterNodeSize:10,tick(){},onLayoutEnd(){},workerEnabled:!1}}init(t){const e=this;e.nodes=t.nodes||[];const n=t.edges||[];e.edges=n.map((t=>{const e={},n=["targetNode","sourceNode","startPoint","endPoint"];return Object.keys(t).forEach((i=>{n.indexOf(i)>-1||(e[i]=t[i])})),e})),e.ticking=!1}execute(t){const e=this,n=e.nodes,i=e.edges;if(e.ticking)return;let r=e.forceSimulation;const o=e.alphaMin,a=e.alphaDecay,s=e.alpha;if(r){if(t)if(e.clustering&&e.clusterForce&&(e.clusterForce.nodes(n),e.clusterForce.links(i)),r.nodes(n),i&&e.edgeForce)e.edgeForce.links(i);else if(i&&!e.edgeForce){const t=gd().id((t=>t.id)).links(i);e.edgeStrength&&t.strength(e.edgeStrength),e.linkDistance&&t.distance(e.linkDistance),e.edgeForce=t,r.force("link",t)}e.preventOverlap&&e.overlapProcess(r),r.alpha(s).restart(),this.ticking=!0}else try{const t=fd();if(e.nodeStrength&&t.strength(e.nodeStrength),r=dd().nodes(n),e.clustering){const t=xd();t.centerX(e.center[0]).centerY(e.center[1]).template("force").strength(e.clusterFociStrength),i&&t.links(i),n&&t.nodes(n),t.forceLinkDistance(e.clusterEdgeDistance).forceLinkStrength(e.clusterEdgeStrength).forceCharge(e.clusterNodeStrength).forceNodeSize(e.clusterNodeSize),e.clusterForce=t,r.force("group",t)}if(r.force("center",function(t,e){var n,i=1;function r(){var r,o,a=n.length,s=0,l=0;for(r=0;r<a;++r)s+=(o=n[r]).x,l+=o.y;for(s=(s/a-t)*i,l=(l/a-e)*i,r=0;r<a;++r)(o=n[r]).x-=s,o.y-=l}return null==t&&(t=0),null==e&&(e=0),r.initialize=function(t){n=t},r.x=function(e){return arguments.length?(t=+e,r):t},r.y=function(t){return arguments.length?(e=+t,r):e},r.strength=function(t){return arguments.length?(i=+t,r):i},r}(e.center[0],e.center[1])).force("charge",t).alpha(s).alphaDecay(a).alphaMin(o),e.preventOverlap&&e.overlapProcess(r),i){const t=gd().id((t=>t.id)).links(i);e.edgeStrength&&t.strength(e.edgeStrength),e.linkDistance&&t.distance(e.linkDistance),e.edgeForce=t,r.force("link",t)}if(e.workerEnabled&&!Sd()&&(e.workerEnabled=!1,console.warn("workerEnabled option is only supported when running in web worker.")),e.workerEnabled){r.stop();const t=function(t){const e=t.alphaMin(),n=t.alphaTarget(),i=t.alpha(),r=Math.log((e-n)/(i-n))/Math.log(1-t.alphaDecay());return Math.ceil(r)}(r);for(let e=1;e<=t;e++)r.tick(),postMessage({nodes:n,currentTick:e,totalTicks:t,type:Md},void 0);e.ticking=!1}else r.on("tick",(()=>{e.tick()})).on("end",(()=>{e.ticking=!1,e.onLayoutEnd&&e.onLayoutEnd()})),e.ticking=!0;e.forceSimulation=r,e.ticking=!0}catch(t){e.ticking=!1,console.warn(t)}}overlapProcess(t){const e=this,n=e.nodeSize,i=e.nodeSpacing;let r,o;const a=e.collideStrength;if(o=Yh(i)?()=>i:Xh(i)?i:()=>0,n)if(Xh(n))r=t=>n(t)+o(t);else if(Rh(n)){const t=(n[0]>n[1]?n[0]:n[1])/2;r=e=>t+o(e)}else if(Yh(n)){const t=n/2;r=e=>t+o(e)}else r=()=>10;else r=t=>{if(t.size){if(Rh(t.size)){return(t.size[0]>t.size[1]?t.size[0]:t.size[1])/2+o(t)}if(Fh(t.size)){return(t.size.width>t.size.height?t.size.width:t.size.height)/2+o(t)}return t.size/2+o(t)}return 10+o(t)};t.force("collisionForce",bd(r).strength(a))}updateCfg(t){const e=this;e.ticking&&(e.forceSimulation.stop(),e.ticking=!1),e.forceSimulation=null,Object.assign(e,t)}destroy(){const t=this;t.ticking&&(t.forceSimulation.stop(),t.ticking=!1),t.nodes=null,t.edges=null,t.destroyed=!0}}),Kh("circular",class extends Ph{constructor(t){super(),this.radius=null,this.startRadius=null,this.endRadius=null,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0,this.divisions=1,this.ordering=null,this.angleRatio=1,this.nodes=[],this.edges=[],this.nodeMap={},this.degrees=[],this.width=300,this.height=300,this.updateCfg(t)}getDefaultCfg(){return{radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1}}execute(){const t=this,e=t.nodes,n=t.edges,i=e.length;if(0===i)return void(t.onLayoutEnd&&t.onLayoutEnd());t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);const r=t.center;if(1===i)return e[0].x=r[0],e[0].y=r[1],void(t.onLayoutEnd&&t.onLayoutEnd());let o=t.radius,a=t.startRadius,s=t.endRadius;const l=t.divisions,u=t.startAngle,c=t.endAngle,h=(c-u)/i,d={};e.forEach(((t,e)=>{d[t.id]=e})),t.nodeMap=d;const f=Hh(e.length,d,n);t.degrees=f,o||a||s?!a&&s?a=s:a&&!s&&(s=a):o=t.height>t.width?t.width/2:t.height/2;const p=h*t.angleRatio,m=t.ordering;let g=[];g="topology"===m?t.topologyOrdering():"topology-directed"===m?t.topologyOrdering(!0):"degree"===m?t.degreeOrdering():e;const v=t.clockwise,y=Math.ceil(i/l);for(let t=0;t<i;++t){let e=o;e||null===a||null===s||(e=a+t*(s-a)/(i-1)),e||(e=10+100*t/(i-1));let n=u+t%y*p+2*Math.PI/l*Math.floor(t/y);v||(n=c-t%y*p-2*Math.PI/l*Math.floor(t/y)),g[t].x=r[0]+Math.cos(n)*e,g[t].y=r[1]+Math.sin(n)*e,g[t].weight=f[t]}return t.onLayoutEnd&&t.onLayoutEnd(),{nodes:g,edges:this.edges}}topologyOrdering(t=!1){const e=this,n=e.degrees,i=e.edges,r=e.nodes,o=Bh(r),a=e.nodeMap,s=[o[0]],l=[r[0]],u=[],c=r.length;u[0]=!0,function(t,e,n,i){t.forEach(((e,n)=>{t[n].children=[],t[n].parent=[]})),i?e.forEach((e=>{const i=zh(e,"source"),r=zh(e,"target");let o=0;i&&(o=n[i]);let a=0;r&&(a=n[r]);const s=t[o].children,l=t[a].parent;s.push(t[a].id),l.push(t[o].id)})):e.forEach((e=>{const i=zh(e,"source"),r=zh(e,"target");let o=0;i&&(o=n[i]);let a=0;r&&(a=n[r]);const s=t[o].children,l=t[a].children;s.push(t[a].id),l.push(t[o].id)}))}(o,i,a,t);let h=0;return o.forEach(((t,e)=>{if(0!==e)if(e!==c-1&&n[e]===n[e+1]&&!function(t,e,n){const i=n.length;for(let r=0;r<i;r++){const i=zh(n[r],"source"),o=zh(n[r],"target");if(t.id===i&&e.id===o||e.id===i&&t.id===o)return!0}return!1}(s[h],t,i)||u[e]){const t=s[h].children;let i=!1;for(let c=0;c<t.length;c++){const h=a[t[c]];if(n[h]===n[e]&&!u[h]){s.push(o[h]),l.push(r[a[o[h].id]]),u[h]=!0,i=!0;break}}let d=0;for(;!i&&(u[d]||(s.push(o[d]),l.push(r[a[o[d].id]]),u[d]=!0,i=!0),d++,d!==c););}else s.push(t),l.push(r[a[t.id]]),u[e]=!0,h++})),l}degreeOrdering(){const t=this.nodes,e=[],n=this.degrees;return t.forEach(((t,i)=>{t.degree=n[i],e.push(t)})),e.sort(kd),e}getType(){return"circular"}}),Kh("dagre",class extends Ph{constructor(t){super(),this.rankdir="TB",this.nodesep=50,this.ranksep=50,this.controlPoints=!1,this.sortByCombo=!1,this.nodes=[],this.edges=[],this.onLayoutEnd=()=>{},this.updateCfg(t)}getDefaultCfg(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1}}execute(){const t=this,{nodes:e,nodeSize:n,rankdir:i,combos:r}=t;if(!e)return;const o=t.edges||[],a=new(Td().graphlib.Graph)({multigraph:!0,compound:!0});let s;s=n?Rh(n)?()=>n:()=>[n,n]:t=>t.size?Rh(t.size)?t.size:Fh(t.size)?[t.size.width||40,t.size.height||40]:[t.size,t.size]:[40,40];let l=Dd(t.nodesepFunc,t.nodesep,50),u=Dd(t.ranksepFunc,t.ranksep,50);"LR"!==i&&"RL"!==i||(l=Dd(t.ranksepFunc,t.ranksep,50),u=Dd(t.nodesepFunc,t.nodesep,50)),a.setDefaultEdgeLabel((()=>({}))),a.setGraph(t);const c={};let h;return e.filter((t=>!1!==t.layout)).forEach((t=>{const e=s(t),n=u(t),i=l(t),r=e[0]+2*i,o=e[1]+2*n;a.setNode(t.id,{width:r,height:o}),this.sortByCombo&&t.comboId&&(c[t.comboId]||(c[t.comboId]=!0,a.setNode(t.comboId,{})),a.setParent(t.id,t.comboId))})),this.sortByCombo&&r&&r.forEach((t=>{t.parentId&&(c[t.parentId]||(c[t.parentId]=!0,a.setNode(t.parentId,{})),a.setParent(t.id,t.parentId))})),o.forEach((t=>{const e=zh(t,"source"),n=zh(t,"target");a.setEdge(e,n,{weight:t.weight||1})})),Td().layout(a),a.nodes().forEach((t=>{h=a.node(t);const n=e.findIndex((e=>e.id===t));e[n]&&(e[n].x=h.x,e[n].y=h.y)})),a.edges().forEach((e=>{h=a.edge(e);const n=o.findIndex((t=>{const n=zh(t,"source"),i=zh(t,"target");return n===e.v&&i===e.w}));t.controlPoints&&"loop"!==o[n].type&&(o[n].controlPoints=h.points.slice(1,h.points.length-1))})),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:o}}getType(){return"dagre"}}),Kh("radial",class extends Ph{constructor(t){super(),this.maxIteration=1e3,this.focusNode=null,this.unitRadius=null,this.linkDistance=50,this.preventOverlap=!1,this.strictRadial=!0,this.maxPreventOverlapIteration=200,this.sortStrength=10,this.nodes=[],this.edges=[],this.updateCfg(t)}getDefaultCfg(){return{maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,strictRadial:!0,maxPreventOverlapIteration:200,sortBy:void 0,sortStrength:10}}execute(){const t=this,e=t.nodes,n=t.edges||[];if(!e||0===e.length)return void(t.onLayoutEnd&&t.onLayoutEnd());t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);const i=t.center;if(1===e.length)return e[0].x=i[0],e[0].y=i[1],void(t.onLayoutEnd&&t.onLayoutEnd());const r=t.linkDistance;let o=null;if(Ih(t.focusNode)){let n=!1;for(let i=0;i<e.length;i++)e[i].id===t.focusNode&&(o=e[i],t.focusNode=o,n=!0,i=e.length);n||(o=null)}else o=t.focusNode;o||(o=e[0],t.focusNode=o);const a=function(t,e){let n=-1;return t.forEach(((t,i)=>{t.id===e&&(n=i)})),n}(e,o.id);t.focusIndex=a;const s=Wh({nodes:e,edges:n},!1),l=Gh(s),u=t.maxToFocus(l,a);t.handleInfinity(l,a,u+1),t.distances=l;const c=l[a],h=t.width||500,d=t.height||500;let f=h-i[0]>i[0]?i[0]:h-i[0],p=d-i[1]>i[1]?i[1]:d-i[1];0===f&&(f=h/2),0===p&&(p=d/2);const m=p>f?f:p,g=Math.max(...c),v=[];c.forEach(((e,n)=>{t.unitRadius||(t.unitRadius=m/g),v[n]=e*t.unitRadius})),t.radii=v;const y=t.eIdealDisMatrix();t.eIdealDistances=y;const b=function(t){const e=t.length,n=t[0].length,i=[];for(let r=0;r<e;r++){const e=[];for(let i=0;i<n;i++)0!==t[r][i]?e.push(1/(t[r][i]*t[r][i])):e.push(0);i.push(e)}return i}(y);t.weights=b;let _=new ef({linkDistance:r,distances:y}).layout();_.forEach((t=>{jh(t[0])&&(t[0]=Math.random()*r),jh(t[1])&&(t[1]=Math.random()*r)})),t.positions=_,_.forEach(((t,n)=>{e[n].x=t[0]+i[0],e[n].y=t[1]+i[1]})),_.forEach((t=>{t[0]-=_[a][0],t[1]-=_[a][1]})),t.run();const w=t.preventOverlap,x=t.nodeSize;let M;const E=t.strictRadial;if(w){const n=t.nodeSpacing;let i;i=Yh(n)?()=>n:Xh(n)?n:()=>0,M=x?Rh(x)?t=>(x[0]>x[1]?x[0]:x[1])+i(t):t=>x+i(t):t=>{if(t.size){if(Rh(t.size)){return(t.size[0]>t.size[1]?t.size[0]:t.size[1])+i(t)}if(Fh(t.size)){return(t.size.width>t.size.height?t.size.width:t.size.height)+i(t)}return t.size+i(t)}return 10+i(t)};const r={nodes:e,nodeSizeFunc:M,adjMatrix:s,positions:_,radii:v,height:d,width:h,strictRadial:E,focusID:a,iterations:t.maxPreventOverlapIteration||200,k:_.length/4.5},o=new nf(r);_=o.layout()}return _.forEach(((t,n)=>{e[n].x=t[0]+i[0],e[n].y=t[1]+i[1]})),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:n}}run(){const t=this,e=t.maxIteration,n=t.positions||[],i=t.weights||[],r=t.eIdealDistances||[],o=t.radii||[];for(let a=0;a<=e;a++){const s=a/e;t.oneIteration(s,n,o,r,i)}}oneIteration(t,e,n,i,r){const o=1-t,a=this.focusIndex;e.forEach(((s,l)=>{const u=rf(s,[0,0]),c=0===u?0:1/u;if(l===a)return;let h=0,d=0,f=0;e.forEach(((t,e)=>{if(l===e)return;const n=rf(s,t),o=0===n?0:1/n,a=i[e][l];f+=r[l][e],h+=r[l][e]*(t[0]+a*(s[0]-t[0])*o),d+=r[l][e]*(t[1]+a*(s[1]-t[1])*o)}));const p=0===n[l]?0:1/n[l];f*=o,f+=t*p*p,h*=o,h+=t*p*s[0]*c,s[0]=h/f,d*=o,d+=t*p*s[1]*c,s[1]=d/f}))}eIdealDisMatrix(){const t=this,e=t.nodes;if(!e)return[];const n=t.distances,i=t.linkDistance,r=t.radii||[],o=t.unitRadius||50,a=[];return n&&n.forEach(((n,s)=>{const l=[];n.forEach(((n,a)=>{if(s===a)l.push(0);else if(r[s]===r[a])if("data"===t.sortBy)l.push(n*(Math.abs(s-a)*t.sortStrength)/(r[s]/o));else if(t.sortBy){let i=e[s][t.sortBy]||0,u=e[a][t.sortBy]||0;Ih(i)&&(i=i.charCodeAt(0)),Ih(u)&&(u=u.charCodeAt(0)),l.push(n*(Math.abs(i-u)*t.sortStrength)/(r[s]/o))}else l.push(n*i/(r[s]/o));else{const t=(i+o)/2;l.push(n*t)}})),a.push(l)})),a}handleInfinity(t,e,n){const i=t.length;for(let r=0;r<i;r++)if(t[e][r]===1/0){t[e][r]=n,t[r][e]=n;for(let o=0;o<i;o++)t[r][o]!==1/0&&t[e][o]===1/0&&(t[e][o]=n+t[r][o],t[o][e]=n+t[r][o])}for(let n=0;n<i;n++)if(n!==e)for(let r=0;r<i;r++)if(t[n][r]===1/0){let i=Math.abs(t[e][n]-t[e][r]);i=0===i?1:i,t[n][r]=i}}maxToFocus(t,e){let n=0;for(let i=0;i<t[e].length;i++)t[e][i]!==1/0&&(n=t[e][i]>n?t[e][i]:n);return n}getType(){return"radial"}}),Kh("concentric",class extends Ph{constructor(t){super(),this.nodeSize=30,this.minNodeSpacing=10,this.preventOverlap=!1,this.equidistant=!1,this.startAngle=1.5*Math.PI,this.clockwise=!0,this.sortBy="degree",this.nodes=[],this.edges=[],this.width=300,this.height=300,this.onLayoutEnd=()=>{},this.updateCfg(t)}getDefaultCfg(){return{nodeSize:30,minNodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:1.5*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"}}execute(){const t=this,e=t.nodes,n=t.edges,i=e.length;if(0===i)return void(t.onLayoutEnd&&t.onLayoutEnd());t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);const r=t.center;if(1===i)return e[0].x=r[0],e[0].y=r[1],void(t.onLayoutEnd&&t.onLayoutEnd());const o=[];let a;a=Rh(t.nodeSize)?Math.max(t.nodeSize[0],t.nodeSize[1]):t.nodeSize,e.forEach((t=>{o.push(t);let e=a;Rh(t.size)?e=Math.max(t.size[0],t.size[1]):Yh(t.size)?e=t.size:Fh(t.size)&&(e=Math.max(t.size.width,t.size.height)),a=Math.max(a,e)})),t.clockwise=void 0!==t.counterclockwise?!t.counterclockwise:t.clockwise;const s={},l={};if(o.forEach(((t,e)=>{s[t.id]=t,l[t.id]=e})),!("degree"!==t.sortBy&&Ih(t.sortBy)&&void 0!==o[0][t.sortBy]||(t.sortBy="degree",Yh(e[0].degree)))){const t=Hh(e.length,l,n);o.forEach(((e,n)=>{e.degree=t[n]}))}o.sort(((e,n)=>n[t.sortBy]-e[t.sortBy])),t.maxValueNode=o[0],t.maxLevelDiff=t.maxLevelDiff||t.maxValueNode[t.sortBy]/4;const u=[[]];let c=u[0];o.forEach((e=>{if(c.length>0){const n=Math.abs(c[0][t.sortBy]-e[t.sortBy]);t.maxLevelDiff&&n>=t.maxLevelDiff&&(c=[],u.push(c))}c.push(e)}));let h=a+t.minNodeSpacing;if(!t.preventOverlap){const e=u.length>0&&u[0].length>1,n=(Math.min(t.width,t.height)/2-h)/(u.length+(e?1:0));h=Math.min(h,n)}let d=0;if(u.forEach((e=>{let n=t.sweep;void 0===n&&(n=2*Math.PI-2*Math.PI/e.length);const i=e.dTheta=n/Math.max(1,e.length-1);if(e.length>1&&t.preventOverlap){const t=Math.cos(i)-Math.cos(0),e=Math.sin(i)-Math.sin(0),n=Math.sqrt(h*h/(t*t+e*e));d=Math.max(n,d)}e.r=d,d+=h})),t.equidistant){let t=0,e=0;for(let n=0;n<u.length;n++){const i=u[n].r-e;t=Math.max(t,i)}e=0,u.forEach(((n,i)=>{0===i&&(e=n.r),n.r=e,e+=t}))}return u.forEach((e=>{const n=e.dTheta,i=e.r;e.forEach(((e,o)=>{const a=t.startAngle+(t.clockwise?1:-1)*n*o;e.x=r[0]+i*Math.cos(a),e.y=r[1]+i*Math.sin(a)}))})),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:n}}getType(){return"concentric"}}),Kh("mds",class extends Ph{constructor(t){super(),this.center=[0,0],this.linkDistance=50,this.nodes=[],this.edges=[],this.onLayoutEnd=()=>{},this.updateCfg(t)}getDefaultCfg(){return{center:[0,0],linkDistance:50}}execute(){const t=this,{nodes:e,edges:n=[]}=t,i=t.center;if(!e||0===e.length)return void(t.onLayoutEnd&&t.onLayoutEnd());if(1===e.length)return e[0].x=i[0],e[0].y=i[1],void(t.onLayoutEnd&&t.onLayoutEnd());const r=t.linkDistance,o=Wh({nodes:e,edges:n},!1),a=Gh(o);t.handleInfinity(a);const s=((t,e)=>{const n=[];return t.forEach((t=>{const i=[];t.forEach((t=>{i.push(t*e)})),n.push(i)})),n})(a,r);t.scaledDistances=s;const l=t.runMDS();return t.positions=l,l.forEach(((t,n)=>{e[n].x=t[0]+i[0],e[n].y=t[1]+i[1]})),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:n}}runMDS(){const t=this.scaledDistances,e=Zd.mul(Zd.pow(t,2),-.5),n=e.mean("row"),i=e.mean("column"),r=e.mean();e.add(r).subRowVector(n).subColumnVector(i);const o=new tf(e),a=Zd.sqrt(o.diagonalMatrix).diagonal();return o.leftSingularVectors.toJSON().map((t=>Zd.mul([t],[a]).toJSON()[0].splice(0,2)))}handleInfinity(t){let e=-999999;t.forEach((t=>{t.forEach((t=>{t!==1/0&&e<t&&(e=t)}))})),t.forEach(((n,i)=>{n.forEach(((n,r)=>{n===1/0&&(t[i][r]=e)}))}))}getType(){return"mds"}}),Kh("fruchterman",class extends Ph{constructor(t){super(),this.maxIteration=1e3,this.gravity=10,this.speed=5,this.clustering=!1,this.clusterGravity=10,this.nodes=[],this.edges=[],this.width=300,this.height=300,this.nodeMap={},this.nodeIdxMap={},this.onLayoutEnd=()=>{},this.tick=()=>{},this.updateCfg(t)}getDefaultCfg(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}}execute(){const t=this,e=t.nodes;if(void 0!==t.timeInterval&&"undefined"!=typeof window&&window.clearInterval(t.timeInterval),!e||0===e.length)return void(t.onLayoutEnd&&t.onLayoutEnd());t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);const n=t.center;if(1===e.length)return e[0].x=n[0],e[0].y=n[1],void(t.onLayoutEnd&&t.onLayoutEnd());const i={},r={};return e.forEach(((t,e)=>{Yh(t.x)||(t.x=Math.random()*this.width),Yh(t.y)||(t.y=Math.random()*this.height),i[t.id]=t,r[t.id]=e})),t.nodeMap=i,t.nodeIdxMap=r,t.run()}run(){const t=this,e=t.nodes;if(!e)return;const n=t.edges,i=t.maxIteration,r=t.center,o=t.height*t.width,a=Math.sqrt(o)/10,s=o/(e.length+1),l=Math.sqrt(s),u=t.gravity,c=t.speed,h=t.clustering,d={};if(h){e.forEach((t=>{if(void 0===d[t.cluster]){const e={name:t.cluster,cx:0,cy:0,count:0};d[t.cluster]=e}const e=d[t.cluster];Yh(t.x)&&(e.cx+=t.x),Yh(t.y)&&(e.cy+=t.y),e.count++}));for(const t in d)d[t].cx/=d[t].count,d[t].cy/=d[t].count}if("undefined"==typeof window)return;let f=0;return this.timeInterval=window.setInterval((()=>{if(!e)return;const o=[];if(e.forEach(((t,e)=>{o[e]={x:0,y:0}})),t.applyCalculate(e,n,o,l,s),h){const n=t.clusterGravity||u;e.forEach(((t,e)=>{if(!Yh(t.x)||!Yh(t.y))return;const i=d[t.cluster],r=Math.sqrt((t.x-i.cx)*(t.x-i.cx)+(t.y-i.cy)*(t.y-i.cy)),a=l*n;o[e].x-=a*(t.x-i.cx)/r,o[e].y-=a*(t.y-i.cy)/r}));for(const t in d)d[t].cx=0,d[t].cy=0,d[t].count=0;e.forEach((t=>{const e=d[t.cluster];Yh(t.x)&&(e.cx+=t.x),Yh(t.y)&&(e.cy+=t.y),e.count++}));for(const t in d)d[t].cx/=d[t].count,d[t].cy/=d[t].count}e.forEach(((t,e)=>{if(!Yh(t.x)||!Yh(t.y))return;const n=.01*l*u;o[e].x-=n*(t.x-r[0]),o[e].y-=n*(t.y-r[1])})),e.forEach(((t,e)=>{if(Yh(t.fx)&&Yh(t.fy))return t.x=t.fx,void(t.y=t.fy);if(!Yh(t.x)||!Yh(t.y))return;const n=Math.sqrt(o[e].x*o[e].x+o[e].y*o[e].y);if(n>0){const i=Math.min(a*(c/800),n);t.x+=o[e].x/n*i,t.y+=o[e].y/n*i}})),t.tick&&t.tick(),f++,f>=i&&(t.onLayoutEnd&&t.onLayoutEnd(),window.clearInterval(t.timeInterval))}),0),{nodes:e,edges:n}}applyCalculate(t,e,n,i,r){this.calRepulsive(t,n,r),e&&this.calAttractive(e,n,i)}calRepulsive(t,e,n){t.forEach(((i,r)=>{e[r]={x:0,y:0},t.forEach(((t,o)=>{if(r===o)return;if(!(Yh(i.x)&&Yh(t.x)&&Yh(i.y)&&Yh(t.y)))return;let a=i.x-t.x,s=i.y-t.y,l=a*a+s*s;if(0===l){l=1;const t=r>o?1:-1;a=.01*t,s=.01*t}const u=n/l;e[r].x+=a*u,e[r].y+=s*u}))}))}calAttractive(t,e,n){t.forEach((t=>{const i=zh(t,"source"),r=zh(t,"target");if(!i||!r)return;const o=this.nodeIdxMap[i],a=this.nodeIdxMap[r];if(o===a)return;const s=this.nodeMap[i],l=this.nodeMap[r];if(!(Yh(l.x)&&Yh(s.x)&&Yh(l.y)&&Yh(s.y)))return;const u=l.x-s.x,c=l.y-s.y,h=Math.sqrt(u*u+c*c),d=h*h/n;e[a].x-=u/h*d,e[a].y-=c/h*d,e[o].x+=u/h*d,e[o].y+=c/h*d}))}stop(){this.timeInterval&&"undefined"!=typeof window&&window.clearInterval(this.timeInterval)}destroy(){const t=this;t.stop(),t.tick=null,t.nodes=null,t.edges=null,t.destroyed=!0}getType(){return"fruchterman"}}),Kh("fruchterman-gpu",class extends Ph{constructor(t){super(),this.maxIteration=1e3,this.gravity=10,this.speed=1,this.clustering=!1,this.clusterField="cluster",this.clusterGravity=10,this.workerEnabled=!1,this.nodes=[],this.edges=[],this.width=300,this.height=300,this.nodeMap={},this.nodeIdxMap={},this.updateCfg(t)}getDefaultCfg(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}}execute(){return Wx(this,void 0,void 0,(function*(){const t=this,e=t.nodes;if(!e||0===e.length)return void(t.onLayoutEnd&&t.onLayoutEnd());t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);const n=t.center;if(1===e.length)return e[0].x=n[0],e[0].y=n[1],void(t.onLayoutEnd&&t.onLayoutEnd());const i={},r={};e.forEach(((t,e)=>{Yh(t.x)||(t.x=Math.random()*this.width),Yh(t.y)||(t.y=Math.random()*this.height),i[t.id]=t,r[t.id]=e})),t.nodeMap=i,t.nodeIdxMap=r,yield t.run()}))}executeWithWorker(t,e){return Wx(this,void 0,void 0,(function*(){const n=this,i=n.nodes,r=n.center;if(!i||0===i.length)return;if(1===i.length)return i[0].x=r[0],void(i[0].y=r[1]);const o={},a={};i.forEach(((t,e)=>{Yh(t.x)||(t.x=Math.random()*this.width),Yh(t.y)||(t.y=Math.random()*this.height),o[t.id]=t,a[t.id]=e})),n.nodeMap=o,n.nodeIdxMap=a,yield n.run(t,e)}))}run(t,e){return Wx(this,void 0,void 0,(function*(){const n=this,i=n.nodes,r=n.edges,o=n.maxIteration,a=n.center,s=n.height*n.width;let l=Math.sqrt(s)/10;const u=s/(i.length+1),c=Math.sqrt(u),h=n.speed,d=n.clustering,{array:f,count:p}=((t,e)=>{const n=[],i=t.length,r={};return e.forEach((e=>{t.forEach(((t,o)=>{if(void 0===r[e[t]]&&(r[e[t]]=Object.keys(r).length),n.push(r[e[t]]),o===i-1)for(;n.length%4!=0;)n.push(0)}))})),{array:new Float32Array(n),count:Object.keys(r).length}})([n.clusterField],i);i.forEach(((t,e)=>{let n=0,i=0;Yh(t.fx)&&Yh(t.fy)&&(n=t.fx||.001,i=t.fy||.001),f[4*e+1]=n,f[4*e+2]=i}));const m=i.length,{maxEdgePerVetex:g,array:v}=((t,e)=>{const n=[],i=[],r={};let o=0;for(o=0;o<t.length;o++){const e=t[o];r[e.id]=o,n.push(e.x),n.push(e.y),n.push(0),n.push(0),i.push([])}for(o=0;o<e.length;o++){const t=e[o],n=zh(t,"source"),a=zh(t,"target");i[r[n]].push(r[a]),i[r[a]].push(r[n])}let a=0;for(o=0;o<t.length;o++){const t=n.length,e=i[o],r=e.length;n[4*o+2]=t,n[4*o+3]=e.length,a=Math.max(a,e.length);for(let t=0;t<r;++t){const i=e[t];n.push(+i)}}for(;n.length%4!=0;)n.push(0);return{maxEdgePerVetex:a,array:new Float32Array(n)}})(i,r);let y;y=n.workerEnabled?zx.create({canvas:t,engineOptions:{supportCompute:!0}}):zx.create({engineOptions:{supportCompute:!0}});const b=n.onLayoutEnd,_=[];for(let t=0;t<p;t++)_.push(0,0,0,0);const w=y.createKernel('{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_K : f32;\\n  [[offset 4]] u_K2 : f32;\\n  [[offset 8]] u_Center : vec2<f32>;\\n  [[offset 16]] u_Gravity : f32;\\n  [[offset 20]] u_ClusterGravity : f32;\\n  [[offset 24]] u_Speed : f32;\\n  [[offset 28]] u_MaxDisplace : f32;\\n  [[offset 32]] u_Clustering : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AttributeArray : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_ClusterCenters : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 3, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn calcRepulsive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {if (i != j) {var nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nvar xDist : f32 = currentNode.x - nextNode.x;\\nvar yDist : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nvar param : f32 = gWebGPUUniformParams.u_K2 / dist;\\nif (dist > 0.0) {dx = dx + param * xDist;\\ndy = dy + param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {var sign : f32 = select(1.0, -1.0, i < j);\\ndx = dx + param * std::sign;\\ndy = dy + param * std::sign;}}}}\\nreturn vec2<f32>(dx, dy);}\\nfn calcGravity(currentNode : vec4<f32>, nodeAttributes : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nvar vx : f32 = currentNode.x - gWebGPUUniformParams.u_Center.x;\\nvar vy : f32 = currentNode.y - gWebGPUUniformParams.u_Center.y;\\nvar gf : f32 = (0.01 * gWebGPUUniformParams.u_K) * gWebGPUUniformParams.u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (gWebGPUUniformParams.u_Clustering == 1.0) {var clusterIdx : i32 = i32(nodeAttributes.x);\\nvar center : vec4<f32> = gWebGPUBuffer2.u_ClusterCenters[clusterIdx];\\nvar cvx : f32 = currentNode.x - center.x;\\nvar cvy : f32 = currentNode.y - center.y;\\nvar dist : f32 = std::sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nvar parma : f32 = (gWebGPUUniformParams.u_K * gWebGPUUniformParams.u_ClusterGravity) / dist;\\ndx = dx + parma * cvx;\\ndy = dy + parma * cvy;}\\nreturn vec2<f32>(dx, dy);}\\nfn calcAttractive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nvar arr_offset : i32 = i32(std::floor(currentNode.z + 0.5));\\nvar length : i32 = i32(std::floor(currentNode.w + 0.5));\\nvar node_buffer : vec4<f32>;\\nfor (var p : i32 = 0; p < __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX; p = p + 1) {if (p >= length) {break;}\\nvar arr_idx : i32 = arr_offset + i32(p);\\nvar buf_offset : i32 = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[i32(arr_idx / 4)];}\\nvar float_j : f32 = select(node_buffer.x, select(node_buffer.y, select(node_buffer.z, node_buffer.w, buf_offset == 2), buf_offset == 1), buf_offset == 0);\\nvar nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[i32(float_j)];\\nvar xDist : f32 = currentNode.x - nextNode.x;\\nvar yDist : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = std::sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nvar attractiveF : f32 = dist / gWebGPUUniformParams.u_K;\\nif (dist > 0.0) {dx = dx - xDist * attractiveF;\\ndy = dy - yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {var sign : f32 = select(1.0, -1.0, i < i32(float_j));\\ndx = dx - std::sign * attractiveF;\\ndy = dy - std::sign * attractiveF;}}}\\nreturn vec2<f32>(dx, dy);}\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar currentNode : vec4<f32> = gWebGPUBuffer0.u_Data[i];\\nvar dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nif (i >= __DefineValuePlaceholder__VERTEX_COUNT) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvar nodeAttributes : vec4<f32> = gWebGPUBuffer1.u_AttributeArray[i];\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4<f32>(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w);\\nreturn ;}\\nvar repulsive : vec2<f32> = calcRepulsive(i, currentNode);\\ndx = dx + repulsive.x;\\ndy = dy + repulsive.y;\\nvar attractive : vec2<f32> = calcAttractive(i, currentNode);\\ndx = dx + attractive.x;\\ndy = dy + attractive.y;\\nvar gravity : vec2<f32> = calcGravity(currentNode, nodeAttributes);\\ndx = dx - gravity.x;\\ndy = dy - gravity.y;\\ndx = dx * gWebGPUUniformParams.u_Speed;\\ndy = dy * gWebGPUUniformParams.u_Speed;\\nvar distLength : f32 = std::sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {var limitedDist : f32 = std::min(gWebGPUUniformParams.u_MaxDisplace * gWebGPUUniformParams.u_Speed, distLength);\\ngWebGPUBuffer0.u_Data[i] = vec4<f32>(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w);}\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_K;\\n  float u_K2;\\n  vec2 u_Center;\\n  float u_Gravity;\\n  float u_ClusterGravity;\\n  float u_Speed;\\n  float u_MaxDisplace;\\n  float u_Clustering;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer   GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_AttributeArray[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 3) buffer readonly  GWebGPUBuffer2 {\\n  vec4 u_ClusterCenters[];\\n} gWebGPUBuffer2;\\n\\n\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nvec2 calcRepulsive(int i, vec4 currentNode) {float dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = gWebGPUBuffer0.u_Data[j];\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = gWebGPUUniformParams.u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {float dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - gWebGPUUniformParams.u_Center.x;\\nfloat vy = currentNode.y - gWebGPUUniformParams.u_Center.y;\\nfloat gf = (0.01 * gWebGPUUniformParams.u_K) * gWebGPUUniformParams.u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (gWebGPUUniformParams.u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = gWebGPUBuffer2.u_ClusterCenters[clusterIdx];\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (gWebGPUUniformParams.u_K * gWebGPUUniformParams.u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {float dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[int(arr_idx / 4)];}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = gWebGPUBuffer0.u_Data[int(float_j)];\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / gWebGPUUniformParams.u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {int i = globalInvocationID.x;\\nvec4 currentNode = gWebGPUBuffer0.u_Data[i];\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvec4 nodeAttributes = gWebGPUBuffer1.u_AttributeArray[i];\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w);\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= gWebGPUUniformParams.u_Speed;\\ndy *= gWebGPUUniformParams.u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(gWebGPUUniformParams.u_MaxDisplace * gWebGPUUniformParams.u_Speed, distLength);\\ngWebGPUBuffer0.u_Data[i] = vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w);}}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_K;\\nuniform float u_K2;\\nuniform vec2 u_Center;\\nuniform float u_Gravity;\\nuniform float u_ClusterGravity;\\nuniform float u_Speed;\\nuniform float u_MaxDisplace;\\nuniform float u_Clustering;\\nuniform sampler2D u_AttributeArray;\\nuniform vec2 u_AttributeArraySize;\\nvec4 getDatau_AttributeArray(vec2 address2D) {\\n  return vec4(texture2D(u_AttributeArray, address2D).rgba);\\n}\\nvec4 getDatau_AttributeArray(float address1D) {\\n  return getDatau_AttributeArray(addrTranslation_1Dto2D(address1D, u_AttributeArraySize));\\n}\\nvec4 getDatau_AttributeArray(int address1D) {\\n  return getDatau_AttributeArray(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - u_Center.x;\\nfloat vy = currentNode.y - u_Center.y;\\nfloat gf = (0.01 * u_K) * u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = getDatau_ClusterCenters(clusterIdx);\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (u_K * u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes = getDatau_AttributeArray(i);\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w));\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= u_Speed;\\ndy *= u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(u_MaxDisplace * u_Speed, distLength);\\ngl_FragColor = vec4(vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_K","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_K2","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Center","type":"vec2<f32>","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Gravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterGravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Speed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_MaxDisplace","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Clustering","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AttributeArray","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}').setDispatch([m,1,1]).setBinding({u_Data:v,u_K:c,u_K2:u,u_Gravity:n.gravity,u_ClusterGravity:n.clusterGravity||n.gravity||1,u_Speed:h,u_MaxDisplace:l,u_Clustering:d?1:0,u_Center:a,u_AttributeArray:f,u_ClusterCenters:_,MAX_EDGE_PER_VERTEX:g,VERTEX_COUNT:m});let x;d&&(x=y.createKernel('{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\n\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 0, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributes : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_ClusterCenters : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar center : vec4<f32> = gWebGPUBuffer2.u_ClusterCenters[i];\\nvar sumx : f32 = 0.0;\\nvar sumy : f32 = 0.0;\\nvar count : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {var attributes : vec4<f32> = gWebGPUBuffer1.u_NodeAttributes[j];\\nvar clusterIdx : i32 = i32(attributes.x);\\nvar vertex : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nif (clusterIdx == i) {sumx = sumx + vertex.x;\\nsumy = sumy + vertex.y;\\ncount = count + 1.0;}}\\ngWebGPUBuffer2.u_ClusterCenters[i] = vec4<f32>(sumx / count, sumy / count, count, i);\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\n\\nlayout(std430, set = 0, binding = 0) buffer readonly  GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 1) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_NodeAttributes[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 2) buffer   GWebGPUBuffer2 {\\n  vec4 u_ClusterCenters[];\\n} gWebGPUBuffer2;\\n\\n\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\nvoid main() {int i = globalInvocationID.x;\\nvec4 center = gWebGPUBuffer2.u_ClusterCenters[i];\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = gWebGPUBuffer1.u_NodeAttributes[j];\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = gWebGPUBuffer0.u_Data[j];\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngWebGPUBuffer2.u_ClusterCenters[i] = vec4(sumx / count, sumy / count, count, i);}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributes;\\nuniform vec2 u_NodeAttributesSize;\\nvec4 getDatau_NodeAttributes(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributes, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributes(float address1D) {\\n  return getDatau_NodeAttributes(addrTranslation_1Dto2D(address1D, u_NodeAttributesSize));\\n}\\nvec4 getDatau_NodeAttributes(int address1D) {\\n  return getDatau_NodeAttributes(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 center = getDatau_ClusterCenters(i);\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = getDatau_NodeAttributes(j);\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = getDatau_Data(j);\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngl_FragColor = vec4(vec4(sumx / count, sumy / count, count, i));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"CLUSTER_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributes","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_ClusterCenters","size":[1,1],"length":1},"needPingpong":true}}').setDispatch([p,1,1]).setBinding({u_Data:v,u_NodeAttributes:f,u_ClusterCenters:_,VERTEX_COUNT:m,CLUSTER_COUNT:p}));yield(()=>Wx(this,void 0,void 0,(function*(){for(let t=0;t<o;t++)yield w.execute(),d&&(x.setBinding({u_Data:w}),yield x.execute(),w.setBinding({u_ClusterCenters:x})),w.setBinding({u_MaxDisplace:l*=.99});const n=yield w.getOutput();t?e.postMessage({type:Ed,vertexEdgeData:n}):i.forEach(((t,e)=>{const i=n[4*e],r=n[4*e+1];t.x=i,t.y=r})),b&&b()})))()}))}getType(){return"fruchterman-gpu"}}),Kh("gForce",class extends Ph{constructor(t){super(),this.maxIteration=1e3,this.edgeStrength=200,this.nodeStrength=1e3,this.coulombDisScale=.005,this.damping=.9,this.maxSpeed=1e3,this.minMovement=.5,this.interval=.02,this.factor=1,this.linkDistance=1,this.gravity=10,this.preventOverlap=!0,this.tick=()=>{},this.nodes=[],this.edges=[],this.width=300,this.height=300,this.nodeMap={},this.nodeIdxMap={},this.updateCfg(t)}getDefaultCfg(){return{maxIteration:500,gravity:10,enableTick:!0}}execute(){const t=this,e=t.nodes;if(void 0!==t.timeInterval&&"undefined"!=typeof window&&window.clearInterval(t.timeInterval),!e||0===e.length)return void(t.onLayoutEnd&&t.onLayoutEnd());t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);const n=t.center;if(1===e.length)return e[0].x=n[0],e[0].y=n[1],void(t.onLayoutEnd&&t.onLayoutEnd());const i={},r={};e.forEach(((e,n)=>{Yh(e.x)||(e.x=Math.random()*t.width),Yh(e.y)||(e.y=Math.random()*t.height),i[e.id]=e,r[e.id]=n})),t.nodeMap=i,t.nodeIdxMap=r,t.linkDistance=$h(t.linkDistance,1),t.nodeStrength=$h(t.nodeStrength,1),t.edgeStrength=$h(t.edgeStrength,1);const o=t.nodeSize;let a;if(t.preventOverlap){const e=t.nodeSpacing;let n;n=Yh(e)?()=>e:Xh(e)?e:()=>0,a=o?Rh(o)?t=>(o[0]>o[1]?o[0]:o[1])+n(t):t=>o+n(t):t=>{if(t.size){if(Rh(t.size)){return(t.size[0]>t.size[1]?t.size[0]:t.size[1])+n(t)}if(Fh(t.size)){return(t.size.width>t.size.height?t.size.width:t.size.height)+n(t)}return t.size+n(t)}return 10+n(t)}}t.nodeSize=a;const s=t.edges;t.degrees=Hh(e.length,t.nodeIdxMap,s),t.getMass||(t.getMass=e=>t.degrees[t.nodeIdxMap[e.id]]||1),t.run()}run(){const t=this,e=t.nodes,n=t.edges,i=t.maxIteration;if("undefined"==typeof window)return;let r=0;this.timeInterval=window.setInterval((()=>{const o=[],a=[];if(!e)return;e.forEach(((t,e)=>{o[2*e]=0,o[2*e+1]=0,a[2*e]=0,a[2*e+1]=0})),t.calRepulsive(o,e),n&&t.calAttractive(o,n),t.calGravity(o,e);const s=Math.max(.02,t.interval-.002*r);t.updateVelocity(o,a,s,e);const l=[];e.forEach((t=>{l.push({x:t.x,y:t.y})})),t.updatePosition(a,s,e),t.tick&&t.tick();let u=0;e.forEach(((t,e)=>{const n=t.x-l[e].x,i=t.y-l[e].y;u+=Math.sqrt(n*n+i*i)})),u/=e.length,u<t.minMovement&&(window.clearInterval(t.timeInterval),t.onLayoutEnd&&t.onLayoutEnd()),r++,r>=i&&(t.onLayoutEnd&&t.onLayoutEnd(),window.clearInterval(t.timeInterval))}),0)}calRepulsive(t,e){const n=this,i=n.getMass,r=n.nodeStrength,o=n.factor,a=n.coulombDisScale,s=n.preventOverlap,l=n.nodeSize;e.forEach(((n,u)=>{const c=i?i(n):1;e.forEach(((e,h)=>{if(u>=h)return;const d=n.x-e.x,f=n.y-e.y,p=Math.sqrt(d*d+f*f)+.01,m=(p+.1)*a,g=d/p,v=f/p,y=(r(n)+r(e))/2*o/(m*m),b=i?i(e):1;if(t[2*u]+=g*y,t[2*u+1]+=v*y,t[2*h]-=g*y,t[2*h+1]-=v*y,s&&p<(l(n)+l(e))/2){const i=(r(n)+r(e))/2/(p*p);t[2*u]+=g*i/c,t[2*u+1]+=v*i/c,t[2*h]-=g*i/b,t[2*h+1]-=v*i/b}}))}))}calAttractive(t,e){const n=this,i=n.nodeMap,r=n.nodeIdxMap,o=n.linkDistance,a=n.edgeStrength,s=n.getMass;e.forEach(((e,n)=>{const l=zh(e,"source"),u=zh(e,"target"),c=i[l],h=i[u],d=h.x-c.x,f=h.y-c.y,p=Math.sqrt(d*d+f*f)+.01,m=d/p,g=f/p,v=((o(e)||1)-p)*a(e),y=r[l],b=r[u],_=s?s(c):1,w=s?s(h):1;t[2*y]-=m*v/_,t[2*y+1]-=g*v/_,t[2*b]+=m*v/w,t[2*b+1]+=g*v/w}))}calGravity(t,e){const n=this,i=n.center,r=n.gravity,o=n.degrees,a=e.length;for(let s=0;s<a;s++){const a=e[s];let l=a.x-i[0],u=a.y-i[1],c=r;if(n.getCenter){const t=n.getCenter(a,o[s]);t&&Yh(t[0])&&Yh(t[1])&&Yh(t[2])&&(l=a.x-t[0],u=a.y-t[1],c=t[2])}c&&(t[2*s]-=c*l,t[2*s+1]-=c*u)}}updateVelocity(t,e,n,i){const r=this,o=n*r.damping;i.forEach(((n,i)=>{let a=t[2*i]*o||.01,s=t[2*i+1]*o||.01;const l=Math.sqrt(a*a+s*s);if(l>r.maxSpeed){const t=r.maxSpeed/l;a*=t,s*=t}e[2*i]=a,e[2*i+1]=s}))}updatePosition(t,e,n){n.forEach(((n,i)=>{if(Yh(n.fx)&&Yh(n.fy))return n.x=n.fx,void(n.y=n.fy);const r=t[2*i]*e,o=t[2*i+1]*e;n.x+=r,n.y+=o}))}stop(){this.timeInterval&&"undefined"!=typeof window&&window.clearInterval(this.timeInterval)}destroy(){const t=this;t.stop(),t.tick=null,t.nodes=null,t.edges=null,t.destroyed=!0}getType(){return"gForce"}}),Kh("gForce-gpu",class extends Ph{constructor(t){super(),this.maxIteration=1e3,this.edgeStrength=200,this.nodeStrength=1e3,this.coulombDisScale=.005,this.damping=.9,this.maxSpeed=1e3,this.minMovement=.5,this.interval=.02,this.factor=1,this.linkDistance=1,this.gravity=10,this.workerEnabled=!1,this.nodes=[],this.edges=[],this.width=300,this.height=300,this.nodeMap={},this.nodeIdxMap={},this.updateCfg(t)}getDefaultCfg(){return{maxIteration:2e3,gravity:10,clustering:!1,clusterGravity:10}}execute(){return Ux(this,void 0,void 0,(function*(){const t=this,e=t.nodes;if(!e||0===e.length)return void(t.onLayoutEnd&&t.onLayoutEnd());t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);const n=t.center;if(1===e.length)return e[0].x=n[0],e[0].y=n[1],void(t.onLayoutEnd&&t.onLayoutEnd());const i={},r={};e.forEach(((e,n)=>{Yh(e.x)||(e.x=Math.random()*t.width),Yh(e.y)||(e.y=Math.random()*t.height),i[e.id]=e,r[e.id]=n})),t.nodeMap=i,t.nodeIdxMap=r,t.nodeStrength=Hx(t.nodeStrength,1),t.edgeStrength=Hx(t.edgeStrength,1),yield t.run()}))}executeWithWorker(t,e){const n=this,i=n.nodes,r=n.center;if(!i||0===i.length)return;if(1===i.length)return i[0].x=r[0],void(i[0].y=r[1]);const o={},a={};i.forEach(((t,e)=>{Yh(t.x)||(t.x=Math.random()*n.width),Yh(t.y)||(t.y=Math.random()*n.height),o[t.id]=t,a[t.id]=e})),n.nodeMap=o,n.nodeIdxMap=a,n.nodeStrength=Hx(n.nodeStrength,1),n.edgeStrength=Hx(n.edgeStrength,1),n.run(t,e)}run(t,e){return Ux(this,void 0,void 0,(function*(){const n=this,i=n.nodes,r=n.edges,o=n.maxIteration;n.width||"undefined"==typeof window||(n.width=window.innerWidth),n.height||"undefined"==typeof window||(n.height=window.innerHeight);const a=i.length;n.linkDistance=Hx(n.linkDistance),n.edgeStrength=Hx(n.edgeStrength);const{maxEdgePerVetex:s,array:l}=((t,e,n,i)=>{const r=[],o=[],a={};let s=0;for(s=0;s<t.length;s++){const e=t[s];a[e.id]=s,r.push(e.x),r.push(e.y),r.push(0),r.push(0),o.push([])}for(s=0;s<e.length;s++){const t=e[s],r=zh(t,"source"),l=zh(t,"target");o[a[r]].push(a[l]),o[a[r]].push(n(t)),o[a[r]].push(i(t)),o[a[r]].push(0),o[a[l]].push(a[r]),o[a[l]].push(n(t)),o[a[l]].push(i(t)),o[a[l]].push(0)}let l=0;for(s=0;s<t.length;s++){const t=r.length,e=o[s],n=e.length;r[4*s+2]=t+1048576*n/4,r[4*s+3]=0,l=Math.max(l,n/4);for(let t=0;t<n;++t){const n=e[t];r.push(+n)}}for(;r.length%4!=0;)r.push(0);return{maxEdgePerVetex:l,array:new Float32Array(r)}})(i,r,n.linkDistance,n.edgeStrength);n.degrees=Hh(i.length,n.nodeIdxMap,r);const u=[],c=[],h=[],d=[],f=[],p=[],m=[];n.getMass||(n.getMass=t=>n.degrees[n.nodeIdxMap[t.id]]||1);const g=n.gravity,v=n.center;i.forEach(((t,e)=>{u.push(n.getMass(t)),c.push(n.nodeStrength(t)),n.degrees[e]||(n.degrees[e]=0);let i=[v[0],v[1],g];if(n.getCenter){const r=n.getCenter(t,n.degrees[e]);r&&Yh(r[0])&&Yh(r[1])&&Yh(r[2])&&(i=r)}h.push(i[0]),d.push(i[1]),f.push(i[2]),Yh(t.fx)&&Yh(t.fy)?(p.push(t.fx||.001),m.push(t.fy||.001)):(p.push(0),m.push(0))}));const y=Gx([u,n.degrees,c,p]),b=Gx([h,d,f,m]);let _;_=n.workerEnabled?zx.create({canvas:t,engineOptions:{supportCompute:!0}}):zx.create({engineOptions:{supportCompute:!0}});const w=n.onLayoutEnd,x=[];l.forEach((t=>{x.push(t)}));for(let t=0;t<4;t++)x.push(0);const M=_.createKernel('{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_damping : f32;\\n  [[offset 4]] u_maxSpeed : f32;\\n  [[offset 8]] u_minMovement : f32;\\n  \\n  [[offset 12]] u_coulombDisScale : f32;\\n  [[offset 16]] u_factor : f32;\\n  \\n  \\n  [[offset 20]] u_interval : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AveMovement : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributeArray1 : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 3, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\ntype GWebGPUBuffer3 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributeArray2 : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 4, set 0]] var<storage_buffer> gWebGPUBuffer3 : GWebGPUBuffer3;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn unpack_float(packedValue : f32) -> vec2<i32> {var packedIntValue : i32 = i32(packedValue);\\nvar v0 : i32 = packedIntValue / 1048576;\\nreturn vec2<i32>(v0, packedIntValue - (v0 * 1048576));}\\nfn calcRepulsive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {if (i != j) {var nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nvar vx : f32 = currentNode.x - nextNode.x;\\nvar vy : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.01;\\nvar n_dist : f32 = (dist + 0.1) * gWebGPUUniformParams.u_coulombDisScale;\\nvar direx : f32 = vx / dist;\\nvar direy : f32 = vy / dist;\\nvar attributesi : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvar attributesj : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[j];\\nvar massi : f32 = attributesi.x;\\nvar nodeStrengthi : f32 = attributesi.z;\\nvar nodeStrengthj : f32 = attributesj.z;\\nvar nodeStrength : f32 = (nodeStrengthi + nodeStrengthj) / 2.0;\\nvar param : f32 = (nodeStrength * gWebGPUUniformParams.u_factor) / (n_dist * n_dist);\\nax = ax + direx * param;\\nay = ay + direy * param;}}\\nreturn vec2<f32>(ax, ay);}\\nfn calcGravity(i : i32, currentNode : vec4<f32>, attributes2 : vec4<f32>) -> vec2<f32> {var vx : f32 = currentNode.x - attributes2.x;\\nvar vy : f32 = currentNode.y - attributes2.y;\\nvar ax : f32 = vx * attributes2.z;\\nvar ay : f32 = vy * attributes2.z;\\nreturn vec2<f32>(ax, ay);}\\nfn calcAttractive(i : i32, currentNode : vec4<f32>, attributes1 : vec4<f32>) -> vec2<f32> {var mass : f32 = attributes1.x;\\nvar ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nvar compressed : vec2<i32> = unpack_float(currentNode.z);\\nvar length : i32 = compressed.x;\\nvar arr_offset : i32 = compressed.y;\\nvar node_buffer : vec4<f32>;\\nfor (var p : i32 = 0; p < __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX; p = p + 1) {if (p >= length) {break;}\\nvar arr_idx : i32 = arr_offset + (4 * p);\\nvar buf_offset : i32 = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[i32(arr_idx / 4)];}\\nvar float_j : f32 = node_buffer.x;\\nvar nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[i32(float_j)];\\nvar vx : f32 = nextNode.x - currentNode.x;\\nvar vy : f32 = nextNode.y - currentNode.y;\\nvar dist : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.01;\\nvar direx : f32 = vx / dist;\\nvar direy : f32 = vy / dist;\\nvar edgeLength : f32 = node_buffer.y;\\nvar edgeStrength : f32 = node_buffer.z;\\nvar diff : f32 = edgeLength - dist;\\nvar param : f32 = (diff * edgeStrength) / mass;\\nax = ax - direx * param;\\nay = ay - direy * param;}\\nreturn vec2<f32>(ax, ay);}\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar currentNode : vec4<f32> = gWebGPUBuffer0.u_Data[i];\\nvar movement : vec4<f32> = gWebGPUBuffer1.u_AveMovement[0];\\nvar ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nif ((i >= __DefineValuePlaceholder__VERTEX_COUNT) || (movement.x < gWebGPUUniformParams.u_minMovement)) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvar nodeAttributes1 : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvar nodeAttributes2 : vec4<f32> = gWebGPUBuffer3.u_NodeAttributeArray2[i];\\nvar repulsive : vec2<f32> = calcRepulsive(i, currentNode);\\nax = ax + repulsive.x;\\nay = ay + repulsive.y;\\nvar attractive : vec2<f32> = calcAttractive(i, currentNode, nodeAttributes1);\\nax = ax + attractive.x;\\nay = ay + attractive.y;\\nvar gravity : vec2<f32> = calcGravity(i, currentNode, nodeAttributes2);\\nax = ax - gravity.x;\\nay = ay - gravity.y;\\nvar param : f32 = gWebGPUUniformParams.u_interval * gWebGPUUniformParams.u_damping;\\nvar vx : f32 = ax * param;\\nvar vy : f32 = ay * param;\\nvar vlength : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > gWebGPUUniformParams.u_maxSpeed) {var param2 : f32 = gWebGPUUniformParams.u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nvar distx : f32 = vx * gWebGPUUniformParams.u_interval;\\nvar disty : f32 = vy * gWebGPUUniformParams.u_interval;\\nvar distLength : f32 = std::sqrt((distx * distx) + (disty * disty));\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4<f32>(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0);}else {gWebGPUBuffer0.u_Data[i] = vec4<f32>(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength);}\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_damping;\\n  float u_maxSpeed;\\n  float u_minMovement;\\n  \\n  float u_coulombDisScale;\\n  float u_factor;\\n  \\n  \\n  float u_interval;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer   GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_AveMovement[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 3) buffer readonly  GWebGPUBuffer2 {\\n  vec4 u_NodeAttributeArray1[];\\n} gWebGPUBuffer2;\\n\\nlayout(std430, set = 0, binding = 4) buffer readonly  GWebGPUBuffer3 {\\n  vec4 u_NodeAttributeArray2[];\\n} gWebGPUBuffer3;\\n\\n\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nivec2 unpack_float(float packedValue) {int packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {float ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = gWebGPUBuffer0.u_Data[j];\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * gWebGPUUniformParams.u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvec4 attributesj = gWebGPUBuffer2.u_NodeAttributeArray1[j];\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * gWebGPUUniformParams.u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {float vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {float mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[int(arr_idx / 4)];}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = gWebGPUBuffer0.u_Data[int(float_j)];\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {int i = globalInvocationID.x;\\nvec4 currentNode = gWebGPUBuffer0.u_Data[i];\\nvec4 movement = gWebGPUBuffer1.u_AveMovement[0];\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < gWebGPUUniformParams.u_minMovement)) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvec4 nodeAttributes1 = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvec4 nodeAttributes2 = gWebGPUBuffer3.u_NodeAttributeArray2[i];\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = gWebGPUUniformParams.u_interval * gWebGPUUniformParams.u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > gWebGPUUniformParams.u_maxSpeed) {float param2 = gWebGPUUniformParams.u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nfloat distx = vx * gWebGPUUniformParams.u_interval;\\nfloat disty = vy * gWebGPUUniformParams.u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0);}else {gWebGPUBuffer0.u_Data[i] = vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength);}}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_damping;\\nuniform float u_maxSpeed;\\nuniform float u_minMovement;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nuniform float u_coulombDisScale;\\nuniform float u_factor;\\nuniform sampler2D u_NodeAttributeArray1;\\nuniform vec2 u_NodeAttributeArray1Size;\\nvec4 getDatau_NodeAttributeArray1(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray1, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray1(float address1D) {\\n  return getDatau_NodeAttributeArray1(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray1Size));\\n}\\nvec4 getDatau_NodeAttributeArray1(int address1D) {\\n  return getDatau_NodeAttributeArray1(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributeArray2;\\nuniform vec2 u_NodeAttributeArray2Size;\\nvec4 getDatau_NodeAttributeArray2(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray2, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray2(float address1D) {\\n  return getDatau_NodeAttributeArray2(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray2Size));\\n}\\nvec4 getDatau_NodeAttributeArray2(int address1D) {\\n  return getDatau_NodeAttributeArray2(float(address1D));\\n}\\nuniform float u_interval;\\nivec2 unpack_float(float packedValue) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = getDatau_NodeAttributeArray1(i);\\nvec4 attributesj = getDatau_NodeAttributeArray1(j);\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nvec4 movement = getDatau_AveMovement(0.0);\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < u_minMovement)) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes1 = getDatau_NodeAttributeArray1(i);\\nvec4 nodeAttributes2 = getDatau_NodeAttributeArray2(i);\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = u_interval * u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > u_maxSpeed) {float param2 = u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nfloat distx = vx * u_interval;\\nfloat disty = vy * u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0));}else {gl_FragColor = vec4(vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"SHIFT_20","type":"Float","value":1048576,"runtime":false}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_damping","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_maxSpeed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_minMovement","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_coulombDisScale","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_factor","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray1","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray2","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_interval","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}').setDispatch([a,1,1]).setBinding({u_Data:l,u_damping:n.damping,u_maxSpeed:n.maxSpeed,u_minMovement:n.minMovement,u_coulombDisScale:n.coulombDisScale,u_factor:n.factor,u_NodeAttributeArray1:y,u_NodeAttributeArray2:b,MAX_EDGE_PER_VERTEX:s,VERTEX_COUNT:a,u_AveMovement:x,u_interval:n.interval}),E=_.createKernel('{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_iter : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AveMovement : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\n\\n\\n\\n\\n\\n\\n\\n\\nfn main() -> void {var movement : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {var vertex : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nmovement = movement + vertex.w;}\\nmovement = movement / f32(__DefineValuePlaceholder__VERTEX_COUNT);\\ngWebGPUBuffer1.u_AveMovement[0] = vec4<f32>(movement, 0.0, 0.0, 0.0);\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_iter;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer readonly  GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer   GWebGPUBuffer1 {\\n  vec4 u_AveMovement[];\\n} gWebGPUBuffer1;\\n\\n\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\nvoid main() {float movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = gWebGPUBuffer0.u_Data[j];\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngWebGPUBuffer1.u_AveMovement[0] = vec4(movement, 0.0, 0.0, 0.0);}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_iter;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = getDatau_Data(j);\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngl_FragColor = vec4(vec4(movement, 0.0, 0.0, 0.0));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_iter","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_AveMovement","size":[1,1],"length":1},"needPingpong":true}}').setDispatch([1,1,1]).setBinding({u_Data:l,VERTEX_COUNT:a,u_AveMovement:[0,0,0,0]});yield(()=>Ux(this,void 0,void 0,(function*(){for(let t=0;t<o;t++){yield M.execute(),E.setBinding({u_Data:M}),yield E.execute();const e=Math.max(.02,n.interval-.002*t);M.setBinding({u_interval:e,u_AveMovement:E})}const r=yield M.getOutput();t?e.postMessage({type:Ed,vertexEdgeData:r}):i.forEach(((t,e)=>{const n=r[4*e],i=r[4*e+1];t.x=n,t.y=i})),w&&w()})))()}))}getType(){return"gForce-gpu"}}),Kh("comboForce",class extends Ph{constructor(t){super(),this.center=[0,0],this.maxIteration=100,this.gravity=10,this.comboGravity=10,this.linkDistance=10,this.alpha=1,this.alphaMin=.001,this.alphaDecay=1-Math.pow(this.alphaMin,1/300),this.alphaTarget=0,this.velocityDecay=.6,this.edgeStrength=.6,this.nodeStrength=30,this.preventOverlap=!1,this.preventNodeOverlap=!1,this.preventComboOverlap=!1,this.collideStrength=void 0,this.nodeCollideStrength=.5,this.comboCollideStrength=.5,this.comboSpacing=20,this.comboPadding=10,this.optimizeRangeFactor=1,this.onTick=()=>{},this.onLayoutEnd=()=>{},this.depthAttractiveForceScale=1,this.depthRepulsiveForceScale=2,this.nodes=[],this.edges=[],this.combos=[],this.comboTrees=[],this.width=300,this.height=300,this.bias=[],this.nodeMap={},this.oriComboMap={},this.indexMap={},this.comboMap={},this.previousLayouted=!1,this.updateCfg(t)}getDefaultCfg(){return{maxIteration:100,center:[0,0],gravity:10,speed:1,comboGravity:30,preventOverlap:!1,preventComboOverlap:!0,preventNodeOverlap:!0,nodeSpacing:void 0,collideStrength:void 0,nodeCollideStrength:.5,comboCollideStrength:.5,comboSpacing:20,comboPadding:10,edgeStrength:.6,nodeStrength:30,linkDistance:10}}execute(){const t=this,e=t.nodes,n=t.center;if(t.comboTree={id:"comboTreeRoot",depth:-1,children:t.comboTrees},e&&0!==e.length){if(1===e.length)return e[0].x=n[0],e[0].y=n[1],void(t.onLayoutEnd&&t.onLayoutEnd());t.initVals(),t.run(),t.onLayoutEnd&&t.onLayoutEnd()}else t.onLayoutEnd&&t.onLayoutEnd()}run(){const t=this,e=t.nodes,n=t.previousLayouted?t.maxIteration/5:t.maxIteration;t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight);const i=t.center,r=t.velocityDecay,o=t.comboMap;t.previousLayouted||t.initPos(o);for(let i=0;i<n;i++){const n=[];e.forEach(((t,e)=>{n[e]={x:0,y:0}})),t.applyCalculate(n),t.applyComboCenterForce(n),e.forEach(((t,e)=>{Yh(t.x)&&Yh(t.y)&&(t.x+=n[e].x*r,t.y+=n[e].y*r)})),t.alpha+=(t.alphaTarget-t.alpha)*t.alphaDecay,t.onTick()}const a=[0,0];e.forEach((t=>{Yh(t.x)&&Yh(t.y)&&(a[0]+=t.x,a[1]+=t.y)})),a[0]/=e.length,a[1]/=e.length;const s=[i[0]-a[0],i[1]-a[1]];e.forEach(((t,e)=>{Yh(t.x)&&Yh(t.y)&&(t.x+=s[0],t.y+=s[1])})),t.combos.forEach((t=>{const e=o[t.id];e&&e.empty&&(t.x=e.cx||t.x,t.y=e.cy||t.y)})),t.previousLayouted=!0}initVals(){const t=this,e=t.edges,n=t.nodes,i=t.combos,r={},o={},a={};n.forEach(((t,e)=>{o[t.id]=t,a[t.id]=e})),t.nodeMap=o,t.indexMap=a;const s={};i.forEach((t=>{s[t.id]=t})),t.oriComboMap=s,t.comboMap=t.getComboMap();const l=t.preventOverlap;t.preventComboOverlap=t.preventComboOverlap||l,t.preventNodeOverlap=t.preventNodeOverlap||l;const u=t.collideStrength;u&&(t.comboCollideStrength=u,t.nodeCollideStrength=u),t.comboCollideStrength=t.comboCollideStrength?t.comboCollideStrength:0,t.nodeCollideStrength=t.nodeCollideStrength?t.nodeCollideStrength:0;for(let t=0;t<e.length;++t){const n=zh(e[t],"source"),i=zh(e[t],"target");r[n]?r[n]++:r[n]=1,r[i]?r[i]++:r[i]=1}const c=[];for(let t=0;t<e.length;++t){const n=zh(e[t],"source"),i=zh(e[t],"target");c[t]=r[n]/(r[n]+r[i])}this.bias=c;const h=t.nodeSize,d=t.nodeSpacing;let f,p;if(p=Yh(d)?()=>d:Xh(d)?d:()=>0,this.nodeSpacing=p,h)if(Xh(h))f=t=>h(t);else if(Rh(h)){const t=(h[0]>h[1]?h[0]:h[1])/2;f=e=>t}else{const t=h/2;f=e=>t}else f=t=>{if(t.size){if(Rh(t.size)){return(t.size[0]>t.size[1]?t.size[0]:t.size[1])/2}if(Fh(t.size)){return(t.size.width>t.size.height?t.size.width:t.size.height)/2}return t.size/2}return 10};this.nodeSize=f;const m=t.comboSpacing;let g;g=Yh(m)?()=>m:Xh(m)?m:()=>0,this.comboSpacing=g;const v=t.comboPadding;let y;y=Yh(v)?()=>v:Rh(v)?()=>Math.max.apply(null,v):Xh(v)?v:()=>0,this.comboPadding=y;let b,_=this.linkDistance;_||(_=10),b=Yh(_)?t=>_:_,this.linkDistance=b;let w,x=this.edgeStrength;x||(x=1),w=Yh(x)?t=>x:x,this.edgeStrength=w;let M,E=this.nodeStrength;E||(E=30),M=Yh(E)?t=>E:E,this.nodeStrength=M}initPos(t){this.nodes.forEach(((e,n)=>{const i=e.comboId,r=t[i];i&&r?(e.x=r.cx+100/(n+1),e.y=r.cy+100/(n+1)):(e.x=100/(n+1),e.y=100/(n+1))}))}getComboMap(){const t=this,e=t.nodeMap,n=t.indexMap,i=t.comboTrees,r=t.oriComboMap,o={};return(i||[]).forEach((i=>{const a=[];Vh(i,(i=>{if("node"===i.itemType)return!0;if(!r[i.id])return!0;if(void 0===o[i.id]){const e={id:i.id,name:i.id,cx:0,cy:0,count:0,depth:t.oriComboMap[i.id].depth||0,children:[]};o[i.id]=e}const s=i.children;s&&s.forEach((t=>{if(!o[t.id]&&!e[t.id])return!0;a.push(t)}));const l=o[i.id];if(l.cx=0,l.cy=0,0===a.length){l.empty=!0;const o=r[i.id],s=Object.keys(e).length,u=`${i.id}-visual-child-${s}`,c={id:u,x:o.x,y:o.y,depth:l.depth+1,itemType:"node"};t.nodes.push(c),e[u]=c,n[u]=s,l.cx=o.x,l.cy=o.y,a.push(c)}return a.forEach((t=>{if(l.count++,"node"!==t.itemType){const e=o[t.id];return Yh(e.cx)&&(l.cx+=e.cx),void(Yh(e.cy)&&(l.cy+=e.cy))}const n=e[t.id];n&&(Yh(n.x)&&(l.cx+=n.x),Yh(n.y)&&(l.cy+=n.y))})),l.cx/=l.count,l.cy/=l.count,l.children=a,!0}))})),o}applyComboCenterForce(t){const e=this,n=e.gravity,i=e.comboGravity||n,r=this.alpha,o=e.comboTrees,a=e.indexMap,s=e.nodeMap,l=e.comboMap;(o||[]).forEach((e=>{Vh(e,(e=>{if("node"===e.itemType)return!0;if(!l[e.id])return!0;const n=l[e.id],o=(n.depth+1)/10*.5,u=n.cx,c=n.cy;return n.cx=0,n.cy=0,n.children.forEach((e=>{if("node"!==e.itemType){const t=l[e.id];return t&&Yh(t.cx)&&(n.cx+=t.cx),void(t&&Yh(t.cy)&&(n.cy+=t.cy))}const h=s[e.id],d=h.x-u||.005,f=h.y-c||.005,p=Math.sqrt(d*d+f*f),m=a[h.id],g=i*r/p*o;t[m].x-=d*g,t[m].y-=f*g,Yh(h.x)&&(n.cx+=h.x),Yh(h.y)&&(n.cy+=h.y)})),n.cx/=n.count,n.cy/=n.count,!0}))}))}applyCalculate(t){const e=this,n=e.comboMap,i=e.nodes,r={};i.forEach(((t,e)=>{i.forEach(((n,i)=>{if(e<i)return;const o=t.x-n.x||.005,a=t.y-n.y||.005;let s=o*o+a*a;const l=Math.sqrt(s);s<1&&(s=l),r[`${t.id}-${n.id}`]={vx:o,vy:a,vl2:s,vl:l},r[`${n.id}-${t.id}`]={vl2:s,vl:l,vx:-o,vy:-a}}))})),e.updateComboSizes(n),e.calRepulsive(t,r),e.calAttractive(t,r);e.preventComboOverlap&&e.comboNonOverlapping(t,n)}updateComboSizes(t){const e=this,n=e.comboTrees,i=e.nodeMap,r=e.nodeSize,o=e.comboSpacing,a=e.comboPadding;(n||[]).forEach((n=>{const s=[];Vh(n,(n=>{if("node"===n.itemType)return!0;const l=t[n.id];if(!l)return!1;const u=n.children;u&&u.forEach((e=>{(t[e.id]||i[e.id])&&s.push(e)})),l.minX=1/0,l.minY=1/0,l.maxX=-1/0,l.maxY=-1/0,s.forEach((t=>{if("node"!==t.itemType)return!0;const e=i[t.id];if(!e)return!0;const n=r(e),o=e.x-n,a=e.y-n,s=e.x+n,u=e.y+n;l.minX>o&&(l.minX=o),l.minY>a&&(l.minY=a),l.maxX<s&&(l.maxX=s),l.maxY<u&&(l.maxY=u)}));let c=e.oriComboMap[n.id].size||10;Rh(c)&&(c=c[0]);const h=Math.max(l.maxX-l.minX,l.maxY-l.minY,c);return l.r=h/2+o(l)/2+a(l),!0}))}))}comboNonOverlapping(t,e){const n=this,i=n.comboTree,r=n.comboCollideStrength,o=n.indexMap,a=n.nodeMap;Vh(i,(n=>{if(!e[n.id]&&!a[n.id]&&"comboTreeRoot"!==n.id)return!1;const i=n.children;return i&&i.length>1&&i.forEach(((n,s)=>{if("node"===n.itemType)return!1;const l=e[n.id];l&&i.forEach(((i,u)=>{if(s<=u)return!1;if("node"===i.itemType)return!1;const c=e[i.id];if(!c)return!1;const h=l.cx-c.cx||.005,d=l.cy-c.cy||.005,f=h*h+d*d,p=l.r||1,m=c.r||1,g=p+m,v=m*m,y=p*p;if(f<g*g){const e=n.children;if(!e||0===e.length)return!1;const s=i.children;if(!s||0===s.length)return!1;const l=Math.sqrt(f),u=(g-l)/l*r,c=h*u,p=d*u,m=v/(y+v),b=1-m;e.forEach((e=>{if("node"!==e.itemType)return!1;if(!a[e.id])return;const n=o[e.id];s.forEach((e=>{if("node"!==e.itemType)return!1;if(!a[e.id])return!1;const i=o[e.id];t[n].x+=c*m,t[n].y+=p*m,t[i].x-=c*b,t[i].y-=p*b}))}))}}))})),!0}))}calRepulsive(t,e){const n=this,i=n.nodes,r=n.width*n.optimizeRangeFactor,o=n.nodeStrength,a=n.alpha,s=n.nodeCollideStrength,l=n.preventNodeOverlap,u=n.nodeSize,c=n.nodeSpacing,h=n.depthRepulsiveForceScale,d=n.center;i.forEach(((f,p)=>{if(f.x&&f.y){if(d){const e=n.gravity,i=f.x-d[0]||.005,r=f.y-d[1]||.005,o=Math.sqrt(i*i+r*r);t[p].x-=i*e*a/o,t[p].y-=r*e*a/o}i.forEach(((n,i)=>{if(p===i)return;if(!n.x||!n.y)return;const{vl2:d,vl:m}=e[`${f.id}-${n.id}`];if(m>r)return;const{vx:g,vy:v}=e[`${f.id}-${n.id}`];let y=Math.log(Math.abs(n.depth-f.depth)/10)+1||1;y=y<1?1:y,n.comboId!==f.comboId&&(y+=1);const b=y?Math.pow(h,y):1,_=o(n)*a/d*b;if(t[p].x+=g*_,t[p].y+=v*_,p<i&&l){const e=u(f)+c(f)||1,r=u(n)+c(n)||1,o=e+r;if(d<o*o){const n=(o-m)/m*s,a=r*r;let l=a/(e*e+a);const u=g*n,c=v*n;t[p].x+=u*l,t[p].y+=c*l,l=1-l,t[i].x-=u*l,t[i].y-=c*l}}}))}}))}calAttractive(t,e){const n=this,i=n.edges,r=n.linkDistance,o=n.alpha,a=n.edgeStrength,s=n.bias,l=n.depthAttractiveForceScale;i.forEach(((i,u)=>{const c=zh(i,"source"),h=zh(i,"target");if(!c||!h||c===h)return;const d=n.indexMap[c],f=n.indexMap[h],p=n.nodeMap[c],m=n.nodeMap[h];if(!p||!m)return;let g=p.depth===m.depth?0:Math.log(Math.abs(p.depth-m.depth)/10);p.comboId===m.comboId&&(g/=2);let v=g?Math.pow(l,g):1;if(p.comboId!==m.comboId&&1===v?v=l/2:p.comboId===m.comboId&&(v=2),!(Yh(m.x)&&Yh(p.x)&&Yh(m.y)&&Yh(p.y)))return;const{vl:y,vx:b,vy:_}=e[`${h}-${c}`],w=(y-r(i))/y*o*a(i)*v,x=b*w,M=_*w,E=s[u];t[f].x-=x*E,t[f].y-=M*E,t[d].x+=x*(1-E),t[d].y+=M*(1-E)}))}getType(){return"comboForce"}}),Kh("forceAtlas2",class extends Ph{constructor(t){super(),this.center=[0,0],this.width=300,this.height=300,this.nodes=[],this.edges=[],this.kr=5,this.kg=1,this.mode="normal",this.preventOverlap=!1,this.dissuadeHubs=!1,this.barnesHut=void 0,this.maxIteration=0,this.ks=.1,this.ksmax=10,this.tao=.1,this.onLayoutEnd=()=>{},this.prune=void 0,this.updateCfg(t)}getDefaultCfg(){return{}}execute(){const t=this,{nodes:e,onLayoutEnd:n,prune:i}=t;let r=t.maxIteration;t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight);const o=[],a=e.length;for(let n=0;n<a;n+=1){const i=e[n];let r=10,a=10;Yh(i.size)&&(r=i.size,a=i.size),Rh(i.size)?(isNaN(i.size[0])||(r=i.size[0]),isNaN(i.size[1])||(a=i.size[1])):Fh(i.size)&&(r=i.size.width,a=i.size.height),t.getWidth&&!isNaN(t.getWidth(i))&&(a=t.getWidth(i)),t.getHeight&&!isNaN(t.getHeight(i))&&(r=t.getHeight(i));const s=Math.max(r,a);o.push(s)}void 0===t.barnesHut&&a>250&&(t.barnesHut=!0),void 0===t.prune&&a>100&&(t.prune=!0),0!==this.maxIteration||t.prune?0===this.maxIteration&&i&&(r=100,a<=200&&a>100?r=500:a>200&&(r=950),this.maxIteration=r):(r=250,a<=200&&a>100?r=1e3:a>200&&(r=1200),this.maxIteration=r),t.kr||(t.kr=50,a>100&&a<=500?t.kr=20:a>500&&(t.kr=1)),t.kg||(t.kg=20,a>100&&a<=500?t.kg=10:a>500&&(t.kg=1)),this.nodes=t.updateNodesByForces(o),n()}updateNodesByForces(t){const e=this,{edges:n,maxIteration:i}=e;let r=e.nodes;const o=n.filter((t=>zh(t,"source")!==zh(t,"target"))),a=r.length,s=o.length,l=[],u={},c={},h=[];for(let t=0;t<a;t+=1)u[r[t].id]=t,l[t]=0,(void 0===r[t].x||isNaN(r[t].x))&&(r[t].x=1e3*Math.random()),(void 0===r[t].y||isNaN(r[t].y))&&(r[t].y=1e3*Math.random()),h.push({x:r[t].x,y:r[t].y});for(let t=0;t<s;t+=1){let e,n,i=0,s=0;for(let l=0;l<a;l+=1){const a=zh(o[t],"source"),u=zh(o[t],"target");r[l].id===a?(e=r[l],i=l):r[l].id===u&&(n=r[l],s=l),c[t]={sourceIdx:i,targetIdx:s}}e&&(l[u[e.id]]+=1),n&&(l[u[n.id]]+=1)}let d=i;if(r=this.iterate(d,u,c,s,l,t),e.prune){for(let t=0;t<s;t+=1)l[c[t].sourceIdx]<=1?(r[c[t].sourceIdx].x=r[c[t].targetIdx].x,r[c[t].sourceIdx].y=r[c[t].targetIdx].y):l[c[t].targetIdx]<=1&&(r[c[t].targetIdx].x=r[c[t].sourceIdx].x,r[c[t].targetIdx].y=r[c[t].sourceIdx].y);e.prune=!1,e.barnesHut=!1,d=100,r=this.iterate(d,u,c,s,l,t)}return r}iterate(t,e,n,i,r,o){const a=this;let{nodes:s}=a;const{kr:l,preventOverlap:u}=a,{barnesHut:c}=a,h=s.length;let d=0;let f=t;let p=[];const m=[],g=[];for(let t=0;t<h;t+=1)if(p[2*t]=0,p[2*t+1]=0,c){const e={id:t,rx:s[t].x,ry:s[t].y,mass:1,g:l,degree:r[t]};g[t]=new Vx(e)}for(;f>0;){for(let t=0;t<h;t+=1)m[2*t]=p[2*t],m[2*t+1]=p[2*t+1],p[2*t]=0,p[2*t+1]=0;p=this.getAttrForces(f,50,i,e,n,r,o,p),p=c&&(u&&f>50||!u)?this.getOptRepGraForces(p,g,r):this.getRepGraForces(f,50,p,100,o,r);const t=this.updatePos(p,m,d,r);s=t.nodes,d=t.sg,f--,a.tick&&a.tick()}return s}getAttrForces(t,e,n,i,r,o,a,s){const{nodes:l,preventOverlap:u,dissuadeHubs:c,mode:h,prune:d}=this;for(let f=0;f<n;f+=1){const n=l[r[f].sourceIdx],p=r[f].sourceIdx,m=l[r[f].targetIdx],g=r[f].targetIdx;if(d&&(o[p]<=1||o[g]<=1))continue;const v=[m.x-n.x,m.y-n.y];let y=Math.hypot(v[0],v[1]);y=y<1e-4?1e-4:y,v[0]=v[0]/y,v[1]=v[1]/y,u&&t<e&&(y=y-a[p]-a[g]);let b=y,_=b;"linlog"===h&&(b=Math.log(1+y),_=b),c&&(b=y/o[p],_=y/o[g]),u&&t<e&&y<=0?(b=0,_=0):u&&t<e&&y>0&&(b=y,_=y),s[2*i[n.id]]+=b*v[0],s[2*i[m.id]]-=_*v[0],s[2*i[n.id]+1]+=b*v[1],s[2*i[m.id]+1]-=_*v[1]}return s}getRepGraForces(t,e,n,i,r,o){const{nodes:a,preventOverlap:s,kr:l,kg:u,center:c,prune:h}=this,d=a.length;for(let f=0;f<d;f+=1){for(let u=f+1;u<d;u+=1){if(h&&(o[f]<=1||o[u]<=1))continue;const c=[a[u].x-a[f].x,a[u].y-a[f].y];let d=Math.hypot(c[0],c[1]);d=d<1e-4?1e-4:d,c[0]=c[0]/d,c[1]=c[1]/d,s&&t<e&&(d=d-r[f]-r[u]);let p=l*(o[f]+1)*(o[u]+1)/d;s&&t<e&&d<0?p=i*(o[f]+1)*(o[u]+1):s&&t<e&&0===d?p=0:s&&t<e&&d>0&&(p=l*(o[f]+1)*(o[u]+1)/d),n[2*f]-=p*c[0],n[2*u]+=p*c[0],n[2*f+1]-=p*c[1],n[2*u+1]+=p*c[1]}const p=[a[f].x-c[0],a[f].y-c[1]],m=Math.hypot(p[0],p[1]);p[0]=p[0]/m,p[1]=p[1]/m;const g=u*(o[f]+1);n[2*f]-=g*p[0],n[2*f+1]-=g*p[1]}return n}getOptRepGraForces(t,e,n){const{nodes:i,kg:r,center:o,prune:a}=this,s=i.length;let l=9e10,u=-9e10,c=9e10,h=-9e10;for(let t=0;t<s;t+=1)a&&n[t]<=1||(e[t].setPos(i[t].x,i[t].y),i[t].x>=u&&(u=i[t].x),i[t].x<=l&&(l=i[t].x),i[t].y>=h&&(h=i[t].y),i[t].y<=c&&(c=i[t].y));const d=Math.max(u-l,h-c),f=new Xx({xmid:(u+l)/2,ymid:(h+c)/2,length:d,massCenter:o,mass:s}),p=new qx(f);for(let t=0;t<s;t+=1)a&&n[t]<=1||e[t].in(f)&&p.insert(e[t]);for(let l=0;l<s;l+=1){if(a&&n[l]<=1)continue;e[l].resetForce(),p.updateForce(e[l]),t[2*l]-=e[l].fx,t[2*l+1]-=e[l].fy;const s=[i[l].x-o[0],i[l].y-o[1]];let u=Math.hypot(s[0],s[1]);u=u<1e-4?1e-4:u,s[0]=s[0]/u,s[1]=s[1]/u;const c=r*(n[l]+1);t[2*l]-=c*s[0],t[2*l+1]-=c*s[1]}return t}updatePos(t,e,n,i){const{nodes:r,ks:o,tao:a,prune:s,ksmax:l}=this,u=r.length,c=[],h=[];let d=0,f=0;for(let n=0;n<u;n+=1){if(s&&i[n]<=1)continue;const r=[t[2*n]-e[2*n],t[2*n+1]-e[2*n+1]],o=Math.hypot(r[0],r[1]),a=[t[2*n]+e[2*n],t[2*n+1]+e[2*n+1]],l=Math.hypot(a[0],a[1]);c[n]=o,h[n]=l/2,d+=(i[n]+1)*c[n],f+=(i[n]+1)*h[n]}const p=n;n=a*f/d,0!==p&&(n=n>1.5*p?1.5*p:n);for(let e=0;e<u;e+=1){if(s&&i[e]<=1)continue;let a=o*n/(1+n*Math.sqrt(c[e])),u=Math.hypot(t[2*e],t[2*e+1]);u=u<1e-4?1e-4:u;const h=l/u;a=a>h?h:a;const d=a*t[2*e],f=a*t[2*e+1];r[e].x+=d,r[e].y+=f}return{nodes:r,sg:n}}});var hM=function(t,e){e.isCustomLayout=!0,Kh(t,e)};const dM=function(t,e){var n=t.toString(),i=new Blob(["importScripts('"+e+"');("+n+")()"],{type:"text/javascript"});return new Worker(URL.createObjectURL(i))};var fM=function(t){void 0===t&&(t="https://unpkg.com/@antv/layout@latest/dist/layout.min.js");var e=new dM((function(){var t="LAYOUT_RUN",e="LAYOUT_END",n="LAYOUT_ERROR",i="GPU_LAYOUT_RUN";layout.registerLayout("grid",layout.GridLayout),layout.registerLayout("random",layout.RandomLayout),layout.registerLayout("force",layout.ForceLayout),layout.registerLayout("circular",layout.CircularLayout),layout.registerLayout("dagre",layout.DagreLayout),layout.registerLayout("radial",layout.RadialLayout),layout.registerLayout("concentric",layout.ConcentricLayout),layout.registerLayout("mds",layout.MDSLayout),layout.registerLayout("fruchterman",layout.FruchtermanLayout),layout.registerLayout("fruchterman-gpu",layout.FruchtermanGPULayout),layout.registerLayout("gForce",layout.GForceLayout),layout.registerLayout("gForce-gpu",layout.GForceGPULayout),layout.registerLayout("comboForce",layout.ComboForceLayout),layout.registerLayout("forceAtlas2",layout.ForceAtlas2Layout),onmessage=function(r){(function(e){var n=e.data.type;return n===t||n===i})(r)&&function(r){var o=this;switch(r.data.type){case t:var a,s=r.data,l=s.nodes,u=s.edges,c=s.layoutCfg,h=(g=void 0===c?{}:c).type;if(!(d=layout.getLayoutByName(h))){this.postMessage({type:n,message:"layout "+h+" not found"});break}g.onLayoutEnd=function(){o.postMessage({type:e,nodes:l}),null==a||a.destroy()},(a=new d(g)).init({nodes:l,edges:u}),a.execute();break;case i:var d,f=r.data,p=f.nodes,m=(u=f.edges,f.layoutCfg),g=void 0===m?{}:m,v=f.canvas;if(h=g.type,!(d=layout.getLayoutByName(h))){this.postMessage({type:n,message:"layout "+h+" not found"});break}if("gpu"!==h.split("-")[1]){this.postMessage({type:n,message:"layout "+h+" does not support GPU"});break}var y=new d(g);y.init({nodes:p,edges:u}),y.executeWithWorker(v,this)}}(r)}}),t);return e},pM="LAYOUT_RUN",mM="LAYOUT_END",gM="LAYOUT_ERROR",vM="LAYOUT_TICK",yM="GPU_LAYOUT_RUN",bM="GPU_LAYOUT_END";function _M(t){return _M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_M(t)}var wM=function(t){return setTimeout(t,16)},xM=function(t){return clearTimeout(t)},MM=function(t){return("undefined"!=typeof window&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame)||wM)(t)},EM=function(t){return("undefined"!=typeof window&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame)||xM)(t)},SM=["fruchterman","gForce"],kM=["force","grid","circular"],CM=function(t){function e(e){var n=t.call(this,e)||this;return n.graph=e,n.layoutCfg=e.get("layout")||{},n.layoutType=n.getLayoutType(),n.worker=null,n.workerData={},n.initLayout(),n}return(0,y.__extends)(e,t),e.prototype.initLayout=function(){},e.prototype.getWorker=function(){return this.worker||("undefined"==typeof Worker?(console.warn("Web worker is not supported in current browser."),this.worker=null):this.worker=fM(this.layoutCfg.workerScriptURL)),this.worker},e.prototype.stopWorker=function(){var t=this.workerData;this.worker&&(this.worker.terminate(),this.worker=null,t.requestId&&(EM(t.requestId),t.requestId=null),t.requestId2&&(EM(t.requestId2),t.requestId2=null))},e.prototype.execLayoutMethod=function(t,e){var n=this;return new Promise((function(i,r){return(0,y.__awaiter)(n,void 0,void 0,(function(){var n,o,a,s,l,u,c;return(0,y.__generator)(this,(function(h){switch(h.label){case 0:if((n=this.graph).get("destroyed"))return[2];o=t.type,t.onLayoutEnd=function(){n.emit("aftersublayout",{type:o}),i()},o&&this.isGPU&&(this.hasGPUVersion(o)?o+="-gpu":console.warn("The '"+o+"' layout does not support GPU calculation for now, it will run in CPU.")),"force"===o||"g6force"===o||"gForce"===o?(a=t.onTick,u=function(){a&&a(),n.refreshPositions()},t.tick=u):"comboForce"===t.type&&(t.comboTrees=n.get("comboTrees")),!1;try{s=new Kx[o](t)}catch(t){console.warn("The layout method: '"+o+"' does not exist! Please specify it first."),r()}return s.enableTick&&(l=t.onTick,u=function(){l&&l(),n.refreshPositions()},s.tick=u),function(t,e){var n;if(!(null===(n=null==t?void 0:t.nodes)||void 0===n?void 0:n.length))return;t.nodes.forEach((function(t){t.layoutOrder=e}))}(c=this.filterLayoutData(this.data,t),e),s.init(c),n.emit("beforesublayout",{type:o}),[4,s.execute()];case 1:return h.sent(),s.isCustomLayout&&t.onLayoutEnd&&t.onLayoutEnd(),this.layoutMethods[e]=s,[2]}}))}))}))},e.prototype.updateLayoutMethod=function(t,e){var n=this;return new Promise((function(i,r){return(0,y.__awaiter)(n,void 0,void 0,(function(){var n,r,o;return(0,y.__generator)(this,(function(a){switch(a.label){case 0:return n=this.graph,r=null==e?void 0:e.type,e.onLayoutEnd=function(){n.emit("aftersublayout",{type:r}),i()},o=this.filterLayoutData(this.data,e),t.init(o),t.updateCfg(e),n.emit("beforesublayout",{type:r}),[4,t.execute()];case 1:return a.sent(),t.isCustomLayout&&e.onLayoutEnd&&e.onLayoutEnd(),[2]}}))}))}))},e.prototype.layout=function(t){var e=this,n=this.graph;this.data=this.setDataFromGraph();var i=this.data,r=i.nodes,o=i.hiddenNodes;if(!r)return!1;var a=n.get("width"),s=n.get("height"),l={};Object.assign(l,{width:a,height:s,center:[a/2,s/2]},this.layoutCfg),this.layoutCfg=l,this.destoryLayoutMethods(),n.emit("beforelayout"),this.initPositions(l.center,r),this.initPositions(l.center,o);var u=l.type;u&&"gpu"===u.split("-")[1]&&(u=u.split("-")[0],l.gpuEnabled=!0);var c=!1;l.gpuEnabled&&(c=!0,aM().webgl||(console.warn("Your browser does not support webGL or GPGPU. The layout will run in CPU."),c=!1)),this.isGPU=c;var h=l.onLayoutEnd,d=l.layoutEndFormatted,f=l.adjust;if(d||(l.layoutEndFormatted=!0,l.onAllLayoutEnd=function(){return(0,y.__awaiter)(e,void 0,void 0,(function(){return(0,y.__generator)(this,(function(t){switch(t.label){case 0:return h&&h(),this.refreshLayout(),f&&l.pipes?[4,this.adjustPipesBox(this.data,f)]:[3,2];case 1:t.sent(),this.refreshLayout(),t.label=2;case 2:return n.emit("afterlayout"),[2]}}))}))}),this.stopWorker(),l.workerEnabled&&this.layoutWithWorker(this.data))return!0;var p=Promise.resolve();return l.type?p=p.then((function(){return(0,y.__awaiter)(e,void 0,void 0,(function(){return(0,y.__generator)(this,(function(t){switch(t.label){case 0:return[4,this.execLayoutMethod(l,0)];case 1:return[2,t.sent()]}}))}))})):l.pipes&&l.pipes.forEach((function(t,n){p=p.then((function(){return(0,y.__awaiter)(e,void 0,void 0,(function(){return(0,y.__generator)(this,(function(e){switch(e.label){case 0:return[4,this.execLayoutMethod(t,n)];case 1:return[2,e.sent()]}}))}))}))})),p.then((function(){l.onAllLayoutEnd&&l.onAllLayoutEnd(),t&&t()})).catch((function(t){console.warn("graph layout failed,",t)})),!1},e.prototype.layoutWithWorker=function(t){var e=this,n=this.layoutCfg,i=this.graph,r=this.getWorker(),o=this.workerData;if(!r)return!1;o.requestId=null,o.requestId2=null,o.currentTick=null,o.currentTickData=null,i.emit("beforelayout");var a=Promise.resolve();if(n.type)a=a.then((function(){return e.runWebworker(r,t,n)}));else if(n.pipes)for(var s=function(n){a=a.then((function(){return e.runWebworker(r,t,n)}))},l=0,u=n.pipes;l<u.length;l++){s(u[l])}return a.then((function(){n.onAllLayoutEnd&&n.onAllLayoutEnd()})).catch((function(t){console.error("layout failed",t)})),!0},e.prototype.runWebworker=function(t,e,n){var i=this,r=this.isGPU,o=this.filterLayoutData(e,n),a=o.nodes,s=o.edges,l=document.createElement("canvas"),u=r&&"undefined"!=typeof window&&window.navigator&&!navigator.gpu&&"OffscreenCanvas"in window&&"transferControlToOffscreen"in l,c=function(t,e){var n={};if(t&&"object"===_M(t))return Object.keys(t).forEach((function(i){t.hasOwnProperty(i)&&e(t[i])&&(n[i]=t[i])})),n;return t}(n,(function(t){return"function"!=typeof t}));if(u){var h=l.transferControlToOffscreen();c.type=c.type+"-gpu",t.postMessage({type:yM,nodes:a,edges:s,layoutCfg:c,canvas:h},[h])}else t.postMessage({type:pM,nodes:a,edges:s,layoutCfg:c});return new Promise((function(e,r){t.onmessage=function(t){i.handleWorkerMessage(e,r,t,o,n)}}))},e.prototype.handleWorkerMessage=function(t,e,n,i,r){var o=this.graph,a=this.workerData,s=n.data,l=s.type,u=function(){r.onTick&&r.onTick()};switch(l){case vM:a.currentTick=s.currentTick,a.currentTickData=s,a.requestId||(a.requestId=MM((function(){DM(i,s),o.refreshPositions(),u(),s.currentTick===s.totalTicks?t():a.currentTick===s.totalTicks&&(a.requestId2=MM((function(){DM(i,a.currentTickData),o.refreshPositions(),a.requestId2=null,u(),t()}))),a.requestId=null})));break;case mM:null==a.currentTick&&(DM(i,s),t());break;case bM:null==a.currentTick&&(!function(t,e){for(var n=t.nodes,i=e.vertexEdgeData,r=n.length,o=0;o<r;o++){var a=n[o],s=i[4*o],l=i[4*o+1];a.x=s,a.y=l}}(i,s),t());break;case gM:console.warn("Web-Worker layout error!",s.message),e();break;default:e()}},e.prototype.updateLayoutCfg=function(t){var e=this,n=this.graph,i=this.layoutMethods,r=(0,b.mix)({},this.layoutCfg,t);if(this.layoutCfg=r,null==i?void 0:i.length){if(this.data=this.setDataFromGraph(),this.stopWorker(),!t.workerEnabled||!this.layoutWithWorker(this.data)){n.emit("beforelayout");var o=Promise.resolve();1===i.length?o=o.then((function(){return(0,y.__awaiter)(e,void 0,void 0,(function(){return(0,y.__generator)(this,(function(t){switch(t.label){case 0:return[4,this.updateLayoutMethod(i[0],r)];case 1:return[2,t.sent()]}}))}))})):null==i||i.forEach((function(t,n){var i=r.pipes[n];o=o.then((function(){return(0,y.__awaiter)(e,void 0,void 0,(function(){return(0,y.__generator)(this,(function(e){switch(e.label){case 0:return[4,this.updateLayoutMethod(t,i)];case 1:return[2,e.sent()]}}))}))}))})),o.then((function(){r.onAllLayoutEnd&&r.onAllLayoutEnd()})).catch((function(t){console.warn("layout failed",t)}))}}else this.layout()},e.prototype.adjustPipesBox=function(t,e){var n=this;return new Promise((function(i){var r=t.nodes;(null==r?void 0:r.length)||i(),kM.includes(e)||(console.warn("The adjust type "+e+" is not supported yet, please assign it with 'force', 'grid', or 'circular'."),i());var o={center:n.layoutCfg.center,nodeSize:function(t){return Math.max(t.height,t.width)},preventOverlap:!0,onLayoutEnd:function(){}},a=n.getLayoutBBox(r),s=a.groupNodes,l=a.layoutNodes,u=(0,b.clone)(l);o.onLayoutEnd=function(){null==l||l.forEach((function(t,e){var n,i,r,o=t.x-(null===(n=u[e])||void 0===n?void 0:n.x),a=t.y-(null===(i=u[e])||void 0===i?void 0:i.y);null===(r=s[e])||void 0===r||r.forEach((function(t){t.x+=o,t.y+=a}))})),i()},new Kx[e](o).layout({nodes:l})}))},e.prototype.hasGPUVersion=function(t){return SM.includes(t)},e.prototype.destroy=function(){this.destoryLayoutMethods();var t=this.worker;t&&(t.terminate(),this.worker=null),this.destroyed=!0,this.graph.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0,this.graph=null},e}(yl);const TM=CM;function DM(t,e){for(var n=t.nodes,i=e.nodes,r=n.length,o=0;o<r;o++){var a=n[o];a.x=i[o].x,a.y=i[o].y}}var LM,AM,OM,PM;function IM(t){LM||(LM=document.createElement("table"),AM=document.createElement("tr"),OM=/^\s*<(\w+|!)[^>]*>/,PM={tr:document.createElement("tbody"),tbody:LM,thead:LM,tfoot:LM,td:AM,th:AM,"*":document.createElement("div")});var e=OM.test(t)&&RegExp.$1;e&&e in PM||(e="*");var n=PM[e];t=t.replace(/(^\s*)|(\s*$)/g,""),n.innerHTML=""+t;var i=n.childNodes[0];return n.removeChild(i),i}var NM=uh,RM=function(t){function e(e){var n=t.call(this,e)||this,i=n.get("defaultNode");return i||n.set("defaultNode",{type:"circle"}),i.type||(i.type="circle",n.set("defaultNode",i)),n.destroyed=!1,n}return(0,y.__extends)(e,t),e.prototype.initLayoutController=function(){var t=new TM(this);this.set({layoutController:t})},e.prototype.initEventController=function(){var t=new Oh(this);this.set({eventController:t})},e.prototype.initCanvas=function(){var t=this.get("container");if("string"==typeof t&&(t=document.getElementById(t),this.set("container",t)),!t)throw new Error("invalid container");var e,n=t.clientWidth,i=t.clientHeight,r=this.get("width")||n,o=this.get("height")||i;if(this.get("width")||this.get("height")||(this.set("width",n),this.set("height",i)),"svg"===this.get("renderer"))e=new rh({container:t,width:r,height:o});else{var a={container:t,width:r,height:o},s=this.get("pixelRatio");s&&(a.pixelRatio=s),e=new Qu(a)}this.set("canvas",e)},e.prototype.initPlugins=function(){var t=this;(0,b.each)(t.get("plugins"),(function(e){!e.destroyed&&e.initPlugin&&e.initPlugin(t)}))},e.prototype.downloadImageWatermark=function(t,e,n,i){return(0,y.__awaiter)(this,void 0,void 0,(function(){var r,o,a;return(0,y.__generator)(this,(function(s){switch(s.label){case 0:return r=t.style.backgroundImage,o=r.slice(5,r.length-2),(a=new Image).src=o,[4,new Promise((function(t){a.onload=function(){var r=e.createPattern(a,"repeat");e.rect(0,0,n,i),e.fillStyle=r,e.fill(),t("")}}))];case 1:return s.sent(),[2]}}))}))},e.prototype.asyncToDataUrl=function(t,e,n,i,r,o){var a=this,s=document.querySelector(".g6-graph-watermarker"),l=this.get("canvas"),u=l.getRenderer(),c=o||l.get("el"),h="";t||(t="image/png"),setTimeout((function(){return(0,y.__awaiter)(a,void 0,void 0,(function(){var o,a,l,d,f,p,m,g,v,b;return(0,y.__generator)(this,(function(y){switch(y.label){case 0:return"svg"!==u?[3,1]:(o=c.cloneNode(!0),a=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),(l=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",a)).replaceChild(o,l.documentElement),d=(new XMLSerializer).serializeToString(l),h="data:image/svg+xml;charset=utf8,"+encodeURIComponent(d),[3,4]);case 1:return f=void 0,p=c.getContext("2d"),m=i||this.get("width"),g=r||this.get("height"),v=void 0,s?[4,this.downloadImageWatermark(s,p,m,g)]:[3,3];case 2:y.sent(),y.label=3;case 3:if(e){b="undefined"!=typeof window?window.devicePixelRatio:1;try{f=p.getImageData(0,0,m*b,g*b),v=p.globalCompositeOperation,p.globalCompositeOperation="destination-over",p.fillStyle=e,p.fillRect(0,0,m,g)}catch(t){console.error("Download image failed. Out of memory at ImageData creation")}}h=c.toDataURL(t),e&&(p.clearRect(0,0,m,g),p.putImageData(f,0,0),p.globalCompositeOperation=v),y.label=4;case 4:return n&&n(h),[2]}}))}))}),16)},e.prototype.toDataURL=function(t,e){var n=this.get("canvas"),i=n.getRenderer(),r=n.get("el");t||(t="image/png");var o="";if("svg"===i){var a=r.cloneNode(!0),s=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),l=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",s);l.replaceChild(a,l.documentElement);var u=(new XMLSerializer).serializeToString(l);o="data:image/svg+xml;charset=utf8,"+encodeURIComponent(u)}else{var c=void 0,h=r.getContext("2d"),d=this.get("width"),f=this.get("height"),p=void 0;if(e){var m="undefined"!=typeof window?window.devicePixelRatio:1;try{c=h.getImageData(0,0,d*m,f*m),p=h.globalCompositeOperation,h.globalCompositeOperation="destination-over",h.fillStyle=e,h.fillRect(0,0,d,f)}catch(t){console.error("Download image failed. Out of memory at ImageData creation")}}o=r.toDataURL(t),e&&(h.clearRect(0,0,d,f),h.putImageData(c,0,0),h.globalCompositeOperation=p)}return o},e.prototype.toFullDataURL=function(t,e,n){var i=this.get("group").getCanvasBBox(),r=i.height,o=i.width,a=this.get("renderer"),s=IM('<id="virtual-image"></div>'),l=n?n.backgroundColor:void 0,u=n?n.padding:void 0;u?(0,b.isNumber)(u)&&(u=[u,u,u,u]):u=[0,0,0,0];var c=r+u[0]+u[2],h=o+u[1]+u[3],d={container:s,height:c,width:h,quickHit:!0},f="svg"===a?new rh(d):new Qu(d),p=this.get("group").clone(),m=(0,b.clone)(p.getMatrix());m||(m=[1,0,0,0,1,0,0,0,1]);var g=(i.maxX+i.minX)/2,v=(i.maxY+i.minY)/2;m=NM(m,[["t",-g,-v],["t",o/2+u[3],r/2+u[0]]]),p.resetMatrix(),p.setMatrix(m),f.add(p);var y=f.get("el"),_="";e||(e="image/png"),setTimeout((function(){if("svg"===a){var n=y.cloneNode(!0),i=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),r=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",i);r.replaceChild(n,r.documentElement);var o=(new XMLSerializer).serializeToString(r);_="data:image/svg+xml;charset=utf8,"+encodeURIComponent(o)}else{var s=void 0,u=y.getContext("2d"),d=void 0;if(l){var f="undefined"!=typeof window?window.devicePixelRatio:1;try{s=u.getImageData(0,0,h*f,c*f),d=u.globalCompositeOperation,u.globalCompositeOperation="destination-over",u.fillStyle=l,u.fillRect(0,0,h,c)}catch(t){console.error("Download image failed. Out of memory at ImageData creation")}}_=y.toDataURL(e),l&&(u.clearRect(0,0,h,c),u.putImageData(s,0,0),u.globalCompositeOperation=d)}t&&t(_)}),16)},e.prototype.downloadFullImage=function(t,e,n){var i=this,r=this.get("group").getCanvasBBox(),o=r.height,a=r.width,s=this.get("renderer"),l=IM('<id="virtual-image"></div>'),u=document.querySelector(".g6-graph-watermarker"),c=n?n.backgroundColor:void 0,h=n?n.padding:void 0;h?(0,b.isNumber)(h)&&(h=[h,h,h,h]):h=[0,0,0,0];var d=o+h[0]+h[2],f=a+h[1]+h[3];if(u){var p=this.get("graphWaterMarker").cfg||{},m=p.width,g=p.height;d=Math.ceil(d/g)*g,f=Math.ceil(f/m)*m}var v={container:l,height:d,width:f},y="svg"===s?new rh(v):new Qu(v),_=this.get("group").clone(),w=(0,b.clone)(_.getMatrix());w||(w=[1,0,0,0,1,0,0,0,1]);var x=(r.maxX+r.minX)/2,M=(r.maxY+r.minY)/2;w=NM(w,[["t",-x,-M],["t",a/2+h[3],o/2+h[0]]]),_.resetMatrix(),_.setMatrix(w),y.add(_);var E=y.get("el");e||(e="image/png"),this.asyncToDataUrl(e,c,(function(n){var r=document.createElement("a"),o=(t||"graph")+("svg"===s?".svg":"."+e.split("/")[1]);i.dataURLToImage(n,s,r,o);var a=document.createEvent("MouseEvents");a.initEvent("click",!1,!1),r.dispatchEvent(a)}),f,d,E)},e.prototype.downloadImage=function(t,e,n){var i=this,r=this;r.isAnimating()&&r.stopAnimate();var o=r.get("canvas").getRenderer();e||(e="image/png");var a=(t||"graph")+("svg"===o?".svg":e.split("/")[1]),s=document.createElement("a");r.asyncToDataUrl(e,n,(function(t){i.dataURLToImage(t,o,s,a);var e=document.createEvent("MouseEvents");e.initEvent("click",!1,!1),s.dispatchEvent(e)}))},e.prototype.dataURLToImage=function(t,e,n,i){if(t&&"data:"!==t){if("undefined"!=typeof window)if(window.Blob&&window.URL&&"svg"!==e){var r=t.split(","),o="";if(r&&r.length>0){var a=r[0].match(/:(.*?);/);a&&a.length>=2&&(o=a[1])}for(var s=atob(r[1]),l=s.length,u=new Uint8Array(l);l--;)u[l]=s.charCodeAt(l);var c=new Blob([u],{type:o});window.navigator.msSaveBlob?window.navigator.msSaveBlob(c,i):n.addEventListener("click",(function(){n.download=i,n.href=window.URL.createObjectURL(c)}))}else n.addEventListener("click",(function(){n.download=i,n.href=t}))}else console.error("Download image failed. The graph is too large or there is invalid attribute values in graph items")},e.prototype.addPlugin=function(t){t.destroyed||(this.get("plugins").push(t),t.initPlugin(this))},e.prototype.removePlugin=function(t){var e=this.get("plugins"),n=e.indexOf(t);n>=0&&(t.destroyPlugin(),e.splice(n,1))},e.prototype.setImageWaterMarker=function(t,e){void 0===t&&(t=Ch.waterMarkerImage);var n=this.get("container");(0,b.isString)(n)&&(n=document.getElementById(n)),n.style.position||(n.style.position="relative");var i=this.get("graphWaterMarker"),r=(0,b.deepMix)({},Ch.imageWaterMarkerConfig,e),o=r.width,a=r.height,s=r.compatible,l=r.image;if(!i){var u={container:n,width:o,height:a,capture:!1},c=this.get("pixelRatio");c&&(u.pixelRatio=c),i=new Qu(u),this.set("graphWaterMarker",i)}i.get("el").style.display="none";var h=i.get("context"),d=l.rotate,f=l.x,p=l.y;h.rotate(-d*Math.PI/180);var m=new Image;m.crossOrigin="anonymous",m.src=t,m.onload=function(){if(h.drawImage(m,f,p,l.width,l.height),h.rotate(d*Math.PI/180),s)n.style.cssText="background-image: url("+i.get("el").toDataURL("image/png")+");background-repeat:repeat;";else{var t=document.querySelector(".g6-graph-watermarker");t||((t=document.createElement("div")).className="g6-graph-watermarker"),t.className="g6-graph-watermarker",i.destroyed||(t.style.cssText="background-image: url("+i.get("el").toDataURL("image/png")+");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:-1;",n.appendChild(t))}}},e.prototype.setTextWaterMarker=function(t,e){var n=this.get("container");(0,b.isString)(n)&&(n=document.getElementById(n)),n.style.position||(n.style.position="relative");var i=this.get("graphWaterMarker"),r=(0,b.deepMix)({},Ch.textWaterMarkerConfig,e),o=r.width,a=r.height,s=r.compatible,l=r.text;if(!i){var u={container:n,width:o,height:a,capture:!1},c=this.get("pixelRatio");c&&(u.pixelRatio=c),i=new Qu(u),this.set("graphWaterMarker",i)}i.get("el").style.display="none";var h=i.get("context"),d=l.rotate,f=l.fill,p=l.fontFamily,m=l.fontSize,g=l.baseline,v=l.x,y=l.y,_=l.lineHeight;h.rotate(-d*Math.PI/180),h.font=m+"px "+p,h.fillStyle=f,h.textBaseline=g;for(var w=t.length-1;w>=0;w--)h.fillText(t[w],v,y+w*_);if(h.rotate(d*Math.PI/180),s)n.style.cssText="background-image: url("+i.get("el").toDataURL("image/png")+");background-repeat:repeat;";else{var x=document.querySelector(".g6-graph-watermarker");x||((x=document.createElement("div")).className="g6-graph-watermarker"),x.style.cssText="background-image: url("+i.get("el").toDataURL("image/png")+");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:99;",n.appendChild(x)}},e.prototype.destroy=function(){var e,n,i,r;(0,b.each)(this.get("plugins"),(function(t){t.destroyPlugin()}));var o=this.get("tooltips");if(o)for(var a=0;a<o.length;a++){var s=o[a];if(s){var l=s.parentElement;l&&l.removeChild(s)}}null===(e=this.get("eventController"))||void 0===e||e.destroy(),null===(n=this.get("layoutController"))||void 0===n||n.destroy(),null===(i=this.get("graphWaterMarker"))||void 0===i||i.destroy(),null===(r=document.querySelector(".g6-graph-watermarker"))||void 0===r||r.remove(),t.prototype.destroy.call(this)},e}(Ks);const YM=RM;var jM=sM.radialLayout,FM=sM.traverseTree,BM=function(t){function e(e){var n=t.call(this,e)||this;return n.layoutAnimating=!1,n.set("removeList",[]),n.set("layoutMethod",n.getLayout()),n}return(0,y.__extends)(e,t),e.prototype.getLayout=function(){var t=this.get("layout");return t?"function"==typeof t?t:(t.type||(t.type="dendrogram"),t.direction||(t.direction="TB"),t.radial?function(e){var n=Zx()[t.type](e,t);return jM(n),n}:function(e){return Zx()[t.type](e,t)}):null},e.indexOfChild=function(t,e){var n=-1;return(0,b.each)(t,(function(t,i){if(e===t.id)return n=i,!1})),n},e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.animate=!0,e},e.prototype.innerAddChild=function(t,e,n){var i=this,r=t.data;r&&(r.x=t.x,r.y=t.y,r.depth=t.depth);var o=i.addItem("node",r,!1);if(e){if(o.set("parent",e),n){var a=e.get("originAttrs");if(a)o.set("originAttrs",a);else{var s=e.getModel();o.set("originAttrs",{x:s.x,y:s.y})}}var l=e.get("children");l?l.push(o):e.set("children",[o]),i.addItem("edge",{source:e.get("id"),target:o.get("id"),id:e.get("id")+":"+o.get("id")},!1)}return(0,b.each)(t.children||[],(function(t){i.innerAddChild(t,o,n)})),i.emit("afteraddchild",{item:o,parent:e}),o},e.prototype.innerUpdateChild=function(t,n,i){var r=this,o=r.findById(t.id);if(o){(0,b.each)(t.children||[],(function(t){r.innerUpdateChild(t,o,i)}));var a,s,l=o.get("children");if(l)if(l.length>0)for(var u=l.length-1;u>=0;u--){var c=l[u].getModel();-1===e.indexOfChild(t.children||[],c.id)&&(r.innerRemoveChild(c.id,{x:t.x,y:t.y},i),l.splice(u,1))}o.get("originAttrs")&&(a=o.get("originAttrs").x,s=o.get("originAttrs").y);var h=o.getModel();i&&o.set("originAttrs",{x:h.x,y:h.y}),o.set("model",t.data),a===t.x&&s===t.y||o.updatePosition({x:t.x,y:t.y})}else r.innerAddChild(t,n,i)},e.prototype.innerRemoveChild=function(t,e,n){var i=this,r=i.findById(t);if(r)if((0,b.each)(r.get("children"),(function(t){i.innerRemoveChild(t.getModel().id,e,n)})),n){var o=r.getModel();r.set("to",e),r.set("originAttrs",{x:o.x,y:o.y}),i.get("removeList").push(r)}else i.removeItem(r,!1)},e.prototype.changeData=function(t){var e=this;this.getNodes().map((function(t){return e.clearItemStates(t)})),this.getEdges().map((function(t){return e.clearItemStates(t)})),t?(e.data(t),e.render()):e.layout(this.get("fitView"))},e.prototype.changeLayout=function(t){console.warn("Please call updateLayout instead of changeLayout. changeLayout will be discarded soon");this.updateLayout(t)},e.prototype.updateLayout=function(t){var e=this;t?(e.set("layout",t),e.set("layoutMethod",e.getLayout()),e.layout()):console.warn("layout cannot be null")},e.prototype.refreshLayout=function(t){console.warn("Please call layout instead of refreshLayout. refreshLayout will be discarded soon");this.layout(t)},e.prototype.layout=function(t){var e=this,n=e.get("data"),i=e.get("layoutMethod"),r=i?i(n,e.get("layout")):n,o=e.get("animate");(e.emit("beforerefreshlayout",{data:n,layoutData:r}),e.emit("beforelayout"),e.innerUpdateChild(r,void 0,o),t)&&e.get("viewController").fitView();o?e.layoutAnimate(r):(e.refresh(),e.paint()),e.emit("afterrefreshlayout",{data:n,layoutData:r}),e.emit("afterlayout")},e.prototype.addChild=function(t,e){var n=this;n.emit("beforeaddchild",{model:t,parent:e}),(0,b.isString)(e)||(e=e.get("id"));var i=n.findDataById(e);i&&(i.children||(i.children=[]),i.children.push(t),n.changeData())},e.prototype.updateChildren=function(t,e){var n=this;e&&n.findById(e)?(n.findDataById(e).children=t,n.changeData()):console.warn("Update children failed! There is no node with id '"+e+"'")},e.prototype.updateChild=function(t,n){var i=this;if(n&&i.findById(n)){var r=i.findDataById(n),o=i.findById(t.id);if(r.children||(r.children=[]),o){var a=e.indexOfChild(r.children,t.id);r.children[a]=t}else r.children.push(t);i.changeData()}else i.changeData(t)},e.prototype.removeChild=function(t){var n=this,i=n.findById(t);if(i){var r=i.get("parent");if(r&&!r.destroyed){var o=n.findDataById(r.get("id")),a=o&&o.children||[],s=i.getModel(),l=e.indexOfChild(a,s.id);a.splice(l,1)}n.changeData()}},e.prototype.findDataById=function(t,e){var n=this;if(e||(e=n.get("data")),t===e.id)return e;var i=null;return(0,b.each)(e.children||[],(function(e){return e.id===t?(i=e,!1):!(i=n.findDataById(t,e))&&void 0})),i},e.prototype.layoutAnimate=function(t,e){var n=this,i=this.get("animateCfg");n.emit("beforeanimate",{data:t}),n.getEdges().forEach((function(t){var e=t.get("model");e.sourceAnchor||(e.sourceAnchor=t.get("sourceAnchorIndex"))})),this.get("canvas").animate((function(i){FM(t,(function(r){var o=n.findById(r.id);if(o){var a=o.get("originAttrs"),s=o.get("model");if(a||(a={x:s.x,y:s.y},o.set("originAttrs",a)),e){var l=e(o,i,a,t);o.set("model",Object.assign(s,l))}else s.x=a.x+(r.x-a.x)*i,s.y=a.y+(r.y-a.y)*i}return!0})),(0,b.each)(n.get("removeList"),(function(t){var e=t.getModel(),n=t.get("originAttrs"),r=t.get("to");e.x=n.x+(r.x-n.x)*i,e.y=n.y+(r.y-n.y)*i})),n.refreshPositions()}),{duration:i.duration,easing:i.ease,callback:function(){(0,b.each)(n.getNodes(),(function(t){t.set("originAttrs",null)})),(0,b.each)(n.get("removeList"),(function(t){n.removeItem(t)})),n.set("removeList",[]),i.callback&&i.callback(),n.emit("afteranimate",{data:t})},delay:i.delay})},e.prototype.stopLayoutAnimate=function(){this.get("canvas").stopAnimate(),this.emit("layoutanimateend",{data:this.get("data")}),this.layoutAnimating=!1},e.prototype.isLayoutAnimating=function(){return this.layoutAnimating},e.prototype.render=function(){var t=this,e=t.get("data");if(!e||!(0,b.isObject)(e)||!Object.keys(e).length)throw new Error("data must be defined first");t.clear(),t.emit("beforerender"),t.layout(this.get("fitView")),t.emit("afterrender")},e.prototype.save=function(){return this.get("data")},e}(YM);const zM=BM;function HM(t,e){if(t)for(var n in e)e.hasOwnProperty(n)&&(t.style[n]=e[n]);return t}var GM=function(){function t(t){this._cfgs=(0,b.deepMix)(this.getDefaultCfgs(),t),this._events={},this.destroyed=!1}return t.prototype.getDefaultCfgs=function(){return{}},t.prototype.initPlugin=function(t){var e=this;e.set("graph",t);var n=e.getEvents(),i={};(0,b.each)(n,(function(n,r){var o=(0,b.wrapBehavior)(e,n);i[r]=o,t.on(r,o)})),this._events=i,this.init()},t.prototype.getEvents=function(){return{}},t.prototype.get=function(t){var e;return null===(e=this._cfgs)||void 0===e?void 0:e[t]},t.prototype.set=function(t,e){this._cfgs[t]=e},t.prototype.destroy=function(){},t.prototype.destroyPlugin=function(){this.destroy();var t=this.get("graph"),e=this._events;(0,b.each)(e,(function(e,n){t.off(n,e)})),this._events=null,this._cfgs=null,this.destroyed=!0},t}();const WM=GM;var UM,VM=(UM=function(t,e){return UM=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},UM(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}UM(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),XM="url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAwIDEwIEwgNDAgMTAgTSAxMCAwIEwgMTAgNDAgTSAwIDIwIEwgNDAgMjAgTSAyMCAwIEwgMjAgNDAgTSAwIDMwIEwgNDAgMzAgTSAzMCAwIEwgMzAgNDAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2UwZTBlMCIgb3BhY2l0eT0iMC4yIiBzdHJva2Utd2lkdGg9IjEiLz48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZTBlMGUwIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=)",qM=function(t){function e(e){return t.call(this,e)||this}return VM(e,t),e.prototype.getDefaultCfgs=function(){return{img:XM,follow:!0}},e.prototype.init=function(){var t=this.get("graph"),e=t.get("container"),n=t.get("canvas").get("el"),i=this.get("img")||XM,r=IM("<div class='g6-grid-container' style=\"position:absolute;overflow:hidden;z-index: -1;\"></div>"),o=IM("<div\n        class='g6-grid'\n        style='position:absolute;\n        background-image: "+i+";\n        user-select: none\n        '></div>");this.set("container",r),this.set("gridContainer",o),this.positionInit(),r.appendChild(o),e.insertBefore(r,n)},e.prototype.positionInit=function(){var t=this.get("graph"),e=t.get("minZoom"),n=t.get("width"),i=t.get("height");HM(this.get("container"),{width:n+"px",height:i+"px"});var r=80*n/e,o=80*i/e;HM(this.get("gridContainer"),{width:r+"px",height:o+"px",left:"-"+r/2+"px",top:"-"+o/2+"px"})},e.prototype.getEvents=function(){return{viewportchange:"updateGrid"}},e.prototype.updateGrid=function(t){var e=this.get("gridContainer"),n=t.matrix;n||(n=[1,0,0,0,1,0,0,0,1]);var i=this.get("follow");HM(e,{transform:"matrix("+n[0]+", "+n[1]+", "+n[3]+", "+n[4]+", "+(i?n[6]:"0")+", "+(i?n[7]:"0")+")"})},e.prototype.getContainer=function(){return this.get("container")},e.prototype.destroy=function(){var t=this.get("graph").get("container"),e=this.get("container");t.removeChild(e)},e}(WM);const KM=qM;var $M=n(38186),ZM=n.n($M),JM=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();"undefined"!=typeof document&&ZM()("\n  .g6-component-contextmenu {\n    border: 1px solid #e2e2e2;\n    border-radius: 4px;\n    font-size: 12px;\n    color: #545454;\n    background-color: rgba(255, 255, 255, 0.9);\n    padding: 10px 8px;\n    box-shadow: rgb(174, 174, 174) 0px 0px 10px;\n  }\n  .g6-contextmenu-ul {\n    padding: 0;\n    margin: 0;\n    list-style: none;\n  }\n\n");var QM=function(t){function e(e){return t.call(this,e)||this}return JM(e,t),e.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,handleMenuClick:void 0,getContent:function(t){return"\n          <ul class='g6-contextmenu-ul'>\n            <li>1</li>\n            <li>2</li>\n          </ul>\n        "},shouldBegin:function(t){return!0},onHide:function(){return!0},itemTypes:["node","edge","combo"],trigger:"contextmenu"}},e.prototype.getEvents=function(){return"click"===this.get("trigger")?{click:"onMenuShow"}:{contextmenu:"onMenuShow"}},e.prototype.init=function(){var t=IM("<div class="+(this.get("className")||"g6-component-contextmenu")+"></div>");HM(t,{top:"0px",position:"absolute",visibility:"hidden"});var e=this.get("container");e||(e=this.get("graph").get("container")),(0,b.isString)(e)&&(e=document.getElementById(e)),e.appendChild(t),this.set("menu",t)},e.prototype.onMenuShow=function(t){var e=this;t.preventDefault();var n=this.get("itemTypes");if(t.item){if(t.item&&t.item.getType&&-1===n.indexOf(t.item.getType()))return void e.onMenuHide()}else if(-1===n.indexOf("canvas"))return void e.onMenuHide();if(this.get("shouldBegin")(t)){var i=this.get("menu"),r=this.get("getContent"),o=this.get("graph"),a=r(t,o);(0,b.isString)(a)?i.innerHTML=a:i.innerHTML=a.outerHTML,this.removeMenuEventListener();var s=this.get("handleMenuClick");if(s){var l=function(e){s(e.target,t.item,o)};this.set("handleMenuClickWrapper",l),i.addEventListener("click",l)}var u=o.get("width"),c=o.get("height"),h=i.getBoundingClientRect(),d=this.get("offsetX")||0,f=this.get("offsetY")||0,p=o.getContainer().offsetTop,m=o.getContainer().offsetLeft,g=t.canvasX+m+d,v=t.canvasY+p+f;g+h.width>u&&(g=t.canvasX-h.width-d+m),v+h.height>c&&(v=t.canvasY-h.height-f+p),HM(i,{top:v+"px",left:g+"px",visibility:"visible"});var y="click"===this.get("trigger"),_=function(t){y?y=!1:e.onMenuHide()};document.body.addEventListener("click",_),this.set("handler",_)}},e.prototype.removeMenuEventListener=function(){var t=this.get("handleMenuClickWrapper"),e=this.get("handler");t&&(this.get("menu").removeEventListener("click",t),this.set("handleMenuClickWrapper",null));e&&document.body.removeEventListener("click",e)},e.prototype.onMenuHide=function(){var t=this.get("menu");t&&HM(t,{visibility:"hidden"}),this.removeMenuEventListener()},e.prototype.destroy=function(){var t=this.get("menu");if(this.removeMenuEventListener(),t){var e=this.get("container");e||(e=this.get("graph").get("container")),(0,b.isString)(e)&&(e=document.getElementById(e)),e.removeChild(t)}},e}(WM);const tE=QM;var eE=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),nE=function(){return nE=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},nE.apply(this,arguments)},iE=Math.max,rE=uh,oE=function(t){function e(e){var n=t.call(this,e)||this;return n.handleUpdateCanvas=(0,b.debounce)((function(t){var e=n;e.destroyed||e.updateCanvas()}),100,!1),n}return eE(e,t),e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",type:"default",padding:50,size:[200,120],delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0}},e.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},e.prototype.disableRefresh=function(){this.set("refresh",!1)},e.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},e.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},e.prototype.initViewport=function(){var t=this,e=this._cfgs,n=e.size,i=e.graph;if(!this.destroyed){var r=this.get("canvas").get("container"),o=IM("\n      <div\n        class="+e.viewportClassName+"\n        style='position:absolute;\n          left:0;\n          top:0;\n          box-sizing:border-box;\n          outline: 2px solid #1980ff'\n        draggable=true>\n      </div>"),a=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,s=0,l=0,u=!1,c=0,h=0,d=0,f=0,p=0,m=0;o.addEventListener("dragstart",(function(r){var a,g;if(r.dataTransfer){var v=new Image;v.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' %3E%3Cpath /%3E%3C/svg%3E",null===(g=(a=r.dataTransfer).setDragImage)||void 0===g||g.call(a,v,0,0);try{r.dataTransfer.setData("text/html","view-port-minimap")}catch(t){r.dataTransfer.setData("text","view-port-minimap")}}if(e.refresh=!1,r.target===o){var y=o.style;c=parseInt(y.left,10),h=parseInt(y.top,10),d=parseInt(y.width,10),f=parseInt(y.height,10),d>n[0]||f>n[1]||(m=i.getZoom(),p=t.get("ratio"),u=!0,s=r.clientX,l=r.clientY)}}),!1),o.addEventListener(a?"dragover":"drag",(function(t){if(u&&!(0,b.isNil)(t.clientX)&&!(0,b.isNil)(t.clientY)){var e=s-t.clientX,r=l-t.clientY;(c-e<0||c-e+d>=n[0])&&(e=0),(h-r<0||h-r+f>=n[1])&&(r=0),HM(o,{left:(c-=e)+"px",top:(h-=r)+"px"}),i.translate(e*m/p,r*m/p),s=t.clientX,l=t.clientY}}),!1),o.addEventListener("dragend",(function(){u=!1,e.refresh=!0}),!1),this.set("viewport",o),r.appendChild(o)}},e.prototype.updateViewport=function(){if(!this.destroyed){var t=this.get("ratio"),e=(this.get("dx"),this.get("dy"),this.get("totaldx")),n=this.get("totaldy"),i=this.get("graph"),r=this.get("size"),o=i.get("width"),a=i.get("height"),s=i.getPointByCanvas(0,0),l=i.getPointByCanvas(o,a),u=this.get("viewport");u||this.initViewport();var c=(l.x-s.x)*t,h=(l.y-s.y)*t,d=s.x*t+e,f=s.y*t+n,p=d+c,m=f+h;d<0&&(c+=d,d=0),p>r[0]&&(c-=p-r[0]),f<0&&(h+=f,f=0),m>r[1]&&(h-=m-r[1]),this.set("ratio",t),HM(u,{left:d+"px",top:f+"px",width:c+"px",height:h+"px"})}},e.prototype.updateGraphShapes=function(){var t=this._cfgs.graph,e=this.get("canvas"),n=t.get("group");if(!n.destroyed){var i=n.clone();i.resetMatrix(),e.clear(),e.add(i),"svg"===t.get("renderer")&&this.updateVisible(i)}},e.prototype.updateVisible=function(t){var e=this;if(t.isGroup()||t.get("visible")){var n=t.get("children");if(!n||!n.length)return;n.forEach((function(t){t.get("visible")||t.hide(),e.updateVisible(t)}))}else t.hide()},e.prototype.updateKeyShapes=function(){var t=this,e=this._cfgs.graph,n=this.get("canvas"),i=n.get("children")[0]||n.addGroup();(0,b.each)(e.getEdges(),(function(e){t.updateOneEdgeKeyShape(e,i)})),(0,b.each)(e.getNodes(),(function(e){t.updateOneNodeKeyShape(e,i)}));var r=e.getCombos();if(r&&r.length){var o=i.find((function(t){return"comboGroup"===t.get("name")}))||i.addGroup({name:"comboGroup"});setTimeout((function(){t.destroyed||((0,b.each)(r,(function(e){t.updateOneComboKeyShape(e,o)})),null==o||o.sort(),null==o||o.toBack(),t.updateCanvas())}),250)}this.clearDestroyedShapes()},e.prototype.updateOneComboKeyShape=function(t,e){if(!this.destroyed){var n=this.get("itemMap")||{},i=n[t.get("id")],r=t.getBBox(),o=t.get("keyShape").clone(),a=o.attr(),s={x:r.centerX,y:r.centerY};i?s=Object.assign(a,s):(i=o,e.add(i));var l=i.get("type");"rect"!==l&&"image"!==l||(s.x=r.minX,s.y=r.minY),i.attr(s),t.isVisible()?i.show():i.hide(),i.exist=!0;var u=t.getModel().depth;isNaN(u)||i.set("zIndex",u),n[t.get("id")]=i,this.set("itemMap",n)}},e.prototype.updateOneNodeKeyShape=function(t,e){var n=this.get("itemMap")||{},i=n[t.get("id")],r=t.getBBox(),o=t.get("keyShape").clone(),a=o.attr(),s={x:r.centerX,y:r.centerY};i?s=Object.assign(a,s):(i=o,e.add(i));var l=i.get("type");"rect"!==l&&"image"!==l||(s.x=r.minX,s.y=r.minY),i.attr(s),t.isVisible()?i.show():i.hide(),i.exist=!0;var u=t.getModel().depth;isNaN(u)||i.set("zIndex",u),n[t.get("id")]=i,this.set("itemMap",n)},e.prototype.updateDelegateShapes=function(){var t=this,e=this._cfgs.graph,n=this.get("canvas"),i=n.get("children")[0]||n.addGroup();(0,b.each)(e.getEdges(),(function(e){t.updateOneEdgeKeyShape(e,i)})),(0,b.each)(e.getNodes(),(function(e){t.updateOneNodeDelegateShape(e,i)}));var r=e.getCombos();if(r&&r.length){var o=i.find((function(t){return"comboGroup"===t.get("name")}))||i.addGroup({name:"comboGroup"});setTimeout((function(){t.destroyed||((0,b.each)(r,(function(e){t.updateOneComboKeyShape(e,o)})),null==o||o.sort(),null==o||o.toBack(),t.updateCanvas())}),250)}this.clearDestroyedShapes()},e.prototype.clearDestroyedShapes=function(){var t=this.get("itemMap")||{},e=Object.keys(t);if(e&&0!==e.length)for(var n=e.length-1;n>=0;n--){var i=t[e[n]],r=i.exist;i.exist=!1,r||(i.remove(),delete t[e[n]])}},e.prototype.updateOneEdgeKeyShape=function(t,e){var n=this.get("itemMap")||{},i=n[t.get("id")];if(i){var r=t.get("keyShape").attr("path");i.attr("path",r)}else i=t.get("keyShape").clone(),e.add(i);t.isVisible()?i.show():i.hide(),i.exist=!0,n[t.get("id")]=i,this.set("itemMap",n)},e.prototype.updateOneNodeDelegateShape=function(t,e){var n=this.get("delegateStyle"),i=this.get("itemMap")||{},r=i[t.get("id")],o=t.getBBox();if(r){var a={x:o.minX,y:o.minY,width:o.width,height:o.height};r.attr(a)}else r=e.addShape("rect",{attrs:nE({x:o.minX,y:o.minY,width:o.width,height:o.height},n),name:"minimap-node-shape"});t.isVisible()?r.show():r.hide(),r.exist=!0,i[t.get("id")]=r,this.set("itemMap",i)},e.prototype.init=function(){this.initContainer(),this.get("graph").on("afterupdateitem",this.handleUpdateCanvas),this.get("graph").on("afteritemstatechange",this.handleUpdateCanvas),this.get("graph").on("afteradditem",this.handleUpdateCanvas),this.get("graph").on("afterremoveitem",this.handleUpdateCanvas),this.get("graph").on("afterrender",this.handleUpdateCanvas),this.get("graph").on("afterlayout",this.handleUpdateCanvas)},e.prototype.initContainer=function(){var t=this,e=t.get("graph"),n=t.get("size"),i=t.get("className"),r=t.get("container"),o=IM("<div class='"+i+"' style='width: "+n[0]+"px; height: "+n[1]+"px; overflow: hidden'></div>");(0,b.isString)(r)&&(r=document.getElementById(r)),r?r.appendChild(o):e.get("container").appendChild(o),t.set("container",o);var a,s=IM('<div class="g6-minimap-container" style="position: relative;"></div>');o.appendChild(s),s.addEventListener("dragenter",(function(t){t.preventDefault()})),s.addEventListener("dragover",(function(t){t.preventDefault()})),a="svg"===e.get("renderer")?new rh({container:s,width:n[0],height:n[1]}):new Qu({container:s,width:n[0],height:n[1]}),t.set("canvas",a),t.updateCanvas()},e.prototype.updateCanvas=function(){if(!this.destroyed&&this.get("refresh")){var t=this.get("graph");if(!t.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var e=this.get("size"),n=this.get("canvas"),i=this.get("type"),r=this.get("padding");if(!n.destroyed){switch(i){case"default":this.updateGraphShapes();break;case"keyShape":this.updateKeyShapes();break;case"delegate":this.updateDelegateShapes()}var o=n.get("children")[0];if(o){o.resetMatrix();var a=o.getCanvasBBox(),s=t.get("canvas").getCanvasBBox(),l=t.getZoom()||1,u=s.width/l,c=s.height/l;Number.isFinite(a.width)&&(u=iE(a.width,u),c=iE(a.height,c)),u+=2*r,c+=2*r;var h=Math.min(e[0]/u,e[1]/c),d=[1,0,0,0,1,0,0,0,1],f=0,p=0;Number.isFinite(a.minX)&&(f=-a.minX),Number.isFinite(a.minY)&&(p=-a.minY);var m=(e[0]-(u-2*r)*h)/2,g=(e[1]-(c-2*r)*h)/2;d=rE(d,[["t",f,p],["s",h,h],["t",m,g]]),o.setMatrix(d),this.set("ratio",h),this.set("totaldx",m+f*h),this.set("totaldy",g+p*h),this.set("dx",m),this.set("dy",g),this.updateViewport()}}}}},e.prototype.getCanvas=function(){return this.get("canvas")},e.prototype.getViewport=function(){return this.get("viewport")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.destroy=function(){this.get("canvas").destroy();var t=this.get("container");t.parentNode.removeChild(t)},e}(WM);const aE=oE;var sE=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();function lE(t,e,n){var i=t.x-e.x,r=t.y-e.y;return!n||Math.abs(i)>n||Math.abs(r)>n?Math.sqrt(i*i+r*r):n}function uE(t,e){var n=(e.source.y-e.target.y)/(e.source.x-e.target.x),i=(n*n*e.source.x+n*(t.y-e.source.y)+t.x)/(n*n+1);return{x:i,y:n*(i-e.source.x)+e.source.y}}var cE=function(t){function e(e){return t.call(this,e)||this}return sE(e,t),e.prototype.getDefaultCfgs=function(){return{edgeBundles:[],edgePoints:[],K:.1,lambda:.1,divisions:1,divRate:2,cycles:6,iterations:90,iterRate:.6666667,bundleThreshold:.6,eps:1e-6,onLayoutEnd:function(){},onTick:function(){}}},e.prototype.init=function(){var t=this.get("graph"),e=this.get("onTick");this.set("tick",(function(){e&&e(),t.refreshPositions()}))},e.prototype.bundling=function(t){var e=this;if(e.set("data",t),!e.isTicking()){var n=t.edges||[],i=t.nodes||[],r={},o=!1;if(i.forEach((function(t){null!==t.x&&null!==!t.y&&void 0!==t.x&&void 0!==!t.y||(o=!0),r[t.id]=t})),o)throw new Error("please layout the graph or assign x and y for nodes first");e.set("nodeIdMap",r);var a=e.get("divisions"),s=e.get("divRate"),l=e.divideEdges(a);e.set("edgePoints",l);var u=e.getEdgeBundles();e.set("edgeBundles",u);for(var c=e.get("cycles"),h=e.get("iterations"),d=e.get("iterRate"),f=e.get("lambda"),p=0;p<c;p++){for(var m=function(t){var i=[];n.forEach((function(t,n){if(t.source!==t.target){var o=r[t.source],s=r[t.target];i[n]=e.getEdgeForces({source:o,target:s},n,a,f);for(var u=0;u<a+1;u++)l[n][u].x+=i[n][u].x,l[n][u].y+=i[n][u].y}}))},g=0;g<h;g++)m();f/=2,a*=s,h*=d,l=e.divideEdges(a),e.set("edgePoints",l)}n.forEach((function(t,e){t.source!==t.target&&(t.type="polyline",t.controlPoints=l[e].slice(1,l[e].length-1))})),e.get("graph").refresh()}},e.prototype.updateBundling=function(t){var e=this,n=t.data;if(n&&e.set("data",n),e.get("ticking")&&e.set("ticking",!1),Object.keys(t).forEach((function(n){e.set(n,t[n])})),t.onTick){var i=this.get("graph");e.set("tick",(function(){t.onTick(),i.refresh()}))}e.bundling(n)},e.prototype.divideEdges=function(t){var e=this,n=e.get("data").edges,i=e.get("nodeIdMap"),r=e.get("edgePoints");return r&&void 0!==r||(r=[]),n.forEach((function(n,o){r[o]&&void 0!==r[o]||(r[o]=[]);var a=i[n.source],s=i[n.target];if(1===t)r[o].push({x:a.x,y:a.y}),r[o].push({x:.5*(a.x+s.x),y:.5*(a.y+s.y)}),r[o].push({x:s.x,y:s.y});else{var l=(r[o]&&r[o]!==[]?e.getEdgeLength(r[o]):lE({x:a.x,y:a.y},{x:s.x,y:s.y}))/(t+1),u=l,c=[{x:a.x,y:a.y}];r[o].forEach((function(t,e){if(0!==e){for(var n=lE(t,r[o][e-1]);n>u;){var i=u/n,a={x:r[o][e-1].x,y:r[o][e-1].y};a.x+=i*(t.x-r[o][e-1].x),a.y+=i*(t.y-r[o][e-1].y),c.push(a),n-=u,u=l}u-=n}})),c.push({x:s.x,y:s.y}),r[o]=c}})),r},e.prototype.getEdgeLength=function(t){var e=0;return t.forEach((function(n,i){0!==i&&(e+=lE(n,t[i-1]))})),e},e.prototype.getEdgeBundles=function(){var t=this,e=t.get("data").edges||[],n=t.get("bundleThreshold"),i=t.get("nodeIdMap"),r=t.get("edgeBundles");return r||(r=[]),e.forEach((function(t,e){r[e]&&void 0!==r[e]||(r[e]=[])})),e.forEach((function(o,a){var s=i[o.source],l=i[o.target];e.forEach((function(e,o){if(!(o<=a)){var u=i[e.source],c=i[e.target];t.getBundleScore({source:s,target:l},{source:u,target:c})>=n&&(r[a].push(o),r[o].push(a))}}))})),r},e.prototype.getBundleScore=function(t,e){var n=this;return t.vx=t.target.x-t.source.x,t.vy=t.target.y-t.source.y,e.vx=e.target.x-e.source.x,e.vy=e.target.y-e.source.y,t.length=lE({x:t.source.x,y:t.source.y},{x:t.target.x,y:t.target.y}),e.length=lE({x:e.source.x,y:e.source.y},{x:e.target.x,y:e.target.y}),n.getAngleScore(t,e)*n.getScaleScore(t,e)*n.getPositionScore(t,e)*n.getVisibilityScore(t,e)},e.prototype.getAngleScore=function(t,e){var n=function(t,e){return t.x*e.x+t.y*e.y}({x:t.vx,y:t.vy},{x:e.vx,y:e.vy});return n/(t.length*e.length)},e.prototype.getScaleScore=function(t,e){var n=(t.length+e.length)/2;return 2/(n/Math.min(t.length,e.length)+Math.max(t.length,e.length)/n)},e.prototype.getPositionScore=function(t,e){var n=(t.length+e.length)/2;return n/(n+lE({x:(t.source.x+t.target.x)/2,y:(t.source.y+t.target.y)/2},{x:(e.source.x+e.target.x)/2,y:(e.source.y+e.target.y)/2}))},e.prototype.getVisibilityScore=function(t,e){var n=this.getEdgeVisibility(t,e),i=this.getEdgeVisibility(e,t);return n<i?n:i},e.prototype.getEdgeVisibility=function(t,e){var n=uE(e.source,t),i=uE(e.target,t),r={x:(n.x+i.x)/2,y:(n.y+i.y)/2},o={x:(t.source.x+t.target.x)/2,y:(t.source.y+t.target.y)/2};return Math.max(0,1-2*lE(r,o)/lE(n,i))},e.prototype.getEdgeForces=function(t,e,n,i){for(var r=this,o=r.get("edgePoints"),a=r.get("K")/(lE(t.source,t.target)*(n+1)),s=[{x:0,y:0}],l=1;l<n;l++){var u={x:0,y:0},c=r.getSpringForce({pre:o[e][l-1],cur:o[e][l],next:o[e][l+1]},a),h=r.getElectrostaticForce(l,e);u.x=i*(c.x+h.x),u.y=i*(c.y+h.y),s.push(u)}return s.push({x:0,y:0}),s},e.prototype.getSpringForce=function(t,e){var n=t.pre.x+t.next.x-2*t.cur.x,i=t.pre.y+t.next.y-2*t.cur.y;return{x:n*=e,y:i*=e}},e.prototype.getElectrostaticForce=function(t,e){var n=this,i=n.get("eps"),r=n.get("edgeBundles"),o=n.get("edgePoints"),a=r[e],s={x:0,y:0};return a.forEach((function(n){var r={x:o[n][t].x-o[e][t].x,y:o[n][t].y-o[e][t].y};if(Math.abs(r.x)>i||Math.abs(r.y)>i){var a=1/lE(o[n][t],o[e][t]);s.x+=r.x*a,s.y+=r.y*a}})),s},e.prototype.isTicking=function(){return this.get("ticking")},e.prototype.getSimulation=function(){return this.get("forceSimulation")},e.prototype.destroy=function(){this.get("ticking")&&this.getSimulation().stop(),t.prototype.destroy.call(this)},e}(WM);const hE=cE;var dE=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),fE=function(){return fE=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},fE.apply(this,arguments)},pE={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:.1,fill:"#ccc"},mE=function(t){function e(e){return t.call(this,e)||this}return dE(e,t),e.prototype.getDefaultCfgs=function(){return{trigger:"mousemove",d:1.5,r:300,delegateStyle:(0,b.clone)(pE),showLabel:!1,maxD:5,minD:0,scaleRBy:"unset",scaleDBy:"unset",showDPercent:!0}},e.prototype.getEvents=function(){var t;switch(this.get("trigger")){case"click":t={click:"magnify"};break;case"drag":t={click:"createDelegate"};break;default:t={mousemove:"magnify"}}return t},e.prototype.init=function(){var t=this,e=t.get("r");t.set("cachedMagnifiedModels",[]),t.set("cachedOriginPositions",{}),t.set("r2",e*e);var n=t.get("d");t.set("molecularParam",(n+1)*e)},e.prototype.createDelegate=function(t){var e=this,n=this,i=n.get("delegate");i&&!i.destroyed||(n.magnify(t),(i=n.get("delegate")).on("dragstart",(function(t){n.set("delegateCenterDiff",{x:i.attr("x")-t.x,y:i.attr("y")-t.y})})),i.on("drag",(function(t){n.magnify(t)})),"wheel"===this.get("scaleDBy")&&i.on("mousewheel",(function(t){e.scaleDByWheel(t)})),"wheel"===this.get("scaleRBy")&&i.on("mousewheel",(function(t){n.scaleRByWheel(t)})))},e.prototype.scaleRByWheel=function(t){var e=this;if(t&&t.originalEvent){t.preventDefault&&t.preventDefault();var n,i=e.get("graph"),r=e.get("delegate"),o=(r?{x:r.attr("x"),y:r.attr("y")}:void 0)||i.getPointByClient(t.clientX,t.clientY);n=t.originalEvent.wheelDelta<0?.95:1/.95;var a=e.get("maxR"),s=e.get("minR"),l=e.get("r");(l>(a||i.get("height"))&&n>1||l<(s||.05*i.get("height"))&&n<1)&&(n=1),l*=n,e.set("r",l),e.set("r2",l*l);var u=e.get("d");e.set("molecularParam",(u+1)*l),e.set("delegateCenterDiff",void 0),e.magnify(t,o)}},e.prototype.scaleRByDrag=function(t){var e=this;if(t){var n,i=e.get("dragPrePos"),r=e.get("graph"),o=r.getPointByClient(t.clientX,t.clientY);n=t.x-i.x<0?.95:1/.95;var a=e.get("maxR"),s=e.get("minR"),l=e.get("r");(l>(a||r.get("height"))&&n>1||l<(s||.05*r.get("height"))&&n<1)&&(n=1),l*=n,e.set("r",l),e.set("r2",l*l);var u=e.get("d");e.set("molecularParam",(u+1)*l),e.magnify(t,o),e.set("dragPrePos",{x:t.x,y:t.y})}},e.prototype.scaleDByWheel=function(t){var e=this;if(t||t.originalEvent){t.preventDefault&&t.preventDefault();var n=0;n=t.originalEvent.wheelDelta<0?-.1:.1;var i=e.get("d")+n,r=e.get("maxD"),o=e.get("minD");if(i<r&&i>o){e.set("d",i);var a=e.get("r");e.set("molecularParam",(i+1)*a);var s=e.get("delegate"),l=s?{x:s.attr("x"),y:s.attr("y")}:void 0;e.set("delegateCenterDiff",void 0),e.magnify(t,l)}}},e.prototype.scaleDByDrag=function(t){var e=this,n=e.get("dragPrePos"),i=t.x-n.x>0?.1:-.1,r=e.get("d")+i,o=e.get("maxD"),a=e.get("minD");if(r<o&&r>a){e.set("d",r);var s=e.get("r");e.set("molecularParam",(r+1)*s),e.magnify(t)}e.set("dragPrePos",{x:t.x,y:t.y})},e.prototype.magnify=function(t,e){var n=this;n.restoreCache();var i=n.get("graph"),r=n.get("cachedMagnifiedModels"),o=n.get("cachedOriginPositions"),a=n.get("showLabel"),s=n.get("r"),l=n.get("r2"),u=n.get("d"),c=n.get("molecularParam"),h=i.getNodes(),d=h.length,f=e?{x:e.x,y:e.y}:{x:t.x,y:t.y};!n.get("dragging")||"mousemove"!==n.get("trigger")&&"click"!==n.get("trigger")||(f=n.get("cacheCenter"));var p=n.get("delegateCenterDiff");p&&(f.x+=p.x,f.y+=p.y),n.updateDelegate(f,s);for(var m=0;m<d;m++){var g=h[m].getModel(),v=g.x,y=g.y;if(!isNaN(v)&&!isNaN(y)){var b=(v-f.x)*(v-f.x)+(y-f.y)*(y-f.y);if(!isNaN(b)&&b<l&&0!==b){var _=Math.sqrt(b),w=c*_/(u*_+s),x=(v-f.x)/_,M=(y-f.y)/_;if(g.x=x*w+f.x,g.y=M*w+f.y,o[g.id]||(o[g.id]={x:v,y,texts:[]}),r.push(g),a&&2*_<s)for(var E=h[m].getContainer().getChildren(),S=E.length,k=0;k<S;k++){var C=E[k];"text"===C.get("type")&&(o[g.id].texts.push({visible:C.get("visible"),shape:C}),C.set("visible",!0))}}}}i.refreshPositions()},e.prototype.restoreCache=function(){for(var t=this,e=t.get("cachedMagnifiedModels"),n=t.get("cachedOriginPositions"),i=e.length,r=0;r<i;r++){var o=e[r],a=n[o.id];o.x=a.x,o.y=a.y;for(var s=a.texts.length,l=0;l<s;l++){var u=a.texts[l];u.shape.set("visible",u.visible)}}t.set("cachedMagnifiedModels",[]),t.set("cachedOriginPositions",{})},e.prototype.updateParams=function(t){var e=this,n=t.r,i=t.d,r=t.trigger,o=t.minD,a=t.maxD,s=t.minR,l=t.maxR,u=t.scaleDBy,c=t.scaleRBy;isNaN(t.r)||(e.set("r",n),e.set("r2",n*n)),isNaN(i)||e.set("d",i),isNaN(a)||e.set("maxD",a),isNaN(o)||e.set("minD",o),isNaN(l)||e.set("maxR",l),isNaN(s)||e.set("minR",s);var h,d=e.get("d"),f=e.get("r");(e.set("molecularParam",(d+1)*f),"mousemove"!==r&&"click"!==r&&"drag"!==r||e.set("trigger",r),"drag"===u||"wheel"===u||"unset"===u)&&(e.set("scaleDBy",u),e.get("delegate").remove(),e.get("delegate").destroy(),(h=e.get("dPercentText"))&&(h.remove(),h.destroy()));"drag"!==c&&"wheel"!==c&&"unset"!==c||(e.set("scaleRBy",c),e.get("delegate").remove(),e.get("delegate").destroy(),(h=e.get("dPercentText"))&&(h.remove(),h.destroy()))},e.prototype.updateDelegate=function(t,e){var n=this,i=this,r=i.get("graph"),o=i.get("delegate");if(!o||o.destroyed){var a=r.get("group"),s=i.get("delegateStyle")||pE;o=a.addShape("circle",{attrs:fE({r:e/1.5,x:t.x,y:t.y},s),name:"lens-shape",draggable:!0}),"drag"!==this.get("trigger")&&("wheel"===this.get("scaleRBy")?o.on("mousewheel",(function(t){i.scaleRByWheel(t)})):"drag"===this.get("scaleRBy")&&(o.on("dragstart",(function(t){i.set("dragging",!0),i.set("cacheCenter",{x:t.x,y:t.y}),i.set("dragPrePos",{x:t.x,y:t.y})})),o.on("drag",(function(t){i.scaleRByDrag(t)})),o.on("dragend",(function(t){i.set("dragging",!1)}))),"wheel"===this.get("scaleDBy")?o.on("mousewheel",(function(t){n.scaleDByWheel(t)})):"drag"===this.get("scaleDBy")&&(o.on("dragstart",(function(t){i.set("dragging",!0),i.set("cacheCenter",{x:t.x,y:t.y}),i.set("dragPrePos",{x:t.x,y:t.y})})),o.on("drag",(function(t){n.scaleDByDrag(t)})),o.on("dragend",(function(t){i.set("dragging",!1)}))))}else o.attr({x:t.x,y:t.y,r:e/1.5});if(i.get("showDPercent")){var l=Math.round((i.get("d")-i.get("minD"))/(i.get("maxD")-i.get("minD"))*100),u=i.get("dPercentText"),c=t.y+e/1.5+16;if(!u||u.destroyed)u=r.get("group").addShape("text",{attrs:{text:l+"%",x:t.x,y:c,fill:"#aaa",stroke:"#fff",lineWidth:1,fontSize:12}}),i.set("dPercentText",u);else u.attr({text:l+"%",x:t.x,y:c})}i.set("delegate",o)},e.prototype.clear=function(){var t=this.get("graph");this.restoreCache(),t.refreshPositions();var e=this.get("delegate");e&&!e.destroyed&&(e.remove(),e.destroy());var n=this.get("dPercentText");n&&!n.destroyed&&(n.remove(),n.destroy())},e.prototype.destroy=function(){this.clear()},e}(WM);const gE=mE;var vE=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();"undefined"!=typeof document&&ZM()("\n  .g6-component-toolbar {\n    position: absolute;\n    list-style-type: none;\n    padding: 6px;\n    left: 0px;\n    top: 0px;\n    background-color: rgba(255, 255, 255, 0.9);\n    border: 1px solid #e2e2e2;\n    border-radius: 4px;\n    font-size: 12px;\n    color: #545454;\n    margin: 0;\n  }\n  .g6-component-toolbar li {\n    float: left;\n    text-align: center;\n    width: 35px;\n    height: 24px;\n    cursor: pointer;\n\t\tlist-style-type:none;\n    list-style: none;\n    margin-left: 0px;\n  }\n  .g6-component-toolbar li .icon {\n    opacity: 0.7;\n  }\n  .g6-component-toolbar li .icon:hover {\n    opacity: 1;\n  }\n");var yE=function(t){function e(e){return t.call(this,e)||this}return vE(e,t),e.prototype.getDefaultCfgs=function(){return{handleClick:void 0,getContent:function(t){return'\n          <ul class=\'g6-component-toolbar\'>\n            <li code=\'redo\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">\n                <path d="M256 682.666667c0-102.741333 66.730667-213.333333 213.333333-213.333334 107.008 0 190.762667 56.576 230.570667 125.354667L611.968 682.666667H853.333333v-241.365334l-91.562666 91.562667C704.768 448.469333 601.130667 384 469.333333 384c-196.096 0-298.666667 150.229333-298.666666 298.666667h85.333333z" fill="" p-id="2041"></path>\n              </svg>\n            </li>\n            <li code=\'undo\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">\n                <path d="M170.666667 682.666667h241.365333l-87.936-87.978667C363.904 525.909333 447.658667 469.333333 554.666667 469.333333c146.602667 0 213.333333 110.592 213.333333 213.333334h85.333333c0-148.437333-102.570667-298.666667-298.666666-298.666667-131.797333 0-235.392 64.469333-292.48 148.821333L170.666667 441.301333V682.666667z" fill="" p-id="2764"></path>\n              </svg>\n            </li>\n            <li  code=\'zoomOut\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">\n                <path d="M658.432 428.736a33.216 33.216 0 0 1-33.152 33.152H525.824v99.456a33.216 33.216 0 0 1-66.304 0V461.888H360.064a33.152 33.152 0 0 1 0-66.304H459.52V296.128a33.152 33.152 0 0 1 66.304 0V395.52H625.28c18.24 0 33.152 14.848 33.152 33.152z m299.776 521.792a43.328 43.328 0 0 1-60.864-6.912l-189.248-220.992a362.368 362.368 0 0 1-215.36 70.848 364.8 364.8 0 1 1 364.8-364.736 363.072 363.072 0 0 1-86.912 235.968l192.384 224.64a43.392 43.392 0 0 1-4.8 61.184z m-465.536-223.36a298.816 298.816 0 0 0 298.432-298.432 298.816 298.816 0 0 0-298.432-298.432A298.816 298.816 0 0 0 194.24 428.8a298.816 298.816 0 0 0 298.432 298.432z"></path>\n              </svg>\n            </li>\n            <li code=\'zoomIn\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">\n                <path d="M639.936 416a32 32 0 0 1-32 32h-256a32 32 0 0 1 0-64h256a32 32 0 0 1 32 32z m289.28 503.552a41.792 41.792 0 0 1-58.752-6.656l-182.656-213.248A349.76 349.76 0 0 1 480 768 352 352 0 1 1 832 416a350.4 350.4 0 0 1-83.84 227.712l185.664 216.768a41.856 41.856 0 0 1-4.608 59.072zM479.936 704c158.784 0 288-129.216 288-288S638.72 128 479.936 128a288.32 288.32 0 0 0-288 288c0 158.784 129.216 288 288 288z" p-id="3853"></path>\n              </svg>\n            </li>\n            <li code=\'realZoom\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">\n                <path d="M384 320v384H320V320h64z m256 0v384H576V320h64zM512 576v64H448V576h64z m0-192v64H448V384h64z m355.968 576H92.032A28.16 28.16 0 0 1 64 931.968V28.032C64 12.608 76.608 0 95.168 0h610.368L896 192v739.968a28.16 28.16 0 0 1-28.032 28.032zM704 64v128h128l-128-128z m128 192h-190.464V64H128v832h704V256z"></path>\n              </svg>\n            </li>\n            <li code=\'autoZoom\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">\n                <path d="M684.288 305.28l0.128-0.64-0.128-0.64V99.712c0-19.84 15.552-35.904 34.496-35.712a35.072 35.072 0 0 1 34.56 35.776v171.008h170.944c19.648 0 35.84 15.488 35.712 34.432a35.072 35.072 0 0 1-35.84 34.496h-204.16l-0.64-0.128a32.768 32.768 0 0 1-20.864-7.552c-1.344-1.024-2.816-1.664-3.968-2.816-0.384-0.32-0.512-0.768-0.832-1.088a33.472 33.472 0 0 1-9.408-22.848zM305.28 64a35.072 35.072 0 0 0-34.56 35.776v171.008H99.776A35.072 35.072 0 0 0 64 305.216c0 18.944 15.872 34.496 35.84 34.496h204.16l0.64-0.128a32.896 32.896 0 0 0 20.864-7.552c1.344-1.024 2.816-1.664 3.904-2.816 0.384-0.32 0.512-0.768 0.768-1.088a33.024 33.024 0 0 0 9.536-22.848l-0.128-0.64 0.128-0.704V99.712A35.008 35.008 0 0 0 305.216 64z m618.944 620.288h-204.16l-0.64 0.128-0.512-0.128c-7.808 0-14.72 3.2-20.48 7.68-1.28 1.024-2.752 1.664-3.84 2.752-0.384 0.32-0.512 0.768-0.832 1.088a33.664 33.664 0 0 0-9.408 22.912l0.128 0.64-0.128 0.704v204.288c0 19.712 15.552 35.904 34.496 35.712a35.072 35.072 0 0 0 34.56-35.776V753.28h170.944c19.648 0 35.84-15.488 35.712-34.432a35.072 35.072 0 0 0-35.84-34.496z m-593.92 11.52c-0.256-0.32-0.384-0.768-0.768-1.088-1.088-1.088-2.56-1.728-3.84-2.688a33.088 33.088 0 0 0-20.48-7.68l-0.512 0.064-0.64-0.128H99.84a35.072 35.072 0 0 0-35.84 34.496 35.072 35.072 0 0 0 35.712 34.432H270.72v171.008c0 19.84 15.552 35.84 34.56 35.776a35.008 35.008 0 0 0 34.432-35.712V720l-0.128-0.64 0.128-0.704a33.344 33.344 0 0 0-9.472-22.848zM512 374.144a137.92 137.92 0 1 0 0.128 275.84A137.92 137.92 0 0 0 512 374.08z"></path>\n              </svg>\n            </li>\n          </ul>\n        '},zoomSensitivity:2}},e.prototype.init=function(){var t=this,e=this.get("graph"),n=this.get("getContent")(e),i=n;(0,b.isString)(n)&&(i=IM(n));var r=this.get("className");i.setAttribute("class",r||"g6-component-toolbar");var o=this.get("container");o||(o=this.get("graph").get("container")),(0,b.isString)(o)&&(o=document.getElementById(o)),o.appendChild(i),this.set("toolBar",i);var a=this.get("handleClick");i.addEventListener("click",(function(n){var i=function(t){if(!t)return[];if(t.composedPath)return t.composedPath();for(var e=[],n=t.target;n;){if(e.push(n),"HTML"===n.tagName)return e.push(document,window),e;n=n.parentElement}return e}(n).filter((function(t){return"LI"===t.nodeName}));if(0!==i.length){var r=i[0].getAttribute("code");r&&(a?a(r,e):t.handleDefaultOperator(r,e))}}));var s=this.get("position");s&&HM(i,{top:s.y+"px",left:s.x+"px"}),this.bindUndoRedo()},e.prototype.bindUndoRedo=function(){var t=this.get("graph"),e=document.querySelector('.g6-component-toolbar li[code="undo"]'),n=document.querySelector('.g6-component-toolbar li[code="undo"] svg'),i=document.querySelector('.g6-component-toolbar li[code="redo"]'),r=document.querySelector('.g6-component-toolbar li[code="redo"] svg');e&&n&&i&&r&&t.on("stackchange",(function(t){var o=t.undoStack,a=t.redoStack,s=o.length,l=a.length;1===s?(e.setAttribute("style","cursor: not-allowed"),n.setAttribute("style","opacity: 0.4")):(e.removeAttribute("style"),n.removeAttribute("style")),0===l?(i.setAttribute("style","cursor: not-allowed"),r.setAttribute("style","opacity: 0.4")):(i.removeAttribute("style"),r.removeAttribute("style"))}))},e.prototype.undo=function(){var t=this.get("graph"),e=t.getUndoStack();if(e&&1!==e.length){var n=e.pop();if(n){var i=n.action;t.pushStack(i,(0,b.clone)(n.data),"redo");var r=n.data.before;if("add"===i&&(r=n.data.after),!r)return;switch(i){case"visible":Object.keys(r).forEach((function(e){var n=r[e];n&&n.forEach((function(e){var n=t.findById(e.id);e.visible?t.showItem(n,!1):t.hideItem(n,!1)}))}));break;case"render":case"update":Object.keys(r).forEach((function(e){var n=r[e];n&&n.forEach((function(e){t.updateItem(e.id,e,!1)}))}));break;case"changedata":t.changeData(r,!1);break;case"delete":Object.keys(r).forEach((function(e){var n=r[e];n&&n.forEach((function(e){var n=e.itemType;delete e.itemType,t.addItem(n,e,!1)}))}));break;case"add":Object.keys(r).forEach((function(e){var n=r[e];n&&n.forEach((function(e){t.removeItem(e.id,!1)}))}));break;case"updateComboTree":Object.keys(r).forEach((function(e){var n=r[e];n&&n.forEach((function(e){t.updateComboTree(e.id,e.parentId,!1)}))}))}}}},e.prototype.redo=function(){var t=this.get("graph"),e=t.getRedoStack();if(e&&0!==e.length){var n=e.pop();if(n){var i=n.action,r=n.data.after;if(t.pushStack(i,(0,b.clone)(n.data)),"delete"===i&&(r=n.data.before),!r)return;switch(i){case"visible":Object.keys(r).forEach((function(e){var n=r[e];n&&n.forEach((function(e){var n=t.findById(e.id);e.visible?t.showItem(n,!1):t.hideItem(n,!1)}))}));break;case"render":case"update":Object.keys(r).forEach((function(e){var n=r[e];n&&n.forEach((function(e){t.updateItem(e.id,e,!1)}))}));break;case"changedata":t.changeData(r,!1);break;case"delete":r.edges&&r.edges.forEach((function(e){t.removeItem(e.id,!1)})),r.nodes&&r.nodes.forEach((function(e){t.removeItem(e.id,!1)})),r.combos&&r.combos.forEach((function(e){t.removeItem(e.id,!1)}));break;case"add":Object.keys(r).forEach((function(e){var n=r[e];n&&n.forEach((function(e){var n=e.itemType;delete e.itemType,t.addItem(n,e,!1)}))}));break;case"updateComboTree":Object.keys(r).forEach((function(e){var n=r[e];n&&n.forEach((function(e){t.updateComboTree(e.id,e.parentId,!1)}))}))}}}},e.prototype.handleDefaultOperator=function(t,e){var n=e.getZoom();switch(t){case"redo":this.redo();break;case"undo":this.undo();break;case"zoomOut":var i=1/(1-.05*this.get("zoomSensitivity"));if(i*n>(this.get("maxZoom")||e.get("maxZoom")))return;e.zoomTo(n*i);break;case"zoomIn":var r=1-.05*this.get("zoomSensitivity");if(r*n<(this.get("minZoom")||e.get("minZoom")))return;e.zoomTo(n*r);break;case"realZoom":e.zoomTo(1);break;case"autoZoom":e.fitView([20,20])}},e.prototype.destroy=function(){var t=this.get("toolBar");if(t){var e=this.get("container");e||(e=this.get("graph").get("container")),(0,b.isString)(e)&&(e=document.getElementById(e)),e.removeChild(t)}var n=this.get("handleClick");n&&t.removeEventListener("click",n)},e}(WM);const bE=yE;var _E=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();"undefined"!=typeof document&&ZM()("\n  .g6-component-tooltip {\n    border: 1px solid #e2e2e2;\n    border-radius: 4px;\n    font-size: 12px;\n    color: #545454;\n    background-color: rgba(255, 255, 255, 0.9);\n    padding: 10px 8px;\n    box-shadow: rgb(174, 174, 174) 0px 0px 10px;\n  }\n  .tooltip-type {\n    padding: 0;\n    margin: 0;\n  }\n  .tooltip-id {\n    color: #531dab;\n  }\n");var wE=function(t){function e(e){return t.call(this,e)||this}return _E(e,t),e.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,getContent:function(t){return"\n          <h4 class='tooltip-type'>"+t.item.getType()+"</h4>\n          <span class='tooltip-id'>ID"+t.item.getID()+"</span>\n        "},shouldBegin:function(t){return!0},itemTypes:["node","edge","combo"],trigger:"mouseenter",fixToNode:void 0}},e.prototype.getEvents=function(){return"click"===this.get("trigger")?{"node:click":"onClick","edge:click":"onClick","combo:click":"onClick","canvas:click":"onMouseLeave",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave",drag:"onMouseLeave"}:{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove","edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove","combo:mouseenter":"onMouseEnter","combo:mouseleave":"onMouseLeave","combo:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave","node:drag":"onMouseLeave"}},e.prototype.init=function(){var t=this,e=IM("<div class="+(t.get("className")||"g6-component-tooltip")+"></div>"),n=t.get("container");n||(n=t.get("graph").get("container")),(0,b.isString)(n)&&(n=document.getElementById(n)),HM(e,{position:"absolute",visibility:"hidden",display:"none"}),n.appendChild(e),"click"!==t.get("trigger")&&(e.addEventListener("mouseenter",(function(t){HM(e,{visibility:"visible",display:"unset"})})),e.addEventListener("mouseleave",(function(e){t.hideTooltip()}))),t.set("tooltip",e)},e.prototype.onClick=function(t){var e=this.get("itemTypes");if(!t.item||!t.item.getType||-1!==e.indexOf(t.item.getType())){var n=t.item,i=this.get("graph");this.currentTarget===n?(this.currentTarget=null,this.hideTooltip(),i.emit("tooltipchange",{item:t.item,action:"hide"})):(this.currentTarget=n,this.showTooltip(t),i.emit("tooltipchange",{item:t.item,action:"show"}))}},e.prototype.onMouseEnter=function(t){var e=this.get("itemTypes");if(!t.item||!t.item.getType||-1!==e.indexOf(t.item.getType())){var n=t.item,i=this.get("graph");this.currentTarget=n,this.showTooltip(t),i.emit("tooltipchange",{item:t.item,action:"show"})}},e.prototype.onMouseMove=function(t){var e=this.get("itemTypes");t.item&&t.item.getType&&-1===e.indexOf(t.item.getType())||this.currentTarget&&t.item===this.currentTarget&&this.showTooltip(t)},e.prototype.onMouseLeave=function(){this.hideTooltip(),this.get("graph").emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null},e.prototype.showTooltip=function(t){if(t.item){var e=this.get("itemTypes");if(!t.item.getType||-1!==e.indexOf(t.item.getType())){var n=this.get("tooltip"),i=this.get("getContent")(t);(0,b.isString)(i)?n.innerHTML=i:n.innerHTML=i.outerHTML,this.updatePosition(t)}}},e.prototype.hideTooltip=function(){var t=this.get("tooltip");t&&HM(t,{visibility:"hidden",display:"none"})},e.prototype.updatePosition=function(t){var e=this.get("shouldBegin"),n=this.get("tooltip");if(e(t)){var i=this.get("graph"),r=i.get("width"),o=i.get("height"),a=this.get("offsetX")||0,s=this.get("offsetY")||0,l=i.getPointByClient(t.clientX,t.clientY),u=this.get("fixToNode"),c=t.item;if(c.getType&&"node"===c.getType()&&u&&(0,b.isArray)(u)&&u.length>=2){var h=c.getBBox();l={x:h.minX+h.width*u[0],y:h.minY+h.height*u[1]}}var d=i.getCanvasByPoint(l.x,l.y),f=d.x,p=d.y,m=i.getContainer(),g={x:f+m.offsetLeft+a,y:p+m.offsetTop+s};HM(n,{visibility:"visible",display:"unset"});var v=n.getBoundingClientRect();f+v.width+a>r&&(g.x-=v.width+a),p+v.height+s>o&&(g.y-=v.height+s),HM(n,{left:g.x+"px",top:g.y+"px"})}else HM(n,{visibility:"hidden",display:"none"})},e.prototype.hide=function(){this.onMouseLeave()},e.prototype.destroy=function(){var t=this.get("tooltip");if(t){var e=this.get("container");e||(e=this.get("graph").get("container")),(0,b.isString)(e)&&(e=document.getElementById(e)),e.removeChild(t)}},e}(WM);const xE=wE;var ME={};function EE(t,e){ME[t]=e}var SE=function(){function t(t){this.type="base",this.isCategory=!1,this.isLinear=!1,this.isContinuous=!1,this.isIdentity=!1,this.values=[],this.range=[0,1],this.ticks=[],this.__cfg__=t,this.initCfg(),this.init()}return t.prototype.translate=function(t){return t},t.prototype.change=function(t){(0,b.assign)(this.__cfg__,t),this.init()},t.prototype.clone=function(){return this.constructor(this.__cfg__)},t.prototype.getTicks=function(){var t=this;return(0,b.map)(this.ticks,(function(e,n){return(0,b.isObject)(e)?e:{text:t.getText(e,n),tickValue:e,value:t.scale(e)}}))},t.prototype.getText=function(t,e){var n=this.formatter,i=n?n(t,e):t;return(0,b.isNil)(i)||!(0,b.isFunction)(i.toString)?"":i.toString()},t.prototype.getConfig=function(t){return this.__cfg__[t]},t.prototype.init=function(){(0,b.assign)(this,this.__cfg__),this.setDomain(),(0,b.isEmpty)(this.getConfig("ticks"))&&(this.ticks=this.calculateTicks())},t.prototype.initCfg=function(){},t.prototype.setDomain=function(){},t.prototype.calculateTicks=function(){var t=this.tickMethod,e=[];if((0,b.isString)(t)){var n=ME[t];if(!n)throw new Error("There is no method to to calculate ticks!");e=n(this)}else(0,b.isFunction)(t)&&(e=t(this));return e},t.prototype.rangeMin=function(){return this.range[0]},t.prototype.rangeMax=function(){return this.range[1]},t.prototype.calcPercent=function(t,e,n){return(0,b.isNumber)(t)?(t-e)/(n-e):NaN},t.prototype.calcValue=function(t,e,n){return e+t*(n-e)},t}();const kE=SE;var CE=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="cat",e.isCategory=!0,e}return(0,y.__extends)(e,t),e.prototype.buildIndexMap=function(){if(!this.translateIndexMap){this.translateIndexMap=new Map;for(var t=0;t<this.values.length;t++)this.translateIndexMap.set(this.values[t],t)}},e.prototype.translate=function(t){this.buildIndexMap();var e=this.translateIndexMap.get(t);return void 0===e&&(e=(0,b.isNumber)(t)?t:NaN),e},e.prototype.scale=function(t){var e=this.translate(t),n=this.calcPercent(e,this.min,this.max);return this.calcValue(n,this.rangeMin(),this.rangeMax())},e.prototype.invert=function(t){var e=this.max-this.min,n=this.calcPercent(t,this.rangeMin(),this.rangeMax()),i=Math.round(e*n)+this.min;return i<this.min||i>this.max?NaN:this.values[i]},e.prototype.getText=function(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var r=e;return(0,b.isNumber)(e)&&!this.values.includes(e)&&(r=this.values[r]),t.prototype.getText.apply(this,(0,y.__spreadArray)([r],n,!1))},e.prototype.initCfg=function(){this.tickMethod="cat"},e.prototype.setDomain=function(){if((0,b.isNil)(this.getConfig("min"))&&(this.min=0),(0,b.isNil)(this.getConfig("max"))){var t=this.values.length;this.max=t>1?t-1:t}this.translateIndexMap&&(this.translateIndexMap=void 0)},e}(kE);const TE=CE;var DE=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,LE="[1-9]\\d?",AE="\\d\\d",OE="[^\\s]+",PE=/\[([^]*?)\]/gm;function IE(t,e){for(var n=[],i=0,r=t.length;i<r;i++)n.push(t[i].substr(0,e));return n}var NE=function(t){return function(e,n){var i=n[t].map((function(t){return t.toLowerCase()})),r=i.indexOf(e.toLowerCase());return r>-1?r:null}};function RE(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var i=0,r=e;i<r.length;i++){var o=r[i];for(var a in o)t[a]=o[a]}return t}var YE=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],jE=["January","February","March","April","May","June","July","August","September","October","November","December"],FE=IE(jE,3),BE={dayNamesShort:IE(YE,3),dayNames:YE,monthNamesShort:FE,monthNames:jE,amPm:["am","pm"],DoFn:function(t){return t+["th","st","nd","rd"][t%10>3?0:(t-t%10!=10?1:0)*t%10]}},zE=RE({},BE),HE=function(t){return zE=RE(zE,t)},GE=function(t){return t.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},WE=function(t,e){for(void 0===e&&(e=2),t=String(t);t.length<e;)t="0"+t;return t},UE={D:function(t){return String(t.getDate())},DD:function(t){return WE(t.getDate())},Do:function(t,e){return e.DoFn(t.getDate())},d:function(t){return String(t.getDay())},dd:function(t){return WE(t.getDay())},ddd:function(t,e){return e.dayNamesShort[t.getDay()]},dddd:function(t,e){return e.dayNames[t.getDay()]},M:function(t){return String(t.getMonth()+1)},MM:function(t){return WE(t.getMonth()+1)},MMM:function(t,e){return e.monthNamesShort[t.getMonth()]},MMMM:function(t,e){return e.monthNames[t.getMonth()]},YY:function(t){return WE(String(t.getFullYear()),4).substr(2)},YYYY:function(t){return WE(t.getFullYear(),4)},h:function(t){return String(t.getHours()%12||12)},hh:function(t){return WE(t.getHours()%12||12)},H:function(t){return String(t.getHours())},HH:function(t){return WE(t.getHours())},m:function(t){return String(t.getMinutes())},mm:function(t){return WE(t.getMinutes())},s:function(t){return String(t.getSeconds())},ss:function(t){return WE(t.getSeconds())},S:function(t){return String(Math.round(t.getMilliseconds()/100))},SS:function(t){return WE(Math.round(t.getMilliseconds()/10),2)},SSS:function(t){return WE(t.getMilliseconds(),3)},a:function(t,e){return t.getHours()<12?e.amPm[0]:e.amPm[1]},A:function(t,e){return t.getHours()<12?e.amPm[0].toUpperCase():e.amPm[1].toUpperCase()},ZZ:function(t){var e=t.getTimezoneOffset();return(e>0?"-":"+")+WE(100*Math.floor(Math.abs(e)/60)+Math.abs(e)%60,4)},Z:function(t){var e=t.getTimezoneOffset();return(e>0?"-":"+")+WE(Math.floor(Math.abs(e)/60),2)+":"+WE(Math.abs(e)%60,2)}},VE=function(t){return+t-1},XE=[null,LE],qE=[null,OE],KE=["isPm",OE,function(t,e){var n=t.toLowerCase();return n===e.amPm[0]?0:n===e.amPm[1]?1:null}],$E=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(t){var e=(t+"").match(/([+-]|\d\d)/gi);if(e){var n=60*+e[1]+parseInt(e[2],10);return"+"===e[0]?n:-n}return 0}],ZE={D:["day",LE],DD:["day",AE],Do:["day","[1-9]\\d?[^\\s]+",function(t){return parseInt(t,10)}],M:["month",LE,VE],MM:["month",AE,VE],YY:["year",AE,function(t){var e=+(""+(new Date).getFullYear()).substr(0,2);return+(""+(+t>68?e-1:e)+t)}],h:["hour",LE,void 0,"isPm"],hh:["hour",AE,void 0,"isPm"],H:["hour",LE],HH:["hour",AE],m:["minute",LE],mm:["minute",AE],s:["second",LE],ss:["second",AE],YYYY:["year","\\d{4}"],S:["millisecond","\\d",function(t){return 100*+t}],SS:["millisecond",AE,function(t){return 10*+t}],SSS:["millisecond","\\d{3}"],d:XE,dd:XE,ddd:qE,dddd:qE,MMM:["month",OE,NE("monthNamesShort")],MMMM:["month",OE,NE("monthNames")],a:KE,A:KE,ZZ:$E,Z:$E},JE={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},QE=function(t){return RE(JE,t)},tS=function(t,e,n){if(void 0===e&&(e=JE.default),void 0===n&&(n={}),"number"==typeof t&&(t=new Date(t)),"[object Date]"!==Object.prototype.toString.call(t)||isNaN(t.getTime()))throw new Error("Invalid Date pass to format");var i=[];e=(e=JE[e]||e).replace(PE,(function(t,e){return i.push(e),"@@@"}));var r=RE(RE({},zE),n);return(e=e.replace(DE,(function(e){return UE[e](t,r)}))).replace(/@@@/g,(function(){return i.shift()}))};function eS(t,e,n){if(void 0===n&&(n={}),"string"!=typeof e)throw new Error("Invalid format in fecha parse");if(e=JE[e]||e,t.length>1e3)return null;var i={year:(new Date).getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},r=[],o=[],a=e.replace(PE,(function(t,e){return o.push(GE(e)),"@@@"})),s={},l={};a=GE(a).replace(DE,(function(t){var e=ZE[t],n=e[0],i=e[1],o=e[3];if(s[n])throw new Error("Invalid format. "+n+" specified twice in format");return s[n]=!0,o&&(l[o]=!0),r.push(e),"("+i+")"})),Object.keys(l).forEach((function(t){if(!s[t])throw new Error("Invalid format. "+t+" is required in specified format")})),a=a.replace(/@@@/g,(function(){return o.shift()}));var u=t.match(new RegExp(a,"i"));if(!u)return null;for(var c=RE(RE({},zE),n),h=1;h<u.length;h++){var d=r[h-1],f=d[0],p=d[2],m=p?p(u[h],c):+u[h];if(null==m)return null;i[f]=m}1===i.isPm&&null!=i.hour&&12!=+i.hour?i.hour=+i.hour+12:0===i.isPm&&12==+i.hour&&(i.hour=0);for(var g=new Date(i.year,i.month,i.day,i.hour,i.minute,i.second,i.millisecond),v=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],y=(h=0,v.length);h<y;h++)if(s[v[h][0]]&&i[v[h][0]]!==g[v[h][1]]())return null;return null==i.timezoneOffset?g:new Date(Date.UTC(i.year,i.month,i.day,i.hour,i.minute-i.timezoneOffset,i.second,i.millisecond))}const nS={format:tS,parse:eS,defaultI18n:BE,setGlobalDateI18n:HE,setGlobalDateMasks:QE};function iS(t,e){return(v.format||nS.format)(t,e)}function rS(t){return(0,b.isString)(t)&&(t=t.indexOf("T")>0?new Date(t).getTime():new Date(t.replace(/-/gi,"/")).getTime()),(0,b.isDate)(t)&&(t=t.getTime()),t}var oS=1e3,aS=6e4,sS=36e5,lS=24*sS,uS=31*lS,cS=365*lS,hS=[["HH:mm:ss",oS],["HH:mm:ss",1e4],["HH:mm:ss",3e4],["HH:mm",aS],["HH:mm",6e5],["HH:mm",18e5],["HH",sS],["HH",6*sS],["HH",12*sS],["YYYY-MM-DD",lS],["YYYY-MM-DD",4*lS],["YYYY-WW",7*lS],["YYYY-MM",uS],["YYYY-MM",4*uS],["YYYY-MM",6*uS],["YYYY",380*lS]];function dS(t,e,n){var i,r=(i=function(t){return t[1]},function(t,e,n,r){for(var o=(0,b.isNil)(n)?0:n,a=(0,b.isNil)(r)?t.length:r;o<a;){var s=o+a>>>1;i(t[s])>e?a=s:o=s+1}return o})(hS,(e-t)/n)-1,o=hS[r];return r<0?o=hS[0]:r>=hS.length&&(o=(0,b.last)(hS)),o}var fS=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="timeCat",e}return(0,y.__extends)(e,t),e.prototype.translate=function(t){t=rS(t);var e=this.values.indexOf(t);return-1===e&&(e=(0,b.isNumber)(t)&&t<this.values.length?t:NaN),e},e.prototype.getText=function(t,e){var n=this.translate(t);if(n>-1){var i=this.values[n],r=this.formatter;return i=r?r(i,e):iS(i,this.mask)}return t},e.prototype.initCfg=function(){this.tickMethod="time-cat",this.mask="YYYY-MM-DD",this.tickCount=7},e.prototype.setDomain=function(){var e=this.values;(0,b.each)(e,(function(t,n){e[n]=rS(t)})),e.sort((function(t,e){return t-e})),t.prototype.setDomain.call(this)},e}(TE);const pS=fS;var mS=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isContinuous=!0,e}return(0,y.__extends)(e,t),e.prototype.scale=function(t){if((0,b.isNil)(t))return NaN;var e=this.rangeMin(),n=this.rangeMax();return this.max===this.min?e:e+this.getScalePercent(t)*(n-e)},e.prototype.init=function(){t.prototype.init.call(this);var e=this.ticks,n=(0,b.head)(e),i=(0,b.last)(e);n<this.min&&(this.min=n),i>this.max&&(this.max=i),(0,b.isNil)(this.minLimit)||(this.min=n),(0,b.isNil)(this.maxLimit)||(this.max=i)},e.prototype.setDomain=function(){var t=(0,b.getRange)(this.values),e=t.min,n=t.max;(0,b.isNil)(this.min)&&(this.min=e),(0,b.isNil)(this.max)&&(this.max=n),this.min>this.max&&(this.min=e,this.max=n)},e.prototype.calculateTicks=function(){var e=this,n=t.prototype.calculateTicks.call(this);return this.nice||(n=(0,b.filter)(n,(function(t){return t>=e.min&&t<=e.max}))),n},e.prototype.getScalePercent=function(t){var e=this.max,n=this.min;return(t-n)/(e-n)},e.prototype.getInvertPercent=function(t){return(t-this.rangeMin())/(this.rangeMax()-this.rangeMin())},e}(kE);const gS=mS;var vS=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="linear",e.isLinear=!0,e}return(0,y.__extends)(e,t),e.prototype.invert=function(t){var e=this.getInvertPercent(t);return this.min+e*(this.max-this.min)},e.prototype.initCfg=function(){this.tickMethod="wilkinson-extended",this.nice=!1},e}(gS);const yS=vS;function bS(t,e){var n=Math.E;return e>=0?Math.pow(n,Math.log(e)/t):-1*Math.pow(n,Math.log(-e)/t)}function _S(t,e){return 1===t?1:Math.log(e)/Math.log(t)}function wS(t,e,n){(0,b.isNil)(n)&&(n=Math.max.apply(null,t));var i=n;return(0,b.each)(t,(function(t){t>0&&t<i&&(i=t)})),i===n&&(i=n/e),i>1&&(i=1),i}var xS=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="log",e}return(0,y.__extends)(e,t),e.prototype.invert=function(t){var e,n=this.base,i=_S(n,this.max),r=this.rangeMin(),o=this.rangeMax()-r,a=this.positiveMin;if(a){if(0===t)return 0;var s=1/(i-(e=_S(n,a/n)))*o;if(t<s)return t/s*a}else e=_S(n,this.min);var l=(t-r)/o*(i-e)+e;return Math.pow(n,l)},e.prototype.initCfg=function(){this.tickMethod="log",this.base=10,this.tickCount=6,this.nice=!0},e.prototype.setDomain=function(){t.prototype.setDomain.call(this);var e=this.min;if(e<0)throw new Error("When you use log scale, the minimum value must be greater than zero!");0===e&&(this.positiveMin=wS(this.values,this.base,this.max))},e.prototype.getScalePercent=function(t){var e=this.max,n=this.min;if(e===n)return 0;if(t<=0)return 0;var i=this.base,r=this.positiveMin;return r&&(n=1*r/i),t<r?t/r/(_S(i,e)-_S(i,n)):(_S(i,t)-_S(i,n))/(_S(i,e)-_S(i,n))},e}(gS);const MS=xS;var ES=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="pow",e}return(0,y.__extends)(e,t),e.prototype.invert=function(t){var e=this.getInvertPercent(t),n=this.exponent,i=bS(n,this.max),r=bS(n,this.min),o=e*(i-r)+r,a=o>=0?1:-1;return Math.pow(o,n)*a},e.prototype.initCfg=function(){this.tickMethod="pow",this.exponent=2,this.tickCount=5,this.nice=!0},e.prototype.getScalePercent=function(t){var e=this.max,n=this.min;if(e===n)return 0;var i=this.exponent;return(bS(i,t)-bS(i,n))/(bS(i,e)-bS(i,n))},e}(gS);const SS=ES;var kS=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="time",e}return(0,y.__extends)(e,t),e.prototype.getText=function(t,e){var n=this.translate(t),i=this.formatter;return i?i(n,e):iS(n,this.mask)},e.prototype.scale=function(e){var n=e;return((0,b.isString)(n)||(0,b.isDate)(n))&&(n=this.translate(n)),t.prototype.scale.call(this,n)},e.prototype.translate=function(t){return rS(t)},e.prototype.initCfg=function(){this.tickMethod="time-pretty",this.mask="YYYY-MM-DD",this.tickCount=7,this.nice=!1},e.prototype.setDomain=function(){var t=this.values,e=this.getConfig("min"),n=this.getConfig("max");if((0,b.isNil)(e)&&(0,b.isNumber)(e)||(this.min=this.translate(this.min)),(0,b.isNil)(n)&&(0,b.isNumber)(n)||(this.max=this.translate(this.max)),t&&t.length){var i=[],r=1/0,o=r,a=0;(0,b.each)(t,(function(t){var e=rS(t);if(isNaN(e))throw new TypeError("Invalid Time: "+t+" in time scale!");r>e?(o=r,r=e):o>e&&(o=e),a<e&&(a=e),i.push(e)})),t.length>1&&(this.minTickInterval=o-r),(0,b.isNil)(e)&&(this.min=r),(0,b.isNil)(n)&&(this.max=a)}},e}(yS);const CS=kS;var TS=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="quantize",e}return(0,y.__extends)(e,t),e.prototype.invert=function(t){var e=this.ticks,n=e.length,i=this.getInvertPercent(t),r=Math.floor(i*(n-1));if(r>=n-1)return(0,b.last)(e);if(r<0)return(0,b.head)(e);var o=e[r],a=r/(n-1);return o+(i-a)/((r+1)/(n-1)-a)*(e[r+1]-o)},e.prototype.initCfg=function(){this.tickMethod="r-pretty",this.tickCount=5,this.nice=!0},e.prototype.calculateTicks=function(){var e=t.prototype.calculateTicks.call(this);return this.nice||((0,b.last)(e)!==this.max&&e.push(this.max),(0,b.head)(e)!==this.min&&e.unshift(this.min)),e},e.prototype.getScalePercent=function(t){var e=this.ticks;if(t<(0,b.head)(e))return 0;if(t>(0,b.last)(e))return 1;var n=0;return(0,b.each)(e,(function(e,i){if(!(t>=e))return!1;n=i})),n/(e.length-1)},e}(gS);const DS=TS;const LS=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="quantile",e}return(0,y.__extends)(e,t),e.prototype.initCfg=function(){this.tickMethod="quantile",this.tickCount=5,this.nice=!0},e}(DS);var AS={};function OS(t,e){if(function(t){return AS[t]}(t))throw new Error("type '"+t+"' existed.");AS[t]=e}var PS=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="identity",e.isIdentity=!0,e}return(0,y.__extends)(e,t),e.prototype.calculateTicks=function(){return this.values},e.prototype.scale=function(t){return this.values[0]!==t&&(0,b.isNumber)(t)?t:this.range[0]},e.prototype.invert=function(t){var e=this.range;return t<e[0]||t>e[1]?NaN:this.values[0]},e}(kE);const IS=PS;function NS(t){return Math.abs(t)<1e-15?t:parseFloat(t.toFixed(15))}var RS=[1,5,2,2.5,4,3],YS=100*Number.EPSILON;function jS(t,e,n,i,r,o){var a=(0,b.size)(e),s=(0,b.indexOf)(e,t),l=0,u=function(t,e){return(t%e+e)%e}(i,o);return(u<YS||o-u<YS)&&i<=0&&r>=0&&(l=1),1-s/(a-1)-n+l}function FS(t,e,n){var i=(0,b.size)(e);return 1-(0,b.indexOf)(e,t)/(i-1)-n+1}function BS(t,e,n,i,r,o){var a=(t-1)/(o-r),s=(e-1)/(Math.max(o,i)-Math.min(n,r));return 2-Math.max(a/s,s/a)}function zS(t,e){return t>=e?2-(t-1)/(e-1):1}function HS(t,e,n,i){var r=e-t;return 1-.5*(Math.pow(e-i,2)+Math.pow(t-n,2))/Math.pow(.1*r,2)}function GS(t,e,n){var i=e-t;if(n>i){var r=(n-i)/2;return 1-Math.pow(r,2)/Math.pow(.1*i,2)}return 1}function WS(t,e,n,i,r,o){void 0===n&&(n=5),void 0===i&&(i=!0),void 0===r&&(r=RS),void 0===o&&(o=[.25,.2,.5,.05]);var a=n<0?0:Math.round(n);if(Number.isNaN(t)||Number.isNaN(e)||"number"!=typeof t||"number"!=typeof e||!a)return{min:0,max:0,ticks:[]};if(e-t<1e-15||1===a)return{min:t,max:e,ticks:[t]};for(var s={score:-2,lmin:0,lmax:0,lstep:0},l=1;l<1/0;){for(var u=0;u<r.length;u+=1){var c=r[u],h=FS(c,r,l);if(o[0]*h+o[1]+o[2]+o[3]<s.score){l=1/0;break}for(var d=2;d<1/0;){var f=zS(d,a);if(o[0]*h+o[1]+o[2]*f+o[3]<s.score)break;for(var p=(e-t)/(d+1)/l/c,m=Math.ceil(Math.log10(p));m<1/0;){var g=l*c*Math.pow(10,m),v=GS(t,e,g*(d-1));if(o[0]*h+o[1]*v+o[2]*f+o[3]<s.score)break;var y=Math.floor(e/g)*l-(d-1)*l,_=Math.ceil(t/g)*l;if(y<=_)for(var w=_-y,x=0;x<=w;x+=1){var M=(y+x)*(g/l),E=M+g*(d-1),S=g,k=jS(c,r,l,M,E,S),C=HS(t,e,M,E),T=BS(d,a,t,e,M,E),D=o[0]*k+o[1]*C+o[2]*T+1*o[3];D>s.score&&(!i||M<=t&&E>=e)&&(s.lmin=M,s.lmax=E,s.lstep=S,s.score=D)}m+=1}d+=1}}l+=1}var L=NS(s.lmax),A=NS(s.lmin),O=NS(s.lstep),P=Math.floor(function(t){return Math.round(1e12*t)/1e12}((L-A)/O))+1,I=new Array(P);I[0]=NS(A);for(u=1;u<P;u++)I[u]=NS(I[u-1]+O);return{min:Math.min(t,(0,b.head)(I)),max:Math.max(e,(0,b.last)(I)),ticks:I}}function US(t){var e=t.values,n=t.tickInterval,i=t.tickCount,r=e;if((0,b.isNumber)(n))return(0,b.filter)(r,(function(t,e){return e%n==0}));var o=t.min,a=t.max;if((0,b.isNil)(o)&&(o=0),(0,b.isNil)(a)&&(a=e.length-1),(0,b.isNumber)(i)&&i<a-o){var s=WS(o,a,i,!1,[1,2,5,3,4,7,6,8,9]).ticks;return(0,b.filter)(s,(function(t){return t>=o&&t<=a})).map((function(t){return e[t]}))}return e.slice(o,a+1)}var VS=Math.sqrt(50),XS=Math.sqrt(10),qS=Math.sqrt(2),KS=function(){function t(){this._domain=[0,1]}return t.prototype.domain=function(t){return t?(this._domain=Array.from(t,Number),this):this._domain.slice()},t.prototype.nice=function(t){var e,n;void 0===t&&(t=5);var i,r=this._domain.slice(),o=0,a=this._domain.length-1,s=this._domain[o],l=this._domain[a];return l<s&&(s=(e=[l,s])[0],l=e[1],o=(n=[a,o])[0],a=n[1]),(i=$S(s,l,t))>0?i=$S(s=Math.floor(s/i)*i,l=Math.ceil(l/i)*i,t):i<0&&(i=$S(s=Math.ceil(s*i)/i,l=Math.floor(l*i)/i,t)),i>0?(r[o]=Math.floor(s/i)*i,r[a]=Math.ceil(l/i)*i,this.domain(r)):i<0&&(r[o]=Math.ceil(s*i)/i,r[a]=Math.floor(l*i)/i,this.domain(r)),this},t.prototype.ticks=function(t){return void 0===t&&(t=5),function(t,e,n){var i,r,o,a,s=-1;if(n=+n,(t=+t)===(e=+e)&&n>0)return[t];(i=e<t)&&(r=t,t=e,e=r);if(0===(a=$S(t,e,n))||!isFinite(a))return[];if(a>0)for(t=Math.ceil(t/a),e=Math.floor(e/a),o=new Array(r=Math.ceil(e-t+1));++s<r;)o[s]=(t+s)*a;else for(t=Math.floor(t*a),e=Math.ceil(e*a),o=new Array(r=Math.ceil(t-e+1));++s<r;)o[s]=(t-s)/a;i&&o.reverse();return o}(this._domain[0],this._domain[this._domain.length-1],t||5)},t}();function $S(t,e,n){var i=(e-t)/Math.max(0,n),r=Math.floor(Math.log(i)/Math.LN10),o=i/Math.pow(10,r);return r>=0?(o>=VS?10:o>=XS?5:o>=qS?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(o>=VS?10:o>=XS?5:o>=qS?2:1)}function ZS(t,e,n){return("ceil"===n?Math.ceil(t/e):"floor"===n?Math.floor(t/e):Math.round(t/e))*e}function JS(t,e,n){var i=ZS(t,n,"floor"),r=ZS(e,n,"ceil");i=(0,b.fixedBase)(i,n),r=(0,b.fixedBase)(r,n);for(var o=[],a=i;a<=r;a+=n){var s=(0,b.fixedBase)(a,n);o.push(s)}return{min:i,max:r,ticks:o}}function QS(t,e,n){var i,r=t.minLimit,o=t.maxLimit,a=t.min,s=t.max,l=t.tickCount,u=void 0===l?5:l,c=(0,b.isNil)(r)?(0,b.isNil)(e)?a:e:r,h=(0,b.isNil)(o)?(0,b.isNil)(n)?s:n:o;if(c>h&&(h=(i=[c,h])[0],c=i[1]),u<=2)return[c,h];for(var d=(h-c)/(u-1),f=[],p=0;p<u;p++)f.push(c+d*p);return f}function tk(t,e,n){if(void 0===n&&(n=5),t===e)return{max:e,min:t,ticks:[t]};var i=n<0?0:Math.round(n);if(0===i)return{max:e,min:t,ticks:[]};var r=(e-t)/i,o=Math.pow(10,Math.floor(Math.log10(r))),a=o;2*o-r<1.5*(r-a)&&5*o-r<2.75*(r-(a=2*o))&&10*o-r<1.5*(r-(a=5*o))&&(a=10*o);for(var s=Math.ceil(e/a),l=Math.floor(t/a),u=Math.max(s*a,e),c=Math.min(l*a,t),h=Math.floor((u-c)/a)+1,d=new Array(h),f=0;f<h;f++)d[f]=NS(c+f*a);return{min:c,max:u,ticks:d}}function ek(t,e){var n=t.length*e;return 1===e?t[t.length-1]:0===e?t[0]:n%1!=0?t[Math.ceil(n)-1]:t.length%2==0?(t[n-1]+t[n])/2:t[n]}function nk(t){return new Date(t).getFullYear()}function ik(t){return new Date(t,0,1).getTime()}function rk(t){return new Date(t).getMonth()}function ok(t,e){return new Date(t,e,1).getTime()}EE("cat",US),EE("time-cat",(function(t){var e=US(t),n=(0,b.last)(t.values);return n!==(0,b.last)(e)&&e.push(n),e})),EE("wilkinson-extended",(function(t){var e=t.min,n=t.max,i=t.tickCount,r=t.nice,o=t.tickInterval,a=t.minLimit,s=t.maxLimit,l=WS(e,n,i,r).ticks;return(0,b.isNil)(a)&&(0,b.isNil)(s)?o?JS(e,n,o).ticks:l:QS(t,(0,b.head)(l),(0,b.last)(l))})),EE("r-pretty",(function(t){var e=t.min,n=t.max,i=t.tickCount,r=t.tickInterval,o=t.minLimit,a=t.maxLimit,s=tk(e,n,i).ticks;return(0,b.isNil)(o)&&(0,b.isNil)(a)?r?JS(e,n,r).ticks:s:QS(t,(0,b.head)(s),(0,b.last)(s))})),EE("time",(function(t){var e=t.min,n=t.max,i=t.minTickInterval,r=t.tickInterval,o=t.tickCount;if(r)o=Math.ceil((n-e)/r);else{var a=(n-e)/(r=dS(e,n,o)[1])/o;a>1&&(r*=Math.ceil(a)),i&&r<i&&(r=i)}for(var s=[],l=e;l<n+r;l+=r)s.push(l);return s})),EE("time-pretty",(function(t){var e=t.min,n=t.max,i=t.minTickInterval,r=t.tickCount,o=t.tickInterval,a=[];o||(o=(n-e)/r,i&&o<i&&(o=i));var s=nk(e);if(o>cS)for(var l=nk(n),u=Math.ceil(o/cS),c=s;c<=l+u;c+=u)a.push(ik(c));else if(o>uS){var h=Math.ceil(o/uS),d=rk(e),f=function(t,e){var n=nk(t),i=nk(e),r=rk(t);return 12*(i-n)+(rk(e)-r)%12}(e,n);for(c=0;c<=f+h;c+=h)a.push(ok(s,c+d))}else if(o>lS){var p=(b=new Date(e)).getFullYear(),m=b.getMonth(),g=b.getDate(),v=Math.ceil(o/lS),y=function(t,e){return Math.ceil((e-t)/lS)}(e,n);for(c=0;c<y+v;c+=v)a.push(new Date(p,m,g+c).getTime())}else if(o>sS){p=(b=new Date(e)).getFullYear(),m=b.getMonth(),v=b.getDate();var b,_=b.getHours(),w=Math.ceil(o/sS),x=function(t,e){return Math.ceil((e-t)/sS)}(e,n);for(c=0;c<=x+w;c+=w)a.push(new Date(p,m,v,_+c).getTime())}else if(o>aS){var M=function(t,e){return Math.ceil((e-t)/6e4)}(e,n),E=Math.ceil(o/aS);for(c=0;c<=M+E;c+=E)a.push(e+c*aS)}else{var S=o;S<oS&&(S=oS);var k=Math.floor(e/oS)*oS,C=Math.ceil((n-e)/oS),T=Math.ceil(S/oS);for(c=0;c<C+T;c+=T)a.push(k+c*oS)}return a.length>=512&&console.warn("Notice: current ticks length("+a.length+') >= 512, may cause performance issues, even out of memory. Because of the configure "tickInterval"(in milliseconds, current is '+o+") is too small, increase the value to solve the problem!"),a})),EE("log",(function(t){var e,n=t.base,i=t.tickCount,r=t.min,o=t.max,a=t.values,s=_S(n,o);if(r>0)e=Math.floor(_S(n,r));else{var l=wS(a,n,o);e=Math.floor(_S(n,l))}for(var u=s-e,c=Math.ceil(u/i),h=[],d=e;d<s+c;d+=c)h.push(Math.pow(n,d));return r<=0&&h.unshift(0),h})),EE("pow",(function(t){var e=t.exponent,n=t.tickCount,i=Math.ceil(bS(e,t.max));return tk(Math.floor(bS(e,t.min)),i,n).ticks.map((function(t){var n=t>=0?1:-1;return Math.pow(t,e)*n}))})),EE("quantile",(function(t){var e=t.tickCount,n=t.values;if(!n||!n.length)return[];for(var i=n.slice().sort((function(t,e){return t-e})),r=[],o=0;o<e;o++){var a=o/(e-1);r.push(ek(i,a))}return r})),EE("d3-linear",(function(t){var e=t.min,n=t.max,i=t.tickInterval,r=t.minLimit,o=t.maxLimit,a=function(t){var e=t.min,n=t.max,i=t.nice,r=t.tickCount,o=new KS;return o.domain([e,n]),i&&o.nice(r),o.ticks(r)}(t);return(0,b.isNil)(r)&&(0,b.isNil)(o)?i?JS(e,n,i).ticks:a:QS(t,(0,b.head)(a),(0,b.last)(a))})),OS("cat",TE),OS("category",TE),OS("identity",IS),OS("linear",yS),OS("log",MS),OS("pow",SS),OS("time",CS),OS("timeCat",pS),OS("quantize",DS),OS("quantile",LS);var ak=function(t,e){for(var n=0,i=e.length,r=t.length;n<i;n++,r++)t[r]=e[n];return t};function sk(t){return function(t){return(0,b.map)(t,(function(t,e){return[0===e?"M":"L",t[0],t[1]]}))}(t)}function lk(t,e,n,i){void 0===i&&(i=!0);var r=new yS({values:t}),o=new TE({values:(0,b.map)(t,(function(t,e){return e}))}),a=(0,b.map)(t,(function(t,i){return[o.scale(i)*e,n-r.scale(t)*n]}));return i?function(t){if(t.length<=2)return sk(t);var e=[];(0,b.each)(t,(function(t){(0,b.isEqual)(t,e.slice(e.length-2))||e.push(t[0],t[1])}));var n=fa(e,!1),i=(0,b.head)(t),r=i[0],o=i[1];return n.unshift(["M",r,o]),n}(a):sk(a)}function uk(t,e,n,i){void 0===i&&(i=5);for(var r=new yS({values:t}),o=new TE({values:(0,b.map)(t,(function(t,e){return e}))}),a=(0,b.map)(t,(function(t,i){return[o.scale(i)*e,n-r.scale(t)*n]})),s=[],l=0;l<a.length;l++){var u=a[l],c=hk({x:u[0],y:u[1],y0:n,size:i});s.push.apply(s,c)}return function(t,e){void 0===e&&(e=!0);var n=[],i=t[0];n.push(["M",i.x,i.y]);for(var r=1,o=t.length;r<o;r++)n.push(["L",t[r].x,t[r].y]);e&&(n.push(["L",i.x,i.y]),n.push(["z"]));return n}(s)}function ck(t,e,n,i){var r=ak([],t),o=function(t,e){var n=new yS({values:t}),i=Math.max(0,n.min);return e-n.scale(i)*e}(i,n);return r.push(["L",e,o]),r.push(["L",0,o]),r.push(["Z"]),r}function hk(t){var e,n,i,r,o=t.x,a=t.y,s=t.y0,l=t.size;(0,b.isArray)(a)?(e=a[0],n=a[1]):(e=s,n=a),(0,b.isArray)(o)?(i=o[0],r=o[1]):(i=o-l/2,r=o+l/2);var u=[{x:i,y:e},{x:i,y:n}];return u.push({x:r,y:n},{x:r,y:e}),u}var dk=function(){return dk=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},dk.apply(this,arguments)},fk={stroke:"#C5C5C5",strokeOpacity:.85},pk={fill:"#CACED4",opacity:.85},mk=function(){function t(t){var e=t.x,n=void 0===e?0:e,i=t.y,r=void 0===i?0:i,o=t.width,a=void 0===o?200:o,s=t.height,l=void 0===s?26:s,u=t.smooth,c=void 0===u||u,h=t.isArea,d=void 0!==h&&h,f=t.data,p=void 0===f?[]:f,m=t.lineStyle,g=t.areaStyle,v=t.group,y=t.interval,b=void 0===y?null:y;this.group=v,this.x=n,this.y=r,this.width=a,this.height=l,this.data=p,this.smooth=c,this.isArea=d,this.lineStyle=Object.assign({},fk,m),this.areaStyle=Object.assign({},pk,g),this.intervalConfig=b,this.renderLine()}return t.prototype.renderLine=function(){var t=this,e=t.x,n=t.y,i=t.width,r=t.height,o=(t.barWidth,t.data),a=t.smooth,s=t.isArea,l=t.lineStyle,u=t.areaStyle,c=this.group.addGroup({name:"trend-group"});if(o){var h=lk(o,i,r,a);if(c.addShape("path",{attrs:dk({path:h},l)}),s){var d=ck(h,i,r,o);c.addShape("path",{attrs:dk({path:d},u)})}}this.intervalConfig&&c.addShape("path",{attrs:dk({path:uk(this.intervalConfig.data,i,r,this.intervalConfig.style.barWidth)},this.intervalConfig.style)}),c.move(e,n)},t.prototype.destory=function(){this.group.destroy()},t}();const gk=mk;var vk=function(){return vk=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},vk.apply(this,arguments)},yk={fill:"#1890ff",stroke:"#1890ff",type:"trend",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#0050b3"},bk={fill:"#fff",stroke:"#1890ff",radius:2,opacity:1,cursor:"ew-resize"},_k=function(){function t(t){var e=t.group,n=t.name,i=t.type,r=t.x,o=void 0===r?0:r,a=t.y,s=void 0===a?0:a,l=t.width,u=void 0===l?2:l,c=t.height,h=void 0===c?24:c,d=t.style,f=void 0===d?{}:d;this.group=e,this.name=n,this.handleType=i,this.x=o,this.y=s,this.width=u,this.height=h,"trend"===i?this.style=vk(vk({},yk),f):"simple"===i&&(this.style=vk(vk({},bk),f)),this.renderHandle()}return t.prototype.setX=function(t){this.setXY(t,void 0)},t.prototype.setY=function(t){this.setXY(void 0,t)},t.prototype.setXY=function(t,e){(0,b.isNumber)(t)&&(this.x=t),(0,b.isNumber)(e)&&(this.y=e),this.updateXY()},t.prototype.renderHandle=function(){var t=this,e=t.width,n=t.height,i=t.style,r=t.name,o=i.fill,a=i.stroke,s=i.radius,l=i.opacity,u=i.cursor;this.handleGroup=this.group.addGroup(),"trend"===this.handleType?(this.verticalLine=this.handleGroup.addShape("rect",{attrs:{x:0,y:0,width:e,height:n,fill:o,stroke:a,radius:s,opacity:l,cursor:u},name:r+"-handler"}),this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:e/2,y:0,r:2*e,fill:o,stroke:a,radius:s,opacity:l,cursor:u},name:r+"-handler"}),this.bottomCircle=this.handleGroup.addShape("circle",{attrs:{x:e/2,y:n,r:2*e,fill:o,stroke:a,radius:s,opacity:l,cursor:u},name:r+"-handler"})):"simple"===this.handleType&&(this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:e/2,y:n/2,r:2*e,fill:o,stroke:a,radius:s,opacity:l,cursor:u,lineWidth:2},name:r+"-handler"})),this.updateXY(),"trend"===this.handleType?this.bindTrendEvents():"simple"===this.handleType&&this.bindSimpleEvents()},t.prototype.bindSimpleEvents=function(){var t=this,e=this.name;this.handleGroup.on(e+"-handler:mouseenter",(function(){var e=t.style.highLightFill;t.topCircle.attr("fill",e)})),this.handleGroup.on(e+"-handler:mouseleave",(function(){var e=t.style.fill;t.topCircle.attr("fill",e)}))},t.prototype.bindTrendEvents=function(){var t=this,e=this.name;this.handleGroup.on(e+"-handler:mouseenter",(function(){var e=t.style.highLightFill;t.verticalLine.attr("fill",e),t.topCircle.attr("fill",e),t.bottomCircle.attr("fill",e)})),this.handleGroup.on(e+"-handler:mouseleave",(function(){var e=t.style.fill;t.verticalLine.attr("fill",e),t.topCircle.attr("fill",e),t.bottomCircle.attr("fill",e)}))},t.prototype.show=function(){this.handleGroup.show()},t.prototype.hide=function(){this.handleGroup.hide()},t.prototype.updateXY=function(){this.handleGroup.setMatrix([1,0,0,0,1,0,this.x,this.y,1])},t}();const wk=_k;var xk="timebarstartplay",Mk="timebarendplay",Ek="valuechange",Sk="timebarConfigChanged",kk="playPauseBtn",Ck="nextStepBtn",Tk="preStepBtn",Dk=function(){return Dk=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Dk.apply(this,arguments)},Lk=function(){function t(t){this.config=(0,b.deepMix)({},t),this.init()}return t.prototype.update=function(t){this.config=(0,b.deepMix)({},this.config,t),this.updateElement(),this.renderMarker()},t.prototype.init=function(){this.initElement(),this.renderMarker()},t.prototype.initElement=function(){var t=this.config,e=t.group,n=t.style,i=n.scale,r=void 0===i?1:i,o=n.offsetX,a=void 0===o?0:o,s=n.offsetY,l=void 0===s?0:s,u=this.config.x+a,c=this.config.y+l,h=e.addGroup({name:kk});this.startMarkerGroup=h.addGroup({name:kk}),this.circle=e.addShape("circle",{attrs:Dk({x:u,y:c,r:this.config.r*r},n),name:kk}),this.startMarker=this.startMarkerGroup.addShape("path",{attrs:{path:this.getStartMarkerPath(u,c,r),fill:n.stroke||"#aaa"}}),this.pauseMarkerGroup=h.addGroup({name:kk});var d=.25*this.config.r*r,f=.5*this.config.r*Math.sqrt(3)*r;this.pauseLeftMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:u-.375*this.config.r*r,y:c-f/2,width:d,height:f,fill:n.stroke||"#aaa",lineWidth:0}}),this.pauseRightMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:u+1/8*this.config.r*r,y:c-f/2,width:d,height:f,fill:n.stroke||"#aaa",lineWidth:0}})},t.prototype.updateElement=function(){var t=this.config.style,e=t.scale,n=void 0===e?1:e,i=t.offsetX,r=void 0===i?0:i,o=t.offsetY,a=void 0===o?0:o,s=this.config.x+r,l=this.config.y+a;this.circle.attr("x",s),this.circle.attr("y",l),this.circle.attr("r",this.config.r*n),this.startMarker.attr("path",this.getStartMarkerPath(s,l,n));var u=.25*this.config.r*n,c=.5*this.config.r*Math.sqrt(3)*n;this.pauseLeftMarker.attr("x",s-.375*this.config.r*n),this.pauseLeftMarker.attr("y",l-c/2),this.pauseLeftMarker.attr("width",u),this.pauseLeftMarker.attr("height",c),this.pauseRightMarker.attr("x",s+1/8*this.config.r*n),this.pauseRightMarker.attr("y",l-c/2),this.pauseRightMarker.attr("width",u),this.pauseRightMarker.attr("height",c)},t.prototype.renderMarker=function(){this.config.isPlay?(this.startMarkerGroup.hide(),this.pauseMarkerGroup.show()):(this.startMarkerGroup.show(),this.pauseMarkerGroup.hide())},t.prototype.getStartMarkerPath=function(t,e,n){var i=.5*this.config.r*Math.sqrt(3)*n;return[["M",t-i/Math.sqrt(3)/2,e-i/2],["L",t+i/Math.sqrt(3),e],["L",t-i/Math.sqrt(3)/2,e+i/2]]},t}();const Ak=Lk;var Ok=function(){return Ok=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Ok.apply(this,arguments)},Pk=uh,Ik={fill:"#aaa",fillOpacity:.35,stroke:"#aaa"},Nk={fill:"#fff"},Rk={fill:"green"},Yk={pointer:{fill:"#aaa",lineWidth:0},scroller:{stroke:"#aaa",fill:"#aaa",lineWidth:1,lineAppendWidth:5,cursor:"pointer"},text:{fill:"#aaa",textBaseline:"top"}},jk={check:{stroke:"green",lineWidth:3},box:{fill:"#fff",stroke:"#aaa",lineWidth:2,radius:3,width:12,height:12},text:{fill:"#aaa",fontSize:12,textBaseline:"top"}},Fk={speed:1,loop:!1,fill:"#fff",stroke:"#fff",hideTimeTypeController:!1,preBtnStyle:{fill:"#aaa",stroke:"#aaa"},nextBtnStyle:{fill:"#aaa",stroke:"#aaa"},playBtnStyle:{fill:"#aaa",stroke:"#aaa",fillOpacity:.05},speedControllerStyle:Yk,timeTypeControllerStyle:jk},Bk=50,zk=function(){function t(t){this.controllerCfg=(0,b.deepMix)({},Fk,t),this.group=t.group,this.controllerGroup=this.group.addGroup({name:"controller-group"}),this.speedAxisY=[],this.currentSpeed=this.controllerCfg.speed,this.currentType="range",this.fontFamily=t.fontFamily||"Arial, sans-serif",this.init()}return t.prototype.init=function(){this.renderPlayButton()},t.prototype.getNextMarkerPath=function(t,e,n){return[["M",t,e-n],["L",t+n,e],["L",t,e+n],["Z",t,e-n],["M",t,e],["L",t-n,e-n],["L",t-n,e+n],["Z"]]},t.prototype.getPreMarkerPath=function(t,e,n){return[["M",t,e-n],["L",t-n,e],["L",t,e+n],["L",t,e-n],["M",t,e],["L",t+n,e-n],["L",t+n,e+n],["Z"]]},t.prototype.renderPlayButton=function(){var t=this.controllerCfg,e=t.width,n=t.height,i=t.x,r=t.y,o=t.hideTimeTypeController,a=t.fill,s=void 0===a?"#aaa":a,l=t.stroke,u=void 0===l?"green":l,c=Ok(Ok({},Ik),t.playBtnStyle||{}),h=Ok(Ok({},Nk),t.preBtnStyle||{}),d=Ok(Ok({},Rk),t.nextBtnStyle||{}),f=n/2-5,p=r+10,m=this.controllerGroup.addShape("rect",{attrs:{x:i,y:p,width:e,height:n,stroke:u,fill:s},name:"container-rect"});this.playButton?this.playButton.update({x:e/2,y:p,r:f}):this.playButton=new Ak({group:this.controllerGroup,x:e/2,y:p+f+5,r:f,isPlay:this.isPlay,style:c});var g=h.offsetX||0,v=h.offsetY||0,y=(h.scale||1)*f;this.controllerGroup.addShape("path",{attrs:Ok({path:this.getPreMarkerPath(e/2-5*f+g,p+f+5+v,.5*y)},h),name:Tk});var b=d.offsetX||0,_=d.offsetY||0,w=(d.scale||1)*f;this.controllerGroup.addShape("path",{attrs:Ok({path:this.getNextMarkerPath(e/2+5*f+b,p+f+5+_,.5*w)},d),name:Ck}),m.toBack(),this.renderSpeedBtn(),o||this.renderToggleTime(),this.bindEvent();var x=this.controllerCfg.scale,M=void 0===x?1:x,E=this.controllerGroup.getCanvasBBox(),S=(E.maxX+E.minX)/2,k=(E.maxY+E.minY)/2,C=Pk([1,0,0,0,1,0,0,0,1],[["t",-S,-k],["s",M,M],["t",S,k]]);this.controllerGroup.setMatrix(C)},t.prototype.renderSpeedBtn=function(){var t=this.controllerCfg,e=t.y,n=t.width,i=t.hideTimeTypeController,r=Ok(Ok({},Yk),this.controllerCfg.speedControllerStyle||{}),o=r.scroller,a=void 0===o?{}:o,s=r.text,l=void 0===s?{}:s,u=r.pointer,c=void 0===u?{}:u,h=r.scale,d=void 0===h?1:h,f=r.offsetX,p=void 0===f?0:f,m=r.offsetY,g=void 0===m?0:m,v=this.controllerGroup.addGroup({name:"speed-group"});this.speedGroup=v;var y=[],b=5;this.speedAxisY=[19,22,26,32,39];for(var _=0;_<5;_++){var w=e+this.speedAxisY[_],x=n-(i?Bk:110);v.addShape("line",{attrs:Ok({x1:x,x2:x+15,y1:w,y2:w},a),speed:b,name:"speed-rect"}),this.speedAxisY[_]=w,y.push(b),b-=1}this.speedText=v.addShape("text",{attrs:Ok({x:n-(i?Bk:110)+20,y:this.speedAxisY[0]+4,text:"1.0X",fontFamily:this.fontFamily||"Arial, sans-serif"},l)}),this.speedPoint=v.addShape("path",{attrs:Ok({path:this.getPointerPath(n-(i?Bk:110),0),matrix:[1,0,0,0,1,0,0,this.speedAxisY[4],1]},c)});var M=this.speedGroup.getCanvasBBox(),E=(M.maxX+M.minX)/2,S=(M.maxY+M.minY)/2,k=this.speedGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];k=Pk(k,[["t",-E,-S],["s",d,d],["t",E+p*d,S+g*d]]),this.speedGroup.setMatrix(k)},t.prototype.getPointerPath=function(t,e){return[["M",t,e],["L",t-10,e-4],["L",t-10,e+4],["Z"]]},t.prototype.renderToggleTime=function(){var t,e=this.controllerCfg.width,n=Ok(Ok({},jk),this.controllerCfg.timeTypeControllerStyle||{}),i=n.scale,r=void 0===i?1:i,o=n.offsetX,a=void 0===o?0:o,s=n.offsetY,l=void 0===s?0:s,u=n.box,c=void 0===u?{}:u,h=n.check,d=void 0===h?{}:h,f=n.text,p=void 0===f?{}:f;this.toggleGroup=this.controllerGroup.addGroup({name:"toggle-group"}),this.toggleGroup.addShape("rect",{attrs:Ok({x:e-Bk,y:this.speedAxisY[0]+3.5},c),isChecked:!1,name:"toggle-model"}),this.checkedIcon=this.toggleGroup.addShape("path",{attrs:Ok({path:[["M",e-Bk+3,this.speedAxisY[1]+6],["L",e-Bk+7,this.speedAxisY[1]+10],["L",e-Bk+12,this.speedAxisY[1]+4]]},d),capture:!1}),this.checkedIcon.hide(),this.checkedText=this.toggleGroup.addShape("text",{attrs:Ok({text:(null===(t=this.controllerCfg)||void 0===t?void 0:t.timePointControllerText)||"",x:e-Bk+15,y:this.speedAxisY[0]+4,fontFamily:"undefined"!=typeof window&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},p)});var m=this.toggleGroup.getCanvasBBox(),g=(m.maxX+m.minX)/2,v=(m.maxY+m.minY)/2,y=this.toggleGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];y=Pk(y,[["t",-g,-v],["s",r,r],["t",g+a*r,v+l*r]]),this.toggleGroup.setMatrix(y)},t.prototype.bindEvent=function(){var t=this;this.speedGroup.on("speed-rect:click",(function(e){var n=e.target.attr("y1"),i=t.speedPoint.attr("matrix"),r=t.speedAxisY.indexOf(i[7]||0),o=t.speedAxisY.indexOf(n),a=t.speedAxisY[o]-t.speedAxisY[r];i=Pk(i,[["t",0,a]]),t.speedPoint.setMatrix(i),t.currentSpeed=t.speedAxisY.length-o,t.speedText.attr("text",t.currentSpeed+".0X"),t.group.emit(Sk,{speed:t.currentSpeed,type:t.currentType})})),this.speedGroup.on("mousewheel",(function(e){e.preventDefault();var n=t.speedPoint.attr("matrix")||[1,0,0,0,1,0,0,0,1],i=n[7],r=t.speedAxisY.indexOf(i);if(-1===r){var o=1/0;t.speedAxisY.forEach((function(t,e){var n=Math.abs(t-i);o>n&&(o=n,r=e)}))}r=e.originalEvent.deltaY>0?Math.max(0,r-1):Math.min(t.speedAxisY.length-1,r+1);var a=t.speedAxisY[r]-i;n=Pk(n,[["t",0,a]]),t.speedPoint.setMatrix(n),t.currentSpeed=t.speedAxisY.length-r,t.speedText.attr("text",t.currentSpeed+".0X"),t.group.emit(Sk,{speed:t.currentSpeed,type:t.currentType})})),this.toggleGroup&&this.toggleGroup.on("toggle-model:click",(function(e){var n,i,r=e.target.get("isChecked");r?(t.checkedIcon.hide(),t.checkedText.attr("text",(null===(i=t.controllerCfg)||void 0===i?void 0:i.timePointControllerText)||""),t.currentType="range"):(t.checkedIcon.show(),t.checkedText.attr("text",(null===(n=t.controllerCfg)||void 0===n?void 0:n.timeRangeControllerText)||""),t.currentType="single"),e.target.set("isChecked",!r),t.group.emit(Sk,{type:t.currentType,speed:t.currentSpeed})}))},t.prototype.destroy=function(){this.speedGroup.off("speed-rect:click"),this.toggleGroup&&(this.toggleGroup.off("toggle-model:click"),this.toggleGroup.destroy()),this.speedGroup.destroy()},t}();const Hk=zk;var Gk=function(){return Gk=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Gk.apply(this,arguments)},Wk={fill:"#416180",opacity:.05},Uk={fill:"#416180",opacity:.15,radius:5},Vk={fill:"#5B8FF9",opacity:.3,cursor:"grab"},Xk={width:2,height:24},qk={textBaseline:"middle",fill:"#000",opacity:.45},Kk={textAlign:"center",textBaseline:"top",fill:"#607889",opacity:.35},$k={lineWidth:1,stroke:"#ccc"},Zk=function(){function t(t){var e=this;this.prevX=0,this.onMouseDown=function(t){return function(n){e.currentHandler=t;var i=n.originalEvent;i.stopPropagation(),i.preventDefault(),e.prevX=(0,b.get)(i,"touches.0.pageX",i.pageX);var r=e.canvas.get("container");r.addEventListener("mousemove",e.onMouseMove),r.addEventListener("mouseup",e.onMouseUp),r.addEventListener("mouseleave",e.onMouseUp),r.addEventListener("touchmove",e.onMouseMove),r.addEventListener("touchend",e.onMouseUp),r.addEventListener("touchcancel",e.onMouseUp)}},this.onMouseMove=function(t){t.stopPropagation(),t.preventDefault();var n=(0,b.get)(t,"touches.0.pageX",t.pageX),i=n-e.prevX,r=e.adjustOffsetRange(i/e.width);e.updateStartEnd(r),e.updateUI(),e.prevX=n},this.onMouseUp=function(){e.currentHandler&&(e.currentHandler=void 0);var t=e.canvas.get("container");t&&(t.removeEventListener("mousemove",e.onMouseMove),t.removeEventListener("mouseup",e.onMouseUp),t.removeEventListener("mouseleave",e.onMouseUp),t.removeEventListener("touchmove",e.onMouseMove),t.removeEventListener("touchend",e.onMouseUp),t.removeEventListener("touchcancel",e.onMouseUp))};var n=t.x,i=void 0===n?0:n,r=t.y,o=void 0===r?0:r,a=t.width,s=void 0===a?100:a,l=t.height,u=t.padding,c=void 0===u?10:u,h=t.trendCfg,d=t.controllerCfg,f=void 0===d?{speed:1}:d,p=t.backgroundStyle,m=void 0===p?{}:p,g=t.foregroundStyle,v=void 0===g?{}:g,y=t.handlerStyle,_=void 0===y?{}:y,w=t.textStyle,x=void 0===w?{}:w,M=t.start,E=void 0===M?0:M,S=t.end,k=void 0===S?1:S,C=t.minText,T=void 0===C?"":C,D=t.maxText,L=void 0===D?"":D,A=t.group,O=t.graph,P=t.canvas,I=t.tick,N=void 0===I?{tickLabelStyle:{},tickLineStyle:{},tickLabelFormatter:function(t){return t},ticks:[]}:I,R=t.type;this.graph=O,this.canvas=P,this.group=A,this.timeBarType=R,this.x=i,this.y=o,this.width=s,this.height=l,this.padding=c,this.ticks=N.ticks,this.trendCfg=h,this.controllerCfg=f,this.currentSpeed=f.speed||1,this.tickLabelFormatter=N.tickLabelFormatter,"trend"===R?this.backgroundStyle=Gk(Gk({},Wk),m):"simple"===R&&(this.backgroundStyle=Gk(Gk({},Uk),m)),this.foregroundStyle=Gk(Gk({},Vk),v),this.handlerStyle=Gk(Gk({},Xk),_),this.textStyle=Gk(Gk({},qk),x),this.tickLabelStyle=Gk(Gk({},Kk),N.tickLabelStyle),this.tickLineStyle=Gk(Gk({},$k),N.tickLineStyle),this.currentMode="range",this.start=E,this.end=k,this.minText=T,this.maxText=L,this.fontFamily="undefined"!=typeof window&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlider()}return t.prototype.update=function(t){var e=t.x,n=t.y,i=t.width,r=t.height,o=t.minText,a=t.maxText,s=t.start,l=t.end;this.start=Math.min(1,Math.max(s,0)),this.end=Math.min(1,Math.max(l,0)),(0,b.assign)(this,{x:e,y:n,width:i,height:r,minText:o,maxText:a}),this.updateUI()},t.prototype.setText=function(t,e){this.minTextShape.attr("text",t),this.maxTextShape.attr("text",e)},t.prototype.renderSlider=function(){var t=this,e=this,n=e.width,i=e.height,r=e.timeBarType;if("trend"===r&&(0,b.size)((0,b.get)(this.trendCfg,"data"))){var o=new gk(Gk(Gk({x:this.x,y:this.y,width:n,height:i},this.trendCfg),{group:this.group}));this.trendComponent=o}var a=this.group.addGroup({name:"slider-group"});a.addShape("rect",{attrs:Gk({x:0,y:0,width:n,height:i},this.backgroundStyle)});var s=this.group.addGroup();"trend"===r?(this.minTextShape=s.addShape("text",{attrs:Gk({x:0,y:i/2+this.y,textAlign:"right",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif"},this.textStyle),capture:!1}),this.maxTextShape=s.addShape("text",{attrs:Gk({y:i/2+this.y,textAlign:"left",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif"},this.textStyle),capture:!1})):(this.minTextShape=s.addShape("text",{attrs:Gk({x:0,y:this.y-10,textAlign:"center",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif"},this.textStyle),capture:!1}),this.maxTextShape=s.addShape("text",{attrs:Gk({y:this.y-10,textAlign:"center",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif"},this.textStyle),capture:!1})),this.foregroundShape=this.group.addGroup().addShape("rect",{attrs:Gk({x:0,y:this.y,height:i},this.foregroundStyle)}),this.foregroundShape.on("mousedown",(function(t){t.target.attr("cursor","grabbing")})),this.foregroundShape.on("mouseup",(function(e){e.target.attr("cursor",t.foregroundStyle.cursor||"grab")}));var l=(0,b.get)(this.handlerStyle,"width",2),u=(0,b.get)(this.handlerStyle,"height",24),c=this.group.addGroup({name:"minHandlerShape"});this.minHandlerShape=new wk({name:"minHandlerShape",group:c,type:r,x:this.x,y:this.y,width:l,height:u,style:this.handlerStyle});var h=this.group.addGroup({name:"maxHandlerShape"});this.maxHandlerShape=new wk({name:"maxHandlerShape",group:h,type:r,x:this.x,y:this.y,width:l,height:u,style:this.handlerStyle});var d=this.ticks,f=n/(d.length-1);this.tickPosList=[],this.textList&&this.textList.length&&this.textList.forEach((function(t){t.destroy()}));var p=-1/0;this.textList=d.map((function(e,n){var r;t.tickPosList.push(t.x+n*f),t.tickLabelFormatter?(r=t.tickLabelFormatter(e),!(0,b.isString)(r)&&r&&(r=e.date)):r=e.date;var o=t.group.addShape("text",{attrs:Gk({x:t.x+n*f,y:t.y+i+5,text:r,fontFamily:t.fontFamily||"Arial, sans-serif"},t.tickLabelStyle)}),a=t.group.addShape("line",{attrs:Gk({x1:t.x+n*f,y1:t.y+i+2,x2:t.x+n*f,y2:t.y+i+6},t.tickLineStyle)});a.toBack();var s=o.getBBox();return s.minX>p?(o.show(),a.show(),p=s.minX+s.width+10):(o.hide(),a.hide()),o})),this.controllerBtnGroup=new Hk(Gk({group:this.group,x:this.x,y:this.y+i+25,width:n,height:35},this.controllerCfg)),this.updateStartEnd(0),this.updateUI(),a.move(this.x,this.y),this.bindEvents()},t.prototype.bindEvents=function(){var t=this,e=this.group.find((function(t){return"minHandlerShape"===t.get("name")}));e&&(e.on("minHandlerShape-handler:mousedown",this.onMouseDown(this.minHandlerShape)),e.on("minHandlerShape-handler:touchstart",this.onMouseDown(this.minHandlerShape)));var n=this.group.find((function(t){return"maxHandlerShape"===t.get("name")}));n&&(n.on("maxHandlerShape-handler:mousedown",this.onMouseDown(this.maxHandlerShape)),n.on("maxHandlerShape-handler:touchstart",this.onMouseDown(this.maxHandlerShape))),this.foregroundShape.on("mousedown",this.onMouseDown(this.foregroundShape)),this.foregroundShape.on("touchstart",this.onMouseDown(this.foregroundShape)),this.group.on("playPauseBtn:click",(function(){t.isPlay=!t.isPlay,t.currentHandler=t.maxHandlerShape,t.changePlayStatus()})),this.group.on("nextStepBtn:click",(function(){t.currentHandler=t.maxHandlerShape,t.updateStartEnd(.01),t.updateUI()})),this.group.on("preStepBtn:click",(function(){t.currentHandler=t.maxHandlerShape,t.updateStartEnd(-.01),t.updateUI()})),this.group.on(Sk,(function(e){var n=e.type,i=e.speed;t.currentSpeed=i,t.currentMode=n,"single"===n?(t.minHandlerShape.hide(),t.foregroundShape.hide(),t.minTextShape.hide()):"range"===n&&(t.minHandlerShape.show(),t.foregroundShape.show(),t.minTextShape.show())}))},t.prototype.adjustTickIndex=function(t){for(var e=0;e<this.tickPosList.length-1;e++)if(this.tickPosList[e]<=t&&t<=this.tickPosList[e+1])return Math.abs(this.tickPosList[e]-t)<Math.abs(t-this.tickPosList[e+1])?e:e+1;return 0},t.prototype.adjustOffsetRange=function(t){switch(this.currentHandler){case this.minHandlerShape:var e=0-this.start,n=1-this.start;return Math.min(n,Math.max(e,t));case this.maxHandlerShape:e=0-this.end,n=1-this.end;return Math.min(n,Math.max(e,t));case this.foregroundShape:e=0-this.start,n=1-this.end;return Math.min(n,Math.max(e,t));default:return 0}},t.prototype.updateStartEnd=function(t){var e=this.ticks[this.adjustTickIndex(this.start*this.width)],n=this.ticks[this.adjustTickIndex(this.end*this.width)];if(!this.currentHandler)return this.minText=this.tickLabelFormatter?this.tickLabelFormatter(e):e.date,void(this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(n):n.date);switch(this.currentHandler){case this.minHandlerShape:this.maxText=this.maxTextShape.attr("text"),this.start+=t,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(e):e.date;break;case this.maxHandlerShape:this.minText=this.minTextShape.attr("text"),this.end+=t,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(n):n.date;break;case this.foregroundShape:this.start+=t,this.end+=t,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(e):e.date,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(n):n.date}},t.prototype.updateUI=function(){var t=this;this.start<0&&(this.start=0),this.end>1&&(this.end=1);var e=this.x+this.start*this.width,n=this.x+this.end*this.width;this.foregroundShape.attr("x",e),this.foregroundShape.attr("width",n-e);var i=(0,b.get)(this.handlerStyle,"width",2);this.setText(this.minText,this.maxText);var r=this.dodgeText([e,n]),o=r[0],a=r[1];this.minHandlerShape.setX(e-i/2),(0,b.each)(o,(function(e,n){return t.minTextShape.attr(n,e)})),this.maxHandlerShape.setX(n-i/2),(0,b.each)(a,(function(e,n){return t.maxTextShape.attr(n,e)})),"range"===this.currentMode?this.graph.emit(Ek,{value:[this.start,this.end].sort()}):"single"===this.currentMode&&this.graph.emit(Ek,{value:[this.end,this.end]})},t.prototype.dodgeText=function(t){var e,n,i=(0,b.get)(this.handlerStyle,"width",2),r=this.minTextShape,o=this.maxTextShape,a=t[0],s=t[1],l=!1;a>s&&(a=(e=[s,a])[0],s=e[1],r=(n=[o,r])[0],o=n[1],l=!0);var u=r.getBBox(),c=o.getBBox(),h=null,d=null;return"trend"===this.timeBarType?(h=a-u.width<this.x+2?{x:a+i/2+2,textAlign:"left"}:{x:a-i/2-2,textAlign:"right"},d=s+c.width>this.x+this.width?{x:s-i/2-2,textAlign:"right"}:{x:s+i/2+2,textAlign:"left"}):"simple"===this.timeBarType&&(h=u.width>a-2?{x:a+i/2+2,textAlign:"center"}:{x:a-i/2-2,textAlign:"center"},d=c.width>this.width-s-2?{x:s-i/2-2,textAlign:"center"}:{x:s+i/2+2,textAlign:"center"}),l?[d,h]:[h,d]},t.prototype.startPlay=function(){var t=this;return"undefined"!=typeof window?window.requestAnimationFrame((function(){var e=t,n=e.ticks,i=e.width,r=t.currentSpeed,o=i/n.length/(1e3*(10-r)/60),a=t.adjustOffsetRange(o/t.width);t.updateStartEnd(a),t.updateUI(),t.isPlay&&(t.playHandler=t.startPlay())})):void 0},t.prototype.changePlayStatus=function(t){void 0===t&&(t=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(xk,null)):this.playHandler&&("undefined"!=typeof window&&window.cancelAnimationFrame(this.playHandler),t&&this.graph.emit(Mk,null))},t.prototype.destory=function(){this.graph.off(Ek);var t=this.group,e=t.find((function(t){return"minHandlerShape"===t.get("name")}));e&&(e.off("minHandlerShape-handler:mousedown"),e.off("minHandlerShape-handler:touchstart"),e.destroy());var n=t.find((function(t){return"maxHandlerShape"===t.get("name")}));n&&(n.off("maxHandlerShape-handler:mousedown"),n.off("maxHandlerShape-handler:touchstart"),n.destroy()),this.foregroundShape.off("mousedown"),this.foregroundShape.off("touchstart"),this.foregroundShape.destroy(),t.off("playPauseBtn:click"),t.off("nextStepBtn:click"),t.off("preStepBtn:click"),t.off(Sk),t.destroy(),this.trendComponent&&this.trendComponent.destory()},t}();const Jk=Zk;var Qk=function(){function t(t){var e=t.x,n=void 0===e?0:e,i=t.y,r=void 0===i?0:i,o=t.container,a=t.text,s=t.padding,l=void 0===s?[4,4,4,4]:s,u=t.className,c=void 0===u?"g6-component-timebar-tooltip":u,h=t.backgroundColor,d=void 0===h?"#000":h,f=t.textColor,p=void 0===f?"#fff":f,m=t.opacity,g=void 0===m?.8:m,v=t.fontSize,y=void 0===v?12:v;this.container=o,this.className=c,this.backgroundColor=d,this.textColor=p,this.x=n,this.y=r,this.text=a,this.padding=l,this.opacity=g,this.fontSize=y,this.render()}return t.prototype.render=function(){var t=this,e=t.className,n=(t.x,t.y,t.backgroundColor),i=t.textColor,r=t.text,o=t.padding,a=t.opacity,s=t.fontSize,l=t.container,u=IM("<div class='"+e+"' style=\"position: absolute; width: fit-content; height: fit-content; opacity: "+a+'"></div>');(0,b.isString)(l)&&(l=document.getElementById(l)),l.appendChild(u),t.parentHeight=l.offsetHeight,t.parentWidth=l.offsetWidth,HM(u,{visibility:"hidden",top:0,left:0});var c=IM("\n      <div style='position: absolute; white-space:nowrap; background-color: "+n+"; font-size: "+s+"px; border-radius: 4px; width: fit-content; height: fit-content; color: "+i+"; padding: "+o[0]+"px "+o[1]+"px "+o[2]+"px "+o[3]+"px'></div>");c.innerHTML=r,u.appendChild(c),t.backgroundDOM=c;var h=IM("<div style='position: absolute; width: 0px; height: 0px; border-left: 5px solid transparent; border-right: 5px solid transparent; border-top: 10px solid "+n+"'></div>");u.appendChild(h),t.arrowDOM=h,t.container=u},t.prototype.show=function(t){var e=this,n=t.text,i=t.x;t.y,t.clientX,t.clientY;e.backgroundDOM.innerHTML=n;var r=e.backgroundDOM.offsetWidth,o=e.backgroundDOM.offsetHeight,a=e.arrowDOM.offsetWidth,s=e.arrowDOM.offsetHeight;HM(e.container,{top:-o-s+"px",left:i+"px",visibility:"visible"}),HM(e.backgroundDOM,{marginLeft:-r/2+"px"}),HM(e.arrowDOM,{marginLeft:-a/2+"px",top:o+"px"});var l=i-r/2,u=i+r/2;l<0?HM(e.backgroundDOM,{marginLeft:-r/2-l+"px"}):u>e.parentWidth&&HM(e.backgroundDOM,{marginLeft:-r/2-u+e.parentWidth+12+"px"})},t.prototype.hide=function(){HM(this.container,{top:0,left:0,visibility:"hidden"})},t}();const tC=Qk;var eC=function(){return eC=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},eC.apply(this,arguments)},nC={fill:"#5B8FF9"},iC={fill:"#e6e8e9"},rC=function(){function t(t){this.frameCount=0,this.fontFamily="Arial, sans-serif";var e=t.graph,n=t.canvas,i=t.group,r=t.width,o=t.height,a=t.padding,s=t.data,l=t.start,u=t.end,c=t.x,h=void 0===c?0:c,d=t.y,f=void 0===d?0:d,p=t.tickLabelFormatter,m=t.selectedTickStyle,g=void 0===m?nC:m,v=t.unselectedTickStyle,y=void 0===v?iC:v,b=t.tooltipBackgroundColor,_=t.tooltipFomatter;this.graph=e,this.group=i,this.sliceGroup=i.addGroup({name:"slice-group"}),this.canvas=n,this.width=r,this.height=o,this.padding=a,this.data=s,this.start=l,this.end=u,this.tickLabelFormatter=p,this.selectedTickStyle=g,this.unselectedTickStyle=y,this.x=h,this.y=f,this.tooltipBackgroundColor=b,this.tooltipFomatter=_,this.fontFamily="undefined"!=typeof window&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlices(),this.initEvent()}return t.prototype.renderSlices=function(){var t=this,e=this,n=e.width,i=e.height,r=e.padding,o=e.data,a=e.start,s=e.end,l=e.tickLabelFormatter,u=e.selectedTickStyle,c=e.unselectedTickStyle,h=n-2*r,d=i-(3*r+4+10)-2*r,f=o.length,p=(h-2*(f-1))/f;this.tickWidth=p;var m=this.sliceGroup,g=[],v=[],y=Math.round(f*a),_=Math.round(f*s);this.startTickRectId=y,this.endTickRectId=_,o.forEach((function(e,i){var o=i>=y&&i<=_?u:c,a=m.addShape("rect",{attrs:eC({x:r+i*(p+2),y:r,width:p,height:d},o),draggable:!0,name:"tick-rect-"+i}),s=m.addShape("rect",{attrs:{x:r+i*p+2*(2*i-1)/2,y:r,width:0===i||i===f-1?p+1:p+2,height:d,fill:"#fff",opacity:0},draggable:!0,name:"pick-rect-"+i});s.toFront();var h,w=a.getBBox(),x=(w.minX+w.maxX)/2;if(g.push({rect:a,pickRect:s,value:e.date,x,y:w.minY}),l?(h=l(e),!(0,b.isString)(h)&&h&&(h=e.date)):i%Math.round(f/10)==0&&(h=e.date),h){v.push(h);var M=w.maxY+2*r;m.addShape("line",{attrs:{stroke:"#BFBFBF",x1:x,y1:M,x2:x,y2:M+4}});var E=M+4+r,S=m.addShape("text",{attrs:{fill:"#8c8c8c",stroke:"#fff",lineWidth:1,x,y:E,textAlign:"center",text:h,textBaseline:"top",fontSize:10,fontFamily:t.fontFamily||"Arial, sans-serif"},capture:!1}),k=S.getBBox();k.maxX>n?S.attr("textAlign","right"):k.minX<0&&S.attr("textAlign","left")}})),this.tickRects=g;var w=this.group;this.currentSpeed=1,this.controllerBtnGroup=new Hk({group:w,x:this.x,y:this.y+i+5,width:n,height:40,hideTimeTypeController:!0,speed:this.currentSpeed,fontFamily:this.fontFamily||"Arial, sans-serif"})},t.prototype.initEvent=function(){var t=this,e=this.sliceGroup;e.on("click",(function(e){var n=e.target;if("rect"===n.get("type")&&n.get("name")){var i=parseInt(n.get("name").split("-")[2],10);if(!isNaN(i)){var r=t.tickRects,o=t.unselectedTickStyle;r.forEach((function(t){t.rect.attr(o)}));var a=t.selectedTickStyle;r[i].rect.attr(a),t.startTickRectId=i,t.endTickRectId=i;var s=i/r.length;t.graph.emit(Ek,{value:[s,s]})}}})),e.on("dragstart",(function(e){var n=t.tickRects,i=t.unselectedTickStyle;n.forEach((function(t){t.rect.attr(i)}));var r=e.target,o=parseInt(r.get("name").split("-")[2],10),a=t.selectedTickStyle;n[o].rect.attr(a),t.startTickRectId=o;var s=o/n.length;t.graph.emit(Ek,{value:[s,s]}),t.dragging=!0})),e.on("dragover",(function(e){if(t.dragging&&"rect"===e.target.get("type")){for(var n=parseInt(e.target.get("name").split("-")[2],10),i=t.startTickRectId,r=t.tickRects,o=t.selectedTickStyle,a=t.unselectedTickStyle,s=0;s<r.length;s++){var l=s>=i&&s<=n?o:a;r[s].rect.attr(l)}var u=r.length;t.endTickRectId=n;var c=i/u,h=n/u;t.graph.emit(Ek,{value:[c,h]})}})),e.on("drop",(function(e){if(t.dragging&&(t.dragging=!1,"rect"===e.target.get("type"))){var n=t.startTickRectId,i=parseInt(e.target.get("name").split("-")[2],10);if(!(i<n)){var r=t.selectedTickStyle,o=t.tickRects;o[i].rect.attr(r),t.endTickRectId=i;var a=o.length,s=n/a,l=i/a;t.graph.emit(Ek,{value:[s,l]})}}}));var n=this,i=n.tooltipBackgroundColor,r=n.tooltipFomatter,o=n.canvas,a=new tC({container:o.get("container"),backgroundColor:i}),s=this.tickRects;s.forEach((function(t){var e=t.pickRect;e.on("mouseenter",(function(t){var e=t.target;if("rect"===e.get("type")){var n=parseInt(e.get("name").split("-")[2],10),i=o.getClientByPoint(s[n].x,s[n].y);a.show({x:s[n].x,y:s[n].y,clientX:i.x,clientY:i.y,text:r?r(s[n].value):s[n].value})}})),e.on("mouseleave",(function(t){a.hide()}))}));var l=this.group;l.on("playPauseBtn:click",(function(){t.isPlay=!t.isPlay,t.changePlayStatus()})),l.on("nextStepBtn:click",(function(){t.updateStartEnd(1)})),l.on("preStepBtn:click",(function(){t.updateStartEnd(-1)})),l.on(Sk,(function(e){e.type;var n=e.speed;t.currentSpeed=n}))},t.prototype.changePlayStatus=function(t){void 0===t&&(t=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(xk,null)):this.playHandler&&("undefined"!=typeof window&&window.cancelAnimationFrame(this.playHandler),t&&this.graph.emit(Mk,null))},t.prototype.startPlay=function(){var t=this;return"undefined"!=typeof window?window.requestAnimationFrame((function(){var e=t.currentSpeed;t.frameCount%(60/e)==0&&(t.frameCount=0,t.updateStartEnd(1)),t.frameCount++,t.isPlay&&(t.playHandler=t.startPlay())})):void 0},t.prototype.updateStartEnd=function(t){var e=this,n=this.tickRects,i=n.length,r=this.unselectedTickStyle,o=this.selectedTickStyle,a=e.endTickRectId;if(t>0?e.endTickRectId++:(n[e.endTickRectId].rect.attr(r),e.endTickRectId--),a!==e.startTickRectId)e.endTickRectId<e.startTickRectId&&(e.startTickRectId=e.endTickRectId);else{for(var s=e.startTickRectId;s<=e.endTickRectId-1;s++)n[s].rect.attr(r);e.startTickRectId=e.endTickRectId}if(n[e.endTickRectId]){n[e.endTickRectId].rect.attr(o);var l=e.startTickRectId/i,u=e.endTickRectId/i;this.graph.emit(Ek,{value:[l,u]})}},t.prototype.destory=function(){this.graph.off(Ek);var t=this.sliceGroup;t.off("click"),t.off("dragstart"),t.off("dragover"),t.off("drop"),this.tickRects.forEach((function(t){var e=t.pickRect;e.off("mouseenter"),e.off("mouseleave")})),this.tickRects.length=0,t.off("playPauseBtn:click"),t.off("nextStepBtn:click"),t.off("preStepBtn:click"),t.off(Sk),this.sliceGroup.destroy()},t}();const oC=rC;var aC=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),sC=function(){return sC=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},sC.apply(this,arguments)},lC=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n},uC=function(t){function e(e){return t.call(this,e)||this}return aC(e,t),e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-component-timebar",padding:10,type:"trend",trend:{data:[],isArea:!1,smooth:!0},controllerCfg:{speed:1,loop:!1},slider:{start:.1,end:.9,minText:"min",maxText:"max"},tick:{start:.1,end:.9,data:[]},textStyle:{},filterEdge:!1}},e.prototype.initContainer=function(){var t,e,n=this.get("graph"),i=this._cfgs,r=i.width,o=i.height,a=this.get("className")||"g6-component-timebar",s=this.get("container"),l=this.get("graph").get("container");s?((0,b.isString)(s)&&(s=document.getElementById(s)),t=s):HM(t=IM("<div class='"+a+"'></div>"),{position:"relative"}),l.appendChild(t),this.set("timeBarContainer",t),e="SVG"===n.get("renderer")?new rh({container:t,width:r,height:o}):new Qu({container:t,width:r,height:o}),this.set("canvas",e)},e.prototype.init=function(){this.initContainer();var t=this.get("canvas").addGroup({name:"timebar-group"});this.set("timeBarGroup",t),this.renderTrend(),this.initEvent();var e="undefined"!=typeof window&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif";this.set("fontFamily",e)},e.prototype.renderTrend=function(){var t=this._cfgs,e=t.width,n=t.x,i=t.y,r=t.padding,o=t.type,a=t.trend,s=t.slider,l=t.controllerCfg,u=t.textStyle,c=t.tick,h=t.backgroundStyle,d=t.foregroundStyle,f=a.data,p=lC(a,["data"]),m=e-2*r,g="trend"===o?26:4,v=this.get("graph"),y=this.get("timeBarGroup"),b=this.get("canvas"),_=null;"trend"===o||"simple"===o?_=new Jk(sC(sC({graph:v,canvas:b,group:y,type:o,x:n+r,y:"trend"===o?i+r:i+r+15,width:m,height:g,padding:r,backgroundStyle:h,foregroundStyle:d,trendCfg:sC(sC({},p),{data:f.map((function(t){return t.value}))})},s),{tick:{ticks:f,tickLabelFormatter:c.tickLabelFormatter,tickLabelStyle:c.tickLabelStyle,tickLineStyle:c.tickLineStyle},handlerStyle:sC(sC({},s.handlerStyle),{height:s.height||g}),controllerCfg:l,textStyle:u})):"tick"===o&&(_=new oC(sC({graph:v,canvas:b,group:y,x:n+r,y:i+r},c))),this.set("timebar",_)},e.prototype.filterData=function(t){var e,n=t.value,i=null,r=this._cfgs.type;if("trend"===r||"simple"===r?i=this._cfgs.trend.data:"tick"===r&&(i=this._cfgs.tick.data),i&&0!==i.length){var o=this.get("rangeChange"),a=this.get("graph"),s=Math.round(i.length*n[0]),l=Math.round(i.length*n[1]);l=l>=i.length?i.length-1:l,s=s>=i.length?i.length-1:s;var u=null===(e=this._cfgs.tick)||void 0===e?void 0:e.tickLabelFormatter,c=u?u(i[s]):i[s].date,h=u?u(i[l]):i[l].date;if("tick"!==r)this.get("timebar").setText(c,h);if(o)o(a,c,h);else{(!this.cacheGraphData||this.cacheGraphData.nodes&&0===this.cacheGraphData.nodes.length)&&(this.cacheGraphData=a.get("data"));var d=this.cacheGraphData.nodes.filter((function(t){return t.date>=i[s].date&&t.date<=i[l].date})),f=d.map((function(t){return t.id})),p=[];this.cacheGraphData.edges&&(p=this.cacheGraphData.edges.filter((function(t){return f.includes(t.source)&&f.includes(t.target)})),this.get("filterEdge")&&(p=p.filter((function(t){return t.date>=i[s].date&&t.date<=i[l].date})))),a.changeData({nodes:d,edges:p})}}else console.warn(" TimeBar ")},e.prototype.initEvent=function(){var t=this,e=0,n=0,i=this._cfgs.type;i&&"trend"!==i&&"simple"!==i?"tick"===i&&(e=this._cfgs.tick.start,n=this._cfgs.tick.end):(e=this._cfgs.slider.start,n=this._cfgs.slider.end);var r=this.get("graph");r.on("afterrender",(function(i){t.filterData({value:[e,n]})})),r.on(Ek,(0,b.throttle)((function(e){t.filterData(e)}),200,{trailing:!0,leading:!0}))},e.prototype.destroy=function(){var e=this.get("timebar");e&&e.destory&&e.destory(),t.prototype.destroy.call(this);var n=this.get("timeBarContainer");if(n){var i=this.get("container");i||(i=this.get("graph").get("container")),(0,b.isString)(i)&&(i=document.getElementById(i)),i.removeChild(n)}},e}(WM);const cC=uC;var hC=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),dC=gl.applyMatrix;var fC=function(t){function e(e){return t.call(this,e)||this}return hC(e,t),e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",width:200,delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0}},e.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},e.prototype.disableRefresh=function(){this.set("refresh",!1)},e.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},e.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},e.prototype.initViewport=function(){var t=this,e=this._cfgs,n=e.graph;if(!this.destroyed){var i=this.get("container");(0,b.isString)(i)&&(i=document.getElementById(i));var r=IM("<div class="+e.viewportClassName+"\n      style='position:absolute;\n        left:0;\n        top:0;\n        box-sizing:border-box;\n        border: 2px solid #1980ff'>\n      </div>"),o=0,a=0,s=!1,l=0,u=0,c=0,h=0,d=0,f=0;i.addEventListener("mousedown",(function(i){if(e.refresh=!1,i.target===r){var l=r.style;c=parseInt(l.width,10),h=parseInt(l.height,10);var u=t.get("width"),p=t.get("height");c>u||h>p||(f=n.getZoom(),d=t.get("ratio"),s=!0,o=i.clientX,a=i.clientY)}}),!1),i.addEventListener("mousemove",(function(e){if(s&&!(0,b.isNil)(e.clientX)&&!(0,b.isNil)(e.clientY)){var i=t.get("width"),p=t.get("height"),m=r.style;l=parseInt(m.left,10),u=parseInt(m.top,10),c=parseInt(m.width,10),h=parseInt(m.height,10);var g=o-e.clientX,v=a-e.clientY;l-g<0?g=l:l-g+c>=i&&(g=0),u-v<0?v=u:u-v+h>=p&&(v=0),HM(r,{left:(l-=g)+"px",top:(u-=v)+"px"}),n.translate(g*f/d,v*f/d),o=e.clientX,a=e.clientY}}),!1),i.addEventListener("mouseleave",(function(){s=!1,e.refresh=!0}),!1),i.addEventListener("mouseup",(function(){s=!1,e.refresh=!0}),!1),this.set("viewport",r),i.appendChild(r)}},e.prototype.updateViewport=function(){if(!this.destroyed){var t=this.get("ratio"),e=this.get("width"),n=this.get("height"),i=this.get("graph"),r=i.get("width"),o=r/i.get("height"),a=i.getGroup(),s=a.getCanvasBBox(),l=[(s.minX+s.maxX)/2,(s.minY+s.maxY)/2],u=[s.maxX-s.minX,s.maxY-s.minY],c={centerX:l[0],centerY:l[1],width:0,height:0,minX:0,minY:0};s[0]/s[1]>o?(c.width=u[0],c.height=c.width/o):(c.height=u[1],c.width=c.height*o),c.minX=l[0]-c.width/2,c.minY=l[1]-c.height/2;var h=a.getMatrix();h||(h=[1,0,0,0,1,0,0,0,1]);var d=R([1,0,0,0,1,0,0,0,1],h),f=dC({x:c.minX,y:c.minY},d),p=i.getCanvasByPoint(f.x,f.y),m=this.get("viewport");m||this.initViewport();var g=r/c.width,v=g*e,y=g*n,b=e*-p.x/c.width,_=n*-p.y/c.height,w=b+v,x=_+y;b<0&&(v+=b,b=0),w>e&&(v-=w-e),_<0&&(y+=_,_=0),x>n&&(y-=x-n),this.set("ratio",t),HM(m,{left:b+"px",top:_+"px",width:v+"px",height:y+"px"})}},e.prototype.init=function(){this.initContainer()},e.prototype.initContainer=function(){var t=this,e=t.get("graph"),n=e.get("width"),i=e.get("height")/n,r=t.get("className"),o=t.get("container"),a=t.get("width"),s=t.get("height");a||s||(a=200),a?(s=i*a,t.set("height",s)):(a=1/i*s,t.set("width",a));var l=IM("<div class='"+r+"' style='width: "+a+"px; height: "+s+"px; overflow: hidden; position: relative;'></div>");(0,b.isString)(o)&&(o=document.getElementById(o)),o?o.appendChild(l):e.get("container").appendChild(l),t.set("container",l);var u=IM('<div class="g6-minimap-container" style="position: relative; width: 100%; height: 100%; text-align: center; display: table;"></div>');l.appendChild(u);var c=IM('<span style="display: table-cell; vertical-align: middle; "></span>');u.appendChild(c),t.set("containerDOM",u),t.set("containerSpan",c);var h=IM('<img alt="" src="'+this.get("graphImg")+'" style="display: inline-block; user-select: none;" draggable="false" />');t.set("imgDOM",h),t.updateImgSize(),c.appendChild(h),t.updateCanvas()},e.prototype.updateImgSize=function(){var t=this,e=t.get("imgDOM"),n=t.get("width"),i=t.get("height");e.onload=function(){var t=function(t,e){var n,i;if(t.naturalWidth)n=t.naturalWidth,i=t.naturalHeight;else{var r=new Image;r.src=t.src,r.onload=function(){e&&e(r.width,r.height)}}return[n,i]}(e);t[0]>t[1]?e.width=n:e.height=i}},e.prototype.updateCanvas=function(){if(this.get("refresh")){var t=this.get("graph");if(!t.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var e=this.get("width")/t.get("canvas").getCanvasBBox().width;this.set("ratio",e),this.updateViewport()}}},e.prototype.getViewport=function(){return this.get("viewport")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.updateGraphImg=function(t){var e=this;e.get("imgDOM").remove(),e.set("graphImg",t);var n=IM('<img alt="" src="'+t+'" style="display: inline-block;" ondragstart="return false;" onselectstart="return false;"/>');e.set("imgDOM",n),n.src=t,e.updateImgSize(),e.get("containerSpan").appendChild(n),e.updateCanvas()},e.prototype.destroy=function(){var t=this.get("container");t.parentNode.removeChild(t)},e}(WM);const pC=fC;var mC=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),gC=function(){return gC=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},gC.apply(this,arguments)},vC=gl.distance,yC={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:1,fill:"#fff"},bC=function(t){function e(e){return t.call(this,e)||this}return mC(e,t),e.prototype.getDefaultCfgs=function(){return{type:"both",trigger:"mousemove",r:60,delegateStyle:(0,b.clone)(yC),showLabel:"edge",scaleRBy:"wheel"}},e.prototype.getEvents=function(){var t;switch(this.get("trigger")){case"click":t={click:"filter"};break;case"drag":t={click:"createDelegate"};break;default:t={mousemove:"filter"}}return t},e.prototype.init=function(){var t=this,e=t.get("showLabel"),n="node"===e||"both"===e,i="edge"===e||"both"===e;t.set("showNodeLabel",n),t.set("showEdgeLabel",i),t.get("shouldShow")||t.set("shouldShow",(function(){return!0}))},e.prototype.createDelegate=function(t){var e=this,n=e.get("delegate");n&&!n.destroyed||(e.filter(t),(n=e.get("delegate")).on("dragstart",(function(t){})),n.on("drag",(function(t){e.filter(t)})),"wheel"===this.get("scaleRBy")&&n.on("mousewheel",(function(t){e.scaleRByWheel(t)})))},e.prototype.scaleRByWheel=function(t){var e=this;if(t&&t.originalEvent){t.preventDefault&&t.preventDefault();var n,i=e.get("graph"),r=e.get("delegate");(r?{x:r.attr("x"),y:r.attr("y")}:void 0)||i.getPointByClient(t.clientX,t.clientY);n=t.originalEvent.wheelDelta<0?.95:1/.95;var o=e.get("maxR"),a=e.get("minR"),s=e.get("r");(s>(o||i.get("height"))&&n>1||s<(a||.05*i.get("height"))&&n<1)&&(n=1),s*=n,e.set("r",s),e.filter(t)}},e.prototype.filter=function(t){var e=this,n=e.get("graph"),i=n.getNodes(),r={},o=e.get("r"),a=e.get("type"),s={x:t.x,y:t.y};e.updateDelegate(s,o);var l=e.get("shouldShow"),u=e.get("vShapes");u&&u.forEach((function(t){t.remove(),t.destroy()})),u=[],i.forEach((function(t){var e=t.getModel(),n=e.x,i=e.y;vC({x:n,y:i},s)<o&&(r[e.id]=t)}));var c=n.getEdges(),h=[];c.forEach((function(t){var e=t.getModel(),n=e.source,i=e.target;l(e)&&("only-source"===a||"one"===a?r[n]&&!r[i]&&h.push(t):"only-target"===a||"one"===a?r[i]&&!r[n]&&h.push(t):"both"===a&&r[n]&&r[i]&&h.push(t))}));var d=e.get("showNodeLabel"),f=e.get("showEdgelabel"),p=n.get("group");h.forEach((function(t){t.get("group").get("children").forEach((function(t){var e=t.get("type"),n=p.addShape(e,{attrs:t.attr()});u.push(n),d&&"text"===e&&n.set("visible",!0)}))})),Object.keys(r).forEach((function(t){var e=r[t].get("group").clone();if(p.add(e),u.push(e),f)for(var n=e.get("children"),i=0;i<n.length;i++){var o=n[i];"text"===o.get("type")&&o.set("visible",!0)}})),e.set("vShapes",u)},e.prototype.updateParams=function(t){var e=this,n=t.r,i=t.trigger,r=t.minR,o=t.maxR,a=t.scaleRBy,s=t.showLabel,l=t.shouldShow;if(isNaN(t.r)||e.set("r",n),isNaN(o)||e.set("maxR",o),isNaN(r)||e.set("minR",r),"mousemove"!==i&&"click"!==i||e.set("trigger",i),"wheel"===a||"unset"===a){e.set("scaleRBy",a),e.get("delegate").remove(),e.get("delegate").destroy();var u=e.get("dPercentText");u&&(u.remove(),u.destroy())}"node"!==s&&"both"!==s||e.set("showNodeLabel",!0),"edge"!==s&&"both"!==s||e.set("showEdgeLabel",!0),l&&e.set("shouldShow",l)},e.prototype.updateDelegate=function(t,e){var n=this,i=n.get("graph"),r=n.get("delegate");if(!r||r.destroyed){var o=i.get("group"),a=n.get("delegateStyle")||yC;r=o.addShape("circle",{attrs:gC({r:e,x:t.x,y:t.y},a),name:"lens-shape",draggable:!0}),"drag"!==this.get("trigger")&&"wheel"===this.get("scaleRBy")&&r.on("mousewheel",(function(t){n.scaleRByWheel(t)}))}else r.attr({x:t.x,y:t.y,r:e});n.set("delegate",r)},e.prototype.clear=function(){var t=this,e=t.get("vShapes");e&&e.forEach((function(t){t.remove(),t.destroy()})),e=[],t.set("vShapes",e);var n=t.get("delegate");n&&!n.destroyed&&(n.remove(),n.destroy())},e.prototype.destroy=function(){this.clear()},e}(WM);const _C=bC;var wC=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),xC=gl.pointLineDistance,MC={stroke:"#FA8C16",lineWidth:1},EC=function(t){function e(e){return t.call(this,e)||this}return wC(e,t),e.prototype.getDefaultCfgs=function(){return{line:MC,itemAlignType:"center",tolerance:5,horizontalLines:{},verticalLines:{},alignLines:[]}},e.prototype.init=function(){},e.prototype.getEvents=function(){return{"node:dragstart":"onDragStart","node:drag":"onDrag","node:dragend":"onDragEnd"}},e.prototype.onDragStart=function(){this.initBoxLine()},e.prototype.onDrag=function(t){var e=t.item,n=(e.get("delegateShape")||e).getBBox(),i=e.getModel(),r=i.x-n.x,o=i.y-n.y;this.show({x:n.minX+r,y:n.minY+o},{width:n.width,height:n.height})},e.prototype.onDragEnd=function(){this.destory()},e.prototype.initBoxLine=function(){var t=this._cfgs,e=t.horizontalLines,n=t.verticalLines,i=t.itemAlignType;this.get("graph").getNodes().forEach((function(t){var r=t.getBBox(),o=t.get("id");!0===i||"horizontal"===i?(e[o+"tltr"]=[r.minX,r.minY,r.maxX,r.minY,t],e[o+"lcrc"]=[r.minX,r.centerY,r.maxX,r.centerY,t],e[o+"blbr"]=[r.minX,r.maxY,r.maxX,r.maxY,t]):"center"===i&&(e[o+"lcrc"]=[r.minX,r.centerY,r.maxX,r.centerY,t]),!0===i||"vertical"===i?(n[o+"tlbl"]=[r.minX,r.minY,r.minX,r.maxY,t],n[o+"tcbc"]=[r.centerX,r.minY,r.centerX,r.maxY,t],n[o+"trbr"]=[r.maxX,r.minY,r.maxX,r.maxY,t]):"center"===i&&(n[o+"tcbc"]=[r.centerX,r.minY,r.centerX,r.maxY,t])}))},e.prototype.show=function(t,e){var n=(0,b.mix)({},t);return this.itemAlign(t,e,n),t},e.prototype.itemAlign=function(t,e,n){var i=this,r=this._cfgs,o=r.horizontalLines,a=r.verticalLines,s=r.tolerance,l={x:n.x+e.width/2,y:n.y},u={x:n.x+e.width/2,y:n.y+e.height/2},c={x:n.x+e.width/2,y:n.y+e.height},h={x:n.x,y:n.y+e.height/2},d={x:n.x+e.width,y:n.y+e.height/2},f=[],p=[],m=null;if(this.clearAlignLine(),(0,b.each)(o,(function(t){t[4].isVisible&&(f.push(i.getLineDisObject(t,l)),f.push(i.getLineDisObject(t,u)),f.push(i.getLineDisObject(t,c)))})),(0,b.each)(a,(function(t){t[4].isVisible&&(p.push(i.getLineDisObject(t,h)),p.push(i.getLineDisObject(t,u)),p.push(i.getLineDisObject(t,d)))})),f.sort((function(t,e){return t.dis-e.dis})),p.sort((function(t,e){return t.dis-e.dis})),0!==f.length&&f[0].dis<s){t.y=f[0].line[1]-f[0].point.y+n.y,m={type:"item",horizontals:[f[0]]};for(var g=1;g<3;g++)f[0].dis===f[g].dis&&m.horizontals.push(f[g])}if(0!==p.length&&p[0].dis<s){t.x=p[0].line[0]-p[0].point.x+n.x,m?m.verticals=[p[0]]:m={type:"item",verticals:[p[0]]};for(g=1;g<3;g++)p[0].dis===p[g].dis&&m.verticals.push(p[g])}m&&(m.bbox=e,this.addAlignLine(m))},e.prototype.addAlignLine=function(t){var e=t.bbox,n=t.type,i=t.horizontals,r=t.verticals,o=this._cfgs,a=o.line,s=o.alignLines,l=this.get("graph").get("group");"item"===n&&(i&&(0,b.each)(i,(function(t){var n,i,r=t.line,o=t.point,u=(r[0]+r[2])/2;o.x<u?(n=o.x-e.width/2,i=Math.max(r[0],r[2])):(n=o.x+e.width/2,i=Math.min(r[0],r[2]));var c=(0,b.mix)({x1:n,y1:r[1],x2:i,y2:r[1]},a),h=l.addShape("line",{attrs:c,capture:!1});s.push(h)})),r&&(0,b.each)(r,(function(t){var n,i,r=t.line,o=t.point,u=(r[1]+r[3])/2;o.y<u?(n=o.y-e.height/2,i=Math.max(r[1],r[3])):(n=o.y+e.height/2,i=Math.min(r[1],r[3]));var c=(0,b.mix)({x1:r[0],y1:n,x2:r[0],y2:i},a),h=l.addShape("line",{attrs:c,capture:!1});s.push(h)})))},e.prototype.getLineDisObject=function(t,e){return{line:t,point:e,dis:xC(t,e)}},e.prototype.getContainer=function(){return this.get("container")},e.prototype.clearAlignLine=function(){var t=this._cfgs.alignLines;(0,b.each)(t,(function(t){t.remove()})),t.length=0},e.prototype.destory=function(){var t=this._cfgs,e=t.horizontalLines,n=t.verticalLines;this.get("graph").getNodes().forEach((function(t){var i=t.get("id");delete e[i+"tltr"],delete e[i+"lcrc"],delete e[i+"blbr"],delete n[i+"tlbl"],delete n[i+"tcbc"],delete n[i+"trbr"]})),this.clearAlignLine()},e}(WM);const SC=EC;var kC=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),CC=function(){return CC=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},CC.apply(this,arguments)},TC=["click","mouseenter"],DC=function(t){function e(e){return t.call(this,e)||this}return kC(e,t),e.prototype.getDefaultCfgs=function(){return{data:{},position:"top",padding:8,margin:8,offsetX:0,offsetY:0,layout:"horizontal",flipPage:!1,containerStyle:{},align:void 0,horiSep:8,vertiSep:8,filter:{enable:!1,trigger:"click"}}},e.prototype.init=function(){this.formatArray("padding"),this.formatArray("margin");var t=this.get("filter")||{};t.multiple&&"mouseenter"===t.trigger&&this.set("multiple",!1);var e=this.get("align");if(!e){var n=this.get("position").split("-");n.includes("left")&&(e="left"),e=n.includes("right")?"right":"center",this.set("align",e)}var i=this.get("graph").get("container"),r=IM("<div class='g6-legend-container' style=\"position: absolute;\"></div>");i.appendChild(r),this.set("container",r);var o=this.render();HM(r,this.getContainerPos(o)),this.bindEvents()},e.prototype.getContainerPos=function(t){void 0===t&&(t=[0,0]);var e=this.get("graph"),n=this.get("offsetX"),i=this.get("offsetY"),r=this.get("margin"),o=this.get("position").split("-"),a={top:0,right:1,bottom:2,left:3},s={left:(e.getWidth()-t[0])/2+0,top:(e.getHeight()-t[1])/2+0};return o.forEach((function(n){var i=r[a[n]],o=n;switch(n){case"top":case"left":i+=0;break;case"bottom":i=e.getHeight()-t[1]-i+0,o="top";break;default:i=e.getWidth()-t[0]-i+0,o="left"}s[o]=i})),s.top+=i+e.getContainer().offsetTop,s.left+=n+e.getContainer().offsetLeft,Object.keys(s).forEach((function(t){s[t]=s[t]+"px"})),s},e.prototype.bindEvents=function(){var t=this,e=t.get("filter");if(e&&e.enable){var n=e.trigger||"click";TC.includes(n)||(console.warn("Trigger for legend filterling must be 'click' or 'mouseenter', 'click' will take effect by default."),n="click");var i=t.get("legendCanvas");"mouseenter"===n?(i.on("node-container:mouseenter",(function(e){return t.filterData(e)})),i.on("node-container:mouseleave",(function(e){t.clearFilter(),t.clearActiveLegend()}))):(i.on("node-container:click",(function(e){return t.filterData(e)})),i.on("click",(function(e){e.target&&e.target.isCanvas&&e.target.isCanvas()&&(t.clearFilter(),t.clearActiveLegend())})))}},e.prototype.changeData=function(t){this.set("data",t);var e=this.render();HM(this.get("container"),this.getContainerPos(e))},e.prototype.activateLegend=function(t){var e=this.get("filter");(null==e?void 0:e.multiple)||this.clearActiveLegend();var n=t.get("parent");n.get("active")?(n.set("active",!1),this.findLegendItemsByState("active").length&&n.set("inactive",!0)):(n.set("inactive",!1),n.set("active",!0)),this.findLegendItemsByState("active").length?this.findLegendItemsByState("active","all",!1).forEach((function(t){t.set("inactive",!0)})):this.clearActiveLegend();var i=(null==e?void 0:e.lengedStateStyles)||{},r=(null==i?void 0:i.inactive)||{opacity:.5,"text-shape":{opacity:.5}},o=r["text-shape"]||{};this.findLegendItemsByState("inactive").forEach((function(t){var e=t.get("children"),n=e[0],i=e[1];n.attr(CC(CC({},n.get("oriAttrs")),r)),i.attr(CC(CC({},i.get("oriAttrs")),o))}));var a=(null==i?void 0:i.active)||{stroke:"#000",lineWidth:2,"text-shape":{fontWeight:"bold"}},s=a["text-shape"]||{};this.findLegendItemsByState("active").forEach((function(t){var e=t.get("children"),n=e[0],i=e[1];n.attr(CC(CC({},n.get("oriAttrs")),a)),i.attr(CC(CC({},i.get("oriAttrs")),s))}))},e.prototype.findLegendItemsByState=function(t,e,n){void 0===e&&(e="all"),void 0===n&&(n=!0);var i=this.get("legendCanvas").find((function(t){return"root"===t.get("name")})),r=i.find((function(t){return"node-group"===t.get("name")})),o=i.find((function(t){return"edge-group"===t.get("name")}));return"node"===e?r.get("children").filter((function(e){return!!e.get(t)===n})):"edge"===e?o.get("children").filter((function(e){return!!e.get(t)===n})):r.get("children").filter((function(e){return!!e.get(t)===n})).concat(o.get("children").filter((function(e){return!!e.get(t)===n})))},e.prototype.clearActiveLegend=function(){var t=this.get("legendCanvas").find((function(t){return"root"===t.get("name")}));[t.find((function(t){return"node-group"===t.get("name")})),t.find((function(t){return"edge-group"===t.get("name")}))].forEach((function(t){t.get("children").forEach((function(t){t.set("active",!1),t.set("inactive",!1);var e=t.get("children"),n=e[0],i=e[1];n.attr(n.get("oriAttrs")),i.attr(i.get("oriAttrs"))}))}))},e.prototype.filterData=function(t){var e=this.get("filter"),n=null==e?void 0:e.filterFunctions;if(e&&n){var i=this.get("legendCanvas"),r=this.get("graph"),o=e.graphActiveState||"active",a=e.graphInactiveState||"inactive",s=e.multiple;this.clearFilter(),s||this.clearActiveLegend(),this.activateLegend(t.target);var l=i.find((function(t){return"root"===t.get("name")})),u=l.find((function(t){return"node-group"===t.get("name")})),c=l.find((function(t){return"edge-group"===t.get("name")})),h=u.get("children").filter((function(t){return t.get("active")})),d=c.get("children").filter((function(t){return t.get("active")})),f=0,p=["getNodes","getEdges"];p.forEach((function(t){r[t]().forEach((function(e){var i=!1;("getNodes"===t?h:d).forEach((function(t){var r=n[t.get("id")];i=i||r(e.getModel())})),i?(r.setItemState(e,a,!1),r.setItemState(e,o,!0),f++):(r.setItemState(e,o,!1),r.setItemState(e,a,!0))}))})),f||p.forEach((function(t){r[t]().forEach((function(t){r.clearItemStates(t,[a])}))}))}},e.prototype.clearFilter=function(){var t=this.get("graph"),e=this.get("filter");if(e){var n=e.graphActiveState||"active",i=e.graphInactiveState||"inactive";t.getNodes().forEach((function(e){t.clearItemStates(e,[n,i])})),t.getEdges().forEach((function(e){t.clearItemStates(e,[n,i])}))}},e.prototype.render=function(){var t=this;this.processData();var e=this.get("legendCanvas");if(!e){var n=(e=new Qu({container:this.get("container"),width:200,height:200})).addGroup({name:"root"});n.addGroup({name:"node-group"}),n.addGroup({name:"edge-group"}),this.set("legendCanvas",e)}var i=e.find((function(t){return"root"===t.get("name")})),r=i.find((function(t){return"node-group"===t.get("name")})),o=i.find((function(t){return"edge-group"===t.get("name")})),a=this.get("itemsData"),s=[r,o];["nodes","edges"].forEach((function(e,n){a[e].forEach((function(i){var r,o,a=s[n].addGroup({id:i.id,name:"node-container"}),l=i.type,u=t.getShapeSize(i),c=u.width,h=u.height,d=u.r,f=t.getStyle(e.substr(0,4),i);switch(i.type){default:o={r:d,x:0,y:0};break;case"rect":o={width:c,height:h,x:-c/2,y:-h/2};break;case"ellipse":o={r1:c,r2:h,x:0,y:0};break;case"line":o={x1:-c/2,y1:0,x2:c/2,y2:0},l="line";break;case"quadratic":o={path:[["M",-c/2,0],["Q",0,c/2,c/2,0]]},l="path";break;case"cubic":o={path:[["M",-c/2,0],["C",-c/6,c/2,c/6,-c/2,c/2,0]]},l="path"}var p=a.addShape(l,{attrs:CC(CC({},o),f),name:i.type+"-node-keyShape",oriAttrs:CC({opacity:1},f)});if(i.label){var m=p.getBBox(),g=(null===(r=i.labelCfg)||void 0===r?void 0:r.style)||{},v=CC({textAlign:"begin",fontSize:12,textBaseline:"middle",fill:"#000",opacity:1,fontWeight:"normal"},g);a.addShape("text",{attrs:CC({x:m.maxX+4,y:0,text:i.label},v),className:"legend-label",name:i.type+"-node-text",oriAttrs:v})}}))}));var l,u=this.get("padding"),c=i.find((function(t){return"title-container"===t.get("name")})),h={height:0,maxY:0,width:0};if(this.get("title")){c||(c=i.addGroup({name:"title-container"}));var d={fontSize:20,fontFamily:"Arial",fontWeight:300,textBaseline:"top",textAlign:"center",fill:"#000",x:0,y:u[0]},f=this.get("titleConfig")||{},p=Object.assign(d,f.style||{});l=c.addShape("text",{attrs:CC({text:this.get("title")},p)}),h=c.getCanvasBBox(),c.setMatrix([1,0,0,0,1,0,f.offsetX,f.offsetY,1])}this.layoutItems();var m=i.getCanvasBBox(),g=r.getCanvasBBox(),v=g.minX<0?Math.abs(g.minX)+u[3]:u[3],y=h.maxY<g.minY?Math.abs(h.maxY-g.minY)+u[0]:h.maxY+u[0],b=[1,0,0,0,1,0,v,y,1];r.setMatrix(b);var _=[(m=i.getCanvasBBox()).minX+m.width+u[1],m.minY+m.height+u[2]];if(l){f=CC({position:"center",offsetX:0,offsetY:0},this.get("titleConfig"));h=c.getCanvasBBox();var w=c.getMatrix()||[1,0,0,0,1,0,0,0,1];"center"===f.position?w[6]=_[0]/2+f.offsetX:"right"===f.position?(w[6]=_[0]-u[3]+f.offsetX,l.attr({textAlign:"right"})):(w[6]=u[3]+f.offsetX,l.attr({textAlign:"left"})),c.setMatrix(w),h=c.getCanvasBBox(),b=[1,0,0,0,1,0,v=g.minX<0?Math.abs(g.minX)+u[3]:u[3],y=g.minY<h.maxY?Math.abs(h.maxY-g.minY)+u[0]:h.maxY+u[0],1],r.setMatrix(b);var x=[1,0,0,0,1,0,v,y,1];"vertical"===this.get("layout")?x[6]+=g.maxX+this.get("horiSep"):x[7]+=g.maxY+this.get("vertiSep"),o.setMatrix(x)}else{g=r.getCanvasBBox();var M=[1,0,0,0,1,0,0,0,1];"vertical"===this.get("layout")?M[6]+=b[6]+g.maxX+this.get("horiSep"):M[7]+=b[7]+g.maxY+this.get("vertiSep"),o.setMatrix(M)}m=i.getCanvasBBox(),g=r.getCanvasBBox(),b=r.getMatrix()||[1,0,0,0,1,0,0,0,1];var E=o.getMatrix()||[1,0,0,0,1,0,0,0,1],S=o.getCanvasBBox();_=[Math.max(g.width+b[6],S.width+E[6])+u[1],Math.max(g.height+b[7],S.height+E[7])+u[2]],e.changeSize(_[0],_[1]);var k=this.get("containerStyle"),C=i.getMatrix()||[1,0,0,0,1,0,0,0,1],T=gl.invertMatrix({x:0,y:0},C);return i.addShape("rect",{attrs:CC({x:T.x+(k.lineWidth||1),y:T.y+(k.lineWidth||1),width:_[0]-2*(k.lineWidth||1),height:_[1]-2*(k.lineWidth||1),fill:"#f00",stroke:"#000",lineWidth:1,opacity:.5},k),name:"legend-back-rect",capture:!1}).toBack(),_},e.prototype.layoutItems=function(){var t=this.get("legendCanvas"),e=this.get("horiSep"),n=this.get("vertiSep"),i=this.get("layout"),r=this.get("align"),o=[0,0],a=t.find((function(t){return"root"===t.get("name")})),s=a.find((function(t){return"node-group"===t.get("name")})),l=a.find((function(t){return"edge-group"===t.get("name")})),u={min:0,max:-1/0},c=-1/0;s.get("children").forEach((function(t,r){0===r&&(u.min=o[0]);var a=t.get("children")[0],s=t.getCanvasBBox(),l=a.getBBox(),h=l.width,d=l.height,f=0,p=0,m=0;"vertical"===i?(p=o[1],m=o[0]+h/2,o[0]=m+s.height+n,f=s.maxX+p+h/2):(p=o[0]+h/2,m=o[1],o[0]=p+s.width+e,f=s.maxY+m+d/2),o[0]>u.max&&(u.max=o[0]),f>c&&(c=f),t.setMatrix([1,0,0,0,1,0,p,m,1])}));var h=u.max-u.min,d={min:0,max:-1/0},f=s.getCanvasBBox();o[0]=0,o[1]="vertical"===i?f.maxX+e:f.maxY+n,l.get("children").forEach((function(t,r){0===r&&(d.min=o[0]);var a=t.get("children")[0],s=t.getCanvasBBox(),l=a.getBBox(),u=l.width,c=l.height,h=0,f=0;"vertical"===i?(h=o[1],f=o[0],o[0]=f+s.height+n,t.setMatrix([1,0,0,0,1,0,0,f+c/2,1])):(h=o[0],f=o[1],o[0]=h+s.width+e,t.setMatrix([1,0,0,0,1,0,h+u/2,0,1])),o[0]>d.max&&(d.max=o[0])}));var p=d.max-d.min;if(r&&""!==r&&"left"!==r){var m=h-p,g="center"===r?Math.abs(m)/2:Math.abs(m);(m<0?s:l).get("children").forEach((function(t){var e=t.getMatrix()||[1,0,0,0,1,0,0,0,1];"vertical"===i?e[7]+=g:e[6]+=g,t.setMatrix(e)}))}},e.prototype.processData=function(){var t=this.get("data"),e={nodes:[],edges:[]};t.nodes&&(t.nodes.sort((function(t,e){return t.order-e.order})),t.nodes.forEach((function(t){var n,i,r,o,a,s=t.size||[(null===(n=t.style)||void 0===n?void 0:n.width)||(null===(i=t.style)||void 0===i?void 0:i.r)||8,(null===(r=t.style)||void 0===r?void 0:r.height)||(null===(o=t.style)||void 0===o?void 0:o.r)||8],l=(null===(a=t.labelCfg)||void 0===a?void 0:a.style)||{};e.nodes.push({id:t.id||(0,b.uniqueId)(),type:t.type||"circle",style:CC({},t.style),order:t.order,label:t.label,itemType:"node",size:s,labelCfg:{position:"right",style:CC({fontFamily:"Arial"},l)}})}))),t.edges&&(t.edges.sort((function(t,e){return t.order-e.order})),t.edges.forEach((function(t){var n,i,r=t.type||"line";"cubic-horizontal"===t.type&&(r="cubic");var o=(null===(n=t.labelCfg)||void 0===n?void 0:n.style)||{},a=t.size||[(null===(i=t.style)||void 0===i?void 0:i.width)||8,1];e.edges.push({id:t.id||(0,b.uniqueId)(),type:r,size:a,style:CC({lineWidth:(0,b.isArray)(a)?a[1]:1},t.style),order:t.order,label:t.label,itemType:"edge",labelCfg:{position:"right",style:CC({fontFamily:"Arial"},o)}})}))),this.set("itemsData",e)},e.prototype.getContainer=function(){return this.get("container")},e.prototype.formatArray=function(t){var e=this.get(t);if((0,b.isNumber)(e))this.set(t,[e,e,e,e]);else if((0,b.isArray)(e))switch(e.length){case 0:this.set(t,[0,0,0,0]);break;case 1:this.set(t,[e[0],e[0],e[0],e[0]]);break;case 2:this.set(t,[e[0],e[1],e[0],e[1]]);break;case 3:this.set(t,[e[0],e[1],e[2],e[1]])}return this.get(t)},e.prototype.getShapeSize=function(t){var e,n,i;return t.size&&((0,b.isArray)(t.size)?(e=t.size[0],n=t.size[1]||t.size[0],i=t.size[0]/2):(0,b.isNumber)(t.size)&&(e=t.size,n=t.size,i=t.size/2)),t.style&&(t.style.width&&(e=t.style.width),t.style.height&&(n=t.style.height),t.style.r&&(i=t.style.r)),i||(i=5),e||(e=i),n||(n=i),{width:e,height:n,r:i}},e.prototype.getStyle=function(t,e){return CC(CC({},"node"===t?{fill:"#ccc",lineWidth:0}:{stroke:"#000",lineWidth:1}),e.style||{})},e.prototype.destroy=function(){var t=this.get("graph").get("container"),e=this.get("container");t.removeChild(e)},e}(WM);const LC={PluginBase:WM,Menu:tE,Grid:KM,Minimap:aE,Bundling:hE,ToolBar:bE,Tooltip:xE,Fisheye:gE,TimeBar:cC,ImageMinimap:pC,EdgeFilterLens:_C,SnapLine:SC,Legend:DC};xl("circle",{options:{size:kl.defaultNode.size,style:{x:0,y:0,stroke:kl.defaultNode.style.stroke,fill:kl.defaultNode.style.fill,lineWidth:kl.defaultNode.style.lineWidth},labelCfg:{style:{fill:kl.nodeLabel.style.fill,fontSize:kl.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:kl.defaultNode.linkPoints.size,lineWidth:kl.defaultNode.linkPoints.lineWidth,fill:kl.defaultNode.linkPoints.fill,stroke:kl.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,y.__assign)({},kl.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(t,e){var n=this.getOptions(t).icon,i=void 0===n?{}:n,r=this.getShapeStyle(t),o=(0,b.deepMix)({},i,t.icon),a=e.addShape("circle",{attrs:r,className:this.type+"-keyShape",draggable:!0}),s=o.width,l=o.height,u=o.show,c=o.text;return u&&(c?e.addShape("text",{attrs:(0,y.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},o),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}):e.addShape("image",{attrs:(0,y.__assign)({x:-s/2,y:-l/2},o),className:this.type+"-icon",name:this.type+"-icon",draggable:!0})),this.drawLinkPoints(t,e),a},drawLinkPoints:function(t,e){var n=this.getOptions(t).linkPoints,i=void 0===n?{}:n,r=i.top,o=i.left,a=i.right,s=i.bottom,l=i.size,u=i.r,c=(0,y.__rest)(i,["top","left","right","bottom","size","r"]),h=this.getSize(t)[0]/2;o&&e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},c),{x:-h,y:0,r:l/2||u||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),a&&e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},c),{x:h,y:0,r:l/2||u||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),r&&e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},c),{x:0,y:-h,r:l/2||u||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),s&&e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},c),{x:0,y:h,r:l/2||u||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},getShapeStyle:function(t){var e=this.getOptions(t).style,n={stroke:t.color},i=(0,b.deepMix)({},e,n),r=this.getSize(t)[0]/2;return(0,y.__assign)({x:0,y:0,r},i)},update:function(t,e){var n=e.getContainer(),i=this.getSize(t),r={stroke:t.color,r:i[0]/2},o=e.get("keyShape"),a=(0,b.deepMix)({},o.attr(),r,t.style);this.updateShape(t,e,a,!0),this.updateLinkPoints(t,n)}},"single-node"),xl("rect",{options:{size:[100,30],style:{radius:0,stroke:kl.defaultNode.style.stroke,fill:kl.defaultNode.style.fill,lineWidth:kl.defaultNode.style.lineWidth},labelCfg:{style:{fill:kl.nodeLabel.style.fill,fontSize:kl.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:kl.defaultNode.linkPoints.size,lineWidth:kl.defaultNode.linkPoints.lineWidth,fill:kl.defaultNode.linkPoints.fill,stroke:kl.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,y.__assign)({},kl.nodeStateStyles)},shapeType:"rect",labelPosition:"center",drawShape:function(t,e){var n=this.getShapeStyle(t),i=e.addShape("rect",{attrs:n,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0});return this.drawLinkPoints(t,e),i},drawLinkPoints:function(t,e){var n=this.getOptions(t).linkPoints,i=void 0===n?{}:n,r=i.top,o=i.left,a=i.right,s=i.bottom,l=i.size,u=i.r,c=(0,y.__rest)(i,["top","left","right","bottom","size","r"]),h=this.getSize(t),d=h[0],f=h[1];o&&e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},c),{x:-d/2,y:0,r:l/2||u||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),a&&e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},c),{x:d/2,y:0,r:l/2||u||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),r&&e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},c),{x:0,y:-f/2,r:l/2||u||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),s&&e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},c),{x:0,y:f/2,r:l/2||u||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},getShapeStyle:function(t){var e=this.getOptions(t).style,n={stroke:t.color},i=(0,b.mix)({},e,n),r=this.getSize(t),o=i.width||r[0],a=i.height||r[1];return(0,y.__assign)({x:-o/2,y:-a/2,width:o,height:a},i)},update:function(t,e){var n=e.getContainer(),i=this.getOptions({}).style,r=this.getSize(t),o=e.get("keyShape");t.size||(r[0]=o.attr("width")||i.width,r[1]=o.attr("height")||i.height);var a={stroke:t.color,x:-r[0]/2,y:-r[1]/2,width:r[0],height:r[1]},s=(0,b.mix)({},i,o.attr(),a);s=(0,b.mix)(s,t.style),this.updateShape(t,e,s,!1),this.updateLinkPoints(t,n)}},"single-node"),xl("ellipse",{options:{size:[80,40],style:{x:0,y:0,stroke:kl.defaultNode.style.stroke,fill:kl.defaultNode.style.fill,lineWidth:kl.defaultNode.style.lineWidth},labelCfg:{style:{fill:kl.nodeLabel.style.fill,fontSize:kl.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:kl.defaultNode.linkPoints.size,lineWidth:kl.defaultNode.linkPoints.lineWidth,fill:kl.defaultNode.linkPoints.fill,stroke:kl.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,y.__assign)({},kl.nodeStateStyles)},shapeType:"ellipse",labelPosition:"center",drawShape:function(t,e){var n=this.getOptions(t).icon,i=void 0===n?{}:n,r=this.getShapeStyle(t),o=e.addShape("ellipse",{attrs:r,className:"ellipse-keyShape",name:"ellipse-keyShape",draggable:!0}),a=i.width,s=i.height,l=i.show,u=i.text;return l&&(u?e.addShape("text",{attrs:(0,y.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},i),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}):e.addShape("image",{attrs:(0,y.__assign)({x:-a/2,y:-s/2},i),className:this.type+"-icon",name:this.type+"-icon",draggable:!0})),this.drawLinkPoints(t,e),o},drawLinkPoints:function(t,e){var n=this.getOptions(t).linkPoints,i=void 0===n?{}:n,r=i.top,o=i.left,a=i.right,s=i.bottom,l=i.size,u=i.r,c=(0,y.__rest)(i,["top","left","right","bottom","size","r"]),h=this.getSize(t),d=h[0]/2,f=h[1]/2;o&&e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},c),{x:-d,y:0,r:l/2||u||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),a&&e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},c),{x:d,y:0,r:l/2||u||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),r&&e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},c),{x:0,y:-f,r:l/2||u||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),s&&e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},c),{x:0,y:f,r:l/2||u||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},getShapeStyle:function(t){var e=this.getOptions(t).style,n={stroke:t.color},i=(0,b.mix)({},e,n),r=this.getSize(t),o=r[0]/2,a=r[1]/2;return(0,y.__assign)({x:0,y:0,rx:o,ry:a},i)},update:function(t,e){var n=e.getContainer(),i=this.getOptions({}).style,r=this.getSize(t),o={stroke:t.color,rx:r[0]/2,ry:r[1]/2},a=e.get("keyShape"),s=(0,b.mix)({},i,a.attr(),o);s=(0,b.mix)(s,t.style),this.updateShape(t,e,s,!0),this.updateLinkPoints(t,n)}},"single-node"),xl("diamond",{options:{size:[80,80],style:{stroke:kl.defaultNode.style.stroke,fill:kl.defaultNode.style.fill,lineWidth:kl.defaultNode.style.lineWidth},labelCfg:{style:{fill:kl.nodeLabel.style.fill,fontSize:kl.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:kl.defaultNode.linkPoints.size,lineWidth:kl.defaultNode.linkPoints.lineWidth,fill:kl.defaultNode.linkPoints.fill,stroke:kl.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,y.__assign)({},kl.nodeStateStyles)},shapeType:"diamond",labelPosition:"center",drawShape:function(t,e){var n=this.getOptions(t).icon,i=void 0===n?{}:n,r=this.getShapeStyle(t),o=e.addShape("path",{attrs:r,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0}),a=i.width,s=i.height,l=i.show,u=i.text;return l&&(u?e.addShape("text",{attrs:(0,y.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},i),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}):e.addShape("image",{attrs:(0,y.__assign)({x:-a/2,y:-s/2},i),className:this.type+"-icon",name:this.type+"-icon",draggable:!0})),this.drawLinkPoints(t,e),o},drawLinkPoints:function(t,e){var n=this.getOptions(t).linkPoints,i=void 0===n?{}:n,r=i.top,o=i.left,a=i.right,s=i.bottom,l=i.size,u=i.r,c=(0,y.__rest)(i,["top","left","right","bottom","size","r"]),h=this.getSize(t),d=h[0],f=h[1];o&&e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},c),{x:-d/2,y:0,r:l/2||u||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),a&&e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},c),{x:d/2,y:0,r:l/2||u||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),r&&e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},c),{x:0,y:-f/2,r:l/2||u||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),s&&e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},c),{x:0,y:f/2,r:l/2||u||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},getPath:function(t){var e=this.getSize(t),n=e[0],i=e[1];return[["M",0,-i/2],["L",n/2,0],["L",0,i/2],["L",-n/2,0],["Z"]]},getShapeStyle:function(t){var e=this.getOptions(t).style,n={stroke:t.color},i=(0,b.mix)({},e,n),r=this.getPath(t);return(0,y.__assign)({path:r},i)},update:function(t,e){var n=e.getContainer(),i=this.getOptions({}).style,r=this.getPath(t),o={stroke:t.color,path:r},a=e.get("keyShape"),s=(0,b.mix)({},i,a.attr(),o);s=(0,b.mix)(s,t.style),this.updateShape(t,e,s,!0),this.updateLinkPoints(t,n)}},"single-node"),xl("triangle",{options:{size:40,direction:"up",style:{stroke:kl.defaultNode.style.stroke,fill:kl.defaultNode.style.fill,lineWidth:kl.defaultNode.style.lineWidth},labelCfg:{style:{fill:kl.nodeLabel.style.fill,fontSize:kl.nodeLabel.style.fontSize},offset:15},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:kl.defaultNode.linkPoints.size,lineWidth:kl.defaultNode.linkPoints.lineWidth,fill:kl.defaultNode.linkPoints.fill,stroke:kl.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20,offset:6},stateStyles:(0,y.__assign)({},kl.nodeStateStyles)},shapeType:"triangle",labelPosition:"bottom",drawShape:function(t,e){var n=this.getOptions(t),i=n.icon,r=void 0===i?{}:i,o=n.direction,a=this.getShapeStyle(t),s=t.direction||o,l=e.addShape("path",{attrs:a,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0}),u=r.width,c=r.height,h=r.show,d=r.offset,f=r.text;if(h)if(f)e.addShape("text",{attrs:(0,y.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},r),className:this.type+"-icon",name:this.type+"-icon",draggable:!0});else{var p=-u/2,m=-c/2;"up"!==s&&"down"!==s||(m+=d),"left"!==s&&"right"!==s||(p+=d),e.addShape("image",{attrs:(0,y.__assign)({x:p,y:m},r),className:this.type+"-icon",name:this.type+"-icon",draggable:!0})}return this.drawLinkPoints(t,e),l},drawLinkPoints:function(t,e){var n=this.getOptions(t),i=n.linkPoints,r=void 0===i?{}:i,o=n.direction,a=t.direction||o,s=r.top,l=r.left,u=r.right,c=r.bottom,h=r.size,d=r.r,f=(0,y.__rest)(r,["top","left","right","bottom","size","r"]),p=this.getSize(t)[0];if(l){var m=null,g=p*Math.sin(1/3*Math.PI),v=p*Math.sin(1/3*Math.PI);"up"===a?m=[-v,g]:"down"===a?m=[-v,-g]:"left"===a&&(m=[-v,v-g]),m&&e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},f),{x:m[0],y:m[1],r:h/2||d||5}),className:"link-point-left",name:"link-point-left"})}if(u){var b=null;g=p*Math.sin(1/3*Math.PI),v=p*Math.sin(1/3*Math.PI);"up"===a?b=[v,g]:"down"===a?b=[v,-g]:"right"===a&&(b=[v,v-g]),b&&e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},f),{x:b[0],y:b[1],r:h/2||d||5}),className:"link-point-right",name:"link-point-right"})}if(s){var _=null;g=p*Math.sin(1/3*Math.PI),v=p*Math.sin(1/3*Math.PI);"up"===a?_=[v-g,-g]:"left"===a?_=[v,-g]:"right"===a&&(_=[-v,-g]),_&&e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},f),{x:_[0],y:_[1],r:h/2||d||5}),className:"link-point-top",name:"link-point-top"})}if(c){var w=null;g=p*Math.sin(1/3*Math.PI),v=p*Math.sin(1/3*Math.PI);"down"===a?w=[-v+g,g]:"left"===a?w=[v,g]:"right"===a&&(w=[-v,g]),w&&e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},f),{x:w[0],y:w[1],r:h/2||d||5}),className:"link-point-bottom",name:"link-point-bottom"})}},getPath:function(t){var e=this.getOptions(t).direction,n=t.direction||e,i=this.getSize(t)[0],r=i*Math.sin(1/3*Math.PI),o=i*Math.sin(1/3*Math.PI),a=[["M",-o,r],["L",0,-r],["L",o,r],["Z"]];return"down"===n?a=[["M",-o,-r],["L",o,-r],["L",0,r],["Z"]]:"left"===n?a=[["M",-o,o-r],["L",o,-o],["L",o,o],["Z"]]:"right"===n&&(a=[["M",o,o-r],["L",-o,o],["L",-o,-o],["Z"]]),a},getShapeStyle:function(t){var e=this.getOptions(t).style,n={stroke:t.color},i=(0,b.mix)({},e,n),r=this.getPath(t);return(0,y.__assign)({path:r},i)},update:function(t,e){var n=e.getContainer(),i=this.getOptions({}).style,r=this.getPath(t),o={stroke:t.color,path:r},a=e.get("keyShape"),s=(0,b.mix)({},i,a.attr(),o);s=(0,b.mix)(s,t.style),this.updateShape(t,e,s,!0),this.updateLinkPoints(t,n)},updateLinkPoints:function(t,e){var n=this.getOptions({}),i=n.linkPoints,r=n.direction,o=t.direction||r,a=e.find((function(t){return"link-point-left"===t.get("className")})),s=e.find((function(t){return"link-point-right"===t.get("className")})),l=e.find((function(t){return"link-point-top"===t.get("className")})),u=e.find((function(t){return"link-point-bottom"===t.get("className")})),c=i,h=a||s||l||u;h&&(c=h.attr());var d=(0,b.mix)({},c,t.linkPoints),f=d.fill,p=d.stroke,m=d.lineWidth,g=d.size/2;g||(g=d.r);var v=t.linkPoints?t.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},_=v.left,w=v.right,x=v.top,M=v.bottom,E=this.getSize(t)[0],S={r:g,fill:f,stroke:p,lineWidth:m},k=null,C=E*Math.sin(1/3*Math.PI),T=E*Math.sin(1/3*Math.PI);"up"===o?k=[-T,C]:"down"===o?k=[-T,-C]:"left"===o&&(k=[-T,T-C]),k&&(a?_||void 0===_?a.attr((0,y.__assign)((0,y.__assign)({},S),{x:k[0],y:k[1]})):a.remove():_&&e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},S),{x:k[0],y:k[1]}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}));var D=null;"up"===o?D=[T,C]:"down"===o?D=[T,-C]:"right"===o&&(D=[T,T-C]),D&&(s?w||void 0===w?s.attr((0,y.__assign)((0,y.__assign)({},S),{x:D[0],y:D[1]})):s.remove():w&&e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},S),{x:D[0],y:D[1]}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}));var L=null;"up"===o?L=[T-C,-C]:"left"===o?L=[T,-C]:"right"===o&&(L=[-T,-C]),L&&(l?x||void 0===x?l.attr((0,y.__assign)((0,y.__assign)({},S),{x:L[0],y:L[1]})):l.remove():x&&e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},S),{x:L[0],y:L[1]}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}));var A=null;"down"===o?A=[-T+C,C]:"left"===o?A=[T,C]:"right"===o&&(A=[-T,C]),A&&(u?M||void 0===M?u.attr((0,y.__assign)((0,y.__assign)({},S),{x:A[0],y:A[1]})):u.remove():M&&e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},S),{x:A[0],y:A[1]}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))}},"single-node"),xl("modelRect",{options:{size:[185,70],style:{radius:5,stroke:"#69c0ff",fill:"#ffffff",lineWidth:kl.defaultNode.style.lineWidth,fillOpacity:1},labelCfg:{style:{fill:"#595959",fontSize:14},offset:30},descriptionCfg:{style:{fontSize:12,fill:"#bfbfbf"},paddingTop:0},preRect:{show:!0,width:4,fill:"#40a9ff",radius:2},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:10,lineWidth:1,fill:"#72CC4A",stroke:"#72CC4A"},logoIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/4f81893c-1806-4de4-aff3-9a6b266bc8a2.svg",width:16,height:16,offset:0},stateIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/300a2523-67e0-4cbf-9d4a-67c077b40395.svg",width:16,height:16,offset:-5},anchorPoints:[[0,.5],[1,.5]]},shapeType:"modelRect",drawShape:function(t,e){var n=this.getOptions(t).preRect,i=void 0===n?{}:n,r=this.getShapeStyle(t),o=this.getSize(t),a=o[0],s=o[1],l=e.addShape("rect",{attrs:r,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0}),u=i.show,c=(0,y.__rest)(i,["show"]);return u&&e.addShape("rect",{attrs:(0,y.__assign)({x:-a/2,y:-s/2,height:s},c),className:"pre-rect",name:"pre-rect",draggable:!0}),this.drawLogoIcon(t,e),this.drawStateIcon(t,e),this.drawLinkPoints(t,e),l},drawLogoIcon:function(t,e){var n=this.getOptions(t).logoIcon,i=void 0===n?{}:n,r=this.getSize(t)[0];if(i.show){var o=i.width,a=i.height,s=i.x,l=i.y,u=i.offset,c=i.text,h=(0,y.__rest)(i,["width","height","x","y","offset","text"]);c?e.addShape("text",{attrs:(0,y.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},h),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0}):e.addShape("image",{attrs:(0,y.__assign)((0,y.__assign)({},h),{x:s||-r/2+o+u,y:l||-a/2,width:o,height:a}),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0})}},drawStateIcon:function(t,e){var n=this.getOptions(t).stateIcon,i=void 0===n?{}:n,r=this.getSize(t)[0];if(i.show){var o=i.width,a=i.height,s=i.x,l=i.y,u=i.offset,c=i.text,h=(0,y.__rest)(i,["width","height","x","y","offset","text"]);c?e.addShape("text",{attrs:(0,y.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},h),className:"rect-state-icon",name:"rect-state-icon",draggable:!0}):e.addShape("image",{attrs:(0,y.__assign)((0,y.__assign)({},h),{x:s||r/2-o+u,y:l||-a/2,width:o,height:a}),className:"rect-state-icon",name:"rect-state-icon",draggable:!0})}},drawLinkPoints:function(t,e){var n=this.getOptions(t).linkPoints,i=void 0===n?{}:n,r=i.top,o=i.left,a=i.right,s=i.bottom,l=i.size,u=i.r,c=(0,y.__rest)(i,["top","left","right","bottom","size","r"]),h=this.getSize(t),d=h[0],f=h[1];o&&e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},c),{x:-d/2,y:0,r:l/2||u||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),a&&e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},c),{x:d/2,y:0,r:l/2||u||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),r&&e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},c),{x:0,y:-f/2,r:l/2||u||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),s&&e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},c),{x:0,y:f/2,r:l/2||u||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},drawLabel:function(t,e){var n=this.getOptions(t),i=n.labelCfg,r=void 0===i?{}:i,o=n.logoIcon,a=void 0===o?{}:o,s=n.descriptionCfg,l=void 0===s?{}:s,u=this.getSize(t)[0],c=null,h=a.show,d=a.width,f=-u/2+r.offset;h&&(f=-u/2+d+r.offset);var p=r.style,m=l.style,g=l.paddingTop;return(0,b.isString)(t.description)?(c=e.addShape("text",{attrs:(0,y.__assign)((0,y.__assign)({},p),{x:f,y:-5,text:t.label}),className:"text-shape",name:"text-shape",draggable:!0}),e.addShape("text",{attrs:(0,y.__assign)((0,y.__assign)({},m),{x:f,y:17+(g||0),text:t.description}),className:"rect-description",name:"rect-description",draggable:!0})):c=e.addShape("text",{attrs:(0,y.__assign)((0,y.__assign)({},p),{x:f,y:7,text:t.label}),className:"text-shape",name:"text-shape",draggable:!0}),c},getShapeStyle:function(t){var e=this.getOptions(t).style,n={stroke:t.color},i=(0,b.mix)({},e,n),r=this.getSize(t),o=i.width||r[0],a=i.height||r[1];return(0,y.__assign)({x:-o/2,y:-a/2,width:o,height:a},i)},update:function(t,e){var n=this.getOptions(t),i=n.style,r=void 0===i?{}:i,o=n.labelCfg,a=void 0===o?{}:o,s=n.descriptionCfg,l=void 0===s?{}:s,u=this.getSize(t),c=u[0],h=u[1];e.get("keyShape").attr((0,y.__assign)((0,y.__assign)({},r),{x:-c/2,y:-h/2,width:c,height:h}));var d=e.getContainer(),f=d.find((function(t){return"rect-logo-icon"===t.get("className")})),p=f?f.attr():{},m=(0,b.mix)({},p,t.logoIcon),g=m.width;void 0===g&&(g=this.options.logoIcon.width);var v=t.logoIcon?t.logoIcon.show:void 0,_=a.offset,w=-c/2+g+_;v||void 0===v||(w=-c/2+_);var x=d.find((function(t){return"node-label"===t.get("className")})),M=d.find((function(t){return"rect-description"===t.get("className")}));if(t.label)if(x){var E=t.labelCfg?t.labelCfg.style:{},S=(0,b.mix)({},x.attr(),E);t.label&&(S.text=t.label),S.x=w,(0,b.isString)(t.description)&&(S.y=-5),M&&(M.resetMatrix(),M.attr({x:w})),x.resetMatrix(),x.attr(S)}else d.addShape("text",{attrs:(0,y.__assign)((0,y.__assign)({},a.style),{x:w,y:t.description?-5:7,text:t.label}),className:"node-label",name:"node-label",draggable:!0});if((0,b.isString)(t.description)){var k=l.paddingTop;if(M){E=t.descriptionCfg?t.descriptionCfg.style:{};var C=(0,b.mix)({},M.attr(),E);(0,b.isString)(t.description)&&(C.text=t.description),C.x=w,M.resetMatrix(),M.attr((0,y.__assign)((0,y.__assign)({},C),{y:17+(k||0)}))}else d.addShape("text",{attrs:(0,y.__assign)((0,y.__assign)({},l.style),{x:w,y:17+(k||0),text:t.description}),className:"rect-description",name:"rect-description",draggable:!0})}var T=d.find((function(t){return"pre-rect"===t.get("className")}));if(T){var D=(0,b.mix)({},T.attr(),t.preRect);T.attr((0,y.__assign)((0,y.__assign)({},D),{x:-c/2,y:-h/2,height:h}))}if(f)if(v||void 0===v){var L=m.width,A=m.height,O=m.x,P=m.y,I=m.offset,N=(0,y.__rest)(m,["width","height","x","y","offset"]);f.attr((0,y.__assign)((0,y.__assign)({},N),{x:O||-c/2+L+I,y:P||-A/2,width:L,height:A}))}else f.remove();else v&&this.drawLogoIcon(t,d);var R=d.find((function(t){return"rect-state-icon"===t.get("className")})),Y=R?R.attr():{},j=(0,b.mix)({},Y,t.stateIcon);if(R){j.show||void 0===j.show||R.remove();var F=j.width,B=(A=j.height,O=j.x,P=j.y,j.offset),z=(0,y.__rest)(j,["width","height","x","y","offset"]);R.attr((0,y.__assign)((0,y.__assign)({},z),{x:O||c/2-F+B,y:P||-A/2,width:F,height:A}))}else j.show&&this.drawStateIcon(t,d);this.updateLinkPoints(t,d)}},"single-node"),xl("star",{options:{size:60,style:{stroke:kl.defaultNode.style.stroke,fill:kl.defaultNode.style.fill,lineWidth:kl.defaultNode.style.lineWidth},labelCfg:{style:{fill:kl.nodeLabel.style.fill,fontSize:kl.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:kl.defaultNode.linkPoints.size,lineWidth:kl.defaultNode.linkPoints.lineWidth,fill:kl.defaultNode.linkPoints.fill,stroke:kl.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,y.__assign)({},kl.nodeStateStyles)},shapeType:"star",labelPosition:"center",drawShape:function(t,e){var n=this.getOptions(t).icon,i=void 0===n?{}:n,r=this.getShapeStyle(t),o=e.addShape("path",{attrs:r,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0}),a=i.width,s=i.height,l=i.show,u=i.text;return l&&(u?e.addShape("text",{attrs:(0,y.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},i),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}):e.addShape("image",{attrs:(0,y.__assign)({x:-a/2,y:-s/2},i),className:this.type+"-icon",name:this.type+"-icon",draggable:!0})),this.drawLinkPoints(t,e),o},drawLinkPoints:function(t,e){var n=this.getOptions(t).linkPoints,i=void 0===n?{}:n,r=i.top,o=i.left,a=i.right,s=i.leftBottom,l=i.rightBottom,u=i.size,c=i.r,h=(0,y.__rest)(i,["top","left","right","leftBottom","rightBottom","size","r"]),d=this.getSize(t)[0];if(a){var f=Math.cos(.1*Math.PI)*d,p=Math.sin(.1*Math.PI)*d;e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},h),{x:f,y:-p,r:u/2||c||5}),className:"link-point-right",name:"link-point-right"})}if(r){f=Math.cos(.5*Math.PI)*d,p=Math.sin(.5*Math.PI)*d;e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},h),{x:f,y:-p,r:u/2||c||5}),className:"link-point-top",name:"link-point-top"})}if(o){f=Math.cos(.9*Math.PI)*d,p=Math.sin(.9*Math.PI)*d;e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},h),{x:f,y:-p,r:u/2||c||5}),className:"link-point-left",name:"link-point-left"})}if(s){f=Math.cos(1.3*Math.PI)*d,p=Math.sin(1.3*Math.PI)*d;e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},h),{x:f,y:-p,r:u/2||c||5}),className:"link-point-left-bottom",name:"link-point-left-bottom"})}if(l){f=Math.cos(1.7*Math.PI)*d,p=Math.sin(1.7*Math.PI)*d;e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},h),{x:f,y:-p,r:u/2||c||5}),className:"link-point-right-bottom",name:"link-point-right-bottom"})}},getPath:function(t){for(var e=this.getSize(t)[0],n=3*e/8,i=t.innerR||n,r=[],o=0;o<5;o++){var a=Math.cos((18+72*o)/180*Math.PI)*e,s=Math.sin((18+72*o)/180*Math.PI)*e,l=Math.cos((54+72*o)/180*Math.PI)*i,u=Math.sin((54+72*o)/180*Math.PI)*i;0===o?r.push(["M",a,-s]):r.push(["L",a,-s]),r.push(["L",l,-u])}return r.push(["Z"]),r},getShapeStyle:function(t){var e=this.getOptions(t).style,n={stroke:t.color},i=(0,b.mix)({},e,n),r=this.getPath(t);return(0,y.__assign)({path:r},i)},update:function(t,e){var n=e.getContainer(),i=this.getOptions({}).style,r=this.getPath(t),o={stroke:t.color,path:r},a=e.get("keyShape"),s=(0,b.mix)({},i,a.attr(),o);s=(0,b.mix)(s,t.style),this.updateShape(t,e,s,!0),this.updateLinkPoints(t,n)},updateLinkPoints:function(t,e){var n=this.getOptions({}).linkPoints,i=e.find((function(t){return"link-point-left"===t.get("className")})),r=e.find((function(t){return"link-point-right"===t.get("className")})),o=e.find((function(t){return"link-point-top"===t.get("className")})),a=e.find((function(t){return"link-point-left-bottom"===t.get("className")})),s=e.find((function(t){return"link-point-right-bottom"===t.get("className")})),l=n,u=i||r||o||a||s;u&&(l=u.attr());var c=(0,b.mix)({},l,t.linkPoints),h=c.fill,d=c.stroke,f=c.lineWidth,p=c.size/2;p||(p=c.r);var m=t.linkPoints?t.linkPoints:{left:void 0,right:void 0,top:void 0,leftBottom:void 0,rightBottom:void 0},g=m.left,v=m.right,_=m.top,w=m.leftBottom,x=m.rightBottom,M=this.getSize(t)[0],E={r:p,fill:h,stroke:d,lineWidth:f},S=Math.cos(.1*Math.PI)*M,k=Math.sin(.1*Math.PI)*M;r?v||void 0===v?r.attr((0,y.__assign)((0,y.__assign)({},E),{x:S,y:-k})):r.remove():v&&e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},E),{x:S,y:-k}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),S=Math.cos(.5*Math.PI)*M,k=Math.sin(.5*Math.PI)*M,o?_||void 0===_?o.attr((0,y.__assign)((0,y.__assign)({},E),{x:S,y:-k})):o.remove():_&&e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},E),{x:S,y:-k}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),S=Math.cos(.9*Math.PI)*M,k=Math.sin(.9*Math.PI)*M,i?g||void 0===g?i.attr((0,y.__assign)((0,y.__assign)({},E),{x:S,y:-k})):i.remove():g&&e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},E),{x:S,y:-k}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),S=Math.cos(1.3*Math.PI)*M,k=Math.sin(1.3*Math.PI)*M,a?w||void 0===w?a.attr((0,y.__assign)((0,y.__assign)({},E),{x:S,y:-k})):a.remove():w&&e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},E),{x:S,y:-k}),className:"link-point-left-bottom",name:"link-point-left-bottom",isAnchorPoint:!0}),S=Math.cos(1.7*Math.PI)*M,k=Math.sin(1.7*Math.PI)*M,s?x||void 0===x?s.attr((0,y.__assign)((0,y.__assign)({},E),{x:S,y:-k})):a.remove():x&&e.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},E),{x:S,y:-k}),className:"link-point-right-bottom",name:"link-point-right-bottom",isAnchorPoint:!0})}},"single-node");var AC=gl.defaultSubjectColors;xl("donut",{options:{size:kl.defaultNode.size,style:{x:0,y:0,stroke:kl.defaultNode.style.stroke,fill:kl.defaultNode.style.fill,lineWidth:kl.defaultNode.style.lineWidth},labelCfg:{style:{fill:kl.nodeLabel.style.fill,fontSize:kl.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:kl.defaultNode.linkPoints.size,lineWidth:kl.defaultNode.linkPoints.lineWidth,fill:kl.defaultNode.linkPoints.fill,stroke:kl.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,y.__assign)({},kl.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(t,e){var n=this.getOptions(t).icon,i=void 0===n?{}:n,r=this.getShapeStyle(t),o=(0,b.deepMix)({},i,t.icon),a=e.addShape("circle",{attrs:r,className:this.type+"-keyShape",draggable:!0,name:this.type+"-keyShape"}),s=o.width,l=o.height,u=o.show,c=o.text;u&&(c?e.addShape("text",{attrs:(0,y.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},o),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}):e.addShape("image",{attrs:(0,y.__assign)({x:-s/2,y:-l/2},o),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}));var h=a.attr("r"),d=.6*h,f=(h+d)/2,p=t,m=p.donutAttrs,g=void 0===m?{}:m,v=p.donutColorMap,_=void 0===v?{}:v,w=Object.keys(g).length;if(g&&w>1){var x=[],M=0;if(Object.keys(g).forEach((function(t){var e=g[t]||0;(0,b.isNumber)(e)&&(x.push({key:t,value:e,color:_[t]}),M+=e)})),M){var E=h-d;if(1===w)return void e.addShape("circle",{attrs:{r:f,x:0,y:0,stroke:x[0].color||AC[0],lineWidth:E},name:"fan-shape-0"});var S=[f,0],k=0;x.forEach((function(t,n){var i=t.value/M;if(!(i<.001))if(i>.999&&(i=1),1!==i){t.percent=i,t.angle=i*Math.PI*2,t.beginAgnle=k,k+=t.angle,t.endAngle=k,t.arcBegin=S,t.arcEnd=[f*Math.cos(t.endAngle),-f*Math.sin(t.endAngle)];var r=t.angle>Math.PI?1:0,o=[["M",t.arcBegin[0],t.arcBegin[1]],["A",f,f,0,r,0,t.arcEnd[0],t.arcEnd[1]],["L",t.arcEnd[0],t.arcEnd[1]]];e.addShape("path",{attrs:{path:o,lineWidth:E,stroke:t.color||AC[n%AC.length]},name:"fan-shape-"+n}),S=t.arcEnd}else e.addShape("circle",{attrs:{r:f,x:0,y:0,stroke:t.color||AC[n%AC.length],lineWidth:E},name:"fan-shape-"+n})}))}}return this.drawLinkPoints(t,e),a},update:void 0},"circle");var OC=function(t){var e=t.x,n=t.y;return{x:e,y:n,centerX:e,centerY:n,minX:e,minY:n,maxX:e,maxY:n,height:0,width:0}},PC=function(t){for(var e=[],n={},i=t.length-1;i>=0;i--){var r=t[i];r.id=r.x+"|||"+r.y,n[r.id]=r,e.push(r)}return e},IC=function(t){return PC(t)},NC=function(t,e){return t.width||t.height?{centerX:t.centerX,centerY:t.centerY,minX:t.minX-e,minY:t.minY-e,maxX:t.maxX+e,maxY:t.maxY+e,height:t.height+2*e,width:t.width+2*e}:t},RC=function(t,e,n){var i=function(t,e){var n=Math.abs(t.x-e.centerX),i=Math.abs(t.y-e.centerY);return 0===n&&0===i?0:n/e.width>i/e.height}(e,t);if(0===i){var r=t.centerX,o=t.centerY;return n.y<e.y?o=t.minY:n.x>e.x?r=t.maxX:n.x<e.x?r=t.minX:n.x===e.x&&(o=t.maxY),{x:r,y:o}}return i?{x:e.x>t.centerX?t.maxX:t.minX,y:e.y}:{x:e.x,y:e.y>t.centerY?t.maxY:t.minY}},YC=function(t,e){var n=Math.min(t.minX,e.minX),i=Math.min(t.minY,e.minY),r=Math.max(t.maxX,e.maxX),o=Math.max(t.maxY,e.maxY);return{centerX:(n+r)/2,centerY:(i+o)/2,minX:n,minY:i,maxX:r,maxY:o,height:o-i,width:r-n}},jC=function(t){return[{x:t.minX,y:t.minY},{x:t.maxX,y:t.minY},{x:t.maxX,y:t.maxY},{x:t.minX,y:t.maxY}]},FC=function(t,e){var n=t.x,i=t.y;return n<e.minX||n>e.maxX||i<e.minY||i>e.maxY},BC=function(t,e){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)},zC=function(t,e,n,i,r){return BC(t,e)+BC(t,n)+function(t,e){var n=0;return e.forEach((function(e){e&&(t.x===e.x&&(n+=-2),t.y===e.y&&(n+=-2))})),n}(t,[e,n,i,r])},HC=function t(e,n,i,r,o){void 0===o&&(o=0),e.unshift(n[r]),i[r]&&i[r]!==r&&o<=100&&t(e,n,i,i[r],o+1)},GC=function(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)},WC=function(t,e,n,i){var r=n.x-t.x,o=n.y-t.y,a=i.x-t.x,s=i.y-t.y,l=n.x-e.x,u=n.y-e.y,c=i.x-e.x,h=i.y-e.y;return(r*s-o*a)*(l*h-u*c)<=0&&(r*u-o*l)*(a*h-s*c)<=0},UC=function(t,e,n){if(n.width||n.height){var i=jC(n),r=i[0],o=i[1],a=i[2],s=i[3];return WC(t,e,r,o)||WC(t,e,r,s)||WC(t,e,o,a)||WC(t,e,a,s)}return!1},VC=function(t,e,n,i){var r=[];return t.forEach((function(t){if(t!==e&&(t.x===e.x||t.y===e.y)){if(UC(t,e,n)||UC(t,e,i))return;r.push(t)}})),PC(r)},XC=function(t,e){var n=[],i=t[0];return n.push("M"+i.x+" "+i.y),t.forEach((function(i,r){var o=t[r+1],a=t[r+2];if(o&&a)if(function(t,e,n){return!(t.x===e.x&&e.x===n.x||t.y===e.y&&e.y===n.y)}(i,o,a)){var s=function(t,e,n,i){var r=BC(t,e),o=BC(n,e);return r<i&&(i=r),o<i&&(i=o),[{x:e.x-i/r*(e.x-t.x),y:e.y-i/r*(e.y-t.y)},{x:e.x-i/o*(e.x-n.x),y:e.y-i/o*(e.y-n.y)}]}(i,o,a,e),l=s[0],u=s[1];n.push("L"+l.x+" "+l.y),n.push("Q"+o.x+" "+o.y+" "+u.x+" "+u.y),n.push("L"+u.x+" "+u.y)}else n.push("L"+o.x+" "+o.y);else o&&n.push("L"+o.x+" "+o.y)})),n.join("")},qC=function(t,e,n,i,r){var o,a;if(n&&n.getType())if("combo"===n.getType()){(o=n.getKeyShape().getCanvasBBox()||OC(t)).centerX=(o.minX+o.maxX)/2,o.centerY=(o.minY+o.maxY)/2}else o=n.getBBox();else o=OC(t);if(i&&i.getType())if("combo"===i.getType()){var s=i.getKeyShape().getBBox();if(s){var l=i.getModel(),u=l.x,c=l.y;(a={x:u,y:c,width:s.width,height:s.height,minX:s.minX+u,maxX:s.maxX+u,minY:s.minY+c,maxY:s.maxY+c}).centerX=(a.minX+a.maxX)/2,a.centerY=(a.minY+a.maxY)/2}else a=OC(e)}else a=i&&i.getBBox();else a=OC(e);var h=NC(o,r),d=NC(a,r),f=RC(h,t,e),p=RC(d,e,t),m=function(t){void 0===t&&(t=[]);var e=[],n=[];t.forEach((function(t){e.push(t.x),n.push(t.y)}));var i=Math.min.apply(Math,e),r=Math.max.apply(Math,e),o=Math.min.apply(Math,n),a=Math.max.apply(Math,n);return{centerX:(i+r)/2,centerY:(o+a)/2,maxX:r,maxY:a,minX:i,minY:o,height:a-o,width:r-i}}([f,p]),g=YC(h,m),v=YC(d,m),y=[];y=y.concat(jC(g)).concat(jC(v));var b={x:(t.x+e.x)/2,y:(t.y+e.y)/2};[m,g,v].forEach((function(t){y=y.concat(function(t,e){return function(t,e){return e<t.minX||e>t.maxX?[]:[{x:e,y:t.minY},{x:e,y:t.maxY}]}(t,e.x).concat(function(t,e){return e<t.minY||e>t.maxY?[]:[{x:t.minX,y:e},{x:t.maxX,y:e}]}(t,e.y))}(t,b).filter((function(t){return FC(t,h)&&FC(t,d)})))})),[{x:f.x,y:p.y},{x:p.x,y:f.y}].forEach((function(t){FC(t,h)&&FC(t,d)&&y.push(t)})),y.unshift(f),y.push(p);var _=function(t,e,n,i,r,o,a){var s=[],l=[e],u={},c={},h={};c[e.id]=0,h[e.id]=zC(e,n,e);var d,f,p={};for(t.forEach((function(t){p[t.id]=t}));l.length;){if(d=void 0,f=1/0,l.forEach((function(t){h[t.id]<=f&&(f=h[t.id],d=t)})),d===n){var m=[];return HC(m,p,u,n.id),m}GC(l,d),s.push(d),VC(t,d,i,r).forEach((function(t){if(-1===s.indexOf(t)){-1===l.indexOf(t)&&l.push(t);var i=h[d.id]+BC(d,t);c[t.id]&&i>=c[t.id]||(u[t.id]=d.id,c[t.id]=i,h[t.id]=c[t.id]+zC(t,n,e,o,a))}}))}return[e,n]}(y=PC(y),f,p,o,a,t,e);return _.unshift(t),_.push(e),IC(_)},KC={offset:20,maxAllowedDirectionChange:Math.PI/2,maximumLoops:2e3,gridSize:10,directions:[{stepX:1,stepY:0},{stepX:-1,stepY:0},{stepX:0,stepY:1},{stepX:0,stepY:-1}],get penalties(){return{0:0,45:this.gridSize/2,90:this.gridSize/2}},distFunc:function(t,e){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)},fallbackRoute:function(t,e,n,i,r){return IC(qC(t,e,n,i,r.offset))}},$C=(Math.PI,function(t,e){var n=Math.round(Math.abs(t/e));return n<0?0:(t<0?-1:1)*n}),ZC=function(t,e){var n=e.x-t.x,i=e.y-t.y;return n||i?Math.atan2(i,n):0},JC=function(t,e){var n=Math.abs(t-e);return n>Math.PI?2*Math.PI-n:n},QC=function(t,e,n){for(var i=1/0,r=0,o=e.length;r<o;r++){var a=n(t,e[r]);a<i&&(i=a)}return i},tT=function(t,e,n,i,r){var o=[];if(!n)return[t];var a=r.directions,s=r.offset,l=n.getBBox(),u=e.x>l.minX&&e.x<l.maxX&&e.y>l.minY&&e.y<l.maxY,c=NC(l,s);for(var h in c)c[h]=$C(c[h],r.gridSize);if(u){for(var d=0,f=a;d<f.length;d++){var p=f[d],m=[[{x:c.minX,y:c.minY},{x:c.maxX,y:c.minY}],[{x:c.minX,y:c.minY},{x:c.minX,y:c.maxY}],[{x:c.maxX,y:c.minY},{x:c.maxX,y:c.maxY}],[{x:c.minX,y:c.maxY},{x:c.maxX,y:c.maxY}]];for(h=0;h<4;h++){var g=m[h],v=gl.getLineIntersect(t,{x:t.x+p.stepX*c.width,y:t.y+p.stepY*c.height},g[0],g[1]);v&&!UC(t,v,l)&&(v.id=v.x+"|||"+v.y,o.push(v))}}return o}var y=RC(c,t,i);return y.id=y.x+"|||"+y.y,[y]},eT=function(t,e,n,i){var r=ZC(t,e);if(!n[t.id]){var o=ZC(i,t);return JC(o,r)}var a=ZC({x:n[t.id].x,y:n[t.id].y},t);return JC(a,r)},nT=function(t,e,n,i,r,o,a){var s=[i],l=t.id,u=t.x,c=t.y,h={x:u,y:c,id:l};for(eT(h,o,e,n)&&s.unshift({x:o.x===i.x?i.x:h.x*a,y:o.y===i.y?i.y:h.y*a});e[l]&&e[l].id!==l;){var d={x:u,y:c,id:l},f=e[l].id,p=e[l].x,m=e[l].y,g={x:p,y:m,id:f};eT(g,d,e,n)&&s.unshift({x:g.x===d.x?s[0].x:g.x*a,y:g.y===d.y?s[0].y:g.y*a}),l=f,u=p,c=m}var v=u,y=c;return s[0].x=v===n.x?r.x:s[0].x,s[0].y=y===n.y?r.y:s[0].y,s.unshift(r),s},iT=function(t,e,n,i,r){if(isNaN(t.x)||isNaN(e.x))return[];var o=(0,b.deepMix)(KC,r);o.obstacles=o.obstacles||[];var a=o.gridSize,s=function(t,e,n){var i={};return t.forEach((function(t){if(t)for(var r=NC(t.getBBox(),n),o=$C(r.minX,e);o<=$C(r.maxX,e);o+=1)for(var a=$C(r.minY,e);a<=$C(r.maxY,e);a+=1)i[o+"|||"+a]=!0})),i}(o.obstacles.concat([n,i]),a,o.offset),l={x:$C(t.x,a),y:$C(t.y,a)},u={x:$C(e.x,a),y:$C(e.y,a)};t.id=l.x+"|||"+l.y,e.id=u.x+"|||"+u.y;var c=tT(l,t,n,u,o),h=tT(u,e,i,l,o);c.forEach((function(t){delete s[t.id]})),h.forEach((function(t){delete s[t.id]}));for(var d={},f={},p={},m={},g={},v=0;v<c.length;v++){var y=c[v];d[y.id]=y,m[y.id]=0,g[y.id]=QC(y,h,o.distFunc)}for(var _,w,x,M,E,S,k,C=o.maximumLoops,T=o.penalties;Object.keys(d).length>0&&C>0&&(_=void 0,w=1/0,Object.keys(d).forEach((function(t){var e=d[t].id;g[e]<=w&&(w=g[e],_=d[e])})),_);){if(h.findIndex((function(t){return t.x===_.x&&t.y===_.y}))>-1)return nT(_,p,l,e,t,u,a);delete d[_.id],f[_.id]=!0;for(v=0;v<o.directions.length;v++)x=o.directions[v],f[(M={x:_.x+x.stepX,y:_.y+x.stepY,id:Math.round(_.x)+x.stepX+"|||"+(Math.round(_.y)+x.stepY)}).id]||(k=eT(_,M,p,l))>o.maxAllowedDirectionChange||s[M.id]||(d[M.id]||(d[M.id]=M),E=o.distFunc(_,M)+(isNaN(T[k])?a:T[k]),S=m[_.id]+E,m[M.id]&&S>=m[M.id]||(p[M.id]=_,m[M.id]=S,g[M.id]=S+QC(M,h,o.distFunc)));C-=1}return o.fallbackRoute(t,e,n,i,o)};Ml("polyline",{options:{color:kl.defaultEdge.color,size:kl.defaultEdge.size,style:{radius:0,offset:15,x:0,y:0,stroke:kl.defaultEdge.style.stroke,lineAppendWidth:kl.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:kl.edgeLabel.style.fill,fontSize:kl.edgeLabel.style.fontSize}},routeCfg:{obstacles:[],maxAllowedDirectionChange:Math.PI,maximumLoops:500,gridSize:10},stateStyles:(0,y.__assign)({},kl.edgeStateStyles)},shapeType:"polyline",labelPosition:"center",drawShape:function(t,e){var n=this.getShapeStyle(t);return 0===n.radius&&delete n.radius,e.addShape("path",{className:"edge-shape",name:"edge-shape",attrs:n})},getShapeStyle:function(t){var e=this.options.style,n={stroke:t.color},i=(0,b.mix)({},e,n,t.style);t=this.getPathPoints(t),this.radius=i.radius,this.offset=i.offset;var r=t.startPoint,o=t.endPoint,a=this.getControlPoints(t),s=[r];a&&(s=s.concat(a)),s.push(o);var l=t.sourceNode,u=t.targetNode,c=i.radius,h=this.options.routeCfg,d=(0,b.mix)({},h,t.routeCfg);d.offset=i.offset;var f=this.getPath(s,l,u,c,d);return((0,b.isArray)(f)&&f.length<=1||(0,b.isString)(f)&&-1===f.indexOf("L"))&&(f="M0 0, L0 0"),(isNaN(r.x)||isNaN(r.y)||isNaN(o.x)||isNaN(o.y))&&(f="M0 0, L0 0"),(0,b.mix)({},kl.defaultEdge.style,i,{lineWidth:t.size,path:f})},updateShapeStyle:function(t,e){var n=e.getContainer();if(e.isVisible()){var i={stroke:t.color},r=n.find((function(t){return"edge-shape"===t.get("className")}))||e.getKeyShape(),o=t.size,a=(t=this.getPathPoints(t)).startPoint,s=t.endPoint,l=this.getControlPoints(t),u=[a];l&&(u=u.concat(l)),u.push(s);var c=r.attr(),h=(0,b.mix)({},i,c,t.style),d=t.sourceNode,f=t.targetNode,p=h.radius,m=this.options.routeCfg,g=(0,b.mix)({},m,t.routeCfg);g.offset=h.offset;var v=this.getPath(u,d,f,p,g);((0,b.isArray)(v)&&v.length<=1||(0,b.isString)(v)&&-1===v.indexOf("L"))&&(v="M0 0, L0 0"),(isNaN(a.x)||isNaN(a.y)||isNaN(s.x)||isNaN(s.y))&&(v="M0 0, L0 0"),c.endArrow&&!1===h.endArrow&&(t.style.endArrow={path:""}),c.startArrow&&!1===h.startArrow&&(t.style.startArrow={path:""});var y=(0,b.mix)(i,r.attr(),{lineWidth:o,path:v},t.style);r&&r.attr(y)}},getPath:function(t,e,n,i,r){var o=r.offset,a=r.simple;if(!o||t.length>2){if(i)return XC(t,i);var s=[];return(0,b.each)(t,(function(t,e){0===e?s.push(["M",t.x,t.y]):s.push(["L",t.x,t.y])})),s}var l=a?qC(t[t.length-1],t[0],n,e,o):iT(t[0],t[t.length-1],e,n,r);return l&&l.length?i?XC(l,i):gl.pointsToPolygon(l):"M0 0, L0 0"}},"single-edge");var rT=sM.cloneEvent,oT=sM.isNaN,aT=Math.abs,sT=["shift","ctrl","alt","control"];const lT={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,scalableRange:0,allowDragOnItem:!1}},getEvents:function(){return{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"onMouseUp",keyup:"onKeyUp",focus:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onMouseUp"}},updateViewport:function(t){var e=this.origin,n=+t.clientX,i=+t.clientY;if(!oT(n)&&!oT(i)){var r=n-e.x,o=i-e.y;"x"===this.get("direction")?o=0:"y"===this.get("direction")&&(r=0),this.origin={x:n,y:i};var a=this.graph.get("width"),s=this.graph.get("height"),l=this.graph.get("canvas").getCanvasBBox(),u=this.scalableRange,c=this.scalableRange;u<1&&u>-1&&(u*=a,c*=s),(l.minX<=a+u&&l.minX+r>a+u||l.maxX+u>=0&&l.maxX+u+r<0)&&(r=0),(l.minY<=s+c&&l.minY+o>s+c||l.maxY+c>=0&&l.maxY+c+o<0)&&(o=0),this.graph.translate(r,o)}},onTouchStart:function(t){var e=t.originalEvent.touches,n=e[0],i=e[1];n&&i||(t.preventDefault(),this.onMouseDown(t))},onMouseDown:function(t){var e=this,n=t.originalEvent;if((!n||t.name===wl.TOUCHSTART||0===n.button)&&(t.name===wl.TOUCHSTART||"undefined"==typeof window||!window.event||window.event.buttons||window.event.button)&&this.shouldBegin.call(this,t)&&!e.keydown){var i=t.target,r=i&&i.isCanvas&&i.isCanvas();if((this.allowDragOnItem||r)&&(e.origin={x:t.clientX,y:t.clientY},e.dragging=!1,this.enableOptimize)){for(var o=this.graph,a=o.getEdges(),s=0,l=a.length;s<l;s++){var u=a[s].get("group").get("children");u&&u.forEach((function(t){t.set("ori-visibility",t.get("ori-visibility")||t.get("visible")),t.hide()}))}for(var c=o.getNodes(),h=0,d=c.length;h<d;h++)for(var f=0,p=c[h].getContainer().get("children");f<p.length;f++){var m=p[f];m.get("isKeyShape")||(m.set("ori-visibility",m.get("ori-visibility")||m.get("visible")),m.hide())}}}},onTouchMove:function(t){var e=t.originalEvent.touches,n=e[0],i=e[1];n&&i?this.onMouseUp(t):(t.preventDefault(),this.onMouseMove(t))},onMouseMove:function(t){var e=this.graph;if(!this.keydown){var n=t.target,i=n&&n.isCanvas&&n.isCanvas();if((this.allowDragOnItem||i)&&(t=rT(t),this.origin)){if(this.dragging)t.type="drag",e.emit("canvas:drag",t);else{if(aT(this.origin.x-t.clientX)+aT(this.origin.y-t.clientY)<10)return;this.shouldBegin.call(this,t)&&(t.type="dragstart",e.emit("canvas:dragstart",t),this.dragging=!0)}this.shouldUpdate.call(this,t)&&this.updateViewport(t)}}},onMouseUp:function(t){var e,n,i=this.graph;if(!this.keydown){var r=i.getZoom(),o=i.get("modeController"),a=null===(n=null===(e=null==o?void 0:o.modes[o.mode])||void 0===e?void 0:e.filter((function(t){return"zoom-canvas"===t.type})))||void 0===n?void 0:n[0],s=a?a.optimizeZoom||.1:0;if(this.enableOptimize){for(var l=i.getEdges(),u=0,c=l.length;u<c;u++){var h=l[u].get("group").get("children");h&&h.forEach((function(t){t.get("ori-visibility")&&t.show()}))}if(r>s)for(var d=i.getNodes(),f=0,p=d.length;f<p;f++)for(var m=0,g=d[f].getContainer().get("children");m<g.length;m++){var v=g[m];if(!v.get("isKeyShape"))v.get("ori-visibility")&&v.show()}}this.dragging?(t=rT(t),this.shouldEnd.call(this,t)&&this.updateViewport(t),t.type="dragend",i.emit("canvas:dragend",t),this.endDrag()):this.origin=null}},endDrag:function(){this.origin=null,this.dragging=!1,this.dragbegin=!1},onKeyDown:function(t){var e=t.key;e&&(sT.indexOf(e.toLowerCase())>-1?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.keydown=!1,this.origin=null,this.dragging=!1,this.dragbegin=!1}},uT={getDefaultCfg:function(){return{updateEdge:!0,delegateStyle:{},enableDelegate:!1,onlyChangeComboSize:!1,comboActiveState:"",selectedState:"selected",enableOptimize:!1,enableDebounce:!1,enableStack:!0}},getEvents:function(){return{"node:dragstart":"onDragStart","node:drag":"onDrag","node:dragend":"onDragEnd","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave","combo:drop":"onDropCombo","node:drop":"onDropNode","canvas:drop":"onDropCanvas",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onDragEnd"}},validationCombo:function(t){return!(!this.origin||!t||t.destroyed)&&"combo"===t.getType()},onTouchStart:function(t){if(t.item){try{var e=t.originalEvent.touches,n=e[0],i=e[1];if(n&&i)return;t.preventDefault()}catch(t){console.warn("Touch original event not exist!")}this.onDragStart(t)}},onTouchMove:function(t){try{var e=t.originalEvent.touches,n=e[0],i=e[1];if(n&&i)return void this.onDragEnd(t);t.preventDefault()}catch(t){console.warn("Touch original event not exist!")}this.onDrag(t)},onDragStart:function(t){var e=this;if(this.currentShouldEnd=!0,this.shouldBegin.call(this,t)){var n=t.item;if(n&&!n.destroyed&&!n.hasLocked()){n.getContainer().set("capture",!1),this.cachedCaptureItems||(this.cachedCaptureItems=[]),this.cachedCaptureItems.push(n);var i=t.target;if(i)if(i.get("isAnchorPoint"))return;var r=this.graph;this.targets=[],this.targetCombo=null;var o=r.findAllByState("node",this.selectedState),a=n.get("id"),s=o.filter((function(t){var e=t.get("id");return a===e}));0===s.length?this.targets.push(n):o.length>1?o.forEach((function(t){t.hasLocked()||e.targets.push(t)})):this.targets.push(n);var l=[];this.targets.forEach((function(t){l.push((0,b.clone)(t.getModel()))})),this.set("beforeDragNodes",l),this.hidenEdge={},this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach((function(t){t.getEdges().forEach((function(t){t.isVisible()&&(e.hidenEdge[t.getID()]=!0,t.hide())}))})),this.origin={x:t.x,y:t.y},this.point={},this.originPoint={}}}},onDrag:function(t){var e=this;this.origin&&this.shouldUpdate(this,t)&&(this.get("enableDelegate")?this.updateDelegate(t):this.enableDebounce?this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:t,updateEdge:this.get("updateEdge")}):this.targets.map((function(n){e.update(n,t)})))},onDragEnd:function(t){var e,n=this;if(this.origin){null===(e=this.cachedCaptureItems)||void 0===e||e.forEach((function(t){t.getContainer().set("capture",!0)})),this.cachedCaptureItems=[],this.delegateRect&&(this.delegateRect.remove(),this.delegateRect=null),this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach((function(t){t.getEdges().forEach((function(t){n.hidenEdge[t.getID()]&&t.show(),t.refresh()}))})),this.hidenEdge={};var i=this.graph;if(i.get("enabledStack")&&this.enableStack){var r={before:{nodes:[],edges:[],combos:[]},after:{nodes:[],edges:[],combos:[]}};this.get("beforeDragNodes").forEach((function(t){r.before.nodes.push({id:t.id,x:t.x,y:t.y})})),this.targets.forEach((function(t){var e=t.getModel();r.after.nodes.push({id:e.id,x:e.x,y:e.y})})),i.pushStack("update",(0,b.clone)(r))}i.emit("dragnodeend",{items:this.targets,targetItem:null}),this.point={},this.origin=null,this.originPoint={},this.targets.length=0,this.targetCombo=null}},onDropCombo:function(t){var e=t.item;if(this.currentShouldEnd=this.shouldEnd.call(this,t,e),this.updatePositions(t,!this.currentShouldEnd),this.currentShouldEnd&&this.validationCombo(e)){var n=this.graph;if(this.comboActiveState&&n.setItemState(e,this.comboActiveState,!1),this.targetCombo=e,this.onlyChangeComboSize)n.updateCombos();else{var i=e.getModel();this.targets.map((function(t){t.getModel().comboId!==i.id&&n.updateComboTree(t,i.id)})),n.updateCombo(e)}n.emit("dragnodeend",{items:this.targets,targetItem:this.targetCombo})}},onDropCanvas:function(t){var e=this.graph;this.currentShouldEnd=this.shouldEnd.call(this,t,void 0),this.updatePositions(t,!this.currentShouldEnd),this.targets&&0!==this.targets.length&&this.currentShouldEnd&&(this.onlyChangeComboSize?e.updateCombos():this.targets.map((function(t){t.getModel().comboId&&e.updateComboTree(t)})))},onDropNode:function(t){if(this.targets&&0!==this.targets.length){var e=this,n=t.item,i=e.graph,r=n.getModel().comboId,o=r?i.findById(r):void 0;if(this.currentShouldEnd=this.shouldEnd.call(this,t,o),this.updatePositions(t,!this.currentShouldEnd),this.currentShouldEnd){if(this.onlyChangeComboSize)i.updateCombos();else if(r){var a=i.findById(r);e.comboActiveState&&i.setItemState(a,e.comboActiveState,!1),this.targets.map((function(t){var e=t.getModel();r!==e.comboId&&i.updateComboTree(t,r)})),i.updateCombo(a)}else this.targets.map((function(t){t.getModel().comboId&&i.updateComboTree(t)}));i.emit("dragnodeend",{items:this.targets,targetItem:n})}}},onDragEnter:function(t){var e=t.item;if(this.validationCombo(e)){var n=this.graph;this.comboActiveState&&n.setItemState(e,this.comboActiveState,!0)}},onDragLeave:function(t){var e=t.item;if(this.validationCombo(e)){var n=this.graph;this.comboActiveState&&n.setItemState(e,this.comboActiveState,!1)}},updatePositions:function(t,e){var n=this;this.targets&&0!==this.targets.length&&(this.get("enableDelegate")?this.enableDebounce?this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:t,updateEdge:this.get("updateEdge"),updateFunc:this.update}):e||this.targets.map((function(e){return n.update(e,t)})):this.targets.map((function(i){return n.update(i,t,e)})))},update:function(t,e,n){var i=this.origin,r=t.get("model"),o=t.get("id");this.point[o]||(this.point[o]={x:r.x||0,y:r.y||0});var a=e.x-i.x+this.point[o].x,s=e.y-i.y+this.point[o].y;n&&(a+=i.x-e.x,s+=i.y-e.y);var l={x:a,y:s};this.get("updateEdge")?this.graph.updateItem(t,l,!1):t.updatePosition(l)},debounceUpdate:(0,b.debounce)((function(t){var e=t.targets,n=t.graph,i=t.point,r=t.origin,o=t.evt,a=t.updateEdge;t.updateFunc;e.map((function(t){var e=t.get("model"),s=t.get("id");i[s]||(i[s]={x:e.x||0,y:e.y||0});var l={x:o.x-r.x+i[s].x,y:o.y-r.y+i[s].y};a?n.updateItem(t,l,!1):t.updatePosition(l)}))}),50,!0),updateDelegate:function(t){var e=this.graph;if(this.delegateRect){var n=t.x-this.origin.x+this.originPoint.minX,i=t.y-this.origin.y+this.originPoint.minY;this.delegateRect.attr({x:n,y:i})}else{var r=e.get("group"),o=(0,b.deepMix)({},Ch.delegateStyle,this.delegateStyle),a=this.calculationGroupPosition(t),s=a.x,l=a.y,u=a.width,c=a.height,h=a.minX,d=a.minY;this.originPoint={x:s,y:l,width:u,height:c,minX:h,minY:d},this.delegateRect=r.addShape("rect",{attrs:(0,y.__assign)({width:u,height:c,x:s,y:l},o),name:"rect-delegate-shape"}),this.delegate=this.delegateRect,this.delegateRect.set("capture",!1)}},calculationGroupPosition:function(t){var e=this.targets;0===e.length&&e.push(t.item);for(var n=1/0,i=-1/0,r=1/0,o=-1/0,a=0;a<e.length;a++){var s=e[a].getBBox(),l=s.minX,u=s.minY,c=s.maxX,h=s.maxY;l<n&&(n=l),u<r&&(r=u),c>i&&(i=c),h>o&&(o=h)}return{x:Math.floor(n),y:Math.floor(r),width:Math.ceil(i)-Math.floor(n),height:Math.ceil(o)-Math.floor(r),minX:n,minY:r}}},cT={getDefaultCfg:function(){return{trigger:"mouseenter",activeState:"active",inactiveState:"inactive",resetSelected:!1,shouldUpdate:function(){return!0}}},getEvents:function(){return"mouseenter"===this.get("trigger")?{"node:mouseenter":"setAllItemStates","combo:mouseenter":"setAllItemStates","node:mouseleave":"clearActiveState","combo:mouseleave":"clearActiveState"}:{"node:click":"setAllItemStates","combo:click":"setAllItemStates","canvas:click":"clearActiveState","node:touchstart":"setOnTouchStart","combo:touchstart":"setOnTouchStart","canvas:touchstart":"clearOnTouchStart"}},setOnTouchStart:function(t){try{var e=t.originalEvent.touches,n=e[0],i=e[1];if(n&&i)return;t.preventDefault()}catch(t){console.warn("Touch original event not exist!")}this.setAllItemStates(t)},clearOnTouchStart:function(t){try{var e=t.originalEvent.touches,n=e[0],i=e[1];if(n&&i)return;t.preventDefault()}catch(t){console.warn("Touch original event not exist!")}this.clearActiveState(t)},setAllItemStates:function(t){var e=t.item,n=this.graph;if(this.item=e,this.shouldUpdate(t.item,{event:t,action:"activate"})){for(var i=this.activeState,r=this.inactiveState,o=n.getNodes(),a=n.getCombos(),s=n.getEdges(),l=n.get("vedges"),u=o.length,c=a.length,h=s.length,d=l.length,f=0;f<u;f++){var p=o[f],m=p.hasState("selected");this.resetSelected&&m&&n.setItemState(p,"selected",!1),n.setItemState(p,i,!1),r&&n.setItemState(p,r,!0)}for(f=0;f<c;f++){var g=a[f];m=g.hasState("selected");this.resetSelected&&m&&n.setItemState(g,"selected",!1),n.setItemState(g,i,!1),r&&n.setItemState(g,r,!0)}for(f=0;f<h;f++){var v=s[f];n.setItemState(v,i,!1),r&&n.setItemState(v,r,!0)}for(f=0;f<d;f++){var y=l[f];n.setItemState(y,i,!1),r&&n.setItemState(y,r,!0)}r&&n.setItemState(e,r,!1),n.setItemState(e,i,!0);var b=e.getEdges(),_=b.length;for(f=0;f<_;f++){var w=void 0;w=(v=b[f]).getSource()===e?v.getTarget():v.getSource(),r&&n.setItemState(w,r,!1),n.setItemState(w,i,!0),n.setItemState(v,r,!1),n.setItemState(v,i,!0),v.toFront()}n.emit("afteractivaterelations",{item:t.item,action:"activate"})}},clearActiveState:function(t){var e=this,n=e.get("graph");if(e.shouldUpdate(t.item,{event:t,action:"deactivate"})){var i=this.activeState,r=this.inactiveState,o=n.get("autoPaint");n.setAutoPaint(!1);for(var a=n.getNodes()||[],s=n.getCombos()||[],l=n.getEdges()||[],u=n.get("vedges")||[],c=a.length,h=s.length,d=l.length,f=u.length,p=0;p<c;p++){var m=a[p];n.clearItemStates(m,[i,r])}for(p=0;p<h;p++){var g=s[p];n.clearItemStates(g,[i,r])}for(p=0;p<d;p++){var v=l[p];n.clearItemStates(v,[i,r,"deactivate"])}for(p=0;p<f;p++){var y=u[p];n.clearItemStates(y,[i,r,"deactivate"])}n.paint(),n.setAutoPaint(o),n.emit("afteractivaterelations",{item:t.item||e.get("item"),action:"deactivate"})}}};var hT=Math.min,dT=Math.max,fT=Math.abs,pT="shift",mT=["drag","shift","ctrl","alt","control"];const gT={getDefaultCfg:function(){return{brushStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:pT,includeEdges:!0,selectedEdges:[],selectedNodes:[]}},getEvents:function(){return mT.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=pT,console.warn("Behavior brush-select  trigger  'drag''shift''ctrl'  'alt'")),"drag"===this.trigger?{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates"}:{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates",keyup:"onKeyUp",keydown:"onKeyDown"}},onMouseDown:function(t){var e=t.item,n=this.brush;e||("drag"===this.trigger||this.keydown)&&(this.selectedNodes&&0!==this.selectedNodes.length&&this.clearStates(),n||(n=this.createBrush()),this.originPoint={x:t.canvasX,y:t.canvasY},n.attr({width:0,height:0}),n.show(),this.dragging=!0)},onMouseMove:function(t){this.dragging&&("drag"===this.trigger||this.keydown)&&this.updateBrush(t)},onMouseUp:function(t){this.graph;(this.brush||this.dragging)&&("drag"===this.trigger||this.keydown)&&(this.brush.remove(!0),this.brush=null,this.getSelectedNodes(t),this.dragging=!1)},clearStates:function(){var t=this.graph,e=this.selectedState,n=t.findAllByState("node",e),i=t.findAllByState("edge",e);n.forEach((function(n){return t.setItemState(n,e,!1)})),i.forEach((function(n){return t.setItemState(n,e,!1)})),this.selectedNodes=[],this.selectedEdges=[],this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges),t.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[]},select:!1})},getSelectedNodes:function(t){var e=this,n=this,i=n.graph,r=n.originPoint,o=n.shouldUpdate,a=this.selectedState,s={x:t.x,y:t.y},l=i.getPointByCanvas(r.x,r.y),u=hT(s.x,l.x),c=dT(s.x,l.x),h=hT(s.y,l.y),d=dT(s.y,l.y),f=[],p=[];i.getNodes().forEach((function(t){if(t.isVisible()){var e=t.getBBox();if(e.centerX>=u&&e.centerX<=c&&e.centerY>=h&&e.centerY<=d&&o(t,"select")){f.push(t);var n=t.getModel();p.push(n.id),i.setItemState(t,a,!0)}}}));var m=[];this.includeEdges&&f.forEach((function(t){t.getOutEdges().forEach((function(t){if(t.isVisible()){var n=t.getModel(),r=n.source,a=n.target;p.includes(r)&&p.includes(a)&&o(t,"select")&&(m.push(t),i.setItemState(t,e.selectedState,!0))}}))})),this.selectedEdges=m,this.selectedNodes=f,this.onSelect&&this.onSelect(f,m),i.emit("nodeselectchange",{selectedItems:{nodes:f,edges:m},select:!0})},createBrush:function(){var t=this.graph.get("canvas").addShape("rect",{attrs:this.brushStyle,capture:!1,name:"brush-shape"});return this.brush=t,this.delegate=t,t},updateBrush:function(t){var e=this.originPoint;this.brush.attr({width:fT(t.canvasX-e.x),height:fT(t.canvasY-e.y),x:hT(t.canvasX,e.x),y:hT(t.canvasY,e.y)})},onKeyDown:function(t){var e=t.key;if(e){var n=this.trigger.toLowerCase(),i=e.toLowerCase();this.keydown=i===n||"control"===i&&"ctrl"===n||"ctrl"===i&&"control"===n}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.keydown=!1}};var vT="shift",yT=["shift","ctrl","alt","control"];const bT={getDefaultCfg:function(){return{multiple:!0,trigger:vT,selectedState:"selected"}},getEvents:function(){var t=this;return yT.indexOf(t.trigger.toLowerCase())>-1||(t.trigger=vT,console.warn("Behavior brush-select  trigger  'drag''shift''ctrl'  'alt'")),t.multiple?{"node:click":"onClick","combo:click":"onClick","canvas:click":"onCanvasClick",keyup:"onKeyUp",keydown:"onKeyDown"}:{"node:click":"onClick","combo:click":"onClick","canvas:click":"onCanvasClick"}},onClick:function(t){var e=this,n=t.item;if(n&&!n.destroyed){n.getType();var i=e.graph,r=e.keydown,o=e.multiple,a=e.shouldUpdate;if(e.shouldBegin.call(e,t)){if(!r||!o){var s=i.findAllByState("node",e.selectedState).concat(i.findAllByState("combo",e.selectedState));(0,b.each)(s,(function(t){t!==n&&i.setItemState(t,e.selectedState,!1)}))}if(n.hasState(e.selectedState)){a.call(e,t)&&i.setItemState(n,e.selectedState,!1);var l=i.findAllByState("node",e.selectedState),u=i.findAllByState("combo",e.selectedState);i.emit("nodeselectchange",{target:n,selectedItems:{nodes:l,combos:u},select:!1})}else{a.call(e,t)&&i.setItemState(n,e.selectedState,!0);l=i.findAllByState("node",e.selectedState),u=i.findAllByState("combo",e.selectedState);i.emit("nodeselectchange",{target:n,selectedItems:{nodes:l,combos:u},select:!0})}}}},onCanvasClick:function(){var t=this,e=this.graph,n=e.findAllByState("node",this.selectedState);(0,b.each)(n,(function(n){e.setItemState(n,t.selectedState,!1)}));var i=e.findAllByState("combo",this.selectedState);(0,b.each)(i,(function(n){e.setItemState(n,t.selectedState,!1)})),e.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})},onKeyDown:function(t){var e=t.key;e&&(e.toLowerCase()===this.trigger.toLowerCase()||"control"===e.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.keydown=!1}};var _T=uh;const wT={getDefaultCfg:function(){return{sensitivity:2,minZoom:void 0,maxZoom:void 0,enableOptimize:!1,optimizeZoom:.1,fixSelectedItems:{fixAll:!1,fixLineWidth:!1,fixLabel:!1,fixState:"selected"}}},getEvents:function(){var t=this.fixSelectedItems;return t.fixState||(t.fixState="selected"),t.fixAll&&(t.fixLineWidth=!0,t.fixLabel=!0),{wheel:"onWheel",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd"}},onTouchStart:function(t){var e=t.originalEvent.touches,n=e[0],i=e[1];t.preventDefault(),i&&(this.shouldBegin&&!this.shouldBegin.call(this,t)||(this.startPoint={pageX:n.pageX,pageY:n.pageY},this.moveable=!0,i&&(this.endPoint={pageX:i.pageX,pageY:i.pageY}),this.originScale=this.graph.getZoom()||this.currentScale||1))},onTouchMove:function(t){if(this.moveable){t.preventDefault();var e=t.originalEvent.touches,n=e[0],i=e[1];if(i){this.endPoint||(this.endPoint={pageX:i.pageX,pageY:i.pageY});var r=function(t,e){return Math.hypot(e.x-t.x,e.y-t.y)},o=r({x:n.pageX,y:n.pageY},{x:i.pageX,y:i.pageY})/r({x:this.startPoint.pageX,y:this.startPoint.pageY},{x:this.endPoint.pageX,y:this.endPoint.pageY}),a=this.originScale*o;this.currentScale=a;var s=this.get("minZoom")||this.graph.get("minZoom");if(!(a>(this.get("maxZoom")||this.graph.get("maxZoom"))||a<s)){var l=this.graph.get("canvas").getPointByClient(t.clientX,t.clientY);this.graph.zoomTo(a,{x:l.x,y:l.y}),this.graph.emit("wheelzoom",t)}}}},onTouchEnd:function(){this.moveable=!1,this.endPoint=null},onWheel:function(t){var e=this,n=this.graph,i=this.fixSelectedItems;if((!this.shouldBegin||this.shouldBegin.call(this,t))&&this.shouldUpdate.call(this,t)){t.preventDefault();var r,o=n.get("canvas").getPointByClient(t.clientX,t.clientY),a=this.get("sensitivity"),s=n.getZoom();r=s*(t.wheelDelta<0?1-.05*a:1/(1-.05*a));var l=this.get("minZoom")||n.get("minZoom");if(!(r>(this.get("maxZoom")||n.get("maxZoom"))||r<l)){if(this.get("enableOptimize")){var u=this.get("optimizeZoom"),c=this.get("optimized"),h=n.getNodes(),d=n.getEdges(),f=h.length,p=d.length;if(!c){for(var m=0;m<f;m++){if(!(k=h[m]).destroyed)for(var g=(q=k.get("group").get("children")).length,v=0;v<g;v++){(R=q[v]).destoryed||R.get("isKeyShape")||(R.set("ori-visibility",R.get("ori-visibility")||R.get("visible")),R.hide())}}for(var y=0;y<p;y++)for(g=(q=(X=d[y]).get("group").get("children")).length,v=0;v<g;v++){(R=q[v]).set("ori-visibility",R.get("ori-visibility")||R.get("visible")),R.hide()}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var _=setTimeout((function(){var t=n.getZoom();if(e.get("optimized")){e.set("optimized",!1);for(var i=0;i<f;i++){var r=h[i],o=(c=r.get("group").get("children")).length;if(t<u)(s=(m=r.getKeyShape()).get("ori-visibility"))&&m.show();else for(var a=0;a<o;a++){var s=(v=c[a]).get("ori-visibility");!v.get("visible")&&s&&s&&v.show()}}for(var l=0;l<p;l++){var c,m,g=d[l];o=(c=g.get("group").get("children")).length;if(t<u)(s=(m=g.getKeyShape()).get("ori-visibility"))&&m.show();else for(a=0;a<o;a++){var v;if(!(v=c[a]).get("visible"))(s=v.get("ori-visibility"))&&v.show()}}}}),100);this.set("timeout",_)}if(s<=1){var w=void 0,x=void 0;if(i.fixAll||i.fixLineWidth||i.fixLabel){w=n.findAllByState("node",i.fixState),x=n.findAllByState("edge",i.fixState);for(var M=s/r,E=w.length,S=0;S<E;S++){var k,C=(k=w[S]).getContainer(),T=k.getModel(),D=k.getOriginStyle(),L=k.getStateStyle(i.fixState),A=k.get("shapeFactory").getShape(T.type).getStateStyle(i.fixState,k)[i.fixState];if(i.fixAll){if(r<=1){var O=(0,b.clone)(C.getMatrix());O||(O=[1,0,0,0,1,0,0,0,1]);var P=k.getModel(),I=P.x,N=P.y;O=_T(O,[["t",-I,-N],["s",M,M],["t",I,N]]),C.setMatrix(O)}}else for(g=(q=C.get("children")).length,v=0;v<g;v++){var R=q[v],Y=void 0,j=void 0;if(i.fixLabel)if("text"===R.get("type")){Y=R.attr("fontSize")||12;var F=L[R.get("name")],B=A[R.get("name")],z=F?F.fontSize:12,H=B?B.fontSize:12,G=z||H||12;if(r<=1&&R.attr("fontSize",G/r),j)break}if(i.fixLineWidth&&R.get("isKeyShape")){j=R.attr("lineWidth")||0;var W=L.lineWidth||A.lineWidth||D.lineWidth||0;if(r<=1&&R.attr("lineWidth",W/r),Y)break}}}for(var U=x.length,V=0;V<U;V++){var X,q=(C=(X=x[V]).getContainer()).get("children");for(T=X.getModel(),L=X.getStateStyle(i.fixState),A=X.get("shapeFactory").getShape(T.type).getStateStyle(i.fixState,X)[i.fixState],g=q.length,v=0;v<g;v++){R=q[v],Y=void 0,j=void 0;if(i.fixLabel||i.fixAll)if("text"===R.get("type")){Y=R.attr("fontSize")||12;F=L[R.get("name")],B=A[R.get("name")],z=F?F.fontSize:12,H=B?B.fontSize:12,G=z||H||12;if(r<=1&&R.attr("fontSize",G/r),j)break}if((i.fixLineWidth||i.fixAll)&&R.get("isKeyShape")){j=R.attr("lineWidth")||0;W=L.lineWidth||A.lineWidth||1;if(r<=1&&R.attr("lineWidth",W/r),Y)break}}}}}n.zoomTo(r,{x:o.x,y:o.y}),n.emit("wheelzoom",t)}}}},xT={onMouseEnter:function(t){var e=t.item;this.currentTarget=e,this.showTooltip(t),this.graph.emit("tooltipchange",{item:t.item,action:"show"})},onMouseMove:function(t){this.shouldUpdate(t)?this.currentTarget&&t.item===this.currentTarget&&this.updatePosition(t):this.hideTooltip()},onMouseLeave:function(t){this.shouldEnd(t)&&(this.hideTooltip(),this.graph.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null)},showTooltip:function(t){var e=this.container;if(t.item&&!t.item.destroyed){e||(e=this.createTooltip(this.graph.get("canvas")),this.container=e);var n=this.formatText(t.item.get("model"),t);e.innerHTML=n,HM(this.container,{visibility:"visible"}),this.updatePosition(t)}},hideTooltip:function(){HM(this.container,{visibility:"hidden"})},updatePosition:function(t){var e=this.get("shouldBegin"),n=this,i=n.width,r=n.height,o=n.container,a=n.graph;if(e(t)){var s=a.getPointByClient(t.clientX,t.clientY),l=a.getCanvasByPoint(s.x,s.y),u=l.x,c=l.y,h=o.getBoundingClientRect();u>i/2?u-=h.width:u+=this.offset,c>r/2?c-=h.height:c+=this.offset;var d=u+"px",f=c+"px";HM(this.container,{left:d,top:f,visibility:"visible"})}else HM(o,{visibility:"hidden"})},createTooltip:function(t){var e=t.get("el");e.style.position="relative";var n=IM('<div class="g6-tooltip g6-'+this.item+'-tooltip"></div>');return e.parentNode.appendChild(n),HM(n,{position:"absolute",visibility:"visible"}),this.width=t.get("width"),this.height=t.get("height"),this.container=n,this.graph.get("tooltips").push(n),n}},MT=(0,y.__assign)({getDefaultCfg:function(){return{item:"node",offset:12,formatText:function(t){return t.label}}},getEvents:function(){return{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},xT),ET=(0,y.__assign)({getDefaultCfg:function(){return{item:"edge",offset:12,formatText:function(t){return"source: "+t.source+" target: "+t.target}}},getEvents:function(){return{"edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},xT);var ST="click",kT=["click","dblclick"];const CT={getDefaultCfg:function(){return{trigger:ST,onChange:function(){}}},getEvents:function(){var t,e;return kT.includes(this.trigger)?e=this.trigger:(e=ST,console.warn("Behavior collapse-expand  trigger  'click'  'dblclick'")),(t={})["node:"+e]="onNodeClick",t.touchstart="onNodeClick",t},onNodeClick:function(t){var e=t.item;if(e){var n=this.graph.findDataById(e.get("id"));if(n){var i=n.children;if(i&&0!==i.length){var r=!n.collapsed;this.shouldBegin(t,r)&&(n.collapsed=r,e.getModel().collapsed=r,this.graph.emit("itemcollapsed",{item:t.item,collapsed:r}),this.shouldUpdate(t,r)&&(this.onChange(e,r),this.graph.layout()))}}}}};var TT=sM.calculationItemsBBox,DT=function t(e,n){if(!1!==n(e)&&e){var i=e.get("combos");if(0===i.length)return!1;(0,b.each)(i,(function(e){t(e,n)}))}};const LT={getDefaultCfg:function(){return{enableDelegate:!1,delegateStyle:{},onlyChangeComboSize:!1,activeState:"",selectedState:"selected"}},getEvents:function(){return{"combo:dragstart":"onDragStart","combo:drag":"onDrag","combo:dragend":"onDragEnd","combo:drop":"onDrop","node:drop":"onNodeDrop","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave"}},validationCombo:function(t){var e=t.item;return!(!e||e.destroyed)&&(!!this.shouldUpdate(this,t)&&"combo"===e.getType())},onDragStart:function(t){var e=this,n=this.graph,i=t.item;if(this.currentShouldEnd=!0,this.validationCombo(t)){this.targets=[];var r=n.findAllByState("combo",this.selectedState),o=i.get("id"),a=r.filter((function(t){var e=t.get("id");return o===e}));0===a.length?this.targets.push(i):this.targets=r,this.activeState&&this.targets.map((function(t){var i=t.getModel();if(i.parentId){var r=n.findById(i.parentId);r&&n.setItemState(r,e.activeState,!0)}})),this.point={},this.originPoint={},this.origin={x:t.x,y:t.y},this.currentItemChildCombos=[],DT(i,(function(t){if(t.destroyed)return!1;var n=t.getModel();return e.currentItemChildCombos.push(n.id),!0}))}},onDrag:function(t){var e=this;if(this.origin&&this.validationCombo(t))if(this.enableDelegate)this.updateDelegate(t);else{if(this.activeState){var n=this.graph,i=t.item,r=i.getModel(),o=n.getCombos(),a=i.getBBox(),s=a.centerX,l=a.centerY,u=a.width,c=o.filter((function(t){var n=t.getModel();return r.parentId,n.id!==r.id&&!e.currentItemChildCombos.includes(n.id)}));c.map((function(t){var i=t.getBBox(),r=i.centerX,o=i.centerY,a=i.width,c=s-r,h=l-o,d=2*Math.sqrt(c*c+h*h);u+a-d>.8*u?n.setItemState(t,e.activeState,!0):n.setItemState(t,e.activeState,!1)}))}(0,b.each)(this.targets,(function(n){e.updateCombo(n,t)}))}},updatePositions:function(t,e){var n=this;(this.enableDelegate||e)&&(0,b.each)(this.targets,(function(i){n.updateCombo(i,t,e)}))},onDrop:function(t){var e=this,n=t.item;if(this.currentShouldEnd=this.shouldEnd.call(this,t,n),this.updatePositions(t,!this.currentShouldEnd),this.currentShouldEnd&&n&&this.targets&&!n.destroyed){var i=this.graph,r=n.getModel();this.targets.map((function(t){t.getModel().parentId!==r.id?(e.activeState&&i.setItemState(n,e.activeState,!1),e.onlyChangeComboSize?i.updateCombo(t):i.updateComboTree(t,r.id)):i.updateCombo(n)})),this.end(n,t),this.endComparison=!0}},onNodeDrop:function(t){var e=this;if(this.targets&&0!==this.targets.length){var n=this.graph,i=t.item.getModel().comboId,r=i?n.findById(i):void 0;if(this.currentShouldEnd=this.shouldEnd.call(this,t,r),this.updatePositions(t,!this.currentShouldEnd),this.currentShouldEnd){var o;if(i){if(this.activeState){var a=n.findById(i);n.setItemState(a,this.activeState,!1)}this.targets.map((function(t){e.onlyChangeComboSize?n.updateCombo(t):i!==t.getID()&&(o=n.findById(i),i!==t.getModel().parentId&&n.updateComboTree(t,i))}))}else this.targets.map((function(t){e.onlyChangeComboSize?n.updateCombo(t):t.getModel().comboId&&n.updateComboTree(t)}));this.endComparison=!0,this.end(o,t)}}},onDragEnter:function(t){if(this.origin&&this.validationCombo(t)){var e=t.item,n=this.graph;this.activeState&&n.setItemState(e,this.activeState,!0)}},onDragLeave:function(t){if(this.origin&&this.validationCombo(t)){var e=t.item,n=this.graph;this.activeState&&n.setItemState(e,this.activeState,!1)}},onDragEnd:function(t){if(this.targets&&0!==this.targets.length){var e=t.item;this.currentShouldEnd&&this.updatePositions(t);var n=this.getParentCombo(e.getModel().parentId),i=this.graph;n&&this.activeState&&i.setItemState(n,this.activeState,!1),this.end(void 0,t)}},end:function(t,e){var n=this;if(this.origin){var i=this.graph;if(this.delegateShape)i.get("delegateGroup").clear(),this.delegateShape=null;t&&this.activeState&&i.setItemState(t,this.activeState,!1),t||this.targets.map((function(t){n.onlyChangeComboSize?i.updateCombo(t):i.updateComboTree(t)})),this.point=[],this.origin=null,this.originPoint=null,this.targets.length=0}},traverse:function(t,e){var n=this;if(!1!==e(t)&&t){var i=t.get("combos");(0,b.each)(i,(function(t){n.traverse(t,e)}));var r=t.get("nodes");(0,b.each)(r,(function(t){n.traverse(t,e)}))}},updateCombo:function(t,e,n){var i=this;this.traverse(t,(function(t){return!t.destroyed&&(i.updateSignleItem(t,e,n),!0)}))},updateSignleItem:function(t,e,n){var i=this.origin,r=this.graph,o=t.getModel(),a=t.get("id");this.point[a]||(this.point[a]={x:o.x,y:o.y});var s=e.x-i.x+this.point[a].x,l=e.y-i.y+this.point[a].y;n&&(s+=i.x-e.x,l+=i.y-e.y),r.updateItem(t,{x:s,y:l})},getParentCombo:function(t){var e=this.graph;if(t){var n=e.findById(t);if(n)return n}},updateDelegate:function(t){var e=this.graph;if(this.delegateShape){var n=t.x-this.origin.x+this.originPoint.minX,i=t.y-this.origin.y+this.originPoint.minY;this.delegateShape.attr({x:n,y:i})}else{var r=e.get("delegateGroup"),o=null,a=(o=this.targets.length>1?TT(this.targets):this.targets[0].getBBox()).x,s=o.y,l=o.width,u=o.height,c=o.minX,h=o.minY;this.originPoint={x:a,y:s,width:l,height:u,minX:c,minY:h};var d=(0,y.__assign)((0,y.__assign)({},Ch.delegateStyle),this.delegateStyle);this.delegateShape=r.addShape("rect",{attrs:(0,y.__assign)({width:o.width,height:o.height,x:o.x,y:o.y},d),name:"combo-delegate-shape"}),this.delegateShape.set("capture",!1),this.delegate=this.delegateShape}}};var AT="dblclick",OT=["click","dblclick"];const PT={getDefaultCfg:function(){return{trigger:AT,relayout:!0}},getEvents:function(){var t,e;return OT.includes(this.trigger)?e=this.trigger:(e=AT,console.warn("Behavior collapse-expand-group  trigger  'click'  'dblclick'")),(t={})["combo:"+e]="onComboClick",t},onComboClick:function(t){var e=t.item,n=this.graph,i=this.relayout;if(e&&!e.destroyed&&"combo"===e.getType()){var r=e.getModel().id;r&&(n.collapseExpandCombo(r),i&&n.get("layout")?n.layout():n.refreshPositions())}}};var IT=sM.isPolygonsIntersect,NT=sM.pathToPoints,RT="shift",YT=["drag","shift","ctrl","alt","control"];const jT={getDefaultCfg:function(){return{delegateStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:RT,includeEdges:!0,selectedEdges:[],selectedNodes:[]}},getEvents:function(){return YT.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=RT,console.warn("Behavior lasso-select  trigger  'drag''shift''ctrl'  'alt'")),"drag"===this.trigger?{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd","canvas:click":"clearStates"}:{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd",keyup:"onKeyUp",keydown:"onKeyDown","canvas:click":"clearStates"}},onDragStart:function(t){var e=this.lasso;t.item||("drag"===this.trigger||this.keydown)&&(this.selectedNodes&&0!==this.selectedNodes.length&&this.clearStates(),e||(e=this.createLasso()),this.dragging=!0,this.originPoint={x:t.x,y:t.y},this.points.push(this.originPoint),e.show())},onDragMove:function(t){this.dragging&&("drag"===this.trigger||this.keydown)&&(this.points.push({x:t.x,y:t.y}),this.updateLasso(t))},onDragEnd:function(t){(this.lasso||this.dragging)&&("drag"===this.trigger||this.keydown)&&(this.points.push(this.originPoint),this.getSelectedItems(),this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1)},getLassoPath:function(){var t=this.points,e=[];return t.length&&(t.forEach((function(t,n){0===n?e.push(["M",t.x,t.y]):e.push(["L",t.x,t.y])})),e.push(["L",t[0].x,t[0].y])),e},clearStates:function(){var t=this.graph,e=this.selectedState,n=t.findAllByState("node",e),i=t.findAllByState("edge",e);n.forEach((function(n){return t.setItemState(n,e,!1)})),i.forEach((function(n){return t.setItemState(n,e,!1)})),this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges),this.selectedNodes=[],this.selectedEdges=[],t.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[]},select:!1})},getSelectedItems:function(){var t=this,e=this.graph,n=this.shouldUpdate,i=this.points.map((function(t){return[e.getCanvasByPoint(t.x,t.y).x,e.getCanvasByPoint(t.x,t.y).y]})),r=this.selectedState,o=[],a=[];e.getNodes().forEach((function(t){if(t.isVisible()&&function(t,e){var n,i=t.getKeyShape();if("path"===t.get("type"))n=NT(i.attr("path"));else{var r=i.getCanvasBBox();n=[[r.minX,r.minY],[r.maxX,r.minY],[r.maxX,r.maxY],[r.minX,r.maxY]]}return IT(e,n)}(t,i)&&n(t,"select")){o.push(t);var s=t.getModel();a.push(s.id),e.setItemState(t,r,!0)}}));var s=[];this.includeEdges&&o.forEach((function(i){i.getOutEdges().forEach((function(i){if(i.isVisible()){var r=i.getModel(),o=r.source,l=r.target;a.includes(o)&&a.includes(l)&&n(i,"select")&&(s.push(i),e.setItemState(i,t.selectedState,!0))}}))})),this.selectedEdges=s,this.selectedNodes=o,this.onSelect&&this.onSelect(o,s),e.emit("nodeselectchange",{selectedItems:{nodes:o,edges:s},select:!0})},createLasso:function(){var t=this.graph.get("delegateGroup").addShape("path",{attrs:(0,y.__assign)({path:[]},this.delegateStyle),capture:!1,name:"lasso-shape"});return this.lasso=t,this.delegate=t,this.points=[],t},updateLasso:function(t){this.lasso.attr({path:this.getLassoPath()})},onKeyDown:function(t){var e=t.key;e&&(e.toLowerCase()===this.trigger.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.lasso&&(this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1),this.keydown=!1}};var FT="click",BT=["click","drag"],zT=void 0,HT=["shift","ctrl","control","alt","meta",void 0];const GT={getDefaultCfg:function(){return{trigger:FT,key:zT,edgeConfig:{},getEdgeConfig:void 0}},getEvents:function(){var t,e=this;return BT.indexOf(e.trigger.toLowerCase())>-1||(e.trigger=FT,console.warn("Behavior create-edge  trigger  'click''drag'")),e.key&&-1===HT.indexOf(e.key.toLowerCase())&&(e.trigger=zT,console.warn("Behavior create-edge  key  'shift''ctrl''alt''control' undefined")),"drag"===e.trigger?t={"node:dragstart":"onClick","combo:dragstart":"onClick",drag:"updateEndPoint","node:drop":"onClick","combo:drop":"onClick",dragend:"onDragEnd"}:"click"===e.trigger&&(t={"node:click":"onClick",mousemove:"updateEndPoint","edge:click":"cancelCreating","canvas:click":"cancelCreating","combo:click":"onClick"}),e.key&&(t.keydown="onKeyDown",t.keyup="onKeyUp"),t},onDragEnd:function(t){var e=this;if(!e.key||e.keydown){var n=t.item;n&&n.getID()!==e.source&&"node"===n.getType()||e.cancelCreating({item:e.edge,x:t.x,y:t.y})}},onClick:function(t){var e=this;if(!e.key||e.keydown){var n=t.item,i=e.graph,r=n.getModel(),o=e.getEdgeConfig;if(e.addingEdge&&e.edge){if(!e.shouldEnd.call(e,t))return;var a=void 0;a=o&&(0,b.isFunction)(o)?o({source:e.source,target:r.id}):e.edgeConfig;var s=(0,y.__assign)({target:r.id},a);if(e.source===r.id&&(s.type="loop"),i.emit("beforecreateedge",{}),i.updateItem(e.edge,s,!1),i.get("enabledStack")){var l=(0,y.__assign)((0,y.__assign)({},e.edge.getModel()),{itemType:"edge"}),u={};u.edges=[l],i.pushStack("add",{before:{},after:u})}i.emit("aftercreateedge",{edge:e.edge}),e.edge.getKeyShape().set("capture",!0),e.edge=null,e.addingEdge=!1}else{if(!e.shouldBegin.call(e,t))return;a=void 0;a=o&&(0,b.isFunction)(o)?o({source:r.id,target:r.id}):e.edgeConfig,e.edge=i.addItem("edge",(0,y.__assign)({source:r.id,target:r.id},a),!1),e.source=r.id,e.addingEdge=!0,e.edge.getKeyShape().set("capture",!1)}}},updateEndPoint:function(t){var e=this;if(!e.key||e.keydown){var n={x:t.x,y:t.y};e.graph.findById(e.source)?e.addingEdge&&e.edge&&e.graph.updateItem(e.edge,{target:n},!1):e.addingEdge=!1}},cancelCreating:function(t){var e=this;if(!e.key||e.keydown){var n=e.graph,i=t.item;if(e.addingEdge&&t.target&&t.target.isCanvas&&t.target.isCanvas())return n.removeItem(e.edge,!1),e.edge=null,void(e.addingEdge=!1);e.addingEdge&&e.edge===i&&(n.removeItem(e.edge,!1),e.edge=null,e.addingEdge=!1)}},onKeyDown:function(t){var e=this,n=t.key;n&&(n.toLowerCase()===e.key.toLowerCase()?e.keydown=!0:e.keydown=!1)},onKeyUp:function(){var t=this;t.addingEdge&&t.edge&&(t.graph.removeItem(t.edge,!1),t.addingEdge=!1,t.edge=null),this.keydown=!1}};var WT="ctrl",UT=["shift","ctrl","alt","control"];const VT={getDefaultCfg:function(){return{trigger:WT,combinedKey:"1",functionName:"fitView",functionParams:[]}},getEvents:function(){return UT.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=WT,console.warn("Behavior shortcuts-fit-view  trigger  '"+this.trigger+"'  'drag''shift''ctrl'  'alt'")),this.combinedKey===this.trigger&&(this.combinedKey=void 0),{keyup:"onKeyUp",keydown:"onKeyDown"}},onKeyDown:function(t){var e=t.key;if(e){var n=this.trigger.toLowerCase(),i=e.toLowerCase();this.triggerKeydown||(this.triggerKeydown=i===n||"control"===i&&"ctrl"===n||"ctrl"===i&&"control"===n);var r=this.graph;if(!r[this.functionName])return console.warn("Behavior shortcuts-fit-view  functionName  '"+this.functionName+"'  Graph "),{};if(!this.triggerKeydown||this.combinedKey){var o=this.combinedKey.toLowerCase();this.triggerKeydown&&(i===o||"control"===i&&"ctrl"===o||"ctrl"===i&&"control"===o)&&(this.functionParams&&this.functionParams.length?r[this.functionName].apply(r,this.functionParams):r[this.functionName]())}else this.functionParams&&this.functionParams.length?r[this.functionName].apply(r,this.functionParams):r[this.functionName]()}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.triggerKeydown=!1}};var XT=["shift","ctrl","alt","control"];const qT={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,zoomKey:"ctrl",scalableRange:0}},getEvents:function(){return this.zoomKey&&-1!==XT.indexOf(this.zoomKey)||(this.zoomKey="ctrl"),{wheel:"onWheel"}},onWheel:function(t){var e=this,n=this.graph,i=t[this.zoomKey+"Key"];if("control"===this.zoomKey&&(i=t.ctrlKey),i){var r=n.get("canvas").getPointByClient(t.clientX,t.clientY),o=n.getZoom();t.wheelDelta>0?o+=.05*o:o-=.05*o,n.zoomTo(o,{x:r.x,y:r.y})}else{var a=t.deltaX||t.movementX,s=t.deltaY||t.movementY;!s&&navigator.userAgent.indexOf("Firefox")>-1&&(s=125*-t.wheelDelta/3);var l=this.graph.get("width"),u=this.graph.get("height"),c=this.graph.get("canvas").getCanvasBBox(),h=this.scalableRange,d=this.scalableRange;h<1&&h>-1&&(h*=l,d*=u);var f=c.minX,p=c.maxX,m=c.minY,g=c.maxY;a>0?p<-h?a=0:p-a<-h&&(a=p+h):a<0&&(f>l+h?a=0:f-a>l+h&&(a=f-(l+h))),s>0?g<-d?s=0:g-s<-d&&(s=g+d):s<0&&(m>u+d?s=0:m-s>u+d&&(s=m-(u+d))),"x"===this.get("direction")?s=0:"y"===this.get("direction")&&(a=0),n.translate(-a,-s)}if(t.preventDefault(),this.get("enableOptimize")){var v=this.get("optimizeZoom"),y=this.get("optimized"),b=n.getNodes(),_=n.getEdges(),w=b.length,x=_.length;if(!y){for(var M=0;M<w;M++){var E=b[M];if(!E.destroyed)for(var S=(T=E.get("group").get("children")).length,k=0;k<S;k++){(D=T[k]).destoryed||D.get("isKeyShape")||(D.set("ori-visibility",D.get("ori-visibility")||D.get("visible")),D.hide())}}for(var C=0;C<x;C++){var T;for(S=(T=_[C].get("group").get("children")).length,k=0;k<S;k++){var D;(D=T[k]).set("ori-visibility",D.get("ori-visibility")||D.get("visible")),D.hide()}}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var L=setTimeout((function(){var t=n.getZoom();if(e.get("optimized")){e.set("optimized",!1);for(var i=0;i<w;i++){var r=b[i],o=(u=r.get("group").get("children")).length;if(t<v)(s=(c=r.getKeyShape()).get("ori-visibility"))&&c.show();else for(var a=0;a<o;a++){var s=(d=u[a]).get("ori-visibility");!d.get("visible")&&s&&s&&d.show()}}for(var l=0;l<x;l++){var u,c,h=_[l];o=(u=h.get("group").get("children")).length;if(t<v)(s=(c=h.getKeyShape()).get("ori-visibility"))&&c.show();else for(a=0;a<o;a++){var d;if(!(d=u[a]).get("visible"))(s=d.get("ori-visibility"))&&d.show()}}}}),100);this.set("timeout",L)}}};var KT={"drag-canvas":lT,"zoom-canvas":wT,"drag-node":uT,"activate-relations":cT,"brush-select":gT,"click-select":bT,"lasso-select":jT,tooltip:MT,"edge-tooltip":ET,"collapse-expand":CT,"drag-combo":LT,"collapse-expand-combo":PT,"create-edge":GT,"shortcuts-call":VT,"scroll-canvas":qT};(0,b.each)(KT,(function(t,e){Sl(e,t)}));var $T=(0,y.__assign)((0,y.__assign)({},r),Cl),ZT=LC.Grid,JT=LC.Minimap,QT=LC.Bundling,tD=LC.Menu,eD=LC.Fisheye,nD=LC.ToolBar,iD=LC.Tooltip,rD=LC.TimeBar,oD=LC.ImageMinimap,aD=LC.EdgeFilterLens,sD=LC.SnapLine,lD=LC.Legend;const uD={version:(Ch.version,"4.3.11"),Graph:YM,TreeGraph:zM,Util:sM,Layout:Kx,TreeLayout:cM,registerLayout:hM,Global:Ch,registerBehavior:Sl,registerCombo:El,registerEdge:Ml,registerNode:xl,Minimap:LC.Minimap,Grid:LC.Grid,Bundling:LC.Bundling,Menu:LC.Menu,ToolBar:LC.ToolBar,Tooltip:LC.Tooltip,Legend:LC.Legend,TimeBar:rD,SnapLine:sD,Fisheye:eD,ImageMinimap:oD,EdgeFilterLens:aD,Algorithm:$T,Arrow:hl,Marker:dl,Shape:fl},cD=uD;var hD="4.3.11"},81746:function(t){var e;"undefined"!=typeof self&&self,e=function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=31)}([function(t,e,n){"use strict";var i=n(4);e.a=function(t){return Array.isArray?Array.isArray(t):Object(i.a)(t,"Array")}},function(t,e,n){"use strict";e.a=function(t){return null!==t&&"function"!=typeof t&&isFinite(t.length)}},function(t,e,n){"use strict";var i=n(0),r=n(13);e.a=function(t,e){if(t)if(Object(i.a)(t))for(var n=0,o=t.length;n<o&&!1!==e(t[n],n);n++);else if(Object(r.a)(t))for(var a in t)if(t.hasOwnProperty(a)&&!1===e(t[a],a))break}},function(t,e,n){"use strict";var i=n(4);e.a=function(t){return Object(i.a)(t,"Function")}},function(t,e,n){"use strict";var i={}.toString;e.a=function(t,e){return i.call(t)==="[object "+e+"]"}},function(t,e,n){"use strict";var i=n(4);e.a=function(t){return Object(i.a)(t,"Number")}},function(t,e,n){"use strict";e.a=function(t){return null==t}},function(t,e,n){var i=n(33).mix;t.exports={assign:i}},function(t,e,n){"use strict";var i=n(4);e.a=function(t){return Object(i.a)(t,"String")}},function(t,e,n){"use strict";var i=n(15),r=n(4);e.a=function(t){if(!Object(i.a)(t)||!Object(r.a)(t,"Object"))return!1;if(null===Object.getPrototypeOf(t))return!0;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}},function(t,e,n){"use strict";var i=n(6);e.a=function(t){return Object(i.a)(t)?"":t.toString()}},function(t,e,n){var i=n(18),r=function(){function t(t,e){void 0===e&&(e={}),this.options=e,this.rootNode=i(t,e)}return t.prototype.execute=function(){throw new Error("please override this method")},t}();t.exports=r},function(t,e,n){"use strict";var i=n(1);e.a=function(t,e){return!!Object(i.a)(t)&&t.indexOf(e)>-1}},function(t,e,n){"use strict";e.a=function(t){var e=typeof t;return null!==t&&"object"===e||"function"===e}},function(t,e,n){"use strict";var i=n(2),r=n(1);e.a=function(t,e){if(!Object(r.a)(t))return t;var n=[];return Object(i.a)(t,(function(t,i){e(t,i)&&n.push(t)})),n}},function(t,e,n){"use strict";e.a=function(t){return"object"==typeof t&&null!==t}},function(t,e,n){"use strict";function i(t,e){for(var n in e)e.hasOwnProperty(n)&&"constructor"!==n&&void 0!==e[n]&&(t[n]=e[n])}e.a=function(t,e,n,r){return e&&i(t,e),n&&i(t,n),r&&i(t,r),t}},function(t,e,n){var i=n(30),r=["LR","RL","TB","BT","H","V"],o=["LR","RL","H"],a=r[0];t.exports=function(t,e,n){var s=e.direction||a;if(e.isHorizontal=function(t){return o.indexOf(t)>-1}(s),s&&-1===r.indexOf(s))throw new TypeError("Invalid direction: "+s);if(s===r[0])n(t,e);else if(s===r[1])n(t,e),t.right2left();else if(s===r[2])n(t,e);else if(s===r[3])n(t,e),t.bottom2top();else if(s===r[4]||s===r[5]){var l=i(t,e),u=l.left,c=l.right;n(u,e),n(c,e),e.isHorizontal?u.right2left():u.bottom2top(),c.translate(u.x-c.x,u.y-c.y),t.x=u.x,t.y=c.y;var h=t.getBoundingBox();e.isHorizontal?h.top<0&&t.translate(0,-h.top):h.left<0&&t.translate(-h.left,0)}var d=e.fixedRoot;return void 0===d&&(d=!0),d&&t.translate(-(t.x+t.width/2+t.hgap),-(t.y+t.height/2+t.vgap)),t}},function(t,e,n){var i=n(7),r={getId:function(t){return t.id||t.name},getPreH:function(t){return t.preH||0},getPreV:function(t){return t.preV||0},getHGap:function(t){return t.hgap||18},getVGap:function(t){return t.vgap||18},getChildren:function(t){return t.children},getHeight:function(t){return t.height||36},getWidth:function(t){var e=t.label||" ";return t.width||18*e.split("").length}};function o(t,e){var n=this;if(n.vgap=n.hgap=0,t instanceof o)return t;n.data=t;var i=e.getHGap(t),r=e.getVGap(t);return n.preH=e.getPreH(t),n.preV=e.getPreV(t),n.width=e.getWidth(t),n.height=e.getHeight(t),n.width+=n.preH,n.height+=n.preV,n.id=e.getId(t),n.x=n.y=0,n.depth=0,n.children||(n.children=[]),n.addGap(i,r),n}i.assign(o.prototype,{isRoot:function(){return 0===this.depth},isLeaf:function(){return 0===this.children.length},addGap:function(t,e){var n=this;n.hgap+=t,n.vgap+=e,n.width+=2*t,n.height+=2*e},eachNode:function(t){for(var e,n=[this];e=n.shift();)t(e),n=e.children.concat(n)},DFTraverse:function(t){this.eachNode(t)},BFTraverse:function(t){for(var e,n=[this];e=n.shift();)t(e),n=n.concat(e.children)},getBoundingBox:function(){var t={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode((function(e){t.left=Math.min(t.left,e.x),t.top=Math.min(t.top,e.y),t.width=Math.max(t.width,e.x+e.width),t.height=Math.max(t.height,e.y+e.height)})),t},translate:function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.eachNode((function(n){n.x+=t,n.y+=e,n.x+=n.preH,n.y+=n.preV}))},right2left:function(){var t=this,e=t.getBoundingBox();t.eachNode((function(t){t.x=t.x-2*(t.x-e.left)-t.width})),t.translate(e.width,0)},bottom2top:function(){var t=this,e=t.getBoundingBox();t.eachNode((function(t){t.y=t.y-2*(t.y-e.top)-t.height})),t.translate(0,e.height)}}),t.exports=function(t,e,n){void 0===e&&(e={});var a,s=new o(t,e=i.assign({},r,e)),l=[s];if(!n&&!t.collapsed)for(;a=l.shift();)if(!a.data.collapsed){var u=e.getChildren(a.data),c=u?u.length:0;if(a.children=new Array(c),u&&c)for(var h=0;h<c;h++){var d=new o(u[h],e);a.children[h]=d,l.push(d),d.parent=a,d.depth=a.depth+1}}return s}},function(t,e,n){"use strict";var i=n(6),r=n(20);e.a=function(t,e){var n=Object(r.a)(e),o=n.length;if(Object(i.a)(t))return!o;for(var a=0;a<o;a+=1){var s=n[a];if(e[s]!==t[s]||!(s in t))return!1}return!0}},function(t,e,n){"use strict";var i=n(2),r=n(3),o=Object.keys?function(t){return Object.keys(t)}:function(t){var e=[];return Object(i.a)(t,(function(n,i){Object(r.a)(t)&&"prototype"===i||e.push(i)})),e};e.a=o},function(t,e,n){"use strict";var i=n(1),r=Array.prototype.splice;e.a=function(t,e){if(!Object(i.a)(t))return[];for(var n=t?e.length:0,o=n-1;n--;){var a=void 0,s=e[n];n!==o&&s===a||(a=s,r.call(t,s,1))}return t}},function(t,e,n){"use strict";var i=n(12),r=n(2);e.a=function(t){var e=[];return Object(r.a)(t,(function(t){Object(i.a)(e,t)||e.push(t)})),e}},function(t,e,n){"use strict";var i=n(0),r=n(3),o=n(24);e.a=function(t,e){if(!e)return{0:t};if(!Object(r.a)(e)){var n=Object(i.a)(e)?e:e.replace(/\s+/g,"").split("*");e=function(t){for(var e="_",i=0,r=n.length;i<r;i++)e+=t[n[i]]&&t[n[i]].toString();return e}}return Object(o.a)(t,e)}},function(t,e,n){"use strict";var i=n(2),r=n(0),o=n(3),a=Object.prototype.hasOwnProperty;e.a=function(t,e){if(!e||!Object(r.a)(t))return{};var n,s={},l=Object(o.a)(e)?e:function(t){return t[e]};return Object(i.a)(t,(function(t){n=l(t),a.call(s,n)?s[n].push(t):s[n]=[t]})),s}},function(t,e,n){"use strict";e.a=function(t,e){return t.hasOwnProperty(e)}},function(t,e,n){"use strict";var i=n(2),r=n(3),o=Object.values?function(t){return Object.values(t)}:function(t){var e=[];return Object(i.a)(t,(function(n,i){Object(r.a)(t)&&"prototype"===i||e.push(n)})),e};e.a=o},function(t,e,n){"use strict";var i={}.toString;e.a=function(t){return i.call(t).replace(/^\[object /,"").replace(/]$/,"")}},function(t,e,n){"use strict";var i=Object.prototype;e.a=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||i)}},function(t,e,n){"use strict";var i=n(15),r=n(1),o=n(8),a=function(t,e){if(t===e)return!0;if(!t||!e)return!1;if(Object(o.a)(t)||Object(o.a)(e))return!1;if(Object(r.a)(t)||Object(r.a)(e)){if(t.length!==e.length)return!1;for(var n=!0,s=0;s<t.length&&(n=a(t[s],e[s]));s++);return n}if(Object(i.a)(t)||Object(i.a)(e)){var l=Object.keys(t),u=Object.keys(e);if(l.length!==u.length)return!1;for(n=!0,s=0;s<l.length&&(n=a(t[l[s]],e[l[s]]));s++);return n}return!1};e.a=a},function(t,e,n){var i=n(18);t.exports=function(t,e){for(var n=i(t.data,e,!0),r=i(t.data,e,!0),o=t.children.length,a=Math.round(o/2),s=e.getSide||function(t,e){return e<a?"right":"left"},l=0;l<o;l++){var u=t.children[l];"right"===s(u,l)?r.children.push(u):n.children.push(u)}return n.eachNode((function(t){t.isRoot()||(t.side="left")})),r.eachNode((function(t){t.isRoot()||(t.side="right")})),{left:n,right:r}}},function(t,e,n){var i={compactBox:n(32),dendrogram:n(114),indented:n(116),mindmap:n(118)};t.exports=i},function(t,e,n){var i=n(11),r=n(113),o=n(17),a=n(7),s=function(t){var e,n;function i(){return t.apply(this,arguments)||this}return n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n,i.prototype.execute=function(){return o(this.rootNode,this.options,r)},i}(i),l={};t.exports=function(t,e){return e=a.assign({},l,e),new s(t,e).execute()}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(12);n.d(e,"contains",(function(){return i.a})),n.d(e,"includes",(function(){return i.a}));var r=n(34);n.d(e,"difference",(function(){return r.a}));var o=n(35);n.d(e,"find",(function(){return o.a}));var a=n(36);n.d(e,"findIndex",(function(){return a.a}));var s=n(37);n.d(e,"firstValue",(function(){return s.a}));var l=n(38);n.d(e,"flatten",(function(){return l.a}));var u=n(39);n.d(e,"flattenDeep",(function(){return u.a}));var c=n(40);n.d(e,"getRange",(function(){return c.a}));var h=n(41);n.d(e,"pull",(function(){return h.a}));var d=n(21);n.d(e,"pullAt",(function(){return d.a}));var f=n(42);n.d(e,"reduce",(function(){return f.a}));var p=n(43);n.d(e,"remove",(function(){return p.a}));var m=n(44);n.d(e,"sortBy",(function(){return m.a}));var g=n(45);n.d(e,"union",(function(){return g.a}));var v=n(22);n.d(e,"uniq",(function(){return v.a}));var y=n(46);n.d(e,"valuesOfKey",(function(){return y.a}));var b=n(47);n.d(e,"head",(function(){return b.a}));var _=n(48);n.d(e,"last",(function(){return _.a}));var w=n(49);n.d(e,"startsWith",(function(){return w.a}));var x=n(50);n.d(e,"endsWith",(function(){return x.a}));var M=n(14);n.d(e,"filter",(function(){return M.a}));var E=n(51);n.d(e,"every",(function(){return E.a}));var S=n(52);n.d(e,"some",(function(){return S.a}));var k=n(53);n.d(e,"group",(function(){return k.a}));var C=n(24);n.d(e,"groupBy",(function(){return C.a}));var T=n(23);n.d(e,"groupToMap",(function(){return T.a}));var D=n(54);n.d(e,"getWrapBehavior",(function(){return D.a}));var L=n(55);n.d(e,"wrapBehavior",(function(){return L.a}));var A=n(56);n.d(e,"number2color",(function(){return A.a}));var O=n(57);n.d(e,"parseRadius",(function(){return O.a}));var P=n(58);n.d(e,"clamp",(function(){return P.a}));var I=n(59);n.d(e,"fixedBase",(function(){return I.a}));var N=n(60);n.d(e,"isDecimal",(function(){return N.a}));var R=n(61);n.d(e,"isEven",(function(){return R.a}));var Y=n(62);n.d(e,"isInteger",(function(){return Y.a}));var j=n(63);n.d(e,"isNegative",(function(){return j.a}));var F=n(64);n.d(e,"isNumberEqual",(function(){return F.a}));var B=n(65);n.d(e,"isOdd",(function(){return B.a}));var z=n(66);n.d(e,"isPositive",(function(){return z.a}));var H=n(67);n.d(e,"maxBy",(function(){return H.a}));var G=n(68);n.d(e,"minBy",(function(){return G.a}));var W=n(69);n.d(e,"mod",(function(){return W.a}));var U=n(70);n.d(e,"toDegree",(function(){return U.a}));var V=n(71);n.d(e,"toInteger",(function(){return V.a}));var X=n(72);n.d(e,"toRadian",(function(){return X.a}));var q=n(73);n.d(e,"forIn",(function(){return q.a}));var K=n(25);n.d(e,"has",(function(){return K.a}));var $=n(74);n.d(e,"hasKey",(function(){return $.a}));var Z=n(75);n.d(e,"hasValue",(function(){return Z.a}));var J=n(20);n.d(e,"keys",(function(){return J.a}));var Q=n(19);n.d(e,"isMatch",(function(){return Q.a}));var tt=n(26);n.d(e,"values",(function(){return tt.a}));var et=n(76);n.d(e,"lowerCase",(function(){return et.a}));var nt=n(77);n.d(e,"lowerFirst",(function(){return nt.a}));var it=n(78);n.d(e,"substitute",(function(){return it.a}));var rt=n(79);n.d(e,"upperCase",(function(){return rt.a}));var ot=n(80);n.d(e,"upperFirst",(function(){return ot.a}));var at=n(27);n.d(e,"getType",(function(){return at.a}));var st=n(81);n.d(e,"isArguments",(function(){return st.a}));var lt=n(0);n.d(e,"isArray",(function(){return lt.a}));var ut=n(1);n.d(e,"isArrayLike",(function(){return ut.a}));var ct=n(82);n.d(e,"isBoolean",(function(){return ct.a}));var ht=n(83);n.d(e,"isDate",(function(){return ht.a}));var dt=n(84);n.d(e,"isError",(function(){return dt.a}));var ft=n(3);n.d(e,"isFunction",(function(){return ft.a}));var pt=n(85);n.d(e,"isFinite",(function(){return pt.a}));var mt=n(6);n.d(e,"isNil",(function(){return mt.a}));var gt=n(86);n.d(e,"isNull",(function(){return gt.a}));var vt=n(5);n.d(e,"isNumber",(function(){return vt.a}));var yt=n(13);n.d(e,"isObject",(function(){return yt.a}));var bt=n(15);n.d(e,"isObjectLike",(function(){return bt.a}));var _t=n(9);n.d(e,"isPlainObject",(function(){return _t.a}));var wt=n(28);n.d(e,"isPrototype",(function(){return wt.a}));var xt=n(87);n.d(e,"isRegExp",(function(){return xt.a}));var Mt=n(8);n.d(e,"isString",(function(){return Mt.a}));var Et=n(4);n.d(e,"isType",(function(){return Et.a}));var St=n(88);n.d(e,"isUndefined",(function(){return St.a}));var kt=n(89);n.d(e,"isElement",(function(){return kt.a}));var Ct=n(90);n.d(e,"requestAnimationFrame",(function(){return Ct.a}));var Tt=n(91);n.d(e,"clearAnimationFrame",(function(){return Tt.a}));var Dt=n(92);n.d(e,"augment",(function(){return Dt.a}));var Lt=n(93);n.d(e,"clone",(function(){return Lt.a}));var At=n(94);n.d(e,"debounce",(function(){return At.a}));var Ot=n(95);n.d(e,"memoize",(function(){return Ot.a}));var Pt=n(96);n.d(e,"deepMix",(function(){return Pt.a}));var It=n(2);n.d(e,"each",(function(){return It.a}));var Nt=n(97);n.d(e,"extend",(function(){return Nt.a}));var Rt=n(98);n.d(e,"indexOf",(function(){return Rt.a}));var Yt=n(99);n.d(e,"isEmpty",(function(){return Yt.a}));var jt=n(29);n.d(e,"isEqual",(function(){return jt.a}));var Ft=n(100);n.d(e,"isEqualWith",(function(){return Ft.a}));var Bt=n(101);n.d(e,"map",(function(){return Bt.a}));var zt=n(102);n.d(e,"mapValues",(function(){return zt.a}));var Ht=n(16);n.d(e,"mix",(function(){return Ht.a})),n.d(e,"assign",(function(){return Ht.a}));var Gt=n(103);n.d(e,"get",(function(){return Gt.a}));var Wt=n(104);n.d(e,"set",(function(){return Wt.a}));var Ut=n(105);n.d(e,"pick",(function(){return Ut.a}));var Vt=n(106);n.d(e,"throttle",(function(){return Vt.a}));var Xt=n(107);n.d(e,"toArray",(function(){return Xt.a}));var qt=n(10);n.d(e,"toString",(function(){return qt.a}));var Kt=n(108);n.d(e,"uniqueId",(function(){return Kt.a}));var $t=n(109);n.d(e,"noop",(function(){return $t.a}));var Zt=n(110);n.d(e,"identity",(function(){return Zt.a}));var Jt=n(111);n.d(e,"size",(function(){return Jt.a}));var Qt=n(112);n.d(e,"Cache",(function(){return Qt.a}))},function(t,e,n){"use strict";var i=n(14),r=n(12);e.a=function(t,e){return void 0===e&&(e=[]),Object(i.a)(t,(function(t){return!Object(r.a)(e,t)}))}},function(t,e,n){"use strict";var i=n(3),r=n(19),o=n(0),a=n(9);e.a=function(t,e){if(!Object(o.a)(t))return null;var n;if(Object(i.a)(e)&&(n=e),Object(a.a)(e)&&(n=function(t){return Object(r.a)(t,e)}),n)for(var s=0;s<t.length;s+=1)if(n(t[s]))return t[s];return null}},function(t,e,n){"use strict";e.a=function(t,e,n){void 0===n&&(n=0);for(var i=n;i<t.length;i++)if(e(t[i],i))return i;return-1}},function(t,e,n){"use strict";var i=n(6),r=n(0);e.a=function(t,e){for(var n=null,o=0;o<t.length;o++){var a=t[o][e];if(!Object(i.a)(a)){n=Object(r.a)(a)?a[0]:a;break}}return n}},function(t,e,n){"use strict";var i=n(0);e.a=function(t){if(!Object(i.a)(t))return[];for(var e=[],n=0;n<t.length;n++)e=e.concat(t[n]);return e}},function(t,e,n){"use strict";var i=n(0),r=function(t,e){if(void 0===e&&(e=[]),Object(i.a)(t))for(var n=0;n<t.length;n+=1)r(t[n],e);else e.push(t);return e};e.a=r},function(t,e,n){"use strict";var i=n(0),r=n(14);e.a=function(t){if(!(t=Object(r.a)(t,(function(t){return!isNaN(t)}))).length)return{min:0,max:0};if(Object(i.a)(t[0])){for(var e=[],n=0;n<t.length;n++)e=e.concat(t[n]);t=e}var o=Math.max.apply(null,t);return{min:Math.min.apply(null,t),max:o}}},function(t,e,n){"use strict";var i=Array.prototype,r=i.splice,o=i.indexOf;e.a=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var i=0;i<e.length;i++)for(var a=e[i],s=-1;(s=o.call(t,a))>-1;)r.call(t,s,1);return t}},function(t,e,n){"use strict";var i=n(2),r=n(0),o=n(9);e.a=function(t,e,n){if(!Object(r.a)(t)&&!Object(o.a)(t))return t;var a=n;return Object(i.a)(t,(function(t,n){a=e(a,t,n)})),a}},function(t,e,n){"use strict";var i=n(1),r=n(21);e.a=function(t,e){var n=[];if(!Object(i.a)(t))return n;for(var o=-1,a=[],s=t.length;++o<s;){var l=t[o];e(l,o,t)&&(n.push(l),a.push(o))}return Object(r.a)(t,a),n}},function(t,e,n){"use strict";var i=n(0),r=n(8),o=n(3);e.a=function(t,e){var n;if(Object(o.a)(e))n=function(t,n){return e(t)-e(n)};else{var a=[];Object(r.a)(e)?a.push(e):Object(i.a)(e)&&(a=e),n=function(t,e){for(var n=0;n<a.length;n+=1){var i=a[n];if(t[i]>e[i])return 1;if(t[i]<e[i])return-1}return 0}}return t.sort(n),t}},function(t,e,n){"use strict";var i=n(22);e.a=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(i.a)([].concat.apply([],t))}},function(t,e,n){"use strict";var i=n(2),r=n(0),o=n(6);e.a=function(t,e){var n=[],a={};return t.forEach((function(t){var s=t[e];Object(o.a)(s)||(Object(r.a)(s)||(s=[s]),Object(i.a)(s,(function(t){a[t]||(n.push(t),a[t]=!0)})))})),n}},function(t,e,n){"use strict";e.a=function(t){if(Object(i.a)(t))return t[0]};var i=n(1)},function(t,e,n){"use strict";e.a=function(t){if(Object(i.a)(t))return t[t.length-1]};var i=n(1)},function(t,e,n){"use strict";var i=n(0),r=n(8);e.a=function(t,e){return!(!Object(i.a)(t)&&!Object(r.a)(t))&&t[0]===e}},function(t,e,n){"use strict";var i=n(0),r=n(8);e.a=function(t,e){return!(!Object(i.a)(t)&&!Object(r.a)(t))&&t[t.length-1]===e}},function(t,e,n){"use strict";e.a=function(t,e){for(var n=0;n<t.length;n++)if(!e(t[n],n))return!1;return!0}},function(t,e,n){"use strict";e.a=function(t,e){for(var n=0;n<t.length;n++)if(e(t[n],n))return!0;return!1}},function(t,e,n){"use strict";var i=n(23);e.a=function(t,e){if(!e)return[t];var n=Object(i.a)(t,e),r=[];for(var o in n)r.push(n[o]);return r}},function(t,e,n){"use strict";e.a=function(t,e){return t["_wrap_"+e]}},function(t,e,n){"use strict";e.a=function(t,e){if(t["_wrap_"+e])return t["_wrap_"+e];var n=function(n){t[e](n)};return t["_wrap_"+e]=n,n}},function(t,e,n){"use strict";var i={};e.a=function(t){var e=i[t];if(!e){for(var n=t.toString(16),r=n.length;r<6;r++)n="0"+n;e="#"+n,i[t]=e}return e}},function(t,e,n){"use strict";var i=n(0);e.a=function(t){var e=0,n=0,r=0,o=0;return Object(i.a)(t)?1===t.length?e=n=r=o=t[0]:2===t.length?(e=r=t[0],n=o=t[1]):3===t.length?(e=t[0],n=o=t[1],r=t[2]):(e=t[0],n=t[1],r=t[2],o=t[3]):e=n=r=o=t,{r1:e,r2:n,r3:r,r4:o}}},function(t,e,n){"use strict";e.a=function(t,e,n){return t<e?e:t>n?n:t}},function(t,e,n){"use strict";e.a=function(t,e){var n=e.toString(),i=n.indexOf(".");if(-1===i)return Math.round(t);var r=n.substr(i+1).length;return r>20&&(r=20),parseFloat(t.toFixed(r))}},function(t,e,n){"use strict";var i=n(5);e.a=function(t){return Object(i.a)(t)&&t%1!=0}},function(t,e,n){"use strict";var i=n(5);e.a=function(t){return Object(i.a)(t)&&t%2==0}},function(t,e,n){"use strict";var i=n(5),r=Number.isInteger?Number.isInteger:function(t){return Object(i.a)(t)&&t%1==0};e.a=r},function(t,e,n){"use strict";var i=n(5);e.a=function(t){return Object(i.a)(t)&&t<0}},function(t,e,n){"use strict";e.a=function(t,e,n){return void 0===n&&(n=1e-5),Math.abs(t-e)<n}},function(t,e,n){"use strict";var i=n(5);e.a=function(t){return Object(i.a)(t)&&t%2!=0}},function(t,e,n){"use strict";var i=n(5);e.a=function(t){return Object(i.a)(t)&&t>0}},function(t,e,n){"use strict";var i=n(2),r=n(0),o=n(3);e.a=function(t,e){if(Object(r.a)(t)){var n,a,s=t[0];return n=Object(o.a)(e)?e(t[0]):t[0][e],Object(i.a)(t,(function(t){(a=Object(o.a)(e)?e(t):t[e])>n&&(s=t,n=a)})),s}}},function(t,e,n){"use strict";var i=n(2),r=n(0),o=n(3);e.a=function(t,e){if(Object(r.a)(t)){var n,a,s=t[0];return n=Object(o.a)(e)?e(t[0]):t[0][e],Object(i.a)(t,(function(t){(a=Object(o.a)(e)?e(t):t[e])<n&&(s=t,n=a)})),s}}},function(t,e,n){"use strict";e.a=function(t,e){return(t%e+e)%e}},function(t,e,n){"use strict";var i=180/Math.PI;e.a=function(t){return i*t}},function(t,e,n){"use strict";e.a=parseInt},function(t,e,n){"use strict";var i=Math.PI/180;e.a=function(t){return i*t}},function(t,e,n){"use strict";var i=n(2);e.a=i.a},function(t,e,n){"use strict";var i=n(25);e.a=i.a},function(t,e,n){"use strict";var i=n(12),r=n(26);e.a=function(t,e){return Object(i.a)(Object(r.a)(t),e)}},function(t,e,n){"use strict";var i=n(10);e.a=function(t){return Object(i.a)(t).toLowerCase()}},function(t,e,n){"use strict";var i=n(10);e.a=function(t){var e=Object(i.a)(t);return e.charAt(0).toLowerCase()+e.substring(1)}},function(t,e,n){"use strict";e.a=function(t,e){return t&&e?t.replace(/\\?\{([^{}]+)\}/g,(function(t,n){return"\\"===t.charAt(0)?t.slice(1):void 0===e[n]?"":e[n]})):t}},function(t,e,n){"use strict";var i=n(10);e.a=function(t){return Object(i.a)(t).toUpperCase()}},function(t,e,n){"use strict";var i=n(10);e.a=function(t){var e=Object(i.a)(t);return e.charAt(0).toUpperCase()+e.substring(1)}},function(t,e,n){"use strict";var i=n(4);e.a=function(t){return Object(i.a)(t,"Arguments")}},function(t,e,n){"use strict";var i=n(4);e.a=function(t){return Object(i.a)(t,"Boolean")}},function(t,e,n){"use strict";var i=n(4);e.a=function(t){return Object(i.a)(t,"Date")}},function(t,e,n){"use strict";var i=n(4);e.a=function(t){return Object(i.a)(t,"Error")}},function(t,e,n){"use strict";var i=n(5);e.a=function(t){return Object(i.a)(t)&&isFinite(t)}},function(t,e,n){"use strict";e.a=function(t){return null===t}},function(t,e,n){"use strict";var i=n(4);e.a=function(t){return Object(i.a)(t,"RegExp")}},function(t,e,n){"use strict";e.a=function(t){return void 0===t}},function(t,e,n){"use strict";e.a=function(t){return t instanceof Element||t instanceof HTMLDocument}},function(t,e,n){"use strict";e.a=function(t){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return setTimeout(t,16)})(t)}},function(t,e,n){"use strict";e.a=function(t){(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout)(t)}},function(t,e,n){"use strict";var i=n(16),r=n(3);e.a=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t[0],o=1;o<t.length;o++){var a=t[o];Object(r.a)(a)&&(a=a.prototype),Object(i.a)(n.prototype,a)}}},function(t,e,n){"use strict";var i=n(0),r=function(t){if("object"!=typeof t||null===t)return t;var e;if(Object(i.a)(t)){e=[];for(var n=0,o=t.length;n<o;n++)"object"==typeof t[n]&&null!=t[n]?e[n]=r(t[n]):e[n]=t[n]}else for(var a in e={},t)"object"==typeof t[a]&&null!=t[a]?e[a]=r(t[a]):e[a]=t[a];return e};e.a=r},function(t,e,n){"use strict";e.a=function(t,e,n){var i;return function(){var r=this,o=arguments,a=function(){i=null,n||t.apply(r,o)},s=n&&!i;clearTimeout(i),i=setTimeout(a,e),s&&t.apply(r,o)}}},function(t,e,n){"use strict";var i=n(3);e.a=function(t,e){if(!Object(i.a)(t))throw new TypeError("Expected a function");var n=function(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];var o=e?e.apply(this,i):i[0],a=n.cache;if(a.has(o))return a.get(o);var s=t.apply(this,i);return a.set(o,s),s};return n.cache=new Map,n}},function(t,e,n){"use strict";var i=n(0),r=n(9);function o(t,e,n,a){for(var s in n=n||0,a=a||5,e)if(e.hasOwnProperty(s)){var l=e[s];null!==l&&Object(r.a)(l)?(Object(r.a)(t[s])||(t[s]={}),n<a?o(t[s],l,n+1,a):t[s]=e[s]):Object(i.a)(l)?(t[s]=[],t[s]=t[s].concat(l)):void 0!==l&&(t[s]=l)}}e.a=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var i=0;i<e.length;i+=1)o(t,e[i]);return t}},function(t,e,n){"use strict";var i=n(16),r=n(3);e.a=function(t,e,n,o){Object(r.a)(e)||(n=e,e=t,t=function(){});var a=Object.create?function(t,e){return Object.create(t,{constructor:{value:e}})}:function(t,e){function n(){}n.prototype=t;var i=new n;return i.constructor=e,i},s=a(e.prototype,t);return t.prototype=Object(i.a)(s,t.prototype),t.superclass=a(e.prototype,e),Object(i.a)(s,n),Object(i.a)(t,o),t}},function(t,e,n){"use strict";var i=n(1);e.a=function(t,e){if(!Object(i.a)(t))return-1;var n=Array.prototype.indexOf;if(n)return n.call(t,e);for(var r=-1,o=0;o<t.length;o++)if(t[o]===e){r=o;break}return r}},function(t,e,n){"use strict";var i=n(6),r=n(1),o=n(27),a=n(28),s=Object.prototype.hasOwnProperty;e.a=function(t){if(Object(i.a)(t))return!0;if(Object(r.a)(t))return!t.length;var e=Object(o.a)(t);if("Map"===e||"Set"===e)return!t.size;if(Object(a.a)(t))return!Object.keys(t).length;for(var n in t)if(s.call(t,n))return!1;return!0}},function(t,e,n){"use strict";var i=n(3),r=n(29);e.a=function(t,e,n){return Object(i.a)(n)?!!n(t,e):Object(r.a)(t,e)}},function(t,e,n){"use strict";var i=n(2),r=n(1);e.a=function(t,e){if(!Object(r.a)(t))return t;var n=[];return Object(i.a)(t,(function(t,i){n.push(e(t,i))})),n}},function(t,e,n){"use strict";var i=n(6),r=n(13),o=function(t){return t};e.a=function(t,e){void 0===e&&(e=o);var n={};return Object(r.a)(t)&&!Object(i.a)(t)&&Object.keys(t).forEach((function(i){n[i]=e(t[i],i)})),n}},function(t,e,n){"use strict";var i=n(8);e.a=function(t,e,n){for(var r=0,o=Object(i.a)(e)?e.split("."):e;t&&r<o.length;)t=t[o[r++]];return void 0===t||r<o.length?n:t}},function(t,e,n){"use strict";var i=n(13),r=n(8),o=n(5);e.a=function(t,e,n){var a=t,s=Object(r.a)(e)?e.split("."):e;return s.forEach((function(t,e){e<s.length-1?(Object(i.a)(a[t])||(a[t]=Object(o.a)(s[e+1])?[]:{}),a=a[t]):a[t]=n})),t}},function(t,e,n){"use strict";var i=n(2),r=n(9),o=Object.prototype.hasOwnProperty;e.a=function(t,e){if(null===t||!Object(r.a)(t))return{};var n={};return Object(i.a)(e,(function(e){o.call(t,e)&&(n[e]=t[e])})),n}},function(t,e,n){"use strict";e.a=function(t,e,n){var i,r,o,a,s=0;n||(n={});var l=function(){s=!1===n.leading?0:Date.now(),i=null,a=t.apply(r,o),i||(r=o=null)},u=function(){var u=Date.now();s||!1!==n.leading||(s=u);var c=e-(u-s);return r=this,o=arguments,c<=0||c>e?(i&&(clearTimeout(i),i=null),s=u,a=t.apply(r,o),i||(r=o=null)):i||!1===n.trailing||(i=setTimeout(l,c)),a};return u.cancel=function(){clearTimeout(i),s=0,i=r=o=null},u}},function(t,e,n){"use strict";var i=n(1);e.a=function(t){return Object(i.a)(t)?Array.prototype.slice.call(t):[]}},function(t,e,n){"use strict";var i={};e.a=function(t){return i[t=t||"g"]?i[t]+=1:i[t]=1,t+i[t]}},function(t,e,n){"use strict";e.a=function(){}},function(t,e,n){"use strict";e.a=function(t){return t}},function(t,e,n){"use strict";e.a=function(t){return Object(i.a)(t)?0:Object(r.a)(t)?t.length:Object.keys(t).length};var i=n(6),r=n(1)},function(t,e,n){"use strict";var i=function(){function t(){this.map={}}return t.prototype.has=function(t){return void 0!==this.map[t]},t.prototype.get=function(t,e){var n=this.map[t];return void 0===n?e:n},t.prototype.set=function(t,e){this.map[t]=e},t.prototype.clear=function(){this.map={}},t.prototype.delete=function(t){delete this.map[t]},t.prototype.size=function(){return Object.keys(this.map).length},t}();e.a=i},function(t,e){function n(t,e,n,i){void 0===i&&(i=[]);var r=this;r.w=t||0,r.h=e||0,r.y=n||0,r.x=0,r.c=i||[],r.cs=i.length,r.prelim=0,r.mod=0,r.shift=0,r.change=0,r.tl=null,r.tr=null,r.el=null,r.er=null,r.msel=0,r.mser=0}function i(t,e,n){n?t.y+=e:t.x+=e,t.children.forEach((function(t){i(t,e,n)}))}function r(t,e){var n=e?t.y:t.x;return t.children.forEach((function(t){n=Math.min(r(t,e),n)})),n}function o(t,e){i(t,-r(t,e),e)}function a(t,e,n){n?e.y=t.x:e.x=t.x,t.c.forEach((function(t,i){a(t,e.children[i],n)}))}function s(t,e,n){void 0===n&&(n=0),e?(t.x=n,n+=t.width):(t.y=n,n+=t.height),t.children.forEach((function(t){s(t,e,n)}))}n.fromNode=function(t,e){if(!t)return null;var i=[];return t.children.forEach((function(t){i.push(n.fromNode(t,e))})),e?new n(t.height,t.width,t.x,i):new n(t.width,t.height,t.y,i)},t.exports=function(t,e){void 0===e&&(e={});var i=e.isHorizontal;function r(t){0===t.cs?(t.el=t,t.er=t,t.msel=t.mser=0):(t.el=t.c[0].el,t.msel=t.c[0].msel,t.er=t.c[t.cs-1].er,t.mser=t.c[t.cs-1].mser)}function l(t,e,n){for(var i=t.c[e-1],r=i.mod,o=t.c[e],a=o.mod;null!==i&&null!==o;){d(i)>n.low&&(n=n.nxt);var s=r+i.prelim+i.w-(a+o.prelim);s>0&&(a+=s,u(t,e,n.index,s));var l=d(i),f=d(o);l<=f&&null!==(i=h(i))&&(r+=i.mod),l>=f&&null!==(o=c(o))&&(a+=o.mod)}!i&&o?function(t,e,n,i){var r=t.c[0].el;r.tl=n;var o=i-n.mod-t.c[0].msel;r.mod+=o,r.prelim-=o,t.c[0].el=t.c[e].el,t.c[0].msel=t.c[e].msel}(t,e,o,a):i&&!o&&function(t,e,n,i){var r=t.c[e].er;r.tr=n;var o=i-n.mod-t.c[e].mser;r.mod+=o,r.prelim-=o,t.c[e].er=t.c[e-1].er,t.c[e].mser=t.c[e-1].mser}(t,e,i,r)}function u(t,e,n,i){t.c[e].mod+=i,t.c[e].msel+=i,t.c[e].mser+=i,function(t,e,n,i){if(n!==e-1){var r=e-n;t.c[n+1].shift+=i/r,t.c[e].shift-=i/r,t.c[e].change-=i-i/r}}(t,e,n,i)}function c(t){return 0===t.cs?t.tl:t.c[0]}function h(t){return 0===t.cs?t.tr:t.c[t.cs-1]}function d(t){return t.y+t.h}function f(t,e,n){for(;null!==n&&t>=n.low;)n=n.nxt;return{low:t,index:e,nxt:n}}s(t,i);var p=n.fromNode(t,i);return function t(e){if(0!==e.cs){t(e.c[0]);for(var n=f(d(e.c[0].el),0,null),i=1;i<e.cs;++i){t(e.c[i]);var o=d(e.c[i].er);l(e,i,n),n=f(o,i,n)}!function(t){t.prelim=(t.c[0].prelim+t.c[0].mod+t.c[t.cs-1].mod+t.c[t.cs-1].prelim+t.c[t.cs-1].w)/2-t.w/2}(e),r(e)}else r(e)}(p),function t(e,n){n+=e.mod,e.x=e.prelim+n,function(t){for(var e=0,n=0,i=0;i<t.cs;i++)n+=(e+=t.c[i].shift)+t.c[i].change,t.c[i].mod+=n}(e);for(var i=0;i<e.cs;i++)t(e.c[i],n)}(p,0),a(p,t,i),o(t,i),t}},function(t,e,n){var i=n(11),r=n(115),o=n(17),a=n(7),s=function(t){var e,n;function i(){return t.apply(this,arguments)||this}return n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n,i.prototype.execute=function(){var t=this;return t.rootNode.width=0,o(t.rootNode,t.options,r)},i}(i),l={};t.exports=function(t,e){return e=a.assign({},l,e),new s(t,e).execute()}},function(t,e,n){var i=n(7);function r(t,e){void 0===t&&(t=0),void 0===e&&(e=[]);var n=this;n.x=n.y=0,n.leftChild=n.rightChild=null,n.height=0,n.children=e}var o={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};function a(t,e,n){n?(e.x=t.x,e.y=t.y):(e.x=t.y,e.y=t.x),t.children.forEach((function(t,i){a(t,e.children[i],n)}))}t.exports=function(t,e){void 0===e&&(e={}),e=i.assign({},o,e);var n,s=0,l=function t(e){if(!e)return null;e.width=0,e.depth&&e.depth>s&&(s=e.depth);var n=e.children,i=n.length,o=new r(e.height,[]);return n.forEach((function(e,n){var r=t(e);o.children.push(r),0===n&&(o.leftChild=r),n===i-1&&(o.rightChild=r)})),o.originNode=e,o.isLeaf=e.isLeaf(),o}(t);return function t(e){if(e.isLeaf||0===e.children.length)e.drawingDepth=s;else{var n=e.children.map((function(e){return t(e)})),i=Math.min.apply(null,n);e.drawingDepth=i-1}return e.drawingDepth}(l),function t(i){i.x=i.drawingDepth*e.rankSep,i.isLeaf?(i.y=0,n&&(i.y=n.y+n.height+e.nodeSep,i.originNode.parent!==n.originNode.parent&&(i.y+=e.subTreeSep)),n=i):(i.children.forEach((function(e){t(e)})),i.y=(i.leftChild.y+i.rightChild.y)/2)}(l),a(l,t,e.isHorizontal),t}},function(t,e,n){var i=n(11),r=n(117),o=n(30),a=n(7),s=["LR","RL","H"],l=s[0],u=function(t){var e,n;function i(){return t.apply(this,arguments)||this}return n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n,i.prototype.execute=function(){var t=this.options,e=this.rootNode;t.isHorizontal=!0;var n=t.indent,i=void 0===n?20:n,a=t.dropCap,u=void 0===a||a,c=t.direction||l;if(c&&-1===s.indexOf(c))throw new TypeError("Invalid direction: "+c);if(c===s[0])r(e,i,u);else if(c===s[1])r(e,i,u),e.right2left();else if(c===s[2]){var h=o(e,t),d=h.left,f=h.right;r(d,i,u),d.right2left(),r(f,i,u);var p=d.getBoundingBox();f.translate(p.width,0),e.x=f.x-e.width/2}return e},i}(i),c={};t.exports=function(t,e){return e=a.assign({},c,e),new u(t,e).execute()}},function(t,e){t.exports=function(t,e,n){var i=null;t.eachNode((function(t){!function(t,e,n,i){var r="function"==typeof n?n(t):n*t.depth;if(!i)try{if(t.id===t.parent.children[0].id)return t.x+=r,void(t.y=e?e.y:0)}catch(t){}t.x+=r,t.y=e?e.y+e.height:0}(t,i,e,n),i=t}))}},function(t,e,n){var i=n(11),r=n(119),o=n(17),a=n(7),s=function(t){var e,n;function i(){return t.apply(this,arguments)||this}return n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n,i.prototype.execute=function(){return o(this.rootNode,this.options,r)},i}(i),l={};t.exports=function(t,e){return e=a.assign({},l,e),new s(t,e).execute()}},function(t,e,n){var i=n(7);function r(t,e){var n=0;return t.children.length?t.children.forEach((function(t){n+=r(t,e)})):n=t.height,t._subTreeSep=e.getSubTreeSep(t.data),t.totalHeight=Math.max(t.height,n)+2*t._subTreeSep,t.totalHeight}function o(t){var e=t.children,n=e.length;if(n){e.forEach((function(t){o(t)}));var i=e[0],r=e[n-1],a=r.y-i.y+r.height,s=0;if(e.forEach((function(t){s+=t.totalHeight})),a>t.height)t.y=i.y+a/2-t.height/2;else if(1!==e.length||t.height>s){var l=t.y+(t.height-a)/2-i.y;e.forEach((function(t){t.translate(0,l)}))}else t.y=(i.y+i.height/2+r.y+r.height/2)/2-t.height/2}}var a={getSubTreeSep:function(){return 0}};t.exports=function(t,e){void 0===e&&(e={}),e=i.assign({},a,e),t.parent={x:0,width:0,height:0,y:0},t.BFTraverse((function(t){t.x=t.parent.x+t.parent.width})),t.parent=null,r(t,e),t.startY=0,t.y=t.totalHeight/2-t.height/2,t.eachNode((function(t){var e=t.children,n=e.length;if(n){var i=e[0];if(i.startY=t.startY+t._subTreeSep,1===n)i.y=t.y+t.height/2-i.height/2;else{i.y=i.startY+i.totalHeight/2-i.height/2;for(var r=1;r<n;r++){var o=e[r];o.startY=e[r-1].startY+e[r-1].totalHeight,o.y=o.startY+o.totalHeight/2-o.height/2}}}})),o(t)}}])},t.exports=e()},49242:(t,e,n)=>{"use strict";n.r(e),n.d(e,{Cache:()=>ke,assign:()=>Vt,augment:()=>Xt,clamp:()=>et,clearAnimationFrame:()=>Wt,clone:()=>Kt,contains:()=>r,debounce:()=>$t,deepMix:()=>Qt,difference:()=>a,each:()=>f,endsWith:()=>G,every:()=>W,extend:()=>te,filter:()=>o,find:()=>y,findIndex:()=>b,firstValue:()=>_,fixedBase:()=>nt,flatten:()=>w,flattenDeep:()=>M,forIn:()=>bt,get:()=>ce,getEllipsisText:()=>Se,getRange:()=>k,getType:()=>At,getWrapBehavior:()=>$,group:()=>K,groupBy:()=>X,groupToMap:()=>q,has:()=>_t,hasKey:()=>wt,hasValue:()=>Mt,head:()=>B,identity:()=>_e,includes:()=>r,indexOf:()=>ee,isArguments:()=>Ot,isArray:()=>h,isArrayLike:()=>i,isBoolean:()=>Pt,isDate:()=>It,isDecimal:()=>rt,isElement:()=>Ht,isEmpty:()=>ie,isEqual:()=>oe,isEqualWith:()=>ae,isError:()=>Nt,isEven:()=>ot,isFinite:()=>Rt,isFunction:()=>u,isInteger:()=>at,isMatch:()=>m,isNegative:()=>st,isNil:()=>c,isNull:()=>Yt,isNumber:()=>it,isNumberEqual:()=>lt,isObject:()=>d,isObjectLike:()=>g,isOdd:()=>ut,isPlainObject:()=>v,isPositive:()=>ct,isPrototype:()=>Ft,isRegExp:()=>Bt,isString:()=>N,isType:()=>l,isUndefined:()=>zt,keys:()=>p,last:()=>z,lowerCase:()=>St,lowerFirst:()=>kt,map:()=>se,mapValues:()=>ue,max:()=>E,maxBy:()=>ht,measureTextWidth:()=>Ee,memoize:()=>Zt,min:()=>S,minBy:()=>dt,mix:()=>Vt,mod:()=>ft,noop:()=>be,number2color:()=>Q,omit:()=>pe,parseRadius:()=>tt,pick:()=>fe,pull:()=>L,pullAt:()=>O,reduce:()=>P,remove:()=>I,requestAnimationFrame:()=>Gt,set:()=>he,size:()=>we,some:()=>U,sortBy:()=>R,startsWith:()=>H,substitute:()=>Ct,throttle:()=>me,toArray:()=>ge,toDegree:()=>mt,toInteger:()=>gt,toRadian:()=>yt,toString:()=>Et,union:()=>j,uniq:()=>Y,uniqueId:()=>ye,upperCase:()=>Tt,upperFirst:()=>Dt,values:()=>xt,valuesOfKey:()=>F,wrapBehavior:()=>Z});const i=function(t){return null!==t&&"function"!=typeof t&&isFinite(t.length)};const r=function(t,e){return!!i(t)&&t.indexOf(e)>-1};const o=function(t,e){if(!i(t))return t;for(var n=[],r=0;r<t.length;r++){var o=t[r];e(o,r)&&n.push(o)}return n};const a=function(t,e){return void 0===e&&(e=[]),o(t,(function(t){return!r(e,t)}))};var s={}.toString;const l=function(t,e){return s.call(t)==="[object "+e+"]"},u=function(t){return l(t,"Function")};const c=function(t){return null==t},h=function(t){return Array.isArray?Array.isArray(t):l(t,"Array")},d=function(t){var e=typeof t;return null!==t&&"object"===e||"function"===e};const f=function(t,e){if(t)if(h(t))for(var n=0,i=t.length;n<i&&!1!==e(t[n],n);n++);else if(d(t))for(var r in t)if(t.hasOwnProperty(r)&&!1===e(t[r],r))break};const p=Object.keys?function(t){return Object.keys(t)}:function(t){var e=[];return f(t,(function(n,i){u(t)&&"prototype"===i||e.push(i)})),e};const m=function(t,e){var n=p(e),i=n.length;if(c(t))return!i;for(var r=0;r<i;r+=1){var o=n[r];if(e[o]!==t[o]||!(o in t))return!1}return!0};const g=function(t){return"object"==typeof t&&null!==t};const v=function(t){if(!g(t)||!l(t,"Object"))return!1;if(null===Object.getPrototypeOf(t))return!0;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e};const y=function(t,e){if(!h(t))return null;var n;if(u(e)&&(n=e),v(e)&&(n=function(t){return m(t,e)}),n)for(var i=0;i<t.length;i+=1)if(n(t[i]))return t[i];return null};const b=function(t,e,n){void 0===n&&(n=0);for(var i=n;i<t.length;i++)if(e(t[i],i))return i;return-1};const _=function(t,e){for(var n=null,i=0;i<t.length;i++){var r=t[i][e];if(!c(r)){n=h(r)?r[0]:r;break}}return n};const w=function(t){if(!h(t))return[];for(var e=[],n=0;n<t.length;n++)e=e.concat(t[n]);return e};var x=function(t,e){if(void 0===e&&(e=[]),h(t))for(var n=0;n<t.length;n+=1)x(t[n],e);else e.push(t);return e};const M=x,E=function(t){if(h(t))return t.reduce((function(t,e){return Math.max(t,e)}),t[0])},S=function(t){if(h(t))return t.reduce((function(t,e){return Math.min(t,e)}),t[0])};const k=function(t){var e=t.filter((function(t){return!isNaN(t)}));if(!e.length)return{min:0,max:0};if(h(t[0])){for(var n=[],i=0;i<t.length;i++)n=n.concat(t[i]);e=n}var r=E(e);return{min:S(e),max:r}};var C=Array.prototype,T=C.splice,D=C.indexOf;const L=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var i=0;i<e.length;i++)for(var r=e[i],o=-1;(o=D.call(t,r))>-1;)T.call(t,o,1);return t};var A=Array.prototype.splice;const O=function(t,e){if(!i(t))return[];for(var n=t?e.length:0,r=n-1;n--;){var o=void 0,a=e[n];n!==r&&a===o||(o=a,A.call(t,a,1))}return t};const P=function(t,e,n){if(!h(t)&&!v(t))return t;var i=n;return f(t,(function(t,n){i=e(i,t,n)})),i};const I=function(t,e){var n=[];if(!i(t))return n;for(var r=-1,o=[],a=t.length;++r<a;){var s=t[r];e(s,r,t)&&(n.push(s),o.push(r))}return O(t,o),n},N=function(t){return l(t,"String")};const R=function(t,e){var n;if(u(e))n=function(t,n){return e(t)-e(n)};else{var i=[];N(e)?i.push(e):h(e)&&(i=e),n=function(t,e){for(var n=0;n<i.length;n+=1){var r=i[n];if(t[r]>e[r])return 1;if(t[r]<e[r])return-1}return 0}}return t.sort(n),t};function Y(t,e){void 0===e&&(e=new Map);var n=[];if(Array.isArray(t))for(var i=0,r=t.length;i<r;i++){var o=t[i];e.has(o)||(n.push(o),e.set(o,!0))}return n}const j=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Y([].concat.apply([],t))},F=function(t,e){for(var n=[],i={},r=0;r<t.length;r++){var o=t[r][e];if(!c(o)){h(o)||(o=[o]);for(var a=0;a<o.length;a++){var s=o[a];i[s]||(n.push(s),i[s]=!0)}}}return n};function B(t){if(i(t))return t[0]}function z(t){if(i(t)){return t[t.length-1]}}const H=function(t,e){return!(!h(t)&&!N(t))&&t[0]===e};const G=function(t,e){return!(!h(t)&&!N(t))&&t[t.length-1]===e};const W=function(t,e){for(var n=0;n<t.length;n++)if(!e(t[n],n))return!1;return!0};const U=function(t,e){for(var n=0;n<t.length;n++)if(e(t[n],n))return!0;return!1};var V=Object.prototype.hasOwnProperty;const X=function(t,e){if(!e||!h(t))return{};for(var n,i={},r=u(e)?e:function(t){return t[e]},o=0;o<t.length;o++){var a=t[o];n=r(a),V.call(i,n)?i[n].push(a):i[n]=[a]}return i};function q(t,e){if(!e)return{0:t};if(!u(e)){var n=h(e)?e:e.replace(/\s+/g,"").split("*");e=function(t){for(var e="_",i=0,r=n.length;i<r;i++)e+=t[n[i]]&&t[n[i]].toString();return e}}return X(t,e)}const K=function(t,e){if(!e)return[t];var n=q(t,e),i=[];for(var r in n)i.push(n[r]);return i};const $=function(t,e){return t["_wrap_"+e]};const Z=function(t,e){if(t["_wrap_"+e])return t["_wrap_"+e];var n=function(n){t[e](n)};return t["_wrap_"+e]=n,n};var J={};const Q=function(t){var e=J[t];if(!e){for(var n=t.toString(16),i=n.length;i<6;i++)n="0"+n;e="#"+n,J[t]=e}return e};const tt=function(t){var e=0,n=0,i=0,r=0;return h(t)?1===t.length?e=n=i=r=t[0]:2===t.length?(e=i=t[0],n=r=t[1]):3===t.length?(e=t[0],n=r=t[1],i=t[2]):(e=t[0],n=t[1],i=t[2],r=t[3]):e=n=i=r=t,{r1:e,r2:n,r3:i,r4:r}};const et=function(t,e,n){return t<e?e:t>n?n:t};const nt=function(t,e){var n=e.toString(),i=n.indexOf(".");if(-1===i)return Math.round(t);var r=n.substr(i+1).length;return r>20&&(r=20),parseFloat(t.toFixed(r))};const it=function(t){return l(t,"Number")};const rt=function(t){return it(t)&&t%1!=0};const ot=function(t){return it(t)&&t%2==0};const at=Number.isInteger?Number.isInteger:function(t){return it(t)&&t%1==0};const st=function(t){return it(t)&&t<0};function lt(t,e,n){return void 0===n&&(n=1e-5),Math.abs(t-e)<n}const ut=function(t){return it(t)&&t%2!=0};const ct=function(t){return it(t)&&t>0},ht=function(t,e){if(h(t)){for(var n,i=-1/0,r=0;r<t.length;r++){var o=t[r],a=u(e)?e(o):o[e];a>i&&(n=o,i=a)}return n}},dt=function(t,e){if(h(t)){for(var n,i=1/0,r=0;r<t.length;r++){var o=t[r],a=u(e)?e(o):o[e];a<i&&(n=o,i=a)}return n}};const ft=function(t,e){return(t%e+e)%e};var pt=180/Math.PI;const mt=function(t){return pt*t},gt=parseInt;var vt=Math.PI/180;const yt=function(t){return vt*t},bt=f,_t=function(t,e){return t.hasOwnProperty(e)},wt=_t;const xt=Object.values?function(t){return Object.values(t)}:function(t){var e=[];return f(t,(function(n,i){u(t)&&"prototype"===i||e.push(n)})),e},Mt=function(t,e){return r(xt(t),e)},Et=function(t){return c(t)?"":t.toString()};const St=function(t){return Et(t).toLowerCase()};const kt=function(t){var e=Et(t);return e.charAt(0).toLowerCase()+e.substring(1)};const Ct=function(t,e){return t&&e?t.replace(/\\?\{([^{}]+)\}/g,(function(t,n){return"\\"===t.charAt(0)?t.slice(1):void 0===e[n]?"":e[n]})):t};const Tt=function(t){return Et(t).toUpperCase()};const Dt=function(t){var e=Et(t);return e.charAt(0).toUpperCase()+e.substring(1)};var Lt={}.toString;const At=function(t){return Lt.call(t).replace(/^\[object /,"").replace(/]$/,"")};const Ot=function(t){return l(t,"Arguments")};const Pt=function(t){return l(t,"Boolean")};const It=function(t){return l(t,"Date")};const Nt=function(t){return l(t,"Error")};function Rt(t){return it(t)&&isFinite(t)}const Yt=function(t){return null===t};var jt=Object.prototype;const Ft=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||jt)};const Bt=function(t){return l(t,"RegExp")};const zt=function(t){return void 0===t};const Ht=function(t){return t instanceof Element||t instanceof HTMLDocument};function Gt(t){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return setTimeout(t,16)})(t)}function Wt(t){(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout)(t)}function Ut(t,e){for(var n in e)e.hasOwnProperty(n)&&"constructor"!==n&&void 0!==e[n]&&(t[n]=e[n])}function Vt(t,e,n,i){return e&&Ut(t,e),n&&Ut(t,n),i&&Ut(t,i),t}const Xt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t[0],i=1;i<t.length;i++){var r=t[i];u(r)&&(r=r.prototype),Vt(n.prototype,r)}};var qt=function(t){if("object"!=typeof t||null===t)return t;var e;if(h(t)){e=[];for(var n=0,i=t.length;n<i;n++)"object"==typeof t[n]&&null!=t[n]?e[n]=qt(t[n]):e[n]=t[n]}else for(var r in e={},t)"object"==typeof t[r]&&null!=t[r]?e[r]=qt(t[r]):e[r]=t[r];return e};const Kt=qt;const $t=function(t,e,n){var i;return function(){var r=this,o=arguments,a=function(){i=null,n||t.apply(r,o)},s=n&&!i;clearTimeout(i),i=setTimeout(a,e),s&&t.apply(r,o)}},Zt=function(t,e){if(!u(t))throw new TypeError("Expected a function");var n=function(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];var o=e?e.apply(this,i):i[0],a=n.cache;if(a.has(o))return a.get(o);var s=t.apply(this,i);return a.set(o,s),s};return n.cache=new Map,n};function Jt(t,e,n,i){for(var r in n=n||0,i=i||5,e)if(e.hasOwnProperty(r)){var o=e[r];null!==o&&v(o)?(v(t[r])||(t[r]={}),n<i?Jt(t[r],o,n+1,i):t[r]=e[r]):h(o)?(t[r]=[],t[r]=t[r].concat(o)):void 0!==o&&(t[r]=o)}}const Qt=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var i=0;i<e.length;i+=1)Jt(t,e[i]);return t};const te=function(t,e,n,i){u(e)||(n=e,e=t,t=function(){});var r=Object.create?function(t,e){return Object.create(t,{constructor:{value:e}})}:function(t,e){function n(){}n.prototype=t;var i=new n;return i.constructor=e,i},o=r(e.prototype,t);return t.prototype=Vt(o,t.prototype),t.superclass=r(e.prototype,e),Vt(o,n),Vt(t,i),t};const ee=function(t,e){if(!i(t))return-1;var n=Array.prototype.indexOf;if(n)return n.call(t,e);for(var r=-1,o=0;o<t.length;o++)if(t[o]===e){r=o;break}return r};var ne=Object.prototype.hasOwnProperty;const ie=function(t){if(c(t))return!0;if(i(t))return!t.length;var e=At(t);if("Map"===e||"Set"===e)return!t.size;if(Ft(t))return!Object.keys(t).length;for(var n in t)if(ne.call(t,n))return!1;return!0};var re=function(t,e){if(t===e)return!0;if(!t||!e)return!1;if(N(t)||N(e))return!1;if(i(t)||i(e)){if(t.length!==e.length)return!1;for(var n=!0,r=0;r<t.length&&(n=re(t[r],e[r]));r++);return n}if(g(t)||g(e)){var o=Object.keys(t),a=Object.keys(e);if(o.length!==a.length)return!1;for(n=!0,r=0;r<o.length&&(n=re(t[o[r]],e[o[r]]));r++);return n}return!1};const oe=re,ae=function(t,e,n){return u(n)?!!n(t,e):oe(t,e)};const se=function(t,e){if(!i(t))return t;for(var n=[],r=0;r<t.length;r++){var o=t[r];n.push(e(o,r))}return n};var le=function(t){return t};const ue=function(t,e){void 0===e&&(e=le);var n={};return d(t)&&!c(t)&&Object.keys(t).forEach((function(i){n[i]=e(t[i],i)})),n},ce=function(t,e,n){for(var i=0,r=N(e)?e.split("."):e;t&&i<r.length;)t=t[r[i++]];return void 0===t||i<r.length?n:t},he=function(t,e,n){var i=t,r=N(e)?e.split("."):e;return r.forEach((function(t,e){e<r.length-1?(d(i[t])||(i[t]=it(r[e+1])?[]:{}),i=i[t]):i[t]=n})),t};var de=Object.prototype.hasOwnProperty;const fe=function(t,e){if(null===t||!v(t))return{};var n={};return f(e,(function(e){de.call(t,e)&&(n[e]=t[e])})),n},pe=function(t,e){return P(t,(function(t,n,i){return e.includes(i)||(t[i]=n),t}),{})},me=function(t,e,n){var i,r,o,a,s=0;n||(n={});var l=function(){s=!1===n.leading?0:Date.now(),i=null,a=t.apply(r,o),i||(r=o=null)},u=function(){var u=Date.now();s||!1!==n.leading||(s=u);var c=e-(u-s);return r=this,o=arguments,c<=0||c>e?(i&&(clearTimeout(i),i=null),s=u,a=t.apply(r,o),i||(r=o=null)):i||!1===n.trailing||(i=setTimeout(l,c)),a};return u.cancel=function(){clearTimeout(i),s=0,i=r=o=null},u},ge=function(t){return i(t)?Array.prototype.slice.call(t):[]};var ve={};const ye=function(t){return ve[t=t||"g"]?ve[t]+=1:ve[t]=1,t+ve[t]},be=function(){},_e=function(t){return t};function we(t){return c(t)?0:i(t)?t.length:Object.keys(t).length}var xe,Me=n(70655);const Ee=Zt((function(t,e){void 0===e&&(e={});var n=e.fontSize,i=e.fontFamily,r=e.fontWeight,o=e.fontStyle,a=e.fontVariant;return xe||(xe=document.createElement("canvas").getContext("2d")),xe.font=[o,a,r,n+"px",i].join(" "),xe.measureText(N(t)?t:"").width}),(function(t,e){return void 0===e&&(e={}),(0,Me.__spreadArrays)([t],xt(e)).join("")})),Se=function(t,e,n,i){void 0===i&&(i="...");var r,o,a=Ee(i,n),s=N(t)?t:Et(t),l=e,u=[];if(Ee(t,n)<=e)return t;for(;r=s.substr(0,16),!((o=Ee(r,n))+a>l&&o>l);)if(u.push(r),l-=o,!(s=s.substr(16)))return u.join("");for(;r=s.substr(0,1),!((o=Ee(r,n))+a>l);)if(u.push(r),l-=o,!(s=s.substr(1)))return u.join("");return""+u.join("")+i};const ke=function(){function t(){this.map={}}return t.prototype.has=function(t){return void 0!==this.map[t]},t.prototype.get=function(t,e){var n=this.map[t];return void 0===n?e:n},t.prototype.set=function(t,e){this.map[t]=e},t.prototype.clear=function(){this.map={}},t.prototype.delete=function(t){delete this.map[t]},t.prototype.size=function(){return Object.keys(this.map).length},t}()},87757:(t,e,n)=>{t.exports=n(35666)},49469:(t,e)=>{"use strict";(function(t){t.TextureCompressionBC="texture-compression-bc"})(e.UX||(e.UX={})),function(t){t.ClampToEdge="clamp-to-edge",t.Repeat="repeat",t.MirrorRepeat="mirror-repeat"}(e.OB||(e.OB={})),function(t){t.UniformBuffer="uniform-buffer",t.StorageBuffer="storage-buffer",t.ReadonlyStorageBuffer="readonly-storage-buffer",t.Sampler="sampler",t.ComparisonSampler="comparison-sampler",t.SampledTexture="sampled-texture",t.ReadonlyStorageTexture="readonly-storage-texture",t.WriteonlyStorageTexture="writeonly-storage-texture"}(e.$l||(e.$l={})),function(t){t.Zero="zero",t.One="one",t.SrcColor="src-color",t.OneMinusSrcColor="one-minus-src-color",t.SrcAlpha="src-alpha",t.OneMinusSrcAlpha="one-minus-src-alpha",t.DstColor="dst-color",t.OneMinusDstColor="one-minus-dst-color",t.DstAlpha="dst-alpha",t.OneMinusDstAlpha="one-minus-dst-alpha",t.SrcAlphaSaturated="src-alpha-saturated",t.BlendColor="blend-color",t.OneMinusBlendColor="one-minus-blend-color"}(e.zi||(e.zi={})),function(t){t.Add="add",t.Subtract="subtract",t.ReverseSubtract="reverse-subtract",t.Min="min",t.Max="max"}(e.db||(e.db={})),function(t){t.Never="never",t.Less="less",t.Equal="equal",t.LessEqual="less-equal",t.Greater="greater",t.NotEqual="not-equal",t.GreaterEqual="greater-equal",t.Always="always"}(e.wb||(e.wb={})),function(t){t.None="none",t.Front="front",t.Back="back"}(e.Wf||(e.Wf={})),function(t){t.Nearest="nearest",t.Linear="linear"}(e.X9||(e.X9={})),function(t){t.CCW="ccw",t.CW="cw"}(e.zX||(e.zX={})),function(t){t.Uint16="uint16",t.Uint32="uint32"}(e.iD||(e.iD={})),function(t){t.Vertex="vertex",t.Instance="instance"}(e.V||(e.V={})),function(t){t.Load="load"}(e.Ws||(e.Ws={})),function(t){t.PointList="point-list",t.LineList="line-list",t.LineStrip="line-strip",t.TriangleList="triangle-list",t.TriangleStrip="triangle-strip"}(e.YV||(e.YV={})),function(t){t.Keep="keep",t.Zero="zero",t.Replace="replace",t.Invert="invert",t.IncrementClamp="increment-clamp",t.DecrementClamp="decrement-clamp",t.IncrementWrap="increment-wrap",t.DecrementWrap="decrement-wrap"}(e.xS||(e.xS={})),function(t){t.Store="store",t.Clear="clear"}(e.EG||(e.EG={})),function(t){t.E1d="1d",t.E2d="2d",t.E3d="3d"}(e.kd||(e.kd={})),function(t){t.R8Unorm="r8unorm",t.R8Snorm="r8snorm",t.R8Uint="r8uint",t.R8Sint="r8sint",t.R16Uint="r16uint",t.R16Sint="r16sint",t.R16Float="r16float",t.RG8Unorm="rg8unorm",t.RG8Snorm="rg8snorm",t.RG8Uint="rg8uint",t.RG8Sint="rg8sint",t.R32Uint="r32uint",t.R32Sint="r32sint",t.R32Float="r32float",t.RG16Uint="rg16uint",t.RG16Sint="rg16sint",t.RG16Float="rg16float",t.RGBA8Unorm="rgba8unorm",t.RGBA8UnormSRGB="rgba8unorm-srgb",t.RGBA8Snorm="rgba8snorm",t.RGBA8Uint="rgba8uint",t.RGBA8Sint="rgba8sint",t.BGRA8Unorm="bgra8unorm",t.BGRA8UnormSRGB="bgra8unorm-srgb",t.RGB10A2Unorm="rgb10a2unorm",t.RG11B10Float="rg11b10float",t.RG32Uint="rg32uint",t.RG32Sint="rg32sint",t.RG32Float="rg32float",t.RGBA16Uint="rgba16uint",t.RGBA16Sint="rgba16sint",t.RGBA16Float="rgba16float",t.RGBA32Uint="rgba32uint",t.RGBA32Sint="rgba32sint",t.RGBA32Float="rgba32float",t.Depth32Float="depth32float",t.Depth24Plus="depth24plus",t.Depth24PlusStencil8="depth24plus-stencil8"}(e.EV||(e.EV={})),function(t){t.Float="float",t.Sint="sint",t.Uint="uint"}(e.Ek||(e.Ek={})),function(t){t.E1d="1d",t.E2d="2d",t.E2dArray="2d-array",t.Cube="cube",t.CubeArray="cube-array",t.E3d="3d"}(e.p_||(e.p_={})),function(t){t.Uchar2="uchar2",t.Uchar4="uchar4",t.Char2="char2",t.Char4="char4",t.Uchar2Norm="uchar2norm",t.Uchar4Norm="uchar4norm",t.Char2Norm="char2norm",t.Char4Norm="char4norm",t.Ushort2="ushort2",t.Ushort4="ushort4",t.Short2="short2",t.Short4="short4",t.Ushort2Norm="ushort2norm",t.Ushort4Norm="ushort4norm",t.Short2Norm="short2norm",t.Short4Norm="short4norm",t.Half2="half2",t.Half4="half4",t.Float="float",t.Float2="float2",t.Float3="float3",t.Float4="float4",t.Uint="uint",t.Uint2="uint2",t.Uint3="uint3",t.Uint4="uint4",t.Int="int",t.Int2="int2",t.Int3="int3",t.Int4="int4"}(e.gB||(e.gB={})),function(t){t.All="all",t.StencilOnly="stencil-only",t.DepthOnly="depth-only"}(e.H7||(e.H7={})),function(t){t.Error="error",t.Warning="warning",t.Info="info"}(e.mj||(e.mj={})),function(t){t.Occlusion="occlusion"}(e.xL||(e.xL={})),function(t){t[t.MapRead=1]="MapRead",t[t.MapWrite=2]="MapWrite",t[t.CopySrc=4]="CopySrc",t[t.CopyDst=8]="CopyDst",t[t.Index=16]="Index",t[t.Vertex=32]="Vertex",t[t.Uniform=64]="Uniform",t[t.Storage=128]="Storage",t[t.Indirect=256]="Indirect",t[t.QueryResolve=512]="QueryResolve"}(e.FB||(e.FB={})),function(t){t[t.Red=1]="Red",t[t.Green=2]="Green",t[t.Blue=4]="Blue",t[t.Alpha=8]="Alpha",t[t.All=15]="All"}(e.Yw||(e.Yw={})),function(t){t[t.Vertex=1]="Vertex",t[t.Fragment=2]="Fragment",t[t.Compute=4]="Compute"}(e.$X||(e.$X={})),function(t){t[t.CopySrc=1]="CopySrc",t[t.CopyDst=2]="CopyDst",t[t.Sampled=4]="Sampled",t[t.Storage=8]="Storage",t[t.OutputAttachment=16]="OutputAttachment"}(e.v2||(e.v2={})),function(t){t[t.Read=1]="Read",t[t.Write=2]="Write"}(e.gc||(e.gc={}))},94753:function(t){!function(e){"use strict";var n={event:"click",position:"bottom",horizontalOffset:0,verticalOffset:0,data:{}},i=!1,r=null,o="context-menu",a=function(t){return!!(t&&t.constructor&&t.call&&t.apply)},s=function(t){var e=arguments.length;if(e<2||null===t)return t;for(var n=1;n<e;n++){var i=arguments[n];for(var r in i)t[r]=i[r]}return t},l=function(t){var e;return"undefined"!=typeof jQuery&&t instanceof jQuery?t:t instanceof HTMLElement?[t]:"string"==typeof(e=t)||e instanceof String?document.querySelectorAll(t):t instanceof NodeList?t:[]},u=function(t){if(t.stopPropagation(),t.preventDefault(),r=this,f(),r.ctxMenu){var n=c(r);document.body.appendChild(n),i=!0,setTimeout((function(){e.addEventListener("click",f),e.addEventListener("resize",f),e.addEventListener("scroll",f),n.style.visibility="visible",h(t,r,n)}),1)}},c=function(t){var e,n=document.createElement("div");for(e in n.className=o,n.style.visibility="hidden",n.style.display="inline-block",t.ctxMenu.menu){var i=t.ctxMenu.menu[e],r=document.createElement("div");r.ctxMenu={key:e,enabled:!!i.enabled},r.ctxMenu.enabled?r.className="context-menu-item":r.className="context-menu-item-disabled",r.innerHTML=i&&i.label?i.label:e,r.ctxMenu.enabled&&(a(i.onSelect)?r.ctxMenu.onSelect=i.onSelect:r.ctxMenu.onSelect=d,r.addEventListener("click",(function(e){this.ctxMenu.onSelect(t,this.ctxMenu.key,r,t.ctxMenu.data),f()}))),i.title&&(r.title=i.title),n.appendChild(r)}return n},h=function(t,e,n){var i=0,r=0,o=e.getBoundingClientRect(),a=n.getBoundingClientRect(),s="click";e.ctxMenu&&e.ctxMenu.position&&(s=e.ctxMenu.position),"bottom"===s?(i=o.left+e.ctxMenu.horizontalOffset,r=o.bottom+e.ctxMenu.verticalOffset):"top"===s?(i=o.left+e.ctxMenu.horizontalOffset,r=o.top-a.height+e.ctxMenu.verticalOffset):"right"===s?(i=o.left+o.width+e.ctxMenu.horizontalOffset,r=o.top+e.ctxMenu.verticalOffset):"left"===s?(i=o.left-a.width+e.ctxMenu.horizontalOffset,r=o.top+e.ctxMenu.verticalOffset):(i=t.clientX+e.ctxMenu.horizontalOffset,r=t.clientY+e.ctxMenu.verticalOffset),i<0&&(i=e.ctxMenu.horizontalOffset>=0?e.ctxMenu.horizontalOffset:0),r<0&&(r=e.ctxMenu.verticalOffset>=0?e.ctxMenu.verticalOffset:0),i+a.width>document.body.clientWidth&&(i=e.ctxMenu.horizontalOffset>=0?document.body.clientWidth-a.width:document.body.clientWidth-a.width+e.ctxMenu.horizontalOffset),r+a.height>document.body.clientHeight&&(r=e.ctxMenu.verticalOffset>=0?document.body.clientHeight-a.height:document.body.clientHeight-a.height+e.ctxMenu.verticalOffset),n.style.left=i+"px",n.style.top=r+"px"},d=function(t,e,n){},f=function t(){var n=0,r=document.getElementsByClassName(o);for(e.removeEventListener("click",t),e.removeEventListener("resize",t),e.removeEventListener("scroll",t),n=0;n<r.length;n++)r[n].parentNode.removeChild(r[n]);i=!1},p=function(t,e,n){var i=0,r=l(t);for(i=0;i<r.length;i++)r[i].ctxMenu.menu.hasOwnProperty(e)&&(r[i].ctxMenu.menu[e].enabled=n)},m=function(t){var e,n={type:"item",enabled:!0,label:"",onSelect:function(){},icon:"",title:""};for(e in t){var i=s({},n);t[e]?a(t[e])?t[e]=s(i,{label:e,onSelect:t[e]}):t[e]=s(i,t[e]):t[e]=s(i,{label:e})}return t},g={attach:function(t,e,i){var r=0;e=m(e);var o=s({menu:s({},e)},n,i),a=l(t);for(r=0;r<a.length;r++)a[r].ctxMenu=o,a[r].addEventListener(o.event,u)},display:function(t,e,i){e=m(s({},e));var r=s({menu:s({},e)},n,i);if(t instanceof Event)t.target.ctxMenu=r,u.call(t.target,t);else if("undefined"!=typeof jQuery&&t instanceof jQuery.Event)t.target.ctxMenu=r,u.call(t.target,t);else if(t instanceof HTMLElement){t.ctxMenu=r;var o=t.getBoundingClientRect(),a={target:t,clientX:o.left,clientY:o.top,stopPropagation:function(){},preventDefault:function(){}};u(a)}else console.log(t)},disable:function(t,e){p(t,e,!1)},enable:function(t,e){p(t,e,!0)},close:function(){f()},isOpen:function(){return i}};"function"==typeof e.define&&void 0!==e.define.amd?e.define("ContextMenu",[],(function(){return g})):void 0!==t.exports?t.exports=g:e.ContextMenu=g}(window||this)},18430:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>jt});var r=n(30381),o=n.n(r);class a{constructor(t){this.table=t}reloadData(t,e){return this.table.dataLoader.load(t,void 0,void 0,void 0,e)}langText(){return this.table.modules.localize.getText(...arguments)}langBind(){return this.table.modules.localize.bind(...arguments)}langLocale(){return this.table.modules.localize.getLocale(...arguments)}commsConnections(){return this.table.modules.comms.getConnections(...arguments)}commsSend(){return this.table.modules.comms.send(...arguments)}layoutMode(){return this.table.modules.layout.getMode()}layoutRefresh(){return this.table.modules.layout.layout()}subscribe(){return this.table.eventBus.subscribe(...arguments)}unsubscribe(){return this.table.eventBus.unsubscribe(...arguments)}subscribed(t){return this.table.eventBus.subscribed(t)}subscriptionChange(){return this.table.eventBus.subscriptionChange(...arguments)}dispatch(){return this.table.eventBus.dispatch(...arguments)}chain(){return this.table.eventBus.chain(...arguments)}confirm(){return this.table.eventBus.confirm(...arguments)}dispatchExternal(){return this.table.externalEvents.dispatch(...arguments)}subscribedExternal(t){return this.table.externalEvents.subscribed(t)}subscriptionChangeExternal(){return this.table.externalEvents.subscriptionChange(...arguments)}options(t,e){return void 0!==e&&(this.table.options[t]=e),this.table.options[t]}setOption(t,e){return void 0!==e&&(this.table.options[t]=e),this.table.options[t]}module(t){return this.table.module(t)}}class s extends a{constructor(t,e){super(t),this._handler=null}initialize(){}registerTableOption(t,e){this.table.optionsList.register(t,e)}registerColumnOption(t,e){this.table.columnManager.optionsList.register(t,e)}registerTableFunction(t,e){void 0===this.table[t]?this.table[t]=e:console.warn("Unable to bind table function, name already in use",t)}registerComponentFunction(t,e,n){return this.table.componentFunctionBinder.bind(t,e,n)}registerDataHandler(t,e){this.table.rowManager.registerDataPipelineHandler(t,e),this._handler=t}registerDisplayHandler(t,e){this.table.rowManager.registerDisplayPipelineHandler(t,e),this._handler=t}refreshData(t,e){e||(e=this._handler),e&&this.table.rowManager.refreshActiveData(e,!1,t)}}class l{static elVisible(t){return!(t.offsetWidth<=0&&t.offsetHeight<=0)}static elOffset(t){var e=t.getBoundingClientRect();return{top:e.top+window.pageYOffset-document.documentElement.clientTop,left:e.left+window.pageXOffset-document.documentElement.clientLeft}}static deepClone(t,e,n=[]){var i={}.__proto__,r=[].__proto__;for(var o in e||(e=Object.assign(Array.isArray(t)?[]:{},t)),t){let a,s,l=t[o];null==l||"object"!=typeof l||l.__proto__!==i&&l.__proto__!==r||(a=n.findIndex((t=>t.subject===l)),a>-1?e[o]=n[a].copy:(s=Object.assign(Array.isArray(l)?[]:{},l),n.unshift({subject:l,copy:s}),e[o]=this.deepClone(l,s,n)))}return e}}class u extends s{constructor(t){super(t),this.allowedTypes=["","data","download","clipboard","print","htmlOutput"],this.registerColumnOption("accessor"),this.registerColumnOption("accessorParams"),this.registerColumnOption("accessorData"),this.registerColumnOption("accessorDataParams"),this.registerColumnOption("accessorDownload"),this.registerColumnOption("accessorDownloadParams"),this.registerColumnOption("accessorClipboard"),this.registerColumnOption("accessorClipboardParams"),this.registerColumnOption("accessorPrint"),this.registerColumnOption("accessorPrintParams"),this.registerColumnOption("accessorHtmlOutput"),this.registerColumnOption("accessorHtmlOutputParams")}initialize(){this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("row-data-retrieve",this.transformRow.bind(this))}initializeColumn(t){var e=!1,n={};this.allowedTypes.forEach((i=>{var r,o="accessor"+(i.charAt(0).toUpperCase()+i.slice(1));t.definition[o]&&(r=this.lookupAccessor(t.definition[o]))&&(e=!0,n[o]={accessor:r,params:t.definition[o+"Params"]||{}})})),e&&(t.modules.accessor=n)}lookupAccessor(t){var e=!1;switch(typeof t){case"string":u.accessors[t]?e=u.accessors[t]:console.warn("Accessor Error - No such accessor found, ignoring: ",t);break;case"function":e=t}return e}transformRow(t,e){var n="accessor"+(e.charAt(0).toUpperCase()+e.slice(1)),i=t.getComponent(),r=l.deepClone(t.data||{});return this.table.columnManager.traverse((function(t){var o,a,s,l;t.modules.accessor&&(a=t.modules.accessor[n]||t.modules.accessor.accessor||!1)&&"undefined"!=(o=t.getFieldValue(r))&&(l=t.getComponent(),s="function"==typeof a.params?a.params(o,r,e,l,i):a.params,t.setFieldValue(r,a.accessor(o,r,e,s,l,i)))})),r}}u.moduleName="accessor",u.accessors={};function c(t,e){var n=[];if(e=e||"",Array.isArray(t))t.forEach(((t,i)=>{n=n.concat(c(t,e?e+"["+i+"]":i))}));else if("object"==typeof t)for(var i in t)n=n.concat(c(t[i],e?e+"["+i+"]":i));else n.push({key:e,value:t});return n}function h(t){var e=c(t),n=[];return e.forEach((function(t){n.push(encodeURIComponent(t.key)+"="+encodeURIComponent(t.value))})),n.join("&")}function d(t,e){var n=[];if(e=e||"",Array.isArray(t))t.forEach(((t,i)=>{n=n.concat(d(t,e?e+"["+i+"]":i))}));else if("object"==typeof t)for(var i in t)n=n.concat(d(t[i],e?e+"["+i+"]":i));else n.push({key:e,value:t});return n}var f={json:{headers:{"Content-Type":"application/json"},body:function(t,e,n){return JSON.stringify(n)}},form:{headers:{},body:function(t,e,n){var i=d(n),r=new FormData;return i.forEach((function(t){r.append(t.key,t.value)})),r}}};class p extends s{constructor(t){super(t),this.config=!1,this.url="",this.urlGenerator=!1,this.params=!1,this.loaderPromise=!1,this.registerTableOption("ajaxURL",!1),this.registerTableOption("ajaxURLGenerator",!1),this.registerTableOption("ajaxParams",{}),this.registerTableOption("ajaxConfig","get"),this.registerTableOption("ajaxContentType","form"),this.registerTableOption("ajaxRequestFunc",!1),this.registerTableOption("ajaxRequesting",(function(){})),this.registerTableOption("ajaxResponse",!1),this.contentTypeFormatters=p.contentTypeFormatters}initialize(){this.loaderPromise=this.table.options.ajaxRequestFunc||p.defaultLoaderPromise,this.urlGenerator=this.table.options.ajaxURLGenerator||p.defaultURLGenerator,this.table.options.ajaxParams&&this.setParams(this.table.options.ajaxParams),this.table.options.ajaxConfig&&this.setConfig(this.table.options.ajaxConfig),this.table.options.ajaxURL&&this.setUrl(this.table.options.ajaxURL),this.registerTableFunction("getAjaxUrl",this.getUrl.bind(this)),this.subscribe("data-loading",this.requestDataCheck.bind(this)),this.subscribe("data-load",this.requestData.bind(this))}requestDataCheck(t,e,n,i){return!((t||!this.url)&&"string"!=typeof t)}requestData(t,e,n,i,r){return this.requestDataCheck(t)?(t&&this.setUrl(t),e&&this.setParams(e,!0),n&&this.setConfig(n),this.sendRequest()):r}setParams(t,e){if(e){this.params=this.params||{};for(let e in t)this.params[e]=t[e]}else this.params=t}getParams(){return this.params||{}}setConfig(t){if(this._loadDefaultConfig(),"string"==typeof t)this.config.method=t;else for(let e in t)this.config[e]=t[e]}_loadDefaultConfig(t){if(!this.config||t){this.config={};for(let t in p.defaultConfig)this.config[t]=p.defaultConfig[t]}}setUrl(t){this.url=t}getUrl(){return this.url}sendRequest(t){var e=this.url;return this._loadDefaultConfig(),!1!==this.table.options.ajaxRequesting.call(this.table,this.url,this.params)?this.loaderPromise(e,this.config,this.params).then((t=>(this.table.options.ajaxResponse&&(t=this.table.options.ajaxResponse.call(this.table,this.url,this.params,t)),t))):Promise.reject()}}p.moduleName="ajax",p.defaultConfig={method:"GET"},p.defaultURLGenerator=function(t,e,n){return t&&n&&Object.keys(n).length&&(e.method&&"get"!=e.method.toLowerCase()||(e.method="get",t+=(t.includes("?")?"&":"?")+h(n))),t},p.defaultLoaderPromise=function(t,e,n){var i;return new Promise(((r,o)=>{if(t=this.urlGenerator.call(this.table,t,e,n),"GET"!=e.method.toUpperCase())if(i="object"==typeof this.table.options.ajaxContentType?this.table.options.ajaxContentType:this.contentTypeFormatters[this.table.options.ajaxContentType]){for(var a in i.headers)e.headers||(e.headers={}),void 0===e.headers[a]&&(e.headers[a]=i.headers[a]);e.body=i.body.call(this,t,e,n)}else console.warn("Ajax Error - Invalid ajaxContentType value:",this.table.options.ajaxContentType);t?(void 0===e.headers&&(e.headers={}),void 0===e.headers.Accept&&(e.headers.Accept="application/json"),void 0===e.headers["X-Requested-With"]&&(e.headers["X-Requested-With"]="XMLHttpRequest"),void 0===e.mode&&(e.mode="cors"),"cors"==e.mode?(void 0===e.headers.Origin&&(e.headers.Origin=window.location.origin),void 0===e.credentials&&(e.credentials="same-origin")):void 0===e.credentials&&(e.credentials="include"),fetch(t,e).then((t=>{t.ok?t.json().then((t=>{r(t)})).catch((t=>{o(t),console.warn("Ajax Load Error - Invalid JSON returned",t)})):(console.error("Ajax Load Error - Connection Error: "+t.status,t.statusText),o(t))})).catch((t=>{console.error("Ajax Load Error - Connection Error: ",t),o(t)}))):(console.warn("Ajax Load Error - No URL Set"),r([]))}))},p.contentTypeFormatters=f;class m extends s{constructor(t){super(t),this.mode=!0,this.pasteParser=function(){},this.pasteAction=function(){},this.customSelection=!1,this.rowRange=!1,this.blocked=!0,this.registerTableOption("clipboard",!1),this.registerTableOption("clipboardCopyStyled",!0),this.registerTableOption("clipboardCopyConfig",!1),this.registerTableOption("clipboardCopyFormatter",!1),this.registerTableOption("clipboardCopyRowRange","active"),this.registerTableOption("clipboardPasteParser","table"),this.registerTableOption("clipboardPasteAction","insert"),this.registerColumnOption("clipboard"),this.registerColumnOption("titleClipboard")}initialize(){this.mode=this.table.options.clipboard,this.rowRange=this.table.options.clipboardCopyRowRange,!0!==this.mode&&"copy"!==this.mode||this.table.element.addEventListener("copy",(t=>{var e,n;if(!this.blocked){if(t.preventDefault(),this.customSelection)e=this.customSelection,this.table.options.clipboardCopyFormatter&&(e=this.table.options.clipboardCopyFormatter("plain",e));else{var i=this.table.modules.export.generateExportList(this.table.options.clipboardCopyConfig,this.table.options.clipboardCopyStyled,this.rowRange,"clipboard");e=(n=this.table.modules.export.genereateHTMLTable(i))?this.generatePlainContent(i):"",this.table.options.clipboardCopyFormatter&&(e=this.table.options.clipboardCopyFormatter("plain",e),n=this.table.options.clipboardCopyFormatter("html",n))}window.clipboardData&&window.clipboardData.setData?window.clipboardData.setData("Text",e):t.clipboardData&&t.clipboardData.setData?(t.clipboardData.setData("text/plain",e),n&&t.clipboardData.setData("text/html",n)):t.originalEvent&&t.originalEvent.clipboardData.setData&&(t.originalEvent.clipboardData.setData("text/plain",e),n&&t.originalEvent.clipboardData.setData("text/html",n)),this.dispatchExternal("clipboardCopied",e,n),this.reset()}})),!0!==this.mode&&"paste"!==this.mode||this.table.element.addEventListener("paste",(t=>{this.paste(t)})),this.setPasteParser(this.table.options.clipboardPasteParser),this.setPasteAction(this.table.options.clipboardPasteAction),this.registerTableFunction("copyToClipboard",this.copy.bind(this))}reset(){this.blocked=!0,this.customSelection=!1}generatePlainContent(t){var e=[];return t.forEach((t=>{var n=[];t.columns.forEach((e=>{var i="";if(e)if("group"===t.type&&(e.value=e.component.getKey()),null===e.value)i="";else switch(typeof e.value){case"object":i=JSON.stringify(e.value);break;case"undefined":i="";break;default:i=e.value}n.push(i)})),e.push(n.join("\t"))})),e.join("\n")}copy(t,e){var n,i;this.blocked=!1,this.customSelection=!1,!0!==this.mode&&"copy"!==this.mode||(this.rowRange=t||this.table.options.clipboardCopyRowRange,void 0!==window.getSelection&&void 0!==document.createRange?((t=document.createRange()).selectNodeContents(this.table.element),(n=window.getSelection()).toString()&&e&&(this.customSelection=n.toString()),n.removeAllRanges(),n.addRange(t)):void 0!==document.selection&&void 0!==document.body.createTextRange&&((i=document.body.createTextRange()).moveToElementText(this.table.element),i.select()),document.execCommand("copy"),n&&n.removeAllRanges())}setPasteAction(t){switch(typeof t){case"string":this.pasteAction=m.pasteActions[t],this.pasteAction||console.warn("Clipboard Error - No such paste action found:",t);break;case"function":this.pasteAction=t}}setPasteParser(t){switch(typeof t){case"string":this.pasteParser=m.pasteParsers[t],this.pasteParser||console.warn("Clipboard Error - No such paste parser found:",t);break;case"function":this.pasteParser=t}}paste(t){var e,n,i;this.checkPaseOrigin(t)&&(e=this.getPasteData(t),(n=this.pasteParser.call(this,e))?(t.preventDefault(),this.table.modExists("mutator")&&(n=this.mutateData(n)),i=this.pasteAction.call(this,n),this.dispatchExternal("clipboardPasted",e,n,i)):this.dispatchExternal("clipboardPasteError",e))}mutateData(t){var e=[];return Array.isArray(t)?t.forEach((t=>{e.push(this.table.modules.mutator.transformRow(t,"clipboard"))})):e=t,e}checkPaseOrigin(t){var e=!0;return("DIV"!=t.target.tagName||this.table.modules.edit.currentCell)&&(e=!1),e}getPasteData(t){var e;return window.clipboardData&&window.clipboardData.getData?e=window.clipboardData.getData("Text"):t.clipboardData&&t.clipboardData.getData?e=t.clipboardData.getData("text/plain"):t.originalEvent&&t.originalEvent.clipboardData.getData&&(e=t.originalEvent.clipboardData.getData("text/plain")),e}}m.moduleName="clipboard",m.pasteActions={replace:function(t){return this.table.setData(t)},update:function(t){return this.table.updateOrAddData(t)},insert:function(t){return this.table.addData(t)}},m.pasteParsers={table:function(t){var e=[],n=!0,i=this.table.columnManager.columns,r=[],o=[];return(t=t.split("\n")).forEach((function(t){e.push(t.split("\t"))})),!(!e.length||1===e.length&&e[0].length<2)&&(e[0].forEach((function(t){var e=i.find((function(e){return t&&e.definition.title&&t.trim()&&e.definition.title.trim()===t.trim()}));e?r.push(e):n=!1})),n||(n=!0,r=[],e[0].forEach((function(t){var e=i.find((function(e){return t&&e.field&&t.trim()&&e.field.trim()===t.trim()}));e?r.push(e):n=!1})),n||(r=this.table.columnManager.columnsByIndex)),n&&e.shift(),e.forEach((function(t){var e={};t.forEach((function(t,n){r[n]&&(e[r[n].field]=t)})),o.push(e)})),o)}};class g{constructor(t){return this._row=t,new Proxy(this,{get:function(t,e,n){return void 0!==t[e]?t[e]:t._row.table.componentFunctionBinder.handle("row",t._row,e)}})}getData(t){return this._row.getData(t)}getElement(){return this._row.getElement()}getTable(){return this._row.table}getCells(){var t=[];return this._row.getCells().forEach((function(e){t.push(e.getComponent())})),t}getCell(t){var e=this._row.getCell(t);return!!e&&e.getComponent()}_getSelf(){return this._row}}class v{constructor(t){return this._cell=t,new Proxy(this,{get:function(t,e,n){return void 0!==t[e]?t[e]:t._cell.table.componentFunctionBinder.handle("cell",t._cell,e)}})}getValue(){return this._cell.getValue()}getOldValue(){return this._cell.getOldValue()}getInitialValue(){return this._cell.initialValue}getElement(){return this._cell.getElement()}getRow(){return this._cell.row.getComponent()}getData(){return this._cell.row.getData()}getField(){return this._cell.column.getField()}getColumn(){return this._cell.column.getComponent()}setValue(t,e){void 0===e&&(e=!0),this._cell.setValue(t,e)}restoreOldValue(){this._cell.setValueActual(this._cell.getOldValue())}restoreInitialValue(){this._cell.setValueActual(this._cell.initialValue)}checkHeight(){this._cell.checkHeight()}getTable(){return this._cell.table}_getSelf(){return this._cell}}class y extends a{constructor(t,e){super(t.table),this.table=t.table,this.column=t,this.row=e,this.element=null,this.value=null,this.initialValue,this.oldValue=null,this.modules={},this.height=null,this.width=null,this.minWidth=null,this.component=null,this.loaded=!1,this.build()}build(){this.generateElement(),this.setWidth(),this._configureCell(),this.setValueActual(this.column.getFieldValue(this.row.data)),this.initialValue=this.value}generateElement(){this.element=document.createElement("div"),this.element.className="tabulator-cell",this.element.setAttribute("role","gridcell"),this.element=this.element}_configureCell(){var t=this.element,e=this.column.getField();(t.style.textAlign=this.column.hozAlign,this.column.vertAlign&&(t.style.display="inline-flex",t.style.alignItems={top:"flex-start",bottom:"flex-end",middle:"center"}[this.column.vertAlign]||"",this.column.hozAlign&&(t.style.justifyContent={left:"flex-start",right:"flex-end",center:"center"}[this.column.hozAlign]||"")),e&&t.setAttribute("tabulator-field",e),this.column.definition.cssClass)&&this.column.definition.cssClass.split(" ").forEach((e=>{t.classList.add(e)}));"hover"===this.table.options.tooltipGenerationMode&&t.addEventListener("mouseenter",(t=>{this._generateTooltip()})),this.dispatch("cell-init",this),this.column.visible||this.hide()}_generateContents(){var t;switch(typeof(t=this.chain("cell-format",this,null,(()=>this.element.innerHTML=this.value)))){case"object":if(t instanceof Node){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.element.appendChild(t)}else this.element.innerHTML="",null!=t&&console.warn("Format Error - Formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:",t);break;case"undefined":case"null":this.element.innerHTML="";break;default:this.element.innerHTML=t}}cellRendered(){this.dispatch("cell-rendered",this)}_generateTooltip(){var t=this.column.tooltip;t?(!0===t?t=this.value:"function"==typeof t&&!1===(t=t(this.getComponent()))&&(t=""),void 0===t&&(t=""),this.element.setAttribute("title",t)):this.element.setAttribute("title","")}getElement(t){return this.loaded||(this.loaded=!0,t||this.layoutElement()),this.element}getValue(){return this.value}getOldValue(){return this.oldValue}setValue(t,e){this.setValueProcessData(t,e)&&(this.dispatch("cell-value-updated",this),this.cellRendered(),this.dispatchExternal("cellEdited",this.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()))}setValueProcessData(t,e){var n=!1;return this.value!=t&&(n=!0,e&&(t=this.chain("cell-value-changing",[this,t],null,t))),this.setValueActual(t),n&&this.dispatch("cell-value-changed",this),n}setValueActual(t){this.oldValue=this.value,this.value=t,this.dispatch("cell-value-save-before",this),this.column.setFieldValue(this.row.data,t),this.dispatch("cell-value-save-after",this),this.loaded&&this.layoutElement()}layoutElement(){this._generateContents(),this._generateTooltip(),this.dispatch("cell-layout",this)}setWidth(){this.width=this.column.width,this.element.style.width=this.column.widthStyled}clearWidth(){this.width="",this.element.style.width=""}getWidth(){return this.width||this.element.offsetWidth}setMinWidth(){this.minWidth=this.column.minWidth,this.element.style.minWidth=this.column.minWidthStyled}setMaxWidth(){this.maxWidth=this.column.maxWidth,this.element.style.maxWidth=this.column.maxWidthStyled}checkHeight(){this.row.reinitializeHeight()}clearHeight(){this.element.style.height="",this.height=null}setHeight(){this.height=this.row.height,this.element.style.height=this.row.heightStyled}getHeight(){return this.height||this.element.offsetHeight}show(){this.element.style.display=this.column.vertAlign?"inline-flex":""}hide(){this.element.style.display="none"}delete(){this.dispatch("cell-delete",this),!this.table.rowManager.redrawBlock&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=!1,this.column.deleteCell(this),this.row.deleteCell(this),this.calcs={}}getIndex(){return this.row.getCellIndex(this)}getComponent(){return this.component||(this.component=new v(this)),this.component}}class b{constructor(t){return this._column=t,this.type="ColumnComponent",new Proxy(this,{get:function(t,e,n){return void 0!==t[e]?t[e]:t._column.table.componentFunctionBinder.handle("column",t._column,e)}})}getElement(){return this._column.getElement()}getDefinition(){return this._column.getDefinition()}getField(){return this._column.getField()}getCells(){var t=[];return this._column.cells.forEach((function(e){t.push(e.getComponent())})),t}isVisible(){return this._column.visible}show(){this._column.isGroup?this._column.columns.forEach((function(t){t.show()})):this._column.show()}hide(){this._column.isGroup?this._column.columns.forEach((function(t){t.hide()})):this._column.hide()}toggle(){this._column.visible?this.hide():this.show()}delete(){return this._column.delete()}getSubColumns(){var t=[];return this._column.columns.length&&this._column.columns.forEach((function(e){t.push(e.getComponent())})),t}getParentColumn(){return this._column.parent instanceof Column&&this._column.parent.getComponent()}_getSelf(){return this._column}scrollTo(){return this._column.table.columnManager.scrollToColumn(this._column)}getTable(){return this._column.table}move(t,e){var n=this._column.table.columnManager.findColumn(t);n?this._column.table.columnManager.moveColumn(this._column,n,e):console.warn("Move Error - No matching column found:",n)}getNextColumn(){var t=this._column.nextColumn();return!!t&&t.getComponent()}getPrevColumn(){var t=this._column.prevColumn();return!!t&&t.getComponent()}updateDefinition(t){return this._column.updateDefinition(t)}getWidth(){return this._column.getWidth()}setWidth(t){var e;return e=!0===t?this._column.reinitializeWidth(!0):this._column.setWidth(t),this._column.table.columnManager.renderer.rerenderColumns(!0),e}}var _={title:void 0,field:void 0,columns:void 0,visible:void 0,hozAlign:void 0,vertAlign:void 0,width:void 0,minWidth:40,maxWidth:void 0,tooltip:void 0,cssClass:void 0,variableHeight:void 0,headerTooltip:void 0,headerVertical:void 0,headerHozAlign:void 0,editableTitle:void 0};class w extends a{constructor(t,e){super(e.table),this.definition=t,this.parent=e,this.type="column",this.columns=[],this.cells=[],this.element=this.createElement(),this.contentElement=!1,this.titleHolderElement=!1,this.titleElement=!1,this.groupElement=this.createGroupElement(),this.isGroup=!1,this.tooltip=!1,this.hozAlign="",this.vertAlign="",this.field="",this.fieldStructure="",this.getFieldValue="",this.setFieldValue="",this.titleFormatterRendered=!1,this.mapDefinitions(),this.setField(this.definition.field),this.modules={},this.width=null,this.widthStyled="",this.maxWidth=null,this.maxWidthStyled="",this.minWidth=null,this.minWidthStyled="",this.widthFixed=!1,this.visible=!0,this.component=null,this.definition.columns?(this.isGroup=!0,this.definition.columns.forEach(((t,e)=>{var n=new w(t,this);this.attachColumn(n)})),this.checkColumnVisibility()):e.registerColumnField(this),this._initialize(),this.bindModuleColumns()}createElement(){var t=document.createElement("div");return t.classList.add("tabulator-col"),t.setAttribute("role","columnheader"),t.setAttribute("aria-sort","none"),t}createGroupElement(){var t=document.createElement("div");return t.classList.add("tabulator-col-group-cols"),t}mapDefinitions(){var t=this.table.options.columnDefaults;if(t)for(let e in t)void 0===this.definition[e]&&(this.definition[e]=t[e]);this.definition=this.table.columnManager.optionsList.generate(w.defaultOptionList,this.definition)}checkDefinition(){Object.keys(this.definition).forEach((t=>{-1===w.defaultOptionList.indexOf(t)&&console.warn("Invalid column definition option in '"+(this.field||this.definition.title)+"' column:",t)}))}setField(t){this.field=t,this.fieldStructure=t?this.table.options.nestedFieldSeparator?t.split(this.table.options.nestedFieldSeparator):[t]:[],this.getFieldValue=this.fieldStructure.length>1?this._getNestedData:this._getFlatData,this.setFieldValue=this.fieldStructure.length>1?this._setNestedData:this._setFlatData}registerColumnPosition(t){this.parent.registerColumnPosition(t)}registerColumnField(t){this.parent.registerColumnField(t)}reRegisterPosition(){this.isGroup?this.columns.forEach((function(t){t.reRegisterPosition()})):this.registerColumnPosition(this)}_mapDepricatedFunctionality(){}setTooltip(){var t=this.definition,e=void 0===t.headerTooltip?t.tooltip:t.headerTooltip;e?!0===e?t.field?this.langBind("columns|"+t.field,(e=>{this.element.setAttribute("title",e||t.title)})):this.element.setAttribute("title",t.title):("function"==typeof e&&!1===(e=e(this.getComponent()))&&(e=""),this.element.setAttribute("title",e)):this.element.setAttribute("title","")}_initialize(){for(var t=this.definition;this.element.firstChild;)this.element.removeChild(this.element.firstChild);t.headerVertical&&(this.element.classList.add("tabulator-col-vertical"),"flip"===t.headerVertical&&this.element.classList.add("tabulator-col-vertical-flip")),this.contentElement=this._bindEvents(),this.contentElement=this._buildColumnHeaderContent(),this.element.appendChild(this.contentElement),this.isGroup?this._buildGroupHeader():this._buildColumnHeader(),this.setTooltip(),this.dispatch("column-init",this),this.element.addEventListener("mouseenter",(t=>{this.setTooltip()}))}_bindEvents(){var t,e,n,i=this.definition;"function"==typeof i.headerClick&&this.element.addEventListener("click",(t=>{i.headerClick(t,this.getComponent())})),"function"==typeof i.headerDblClick&&this.element.addEventListener("dblclick",(t=>{i.headerDblClick(t,this.getComponent())})),"function"==typeof i.headerContext&&this.element.addEventListener("contextmenu",(t=>{i.headerContext(t,this.getComponent())})),"function"==typeof i.headerTap&&(n=!1,this.element.addEventListener("touchstart",(t=>{n=!0}),{passive:!0}),this.element.addEventListener("touchend",(t=>{n&&i.headerTap(t,this.getComponent()),n=!1}))),"function"==typeof i.headerDblTap&&(t=null,this.element.addEventListener("touchend",(e=>{t?(clearTimeout(t),t=null,i.headerDblTap(e,this.getComponent())):t=setTimeout((()=>{clearTimeout(t),t=null}),300)}))),"function"==typeof i.headerTapHold&&(e=null,this.element.addEventListener("touchstart",(t=>{clearTimeout(e),e=setTimeout((function(){clearTimeout(e),e=null,n=!1,i.headerTapHold(t,this.getComponent())}),1e3)}),{passive:!0}),this.element.addEventListener("touchend",(t=>{clearTimeout(e),e=null})))}_buildColumnHeader(){var t=this.definition;this.table;(this.dispatch("column-layout",this),void 0!==t.visible&&(t.visible?this.show(!0):this.hide(!0)),t.cssClass)&&t.cssClass.split(" ").forEach((t=>{this.element.classList.add(t)}));t.field&&this.element.setAttribute("tabulator-field",t.field),this.setMinWidth(parseInt(t.minWidth)),t.maxWidth&&this.setMaxWidth(parseInt(t.maxWidth)),this.reinitializeWidth(),this.tooltip=this.definition.tooltip,this.hozAlign=this.definition.hozAlign,this.vertAlign=this.definition.vertAlign,this.titleElement.style.textAlign=this.definition.headerHozAlign}_buildColumnHeaderContent(){this.definition,this.table;var t=document.createElement("div");return t.classList.add("tabulator-col-content"),this.titleHolderElement=document.createElement("div"),this.titleHolderElement.classList.add("tabulator-col-title-holder"),t.appendChild(this.titleHolderElement),this.titleElement=this._buildColumnHeaderTitle(),this.titleHolderElement.appendChild(this.titleElement),t}_buildColumnHeaderTitle(){var t=this.definition,e=document.createElement("div");if(e.classList.add("tabulator-col-title"),t.editableTitle){var n=document.createElement("input");n.classList.add("tabulator-title-editor"),n.addEventListener("click",(t=>{t.stopPropagation(),n.focus()})),n.addEventListener("change",(()=>{t.title=n.value,this.dispatchExternal("columnTitleChanged",this.getComponent())})),e.appendChild(n),t.field?this.langBind("columns|"+t.field,(e=>{n.value=e||t.title||"&nbsp;"})):n.value=t.title||"&nbsp;"}else t.field?this.langBind("columns|"+t.field,(n=>{this._formatColumnHeaderTitle(e,n||t.title||"&nbsp;")})):this._formatColumnHeaderTitle(e,t.title||"&nbsp;");return e}_formatColumnHeaderTitle(t,e){var n=this.chain("column-format",[this,e,t],null,(()=>e));switch(typeof n){case"object":n instanceof Node?t.appendChild(n):(t.innerHTML="",console.warn("Format Error - Title formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:",n));break;case"undefined":case"null":t.innerHTML="";break;default:t.innerHTML=n}}_buildGroupHeader(){(this.element.classList.add("tabulator-col-group"),this.element.setAttribute("role","columngroup"),this.element.setAttribute("aria-title",this.definition.title),this.definition.cssClass)&&this.definition.cssClass.split(" ").forEach((t=>{this.element.classList.add(t)}));this.titleElement.style.textAlign=this.definition.headerHozAlign,this.element.appendChild(this.groupElement)}_getFlatData(t){return t[this.field]}_getNestedData(t){var e,n=t,i=this.fieldStructure,r=i.length;for(let t=0;t<r&&(e=n=n[i[t]],n);t++);return e}_setFlatData(t,e){this.field&&(t[this.field]=e)}_setNestedData(t,e){var n=t,i=this.fieldStructure,r=i.length;for(let t=0;t<r;t++)if(t==r-1)n[i[t]]=e;else{if(!n[i[t]]){if(void 0===e)break;n[i[t]]={}}n=n[i[t]]}}attachColumn(t){this.groupElement?(this.columns.push(t),this.groupElement.appendChild(t.getElement())):console.warn("Column Warning - Column being attached to another column instead of column group")}verticalAlign(t,e){var n=this.parent.isGroup?this.parent.getGroupElement().clientHeight:e||this.parent.getHeadersElement().clientHeight;this.element.style.height=n+"px",this.isGroup&&(this.groupElement.style.minHeight=n-this.contentElement.offsetHeight+"px"),this.isGroup||"top"===t||(this.element.style.paddingTop="bottom"===t?this.element.clientHeight-this.contentElement.offsetHeight+"px":(this.element.clientHeight-this.contentElement.offsetHeight)/2+"px"),this.columns.forEach((function(e){e.verticalAlign(t)}))}clearVerticalAlign(){this.element.style.paddingTop="",this.element.style.height="",this.element.style.minHeight="",this.groupElement.style.minHeight="",this.columns.forEach((function(t){t.clearVerticalAlign()}))}bindModuleColumns(){"rownum"==this.definition.formatter&&(this.table.rowManager.rowNumColumn=this)}getElement(){return this.element}getGroupElement(){return this.groupElement}getField(){return this.field}getFirstColumn(){return this.isGroup?!!this.columns.length&&this.columns[0].getFirstColumn():this}getLastColumn(){return this.isGroup?!!this.columns.length&&this.columns[this.columns.length-1].getLastColumn():this}getColumns(){return this.columns}getCells(){return this.cells}getTopColumn(){return this.parent.isGroup?this.parent.getTopColumn():this}getDefinition(t){var e=[];return this.isGroup&&t&&(this.columns.forEach((function(t){e.push(t.getDefinition(!0))})),this.definition.columns=e),this.definition}checkColumnVisibility(){var t=!1;this.columns.forEach((function(e){e.visible&&(t=!0)})),t?(this.show(),this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!1)):this.hide()}show(t,e){this.visible||(this.visible=!0,this.element.style.display="",this.parent.isGroup&&this.parent.checkColumnVisibility(),this.cells.forEach((function(t){t.show()})),this.isGroup||null!==this.width||this.reinitializeWidth(),this.table.columnManager.verticalAlignHeaders(),this.dispatch("column-show",this,e),t||this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!0),this.parent.isGroup&&this.parent.matchChildWidths(),this.silent||this.table.columnManager.renderer.rerenderColumns())}hide(t,e){this.visible&&(this.visible=!1,this.element.style.display="none",this.table.columnManager.verticalAlignHeaders(),this.parent.isGroup&&this.parent.checkColumnVisibility(),this.cells.forEach((function(t){t.hide()})),this.dispatch("column-hide",this),t||this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!1),this.parent.isGroup&&this.parent.matchChildWidths(),this.silent||this.table.columnManager.renderer.rerenderColumns())}matchChildWidths(){var t=0;this.contentElement&&this.columns.length&&(this.columns.forEach((function(e){e.visible&&(t+=e.getWidth())})),this.contentElement.style.maxWidth=t-1+"px",this.parent.isGroup&&this.parent.matchChildWidths())}removeChild(t){var e=this.columns.indexOf(t);e>-1&&this.columns.splice(e,1),this.columns.length||this.delete()}setWidth(t){this.widthFixed=!0,this.setWidthActual(t)}setWidthActual(t){isNaN(t)&&(t=Math.floor(this.table.element.clientWidth/100*parseInt(t))),t=Math.max(this.minWidth,t),this.maxWidth&&(t=Math.min(this.maxWidth,t)),this.width=t,this.widthStyled=t?t+"px":"",this.element.style.width=this.widthStyled,this.isGroup||this.cells.forEach((function(t){t.setWidth()})),this.parent.isGroup&&this.parent.matchChildWidths(),this.dispatch("column-width",this)}checkCellHeights(){var t=[];this.cells.forEach((function(e){e.row.heightInitialized&&(null!==e.row.getElement().offsetParent?(t.push(e.row),e.row.clearCellHeight()):e.row.heightInitialized=!1)})),t.forEach((function(t){t.calcHeight()})),t.forEach((function(t){t.setCellHeight()}))}getWidth(){var t=0;return this.isGroup?this.columns.forEach((function(e){e.visible&&(t+=e.getWidth())})):t=this.width,t}getHeight(){return this.element.offsetHeight}setMinWidth(t){this.minWidth=t,this.minWidthStyled=t?t+"px":"",this.element.style.minWidth=this.minWidthStyled,this.cells.forEach((function(t){t.setMinWidth()}))}setMaxWidth(t){this.maxWidth=t,this.maxWidthStyled=t?t+"px":"",this.element.style.maxWidth=this.maxWidthStyled,this.cells.forEach((function(t){t.setMaxWidth()}))}delete(){return new Promise(((t,e)=>{this.isGroup&&this.columns.forEach((function(t){t.delete()})),this.dispatch("column-delete",this);var n=this.cells.length;for(let t=0;t<n;t++)this.cells[0].delete();this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=!1,this.contentElement=!1,this.titleElement=!1,this.groupElement=!1,this.parent.isGroup&&this.parent.removeChild(this),this.table.columnManager.deregisterColumn(this),this.table.columnManager.renderer.rerenderColumns(!0),t()}))}columnRendered(){this.titleFormatterRendered&&this.titleFormatterRendered()}generateCell(t){var e=new y(this,t);return this.cells.push(e),e}nextColumn(){var t=this.table.columnManager.findColumnIndex(this);return t>-1&&this._nextVisibleColumn(t+1)}_nextVisibleColumn(t){var e=this.table.columnManager.getColumnByIndex(t);return!e||e.visible?e:this._nextVisibleColumn(t+1)}prevColumn(){var t=this.table.columnManager.findColumnIndex(this);return t>-1&&this._prevVisibleColumn(t-1)}_prevVisibleColumn(t){var e=this.table.columnManager.getColumnByIndex(t);return!e||e.visible?e:this._prevVisibleColumn(t-1)}reinitializeWidth(t){this.widthFixed=!1,void 0===this.definition.width||t||this.setWidth(this.definition.width),this.dispatch("column-width-fit-before",this),this.fitToData(),this.dispatch("column-width-fit-after",this)}fitToData(){if(!this.isGroup){this.widthFixed||(this.element.style.width="",this.cells.forEach((t=>{t.clearWidth()})));var t=this.element.offsetWidth;this.width&&this.widthFixed||(this.cells.forEach((e=>{var n=e.getWidth();n>t&&(t=n)})),t&&this.setWidthActual(t+1))}}updateDefinition(t){var e;return this.isGroup||this.parent.isGroup?(console.error("Column Update Error - The updateDefinition function is only available on ungrouped columns"),Promise.reject("Column Update Error - The updateDefinition function is only available on columns, not column groups")):(e=Object.assign({},this.getDefinition()),e=Object.assign(e,t),this.table.columnManager.addColumn(e,!1,this).then((t=>(e.field==this.field&&(this.field=!1),this.delete().then((()=>t.getComponent()))))))}deleteCell(t){var e=this.cells.indexOf(t);e>-1&&this.cells.splice(e,1)}getComponent(){return this.component||(this.component=new b(this)),this.component}}w.defaultOptionList=_;class x{constructor(t){return this._row=t,new Proxy(this,{get:function(t,e,n){return void 0!==t[e]?t[e]:t._row.table.componentFunctionBinder.handle("row",t._row,e)}})}getData(t){return this._row.getData(t)}getElement(){return this._row.getElement()}getCells(){var t=[];return this._row.getCells().forEach((function(e){t.push(e.getComponent())})),t}getCell(t){var e=this._row.getCell(t);return!!e&&e.getComponent()}getIndex(){return this._row.getData("data")[this._row.table.options.index]}getPosition(t){return this._row.table.rowManager.getRowPosition(this._row,t)}delete(){return this._row.delete()}scrollTo(){return this._row.table.rowManager.scrollToRow(this._row)}move(t,e){this._row.moveToRow(t,e)}update(t){return this._row.updateData(t)}normalizeHeight(){this._row.normalizeHeight(!0)}_getSelf(){return this._row}reformat(){return this._row.reinitialize()}getTable(){return this._row.table}getNextRow(){var t=this._row.nextRow();return t?t.getComponent():t}getPrevRow(){var t=this._row.prevRow();return t?t.getComponent():t}}class M extends a{constructor(t,e,n="row"){super(e.table),this.parent=e,this.data={},this.type=n,this.element=!1,this.modules={},this.cells=[],this.height=0,this.heightStyled="",this.manualHeight=!1,this.outerHeight=0,this.initialized=!1,this.heightInitialized=!1,this.component=null,this.created=!1,this.setData(t)}create(){this.created||(this.created=!0,this.generateElement())}createElement(){var t=document.createElement("div");t.classList.add("tabulator-row"),t.setAttribute("role","row"),this.element=t}getElement(){return this.create(),this.element}detachElement(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)}generateElement(){this.createElement(),this.dispatch("row-init",this)}generateCells(){this.cells=this.table.columnManager.generateCells(this)}initialize(t){if(this.create(),!this.initialized||t){for(this.deleteCells();this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.dispatch("row-layout-before",this),this.generateCells(),this.table.columnManager.renderer.renderRowCells(this),t&&this.normalizeHeight(),this.dispatch("row-layout",this),this.table.options.rowFormatter&&this.table.options.rowFormatter(this.getComponent()),this.initialized=!0,this.dispatch("row-layout-after",this)}else this.table.columnManager.renderer.rerenderRowCells(this)}reinitializeHeight(){this.heightInitialized=!1,this.element&&null!==this.element.offsetParent&&this.normalizeHeight(!0)}deinitializeHeight(){this.heightInitialized=!1}reinitialize(t){this.initialized=!1,this.heightInitialized=!1,this.manualHeight||(this.height=0,this.heightStyled=""),this.element&&null!==this.element.offsetParent&&this.initialize(!0),this.dispatch("row-relayout",this)}calcHeight(t){var e=0,n=this.table.options.resizableRows?this.element.clientHeight:0;this.cells.forEach((function(t){var n=t.getHeight();n>e&&(e=n)})),this.height=t?Math.max(e,n):this.manualHeight?this.height:Math.max(e,n),this.heightStyled=this.height?this.height+"px":"",this.outerHeight=this.element.offsetHeight}setCellHeight(){this.cells.forEach((function(t){t.setHeight()})),this.heightInitialized=!0}clearCellHeight(){this.cells.forEach((function(t){t.clearHeight()}))}normalizeHeight(t){t&&this.clearCellHeight(),this.calcHeight(t),this.setCellHeight()}setHeight(t,e){(this.height!=t||e)&&(this.manualHeight=!0,this.height=t,this.heightStyled=t?t+"px":"",this.setCellHeight(),this.outerHeight=this.element.offsetHeight)}getHeight(){return this.outerHeight}getWidth(){return this.element.offsetWidth}deleteCell(t){var e=this.cells.indexOf(t);e>-1&&this.cells.splice(e,1)}setData(t){this.data=this.chain("row-data-init-before",[this,t],void 0,t),this.dispatch("row-data-init-after",this)}updateData(t){var e,n=this.element&&l.elVisible(this.element),i={};return new Promise(((r,o)=>{for(var a in"string"==typeof t&&(t=JSON.parse(t)),this.dispatch("row-data-save-before",this),this.subscribed("row-data-changing")&&(i=Object.assign(i,this.data),i=Object.assign(i,t)),e=this.chain("row-data-changing",[this,i,t],null,t))this.data[a]=e[a];for(var a in this.dispatch("row-data-save-after",this),t){this.table.columnManager.getColumnsByFieldRoot(a).forEach((t=>{let i=this.getCell(t.getField());if(i){let r=t.getFieldValue(e);i.getValue()!=r&&(i.setValueProcessData(r),n&&i.cellRendered())}}))}n?(this.normalizeHeight(!0),this.table.options.rowFormatter&&this.table.options.rowFormatter(this.getComponent())):(this.initialized=!1,this.height=0,this.heightStyled=""),this.dispatch("row-data-changed",this,n,t),this.dispatchExternal("rowUpdated",this.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()),r()}))}getData(t){return t?this.chain("row-data-retrieve",[this,t],null,this.data):this.data}getCell(t){return t=this.table.columnManager.findColumn(t),this.initialized||this.generateCells(),this.cells.find((function(e){return e.column===t}))}getCellIndex(t){return this.cells.findIndex((function(e){return e===t}))}findCell(t){return this.cells.find((e=>e.element===t))}getCells(){return this.initialized||this.generateCells(),this.cells}nextRow(){return this.table.rowManager.nextDisplayRow(this,!0)||!1}prevRow(){return this.table.rowManager.prevDisplayRow(this,!0)||!1}moveToRow(t,e){var n=this.table.rowManager.findRow(t);n?(this.table.rowManager.moveRowActual(this,n,!e),this.table.rowManager.refreshActiveData("display",!1,!0)):console.warn("Move Error - No matching row found:",t)}delete(){return this.dispatch("row-delete",this),this.deleteActual(),Promise.resolve()}deleteActual(t){this.table.rowManager.getRowIndex(this);this.detatchModules(),this.table.rowManager.deleteRow(this,t),this.deleteCells(),this.initialized=!1,this.heightInitialized=!1,this.element=!1,this.dispatch("row-deleted",this)}detatchModules(){this.dispatch("row-deleting",this)}deleteCells(){var t=this.cells.length;for(let e=0;e<t;e++)this.cells[0].delete()}wipe(){if(this.detatchModules(),this.deleteCells(),this.element){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.element.parentNode&&this.element.parentNode.removeChild(this.element)}this.element=!1,this.modules={}}getGroup(){return this.modules.group||!1}getComponent(){return this.component||(this.component=new x(this)),this.component}}var E={avg:function(t,e,n){var i=0,r=void 0!==n.precision?n.precision:2;return t.length&&(i=t.reduce((function(t,e){return Number(t)+Number(e)})),i/=t.length,i=!1!==r?i.toFixed(r):i),parseFloat(i).toString()},max:function(t,e,n){var i=null,r=void 0!==n.precision&&n.precision;return t.forEach((function(t){((t=Number(t))>i||null===i)&&(i=t)})),null!==i?!1!==r?i.toFixed(r):i:""},min:function(t,e,n){var i=null,r=void 0!==n.precision&&n.precision;return t.forEach((function(t){((t=Number(t))<i||null===i)&&(i=t)})),null!==i?!1!==r?i.toFixed(r):i:""},sum:function(t,e,n){var i=0,r=void 0!==n.precision&&n.precision;return t.length&&t.forEach((function(t){t=Number(t),i+=isNaN(t)?0:Number(t)})),!1!==r?i.toFixed(r):i},concat:function(t,e,n){var i=0;return t.length&&(i=t.reduce((function(t,e){return String(t)+String(e)}))),i},count:function(t,e,n){var i=0;return t.length&&t.forEach((function(t){t&&i++})),i}};class S extends s{constructor(t){super(t),this.topCalcs=[],this.botCalcs=[],this.genColumn=!1,this.topElement=this.createElement(),this.botElement=this.createElement(),this.topRow=!1,this.botRow=!1,this.topInitialized=!1,this.botInitialized=!1,this.registerTableOption("columnCalcs",!0),this.registerColumnOption("topCalc"),this.registerColumnOption("topCalcParams"),this.registerColumnOption("topCalcFormatter"),this.registerColumnOption("topCalcFormatterParams"),this.registerColumnOption("bottomCalc"),this.registerColumnOption("bottomCalcParams"),this.registerColumnOption("bottomCalcFormatter"),this.registerColumnOption("bottomCalcFormatterParams")}createElement(){var t=document.createElement("div");return t.classList.add("tabulator-calcs-holder"),t}initialize(){this.genColumn=new w({field:"value"},this),this.subscribe("cell-value-changed",this.cellValueChanged.bind(this)),this.subscribe("column-init",this.initializeColumnCheck.bind(this)),this.subscribe("row-deleted",this.rowsUpdated.bind(this)),this.subscribe("scroll-horizontal",this.scrollHorizontal.bind(this)),this.subscribe("row-added",this.rowsUpdated.bind(this)),this.subscribe("column-moved",this.recalcActiveRows.bind(this)),this.subscribe("column-add",this.recalcActiveRows.bind(this)),this.subscribe("data-refeshed",this.recalcActiveRows.bind(this)),this.subscribe("table-redraw",this.tableRedraw.bind(this)),this.registerTableFunction("getCalcResults",this.getResults.bind(this)),this.registerTableFunction("recalc",this.userRecalc.bind(this))}tableRedraw(t){this.recalc(this.table.rowManager.activeRows),t&&this.redraw()}userRecalc(){this.recalc(this.table.rowManager.activeRows)}rowsUpdated(t){this.table.options.groupBy?this.recalcRowGroup(this):this.recalcActiveRows()}recalcActiveRows(){this.recalc(this.table.rowManager.activeRows)}cellValueChanged(t){(t.column.definition.topCalc||t.column.definition.bottomCalc)&&(this.table.options.groupBy?("table"!=this.table.options.columnCalcs&&"both"!=this.table.options.columnCalcs||this.recalcActiveRows(),"table"!=this.table.options.columnCalcs&&this.recalcRowGroup(t.row)):this.recalcActiveRows())}initializeColumnCheck(t){(t.definition.topCalc||t.definition.bottomCalc)&&this.initializeColumn(t)}initializeColumn(t){var e=t.definition,n={topCalcParams:e.topCalcParams||{},botCalcParams:e.bottomCalcParams||{}};if(e.topCalc){switch(typeof e.topCalc){case"string":S.calculations[e.topCalc]?n.topCalc=S.calculations[e.topCalc]:console.warn("Column Calc Error - No such calculation found, ignoring: ",e.topCalc);break;case"function":n.topCalc=e.topCalc}n.topCalc&&(t.modules.columnCalcs=n,this.topCalcs.push(t),"group"!=this.table.options.columnCalcs&&this.initializeTopRow())}if(e.bottomCalc){switch(typeof e.bottomCalc){case"string":S.calculations[e.bottomCalc]?n.botCalc=S.calculations[e.bottomCalc]:console.warn("Column Calc Error - No such calculation found, ignoring: ",e.bottomCalc);break;case"function":n.botCalc=e.bottomCalc}n.botCalc&&(t.modules.columnCalcs=n,this.botCalcs.push(t),"group"!=this.table.options.columnCalcs&&this.initializeBottomRow())}}registerColumnField(){}removeCalcs(){var t=!1;this.topInitialized&&(this.topInitialized=!1,this.topElement.parentNode.removeChild(this.topElement),t=!0),this.botInitialized&&(this.botInitialized=!1,this.table.footerManager.remove(this.botElement),t=!0),t&&this.table.rowManager.adjustTableSize()}initializeTopRow(){this.topInitialized||(this.table.columnManager.getElement().insertBefore(this.topElement,this.table.columnManager.headersElement.nextSibling),this.topInitialized=!0)}initializeBottomRow(){this.botInitialized||(this.table.footerManager.prepend(this.botElement),this.botInitialized=!0)}scrollHorizontal(t){this.botInitialized&&this.botRow&&(this.botRow.getElement().style.marginLeft=-t+"px")}recalc(t){var e;if(this.topInitialized||this.botInitialized){if(this.rowsToData(t),this.topInitialized){for(this.topRow&&this.topRow.deleteCells(),e=this.generateRow("top",this.rowsToData(t)),this.topRow=e;this.topElement.firstChild;)this.topElement.removeChild(this.topElement.firstChild);this.topElement.appendChild(e.getElement()),e.initialize(!0)}if(this.botInitialized){for(this.botRow&&this.botRow.deleteCells(),e=this.generateRow("bottom",this.rowsToData(t)),this.botRow=e;this.botElement.firstChild;)this.botElement.removeChild(this.botElement.firstChild);this.botElement.appendChild(e.getElement()),e.initialize(!0)}this.table.rowManager.adjustTableSize(),this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layout()}}recalcRowGroup(t){this.recalcGroup(this.table.modules.groupRows.getRowGroup(t))}recalcAll(){(this.topCalcs.length||this.botCalcs.length)&&("group"!==this.table.options.columnCalcs&&this.recalcActiveRows(),this.table.options.groupBy&&"table"!==this.table.options.columnCalcs&&this.table.modules.groupRows.getChildGroups().forEach((t=>{this.recalcGroup(t)})))}recalcGroup(t){var e,n;t&&t.calcs&&(t.calcs.bottom&&(e=this.rowsToData(t.rows),n=this.generateRowData("bottom",e),t.calcs.bottom.updateData(n),t.calcs.bottom.reinitialize()),t.calcs.top&&(e=this.rowsToData(t.rows),n=this.generateRowData("top",e),t.calcs.top.updateData(n),t.calcs.top.reinitialize()))}generateTopRow(t){return this.generateRow("top",this.rowsToData(t))}generateBottomRow(t){return this.generateRow("bottom",this.rowsToData(t))}rowsToData(t){var e=[];return t.forEach((t=>{if(e.push(t.getData()),this.table.options.dataTree&&this.table.options.dataTreeChildColumnCalcs&&t.modules.dataTree.open){var n=this.rowsToData(this.table.modules.dataTree.getFilteredTreeChildren(t));e=e.concat(n)}})),e}generateRow(t,e){var n,i=this.generateRowData(t,e);return this.table.modExists("mutator")&&this.table.modules.mutator.disable(),n=new M(i,this,"calc"),this.table.modExists("mutator")&&this.table.modules.mutator.enable(),n.getElement().classList.add("tabulator-calcs","tabulator-calcs-"+t),n.component=!1,n.getComponent=()=>(n.component||(n.component=new g(this)),n.component),n.generateCells=()=>{var e=[];this.table.columnManager.columnsByIndex.forEach((i=>{this.genColumn.setField(i.getField()),this.genColumn.hozAlign=i.hozAlign,i.definition[t+"CalcFormatter"]&&this.table.modExists("format")?this.genColumn.modules.format={formatter:this.table.modules.format.getFormatter(i.definition[t+"CalcFormatter"]),params:i.definition[t+"CalcFormatterParams"]||{}}:this.genColumn.modules.format={formatter:this.table.modules.format.getFormatter("plaintext"),params:{}},this.genColumn.definition.cssClass=i.definition.cssClass;var r=new y(this.genColumn,n);r.getElement(),r.column=i,r.setWidth(),i.cells.push(r),e.push(r),i.visible||r.hide()})),n.cells=e},n}generateRowData(t,e){var n,i,r={},o="top"==t?this.topCalcs:this.botCalcs,a="top"==t?"topCalc":"botCalc";return o.forEach((function(t){var o=[];t.modules.columnCalcs&&t.modules.columnCalcs[a]&&(e.forEach((function(e){o.push(t.getFieldValue(e))})),i=a+"Params",n="function"==typeof t.modules.columnCalcs[i]?t.modules.columnCalcs[i](o,e):t.modules.columnCalcs[i],t.setFieldValue(r,t.modules.columnCalcs[a](o,e,n)))})),r}hasTopCalcs(){return!!this.topCalcs.length}hasBottomCalcs(){return!!this.botCalcs.length}redraw(){this.topRow&&this.topRow.normalizeHeight(!0),this.botRow&&this.botRow.normalizeHeight(!0)}getResults(){var t={};return this.table.options.groupBy&&this.table.modExists("groupRows")?this.table.modules.groupRows.getGroups(!0).forEach((e=>{t[e.getKey()]=this.getGroupResults(e)})):t={top:this.topRow?this.topRow.getData():{},bottom:this.botRow?this.botRow.getData():{}},t}getGroupResults(t){var e=t._getSelf(),n=t.getSubGroups(),i={};return n.forEach((t=>{i[t.getKey()]=this.getGroupResults(t)})),{top:e.calcs.top?e.calcs.top.getData():{},bottom:e.calcs.bottom?e.calcs.bottom.getData():{},groups:i}}}S.moduleName="columnCalcs",S.calculations=E;class k extends s{constructor(t){super(t),this.indent=10,this.field="",this.collapseEl=null,this.expandEl=null,this.branchEl=null,this.elementField=!1,this.startOpen=function(){},this.displayIndex=0,this.registerTableOption("dataTree",!1),this.registerTableOption("dataTreeFilter",!0),this.registerTableOption("dataTreeSort",!0),this.registerTableOption("dataTreeElementColumn",!1),this.registerTableOption("dataTreeBranchElement",!0),this.registerTableOption("dataTreeChildIndent",9),this.registerTableOption("dataTreeChildField","_children"),this.registerTableOption("dataTreeCollapseElement",!1),this.registerTableOption("dataTreeExpandElement",!1),this.registerTableOption("dataTreeStartExpanded",!1),this.registerTableOption("dataTreeChildColumnCalcs",!1),this.registerTableOption("dataTreeSelectPropagate",!1),this.registerComponentFunction("row","treeCollapse",this.collapseRow.bind(this)),this.registerComponentFunction("row","treeExpand",this.expandRow.bind(this)),this.registerComponentFunction("row","treeToggle",this.toggleRow.bind(this)),this.registerComponentFunction("row","getTreeParent",this.getTreeParent.bind(this)),this.registerComponentFunction("row","getTreeChildren",this.getRowChildren.bind(this)),this.registerComponentFunction("row","addTreeChild",this.addTreeChildRow.bind(this))}initialize(){if(this.table.options.dataTree){var t=null,e=this.table.columnManager.getFirstVisibileColumn(),n=this.table.options;switch(this.field=n.dataTreeChildField,this.indent=n.dataTreeChildIndent,this.elementField=n.dataTreeElementColumn||!!e&&e.field,n.dataTreeBranchElement&&(!0===n.dataTreeBranchElement?(this.branchEl=document.createElement("div"),this.branchEl.classList.add("tabulator-data-tree-branch")):"string"==typeof n.dataTreeBranchElement?((t=document.createElement("div")).innerHTML=n.dataTreeBranchElement,this.branchEl=t.firstChild):this.branchEl=n.dataTreeBranchElement),n.dataTreeCollapseElement?"string"==typeof n.dataTreeCollapseElement?((t=document.createElement("div")).innerHTML=n.dataTreeCollapseElement,this.collapseEl=t.firstChild):this.collapseEl=n.dataTreeCollapseElement:(this.collapseEl=document.createElement("div"),this.collapseEl.classList.add("tabulator-data-tree-control"),this.collapseEl.tabIndex=0,this.collapseEl.innerHTML="<div class='tabulator-data-tree-control-collapse'></div>"),n.dataTreeExpandElement?"string"==typeof n.dataTreeExpandElement?((t=document.createElement("div")).innerHTML=n.dataTreeExpandElement,this.expandEl=t.firstChild):this.expandEl=n.dataTreeExpandElement:(this.expandEl=document.createElement("div"),this.expandEl.classList.add("tabulator-data-tree-control"),this.expandEl.tabIndex=0,this.expandEl.innerHTML="<div class='tabulator-data-tree-control-expand'></div>"),typeof n.dataTreeStartExpanded){case"boolean":this.startOpen=function(t,e){return n.dataTreeStartExpanded};break;case"function":this.startOpen=n.dataTreeStartExpanded;break;default:this.startOpen=function(t,e){return n.dataTreeStartExpanded[e]}}this.subscribe("row-init",this.initializeRow.bind(this)),this.subscribe("row-layout-after",this.layoutRow.bind(this)),this.subscribe("row-relayout",this.layoutRow.bind(this)),this.subscribe("row-deleted",this.rowDelete.bind(this),0),this.subscribe("row-data-changed",this.rowDataChanged.bind(this),10),this.subscribe("column-moving-rows",this.columnMoving.bind(this)),this.registerDisplayHandler(this.getRows.bind(this),30)}}getRowChildren(t){return this.getTreeChildren(t,!0)}columnMoving(){var t=[];return this.table.rowManager.rows.forEach((e=>{t=t.concat(this.getTreeChildren(e,!1,!0))})),t}rowDataChanged(t,e,n){this.redrawNeeded(n)&&(this.initializeRow(t),e&&(this.layoutRow(t),this.refreshData(!0)))}initializeRow(t){var e=t.getData()[this.field],n=Array.isArray(e),i=n||!n&&"object"==typeof e&&null!==e;!i&&t.modules.dataTree&&t.modules.dataTree.branchEl&&t.modules.dataTree.branchEl.parentNode.removeChild(t.modules.dataTree.branchEl),!i&&t.modules.dataTree&&t.modules.dataTree.controlEl&&t.modules.dataTree.controlEl.parentNode.removeChild(t.modules.dataTree.controlEl),t.modules.dataTree={index:t.modules.dataTree?t.modules.dataTree.index:0,open:!!i&&(t.modules.dataTree?t.modules.dataTree.open:this.startOpen(t.getComponent(),0)),controlEl:!(!t.modules.dataTree||!i)&&t.modules.dataTree.controlEl,branchEl:!(!t.modules.dataTree||!i)&&t.modules.dataTree.branchEl,parent:!!t.modules.dataTree&&t.modules.dataTree.parent,children:i}}reinitializeRowChildren(t){this.getTreeChildren(t,!1,!0).forEach((function(t){t.reinitialize(!0)}))}layoutRow(t){var e=(this.elementField?t.getCell(this.elementField):t.getCells()[0]).getElement(),n=t.modules.dataTree;n.branchEl&&(n.branchEl.parentNode&&n.branchEl.parentNode.removeChild(n.branchEl),n.branchEl=!1),n.controlEl&&(n.controlEl.parentNode&&n.controlEl.parentNode.removeChild(n.controlEl),n.controlEl=!1),this.generateControlElement(t,e),t.getElement().classList.add("tabulator-tree-level-"+n.index),n.index&&(this.branchEl?(n.branchEl=this.branchEl.cloneNode(!0),e.insertBefore(n.branchEl,e.firstChild),this.table.rtl?n.branchEl.style.marginRight=(n.branchEl.offsetWidth+n.branchEl.style.marginLeft)*(n.index-1)+n.index*this.indent+"px":n.branchEl.style.marginLeft=(n.branchEl.offsetWidth+n.branchEl.style.marginRight)*(n.index-1)+n.index*this.indent+"px"):this.table.rtl?e.style.paddingRight=parseInt(window.getComputedStyle(e,null).getPropertyValue("padding-right"))+n.index*this.indent+"px":e.style.paddingLeft=parseInt(window.getComputedStyle(e,null).getPropertyValue("padding-left"))+n.index*this.indent+"px")}generateControlElement(t,e){var n=t.modules.dataTree,i=(e=e||t.getCells()[0].getElement(),n.controlEl);!1!==n.children&&(n.open?(n.controlEl=this.collapseEl.cloneNode(!0),n.controlEl.addEventListener("click",(e=>{e.stopPropagation(),this.collapseRow(t)}))):(n.controlEl=this.expandEl.cloneNode(!0),n.controlEl.addEventListener("click",(e=>{e.stopPropagation(),this.expandRow(t)}))),n.controlEl.addEventListener("mousedown",(t=>{t.stopPropagation()})),i&&i.parentNode===e?i.parentNode.replaceChild(n.controlEl,i):e.insertBefore(n.controlEl,e.firstChild))}setDisplayIndex(t){this.displayIndex=t}getDisplayIndex(){return this.displayIndex}getRows(t){var e=[];return t.forEach(((t,n)=>{var i;e.push(t),t instanceof M&&(t.create(),(i=t.modules.dataTree.children).index||!1===i.children||this.getChildren(t).forEach((t=>{t.create(),e.push(t)})))})),e}getChildren(t,e){var n=t.modules.dataTree,i=[],r=[];return!1!==n.children&&(n.open||e)&&(Array.isArray(n.children)||(n.children=this.generateChildren(t)),i=this.table.modExists("filter")&&this.table.options.dataTreeFilter?this.table.modules.filter.filter(n.children):n.children,this.table.modExists("sort")&&this.table.options.dataTreeSort&&this.table.modules.sort.sort(i),i.forEach((t=>{r.push(t),this.getChildren(t).forEach((t=>{r.push(t)}))}))),r}generateChildren(t){var e=[],n=t.getData()[this.field];return Array.isArray(n)||(n=[n]),n.forEach((n=>{var i=new M(n||{},this.table.rowManager);i.create(),i.modules.dataTree.index=t.modules.dataTree.index+1,i.modules.dataTree.parent=t,i.modules.dataTree.children&&(i.modules.dataTree.open=this.startOpen(i.getComponent(),i.modules.dataTree.index)),e.push(i)})),e}expandRow(t,e){var n=t.modules.dataTree;!1!==n.children&&(n.open=!0,t.reinitialize(),this.refreshData(!0),this.dispatchExternal("dataTreeRowExpanded",t.getComponent(),t.modules.dataTree.index))}collapseRow(t){var e=t.modules.dataTree;!1!==e.children&&(e.open=!1,t.reinitialize(),this.refreshData(!0),this.dispatchExternal("dataTreeRowCollapsed",t.getComponent(),t.modules.dataTree.index))}toggleRow(t){var e=t.modules.dataTree;!1!==e.children&&(e.open?this.collapseRow(t):this.expandRow(t))}getTreeParent(t){return!!t.modules.dataTree.parent&&t.modules.dataTree.parent.getComponent()}getFilteredTreeChildren(t){var e=t.modules.dataTree,n=[];return e.children&&(Array.isArray(e.children)||(e.children=this.generateChildren(t)),(this.table.modExists("filter")&&this.table.options.dataTreeFilter?this.table.modules.filter.filter(e.children):e.children).forEach((t=>{t instanceof M&&n.push(t)}))),n}rowDelete(t){var e,n=t.modules.dataTree.parent;n&&(!1!==(e=this.findChildIndex(t,n))&&n.data[this.field].splice(e,1),n.data[this.field].length||delete n.data[this.field],this.initializeRow(n),this.layoutRow(n)),this.refreshData(!0)}addTreeChildRow(t,e,n,i){var r=!1;"string"==typeof e&&(e=JSON.parse(e)),Array.isArray(t.data[this.field])||(t.data[this.field]=[],t.modules.dataTree.open=this.startOpen(t.getComponent(),t.modules.dataTree.index)),void 0!==i&&!1!==(r=this.findChildIndex(i,t))&&t.data[this.field].splice(n?r:r+1,0,e),!1===r&&(n?t.data[this.field].unshift(e):t.data[this.field].push(e)),this.initializeRow(t),this.layoutRow(t),this.refreshData(!0)}findChildIndex(t,e){var n=!1;return"object"==typeof t?t instanceof M?n=t.data:t instanceof RowComponent?n=t._getSelf().data:"undefined"!=typeof HTMLElement&&t instanceof HTMLElement&&e.modules.dataTree&&(n=e.modules.dataTree.children.find((e=>e instanceof M&&e.element===t)))&&(n=n.data):n=null!=t&&e.data[this.field].find((e=>e.data[this.table.options.index]==t)),n&&(Array.isArray(e.data[this.field])&&(n=e.data[this.field].indexOf(n)),-1==n&&(n=!1)),n}getTreeChildren(t,e,n){var i=t.modules.dataTree,r=[];return i.children&&(Array.isArray(i.children)||(i.children=this.generateChildren(t)),i.children.forEach((t=>{t instanceof M&&(r.push(e?t.getComponent():t),n&&(r=r.concat(this.getTreeChildren(t,e,n))))}))),r}checkForRestyle(t){t.row.cells.indexOf(t)||this.layoutRow(t.row)}getChildField(){return this.field}redrawNeeded(t){return!!this.field&&void 0!==t[this.field]||!!this.elementField&&void 0!==t[this.elementField]}}k.moduleName="dataTree";var C={csv:function(t,e,n){var i=e&&e.delimiter?e.delimiter:",",r=[],o=[];t.forEach((t=>{var e=[];switch(t.type){case"group":console.warn("Download Warning - CSV downloader cannot process row groups");break;case"calc":console.warn("Download Warning - CSV downloader cannot process column calculations");break;case"header":t.columns.forEach(((t,e)=>{t&&1===t.depth&&(o[e]=void 0===t.value||null===t.value?"":'"'+String(t.value).split('"').join('""')+'"')}));break;case"row":t.columns.forEach((t=>{if(t){switch(typeof t.value){case"object":t.value=JSON.stringify(t.value);break;case"undefined":case"null":t.value=""}e.push('"'+String(t.value).split('"').join('""')+'"')}})),r.push(e.join(i))}})),o.length&&r.unshift(o.join(i)),r=r.join("\n"),e.bom&&(r="\ufeff"+r),n(r,"text/csv")},json:function(t,e,n){var i=[];t.forEach((t=>{var e={};switch(t.type){case"header":break;case"group":console.warn("Download Warning - JSON downloader cannot process row groups");break;case"calc":console.warn("Download Warning - JSON downloader cannot process column calculations");break;case"row":t.columns.forEach((t=>{t&&(e[t.component.getField()]=t.value)})),i.push(e)}})),n(i=JSON.stringify(i,null,"\t"),"application/json")},pdf:function(t,e,n){var i=[],r=[],o={},a=e.rowGroupStyles||{fontStyle:"bold",fontSize:12,cellPadding:6,fillColor:220},s=e.rowCalcStyles||{fontStyle:"bold",fontSize:10,cellPadding:4,fillColor:232},l=e.jsPDF||{},u=e&&e.title?e.title:"";function c(t,e){var n=[];return t.columns.forEach((t=>{var i;if(t){switch(typeof t.value){case"object":t.value=JSON.stringify(t.value);break;case"undefined":case"null":t.value=""}i={content:t.value,colSpan:t.width,rowSpan:t.height},e&&(i.styles=e),n.push(i)}else n.push("")})),n}l.orientation||(l.orientation=e.orientation||"landscape"),l.unit||(l.unit="pt"),t.forEach((t=>{switch(t.type){case"header":i.push(c(t));break;case"group":r.push(c(t,a));break;case"calc":r.push(c(t,s));break;case"row":r.push(c(t))}}));var h=new jspdf.jsPDF(l);e&&e.autoTable&&(o="function"==typeof e.autoTable?e.autoTable(h)||{}:e.autoTable),u&&(o.didDrawPage=function(t){h.text(u,40,30)}),o.head=i,o.body=r,h.autoTable(o),e&&e.documentProcessing&&e.documentProcessing(h),n(h.output("arraybuffer"),"application/pdf")},xlsx:function(t,e,n){var i=e.sheetName||"Sheet1",r=XLSX.utils.book_new(),o=new a(this);function s(){var e=[],n=[],i={},r={s:{c:0,r:0},e:{c:t[0]?t[0].columns.reduce(((t,e)=>t+(e&&e.width?e.width:1)),0):0,r:t.length}};return t.forEach(((t,i)=>{var r=[];t.columns.forEach((function(t,e){t?(r.push(t.value instanceof Date||"object"!=typeof t.value?t.value:JSON.stringify(t.value)),(t.width>1||t.height>-1)&&n.push({s:{r:i,c:e},e:{r:i+t.height-1,c:e+t.width-1}})):r.push("")})),e.push(r)})),XLSX.utils.sheet_add_aoa(i,e),i["!ref"]=XLSX.utils.encode_range(r),n.length&&(i["!merges"]=n),i}if(r.SheetNames=[],r.Sheets={},e.sheetOnly)n(s());else{if(e.sheets)for(var l in e.sheets)!0===e.sheets[l]?(r.SheetNames.push(l),r.Sheets[l]=s()):(r.SheetNames.push(l),o.commsSend(e.sheets[l],"download","intercept",{type:"xlsx",options:{sheetOnly:!0},active:this.active,intercept:function(t){r.Sheets[l]=t}}));else r.SheetNames.push(i),r.Sheets[i]=s();e.documentProcessing&&(r=e.documentProcessing(r)),n(function(t){for(var e=new ArrayBuffer(t.length),n=new Uint8Array(e),i=0;i!=t.length;++i)n[i]=255&t.charCodeAt(i);return e}(XLSX.write(r,{bookType:"xlsx",bookSST:!0,type:"binary"})),"application/octet-stream")}},html:function(t,e,n){this.modExists("export",!0)&&n(this.modules.export.genereateHTMLTable(t),"text/html")}};class T extends s{constructor(t){super(t),this.registerTableOption("downloadReady",(function(t,e){return e})),this.registerTableOption("downloadConfig",{}),this.registerTableOption("downloadRowRange","active"),this.registerColumnOption("download"),this.registerColumnOption("titleDownload")}initialize(){this.registerTableFunction("download",this.download.bind(this)),this.registerTableFunction("downloadToTab",this.downloadToTab.bind(this))}downloadToTab(t,e,n,i){this.download(t,e,n,i,!0)}download(t,e,n,i,r){var o=!1;if("function"==typeof t?o=t:T.downloaders[t]?o=T.downloaders[t]:console.warn("Download Error - No such download type found: ",t),o){var a=this.generateExportList(i);o.call(this.table,a,n||{},function(n,i){r?!0===r?this.triggerDownload(n,i,t,e,!0):r(n):this.triggerDownload(n,i,t,e)}.bind(this))}}generateExportList(t){var e=this.table.modules.export.generateExportList(this.table.options.downloadConfig,!1,t||this.table.options.downloadRowRange,"download"),n=this.table.options.groupHeaderDownload;return n&&!Array.isArray(n)&&(n=[n]),e.forEach((t=>{var e;"group"===t.type&&(e=t.columns[0],n&&n[t.indent]&&(e.value=n[t.indent](e.value,t.component._group.getRowCount(),t.component._group.getData(),t.component)))})),e}triggerDownload(t,e,n,i,r){var o=document.createElement("a"),a=new Blob([t],{type:e});i=i||"Tabulator."+("function"==typeof n?"txt":n);(a=this.table.options.downloadReady(t,a))&&(r?window.open(window.URL.createObjectURL(a)):navigator.msSaveOrOpenBlob?navigator.msSaveOrOpenBlob(a,i):(o.setAttribute("href",window.URL.createObjectURL(a)),o.setAttribute("download",i),o.style.display="none",document.body.appendChild(o),o.click(),document.body.removeChild(o)),this.dispatchExternal("downloadComplete"))}commsReceived(t,e,n){if("intercept"===e)this.download(n.type,"",n.options,n.active,n.intercept)}}function D(t,e){var n=e.mask,i=void 0!==e.maskLetterChar?e.maskLetterChar:"A",r=void 0!==e.maskNumberChar?e.maskNumberChar:"9",o=void 0!==e.maskWildcardChar?e.maskWildcardChar:"*";function a(e){var s=n[e];void 0!==s&&s!==o&&s!==i&&s!==r&&(t.value=t.value+""+s,a(e+1))}t.addEventListener("keydown",(e=>{var a=t.value.length,s=e.key;if(e.keyCode>46){if(a>=n.length)return e.preventDefault(),e.stopPropagation(),!1;switch(n[a]){case i:if(s.toUpperCase()==s.toLowerCase())return e.preventDefault(),e.stopPropagation(),!1;break;case r:if(isNaN(s))return e.preventDefault(),e.stopPropagation(),!1;break;case o:break;default:if(s!==n[a])return e.preventDefault(),e.stopPropagation(),!1}}})),t.addEventListener("keyup",(n=>{n.keyCode>46&&e.maskAutoFill&&a(t.value.length)})),t.placeholder||(t.placeholder=n),e.maskAutoFill&&a(t.value.length)}T.moduleName="download",T.downloaders=C;var L={input:function(t,e,n,i,r){var o=t.getValue(),a=document.createElement("input");if(a.setAttribute("type",r.search?"search":"text"),a.style.padding="4px",a.style.width="100%",a.style.boxSizing="border-box",r.elementAttributes&&"object"==typeof r.elementAttributes)for(let t in r.elementAttributes)"+"==t.charAt(0)?(t=t.slice(1),a.setAttribute(t,a.getAttribute(t)+r.elementAttributes["+"+t])):a.setAttribute(t,r.elementAttributes[t]);function s(t){null==o&&""!==a.value||a.value!==o?n(a.value)&&(o=a.value):i()}return a.value=void 0!==o?o:"",e((function(){a.focus({preventScroll:!0}),a.style.height="100%"})),a.addEventListener("change",s),a.addEventListener("blur",s),a.addEventListener("keydown",(function(t){switch(t.keyCode){case 13:s();break;case 27:i();break;case 35:case 36:t.stopPropagation()}})),r.mask&&D(a,r),a},textarea:function(t,e,n,i,r){var o=t.getValue(),a=r.verticalNavigation||"hybrid",s=String(null!=o?o:""),l=((s.match(/(?:\r\n|\r|\n)/g)||[]).length,document.createElement("textarea")),u=0;if(l.style.display="block",l.style.padding="2px",l.style.height="100%",l.style.width="100%",l.style.boxSizing="border-box",l.style.whiteSpace="pre-wrap",l.style.resize="none",r.elementAttributes&&"object"==typeof r.elementAttributes)for(let t in r.elementAttributes)"+"==t.charAt(0)?(t=t.slice(1),l.setAttribute(t,l.getAttribute(t)+r.elementAttributes["+"+t])):l.setAttribute(t,r.elementAttributes[t]);function c(e){null==o&&""!==l.value||l.value!==o?(n(l.value)&&(o=l.value),setTimeout((function(){t.getRow().normalizeHeight()}),300)):i()}return l.value=s,e((function(){l.focus({preventScroll:!0}),l.style.height="100%",l.scrollHeight,l.style.height=l.scrollHeight+"px",t.getRow().normalizeHeight()})),l.addEventListener("change",c),l.addEventListener("blur",c),l.addEventListener("keyup",(function(){l.style.height="";var e=l.scrollHeight;l.style.height=e+"px",e!=u&&(u=e,t.getRow().normalizeHeight())})),l.addEventListener("keydown",(function(t){switch(t.keyCode){case 27:i();break;case 38:("editor"==a||"hybrid"==a&&l.selectionStart)&&(t.stopImmediatePropagation(),t.stopPropagation());break;case 40:("editor"==a||"hybrid"==a&&l.selectionStart!==l.value.length)&&(t.stopImmediatePropagation(),t.stopPropagation());break;case 35:case 36:t.stopPropagation()}})),r.mask&&D(l,r),l},number:function(t,e,n,i,r){var o=t.getValue(),a=r.verticalNavigation||"editor",s=document.createElement("input");if(s.setAttribute("type","number"),void 0!==r.max&&s.setAttribute("max",r.max),void 0!==r.min&&s.setAttribute("min",r.min),void 0!==r.step&&s.setAttribute("step",r.step),s.style.padding="4px",s.style.width="100%",s.style.boxSizing="border-box",r.elementAttributes&&"object"==typeof r.elementAttributes)for(let t in r.elementAttributes)"+"==t.charAt(0)?(t=t.slice(1),s.setAttribute(t,s.getAttribute(t)+r.elementAttributes["+"+t])):s.setAttribute(t,r.elementAttributes[t]);s.value=o;var l=function(t){u()};function u(){var t=s.value;isNaN(t)||""===t||(t=Number(t)),t!==o?n(t)&&(o=t):i()}return e((function(){s.removeEventListener("blur",l),s.focus({preventScroll:!0}),s.style.height="100%",s.addEventListener("blur",l)})),s.addEventListener("keydown",(function(t){switch(t.keyCode){case 13:u();break;case 27:i();break;case 38:case 40:"editor"==a&&(t.stopImmediatePropagation(),t.stopPropagation());break;case 35:case 36:t.stopPropagation()}})),r.mask&&D(s,r),s},range:function(t,e,n,i,r){var o=t.getValue(),a=document.createElement("input");if(a.setAttribute("type","range"),void 0!==r.max&&a.setAttribute("max",r.max),void 0!==r.min&&a.setAttribute("min",r.min),void 0!==r.step&&a.setAttribute("step",r.step),a.style.padding="4px",a.style.width="100%",a.style.boxSizing="border-box",r.elementAttributes&&"object"==typeof r.elementAttributes)for(let t in r.elementAttributes)"+"==t.charAt(0)?(t=t.slice(1),a.setAttribute(t,a.getAttribute(t)+r.elementAttributes["+"+t])):a.setAttribute(t,r.elementAttributes[t]);function s(){var t=a.value;isNaN(t)||""===t||(t=Number(t)),t!=o?n(t)&&(o=t):i()}return a.value=o,e((function(){a.focus({preventScroll:!0}),a.style.height="100%"})),a.addEventListener("blur",(function(t){s()})),a.addEventListener("keydown",(function(t){switch(t.keyCode){case 13:s();break;case 27:i()}})),a},select:function(t,e,n,i,r){var o=this,a=t.getElement(),s=t.getValue(),u=r.verticalNavigation||"editor",c=void 0!==s||null===s?Array.isArray(s)?s:[s]:void 0!==r.defaultValue?r.defaultValue:[],h=document.createElement("input"),d=document.createElement("div"),f=r.multiselect,p=[],m={},g=[],v=[],y=!0,b=!1,_="",w=null;function x(e){var n,i={},r=o.table.getData();return(n=e?o.table.columnManager.getColumnByField(e):t.getColumn()._getSelf())?r.forEach((function(t){var e=n.getFieldValue(t);null!=e&&""!==e&&(i[e]=!0)})):console.warn("unable to find matching column to create select lookup list:",e),Object.keys(i)}function M(e,n){var i=[],o=[];function a(t){t={label:t.label,value:t.value,itemParams:t.itemParams,elementAttributes:t.elementAttributes,element:!1};return n.indexOf(t.value)>-1&&S(t),i.push(t),o.push(t),t}if("function"==typeof e&&(e=e(t)),Array.isArray(e))e.forEach((function(t){var e;"object"==typeof t?t.options?(e={label:t.label,group:!0,itemParams:t.itemParams,elementAttributes:t.elementAttributes,element:!1},o.push(e),t.options.forEach((function(t){a(t)}))):a(t):(e={label:t,value:t,element:!1},n.indexOf(e.value)>-1&&S(e),i.push(e),o.push(e))}));else for(var s in e){var l={label:e[s],value:s,element:!1};n.indexOf(l.value)>-1&&S(l),i.push(l),o.push(l)}r.sortValuesList&&(i.sort(((t,e)=>t.label<e.label?-1:t.label>e.label?1:0)),o.sort(((t,e)=>t.label<e.label?-1:t.label>e.label?1:0)),"asc"!==r.sortValuesList&&(i.reverse(),o.reverse())),p=i,g=o,function(){for(;d.firstChild;)d.removeChild(d.firstChild);g.forEach((function(e){var n=e.element;if(!n){if(n=document.createElement("div"),e.label=r.listItemFormatter?r.listItemFormatter(e.value,e.label,t,n,e.itemParams):e.label,e.group?(n.classList.add("tabulator-edit-select-list-group"),n.tabIndex=0,n.innerHTML=""===e.label?"&nbsp;":e.label):(n.classList.add("tabulator-edit-select-list-item"),n.tabIndex=0,n.innerHTML=""===e.label?"&nbsp;":e.label,n.addEventListener("click",(function(){b=!0,setTimeout((()=>{b=!1}),10),f?(C(e),h.focus()):T(e)})),v.indexOf(e)>-1&&n.classList.add("active")),e.elementAttributes&&"object"==typeof e.elementAttributes)for(let t in e.elementAttributes)"+"==t.charAt(0)?(t=t.slice(1),n.setAttribute(t,h.getAttribute(t)+e.elementAttributes["+"+t])):n.setAttribute(t,e.elementAttributes[t]);n.addEventListener("mousedown",(function(){y=!1,setTimeout((function(){y=!0}),10)})),e.element=n}d.appendChild(n)}))}()}function E(t,e){!f&&m&&m.element&&m.element.classList.remove("active"),m&&m.element&&m.element.classList.remove("focused"),m=t,t.element&&(t.element.classList.add("focused"),e&&t.element.classList.add("active")),t&&t.element&&t.element.scrollIntoView&&t.element.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})}function S(t){-1==v.indexOf(t)&&(v.push(t),E(t,!0)),L()}function k(t){var e=v[t];t>-1&&(v.splice(t,1),e.element&&e.element.classList.remove("active"))}function C(t){t||(t=m);var e=v.indexOf(t);e>-1?k(e):(!0!==f&&v.length>=f&&k(0),S(t)),L()}function T(t){O(),t||(t=m),t&&(h.value=t.label,n(t.value)),c=[t.value]}function D(t){t||O();var e=[];v.forEach((t=>{e.push(t.value)})),c=e,n(e)}function L(){var t=[];v.forEach((e=>{t.push(e.label)})),h.value=t.join(", "),!1===o.currentCell&&D(!0)}function A(){O(),i()}function O(){d.parentNode&&d.parentNode.removeChild(d),o.table.rowManager.element.removeEventListener("scroll",A)}if((Array.isArray(r)||!Array.isArray(r)&&"object"==typeof r&&!r.values)&&(console.warn("DEPRECATION WARNING - values for the select editor must now be passed into the values property of the editorParams object, not as the editorParams object"),r={values:r}),h.setAttribute("type","text"),h.style.padding="4px",h.style.width="100%",h.style.boxSizing="border-box",h.style.cursor="default",h.readOnly=0!=this.currentCell,r.elementAttributes&&"object"==typeof r.elementAttributes)for(let t in r.elementAttributes)"+"==t.charAt(0)?(t=t.slice(1),h.setAttribute(t,h.getAttribute(t)+r.elementAttributes["+"+t])):h.setAttribute(t,r.elementAttributes[t]);return h.value=void 0!==s||null===s?s:"",h.addEventListener("search",(function(t){h.value||(!function(){var t=v.length;for(let e=0;e<t;e++)k(0)}(),D())})),h.addEventListener("keydown",(function(t){var e;switch(t.keyCode){case 38:e=p.indexOf(m),("editor"==u||"hybrid"==u&&e)&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault(),e>0&&E(p[e-1],!f));break;case 40:e=p.indexOf(m),("editor"==u||"hybrid"==u&&e<p.length-1)&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault(),e<p.length-1&&E(-1==e?p[0]:p[e+1],!f));break;case 37:case 39:t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault();break;case 13:f?C():T();break;case 27:A();break;case 9:break;default:!1===o.currentCell&&t.preventDefault(),t.keyCode>=38&&t.keyCode<=90&&function(t){clearTimeout(w);var e=String.fromCharCode(event.keyCode).toLowerCase();_+=e.toLowerCase();var n=p.find((t=>void 0!==t.label&&t.label.toLowerCase().startsWith(_)));n&&E(n,!f),w=setTimeout((()=>{_=""}),800)}(t.keyCode)}})),h.addEventListener("blur",(function(t){y&&(f?D():A())})),h.addEventListener("focus",(function(t){b||function(){if(v=[],!d.parentNode){!0===r.values?M(x(),c):"string"==typeof r.values?M(x(r.values),c):M(r.values||[],c);var t=l.elOffset(a);d.style.minWidth=a.offsetWidth+"px",d.style.top=t.top+a.offsetHeight+"px",d.style.left=t.left+"px",d.addEventListener("mousedown",(function(t){y=!1,setTimeout((function(){y=!0}),10)})),document.body.appendChild(d)}}()})),(d=document.createElement("div")).classList.add("tabulator-edit-select-list"),e((function(){h.style.height="100%",h.focus({preventScroll:!0})})),setTimeout((()=>{this.table.rowManager.element.addEventListener("scroll",A)}),10),h},autocomplete:function(t,e,n,i,r){var o=this,a=t.getElement(),s=t.getValue(),u=r.verticalNavigation||"editor",c=void 0!==s||null===s?s:void 0!==r.defaultValue?r.defaultValue:"",h=document.createElement("input"),d=document.createElement("div"),f=[],p=!1,m=!0,g=!1;if(h.setAttribute("type","search"),h.style.padding="4px",h.style.width="100%",h.style.boxSizing="border-box",r.elementAttributes&&"object"==typeof r.elementAttributes)for(let t in r.elementAttributes)"+"==t.charAt(0)?(t=t.slice(1),h.setAttribute(t,h.getAttribute(t)+r.elementAttributes["+"+t])):h.setAttribute(t,r.elementAttributes[t]);function v(){!0===r.values?g=y():"string"==typeof r.values&&(g=y(r.values))}function y(e){var n,i={},a=o.table.getData();return(n=e?o.table.columnManager.getColumnByField(e):t.getColumn()._getSelf())?(a.forEach((function(t){var e=n.getFieldValue(t);null!=e&&""!==e&&(i[e]=!0)})),i=r.sortValuesList?"asc"==r.sortValuesList?Object.keys(i).sort():Object.keys(i).sort().reverse():Object.keys(i)):console.warn("unable to find matching column to create autocomplete lookup list:",e),i}function b(t,e){var n,i,o=[];n=g||(r.values||[]),r.searchFunc?(o=r.searchFunc(t,n))instanceof Promise?(_(void 0!==r.searchingPlaceholder?r.searchingPlaceholder:"Searching..."),o.then((t=>{M(w(t),e)})).catch((t=>{console.err("error in autocomplete search promise:",t)}))):M(w(o),e):(i=w(n),""===t?r.showListOnEmpty&&(o=i):i.forEach((function(e){null===e.value&&void 0===e.value||(String(e.value).toLowerCase().indexOf(String(t).toLowerCase())>-1||String(e.title).toLowerCase().indexOf(String(t).toLowerCase())>-1)&&o.push(e)})),M(o,e))}function _(t){var e=document.createElement("div");x(),!1!==t&&(e.classList.add("tabulator-edit-select-list-notice"),e.tabIndex=0,t instanceof Node?e.appendChild(t):e.innerHTML=t,d.appendChild(e))}function w(t){var e=[];if(Array.isArray(t))t.forEach((function(t){var n={};"object"==typeof t?(n.title=r.listItemFormatter?r.listItemFormatter(t.value,t.label):t.label,n.value=t.value):(n.title=r.listItemFormatter?r.listItemFormatter(t,t):t,n.value=t),e.push(n)}));else for(var n in t){var i={title:r.listItemFormatter?r.listItemFormatter(n,t[n]):t[n],value:n};e.push(i)}return e}function x(){for(;d.firstChild;)d.removeChild(d.firstChild)}function M(t,e){t.length?function(t,e){var n=!1;x(),(f=t).forEach((function(t){var i=t.element;i||((i=document.createElement("div")).classList.add("tabulator-edit-select-list-item"),i.tabIndex=0,i.innerHTML=t.title,i.addEventListener("click",(function(e){S(t),E()})),i.addEventListener("mousedown",(function(t){m=!1,setTimeout((function(){m=!0}),10)})),t.element=i,e&&t.value==s&&(h.value=t.title,t.element.classList.add("active"),n=!0),t===p&&(t.element.classList.add("active"),n=!0)),d.appendChild(i)})),n||S(!1)}(t,e):r.emptyPlaceholder&&_(r.emptyPlaceholder)}function E(){k(),p?s!==p.value?(s=p.value,h.value=p.title,n(p.value)):i():r.freetext||r.allowEmpty&&""===h.value?(s=h.value,n(h.value)):i()}function S(t,e){p&&p.element&&p.element.classList.remove("active"),p=t,t&&t.element&&t.element.classList.add("active"),t&&t.element&&t.element.scrollIntoView&&t.element.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})}function k(){d.parentNode&&d.parentNode.removeChild(d),o.table.rowManager.element.removeEventListener("scroll",C)}function C(){k(),i()}return d.classList.add("tabulator-edit-select-list"),d.addEventListener("mousedown",(function(t){m=!1,setTimeout((function(){m=!0}),10)})),h.addEventListener("keydown",(function(t){var e;switch(t.keyCode){case 38:e=f.indexOf(p),("editor"==u||"hybrid"==u&&e)&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault(),S(e>0&&f[e-1]));break;case 40:e=f.indexOf(p),("editor"==u||"hybrid"==u&&e<f.length-1)&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault(),e<f.length-1&&S(-1==e?f[0]:f[e+1]));break;case 37:case 39:t.stopImmediatePropagation(),t.stopPropagation();break;case 13:E();break;case 27:C();break;case 36:case 35:t.stopImmediatePropagation()}})),h.addEventListener("keyup",(function(t){switch(t.keyCode){case 38:case 37:case 39:case 40:case 13:case 27:break;default:b(h.value)}})),h.addEventListener("search",(function(t){b(h.value)})),h.addEventListener("blur",(function(t){m&&E()})),h.addEventListener("focus",(function(t){var e=c;v(),function(){if(!d.parentNode){for(;d.firstChild;)d.removeChild(d.firstChild);var t=l.elOffset(a);d.style.minWidth=a.offsetWidth+"px",d.style.top=t.top+a.offsetHeight+"px",d.style.left=t.left+"px",document.body.appendChild(d)}}(),h.value=e,b(e,!0)})),e((function(){h.style.height="100%",h.focus({preventScroll:!0})})),r.mask&&D(h,r),setTimeout((()=>{this.table.rowManager.element.addEventListener("scroll",C)}),10),v(),h.value=c,b(c,!0),h},star:function(t,e,n,i,r){var o=this,a=t.getElement(),s=t.getValue(),l=a.getElementsByTagName("svg").length||5,u=a.getElementsByTagName("svg")[0]?a.getElementsByTagName("svg")[0].getAttribute("width"):14,c=[],h=document.createElement("div"),d=document.createElementNS("http://www.w3.org/2000/svg","svg");function f(t){c.forEach((function(e,n){n<t?("ie"==o.table.browser?e.setAttribute("class","tabulator-star-active"):e.classList.replace("tabulator-star-inactive","tabulator-star-active"),e.innerHTML='<polygon fill="#488CE9" stroke="#014AAE" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>'):("ie"==o.table.browser?e.setAttribute("class","tabulator-star-inactive"):e.classList.replace("tabulator-star-active","tabulator-star-inactive"),e.innerHTML='<polygon fill="#010155" stroke="#686868" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>')}))}function p(t){var e=document.createElement("span"),i=d.cloneNode(!0);c.push(i),e.addEventListener("mouseenter",(function(e){e.stopPropagation(),e.stopImmediatePropagation(),f(t)})),e.addEventListener("mousemove",(function(t){t.stopPropagation(),t.stopImmediatePropagation()})),e.addEventListener("click",(function(e){e.stopPropagation(),e.stopImmediatePropagation(),n(t),a.blur()})),e.appendChild(i),h.appendChild(e)}function m(t){s=t,f(t)}if(a.style.whiteSpace="nowrap",a.style.overflow="hidden",a.style.textOverflow="ellipsis",h.style.verticalAlign="middle",h.style.display="inline-block",h.style.padding="4px",d.setAttribute("width",u),d.setAttribute("height",u),d.setAttribute("viewBox","0 0 512 512"),d.setAttribute("xml:space","preserve"),d.style.padding="0 1px",r.elementAttributes&&"object"==typeof r.elementAttributes)for(let t in r.elementAttributes)"+"==t.charAt(0)?(t=t.slice(1),h.setAttribute(t,h.getAttribute(t)+r.elementAttributes["+"+t])):h.setAttribute(t,r.elementAttributes[t]);for(var g=1;g<=l;g++)p(g);return f(s=Math.min(parseInt(s),l)),h.addEventListener("mousemove",(function(t){f(0)})),h.addEventListener("click",(function(t){n(0)})),a.addEventListener("blur",(function(t){i()})),a.addEventListener("keydown",(function(t){switch(t.keyCode){case 39:m(s+1);break;case 37:m(s-1);break;case 13:n(s);break;case 27:i()}})),h},progress:function(t,e,n,i,r){var o,a,s=t.getElement(),l=void 0===r.max?s.getElementsByTagName("div")[0]?.getAttribute("max")||100:r.max,u=void 0===r.min?s.getElementsByTagName("div")[0]?.getAttribute("min")||0:r.min,c=(l-u)/100,h=t.getValue()||0,d=document.createElement("div"),f=document.createElement("div");function p(){var t=window.getComputedStyle(s,null),e=c*Math.round(f.offsetWidth/((s.clientWidth-parseInt(t.getPropertyValue("padding-left"))-parseInt(t.getPropertyValue("padding-right")))/100))+u;n(e),s.setAttribute("aria-valuenow",e),s.setAttribute("aria-label",h)}if(d.style.position="absolute",d.style.right="0",d.style.top="0",d.style.bottom="0",d.style.width="5px",d.classList.add("tabulator-progress-handle"),f.style.display="inline-block",f.style.position="relative",f.style.height="100%",f.style.backgroundColor="#488CE9",f.style.maxWidth="100%",f.style.minWidth="0%",r.elementAttributes&&"object"==typeof r.elementAttributes)for(let t in r.elementAttributes)"+"==t.charAt(0)?(t=t.slice(1),f.setAttribute(t,f.getAttribute(t)+r.elementAttributes["+"+t])):f.setAttribute(t,r.elementAttributes[t]);return s.style.padding="4px 4px",h=Math.min(parseFloat(h),l),h=Math.max(parseFloat(h),u),h=Math.round((h-u)/c),f.style.width=h+"%",s.setAttribute("aria-valuemin",u),s.setAttribute("aria-valuemax",l),f.appendChild(d),d.addEventListener("mousedown",(function(t){o=t.screenX,a=f.offsetWidth})),d.addEventListener("mouseover",(function(){d.style.cursor="ew-resize"})),s.addEventListener("mousemove",(function(t){o&&(f.style.width=a+t.screenX-o+"px")})),s.addEventListener("mouseup",(function(t){o&&(t.stopPropagation(),t.stopImmediatePropagation(),o=!1,a=!1,p())})),s.addEventListener("keydown",(function(t){switch(t.keyCode){case 39:t.preventDefault(),f.style.width=f.clientWidth+s.clientWidth/100+"px";break;case 37:t.preventDefault(),f.style.width=f.clientWidth-s.clientWidth/100+"px";break;case 9:case 13:p();break;case 27:i()}})),s.addEventListener("blur",(function(){i()})),f},tickCross:function(t,e,n,i,r){var o=t.getValue(),a=document.createElement("input"),s=r.tristate,l=void 0===r.indeterminateValue?null:r.indeterminateValue,u=!1;if(a.setAttribute("type","checkbox"),a.style.marginTop="5px",a.style.boxSizing="border-box",r.elementAttributes&&"object"==typeof r.elementAttributes)for(let t in r.elementAttributes)"+"==t.charAt(0)?(t=t.slice(1),a.setAttribute(t,a.getAttribute(t)+r.elementAttributes["+"+t])):a.setAttribute(t,r.elementAttributes[t]);function c(t){return s?t?u?l:a.checked:a.checked&&!u?(a.checked=!1,a.indeterminate=!0,u=!0,l):(u=!1,a.checked):a.checked}return a.value=o,!s||void 0!==o&&o!==l&&""!==o||(u=!0,a.indeterminate=!0),"firefox"!=this.table.browser&&e((function(){a.focus({preventScroll:!0})})),a.checked=!0===o||"true"===o||"True"===o||1===o,e((function(){a.focus()})),a.addEventListener("change",(function(t){n(c())})),a.addEventListener("blur",(function(t){n(c(!0))})),a.addEventListener("keydown",(function(t){13==t.keyCode&&n(c()),27==t.keyCode&&i()})),a}};class A extends s{constructor(t){super(t),this.currentCell=!1,this.mouseClick=!1,this.recursionBlock=!1,this.invalidEdit=!1,this.editedCells=[],this.editors=A.editors,this.registerColumnOption("editable"),this.registerColumnOption("editor"),this.registerColumnOption("editorParams"),this.registerColumnOption("cellEditing"),this.registerColumnOption("cellEdited"),this.registerColumnOption("cellEditCancelled"),this.registerTableFunction("getEditedCells",this.getEditedCells.bind(this)),this.registerTableFunction("clearCellEdited",this.clearCellEdited.bind(this)),this.registerTableFunction("navigatePrev",this.navigatePrev.bind(this)),this.registerTableFunction("navigateNext",this.navigateNext.bind(this)),this.registerTableFunction("navigateLeft",this.navigateLeft.bind(this)),this.registerTableFunction("navigateRight",this.navigateRight.bind(this)),this.registerTableFunction("navigateUp",this.navigateUp.bind(this)),this.registerTableFunction("navigateDown",this.navigateDown.bind(this)),this.registerComponentFunction("cell","isEdited",this.cellisEdited.bind(this)),this.registerComponentFunction("cell","clearEdited",this.clearEdited.bind(this)),this.registerComponentFunction("cell","edit",this.editCell.bind(this)),this.registerComponentFunction("cell","cancelEdit",this.cellCancelEdit.bind(this)),this.registerComponentFunction("cell","navigatePrev",this.navigatePrev.bind(this)),this.registerComponentFunction("cell","navigateNext",this.navigateNext.bind(this)),this.registerComponentFunction("cell","navigateLeft",this.navigateLeft.bind(this)),this.registerComponentFunction("cell","navigateRight",this.navigateRight.bind(this)),this.registerComponentFunction("cell","navigateUp",this.navigateUp.bind(this)),this.registerComponentFunction("cell","navigateDown",this.navigateDown.bind(this))}initialize(){this.subscribe("cell-init",this.bindEditor.bind(this)),this.subscribe("cell-delete",this.clearEdited.bind(this)),this.subscribe("column-layout",this.initializeColumnCheck.bind(this)),this.subscribe("column-delete",this.columnDeleteCheck.bind(this)),this.subscribe("row-deleting",this.rowDeleteCheck.bind(this)),this.subscribe("data-refeshing",this.cancelEdit.bind(this)),this.subscribe("keybinding-nav-prev",this.navigatePrev.bind(this)),this.subscribe("keybinding-nav-next",this.keybindingNavigateNext.bind(this)),this.subscribe("keybinding-nav-left",this.navigateLeft.bind(this)),this.subscribe("keybinding-nav-right",this.navigateRight.bind(this)),this.subscribe("keybinding-nav-up",this.navigateUp.bind(this)),this.subscribe("keybinding-nav-down",this.navigateDown.bind(this))}keybindingNavigateNext(t){var e=this.currentCell,n=this.options("tabEndNewRow");e&&(this.navigateNext(t)||n&&(e.getElement().firstChild.blur(),(n=!0===n?this.table.addRow({}):"function"==typeof n?this.table.addRow(n(e.row.getComponent())):this.table.addRow(Object.assign({},n))).then((()=>{setTimeout((()=>{nav.next()}))}))))}cellisEdited(t){return!!t.modules.edit&&t.modules.edit.edited}cellCancelEdit(t){t===this.currentCell?this.table.modules.edit.cancelEdit():console.warn("Cancel Editor Error - This cell is not currently being edited ")}clearCellEdited(t){t||(t=this.modules.edit.getEditedCells()),Array.isArray(t)||(t=[t]),t.forEach((t=>{this.modules.edit.clearEdited(t._getSelf())}))}navigatePrev(t){var e,n,i=this.currentCell;if(i){if(t&&t.preventDefault(),e=this.navigateLeft())return!0;if((n=this.table.rowManager.prevDisplayRow(i.row,!0))&&(e=this.findNextEditableCell(n,n.cells.length)))return e.getComponent().edit(),!0}return!1}navigateNext(t){var e,n,i=this.currentCell;if(i){if(t&&t.preventDefault(),e=this.navigateRight())return!0;if((n=this.table.rowManager.nextDisplayRow(i.row,!0))&&(e=this.findNextEditableCell(n,-1)))return e.getComponent().edit(),!0}return!1}navigateLeft(t){var e,n,i=this.currentCell;return!!(i&&(t&&t.preventDefault(),e=i.getIndex(),n=this.findPrevEditableCell(i.row,e)))&&(n.getComponent().edit(),!0)}navigateRight(t){var e,n,i=this.currentCell;return!!(i&&(t&&t.preventDefault(),e=i.getIndex(),n=this.findNextEditableCell(i.row,e)))&&(n.getComponent().edit(),!0)}navigateUp(t){var e,n,i=this.currentCell;return!!(i&&(t&&t.preventDefault(),e=i.getIndex(),n=this.table.rowManager.prevDisplayRow(i.row,!0)))&&(n.cells[e].getComponent().edit(),!0)}navigateDown(t){var e,n,i=this.currentCell;return!!(i&&(t&&t.preventDefault(),e=i.getIndex(),n=this.table.rowManager.nextDisplayRow(i.row,!0)))&&(n.cells[e].getComponent().edit(),!0)}findNextEditableCell(t,e){var n=!1;if(e<t.cells.length-1)for(var i=e+1;i<t.cells.length;i++){let e=t.cells[i];if(e.column.modules.edit&&l.elVisible(e.getElement())){let t=!0;if("function"==typeof e.column.modules.edit.check&&(t=e.column.modules.edit.check(e.getComponent())),t){n=e;break}}}return n}findPrevEditableCell(t,e){var n=!1;if(e>0)for(var i=e-1;i>=0;i--){let e=t.cells[i],r=!0;if(e.column.modules.edit&&l.elVisible(e.getElement())&&("function"==typeof e.column.modules.edit.check&&(r=e.column.modules.edit.check(e.getComponent())),r)){n=e;break}}return n}initializeColumnCheck(t){void 0!==t.definition.editor&&this.initializeColumn(t)}columnDeleteCheck(t){this.currentCell&&this.currentCell.column===t&&this.cancelEdit()}rowDeleteCheck(t){this.currentCell&&this.currentCell.row===t&&this.cancelEdit()}initializeColumn(t){var e={editor:!1,blocked:!1,check:t.definition.editable,params:t.definition.editorParams||{}};switch(typeof t.definition.editor){case"string":this.editors[t.definition.editor]?e.editor=this.editors[t.definition.editor]:console.warn("Editor Error - No such editor found: ",t.definition.editor);break;case"function":e.editor=t.definition.editor;break;case"boolean":!0===t.definition.editor&&("function"!=typeof t.definition.formatter?this.editors[t.definition.formatter]?e.editor=this.editors[t.definition.formatter]:e.editor=this.editors.input:console.warn("Editor Error - Cannot auto lookup editor for a custom formatter: ",t.definition.formatter))}e.editor&&(t.modules.edit=e)}getCurrentCell(){return!!this.currentCell&&this.currentCell.getComponent()}clearEditor(t){var e,n=this.currentCell;if(this.invalidEdit=!1,n){for(this.currentCell=!1,e=n.getElement(),t?n.validate&&n.validate():e.classList.remove("tabulator-validation-fail"),e.classList.remove("tabulator-editing");e.firstChild;)e.removeChild(e.firstChild);n.row.getElement().classList.remove("tabulator-row-editing")}}cancelEdit(){if(this.currentCell){var t=this.currentCell,e=this.currentCell.getComponent();this.clearEditor(!0),t.setValueActual(t.getValue()),t.cellRendered(),("textarea"==t.column.definition.editor||t.column.definition.variableHeight)&&t.row.normalizeHeight(!0),t.column.definition.cellEditCancelled&&t.column.definition.cellEditCancelled.call(this.table,e),this.dispatchExternal("cellEditCancelled",e)}}bindEditor(t){if(t.column.modules.edit){var e=this,n=t.getElement(!0);n.setAttribute("tabindex",0),n.addEventListener("click",(function(t){n.classList.contains("tabulator-editing")||n.focus({preventScroll:!0})})),n.addEventListener("mousedown",(function(t){2===t.button?t.preventDefault():e.mouseClick=!0})),n.addEventListener("focus",(function(n){e.recursionBlock||e.edit(t,n,!1)}))}}focusCellNoEvent(t,e){this.recursionBlock=!0,e&&"ie"===this.table.browser||t.getElement().focus({preventScroll:!0}),this.recursionBlock=!1}editCell(t,e){this.focusCellNoEvent(t),this.edit(t,!1,e)}focusScrollAdjust(t){if("virtual"==this.table.rowManager.getRenderMode()){var e=this.table.rowManager.element.scrollTop,n=this.table.rowManager.element.clientHeight+this.table.rowManager.element.scrollTop,i=t.row.getElement();i.offsetTop;i.offsetTop<e?this.table.rowManager.element.scrollTop-=e-i.offsetTop:i.offsetTop+i.offsetHeight>n&&(this.table.rowManager.element.scrollTop+=i.offsetTop+i.offsetHeight-n);var r=this.table.rowManager.element.scrollLeft,o=this.table.rowManager.element.clientWidth+this.table.rowManager.element.scrollLeft,a=t.getElement();a.offsetLeft;this.table.modExists("frozenColumns")&&(r+=parseInt(this.table.modules.frozenColumns.leftMargin),o-=parseInt(this.table.modules.frozenColumns.rightMargin)),"virtual"===this.table.options.renderHorizontal&&(r-=parseInt(this.table.columnManager.renderer.vDomPadLeft),o-=parseInt(this.table.columnManager.renderer.vDomPadLeft)),a.offsetLeft<r?this.table.rowManager.element.scrollLeft-=r-a.offsetLeft:a.offsetLeft+a.offsetWidth>o&&(this.table.rowManager.element.scrollLeft+=a.offsetLeft+a.offsetWidth-o)}}edit(t,e,n){var i,r,o,a=this,s=!0,l=function(){},u=t.getElement();if(!this.currentCell){if(t.column.modules.edit.blocked)return this.mouseClick=!1,u.blur(),!1;switch(e&&e.stopPropagation(),typeof t.column.modules.edit.check){case"function":s=t.column.modules.edit.check(t.getComponent());break;case"boolean":s=t.column.modules.edit.check}if(s||n){if(a.cancelEdit(),a.currentCell=t,this.focusScrollAdjust(t),r=t.getComponent(),this.mouseClick&&(this.mouseClick=!1,t.column.definition.cellClick&&t.column.definition.cellClick.call(this.table,e,r)),t.column.definition.cellEditing&&t.column.definition.cellEditing.call(this.table,r),this.dispatchExternal("cellEditing",r),o="function"==typeof t.column.modules.edit.params?t.column.modules.edit.params(r):t.column.modules.edit.params,!1===(i=t.column.modules.edit.editor.call(a,r,(function(t){l=t}),(function(e){if(a.currentCell===t){var n=!0;return t.column.modules.validate&&a.table.modExists("validate")&&"manual"!=a.table.options.validationMode&&(n=a.table.modules.validate.validate(t.column.modules.validate,t,e)),!0===n||"highlight"===a.table.options.validationMode?(a.clearEditor(),t.modules.edit||(t.modules.edit={}),t.modules.edit.edited=!0,-1==a.editedCells.indexOf(t)&&a.editedCells.push(t),t.setValue(e,!0),a.table.options.dataTree&&a.table.modExists("dataTree")&&a.table.modules.dataTree.checkForRestyle(t),!0===n||(u.classList.add("tabulator-validation-fail"),a.table.externalEvents.dispatch("validationFailed",t.getComponent(),e,n),!1)):(a.invalidEdit=!0,u.classList.add("tabulator-validation-fail"),a.focusCellNoEvent(t,!0),l(),a.table.externalEvents.dispatch("validationFailed",t.getComponent(),e,n),!1)}}),(function(){a.currentCell===t&&(a.cancelEdit(),a.table.options.dataTree&&a.table.modExists("dataTree")&&a.table.modules.dataTree.checkForRestyle(t))}),o)))return u.blur(),!1;if(!(i instanceof Node))return console.warn("Edit Error - Editor should return an instance of Node, the editor returned:",i),u.blur(),!1;for(u.classList.add("tabulator-editing"),t.row.getElement().classList.add("tabulator-row-editing");u.firstChild;)u.removeChild(u.firstChild);u.appendChild(i),l();for(var c=u.children,h=0;h<c.length;h++)c[h].addEventListener("click",(function(t){t.stopPropagation()}));return!0}return this.mouseClick=!1,u.blur(),!1}this.invalidEdit||this.cancelEdit()}getEditedCells(){var t=[];return this.editedCells.forEach((e=>{t.push(e.getComponent())})),t}clearEdited(t){var e;t.modules.edit&&t.modules.edit.edited&&(t.modules.edit.edited=!1,t.modules.validate&&(t.modules.validate.invalid=!1)),(e=this.editedCells.indexOf(t))>-1&&this.editedCells.splice(e,1)}}A.moduleName="edit",A.editors=L;class O{constructor(t,e,n,i){this.type=t,this.columns=e,this.component=n||!1,this.indent=i||0}}class P{constructor(t,e,n,i,r){this.value=t,this.component=e||!1,this.width=n,this.height=i,this.depth=r}}class I extends s{constructor(t){super(t),this.config={},this.cloneTableStyle=!0,this.colVisProp="",this.registerTableOption("htmlOutputConfig",!1),this.registerColumnOption("htmlOutput"),this.registerColumnOption("titleHtmlOutput")}initialize(){this.registerTableFunction("getHtml",this.getHtml.bind(this))}generateExportList(t,e,n,i){this.cloneTableStyle=e,this.config=t||{},this.colVisProp=i;var r=!1!==this.config.columnHeaders?this.headersToExportRows(this.generateColumnGroupHeaders()):[],o=this.bodyToExportRows(this.rowLookup(n));return r.concat(o)}genereateTable(t,e,n,i){var r=this.generateExportList(t,e,n,i);return this.genereateTableElement(r)}rowLookup(t){var e=[];if("function"==typeof t)t.call(this.table).forEach((t=>{(t=this.table.rowManager.findRow(t))&&e.push(t)}));else switch(t){case!0:case"visible":e=this.table.rowManager.getVisibleRows(!0);break;case"all":e=this.table.rowManager.rows;break;case"selected":e=this.table.modules.selectRow.selectedRows;break;default:e=this.table.options.pagination?this.table.rowManager.getDisplayRows(this.table.rowManager.displayRows.length-2):this.table.rowManager.getDisplayRows()}return Object.assign([],e)}generateColumnGroupHeaders(){var t=[];return(!1!==this.config.columnGroups?this.table.columnManager.columns:this.table.columnManager.columnsByIndex).forEach((e=>{var n=this.processColumnGroup(e);n&&t.push(n)})),t}processColumnGroup(t){var e=t.columns,n=0,i={title:t.definition["title"+(this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1))]||t.definition.title,column:t,depth:1};if(e.length){if(i.subGroups=[],i.width=0,e.forEach((t=>{var e=this.processColumnGroup(t);e&&(i.width+=e.width,i.subGroups.push(e),e.depth>n&&(n=e.depth))})),i.depth+=n,!i.width)return!1}else{if(!this.columnVisCheck(t))return!1;i.width=1}return i}columnVisCheck(t){return!1!==t.definition[this.colVisProp]&&(t.visible||!t.visible&&t.definition[this.colVisProp])}headersToExportRows(t){var e=[],n=0,i=[];function r(t,i){var o=n-i;if(void 0===e[i]&&(e[i]=[]),t.height=t.subGroups?1:o-t.depth+1,e[i].push(t),t.height>1)for(let n=1;n<t.height;n++)void 0===e[i+n]&&(e[i+n]=[]),e[i+n].push(!1);if(t.width>1)for(let n=1;n<t.width;n++)e[i].push(!1);t.subGroups&&t.subGroups.forEach((function(t){r(t,i+1)}))}return t.forEach((function(t){t.depth>n&&(n=t.depth)})),t.forEach((function(t){r(t,0)})),e.forEach((t=>{var e=[];t.forEach((t=>{t?e.push(new P(t.title,t.column.getComponent(),t.width,t.height,t.depth)):e.push(null)})),i.push(new O("header",e))})),i}bodyToExportRows(t){var e=[],n=[];return this.table.columnManager.columnsByIndex.forEach((t=>{this.columnVisCheck(t)&&e.push(t.getComponent())})),!1!==this.config.columnCalcs&&this.table.modExists("columnCalcs")&&(this.table.modules.columnCalcs.topInitialized&&t.unshift(this.table.modules.columnCalcs.topRow),this.table.modules.columnCalcs.botInitialized&&t.push(this.table.modules.columnCalcs.botRow)),(t=t.filter((t=>{switch(t.type){case"group":return!1!==this.config.rowGroups;case"calc":return!1!==this.config.columnCalcs;case"row":return!(this.table.options.dataTree&&!1===this.config.dataTree&&t.modules.dataTree.parent)}return!0}))).forEach(((t,i)=>{var r=t.getData(this.colVisProp),o=[],a=0;switch(t.type){case"group":a=t.level,o.push(new P(t.key,t.getComponent(),e.length,1));break;case"calc":case"row":e.forEach((t=>{o.push(new P(t._column.getFieldValue(r),t,1,1))})),this.table.options.dataTree&&!1!==this.config.dataTree&&(a=t.modules.dataTree.index)}n.push(new O(t.type,o,t.getComponent(),a))})),n}genereateTableElement(t){var e=document.createElement("table"),n=document.createElement("thead"),i=document.createElement("tbody"),r=this.lookupTableStyles(),o=this.table.options["rowFormatter"+(this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1))],a={};return a.rowFormatter=null!==o?o:this.table.options.rowFormatter,this.table.options.dataTree&&!1!==this.config.dataTree&&this.table.modExists("columnCalcs")&&(a.treeElementField=this.table.modules.dataTree.elementField),a.groupHeader=this.table.options["groupHeader"+(this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1))],a.groupHeader&&!Array.isArray(a.groupHeader)&&(a.groupHeader=[a.groupHeader]),e.classList.add("tabulator-print-table"),this.mapElementStyles(this.table.columnManager.getHeadersElement(),n,["border-top","border-left","border-right","border-bottom","background-color","color","font-weight","font-family","font-size"]),t.length>1e3&&console.warn("It may take a long time to render an HTML table with more than 1000 rows"),t.forEach(((t,e)=>{switch(t.type){case"header":n.appendChild(this.genereateHeaderElement(t,a,r));break;case"group":i.appendChild(this.genereateGroupElement(t,a,r));break;case"calc":i.appendChild(this.genereateCalcElement(t,a,r));break;case"row":let o=this.genereateRowElement(t,a,r);this.mapElementStyles(e%2&&r.evenRow?r.evenRow:r.oddRow,o,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),i.appendChild(o)}})),n.innerHTML&&e.appendChild(n),e.appendChild(i),this.mapElementStyles(this.table.element,e,["border-top","border-left","border-right","border-bottom"]),e}lookupTableStyles(){var t={};return this.cloneTableStyle&&window.getComputedStyle&&(t.oddRow=this.table.element.querySelector(".tabulator-row-odd:not(.tabulator-group):not(.tabulator-calcs)"),t.evenRow=this.table.element.querySelector(".tabulator-row-even:not(.tabulator-group):not(.tabulator-calcs)"),t.calcRow=this.table.element.querySelector(".tabulator-row.tabulator-calcs"),t.firstRow=this.table.element.querySelector(".tabulator-row:not(.tabulator-group):not(.tabulator-calcs)"),t.firstGroup=this.table.element.getElementsByClassName("tabulator-group")[0],t.firstRow&&(t.styleCells=t.firstRow.getElementsByClassName("tabulator-cell"),t.firstCell=t.styleCells[0],t.lastCell=t.styleCells[t.styleCells.length-1])),t}genereateHeaderElement(t,e,n){var i=document.createElement("tr");return t.columns.forEach((t=>{if(t){var e=document.createElement("th"),n=t.component._column.definition.cssClass?t.component._column.definition.cssClass.split(" "):[];e.colSpan=t.width,e.rowSpan=t.height,e.innerHTML=t.value,this.cloneTableStyle&&(e.style.boxSizing="border-box"),n.forEach((function(t){e.classList.add(t)})),this.mapElementStyles(t.component.getElement(),e,["text-align","border-top","border-left","border-right","border-bottom","background-color","color","font-weight","font-family","font-size"]),this.mapElementStyles(t.component._column.contentElement,e,["padding-top","padding-left","padding-right","padding-bottom"]),t.component._column.visible?this.mapElementStyles(t.component.getElement(),e,["width"]):t.component._column.definition.width&&(e.style.width=t.component._column.definition.width+"px"),t.component._column.parent&&this.mapElementStyles(t.component._column.parent.groupElement,e,["border-top"]),i.appendChild(e)}})),i}genereateGroupElement(t,e,n){var i=document.createElement("tr"),r=document.createElement("td"),o=t.columns[0];return i.classList.add("tabulator-print-table-row"),e.groupHeader&&e.groupHeader[t.indent]?o.value=e.groupHeader[t.indent](o.value,t.component._group.getRowCount(),t.component._group.getData(),t.component):!1===e.groupHeader?o.value=o.value:o.value=t.component._group.generator(o.value,t.component._group.getRowCount(),t.component._group.getData(),t.component),r.colSpan=o.width,r.innerHTML=o.value,i.classList.add("tabulator-print-table-group"),i.classList.add("tabulator-group-level-"+t.indent),o.component.isVisible()&&i.classList.add("tabulator-group-visible"),this.mapElementStyles(n.firstGroup,i,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),this.mapElementStyles(n.firstGroup,r,["padding-top","padding-left","padding-right","padding-bottom"]),i.appendChild(r),i}genereateCalcElement(t,e,n){var i=this.genereateRowElement(t,e,n);return i.classList.add("tabulator-print-table-calcs"),this.mapElementStyles(n.calcRow,i,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),i}genereateRowElement(t,e,n){var r=document.createElement("tr");return r.classList.add("tabulator-print-table-row"),t.columns.forEach((o=>{if(o){var a=document.createElement("td"),s=o.component._column,l=o.value,u={modules:{},getValue:function(){return l},getField:function(){return s.definition.field},getElement:function(){return a},getColumn:function(){return s.getComponent()},getData:function(){return t.component.getData()},getRow:function(){return t.component},getComponent:function(){return u},column:s};if((s.definition.cssClass?s.definition.cssClass.split(" "):[]).forEach((function(t){a.classList.add(t)})),this.table.modExists("format")&&!1!==this.config.formatCells)l=this.table.modules.format.formatExportValue(u,this.colVisProp);else switch(typeof l){case"object":l=JSON.stringify(l);break;case"undefined":case"null":l="";break;default:l=l}l instanceof Node?a.appendChild(l):a.innerHTML=l,n.firstCell&&(this.mapElementStyles(n.firstCell,a,["padding-top","padding-left","padding-right","padding-bottom","border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size"]),s.definition.align&&(a.style.textAlign=s.definition.align)),this.table.options.dataTree&&!1!==this.config.dataTree&&(e.treeElementField&&e.treeElementField==s.field||!e.treeElementField&&0==i)&&(t.component._row.modules.dataTree.controlEl&&a.insertBefore(t.component._row.modules.dataTree.controlEl.cloneNode(!0),a.firstChild),t.component._row.modules.dataTree.branchEl&&a.insertBefore(t.component._row.modules.dataTree.branchEl.cloneNode(!0),a.firstChild)),r.appendChild(a),u.modules.format&&u.modules.format.renderedCallback&&u.modules.format.renderedCallback(),e.rowFormatter&&!1!==this.config.formatCells&&e.rowFormatter(t.component)}})),r}genereateHTMLTable(t){var e=document.createElement("div");return e.appendChild(this.genereateTableElement(t)),e.innerHTML}getHtml(t,e,n,i){var r=this.generateExportList(n||this.table.options.htmlOutputConfig,e,t,i||"htmlOutput");return this.genereateHTMLTable(r)}mapElementStyles(t,e,n){if(this.cloneTableStyle&&t&&e){var i={"background-color":"backgroundColor",color:"fontColor",width:"width","font-weight":"fontWeight","font-family":"fontFamily","font-size":"fontSize","text-align":"textAlign","border-top":"borderTop","border-left":"borderLeft","border-right":"borderRight","border-bottom":"borderBottom","padding-top":"paddingTop","padding-left":"paddingLeft","padding-right":"paddingRight","padding-bottom":"paddingBottom"};if(window.getComputedStyle){var r=window.getComputedStyle(t);n.forEach((function(t){e.style[i[t]]=r.getPropertyValue(t)}))}}}}I.moduleName="export";var N={"=":function(t,e,n,i){return e==t},"<":function(t,e,n,i){return e<t},"<=":function(t,e,n,i){return e<=t},">":function(t,e,n,i){return e>t},">=":function(t,e,n,i){return e>=t},"!=":function(t,e,n,i){return e!=t},regex:function(t,e,n,i){return"string"==typeof t&&(t=new RegExp(t)),t.test(e)},like:function(t,e,n,i){return null==t?e===t:null!=e&&String(e).toLowerCase().indexOf(t.toLowerCase())>-1},keywords:function(t,e,n,i){var r=t.toLowerCase().split(void 0===i.separator?" ":i.separator),o=String(null==e?"":e).toLowerCase(),a=[];return r.forEach((t=>{o.includes(t)&&a.push(!0)})),i.matchAll?a.length===r.length:!!a.length},starts:function(t,e,n,i){return null==t?e===t:null!=e&&String(e).toLowerCase().startsWith(t.toLowerCase())},ends:function(t,e,n,i){return null==t?e===t:null!=e&&String(e).toLowerCase().endsWith(t.toLowerCase())},in:function(t,e,n,i){return Array.isArray(t)?!t.length||t.indexOf(e)>-1:(console.warn("Filter Error - filter value is not an array:",t),!1)}};class R extends s{constructor(t){super(t),this.filterList=[],this.headerFilters={},this.headerFilterColumns=[],this.prevHeaderFilterChangeCheck="",this.prevHeaderFilterChangeCheck="{}",this.changed=!1,this.tableInitialized=!1,this.registerTableOption("filterMode","local"),this.registerTableOption("initialFilter",!1),this.registerTableOption("initialHeaderFilter",!1),this.registerTableOption("headerFilterLiveFilterDelay",300),this.registerColumnOption("headerFilter"),this.registerColumnOption("headerFilterPlaceholder"),this.registerColumnOption("headerFilterParams"),this.registerColumnOption("headerFilterEmptyCheck"),this.registerColumnOption("headerFilterFunc"),this.registerColumnOption("headerFilterFuncParams"),this.registerColumnOption("headerFilterLiveFilter"),this.registerTableFunction("searchRows",this.searchRows.bind(this)),this.registerTableFunction("searchData",this.searchData.bind(this)),this.registerTableFunction("setFilter",this.userSetFilter.bind(this)),this.registerTableFunction("refreshFilter",this.userRefreshFilter.bind(this)),this.registerTableFunction("addFilter",this.userAddFilter.bind(this)),this.registerTableFunction("getFilters",this.getFilters.bind(this)),this.registerTableFunction("setHeaderFilterFocus",this.userSetHeaderFilterFocus.bind(this)),this.registerTableFunction("getHeaderFilterValue",this.userGetHeaderFilterValue.bind(this)),this.registerTableFunction("setHeaderFilterValue",this.userSetHeaderFilterValue.bind(this)),this.registerTableFunction("getHeaderFilters",this.getHeaderFilters.bind(this)),this.registerTableFunction("removeFilter",this.userRemoveFilter.bind(this)),this.registerTableFunction("clearFilter",this.userClearFilter.bind(this)),this.registerTableFunction("clearHeaderFilter",this.userClearHeaderFilter.bind(this)),this.registerComponentFunction("column","headerFilterFocus",this.setHeaderFilterFocus.bind(this)),this.registerComponentFunction("column","reloadHeaderFilter",this.reloadHeaderFilter.bind(this)),this.registerComponentFunction("column","getHeaderFilterValue",this.getHeaderFilterValue.bind(this)),this.registerComponentFunction("column","setHeaderFilterValue",this.setHeaderFilterValue.bind(this))}initialize(){this.subscribe("column-init",this.initializeColumnHeaderFilter.bind(this)),this.subscribe("column-width-fit-before",this.hideHeaderFilterElements.bind(this)),this.subscribe("column-width-fit-after",this.showHeaderFilterElements.bind(this)),this.subscribe("table-built",this.tableBuilt.bind(this)),"remote"===this.table.options.filterMode&&this.subscribe("data-params",this.remoteFilterParams.bind(this)),this.registerDataHandler(this.filter.bind(this),10)}tableBuilt(){this.table.options.initialFilter&&this.setFilter(this.table.options.initialFilter),this.table.options.initialHeaderFilter&&this.table.options.initialHeaderFilter.forEach((t=>{var e=this.table.columnManager.findColumn(t.field);if(!e)return console.warn("Column Filter Error - No matching column found:",t.field),!1;this.setHeaderFilterValue(e,t.value)})),this.tableInitialized=!0}remoteFilterParams(t,e,n,i){return i.filter=this.getFilters(!0,!0),i}userSetFilter(t,e,n,i){this.setFilter(t,e,n,i),this.refreshFilter()}userRefreshFilter(){this.refreshFilter()}userAddFilter(t,e,n,i){this.addFilter(t,e,n,i),this.refreshFilter()}userSetHeaderFilterFocus(t){var e=this.table.columnManager.findColumn(t);if(!e)return console.warn("Column Filter Focus Error - No matching column found:",t),!1;this.setHeaderFilterFocus(e)}userGetHeaderFilterValue(t){var e=this.table.columnManager.findColumn(t);if(e)return this.getHeaderFilterValue(e);console.warn("Column Filter Error - No matching column found:",t)}userSetHeaderFilterValue(t,e){var n=this.table.columnManager.findColumn(t);if(!n)return console.warn("Column Filter Error - No matching column found:",t),!1;this.setHeaderFilterValue(n,e)}userRemoveFilter(t,e,n){this.removeFilter(t,e,n),this.refreshFilter()}userClearFilter(t){this.clearFilter(t),this.refreshFilter()}userClearHeaderFilter(){this.clearHeaderFilter(),this.refreshFilter()}searchRows(t,e,n){return this.search("rows",t,e,n)}searchData(t,e,n){return this.search("data",t,e,n)}initializeColumnHeaderFilter(t){var e=t.definition;e.headerFilter&&(void 0!==e.headerFilterPlaceholder&&e.field&&this.module("localize").setHeaderFilterColumnPlaceholder(e.field,e.headerFilterPlaceholder),this.initializeColumn(t))}initializeColumn(t,e){var n=this,i=t.getField();t.modules.filter={success:function(e){var r,o="input"==t.modules.filter.tagType&&"text"==t.modules.filter.attrType||"textarea"==t.modules.filter.tagType?"partial":"match",a="",s="";if(void 0===t.modules.filter.prevSuccess||t.modules.filter.prevSuccess!==e){if(t.modules.filter.prevSuccess=e,t.modules.filter.emptyFunc(e))delete n.headerFilters[i];else{switch(t.modules.filter.value=e,typeof t.definition.headerFilterFunc){case"string":R.filters[t.definition.headerFilterFunc]?(a=t.definition.headerFilterFunc,r=function(n){var i=t.definition.headerFilterFuncParams||{},r=t.getFieldValue(n);return i="function"==typeof i?i(e,r,n):i,R.filters[t.definition.headerFilterFunc](e,r,n,i)}):console.warn("Header Filter Error - Matching filter function not found: ",t.definition.headerFilterFunc);break;case"function":a=r=function(n){var i=t.definition.headerFilterFuncParams||{},r=t.getFieldValue(n);return i="function"==typeof i?i(e,r,n):i,t.definition.headerFilterFunc(e,r,n,i)}}if(!r)if("partial"===o)r=function(n){var i=t.getFieldValue(n);return null!=i&&String(i).toLowerCase().indexOf(String(e).toLowerCase())>-1},a="like";else r=function(n){return t.getFieldValue(n)==e},a="=";n.headerFilters[i]={value:e,func:r,type:a,params:{}}}s=JSON.stringify(n.headerFilters),n.prevHeaderFilterChangeCheck!==s&&(n.prevHeaderFilterChangeCheck=s,n.trackChanges(),n.refreshFilter())}return!0},attrType:!1,tagType:!1,emptyFunc:!1},this.generateHeaderFilterElement(t)}generateHeaderFilterElement(t,e,n){var i,r,o,a,s,l,u,c=this,h=t.modules.filter.success,d=t.getField();if(t.modules.filter.headerElement&&t.modules.filter.headerElement.parentNode&&t.contentElement.removeChild(t.modules.filter.headerElement.parentNode),d){switch(t.modules.filter.emptyFunc=t.definition.headerFilterEmptyCheck||function(t){return!t&&"0"!==t&&0!==t},(i=document.createElement("div")).classList.add("tabulator-header-filter"),typeof t.definition.headerFilter){case"string":c.table.modules.edit.editors[t.definition.headerFilter]?(r=c.table.modules.edit.editors[t.definition.headerFilter],"tick"!==t.definition.headerFilter&&"tickCross"!==t.definition.headerFilter||t.definition.headerFilterEmptyCheck||(t.modules.filter.emptyFunc=function(t){return!0!==t&&!1!==t})):console.warn("Filter Error - Cannot build header filter, No such editor found: ",t.definition.editor);break;case"function":r=t.definition.headerFilter;break;case"boolean":t.modules.edit&&t.modules.edit.editor?r=t.modules.edit.editor:t.definition.formatter&&c.table.modules.edit.editors[t.definition.formatter]?(r=c.table.modules.edit.editors[t.definition.formatter],"tick"!==t.definition.formatter&&"tickCross"!==t.definition.formatter||t.definition.headerFilterEmptyCheck||(t.modules.filter.emptyFunc=function(t){return!0!==t&&!1!==t})):r=c.table.modules.edit.editors.input}if(r){if(a={getValue:function(){return void 0!==e?e:""},getField:function(){return t.definition.field},getElement:function(){return i},getColumn:function(){return t.getComponent()},getRow:function(){return{normalizeHeight:function(){}}}},u="function"==typeof(u=t.definition.headerFilterParams||{})?u.call(c.table):u,!(o=r.call(this.table.modules.edit,a,(function(){}),h,(function(){}),u)))return void console.warn("Filter Error - Cannot add filter to "+d+" column, editor returned a value of false");if(!(o instanceof Node))return void console.warn("Filter Error - Cannot add filter to "+d+" column, editor should return an instance of Node, the editor returned:",o);d?c.langBind("headerFilters|columns|"+t.definition.field,(function(t){o.setAttribute("placeholder",void 0!==t&&t?t:c.langText("headerFilters|default"))})):c.langBind("headerFilters|default",(function(t){o.setAttribute("placeholder",t)})),o.addEventListener("click",(function(t){t.stopPropagation(),o.focus()})),o.addEventListener("focus",(t=>{var e=this.table.columnManager.element.scrollLeft;e!==this.table.rowManager.element.scrollLeft&&(this.table.rowManager.scrollHorizontal(e),this.table.columnManager.scrollHorizontal(e))})),s=!1,l=function(t){s&&clearTimeout(s),s=setTimeout((function(){h(o.value)}),c.table.options.headerFilterLiveFilterDelay)},t.modules.filter.headerElement=o,t.modules.filter.attrType=o.hasAttribute("type")?o.getAttribute("type").toLowerCase():"",t.modules.filter.tagType=o.tagName.toLowerCase(),!1!==t.definition.headerFilterLiveFilter&&("autocomplete"!==t.definition.headerFilter&&"tickCross"!==t.definition.headerFilter&&("autocomplete"!==t.definition.editor&&"tickCross"!==t.definition.editor||!0!==t.definition.headerFilter)&&(o.addEventListener("keyup",l),o.addEventListener("search",l),"number"==t.modules.filter.attrType&&o.addEventListener("change",(function(t){h(o.value)})),"text"==t.modules.filter.attrType&&"ie"!==this.table.browser&&o.setAttribute("type","search")),"input"!=t.modules.filter.tagType&&"select"!=t.modules.filter.tagType&&"textarea"!=t.modules.filter.tagType||o.addEventListener("mousedown",(function(t){t.stopPropagation()}))),i.appendChild(o),t.contentElement.appendChild(i),n||c.headerFilterColumns.push(t)}}else console.warn("Filter Error - Cannot add header filter, column has no field set:",t.definition.title)}hideHeaderFilterElements(){this.headerFilterColumns.forEach((function(t){t.modules.filter&&t.modules.filter.headerElement&&(t.modules.filter.headerElement.style.display="none")}))}showHeaderFilterElements(){this.headerFilterColumns.forEach((function(t){t.modules.filter&&t.modules.filter.headerElement&&(t.modules.filter.headerElement.style.display="")}))}setHeaderFilterFocus(t){t.modules.filter&&t.modules.filter.headerElement?t.modules.filter.headerElement.focus():console.warn("Column Filter Focus Error - No header filter set on column:",t.getField())}getHeaderFilterValue(t){if(t.modules.filter&&t.modules.filter.headerElement)return t.modules.filter.headerElement.value;console.warn("Column Filter Error - No header filter set on column:",t.getField())}setHeaderFilterValue(t,e){t&&(t.modules.filter&&t.modules.filter.headerElement?(this.generateHeaderFilterElement(t,e,!0),t.modules.filter.success(e)):console.warn("Column Filter Error - No header filter set on column:",t.getField()))}reloadHeaderFilter(t){t&&(t.modules.filter&&t.modules.filter.headerElement?this.generateHeaderFilterElement(t,t.modules.filter.value,!0):console.warn("Column Filter Error - No header filter set on column:",t.getField()))}refreshFilter(){this.tableInitialized&&("remote"===this.table.options.filterMode?this.reloadData():this.refreshData())}trackChanges(){this.changed=!0,this.dispatch("filter-changed")}hasChanged(){var t=this.changed;return this.changed=!1,t}setFilter(t,e,n,i){this.filterList=[],Array.isArray(t)||(t=[{field:t,type:e,value:n,params:i}]),this.addFilter(t)}addFilter(t,e,n,i){Array.isArray(t)||(t=[{field:t,type:e,value:n,params:i}]),t.forEach((t=>{(t=this.findFilter(t))&&(this.filterList.push(t),this.changed=!0)}))}findFilter(t){var e;if(Array.isArray(t))return this.findSubFilters(t);var n=!1;return"function"==typeof t.field?n=function(e){return t.field(e,t.type||{})}:R.filters[t.type]?n=(e=this.table.columnManager.getColumnByField(t.field))?function(n){return R.filters[t.type](t.value,e.getFieldValue(n),n,t.params||{})}:function(e){return R.filters[t.type](t.value,e[t.field],e,t.params||{})}:console.warn("Filter Error - No such filter type found, ignoring: ",t.type),t.func=n,!!t.func&&t}findSubFilters(t){var e=[];return t.forEach((t=>{(t=this.findFilter(t))&&e.push(t)})),!!e.length&&e}getFilters(t,e){var n=[];return t&&(n=this.getHeaderFilters()),e&&n.forEach((function(t){"function"==typeof t.type&&(t.type="function")})),n=n.concat(this.filtersToArray(this.filterList,e))}filtersToArray(t,e){var n=[];return t.forEach((t=>{var i;Array.isArray(t)?n.push(this.filtersToArray(t,e)):(i={field:t.field,type:t.type,value:t.value},e&&"function"==typeof i.type&&(i.type="function"),n.push(i))})),n}getHeaderFilters(){var t=[];for(var e in this.headerFilters)t.push({field:e,type:this.headerFilters[e].type,value:this.headerFilters[e].value});return t}removeFilter(t,e,n){Array.isArray(t)||(t=[{field:t,type:e,value:n}]),t.forEach((t=>{var e=-1;(e="object"==typeof t.field?this.filterList.findIndex((e=>t===e)):this.filterList.findIndex((e=>t.field===e.field&&t.type===e.type&&t.value===e.value)))>-1?this.filterList.splice(e,1):console.warn("Filter Error - No matching filter type found, ignoring: ",t.type)})),this.trackChanges()}clearFilter(t){this.filterList=[],t&&this.clearHeaderFilter(),this.trackChanges()}clearHeaderFilter(){this.headerFilters={},this.prevHeaderFilterChangeCheck="{}",this.headerFilterColumns.forEach((t=>{void 0!==t.modules.filter.value&&delete t.modules.filter.value,t.modules.filter.prevSuccess=void 0,this.reloadHeaderFilter(t)})),this.trackChanges()}search(t,e,n,i){var r=[],o=[];return Array.isArray(e)||(e=[{field:e,type:n,value:i}]),e.forEach((t=>{(t=this.findFilter(t))&&o.push(t)})),this.table.rowManager.rows.forEach((e=>{var n=!0;o.forEach((t=>{this.filterRecurse(t,e.getData())||(n=!1)})),n&&r.push("data"===t?e.getData("data"):e.getComponent())})),r}filter(t,e){var n=[],i=[];return this.subscribedExternal("dataFiltering")&&this.dispatchExternal("dataFiltering",this.getFilters()),"remote"!==this.table.options.filterMode&&(this.filterList.length||Object.keys(this.headerFilters).length)?t.forEach((t=>{this.filterRow(t)&&n.push(t)})):n=t.slice(0),this.subscribedExternal("dataFiltered")&&(n.forEach((t=>{i.push(t.getComponent())})),this.dispatchExternal("dataFiltered",this.getFilters(),i)),n}filterRow(t,e){var n=!0,i=t.getData();for(var r in this.filterList.forEach((t=>{this.filterRecurse(t,i)||(n=!1)})),this.headerFilters)this.headerFilters[r].func(i)||(n=!1);return n}filterRecurse(t,e){var n=!1;return Array.isArray(t)?t.forEach((t=>{this.filterRecurse(t,e)&&(n=!0)})):n=t.func(e),n}}R.moduleName="filter",R.filters=N;var Y={plaintext:function(t,e,n){return this.emptyToSpace(this.sanitizeHTML(t.getValue()))},html:function(t,e,n){return t.getValue()},textarea:function(t,e,n){return t.getElement().style.whiteSpace="pre-wrap",this.emptyToSpace(this.sanitizeHTML(t.getValue()))},money:function(t,e,n){var i,r,o,a,s=parseFloat(t.getValue()),l="",u=e.decimal||".",c=e.thousand||",",h=e.negativeSign||"-",d=e.symbol||"",f=!!e.symbolAfter,p=void 0!==e.precision?e.precision:2;if(isNaN(s))return this.emptyToSpace(this.sanitizeHTML(t.getValue()));for(s<0&&(s=Math.abs(s),l=h),i=!1!==p?s.toFixed(p):s,r=(i=String(i).split("."))[0],o=i.length>1?u+i[1]:"",a=/(\d+)(\d{3})/;a.test(r);)r=r.replace(a,"$1"+c+"$2");return f?l+r+o+d:l+d+r+o},link:function(t,e,n){var i=t.getValue(),r=e.urlPrefix||"",o=e.download,a=i,s=document.createElement("a");if(e.labelField&&(a=t.getData()[e.labelField]),e.label)switch(typeof e.label){case"string":a=e.label;break;case"function":a=e.label(t)}if(a){if(e.urlField&&(i=t.getData()[e.urlField]),e.url)switch(typeof e.url){case"string":i=e.url;break;case"function":i=e.url(t)}return s.setAttribute("href",r+i),e.target&&s.setAttribute("target",e.target),e.download&&(o="function"==typeof o?o(t):!0===o?"":o,s.setAttribute("download",o)),s.innerHTML=this.emptyToSpace(this.sanitizeHTML(a)),s}return"&nbsp;"},image:function(t,e,n){var i=document.createElement("img"),r=t.getValue();switch(e.urlPrefix&&(r=e.urlPrefix+t.getValue()),e.urlSuffix&&(r+=e.urlSuffix),i.setAttribute("src",r),typeof e.height){case"number":i.style.height=e.height+"px";break;case"string":i.style.height=e.height}switch(typeof e.width){case"number":i.style.width=e.width+"px";break;case"string":i.style.width=e.width}return i.addEventListener("load",(function(){t.getRow().normalizeHeight()})),i},tickCross:function(t,e,n){var i=t.getValue(),r=t.getElement(),o=e.allowEmpty,a=e.allowTruthy,s=void 0!==e.tickElement?e.tickElement:'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#2DC214" clip-rule="evenodd" d="M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z" fill-rule="evenodd"/></svg>',l=void 0!==e.crossElement?e.crossElement:'<svg enable-background="new 0 0 24 24" height="14" width="14"  viewBox="0 0 24 24" xml:space="preserve" ><path fill="#CE1515" d="M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z"/></svg>';return a&&i||!0===i||"true"===i||"True"===i||1===i||"1"===i?(r.setAttribute("aria-checked",!0),s||""):!o||"null"!==i&&""!==i&&null!=i?(r.setAttribute("aria-checked",!1),l||""):(r.setAttribute("aria-checked","mixed"),"")},datetime:function(t,e,n){var i=window.DateTime||luxon.DateTime,r=e.inputFormat||"yyyy-MM-dd HH:mm:ss",o=e.outputFormat||"dd/MM/yyyy HH:mm:ss",a=void 0!==e.invalidPlaceholder?e.invalidPlaceholder:"",s=t.getValue();if(void 0!==i){var l=(window.DateTime||luxon.DateTime).fromFormat(s,r);return l.isValid?(e.timezone&&(l=l.shiftTimezone(e.timezone)),l.toFormat(o)):!0===a?s:"function"==typeof a?a(s):a}console.error("Format Error - 'datetime' formatter is dependant on luxon.js")},datetimediff:function(t,e,n){var i=window.DateTime||luxon.DateTime,r=e.inputFormat||"yyyy-MM-dd HH:mm:ss",o=void 0!==e.invalidPlaceholder?e.invalidPlaceholder:"",a=void 0!==e.suffix&&e.suffix,s=void 0!==e.unit?e.unit:"days",l=void 0!==e.humanize&&e.humanize,u=void 0!==e.date?e.date:i.now(),c=t.getValue();if(void 0!==i){var h=i.fromFormat(c,r);if(!h.isValid)return!0===o?c:"function"==typeof o?o(c):o;if(!l)return parseInt(h.diff(u,s)[s])+(a?" "+a:"")}else console.error("Format Error - 'datetimediff' formatter is dependant on luxon.js")},lookup:function(t,e,n){var i=t.getValue();return void 0===e[i]?(console.warn("Missing display value for "+i),i):e[i]},star:function(t,e,n){var i=t.getValue(),r=t.getElement(),o=e&&e.stars?e.stars:5,a=document.createElement("span"),s=document.createElementNS("http://www.w3.org/2000/svg","svg");a.style.verticalAlign="middle",s.setAttribute("width","14"),s.setAttribute("height","14"),s.setAttribute("viewBox","0 0 512 512"),s.setAttribute("xml:space","preserve"),s.style.padding="0 1px",i=i&&!isNaN(i)?parseInt(i):0,i=Math.max(0,Math.min(i,o));for(var l=1;l<=o;l++){var u=s.cloneNode(!0);u.innerHTML=l<=i?'<polygon fill="#FFEA00" stroke="#C1AB60" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>':'<polygon fill="#D2D2D2" stroke="#686868" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>',a.appendChild(u)}return r.style.whiteSpace="nowrap",r.style.overflow="hidden",r.style.textOverflow="ellipsis",r.setAttribute("aria-label",i),a},traffic:function(t,e,n){var i,r,o=this.sanitizeHTML(t.getValue())||0,a=document.createElement("span"),s=e&&e.max?e.max:100,l=e&&e.min?e.min:0,u=e&&void 0!==e.color?e.color:["red","orange","green"],c="#666666";if(!isNaN(o)&&void 0!==t.getValue()){switch(a.classList.add("tabulator-traffic-light"),r=parseFloat(o)<=s?parseFloat(o):s,r=parseFloat(r)>=l?parseFloat(r):l,i=(s-l)/100,r=Math.round((r-l)/i),typeof u){case"string":c=u;break;case"function":c=u(o);break;case"object":if(Array.isArray(u)){var h=100/u.length,d=Math.floor(r/h);d=Math.min(d,u.length-1),c=u[d=Math.max(d,0)];break}}return a.style.backgroundColor=c,a}},progress:function(t,e,n){var i,r,o,a,s,l=this.sanitizeHTML(t.getValue())||0,u=t.getElement(),c=e&&e.max?e.max:100,h=e&&e.min?e.min:0,d=e&&e.legendAlign?e.legendAlign:"center";switch(r=parseFloat(l)<=c?parseFloat(l):c,r=parseFloat(r)>=h?parseFloat(r):h,i=(c-h)/100,r=Math.round((r-h)/i),typeof e.color){case"string":o=e.color;break;case"function":o=e.color(l);break;case"object":if(Array.isArray(e.color)){var f=100/e.color.length,p=Math.floor(r/f);p=Math.min(p,e.color.length-1),p=Math.max(p,0),o=e.color[p];break}default:o="#2DC214"}switch(typeof e.legend){case"string":a=e.legend;break;case"function":a=e.legend(l);break;case"boolean":a=l;break;default:a=!1}switch(typeof e.legendColor){case"string":s=e.legendColor;break;case"function":s=e.legendColor(l);break;case"object":if(Array.isArray(e.legendColor)){f=100/e.legendColor.length,p=Math.floor(r/f);p=Math.min(p,e.legendColor.length-1),p=Math.max(p,0),s=e.legendColor[p]}break;default:s="#000"}u.style.minWidth="30px",u.style.position="relative",u.setAttribute("aria-label",r);var m=document.createElement("div");m.style.display="inline-block",m.style.position="absolute",m.style.width=r+"%",m.style.backgroundColor=o,m.style.height="100%",m.setAttribute("data-max",c),m.setAttribute("data-min",h);var g=document.createElement("div");if(g.style.position="relative",g.style.width="100%",g.style.height="100%",a){var y=document.createElement("div");y.style.position="absolute",y.style.top=0,y.style.left=0,y.style.textAlign=d,y.style.width="100%",y.style.color=s,y.innerHTML=a}return n((function(){if(!(t instanceof v)){var e=document.createElement("div");e.style.position="absolute",e.style.top="4px",e.style.bottom="4px",e.style.left="4px",e.style.right="4px",u.appendChild(e),u=e}u.appendChild(g),g.appendChild(m),a&&g.appendChild(y)})),""},color:function(t,e,n){return t.getElement().style.backgroundColor=this.sanitizeHTML(t.getValue()),""},buttonTick:function(t,e,n){return'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#2DC214" clip-rule="evenodd" d="M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z" fill-rule="evenodd"/></svg>'},buttonCross:function(t,e,n){return'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#CE1515" d="M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z"/></svg>'},rownum:function(t,e,n){return this.table.rowManager.activeRows.indexOf(t.getRow()._getSelf())+1},handle:function(t,e,n){return t.getElement().classList.add("tabulator-row-handle"),"<div class='tabulator-row-handle-box'><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div></div>"},responsiveCollapse:function(t,e,n){var i=document.createElement("div"),r=t.getRow()._row.modules.responsiveLayout;function o(t){var e=r.element;r.open=t,e&&(r.open?(i.classList.add("open"),e.style.display=""):(i.classList.remove("open"),e.style.display="none"))}return i.classList.add("tabulator-responsive-collapse-toggle"),i.innerHTML="<span class='tabulator-responsive-collapse-toggle-open'>+</span><span class='tabulator-responsive-collapse-toggle-close'>-</span>",t.getElement().classList.add("tabulator-row-handle"),i.addEventListener("click",(function(t){t.stopImmediatePropagation(),o(!r.open)})),o(r.open),i},rowSelection:function(t,e,n){var i=document.createElement("input");if(i.type="checkbox",this.table.modExists("selectRow",!0))if(i.addEventListener("click",(t=>{t.stopPropagation()})),"function"==typeof t.getRow){var r=t.getRow();r instanceof x?(i.addEventListener("change",(t=>{r.toggleSelect()})),i.checked=r.isSelected&&r.isSelected(),this.table.modules.selectRow.registerRowSelectCheckbox(r,i)):i=""}else i.addEventListener("change",(t=>{this.table.modules.selectRow.selectedRows.length?this.table.deselectRow():this.table.selectRow(e.rowRange)})),this.table.modules.selectRow.registerHeaderSelectCheckbox(i);return i}};class j extends s{constructor(t){super(t),this.registerColumnOption("formatter"),this.registerColumnOption("formatterParams"),this.registerColumnOption("formatterPrint"),this.registerColumnOption("formatterPrintParams"),this.registerColumnOption("formatterClipboard"),this.registerColumnOption("formatterClipboardParams"),this.registerColumnOption("formatterHtmlOutput"),this.registerColumnOption("formatterHtmlOutputParams"),this.registerColumnOption("titleFormatter"),this.registerColumnOption("titleFormatterParams")}initialize(){this.subscribe("cell-format",this.formatValue.bind(this)),this.subscribe("cell-rendered",this.cellRendered.bind(this)),this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("column-format",this.formatHeader.bind(this))}initializeColumn(t){t.modules.format=this.lookupFormatter(t,""),void 0!==t.definition.formatterPrint&&(t.modules.format.print=this.lookupFormatter(t,"Print")),void 0!==t.definition.formatterClipboard&&(t.modules.format.clipboard=this.lookupFormatter(t,"Clipboard")),void 0!==t.definition.formatterHtmlOutput&&(t.modules.format.htmlOutput=this.lookupFormatter(t,"HtmlOutput"))}lookupFormatter(t,e){var n={params:t.definition["formatter"+e+"Params"]||{}},i=t.definition["formatter"+e];switch(typeof i){case"string":j.formatters[i]?n.formatter=j.formatters[i]:(console.warn("Formatter Error - No such formatter found: ",i),n.formatter=j.formatters.plaintext);break;case"function":n.formatter=i;break;default:n.formatter=j.formatters.plaintext}return n}cellRendered(t){t.modules.format&&t.modules.format.renderedCallback&&!t.modules.format.rendered&&(t.modules.format.renderedCallback(),t.modules.format.rendered=!0)}formatHeader(t,e,n){var i,r,o,a;return t.definition.titleFormatter?(i=this.getFormatter(t.definition.titleFormatter),o=e=>{t.titleFormatterRendered=e},a={getValue:function(){return e},getElement:function(){return n}},r="function"==typeof(r=t.definition.titleFormatterParams||{})?r():r,i.call(this,a,r,o)):e}formatValue(t){var e=t.getComponent(),n="function"==typeof t.column.modules.format.params?t.column.modules.format.params(e):t.column.modules.format.params;return t.column.modules.format.formatter.call(this,e,n,(function(e){t.modules.format||(t.modules.format={}),t.modules.format.renderedCallback=e,t.modules.format.rendered=!1}))}formatExportValue(t,e){var n,i=t.column.modules.format[e];if(i){function e(e){t.modules.format||(t.modules.format={}),t.modules.format.renderedCallback=e,t.modules.format.rendered=!1}return n="function"==typeof i.params?i.params(component):i.params,i.formatter.call(this,t.getComponent(),n,e)}return this.formatValue(t)}sanitizeHTML(t){if(t){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return String(t).replace(/[&<>"'`=\/]/g,(function(t){return e[t]}))}return t}emptyToSpace(t){return null==t||""===t?"&nbsp;":t}getFormatter(t){switch(typeof t){case"string":j.formatters[t]?t=j.formatters[t]:(console.warn("Formatter Error - No such formatter found: ",t),t=j.formatters.plaintext);break;case"function":t=t;break;default:t=j.formatters.plaintext}return t}}j.moduleName="format",j.formatters=Y;class F extends s{constructor(t){super(t),this.leftColumns=[],this.rightColumns=[],this.leftMargin=0,this.rightMargin=0,this.rightPadding=0,this.initializationMode="left",this.active=!1,this.scrollEndTimer=!1,this.registerColumnOption("frozen")}reset(){this.initializationMode="left",this.leftColumns=[],this.rightColumns=[],this.leftMargin=0,this.rightMargin=0,this.rightMargin=0,this.active=!1,this.table.columnManager.headersElement.style.marginLeft=0,this.table.columnManager.element.style.paddingRight=0}initialize(){this.subscribe("cell-layout",this.layoutCell.bind(this)),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("column-width",this.layout.bind(this)),this.subscribe("row-layout-before",this.layoutRow.bind(this)),this.subscribe("table-layout",this.layout.bind(this)),this.subscribe("scroll-horizontal",this.scrollHorizontal.bind(this)),this.subscribe("columns-loading",this.reset.bind(this)),this.subscribe("table-redraw",this.layout.bind(this))}layoutCell(t){this.layoutElement(t.element,t.column)}initializeColumn(t){var e={margin:0,edge:!1};t.isGroup||(this.frozenCheck(t)?(e.position=this.initializationMode,"left"==this.initializationMode?this.leftColumns.push(t):this.rightColumns.unshift(t),this.active=!0,t.modules.frozen=e):this.initializationMode="right")}frozenCheck(t){return t.parent.isGroup&&t.definition.frozen&&console.warn("Frozen Column Error - Parent column group must be frozen, not individual columns or sub column groups"),t.parent.isGroup?this.frozenCheck(t.parent):t.definition.frozen}scrollHorizontal(){var t;this.active&&(clearTimeout(this.scrollEndTimer),this.scrollEndTimer=setTimeout((()=>{this.layout()}),100),t=this.table.rowManager.getVisibleRows(),this.calcMargins(),this.layoutColumnPosition(),this.layoutCalcRows(),t.forEach((t=>{"row"===t.type&&this.layoutRow(t)})),this.table.rowManager.tableElement.style.marginRight=this.rightMargin)}calcMargins(){this.leftMargin=this._calcSpace(this.leftColumns,this.leftColumns.length)+"px",this.table.columnManager.headersElement.style.marginLeft=this.leftMargin,this.rightMargin=this._calcSpace(this.rightColumns,this.rightColumns.length)+"px",this.table.columnManager.element.style.paddingRight=this.rightMargin,this.rightPadding=this.table.rowManager.element.clientWidth+this.table.columnManager.scrollLeft}layoutCalcRows(){this.table.modExists("columnCalcs")&&(this.table.modules.columnCalcs.topInitialized&&this.table.modules.columnCalcs.topRow&&this.layoutRow(this.table.modules.columnCalcs.topRow),this.table.modules.columnCalcs.botInitialized&&this.table.modules.columnCalcs.botRow&&this.layoutRow(this.table.modules.columnCalcs.botRow),this.table.modExists("groupRows")&&this.layoutGroupCalcs(this.table.modules.groupRows.getGroups()))}layoutGroupCalcs(t){t.forEach((t=>{t.calcs.top&&this.layoutRow(t.calcs.top),t.calcs.bottom&&this.layoutRow(t.calcs.bottom),t.groupList&&t.groupList.length&&this.layoutGroupCalcs(t.groupList&&t.groupList)}))}layoutColumnPosition(t){var e=[];this.leftColumns.forEach(((n,i)=>{if(n.modules.frozen.margin=this._calcSpace(this.leftColumns,i)+this.table.columnManager.scrollLeft+"px",i==this.leftColumns.length-1?n.modules.frozen.edge=!0:n.modules.frozen.edge=!1,n.parent.isGroup){var r=this.getColGroupParentElement(n);e.includes(r)||(this.layoutElement(r,n),e.push(r)),n.modules.frozen.edge&&r.classList.add("tabulator-frozen-"+n.modules.frozen.position)}else this.layoutElement(n.getElement(),n);t&&n.cells.forEach((t=>{this.layoutElement(t.getElement(!0),n)}))})),this.rightColumns.forEach(((e,n)=>{e.modules.frozen.margin=this.rightPadding-this._calcSpace(this.rightColumns,n+1)+"px",n==this.rightColumns.length-1?e.modules.frozen.edge=!0:e.modules.frozen.edge=!1,e.parent.isGroup?this.layoutElement(this.getColGroupParentElement(e),e):this.layoutElement(e.getElement(),e),t&&e.cells.forEach((t=>{this.layoutElement(t.getElement(!0),e)}))}))}getColGroupParentElement(t){return t.parent.isGroup?this.getColGroupParentElement(t.parent):t.getElement()}layout(){this.active&&(this.calcMargins(),this.table.rowManager.getDisplayRows().forEach((t=>{"row"===t.type&&this.layoutRow(t)})),this.layoutCalcRows(),this.layoutColumnPosition(!0),this.table.rowManager.tableElement.style.marginRight=this.rightMargin)}layoutRow(t){t.getElement().style.paddingLeft=this.leftMargin,this.leftColumns.forEach((e=>{var n=t.getCell(e);n&&this.layoutElement(n.getElement(!0),e)})),this.rightColumns.forEach((e=>{var n=t.getCell(e);n&&this.layoutElement(n.getElement(!0),e)}))}layoutElement(t,e){e.modules.frozen&&(t.style.position="absolute",t.style.left=e.modules.frozen.margin,t.classList.add("tabulator-frozen"),e.modules.frozen.edge&&t.classList.add("tabulator-frozen-"+e.modules.frozen.position))}_calcSpace(t,e){var n=0;for(let i=0;i<e;i++)t[i].visible&&(n+=t[i].getWidth());return n}}F.moduleName="frozenColumns";class B extends s{constructor(t){super(t),this.topElement=document.createElement("div"),this.rows=[],this.registerComponentFunction("row","freeze",this.freezeRow.bind(this)),this.registerComponentFunction("row","unfreeze",this.unfreezeRow.bind(this)),this.registerComponentFunction("row","isFrozen",this.isRowFrozen.bind(this))}initialize(){this.rows=[],this.topElement.classList.add("tabulator-frozen-rows-holder"),this.table.columnManager.getElement().insertBefore(this.topElement,this.table.columnManager.headersElement.nextSibling),this.subscribe("row-deleting",this.detachRow.bind(this)),this.registerDisplayHandler(this.getRows.bind(this),10)}isRowFrozen(t){return this.rows.indexOf(t)>-1}isFrozen(){return!!this.rows.length}getRows(t){var e=t.slice(0);return this.rows.forEach((function(t){var n=e.indexOf(t);n>-1&&e.splice(n,1)})),e}freezeRow(t){t.modules.frozen?console.warn("Freeze Error - Row is already frozen"):(t.modules.frozen=!0,this.topElement.appendChild(t.getElement()),t.initialize(),t.normalizeHeight(),this.table.rowManager.adjustTableSize(),this.rows.push(t),this.refreshData(!1,"display"),this.styleRows())}unfreezeRow(t){this.rows.indexOf(t);t.modules.frozen?(t.modules.frozen=!1,this.detachRow(t),this.table.rowManager.adjustTableSize(),this.refreshData(!1,"display"),this.rows.length&&this.styleRows()):console.warn("Freeze Error - Row is already unfrozen")}detachRow(t){var e=this.rows.indexOf(t);if(e>-1){var n=t.getElement();n.parentNode&&n.parentNode.removeChild(n),this.rows.splice(e,1)}}styleRows(t){this.rows.forEach(((t,e)=>{this.table.rowManager.styleRow(t,e)}))}}B.moduleName="frozenRows";class z{constructor(t){return this._group=t,this.type="GroupComponent",new Proxy(this,{get:function(t,e,n){return void 0!==t[e]?t[e]:t._group.table.componentFunctionBinder.handle("row",t._group,e)}})}getKey(){return this._group.key}getField(){return this._group.field}getElement(){return this._group.element}getRows(){return this._group.getRows(!0)}getSubGroups(){return this._group.getSubGroups(!0)}getParentGroup(){return!!this._group.parent&&this._group.parent.getComponent()}isVisible(){return this._group.visible}show(){this._group.show()}hide(){this._group.hide()}toggle(){this._group.toggleVisibility()}_getSelf(){return this._group}getTable(){return this._group.groupManager.table}}class H{constructor(t,e,n,i,r,o,a){this.groupManager=t,this.parent=e,this.key=i,this.level=n,this.field=r,this.hasSubGroups=n<t.groupIDLookups.length-1,this.addRow=this.hasSubGroups?this._addRowToGroup:this._addRow,this.type="group",this.old=a,this.rows=[],this.groups=[],this.groupList=[],this.generator=o,this.elementContents=!1,this.height=0,this.outerHeight=0,this.initialized=!1,this.calcs={},this.initialized=!1,this.modules={},this.arrowElement=!1,this.visible=a?a.visible:void 0!==t.startOpen[n]?t.startOpen[n]:t.startOpen[0],this.component=null,this.createElements(),this.addBindings(),this.createValueGroups()}wipe(){this.groupList.length?this.groupList.forEach((function(t){t.wipe()})):(this.element=!1,this.arrowElement=!1,this.elementContents=!1)}createElements(){var t=document.createElement("div");t.classList.add("tabulator-arrow"),this.element=document.createElement("div"),this.element.classList.add("tabulator-row"),this.element.classList.add("tabulator-group"),this.element.classList.add("tabulator-group-level-"+this.level),this.element.setAttribute("role","rowgroup"),this.arrowElement=document.createElement("div"),this.arrowElement.classList.add("tabulator-group-toggle"),this.arrowElement.appendChild(t),!1!==this.groupManager.table.options.movableRows&&this.groupManager.table.modExists("moveRow")&&this.groupManager.table.modules.moveRow.initializeGroupHeader(this)}createValueGroups(){var t=this.level+1;this.groupManager.allowedValues&&this.groupManager.allowedValues[t]&&this.groupManager.allowedValues[t].forEach((e=>{this._createGroup(e,t)}))}addBindings(){var t,e,n;(this.groupManager.table.options.groupContextMenu||this.groupManager.table.options.groupClickMenu)&&this.groupManager.table.modExists("menu")&&this.groupManager.table.modules.menu.initializeGroup.call(this.groupManager.table.modules.menu,this),this.groupManager.table.options.groupTap&&(n=!1,this.element.addEventListener("touchstart",(t=>{n=!0}),{passive:!0}),this.element.addEventListener("touchend",(t=>{n&&this.groupManager.table.options.groupTap(t,this.getComponent()),n=!1}))),this.groupManager.table.options.groupDblTap&&(t=null,this.element.addEventListener("touchend",(e=>{t?(clearTimeout(t),t=null,this.groupManager.table.options.groupDblTap(e,this.getComponent())):t=setTimeout((()=>{clearTimeout(t),t=null}),300)}))),this.groupManager.table.options.groupTapHold&&(e=null,this.element.addEventListener("touchstart",(t=>{clearTimeout(e),e=setTimeout((()=>{clearTimeout(e),e=null,n=!1,this.groupManager.table.options.groupTapHold(t,this.getComponent())}),1e3)}),{passive:!0}),this.element.addEventListener("touchend",(t=>{clearTimeout(e),e=null}))),this.groupManager.table.options.groupToggleElement&&("arrow"==this.groupManager.table.options.groupToggleElement?this.arrowElement:this.element).addEventListener("click",(t=>{t.stopPropagation(),t.stopImmediatePropagation(),this.toggleVisibility()}))}_createGroup(t,e){var n=e+"_"+t,i=new H(this.groupManager,this,e,t,this.groupManager.groupIDLookups[e].field,this.groupManager.headerGenerator[e]||this.groupManager.headerGenerator[0],!!this.old&&this.old.groups[n]);this.groups[n]=i,this.groupList.push(i)}_addRowToGroup(t){var e=this.level+1;if(this.hasSubGroups){var n=this.groupManager.groupIDLookups[e].func(t.getData()),i=e+"_"+n;this.groupManager.allowedValues&&this.groupManager.allowedValues[e]?this.groups[i]&&this.groups[i].addRow(t):(this.groups[i]||this._createGroup(n,e),this.groups[i].addRow(t))}}_addRow(t){this.rows.push(t),t.modules.group=this}insertRow(t,e,n){var i=this.conformRowData({});t.updateData(i);var r=this.rows.indexOf(e);r>-1?n?this.rows.splice(r+1,0,t):this.rows.splice(r,0,t):n?this.rows.push(t):this.rows.unshift(t),t.modules.group=this,this.generateGroupHeaderContents(),this.groupManager.table.modExists("columnCalcs")&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modules.columnCalcs.recalcGroup(this),this.groupManager.updateGroupRows(!0)}scrollHeader(t){this.arrowElement.style.marginLeft=t,this.groupList.forEach((function(e){e.scrollHeader(t)}))}getRowIndex(t){}conformRowData(t){return this.field?t[this.field]=this.key:console.warn("Data Conforming Error - Cannot conform row data to match new group as groupBy is a function"),this.parent&&(t=this.parent.conformRowData(t)),t}removeRow(t){var e=this.rows.indexOf(t),n=t.getElement();e>-1&&this.rows.splice(e,1),this.groupManager.table.options.groupValues||this.rows.length?(n.parentNode&&n.parentNode.removeChild(n),this.generateGroupHeaderContents(),this.groupManager.table.modExists("columnCalcs")&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modules.columnCalcs.recalcGroup(this)):(this.parent?this.parent.removeGroup(this):this.groupManager.removeGroup(this),this.groupManager.updateGroupRows(!0))}removeGroup(t){var e,n=t.level+"_"+t.key;this.groups[n]&&(delete this.groups[n],(e=this.groupList.indexOf(t))>-1&&this.groupList.splice(e,1),this.groupList.length||(this.parent?this.parent.removeGroup(this):this.groupManager.removeGroup(this)))}getHeadersAndRows(t){var e=[];return e.push(this),this._visSet(),this.visible?this.groupList.length?this.groupList.forEach((function(n){e=e.concat(n.getHeadersAndRows(t))})):(!t&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.modules.columnCalcs.hasTopCalcs()&&(this.calcs.top&&(this.calcs.top.detachElement(),this.calcs.top.deleteCells()),this.calcs.top=this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows),e.push(this.calcs.top)),e=e.concat(this.rows),!t&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.modules.columnCalcs.hasBottomCalcs()&&(this.calcs.bottom&&(this.calcs.bottom.detachElement(),this.calcs.bottom.deleteCells()),this.calcs.bottom=this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows),e.push(this.calcs.bottom))):this.groupList.length||"table"==this.groupManager.table.options.columnCalcs||this.groupManager.table.modExists("columnCalcs")&&(!t&&this.groupManager.table.modules.columnCalcs.hasTopCalcs()&&(this.calcs.top&&(this.calcs.top.detachElement(),this.calcs.top.deleteCells()),this.groupManager.table.options.groupClosedShowCalcs&&(this.calcs.top=this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows),e.push(this.calcs.top))),!t&&this.groupManager.table.modules.columnCalcs.hasBottomCalcs()&&(this.calcs.bottom&&(this.calcs.bottom.detachElement(),this.calcs.bottom.deleteCells()),this.groupManager.table.options.groupClosedShowCalcs&&(this.calcs.bottom=this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows),e.push(this.calcs.bottom)))),e}getData(t,e){var n=[];return this._visSet(),(!t||t&&this.visible)&&this.rows.forEach((t=>{n.push(t.getData(e||"data"))})),n}getRowCount(){var t=0;return this.groupList.length?this.groupList.forEach((e=>{t+=e.getRowCount()})):t=this.rows.length,t}toggleVisibility(){this.visible?this.hide():this.show()}hide(){this.visible=!1,"classic"!=this.groupManager.table.rowManager.getRenderMode()||this.groupManager.table.options.pagination?this.groupManager.updateGroupRows(!0):(this.element.classList.remove("tabulator-group-visible"),this.groupList.length?this.groupList.forEach((t=>{t.getHeadersAndRows().forEach((t=>{t.detachElement()}))})):this.rows.forEach((t=>{var e=t.getElement();e.parentNode.removeChild(e)})),this.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(),this.groupManager.getDisplayIndex()),this.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth()),this.groupManager.table.externalEvents.dispatch("groupVisibilityChanged",this.getComponent(),!1)}show(){if(this.visible=!0,"classic"!=this.groupManager.table.rowManager.getRenderMode()||this.groupManager.table.options.pagination)this.groupManager.updateGroupRows(!0);else{this.element.classList.add("tabulator-group-visible");var t=this.getElement();this.groupList.length?this.groupList.forEach((e=>{e.getHeadersAndRows().forEach((e=>{var n=e.getElement();t.parentNode.insertBefore(n,t.nextSibling),e.initialize(),t=n}))})):this.rows.forEach((e=>{var n=e.getElement();t.parentNode.insertBefore(n,t.nextSibling),e.initialize(),t=n})),this.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(),this.groupManager.getDisplayIndex()),this.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth()}this.groupManager.table.externalEvents.dispatch("groupVisibilityChanged",this.getComponent(),!0)}_visSet(){var t=[];"function"==typeof this.visible&&(this.rows.forEach((function(e){t.push(e.getData())})),this.visible=this.visible(this.key,this.getRowCount(),t,this.getComponent()))}getRowGroup(t){var e=!1;return this.groupList.length?this.groupList.forEach((function(n){var i=n.getRowGroup(t);i&&(e=i)})):this.rows.find((function(e){return e===t}))&&(e=this),e}getSubGroups(t){var e=[];return this.groupList.forEach((function(n){e.push(t?n.getComponent():n)})),e}getRows(t){var e=[];return this.rows.forEach((function(n){e.push(t?n.getComponent():n)})),e}generateGroupHeaderContents(){var t=[];for(this.rows.forEach((function(e){t.push(e.getData())})),this.elementContents=this.generator(this.key,this.getRowCount(),t,this.getComponent());this.element.firstChild;)this.element.removeChild(this.element.firstChild);"string"==typeof this.elementContents?this.element.innerHTML=this.elementContents:this.element.appendChild(this.elementContents),this.element.insertBefore(this.arrowElement,this.element.firstChild)}getPath(t=[]){return t.unshift(this.key),this.parent&&this.parent.getPath(t),t}getElement(){this.addBindingsd=!1,this._visSet(),this.visible?this.element.classList.add("tabulator-group-visible"):this.element.classList.remove("tabulator-group-visible");for(var t=0;t<this.element.childNodes.length;++t)this.element.childNodes[t].parentNode.removeChild(this.element.childNodes[t]);return this.generateGroupHeaderContents(),this.element}detachElement(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)}normalizeHeight(){this.setHeight(this.element.clientHeight)}initialize(t){this.initialized&&!t||(this.normalizeHeight(),this.initialized=!0)}reinitialize(){this.initialized=!1,this.height=0,l.elVisible(this.element)&&this.initialize(!0)}setHeight(t){this.height!=t&&(this.height=t,this.outerHeight=this.element.offsetHeight)}getHeight(){return this.outerHeight}getGroup(){return this}reinitializeHeight(){}calcHeight(){}setCellHeight(){}clearCellHeight(){}deinitializeHeight(){}getComponent(){return this.component||(this.component=new z(this)),this.component}}class G extends s{constructor(t){super(t),this.groupIDLookups=!1,this.startOpen=[function(){return!1}],this.headerGenerator=[function(){return""}],this.groupList=[],this.allowedValues=!1,this.groups={},this.displayIndex=0,this.displayHandler=this.getRows.bind(this),this.registerTableOption("groupBy",!1),this.registerTableOption("groupStartOpen",!0),this.registerTableOption("groupValues",!1),this.registerTableOption("groupUpdateOnCellEdit",!1),this.registerTableOption("groupHeader",!1),this.registerTableOption("groupHeaderPrint",null),this.registerTableOption("groupHeaderClipboard",null),this.registerTableOption("groupHeaderHtmlOutput",null),this.registerTableOption("groupHeaderDownload",null),this.registerTableOption("groupToggleElement","arrow"),this.registerTableOption("groupClosedShowCalcs",!1),this.registerTableFunction("setGroupBy",this.setGroupBy.bind(this)),this.registerTableFunction("setGroupValues",this.setGroupValues.bind(this)),this.registerTableFunction("setGroupStartOpen",this.setGroupStartOpen.bind(this)),this.registerTableFunction("setGroupHeader",this.setGroupHeader.bind(this)),this.registerTableFunction("getGroups",this.userGetGroups.bind(this)),this.registerTableFunction("getGroupedData",this.userGetGroupedData.bind(this)),this.registerComponentFunction("row","getGroup",this.rowGetGroup.bind(this))}initialize(){this.table.options.groupBy&&(this.configureGroupSetup(),this.table.options.groupUpdateOnCellEdit&&(this.subscribe("cell-value-updated",this.cellUpdated.bind(this)),this.subscribe("row-data-changed",this.reassignRowToGroup.bind(this),0)),this.subscribe("row-deleting",this.rowDeleting.bind(this)),this.subscribe("row-deleted",this.rowsUpdated.bind(this)),this.subscribe("scroll-horizontal",this.scrollHeaders.bind(this)),this.subscribe("rows-wipe",this.wipe.bind(this)),this.subscribe("rows-added",this.rowsUpdated.bind(this)),this.subscribe("row-moving",this.rowMoving.bind(this)),this.subscribe("row-adding-index",this.rowAddingIndex.bind(this)),this.subscribe("rows-sample",this.rowSample.bind(this)),this.subscribe("render-virtual-fill",this.virtualRenderFill.bind(this)),this.registerDisplayHandler(this.displayHandler,20),this.initialized=!0)}configureGroupSetup(){if(this.table.options.groupBy){var t=this.table.options.groupBy,e=this.table.options.groupStartOpen,n=this.table.options.groupHeader;if(this.allowedValues=this.table.options.groupValues,Array.isArray(t)&&Array.isArray(n)&&t.length>n.length&&console.warn("Error creating group headers, groupHeader array is shorter than groupBy array"),this.headerGenerator=[function(){return""}],this.startOpen=[function(){return!1}],this.langBind("groups|item",((t,e)=>{this.headerGenerator[0]=(n,i,r)=>(void 0===n?"":n)+"<span>("+i+" "+(1===i?t:e.groups.items)+")</span>"})),this.groupIDLookups=[],Array.isArray(t)||t)this.table.modExists("columnCalcs")&&"table"!=this.table.options.columnCalcs&&"both"!=this.table.options.columnCalcs&&this.table.modules.columnCalcs.removeCalcs();else if(this.table.modExists("columnCalcs")&&"group"!=this.table.options.columnCalcs)this.table.columnManager.getRealColumns().forEach((t=>{t.definition.topCalc&&this.table.modules.columnCalcs.initializeTopRow(),t.definition.bottomCalc&&this.table.modules.columnCalcs.initializeBottomRow()}));Array.isArray(t)||(t=[t]),t.forEach(((t,e)=>{var n,i;n="function"==typeof t?t:(i=this.table.columnManager.getColumnByField(t))?function(t){return i.getFieldValue(t)}:function(e){return e[t]},this.groupIDLookups.push({field:"function"!=typeof t&&t,func:n,values:!!this.allowedValues&&this.allowedValues[e]})})),e&&(Array.isArray(e)||(e=[e]),e.forEach((t=>{})),this.startOpen=e),n&&(this.headerGenerator=Array.isArray(n)?n:[n])}}rowSample(t,e){var n=this.getGroups(!1)[0];return e.push(n.getRows(!1)[0]),e}virtualRenderFill(){var t=this.table.rowManager.tableElement,e=this.table.rowManager.getVisibleRows();e=e.filter((t=>"group"!==t.type)),t.style.minWidth=e.length?"":this.table.columnManager.getWidth()+"px"}rowAddingIndex(t,e,n){this.assignRowToGroup(t);var i=t.modules.group.rows;return i.length>1&&(!e||e&&-1==i.indexOf(e)?n?i[0]!==t&&(e=i[0],this.table.rowManager.moveRowInArray(t.modules.group.rows,t,e,!n)):i[i.length-1]!==t&&(e=i[i.length-1],this.table.rowManager.moveRowInArray(t.modules.group.rows,t,e,!n)):this.table.rowManager.moveRowInArray(t.modules.group.rows,t,e,!n)),e}trackChanges(){this.dispatch("group-changed")}setGroupBy(t){this.table.options.groupBy=t,this.configureGroupSetup(),this.refreshData(),this.trackChanges()}setGroupValues(t){this.table.options.groupValues=t,this.configureGroupSetup(),this.refreshData(),this.trackChanges()}setGroupStartOpen(t){this.table.options.groupStartOpen=t,this.configureGroupSetup(),this.table.options.groupBy?(this.refreshData(),this.trackChanges()):console.warn("Grouping Update - cant refresh view, no groups have been set")}setGroupHeader(t){this.table.options.groupHeader=t,this.configureGroupSetup(),this.table.options.groupBy?(this.refreshData(),this.trackChanges()):console.warn("Grouping Update - cant refresh view, no groups have been set")}userGetGroups(t){return this.getGroups(!0)}userGetGroupedData(){return this.table.options.groupBy?this.getGroupedData():this.getData()}rowGetGroup(t){return!!t.modules.group&&t.modules.group.getComponent()}rowMoving(t,e,n){!n&&e instanceof H&&(e=this.table.rowManager.prevDisplayRow(t)||e);var i=e instanceof H?e:e.modules.group,r=t instanceof H?t:t.modules.group;i===r?this.table.rowManager.moveRowInArray(i.rows,t,e,n):(r&&r.removeRow(t),i.insertRow(t,e,n))}rowDeleting(t){t.modules.group&&t.modules.group.removeRow(t)}rowsUpdated(t){this.updateGroupRows(!0)}cellUpdated(t){this.reassignRowToGroup(t.row)}setDisplayIndex(t){this.displayIndex=t}getDisplayIndex(){return this.displayIndex}getRows(t){return this.table.options.groupBy&&this.groupIDLookups.length?(this.dispatchExternal("dataGrouping"),this.generateGroups(t),this.subscribedExternal("dataGrouped")&&this.dispatchExternal("dataGrouped",this.getGroups(!0)),this.updateGroupRows()):t.slice(0)}getGroups(t){var e=[];return this.groupList.forEach((function(n){e.push(t?n.getComponent():n)})),e}getChildGroups(t){var e=[];return t||(t=this),t.groupList.forEach((t=>{t.groupList.length?e=e.concat(this.getChildGroups(t)):e.push(t)})),e}wipe(){this.groupList.forEach((function(t){t.wipe()}))}pullGroupListData(t){var e=[];return t.forEach((t=>{var n={level:0,rowCount:0,headerContent:""},i=[];t.hasSubGroups?(i=this.pullGroupListData(t.groupList),n.level=t.level,n.rowCount=i.length-t.groupList.length,n.headerContent=t.generator(t.key,n.rowCount,t.rows,t),e.push(n),e=e.concat(i)):(n.level=t.level,n.headerContent=t.generator(t.key,t.rows.length,t.rows,t),n.rowCount=t.getRows().length,e.push(n),t.getRows().forEach((t=>{e.push(t.getData("data"))})))})),e}getGroupedData(){return this.pullGroupListData(this.groupList)}getRowGroup(t){var e=!1;return this.groupList.forEach((n=>{var i=n.getRowGroup(t);i&&(e=i)})),e}countGroups(){return this.groupList.length}generateGroups(t){var e=this.groups;this.groups={},this.groupList=[],this.allowedValues&&this.allowedValues[0]?(this.allowedValues[0].forEach((t=>{this.createGroup(t,0,e)})),t.forEach((t=>{this.assignRowToExistingGroup(t,e)}))):t.forEach((t=>{this.assignRowToGroup(t,e)}))}createGroup(t,e,n){var i,r=e+"_"+t;n=n||[],i=new H(this,!1,e,t,this.groupIDLookups[0].field,this.headerGenerator[0],n[r]),this.groups[r]=i,this.groupList.push(i)}assignRowToExistingGroup(t,e){var n="0_"+this.groupIDLookups[0].func(t.getData());this.groups[n]&&this.groups[n].addRow(t)}assignRowToGroup(t,e){var n=this.groupIDLookups[0].func(t.getData()),i=!this.groups["0_"+n];return i&&this.createGroup(n,0,e),this.groups["0_"+n].addRow(t),!i}reassignRowToGroup(t){if("row"===t.type){var e=t.modules.group,n=e.getPath(),i=this.getExpectedPath(t);n.length==i.length&&n.every(((t,e)=>t===i[e]))||(e.removeRow(t),this.assignRowToGroup(t,this.groups),this.refreshData(!0))}}getExpectedPath(t){var e=[],n=t.getData();return this.groupIDLookups.forEach((t=>{e.push(t.func(n))})),e}updateGroupRows(t){var e=[];return this.groupList.forEach((t=>{e=e.concat(t.getHeadersAndRows())})),t&&this.refreshData(!0,this.displayHandler),e}scrollHeaders(t){"virtual"===this.table.options.renderHorizontal&&(t-=this.table.columnManager.renderer.vDomPadLeft),t+="px",this.groupList.forEach((e=>{e.scrollHeader(t)}))}removeGroup(t){var e,n=t.level+"_"+t.key;this.groups[n]&&(delete this.groups[n],(e=this.groupList.indexOf(t))>-1&&this.groupList.splice(e,1))}}G.moduleName="groupRows";class W extends s{constructor(t){super(t),this.history=[],this.index=-1,this.registerTableOption("history",!1)}initialize(){this.table.options.history&&(this.subscribe("cell-value-updated",this.cellUpdated.bind(this)),this.subscribe("cell-delete",this.clearComponentHistory.bind(this)),this.subscribe("row-delete",this.rowDeleted.bind(this)),this.subscribe("rows-wipe",this.clear.bind(this)),this.subscribe("row-added",this.rowAdded.bind(this)),this.subscribe("row-move",this.rowMoved.bind(this))),this.registerTableFunction("undo",this.undo.bind(this)),this.registerTableFunction("redo",this.redo.bind(this)),this.registerTableFunction("getHistoryUndoSize",this.getHistoryUndoSize.bind(this)),this.registerTableFunction("getHistoryRedoSize",this.getHistoryRedoSize.bind(this)),this.registerTableFunction("clearHistory",this.clear.bind(this))}rowMoved(t,e,n){this.action("rowMove",t,{posFrom:this.table.rowManager.getRowPosition(t),posTo:this.table.rowManager.getRowPosition(e),to:e,after:n})}rowAdded(t,e,n,i){this.action("rowAdd",t,{data:e,pos:n,index:i})}rowDeleted(t){var e,n;this.table.options.groupBy?(e=(n=t.getComponent().getGroup().rows).indexOf(t))&&(e=n[e-1]):(e=t.table.rowManager.getRowIndex(t))&&(e=t.table.rowManager.rows[e-1]),this.action("rowDelete",t,{data:t.getData(),pos:!e,index:e})}cellUpdated(t){this.action("cellEdit",t,{oldValue:t.oldValue,newValue:t.value})}clear(){this.history=[],this.index=-1}action(t,e,n){this.history=this.history.slice(0,this.index+1),this.history.push({type:t,component:e,data:n}),this.index++}getHistoryUndoSize(){return this.index+1}getHistoryRedoSize(){return this.history.length-(this.index+1)}clearComponentHistory(t){var e=this.history.findIndex((function(e){return e.component===t}));e>-1&&(this.history.splice(e,1),e<=this.index&&this.index--,this.clearComponentHistory(t))}undo(){if(this.index>-1){let t=this.history[this.index];return W.undoers[t.type].call(this,t),this.index--,this.dispatchExternal("historyUndo",t.type,t.component.getComponent(),t.data),!0}return console.warn("History Undo Error - No more history to undo"),!1}redo(){if(this.history.length-1>this.index){this.index++;let t=this.history[this.index];return W.redoers[t.type].call(this,t),this.dispatchExternal("historyRedo",t.type,t.component.getComponent(),t.data),!0}return console.warn("History Redo Error - No more history to redo"),!1}_rebindRow(t,e){this.history.forEach((function(n){if(n.component instanceof M)n.component===t&&(n.component=e);else if(n.component instanceof y&&n.component.row===t){var i=n.component.column.getField();i&&(n.component=e.getCell(i))}}))}}W.moduleName="history",W.undoers={cellEdit:function(t){t.component.setValueProcessData(t.data.oldValue),t.component.cellRendered()},rowAdd:function(t){t.component.deleteActual()},rowDelete:function(t){var e=this.table.rowManager.addRowActual(t.data.data,t.data.pos,t.data.index);this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.updateGroupRows(!0),this._rebindRow(t.component,e)},rowMove:function(t){this.table.rowManager.moveRowActual(t.component,this.table.rowManager.rows[t.data.posFrom],!t.data.after),this.table.rowManager.redraw()}},W.redoers={cellEdit:function(t){t.component.setValueProcessData(t.data.newValue),t.component.cellRendered()},rowAdd:function(t){var e=this.table.rowManager.addRowActual(t.data.data,t.data.pos,t.data.index);this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.updateGroupRows(!0),this._rebindRow(t.component,e)},rowDelete:function(t){t.component.deleteActual()},rowMove:function(t){this.table.rowManager.moveRowActual(t.component,this.table.rowManager.rows[t.data.posTo],t.data.after),this.table.rowManager.redraw()}};class U extends s{constructor(t){super(t),this.fieldIndex=[],this.hasIndex=!1}initialize(){this.tableElementCheck()}tableElementCheck(){this.table.originalElement&&"TABLE"===this.table.originalElement.tagName&&this.parseTable()}parseTable(){var t=this.table.originalElement,e=this.table.options,n=(e.columns,t.getElementsByTagName("th")),i=t.getElementsByTagName("tbody")[0],r=[];this.hasIndex=!1,this.dispatchExternal("htmlImporting"),i=i?i.getElementsByTagName("tr"):[],this._extractOptions(t,e),n.length?this._extractHeaders(n,i):this._generateBlankHeaders(n,i);for(var o=0;o<i.length;o++){var a=i[o].getElementsByTagName("td"),s={};this.hasIndex||(s[e.index]=o);for(var l=0;l<a.length;l++){var u=a[l];void 0!==this.fieldIndex[l]&&(s[this.fieldIndex[l]]=u.innerHTML)}r.push(s)}e.data=r,this.dispatchExternal("htmlImported")}_extractOptions(t,e,n){var i=t.attributes,r=n?Object.assign([],n):Object.keys(e),o={};for(var a in r.forEach((t=>{o[t.toLowerCase()]=t})),i){var s,l=i[a];l&&"object"==typeof l&&l.name&&0===l.name.indexOf("tabulator-")&&(s=l.name.replace("tabulator-",""),void 0!==o[s]&&(e[o[s]]=this._attribValue(l.value)))}}_attribValue(t){return"true"===t||"false"!==t&&t}_findCol(t){return this.table.options.columns.find((e=>e.title===t))||!1}_extractHeaders(t,e){for(var n=0;n<t.length;n++){var i,r=t[n],o=!1,a=this._findCol(r.textContent);a?o=!0:a={title:r.textContent.trim()},a.field||(a.field=r.textContent.trim().toLowerCase().replace(" ","_")),(i=r.getAttribute("width"))&&!a.width&&(a.width=i),r.attributes,this._extractOptions(r,a,w.prototype.defaultOptionList),this.fieldIndex[n]=a.field,a.field==this.table.options.index&&(this.hasIndex=!0),o||this.table.options.columns.push(a)}}_generateBlankHeaders(t,e){for(var n=0;n<t.length;n++){var i=t[n],r={title:"",field:"col"+n};this.fieldIndex[n]=r.field;var o=i.getAttribute("width");o&&(r.width=o),this.table.options.columns.push(r)}}}U.moduleName="htmlTableImport";class V extends s{constructor(t){super(t),this.eventMap={rowClick:"row-click",rowDblClick:"row-dblclick",rowContext:"row-contextmenu",rowMouseEnter:"row-mouseenter",rowMouseLeave:"row-mouseleave",rowMouseOver:"row-mouseover",rowMouseOut:"row-mouseout",rowMouseMove:"row-mousemove",rowTap:"row",rowDblTap:"row",rowTapHold:"row",cellClick:"cell-click",cellDblClick:"cell-dblclick",cellContext:"cell-contextmenu",cellMouseEnter:"cell-mouseenter",cellMouseLeave:"cell-mouseleave",cellMouseOver:"cell-mouseover",cellMouseOut:"cell-mouseout",cellMouseMove:"cell-mousemove",cellTap:"cell",cellDblTap:"cell",cellTapHold:"cell",headerClick:"column-click",headerDblClick:"column-dblclick",headerContext:"column-contextmenu",headerMouseEnter:"column-mouseenter",headerMouseLeave:"column-mouseleave",headerMouseOver:"column-mouseover",headerMouseOut:"column-mouseout",headerMouseMove:"column-mousemove",headerTap:"column",headerDblTap:"column",headerTapHold:"column",groupClick:"group-click",groupDblClick:"group-dblclick",groupContext:"group-contextmenu",groupMouseEnter:"group-mouseenter",groupMouseLeave:"group-mouseleave",groupMouseOver:"group-mouseover",groupMouseOut:"group-mouseout",groupMouseMove:"group-mousemove",groupTap:"group",groupDblTap:"group",groupTapHold:"group"},this.subscribers={},this.touchSubscribers={},this.columnSubscribers={},this.touchWatchers={row:{tap:null,tapDbl:null,tapHold:null},cell:{tap:null,tapDbl:null,tapHold:null},column:{tap:null,tapDbl:null,tapHold:null}},this.registerColumnOption("headerClick"),this.registerColumnOption("headerDblClick"),this.registerColumnOption("headerContext"),this.registerColumnOption("headerMouseEnter"),this.registerColumnOption("headerMouseLeave"),this.registerColumnOption("headerMouseOver"),this.registerColumnOption("headerMouseOut"),this.registerColumnOption("headerMouseMove"),this.registerColumnOption("headerTap"),this.registerColumnOption("headerDblTap"),this.registerColumnOption("headerTapHold"),this.registerColumnOption("cellClick"),this.registerColumnOption("cellDblClick"),this.registerColumnOption("cellContext"),this.registerColumnOption("cellMouseEnter"),this.registerColumnOption("cellMouseLeave"),this.registerColumnOption("cellMouseOver"),this.registerColumnOption("cellMouseOut"),this.registerColumnOption("cellMouseMove"),this.registerColumnOption("cellTap"),this.registerColumnOption("cellDblTap"),this.registerColumnOption("cellTapHold")}initialize(){this.initializeExternalEvents(),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("cell-dblclick",this.cellContentsSelectionFixer.bind(this))}cellContentsSelectionFixer(t,e){if(!this.table.modExists("edit")||this.table.modules.edit.currentCell!==this){t.preventDefault();try{if(document.selection)(n=document.body.createTextRange()).moveToElementText(this.element),n.select();else if(window.getSelection){var n;(n=document.createRange()).selectNode(this.element),window.getSelection().removeAllRanges(),window.getSelection().addRange(n)}}catch(t){}}}initializeExternalEvents(){for(let t in this.eventMap)this.subscriptionChangeExternal(t,this.subscriptionChanged.bind(this,t))}subscriptionChanged(t,e){e?this.subscribers[t]||(this.eventMap[t].includes("-")?(this.subscribers[t]=this.handle.bind(this,t),this.subscribe(this.eventMap[t],this.subscribers[t])):this.subscribeTouchEvents(t)):this.eventMap[t].includes("-")?!this.subscribers[t]||this.columnSubscribers[t]||this.subscribedExternal(t)||(this.unsubscribe(this.eventMap[t],this.subscribers[t]),delete this.subscribers[t]):this.unsubscribeTouchEvents(t)}subscribeTouchEvents(t){var e=this.eventMap[t];this.touchSubscribers[e+"-touchstart"]||(this.touchSubscribers[e+"-touchstart"]=this.handleTouch.bind(this,e,"start"),this.touchSubscribers[e+"-touchend"]=this.handleTouch.bind(this,e,"end"),this.subscribe(e+"-touchstart",this.touchSubscribers[e+"-touchstart"]),this.subscribe(e+"-touchend",this.touchSubscribers[e+"-touchend"])),this.subscribers[t]=!0}unsubscribeTouchEvents(t){var e=!0,n=this.eventMap[t];if(this.subscribers[t]&&!this.subscribedExternal(t)){delete this.subscribers[t];for(let t in this.eventMap)this.eventMap[t]===n&&this.subscribers[t]&&(e=!1);e&&(this.unsubscribe(n+"-touchstart",this.touchSubscribers[n+"-touchstart"]),this.unsubscribe(n+"-touchend",this.touchSubscribers[n+"-touchend"]),delete this.touchSubscribers[n+"-touchstart"],delete this.touchSubscribers[n+"-touchend"])}}initializeColumn(t){var e=t.definition;for(let n in this.eventMap)e[n]&&(this.subscriptionChanged(n,!0),this.columnSubscribers[n]||(this.columnSubscribers[n]=[]),this.columnSubscribers[n].push(t))}handle(t,e,n){this.dispatchEvent(t,e,n)}handleTouch(t,e,n,i){var r=this.touchWatchers[t];switch("column"===t&&(t="header"),e){case"start":r.tap=!0,clearTimeout(r.tapHold),r.tapHold=setTimeout((()=>{clearTimeout(r.tapHold),r.tapHold=null,r.tap=null,clearTimeout(r.tapDbl),r.tapDbl=null,this.dispatchEvent(t+"TapHold",n,i)}),1e3);break;case"end":r.tap&&(r.tap=null,this.dispatchEvent(t+"Tap",n,i)),r.tapDbl?(clearTimeout(r.tapDbl),r.tapDbl=null,this.dispatchEvent(t+"DblTap",n,i)):r.tapDbl=setTimeout((()=>{clearTimeout(r.tapDbl),r.tapDbl=null}),300),clearTimeout(r.tapHold),r.tapHold=null}}dispatchEvent(t,e,n){var i,r=n.getComponent();this.columnSubscribers[t]&&(n instanceof y?i=n.column.definition[t]:n instanceof w&&(i=n.definition[t]),i&&i(e,r)),this.dispatchExternal(t,e,r)}}V.moduleName="interaction";class X extends s{constructor(t){super(t),this.watchKeys=null,this.pressedKeys=null,this.keyupBinding=!1,this.keydownBinding=!1,this.registerTableOption("keybindings",[]),this.registerTableOption("tabEndNewRow",!1)}initialize(){var t=this.table.options.keybindings,e={};if(this.watchKeys={},this.pressedKeys=[],!1!==t){for(let t in X.bindings)e[t]=X.bindings[t];if(Object.keys(t).length)for(let n in t)e[n]=t[n];this.mapBindings(e),this.bindEvents()}this.subscribe("table-destroy",this.clearBindings.bind(this))}mapBindings(t){for(let e in t)X.actions[e]?t[e]&&("object"!=typeof t[e]&&(t[e]=[t[e]]),t[e].forEach((t=>{this.mapBinding(e,t)}))):console.warn("Key Binding Error - no such action:",e)}mapBinding(t,e){var n={action:X.actions[t],keys:[],ctrl:!1,shift:!1,meta:!1};e.toString().toLowerCase().split(" ").join("").split("+").forEach((t=>{switch(t){case"ctrl":n.ctrl=!0;break;case"shift":n.shift=!0;break;case"meta":n.meta=!0;break;default:t=parseInt(t),n.keys.push(t),this.watchKeys[t]||(this.watchKeys[t]=[]),this.watchKeys[t].push(n)}}))}bindEvents(){var t=this;this.keyupBinding=function(e){var n=e.keyCode,i=t.watchKeys[n];i&&(t.pressedKeys.push(n),i.forEach((function(n){t.checkBinding(e,n)})))},this.keydownBinding=function(e){var n=e.keyCode;if(t.watchKeys[n]){var i=t.pressedKeys.indexOf(n);i>-1&&t.pressedKeys.splice(i,1)}},this.table.element.addEventListener("keydown",this.keyupBinding),this.table.element.addEventListener("keyup",this.keydownBinding)}clearBindings(){this.keyupBinding&&this.table.element.removeEventListener("keydown",this.keyupBinding),this.keydownBinding&&this.table.element.removeEventListener("keyup",this.keydownBinding)}checkBinding(t,e){var n=!0;return t.ctrlKey==e.ctrl&&t.shiftKey==e.shift&&t.metaKey==e.meta&&(e.keys.forEach((t=>{-1==this.pressedKeys.indexOf(t)&&(n=!1)})),n&&e.action.call(this,t),!0)}}X.moduleName="keybindings",X.bindings={navPrev:"shift + 9",navNext:9,navUp:38,navDown:40,scrollPageUp:33,scrollPageDown:34,scrollToStart:36,scrollToEnd:35,undo:"ctrl + 90",redo:"ctrl + 89",copyToClipboard:"ctrl + 67"},X.actions={keyBlock:function(t){t.stopPropagation(),t.preventDefault()},scrollPageUp:function(t){var e=this.table.rowManager,n=e.scrollTop-e.element.clientHeight;e.element.scrollHeight;t.preventDefault(),e.displayRowsCount&&(n>=0?e.element.scrollTop=n:e.scrollToRow(e.getDisplayRows()[0])),this.table.element.focus()},scrollPageDown:function(t){var e=this.table.rowManager,n=e.scrollTop+e.element.clientHeight,i=e.element.scrollHeight;t.preventDefault(),e.displayRowsCount&&(n<=i?e.element.scrollTop=n:e.scrollToRow(e.getDisplayRows()[e.displayRowsCount-1])),this.table.element.focus()},scrollToStart:function(t){var e=this.table.rowManager;t.preventDefault(),e.displayRowsCount&&e.scrollToRow(e.getDisplayRows()[0]),this.table.element.focus()},scrollToEnd:function(t){var e=this.table.rowManager;t.preventDefault(),e.displayRowsCount&&e.scrollToRow(e.getDisplayRows()[e.displayRowsCount-1]),this.table.element.focus()},navPrev:function(t){this.dispatch("keybinding-nav-prev",t)},navNext:function(t){this.dispatch("keybinding-nav-next",t)},navLeft:function(t){this.dispatch("keybinding-nav-left",t)},navRight:function(t){this.dispatch("keybinding-nav-right",t)},navUp:function(t){this.dispatch("keybinding-nav-up",t)},navDown:function(t){this.dispatch("keybinding-nav-down",t)},undo:function(t){this.table.options.history&&this.table.modExists("history")&&this.table.modExists("edit")&&(this.table.modules.edit.currentCell||(t.preventDefault(),this.table.modules.history.undo()))},redo:function(t){this.table.options.history&&this.table.modExists("history")&&this.table.modExists("edit")&&(this.table.modules.edit.currentCell||(t.preventDefault(),this.table.modules.history.redo()))},copyToClipboard:function(t){this.table.modules.edit.currentCell||this.table.modExists("clipboard",!0)&&this.table.modules.clipboard.copy(!1,!0)}};class q extends s{constructor(t){super(t),this.menuElements=[],this.blurEvent=this.hideMenu.bind(this),this.escEvent=this.escMenu.bind(this),this.nestedMenuBlock=!1,this.positionReversedX=!1,this.registerTableOption("rowContextMenu",!1),this.registerTableOption("rowClickMenu",!1),this.registerTableOption("groupContextMenu",!1),this.registerTableOption("groupClickMenu",!1),this.registerColumnOption("headerContextMenu"),this.registerColumnOption("headerMenu"),this.registerColumnOption("contextMenu"),this.registerColumnOption("clickMenu")}initialize(){this.subscribe("cell-layout",this.layoutCell.bind(this)),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("row-init",this.initializeRow.bind(this))}layoutCell(t){(t.column.definition.contextMenu||t.column.definition.clickMenu)&&this.initializeCell(t)}initializeColumn(t){var e=t.definition;(e.headerContextMenu||e.headerClickMenu||e.headerMenu)&&this.initializeColumnHeader(t)}initializeColumnHeader(t){var e;t.definition.headerContextMenu&&(t.getElement().addEventListener("contextmenu",this.LoadMenuEvent.bind(this,t,t.definition.headerContextMenu)),this.tapHold(t,t.definition.headerContextMenu)),t.definition.headerMenu&&((e=document.createElement("span")).classList.add("tabulator-header-menu-button"),e.innerHTML="&vellip;",e.addEventListener("click",(e=>{e.stopPropagation(),e.preventDefault(),this.LoadMenuEvent(t,t.definition.headerMenu,e)})),t.titleElement.insertBefore(e,t.titleElement.firstChild))}LoadMenuEvent(t,e,n){e="function"==typeof e?e.call(this.table,t.getComponent(),n):e,this.loadMenu(n,t,e)}tapHold(t,e){var n=t.getElement(),i=null,r=!1;n.addEventListener("touchstart",(n=>{clearTimeout(i),r=!1,i=setTimeout((()=>{clearTimeout(i),i=null,r=!0,this.LoadMenuEvent(t,e,n)}),1e3)}),{passive:!0}),n.addEventListener("touchend",(t=>{clearTimeout(i),i=null,r&&t.preventDefault()}))}initializeCell(t){t.column.definition.contextMenu&&(t.getElement(!0).addEventListener("contextmenu",this.LoadMenuEvent.bind(this,t,t.column.definition.contextMenu)),this.tapHold(t,t.column.definition.contextMenu)),t.column.definition.clickMenu&&t.getElement(!0).addEventListener("click",this.LoadMenuEvent.bind(this,t,t.column.definition.clickMenu))}initializeRow(t){this.table.options.rowContextMenu&&(t.getElement().addEventListener("contextmenu",this.LoadMenuEvent.bind(this,t,this.table.options.rowContextMenu)),this.tapHold(t,this.table.options.rowContextMenu)),this.table.options.rowClickMenu&&t.getElement().addEventListener("click",this.LoadMenuEvent.bind(this,t,this.table.options.rowClickMenu))}initializeGroup(t){this.table.options.groupContextMenu&&(t.getElement().addEventListener("contextmenu",this.LoadMenuEvent.bind(this,t,this.table.options.groupContextMenu)),this.tapHold(t,this.table.options.groupContextMenu)),this.table.options.groupClickMenu&&t.getElement().addEventListener("click",this.LoadMenuEvent.bind(this,t,this.table.options.groupClickMenu))}loadMenu(t,e,n,i){var r=!(t instanceof MouseEvent),o=document.createElement("div");if(o.classList.add("tabulator-menu"),r||t.preventDefault(),n&&n.length){if(!i){if(this.nestedMenuBlock){if(this.isOpen())return}else this.nestedMenuBlock=setTimeout((()=>{this.nestedMenuBlock=!1}),100);this.hideMenu(),this.menuElements=[]}n.forEach((t=>{var n=document.createElement("div"),i=t.label,r=t.disabled;t.separator?n.classList.add("tabulator-menu-separator"):(n.classList.add("tabulator-menu-item"),"function"==typeof i&&(i=i.call(this.table,e.getComponent())),i instanceof Node?n.appendChild(i):n.innerHTML=i,"function"==typeof r&&(r=r.call(this.table,e.getComponent())),r?(n.classList.add("tabulator-menu-item-disabled"),n.addEventListener("click",(t=>{t.stopPropagation()}))):t.menu&&t.menu.length?n.addEventListener("click",(i=>{i.stopPropagation(),this.hideOldSubMenus(o),this.loadMenu(i,e,t.menu,n)})):t.action&&n.addEventListener("click",(n=>{t.action(n,e.getComponent())})),t.menu&&t.menu.length&&n.classList.add("tabulator-menu-item-submenu")),o.appendChild(n)})),o.addEventListener("click",(t=>{this.hideMenu()})),this.menuElements.push(o),this.positionMenu(o,i,r,t)}}hideOldSubMenus(t){var e=this.menuElements.indexOf(t);if(e>-1)for(let t=this.menuElements.length-1;t>e;t--){var n=this.menuElements[t];n.parentNode&&n.parentNode.removeChild(n),this.menuElements.pop()}}positionMenu(t,e,n,i){var r,o,a,s=Math.max(document.body.offsetHeight,window.innerHeight);e?(r=(a=l.elOffset(e)).left+e.offsetWidth,o=a.top-1):(r=n?i.touches[0].pageX:i.pageX,o=n?i.touches[0].pageY:i.pageY,this.positionReversedX=!1),t.style.top=o+"px",t.style.left=r+"px",setTimeout((()=>{this.table.rowManager.element.addEventListener("scroll",this.blurEvent),document.body.addEventListener("click",this.blurEvent),document.body.addEventListener("contextmenu",this.blurEvent),window.addEventListener("resize",this.blurEvent),document.body.addEventListener("keydown",this.escEvent)}),100),document.body.appendChild(t),o+t.offsetHeight>=s&&(t.style.top="",t.style.bottom=e?s-a.top-e.offsetHeight-1+"px":s-o+"px"),(r+t.offsetWidth>=document.body.offsetWidth||this.positionReversedX)&&(t.style.left="",t.style.right=e?document.documentElement.offsetWidth-a.left+"px":document.documentElement.offsetWidth-r+"px",this.positionReversedX=!0)}isOpen(){return!!this.menuElements.length}escMenu(t){27==t.keyCode&&this.hideMenu()}hideMenu(){this.menuElements.forEach((t=>{t.parentNode&&t.parentNode.removeChild(t)})),document.body.removeEventListener("keydown",this.escEvent),document.body.removeEventListener("click",this.blurEvent),document.body.removeEventListener("contextmenu",this.blurEvent),window.removeEventListener("resize",this.blurEvent),this.table.rowManager.element.removeEventListener("scroll",this.blurEvent)}}q.moduleName="menu";class K extends s{constructor(t){super(t),this.placeholderElement=this.createPlaceholderElement(),this.hoverElement=!1,this.checkTimeout=!1,this.checkPeriod=250,this.moving=!1,this.toCol=!1,this.toColAfter=!1,this.startX=0,this.autoScrollMargin=40,this.autoScrollStep=5,this.autoScrollTimeout=!1,this.touchMove=!1,this.moveHover=this.moveHover.bind(this),this.endMove=this.endMove.bind(this),this.registerTableOption("movableColumns",!1)}createPlaceholderElement(){var t=document.createElement("div");return t.classList.add("tabulator-col"),t.classList.add("tabulator-col-placeholder"),t}initialize(){this.subscribe("column-init",this.initializeColumn.bind(this))}initializeColumn(t){var e,n=this,i={};t.modules.frozen||(e=t.getElement(),i.mousemove=function(i){t.parent===n.moving.parent&&((n.touchMove?i.touches[0].pageX:i.pageX)-l.elOffset(e).left+n.table.columnManager.element.scrollLeft>t.getWidth()/2?n.toCol===t&&n.toColAfter||(e.parentNode.insertBefore(n.placeholderElement,e.nextSibling),n.moveColumn(t,!0)):(n.toCol!==t||n.toColAfter)&&(e.parentNode.insertBefore(n.placeholderElement,e),n.moveColumn(t,!1)))}.bind(n),e.addEventListener("mousedown",(function(e){n.touchMove=!1,1===e.which&&(n.checkTimeout=setTimeout((function(){n.startMove(e,t)}),n.checkPeriod))})),e.addEventListener("mouseup",(function(t){1===t.which&&n.checkTimeout&&clearTimeout(n.checkTimeout)})),n.bindTouchEvents(t)),t.modules.moveColumn=i}bindTouchEvents(t){var e,n,i,r,o,a,s=t.getElement(),l=!1;s.addEventListener("touchstart",(s=>{this.checkTimeout=setTimeout((()=>{this.touchMove=!0,e=t.nextColumn(),i=e?e.getWidth()/2:0,n=t.prevColumn(),r=n?n.getWidth()/2:0,o=0,a=0,l=!1,this.startMove(s,t)}),this.checkPeriod)}),{passive:!0}),s.addEventListener("touchmove",(s=>{var u,c;this.moving&&(this.moveHover(s),l||(l=s.touches[0].pageX),(u=s.touches[0].pageX-l)>0?e&&u-o>i&&(c=e)!==t&&(l=s.touches[0].pageX,c.getElement().parentNode.insertBefore(this.placeholderElement,c.getElement().nextSibling),this.moveColumn(c,!0)):n&&-u-a>r&&(c=n)!==t&&(l=s.touches[0].pageX,c.getElement().parentNode.insertBefore(this.placeholderElement,c.getElement()),this.moveColumn(c,!1)),c&&(e=c.nextColumn(),o=i,i=e?e.getWidth()/2:0,n=c.prevColumn(),a=r,r=n?n.getWidth()/2:0))}),{passive:!0}),s.addEventListener("touchend",(t=>{this.checkTimeout&&clearTimeout(this.checkTimeout),this.moving&&this.endMove(t)}))}startMove(t,e){var n=e.getElement(),i=this.table.columnManager.getElement(),r=this.table.columnManager.getHeadersElement();this.moving=e,this.startX=(this.touchMove?t.touches[0].pageX:t.pageX)-l.elOffset(n).left,this.table.element.classList.add("tabulator-block-select"),this.placeholderElement.style.width=e.getWidth()+"px",this.placeholderElement.style.height=e.getHeight()+"px",n.parentNode.insertBefore(this.placeholderElement,n),n.parentNode.removeChild(n),this.hoverElement=n.cloneNode(!0),this.hoverElement.classList.add("tabulator-moving"),this.table.columnManager.getElement().appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.bottom=i.clientHeight-r.offsetHeight+"px",this.touchMove||(this._bindMouseMove(),document.body.addEventListener("mousemove",this.moveHover),document.body.addEventListener("mouseup",this.endMove)),this.moveHover(t)}_bindMouseMove(){this.table.columnManager.columnsByIndex.forEach((function(t){t.modules.moveColumn.mousemove&&t.getElement().addEventListener("mousemove",t.modules.moveColumn.mousemove)}))}_unbindMouseMove(){this.table.columnManager.columnsByIndex.forEach((function(t){t.modules.moveColumn.mousemove&&t.getElement().removeEventListener("mousemove",t.modules.moveColumn.mousemove)}))}moveColumn(t,e){var n=this.moving.getCells();this.toCol=t,this.toColAfter=e,e?t.getCells().forEach((function(t,e){var i=t.getElement(!0);i.parentNode&&n[e]&&i.parentNode.insertBefore(n[e].getElement(),i.nextSibling)})):t.getCells().forEach((function(t,e){var i=t.getElement(!0);i.parentNode&&n[e]&&i.parentNode.insertBefore(n[e].getElement(),i)}))}endMove(t){(1===t.which||this.touchMove)&&(this._unbindMouseMove(),this.placeholderElement.parentNode.insertBefore(this.moving.getElement(),this.placeholderElement.nextSibling),this.placeholderElement.parentNode.removeChild(this.placeholderElement),this.hoverElement.parentNode.removeChild(this.hoverElement),this.table.element.classList.remove("tabulator-block-select"),this.toCol&&this.table.columnManager.moveColumnActual(this.moving,this.toCol,this.toColAfter),this.moving=!1,this.toCol=!1,this.toColAfter=!1,this.touchMove||(document.body.removeEventListener("mousemove",this.moveHover),document.body.removeEventListener("mouseup",this.endMove)))}moveHover(t){var e,n=this.table.columnManager.getElement(),i=n.scrollLeft,r=(this.touchMove?t.touches[0].pageX:t.pageX)-l.elOffset(n).left+i;this.hoverElement.style.left=r-this.startX+"px",r-i<this.autoScrollMargin&&(this.autoScrollTimeout||(this.autoScrollTimeout=setTimeout((()=>{e=Math.max(0,i-5),this.table.rowManager.getElement().scrollLeft=e,this.autoScrollTimeout=!1}),1))),i+n.clientWidth-r<this.autoScrollMargin&&(this.autoScrollTimeout||(this.autoScrollTimeout=setTimeout((()=>{e=Math.min(n.clientWidth,i+5),this.table.rowManager.getElement().scrollLeft=e,this.autoScrollTimeout=!1}),1)))}}K.moduleName="moveColumn";class $ extends s{constructor(t){super(t),this.placeholderElement=this.createPlaceholderElement(),this.hoverElement=!1,this.checkTimeout=!1,this.checkPeriod=150,this.moving=!1,this.toRow=!1,this.toRowAfter=!1,this.hasHandle=!1,this.startY=0,this.startX=0,this.moveHover=this.moveHover.bind(this),this.endMove=this.endMove.bind(this),this.tableRowDropEvent=!1,this.touchMove=!1,this.connection=!1,this.connectionSelectorsTables=!1,this.connectionSelectorsElements=!1,this.connectionElements=[],this.connections=[],this.connectedTable=!1,this.connectedRow=!1,this.registerTableOption("movableRows",!1),this.registerTableOption("movableRowsConnectedTables",!1),this.registerTableOption("movableRowsConnectedElements",!1),this.registerTableOption("movableRowsSender",!1),this.registerTableOption("movableRowsReceiver","insert"),this.registerColumnOption("rowHandle")}createPlaceholderElement(){var t=document.createElement("div");return t.classList.add("tabulator-row"),t.classList.add("tabulator-row-placeholder"),t}initialize(){this.table.options.movableRows&&(this.connectionSelectorsTables=this.table.options.movableRowsConnectedTables,this.connectionSelectorsElements=this.table.options.movableRowsConnectedElements,this.connection=this.connectionSelectorsTables||this.connectionSelectorsElements,this.subscribe("cell-init",this.initializeCell.bind(this)),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("row-init",this.initializeRow.bind(this)))}initializeGroupHeader(t){var e=this,n={};n.mouseup=function(t){e.tableRowDrop(t,row)}.bind(e),n.mousemove=function(n){var i;n.pageY-l.elOffset(t.element).top+e.table.rowManager.element.scrollTop>t.getHeight()/2?e.toRow===t&&e.toRowAfter||((i=t.getElement()).parentNode.insertBefore(e.placeholderElement,i.nextSibling),e.moveRow(t,!0)):(e.toRow!==t||e.toRowAfter)&&(i=t.getElement()).previousSibling&&(i.parentNode.insertBefore(e.placeholderElement,i),e.moveRow(t,!1))}.bind(e),t.modules.moveRow=n}initializeRow(t){var e,n=this,i={};i.mouseup=function(e){n.tableRowDrop(e,t)}.bind(n),i.mousemove=function(e){var i=t.getElement();e.pageY-l.elOffset(i).top+n.table.rowManager.element.scrollTop>t.getHeight()/2?n.toRow===t&&n.toRowAfter||(i.parentNode.insertBefore(n.placeholderElement,i.nextSibling),n.moveRow(t,!0)):(n.toRow!==t||n.toRowAfter)&&(i.parentNode.insertBefore(n.placeholderElement,i),n.moveRow(t,!1))}.bind(n),this.hasHandle||((e=t.getElement()).addEventListener("mousedown",(function(e){1===e.which&&(n.checkTimeout=setTimeout((function(){n.startMove(e,t)}),n.checkPeriod))})),e.addEventListener("mouseup",(function(t){1===t.which&&n.checkTimeout&&clearTimeout(n.checkTimeout)})),this.bindTouchEvents(t,t.getElement())),t.modules.moveRow=i}initializeColumn(t){t.definition.rowHandle&&!1!==this.table.options.movableRows&&(this.hasHandle=!0)}initializeCell(t){if(t.column.definition.rowHandle&&!1!==this.table.options.movableRows){var e=this,n=t.getElement(!0);n.addEventListener("mousedown",(function(n){1===n.which&&(e.checkTimeout=setTimeout((function(){e.startMove(n,t.row)}),e.checkPeriod))})),n.addEventListener("mouseup",(function(t){1===t.which&&e.checkTimeout&&clearTimeout(e.checkTimeout)})),this.bindTouchEvents(t.row,n)}}bindTouchEvents(t,e){var n,i,r,o,a,s,l=!1;e.addEventListener("touchstart",(e=>{this.checkTimeout=setTimeout((()=>{this.touchMove=!0,n=t.nextRow(),r=n?n.getHeight()/2:0,i=t.prevRow(),o=i?i.getHeight()/2:0,a=0,s=0,l=!1,this.startMove(e,t)}),this.checkPeriod)}),{passive:!0}),this.moving,this.toRow,this.toRowAfter,e.addEventListener("touchmove",(e=>{var u,c;this.moving&&(e.preventDefault(),this.moveHover(e),l||(l=e.touches[0].pageY),(u=e.touches[0].pageY-l)>0?n&&u-a>r&&(c=n)!==t&&(l=e.touches[0].pageY,c.getElement().parentNode.insertBefore(this.placeholderElement,c.getElement().nextSibling),this.moveRow(c,!0)):i&&-u-s>o&&(c=i)!==t&&(l=e.touches[0].pageY,c.getElement().parentNode.insertBefore(this.placeholderElement,c.getElement()),this.moveRow(c,!1)),c&&(n=c.nextRow(),a=r,r=n?n.getHeight()/2:0,i=c.prevRow(),s=o,o=i?i.getHeight()/2:0))})),e.addEventListener("touchend",(t=>{this.checkTimeout&&clearTimeout(this.checkTimeout),this.moving&&(this.endMove(t),this.touchMove=!1)}))}_bindMouseMove(){this.table.rowManager.getDisplayRows().forEach((t=>{("row"===t.type||"group"===t.type)&&t.modules.moveRow&&t.modules.moveRow.mousemove&&t.getElement().addEventListener("mousemove",t.modules.moveRow.mousemove)}))}_unbindMouseMove(){this.table.rowManager.getDisplayRows().forEach((t=>{("row"===t.type||"group"===t.type)&&t.modules.moveRow&&t.modules.moveRow.mousemove&&t.getElement().removeEventListener("mousemove",t.modules.moveRow.mousemove)}))}startMove(t,e){var n=e.getElement();this.setStartPosition(t,e),this.moving=e,this.table.element.classList.add("tabulator-block-select"),this.placeholderElement.style.width=e.getWidth()+"px",this.placeholderElement.style.height=e.getHeight()+"px",this.connection?(this.table.element.classList.add("tabulator-movingrow-sending"),this.connectToTables(e)):(n.parentNode.insertBefore(this.placeholderElement,n),n.parentNode.removeChild(n)),this.hoverElement=n.cloneNode(!0),this.hoverElement.classList.add("tabulator-moving"),this.connection?(document.body.appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.top="0",this.hoverElement.style.width=this.table.element.clientWidth+"px",this.hoverElement.style.whiteSpace="nowrap",this.hoverElement.style.overflow="hidden",this.hoverElement.style.pointerEvents="none"):(this.table.rowManager.getTableElement().appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.top="0",this._bindMouseMove()),document.body.addEventListener("mousemove",this.moveHover),document.body.addEventListener("mouseup",this.endMove),this.moveHover(t)}setStartPosition(t,e){var n,i,r=this.touchMove?t.touches[0].pageX:t.pageX,o=this.touchMove?t.touches[0].pageY:t.pageY;n=e.getElement(),this.connection?(i=n.getBoundingClientRect(),this.startX=i.left-r+window.pageXOffset,this.startY=i.top-o+window.pageYOffset):this.startY=o-n.getBoundingClientRect().top}endMove(t){t&&1!==t.which&&!this.touchMove||(this._unbindMouseMove(),this.connection||(this.placeholderElement.parentNode.insertBefore(this.moving.getElement(),this.placeholderElement.nextSibling),this.placeholderElement.parentNode.removeChild(this.placeholderElement)),this.hoverElement.parentNode.removeChild(this.hoverElement),this.table.element.classList.remove("tabulator-block-select"),this.toRow&&this.table.rowManager.moveRow(this.moving,this.toRow,this.toRowAfter),this.moving=!1,this.toRow=!1,this.toRowAfter=!1,document.body.removeEventListener("mousemove",this.moveHover),document.body.removeEventListener("mouseup",this.endMove),this.connection&&(this.table.element.classList.remove("tabulator-movingrow-sending"),this.disconnectFromTables()))}moveRow(t,e){this.toRow=t,this.toRowAfter=e}moveHover(t){this.connection?this.moveHoverConnections.call(this,t):this.moveHoverTable.call(this,t)}moveHoverTable(t){var e=this.table.rowManager.getElement(),n=e.scrollTop,i=(this.touchMove?t.touches[0].pageY:t.pageY)-e.getBoundingClientRect().top+n;this.hoverElement.style.top=i-this.startY+"px"}moveHoverConnections(t){this.hoverElement.style.left=this.startX+(this.touchMove?t.touches[0].pageX:t.pageX)+"px",this.hoverElement.style.top=this.startY+(this.touchMove?t.touches[0].pageY:t.pageY)+"px"}elementRowDrop(t,e,n){this.dispatchExternal("movableRowsElementDrop",t,e,!!n&&n.getComponent())}connectToTables(t){var e;this.connectionSelectorsTables&&(e=this.commsConnections(this.connectionSelectorsTables),this.dispatchExternal("movableRowsSendingStart",e),this.commsSend(this.connectionSelectorsTables,"moveRow","connect",{row:t})),this.connectionSelectorsElements&&(this.connectionElements=[],Array.isArray(this.connectionSelectorsElements)||(this.connectionSelectorsElements=[this.connectionSelectorsElements]),this.connectionSelectorsElements.forEach((t=>{"string"==typeof t?this.connectionElements=this.connectionElements.concat(Array.prototype.slice.call(document.querySelectorAll(t))):this.connectionElements.push(t)})),this.connectionElements.forEach((t=>{var e=e=>{this.elementRowDrop(e,t,this.moving)};t.addEventListener("mouseup",e),t.tabulatorElementDropEvent=e,t.classList.add("tabulator-movingrow-receiving")})))}disconnectFromTables(){var t;this.connectionSelectorsTables&&(t=this.commsConnections(this.connectionSelectorsTables),this.dispatchExternal("movableRowsSendingStop",t),this.commsSend(this.connectionSelectorsTables,"moveRow","disconnect")),this.connectionElements.forEach((t=>{t.classList.remove("tabulator-movingrow-receiving"),t.removeEventListener("mouseup",t.tabulatorElementDropEvent),delete t.tabulatorElementDropEvent}))}connect(t,e){return this.connectedTable?(console.warn("Move Row Error - Table cannot accept connection, already connected to table:",this.connectedTable),!1):(this.connectedTable=t,this.connectedRow=e,this.table.element.classList.add("tabulator-movingrow-receiving"),this.table.rowManager.getDisplayRows().forEach((t=>{"row"===t.type&&t.modules.moveRow&&t.modules.moveRow.mouseup&&t.getElement().addEventListener("mouseup",t.modules.moveRow.mouseup)})),this.tableRowDropEvent=this.tableRowDrop.bind(this),this.table.element.addEventListener("mouseup",this.tableRowDropEvent),this.dispatchExternal("movableRowsReceivingStart",e,t),!0)}disconnect(t){t===this.connectedTable?(this.connectedTable=!1,this.connectedRow=!1,this.table.element.classList.remove("tabulator-movingrow-receiving"),this.table.rowManager.getDisplayRows().forEach((t=>{"row"===t.type&&t.modules.moveRow&&t.modules.moveRow.mouseup&&t.getElement().removeEventListener("mouseup",t.modules.moveRow.mouseup)})),this.table.element.removeEventListener("mouseup",this.tableRowDropEvent),this.dispatchExternal("movableRowsReceivingStop",t)):console.warn("Move Row Error - trying to disconnect from non connected table")}dropComplete(t,e,n){var i=!1;if(n){switch(typeof this.table.options.movableRowsSender){case"string":i=this.senders[this.table.options.movableRowsSender];break;case"function":i=this.table.options.movableRowsSender}i?i.call(this,this.moving.getComponent(),e?e.getComponent():void 0,t):this.table.options.movableRowsSender&&console.warn("Mover Row Error - no matching sender found:",this.table.options.movableRowsSender),this.dispatchExternal("movableRowsSent",this.moving.getComponent(),e?e.getComponent():void 0,t)}else this.dispatchExternal("movableRowsSentFailed",this.moving.getComponent(),e?e.getComponent():void 0,t);this.endMove()}tableRowDrop(t,e){var n=!1,i=!1;switch(t.stopImmediatePropagation(),typeof this.table.options.movableRowsReceiver){case"string":n=this.receivers[this.table.options.movableRowsReceiver];break;case"function":n=this.table.options.movableRowsReceiver}n?i=n.call(this,this.connectedRow.getComponent(),e?e.getComponent():void 0,this.connectedTable):console.warn("Mover Row Error - no matching receiver found:",this.table.options.movableRowsReceiver),i?this.dispatchExternal("movableRowsReceived",this.connectedRow.getComponent(),e?e.getComponent():void 0,this.connectedTable):this.dispatchExternal("movableRowsReceivedFailed",this.connectedRow.getComponent(),e?e.getComponent():void 0,this.connectedTable),this.commsSend(this.connectedTable,"moveRow","dropcomplete",{row:e,success:i})}commsReceived(t,e,n){switch(e){case"connect":return this.connect(t,n.row);case"disconnect":return this.disconnect(t);case"dropcomplete":return this.dropComplete(t,n.row,n.success)}}}$.prototype.receivers={insert:function(t,e,n){return this.table.addRow(t.getData(),void 0,e),!0},add:function(t,e,n){return this.table.addRow(t.getData()),!0},update:function(t,e,n){return!!e&&(e.update(t.getData()),!0)},replace:function(t,e,n){return!!e&&(this.table.addRow(t.getData(),void 0,e),e.delete(),!0)}},$.prototype.senders={delete:function(t,e,n){t.delete()}},$.moduleName="moveRow";class Z extends s{constructor(t){super(t),this.allowedTypes=["","data","edit","clipboard"],this.enabled=!0,this.registerColumnOption("mutator"),this.registerColumnOption("mutatorParams"),this.registerColumnOption("mutatorData"),this.registerColumnOption("mutatorDataParams"),this.registerColumnOption("mutatorEdit"),this.registerColumnOption("mutatorEditParams"),this.registerColumnOption("mutatorClipboard"),this.registerColumnOption("mutatorClipboardParams")}initialize(){this.subscribe("cell-value-changing",this.transformCell.bind(this)),this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("row-data-init-before",this.rowDataChanged.bind(this)),this.subscribe("row-data-changing",this.rowDataChanged.bind(this))}rowDataChanged(t,e,n){return this.transformRow(e,"data",n)}initializeColumn(t){var e=!1,n={};this.allowedTypes.forEach((i=>{var r,o="mutator"+(i.charAt(0).toUpperCase()+i.slice(1));t.definition[o]&&(r=this.lookupMutator(t.definition[o]))&&(e=!0,n[o]={mutator:r,params:t.definition[o+"Params"]||{}})})),e&&(t.modules.mutate=n)}lookupMutator(t){var e=!1;switch(typeof t){case"string":Z.mutators[t]?e=Z.mutators[t]:console.warn("Mutator Error - No such mutator found, ignoring: ",t);break;case"function":e=t}return e}transformRow(t,e,n){var i,r="mutator"+(e.charAt(0).toUpperCase()+e.slice(1));return this.enabled&&this.table.columnManager.traverse((o=>{var a,s,l;o.modules.mutate&&(a=o.modules.mutate[r]||o.modules.mutate.mutator||!1)&&(i=o.getFieldValue(void 0!==n?n:t),"data"!=e&&void 0===i||(l=o.getComponent(),s="function"==typeof a.params?a.params(i,t,e,l):a.params,o.setFieldValue(t,a.mutator(i,t,e,s,l))))})),t}transformCell(t,e){if(t.column.modules.mutate){var n=t.column.modules.mutate.mutatorEdit||t.column.modules.mutate.mutator||!1,i={};if(n)return i=Object.assign(i,t.row.getData()),t.column.setFieldValue(i,e),n.mutator(e,i,"edit",n.params,t.getComponent())}return e}enable(){this.enabled=!0}disable(){this.enabled=!1}}Z.moduleName="mutator",Z.mutators={};class J extends s{constructor(t){super(t),this.mode="local",this.progressiveLoad=!1,this.size=0,this.page=1,this.count=5,this.max=1,this.displayIndex=0,this.initialLoad=!0,this.dataChanging=!1,this.pageSizes=[],this.dataReceivedNames={},this.dataSentNames={},this.registerTableOption("pagination",!1),this.registerTableOption("paginationMode","local"),this.registerTableOption("paginationSize",!1),this.registerTableOption("paginationInitialPage",1),this.registerTableOption("paginationButtonCount",5),this.registerTableOption("paginationSizeSelector",!1),this.registerTableOption("paginationElement",!1),this.registerTableOption("paginationAddRow","page"),this.registerTableOption("progressiveLoad",!1),this.registerTableOption("progressiveLoadDelay",0),this.registerTableOption("progressiveLoadScrollMargin",0),this.registerTableFunction("setMaxPage",this.setMaxPage.bind(this)),this.registerTableFunction("setPage",this.setPage.bind(this)),this.registerTableFunction("setPageToRow",this.userSetPageToRow.bind(this)),this.registerTableFunction("setPageSize",this.userSetPageSize.bind(this)),this.registerTableFunction("getPageSize",this.getPageSize.bind(this)),this.registerTableFunction("previousPage",this.previousPage.bind(this)),this.registerTableFunction("nextPage",this.nextPage.bind(this)),this.registerTableFunction("getPage",this.getPage.bind(this)),this.registerTableFunction("getPageMax",this.getPageMax.bind(this)),this.registerComponentFunction("row","pageTo",this.setPageToRow.bind(this))}initialize(){this.table.options.pagination?(this.subscribe("row-deleted",this.rowsUpdated.bind(this)),this.subscribe("row-adding-position",this.rowAddingPosition.bind(this)),this.subscribe("row-added",this.rowsUpdated.bind(this)),this.subscribe("data-processed",this.initialLoadComplete.bind(this)),this.subscribe("table-built",this.calculatePageSizes.bind(this)),"remote"===this.table.options.paginationMode&&(this.subscribe("data-params",this.remotePageParams.bind(this)),this.subscribe("data-loaded",this._parseRemoteData.bind(this))),this.table.options.progressiveLoad&&console.error("Progressive Load Error - Pagination and progressive load cannot be used at the same time"),this.registerDisplayHandler(this.restOnRenderBefore.bind(this),40),this.registerDisplayHandler(this.getRows.bind(this),50),this.createElements(),this.initializePaginator()):this.table.options.progressiveLoad&&(this.subscribe("data-params",this.remotePageParams.bind(this)),this.subscribe("data-loaded",this._parseRemoteData.bind(this)),this.subscribe("table-built",this.calculatePageSizes.bind(this)),this.initializeProgressive(this.table.options.progressiveLoad),"scroll"===this.table.options.progressiveLoad&&this.subscribe("scroll-vertical",this.scrollVertical.bind(this)))}rowAddingPosition(t,e){var n,i=this.table.rowManager,r=i.getDisplayRows();return e?r.length?n=r[0]:i.activeRows.length&&(n=i.activeRows[i.activeRows.length-1],e=!1):r.length&&(n=r[r.length-1],e=!(r.length<this.size)),{index:n,top:e}}calculatePageSizes(){var t,e;this.table.options.paginationSize?this.size=this.table.options.paginationSize:((t=document.createElement("div")).classList.add("tabulator-row"),t.style.visibility="hidden",(e=document.createElement("div")).classList.add("tabulator-cell"),e.innerHTML="Page Row Test",t.appendChild(e),this.table.rowManager.getTableElement().appendChild(t),this.size=Math.floor(this.table.rowManager.getElement().clientHeight/t.offsetHeight),this.table.rowManager.getTableElement().removeChild(t)),this.generatePageSizeSelectList()}initialLoadComplete(){this.initialLoad=!1}remotePageParams(t,e,n,i){return this.initialLoad||(this.progressiveLoad&&!n||!this.progressiveLoad&&!this.dataChanging)&&this.reset(!0),i.page=this.page,this.size&&(i.size=this.size),i}userSetPageToRow(t){return this.table.options.pagination&&(t=this.rowManager.findRow(t))?this.setPageToRow(t):Promise.reject()}userSetPageSize(t){return!!this.table.options.pagination&&(this.setPageSize(t),this.setPage(1))}scrollVertical(t,e){var n;e||this.table.dataLoader.loading||(n=this.table.rowManager.getElement()).scrollHeight-n.clientHeight-t<(this.table.options.progressiveLoadScrollMargin||2*n.clientHeight)&&this.nextPage()}restOnRenderBefore(t,e){return e||"local"===this.mode&&this.reset(),t}rowsUpdated(){this.refreshData(!0,"all")}createElements(){var t;this.element=document.createElement("span"),this.element.classList.add("tabulator-paginator"),this.pagesElement=document.createElement("span"),this.pagesElement.classList.add("tabulator-pages"),(t=document.createElement("button")).classList.add("tabulator-page"),t.setAttribute("type","button"),t.setAttribute("role","button"),t.setAttribute("aria-label",""),t.setAttribute("title",""),this.firstBut=t.cloneNode(!0),this.firstBut.setAttribute("data-page","first"),this.prevBut=t.cloneNode(!0),this.prevBut.setAttribute("data-page","prev"),this.nextBut=t.cloneNode(!0),this.nextBut.setAttribute("data-page","next"),this.lastBut=t.cloneNode(!0),this.lastBut.setAttribute("data-page","last"),this.table.options.paginationSizeSelector&&(this.pageSizeSelect=document.createElement("select"),this.pageSizeSelect.classList.add("tabulator-page-size"))}generatePageSizeSelectList(){var t=[];if(this.pageSizeSelect){if(Array.isArray(this.table.options.paginationSizeSelector))t=this.table.options.paginationSizeSelector,this.pageSizes=t,-1==this.pageSizes.indexOf(this.size)&&t.unshift(this.size);else if(-1==this.pageSizes.indexOf(this.size)){t=[];for(let e=1;e<5;e++)t.push(this.size*e);this.pageSizes=t}else t=this.pageSizes;for(;this.pageSizeSelect.firstChild;)this.pageSizeSelect.removeChild(this.pageSizeSelect.firstChild);t.forEach((t=>{var e=document.createElement("option");e.value=t,!0===t?this.langBind("pagination|all",(function(t){e.innerHTML=t})):e.innerHTML=t,this.pageSizeSelect.appendChild(e)})),this.pageSizeSelect.value=this.size}}initializePaginator(t){var e;t||(this.langBind("pagination|first",(t=>{this.firstBut.innerHTML=t})),this.langBind("pagination|first_title",(t=>{this.firstBut.setAttribute("aria-label",t),this.firstBut.setAttribute("title",t)})),this.langBind("pagination|prev",(t=>{this.prevBut.innerHTML=t})),this.langBind("pagination|prev_title",(t=>{this.prevBut.setAttribute("aria-label",t),this.prevBut.setAttribute("title",t)})),this.langBind("pagination|next",(t=>{this.nextBut.innerHTML=t})),this.langBind("pagination|next_title",(t=>{this.nextBut.setAttribute("aria-label",t),this.nextBut.setAttribute("title",t)})),this.langBind("pagination|last",(t=>{this.lastBut.innerHTML=t})),this.langBind("pagination|last_title",(t=>{this.lastBut.setAttribute("aria-label",t),this.lastBut.setAttribute("title",t)})),this.firstBut.addEventListener("click",(()=>{this.setPage(1)})),this.prevBut.addEventListener("click",(()=>{this.previousPage()})),this.nextBut.addEventListener("click",(()=>{this.nextPage()})),this.lastBut.addEventListener("click",(()=>{this.setPage(this.max)})),this.table.options.paginationElement&&(this.element=this.table.options.paginationElement),this.pageSizeSelect&&(e=document.createElement("label"),this.langBind("pagination|page_size",(t=>{this.pageSizeSelect.setAttribute("aria-label",t),this.pageSizeSelect.setAttribute("title",t),e.innerHTML=t})),this.element.appendChild(e),this.element.appendChild(this.pageSizeSelect),this.pageSizeSelect.addEventListener("change",(t=>{this.setPageSize("true"==this.pageSizeSelect.value||this.pageSizeSelect.value),this.setPage(1)}))),this.element.appendChild(this.firstBut),this.element.appendChild(this.prevBut),this.element.appendChild(this.pagesElement),this.element.appendChild(this.nextBut),this.element.appendChild(this.lastBut),this.table.options.paginationElement||t||this.table.footerManager.append(this.element,this),this.page=this.table.options.paginationInitialPage,this.count=this.table.options.paginationButtonCount),this.mode=this.table.options.paginationMode}initializeProgressive(t){this.initializePaginator(!0),this.mode="progressive_"+t,this.progressiveLoad=!0}trackChanges(){this.dispatch("page-changed")}setDisplayIndex(t){this.displayIndex=t}getDisplayIndex(){return this.displayIndex}setMaxRows(t){this.max=t?!0===this.size?1:Math.ceil(t/this.size):1,this.page>this.max&&(this.page=this.max)}reset(t){this.initialLoad||("local"==this.mode||t)&&(this.page=1)}setMaxPage(t){t=parseInt(t),this.max=t||1,this.page>this.max&&(this.page=this.max,this.trigger())}setPage(t){switch(t){case"first":return this.setPage(1);case"prev":return this.previousPage();case"next":return this.nextPage();case"last":return this.setPage(this.max)}return(t=parseInt(t))>0&&t<=this.max||"local"!==this.mode?(this.page=t,this.trackChanges(),this.trigger()):(console.warn("Pagination Error - Requested page is out of range of 1 - "+this.max+":",t),Promise.reject())}setPageToRow(t){var e=this.table.rowManager.getDisplayRows(this.displayIndex-1).indexOf(t);if(e>-1){var n=!0===this.size?1:Math.ceil((e+1)/this.size);return this.setPage(n)}return console.warn("Pagination Error - Requested row is not visible"),Promise.reject()}setPageSize(t){!0!==t&&(t=parseInt(t)),t>0&&(this.size=t),this.pageSizeSelect&&this.generatePageSizeSelectList(),this.trackChanges()}_setPageButtons(){let t=Math.floor((this.count-1)/2),e=Math.ceil((this.count-1)/2),n=this.max-this.page+t+1<this.count?this.max-this.count+1:Math.max(this.page-t,1),i=this.page<=e?Math.min(this.count,this.max):Math.min(this.page+e,this.max);for(;this.pagesElement.firstChild;)this.pagesElement.removeChild(this.pagesElement.firstChild);1==this.page?(this.firstBut.disabled=!0,this.prevBut.disabled=!0):(this.firstBut.disabled=!1,this.prevBut.disabled=!1),this.page==this.max?(this.lastBut.disabled=!0,this.nextBut.disabled=!0):(this.lastBut.disabled=!1,this.nextBut.disabled=!1);for(let t=n;t<=i;t++)t>0&&t<=this.max&&this.pagesElement.appendChild(this._generatePageButton(t));this.footerRedraw()}_generatePageButton(t){var e=document.createElement("button");return e.classList.add("tabulator-page"),t==this.page&&e.classList.add("active"),e.setAttribute("type","button"),e.setAttribute("role","button"),this.langBind("pagination|page_title",(n=>{e.setAttribute("aria-label",n+" "+t),e.setAttribute("title",n+" "+t)})),e.setAttribute("data-page",t),e.textContent=t,e.addEventListener("click",(e=>{this.setPage(t)})),e}previousPage(){return this.page>1?(this.page--,this.trackChanges(),this.trigger()):(console.warn("Pagination Error - Previous page would be less than page 1:",0),Promise.reject())}nextPage(){return this.page<this.max?(this.page++,this.trackChanges(),this.trigger()):(this.progressiveLoad||console.warn("Pagination Error - Next page would be greater than maximum page of "+this.max+":",this.max+1),Promise.reject())}getPage(){return this.page}getPageMax(){return this.max}getPageSize(t){return this.size}getMode(){return this.mode}getRows(t){var e,n,i;if("local"==this.mode){e=[],this.setMaxRows(t.length),!0===this.size?(n=0,i=t.length):i=(n=this.size*(this.page-1))+parseInt(this.size),this._setPageButtons();for(let r=n;r<i;r++)t[r]&&e.push(t[r]);return e}return this._setPageButtons(),t.slice(0)}trigger(){var t;switch(this.mode){case"local":return t=this.table.rowManager.scrollLeft,this.refreshData(),this.table.rowManager.scrollHorizontal(t),this.dispatchExternal("pageLoaded",this.getPage()),Promise.resolve();case"remote":return this.dataChanging=!0,this.reloadData(null).finally((()=>{this.dataChanging=!1}));case"progressive_load":case"progressive_scroll":return this.reloadData(null,!0);default:return console.warn("Pagination Error - no such pagination mode:",this.mode),Promise.reject()}}_parseRemoteData(t){var e;if(void 0===t.last_page&&console.warn("Remote Pagination Error - Server response missing '"+this.dataReceivedNames.last_page+"' property"),t.data){if(this.max=parseInt(t.last_page)||1,this.progressiveLoad){switch(this.mode){case"progressive_load":1==this.page?this.table.rowManager.setData(t.data,!1,1==this.page):this.table.rowManager.addRows(t.data),this.page<this.max&&setTimeout((()=>{this.nextPage()}),this.table.options.progressiveLoadDelay);break;case"progressive_scroll":t=this.table.rowManager.getData().concat(t.data),this.table.rowManager.setData(t,1!==this.page,1==this.page),e=this.table.options.progressiveLoadScrollMargin||2*this.table.rowManager.element.clientHeight,this.table.rowManager.element.scrollHeight<=this.table.rowManager.element.clientHeight+e&&setTimeout((()=>{this.nextPage()}))}return!1}this.dispatchExternal("pageLoaded",this.getPage())}else console.warn("Remote Pagination Error - Server response missing '"+this.dataReceivedNames.data+"' property");return t.data}footerRedraw(){var t=this.table.footerManager.element;Math.ceil(t.clientWidth)-t.scrollWidth<0?this.pagesElement.style.display="none":(this.pagesElement.style.display="",Math.ceil(t.clientWidth)-t.scrollWidth<0&&(this.pagesElement.style.display="none"))}}J.moduleName="page";var Q={local:function(t,e){var n=localStorage.getItem(t+"-"+e);return!!n&&JSON.parse(n)},cookie:function(t,e){var n,i,r=document.cookie,o=t+"-"+e,a=r.indexOf(o+"=");return a>-1&&((n=(r=r.substr(a)).indexOf(";"))>-1&&(r=r.substr(0,n)),i=r.replace(o+"=","")),!!i&&JSON.parse(i)}},tt={local:function(t,e,n){localStorage.setItem(t+"-"+e,JSON.stringify(n))},cookie:function(t,e,n){var i=new Date;i.setDate(i.getDate()+1e4),document.cookie=t+"-"+e+"="+JSON.stringify(n)+"; expires="+i.toUTCString()}};class et extends s{constructor(t){super(t),this.mode="",this.id="",this.defWatcherBlock=!1,this.config={},this.readFunc=!1,this.writeFunc=!1,this.registerTableOption("persistence",!1),this.registerTableOption("persistenceID",""),this.registerTableOption("persistenceMode",!0),this.registerTableOption("persistenceReaderFunc",!1),this.registerTableOption("persistenceWriterFunc",!1)}localStorageTest(){var t="_tabulator_test";try{return window.localStorage.setItem(t,t),window.localStorage.removeItem(t),!0}catch(t){return!1}}initialize(){if(this.table.options.persistence){var t,e=this.table.options.persistenceMode,n=this.table.options.persistenceID;this.mode=!0!==e?e:this.localStorageTest()?"local":"cookie",this.table.options.persistenceReaderFunc?"function"==typeof this.table.options.persistenceReaderFunc?this.readFunc=this.table.options.persistenceReaderFunc:et.readers[this.table.options.persistenceReaderFunc]?this.readFunc=et.readers[this.table.options.persistenceReaderFunc]:console.warn("Persistence Read Error - invalid reader set",this.table.options.persistenceReaderFunc):et.readers[this.mode]?this.readFunc=et.readers[this.mode]:console.warn("Persistence Read Error - invalid reader set",this.mode),this.table.options.persistenceWriterFunc?"function"==typeof this.table.options.persistenceWriterFunc?this.writeFunc=this.table.options.persistenceWriterFunc:et.writers[this.table.options.persistenceWriterFunc]?this.writeFunc=et.writers[this.table.options.persistenceWriterFunc]:console.warn("Persistence Write Error - invalid reader set",this.table.options.persistenceWriterFunc):et.writers[this.mode]?this.writeFunc=et.writers[this.mode]:console.warn("Persistence Write Error - invalid writer set",this.mode),this.id="tabulator-"+(n||this.table.element.getAttribute("id")||""),this.config={sort:!0===this.table.options.persistence||this.table.options.persistence.sort,filter:!0===this.table.options.persistence||this.table.options.persistence.filter,group:!0===this.table.options.persistence||this.table.options.persistence.group,page:!0===this.table.options.persistence||this.table.options.persistence.page,columns:!0===this.table.options.persistence?["title","width","visible"]:this.table.options.persistence.columns},this.config.page&&(t=this.retreiveData("page"))&&(void 0===t.paginationSize||!0!==this.config.page&&!this.config.page.size||(this.table.options.paginationSize=t.paginationSize),void 0===t.paginationInitialPage||!0!==this.config.page&&!this.config.page.page||(this.table.options.paginationInitialPage=t.paginationInitialPage)),this.config.group&&(t=this.retreiveData("group"))&&(void 0===t.groupBy||!0!==this.config.group&&!this.config.group.groupBy||(this.table.options.groupBy=t.groupBy),void 0===t.groupStartOpen||!0!==this.config.group&&!this.config.group.groupStartOpen||(this.table.options.groupStartOpen=t.groupStartOpen),void 0===t.groupHeader||!0!==this.config.group&&!this.config.group.groupHeader||(this.table.options.groupHeader=t.groupHeader)),this.config.columns&&(this.table.options.columns=this.load("columns",this.table.options.columns),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("column-show",this.save.bind(this,"columns")),this.subscribe("column-hide",this.save.bind(this,"columns")),this.subscribe("column-moved",this.save.bind(this,"columns")),this.subscribe("table-built",this.tableBuilt.bind(this),0)),this.subscribe("table-redraw",this.tableRedraw.bind(this)),this.subscribe("filter-changed",this.eventSave.bind(this,"filter")),this.subscribe("sort-changed",this.eventSave.bind(this,"sort")),this.subscribe("group-changed",this.eventSave.bind(this,"group")),this.subscribe("page-changed",this.eventSave.bind(this,"page")),this.subscribe("column-resized",this.eventSave.bind(this,"columns")),this.subscribe("layout-refreshed",this.eventSave.bind(this,"columns"))}this.registerTableFunction("getColumnLayout",this.getColumnLayout.bind(this)),this.registerTableFunction("setColumnLayout",this.setColumnLayout.bind(this))}eventSave(t){this.config[t]&&this.save(t)}tableBuilt(){var t,e;this.table.options;this.config.sort&&!1==!(t=this.load("sort"))&&(this.table.initialSort=t),this.config.filter&&!1==!(e=this.load("filter"))&&(this.table.initialFilter=e)}tableRedraw(t){t&&this.config.columns&&this.save("columns")}getColumnLayout(){return this.parseColumns(this.table.columnManager.getColumns())}setColumnLayout(t){return this.table.columnManager.setColumns(this.mergeDefinition(this.table.options.columns,t)),!0}initializeColumn(t){var e;this.config.columns&&(this.defWatcherBlock=!0,e=t.getDefinition(),(!0===this.config.columns?Object.keys(e):this.config.columns).forEach((t=>{var n=Object.getOwnPropertyDescriptor(e,t),i=e[t];n&&Object.defineProperty(e,t,{set:function(t){i=t,this.defWatcherBlock||this.save("columns"),n.set&&n.set(t)},get:function(){return n.get&&n.get(),i}})})),this.defWatcherBlock=!1)}load(t,e){var n=this.retreiveData(t);return e&&(n=n?this.mergeDefinition(e,n):e),n}retreiveData(t){return!!this.readFunc&&this.readFunc(this.id,t)}mergeDefinition(t,e){var n=[];return(e=e||[]).forEach(((e,i)=>{var r,o=this._findColumn(t,e);o&&(!0===this.config.columns||null==this.config.columns?(r=Object.keys(o)).push("width"):r=this.config.columns,r.forEach((t=>{"columns"!==t&&void 0!==e[t]&&(o[t]=e[t])})),o.columns&&(o.columns=this.mergeDefinition(o.columns,e.columns)),n.push(o))})),t.forEach(((t,i)=>{this._findColumn(e,t)||(n.length>i?n.splice(i,0,t):n.push(t))})),n}_findColumn(t,e){var n=e.columns?"group":e.field?"field":"object";return t.find((function(t){switch(n){case"group":return t.title===e.title&&t.columns.length===e.columns.length;case"field":return t.field===e.field;case"object":return t===e}}))}save(t){var e={};switch(t){case"columns":e=this.parseColumns(this.table.columnManager.getColumns());break;case"filter":e=this.table.modules.filter.getFilters();break;case"sort":e=this.validateSorters(this.table.modules.sort.getSort());break;case"group":e=this.getGroupConfig();break;case"page":e=this.getPageConfig()}this.writeFunc&&this.writeFunc(this.id,t,e)}validateSorters(t){return t.forEach((function(t){t.column=t.field,delete t.field})),t}getGroupConfig(){var t={};return this.config.group&&((!0===this.config.group||this.config.group.groupBy)&&(t.groupBy=this.table.options.groupBy),(!0===this.config.group||this.config.group.groupStartOpen)&&(t.groupStartOpen=this.table.options.groupStartOpen),(!0===this.config.group||this.config.group.groupHeader)&&(t.groupHeader=this.table.options.groupHeader)),t}getPageConfig(){var t={};return this.config.page&&((!0===this.config.page||this.config.page.size)&&(t.paginationSize=this.table.modules.page.getPageSize()),(!0===this.config.page||this.config.page.page)&&(t.paginationInitialPage=this.table.modules.page.getPage())),t}parseColumns(t){var e=[],n=["headerContextMenu","headerMenu","contextMenu","clickMenu"];return t.forEach((t=>{var i,r={},o=t.getDefinition();t.isGroup?(r.title=o.title,r.columns=this.parseColumns(t.getColumns())):(r.field=t.getField(),!0===this.config.columns||null==this.config.columns?(i=Object.keys(o)).push("width"):i=this.config.columns,i.forEach((e=>{switch(e){case"width":r.width=t.getWidth();break;case"visible":r.visible=t.visible;break;default:"function"!=typeof o[e]&&-1===n.indexOf(e)&&(r[e]=o[e])}}))),e.push(r)})),e}}et.moduleName="persistence",et.readers=Q,et.writers=tt;class nt extends s{constructor(t){super(t),this.element=!1,this.manualBlock=!1,this.registerTableOption("printAsHtml",!1),this.registerTableOption("printFormatter",!1),this.registerTableOption("printHeader",!1),this.registerTableOption("printFooter",!1),this.registerTableOption("printStyled",!0),this.registerTableOption("printRowRange","visible"),this.registerTableOption("printConfig",{}),this.registerColumnOption("print"),this.registerColumnOption("titlePrint")}initialize(){this.table.options.printAsHtml&&(window.addEventListener("beforeprint",this.replaceTable.bind(this)),window.addEventListener("afterprint",this.cleanup.bind(this))),this.registerTableFunction("print",this.printFullscreen.bind(this))}replaceTable(){this.manualBlock||(this.element=document.createElement("div"),this.element.classList.add("tabulator-print-table"),this.element.appendChild(this.table.modules.export.genereateTable(this.table.options.printConfig,this.table.options.printStyled,this.table.options.printRowRange,"print")),this.table.element.style.display="none",this.table.element.parentNode.insertBefore(this.element,this.table.element))}cleanup(){document.body.classList.remove("tabulator-print-fullscreen-hide"),this.element&&this.element.parentNode&&(this.element.parentNode.removeChild(this.element),this.table.element.style.display="")}printFullscreen(t,e,n){var i,r,o=window.scrollX,a=window.scrollY,s=document.createElement("div"),l=document.createElement("div"),u=this.table.modules.export.genereateTable(void 0!==n?n:this.table.options.printConfig,void 0!==e?e:this.table.options.printStyled,t||this.table.options.printRowRange,"print");this.manualBlock=!0,this.element=document.createElement("div"),this.element.classList.add("tabulator-print-fullscreen"),this.table.options.printHeader&&(s.classList.add("tabulator-print-header"),"string"==typeof(i="function"==typeof this.table.options.printHeader?this.table.options.printHeader.call(this.table):this.table.options.printHeader)?s.innerHTML=i:s.appendChild(i),this.element.appendChild(s)),this.element.appendChild(u),this.table.options.printFooter&&(l.classList.add("tabulator-print-footer"),"string"==typeof(r="function"==typeof this.table.options.printFooter?this.table.options.printFooter.call(this.table):this.table.options.printFooter)?l.innerHTML=r:l.appendChild(r),this.element.appendChild(l)),document.body.classList.add("tabulator-print-fullscreen-hide"),document.body.appendChild(this.element),this.table.options.printFormatter&&this.table.options.printFormatter(this.element,u),window.print(),this.cleanup(),window.scrollTo(o,a),this.manualBlock=!1}}nt.moduleName="print";class it extends s{constructor(t){super(t),this.data=!1,this.blocked=!1,this.origFuncs={},this.currentVersion=0,this.registerTableOption("reactiveData",!1)}initialize(){this.table.options.reactiveData&&(this.subscribe("cell-value-save-before",this.block.bind(this)),this.subscribe("cell-value-save-after",this.unblock.bind(this)),this.subscribe("row-data-save-before",this.block.bind(this)),this.subscribe("row-data-save-after",this.unblock.bind(this)),this.subscribe("row-data-init-after",this.watchRow.bind(this)),this.subscribe("data-processing",this.watchData.bind(this)),this.subscribe("table-destroy",this.unwatchData.bind(this)))}watchData(t){var e,n=this;this.currentVersion++,e=this.currentVersion,this.unwatchData(),this.data=t,this.origFuncs.push=t.push,Object.defineProperty(this.data,"push",{enumerable:!1,configurable:!0,value:function(){var i=Array.from(arguments);return n.blocked||e!==n.currentVersion||i.forEach((t=>{n.table.rowManager.addRowActual(t,!1)})),n.origFuncs.push.apply(t,arguments)}}),this.origFuncs.unshift=t.unshift,Object.defineProperty(this.data,"unshift",{enumerable:!1,configurable:!0,value:function(){var i=Array.from(arguments);return n.blocked||e!==n.currentVersion||i.forEach((t=>{n.table.rowManager.addRowActual(t,!0)})),n.origFuncs.unshift.apply(t,arguments)}}),this.origFuncs.shift=t.shift,Object.defineProperty(this.data,"shift",{enumerable:!1,configurable:!0,value:function(){var i;return n.blocked||e!==n.currentVersion||n.data.length&&(i=n.table.rowManager.getRowFromDataObject(n.data[0]))&&i.deleteActual(),n.origFuncs.shift.call(t)}}),this.origFuncs.pop=t.pop,Object.defineProperty(this.data,"pop",{enumerable:!1,configurable:!0,value:function(){var i;return n.blocked||e!==n.currentVersion||n.data.length&&(i=n.table.rowManager.getRowFromDataObject(n.data[n.data.length-1]))&&i.deleteActual(),n.origFuncs.pop.call(t)}}),this.origFuncs.splice=t.splice,Object.defineProperty(this.data,"splice",{enumerable:!1,configurable:!0,value:function(){var i,r=Array.from(arguments),o=r[0]<0?t.length+r[0]:r[0],a=r[1],s=!!r[2]&&r.slice(2);if(!n.blocked&&e===n.currentVersion){if(s&&((i=!!t[o]&&n.table.rowManager.getRowFromDataObject(t[o]))?s.forEach((t=>{n.table.rowManager.addRowActual(t,!0,i,!0)})):(s=s.slice().reverse()).forEach((t=>{n.table.rowManager.addRowActual(t,!0,!1,!0)}))),0!==a){var l=t.slice(o,void 0===r[1]?r[1]:o+a);l.forEach(((t,e)=>{var i=n.table.rowManager.getRowFromDataObject(t);i&&i.deleteActual(e!==l.length-1)}))}(s||0!==a)&&n.table.rowManager.reRenderInPosition()}return n.origFuncs.splice.apply(t,arguments)}})}unwatchData(){if(!1!==this.data)for(var t in this.origFuncs)Object.defineProperty(this.data,t,{enumerable:!0,configurable:!0,writable:!0,value:this.origFuncs.key})}watchRow(t){var e=t.getData();for(var n in this.blocked=!0,e)this.watchKey(t,e,n);this.table.options.dataTree&&this.watchTreeChildren(t),this.blocked=!1}watchTreeChildren(t){var e=t.getData()[this.table.options.dataTreeChildField],n={};function i(){this.table.modules.dataTree.initializeRow(t),this.table.modules.dataTree.layoutRow(t),this.table.rowManager.refreshActiveData("tree",!1,!0)}e&&(n.push=e.push,Object.defineProperty(e,"push",{enumerable:!1,configurable:!0,value:()=>{var t=n.push.apply(e,arguments);return i(),t}}),n.unshift=e.unshift,Object.defineProperty(e,"unshift",{enumerable:!1,configurable:!0,value:()=>{var t=n.unshift.apply(e,arguments);return i(),t}}),n.shift=e.shift,Object.defineProperty(e,"shift",{enumerable:!1,configurable:!0,value:()=>{var t=n.shift.call(e);return i(),t}}),n.pop=e.pop,Object.defineProperty(e,"pop",{enumerable:!1,configurable:!0,value:()=>{var t=n.pop.call(e);return i(),t}}),n.splice=e.splice,Object.defineProperty(e,"splice",{enumerable:!1,configurable:!0,value:()=>{var t=n.splice.apply(e,arguments);return i(),t}}))}watchKey(t,e,n){var i=Object.getOwnPropertyDescriptor(e,n),r=e[n],o=this.currentVersion;Object.defineProperty(e,n,{set:e=>{if(r=e,!this.blocked&&o===this.currentVersion){var a={};a[n]=e,t.updateData(a)}i.set&&i.set(e)},get:()=>(i.get&&i.get(),r)})}unwatchRow(t){var e=t.getData();for(var n in e)Object.defineProperty(e,n,{value:e[n]})}block(){this.blocked=!0}unblock(){this.blocked=!1}}it.moduleName="reactiveData";class rt extends s{constructor(t){super(t),this.startColumn=!1,this.startX=!1,this.startWidth=!1,this.handle=null,this.prevHandle=null,this.registerColumnOption("resizable",!0)}initialize(){this.subscribe("cell-layout",this.layoutCellHandles.bind(this)),this.subscribe("column-init",this.layoutColumnHeader.bind(this))}layoutCellHandles(t){"row"===t.row.type&&this.initializeColumn("cell",t.column,t.element)}layoutColumnHeader(t){this.initializeColumn("header",t,t.element)}initializeColumn(t,e,n){var i=this,r=!1,o=e.definition.resizable;if("header"===t&&(r="textarea"==e.definition.formatter||e.definition.variableHeight,e.modules.resize={variableHeight:r}),!0===o||o==t){var a=document.createElement("div");a.className="tabulator-col-resize-handle";var s=document.createElement("div");s.className="tabulator-col-resize-handle prev",a.addEventListener("click",(function(t){t.stopPropagation()}));var l=function(t){var n=e.getLastColumn();n&&i._checkResizability(n)&&(i.startColumn=e,i._mouseDown(t,n,a))};a.addEventListener("mousedown",l),a.addEventListener("touchstart",l,{passive:!0}),a.addEventListener("dblclick",(function(t){var n=e.getLastColumn();n&&i._checkResizability(n)&&(t.stopPropagation(),n.reinitializeWidth(!0))})),s.addEventListener("click",(function(t){t.stopPropagation()}));var u=function(t){var n,r,o;(n=e.getFirstColumn())&&(o=(r=i.table.columnManager.findColumnIndex(n))>0&&i.table.columnManager.getColumnByIndex(r-1))&&i._checkResizability(o)&&(i.startColumn=e,i._mouseDown(t,o,s))};s.addEventListener("mousedown",u),s.addEventListener("touchstart",u,{passive:!0}),s.addEventListener("dblclick",(function(t){var n,r,o;(n=e.getFirstColumn())&&(o=(r=i.table.columnManager.findColumnIndex(n))>0&&i.table.columnManager.getColumnByIndex(r-1))&&i._checkResizability(o)&&(t.stopPropagation(),o.reinitializeWidth(!0))})),n.appendChild(a),n.appendChild(s)}}_checkResizability(t){return t.definition.resizable}_mouseDown(t,e,n){var i=this;function r(t){i.table.rtl?e.setWidth(i.startWidth-((void 0===t.screenX?t.touches[0].screenX:t.screenX)-i.startX)):e.setWidth(i.startWidth+((void 0===t.screenX?t.touches[0].screenX:t.screenX)-i.startX)),i.table.columnManager.renderer.rerenderColumns(!0),!i.table.browserSlow&&e.modules.resize&&e.modules.resize.variableHeight&&e.checkCellHeights()}function o(t){i.startColumn.modules.edit&&(i.startColumn.modules.edit.blocked=!1),i.table.browserSlow&&e.modules.resize&&e.modules.resize.variableHeight&&e.checkCellHeights(),document.body.removeEventListener("mouseup",o),document.body.removeEventListener("mousemove",r),n.removeEventListener("touchmove",r),n.removeEventListener("touchend",o),i.table.element.classList.remove("tabulator-block-select"),i.dispatch("column-resized",e),i.table.externalEvents.dispatch("columnResized",e.getComponent())}i.table.element.classList.add("tabulator-block-select"),t.stopPropagation(),i.startColumn.modules.edit&&(i.startColumn.modules.edit.blocked=!0),i.startX=void 0===t.screenX?t.touches[0].screenX:t.screenX,i.startWidth=e.getWidth(),document.body.addEventListener("mousemove",r),document.body.addEventListener("mouseup",o),n.addEventListener("touchmove",r,{passive:!0}),n.addEventListener("touchend",o)}}rt.moduleName="resizeColumns";class ot extends s{constructor(t){super(t),this.startColumn=!1,this.startY=!1,this.startHeight=!1,this.handle=null,this.prevHandle=null,this.registerTableOption("resizableRows",!1)}initialize(){this.table.options.resizableRows&&this.subscribe("row-layout-after",this.initializeRow.bind(this))}initializeRow(t){var e=this,n=t.getElement(),i=document.createElement("div");i.className="tabulator-row-resize-handle";var r=document.createElement("div");r.className="tabulator-row-resize-handle prev",i.addEventListener("click",(function(t){t.stopPropagation()}));var o=function(n){e.startRow=t,e._mouseDown(n,t,i)};i.addEventListener("mousedown",o),i.addEventListener("touchstart",o,{passive:!0}),r.addEventListener("click",(function(t){t.stopPropagation()}));var a=function(n){var i=e.table.rowManager.prevDisplayRow(t);i&&(e.startRow=i,e._mouseDown(n,i,r))};r.addEventListener("mousedown",a),r.addEventListener("touchstart",a,{passive:!0}),n.appendChild(i),n.appendChild(r)}_mouseDown(t,e,n){var i=this;function r(t){e.setHeight(i.startHeight+((void 0===t.screenY?t.touches[0].screenY:t.screenY)-i.startY))}function o(t){document.body.removeEventListener("mouseup",r),document.body.removeEventListener("mousemove",r),n.removeEventListener("touchmove",r),n.removeEventListener("touchend",o),i.table.element.classList.remove("tabulator-block-select"),this.dispatchExternal("rowResized",e.getComponent())}i.table.element.classList.add("tabulator-block-select"),t.stopPropagation(),i.startY=void 0===t.screenY?t.touches[0].screenY:t.screenY,i.startHeight=e.getHeight(),document.body.addEventListener("mousemove",r),document.body.addEventListener("mouseup",o),n.addEventListener("touchmove",r,{passive:!0}),n.addEventListener("touchend",o)}}ot.moduleName="resizeRows";class at extends s{constructor(t){super(t),this.binding=!1,this.observer=!1,this.containerObserver=!1,this.tableHeight=0,this.tableWidth=0,this.containerHeight=0,this.containerWidth=0,this.autoResize=!1,this.registerTableOption("autoResize",!0)}initialize(){if(this.table.options.autoResize){var t,e=this.table;this.tableHeight=e.element.clientHeight,this.tableWidth=e.element.clientWidth,e.element.parentNode&&(this.containerHeight=e.element.parentNode.clientHeight,this.containerWidth=e.element.parentNode.clientWidth),"undefined"!=typeof ResizeObserver&&"virtual"===e.rowManager.getRenderMode()?(this.autoResize=!0,this.observer=new ResizeObserver((t=>{if(!e.browserMobile||e.browserMobile&&!e.modules.edit.currentCell){var n=Math.floor(t[0].contentRect.height),i=Math.floor(t[0].contentRect.width);this.tableHeight==n&&this.tableWidth==i||(this.tableHeight=n,this.tableWidth=i,e.element.parentNode&&(this.containerHeight=e.element.parentNode.clientHeight,this.containerWidth=e.element.parentNode.clientWidth),this.table.columnManager.renderer.rerenderColumns(!0),e.redraw())}})),this.observer.observe(e.element),t=window.getComputedStyle(e.element),this.table.element.parentNode&&!this.table.rowManager.fixedHeight&&(t.getPropertyValue("max-height")||t.getPropertyValue("min-height"))&&(this.containerObserver=new ResizeObserver((t=>{if(!e.browserMobile||e.browserMobile&&!e.modules.edit.currentCell){var n=Math.floor(t[0].contentRect.height),i=Math.floor(t[0].contentRect.width);this.containerHeight==n&&this.containerWidth==i||(this.containerHeight=n,this.containerWidth=i,this.tableHeight=e.element.clientHeight,this.tableWidth=e.element.clientWidth),e.columnManager.renderer.rerenderColumns(!0),e.redraw()}})),this.containerObserver.observe(this.table.element.parentNode)),this.subscribe("table-resize",this.tableResized.bind(this))):(this.binding=function(){(!e.browserMobile||e.browserMobile&&!e.modules.edit.currentCell)&&(e.columnManager.renderer.rerenderColumns(!0),e.redraw())},window.addEventListener("resize",this.binding)),this.subscribe("table-destroy",this.clearBindings.bind(this))}}tableResized(){this.table.rowManager.redraw()}clearBindings(){this.binding&&window.removeEventListener("resize",this.binding),this.observer&&this.observer.unobserve(this.table.element),this.containerObserver&&this.containerObserver.unobserve(this.table.element.parentNode)}}at.moduleName="resizeTable";class st extends s{constructor(t){super(t),this.columns=[],this.hiddenColumns=[],this.mode="",this.index=0,this.collapseFormatter=[],this.collapseStartOpen=!0,this.collapseHandleColumn=!1,this.registerTableOption("responsiveLayout",!1),this.registerTableOption("responsiveLayoutCollapseStartOpen",!0),this.registerTableOption("responsiveLayoutCollapseUseFormatters",!0),this.registerTableOption("responsiveLayoutCollapseFormatter",!1),this.registerColumnOption("responsive")}initialize(){this.table.options.responsiveLayout&&(this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("column-show",this.updateColumnVisibility.bind(this)),this.subscribe("column-hide",this.updateColumnVisibility.bind(this)),this.subscribe("columns-loaded",this.initializeResponsivity.bind(this)),this.subscribe("column-moved",this.initializeResponsivity.bind(this)),this.subscribe("column-add",this.initializeResponsivity.bind(this)),this.subscribe("column-delete",this.initializeResponsivity.bind(this)),this.subscribe("table-redrawing",this.tableRedraw.bind(this)),"collapse"===this.table.options.responsiveLayout&&(this.subscribe("row-init",this.initializeRow.bind(this)),this.subscribe("row-layout",this.layoutRow.bind(this))))}tableRedraw(t){-1===["fitColumns","fitDataStretch"].indexOf(this.layoutMode())&&(t||this.update())}initializeResponsivity(){var t=[];this.mode=this.table.options.responsiveLayout,this.collapseFormatter=this.table.options.responsiveLayoutCollapseFormatter||this.formatCollapsedData,this.collapseStartOpen=this.table.options.responsiveLayoutCollapseStartOpen,this.hiddenColumns=[],this.table.columnManager.columnsByIndex.forEach((function(e,n){e.modules.responsive&&e.modules.responsive.order&&e.modules.responsive.visible&&(e.modules.responsive.index=n,t.push(e),e.visible||"collapse"!==self.mode||self.hiddenColumns.push(e))})),t=(t=t.reverse()).sort((function(t,e){return e.modules.responsive.order-t.modules.responsive.order||e.modules.responsive.index-t.modules.responsive.index})),this.columns=t,"collapse"===this.mode&&this.generateCollapsedContent();for(let t of this.table.columnManager.columnsByIndex)if("responsiveCollapse"==t.definition.formatter){this.collapseHandleColumn=t;break}this.collapseHandleColumn&&(this.hiddenColumns.length?this.collapseHandleColumn.show():this.collapseHandleColumn.hide())}initializeColumn(t){var e=t.getDefinition();t.modules.responsive={order:void 0===e.responsive?1:e.responsive,visible:!1!==e.visible}}initializeRow(t){var e;"calc"!==t.type&&((e=document.createElement("div")).classList.add("tabulator-responsive-collapse"),t.modules.responsiveLayout={element:e,open:this.collapseStartOpen},this.collapseStartOpen||(e.style.display="none"))}layoutRow(t){var e=t.getElement();t.modules.responsiveLayout&&(e.appendChild(t.modules.responsiveLayout.element),this.generateCollapsedRowContent(t))}updateColumnVisibility(t,e){!e&&t.modules.responsive&&(t.modules.responsive.visible=t.visible,this.initialize())}hideColumn(t){var e=this.hiddenColumns.length;t.hide(!1,!0),"collapse"===this.mode&&(this.hiddenColumns.unshift(t),this.generateCollapsedContent(),this.collapseHandleColumn&&!e&&this.collapseHandleColumn.show())}showColumn(t){var e;t.show(!1,!0),t.setWidth(t.getWidth()),"collapse"===this.mode&&((e=this.hiddenColumns.indexOf(t))>-1&&this.hiddenColumns.splice(e,1),this.generateCollapsedContent(),this.collapseHandleColumn&&!this.hiddenColumns.length&&this.collapseHandleColumn.hide())}update(){for(var t=this,e=!0;e;){let n="fitColumns"==t.table.modules.layout.getMode()?t.table.columnManager.getFlexBaseWidth():t.table.columnManager.getWidth(),i=(t.table.options.headerVisible?t.table.columnManager.element.clientWidth:t.table.element.clientWidth)-n;if(i<0){let n=t.columns[t.index];n?(t.hideColumn(n),t.index++):e=!1}else{let n=t.columns[t.index-1];n&&i>0&&i>=n.getWidth()?(t.showColumn(n),t.index--):e=!1}t.table.rowManager.activeRowsCount||t.table.rowManager.renderEmptyScroll()}}generateCollapsedContent(){var t=this;this.table.rowManager.getDisplayRows().forEach((function(e){t.generateCollapsedRowContent(e)}))}generateCollapsedRowContent(t){var e,n;if(t.modules.responsiveLayout){for(e=t.modules.responsiveLayout.element;e.firstChild;)e.removeChild(e.firstChild);(n=this.collapseFormatter(this.generateCollapsedRowData(t)))&&e.appendChild(n)}}generateCollapsedRowData(t){var e,n=this,i=t.getData(),r=[];return this.hiddenColumns.forEach((function(o){var a=o.getFieldValue(i);if(o.definition.title&&o.field)if(o.modules.format&&n.table.options.responsiveLayoutCollapseUseFormatters){function s(t){t()}e={value:!1,data:{},getValue:function(){return a},getData:function(){return i},getElement:function(){return document.createElement("div")},getRow:function(){return t.getComponent()},getColumn:function(){return o.getComponent()}},r.push({field:o.field,title:o.definition.title,value:o.modules.format.formatter.call(n.table.modules.format,e,o.modules.format.params,s)})}else r.push({field:o.field,title:o.definition.title,value:a})})),r}formatCollapsedData(t){var e=document.createElement("table");return t.forEach((function(t){var n,i=document.createElement("tr"),r=document.createElement("td"),o=document.createElement("td"),a=document.createElement("strong");r.appendChild(a),this.langBind("columns|"+t.field,(function(e){a.innerText=e||t.title})),t.value instanceof Node?((n=document.createElement("div")).appendChild(t.value),o.appendChild(n)):o.innerHTML=t.value,i.appendChild(r),i.appendChild(o),e.appendChild(i)}),this),Object.keys(t).length?e:""}}st.moduleName="responsiveLayout";class lt extends s{constructor(t){super(t),this.selecting=!1,this.lastClickedRow=!1,this.selectPrev=[],this.selectedRows=[],this.headerCheckboxElement=null,this.registerTableOption("selectable","highlight"),this.registerTableOption("selectableRangeMode","drag"),this.registerTableOption("selectableRollingSelection",!0),this.registerTableOption("selectablePersistence",!0),this.registerTableOption("selectableCheck",(function(t,e){return!0})),this.registerTableFunction("selectRow",this.selectRows.bind(this)),this.registerTableFunction("deselectRow",this.deselectRows.bind(this)),this.registerTableFunction("toggleSelectRow",this.toggleRow.bind(this)),this.registerTableFunction("getSelectedRows",this.getSelectedRows.bind(this)),this.registerTableFunction("getSelectedData",this.getSelectedData.bind(this)),this.registerComponentFunction("row","select",this.selectRows.bind(this)),this.registerComponentFunction("row","deselect",this.deselectRows.bind(this)),this.registerComponentFunction("row","toggleSelect",this.toggleRow.bind(this)),this.registerComponentFunction("row","isSelected",this.isRowSelected.bind(this))}initialize(){!1!==this.table.options.selectable&&(this.subscribe("row-init",this.initializeRow.bind(this)),this.subscribe("row-deleting",this.rowDeleted.bind(this)),this.subscribe("rows-wipe",this.clearSelectionData.bind(this)),this.subscribe("rows-retrieve",this.rowRetrieve.bind(this)),this.table.options.selectable&&this.table.options.selectablePersistence&&this.subscribe("data-refeshing",this.deselectRows.bind(this)))}rowRetrieve(t,e){return"selected"===t?this.selectedRows:e}rowDeleted(t){this._deselectRow(t,!0)}clearSelectionData(t){this.selecting=!1,this.lastClickedRow=!1,this.selectPrev=[],this.selectedRows=[],!0!==t&&this._rowSelectionChanged()}initializeRow(t){var e=this,n=t.getElement(),i=function(){setTimeout((function(){e.selecting=!1}),50),document.body.removeEventListener("mouseup",i)};t.modules.select={selected:!1},e.table.options.selectableCheck.call(this.table,t.getComponent())?(n.classList.add("tabulator-selectable"),n.classList.remove("tabulator-unselectable"),e.table.options.selectable&&"highlight"!=e.table.options.selectable&&("click"===e.table.options.selectableRangeMode?n.addEventListener("click",(function(n){if(n.shiftKey){e.table._clearSelection(),e.lastClickedRow=e.lastClickedRow||t;var i=e.table.rowManager.getDisplayRowIndex(e.lastClickedRow),r=e.table.rowManager.getDisplayRowIndex(t),o=i<=r?i:r,a=i>=r?i:r,s=e.table.rowManager.getDisplayRows().slice(0).splice(o,a-o+1);n.ctrlKey||n.metaKey?(s.forEach((function(n){n!==e.lastClickedRow&&(!0===e.table.options.selectable||e.isRowSelected(t)||e.selectedRows.length<e.table.options.selectable)&&e.toggleRow(n)})),e.lastClickedRow=t):(e.deselectRows(void 0,!0),!0!==e.table.options.selectable&&s.length>e.table.options.selectable&&(s=s.slice(0,e.table.options.selectable)),e.selectRows(s)),e.table._clearSelection()}else n.ctrlKey||n.metaKey?(e.toggleRow(t),e.lastClickedRow=t):(e.deselectRows(void 0,!0),e.selectRows(t),e.lastClickedRow=t)})):(n.addEventListener("click",(function(n){e.table.modExists("edit")&&e.table.modules.edit.getCurrentCell()||e.table._clearSelection(),e.selecting||e.toggleRow(t)})),n.addEventListener("mousedown",(function(n){if(n.shiftKey)return e.table._clearSelection(),e.selecting=!0,e.selectPrev=[],document.body.addEventListener("mouseup",i),document.body.addEventListener("keyup",i),e.toggleRow(t),!1})),n.addEventListener("mouseenter",(function(n){e.selecting&&(e.table._clearSelection(),e.toggleRow(t),e.selectPrev[1]==t&&e.toggleRow(e.selectPrev[0]))})),n.addEventListener("mouseout",(function(n){e.selecting&&(e.table._clearSelection(),e.selectPrev.unshift(t))}))))):(n.classList.add("tabulator-unselectable"),n.classList.remove("tabulator-selectable"))}toggleRow(t){this.table.options.selectableCheck.call(this.table,t.getComponent())&&(t.modules.select&&t.modules.select.selected?this._deselectRow(t):this._selectRow(t))}selectRows(t){var e;switch(typeof t){case"undefined":this.table.rowManager.rows.forEach((t=>{this._selectRow(t,!0,!0)})),this._rowSelectionChanged();break;case"string":(e=this.table.rowManager.findRow(t))?this._selectRow(e,!0,!0):this.table.rowManager.getRows(t).forEach((t=>{this._selectRow(t,!0,!0)})),this._rowSelectionChanged();break;default:Array.isArray(t)?(t.forEach((t=>{this._selectRow(t,!0,!0)})),this._rowSelectionChanged()):this._selectRow(t,!1,!0)}}_selectRow(t,e,n){if(!isNaN(this.table.options.selectable)&&!0!==this.table.options.selectable&&!n&&this.selectedRows.length>=this.table.options.selectable){if(!this.table.options.selectableRollingSelection)return!1;this._deselectRow(this.selectedRows[0])}var i=this.table.rowManager.findRow(t);i?-1==this.selectedRows.indexOf(i)&&(i.getElement().classList.add("tabulator-selected"),i.modules.select||(i.modules.select={}),i.modules.select.selected=!0,i.modules.select.checkboxEl&&(i.modules.select.checkboxEl.checked=!0),this.selectedRows.push(i),this.table.options.dataTreeSelectPropagate&&this.childRowSelection(i,!0),e||this.dispatchExternal("rowSelected",i.getComponent()),this._rowSelectionChanged(e)):e||console.warn("Selection Error - No such row found, ignoring selection:"+t)}isRowSelected(t){return-1!==this.selectedRows.indexOf(t)}deselectRows(t,e){var n,i=this;if(void 0===t){n=i.selectedRows.length;for(let t=0;t<n;t++)i._deselectRow(i.selectedRows[0],!0);i._rowSelectionChanged(e)}else Array.isArray(t)?(t.forEach((function(t){i._deselectRow(t,!0)})),i._rowSelectionChanged(e)):i._deselectRow(t,e)}_deselectRow(t,e){var n,i=this,r=i.table.rowManager.findRow(t);r?(n=i.selectedRows.findIndex((function(t){return t==r})))>-1&&(r.getElement().classList.remove("tabulator-selected"),r.modules.select||(r.modules.select={}),r.modules.select.selected=!1,r.modules.select.checkboxEl&&(r.modules.select.checkboxEl.checked=!1),i.selectedRows.splice(n,1),this.table.options.dataTreeSelectPropagate&&this.childRowSelection(r,!1),e||this.dispatchExternal("rowDeselected",r.getComponent()),i._rowSelectionChanged(e)):e||console.warn("Deselection Error - No such row found, ignoring selection:"+t)}getSelectedData(){var t=[];return this.selectedRows.forEach((function(e){t.push(e.getData())})),t}getSelectedRows(){var t=[];return this.selectedRows.forEach((function(e){t.push(e.getComponent())})),t}_rowSelectionChanged(t){this.headerCheckboxElement&&(0===this.selectedRows.length?(this.headerCheckboxElement.checked=!1,this.headerCheckboxElement.indeterminate=!1):this.table.rowManager.rows.length===this.selectedRows.length?(this.headerCheckboxElement.checked=!0,this.headerCheckboxElement.indeterminate=!1):(this.headerCheckboxElement.indeterminate=!0,this.headerCheckboxElement.checked=!1)),t||this.dispatchExternal("rowSelectionChanged",this.getSelectedData(),this.getSelectedRows())}registerRowSelectCheckbox(t,e){t._row.modules.select||(t._row.modules.select={}),t._row.modules.select.checkboxEl=e}registerHeaderSelectCheckbox(t){this.headerCheckboxElement=t}childRowSelection(t,e){var n=this.table.modules.dataTree.getChildren(t,!0);if(e)for(let t of n)this._selectRow(t,!0);else for(let t of n)this._deselectRow(t,!0)}}function ut(t,e,n,i,r,o,a){var s=window.DateTime||luxon.DateTime,l=a.format||"dd/MM/yyyy HH:mm:ss",u=a.alignEmptyValues,c=0;if(void 0!==s){if(t=s.fromFormat(t,l),e=s.fromFormat(e,l),t.isValid){if(e.isValid)return t-e;c=1}else c=e.isValid?-1:0;return("top"===u&&"desc"===o||"bottom"===u&&"asc"===o)&&(c*=-1),c}console.error("Sort Error - 'datetime' sorter is dependant on luxon.js")}lt.moduleName="selectRow";var ct={number:function(t,e,n,i,r,o,a){var s=a.alignEmptyValues,l=a.decimalSeparator,u=a.thousandSeparator,c=0;if(t=String(t),e=String(e),u&&(t=t.split(u).join(""),e=e.split(u).join("")),l&&(t=t.split(l).join("."),e=e.split(l).join(".")),t=parseFloat(t),e=parseFloat(e),isNaN(t))c=isNaN(e)?0:-1;else{if(!isNaN(e))return t-e;c=1}return("top"===s&&"desc"===o||"bottom"===s&&"asc"===o)&&(c*=-1),c},string:function(t,e,n,i,r,o,a){var s,l=a.alignEmptyValues,u=0;if(t){if(e){switch(typeof a.locale){case"boolean":a.locale&&(s=this.langLocale());break;case"string":s=a.locale}return String(t).toLowerCase().localeCompare(String(e).toLowerCase(),s)}u=1}else u=e?-1:0;return("top"===l&&"desc"===o||"bottom"===l&&"asc"===o)&&(u*=-1),u},date:function(t,e,n,i,r,o,a){return a.format||(a.format="dd/MM/yyyy"),ut.call(this,t,e,n,i,r,o,a)},time:function(t,e,n,i,r,o,a){return a.format||(a.format="HH:mm"),ut.call(this,t,e,n,i,r,o,a)},datetime:ut,boolean:function(t,e,n,i,r,o,a){return(!0===t||"true"===t||"True"===t||1===t?1:0)-(!0===e||"true"===e||"True"===e||1===e?1:0)},array:function(t,e,n,i,r,o,a){var s=a.type||"length",l=a.alignEmptyValues,u=0;function c(t){switch(s){case"length":return t.length;case"sum":return t.reduce((function(t,e){return t+e}));case"max":return Math.max.apply(null,t);case"min":return Math.min.apply(null,t);case"avg":return t.reduce((function(t,e){return t+e}))/t.length}}if(Array.isArray(t)){if(Array.isArray(e))return(t?c(t):0)-(e?c(e):0);l=1}else l=Array.isArray(e)?-1:0;return("top"===l&&"desc"===o||"bottom"===l&&"asc"===o)&&(u*=-1),u},exists:function(t,e,n,i,r,o,a){return(void 0===t?0:1)-(void 0===e?0:1)},alphanum:function(t,e,n,i,r,o,a){var s,l,u,c,h,d=0,f=/(\d+)|(\D+)/g,p=/\d/,m=a.alignEmptyValues,g=0;if(t||0===t){if(e||0===e){if(isFinite(t)&&isFinite(e))return t-e;if((s=String(t).toLowerCase())===(l=String(e).toLowerCase()))return 0;if(!p.test(s)||!p.test(l))return s>l?1:-1;for(s=s.match(f),l=l.match(f),h=s.length>l.length?l.length:s.length;d<h;)if((u=s[d])!==(c=l[d++]))return isFinite(u)&&isFinite(c)?("0"===u.charAt(0)&&(u="."+u),"0"===c.charAt(0)&&(c="."+c),u-c):u>c?1:-1;return s.length>l.length}g=1}else g=e||0===e?-1:0;return("top"===m&&"desc"===o||"bottom"===m&&"asc"===o)&&(g*=-1),g}};class ht extends s{constructor(t){super(t),this.sortList=[],this.changed=!1,this.registerTableOption("sortMode","local"),this.registerTableOption("initialSort",!1),this.registerTableOption("columnHeaderSortMulti",!0),this.registerTableOption("sortOrderReverse",!1),this.registerTableOption("headerSortElement","<div class='tabulator-arrow'></div>"),this.registerColumnOption("sorter"),this.registerColumnOption("sorterParams"),this.registerColumnOption("headerSort",!0),this.registerColumnOption("headerSortStartingDir"),this.registerColumnOption("headerSortTristate")}initialize(){this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("table-built",this.tableBuilt.bind(this)),this.registerDataHandler(this.sort.bind(this),20),this.registerTableFunction("setSort",this.userSetSort.bind(this)),this.registerTableFunction("getSorters",this.getSort.bind(this)),this.registerTableFunction("clearSort",this.clearSort.bind(this)),"remote"===this.table.options.sortMode&&this.subscribe("data-params",this.remoteSortParams.bind(this))}tableBuilt(){this.table.options.initialSort&&this.setSort(this.table.options.initialSort)}remoteSortParams(t,e,n,i){var r=this.getSort();return r.forEach((t=>{delete t.column})),i.sort=r,i}userSetSort(t,e){this.setSort(t,e),this.refreshSort()}clearSort(){this.clear(),this.refreshSort()}initializeColumn(t){var e,n,i=!1;switch(typeof t.definition.sorter){case"string":ht.sorters[t.definition.sorter]?i=ht.sorters[t.definition.sorter]:console.warn("Sort Error - No such sorter found: ",t.definition.sorter);break;case"function":i=t.definition.sorter}t.modules.sort={sorter:i,dir:"none",params:t.definition.sorterParams||{},startingDir:t.definition.headerSortStartingDir||"asc",tristate:t.definition.headerSortTristate},!1!==t.definition.headerSort&&((e=t.getElement()).classList.add("tabulator-sortable"),(n=document.createElement("div")).classList.add("tabulator-col-sorter"),"object"==typeof this.table.options.headerSortElement?n.appendChild(this.table.options.headerSortElement):n.innerHTML=this.table.options.headerSortElement,t.titleHolderElement.appendChild(n),t.modules.sort.element=n,e.addEventListener("click",(e=>{var n="",i=[],r=!1;if(t.modules.sort){if(t.modules.sort.tristate)n="none"==t.modules.sort.dir?t.modules.sort.startingDir:t.modules.sort.dir==t.modules.sort.startingDir?"asc"==t.modules.sort.dir?"desc":"asc":"none";else switch(t.modules.sort.dir){case"asc":n="desc";break;case"desc":n="asc";break;default:n=t.modules.sort.startingDir}this.table.options.columnHeaderSortMulti&&(e.shiftKey||e.ctrlKey)?(r=(i=this.getSort()).findIndex((e=>e.field===t.getField())),r>-1?(i[r].dir=n,r!=i.length-1&&(r=i.splice(r,1)[0],"none"!=n&&i.push(r))):"none"!=n&&i.push({column:t,dir:n}),this.setSort(i)):"none"==n?this.clear():this.setSort(t,n),this.refreshSort()}})))}refreshSort(){"remote"===this.table.options.sortMode?this.reloadData():this.refreshData()}hasChanged(){var t=this.changed;return this.changed=!1,t}getSort(){var t=[];return this.sortList.forEach((function(e){e.column&&t.push({column:e.column.getComponent(),field:e.column.getField(),dir:e.dir})})),t}setSort(t,e){var n=this,i=[];Array.isArray(t)||(t=[{column:t,dir:e}]),t.forEach((function(t){var e;(e=n.table.columnManager.findColumn(t.column))?(t.column=e,i.push(t),n.changed=!0):console.warn("Sort Warning - Sort field does not exist and is being ignored: ",t.column)})),n.sortList=i,this.dispatch("sort-changed")}clear(){this.setSort([])}findSorter(t){var e,n=this.table.rowManager.activeRows[0],i="string";if(n&&(n=n.getData(),t.getField()))switch(typeof(e=t.getFieldValue(n))){case"undefined":i="string";break;case"boolean":i="boolean";break;default:isNaN(e)||""===e?e.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)&&(i="alphanum"):i="number"}return ht.sorters[i]}sort(t){var e=this,n=this.table.options.sortOrderReverse?e.sortList.slice().reverse():e.sortList,i=[],r=[];return this.subscribedExternal("dataSorting")&&this.dispatchExternal("dataSorting",e.getSort()),e.clearColumnHeaders(),"remote"!==this.table.options.sortMode?(n.forEach((function(t,n){var r=t.column.modules.sort;t.column&&r&&(r.sorter||(r.sorter=e.findSorter(t.column)),t.params="function"==typeof r.params?r.params(t.column.getComponent(),t.dir):r.params,i.push(t)),e.setColumnHeader(t.column,t.dir)})),i.length&&e._sortItems(t,i)):n.forEach((function(t,n){e.setColumnHeader(t.column,t.dir)})),this.subscribedExternal("dataSorted")&&(t.forEach((t=>{r.push(t.getComponent())})),this.dispatchExternal("dataSorted",e.getSort(),r)),t}clearColumnHeaders(){this.table.columnManager.getRealColumns().forEach((function(t){t.modules.sort&&(t.modules.sort.dir="none",t.getElement().setAttribute("aria-sort","none"))}))}setColumnHeader(t,e){t.modules.sort.dir=e,t.getElement().setAttribute("aria-sort",e)}_sortItems(t,e){var n=e.length-1;t.sort(((t,i)=>{for(var r,o=n;o>=0;o--){let n=e[o];if(0!==(r=this._sortRow(t,i,n.column,n.dir,n.params)))break}return r}))}_sortRow(t,e,n,i,r){var o,a,s="asc"==i?t:e,l="asc"==i?e:t;return t=void 0!==(t=n.getFieldValue(s.getData()))?t:"",e=void 0!==(e=n.getFieldValue(l.getData()))?e:"",o=s.getComponent(),a=l.getComponent(),n.modules.sort.sorter.call(this,t,e,o,a,n.getComponent(),i,r)}}ht.moduleName="sort",ht.sorters=ct;var dt={integer:function(t,e,n){return""===e||null==e||"number"==typeof(e=Number(e))&&isFinite(e)&&Math.floor(e)===e},float:function(t,e,n){return""===e||null==e||"number"==typeof(e=Number(e))&&isFinite(e)&&e%1!=0},numeric:function(t,e,n){return""===e||null==e||!isNaN(e)},string:function(t,e,n){return""===e||null==e||isNaN(e)},max:function(t,e,n){return""===e||null==e||parseFloat(e)<=n},min:function(t,e,n){return""===e||null==e||parseFloat(e)>=n},starts:function(t,e,n){return""===e||null==e||String(e).toLowerCase().startsWith(String(n).toLowerCase())},ends:function(t,e,n){return""===e||null==e||String(e).toLowerCase().endsWith(String(n).toLowerCase())},minLength:function(t,e,n){return""===e||null==e||String(e).length>=n},maxLength:function(t,e,n){return""===e||null==e||String(e).length<=n},in:function(t,e,n){return""===e||null==e||("string"==typeof n&&(n=n.split("|")),""===e||n.indexOf(e)>-1)},regex:function(t,e,n){return""===e||null==e||new RegExp(n).test(e)},unique:function(t,e,n){if(""===e||null==e)return!0;var i=!0,r=t.getData(),o=t.getColumn()._getSelf();return this.table.rowManager.rows.forEach((function(t){var n=t.getData();n!==r&&e==o.getFieldValue(n)&&(i=!1)})),i},required:function(t,e,n){return""!==e&&null!=e}};class ft extends s{constructor(t){super(t),this.invalidCells=[],this.registerTableOption("validationMode","blocking"),this.registerColumnOption("validator"),this.registerTableFunction("getInvalidCells",this.getInvalidCells.bind(this)),this.registerTableFunction("clearCellValidation",this.userClearCellValidation.bind(this)),this.registerTableFunction("validate",this.userValidate.bind(this)),this.registerComponentFunction("cell","isValid",this.cellIsValid.bind(this)),this.registerComponentFunction("cell","clearValidation",this.clearValidation.bind(this)),this.registerComponentFunction("cell","validate",this.cellValidate.bind(this)),this.registerComponentFunction("column","validate",this.columnValidate.bind(this)),this.registerComponentFunction("row","validate",this.rowValidate.bind(this))}initialize(){this.subscribe("cell-delete",this.clearValidation.bind(this)),this.subscribe("column-layout",this.initializeColumnCheck.bind(this))}cellIsValid(t){return!t.modules.validate||!t.modules.validate.invalid}cellValidate(t){return this.validate(t.column.modules.validate,t,t.getValue())}columnValidate(t){var e=[];return t.cells.forEach((function(t){this.cellValidate(t)||e.push(t.getComponent())})),!e.length||e}rowValidate(t){var e=[];return t.cells.forEach((function(t){this.cellValidate(t)||e.push(t.getComponent())})),!e.length||e}userClearCellValidation(t){t||(t=this.getInvalidCells()),Array.isArray(t)||(t=[t]),t.forEach((t=>{this.clearValidation(t._getSelf())}))}userValidate(t){var e=[];return this.table.rowManager.rows.forEach((function(t){var n=t.validate();!0!==n&&(e=e.concat(n))})),!e.length||e}initializeColumnCheck(t){void 0!==t.definition.validator&&this.initializeColumn(t)}initializeColumn(t){var e,n=this,i=[];t.definition.validator&&(Array.isArray(t.definition.validator)?t.definition.validator.forEach((function(t){(e=n._extractValidator(t))&&i.push(e)})):(e=this._extractValidator(t.definition.validator))&&i.push(e),t.modules.validate=!!i.length&&i)}_extractValidator(t){var e,n,i;switch(typeof t){case"string":return(i=t.indexOf(":"))>-1?(e=t.substring(0,i),n=t.substring(i+1)):e=t,this._buildValidator(e,n);case"function":return this._buildValidator(t);case"object":return this._buildValidator(t.type,t.parameters)}}_buildValidator(t,e){var n="function"==typeof t?t:ft.validators[t];return n?{type:"function"==typeof t?"function":t,func:n,params:e}:(console.warn("Validator Setup Error - No matching validator found:",t),!1)}validate(t,e,n){var i=this,r=[],o=this.invalidCells.indexOf(e);return t&&t.forEach((function(t){t.func.call(i,e.getComponent(),n,t.params)||r.push({type:t.type,parameters:t.params})})),r=!r.length||r,e.modules.validate||(e.modules.validate={}),!0===r?(e.modules.validate.invalid=!1,e.getElement().classList.remove("tabulator-validation-fail"),o>-1&&this.invalidCells.splice(o,1)):(e.modules.validate.invalid=!0,"manual"!==this.table.options.validationMode&&e.getElement().classList.add("tabulator-validation-fail"),-1==o&&this.invalidCells.push(e)),r}getInvalidCells(){var t=[];return this.invalidCells.forEach((e=>{t.push(e.getComponent())})),t}clearValidation(t){var e;t.modules.validate&&t.modules.validate.invalid&&(t.getElement().classList.remove("tabulator-validation-fail"),t.modules.validate.invalid=!1,(e=this.invalidCells.indexOf(t))>-1&&this.invalidCells.splice(e,1))}}ft.moduleName="validate",ft.validators=dt;var pt=Object.freeze({__proto__:null,AccessorModule:u,AjaxModule:p,ClipboardModule:m,ColumnCalcsModule:S,DataTreeModule:k,DownloadModule:T,EditModule:A,ExportModule:I,FilterModule:R,FormatModule:j,FrozenColumnsModule:F,FrozenRowsModule:B,GroupRowsModule:G,HistoryModule:W,HtmlTableImportModule:U,InteractionModule:V,KeybindingsModule:X,MenuModule:q,MoveColumnsModule:K,MoveRowsModule:$,MutatorModule:Z,PageModule:J,PersistenceModule:et,PrintModule:nt,ReactiveDataModule:it,ResizeColumnsModule:rt,ResizeRowsModule:ot,ResizeTableModule:at,ResponsiveLayoutModule:st,SelectRowModule:lt,SortModule:ht,ValidateModule:ft});class mt{constructor(t,e){this.table=t,this.msgType=e,this.registeredDefaults={}}register(t,e){this.registeredDefaults[t]=e}generate(t,e={}){var n=Object.assign({},this.registeredDefaults);if(Object.assign(n,t),!1!==e.debugInvalidOptions||this.table.options.debugInvalidOptions)for(var i in e)n.hasOwnProperty(i)||console.warn("Invalid "+this.msgType+" option:",i);for(var i in n)i in e?n[i]=e[i]:Array.isArray(n[i])?n[i]=Object.assign([],n[i]):"object"==typeof n[i]&&null!==n[i]?n[i]=Object.assign({},n[i]):void 0===n[i]&&delete n[i];return n}}class gt extends a{constructor(t){super(t),this.elementVertical=t.rowManager.element,this.elementHorizontal=t.columnManager.element,this.tableElement=t.rowManager.tableElement,this.verticalFillMode="fit"}initialize(){}clearRows(){}clearColumns(){}reinitializeColumnWidths(t){}renderRows(){}renderColumns(){}rerenderRows(t){t&&t()}rerenderColumns(t,e){}renderRowCells(t){}rerenderRowCells(t,e){}scrollColumns(t,e){}scrollRows(t,e){}resize(){}scrollToRow(t){}scrollToRowNearestTop(t){}visibleRows(t){return[]}rows(){return this.table.rowManager.getDisplayRows()}styleRow(t,e){var n=t.getElement();e%2?(n.classList.add("tabulator-row-even"),n.classList.remove("tabulator-row-odd")):(n.classList.add("tabulator-row-odd"),n.classList.remove("tabulator-row-even"))}clear(){this.clearRows(),this.clearColumns()}render(){this.renderRows(),this.renderColumns()}rerender(t){this.rerenderRows(),this.rerenderColumns()}scrollToRowPosition(t,e,n){var i=this.rows().indexOf(t),r=t.getElement(),o=0;return new Promise(((a,s)=>{if(i>-1){if(void 0===n&&(n=this.table.options.scrollToRowIfVisible),!n&&l.elVisible(r)&&(o=l.elOffset(r).top-l.elOffset(this.elementVertical).top)>0&&o<this.elementVertical.clientHeight-r.offsetHeight)return!1;switch(void 0===e&&(e=this.table.options.scrollToRowPosition),"nearest"===e&&(e=this.scrollToRowNearestTop(t)?"top":"bottom"),this.scrollToRow(t),e){case"middle":case"center":this.elementVertical.scrollHeight-this.elementVertical.scrollTop==this.elementVertical.clientHeight?this.elementVertical.scrollTop=this.elementVertical.scrollTop+(r.offsetTop-this.elementVertical.scrollTop)-(this.elementVertical.scrollHeight-r.offsetTop)/2:this.elementVertical.scrollTop=this.elementVertical.scrollTop-this.elementVertical.clientHeight/2;break;case"bottom":this.elementVertical.scrollHeight-this.elementVertical.scrollTop==this.elementVertical.clientHeight?this.elementVertical.scrollTop=this.elementVertical.scrollTop-(this.elementVertical.scrollHeight-r.offsetTop)+r.offsetHeight:this.elementVertical.scrollTop=this.elementVertical.scrollTop-this.elementVertical.clientHeight+r.offsetHeight}a()}else console.warn("Scroll Error - Row not visible"),s("Scroll Error - Row not visible")}))}}class vt extends gt{constructor(t){super(t)}renderRowCells(t){t.cells.forEach((e=>{t.element.appendChild(e.getElement()),e.cellRendered()}))}reinitializeColumnWidths(t){t.forEach((function(t){t.reinitializeWidth()}))}}class yt extends gt{constructor(t){super(t),this.leftCol=0,this.rightCol=0,this.scrollLeft=0,this.vDomScrollPosLeft=0,this.vDomScrollPosRight=0,this.vDomPadLeft=0,this.vDomPadRight=0,this.fitDataColAvg=0,this.window=200,this.initialized=!1,this.columns=[]}initialize(){this.compatabilityCheck()}compatabilityCheck(){var t=this.options("columns"),e=!0;return"fitDataTable"==this.options("layout")&&(console.warn("Horizontal Vitrual DOM is not compatible with fitDataTable layout mode"),e=!1),this.options("responsiveLayout")&&(console.warn("Horizontal Vitrual DOM is not compatible with responsive columns"),e=!1),this.options("rtl")&&(console.warn("Horizontal Vitrual DOM is not currently compatible with RTL text direction"),e=!1),t&&t.find((t=>t.frozen))&&(console.warn("Horizontal Vitrual DOM is not compatible with frozen columns"),e=!1),e}renderColumns(t,e){this.dataChange()}scrollColumns(t,e){this.scrollLeft!=t&&(this.scrollLeft=t,this.scroll(t-(this.vDomScrollPosLeft+this.window)))}rerenderColumns(t,e){var n={cols:this.columns,leftCol:this.leftCol,rightCol:this.rightCol};if(!t||this.initialized){this.clear(),this.scrollLeft=this.elementVertical.scrollLeft,this.vDomScrollPosLeft=this.scrollLeft-this.window,this.vDomScrollPosRight=this.scrollLeft+this.elementVertical.clientWidth+this.window;var i=0;this.table.columnManager.columnsByIndex.forEach((t=>{var e={};if(t.visible){var n=t.getWidth();e.leftPos=i,e.rightPos=i+n,e.width=n,"fitData"===this.options("layout")&&(e.fitDataCheck=!0),i+n>this.vDomScrollPosLeft&&i<this.vDomScrollPosRight?(-1==this.leftCol&&(this.leftCol=this.columns.length,this.vDomPadLeft=i),this.rightCol=this.columns.length):-1!==this.leftCol&&(this.vDomPadRight+=n),this.columns.push(t),t.modules.vdomHoz=e,i+=n}})),this.tableElement.style.paddingLeft=this.vDomPadLeft+"px",this.tableElement.style.paddingRight=this.vDomPadRight+"px",this.initialized=!0,e||t&&!this.reinitChanged(n)||this.renitializeRows(),this.elementVertical.scrollLeft=this.scrollLeft}}renderRowCells(t){this.initialized?this.initializeRow(t):t.cells.forEach((e=>{t.element.appendChild(e.getElement()),e.cellRendered()}))}rerenderRowCells(t,e){this.reinitializeRow(t,e)}reinitializeColumnWidths(t){for(let t=this.leftCol;t<=this.rightCol;t++)this.columns[t].reinitializeWidth()}deinitialize(){this.initialized=!1}clear(){this.columns=[],this.leftCol=-1,this.rightCol=0,this.vDomScrollPosLeft=0,this.vDomScrollPosRight=0,this.vDomPadLeft=0,this.vDomPadRight=0}dataChange(){var t,e,n=!1,i=0,r=0;if("fitData"===this.options("layout")){if(this.table.columnManager.columnsByIndex.forEach((t=>{!t.definition.width&&t.visible&&(n=!0)})),n&&n&&this.table.rowManager.getDisplayRows().length&&(this.vDomScrollPosRight=this.scrollLeft+this.elementVertical.clientWidth+this.window,e=this.chain("rows-sample",[1],[],(()=>this.table.rowManager.getDisplayRows()[0]))[0])){t=e.getElement(),e.generateCells(),this.tableElement.appendChild(t);for(r=0;r<e.cells.length;r++){let n=e.cells[r];if(t.appendChild(n.getElement()),n.column.reinitializeWidth(),(i+=n.column.getWidth())>this.vDomScrollPosRight)break}for(t.parentNode.removeChild(t),this.fitDataColAvg=Math.floor(i/(r+1));r<this.table.columnManager.columnsByIndex.length;r++)this.table.columnManager.columnsByIndex[r].setWidth(this.fitDataColAvg);this.rerenderColumns(!1,!0)}}else"fitColumns"===this.options("layout")&&(this.layoutRefresh(),this.rerenderColumns(!1,!0))}reinitChanged(t){var e=!0;return t.cols.length!==this.columns.length||t.leftCol!==this.leftCol||t.rightCol!==this.rightCol||(t.cols.forEach(((t,n)=>{t!==this.columns[n]&&(e=!1)})),!e)}renitializeRows(){this.table.rowManager.getVisibleRows().forEach((t=>{this.reinitializeRow(t,!0)}))}scroll(t){this.vDomScrollPosLeft+=t,this.vDomScrollPosRight+=t,t>.8*this.elementVertical.clientWidth?this.rerenderColumns():t>0?(this.addColRight(),this.removeColLeft()):(this.addColLeft(),this.removeColRight())}colPositionAdjust(t,e,n){for(let i=t;i<e;i++){let t=this.columns[i];t.modules.vdomHoz.leftPos+=n,t.modules.vdomHoz.rightPos+=n}}addColRight(){var t=this.columns[this.rightCol+1];t&&t.modules.vdomHoz.leftPos<=this.vDomScrollPosRight&&(this.table.rowManager.getVisibleRows().forEach((e=>{if("group"!==e.type){var n=e.getCell(t);e.getElement().appendChild(n.getElement()),n.cellRendered()}})),this.fitDataColActualWidthCheck(t),this.rightCol++,this.rightCol>=this.columns.length-1?this.vDomPadRight=0:this.vDomPadRight-=t.getWidth(),this.tableElement.style.paddingRight=this.vDomPadRight+"px",this.addColRight())}addColLeft(){var t=this.columns[this.leftCol-1];t&&t.modules.vdomHoz.rightPos>=this.vDomScrollPosLeft&&(this.table.rowManager.getVisibleRows().forEach((e=>{if("group"!==e.type){var n=e.getCell(t);e.getElement().prepend(n.getElement()),n.cellRendered()}})),this.fitDataColActualWidthCheck(t),this.leftCol?this.vDomPadLeft-=t.getWidth():this.vDomPadLeft=0,this.tableElement.style.paddingLeft=this.vDomPadLeft+"px",this.leftCol--,this.addColLeft())}removeColRight(t){var e;(t=this.columns[this.rightCol])&&t.modules.vdomHoz.leftPos>this.vDomScrollPosRight&&(e=this.table.rowManager.getVisibleRows(),t.modules.vdomHoz.visible=!1,e.forEach((e=>{if("group"!==e.type){var n=e.getCell(t);e.getElement().removeChild(n.getElement())}})),this.vDomPadRight+=t.getWidth(),this.tableElement.style.paddingRight=this.vDomPadRight+"px",this.rightCol--,this.removeColRight())}removeColLeft(){var t=this.columns[this.leftCol];t&&t.modules.vdomHoz.rightPos<this.vDomScrollPosLeft&&(this.table.rowManager.getVisibleRows().forEach((e=>{if("group"!==e.type){var n=e.getCell(t);n.parentNode&&e.getElement().removeChild(n.getElement())}})),this.vDomPadLeft+=t.getWidth(),this.tableElement.style.paddingLeft=this.vDomPadLeft+"px",this.leftCol++,this.removeColLeft())}fitDataColActualWidthCheck(t){var e,n;t.modules.vdomHoz.fitDataCheck&&(t.reinitializeWidth(),(n=(e=t.getWidth())-t.modules.vdomHoz.width)&&(t.modules.vdomHoz.rightPos+=n,t.modules.vdomHoz.width=e,this.colPositionAdjust(this.rightCol+2,this.columns.length,n)),t.modules.vdomHoz.fitDataCheck=!1)}initializeRow(t){if("group"!==t.type){t.modules.vdomHoz={leftCol:this.leftCol,rightCol:this.rightCol};for(let e=this.leftCol;e<=this.rightCol;e++){let n=this.columns[e];if(n&&n.visible){let e=t.getCell(n);t.getElement().appendChild(e.getElement()),e.cellRendered()}}}}reinitializeRow(t,e){if("group"!==t.type&&(e||!t.modules.vdomHoz||t.modules.vdomHoz.leftCol!==this.leftCol||t.modules.vdomHoz.rightCol!==this.rightCol)){for(var n=t.getElement();n.firstChild;)n.removeChild(n.firstChild);this.initializeRow(t)}}}class bt extends a{constructor(t){super(t),this.blockHozScrollEvent=!1,this.headersElement=null,this.element=null,this.columns=[],this.columnsByIndex=[],this.columnsByField={},this.scrollLeft=0,this.optionsList=new mt(this.table,"column definition"),this.renderer=null}initialize(){this.initializeRenderer(),this.headersElement=this.createHeadersElement(),this.element=this.createHeaderElement(),this.element.insertBefore(this.headersElement,this.element.firstChild),this.subscribe("scroll-horizontal",this.scrollHorizontal.bind(this))}initializeRenderer(){var t,e={virtual:yt,basic:vt};(t="string"==typeof this.table.options.renderHorizontal?e[this.table.options.renderHorizontal]:this.table.options.renderHorizontal)?(this.renderer=new t(this.table,this.element,this.tableElement),this.renderer.initialize()):console.error("Unable to find matching renderer:",table.options.renderHorizontal)}createHeadersElement(){var t=document.createElement("div");return t.classList.add("tabulator-headers"),t.setAttribute("role","row"),t}createHeaderElement(){var t=document.createElement("div");return t.classList.add("tabulator-header"),t.setAttribute("role","rowgroup"),this.table.options.headerVisible||t.classList.add("tabulator-header-hidden"),t}getElement(){return this.element}getHeadersElement(){return this.headersElement}scrollHorizontal(t){var e=0,n=this.element.scrollWidth-this.table.element.clientWidth;this.element.scrollLeft=t,t>n?(e=t-n,this.element.style.marginLeft=-e+"px"):this.element.style.marginLeft=0,this.scrollLeft=t,this.renderer.scrollColumns(t)}generateColumnsFromRowData(t){var e,n,i=[],r=this.table.options.autoColumnsDefinitions;if(t&&t.length){for(var o in e=t[0]){let t={field:o,title:o},r=e[o];switch(typeof r){case"undefined":n="string";break;case"boolean":n="boolean";break;case"object":n=Array.isArray(r)?"array":"string";break;default:n=isNaN(r)||""===r?r.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)?"alphanum":"string":"number"}t.sorter=n,i.push(t)}if(r)switch(typeof r){case"function":this.table.options.columns=r.call(this.table,i);break;case"object":Array.isArray(r)?i.forEach((t=>{var e=r.find((e=>e.field===t.field));e&&Object.assign(t,e)})):i.forEach((t=>{r[t.field]&&Object.assign(t,r[t.field])})),this.table.options.columns=i}else this.table.options.columns=i;this.setColumns(this.table.options.columns)}}setColumns(t,e){for(;this.headersElement.firstChild;)this.headersElement.removeChild(this.headersElement.firstChild);this.columns=[],this.columnsByIndex=[],this.columnsByField={},this.dispatch("columns-loading"),t.forEach(((t,e)=>{this._addColumn(t)})),this._reIndexColumns(),this.dispatch("columns-loaded"),this.renderer.rerenderColumns(!1,!0),this.redraw(!0)}_addColumn(t,e,n){var i=new w(t,this),r=i.getElement(),o=n?this.findColumnIndex(n):n;if(n&&o>-1){var a=n.getTopColumn(),s=this.columns.indexOf(a),l=a.getElement();e?(this.columns.splice(s,0,i),l.parentNode.insertBefore(r,l)):(this.columns.splice(s+1,0,i),l.parentNode.insertBefore(r,l.nextSibling))}else e?(this.columns.unshift(i),this.headersElement.insertBefore(i.getElement(),this.headersElement.firstChild)):(this.columns.push(i),this.headersElement.appendChild(i.getElement()));return i.columnRendered(),i}registerColumnField(t){t.definition.field&&(this.columnsByField[t.definition.field]=t)}registerColumnPosition(t){this.columnsByIndex.push(t)}_reIndexColumns(){this.columnsByIndex=[],this.columns.forEach((function(t){t.reRegisterPosition()}))}verticalAlignHeaders(){var t=0;this.columns.forEach((e=>{var n;e.clearVerticalAlign(),(n=e.getHeight())>t&&(t=n)})),this.columns.forEach((e=>{e.verticalAlign(this.table.options.columnHeaderVertAlign,t)})),this.table.rowManager.adjustTableSize()}findColumn(t){if("object"!=typeof t)return this.columnsByField[t]||!1;if(t instanceof w)return t;if(t instanceof b)return t._getSelf()||!1;if("undefined"!=typeof HTMLElement&&t instanceof HTMLElement){return this.columns.find((e=>e.element===t))||!1}return!1}getColumnByField(t){return this.columnsByField[t]}getColumnsByFieldRoot(t){var e=[];return Object.keys(this.columnsByField).forEach((n=>{n.split(".")[0]===t&&e.push(this.columnsByField[n])})),e}getColumnByIndex(t){return this.columnsByIndex[t]}getFirstVisibileColumn(t){return(t=this.columnsByIndex.findIndex((t=>t.visible)))>-1&&this.columnsByIndex[t]}getColumns(){return this.columns}findColumnIndex(t){return this.columnsByIndex.findIndex((e=>t===e))}getRealColumns(){return this.columnsByIndex}traverse(t){this.columnsByIndex.forEach(((e,n)=>{t(e,n)}))}getDefinitions(t){var e=[];return this.columnsByIndex.forEach((n=>{(!t||t&&n.visible)&&e.push(n.getDefinition())})),e}getDefinitionTree(){var t=[];return this.columns.forEach((e=>{t.push(e.getDefinition(!0))})),t}getComponents(t){var e=[];return(t?this.columns:this.columnsByIndex).forEach((t=>{e.push(t.getComponent())})),e}getWidth(){var t=0;return this.columnsByIndex.forEach((e=>{e.visible&&(t+=e.getWidth())})),t}moveColumn(t,e,n){this.moveColumnActual(t,e,n),e.element.parentNode.insertBefore(t.element,e.element),n&&e.element.parentNode.insertBefore(e.element,t.element),this.verticalAlignHeaders(),this.table.rowManager.reinitialize()}moveColumnActual(t,e,n){t.parent.isGroup?this._moveColumnInArray(t.parent.columns,t,e,n):this._moveColumnInArray(this.columns,t,e,n),this._moveColumnInArray(this.columnsByIndex,t,e,n,!0),this.renderer.rerenderColumns(!0),this.dispatch("column-moved",t,e,n),this.subscribedExternal("columnMoved")&&this.dispatchExternal("columnMoved",t.getComponent(),this.table.columnManager.getComponents())}_moveColumnInArray(t,e,n,i,r){var o,a=t.indexOf(e);a>-1&&(t.splice(a,1),(o=t.indexOf(n))>-1?i&&(o+=1):o=a,t.splice(o,0,e),r&&(this.chain("column-moving-rows",[e,n,i],null,[])||[]).concat(this.table.rowManager.rows).forEach((function(t){if(t.cells.length){var e=t.cells.splice(a,1)[0];t.cells.splice(o,0,e)}})))}scrollToColumn(t,e,n){var i=0,r=0,o=0,a=t.getElement();return new Promise(((s,l)=>{if(void 0===e&&(e=this.table.options.scrollToColumnPosition),void 0===n&&(n=this.table.options.scrollToColumnIfVisible),t.visible){switch(e){case"middle":case"center":o=-this.element.clientWidth/2;break;case"right":o=a.clientWidth-this.headersElement.clientWidth}if(!n&&(r=a.offsetLeft)>0&&r+a.offsetWidth<this.element.clientWidth)return!1;i=a.offsetLeft+o,i=Math.max(Math.min(i,this.table.rowManager.element.scrollWidth-this.table.rowManager.element.clientWidth),0),this.table.rowManager.scrollHorizontal(i),this.scrollHorizontal(i),s()}else console.warn("Scroll Error - Column not visible"),l("Scroll Error - Column not visible")}))}generateCells(t){var e=[];return this.columnsByIndex.forEach((n=>{e.push(n.generateCell(t))})),e}getFlexBaseWidth(){var t=this.table.element.clientWidth,e=0;return this.table.rowManager.element.scrollHeight>this.table.rowManager.element.clientHeight&&(t-=this.table.rowManager.element.offsetWidth-this.table.rowManager.element.clientWidth),this.columnsByIndex.forEach((function(n){var i,r,o;n.visible&&(i=n.definition.width||0,r=parseInt(n.minWidth),o="string"==typeof i?i.indexOf("%")>-1?t/100*parseInt(i):parseInt(i):i,e+=o>r?o:r)})),e}addColumn(t,e,n){return new Promise(((i,r)=>{var o=this._addColumn(t,e,n);this._reIndexColumns(),this.dispatch("column-add",t,e,n),"fitColumns"!=this.layoutMode()&&o.reinitializeWidth(),this.redraw(!0),this.table.rowManager.reinitialize(),this.renderer.rerenderColumns(),i(o)}))}deregisterColumn(t){var e,n=t.getField();n&&delete this.columnsByField[n],(e=this.columnsByIndex.indexOf(t))>-1&&this.columnsByIndex.splice(e,1),(e=this.columns.indexOf(t))>-1&&this.columns.splice(e,1),this.verticalAlignHeaders(),this.redraw()}redraw(t){l.elVisible(this.element)&&this.verticalAlignHeaders(),t&&(this.table.rowManager.resetScroll(),this.table.rowManager.reinitialize()),this.confirm("table-redrawing",t)||this.layoutRefresh(),this.dispatch("table-redraw",t),this.table.footerManager.redraw()}}class _t extends gt{constructor(t){super(t),this.verticalFillMode="fill",this.scrollTop=0,this.scrollLeft=0,this.scrollTop=0,this.scrollLeft=0}clearRows(){for(var t=this.tableElement;t.firstChild;)t.removeChild(t.firstChild);t.scrollTop=0,t.scrollLeft=0,t.style.minWidth="",t.style.minHeight="",t.style.display="",t.style.visibility=""}renderRows(){var t=this.tableElement,e=!0;this.rows().forEach(((n,i)=>{this.styleRow(n,i),t.appendChild(n.getElement()),n.initialize(!0),"group"!==n.type&&(e=!1)})),t.style.minWidth=e?this.table.columnManager.getWidth()+"px":""}rerenderRows(t){this.render(),t&&t()}scrollToRowNearestTop(t){var e=l.elOffset(t.getElement()).top;return!(Math.abs(this.elementVertical.scrollTop-e)>Math.abs(this.elementVertical.scrollTop+this.elementVertical.clientHeight-e))}scrollToRow(t){var e=t.getElement();this.elementVertical.scrollTop=l.elOffset(e).top-l.elOffset(this.elementVertical).top+this.elementVertical.scrollTop}visibleRows(t){return this.rows()}}class wt extends gt{constructor(t){super(t),this.verticalFillMode="fill",this.scrollTop=0,this.scrollLeft=0,this.vDomRowHeight=20,this.vDomTop=0,this.vDomBottom=0,this.vDomScrollPosTop=0,this.vDomScrollPosBottom=0,this.vDomTopPad=0,this.vDomBottomPad=0,this.vDomMaxRenderChain=90,this.vDomWindowBuffer=0,this.vDomWindowMinTotalRows=20,this.vDomWindowMinMarginRows=5,this.vDomTopNewRows=[],this.vDomBottomNewRows=[]}clearRows(){for(var t=this.tableElement;t.firstChild;)t.removeChild(t.firstChild);t.style.paddingTop="",t.style.paddingBottom="",t.style.minWidth="",t.style.minHeight="",t.style.display="",t.style.visibility="",this.elementVertical.scrollTop=0,this.elementVertical.scrollLeft=0,this.scrollTop=0,this.scrollLeft=0,this.vDomTop=0,this.vDomBottom=0,this.vDomTopPad=0,this.vDomBottomPad=0,this.vDomScrollPosTop=0,this.vDomScrollPosBottom=0}renderRows(){this._virtualRenderFill()}rerenderRows(t){for(var e=this.elementVertical.scrollTop,n=!1,i=!1,r=this.table.rowManager.scrollLeft,o=this.rows(),a=this.vDomTop;a<=this.vDomBottom;a++)if(o[a]){var s=e-o[a].getElement().offsetTop;if(!(!1===i||Math.abs(s)<i))break;i=s,n=a}o.forEach((t=>{t.deinitializeHeight()})),t&&t(),this._virtualRenderFill(!1===n?this.rows.length-1:n,!0,i||0),this.scrollColumns(r)}scrollColumns(t){this.table.rowManager.scrollHorizontal(t)}scrollRows(t,e){var n=t-this.vDomScrollPosTop,i=t-this.vDomScrollPosBottom,r=2*this.vDomWindowBuffer,o=this.rows();if(this.scrollTop=t,-n>r||i>r){var a=this.table.rowManager.scrollLeft;this._virtualRenderFill(Math.floor(this.elementVertical.scrollTop/this.elementVertical.scrollHeight*o.length)),this.scrollColumns(a)}else e?(n<0&&this._addTopRow(o,-n),i<0&&(this.vDomScrollHeight-this.scrollTop>this.vDomWindowBuffer?this._removeBottomRow(o,-i):this.vDomScrollPosBottom=this.scrollTop)):(i>=0&&this._addBottomRow(o,i),n>=0&&(this.scrollTop>this.vDomWindowBuffer?this._removeTopRow(o,n):this.vDomScrollPosTop=this.scrollTop))}resize(){this.vDomWindowBuffer=this.table.options.renderVerticalBuffer||this.elementVertical.clientHeight}scrollToRowNearestTop(t){var e=this.rows().indexOf(t);return!(Math.abs(this.vDomTop-e)>Math.abs(this.vDomBottom-e))}scrollToRow(t){var e=this.rows().indexOf(t);e>-1&&this._virtualRenderFill(e,!0)}visibleRows(t){var e=this.elementVertical.scrollTop,n=this.elementVertical.clientHeight+e,i=!1,r=0,o=0,a=this.rows();if(t)r=this.vDomTop,o=this.vDomBottom;else for(var s=this.vDomTop;s<=this.vDomBottom;s++)if(a[s])if(i){if(!(n-a[s].getElement().offsetTop>=0))break;o=s}else if(e-a[s].getElement().offsetTop>=0)r=s;else{if(i=!0,!(n-a[s].getElement().offsetTop>=0))break;o=s}return a.slice(r,o+1)}_virtualRenderFill(t,e,n){var i=this.tableElement,r=this.elementVertical,o=0,a=0,s=0,u=0,c=0,h=this.rows(),d=h.length,f=this.elementVertical.clientHeight;if(n=n||0,t=t||0){for(;i.firstChild;)i.removeChild(i.firstChild);(s=(d-t+1)*this.vDomRowHeight)<f&&(t-=Math.ceil((f-s)/this.vDomRowHeight))<0&&(t=0),t-=o=Math.min(Math.max(Math.floor(this.vDomWindowBuffer/this.vDomRowHeight),this.vDomWindowMinMarginRows),t)}else this.clear();if(d&&l.elVisible(this.elementVertical)){for(this.vDomTop=t,this.vDomBottom=t-1;(a<=f+this.vDomWindowBuffer||c<this.vDomWindowMinTotalRows)&&this.vDomBottom<d-1;){var p,m=this.vDomBottom+1,g=h[m];this.styleRow(g,m),i.appendChild(g.getElement()),g.initialize(),g.heightInitialized||g.normalizeHeight(!0),p=g.getHeight(),c<o?u+=p:a+=p,p>this.vDomWindowBuffer&&(this.vDomWindowBuffer=2*p),this.vDomBottom++,c++}t?(this.vDomTopPad=e?this.vDomRowHeight*this.vDomTop+n:this.scrollTop-u,this.vDomBottomPad=this.vDomBottom==d-1?0:Math.max(this.vDomScrollHeight-this.vDomTopPad-a-u,0)):(this.vDomTopPad=0,this.vDomRowHeight=Math.floor((a+u)/c),this.vDomBottomPad=this.vDomRowHeight*(d-this.vDomBottom-1),this.vDomScrollHeight=u+a+this.vDomBottomPad-f),i.style.paddingTop=this.vDomTopPad+"px",i.style.paddingBottom=this.vDomBottomPad+"px",e&&(this.scrollTop=this.vDomTopPad+u+n-(this.elementVertical.scrollWidth>this.elementVertical.clientWidth?this.elementVertical.offsetHeight-f:0)),this.scrollTop=Math.min(this.scrollTop,this.elementVertical.scrollHeight-f),this.elementVertical.scrollWidth>this.elementVertical.offsetWidth&&e&&(this.scrollTop+=this.elementVertical.offsetHeight-f),this.vDomScrollPosTop=this.scrollTop,this.vDomScrollPosBottom=this.scrollTop,r.scrollTop=this.scrollTop,this.dispatch("render-virtual-fill")}}_addTopRow(t,e){for(var n=this.tableElement,i=[],r=0,o=this.vDomTop-1,a=0;this.vDomTop;){let s,l,u=t[o];if(!(u&&a<this.vDomMaxRenderChain))break;if(s=u.getHeight()||this.vDomRowHeight,l=u.initialized,!(e>=s))break;this.styleRow(u,o),n.insertBefore(u.getElement(),n.firstChild),u.initialized&&u.heightInitialized||i.push(u),u.initialize(),l||(s=u.getElement().offsetHeight,s>this.vDomWindowBuffer&&(this.vDomWindowBuffer=2*s)),e-=s,r+=s,this.vDomTop--,o--,a++}for(let t of i)t.clearCellHeight();this._quickNormalizeRowHeight(i),r&&(this.vDomTopPad-=r,this.vDomTopPad<0&&(this.vDomTopPad=o*this.vDomRowHeight),o<1&&(this.vDomTopPad=0),n.style.paddingTop=this.vDomTopPad+"px",this.vDomScrollPosTop-=r)}_removeTopRow(t,e){for(var n=[],i=0,r=0;;){let o,a=t[this.vDomTop];if(!(a&&r<this.vDomMaxRenderChain))break;if(o=a.getHeight()||this.vDomRowHeight,!(e>=o))break;this.vDomTop++,e-=o,i+=o,n.push(a),r++}for(let t of n){let e=t.getElement();e.parentNode&&e.parentNode.removeChild(e)}i&&(this.vDomTopPad+=i,this.tableElement.style.paddingTop=this.vDomTopPad+"px",this.vDomScrollPosTop+=this.vDomTop?i:i+this.vDomWindowBuffer)}_addBottomRow(t,e){for(var n=this.tableElement,i=[],r=0,o=this.vDomBottom+1,a=0;;){let s,l,u=t[o];if(!(u&&a<this.vDomMaxRenderChain))break;if(s=u.getHeight()||this.vDomRowHeight,l=u.initialized,!(e>=s))break;this.styleRow(u,o),n.appendChild(u.getElement()),u.initialized&&u.heightInitialized||i.push(u),u.initialize(),l||(s=u.getElement().offsetHeight,s>this.vDomWindowBuffer&&(this.vDomWindowBuffer=2*s)),e-=s,r+=s,this.vDomBottom++,o++,a++}for(let t of i)t.clearCellHeight();this._quickNormalizeRowHeight(i),r&&(this.vDomBottomPad-=r,(this.vDomBottomPad<0||o==t.length-1)&&(this.vDomBottomPad=0),n.style.paddingBottom=this.vDomBottomPad+"px",this.vDomScrollPosBottom+=r)}_removeBottomRow(t,e){for(var n=[],i=0,r=0;;){let o,a=t[this.vDomBottom];if(!(a&&r<this.vDomMaxRenderChain))break;if(o=a.getHeight()||this.vDomRowHeight,!(e>=o))break;this.vDomBottom--,e-=o,i+=o,n.push(a),r++}for(let t of n){let e=t.getElement();e.parentNode&&e.parentNode.removeChild(e)}i&&(this.vDomBottomPad+=i,this.vDomBottomPad<0&&(this.vDomBottomPad=0),this.tableElement.style.paddingBottom=this.vDomBottomPad+"px",this.vDomScrollPosBottom-=i)}_quickNormalizeRowHeight(t){for(let e of t)e.calcHeight();for(let e of t)e.setCellHeight()}}class xt extends a{constructor(t){super(t),this.element=this.createHolderElement(),this.tableElement=this.createTableElement(),this.heightFixer=this.createTableElement(),this.firstRender=!1,this.renderMode="virtual",this.fixedHeight=!1,this.rows=[],this.activeRowsPipeline=[],this.activeRows=[],this.activeRowsCount=0,this.displayRows=[],this.displayRowsCount=0,this.scrollTop=0,this.scrollLeft=0,this.rowNumColumn=!1,this.redrawBlock=!1,this.redrawBlockRestoreConfig=!1,this.redrawBlockRederInPosition=!1,this.dataPipeline=[],this.displayPipeline=[],this.renderer=null}createHolderElement(){var t=document.createElement("div");return t.classList.add("tabulator-tableholder"),t.setAttribute("tabindex",0),t.setAttribute("role","rowgroup"),t}createTableElement(){var t=document.createElement("div");return t.classList.add("tabulator-table"),t.setAttribute("role","rowgroup"),t}getElement(){return this.element}getTableElement(){return this.tableElement}getRowPosition(t,e){return e?this.activeRows.indexOf(t):this.rows.indexOf(t)}initialize(){this.initializeRenderer(),this.element.appendChild(this.tableElement),this.firstRender=!0,this.element.addEventListener("scroll",(()=>{var t=this.element.scrollLeft,e=this.scrollLeft>t,n=this.element.scrollTop,i=this.scrollTop>n;this.scrollLeft!=t&&(this.scrollLeft=t,this.dispatch("scroll-horizontal",t,e),this.dispatchExternal("scrollHorizontal",t,e)),this.scrollTop!=n&&(this.scrollTop=n,this.renderer.scrollRows(n,i),this.dispatch("scroll-vertical",n,i),this.dispatchExternal("scrollVertical",n,i))}))}findRow(t){if("object"!=typeof t){if(null==t)return!1;return this.rows.find((e=>e.data[this.table.options.index]==t))||!1}if(t instanceof M)return t;if(t instanceof x)return t._getSelf()||!1;if("undefined"!=typeof HTMLElement&&t instanceof HTMLElement){return this.rows.find((e=>e.getElement()===t))||!1}return!1}getRowFromDataObject(t){return this.rows.find((e=>e.data===t))||!1}getRowFromPosition(t,e){return e?this.activeRows[t]:this.rows[t]}scrollToRow(t,e,n){return this.renderer.scrollToRowPosition(t,e,n)}setData(t,e,n){return new Promise(((i,r)=>{e&&this.getDisplayRows().length?this.table.options.pagination?this._setDataActual(t,!0):this.reRenderInPosition((()=>{this._setDataActual(t)})):(this.table.options.autoColumns&&n&&this.table.initialized&&this.table.columnManager.generateColumnsFromRowData(t),this.resetScroll(),this._setDataActual(t)),i()}))}_setDataActual(t,e){this.dispatchExternal("dataProcessing",t),this._wipeElements(),Array.isArray(t)?(this.dispatch("data-processing",t),t.forEach(((t,e)=>{if(t&&"object"==typeof t){var n=new M(t,this);this.rows.push(n)}else console.warn("Data Loading Warning - Invalid row data detected and ignored, expecting object but received:",t)})),this.refreshActiveData(!1,!1,e),this.dispatch("data-processed",t),this.dispatchExternal("dataProcessed",t)):console.error("Data Loading Error - Unable to process data due to invalid data type \nExpecting: array \nReceived: ",typeof t,"\nData:     ",t)}_wipeElements(){this.dispatch("rows-wipe"),this.rows.forEach((t=>{t.wipe()})),this.rows=[],this.activeRows=[],this.activeRowsPipeline=[],this.activeRowsCount=0,this.displayRows=[],this.displayRowsCount=0,this.adjustTableSize()}deleteRow(t,e){var n=this.rows.indexOf(t),i=this.activeRows.indexOf(t);i>-1&&this.activeRows.splice(i,1),n>-1&&this.rows.splice(n,1),this.setActiveRows(this.activeRows),this.displayRowIterator((e=>{var n=e.indexOf(t);n>-1&&e.splice(n,1)})),e||this.reRenderInPosition(),this.regenerateRowNumbers(),this.dispatchExternal("rowDeleted",t.getComponent()),this.displayRowsCount||this._showPlaceholder(),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.getData())}addRow(t,e,n,i){var r=this.addRowActual(t,e,n,i);return this.dispatch("row-added",r,t,e,n),r}addRows(t,e,n){var i=[];return new Promise(((r,o)=>{e=this.findAddRowPos(e),Array.isArray(t)||(t=[t]),t.length,(void 0===n&&e||void 0!==n&&!e)&&t.reverse(),t.forEach(((r,o)=>{var a=this.addRow(r,e,n,!0);i.push(a),this.dispatch("row-added",a,t,e,n)})),this.refreshActiveData(!1,!1,!0),this.regenerateRowNumbers(),i.length&&this._clearPlaceholder(),r(i)}))}findAddRowPos(t){return void 0===t&&(t=this.table.options.addRowPos),"pos"===t&&(t=!0),"bottom"===t&&(t=!1),t}addRowActual(t,e,n,i){var r,o,a=t instanceof M?t:new M(t||{},this),s=this.findAddRowPos(e),l=-1;return n||(o=this.chain("row-adding-position",[a,s],null,{index:n,top:s}),n=o.index,s=o.top),void 0!==n&&(n=this.findRow(n)),(n=this.chain("row-adding-index",[a,n,s],null,n))&&(l=this.rows.indexOf(n)),n&&l>-1?(r=this.activeRows.indexOf(n),this.displayRowIterator((function(t){var e=t.indexOf(n);e>-1&&t.splice(s?e:e+1,0,a)})),r>-1&&this.activeRows.splice(s?r:r+1,0,a),this.rows.splice(s?l:l+1,0,a)):s?(this.displayRowIterator((function(t){t.unshift(a)})),this.activeRows.unshift(a),this.rows.unshift(a)):(this.displayRowIterator((function(t){t.push(a)})),this.activeRows.push(a),this.rows.push(a)),this.setActiveRows(this.activeRows),this.dispatchExternal("rowAdded",a.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()),i||this.reRenderInPosition(),a}moveRow(t,e,n){this.dispatch("row-move",t,e,n),this.moveRowActual(t,e,n),this.regenerateRowNumbers(),this.dispatch("row-moved",t,e,n),this.dispatchExternal("rowMoved",t.getComponent())}moveRowActual(t,e,n){this.moveRowInArray(this.rows,t,e,n),this.moveRowInArray(this.activeRows,t,e,n),this.displayRowIterator((i=>{this.moveRowInArray(i,t,e,n)})),this.dispatch("row-moving",t,e,n)}moveRowInArray(t,e,n,i){var r,o,a;if(e!==n&&((r=t.indexOf(e))>-1&&(t.splice(r,1),(o=t.indexOf(n))>-1?i?t.splice(o+1,0,e):t.splice(o,0,e):t.splice(r,0,e)),t===this.getDisplayRows())){a=o>r?o:r+1;for(let e=r<o?r:o;e<=a;e++)t[e]&&this.styleRow(t[e],e)}}clearData(){this.setData([])}getRowIndex(t){return this.findRowIndex(t,this.rows)}getDisplayRowIndex(t){var e=this.getDisplayRows().indexOf(t);return e>-1&&e}nextDisplayRow(t,e){var n=this.getDisplayRowIndex(t),i=!1;return!1!==n&&n<this.displayRowsCount-1&&(i=this.getDisplayRows()[n+1]),!i||i instanceof M&&"row"==i.type?i:this.nextDisplayRow(i,e)}prevDisplayRow(t,e){var n=this.getDisplayRowIndex(t),i=!1;return n&&(i=this.getDisplayRows()[n-1]),!e||!i||i instanceof M&&"row"==i.type?i:this.prevDisplayRow(i,e)}findRowIndex(t,e){var n;return!!((t=this.findRow(t))&&(n=e.indexOf(t))>-1)&&n}getData(t,e){var n=[];return this.getRows(t).forEach((function(t){"row"==t.type&&n.push(t.getData(e||"data"))})),n}getComponents(t){var e=[];return this.getRows(t).forEach((function(t){e.push(t.getComponent())})),e}getDataCount(t){return this.getRows(t).length}scrollHorizontal(t){this.scrollLeft=t,this.element.scrollLeft=t,this.dispatch("scroll-horizontal",t)}registerDataPipelineHandler(t,e){void 0!==e?(this.dataPipeline.push({handler:t,priority:e}),this.dataPipeline.sort(((t,e)=>t.priority-e.priority))):console.error("Data pipeline handlers must have a priority in order to be registered")}registerDisplayPipelineHandler(t,e){void 0!==e?(this.displayPipeline.push({handler:t,priority:e}),this.displayPipeline.sort(((t,e)=>t.priority-e.priority))):console.error("Display pipeline handlers must have a priority in order to be registered")}refreshActiveData(t,e,n){var i=this.table,r="",o=0,a=["all","dataPipeline","display","displayPipeline","end"];if("function"==typeof t)if((o=this.dataPipeline.findIndex((e=>e.handler===t)))>-1)r="dataPipeline",e&&(o==this.dataPipeline.length-1?r="display":o++);else{if(!((o=this.displayPipeline.findIndex((e=>e.handler===t)))>-1))return void console.error("Unable to refresh data, invalid handler provided",t);r="displayPipeline",e&&(o==this.displayPipeline.length-1?r="end":o++)}else r=t||"all",o=0;if(this.redrawBlock)(!this.redrawBlockRestoreConfig||this.redrawBlockRestoreConfig&&(this.redrawBlockRestoreConfig.stage===r&&o<this.redrawBlockRestoreConfig.index||a.indexOf(r)<a.indexOf(this.redrawBlockRestoreConfig.stage)))&&(this.redrawBlockRestoreConfig={handler:t,skipStage:e,renderInPosition:n,stage:r,index:o});else{switch(this.dispatch("data-refeshing"),t||(this.activeRowsPipeline[0]=this.rows.slice(0)),r){case"all":case"dataPipeline":for(let t=o;t<this.dataPipeline.length;t++){let e=this.dataPipeline[t].handler(this.activeRowsPipeline[t].slice(0));this.activeRowsPipeline[t+1]=e||this.activeRowsPipeline[t].slice(0)}this.setActiveRows(this.activeRowsPipeline[this.dataPipeline.length]),this.regenerateRowNumbers();case"display":o=0,this.resetDisplayRows();case"displayPipeline":for(let t=o;t<this.displayPipeline.length;t++){let e=this.displayPipeline[t].handler((t?this.getDisplayRows(t-1):this.activeRows).slice(0),n);this.setDisplayRows(e||this.getDisplayRows(t-1).slice(0),t)}}l.elVisible(this.element)&&(n?this.reRenderInPosition():(t||this.table.columnManager.renderer.renderColumns(),this.renderTable(),i.options.layoutColumnsOnNewData&&this.table.columnManager.redraw(!0))),this.dispatch("data-refeshed")}}regenerateRowNumbers(){this.rowNumColumn&&this.activeRows.forEach((t=>{var e=t.getCell(this.rowNumColumn);e&&e._generateContents()}))}setActiveRows(t){this.activeRows=t,this.activeRowsCount=this.activeRows.length}resetDisplayRows(){this.displayRows=[],this.displayRows.push(this.activeRows.slice(0)),this.displayRowsCount=this.displayRows[0].length}getNextDisplayIndex(){return this.displayRows.length}setDisplayRows(t,e){var n=!0;return e&&void 0!==this.displayRows[e]?(this.displayRows[e]=t,n=!0):(this.displayRows.push(t),n=e=this.displayRows.length-1),e==this.displayRows.length-1&&(this.displayRowsCount=this.displayRows[this.displayRows.length-1].length),n}getDisplayRows(t){return void 0===t?this.displayRows.length?this.displayRows[this.displayRows.length-1]:[]:this.displayRows[t]||[]}getVisibleRows(t){return this.renderer.visibleRows(!t)}displayRowIterator(t){this.activeRowsPipeline.forEach(t),this.displayRows.forEach(t),this.displayRowsCount=this.displayRows[this.displayRows.length-1].length}getRows(t){var e;switch(t){case"active":e=this.activeRows;break;case"display":e=this.table.rowManager.getDisplayRows();break;case"visible":e=this.getVisibleRows(!0);break;default:e=this.chain("rows-retrieve",t,null,this.rows)||this.rows}return e}reRenderInPosition(t){this.redrawBlock?t?t():this.redrawBlockRederInPosition=!0:this.renderer.rerenderRows(t)}initializeRenderer(){var t,e={virtual:wt,basic:_t};(t="string"==typeof this.table.options.renderVertical?e[this.table.options.renderVertical]:this.table.options.renderVertical)?(this.renderer=new t(this.table,this.element,this.tableElement),this.renderer.initialize(),this.table.element.clientHeight||this.table.options.height?this.fixedHeight=!0:this.fixedHeight=!1):console.error("Unable to find matching renderer:",table.options.renderVertical)}getRenderMode(){return this.renderMode}renderTable(){this.dispatchExternal("renderStarted"),this.element.scrollTop=0,this._clearTable(),this.displayRowsCount?(this.renderer.renderRows(),this.firstRender&&(this.firstRender=!1,this.layoutRefresh())):this.renderEmptyScroll(),this.fixedHeight||this.adjustTableSize(),this.dispatch("table-layout"),this.displayRowsCount||this._showPlaceholder(),this.dispatchExternal("renderComplete")}renderEmptyScroll(){this.table.options.placeholder?this.tableElement.style.display="none":this.tableElement.style.minWidth=this.table.columnManager.getWidth()+"px"}_clearTable(){this.tableElement;this._clearPlaceholder(),this.scrollTop=0,this.scrollLeft=0,this.renderer.clearRows()}_showPlaceholder(){this.table.options.placeholder&&(this.table.options.placeholder.setAttribute("tabulator-render-mode",this.renderMode),this.getElement().appendChild(this.table.options.placeholder),this.table.options.placeholder.style.width=this.table.columnManager.getWidth()+"px")}_clearPlaceholder(){this.table.options.placeholder&&this.table.options.placeholder.parentNode&&this.table.options.placeholder.parentNode.removeChild(this.table.options.placeholder)}styleRow(t,e){var n=t.getElement();e%2?(n.classList.add("tabulator-row-even"),n.classList.remove("tabulator-row-odd")):(n.classList.add("tabulator-row-odd"),n.classList.remove("tabulator-row-even"))}normalizeHeight(){this.activeRows.forEach((function(t){t.normalizeHeight()}))}adjustTableSize(){var t=this.element.clientHeight;if("fill"===this.renderer.verticalFillMode){let e=Math.floor(this.table.columnManager.getElement().getBoundingClientRect().height+(this.table.footerManager&&this.table.footerManager.active&&!this.table.footerManager.external?this.table.footerManager.getElement().getBoundingClientRect().height:0));this.fixedHeight?(this.element.style.minHeight="calc(100% - "+e+"px)",this.element.style.height="calc(100% - "+e+"px)",this.element.style.maxHeight="calc(100% - "+e+"px)"):(this.element.style.height="",this.element.style.height=this.table.element.clientHeight-e+"px",this.element.scrollTop=this.scrollTop),this.renderer.resize(),this.fixedHeight||t==this.element.clientHeight||(this.subscribed("table-resize")?this.dispatch("table-resize"):this.redraw())}}reinitialize(){this.rows.forEach((function(t){t.reinitialize(!0)}))}blockRedraw(){this.redrawBlock=!0,this.redrawBlockRestoreConfig=!1}restoreRedraw(){this.redrawBlock=!1,this.redrawBlockRestoreConfig?(this.refreshActiveData(this.redrawBlockRestoreConfig.handler,this.redrawBlockRestoreConfig.skipStage,this.redrawBlockRestoreConfig.renderInPosition),this.redrawBlockRestoreConfig=!1):this.redrawBlockRederInPosition&&this.reRenderInPosition(),this.redrawBlockRederInPosition=!1}redraw(t){var e=this.scrollLeft;this.adjustTableSize(),this.table.tableWidth=this.table.element.clientWidth,t?this.renderTable():(this.reRenderInPosition(),this.scrollHorizontal(e),this.displayRowsCount||this.table.options.placeholder&&this.getElement().appendChild(this.table.options.placeholder))}resetScroll(){if(this.element.scrollLeft=0,this.element.scrollTop=0,"ie"===this.table.browser){var t=document.createEvent("Event");t.initEvent("scroll",!1,!0),this.element.dispatchEvent(t)}else this.element.dispatchEvent(new Event("scroll"))}}class Mt extends a{constructor(t){super(t),this.active=!1,this.element=this.createElement(),this.external=!1,this.links=[],this.initializeElement()}initialize(){this.initializeElement()}createElement(){var t=document.createElement("div");return t.classList.add("tabulator-footer"),t}initializeElement(){if(this.table.options.footerElement)if("string"==typeof this.table.options.footerElement)"<"===this.table.options.footerElement[0]?this.element.innerHTML=this.table.options.footerElement:(this.external=!0,this.element=document.querySelector(this.table.options.footerElement));else this.element=this.table.options.footerElement}getElement(){return this.element}append(t,e){this.activate(e),this.element.appendChild(t),this.table.rowManager.adjustTableSize()}prepend(t,e){this.activate(e),this.element.insertBefore(t,this.element.firstChild),this.table.rowManager.adjustTableSize()}remove(t){t.parentNode.removeChild(t),this.deactivate()}deactivate(t){this.element.firstChild&&!t||(this.external||this.element.parentNode.removeChild(this.element),this.active=!1)}activate(t){this.active||(this.active=!0,this.external||(this.table.element.appendChild(this.getElement()),this.table.element.style.display="")),t&&this.links.push(t)}redraw(){this.links.forEach((function(t){t.footerRedraw()}))}}class Et extends a{constructor(t){super(t),this.el=this.table.element,this.abortClasses=["tabulator-headers","tabulator-table"],this.previousTargets={},this.listeners=["click","dblclick","contextmenu","mouseenter","mouseleave","mouseover","mouseout","mousemove","touchstart","touchend"],this.componentMap={"tabulator-cell":"cell","tabulator-row":"row","tabulator-group":"group","tabulator-col":"column"},this.buildListenerMap(),this.bindSubscriptionWatchers()}buildListenerMap(){var t={};this.listeners.forEach((e=>{t[e]={handler:null,components:[]}})),this.listeners=t}bindSubscriptionWatchers(){var t=Object.keys(this.listeners),e=Object.values(this.componentMap);for(let n of e)for(let e of t){let t=n+"-"+e;this.subscriptionChange(t,this.subscriptionChanged.bind(this,n,e))}}subscriptionChanged(t,e,n){var i=this.listeners[e].components,r=i.indexOf(t),o=!1;n?-1===r&&(i.push(t),o=!0):this.subscribed(t+"-"+e)||r>-1&&(i.splice(r,1),o=!0),o&&this.updateEventListeners()}updateEventListeners(){for(let t in this.listeners){let e=this.listeners[t];e.components.length?e.handler||(e.handler=this.track.bind(this,t),this.el.addEventListener(t,e.handler)):e.handler&&(this.el.removeEventListener(t,e.handler),e.handler=null)}}track(t,e){var n=e.composedPath&&e.composedPath()||e.path,i=this.findTargets(n);i=this.bindComponents(t,i),this.triggerEvents(t,e,i)}findTargets(t){var e={};let n=Object.keys(this.componentMap);for(let i of t){let t=i.classList?[...i.classList]:[];if(t.filter((t=>this.abortClasses.includes(t))).length)break;let r=t.filter((t=>n.includes(t)));for(let t of r)e[this.componentMap[t]]=i}return e.group&&e.group===e.row&&delete e.row,e}bindComponents(t,e){var n=Object.keys(e).reverse(),i=this.listeners[t],r={};for(let t of n){let n,o=e[t],a=this.previousTargets[t];if(a&&a.target===o)n=a.component;else switch(t){case"row":case"group":if(i.components.includes("row")||i.components.includes("cell")){n=this.table.rowManager.getVisibleRows().find((t=>t.getElement()===o))}break;case"column":i.components.includes("column")&&(n=this.table.columnManager.findColumn(o));break;case"cell":i.components.includes("cell")&&(n=e.row.findCell(o))}n&&(e[t]=n,r[t]={target:o,component:n})}return this.previousTargets=r,e}triggerEvents(t,e,n){var i=this.listeners[t];for(let r in n)n[r]&&i.components.includes(r)&&this.dispatch(r+"-"+t,e,n[r])}}class St{constructor(t){this.table=t,this.bindings={}}bind(t,e,n){this.bindings[t]||(this.bindings[t]={}),this.bindings[t][e]?console.warn("Unable to bind component handler, a matching function name is already bound",t,e,hanlder):this.bindings[t][e]=n}handle(t,e,n){if(this.bindings[t]&&this.bindings[t][n])return this.bindings[t][n].bind(null,e);"then"===n||"string"!=typeof n||n.startsWith("_")||console.error("The "+t+" component does not have a "+n+" function, have you checked that you have the correct Tabulator module installed?")}}class kt extends a{constructor(t){super(t),this.loaderElement=this.createLoaderElement(),this.msgElement=this.createMsgElement(),this.loadingElement=null,this.errorElement=null,this.requestOrder=0,this.loading=!1}initialize(){var t;this.loaderElement.appendChild(this.msgElement),this.table.options.dataLoaderLoading&&("string"==typeof this.table.options.dataLoaderLoading?((t=document.createElement("template")).innerHTML=this.table.options.dataLoaderLoading.trim(),this.loadingElement=t.firstElementChild):this.loadingElement=this.table.options.dataLoaderLoading),this.table.options.dataLoaderError&&("string"==typeof this.table.options.dataLoaderError?((t=document.createElement("template")).innerHTML=this.table.options.dataLoaderError.trim(),this.errorElement=t.firstElementChild):this.errorElement=this.table.options.dataLoaderError)}createLoaderElement(){var t=document.createElement("div");return t.classList.add("tabulator-loader"),t}createMsgElement(){var t=document.createElement("div");return t.classList.add("tabulator-loader-msg"),t.setAttribute("role","alert"),t}load(t,e,n,i,r){var o=++this.requestOrder;if(this.dispatchExternal("dataLoading",t),!t||0!=t.indexOf("{")&&0!=t.indexOf("[")||(t=JSON.parse(t)),this.confirm("data-loading",t,e,n,r)){this.loading=!0,r||this.showLoader();e=this.chain("data-params",[t,n,r],e||{},{});return e=this.mapParams(e,this.table.options.dataSendParams),this.chain("data-load",[t,e,n,r],Promise.resolve([])).then((t=>{Array.isArray(t)||"object"!=typeof t||(t=this.mapParams(t,this.objectInvert(this.table.options.dataReceiveParams)));var e=this.chain("data-loaded",t,null,t);o==this.requestOrder?(this.hideLoader(),!1!==e&&(this.dispatchExternal("dataLoaded",e),this.table.rowManager.setData(e,i,!i))):console.warn("Data Load Response Blocked - An active data load request was blocked by an attempt to change table data while the request was being made")})).catch((t=>{console.error("Data Load Error: ",t),this.dispatchExternal("dataLoadError",t),r||this.showError(),setTimeout((()=>{this.hideLoader()}),3e3)})).finally((()=>{this.loading=!1}))}return this.dispatchExternal("dataLoaded",t),t||(t=[]),this.table.rowManager.setData(t,i,!i),Promise.resolve()}mapParams(t,e){var n={};for(let i in t)n[e.hasOwnProperty(i)?e[i]:i]=t[i];return n}objectInvert(t){var e={};for(let n in t)e[t[n]]=n;return e}blockActiveLoad(){this.requestOrder++}showLoader(){if("function"==typeof this.table.options.dataLoader?this.table.options.dataLoader():this.table.options.dataLoader){for(this.hideLoader();this.msgElement.firstChild;)this.msgElement.removeChild(this.msgElement.firstChild);this.msgElement.classList.remove("tabulator-error"),this.msgElement.classList.add("tabulator-loading"),this.loadingElement?this.msgElement.appendChild(this.loadingElement):this.msgElement.innerHTML=this.langText("data|loading"),this.table.element.appendChild(this.loaderElement)}}showError(){for(this.hideLoader();this.msgElement.firstChild;)this.msgElement.removeChild(this.msgElement.firstChild);this.msgElement.classList.remove("tabulator-loading"),this.msgElement.classList.add("tabulator-error"),this.errorElement?this.msgElement.appendChild(this.errorElement):this.msgElement.innerHTML=this.langText("data|error"),this.table.element.appendChild(this.loaderElement)}hideLoader(){this.loaderElement.parentNode&&this.loaderElement.parentNode.removeChild(this.loaderElement)}}class Ct{constructor(t,e,n){this.table=t,this.events={},this.optionsList=e||{},this.subscriptionNotifiers={},this.dispatch=n?this._debugDispatch.bind(this):this._dispatch.bind(this),this.debug=n}subscriptionChange(t,e){this.subscriptionNotifiers[t]||(this.subscriptionNotifiers[t]=[]),this.subscriptionNotifiers[t].push(e),this.subscribed(t)&&this._notifiySubscriptionChange(t,!0)}subscribe(t,e){this.events[t]||(this.events[t]=[]),this.events[t].push(e),this._notifiySubscriptionChange(t,!0)}unsubscribe(t,e){var n;if(this.events[t]){if(e){if(!((n=this.events[t].findIndex((t=>t===e)))>-1))return void console.warn("Cannot remove event, no matching event found:",t,e);this.events[t].splice(n,1)}else delete this.events[t];this._notifiySubscriptionChange(t,!1)}else console.warn("Cannot remove event, no events set on:",t)}subscribed(t){return this.events[t]&&this.events[t].length}_notifiySubscriptionChange(t,e){var n=this.subscriptionNotifiers[t];n&&n.forEach((t=>{t(e)}))}_dispatch(){var t,e=Array.from(arguments),n=e.shift();return this.events[n]&&this.events[n].forEach(((n,i)=>{let r=n.apply(this.table,e);i||(t=r)})),t}_debugDispatch(){var t=Array.from(arguments),e=t[0];return t[0]="ExternalEvent:"+t[0],(!0===this.debug||this.debug.includes(e))&&console.log(...t),this._dispatch(...arguments)}}class Tt{constructor(t){this.events={},this.subscriptionNotifiers={},this.dispatch=t?this._debugDispatch.bind(this):this._dispatch.bind(this),this.chain=t?this._debugChain.bind(this):this._chain.bind(this),this.confirm=t?this._debugConfirm.bind(this):this._confirm.bind(this),this.debug=t}subscriptionChange(t,e){this.subscriptionNotifiers[t]||(this.subscriptionNotifiers[t]=[]),this.subscriptionNotifiers[t].push(e),this.subscribed(t)&&this._notifiySubscriptionChange(t,!0)}subscribe(t,e,n=1e4){this.events[t]||(this.events[t]=[]),this.events[t].push({callback:e,priority:n}),this.events[t].sort(((t,e)=>t.priority-e.priority)),this._notifiySubscriptionChange(t,!0)}unsubscribe(t,e){var n;if(this.events[t]){if(e){if(!((n=this.events[t].findIndex((t=>t.callback===e)))>-1))return void console.warn("Cannot remove event, no matching event found:",t,e);this.events[t].splice(n,1)}this._notifiySubscriptionChange(t,!1)}else console.warn("Cannot remove event, no events set on:",t)}subscribed(t){return this.events[t]&&this.events[t].length}_chain(t,e,n,i){var r=n;return Array.isArray(e)||(e=[e]),this.subscribed(t)?(this.events[t].forEach(((t,n)=>{r=t.callback.apply(this,e.concat([r]))})),r):"function"==typeof i?i():i}_confirm(t,e){var n=!1;return Array.isArray(e)||(e=[e]),this.subscribed(t)&&this.events[t].forEach(((t,i)=>{t.callback.apply(this,e)&&(n=!0)})),n}_notifiySubscriptionChange(t,e){var n=this.subscriptionNotifiers[t];n&&n.forEach((t=>{t(e)}))}_dispatch(){var t=Array.from(arguments),e=t.shift();this.events[e]&&this.events[e].forEach((e=>{e.callback.apply(this,t)}))}_debugDispatch(){var t=Array.from(arguments),e=t[0];return t[0]="InternalEvent:"+e,(!0===this.debug||this.debug.includes(e))&&console.log(...t),this._dispatch(...arguments)}_debugChain(){var t=Array.from(arguments),e=t[0];return t[0]="InternalEvent:"+e,(!0===this.debug||this.debug.includes(e))&&console.log(...t),this._chain(...arguments)}_debugConfirm(){var t=Array.from(arguments),e=t[0];return t[0]="InternalEvent:"+e,(!0===this.debug||this.debug.includes(e))&&console.log(...t),this._confirm(...arguments)}}class Dt{static register(t){Dt.tables.push(t)}static deregister(t){var e=Dt.tables.indexOf(t);e>-1&&Dt.tables.splice(e,1)}static lookupTable(t,e){var n,i,r=[];if("string"==typeof t){if((n=document.querySelectorAll(t)).length)for(var o=0;o<n.length;o++)(i=Dt.matchElement(n[o]))&&r.push(i)}else"undefined"!=typeof HTMLElement&&t instanceof HTMLElement||t instanceof Yt?(i=Dt.matchElement(t))&&r.push(i):Array.isArray(t)?t.forEach((function(t){r=r.concat(Dt.lookupTable(t))})):e||console.warn("Table Connection Error - Invalid Selector",t);return r}static matchElement(t){return Dt.tables.find((function(e){return t instanceof Yt?e===t:e.element===t}))}}function Lt(t){t.forEach((function(t){t.reinitializeWidth()})),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()}Dt.tables=[];var At={fitData:function(t){this.table.columnManager.renderer.reinitializeColumnWidths(t),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()},fitDataFill:Lt,fitDataTable:Lt,fitDataStretch:function(t){var e=0,n=this.table.rowManager.element.clientWidth,i=0,r=!1;t.forEach(((t,n)=>{t.widthFixed||t.reinitializeWidth(),(this.table.options.responsiveLayout?t.modules.responsive.visible:t.visible)&&(r=t),t.visible&&(e+=t.getWidth())})),r?(i=n-e+r.getWidth(),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&(r.setWidth(0),this.table.modules.responsiveLayout.update()),i>0?r.setWidth(i):r.reinitializeWidth()):this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()},fitColumns:function(t){var e,n,i=this.table.element.clientWidth,r=0,o=0,a=0,s=[],l=[],u=0,c=0;function h(t){return"string"==typeof t?t.indexOf("%")>-1?i/100*parseInt(t):parseInt(t):t}function d(t,e,n,i){var r=[],o=0,s=0,l=0,u=a,c=0,f=0,p=[];function m(t){return n*(t.column.definition.widthGrow||1)}function g(t){return h(t.width)-n*(t.column.definition.widthShrink||0)}return t.forEach((function(t,o){var a=i?g(t):m(t);t.column.minWidth>=a?r.push(t):t.column.maxWidth&&t.column.maxWidth<a?(t.width=t.column.maxWidth,e-=t.column.maxWidth,(u-=i?t.column.definition.widthShrink||1:t.column.definition.widthGrow||1)&&(n=Math.floor(e/u))):(p.push(t),f+=i?t.column.definition.widthShrink||1:t.column.definition.widthGrow||1)})),r.length?(r.forEach((function(t){o+=i?t.width-t.column.minWidth:t.column.minWidth,t.width=t.column.minWidth})),c=(s=e-o)-(l=f?Math.floor(s/f):s)*f,c+=d(p,s,l,i)):(c=f?e-Math.floor(e/f)*f:e,p.forEach((function(t){t.width=i?g(t):m(t)}))),c}this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update(),this.table.rowManager.element.scrollHeight>this.table.rowManager.element.clientHeight&&(i-=this.table.rowManager.element.offsetWidth-this.table.rowManager.element.clientWidth),t.forEach((function(t){var e,n,i;t.visible&&(e=t.definition.width,n=parseInt(t.minWidth),e?(i=h(e),r+=i>n?i:n,t.definition.widthShrink&&(l.push({column:t,width:i>n?i:n}),u+=t.definition.widthShrink)):(s.push({column:t,width:0}),a+=t.definition.widthGrow||1))})),o=i-r,e=Math.floor(o/a),c=d(s,o,e,!1),s.length&&c>0&&(s[s.length-1].width+=+c),s.forEach((function(t){o-=t.width})),(n=Math.abs(c)+o)>0&&u&&(c=d(l,n,Math.floor(n/u),!0)),l.length&&(l[l.length-1].width-=c),s.forEach((function(t){t.column.setWidth(t.width)})),l.forEach((function(t){t.column.setWidth(t.width)}))}};class Ot extends s{constructor(t){super(t,"layout"),this.mode=null,this.registerTableOption("layout","fitData"),this.registerTableOption("layoutColumnsOnNewData",!1),this.registerColumnOption("widthGrow"),this.registerColumnOption("widthShrink")}initialize(){var t=this.table.options.layout;Ot.modes[t]?this.mode=t:(console.warn("Layout Error - invalid mode set, defaulting to 'fitData' : "+t),this.mode="fitData"),this.table.element.setAttribute("tabulator-layout",this.mode)}getMode(){return this.mode}layout(){Ot.modes[this.mode].call(this,this.table.columnManager.columnsByIndex),this.dispatch("layout-refreshed")}}Ot.moduleName="layout",Ot.modes=At;class Pt extends s{constructor(t){super(t),this.locale="default",this.lang=!1,this.bindings={},this.langList={},this.registerTableOption("locale",!1),this.registerTableOption("langs",{})}initialize(){this.langList=l.deepClone(Pt.langs),!1!==this.table.options.columnDefaults.headerFilterPlaceholder&&this.setHeaderFilterPlaceholder(this.table.options.columnDefaults.headerFilterPlaceholder);for(let t in this.table.options.langs)this.installLang(t,this.table.options.langs[t]);this.setLocale(this.table.options.locale),this.registerTableFunction("setLocale",this.setLocale.bind(this)),this.registerTableFunction("getLocale",this.getLocale.bind(this)),this.registerTableFunction("getLang",this.getLang.bind(this))}setHeaderFilterPlaceholder(t){this.langList.default.headerFilters.default=t}setHeaderFilterColumnPlaceholder(t,e){this.langList.default.headerFilters.columns[t]=e,this.lang&&!this.lang.headerFilters.columns[t]&&(this.lang.headerFilters.columns[t]=e)}installLang(t,e){this.langList[t]?this._setLangProp(this.langList[t],e):this.langList[t]=e}_setLangProp(t,e){for(let n in e)t[n]&&"object"==typeof t[n]?this._setLangProp(t[n],e[n]):t[n]=e[n]}setLocale(t){if(!0===(t=t||"default")&&navigator.language&&(t=navigator.language.toLowerCase()),t&&!this.langList[t]){let e=t.split("-")[0];this.langList[e]?(console.warn("Localization Error - Exact matching locale not found, using closest match: ",t,e),t=e):(console.warn("Localization Error - Matching locale not found, using default: ",t),t="default")}this.locale=t,this.lang=l.deepClone(this.langList.default||{}),"default"!=t&&function t(e,n){for(var i in e)"object"==typeof e[i]?(n[i]||(n[i]={}),t(e[i],n[i])):n[i]=e[i]}(this.langList[t],this.lang),this.dispatchExternal("localized",this.locale,this.lang),this._executeBindings()}getLocale(t){return this.locale}getLang(t){return t?this.langList[t]:this.lang}getText(t,e){var n=(t=e?t+"|"+e:t).split("|");return this._getLangElement(n,this.locale)||""}_getLangElement(t,e){var n=this.lang;return t.forEach((function(t){var e;n&&(e=n[t],n=void 0!==e&&e)})),n}bind(t,e){this.bindings[t]||(this.bindings[t]=[]),this.bindings[t].push(e),e(this.getText(t),this.lang)}_executeBindings(){for(let t in this.bindings)this.bindings[t].forEach((e=>{e(this.getText(t),this.lang)}))}}Pt.moduleName="localize",Pt.langs={default:{groups:{item:"item",items:"items"},columns:{},data:{loading:"Loading",error:"Error"},pagination:{page_size:"Page Size",page_title:"Show Page",first:"First",first_title:"First Page",last:"Last",last_title:"Last Page",prev:"Prev",prev_title:"Prev Page",next:"Next",next_title:"Next Page",all:"All"},headerFilters:{default:"filter column...",columns:{}}}};class It extends s{constructor(t){super(t)}initialize(){this.registerTableFunction("tableComms",this.receive.bind(this))}getConnections(t){var e=[];return Dt.lookupTable(t).forEach((t=>{this.table!==t&&e.push(t)})),e}send(t,e,n,i){var r=this.getConnections(t);r.forEach((t=>{t.tableComms(this.table.element,e,n,i)})),!r.length&&t&&console.warn("Table Connection Error - No tables matching selector found",t)}receive(t,e,n,i){if(this.table.modExists(e))return this.table.modules[e].commsReceived(t,n,i);console.warn("Inter-table Comms Error - no such module:",e)}}It.moduleName="comms";var Nt=Object.freeze({__proto__:null,LayoutModule:Ot,LocalizeModule:Pt,CommsModule:It});class Rt{constructor(t,e){this.bindStaticFuctionality(t),this.bindModules(t,Nt,!0),e&&this.bindModules(t,e)}bindStaticFuctionality(t){t.moduleBindings={},t.extendModule=function(e,n,i){if(t.moduleBindings[e]){var r=t.moduleBindings[e][n];if(r)if("object"==typeof i)for(let t in i)r[t]=i[t];else console.warn("Module Error - Invalid value type, it must be an object");else console.warn("Module Error - property does not exist:",n)}else console.warn("Module Error - module does not exist:",e)},t.registerModule=function(e){Array.isArray(e)||(e=[e]),e.forEach((e=>{t.registerModuleBinding(e)}))},t.registerModuleBinding=function(e){t.moduleBindings[e.moduleName]=e},t.findTable=function(t){var e=Dt.lookupTable(t,!0);return!(Array.isArray(e)&&!e.length)&&e},t.prototype.bindModules=function(){for(var e in this.modules={},t.moduleBindings){let n=t.moduleBindings[e];this.modules[e]=new n(this),n.prototype.moduleCore?this.modulesCore[e]=this.modules[e]:this.modulesRegular[e]=this.modules[e]}}}bindModules(t,e,n){var i=Object.values(e);n&&i.forEach((t=>{t.prototype.moduleCore=!0})),t.registerModule(i)}}class Yt{constructor(t,e){this.options={},this.columnManager=null,this.rowManager=null,this.footerManager=null,this.vdomHoz=null,this.externalEvents=null,this.eventBus=null,this.interactionMonitor=!1,this.browser="",this.browserSlow=!1,this.browserMobile=!1,this.rtl=!1,this.originalElement=null,this.componentFunctionBinder=new St(this),this.dataLoader=!1,this.modules={},this.modulesCore={},this.modulesRegular={},this.optionsList=new mt(this,"table constructor"),this.initialized=!1,this.initializeElement(t)&&(this.initialzeCoreSystems(e),setTimeout((()=>{this._create()}))),Dt.register(this)}initializeElement(t){return"undefined"!=typeof HTMLElement&&t instanceof HTMLElement?(this.element=t,!0):"string"==typeof t?(this.element=document.querySelector(t),!!this.element||(console.error("Tabulator Creation Error - no element found matching selector: ",t),!1)):(console.error("Tabulator Creation Error - Invalid element provided:",t),!1)}initialzeCoreSystems(t){this.columnManager=new bt(this),this.rowManager=new xt(this),this.footerManager=new Mt(this),this.dataLoader=new kt(this),this.bindModules(),this.options=this.optionsList.generate(Yt.defaultOptions,t),this._clearObjectPointers(),this._mapDepricatedFunctionality(),this.externalEvents=new Ct(this,this.options,this.options.debugEventsExternal),this.eventBus=new Tt(this.options.debugEventsInternal),this.interactionMonitor=new Et(this),this.dataLoader.initialize(),this.columnManager.initialize(),this.rowManager.initialize(),this.footerManager.initialize()}_mapDepricatedFunctionality(){}_clearSelection(){this.element.classList.add("tabulator-block-select"),window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty(),this.element.classList.remove("tabulator-block-select")}_create(){this.externalEvents.dispatch("tableBuilding"),this.eventBus.dispatch("table-building"),this._rtlCheck(),this._buildElement(),this._initializeTable(),this._loadInitialData(),this.initialized=!0,this.externalEvents.dispatch("tableBuilt")}_rtlCheck(){var t=window.getComputedStyle(this.element);switch(this.options.textDirection){case"auto":if("rtl"!==t.direction)break;case"rtl":this.element.classList.add("tabulator-rtl"),this.rtl=!0;break;case"ltr":this.element.classList.add("tabulator-ltr");default:this.rtl=!1}}_clearObjectPointers(){this.options.columns=this.options.columns.slice(0),this.options.data&&!this.options.reactiveData&&(this.options.data=this.options.data.slice(0))}_buildElement(){var t,e=this.element,n=this.options;if("TABLE"===e.tagName){this.originalElement=this.element,t=document.createElement("div");var i=e.attributes;for(var r in i)"object"==typeof i[r]&&t.setAttribute(i[r].name,i[r].value);e.parentNode.replaceChild(t,e),this.element=e=t}for(e.classList.add("tabulator"),e.setAttribute("role","grid");e.firstChild;)e.removeChild(e.firstChild);n.height&&(n.height=isNaN(n.height)?n.height:n.height+"px",e.style.height=n.height),!1!==n.minHeight&&(n.minHeight=isNaN(n.minHeight)?n.minHeight:n.minHeight+"px",e.style.minHeight=n.minHeight),!1!==n.maxHeight&&(n.maxHeight=isNaN(n.maxHeight)?n.maxHeight:n.maxHeight+"px",e.style.maxHeight=n.maxHeight)}_initializeTable(){var t=this.element,e=this.options;this.columnManager.initialize(),this.rowManager.initialize(),this._detectBrowser();for(let t in this.modulesCore){this.modulesCore[t].initialize()}if("string"==typeof e.placeholder){var n=document.createElement("div");n.classList.add("tabulator-placeholder");var i=document.createElement("span");i.innerHTML=e.placeholder,n.appendChild(i),e.placeholder=n}t.appendChild(this.columnManager.getElement()),t.appendChild(this.rowManager.getElement()),e.footerElement&&this.footerManager.activate(),e.autoColumns&&e.data&&this.columnManager.generateColumnsFromRowData(this.options.data);for(let t in this.modulesRegular){this.modulesRegular[t].initialize()}this.columnManager.setColumns(e.columns),this.eventBus.dispatch("table-built")}_loadInitialData(){this.dataLoader.load(this.options.data)}destroy(){var t=this.element;for(Dt.deregister(this),this.eventBus.dispatch("table-destroy"),this.rowManager.rows.forEach((function(t){t.wipe()})),this.rowManager.rows=[],this.rowManager.activeRows=[],this.rowManager.displayRows=[];t.firstChild;)t.removeChild(t.firstChild);t.classList.remove("tabulator")}_detectBrowser(){var t=navigator.userAgent||navigator.vendor||window.opera;t.indexOf("Trident")>-1?(this.browser="ie",this.browserSlow=!0):t.indexOf("Edge")>-1?(this.browser="edge",this.browserSlow=!0):t.indexOf("Firefox")>-1?(this.browser="firefox",this.browserSlow=!1):(this.browser="other",this.browserSlow=!1),this.browserMobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}blockRedraw(){return this.rowManager.blockRedraw()}restoreRedraw(){return this.rowManager.restoreRedraw()}setDataFromLocalFile(t){return new Promise(((e,n)=>{var i=document.createElement("input");i.type="file",i.accept=t||".json,application/json",i.addEventListener("change",(t=>{var r,o=i.files[0],a=new FileReader;a.readAsText(o),a.onload=t=>{try{r=JSON.parse(a.result)}catch(t){return console.warn("File Load Error - File contents is invalid JSON",t),void n(t)}this.setData(r).then((t=>{e(t)})).catch((t=>{e(t)}))},a.onerror=t=>{console.warn("File Load Error - Unable to read file"),n()}})),i.click()}))}setData(t,e,n){if(this.initialized)return this.dataLoader.load(t,e,n,!1);console.warn("setData failed - table not yet initialized. To set initial data please use the 'data' property in the table constructor.")}clearData(){this.dataLoader.blockActiveLoad(),this.rowManager.clearData()}getData(t){return this.rowManager.getData(t)}getDataCount(t){return this.rowManager.getDataCount(t)}replaceData(t,e,n){if(this.initialized)return this.dataLoader.load(t,e,n,!0,!0);console.warn("replaceData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}updateData(t){var e=0;if(this.initialized)return new Promise(((n,i)=>{this.dataLoader.blockActiveLoad(),"string"==typeof t&&(t=JSON.parse(t)),t?t.forEach((t=>{var i=this.rowManager.findRow(t[this.options.index]);i&&(e++,i.updateData(t).then((()=>{--e||n()})))})):(console.warn("Update Error - No data provided"),i("Update Error - No data provided"))}));console.warn("updateData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}addData(t,e,n){if(this.initialized)return new Promise(((i,r)=>{this.dataLoader.blockActiveLoad(),"string"==typeof t&&(t=JSON.parse(t)),t?this.rowManager.addRows(t,e,n).then((t=>{var e=[];t.forEach((function(t){e.push(t.getComponent())})),i(e)})):(console.warn("Update Error - No data provided"),r("Update Error - No data provided"))}));console.warn("addData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}updateOrAddData(t){var e=[],n=0;if(this.initialized)return new Promise(((i,r)=>{this.dataLoader.blockActiveLoad(),"string"==typeof t&&(t=JSON.parse(t)),t?t.forEach((t=>{var r=this.rowManager.findRow(t[this.options.index]);n++,r?r.updateData(t).then((()=>{n--,e.push(r.getComponent()),n||i(e)})):this.rowManager.addRows(t).then((t=>{n--,e.push(t[0].getComponent()),n||i(e)}))})):(console.warn("Update Error - No data provided"),r("Update Error - No data provided"))}));console.warn("updateOrAddData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}getRow(t){var e=this.rowManager.findRow(t);return e?e.getComponent():(console.warn("Find Error - No matching row found:",t),!1)}getRowFromPosition(t,e){var n=this.rowManager.getRowFromPosition(t,e);return n?n.getComponent():(console.warn("Find Error - No matching row found:",t),!1)}deleteRow(t){var e=[];Array.isArray(t)||(t=[t]);for(let n of t){let t=this.rowManager.findRow(n,!0);if(!t)return console.error("Delete Error - No matching row found:",n),Promise.reject("Delete Error - No matching row found");e.push(t)}return e.sort(((t,e)=>this.rowManager.rows.indexOf(t)>this.rowManager.rows.indexOf(e)?1:-1)),e.forEach((t=>{t.delete()})),this.rowManager.reRenderInPosition(),Promise.resolve()}addRow(t,e,n){if(this.initialized)return"string"==typeof t&&(t=JSON.parse(t)),this.rowManager.addRows(t,e,n).then((t=>t[0].getComponent()));console.warn("addRow failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}updateOrAddRow(t,e){var n=this.rowManager.findRow(t);return"string"==typeof e&&(e=JSON.parse(e)),n?n.updateData(e).then((()=>n.getComponent())):this.rowManager.addRows(e).then((t=>t[0].getComponent()))}updateRow(t,e){var n=this.rowManager.findRow(t);return"string"==typeof e&&(e=JSON.parse(e)),n?n.updateData(e).then((()=>{resolve(n.getComponent())})):(console.warn("Update Error - No matching row found:",t),Promise.reject("Update Error - No matching row found"))}scrollToRow(t,e,n){var i=this.rowManager.findRow(t);return i?this.rowManager.scrollToRow(i,e,n):(console.warn("Scroll Error - No matching row found:",t),Promise.reject("Scroll Error - No matching row found"))}moveRow(t,e,n){var i=this.rowManager.findRow(t);i?i.moveToRow(e,n):console.warn("Move Error - No matching row found:",t)}getRows(t){if(this.initialized)return this.rowManager.getComponents(t);console.warn("getRows failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}getRowPosition(t,e){var n=this.rowManager.findRow(t);return n?this.rowManager.getRowPosition(n,e):(console.warn("Position Error - No matching row found:",t),!1)}setColumns(t){this.initialized?this.columnManager.setColumns(t):console.warn("setColumns failed - table not yet initialized. To set initial data please use the 'columns' property in the table constructor.")}getColumns(t){return this.columnManager.getComponents(t)}getColumn(t){var e=this.columnManager.findColumn(t);return e?e.getComponent():(console.warn("Find Error - No matching column found:",t),!1)}getColumnDefinitions(){return this.columnManager.getDefinitionTree()}showColumn(t){var e=this.columnManager.findColumn(t);if(!e)return console.warn("Column Show Error - No matching column found:",t),!1;e.show()}hideColumn(t){var e=this.columnManager.findColumn(t);if(!e)return console.warn("Column Hide Error - No matching column found:",t),!1;e.hide()}toggleColumn(t){var e=this.columnManager.findColumn(t);if(!e)return console.warn("Column Visibility Toggle Error - No matching column found:",t),!1;e.visible?e.hide():e.show()}addColumn(t,e,n){var i=this.columnManager.findColumn(n);return this.columnManager.addColumn(t,e,i).then((t=>t.getComponent()))}deleteColumn(t){var e=this.columnManager.findColumn(t);return e?e.delete():(console.warn("Column Delete Error - No matching column found:",t),Promise.reject())}updateColumnDefinition(t,e){var n=this.columnManager.findColumn(t);return n?n.updateDefinition(e):(console.warn("Column Update Error - No matching column found:",t),Promise.reject())}moveColumn(t,e,n){var i=this.columnManager.findColumn(t),r=this.columnManager.findColumn(e);i?r?this.columnManager.moveColumn(i,r,n):console.warn("Move Error - No matching column found:",r):console.warn("Move Error - No matching column found:",t)}scrollToColumn(t,e,n){return new Promise(((i,r)=>{var o=this.columnManager.findColumn(t);return o?this.columnManager.scrollToColumn(o,e,n):(console.warn("Scroll Error - No matching column found:",t),Promise.reject("Scroll Error - No matching column found"))}))}redraw(t){this.initialized?(this.columnManager.redraw(t),this.rowManager.redraw(t)):console.warn("redraw failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}setHeight(t){this.options.height=isNaN(t)?t:t+"px",this.element.style.height=this.options.height,this.rowManager.initializeRenderer(),this.rowManager.redraw()}on(t,e){this.externalEvents.subscribe(t,e)}off(t,e){this.externalEvents.unsubscribe(t,e)}dispatchEvent(){Array.from(arguments).shift();this.externalEvents.dispatch(...arguments)}modExists(t,e){return!!this.modules[t]||(e&&console.error("Tabulator Module Not Installed: "+t),!1)}module(t){var e=this.modules[t];return e||console.error("Tabulator module not installed: "+t),e}}Yt.defaultOptions={debugEventsExternal:!1,debugEventsInternal:!1,debugInvalidOptions:!0,height:!1,minHeight:!1,maxHeight:!1,columnMaxWidth:!1,columnHeaderVertAlign:"top",columns:[],columnDefaults:{},data:!1,autoColumns:!1,autoColumnsDefinitions:!1,nestedFieldSeparator:".",tooltipGenerationMode:"load",footerElement:!1,index:"id",textDirection:"auto",addRowPos:"bottom",headerVisible:!0,renderVertical:"virtual",renderHorizontal:"basic",renderVerticalBuffer:0,scrollToRowPosition:"top",scrollToRowIfVisible:!0,scrollToColumnPosition:"left",scrollToColumnIfVisible:!0,rowFormatter:!1,rowFormatterPrint:null,rowFormatterClipboard:null,rowFormatterHtmlOutput:null,placeholder:!1,dataLoader:!0,dataLoaderLoading:!1,dataLoaderError:!1,dataSendParams:{},dataReceiveParams:{}},new Rt(Yt);new Rt(class extends Yt{},pt);function jt(t){var e=t.graph,n=t.height,i=new Yt(".files-table-container",{height:n,data:[],columnDefaults:{tooltips:function(t){return"vvvv:"+t.getValue()}},rowContextMenu:function(e,n){var i=[],r=e.getData();return"xsj"===r.fileType?(i.push({label:"",action:function(e,n){var i=n.getData();t.changeFileModel(i.id)}}),i.push({label:"",action:function(e,n){var i=n.getData();t.changeFileModel(i.id,!0)}})):"github"===r.fileType&&i.push({label:"",action:function(e,n){var i=n.getData();t.openTarget(i.id)}}),i},columns:[{title:"#",field:"id",hozAlign:"center",headerHozAlign:"center",formatter:"rownum",headerSort:!1,frozen:!0},{title:"",field:"title",width:150,tooltip:!0,frozen:!0},{title:"",field:"createDate",formatter:function(t){return o()(t.getValue()).format("YYYY-MM-DD")},hozAlign:"center"},{title:"",field:"tagNames",headerSort:!1}]});return i.on("rowClick",(function(t,n){var r=n.getData(),o=e.findById(r.id);if(o){var a=e.get("canvas");if(a&&a.get("el")){var s=a.get("el"),l=o.getModel(),u=e.getClientByPoint(l.x,l.y),c=new MouseEvent("mouseleave",{view:window,bubbles:!0,cancelable:!0,clientX:u.x,clientY:u.y});s.dispatchEvent(c)}o.toFront(),e.focusItem(o,!0,{duration:500,callback:function(){i.deselectRow();var t=e.get("canvas");if(t&&t.get("el")){var n=t.get("el"),r=o.getModel(),a=e.getClientByPoint(r.x,r.y),s=new MouseEvent("mousemove",{view:window,bubbles:!0,cancelable:!0,clientX:a.x,clientY:a.y});n.dispatchEvent(s)}}})}})),i}Yt.registerModule([q,V,F,ht,R,j,lt])},84440:(t,e,n)=>{"use strict";function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}var r,o,a,s=(r=n(58811))&&r.__esModule?r:{default:r},l=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==i(t)&&"function"!=typeof t)return{default:t};var n=u(e);if(n&&n.has(t))return n.get(t);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var s=o?Object.getOwnPropertyDescriptor(t,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=t[a]}r.default=t,n&&n.set(t,r);return r}(n(84376));function u(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(u=function(t){return t?n:e})(t)}a={layoutDirection:"free",fisheye:!1,fisheyeD:5,fisheyeR:300,fisheyeScaleRBy:"unset",fisheyeScaleDBy:"unset",helpFn:function(){return(window.openTarget||window.parent&&window.parent.openTarget)("http://soft.xiaoshujiang.com/docs/tutorial/internal_link/")}},o=function(t,e,n){var i,r,o,u;return e.xsjGuiSettings={filterLink:!0,filterTag:!0,filterSelfRef:!0,depthLoad:3},u=null,(r=new l.GUI({autoPlace:!1})).useLocalStorage=!0,t.prepend(r.domElement),r.remember(a),r.remember(e.xsjGuiSettings),(i=r.add(e.xsjGuiSettings,"filterLink")).name(""),i.onChange((function(t){return n.filterOptFn()})),(i=r.add(e.xsjGuiSettings,"depthLoad",1,10,1)).name(""),(i=r.add(e.xsjGuiSettings,"filterSelfRef")).name(""),i.onChange((function(t){return n.filterOptFn()})),(i=(o=r.addFolder("")).add(a,"fisheye")).name(""),i.onChange((function(t){return t?(u&&!u.destroyed||(u=new s.default.Fisheye({r:a.fisheyeR,d:a.fisheyeD,showLabel:!0,delegateStyle:{fill:"#f00",lineDash:[5,5],stroke:"#666"}})),e.addPlugin(u)):(e.removePlugin(u),u=null)})),(i=o.add(a,"fisheyeD",1,10,.1)).name(""),i.onChange((function(t){if(u)return u.updateParams({d:t})})),(i=o.add(a,"fisheyeR",200,500,50)).name(""),i.onChange((function(t){if(u)return u.updateParams({r:t})})),a.fisheye&&(u=new s.default.Fisheye({r:a.fisheyeR,d:a.fisheyeD,showLabel:!0,delegateStyle:{fill:"#f00",lineDash:[5,5],stroke:"#666"}}),e.addPlugin(u)),(i=r.add({rebuildFn:n.rebuildFn},"rebuildFn")).name(""),(i=r.add(a,"helpFn")).name(""),r},t.exports=o},2376:(t,e,n)=>{"use strict";var i,r=(i=n(58811))&&i.__esModule?i:{default:i},o=n(80814);r.default.registerBehavior("xsj-hover-item",{getEvents:function(){return{"node:mouseenter":"onHoverItem","edge:mouseenter":"onHoverItem","node:mouseleave":"onUnHoverItem","edge:mouseleave":"onUnHoverItem"}},onHoverItem:function(t){var e,n;return this.graph,e=t.item,n=(0,o.getNeighborItems)(e),(0,o.setItemStates)(n,"hoveredItem")},onUnHoverItem:function(t){var e,n,i;return i=this.graph,e=t.item,n=(0,o.getNeighborItems)(e),(0,o.clearItemStates)(i,n,"hoveredItem")}})},80169:(t,e,n)=>{"use strict";var i,r,o=(i=n(58811))&&i.__esModule?i:{default:i};r=[4,2,1,2],o.default.registerEdge("line-running",{setState:function(t,e,n){var i,o,a;return o=n.get("keyShape"),a=n.get("shapeFactory"),"hoveredItem"===t?e?(i=0,o.animate((function(){return++i>9&&(i=0),{lineDash:r,lineDashOffset:-i}}),{repeat:!0,duration:3e3})):(o.stopAnimate(),o.attr("lineDash",null),a.setState("line",t,e,n)):a.setState("line",t,e,n)}},"line"),o.default.registerEdge("cubic-running",{setState:function(t,e,n){var i,o,a;return o=n.get("keyShape"),a=n.get("shapeFactory"),"hoveredItem"===t?e?(i=0,o.animate((function(){return++i>9&&(i=0),{lineDash:r,lineDashOffset:-i}}),{repeat:!0,duration:3e3})):(o.stopAnimate(),o.attr("lineDash",null),a.setState("cubic",t,e,n)):a.setState("cubic",t,e,n)}},"cubic")},28268:(t,e,n)=>{"use strict";var i,r,o=(i=n(94075))&&i.__esModule?i:{default:i};function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}r=function(){var t,e,n,i,r,s,l,u,c,h,d,f,p,m=function(){function t(e){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.opts=e,n=this,f=this.opts,d(n),i=function(t){if(27===t.keyCode)return n.hide()}}var e,r,m;return e=t,(r=[{key:"resize",value:function(){var t,e;if(!p)return l.querySelector("table>tbody>tr>th:nth-child(1)"),e=l.querySelector("table").getBoundingClientRect(),s.style.width=e.width+"px",s.style.height=e.height+"px",s.innerHTML="<div class='xsj-heatmap-instance'></div>",c=o.default.create({container:s.querySelector(".xsj-heatmap-instance")}),t=u.datas.map((function(t){var e;return e=h.querySelector(".location_".concat(t.x,"_").concat(t.y)).getBoundingClientRect(),{x:parseInt(e.x+e.width/2),y:parseInt(e.y+e.height/2),value:t.value,radius:Math.sqrt(e.width*e.height)}})),c.setData({max:u.maxCount,min:0,data:t}),window.h=c,window.dd=u,window.cdd=t}},{key:"hide",value:function(){return p=!0,document.removeEventListener("keydown",i),l.classList.add("hide")}},{key:"show",value:function(){var t;return p=!1,t=this,document.addEventListener("keydown",i),l.classList.remove("hide"),f.groupByMonths((function(e,i){return n(i),t.resize()}))}},{key:"destroy",value:function(){return i=null,c=null,u={}}}])&&a(e.prototype,r),m&&a(e,m),t}();return l=null,e=null,h=null,s=null,c=null,f=null,i=null,u={},p=!0,d=function(t){return(l=document.createElement("div")).classList.add("xsj-heatmap-calendar-container","hide"),(h=document.createElement("table")).addEventListener("click",(function(e){var n,i,r;if((i=e.target||e.srcElement||e.toElement).classList.contains("location"))return r=parseInt(i.dataset.year),n=parseInt(i.dataset.month)-1,f.timelineInstance.focusTime(new Date(r,n,15)),t.hide()})),l.append(h),(e=document.createElement("div")).innerHTML='<i class="fa fa-window-close-o close-btn"></i>',e.addEventListener("click",(function(){return t.hide()})),(s=document.createElement("div")).classList.add("xsj-heatmap-canvas-container"),l.append(s),l.append(e),document.body.append(l)},t=function(t,e,n){var i,r,o,a,s,l,u,c;for(o=0,r=(new Date).getFullYear(),c=[r],t.forEach((function(t){var e,i,r,a;if(i=t.value,r=t.key,i>o&&(o=i),a=t.key,(n[a[0]]||(n[a[0]]={}))[a[1]]=t.value,e=r[0],c.indexOf(e)<0)return c.push(e)})),a=Math.max.apply(null,c),l=s=Math.min.apply(null,c),u=1,i=!1;l<=a;)c.indexOf(l)>=0?(e.push(l),i=!0):i&&(e.push("y-"+u),u++,i=!1),l++;if(e.length<5)for(;e.length<5;)e.unshift(--s),e.push(++a);return o},r=function(t,e){var n;return(n=Math.round(10*t/e))>7?"very-hot":n>5?"hot":n>3?"little":n>0?"very-litter":""},n=function(e){var n,i,o,a,s,l,c,d,f,p,m,g,v,y,b,_,w,x,M,E,S;for(m=t(e,S=[],v={}),u={maxCount:m,datas:[]},_=["<th class='calc-area'></th>"],s=0,d=(g=[1,2,3,4,5,6,7,8,9,10,11,12]).length;s<d;s++)x=g[s],_.push("<th>".concat(x,"</th>"));for(y="<thead><tr>".concat(_.join(""),"</tr></thead>"),w=[],E=l=0,f=S.length;l<f;E=++l){for(_=["<th>".concat(n=S[E],"</th>")],M=c=0,p=g.length;c<p;M=++c)x=g[M],i=0,o="",v[n]&&(i=v[n][x-1]||0)>0&&(u.datas.push({x:M,y:E,value:i}),o=" class='".concat(r(i,m)," location  location_").concat(M,"_").concat(E,"' data-year='").concat(n,"' data-month='").concat(x,"'")),a=i||"",_.push("<td".concat(o,">").concat(a,"</td>"));w.push("<tr>".concat(_.join(""),"</tr>"))}return b=y+"<tbody>".concat(w.join(""),"</tbody>"),h.innerHTML=b,{y:S,x:g}},m}.call(void 0),t.exports=r},55431:(t,e,n)=>{"use strict";var i=V(n(58811)),r=V(n(82492)),o=V(n(30381));n(80169),n(2376);var a,s,l,u,c,h,d,f,p,m,g,v,y,b,_,w,x,M,E,S,k,C,T,D,L,A,O,P,I,N,R,Y,j,F,B=V(n(84440)),z=V(n(21907)),H=V(n(86672)),G=V(n(18430)),W=n(2814),U=n(80814);function V(t){return t&&t.__esModule?t:{default:t}}T=null,m=null,M=null,p={},Y={},C={},A={},N={},k={},F=null,y=null,D={nodes:[],edges:[],combos:[],groups:[]},P=function(){if(T&&(T.changeSize(document.body.clientWidth,document.body.clientHeight),T.fitView()),F&&F.resize(),R)return R.setHeight(document.body.clientHeight)},d=(0,U.debounce)(P,100),h=null,R=null,O=function(){var t;return(0,U.clearSelectedItemStates)(T),t=[],T.getNodes().forEach((function(e){var n;if("file"===(n=e.get("model")).xsjType&&n.loaded)return t.push(n.id)})),p={},Y={},C={},A={},N={},k={},T.xsjState={},D=j(),T.changeData({}),M.queryByIds(t,(function(t,e){if(e&&e.length>0)return S(e)}))},j=function(t){return(t=t||{}).nodes=t.nodes||[],t.edges=t.edges||[],t.groups=t.groups||[],t.combos=t.combos||[],t},v=function(){var t,e,n;if(n=null,T.xsjState.selectedItems&&(n=T.xsjState.selectedItems.node.get("model").id,(0,U.clearSelectedItemStates)(T)),s(T.save()),t=g(D),T.changeData(t),n&&(e=T.findById(n))&&(0,U.setSelectedItemStates)(T,e),m)return T.focusItem(m._id,!0,{easing:"easeCubic",duration:500})},s=function(t){var e,n,i,r,o;for(r in n=t=j(t),D)o=D[r],i=n[r],e=i.map((function(t){return t.id})),o.forEach((function(t){return t.id?e.indexOf(t.id)<0?i.push(t):void 0:i.push(t)}));return D=n},g=function(t,e){var n,i;return e=e||T.xsjGuiSettings,t=j(t),n={},(i={}).nodes=t.nodes.filter((function(t){var i;return i=!0,"www"===t.xsjType&&(i=!e.filterLink),"tag"===t.xsjType&&(i=!e.filterTag),i||(n[t.id]=t),i})),i.edges=t.edges.filter((function(t){var i;return i=!0,(n[t.source]||n[t.target])&&(i=!1),(t.source!==t.target||!e.filterSelfRef)&&i})),i},_=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"source";return e=[],T.getNeighbors(t,n).forEach((function(t){return"xsj"===t.get("model").xsjType?T.getNeighbors(t,n).forEach((function(t){return e.push(t)})):e.push(t)})),e},f=function(){if(window.onresize=null,m=null,D=j(),p={},Y={},C={},A={},N={},k={},M=null,null!=h&&h.destroy(),h=null,null!=R&&R.destroy(),R=null,null!==T&&(T.destroy(),T=null),null!==F&&(F.destroy(),F=null),null!==y)return y.destroy(),y=null},u=function(t,e,n,i){var o;switch(o={id:t+"==>>"+e,source:t,target:e,size:1,style:{lineDash:!1,stroke:W.defaultEdgeStyle.style.stroke,lineWidth:W.defaultEdgeStyle.style.lineWidth},labelCfg:{style:{fill:W.globalDefaultColorVar.highlightBackground,autoRotate:!0}}},n){case"tag":(0,r.default)(o,{style:{lineDash:[1,1]}});break;case"xsj":case"file":(0,r.default)(o,{type:"line-running",style:{endArrow:!0}});break;case"www":(0,r.default)(o,{style:{lineDash:[2,2],endArrow:!0}})}return t===e&&(o.type="loop"),o},c=function(t,e,n){var i,o,a,s,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};switch(o={id:t,label:e,title:l.title||"",xsjType:n,slug:l.slug||"",anchorPoints:[[0,0],[0,.5],[0,1],[.5,0],[.5,1],[1,0],[1,.5],[1,1]],size:10,style:{fill:W.globalDefaultColorVar.infoColor,stroke:W.globalDefaultColorVar.infoColor,lineWidth:1,shadowBlur:0,shadowColor:W.globalDefaultColorVar.infoColor},labelCfg:{style:{fill:W.globalDefaultColorVar.defaultBackground}}},n){case"file":a="rect",m._id===t&&(a="ellipse"),i=e,e.length>15&&(i=e.substring(0,15)+"..."),s={},l.unLoaded&&(s={loaded:!1,style:{opacity:.5,lineDash:[1,1]}}),(0,r.default)(o,{loaded:!0,type:a,label:i,doc:l.doc,size:(0,U.getTextMetrics)(i)},s);break;case"www":(0,r.default)(o,{type:"star",labelCfg:{position:"bottom",style:{fill:W.globalDefaultColorVar.defaultForeground}},stateStyles:Object.assign({},W.nodeStateStyles,{active:{fill:W.globalDefaultColorVar.positiveColor,stroke:W.globalDefaultColorVar.positiveColor,lineWidth:2,shadowColor:W.globalDefaultColorVar.positiveColor,shadowBlur:10,"text-shape":{fill:W.globalDefaultColorVar.defaultForeground}}})});break;case"tag":(0,r.default)(o,{type:"diamond",labelCfg:{position:"bottom",style:{fill:W.globalDefaultColorVar.defaultForeground}},stateStyles:Object.assign({},W.nodeStateStyles,{active:{fill:W.globalDefaultColorVar.positiveColor,stroke:W.globalDefaultColorVar.positiveColor,lineWidth:2,shadowColor:W.globalDefaultColorVar.positiveColor,shadowBlur:10,"text-shape":{fill:W.globalDefaultColorVar.defaultForeground}}})});break;case"xsj":(0,r.default)(o,{type:"triangle",size:10,labelCfg:{position:"bottom",style:{fill:W.globalDefaultColorVar.defaultForeground}},stateStyles:Object.assign({},W.nodeStateStyles,{active:{fill:W.globalDefaultColorVar.positiveColor,stroke:W.globalDefaultColorVar.positiveColor,lineWidth:2,shadowColor:W.globalDefaultColorVar.positiveColor,shadowBlur:10,"text-shape":{fill:W.globalDefaultColorVar.defaultForeground}}})})}return o},x=function(t,e,n){var r,a,l,u,b,w,x,E,P;return f(),M=e,p[(m=t)._id]=m,a={nodes:[c(m._id,m.title,"file",{title:m.title,slug:m.slug||m._id,doc:m})],edges:[]},w=new i.default.Minimap({container:document.querySelector(".minimap-container"),size:[150,100]}),b=new i.default.Bundling({bundleThreshold:.1}),P=new i.default.Tooltip({offsetX:10,offsetY:10,itemTypes:["node"],getContent:function(e){var n,i,r,a,s;return r=e.item.getModel(),(t=p[r.id])?(s=t.tagNames||[],i=(0,U.getRealContent)(t.content).substring(0,300),n=(0,o.default)(t.createDate),(a=document.createElement("div")).classList.add("g6-tooltip-container"),a.innerHTML="<div>: ".concat((0,U.escapeHtml)(t.title),"</div>\n<div>: ").concat(s.map((function(t){return"#"+(0,U.escapeHtml)(t)})).join(","),"</div>\n<div>: ").concat(n.format("YYYY-MM-DD"),"</div>\n<div>: <pre>").concat((0,U.escapeHtml)(i),"</pre></div>"),a):""},shouldBegin:function(t){var e;return!("file"!==(e=t.item.getModel()).xsjType||!p[e.id])}}),r=new i.default.Menu({shouldBegin:function(t){var e;return"file"===(e=t.item.get("model").xsjType)||"tag"===e},getContent:function(t){var e,n;return e=[],"file"===(n=t.item.get("model")).xsjType&&(m._id!==n.id&&e.push('<li data-type="edit"></li>'),e.push('<li data-type="free-edit"></li>'),e.push('<li data-type="filter-by-reverse"></li>')),"tag"===n.xsjType&&e.push('<li data-type="filter-by-tag"></li>'),'<ul class="g6-contextmenu-ul">\n  '.concat(e.join(""),"\n</uL>")},handleMenuClick:function(t,e){var n,i,r;switch(n=t.dataset.type,i=e.get("model"),n){case"edit":return M.changeFileModel(i.id);case"free-edit":return M.changeFileModel(i.id,!0);case"filter-by-reverse":return M.listFilesByReverse(p[i.id]);case"filter-by-tag":return r=i.slug,M.listFilesByTag(r),F.setFilterInfo({type:"tag",value:r})}},itemTypes:["node"]}),x={container:document.body,width:document.body.clientWidth,height:document.body.clientHeight,groupByTypes:!1,modes:{default:["drag-canvas","drag-node","zoom-canvas",{type:"activate-relations",resetSelected:!0}]},plugins:[w,r,b,P],layout:{type:"force",linkDistance:function(t,e,n){return 200},preventOverlap:!0},nodeStateStyles:W.nodeStateStyles,edgeStateStyles:W.edgeStateStyles},T=new i.default.Graph(x),h=(0,B.default)(document.querySelector(".minimap-container"),T,{filterOptFn:v,rebuildFn:O}),R=(0,G.default)({graph:T,height:document.body.clientHeight,changeFileModel:M.changeFileModel}),T.xsjState={},T.data(a),T.render(),(0,U.makeNodeFront)(T),e.showLinkMap(m,I(a.nodes[0],{depthLoad:T.xsjGuiSettings.depthLoad}),(function(t){return t?e.showError(t):e.hideDimmer()})),E=function(t){var e;return(e=t.item.get("model")).fx=t.x,e.fy=t.y},T.on("node:dragstart",(function(t){return T.layout(),E(t)})),T.on("node:drag",(function(t){return E(t)})),T.on("edge:click",(function(t){var e,n,i,r,o,a,s;if(i=(e=t.item).getSource(),a=e.getTarget(),n=i.get("model"),o=a.get("model"),"xsj"===n.xsjType&&((r=_(i))&&r.length>0?n=(i=r[0]).get("model"):(i=null,n=null)),"xsj"===o.xsjType&&(s=_(a,"target"))&&s.length>0&&(o=(a=s[0]).get("model")),n&&o&&i.id===m._id)return M.locationInEditor(o.slug)})),l=function(n){var i,r,o;if(r=n.get("model"),i=function(t){var n,i;if("tag"!==(n=t.get("model")).xsjType)return(i=_(t).find((function(t){return t.get("model").id===m._id})))&&i!==t?e.locationInEditor(n.slug):void 0},i(n),o=null,T.xsjState.selectedItems&&(o=T.xsjState.selectedItems.node),(0,U.clearSelectedItemStates)(T),o!==n)return(0,U.setSelectedItemStates)(T,n),"file"===r.xsjType&&(t=p[r.id])&&(F.focusItem(t),T.xsjState.selectedTag&&(R.deselectRow(),R.getRow(t._id)&&(R.selectRow(t._id),R.scrollToRow(t._id,"center"))),!k[r.id])?M.showLinkMap(t,I(r,{depthLoad:T.xsjGuiSettings.depthLoad}),(function(t){var e;if(t&&M.showError(t),e=T.findById(r.id))return T.focusItem(e,!0)})):void 0},u=function(e){var n,i,r,o,a,l,u,c;for(i in(0,U.clearSelectedItemStates)(T),T.setAutoPaint(!1),s(T.save()),n=g(D,{}),T.changeData(n),u=(0,U.getNeighborItems)(e),l=e.get("model"),a={nodes:[l],edges:[]},u)c=u[i],"inNodes"===i||"outNodes"===i?c.forEach((function(t){var e;if(e=t.get("model"),a.nodes.indexOf(e)<0)return"file"===e.xsjType&&(e.style=e.style||{},e.style.lineDash=[1,1]),a.nodes.push(e)})):"inEdges"!==i&&"outEdges"!==i||c.forEach((function(t){if(a.edges.indexOf(t.get("model"))<0)return a.edges.push(t.get("model"))}));return o={},r={},Y={},C={},A={},N={},a.nodes.forEach((function(e){switch(e.xsjType){case"file":return r[e.id]=p[e.id],t=p[e.id],C[e.id]=!0,(t.tagNames||[]).forEach((function(t){return Y[t]?Y[t]++:Y[t]=1}));case"xsj":return A[e.id]="xsj";case"www":return A[e.id]="www"}})),p=r,"file"===l.xsjType&&k[l.id]&&(o[l.id]=k[l.id]),k=o,D=j({}),s(a),T.changeData(g(a)),y.changeData(Y),y.render(),T.paint(),T.setAutoPaint(!0)},T.on("node:click",(function(t){return l.timer=setTimeout((function(){return u.prevent||l(t.item),clearTimeout(u.timer),u.prevent=!1}),200)})),T.on("node:dblclick",(function(t){return clearTimeout(l.timer),clearTimeout(u.timer),u.prevent=!0,u(t.item),u.timer=setTimeout((function(){return u.prevent=!1}),200)})),T.on("canvas:click",(function(t){return(0,U.clearSelectedItemStates)(T)})),window.onresize=d,F=new z.default({groupByMonths:M.groupByMonths,queryByCreateDateRange:M.queryByCreateDateRange,loadDocs:S,changeFileModel:M.changeFileModel,focusItem:function(t){if(t||(t=m._id),T.findById(t))return T.focusItem(t,!0,{easing:"easeCubic",duration:500})},getState:function(){var t,e;return t=null,null,m&&m,T.xsjState.selectedItems&&(e=T.xsjState.selectedItems.node.get("model"),t=p[e.id]),{mainDoc:m,selectedDoc:t}}}),y=new H.default({network:T,toggleTag:function(t){var e;return document.querySelector(".files-table-container").classList.add("files-table-hidden"),R.clearData(),T.xsjState.selectedTag!==t?(T.xsjState.selectedTag=t,e=[],T.getNodes().forEach((function(n){var i;if((i=n.getModel().doc)&&i.tagNames&&i.tagNames.indexOf(t)>=0)return e.push({id:i._id,fileType:"xsj",title:i.title,tagNames:i.tagNames,createDate:i.createDate})})),e.length>0&&(document.querySelector(".files-table-container").classList.remove("files-table-hidden"),R.setData(e)),!0):(T.xsjState.selectedTag=null,!1)}}),n(null,{network:T,onChangeFileModel:L,loadDocs:S,destroy:f})},b=function(t,e){var n,i,r,o,a,s,l,h;return i=e.doc,l=e.linkInfos,s=e.linkDocs,a=i._id,h=[t],r=[],n=function(t,e,n){var i;if(!C[t._id])return C[t._id]=!0,(i=t.tagNames)&&i.length>0?i.forEach((function(t){return"tag__".concat(t),Y[t]?Y[t]++:Y[t]=1})):void 0},n(i),p[a]=i,o=function(t,e){return t.filter((function(t){return t.key===e||t.key==="/"+e||t.key==="/"+e+"/"||t.key===e+"/"}))},Object.keys(l).forEach((function(e){var i,d,f,m,g,v;return f=l[e][0],i=o(s,f.link),a="_;;_"+f.link,d=f.title||f.text||"","",i.length>0?i.length>1?((g=N[a])||(g=c(a,d,"xsj",{slug:f.link}),N[a]=g,r.push(u(t.id,g.id,"xsj"))),A[a]||(A[a]="xsj",h.push(g)),i.forEach((function(t){var e;return a=t.id,e=f.link,d=t.doc.title,p[a]||(p[a]=t.doc,h.push(c(a,d,"file",{title:e,slug:t.doc.slug||a,doc:t.doc,unLoaded:!0}))),r.push(u(g.id,a,"file")),n(t.doc)}))):(m=i[0],a=m.id,v=f.link,d=m.doc.title,p[a]||(p[a]=m.doc,h.push(c(a,d,"file",{title:v,slug:m.doc.slug||a,doc:m.doc,unLoaded:!0}))),r.push(u(t.id,a,"file")),n(m.doc)):(A[a]||(A[a]="www",h.push(c(a,d,"www",{title:f.link,slug:f.link}))),r.push(u(t.id,a,"www")))})),{nodes:h,edges:r}},E=function(t,e,n){var i,r,o;return o=t._id,r=null,r=(i=T.findById(o))?i.get("model"):c(o,t.title,"file",{title:t.title,slug:t.slug||o,doc:t}),k[r.id]?n():M.showLinkMap(t,I(r,{depthLoad:e.depthLoad}),(function(t){return t&&M.showError(t),n(null,!0)}))},S=function(t){var e,n,i,r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{disableAnimation:!1,depthLoad:1};if(Array.isArray(t)||(t=[t]),r=S.sequenceDocs||(S.sequenceDocs=[]),t.forEach((function(t){if(t)return r.push([t,o])})),!S.isRunning)return e=!1,i=[],(n=function(){var t,o,a;if(!(r.length<=0))return S.isRunning=!0,o=r.shift(),t=o[0],a=o[1],i.push(t._id),E(t,{depthLoad:a.depthLoad},(function(i,o){return o&&(e=!0),r.length<=0?(S.isRunning=!1,a.disableAnimation||S.isAnimationing?void 0:(S.isAnimationing=!0,e?T.once("afterlayout",(function(){return M.hideDimmer(),T.focusItem(t._id,!0,{duration:500,callback:function(){return S.isAnimationing=!1}})})):(M.hideDimmer(),T.focusItem(t._id,!0,{duration:500,callback:function(){return S.isAnimationing=!1}})))):n()}))})()},I=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n,i,r,o){var a,l,u,c,h,d,f,p,m,v;d=n._id,l=D.nodes.map((function(t){return t.id})),a=D.edges.map((function(t){return t.id})),k[d]={doc:n,linkInfos:i,linkDocs:r},t.style&&t.style.lineDash&&(delete t.style.lineDash,delete t.style.opacity),t.loaded||(t.loaded=!0),p=b(t,k[d]),y.changeData(Y),y.render(),f=p.nodes,c=p.edges,f=f.filter((function(t){return l.indexOf(t.id)<0})),c=c.filter((function(t){return a.indexOf(t.id)<0})),v=null,T.xsjState.selectedItems&&(v=T.xsjState.selectedItems.node.get("model").id,(0,U.clearSelectedItemStates)(T)),s({nodes:f,edges:c}),h=g({nodes:f,edges:c}),(u=T.findById(t.id))&&u.update({style:{lineDash:!1,opacity:1},loaded:!0}),T.changeData(h),v&&(m=T.findById(v))&&(0,U.setSelectedItemStates)(T,m),o(null),e.depthLoad>1&&S(r.map((function(t){return t.doc})),{disableAnimation:!0,depthLoad:e.depthLoad-1})}},L=function(t){var e,n,i;if((e=L.fileDocs||(L.fileDocs=[])).push(t),!L.isRunning)return L.isRunning=!0,n=!1,(i=function(){var t;return t=e.shift(),a(t,(function(t,r){return r&&(n=!0),e.length<=0?(L.isRunning=!1,L.isAnimationing?void 0:(L.isAnimationing=!0,n?T.once("afterlayout",(function(){return M.hideDimmer(),T.focusItem(m._id,!0,{duration:500,callback:function(){return L.isAnimationing=!1}})})):(M.hideDimmer(),T.focusItem(m._id,!0,{duration:500,callback:function(){return L.isAnimationing=!1}})))):i()}))})()},l=function(t,e){var n;return T.setAutoPaint(!1),n=t.getStates(),t.clearStates(n),t.update({type:e,style:{fill:W.globalDefaultColorVar.infoColor,stroke:W.globalDefaultColorVar.infoColor},labelCfg:{style:{fill:W.globalDefaultColorVar.defaultBackground}}}),n.forEach((function(e){return t.setState(e,!0)})),T.paint(),T.setAutoPaint(!0)},a=function(t,e){var n,i,r;if(m!==t)return 1,m&&(r=T.findById(m._id))&&l(r,"rect"),m=t,(n=T.findById(m._id))?(l(n,"ellipse"),i=n.getModel()):(p[m._id]=m,i=c(m._id,m.title,"file",{title:m.title,slug:m.slug||m._id,doc:m})),k[i.id]?e():M.showLinkMap(m,I(i,{depthLoad:T.xsjGuiSettings.depthLoad}),(function(t){return t&&M.showError(t),e(null,!0)}));e()},w=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;return function(){var e,n,i,r;return t.pending=!1,e=t.document,t,(i=e.createElement("div")).classList.add("right-sidebar"),(n=e.createElement("div")).classList.add("minimap-container"),i.append(n),(r=e.createElement("div")).classList.add("files-table-container","files-table-hidden"),i.append(r),e.body.append(i),{initLinkMap:x}}()},t.exports=w},21907:(t,e,n)=>{"use strict";var i,r=n(30404),o=n(19419),a=u(n(30381)),s=u(n(28268)),l=u(n(94753));function u(t){return t&&t.__esModule?t:{default:t}}function c(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}i=function(){var t,e,n,i,u,h,d,f,p,m,g,v,y,b,_,w,x,M,E,S,k,C=function(){function i(s){var u,c,h,y,b,M,k,C,T;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),this.setFilterInfo=this.setFilterInfo.bind(this),this.clearFilterInfo=this.clearFilterInfo.bind(this),this.opts=s,C=this,f=this.opts,console.log("init vis timeline"),d(C),b=(M=(0,a.default)()).clone().add(-4,"weeks"),y=M.clone(),M.clone().add(-2,"weeks").format("YYYY-MM-DD"),M.clone().format("YYYY-MM-DD"),E=new r.DataSet([{id:"now",content:"today",start:(0,a.default)().format("YYYY-MM-DD")}]),w=new o.Timeline(x,E,{locale:"zh-cn",stack:!1,height:"100px",maxHeight:"100px",horizontalScroll:!0,zoomKey:"ctrlKey",start:b.format("YYYY-MM-DD"),end:y.format("YYYY-MM-DD"),min:new Date(1985,0,1),max:(0,a.default)().add(2,"months").toDate(),zoomMin:1296e6,zoomMax:80352e5,cluster:n}),c=function(t){var n,i,r;if((i=t.item)&&!p&&(n=w.itemSet.getItemById(i)))return r=[],v=[],n.isCluster?(v=n.data.items.map((function(t){return t.id})),S(!0),void w.setSelection(v)):(r.push(n),v=[i],f.loadDocs(r.map((function(t){return e[t.id]}))))},h=function(t){var n,i,r,o,a;if((r=t.item)&&(i=w.itemSet.getItemById(r)))return i.isCluster?(a=[],i.data.items.forEach((function(t){return a.push(t)})),f.loadDocs(a.map((function(t){return e[t.id]})))):(o=null,(n=f.getState()).mainDoc&&(o=n.mainDoc._id),o!==i.id?f.changeFileModel(i.id):f.focusItem(i.id))},w.on("click",(function(t){return c.timer=setTimeout((function(){return h.prevent||c(t),clearTimeout(h.timer),h.prevent=!1}),200)})),w.on("doubleClick",(function(t){return clearTimeout(c.timer),clearTimeout(h.timer),h.prevent=!0,h(t),h.timer=setTimeout((function(){return h.prevent=!1}),200)})),w.on("contextmenu",(function(t){var e,n,i,r;if(e=t.event,t.event.preventDefault(),(i=t.item)&&(n=w.itemSet.getItemById(i)))return n.isCluster?void 0:(r={editor:{onSelect:function(t,e,i,r){return f.changeFileModel(n.id)},label:""},createEditor:{onSelect:function(t,e,i,r){return f.changeFileModel(n.id,!0)},label:""}},l.default.display(e,r))})),T=function(n,i){var r,o;return o=n.startDate,r=n.endDate,C.opts.queryByCreateDateRange(o,r,(function(n,r){var o,s;return r&&(e={},E.clear(),C.opts.getState(),s=r.map((function(t){return e[t.id]=t.doc,{id:t.id,content:t.doc.title,start:(0,a.default)(t.doc.createDate).toDate()}})),o=t(s),E.add(o),w.setSelection(v)),i()}))},(u=function(){var t;if(!u.isRunning)return u.isRunning=!0,t=u.args.shift(),T(t,(function(){if(u.isRunning=!1,u.args.length>0)return u()}))}).args=[],k=function(t,e){return u.args.length=0,u.args.push({startDate:t,endDate:e}),u()},w.on("rangechanged",(function(t){var e,n,i;if(p=!0,m&&clearTimeout(m),m=setTimeout((function(){return m=null,p=!1}),600),i=!0,_&&(n=[(0,a.default)(g.start).add(-1,"days"),(0,a.default)(g.start).add(1,"days")],e=[(0,a.default)(g.end).add(-1,"days"),(0,a.default)(g.end).add(1,"days")],((0,a.default)(t.start).isBetween(n[0],n[1])||(0,a.default)(t.end).isBetween(e[0],e[1]))&&(i=!1)),(0,a.default)(t.start).isBetween(g.start,g.end)&&(0,a.default)(t.end).isBetween(g.start,g.end)&&(i=!1),i&&C.opts&&C.opts.queryByCreateDateRange)return k((0,a.default)(t.start).toDate(),(0,a.default)(t.end).toDate()),g={start:t.start,end:t.end}}))}var s,y,b;return s=i,(y=[{key:"focusItem",value:function(e){var n,i;return n=e._id,E.get(n)?(i=t(E),E.update(i)):w.moveTo((0,a.default)(e.createDate).toDate())}},{key:"focusTime",value:function(t){return w.moveTo(t)}},{key:"setFilterInfo",value:function(e){var n,i;return(n=M.querySelector(".vis-timeline-filter-btn"))||(x.classList.add("vis-timeline-filter"),(n=document.createElement("div")).classList.add("vis-timeline-filter-btn","btn"),n.addEventListener("click",this.clearFilterInfo),M.prepend(n)),u=e,n.innerHTML='<i class="fa fa-window-close-o"></i> <i class="fa fa-tags"></i> '.concat(u.value),i=t(E),E.update(i)}},{key:"clearFilterInfo",value:function(){var e,n;return u=null,(e=M.querySelector(".vis-timeline-filter-btn"))&&(e.removeEventListener("click",this.clearFilterInfo),M.removeChild(e)),x.classList.remove("vis-timeline-filter"),n=t(E),E.update(n)}},{key:"getFilterInfo",value:function(){return u}},{key:"destroy",value:function(){return h&&(h.destroy(),h=null),w.destroy(),w=null}},{key:"resize",value:function(){if(h)return h.resize()}}])&&c(s.prototype,y),b&&c(s,b),i}();return w=null,E=null,f=null,u=null,x=null,M=null,k=null,y=null,h=null,i=null,_=!1,v=[],p=!1,m=null,g={start:new Date,end:new Date},n={titleTemplate:" {count} ",clusterCriteria:function(t,e){return!t.className&&!e.className},showStipes:!0},e={},S=function(t){if(_=!_,!t||_)return _?(w.setOptions({stack:!0,verticalScroll:!0,cluster:!1,height:void 0,maxHeight:400}),k.innerHTML='<i class="fa fa-angle-double-down active-icon-btn"></i>'):(k.innerHTML='<i class="fa fa-angle-double-up"></i>',w.setOptions({cluster:n,verticalScroll:!1,height:100,maxHeight:100,stack:!1}));_=t},b=function(t){return h||(h=new s.default({groupByMonths:f.groupByMonths,timelineInstance:t})),h.show()},d=function(t){return(x=document.createElement("div")).className="vis-timeline-container",(M=document.createElement("div")).classList.add("vis-timeline-controller-container"),x.append(M),(k=document.createElement("div")).innerHTML='<i class="fa fa-angle-double-up"></i>',k.classList.add("btn","toggle-stack-btn"),k.addEventListener("click",(function(){return S()})),(i=document.createElement("div")).classList.add("btn","current-file-btn"),i.innerHTML='<i class="fa fa-map-marker"></i>',i.addEventListener("click",(function(){var e;if(f.focusItem(),(e=f.getState()).mainDoc)return t.focusItem(e.mainDoc)})),(y=document.createElement("div")).classList.add("btn","show-heatmap-btn"),y.innerHTML='<i class="fa fa-calendar"></i>',y.addEventListener("click",(function(){return b(t)})),M.append(k),M.append(y),M.append(i),document.body.append(x)},t=function(t){var n;return n=f.getState(),t.map((function(t){var i,r,o,a,s,l,c;if(r=e[t.id],i=[],n.mainDoc&&n.mainDoc._id===t.id&&i.push("xsj-main"),n.selectedDoc&&n.selectedDoc._id===t.id&&i.push("xsj-selected"),u&&r)switch(u.type){case"tag":for(c=u.value.split(","),o=r.tagNames||[],a=0,s=c.length;a<s;a++)if(l=c[a],o.indexOf(l)>=0){i.push("xsj-filtered");break}break;case"title":r.title.indexOf(u.value)>=0&&i.push("xsj-filtered")}return t.className=i.join(" "),t}))},C}.call(void 0),t.exports=i},86672:(t,e,n)=>{"use strict";function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}var r,o=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==i(t)&&"function"!=typeof t)return{default:t};var n=a(e);if(n&&n.has(t))return n.get(t);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if("default"!==s&&Object.prototype.hasOwnProperty.call(t,s)){var l=o?Object.getOwnPropertyDescriptor(t,s):null;l&&(l.get||l.set)?Object.defineProperty(r,s,l):r[s]=t[s]}r.default=t,n&&n.set(t,r);return r}(n(30694));function a(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(a=function(t){return t?n:e})(t)}function s(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}r=function(){var t,e,n,i,r,a,l,u,c,h,d,f,p,m,g,v=function(){function v(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,v),this.opts=e,(c=o.select("body").append("svg")).attr("width",p).attr("height",r).attr("class","tag-bar-race-container"),t=c.append("g").attr("class","bar-group"),a=c.append("g").attr("class","label-group"),f=c.append("g").attr("class","value-label-group"),m=o.scaleLinear().range([l.left+20,p-l.right-65]),g=o.scaleLinear().domain([d,0]).range([r-l.bottom,l.top])}var y,b,_;return y=v,(b=[{key:"destroy",value:function(){}},{key:"render",value:function(){var i,r,s,l;return s=this,m.domain([0,o.max(n,(function(t){return t.value}))]),(i=t.selectAll(".bar").data(n,(function(t){return t.name}))).enter().append("rect").attr("class","bar").attr("x",m(0)+1).attr("width",(function(t){return m(t.value)-m(0)-1})).attr("y",(function(t){return g(d+1)+5})).attr("height",g(1)-g(0)-e).style("fill",(function(t){return t.color})).on("click",(function(t,e){var n;if(n=s.opts.toggleTag(e.name),o.selectAll(".bar.selected").attr("class","bar"),n)return o.select(this).attr("class","bar selected")})).on("mouseover",(function(t,e){var n;return(n=s.opts.network).getNodes().forEach((function(t){var n;return(n=t.getModel().doc)&&n.tagNames&&n.tagNames.indexOf(e.name)>=0?(t.setState("active",!0),t.toFront()):t.setState("inactive",!0)})),n.getEdges().forEach((function(t){return t.setState("inactive",!0)}))})).on("mouseout",(function(t,e){var n;return(n=s.opts.network).getNodes().forEach((function(t){return t.clearStates(["active","inactive"])})),n.getEdges().forEach((function(t){return t.clearStates(["active","inactive"])}))})).transition().duration(h).ease(o.easeLinear).attr("y",(function(t){return g(t.rank)+5})),i.transition().duration(h).ease(o.easeLinear).attr("width",(function(t){return m(t.value)-m(0)-1})).attr("y",(function(t){return g(t.rank)+5})),i.exit().transition().duration(h).ease(o.easeLinear).attr("width",(function(t){return m(t.value)-m(0)-1})).attr("y",(function(t){return g(d+1)+5})).remove(),(r=a.selectAll(".label").data(n,(function(t){return t.name}))).enter().append("text").attr("class","label").attr("x",(function(t){return m(t.value)-8})).attr("y",(function(t){return g(d+1)+5+(g(1)-g(0))/2})).style("text-anchor","end").html((function(t){return t.name})).transition().duration(h).ease(o.easeLinear).attr("y",(function(t){return g(t.rank)+5+(g(1)-g(0))/2+1})),r.transition().duration(h).ease(o.easeLinear).attr("x",(function(t){return m(t.value)-8})).attr("y",(function(t){return g(t.rank)+5+(g(1)-g(0))/2+1})),r.exit().transition().duration(h).ease(o.easeLinear).attr("x",(function(t){return m(t.value)-8})).attr("y",(function(t){return g(d+1)+5})).remove(),(l=f.selectAll(".valueLabel").data(n,(function(t){return t.name}))).enter().append("text").attr("class","valueLabel").attr("x",(function(t){return m(t.value)+5})).attr("y",(function(t){return g(d+1)+5})).text((function(t){return o.format(",.0f")(t.value)})).transition().duration(h).ease(o.easeLinear).attr("y",(function(t){return g(t.rank)+5+(g(1)-g(0))/2+1})),l.transition().duration(h).ease(o.easeLinear).attr("x",(function(t){return m(t.value)+5})).attr("y",(function(t){return g(t.rank)+5+(g(1)-g(0))/2+1})).tween("text",(function(t){var e;return e=o.interpolateRound(t.lastValue,t.value),function(t){return this.textContent=o.format(",")(e(t))}})),l.exit().transition().duration(h).ease(o.easeLinear).attr("x",(function(t){return m(t.value)+5})).attr("y",(function(t){return g(d+1)+5})).remove()}},{key:"changeData",value:function(t){var e,r;for(e in n=[],u=i,i=t,t)r=t[e],n.push({name:e,value:r,lastValue:u[e]||0,color:o.hsl(360*Math.random(),.75,.75)});return n.sort((function(t,e){return e.value-t.value})).slice(0,d),n.forEach((function(t,e){return t.rank=e}))}}])&&s(y.prototype,b),_&&s(y,_),v}();return n=[],i={},u={},p=300,d=10,e=((r=300)-((l={top:80,right:0,bottom:5,left:0}).bottom+l.top))/(5*d),h=500,c=null,t=null,a=null,f=null,m=null,g=null,v.prototype.opts={},v}.call(void 0),t.exports=r},2814:(t,e,n)=>{"use strict";var i,r,o,a,s,l=(i=n(58811))&&i.__esModule?i:{default:i},u=n(96486);function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}r={style:{lineWidth:1}},a={},function(){var t,e;e=getComputedStyle(document.documentElement),a={base00:e.getPropertyValue("--base00").trim(),base01:e.getPropertyValue("--base01").trim(),base02:e.getPropertyValue("--base02").trim(),base03:e.getPropertyValue("--base03").trim(),base04:e.getPropertyValue("--base04").trim(),base05:e.getPropertyValue("--base05").trim(),base06:e.getPropertyValue("--base06").trim(),base07:e.getPropertyValue("--base07").trim(),base08:e.getPropertyValue("--base08").trim(),base0A:e.getPropertyValue("--base0A").trim(),base0B:e.getPropertyValue("--base0B").trim(),base0C:e.getPropertyValue("--base0C").trim(),base0D:e.getPropertyValue("--base0D").trim(),base0E:e.getPropertyValue("--base0E").trim(),base0F:e.getPropertyValue("--base0F").trim(),defaultBackground:e.getPropertyValue("--defaultBackground").trim(),lighterBackground:e.getPropertyValue("--lighterBackground").trim(),selectionBackground:e.getPropertyValue("--selectionBackground").trim(),highlightBackground:e.getPropertyValue("--highlightBackground").trim(),darkForeground:e.getPropertyValue("--darkForeground").trim(),defaultForeground:e.getPropertyValue("--defaultForeground").trim(),lightForeground:e.getPropertyValue("--lightForeground").trim(),lightBackground:e.getPropertyValue("--lightBackground").trim(),primaryColor:e.getPropertyValue("--primaryColor").trim(),secondaryColor:e.getPropertyValue("--secondaryColor").trim(),positiveColor:e.getPropertyValue("--positiveColor").trim(),negativeColor:e.getPropertyValue("--negativeColor").trim(),warningColor:e.getPropertyValue("--warningColor").trim(),infoColor:e.getPropertyValue("--infoColor").trim()},(0,u.merge)(l.default.Global,(c(t={defaultShapeFillColor:a.infoColor},"defaultShapeFillColor",a.infoColor),c(t,"defaultShapeStrokeColor",a.infoColor),c(t,"nodeLabel",{fill:a.defaultForeground}),c(t,"defaultNode",{style:{fill:a.infoColor,stroke:a.infoColor},color:a.infoColor}),c(t,"edgeLabel",{style:{fill:a.defaultForeground}}),c(t,"defaultEdge",{style:{stroke:a.selectionBackground},color:a.selectionBackground}),c(t,"comboLabel",{style:{fill:a.lighterBackground}}),t)),console.log("theme",l.default.Global),r.style.stroke=a.highlightBackground}(),s={active:{fill:a.positiveColor,stroke:a.positiveColor,lineWidth:2,shadowColor:a.positiveColor,shadowBlur:10},selected:{fill:a.positiveColor,stroke:a.positiveColor,lineWidth:4,shadowColor:a.positiveColor,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:a.positiveColor,stroke:a.positiveColor,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:a.lighterBackground,stroke:a.lighterBackground,lineWidth:1,"text-shape":{fill:a.defaultBackground}},disable:{fill:a.lightBackground,stroke:a.lightBackground,lineWidth:1,"text-shape":{fill:a.defaultBackground}},highlightItem:{shadowBlur:4,shadowColor:a.infoColor},hoveredItem:{lineWidth:4},selectedItem:{fill:a.primaryColor,stroke:a.primaryColor,lineWidth:3},unselectedItem:{fill:a.selectionBackground,stroke:a.selectionBackground,"text-shape":{fill:a.defaultBackground}}},o={active:{stroke:a.positiveColor,lineWidth:1},selected:{stroke:a.positiveColor,lineWidth:2,shadowColor:a.positiveColor,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:a.positiveColor,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:a.lighterBackground,lineWidth:1},disable:{stroke:a.lighterBackground,lineWidth:1},hoveredItem:{lineWidth:4},selectedItem:{stroke:a.primaryColor,lineWidth:2},unselectedItem:{stroke:a.selectionBackground}},t.exports={globalDefaultColorVar:a,defaultEdgeStyle:r,nodeStateStyles:s,edgeStateStyles:o}},80814:t=>{"use strict";var e,n,i,r,o,a,s,l,u,c,h,d;r=function(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(t){var e;return(e=/^---\s*\n([\s\S]+?)\n---\s*\n*/.exec(t))?t.substring(e[0].trim().length+1):t}(t)},s=function(t,e){var n,i,r,o,a;return t=t||"",n=s.canvas||(s.canvas=document.createElement("canvas")),s.charMWidth||(r=n.getContext("2d"),e&&(r.font=e),o=r.measureText(""),s.charMWidth=o.width),i=s.charMWidth,a=t.replace(/[^\x00-\xff]*/g,""),[(t.length-a.length/3)*i+4*i,i+2*i]},i=function(t,e,n){var i;return i=null,function(){var r,o;if(o=this,r=arguments,clearTimeout(i),i=setTimeout((function(){if(i=null,!n)return t.apply(o,r)}),e),n&&!i)return t.apply(o,r)}},d=function(t,e){var n;return n=null,function(){var i,r;if(r=this,i=arguments,null===n)return n=setTimeout((function(){return t.apply(r,i),n=null}),e)}},o=function(t){var e;return e={inNodes:[],outNodes:[],inEdges:[],outEdges:[]},t?"edge"===t.getType()?(e.edge=t,e.inNodes.push(t.getTarget()),e.outNodes.push(t.getSource()),e):("node"!==t.getType()||(e.node=t,t.getInEdges().forEach((function(t){var n,i;if(n=(i=t.getSource()).get("model"),e.inEdges.push(t),e.inNodes.push(i),"xsj"===n.xsjType)return i.getInEdges().forEach((function(t){return e.inEdges.push(t),e.inNodes.push(t.getSource())}))})),t.getOutEdges().forEach((function(t){var n,i;if(n=(i=t.getTarget()).get("model"),e.outEdges.push(t),e.outNodes.push(i),"xsj"===n.xsjType)return i.getOutEdges().forEach((function(t){return e.outEdges.push(t),e.outNodes.push(t.getTarget())}))}))),e):e},c=function(t,e){var n,i;for(n in t)i=t[n],"node"===n||"edge"===n?i.setState("hoveredItem",!0):i.forEach((function(t){return t.setState("hoveredItem",!0)}));return u(t)},u=function(t){var e,n,i;for(e in n=[],t)i=t[e],"node"===e||"edge"===e?n.push(i.toFront()):n.push(i.forEach((function(t){return t.toFront()})));return n},l=function(t){if(t.getNodes().forEach((function(t){return t.toFront()})),t.xsjState&&t.xsjState.selectedItems)return u(t.xsjState.selectedItems)},e=function(t,e,n){var i,r;for(i in e)r=e[i],"node"===i||"edge"===i?r.clearStates(n):r.forEach((function(t){return t.clearStates(n)}));return l(t)},h=function(t,e){var n,i,r;for(n in i=o(e),t.getNodes().forEach((function(t){return t.setState("unselectedItem",!0)})),t.getEdges().forEach((function(t){return t.setState("unselectedItem",!0)})),i)r=i[n],"node"===n||"edge"===n?(r.clearStates("unselectedItem"),r.setState("selectedItem",!0),r.toFront()):r.forEach((function(t){return t.clearStates("unselectedItem"),t.setState("selectedItem",!0),t.toFront()}));return t.xsjState.selectedItems=i},n=function(t){var e,n,i;if(t.xsjState.selectedItems){for(e in n=t.xsjState.selectedItems)i=n[e],"node"===e||"edge"===e?i.clearStates(["selectedItem"]):i.forEach((function(t){return t.clearStates(["selectedItem"])}));return t.getNodes().forEach((function(t){return t.clearStates(["unselectedItem"])})),t.getEdges().forEach((function(t){return t.clearStates(["unselectedItem"])})),t.xsjState.selectedItems=null}},t.exports={escapeHtml:r,getRealContent:a,getTextMetrics:s,debounce:i,throttle:d,clearItemStates:e,makeStatedItemFront:u,setItemStates:c,makeNodeFront:l,getNeighborItems:o,clearSelectedItemStates:n,setSelectedItemStates:h}},48168:(t,e,n)=>{var i=n(8874),r={};for(var o in i)i.hasOwnProperty(o)&&(r[i[o]]=o);var a=t.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var s in a)if(a.hasOwnProperty(s)){if(!("channels"in a[s]))throw new Error("missing channels property: "+s);if(!("labels"in a[s]))throw new Error("missing channel labels property: "+s);if(a[s].labels.length!==a[s].channels)throw new Error("channel and label counts mismatch: "+s);var l=a[s].channels,u=a[s].labels;delete a[s].channels,delete a[s].labels,Object.defineProperty(a[s],"channels",{value:l}),Object.defineProperty(a[s],"labels",{value:u})}a.rgb.hsl=function(t){var e,n,i=t[0]/255,r=t[1]/255,o=t[2]/255,a=Math.min(i,r,o),s=Math.max(i,r,o),l=s-a;return s===a?e=0:i===s?e=(r-o)/l:r===s?e=2+(o-i)/l:o===s&&(e=4+(i-r)/l),(e=Math.min(60*e,360))<0&&(e+=360),n=(a+s)/2,[e,100*(s===a?0:n<=.5?l/(s+a):l/(2-s-a)),100*n]},a.rgb.hsv=function(t){var e,n,i,r,o,a=t[0]/255,s=t[1]/255,l=t[2]/255,u=Math.max(a,s,l),c=u-Math.min(a,s,l),h=function(t){return(u-t)/6/c+.5};return 0===c?r=o=0:(o=c/u,e=h(a),n=h(s),i=h(l),a===u?r=i-n:s===u?r=1/3+e-i:l===u&&(r=2/3+n-e),r<0?r+=1:r>1&&(r-=1)),[360*r,100*o,100*u]},a.rgb.hwb=function(t){var e=t[0],n=t[1],i=t[2];return[a.rgb.hsl(t)[0],100*(1/255*Math.min(e,Math.min(n,i))),100*(i=1-1/255*Math.max(e,Math.max(n,i)))]},a.rgb.cmyk=function(t){var e,n=t[0]/255,i=t[1]/255,r=t[2]/255;return[100*((1-n-(e=Math.min(1-n,1-i,1-r)))/(1-e)||0),100*((1-i-e)/(1-e)||0),100*((1-r-e)/(1-e)||0),100*e]},a.rgb.keyword=function(t){var e=r[t];if(e)return e;var n,o,a,s=1/0;for(var l in i)if(i.hasOwnProperty(l)){var u=i[l],c=(o=t,a=u,Math.pow(o[0]-a[0],2)+Math.pow(o[1]-a[1],2)+Math.pow(o[2]-a[2],2));c<s&&(s=c,n=l)}return n},a.keyword.rgb=function(t){return i[t]},a.rgb.xyz=function(t){var e=t[0]/255,n=t[1]/255,i=t[2]/255;return[100*(.4124*(e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92)+.3576*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)+.1805*(i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92)),100*(.2126*e+.7152*n+.0722*i),100*(.0193*e+.1192*n+.9505*i)]},a.rgb.lab=function(t){var e=a.rgb.xyz(t),n=e[0],i=e[1],r=e[2];return i/=100,r/=108.883,n=(n/=95.047)>.008856?Math.pow(n,1/3):7.787*n+16/116,[116*(i=i>.008856?Math.pow(i,1/3):7.787*i+16/116)-16,500*(n-i),200*(i-(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116))]},a.hsl.rgb=function(t){var e,n,i,r,o,a=t[0]/360,s=t[1]/100,l=t[2]/100;if(0===s)return[o=255*l,o,o];e=2*l-(n=l<.5?l*(1+s):l+s-l*s),r=[0,0,0];for(var u=0;u<3;u++)(i=a+1/3*-(u-1))<0&&i++,i>1&&i--,o=6*i<1?e+6*(n-e)*i:2*i<1?n:3*i<2?e+(n-e)*(2/3-i)*6:e,r[u]=255*o;return r},a.hsl.hsv=function(t){var e=t[0],n=t[1]/100,i=t[2]/100,r=n,o=Math.max(i,.01);return n*=(i*=2)<=1?i:2-i,r*=o<=1?o:2-o,[e,100*(0===i?2*r/(o+r):2*n/(i+n)),100*((i+n)/2)]},a.hsv.rgb=function(t){var e=t[0]/60,n=t[1]/100,i=t[2]/100,r=Math.floor(e)%6,o=e-Math.floor(e),a=255*i*(1-n),s=255*i*(1-n*o),l=255*i*(1-n*(1-o));switch(i*=255,r){case 0:return[i,l,a];case 1:return[s,i,a];case 2:return[a,i,l];case 3:return[a,s,i];case 4:return[l,a,i];case 5:return[i,a,s]}},a.hsv.hsl=function(t){var e,n,i,r=t[0],o=t[1]/100,a=t[2]/100,s=Math.max(a,.01);return i=(2-o)*a,n=o*s,[r,100*(n=(n/=(e=(2-o)*s)<=1?e:2-e)||0),100*(i/=2)]},a.hwb.rgb=function(t){var e,n,i,r,o,a,s,l=t[0]/360,u=t[1]/100,c=t[2]/100,h=u+c;switch(h>1&&(u/=h,c/=h),i=6*l-(e=Math.floor(6*l)),0!=(1&e)&&(i=1-i),r=u+i*((n=1-c)-u),e){default:o=n,a=r,s=u;break;case 1:o=r,a=n,s=u;break;case 2:o=u,a=n,s=r;break;case 3:o=u,a=r,s=n;break;case 4:o=r,a=u,s=n;break;case 5:o=n,a=u,s=r}return[255*o,255*a,255*s]},a.cmyk.rgb=function(t){var e=t[0]/100,n=t[1]/100,i=t[2]/100,r=t[3]/100;return[255*(1-Math.min(1,e*(1-r)+r)),255*(1-Math.min(1,n*(1-r)+r)),255*(1-Math.min(1,i*(1-r)+r))]},a.xyz.rgb=function(t){var e,n,i,r=t[0]/100,o=t[1]/100,a=t[2]/100;return n=-.9689*r+1.8758*o+.0415*a,i=.0557*r+-.204*o+1.057*a,e=(e=3.2406*r+-1.5372*o+-.4986*a)>.0031308?1.055*Math.pow(e,1/2.4)-.055:12.92*e,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n,i=i>.0031308?1.055*Math.pow(i,1/2.4)-.055:12.92*i,[255*(e=Math.min(Math.max(0,e),1)),255*(n=Math.min(Math.max(0,n),1)),255*(i=Math.min(Math.max(0,i),1))]},a.xyz.lab=function(t){var e=t[0],n=t[1],i=t[2];return n/=100,i/=108.883,e=(e/=95.047)>.008856?Math.pow(e,1/3):7.787*e+16/116,[116*(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116)-16,500*(e-n),200*(n-(i=i>.008856?Math.pow(i,1/3):7.787*i+16/116))]},a.lab.xyz=function(t){var e,n,i,r=t[0];e=t[1]/500+(n=(r+16)/116),i=n-t[2]/200;var o=Math.pow(n,3),a=Math.pow(e,3),s=Math.pow(i,3);return n=o>.008856?o:(n-16/116)/7.787,e=a>.008856?a:(e-16/116)/7.787,i=s>.008856?s:(i-16/116)/7.787,[e*=95.047,n*=100,i*=108.883]},a.lab.lch=function(t){var e,n=t[0],i=t[1],r=t[2];return(e=360*Math.atan2(r,i)/2/Math.PI)<0&&(e+=360),[n,Math.sqrt(i*i+r*r),e]},a.lch.lab=function(t){var e,n=t[0],i=t[1];return e=t[2]/360*2*Math.PI,[n,i*Math.cos(e),i*Math.sin(e)]},a.rgb.ansi16=function(t){var e=t[0],n=t[1],i=t[2],r=1 in arguments?arguments[1]:a.rgb.hsv(t)[2];if(0===(r=Math.round(r/50)))return 30;var o=30+(Math.round(i/255)<<2|Math.round(n/255)<<1|Math.round(e/255));return 2===r&&(o+=60),o},a.hsv.ansi16=function(t){return a.rgb.ansi16(a.hsv.rgb(t),t[2])},a.rgb.ansi256=function(t){var e=t[0],n=t[1],i=t[2];return e===n&&n===i?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(n/255*5)+Math.round(i/255*5)},a.ansi16.rgb=function(t){var e=t%10;if(0===e||7===e)return t>50&&(e+=3.5),[e=e/10.5*255,e,e];var n=.5*(1+~~(t>50));return[(1&e)*n*255,(e>>1&1)*n*255,(e>>2&1)*n*255]},a.ansi256.rgb=function(t){if(t>=232){var e=10*(t-232)+8;return[e,e,e]}var n;return t-=16,[Math.floor(t/36)/5*255,Math.floor((n=t%36)/6)/5*255,n%6/5*255]},a.rgb.hex=function(t){var e=(((255&Math.round(t[0]))<<16)+((255&Math.round(t[1]))<<8)+(255&Math.round(t[2]))).toString(16).toUpperCase();return"000000".substring(e.length)+e},a.hex.rgb=function(t){var e=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];var n=e[0];3===e[0].length&&(n=n.split("").map((function(t){return t+t})).join(""));var i=parseInt(n,16);return[i>>16&255,i>>8&255,255&i]},a.rgb.hcg=function(t){var e,n=t[0]/255,i=t[1]/255,r=t[2]/255,o=Math.max(Math.max(n,i),r),a=Math.min(Math.min(n,i),r),s=o-a;return e=s<=0?0:o===n?(i-r)/s%6:o===i?2+(r-n)/s:4+(n-i)/s+4,e/=6,[360*(e%=1),100*s,100*(s<1?a/(1-s):0)]},a.hsl.hcg=function(t){var e=t[1]/100,n=t[2]/100,i=1,r=0;return(i=n<.5?2*e*n:2*e*(1-n))<1&&(r=(n-.5*i)/(1-i)),[t[0],100*i,100*r]},a.hsv.hcg=function(t){var e=t[1]/100,n=t[2]/100,i=e*n,r=0;return i<1&&(r=(n-i)/(1-i)),[t[0],100*i,100*r]},a.hcg.rgb=function(t){var e=t[0]/360,n=t[1]/100,i=t[2]/100;if(0===n)return[255*i,255*i,255*i];var r,o=[0,0,0],a=e%1*6,s=a%1,l=1-s;switch(Math.floor(a)){case 0:o[0]=1,o[1]=s,o[2]=0;break;case 1:o[0]=l,o[1]=1,o[2]=0;break;case 2:o[0]=0,o[1]=1,o[2]=s;break;case 3:o[0]=0,o[1]=l,o[2]=1;break;case 4:o[0]=s,o[1]=0,o[2]=1;break;default:o[0]=1,o[1]=0,o[2]=l}return r=(1-n)*i,[255*(n*o[0]+r),255*(n*o[1]+r),255*(n*o[2]+r)]},a.hcg.hsv=function(t){var e=t[1]/100,n=e+t[2]/100*(1-e),i=0;return n>0&&(i=e/n),[t[0],100*i,100*n]},a.hcg.hsl=function(t){var e=t[1]/100,n=t[2]/100*(1-e)+.5*e,i=0;return n>0&&n<.5?i=e/(2*n):n>=.5&&n<1&&(i=e/(2*(1-n))),[t[0],100*i,100*n]},a.hcg.hwb=function(t){var e=t[1]/100,n=e+t[2]/100*(1-e);return[t[0],100*(n-e),100*(1-n)]},a.hwb.hcg=function(t){var e=t[1]/100,n=1-t[2]/100,i=n-e,r=0;return i<1&&(r=(n-i)/(1-i)),[t[0],100*i,100*r]},a.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]},a.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]},a.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]},a.gray.hsl=a.gray.hsv=function(t){return[0,0,t[0]]},a.gray.hwb=function(t){return[0,100,t[0]]},a.gray.cmyk=function(t){return[0,0,0,t[0]]},a.gray.lab=function(t){return[t[0],0,0]},a.gray.hex=function(t){var e=255&Math.round(t[0]/100*255),n=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".substring(n.length)+n},a.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]}},12085:(t,e,n)=>{var i=n(48168),r=n(4111),o={};Object.keys(i).forEach((function(t){o[t]={},Object.defineProperty(o[t],"channels",{value:i[t].channels}),Object.defineProperty(o[t],"labels",{value:i[t].labels});var e=r(t);Object.keys(e).forEach((function(n){var i=e[n];o[t][n]=function(t){var e=function(e){if(null==e)return e;arguments.length>1&&(e=Array.prototype.slice.call(arguments));var n=t(e);if("object"==typeof n)for(var i=n.length,r=0;r<i;r++)n[r]=Math.round(n[r]);return n};return"conversion"in t&&(e.conversion=t.conversion),e}(i),o[t][n].raw=function(t){var e=function(e){return null==e?e:(arguments.length>1&&(e=Array.prototype.slice.call(arguments)),t(e))};return"conversion"in t&&(e.conversion=t.conversion),e}(i)}))})),t.exports=o},4111:(t,e,n)=>{var i=n(48168);function r(t){var e=function(){for(var t={},e=Object.keys(i),n=e.length,r=0;r<n;r++)t[e[r]]={distance:-1,parent:null};return t}(),n=[t];for(e[t].distance=0;n.length;)for(var r=n.pop(),o=Object.keys(i[r]),a=o.length,s=0;s<a;s++){var l=o[s],u=e[l];-1===u.distance&&(u.distance=e[r].distance+1,u.parent=r,n.unshift(l))}return e}function o(t,e){return function(n){return e(t(n))}}function a(t,e){for(var n=[e[t].parent,t],r=i[e[t].parent][t],a=e[t].parent;e[a].parent;)n.unshift(e[a].parent),r=o(i[e[a].parent][a],r),a=e[a].parent;return r.conversion=n,r}t.exports=function(t){for(var e=r(t),n={},i=Object.keys(e),o=i.length,s=0;s<o;s++){var l=i[s];null!==e[l].parent&&(n[l]=a(l,e))}return n}},8874:t=>{"use strict";t.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},19818:(t,e,n)=>{var i=n(8874),r=n(86851),o={};for(var a in i)i.hasOwnProperty(a)&&(o[i[a]]=a);var s=t.exports={to:{},get:{}};function l(t,e,n){return Math.min(Math.max(e,t),n)}function u(t){var e=t.toString(16).toUpperCase();return e.length<2?"0"+e:e}s.get=function(t){var e,n;switch(t.substring(0,3).toLowerCase()){case"hsl":e=s.get.hsl(t),n="hsl";break;case"hwb":e=s.get.hwb(t),n="hwb";break;default:e=s.get.rgb(t),n="rgb"}return e?{model:n,value:e}:null},s.get.rgb=function(t){if(!t)return null;var e,n,r,o=[0,0,0,1];if(e=t.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(r=e[2],e=e[1],n=0;n<3;n++){var a=2*n;o[n]=parseInt(e.slice(a,a+2),16)}r&&(o[3]=parseInt(r,16)/255)}else if(e=t.match(/^#([a-f0-9]{3,4})$/i)){for(r=(e=e[1])[3],n=0;n<3;n++)o[n]=parseInt(e[n]+e[n],16);r&&(o[3]=parseInt(r+r,16)/255)}else if(e=t.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)){for(n=0;n<3;n++)o[n]=parseInt(e[n+1],0);e[4]&&(o[3]=parseFloat(e[4]))}else{if(!(e=t.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)))return(e=t.match(/(\D+)/))?"transparent"===e[1]?[0,0,0,0]:(o=i[e[1]])?(o[3]=1,o):null:null;for(n=0;n<3;n++)o[n]=Math.round(2.55*parseFloat(e[n+1]));e[4]&&(o[3]=parseFloat(e[4]))}for(n=0;n<3;n++)o[n]=l(o[n],0,255);return o[3]=l(o[3],0,1),o},s.get.hsl=function(t){if(!t)return null;var e=t.match(/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?[\d\.]+)\s*)?\)$/);if(e){var n=parseFloat(e[4]);return[(parseFloat(e[1])+360)%360,l(parseFloat(e[2]),0,100),l(parseFloat(e[3]),0,100),l(isNaN(n)?1:n,0,1)]}return null},s.get.hwb=function(t){if(!t)return null;var e=t.match(/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(e){var n=parseFloat(e[4]);return[(parseFloat(e[1])%360+360)%360,l(parseFloat(e[2]),0,100),l(parseFloat(e[3]),0,100),l(isNaN(n)?1:n,0,1)]}return null},s.to.hex=function(){var t=r(arguments);return"#"+u(t[0])+u(t[1])+u(t[2])+(t[3]<1?u(Math.round(255*t[3])):"")},s.to.rgb=function(){var t=r(arguments);return t.length<4||1===t[3]?"rgb("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+")":"rgba("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+", "+t[3]+")"},s.to.rgb.percent=function(){var t=r(arguments),e=Math.round(t[0]/255*100),n=Math.round(t[1]/255*100),i=Math.round(t[2]/255*100);return t.length<4||1===t[3]?"rgb("+e+"%, "+n+"%, "+i+"%)":"rgba("+e+"%, "+n+"%, "+i+"%, "+t[3]+")"},s.to.hsl=function(){var t=r(arguments);return t.length<4||1===t[3]?"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)":"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+t[3]+")"},s.to.hwb=function(){var t=r(arguments),e="";return t.length>=4&&1!==t[3]&&(e=", "+t[3]),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+e+")"},s.to.keyword=function(t){return o[t.slice(0,3)]}},6767:(t,e,n)=>{"use strict";var i=n(19818),r=n(12085),o=[].slice,a=["keyword","gray","hex"],s={};Object.keys(r).forEach((function(t){s[o.call(r[t].labels).sort().join("")]=t}));var l={};function u(t,e){if(!(this instanceof u))return new u(t,e);if(e&&e in a&&(e=null),e&&!(e in r))throw new Error("Unknown model: "+e);var n,c;if(null==t)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(t instanceof u)this.model=t.model,this.color=t.color.slice(),this.valpha=t.valpha;else if("string"==typeof t){var h=i.get(t);if(null===h)throw new Error("Unable to parse color from string: "+t);this.model=h.model,c=r[this.model].channels,this.color=h.value.slice(0,c),this.valpha="number"==typeof h.value[c]?h.value[c]:1}else if(t.length){this.model=e||"rgb",c=r[this.model].channels;var d=o.call(t,0,c);this.color=f(d,c),this.valpha="number"==typeof t[c]?t[c]:1}else if("number"==typeof t)t&=16777215,this.model="rgb",this.color=[t>>16&255,t>>8&255,255&t],this.valpha=1;else{this.valpha=1;var p=Object.keys(t);"alpha"in t&&(p.splice(p.indexOf("alpha"),1),this.valpha="number"==typeof t.alpha?t.alpha:0);var m=p.sort().join("");if(!(m in s))throw new Error("Unable to parse color from object: "+JSON.stringify(t));this.model=s[m];var g=r[this.model].labels,v=[];for(n=0;n<g.length;n++)v.push(t[g[n]]);this.color=f(v)}if(l[this.model])for(c=r[this.model].channels,n=0;n<c;n++){var y=l[this.model][n];y&&(this.color[n]=y(this.color[n]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}function c(t,e,n){return(t=Array.isArray(t)?t:[t]).forEach((function(t){(l[t]||(l[t]=[]))[e]=n})),t=t[0],function(i){var r;return arguments.length?(n&&(i=n(i)),(r=this[t]()).color[e]=i,r):(r=this[t]().color[e],n&&(r=n(r)),r)}}function h(t){return function(e){return Math.max(0,Math.min(t,e))}}function d(t){return Array.isArray(t)?t:[t]}function f(t,e){for(var n=0;n<e;n++)"number"!=typeof t[n]&&(t[n]=0);return t}u.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(t){var e=this.model in i.to?this:this.rgb(),n=1===(e=e.round("number"==typeof t?t:1)).valpha?e.color:e.color.concat(this.valpha);return i.to[e.model](n)},percentString:function(t){var e=this.rgb().round("number"==typeof t?t:1),n=1===e.valpha?e.color:e.color.concat(this.valpha);return i.to.rgb.percent(n)},array:function(){return 1===this.valpha?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var t={},e=r[this.model].channels,n=r[this.model].labels,i=0;i<e;i++)t[n[i]]=this.color[i];return 1!==this.valpha&&(t.alpha=this.valpha),t},unitArray:function(){var t=this.rgb().color;return t[0]/=255,t[1]/=255,t[2]/=255,1!==this.valpha&&t.push(this.valpha),t},unitObject:function(){var t=this.rgb().object();return t.r/=255,t.g/=255,t.b/=255,1!==this.valpha&&(t.alpha=this.valpha),t},round:function(t){return t=Math.max(t||0,0),new u(this.color.map(function(t){return function(e){return function(t,e){return Number(t.toFixed(e))}(e,t)}}(t)).concat(this.valpha),this.model)},alpha:function(t){return arguments.length?new u(this.color.concat(Math.max(0,Math.min(1,t))),this.model):this.valpha},red:c("rgb",0,h(255)),green:c("rgb",1,h(255)),blue:c("rgb",2,h(255)),hue:c(["hsl","hsv","hsl","hwb","hcg"],0,(function(t){return(t%360+360)%360})),saturationl:c("hsl",1,h(100)),lightness:c("hsl",2,h(100)),saturationv:c("hsv",1,h(100)),value:c("hsv",2,h(100)),chroma:c("hcg",1,h(100)),gray:c("hcg",2,h(100)),white:c("hwb",1,h(100)),wblack:c("hwb",2,h(100)),cyan:c("cmyk",0,h(100)),magenta:c("cmyk",1,h(100)),yellow:c("cmyk",2,h(100)),black:c("cmyk",3,h(100)),x:c("xyz",0,h(100)),y:c("xyz",1,h(100)),z:c("xyz",2,h(100)),l:c("lab",0,h(100)),a:c("lab",1),b:c("lab",2),keyword:function(t){return arguments.length?new u(t):r[this.model].keyword(this.color)},hex:function(t){return arguments.length?new u(t):i.to.hex(this.rgb().round().color)},rgbNumber:function(){var t=this.rgb().color;return(255&t[0])<<16|(255&t[1])<<8|255&t[2]},luminosity:function(){for(var t=this.rgb().color,e=[],n=0;n<t.length;n++){var i=t[n]/255;e[n]=i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4)}return.2126*e[0]+.7152*e[1]+.0722*e[2]},contrast:function(t){var e=this.luminosity(),n=t.luminosity();return e>n?(e+.05)/(n+.05):(n+.05)/(e+.05)},level:function(t){var e=this.contrast(t);return e>=7.1?"AAA":e>=4.5?"AA":""},isDark:function(){var t=this.rgb().color;return(299*t[0]+587*t[1]+114*t[2])/1e3<128},isLight:function(){return!this.isDark()},negate:function(){for(var t=this.rgb(),e=0;e<3;e++)t.color[e]=255-t.color[e];return t},lighten:function(t){var e=this.hsl();return e.color[2]+=e.color[2]*t,e},darken:function(t){var e=this.hsl();return e.color[2]-=e.color[2]*t,e},saturate:function(t){var e=this.hsl();return e.color[1]+=e.color[1]*t,e},desaturate:function(t){var e=this.hsl();return e.color[1]-=e.color[1]*t,e},whiten:function(t){var e=this.hwb();return e.color[1]+=e.color[1]*t,e},blacken:function(t){var e=this.hwb();return e.color[2]+=e.color[2]*t,e},grayscale:function(){var t=this.rgb().color,e=.3*t[0]+.59*t[1]+.11*t[2];return u.rgb(e,e,e)},fade:function(t){return this.alpha(this.valpha-this.valpha*t)},opaquer:function(t){return this.alpha(this.valpha+this.valpha*t)},rotate:function(t){var e=this.hsl(),n=e.color[0];return n=(n=(n+t)%360)<0?360+n:n,e.color[0]=n,e},mix:function(t,e){if(!t||!t.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof t);var n=t.rgb(),i=this.rgb(),r=void 0===e?.5:e,o=2*r-1,a=n.alpha()-i.alpha(),s=((o*a==-1?o:(o+a)/(1+o*a))+1)/2,l=1-s;return u.rgb(s*n.red()+l*i.red(),s*n.green()+l*i.green(),s*n.blue()+l*i.blue(),n.alpha()*r+i.alpha()*(1-r))}},Object.keys(r).forEach((function(t){if(-1===a.indexOf(t)){var e=r[t].channels;u.prototype[t]=function(){if(this.model===t)return new u(this);if(arguments.length)return new u(arguments,t);var n="number"==typeof arguments[e]?e:this.valpha;return new u(d(r[this.model][t].raw(this.color)).concat(n),t)},u[t]=function(n){return"number"==typeof n&&(n=f(o.call(arguments),e)),new u(n,t)}}})),t.exports=u},98767:t=>{function e(t){if(t)return function(t){for(var n in e.prototype)t[n]=e.prototype[n];return t}(t)}t.exports=e,e.prototype.on=e.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},e.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,i=this._callbacks["$"+t];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var r=0;r<i.length;r++)if((n=i[r])===e||n.fn===e){i.splice(r,1);break}return 0===i.length&&delete this._callbacks["$"+t],this},e.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(n){i=0;for(var r=(n=n.slice(0)).length;i<r;++i)n[i].apply(this,e)}return this},e.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},e.prototype.hasListeners=function(t){return!!this.listeners(t).length}},32667:(t,e,n)=>{var i=n(9950),r=n(25419);n(17381);function o(t){return null==t}function a(t){(t=function(t){var e={};for(var n in t)e[n]=t[n];return e}(t||{})).whiteList=t.whiteList||i.whiteList,t.onAttr=t.onAttr||i.onAttr,t.onIgnoreAttr=t.onIgnoreAttr||i.onIgnoreAttr,t.safeAttrValue=t.safeAttrValue||i.safeAttrValue,this.options=t}a.prototype.process=function(t){if(!(t=(t=t||"").toString()))return"";var e=this.options,n=e.whiteList,i=e.onAttr,a=e.onIgnoreAttr,s=e.safeAttrValue;return r(t,(function(t,e,r,l,u){var c=n[r],h=!1;if(!0===c?h=c:"function"==typeof c?h=c(l):c instanceof RegExp&&(h=c.test(l)),!0!==h&&(h=!1),l=s(r,l)){var d,f={position:e,sourcePosition:t,source:u,isWhite:h};return h?o(d=i(r,l,f))?r+":"+l:d:o(d=a(r,l,f))?void 0:d}}))},t.exports=a},9950:(t,e)=>{function n(){var t={"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1};return t}var i=/javascript\s*\:/gim;e.whiteList=n(),e.getDefaultWhiteList=n,e.onAttr=function(t,e,n){},e.onIgnoreAttr=function(t,e,n){},e.safeAttrValue=function(t,e){return i.test(e)?"":e}},29970:(t,e,n)=>{var i=n(9950),r=n(32667);for(var o in(e=t.exports=function(t,e){return new r(e).process(t)}).FilterCSS=r,i)e[o]=i[o];"undefined"!=typeof window&&(window.filterCSS=t.exports)},25419:(t,e,n)=>{var i=n(17381);t.exports=function(t,e){";"!==(t=i.trimRight(t))[t.length-1]&&(t+=";");var n=t.length,r=!1,o=0,a=0,s="";function l(){if(!r){var n=i.trim(t.slice(o,a)),l=n.indexOf(":");if(-1!==l){var u=i.trim(n.slice(0,l)),c=i.trim(n.slice(l+1));if(u){var h=e(o,s.length,u,c,n);h&&(s+=h+"; ")}}}o=a+1}for(;a<n;a++){var u=t[a];if("/"===u&&"*"===t[a+1]){var c=t.indexOf("*/",a+2);if(-1===c)break;o=(a=c+1)+1,r=!1}else"("===u?r=!0:")"===u?r=!1:";"===u?r||l():"\n"===u&&l()}return i.trim(s)}},17381:t=>{t.exports={indexOf:function(t,e){var n,i;if(Array.prototype.indexOf)return t.indexOf(e);for(n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},forEach:function(t,e,n){var i,r;if(Array.prototype.forEach)return t.forEach(e,n);for(i=0,r=t.length;i<r;i++)e.call(n,t[i],i,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(t){return String.prototype.trimRight?t.trimRight():t.replace(/(\s*$)/g,"")}}},16372:(t,e,n)=>{"use strict";n.d(e,{Il:()=>r,xV:()=>o,J5:()=>a,ZP:()=>_,SU:()=>M,B8:()=>E,Ss:()=>S});var i=n(44087);function r(){}var o=.7,a=1/o,s="\\s*([+-]?\\d+)\\s*",l="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",u="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",c=/^#([0-9a-f]{3,8})$/,h=new RegExp("^rgb\\("+[s,s,s]+"\\)$"),d=new RegExp("^rgb\\("+[u,u,u]+"\\)$"),f=new RegExp("^rgba\\("+[s,s,s,l]+"\\)$"),p=new RegExp("^rgba\\("+[u,u,u,l]+"\\)$"),m=new RegExp("^hsl\\("+[l,u,u]+"\\)$"),g=new RegExp("^hsla\\("+[l,u,u,l]+"\\)$"),v={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function y(){return this.rgb().formatHex()}function b(){return this.rgb().formatRgb()}function _(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=c.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?w(e):3===n?new S(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?x(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?x(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=h.exec(t))?new S(e[1],e[2],e[3],1):(e=d.exec(t))?new S(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=f.exec(t))?x(e[1],e[2],e[3],e[4]):(e=p.exec(t))?x(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=m.exec(t))?D(e[1],e[2]/100,e[3]/100,1):(e=g.exec(t))?D(e[1],e[2]/100,e[3]/100,e[4]):v.hasOwnProperty(t)?w(v[t]):"transparent"===t?new S(NaN,NaN,NaN,0):null}function w(t){return new S(t>>16&255,t>>8&255,255&t,1)}function x(t,e,n,i){return i<=0&&(t=e=n=NaN),new S(t,e,n,i)}function M(t){return t instanceof r||(t=_(t)),t?new S((t=t.rgb()).r,t.g,t.b,t.opacity):new S}function E(t,e,n,i){return 1===arguments.length?M(t):new S(t,e,n,null==i?1:i)}function S(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}function k(){return"#"+T(this.r)+T(this.g)+T(this.b)}function C(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function T(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function D(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new A(t,e,n,i)}function L(t){if(t instanceof A)return new A(t.h,t.s,t.l,t.opacity);if(t instanceof r||(t=_(t)),!t)return new A;if(t instanceof A)return t;var e=(t=t.rgb()).r/255,n=t.g/255,i=t.b/255,o=Math.min(e,n,i),a=Math.max(e,n,i),s=NaN,l=a-o,u=(a+o)/2;return l?(s=e===a?(n-i)/l+6*(n<i):n===a?(i-e)/l+2:(e-n)/l+4,l/=u<.5?a+o:2-a-o,s*=60):l=u>0&&u<1?0:s,new A(s,l,u,t.opacity)}function A(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function O(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}(0,i.Z)(r,_,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:y,formatHex:y,formatHsl:function(){return L(this).formatHsl()},formatRgb:b,toString:b}),(0,i.Z)(S,E,(0,i.l)(r,{brighter:function(t){return t=null==t?a:Math.pow(a,t),new S(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?o:Math.pow(o,t),new S(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:k,formatHex:k,formatRgb:C,toString:C})),(0,i.Z)(A,(function(t,e,n,i){return 1===arguments.length?L(t):new A(t,e,n,null==i?1:i)}),(0,i.l)(r,{brighter:function(t){return t=null==t?a:Math.pow(a,t),new A(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?o:Math.pow(o,t),new A(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new S(O(t>=240?t-240:t+120,r,i),O(t,r,i),O(t<120?t+240:t-120,r,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}))},44087:(t,e,n)=>{"use strict";function i(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function r(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}n.d(e,{Z:()=>i,l:()=>r})},92626:(t,e,n)=>{"use strict";n.d(e,{Z:()=>u});var i={value:()=>{}};function r(){for(var t,e=0,n=arguments.length,i={};e<n;++e){if(!(t=arguments[e]+"")||t in i||/[\s.]/.test(t))throw new Error("illegal type: "+t);i[t]=[]}return new o(i)}function o(t){this._=t}function a(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",i=t.indexOf(".");if(i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function s(t,e){for(var n,i=0,r=t.length;i<r;++i)if((n=t[i]).name===e)return n.value}function l(t,e,n){for(var r=0,o=t.length;r<o;++r)if(t[r].name===e){t[r]=i,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}o.prototype=r.prototype={constructor:o,on:function(t,e){var n,i=this._,r=a(t+"",i),o=-1,u=r.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<u;)if(n=(t=r[o]).type)i[n]=l(i[n],t.name,e);else if(null==e)for(n in i)i[n]=l(i[n],t.name,null);return this}for(;++o<u;)if((n=(t=r[o]).type)&&(n=s(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new o(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,i,r=new Array(n),o=0;o<n;++o)r[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(i=this._[t]).length;o<n;++o)i[o].value.apply(e,r)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,o=i.length;r<o;++r)i[r].value.apply(e,n)}};const u=r},68716:(t,e,n)=>{"use strict";function i(t){return t*t*t}function r(t){return--t*t*t+1}function o(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}n.d(e,{yD:()=>i,_e:()=>r,tw:()=>o})},88122:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o,M:()=>a});var i=n(81655),r=n(67896);function o(t,e){return((0,r.v)(e)?r.Z:a)(t,e)}function a(t,e){var n,r=e?e.length:0,o=t?Math.min(r,t.length):0,a=new Array(o),s=new Array(r);for(n=0;n<o;++n)a[n]=(0,i.Z)(t[n],e[n]);for(;n<r;++n)s[n]=e[n];return function(t){for(n=0;n<o;++n)s[n]=a[n](t);return s}}},85910:(t,e,n)=>{"use strict";n.d(e,{wx:()=>o,yi:()=>a,ZP:()=>s});var i=n(55302);function r(t,e){return function(n){return t+n*e}}function o(t,e){var n=e-t;return n?r(t,n>180||n<-180?n-360*Math.round(n/360):n):(0,i.Z)(isNaN(t)?e:t)}function a(t){return 1==(t=+t)?s:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}(e,n,t):(0,i.Z)(isNaN(e)?n:e)}}function s(t,e){var n=e-t;return n?r(t,n):(0,i.Z)(isNaN(t)?e:t)}},55302:(t,e,n)=>{"use strict";function i(t){return function(){return t}}n.d(e,{Z:()=>i})},73626:(t,e,n)=>{"use strict";function i(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}n.d(e,{Z:()=>i})},67896:(t,e,n)=>{"use strict";function i(t,e){e||(e=[]);var n,i=t?Math.min(e.length,t.length):0,r=e.slice();return function(o){for(n=0;n<i;++n)r[n]=t[n]*(1-o)+e[n]*o;return r}}function r(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}n.d(e,{Z:()=>i,v:()=>r})},3474:(t,e,n)=>{"use strict";n.d(e,{ZP:()=>a,hD:()=>l});var i=n(16372);function r(t,e,n,i,r){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*i+a*r)/6}var o=n(85910);const a=function t(e){var n=(0,o.yi)(e);function r(t,e){var r=n((t=(0,i.B8)(t)).r,(e=(0,i.B8)(e)).r),a=n(t.g,e.g),s=n(t.b,e.b),l=(0,o.ZP)(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=a(e),t.b=s(e),t.opacity=l(e),t+""}}return r.gamma=t,r}(1);function s(t){return function(e){var n,r,o=e.length,a=new Array(o),s=new Array(o),l=new Array(o);for(n=0;n<o;++n)r=(0,i.B8)(e[n]),a[n]=r.r||0,s[n]=r.g||0,l[n]=r.b||0;return a=t(a),s=t(s),l=t(l),r.opacity=1,function(t){return r.r=a(t),r.g=s(t),r.b=l(t),r+""}}}var l=s((function(t){var e=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),o=t[i],a=t[i+1],s=i>0?t[i-1]:2*o-a,l=i<e-1?t[i+2]:2*a-o;return r((n-i/e)*e,s,o,a,l)}}));s((function(t){var e=t.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*e),o=t[(i+e-1)%e],a=t[i%e],s=t[(i+1)%e],l=t[(i+2)%e];return r((n-i/e)*e,o,a,s,l)}}))},59843:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var i=n(73626),r=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,o=new RegExp(r.source,"g");function a(t,e){var n,a,s,l=r.lastIndex=o.lastIndex=0,u=-1,c=[],h=[];for(t+="",e+="";(n=r.exec(t))&&(a=o.exec(e));)(s=a.index)>l&&(s=e.slice(l,s),c[u]?c[u]+=s:c[++u]=s),(n=n[0])===(a=a[0])?c[u]?c[u]+=a:c[++u]=a:(c[++u]=null,h.push({i:u,x:(0,i.Z)(n,a)})),l=o.lastIndex;return l<e.length&&(s=e.slice(l),c[u]?c[u]+=s:c[++u]=s),c.length<2?h[0]?function(t){return function(e){return t(e)+""}}(h[0].x):function(t){return function(){return t}}(e):(e=h.length,function(t){for(var n,i=0;i<e;++i)c[(n=h[i]).i]=n.x(t);return c.join("")})}},81655:(t,e,n)=>{"use strict";n.d(e,{Z:()=>d});var i=n(16372),r=n(3474),o=n(88122);function a(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}var s=n(73626);function l(t,e){var n,i={},r={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?i[n]=d(t[n],e[n]):r[n]=e[n];return function(t){for(n in i)r[n]=i[n](t);return r}}var u=n(59843),c=n(55302),h=n(67896);function d(t,e){var n,d=typeof e;return null==e||"boolean"===d?(0,c.Z)(e):("number"===d?s.Z:"string"===d?(n=(0,i.ZP)(e))?(e=n,r.ZP):u.Z:e instanceof i.ZP?r.ZP:e instanceof Date?a:(0,h.v)(e)?h.Z:Array.isArray(e)?o.M:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?l:s.Z)(t,e)}},35374:(t,e,n)=>{"use strict";n.d(e,{zO:()=>f,B7:()=>m,HT:()=>g});var i,r,o=0,a=0,s=0,l=0,u=0,c=0,h="object"==typeof performance&&performance.now?performance:Date,d="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function f(){return u||(d(p),u=h.now()+c)}function p(){u=0}function m(){this._call=this._time=this._next=null}function g(t,e,n){var i=new m;return i.restart(t,e,n),i}function v(){u=(l=h.now())+c,o=a=0;try{!function(){f(),++o;for(var t,e=i;e;)(t=u-e._time)>=0&&e._call.call(null,t),e=e._next;--o}()}finally{o=0,function(){var t,e,n=i,o=1/0;for(;n;)n._call?(o>n._time&&(o=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:i=e);r=t,b(o)}(),u=0}}function y(){var t=h.now(),e=t-l;e>1e3&&(c-=e,l=t)}function b(t){o||(a&&(a=clearTimeout(a)),t-u>24?(t<1/0&&(a=setTimeout(v,t-h.now()-c)),s&&(s=clearInterval(s))):(s||(l=h.now(),s=setInterval(y,1e3)),o=1,d(v)))}m.prototype=g.prototype={constructor:m,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?f():+n)+(null==e?0:+e),this._next||r===this||(r?r._next=this:i=this,r=this),this._call=t,this._time=n,b()},stop:function(){this._call&&(this._call=null,this._time=1/0,b())}}},70681:(t,e,n)=>{t.exports={graphlib:n(70574),layout:n(98123),debug:n(27570),util:{time:n(11138).time,notime:n(11138).notime},version:n(88177)}},92188:(t,e,n)=>{"use strict";var i=n(38436),r=n(74079);t.exports={run:function(t){var e="greedy"===t.graph().acyclicer?r(t,function(t){return function(e){return t.edge(e).weight}}(t)):function(t){var e=[],n={},r={};function o(a){i.has(r,a)||(r[a]=!0,n[a]=!0,i.forEach(t.outEdges(a),(function(t){i.has(n,t.w)?e.push(t):o(t.w)})),delete n[a])}return i.forEach(t.nodes(),o),e}(t);i.forEach(e,(function(e){var n=t.edge(e);t.removeEdge(e),n.forwardName=e.name,n.reversed=!0,t.setEdge(e.w,e.v,n,i.uniqueId("rev"))}))},undo:function(t){i.forEach(t.edges(),(function(e){var n=t.edge(e);if(n.reversed){t.removeEdge(e);var i=n.forwardName;delete n.reversed,delete n.forwardName,t.setEdge(e.w,e.v,n,i)}}))}}},61133:(t,e,n)=>{var i=n(38436),r=n(11138);function o(t,e,n,i,o,a){var s={width:0,height:0,rank:a,borderType:e},l=o[e][a-1],u=r.addDummyNode(t,"border",s,n);o[e][a]=u,t.setParent(u,i),l&&t.setEdge(l,u,{weight:1})}t.exports=function(t){i.forEach(t.children(),(function e(n){var r=t.children(n),a=t.node(n);if(r.length&&i.forEach(r,e),i.has(a,"minRank")){a.borderLeft=[],a.borderRight=[];for(var s=a.minRank,l=a.maxRank+1;s<l;++s)o(t,"borderLeft","_bl",n,a,s),o(t,"borderRight","_br",n,a,s)}}))}},53258:(t,e,n)=>{"use strict";var i=n(38436);function r(t){i.forEach(t.nodes(),(function(e){o(t.node(e))})),i.forEach(t.edges(),(function(e){o(t.edge(e))}))}function o(t){var e=t.width;t.width=t.height,t.height=e}function a(t){t.y=-t.y}function s(t){var e=t.x;t.x=t.y,t.y=e}t.exports={adjust:function(t){var e=t.graph().rankdir.toLowerCase();"lr"!==e&&"rl"!==e||r(t)},undo:function(t){var e=t.graph().rankdir.toLowerCase();"bt"!==e&&"rl"!==e||function(t){i.forEach(t.nodes(),(function(e){a(t.node(e))})),i.forEach(t.edges(),(function(e){var n=t.edge(e);i.forEach(n.points,a),i.has(n,"y")&&a(n)}))}(t);"lr"!==e&&"rl"!==e||(!function(t){i.forEach(t.nodes(),(function(e){s(t.node(e))})),i.forEach(t.edges(),(function(e){var n=t.edge(e);i.forEach(n.points,s),i.has(n,"x")&&s(n)}))}(t),r(t))}}},77822:t=>{function e(){var t={};t._next=t._prev=t,this._sentinel=t}function n(t){t._prev._next=t._next,t._next._prev=t._prev,delete t._next,delete t._prev}function i(t,e){if("_next"!==t&&"_prev"!==t)return e}t.exports=e,e.prototype.dequeue=function(){var t=this._sentinel,e=t._prev;if(e!==t)return n(e),e},e.prototype.enqueue=function(t){var e=this._sentinel;t._prev&&t._next&&n(t),t._next=e._next,e._next._prev=t,e._next=t,t._prev=e},e.prototype.toString=function(){for(var t=[],e=this._sentinel,n=e._prev;n!==e;)t.push(JSON.stringify(n,i)),n=n._prev;return"["+t.join(", ")+"]"}},27570:(t,e,n)=>{var i=n(38436),r=n(11138),o=n(70574).Graph;t.exports={debugOrdering:function(t){var e=r.buildLayerMatrix(t),n=new o({compound:!0,multigraph:!0}).setGraph({});return i.forEach(t.nodes(),(function(e){n.setNode(e,{label:e}),n.setParent(e,"layer"+t.node(e).rank)})),i.forEach(t.edges(),(function(t){n.setEdge(t.v,t.w,{},t.name)})),i.forEach(e,(function(t,e){var r="layer"+e;n.setNode(r,{rank:"same"}),i.reduce(t,(function(t,e){return n.setEdge(t,e,{style:"invis"}),e}))})),n}}},70574:(t,e,n)=>{var i;try{i=n(28282)}catch(t){}i||(i=window.graphlib),t.exports=i},74079:(t,e,n)=>{var i=n(38436),r=n(70574).Graph,o=n(77822);t.exports=function(t,e){if(t.nodeCount()<=1)return[];var n=function(t,e){var n=new r,a=0,s=0;i.forEach(t.nodes(),(function(t){n.setNode(t,{v:t,in:0,out:0})})),i.forEach(t.edges(),(function(t){var i=n.edge(t.v,t.w)||0,r=e(t),o=i+r;n.setEdge(t.v,t.w,o),s=Math.max(s,n.node(t.v).out+=r),a=Math.max(a,n.node(t.w).in+=r)}));var u=i.range(s+a+3).map((function(){return new o})),c=a+1;return i.forEach(n.nodes(),(function(t){l(u,c,n.node(t))})),{graph:n,buckets:u,zeroIdx:c}}(t,e||a),u=function(t,e,n){var i,r=[],o=e[e.length-1],a=e[0];for(;t.nodeCount();){for(;i=a.dequeue();)s(t,e,n,i);for(;i=o.dequeue();)s(t,e,n,i);if(t.nodeCount())for(var l=e.length-2;l>0;--l)if(i=e[l].dequeue()){r=r.concat(s(t,e,n,i,!0));break}}return r}(n.graph,n.buckets,n.zeroIdx);return i.flatten(i.map(u,(function(e){return t.outEdges(e.v,e.w)})),!0)};var a=i.constant(1);function s(t,e,n,r,o){var a=o?[]:void 0;return i.forEach(t.inEdges(r.v),(function(i){var r=t.edge(i),s=t.node(i.v);o&&a.push({v:i.v,w:i.w}),s.out-=r,l(e,n,s)})),i.forEach(t.outEdges(r.v),(function(i){var r=t.edge(i),o=i.w,a=t.node(o);a.in-=r,l(e,n,a)})),t.removeNode(r.v),a}function l(t,e,n){n.out?n.in?t[n.out-n.in+e].enqueue(n):t[t.length-1].enqueue(n):t[0].enqueue(n)}},98123:(t,e,n)=>{"use strict";var i=n(38436),r=n(92188),o=n(45995),a=n(78093),s=n(11138).normalizeRanks,l=n(24219),u=n(11138).removeEmptyRanks,c=n(72981),h=n(61133),d=n(53258),f=n(53408),p=n(17873),m=n(11138),g=n(70574).Graph;t.exports=function(t,e){var n=e&&e.debugTiming?m.time:m.notime;n("layout",(function(){var e=n("  buildLayoutGraph",(function(){return function(t){var e=new g({multigraph:!0,compound:!0}),n=k(t.graph());return e.setGraph(i.merge({},y,S(n,v),i.pick(n,b))),i.forEach(t.nodes(),(function(n){var r=k(t.node(n));e.setNode(n,i.defaults(S(r,_),w)),e.setParent(n,t.parent(n))})),i.forEach(t.edges(),(function(n){var r=k(t.edge(n));e.setEdge(n,i.merge({},M,S(r,x),i.pick(r,E)))})),e}(t)}));n("  runLayout",(function(){!function(t,e){e("    makeSpaceForEdgeLabels",(function(){!function(t){var e=t.graph();e.ranksep/=2,i.forEach(t.edges(),(function(n){var i=t.edge(n);i.minlen*=2,"c"!==i.labelpos.toLowerCase()&&("TB"===e.rankdir||"BT"===e.rankdir?i.width+=i.labeloffset:i.height+=i.labeloffset)}))}(t)})),e("    removeSelfEdges",(function(){!function(t){i.forEach(t.edges(),(function(e){if(e.v===e.w){var n=t.node(e.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e,label:t.edge(e)}),t.removeEdge(e)}}))}(t)})),e("    acyclic",(function(){r.run(t)})),e("    nestingGraph.run",(function(){c.run(t)})),e("    rank",(function(){a(m.asNonCompoundGraph(t))})),e("    injectEdgeLabelProxies",(function(){!function(t){i.forEach(t.edges(),(function(e){var n=t.edge(e);if(n.width&&n.height){var i=t.node(e.v),r={rank:(t.node(e.w).rank-i.rank)/2+i.rank,e};m.addDummyNode(t,"edge-proxy",r,"_ep")}}))}(t)})),e("    removeEmptyRanks",(function(){u(t)})),e("    nestingGraph.cleanup",(function(){c.cleanup(t)})),e("    normalizeRanks",(function(){s(t)})),e("    assignRankMinMax",(function(){!function(t){var e=0;i.forEach(t.nodes(),(function(n){var r=t.node(n);r.borderTop&&(r.minRank=t.node(r.borderTop).rank,r.maxRank=t.node(r.borderBottom).rank,e=i.max(e,r.maxRank))})),t.graph().maxRank=e}(t)})),e("    removeEdgeLabelProxies",(function(){!function(t){i.forEach(t.nodes(),(function(e){var n=t.node(e);"edge-proxy"===n.dummy&&(t.edge(n.e).labelRank=n.rank,t.removeNode(e))}))}(t)})),e("    normalize.run",(function(){o.run(t)})),e("    parentDummyChains",(function(){l(t)})),e("    addBorderSegments",(function(){h(t)})),e("    order",(function(){f(t)})),e("    insertSelfEdges",(function(){!function(t){var e=m.buildLayerMatrix(t);i.forEach(e,(function(e){var n=0;i.forEach(e,(function(e,r){var o=t.node(e);o.order=r+n,i.forEach(o.selfEdges,(function(e){m.addDummyNode(t,"selfedge",{width:e.label.width,height:e.label.height,rank:o.rank,order:r+ ++n,e:e.e,label:e.label},"_se")})),delete o.selfEdges}))}))}(t)})),e("    adjustCoordinateSystem",(function(){d.adjust(t)})),e("    position",(function(){p(t)})),e("    positionSelfEdges",(function(){!function(t){i.forEach(t.nodes(),(function(e){var n=t.node(e);if("selfedge"===n.dummy){var i=t.node(n.e.v),r=i.x+i.width/2,o=i.y,a=n.x-r,s=i.height/2;t.setEdge(n.e,n.label),t.removeNode(e),n.label.points=[{x:r+2*a/3,y:o-s},{x:r+5*a/6,y:o-s},{x:r+a,y:o},{x:r+5*a/6,y:o+s},{x:r+2*a/3,y:o+s}],n.label.x=n.x,n.label.y=n.y}}))}(t)})),e("    removeBorderNodes",(function(){!function(t){i.forEach(t.nodes(),(function(e){if(t.children(e).length){var n=t.node(e),r=t.node(n.borderTop),o=t.node(n.borderBottom),a=t.node(i.last(n.borderLeft)),s=t.node(i.last(n.borderRight));n.width=Math.abs(s.x-a.x),n.height=Math.abs(o.y-r.y),n.x=a.x+n.width/2,n.y=r.y+n.height/2}})),i.forEach(t.nodes(),(function(e){"border"===t.node(e).dummy&&t.removeNode(e)}))}(t)})),e("    normalize.undo",(function(){o.undo(t)})),e("    fixupEdgeLabelCoords",(function(){!function(t){i.forEach(t.edges(),(function(e){var n=t.edge(e);if(i.has(n,"x"))switch("l"!==n.labelpos&&"r"!==n.labelpos||(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset}}))}(t)})),e("    undoCoordinateSystem",(function(){d.undo(t)})),e("    translateGraph",(function(){!function(t){var e=Number.POSITIVE_INFINITY,n=0,r=Number.POSITIVE_INFINITY,o=0,a=t.graph(),s=a.marginx||0,l=a.marginy||0;function u(t){var i=t.x,a=t.y,s=t.width,l=t.height;e=Math.min(e,i-s/2),n=Math.max(n,i+s/2),r=Math.min(r,a-l/2),o=Math.max(o,a+l/2)}i.forEach(t.nodes(),(function(e){u(t.node(e))})),i.forEach(t.edges(),(function(e){var n=t.edge(e);i.has(n,"x")&&u(n)})),e-=s,r-=l,i.forEach(t.nodes(),(function(n){var i=t.node(n);i.x-=e,i.y-=r})),i.forEach(t.edges(),(function(n){var o=t.edge(n);i.forEach(o.points,(function(t){t.x-=e,t.y-=r})),i.has(o,"x")&&(o.x-=e),i.has(o,"y")&&(o.y-=r)})),a.width=n-e+s,a.height=o-r+l}(t)})),e("    assignNodeIntersects",(function(){!function(t){i.forEach(t.edges(),(function(e){var n,i,r=t.edge(e),o=t.node(e.v),a=t.node(e.w);r.points?(n=r.points[0],i=r.points[r.points.length-1]):(r.points=[],n=a,i=o),r.points.unshift(m.intersectRect(o,n)),r.points.push(m.intersectRect(a,i))}))}(t)})),e("    reversePoints",(function(){!function(t){i.forEach(t.edges(),(function(e){var n=t.edge(e);n.reversed&&n.points.reverse()}))}(t)})),e("    acyclic.undo",(function(){r.undo(t)}))}(e,n)})),n("  updateInputGraph",(function(){!function(t,e){i.forEach(t.nodes(),(function(n){var i=t.node(n),r=e.node(n);i&&(i.x=r.x,i.y=r.y,e.children(n).length&&(i.width=r.width,i.height=r.height))})),i.forEach(t.edges(),(function(n){var r=t.edge(n),o=e.edge(n);r.points=o.points,i.has(o,"x")&&(r.x=o.x,r.y=o.y)})),t.graph().width=e.graph().width,t.graph().height=e.graph().height}(t,e)}))}))};var v=["nodesep","edgesep","ranksep","marginx","marginy"],y={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},b=["acyclicer","ranker","rankdir","align"],_=["width","height"],w={width:0,height:0},x=["minlen","weight","width","height","labeloffset"],M={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},E=["labelpos"];function S(t,e){return i.mapValues(i.pick(t,e),Number)}function k(t){var e={};return i.forEach(t,(function(t,n){e[n.toLowerCase()]=t})),e}},38436:(t,e,n)=>{var i;try{i={cloneDeep:n(50361),constant:n(75703),defaults:n(91747),each:n(66073),filter:n(63105),find:n(13311),flatten:n(85564),forEach:n(84486),forIn:n(62620),has:n(18721),isUndefined:n(52353),last:n(10928),map:n(35161),mapValues:n(66604),max:n(6162),merge:n(82492),min:n(53632),minBy:n(22762),now:n(7771),pick:n(78718),range:n(96026),reduce:n(54061),sortBy:n(89734),uniqueId:n(73955),values:n(52628),zipObject:n(7287)}}catch(t){}i||(i=window._),t.exports=i},72981:(t,e,n)=>{var i=n(38436),r=n(11138);function o(t,e,n,a,s,l,u){var c=t.children(u);if(c.length){var h=r.addBorderNode(t,"_bt"),d=r.addBorderNode(t,"_bb"),f=t.node(u);t.setParent(h,u),f.borderTop=h,t.setParent(d,u),f.borderBottom=d,i.forEach(c,(function(i){o(t,e,n,a,s,l,i);var r=t.node(i),c=r.borderTop?r.borderTop:i,f=r.borderBottom?r.borderBottom:i,p=r.borderTop?a:2*a,m=c!==f?1:s-l[u]+1;t.setEdge(h,c,{weight:p,minlen:m,nestingEdge:!0}),t.setEdge(f,d,{weight:p,minlen:m,nestingEdge:!0})})),t.parent(u)||t.setEdge(e,h,{weight:0,minlen:s+l[u]})}else u!==e&&t.setEdge(e,u,{weight:0,minlen:n})}t.exports={run:function(t){var e=r.addDummyNode(t,"root",{},"_root"),n=function(t){var e={};function n(r,o){var a=t.children(r);a&&a.length&&i.forEach(a,(function(t){n(t,o+1)})),e[r]=o}return i.forEach(t.children(),(function(t){n(t,1)})),e}(t),a=i.max(i.values(n))-1,s=2*a+1;t.graph().nestingRoot=e,i.forEach(t.edges(),(function(e){t.edge(e).minlen*=s}));var l=function(t){return i.reduce(t.edges(),(function(e,n){return e+t.edge(n).weight}),0)}(t)+1;i.forEach(t.children(),(function(i){o(t,e,s,l,a,n,i)})),t.graph().nodeRankFactor=s},cleanup:function(t){var e=t.graph();t.removeNode(e.nestingRoot),delete e.nestingRoot,i.forEach(t.edges(),(function(e){t.edge(e).nestingEdge&&t.removeEdge(e)}))}}},45995:(t,e,n)=>{"use strict";var i=n(38436),r=n(11138);t.exports={run:function(t){t.graph().dummyChains=[],i.forEach(t.edges(),(function(e){!function(t,e){var n,i,o,a=e.v,s=t.node(a).rank,l=e.w,u=t.node(l).rank,c=e.name,h=t.edge(e),d=h.labelRank;if(u===s+1)return;for(t.removeEdge(e),o=0,++s;s<u;++o,++s)h.points=[],i={width:0,height:0,edgeLabel:h,edgeObj:e,rank:s},n=r.addDummyNode(t,"edge",i,"_d"),s===d&&(i.width=h.width,i.height=h.height,i.dummy="edge-label",i.labelpos=h.labelpos),t.setEdge(a,n,{weight:h.weight},c),0===o&&t.graph().dummyChains.push(n),a=n;t.setEdge(a,l,{weight:h.weight},c)}(t,e)}))},undo:function(t){i.forEach(t.graph().dummyChains,(function(e){var n,i=t.node(e),r=i.edgeLabel;for(t.setEdge(i.edgeObj,r);i.dummy;)n=t.successors(e)[0],t.removeNode(e),r.points.push({x:i.x,y:i.y}),"edge-label"===i.dummy&&(r.x=i.x,r.y=i.y,r.width=i.width,r.height=i.height),e=n,i=t.node(e)}))}}},55093:(t,e,n)=>{var i=n(38436);t.exports=function(t,e,n){var r,o={};i.forEach(n,(function(n){for(var i,a,s=t.parent(n);s;){if((i=t.parent(s))?(a=o[i],o[i]=s):(a=r,r=s),a&&a!==s)return void e.setEdge(a,s);s=i}}))}},35439:(t,e,n)=>{var i=n(38436);t.exports=function(t,e){return i.map(e,(function(e){var n=t.inEdges(e);if(n.length){var r=i.reduce(n,(function(e,n){var i=t.edge(n),r=t.node(n.v);return{sum:e.sum+i.weight*r.order,weight:e.weight+i.weight}}),{sum:0,weight:0});return{v:e,barycenter:r.sum/r.weight,weight:r.weight}}return{v:e}}))}},23128:(t,e,n)=>{var i=n(38436),r=n(70574).Graph;t.exports=function(t,e,n){var o=function(t){var e;for(;t.hasNode(e=i.uniqueId("_root")););return e}(t),a=new r({compound:!0}).setGraph({root:o}).setDefaultNodeLabel((function(e){return t.node(e)}));return i.forEach(t.nodes(),(function(r){var s=t.node(r),l=t.parent(r);(s.rank===e||s.minRank<=e&&e<=s.maxRank)&&(a.setNode(r),a.setParent(r,l||o),i.forEach(t[n](r),(function(e){var n=e.v===r?e.w:e.v,o=a.edge(n,r),s=i.isUndefined(o)?0:o.weight;a.setEdge(n,r,{weight:t.edge(e).weight+s})})),i.has(s,"minRank")&&a.setNode(r,{borderLeft:s.borderLeft[e],borderRight:s.borderRight[e]}))})),a}},56630:(t,e,n)=>{"use strict";var i=n(38436);function r(t,e,n){for(var r=i.zipObject(n,i.map(n,(function(t,e){return e}))),o=i.flatten(i.map(e,(function(e){return i.sortBy(i.map(t.outEdges(e),(function(e){return{pos:r[e.w],weight:t.edge(e).weight}})),"pos")})),!0),a=1;a<n.length;)a<<=1;var s=2*a-1;a-=1;var l=i.map(new Array(s),(function(){return 0})),u=0;return i.forEach(o.forEach((function(t){var e=t.pos+a;l[e]+=t.weight;for(var n=0;e>0;)e%2&&(n+=l[e+1]),l[e=e-1>>1]+=t.weight;u+=t.weight*n}))),u}t.exports=function(t,e){for(var n=0,i=1;i<e.length;++i)n+=r(t,e[i-1],e[i]);return n}},53408:(t,e,n)=>{"use strict";var i=n(38436),r=n(2588),o=n(56630),a=n(61026),s=n(23128),l=n(55093),u=n(70574).Graph,c=n(11138);function h(t,e,n){return i.map(e,(function(e){return s(t,e,n)}))}function d(t,e){var n=new u;i.forEach(t,(function(t){var r=t.graph().root,o=a(t,r,n,e);i.forEach(o.vs,(function(e,n){t.node(e).order=n})),l(t,n,o.vs)}))}function f(t,e){i.forEach(e,(function(e){i.forEach(e,(function(e,n){t.node(e).order=n}))}))}t.exports=function(t){var e=c.maxRank(t),n=h(t,i.range(1,e+1),"inEdges"),a=h(t,i.range(e-1,-1,-1),"outEdges"),s=r(t);f(t,s);for(var l,u=Number.POSITIVE_INFINITY,p=0,m=0;m<4;++p,++m){d(p%2?n:a,p%4>=2),s=c.buildLayerMatrix(t);var g=o(t,s);g<u&&(m=0,l=i.cloneDeep(s),u=g)}f(t,l)}},2588:(t,e,n)=>{"use strict";var i=n(38436);t.exports=function(t){var e={},n=i.filter(t.nodes(),(function(e){return!t.children(e).length})),r=i.max(i.map(n,(function(e){return t.node(e).rank}))),o=i.map(i.range(r+1),(function(){return[]}));var a=i.sortBy(n,(function(e){return t.node(e).rank}));return i.forEach(a,(function n(r){if(i.has(e,r))return;e[r]=!0;var a=t.node(r);o[a.rank].push(r),i.forEach(t.successors(r),n)})),o}},83678:(t,e,n)=>{"use strict";var i=n(38436);t.exports=function(t,e){var n={};return i.forEach(t,(function(t,e){var r=n[t.v]={indegree:0,in:[],out:[],vs:[t.v],i:e};i.isUndefined(t.barycenter)||(r.barycenter=t.barycenter,r.weight=t.weight)})),i.forEach(e.edges(),(function(t){var e=n[t.v],r=n[t.w];i.isUndefined(e)||i.isUndefined(r)||(r.indegree++,e.out.push(n[t.w]))})),function(t){var e=[];function n(t){return function(e){e.merged||(i.isUndefined(e.barycenter)||i.isUndefined(t.barycenter)||e.barycenter>=t.barycenter)&&function(t,e){var n=0,i=0;t.weight&&(n+=t.barycenter*t.weight,i+=t.weight);e.weight&&(n+=e.barycenter*e.weight,i+=e.weight);t.vs=e.vs.concat(t.vs),t.barycenter=n/i,t.weight=i,t.i=Math.min(e.i,t.i),e.merged=!0}(t,e)}}function r(e){return function(n){n.in.push(e),0==--n.indegree&&t.push(n)}}for(;t.length;){var o=t.pop();e.push(o),i.forEach(o.in.reverse(),n(o)),i.forEach(o.out,r(o))}return i.map(i.filter(e,(function(t){return!t.merged})),(function(t){return i.pick(t,["vs","i","barycenter","weight"])}))}(i.filter(n,(function(t){return!t.indegree})))}},61026:(t,e,n)=>{var i=n(38436),r=n(35439),o=n(83678),a=n(87304);t.exports=function t(e,n,s,l){var u=e.children(n),c=e.node(n),h=c?c.borderLeft:void 0,d=c?c.borderRight:void 0,f={};h&&(u=i.filter(u,(function(t){return t!==h&&t!==d})));var p=r(e,u);i.forEach(p,(function(n){if(e.children(n.v).length){var r=t(e,n.v,s,l);f[n.v]=r,i.has(r,"barycenter")&&(o=n,a=r,i.isUndefined(o.barycenter)?(o.barycenter=a.barycenter,o.weight=a.weight):(o.barycenter=(o.barycenter*o.weight+a.barycenter*a.weight)/(o.weight+a.weight),o.weight+=a.weight))}var o,a}));var m=o(p,s);!function(t,e){i.forEach(t,(function(t){t.vs=i.flatten(t.vs.map((function(t){return e[t]?e[t].vs:t})),!0)}))}(m,f);var g=a(m,l);if(h&&(g.vs=i.flatten([h,g.vs,d],!0),e.predecessors(h).length)){var v=e.node(e.predecessors(h)[0]),y=e.node(e.predecessors(d)[0]);i.has(g,"barycenter")||(g.barycenter=0,g.weight=0),g.barycenter=(g.barycenter*g.weight+v.order+y.order)/(g.weight+2),g.weight+=2}return g}},87304:(t,e,n)=>{var i=n(38436),r=n(11138);function o(t,e,n){for(var r;e.length&&(r=i.last(e)).i<=n;)e.pop(),t.push(r.vs),n++;return n}t.exports=function(t,e){var n=r.partition(t,(function(t){return i.has(t,"barycenter")})),a=n.lhs,s=i.sortBy(n.rhs,(function(t){return-t.i})),l=[],u=0,c=0,h=0;a.sort((d=!!e,function(t,e){return t.barycenter<e.barycenter?-1:t.barycenter>e.barycenter?1:d?e.i-t.i:t.i-e.i})),h=o(l,s,h),i.forEach(a,(function(t){h+=t.vs.length,l.push(t.vs),u+=t.barycenter*t.weight,c+=t.weight,h=o(l,s,h)}));var d;var f={vs:i.flatten(l,!0)};c&&(f.barycenter=u/c,f.weight=c);return f}},24219:(t,e,n)=>{var i=n(38436);t.exports=function(t){var e=function(t){var e={},n=0;function r(o){var a=n;i.forEach(t.children(o),r),e[o]={low:a,lim:n++}}return i.forEach(t.children(),r),e}(t);i.forEach(t.graph().dummyChains,(function(n){for(var i=t.node(n),r=i.edgeObj,o=function(t,e,n,i){var r,o,a=[],s=[],l=Math.min(e[n].low,e[i].low),u=Math.max(e[n].lim,e[i].lim);r=n;do{r=t.parent(r),a.push(r)}while(r&&(e[r].low>l||u>e[r].lim));o=r,r=i;for(;(r=t.parent(r))!==o;)s.push(r);return{path:a.concat(s.reverse()),lca:o}}(t,e,r.v,r.w),a=o.path,s=o.lca,l=0,u=a[l],c=!0;n!==r.w;){if(i=t.node(n),c){for(;(u=a[l])!==s&&t.node(u).maxRank<i.rank;)l++;u===s&&(c=!1)}if(!c){for(;l<a.length-1&&t.node(u=a[l+1]).minRank<=i.rank;)l++;u=a[l]}t.setParent(n,u),n=t.successors(n)[0]}}))}},3573:(t,e,n)=>{"use strict";var i=n(38436),r=n(70574).Graph,o=n(11138);function a(t,e){var n={};return i.reduce(e,(function(e,r){var o=0,a=0,s=e.length,u=i.last(r);return i.forEach(r,(function(e,c){var h=function(t,e){if(t.node(e).dummy)return i.find(t.predecessors(e),(function(e){return t.node(e).dummy}))}(t,e),d=h?t.node(h).order:s;(h||e===u)&&(i.forEach(r.slice(a,c+1),(function(e){i.forEach(t.predecessors(e),(function(i){var r=t.node(i),a=r.order;!(a<o||d<a)||r.dummy&&t.node(e).dummy||l(n,i,e)}))})),a=c+1,o=d)})),r})),n}function s(t,e){var n={};function r(e,r,o,a,s){var u;i.forEach(i.range(r,o),(function(r){u=e[r],t.node(u).dummy&&i.forEach(t.predecessors(u),(function(e){var i=t.node(e);i.dummy&&(i.order<a||i.order>s)&&l(n,e,u)}))}))}return i.reduce(e,(function(e,n){var o,a=-1,s=0;return i.forEach(n,(function(i,l){if("border"===t.node(i).dummy){var u=t.predecessors(i);u.length&&(o=t.node(u[0]).order,r(n,s,l,a,o),s=l,a=o)}r(n,s,n.length,o,e.length)})),n})),n}function l(t,e,n){if(e>n){var i=e;e=n,n=i}var r=t[e];r||(t[e]=r={}),r[n]=!0}function u(t,e,n){if(e>n){var r=e;e=n,n=r}return i.has(t[e],n)}function c(t,e,n,r){var o={},a={},s={};return i.forEach(e,(function(t){i.forEach(t,(function(t,e){o[t]=t,a[t]=t,s[t]=e}))})),i.forEach(e,(function(t){var e=-1;i.forEach(t,(function(t){var l=r(t);if(l.length){l=i.sortBy(l,(function(t){return s[t]}));for(var c=(l.length-1)/2,h=Math.floor(c),d=Math.ceil(c);h<=d;++h){var f=l[h];a[t]===t&&e<s[f]&&!u(n,t,f)&&(a[f]=t,a[t]=o[t]=o[f],e=s[f])}}}))})),{root:o,align:a}}function h(t,e,n,o,a){var s={},l=function(t,e,n,o){var a=new r,s=t.graph(),l=function(t,e,n){return function(r,o,a){var s,l=r.node(o),u=r.node(a),c=0;if(c+=l.width/2,i.has(l,"labelpos"))switch(l.labelpos.toLowerCase()){case"l":s=-l.width/2;break;case"r":s=l.width/2}if(s&&(c+=n?s:-s),s=0,c+=(l.dummy?e:t)/2,c+=(u.dummy?e:t)/2,c+=u.width/2,i.has(u,"labelpos"))switch(u.labelpos.toLowerCase()){case"l":s=u.width/2;break;case"r":s=-u.width/2}return s&&(c+=n?s:-s),s=0,c}}(s.nodesep,s.edgesep,o);return i.forEach(e,(function(e){var r;i.forEach(e,(function(e){var i=n[e];if(a.setNode(i),r){var o=n[r],s=a.edge(o,i);a.setEdge(o,i,Math.max(l(t,e,r),s||0))}r=e}))})),a}(t,e,n,a),u=a?"borderLeft":"borderRight";function c(t,e){for(var n=l.nodes(),i=n.pop(),r={};i;)r[i]?t(i):(r[i]=!0,n.push(i),n=n.concat(e(i))),i=n.pop()}return c((function(t){s[t]=l.inEdges(t).reduce((function(t,e){return Math.max(t,s[e.v]+l.edge(e))}),0)}),l.predecessors.bind(l)),c((function(e){var n=l.outEdges(e).reduce((function(t,e){return Math.min(t,s[e.w]-l.edge(e))}),Number.POSITIVE_INFINITY),i=t.node(e);n!==Number.POSITIVE_INFINITY&&i.borderType!==u&&(s[e]=Math.max(s[e],n))}),l.successors.bind(l)),i.forEach(o,(function(t){s[t]=s[n[t]]})),s}function d(t,e){return i.minBy(i.values(e),(function(e){var n=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY;return i.forIn(e,(function(e,i){var o=function(t,e){return t.node(e).width}(t,i)/2;n=Math.max(e+o,n),r=Math.min(e-o,r)})),n-r}))}function f(t,e){var n=i.values(e),r=i.min(n),o=i.max(n);i.forEach(["u","d"],(function(n){i.forEach(["l","r"],(function(a){var s,l=n+a,u=t[l];if(u!==e){var c=i.values(u);(s="l"===a?r-i.min(c):o-i.max(c))&&(t[l]=i.mapValues(u,(function(t){return t+s})))}}))}))}function p(t,e){return i.mapValues(t.ul,(function(n,r){if(e)return t[e.toLowerCase()][r];var o=i.sortBy(i.map(t,r));return(o[1]+o[2])/2}))}t.exports={positionX:function(t){var e,n=o.buildLayerMatrix(t),r=i.merge(a(t,n),s(t,n)),l={};i.forEach(["u","d"],(function(o){e="u"===o?n:i.values(n).reverse(),i.forEach(["l","r"],(function(n){"r"===n&&(e=i.map(e,(function(t){return i.values(t).reverse()})));var a=("u"===o?t.predecessors:t.successors).bind(t),s=c(t,e,r,a),u=h(t,e,s.root,s.align,"r"===n);"r"===n&&(u=i.mapValues(u,(function(t){return-t}))),l[o+n]=u}))}));var u=d(t,l);return f(l,u),p(l,t.graph().align)},findType1Conflicts:a,findType2Conflicts:s,addConflict:l,hasConflict:u,verticalAlignment:c,horizontalCompaction:h,alignCoordinates:f,findSmallestWidthAlignment:d,balance:p}},17873:(t,e,n)=>{"use strict";var i=n(38436),r=n(11138),o=n(3573).positionX;t.exports=function(t){(function(t){var e=r.buildLayerMatrix(t),n=t.graph().ranksep,o=0;i.forEach(e,(function(e){var r=i.max(i.map(e,(function(e){return t.node(e).height})));i.forEach(e,(function(e){t.node(e).y=o+r/2})),o+=r+n}))})(t=r.asNonCompoundGraph(t)),i.forEach(o(t),(function(e,n){t.node(n).x=e}))}},20300:(t,e,n)=>{"use strict";var i=n(38436),r=n(70574).Graph,o=n(76681).slack;function a(t,e){return i.forEach(t.nodes(),(function n(r){i.forEach(e.nodeEdges(r),(function(i){var a=i.v,s=r===a?i.w:a;t.hasNode(s)||o(e,i)||(t.setNode(s,{}),t.setEdge(r,s,{}),n(s))}))})),t.nodeCount()}function s(t,e){return i.minBy(e.edges(),(function(n){if(t.hasNode(n.v)!==t.hasNode(n.w))return o(e,n)}))}function l(t,e,n){i.forEach(t.nodes(),(function(t){e.node(t).rank+=n}))}t.exports=function(t){var e,n,i=new r({directed:!1}),u=t.nodes()[0],c=t.nodeCount();i.setNode(u,{});for(;a(i,t)<c;)e=s(i,t),n=i.hasNode(e.v)?o(t,e):-o(t,e),l(i,t,n);return i}},78093:(t,e,n)=>{"use strict";var i=n(76681).longestPath,r=n(20300),o=n(42472);t.exports=function(t){switch(t.graph().ranker){default:s(t);break;case"tight-tree":!function(t){i(t),r(t)}(t);break;case"longest-path":a(t)}};var a=i;function s(t){o(t)}},42472:(t,e,n)=>{"use strict";var i=n(38436),r=n(20300),o=n(76681).slack,a=n(76681).longestPath,s=n(70574).alg.preorder,l=n(70574).alg.postorder,u=n(11138).simplify;function c(t){t=u(t),a(t);var e,n=r(t);for(f(n),h(n,t);e=m(n);)v(n,t,e,g(n,t,e))}function h(t,e){var n=l(t,t.nodes());n=n.slice(0,n.length-1),i.forEach(n,(function(n){!function(t,e,n){var i=t.node(n).parent;t.edge(n,i).cutvalue=d(t,e,n)}(t,e,n)}))}function d(t,e,n){var r=t.node(n).parent,o=!0,a=e.edge(n,r),s=0;return a||(o=!1,a=e.edge(r,n)),s=a.weight,i.forEach(e.nodeEdges(n),(function(i){var a,l,u=i.v===n,c=u?i.w:i.v;if(c!==r){var h=u===o,d=e.edge(i).weight;if(s+=h?d:-d,a=n,l=c,t.hasEdge(a,l)){var f=t.edge(n,c).cutvalue;s+=h?-f:f}}})),s}function f(t,e){arguments.length<2&&(e=t.nodes()[0]),p(t,{},1,e)}function p(t,e,n,r,o){var a=n,s=t.node(r);return e[r]=!0,i.forEach(t.neighbors(r),(function(o){i.has(e,o)||(n=p(t,e,n,o,r))})),s.low=a,s.lim=n++,o?s.parent=o:delete s.parent,n}function m(t){return i.find(t.edges(),(function(e){return t.edge(e).cutvalue<0}))}function g(t,e,n){var r=n.v,a=n.w;e.hasEdge(r,a)||(r=n.w,a=n.v);var s=t.node(r),l=t.node(a),u=s,c=!1;s.lim>l.lim&&(u=l,c=!0);var h=i.filter(e.edges(),(function(e){return c===y(t,t.node(e.v),u)&&c!==y(t,t.node(e.w),u)}));return i.minBy(h,(function(t){return o(e,t)}))}function v(t,e,n,r){var o=n.v,a=n.w;t.removeEdge(o,a),t.setEdge(r.v,r.w,{}),f(t),h(t,e),function(t,e){var n=i.find(t.nodes(),(function(t){return!e.node(t).parent})),r=s(t,n);r=r.slice(1),i.forEach(r,(function(n){var i=t.node(n).parent,r=e.edge(n,i),o=!1;r||(r=e.edge(i,n),o=!0),e.node(n).rank=e.node(i).rank+(o?r.minlen:-r.minlen)}))}(t,e)}function y(t,e,n){return n.low<=e.lim&&e.lim<=n.lim}t.exports=c,c.initLowLimValues=f,c.initCutValues=h,c.calcCutValue=d,c.leaveEdge=m,c.enterEdge=g,c.exchangeEdges=v},76681:(t,e,n)=>{"use strict";var i=n(38436);t.exports={longestPath:function(t){var e={};i.forEach(t.sources(),(function n(r){var o=t.node(r);if(i.has(e,r))return o.rank;e[r]=!0;var a=i.min(i.map(t.outEdges(r),(function(e){return n(e.w)-t.edge(e).minlen})));return a!==Number.POSITIVE_INFINITY&&null!=a||(a=0),o.rank=a}))},slack:function(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen}}},11138:(t,e,n)=>{"use strict";var i=n(38436),r=n(70574).Graph;function o(t,e,n,r){var o;do{o=i.uniqueId(r)}while(t.hasNode(o));return n.dummy=e,t.setNode(o,n),o}function a(t){return i.max(i.map(t.nodes(),(function(e){var n=t.node(e).rank;if(!i.isUndefined(n))return n})))}t.exports={addDummyNode:o,simplify:function(t){var e=(new r).setGraph(t.graph());return i.forEach(t.nodes(),(function(n){e.setNode(n,t.node(n))})),i.forEach(t.edges(),(function(n){var i=e.edge(n.v,n.w)||{weight:0,minlen:1},r=t.edge(n);e.setEdge(n.v,n.w,{weight:i.weight+r.weight,minlen:Math.max(i.minlen,r.minlen)})})),e},asNonCompoundGraph:function(t){var e=new r({multigraph:t.isMultigraph()}).setGraph(t.graph());return i.forEach(t.nodes(),(function(n){t.children(n).length||e.setNode(n,t.node(n))})),i.forEach(t.edges(),(function(n){e.setEdge(n,t.edge(n))})),e},successorWeights:function(t){var e=i.map(t.nodes(),(function(e){var n={};return i.forEach(t.outEdges(e),(function(e){n[e.w]=(n[e.w]||0)+t.edge(e).weight})),n}));return i.zipObject(t.nodes(),e)},predecessorWeights:function(t){var e=i.map(t.nodes(),(function(e){var n={};return i.forEach(t.inEdges(e),(function(e){n[e.v]=(n[e.v]||0)+t.edge(e).weight})),n}));return i.zipObject(t.nodes(),e)},intersectRect:function(t,e){var n,i,r=t.x,o=t.y,a=e.x-r,s=e.y-o,l=t.width/2,u=t.height/2;if(!a&&!s)throw new Error("Not possible to find intersection inside of the rectangle");Math.abs(s)*l>Math.abs(a)*u?(s<0&&(u=-u),n=u*a/s,i=u):(a<0&&(l=-l),n=l,i=l*s/a);return{x:r+n,y:o+i}},buildLayerMatrix:function(t){var e=i.map(i.range(a(t)+1),(function(){return[]}));return i.forEach(t.nodes(),(function(n){var r=t.node(n),o=r.rank;i.isUndefined(o)||(e[o][r.order]=n)})),e},normalizeRanks:function(t){var e=i.min(i.map(t.nodes(),(function(e){return t.node(e).rank})));i.forEach(t.nodes(),(function(n){var r=t.node(n);i.has(r,"rank")&&(r.rank-=e)}))},removeEmptyRanks:function(t){var e=i.min(i.map(t.nodes(),(function(e){return t.node(e).rank}))),n=[];i.forEach(t.nodes(),(function(i){var r=t.node(i).rank-e;n[r]||(n[r]=[]),n[r].push(i)}));var r=0,o=t.graph().nodeRankFactor;i.forEach(n,(function(e,n){i.isUndefined(e)&&n%o!=0?--r:r&&i.forEach(e,(function(e){t.node(e).rank+=r}))}))},addBorderNode:function(t,e,n,i){var r={width:0,height:0};arguments.length>=4&&(r.rank=n,r.order=i);return o(t,"border",r,e)},maxRank:a,partition:function(t,e){var n={lhs:[],rhs:[]};return i.forEach(t,(function(t){e(t)?n.lhs.push(t):n.rhs.push(t)})),n},time:function(t,e){var n=i.now();try{return e()}finally{console.log(t+" time: "+(i.now()-n)+"ms")}},notime:function(t,e){return e()}}},88177:t=>{t.exports="0.8.5"},84376:(t,e,n)=>{"use strict";function i(t,e){var n=t.__state.conversionName.toString(),i=Math.round(t.r),r=Math.round(t.g),o=Math.round(t.b),a=t.a,s=Math.round(t.h),l=t.s.toFixed(1),u=t.v.toFixed(1);if(e||"THREE_CHAR_HEX"===n||"SIX_CHAR_HEX"===n){for(var c=t.hex.toString(16);c.length<6;)c="0"+c;return"#"+c}return"CSS_RGB"===n?"rgb("+i+","+r+","+o+")":"CSS_RGBA"===n?"rgba("+i+","+r+","+o+","+a+")":"HEX"===n?"0x"+t.hex.toString(16):"RGB_ARRAY"===n?"["+i+","+r+","+o+"]":"RGBA_ARRAY"===n?"["+i+","+r+","+o+","+a+"]":"RGB_OBJ"===n?"{r:"+i+",g:"+r+",b:"+o+"}":"RGBA_OBJ"===n?"{r:"+i+",g:"+r+",b:"+o+",a:"+a+"}":"HSV_OBJ"===n?"{h:"+s+",s:"+l+",v:"+u+"}":"HSVA_OBJ"===n?"{h:"+s+",s:"+l+",v:"+u+",a:"+a+"}":"unknown format"}n.r(e),n.d(e,{color:()=>dt,controllers:()=>ft,dom:()=>pt,gui:()=>mt,GUI:()=>gt,default:()=>vt});var r=Array.prototype.forEach,o=Array.prototype.slice,a={BREAK:{},extend:function(t){return this.each(o.call(arguments,1),(function(e){(this.isObject(e)?Object.keys(e):[]).forEach(function(n){this.isUndefined(e[n])||(t[n]=e[n])}.bind(this))}),this),t},defaults:function(t){return this.each(o.call(arguments,1),(function(e){(this.isObject(e)?Object.keys(e):[]).forEach(function(n){this.isUndefined(t[n])&&(t[n]=e[n])}.bind(this))}),this),t},compose:function(){var t=o.call(arguments);return function(){for(var e=o.call(arguments),n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},each:function(t,e,n){if(t)if(r&&t.forEach&&t.forEach===r)t.forEach(e,n);else if(t.length===t.length+0){var i,o=void 0;for(o=0,i=t.length;o<i;o++)if(o in t&&e.call(n,t[o],o)===this.BREAK)return}else for(var a in t)if(e.call(n,t[a],a)===this.BREAK)return},defer:function(t){setTimeout(t,0)},debounce:function(t,e,n){var i=void 0;return function(){var r=this,o=arguments;function a(){i=null,n||t.apply(r,o)}var s=n||!i;clearTimeout(i),i=setTimeout(a,e),s&&t.apply(r,o)}},toArray:function(t){return t.toArray?t.toArray():o.call(t)},isUndefined:function(t){return void 0===t},isNull:function(t){return null===t},isNaN:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){return isNaN(t)})),isArray:Array.isArray||function(t){return t.constructor===Array},isObject:function(t){return t===Object(t)},isNumber:function(t){return t===t+0},isString:function(t){return t===t+""},isBoolean:function(t){return!1===t||!0===t},isFunction:function(t){return t instanceof Function}},s=[{litmus:a.isString,conversions:{THREE_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString()+e[1].toString()+e[2].toString()+e[2].toString()+e[3].toString()+e[3].toString(),0)}},write:i},SIX_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9]{6})$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString(),0)}},write:i},CSS_RGB:{read:function(t){var e=t.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3])}},write:i},CSS_RGBA:{read:function(t){var e=t.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3]),a:parseFloat(e[4])}},write:i}}},{litmus:a.isNumber,conversions:{HEX:{read:function(t){return{space:"HEX",hex:t,conversionName:"HEX"}},write:function(t){return t.hex}}}},{litmus:a.isArray,conversions:{RGB_ARRAY:{read:function(t){return 3===t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2]}},write:function(t){return[t.r,t.g,t.b]}},RGBA_ARRAY:{read:function(t){return 4===t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2],a:t[3]}},write:function(t){return[t.r,t.g,t.b,t.a]}}}},{litmus:a.isObject,conversions:{RGBA_OBJ:{read:function(t){return!!(a.isNumber(t.r)&&a.isNumber(t.g)&&a.isNumber(t.b)&&a.isNumber(t.a))&&{space:"RGB",r:t.r,g:t.g,b:t.b,a:t.a}},write:function(t){return{r:t.r,g:t.g,b:t.b,a:t.a}}},RGB_OBJ:{read:function(t){return!!(a.isNumber(t.r)&&a.isNumber(t.g)&&a.isNumber(t.b))&&{space:"RGB",r:t.r,g:t.g,b:t.b}},write:function(t){return{r:t.r,g:t.g,b:t.b}}},HSVA_OBJ:{read:function(t){return!!(a.isNumber(t.h)&&a.isNumber(t.s)&&a.isNumber(t.v)&&a.isNumber(t.a))&&{space:"HSV",h:t.h,s:t.s,v:t.v,a:t.a}},write:function(t){return{h:t.h,s:t.s,v:t.v,a:t.a}}},HSV_OBJ:{read:function(t){return!!(a.isNumber(t.h)&&a.isNumber(t.s)&&a.isNumber(t.v))&&{space:"HSV",h:t.h,s:t.s,v:t.v}},write:function(t){return{h:t.h,s:t.s,v:t.v}}}}}],l=void 0,u=void 0,c=function(){u=!1;var t=arguments.length>1?a.toArray(arguments):arguments[0];return a.each(s,(function(e){if(e.litmus(t))return a.each(e.conversions,(function(e,n){if(l=e.read(t),!1===u&&!1!==l)return u=l,l.conversionName=n,l.conversion=e,a.BREAK})),a.BREAK})),u},h=void 0,d={hsv_to_rgb:function(t,e,n){var i=Math.floor(t/60)%6,r=t/60-Math.floor(t/60),o=n*(1-e),a=n*(1-r*e),s=n*(1-(1-r)*e),l=[[n,s,o],[a,n,o],[o,n,s],[o,a,n],[s,o,n],[n,o,a]][i];return{r:255*l[0],g:255*l[1],b:255*l[2]}},rgb_to_hsv:function(t,e,n){var i=Math.min(t,e,n),r=Math.max(t,e,n),o=r-i,a=void 0;return 0===r?{h:NaN,s:0,v:0}:(a=t===r?(e-n)/o:e===r?2+(n-t)/o:4+(t-e)/o,(a/=6)<0&&(a+=1),{h:360*a,s:o/r,v:r/255})},rgb_to_hex:function(t,e,n){var i=this.hex_with_component(0,2,t);return i=this.hex_with_component(i,1,e),i=this.hex_with_component(i,0,n)},component_from_hex:function(t,e){return t>>8*e&255},hex_with_component:function(t,e,n){return n<<(h=8*e)|t&~(255<<h)}},f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},m=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),g=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0},v=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},y=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},b=function(){function t(){if(p(this,t),this.__state=c.apply(this,arguments),!1===this.__state)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return m(t,[{key:"toString",value:function(){return i(this)}},{key:"toHexString",value:function(){return i(this,!0)}},{key:"toOriginal",value:function(){return this.__state.conversion.write(this)}}]),t}();function _(t,e,n){Object.defineProperty(t,e,{get:function(){return"RGB"===this.__state.space||b.recalculateRGB(this,e,n),this.__state[e]},set:function(t){"RGB"!==this.__state.space&&(b.recalculateRGB(this,e,n),this.__state.space="RGB"),this.__state[e]=t}})}function w(t,e){Object.defineProperty(t,e,{get:function(){return"HSV"===this.__state.space||b.recalculateHSV(this),this.__state[e]},set:function(t){"HSV"!==this.__state.space&&(b.recalculateHSV(this),this.__state.space="HSV"),this.__state[e]=t}})}b.recalculateRGB=function(t,e,n){if("HEX"===t.__state.space)t.__state[e]=d.component_from_hex(t.__state.hex,n);else{if("HSV"!==t.__state.space)throw new Error("Corrupted color state");a.extend(t.__state,d.hsv_to_rgb(t.__state.h,t.__state.s,t.__state.v))}},b.recalculateHSV=function(t){var e=d.rgb_to_hsv(t.r,t.g,t.b);a.extend(t.__state,{s:e.s,v:e.v}),a.isNaN(e.h)?a.isUndefined(t.__state.h)&&(t.__state.h=0):t.__state.h=e.h},b.COMPONENTS=["r","g","b","h","s","v","hex","a"],_(b.prototype,"r",2),_(b.prototype,"g",1),_(b.prototype,"b",0),w(b.prototype,"h"),w(b.prototype,"s"),w(b.prototype,"v"),Object.defineProperty(b.prototype,"a",{get:function(){return this.__state.a},set:function(t){this.__state.a=t}}),Object.defineProperty(b.prototype,"hex",{get:function(){return"HEX"!==this.__state.space&&(this.__state.hex=d.rgb_to_hex(this.r,this.g,this.b),this.__state.space="HEX"),this.__state.hex},set:function(t){this.__state.space="HEX",this.__state.hex=t}});var x=function(){function t(e,n){p(this,t),this.initialValue=e[n],this.domElement=document.createElement("div"),this.object=e,this.property=n,this.__onChange=void 0,this.__onFinishChange=void 0}return m(t,[{key:"onChange",value:function(t){return this.__onChange=t,this}},{key:"onFinishChange",value:function(t){return this.__onFinishChange=t,this}},{key:"setValue",value:function(t){return this.object[this.property]=t,this.__onChange&&this.__onChange.call(this,t),this.updateDisplay(),this}},{key:"getValue",value:function(){return this.object[this.property]}},{key:"updateDisplay",value:function(){return this}},{key:"isModified",value:function(){return this.initialValue!==this.getValue()}}]),t}(),M={};a.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},(function(t,e){a.each(t,(function(t){M[t]=e}))}));var E=/(\d+(\.\d+)?)px/;function S(t){if("0"===t||a.isUndefined(t))return 0;var e=t.match(E);return a.isNull(e)?0:parseFloat(e[1])}var k={makeSelectable:function(t,e){void 0!==t&&void 0!==t.style&&(t.onselectstart=e?function(){return!1}:function(){},t.style.MozUserSelect=e?"auto":"none",t.style.KhtmlUserSelect=e?"auto":"none",t.unselectable=e?"on":"off")},makeFullscreen:function(t,e,n){var i=n,r=e;a.isUndefined(r)&&(r=!0),a.isUndefined(i)&&(i=!0),t.style.position="absolute",r&&(t.style.left=0,t.style.right=0),i&&(t.style.top=0,t.style.bottom=0)},fakeEvent:function(t,e,n,i){var r=n||{},o=M[e];if(!o)throw new Error("Event type "+e+" not supported.");var s=document.createEvent(o);switch(o){case"MouseEvents":var l=r.x||r.clientX||0,u=r.y||r.clientY||0;s.initMouseEvent(e,r.bubbles||!1,r.cancelable||!0,window,r.clickCount||1,0,0,l,u,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var c=s.initKeyboardEvent||s.initKeyEvent;a.defaults(r,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),c(e,r.bubbles||!1,r.cancelable,window,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,r.keyCode,r.charCode);break;default:s.initEvent(e,r.bubbles||!1,r.cancelable||!0)}a.defaults(s,i),t.dispatchEvent(s)},bind:function(t,e,n,i){var r=i||!1;return t.addEventListener?t.addEventListener(e,n,r):t.attachEvent&&t.attachEvent("on"+e,n),k},unbind:function(t,e,n,i){var r=i||!1;return t.removeEventListener?t.removeEventListener(e,n,r):t.detachEvent&&t.detachEvent("on"+e,n),k},addClass:function(t,e){if(void 0===t.className)t.className=e;else if(t.className!==e){var n=t.className.split(/ +/);-1===n.indexOf(e)&&(n.push(e),t.className=n.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return k},removeClass:function(t,e){if(e)if(t.className===e)t.removeAttribute("class");else{var n=t.className.split(/ +/),i=n.indexOf(e);-1!==i&&(n.splice(i,1),t.className=n.join(" "))}else t.className=void 0;return k},hasClass:function(t,e){return new RegExp("(?:^|\\s+)"+e+"(?:\\s+|$)").test(t.className)||!1},getWidth:function(t){var e=getComputedStyle(t);return S(e["border-left-width"])+S(e["border-right-width"])+S(e["padding-left"])+S(e["padding-right"])+S(e.width)},getHeight:function(t){var e=getComputedStyle(t);return S(e["border-top-width"])+S(e["border-bottom-width"])+S(e["padding-top"])+S(e["padding-bottom"])+S(e.height)},getOffset:function(t){var e=t,n={left:0,top:0};if(e.offsetParent)do{n.left+=e.offsetLeft,n.top+=e.offsetTop,e=e.offsetParent}while(e);return n},isActive:function(t){return t===document.activeElement&&(t.type||t.href)}},C=function(t){function e(t,n){p(this,e);var i=y(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),r=i;return i.__prev=i.getValue(),i.__checkbox=document.createElement("input"),i.__checkbox.setAttribute("type","checkbox"),k.bind(i.__checkbox,"change",(function(){r.setValue(!r.__prev)}),!1),i.domElement.appendChild(i.__checkbox),i.updateDisplay(),i}return v(e,t),m(e,[{key:"setValue",value:function(t){var n=g(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,t);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),n}},{key:"updateDisplay",value:function(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),g(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(x),T=function(t){function e(t,n,i){p(this,e);var r=y(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),o=i,s=r;if(r.__select=document.createElement("select"),a.isArray(o)){var l={};a.each(o,(function(t){l[t]=t})),o=l}return a.each(o,(function(t,e){var n=document.createElement("option");n.innerHTML=e,n.setAttribute("value",t),s.__select.appendChild(n)})),r.updateDisplay(),k.bind(r.__select,"change",(function(){var t=this.options[this.selectedIndex].value;s.setValue(t)})),r.domElement.appendChild(r.__select),r}return v(e,t),m(e,[{key:"setValue",value:function(t){var n=g(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,t);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),n}},{key:"updateDisplay",value:function(){return k.isActive(this.__select)?this:(this.__select.value=this.getValue(),g(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this))}}]),e}(x),D=function(t){function e(t,n){p(this,e);var i=y(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),r=i;function o(){r.setValue(r.__input.value)}return i.__input=document.createElement("input"),i.__input.setAttribute("type","text"),k.bind(i.__input,"keyup",o),k.bind(i.__input,"change",o),k.bind(i.__input,"blur",(function(){r.__onFinishChange&&r.__onFinishChange.call(r,r.getValue())})),k.bind(i.__input,"keydown",(function(t){13===t.keyCode&&this.blur()})),i.updateDisplay(),i.domElement.appendChild(i.__input),i}return v(e,t),m(e,[{key:"updateDisplay",value:function(){return k.isActive(this.__input)||(this.__input.value=this.getValue()),g(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(x);function L(t){var e=t.toString();return e.indexOf(".")>-1?e.length-e.indexOf(".")-1:0}var A=function(t){function e(t,n,i){p(this,e);var r=y(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),o=i||{};return r.__min=o.min,r.__max=o.max,r.__step=o.step,a.isUndefined(r.__step)?0===r.initialValue?r.__impliedStep=1:r.__impliedStep=Math.pow(10,Math.floor(Math.log(Math.abs(r.initialValue))/Math.LN10))/10:r.__impliedStep=r.__step,r.__precision=L(r.__impliedStep),r}return v(e,t),m(e,[{key:"setValue",value:function(t){var n=t;return void 0!==this.__min&&n<this.__min?n=this.__min:void 0!==this.__max&&n>this.__max&&(n=this.__max),void 0!==this.__step&&n%this.__step!=0&&(n=Math.round(n/this.__step)*this.__step),g(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,n)}},{key:"min",value:function(t){return this.__min=t,this}},{key:"max",value:function(t){return this.__max=t,this}},{key:"step",value:function(t){return this.__step=t,this.__impliedStep=t,this.__precision=L(t),this}}]),e}(x);var O=function(t){function e(t,n,i){p(this,e);var r=y(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,i));r.__truncationSuspended=!1;var o=r,s=void 0;function l(){o.__onFinishChange&&o.__onFinishChange.call(o,o.getValue())}function u(t){var e=s-t.clientY;o.setValue(o.getValue()+e*o.__impliedStep),s=t.clientY}function c(){k.unbind(window,"mousemove",u),k.unbind(window,"mouseup",c),l()}return r.__input=document.createElement("input"),r.__input.setAttribute("type","text"),k.bind(r.__input,"change",(function(){var t=parseFloat(o.__input.value);a.isNaN(t)||o.setValue(t)})),k.bind(r.__input,"blur",(function(){l()})),k.bind(r.__input,"mousedown",(function(t){k.bind(window,"mousemove",u),k.bind(window,"mouseup",c),s=t.clientY})),k.bind(r.__input,"keydown",(function(t){13===t.keyCode&&(o.__truncationSuspended=!0,this.blur(),o.__truncationSuspended=!1,l())})),r.updateDisplay(),r.domElement.appendChild(r.__input),r}return v(e,t),m(e,[{key:"updateDisplay",value:function(){var t,n,i;return this.__input.value=this.__truncationSuspended?this.getValue():(t=this.getValue(),n=this.__precision,i=Math.pow(10,n),Math.round(t*i)/i),g(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(A);function P(t,e,n,i,r){return i+(t-e)/(n-e)*(r-i)}var I=function(t){function e(t,n,i,r,o){p(this,e);var a=y(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,{min:i,max:r,step:o})),s=a;function l(t){t.preventDefault();var e=s.__background.getBoundingClientRect();return s.setValue(P(t.clientX,e.left,e.right,s.__min,s.__max)),!1}function u(){k.unbind(window,"mousemove",l),k.unbind(window,"mouseup",u),s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}function c(t){var e=t.touches[0].clientX,n=s.__background.getBoundingClientRect();s.setValue(P(e,n.left,n.right,s.__min,s.__max))}function h(){k.unbind(window,"touchmove",c),k.unbind(window,"touchend",h),s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}return a.__background=document.createElement("div"),a.__foreground=document.createElement("div"),k.bind(a.__background,"mousedown",(function(t){document.activeElement.blur(),k.bind(window,"mousemove",l),k.bind(window,"mouseup",u),l(t)})),k.bind(a.__background,"touchstart",(function(t){if(1!==t.touches.length)return;k.bind(window,"touchmove",c),k.bind(window,"touchend",h),c(t)})),k.addClass(a.__background,"slider"),k.addClass(a.__foreground,"slider-fg"),a.updateDisplay(),a.__background.appendChild(a.__foreground),a.domElement.appendChild(a.__background),a}return v(e,t),m(e,[{key:"updateDisplay",value:function(){var t=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*t+"%",g(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(A),N=function(t){function e(t,n,i){p(this,e);var r=y(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),o=r;return r.__button=document.createElement("div"),r.__button.innerHTML=void 0===i?"Fire":i,k.bind(r.__button,"click",(function(t){return t.preventDefault(),o.fire(),!1})),k.addClass(r.__button,"button"),r.domElement.appendChild(r.__button),r}return v(e,t),m(e,[{key:"fire",value:function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}]),e}(x),R=function(t){function e(t,n){p(this,e);var i=y(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));i.__color=new b(i.getValue()),i.__temp=new b(0);var r=i;i.domElement=document.createElement("div"),k.makeSelectable(i.domElement,!1),i.__selector=document.createElement("div"),i.__selector.className="selector",i.__saturation_field=document.createElement("div"),i.__saturation_field.className="saturation-field",i.__field_knob=document.createElement("div"),i.__field_knob.className="field-knob",i.__field_knob_border="2px solid ",i.__hue_knob=document.createElement("div"),i.__hue_knob.className="hue-knob",i.__hue_field=document.createElement("div"),i.__hue_field.className="hue-field",i.__input=document.createElement("input"),i.__input.type="text",i.__input_textShadow="0 1px 1px ",k.bind(i.__input,"keydown",(function(t){13===t.keyCode&&f.call(this)})),k.bind(i.__input,"blur",f),k.bind(i.__selector,"mousedown",(function(){k.addClass(this,"drag").bind(window,"mouseup",(function(){k.removeClass(r.__selector,"drag")}))})),k.bind(i.__selector,"touchstart",(function(){k.addClass(this,"drag").bind(window,"touchend",(function(){k.removeClass(r.__selector,"drag")}))}));var o,s=document.createElement("div");function l(t){g(t),k.bind(window,"mousemove",g),k.bind(window,"touchmove",g),k.bind(window,"mouseup",h),k.bind(window,"touchend",h)}function u(t){v(t),k.bind(window,"mousemove",v),k.bind(window,"touchmove",v),k.bind(window,"mouseup",d),k.bind(window,"touchend",d)}function h(){k.unbind(window,"mousemove",g),k.unbind(window,"touchmove",g),k.unbind(window,"mouseup",h),k.unbind(window,"touchend",h),m()}function d(){k.unbind(window,"mousemove",v),k.unbind(window,"touchmove",v),k.unbind(window,"mouseup",d),k.unbind(window,"touchend",d),m()}function f(){var t=c(this.value);!1!==t?(r.__color.__state=t,r.setValue(r.__color.toOriginal())):this.value=r.__color.toString()}function m(){r.__onFinishChange&&r.__onFinishChange.call(r,r.__color.toOriginal())}function g(t){-1===t.type.indexOf("touch")&&t.preventDefault();var e=r.__saturation_field.getBoundingClientRect(),n=t.touches&&t.touches[0]||t,i=n.clientX,o=n.clientY,a=(i-e.left)/(e.right-e.left),s=1-(o-e.top)/(e.bottom-e.top);return s>1?s=1:s<0&&(s=0),a>1?a=1:a<0&&(a=0),r.__color.v=s,r.__color.s=a,r.setValue(r.__color.toOriginal()),!1}function v(t){-1===t.type.indexOf("touch")&&t.preventDefault();var e=r.__hue_field.getBoundingClientRect(),n=1-((t.touches&&t.touches[0]||t).clientY-e.top)/(e.bottom-e.top);return n>1?n=1:n<0&&(n=0),r.__color.h=360*n,r.setValue(r.__color.toOriginal()),!1}return a.extend(i.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),a.extend(i.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:i.__field_knob_border+(i.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),a.extend(i.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),a.extend(i.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),a.extend(s.style,{width:"100%",height:"100%",background:"none"}),j(s,"top","rgba(0,0,0,0)","#000"),a.extend(i.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),(o=i.__hue_field).style.background="",o.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",o.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",o.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",o.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",o.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",a.extend(i.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:i.__input_textShadow+"rgba(0,0,0,0.7)"}),k.bind(i.__saturation_field,"mousedown",l),k.bind(i.__saturation_field,"touchstart",l),k.bind(i.__field_knob,"mousedown",l),k.bind(i.__field_knob,"touchstart",l),k.bind(i.__hue_field,"mousedown",u),k.bind(i.__hue_field,"touchstart",u),i.__saturation_field.appendChild(s),i.__selector.appendChild(i.__field_knob),i.__selector.appendChild(i.__saturation_field),i.__selector.appendChild(i.__hue_field),i.__hue_field.appendChild(i.__hue_knob),i.domElement.appendChild(i.__input),i.domElement.appendChild(i.__selector),i.updateDisplay(),i}return v(e,t),m(e,[{key:"updateDisplay",value:function(){var t=c(this.getValue());if(!1!==t){var e=!1;a.each(b.COMPONENTS,(function(n){if(!a.isUndefined(t[n])&&!a.isUndefined(this.__color.__state[n])&&t[n]!==this.__color.__state[n])return e=!0,{}}),this),e&&a.extend(this.__color.__state,t)}a.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var n=this.__color.v<.5||this.__color.s>.5?255:0,i=255-n;a.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+n+","+n+","+n+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,j(this.__saturation_field,"left","#fff",this.__temp.toHexString()),this.__input.value=this.__color.toString(),a.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+n+","+n+","+n+")",textShadow:this.__input_textShadow+"rgba("+i+","+i+","+i+",.7)"})}}]),e}(x),Y=["-moz-","-o-","-webkit-","-ms-",""];function j(t,e,n,i){t.style.background="",a.each(Y,(function(r){t.style.cssText+="background: "+r+"linear-gradient("+e+", "+n+" 0%, "+i+" 100%); "}))}var F=function(t,e){var n=e||document,i=document.createElement("style");i.type="text/css",i.innerHTML=t;var r=n.getElementsByTagName("head")[0];try{r.appendChild(i)}catch(t){}},B='<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n\n    </div>\n\n  </div>\n\n</div>',z=function(t,e){var n=t[e];return a.isArray(arguments[2])||a.isObject(arguments[2])?new T(t,e,arguments[2]):a.isNumber(n)?a.isNumber(arguments[2])&&a.isNumber(arguments[3])?a.isNumber(arguments[4])?new I(t,e,arguments[2],arguments[3],arguments[4]):new I(t,e,arguments[2],arguments[3]):a.isNumber(arguments[4])?new O(t,e,{min:arguments[2],max:arguments[3],step:arguments[4]}):new O(t,e,{min:arguments[2],max:arguments[3]}):a.isString(n)?new D(t,e):a.isFunction(n)?new N(t,e,""):a.isBoolean(n)?new C(t,e):null};var H=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){setTimeout(t,1e3/60)},G=function(){function t(){p(this,t),this.backgroundElement=document.createElement("div"),a.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),k.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),a.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var e=this;k.bind(this.backgroundElement,"click",(function(){e.hide()}))}return m(t,[{key:"show",value:function(){var t=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),a.defer((function(){t.backgroundElement.style.opacity=1,t.domElement.style.opacity=1,t.domElement.style.webkitTransform="scale(1)"}))}},{key:"hide",value:function(){var t=this,e=function e(){t.domElement.style.display="none",t.backgroundElement.style.display="none",k.unbind(t.domElement,"webkitTransitionEnd",e),k.unbind(t.domElement,"transitionend",e),k.unbind(t.domElement,"oTransitionEnd",e)};k.bind(this.domElement,"webkitTransitionEnd",e),k.bind(this.domElement,"transitionend",e),k.bind(this.domElement,"oTransitionEnd",e),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"}},{key:"layout",value:function(){this.domElement.style.left=window.innerWidth/2-k.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-k.getHeight(this.domElement)/2+"px"}}]),t}(),W=function(t){if(t&&"undefined"!=typeof window){var e=document.createElement("style");return e.setAttribute("type","text/css"),e.innerHTML=t,document.head.appendChild(e),t}}(".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n");F(W);var U="Default",V=function(){try{return!!window.localStorage}catch(t){return!1}}(),X=void 0,q=!0,K=void 0,$=!1,Z=[],J=function t(e){var n=this,i=e||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),k.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],i=a.defaults(i,{closeOnTop:!1,autoPlace:!0,width:t.DEFAULT_WIDTH}),i=a.defaults(i,{resizable:i.autoPlace,hideable:i.autoPlace}),a.isUndefined(i.load)?i.load={preset:U}:i.preset&&(i.load.preset=i.preset),a.isUndefined(i.parent)&&i.hideable&&Z.push(this),i.resizable=a.isUndefined(i.parent)&&i.resizable,i.autoPlace&&a.isUndefined(i.scrollable)&&(i.scrollable=!0);var r,o=V&&"true"===localStorage.getItem(rt(this,"isLocal")),s=void 0,l=void 0;if(Object.defineProperties(this,{parent:{get:function(){return i.parent}},scrollable:{get:function(){return i.scrollable}},autoPlace:{get:function(){return i.autoPlace}},closeOnTop:{get:function(){return i.closeOnTop}},preset:{get:function(){return n.parent?n.getRoot().preset:i.load.preset},set:function(t){n.parent?n.getRoot().preset=t:i.load.preset=t,function(t){for(var e=0;e<t.__preset_select.length;e++)t.__preset_select[e].value===t.preset&&(t.__preset_select.selectedIndex=e)}(this),n.revert()}},width:{get:function(){return i.width},set:function(t){i.width=t,ut(n,t)}},name:{get:function(){return i.name},set:function(t){i.name=t,l&&(l.innerHTML=i.name)}},closed:{get:function(){return i.closed},set:function(e){i.closed=e,i.closed?k.addClass(n.__ul,t.CLASS_CLOSED):k.removeClass(n.__ul,t.CLASS_CLOSED),this.onResize(),n.__closeButton&&(n.__closeButton.innerHTML=e?t.TEXT_OPEN:t.TEXT_CLOSED)}},load:{get:function(){return i.load}},useLocalStorage:{get:function(){return o},set:function(t){V&&(o=t,t?k.bind(window,"unload",s):k.unbind(window,"unload",s),localStorage.setItem(rt(n,"isLocal"),t))}}}),a.isUndefined(i.parent)){if(this.closed=i.closed||!1,k.addClass(this.domElement,t.CLASS_MAIN),k.makeSelectable(this.domElement,!1),V&&o){n.useLocalStorage=!0;var u=localStorage.getItem(rt(this,"gui"));u&&(i.load=JSON.parse(u))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=t.TEXT_CLOSED,k.addClass(this.__closeButton,t.CLASS_CLOSE_BUTTON),i.closeOnTop?(k.addClass(this.__closeButton,t.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(k.addClass(this.__closeButton,t.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),k.bind(this.__closeButton,"click",(function(){n.closed=!n.closed}))}else{void 0===i.closed&&(i.closed=!0);var c=document.createTextNode(i.name);k.addClass(c,"controller-name"),l=Q(n,c);k.addClass(this.__ul,t.CLASS_CLOSED),k.addClass(l,"title"),k.bind(l,"click",(function(t){return t.preventDefault(),n.closed=!n.closed,!1})),i.closed||(this.closed=!1)}i.autoPlace&&(a.isUndefined(i.parent)&&(q&&(K=document.createElement("div"),k.addClass(K,"dg"),k.addClass(K,t.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(K),q=!1),K.appendChild(this.domElement),k.addClass(this.domElement,t.CLASS_AUTO_PLACE)),this.parent||ut(n,i.width)),this.__resizeHandler=function(){n.onResizeDebounced()},k.bind(window,"resize",this.__resizeHandler),k.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),k.bind(this.__ul,"transitionend",this.__resizeHandler),k.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),i.resizable&&lt(this),s=function(){V&&"true"===localStorage.getItem(rt(n,"isLocal"))&&localStorage.setItem(rt(n,"gui"),JSON.stringify(n.getSaveObject()))},this.saveToLocalStorageIfPossible=s,i.parent||((r=n.getRoot()).width+=1,a.defer((function(){r.width-=1})))};function Q(t,e,n){var i=document.createElement("li");return e&&i.appendChild(e),n?t.__ul.insertBefore(i,n):t.__ul.appendChild(i),t.onResize(),i}function tt(t){k.unbind(window,"resize",t.__resizeHandler),t.saveToLocalStorageIfPossible&&k.unbind(window,"unload",t.saveToLocalStorageIfPossible)}function et(t,e){var n=t.__preset_select[t.__preset_select.selectedIndex];n.innerHTML=e?n.value+"*":n.value}function nt(t,e){var n=t.getRoot(),i=n.__rememberedObjects.indexOf(e.object);if(-1!==i){var r=n.__rememberedObjectIndecesToControllers[i];if(void 0===r&&(r={},n.__rememberedObjectIndecesToControllers[i]=r),r[e.property]=e,n.load&&n.load.remembered){var o=n.load.remembered,a=void 0;if(o[t.preset])a=o[t.preset];else{if(!o.Default)return;a=o.Default}if(a[i]&&void 0!==a[i][e.property]){var s=a[i][e.property];e.initialValue=s,e.setValue(s)}}}}function it(t,e,n,i){if(void 0===e[n])throw new Error('Object "'+e+'" has no property "'+n+'"');var r=void 0;if(i.color)r=new R(e,n);else{var o=[e,n].concat(i.factoryArgs);r=z.apply(t,o)}i.before instanceof x&&(i.before=i.before.__li),nt(t,r),k.addClass(r.domElement,"c");var s=document.createElement("span");k.addClass(s,"property-name"),s.innerHTML=r.property;var l=document.createElement("div");l.appendChild(s),l.appendChild(r.domElement);var u=Q(t,l,i.before);return k.addClass(u,J.CLASS_CONTROLLER_ROW),r instanceof R?k.addClass(u,"color"):k.addClass(u,f(r.getValue())),function(t,e,n){if(n.__li=e,n.__gui=t,a.extend(n,{options:function(e){if(arguments.length>1){var i=n.__li.nextElementSibling;return n.remove(),it(t,n.object,n.property,{before:i,factoryArgs:[a.toArray(arguments)]})}if(a.isArray(e)||a.isObject(e)){var r=n.__li.nextElementSibling;return n.remove(),it(t,n.object,n.property,{before:r,factoryArgs:[e]})}},name:function(t){return n.__li.firstElementChild.firstElementChild.innerHTML=t,n},listen:function(){return n.__gui.listen(n),n},remove:function(){return n.__gui.remove(n),n}}),n instanceof I){var i=new O(n.object,n.property,{min:n.__min,max:n.__max,step:n.__step});a.each(["updateDisplay","onChange","onFinishChange","step","min","max"],(function(t){var e=n[t],r=i[t];n[t]=i[t]=function(){var t=Array.prototype.slice.call(arguments);return r.apply(i,t),e.apply(n,t)}})),k.addClass(e,"has-slider"),n.domElement.insertBefore(i.domElement,n.domElement.firstElementChild)}else if(n instanceof O){var r=function(e){if(a.isNumber(n.__min)&&a.isNumber(n.__max)){var i=n.__li.firstElementChild.firstElementChild.innerHTML,r=n.__gui.__listening.indexOf(n)>-1;n.remove();var o=it(t,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[n.__min,n.__max,n.__step]});return o.name(i),r&&o.listen(),o}return e};n.min=a.compose(r,n.min),n.max=a.compose(r,n.max)}else n instanceof C?(k.bind(e,"click",(function(){k.fakeEvent(n.__checkbox,"click")})),k.bind(n.__checkbox,"click",(function(t){t.stopPropagation()}))):n instanceof N?(k.bind(e,"click",(function(){k.fakeEvent(n.__button,"click")})),k.bind(e,"mouseover",(function(){k.addClass(n.__button,"hover")})),k.bind(e,"mouseout",(function(){k.removeClass(n.__button,"hover")}))):n instanceof R&&(k.addClass(e,"color"),n.updateDisplay=a.compose((function(t){return e.style.borderLeftColor=n.__color.toString(),t}),n.updateDisplay),n.updateDisplay());n.setValue=a.compose((function(e){return t.getRoot().__preset_select&&n.isModified()&&et(t.getRoot(),!0),e}),n.setValue)}(t,u,r),t.__controllers.push(r),r}function rt(t,e){return document.location.href+"."+e}function ot(t,e,n){var i=document.createElement("option");i.innerHTML=e,i.value=e,t.__preset_select.appendChild(i),n&&(t.__preset_select.selectedIndex=t.__preset_select.length-1)}function at(t,e){e.style.display=t.useLocalStorage?"block":"none"}function st(t){var e=t.__save_row=document.createElement("li");k.addClass(t.domElement,"has-save"),t.__ul.insertBefore(e,t.__ul.firstChild),k.addClass(e,"save-row");var n=document.createElement("span");n.innerHTML="&nbsp;",k.addClass(n,"button gears");var i=document.createElement("span");i.innerHTML="Save",k.addClass(i,"button"),k.addClass(i,"save");var r=document.createElement("span");r.innerHTML="New",k.addClass(r,"button"),k.addClass(r,"save-as");var o=document.createElement("span");o.innerHTML="Revert",k.addClass(o,"button"),k.addClass(o,"revert");var s=t.__preset_select=document.createElement("select");if(t.load&&t.load.remembered?a.each(t.load.remembered,(function(e,n){ot(t,n,n===t.preset)})):ot(t,U,!1),k.bind(s,"change",(function(){for(var e=0;e<t.__preset_select.length;e++)t.__preset_select[e].innerHTML=t.__preset_select[e].value;t.preset=this.value})),e.appendChild(s),e.appendChild(n),e.appendChild(i),e.appendChild(r),e.appendChild(o),V){var l=document.getElementById("dg-local-explain"),u=document.getElementById("dg-local-storage");document.getElementById("dg-save-locally").style.display="block","true"===localStorage.getItem(rt(0,"isLocal"))&&u.setAttribute("checked","checked"),at(t,l),k.bind(u,"change",(function(){t.useLocalStorage=!t.useLocalStorage,at(t,l)}))}var c=document.getElementById("dg-new-constructor");k.bind(c,"keydown",(function(t){!t.metaKey||67!==t.which&&67!==t.keyCode||X.hide()})),k.bind(n,"click",(function(){c.innerHTML=JSON.stringify(t.getSaveObject(),void 0,2),X.show(),c.focus(),c.select()})),k.bind(i,"click",(function(){t.save()})),k.bind(r,"click",(function(){var e=prompt("Enter a new preset name.");e&&t.saveAs(e)})),k.bind(o,"click",(function(){t.revert()}))}function lt(t){var e=void 0;function n(n){return n.preventDefault(),t.width+=e-n.clientX,t.onResize(),e=n.clientX,!1}function i(){k.removeClass(t.__closeButton,J.CLASS_DRAG),k.unbind(window,"mousemove",n),k.unbind(window,"mouseup",i)}function r(r){return r.preventDefault(),e=r.clientX,k.addClass(t.__closeButton,J.CLASS_DRAG),k.bind(window,"mousemove",n),k.bind(window,"mouseup",i),!1}t.__resize_handle=document.createElement("div"),a.extend(t.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"}),k.bind(t.__resize_handle,"mousedown",r),k.bind(t.__closeButton,"mousedown",r),t.domElement.insertBefore(t.__resize_handle,t.domElement.firstElementChild)}function ut(t,e){t.domElement.style.width=e+"px",t.__save_row&&t.autoPlace&&(t.__save_row.style.width=e+"px"),t.__closeButton&&(t.__closeButton.style.width=e+"px")}function ct(t,e){var n={};return a.each(t.__rememberedObjects,(function(i,r){var o={},s=t.__rememberedObjectIndecesToControllers[r];a.each(s,(function(t,n){o[n]=e?t.initialValue:t.getValue()})),n[r]=o})),n}function ht(t){0!==t.length&&H.call(window,(function(){ht(t)})),a.each(t,(function(t){t.updateDisplay()}))}J.toggleHide=function(){$=!$,a.each(Z,(function(t){t.domElement.style.display=$?"none":""}))},J.CLASS_AUTO_PLACE="a",J.CLASS_AUTO_PLACE_CONTAINER="ac",J.CLASS_MAIN="main",J.CLASS_CONTROLLER_ROW="cr",J.CLASS_TOO_TALL="taller-than-window",J.CLASS_CLOSED="closed",J.CLASS_CLOSE_BUTTON="close-button",J.CLASS_CLOSE_TOP="close-top",J.CLASS_CLOSE_BOTTOM="close-bottom",J.CLASS_DRAG="drag",J.DEFAULT_WIDTH=245,J.TEXT_CLOSED="Close Controls",J.TEXT_OPEN="Open Controls",J._keydownHandler=function(t){"text"===document.activeElement.type||72!==t.which&&72!==t.keyCode||J.toggleHide()},k.bind(window,"keydown",J._keydownHandler,!1),a.extend(J.prototype,{add:function(t,e){return it(this,t,e,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(t,e){return it(this,t,e,{color:!0})},remove:function(t){this.__ul.removeChild(t.__li),this.__controllers.splice(this.__controllers.indexOf(t),1);var e=this;a.defer((function(){e.onResize()}))},destroy:function(){if(this.parent)throw new Error("Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.");this.autoPlace&&K.removeChild(this.domElement);var t=this;a.each(this.__folders,(function(e){t.removeFolder(e)})),k.unbind(window,"keydown",J._keydownHandler,!1),tt(this)},addFolder:function(t){if(void 0!==this.__folders[t])throw new Error('You already have a folder in this GUI by the name "'+t+'"');var e={name:t,parent:this};e.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[t]&&(e.closed=this.load.folders[t].closed,e.load=this.load.folders[t]);var n=new J(e);this.__folders[t]=n;var i=Q(this,n.domElement);return k.addClass(i,"folder"),n},removeFolder:function(t){this.__ul.removeChild(t.domElement.parentElement),delete this.__folders[t.name],this.load&&this.load.folders&&this.load.folders[t.name]&&delete this.load.folders[t.name],tt(t);var e=this;a.each(t.__folders,(function(e){t.removeFolder(e)})),a.defer((function(){e.onResize()}))},open:function(){this.closed=!1},close:function(){this.closed=!0},hide:function(){this.domElement.style.display="none"},show:function(){this.domElement.style.display=""},onResize:function(){var t=this.getRoot();if(t.scrollable){var e=k.getOffset(t.__ul).top,n=0;a.each(t.__ul.childNodes,(function(e){t.autoPlace&&e===t.__save_row||(n+=k.getHeight(e))})),window.innerHeight-e-20<n?(k.addClass(t.domElement,J.CLASS_TOO_TALL),t.__ul.style.height=window.innerHeight-e-20+"px"):(k.removeClass(t.domElement,J.CLASS_TOO_TALL),t.__ul.style.height="auto")}t.__resize_handle&&a.defer((function(){t.__resize_handle.style.height=t.__ul.offsetHeight+"px"})),t.__closeButton&&(t.__closeButton.style.width=t.width+"px")},onResizeDebounced:a.debounce((function(){this.onResize()}),50),remember:function(){if(a.isUndefined(X)&&((X=new G).domElement.innerHTML=B),this.parent)throw new Error("You can only call remember on a top level GUI.");var t=this;a.each(Array.prototype.slice.call(arguments),(function(e){0===t.__rememberedObjects.length&&st(t),-1===t.__rememberedObjects.indexOf(e)&&t.__rememberedObjects.push(e)})),this.autoPlace&&ut(this,this.width)},getRoot:function(){for(var t=this;t.parent;)t=t.parent;return t},getSaveObject:function(){var t=this.load;return t.closed=this.closed,this.__rememberedObjects.length>0&&(t.preset=this.preset,t.remembered||(t.remembered={}),t.remembered[this.preset]=ct(this)),t.folders={},a.each(this.__folders,(function(e,n){t.folders[n]=e.getSaveObject()})),t},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=ct(this),et(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(t){this.load.remembered||(this.load.remembered={},this.load.remembered.Default=ct(this,!0)),this.load.remembered[t]=ct(this),this.preset=t,ot(this,t,!0),this.saveToLocalStorageIfPossible()},revert:function(t){a.each(this.__controllers,(function(e){this.getRoot().load.remembered?nt(t||this.getRoot(),e):e.setValue(e.initialValue),e.__onFinishChange&&e.__onFinishChange.call(e,e.getValue())}),this),a.each(this.__folders,(function(t){t.revert(t)})),t||et(this.getRoot(),!1)},listen:function(t){var e=0===this.__listening.length;this.__listening.push(t),e&&ht(this.__listening)},updateDisplay:function(){a.each(this.__controllers,(function(t){t.updateDisplay()})),a.each(this.__folders,(function(t){t.updateDisplay()}))}});var dt={Color:b,math:d,interpret:c},ft={Controller:x,BooleanController:C,OptionController:T,StringController:D,NumberController:A,NumberControllerBox:O,NumberControllerSlider:I,FunctionController:N,ColorController:R},pt={dom:k},mt={GUI:J},gt=J;const vt={color:dt,controllers:ft,dom:pt,gui:mt,GUI:J}},89550:t=>{t.exports=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}},62189:t=>{t.exports=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}},76057:t=>{t.exports=function(t){var e=new Float32Array(2);return e[0]=t[0],e[1]=t[1],e}},3492:t=>{t.exports=function(t,e){return t[0]=e[0],t[1]=e[1],t}},61589:t=>{t.exports=function(){var t=new Float32Array(2);return t[0]=0,t[1]=0,t}},77741:t=>{t.exports=function(t,e,n){var i=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=i,t}},80278:(t,e,n)=>{t.exports=n(27953)},27953:t=>{t.exports=function(t,e){var n=e[0]-t[0],i=e[1]-t[1];return Math.sqrt(n*n+i*i)}},49973:(t,e,n)=>{t.exports=n(6773)},6773:t=>{t.exports=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}},56601:t=>{t.exports=function(t,e){return t[0]*e[0]+t[1]*e[1]}},89936:t=>{t.exports=1e-6},51232:(t,e,n)=>{t.exports=function(t,e){var n=t[0],r=t[1],o=e[0],a=e[1];return Math.abs(n-o)<=i*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-a)<=i*Math.max(1,Math.abs(r),Math.abs(a))};var i=n(89936)},39546:t=>{t.exports=function(t,e){return t[0]===e[0]&&t[1]===e[1]}},67744:t=>{t.exports=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}},49002:(t,e,n)=>{t.exports=function(t,e,n,r,o,a){var s,l;e||(e=2);n||(n=0);l=r?Math.min(r*e+n,t.length):t.length;for(s=n;s<l;s+=e)i[0]=t[s],i[1]=t[s+1],o(i,i,a),t[s]=i[0],t[s+1]=i[1];return t};var i=n(61589)()},69878:t=>{t.exports=function(t,e){var n=new Float32Array(2);return n[0]=t,n[1]=e,n}},32644:(t,e,n)=>{t.exports={EPSILON:n(89936),create:n(61589),clone:n(76057),fromValues:n(69878),copy:n(3492),set:n(68854),equals:n(51232),exactEquals:n(39546),add:n(89550),subtract:n(43650),sub:n(45222),multiply:n(79920),mul:n(23113),divide:n(6773),div:n(49973),inverse:n(83793),min:n(20676),max:n(97899),rotate:n(48677),floor:n(67744),ceil:n(62189),round:n(57074),scale:n(47838),scaleAndAdd:n(21066),distance:n(27953),dist:n(80278),squaredDistance:n(14290),sqrDist:n(79569),length:n(37781),len:n(8123),squaredLength:n(26791),sqrLen:n(1791),negate:n(90549),normalize:n(36820),dot:n(56601),cross:n(77741),lerp:n(20577),random:n(85773),transformMat2:n(904),transformMat2d:n(60736),transformMat3:n(60221),transformMat4:n(37674),forEach:n(49002),limit:n(82418)}},83793:t=>{t.exports=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}},8123:(t,e,n)=>{t.exports=n(37781)},37781:t=>{t.exports=function(t){var e=t[0],n=t[1];return Math.sqrt(e*e+n*n)}},20577:t=>{t.exports=function(t,e,n,i){var r=e[0],o=e[1];return t[0]=r+i*(n[0]-r),t[1]=o+i*(n[1]-o),t}},82418:t=>{t.exports=function(t,e,n){var i=e[0]*e[0]+e[1]*e[1];if(i>n*n){var r=Math.sqrt(i);t[0]=e[0]/r*n,t[1]=e[1]/r*n}else t[0]=e[0],t[1]=e[1];return t}},97899:t=>{t.exports=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}},20676:t=>{t.exports=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}},23113:(t,e,n)=>{t.exports=n(79920)},79920:t=>{t.exports=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}},90549:t=>{t.exports=function(t,e){return t[0]=-e[0],t[1]=-e[1],t}},36820:t=>{t.exports=function(t,e){var n=e[0],i=e[1],r=n*n+i*i;r>0&&(r=1/Math.sqrt(r),t[0]=e[0]*r,t[1]=e[1]*r);return t}},85773:t=>{t.exports=function(t,e){e=e||1;var n=2*Math.random()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t}},48677:t=>{t.exports=function(t,e,n){var i=Math.cos(n),r=Math.sin(n),o=e[0],a=e[1];return t[0]=o*i-a*r,t[1]=o*r+a*i,t}},57074:t=>{t.exports=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}},47838:t=>{t.exports=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}},21066:t=>{t.exports=function(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t}},68854:t=>{t.exports=function(t,e,n){return t[0]=e,t[1]=n,t}},79569:(t,e,n)=>{t.exports=n(14290)},1791:(t,e,n)=>{t.exports=n(26791)},14290:t=>{t.exports=function(t,e){var n=e[0]-t[0],i=e[1]-t[1];return n*n+i*i}},26791:t=>{t.exports=function(t){var e=t[0],n=t[1];return e*e+n*n}},45222:(t,e,n)=>{t.exports=n(43650)},43650:t=>{t.exports=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}},904:t=>{t.exports=function(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[2]*r,t[1]=n[1]*i+n[3]*r,t}},60736:t=>{t.exports=function(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[2]*r+n[4],t[1]=n[1]*i+n[3]*r+n[5],t}},60221:t=>{t.exports=function(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[3]*r+n[6],t[1]=n[1]*i+n[4]*r+n[7],t}},37674:t=>{t.exports=function(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[4]*r+n[12],t[1]=n[1]*i+n[5]*r+n[13],t}},28282:(t,e,n)=>{var i=n(82354);t.exports={Graph:i.Graph,json:n(28974),alg:n(12440),version:i.version}},2842:(t,e,n)=>{var i=n(89126);t.exports=function(t){var e,n={},r=[];function o(r){i.has(n,r)||(n[r]=!0,e.push(r),i.each(t.successors(r),o),i.each(t.predecessors(r),o))}return i.each(t.nodes(),(function(t){e=[],o(t),e.length&&r.push(e)})),r}},53984:(t,e,n)=>{var i=n(89126);function r(t,e,n,o,a,s){i.has(o,e)||(o[e]=!0,n||s.push(e),i.each(a(e),(function(e){r(t,e,n,o,a,s)})),n&&s.push(e))}t.exports=function(t,e,n){i.isArray(e)||(e=[e]);var o=(t.isDirected()?t.successors:t.neighbors).bind(t),a=[],s={};return i.each(e,(function(e){if(!t.hasNode(e))throw new Error("Graph does not have node: "+e);r(t,e,"post"===n,s,o,a)})),a}},84847:(t,e,n)=>{var i=n(63763),r=n(89126);t.exports=function(t,e,n){return r.transform(t.nodes(),(function(r,o){r[o]=i(t,o,e,n)}),{})}},63763:(t,e,n)=>{var i=n(89126),r=n(75639);t.exports=function(t,e,n,i){return function(t,e,n,i){var o,a,s={},l=new r,u=function(t){var e=t.v!==o?t.v:t.w,i=s[e],r=n(t),u=a.distance+r;if(r<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+t+" Weight: "+r);u<i.distance&&(i.distance=u,i.predecessor=o,l.decrease(e,u))};t.nodes().forEach((function(t){var n=t===e?0:Number.POSITIVE_INFINITY;s[t]={distance:n},l.add(t,n)}));for(;l.size()>0&&(o=l.removeMin(),(a=s[o]).distance!==Number.POSITIVE_INFINITY);)i(o).forEach(u);return s}(t,String(e),n||o,i||function(e){return t.outEdges(e)})};var o=i.constant(1)},9096:(t,e,n)=>{var i=n(89126),r=n(5023);t.exports=function(t){return i.filter(r(t),(function(e){return e.length>1||1===e.length&&t.hasEdge(e[0],e[0])}))}},38924:(t,e,n)=>{var i=n(89126);t.exports=function(t,e,n){return function(t,e,n){var i={},r=t.nodes();return r.forEach((function(t){i[t]={},i[t][t]={distance:0},r.forEach((function(e){t!==e&&(i[t][e]={distance:Number.POSITIVE_INFINITY})})),n(t).forEach((function(n){var r=n.v===t?n.w:n.v,o=e(n);i[t][r]={distance:o,predecessor:t}}))})),r.forEach((function(t){var e=i[t];r.forEach((function(n){var o=i[n];r.forEach((function(n){var i=o[t],r=e[n],a=o[n],s=i.distance+r.distance;s<a.distance&&(a.distance=s,a.predecessor=r.predecessor)}))}))})),i}(t,e||r,n||function(e){return t.outEdges(e)})};var r=i.constant(1)},12440:(t,e,n)=>{t.exports={components:n(2842),dijkstra:n(63763),dijkstraAll:n(84847),findCycles:n(9096),floydWarshall:n(38924),isAcyclic:n(62707),postorder:n(58828),preorder:n(92648),prim:n(80514),tarjan:n(5023),topsort:n(2166)}},62707:(t,e,n)=>{var i=n(2166);t.exports=function(t){try{i(t)}catch(t){if(t instanceof i.CycleException)return!1;throw t}return!0}},58828:(t,e,n)=>{var i=n(53984);t.exports=function(t,e){return i(t,e,"post")}},92648:(t,e,n)=>{var i=n(53984);t.exports=function(t,e){return i(t,e,"pre")}},80514:(t,e,n)=>{var i=n(89126),r=n(30771),o=n(75639);t.exports=function(t,e){var n,a=new r,s={},l=new o;function u(t){var i=t.v===n?t.w:t.v,r=l.priority(i);if(void 0!==r){var o=e(t);o<r&&(s[i]=n,l.decrease(i,o))}}if(0===t.nodeCount())return a;i.each(t.nodes(),(function(t){l.add(t,Number.POSITIVE_INFINITY),a.setNode(t)})),l.decrease(t.nodes()[0],0);var c=!1;for(;l.size()>0;){if(n=l.removeMin(),i.has(s,n))a.setEdge(n,s[n]);else{if(c)throw new Error("Input graph is not connected: "+t);c=!0}t.nodeEdges(n).forEach(u)}return a}},5023:(t,e,n)=>{var i=n(89126);t.exports=function(t){var e=0,n=[],r={},o=[];function a(s){var l=r[s]={onStack:!0,lowlink:e,index:e++};if(n.push(s),t.successors(s).forEach((function(t){i.has(r,t)?r[t].onStack&&(l.lowlink=Math.min(l.lowlink,r[t].index)):(a(t),l.lowlink=Math.min(l.lowlink,r[t].lowlink))})),l.lowlink===l.index){var u,c=[];do{u=n.pop(),r[u].onStack=!1,c.push(u)}while(s!==u);o.push(c)}}return t.nodes().forEach((function(t){i.has(r,t)||a(t)})),o}},2166:(t,e,n)=>{var i=n(89126);function r(t){var e={},n={},r=[];if(i.each(t.sinks(),(function a(s){if(i.has(n,s))throw new o;i.has(e,s)||(n[s]=!0,e[s]=!0,i.each(t.predecessors(s),a),delete n[s],r.push(s))})),i.size(e)!==t.nodeCount())throw new o;return r}function o(){}t.exports=r,r.CycleException=o,o.prototype=new Error},75639:(t,e,n)=>{var i=n(89126);function r(){this._arr=[],this._keyIndices={}}t.exports=r,r.prototype.size=function(){return this._arr.length},r.prototype.keys=function(){return this._arr.map((function(t){return t.key}))},r.prototype.has=function(t){return i.has(this._keyIndices,t)},r.prototype.priority=function(t){var e=this._keyIndices[t];if(void 0!==e)return this._arr[e].priority},r.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},r.prototype.add=function(t,e){var n=this._keyIndices;if(t=String(t),!i.has(n,t)){var r=this._arr,o=r.length;return n[t]=o,r.push({key:t,priority:e}),this._decrease(o),!0}return!1},r.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key},r.prototype.decrease=function(t,e){var n=this._keyIndices[t];if(e>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[n].priority+" New: "+e);this._arr[n].priority=e,this._decrease(n)},r.prototype._heapify=function(t){var e=this._arr,n=2*t,i=n+1,r=t;n<e.length&&(r=e[n].priority<e[r].priority?n:r,i<e.length&&(r=e[i].priority<e[r].priority?i:r),r!==t&&(this._swap(t,r),this._heapify(r)))},r.prototype._decrease=function(t){for(var e,n=this._arr,i=n[t].priority;0!==t&&!(n[e=t>>1].priority<i);)this._swap(t,e),t=e},r.prototype._swap=function(t,e){var n=this._arr,i=this._keyIndices,r=n[t],o=n[e];n[t]=o,n[e]=r,i[o.key]=t,i[r.key]=e}},30771:(t,e,n)=>{"use strict";var i=n(89126);t.exports=o;var r="\0";function o(t){this._isDirected=!i.has(t,"directed")||t.directed,this._isMultigraph=!!i.has(t,"multigraph")&&t.multigraph,this._isCompound=!!i.has(t,"compound")&&t.compound,this._label=void 0,this._defaultNodeLabelFn=i.constant(void 0),this._defaultEdgeLabelFn=i.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function a(t,e){t[e]?t[e]++:t[e]=1}function s(t,e){--t[e]||delete t[e]}function l(t,e,n,r){var o=""+e,a=""+n;if(!t&&o>a){var s=o;o=a,a=s}return o+""+a+""+(i.isUndefined(r)?"\0":r)}function u(t,e,n,i){var r=""+e,o=""+n;if(!t&&r>o){var a=r;r=o,o=a}var s={v:r,w:o};return i&&(s.name=i),s}function c(t,e){return l(t,e.v,e.w,e.name)}o.prototype._nodeCount=0,o.prototype._edgeCount=0,o.prototype.isDirected=function(){return this._isDirected},o.prototype.isMultigraph=function(){return this._isMultigraph},o.prototype.isCompound=function(){return this._isCompound},o.prototype.setGraph=function(t){return this._label=t,this},o.prototype.graph=function(){return this._label},o.prototype.setDefaultNodeLabel=function(t){return i.isFunction(t)||(t=i.constant(t)),this._defaultNodeLabelFn=t,this},o.prototype.nodeCount=function(){return this._nodeCount},o.prototype.nodes=function(){return i.keys(this._nodes)},o.prototype.sources=function(){var t=this;return i.filter(this.nodes(),(function(e){return i.isEmpty(t._in[e])}))},o.prototype.sinks=function(){var t=this;return i.filter(this.nodes(),(function(e){return i.isEmpty(t._out[e])}))},o.prototype.setNodes=function(t,e){var n=arguments,r=this;return i.each(t,(function(t){n.length>1?r.setNode(t,e):r.setNode(t)})),this},o.prototype.setNode=function(t,e){return i.has(this._nodes,t)?(arguments.length>1&&(this._nodes[t]=e),this):(this._nodes[t]=arguments.length>1?e:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]=r,this._children[t]={},this._children["\0"][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount,this)},o.prototype.node=function(t){return this._nodes[t]},o.prototype.hasNode=function(t){return i.has(this._nodes,t)},o.prototype.removeNode=function(t){var e=this;if(i.has(this._nodes,t)){var n=function(t){e.removeEdge(e._edgeObjs[t])};delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],i.each(this.children(t),(function(t){e.setParent(t)})),delete this._children[t]),i.each(i.keys(this._in[t]),n),delete this._in[t],delete this._preds[t],i.each(i.keys(this._out[t]),n),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this},o.prototype.setParent=function(t,e){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(i.isUndefined(e))e=r;else{for(var n=e+="";!i.isUndefined(n);n=this.parent(n))if(n===t)throw new Error("Setting "+e+" as parent of "+t+" would create a cycle");this.setNode(e)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=e,this._children[e][t]=!0,this},o.prototype._removeFromParentsChildList=function(t){delete this._children[this._parent[t]][t]},o.prototype.parent=function(t){if(this._isCompound){var e=this._parent[t];if(e!==r)return e}},o.prototype.children=function(t){if(i.isUndefined(t)&&(t=r),this._isCompound){var e=this._children[t];if(e)return i.keys(e)}else{if(t===r)return this.nodes();if(this.hasNode(t))return[]}},o.prototype.predecessors=function(t){var e=this._preds[t];if(e)return i.keys(e)},o.prototype.successors=function(t){var e=this._sucs[t];if(e)return i.keys(e)},o.prototype.neighbors=function(t){var e=this.predecessors(t);if(e)return i.union(e,this.successors(t))},o.prototype.isLeaf=function(t){return 0===(this.isDirected()?this.successors(t):this.neighbors(t)).length},o.prototype.filterNodes=function(t){var e=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});e.setGraph(this.graph());var n=this;i.each(this._nodes,(function(n,i){t(i)&&e.setNode(i,n)})),i.each(this._edgeObjs,(function(t){e.hasNode(t.v)&&e.hasNode(t.w)&&e.setEdge(t,n.edge(t))}));var r={};function o(t){var i=n.parent(t);return void 0===i||e.hasNode(i)?(r[t]=i,i):i in r?r[i]:o(i)}return this._isCompound&&i.each(e.nodes(),(function(t){e.setParent(t,o(t))})),e},o.prototype.setDefaultEdgeLabel=function(t){return i.isFunction(t)||(t=i.constant(t)),this._defaultEdgeLabelFn=t,this},o.prototype.edgeCount=function(){return this._edgeCount},o.prototype.edges=function(){return i.values(this._edgeObjs)},o.prototype.setPath=function(t,e){var n=this,r=arguments;return i.reduce(t,(function(t,i){return r.length>1?n.setEdge(t,i,e):n.setEdge(t,i),i})),this},o.prototype.setEdge=function(){var t,e,n,r,o=!1,s=arguments[0];"object"==typeof s&&null!==s&&"v"in s?(t=s.v,e=s.w,n=s.name,2===arguments.length&&(r=arguments[1],o=!0)):(t=s,e=arguments[1],n=arguments[3],arguments.length>2&&(r=arguments[2],o=!0)),t=""+t,e=""+e,i.isUndefined(n)||(n=""+n);var c=l(this._isDirected,t,e,n);if(i.has(this._edgeLabels,c))return o&&(this._edgeLabels[c]=r),this;if(!i.isUndefined(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(e),this._edgeLabels[c]=o?r:this._defaultEdgeLabelFn(t,e,n);var h=u(this._isDirected,t,e,n);return t=h.v,e=h.w,Object.freeze(h),this._edgeObjs[c]=h,a(this._preds[e],t),a(this._sucs[t],e),this._in[e][c]=h,this._out[t][c]=h,this._edgeCount++,this},o.prototype.edge=function(t,e,n){var i=1===arguments.length?c(this._isDirected,arguments[0]):l(this._isDirected,t,e,n);return this._edgeLabels[i]},o.prototype.hasEdge=function(t,e,n){var r=1===arguments.length?c(this._isDirected,arguments[0]):l(this._isDirected,t,e,n);return i.has(this._edgeLabels,r)},o.prototype.removeEdge=function(t,e,n){var i=1===arguments.length?c(this._isDirected,arguments[0]):l(this._isDirected,t,e,n),r=this._edgeObjs[i];return r&&(t=r.v,e=r.w,delete this._edgeLabels[i],delete this._edgeObjs[i],s(this._preds[e],t),s(this._sucs[t],e),delete this._in[e][i],delete this._out[t][i],this._edgeCount--),this},o.prototype.inEdges=function(t,e){var n=this._in[t];if(n){var r=i.values(n);return e?i.filter(r,(function(t){return t.v===e})):r}},o.prototype.outEdges=function(t,e){var n=this._out[t];if(n){var r=i.values(n);return e?i.filter(r,(function(t){return t.w===e})):r}},o.prototype.nodeEdges=function(t,e){var n=this.inEdges(t,e);if(n)return n.concat(this.outEdges(t,e))}},82354:(t,e,n)=>{t.exports={Graph:n(30771),version:n(49631)}},28974:(t,e,n)=>{var i=n(89126),r=n(30771);function o(t){return i.map(t.nodes(),(function(e){var n=t.node(e),r=t.parent(e),o={v:e};return i.isUndefined(n)||(o.value=n),i.isUndefined(r)||(o.parent=r),o}))}function a(t){return i.map(t.edges(),(function(e){var n=t.edge(e),r={v:e.v,w:e.w};return i.isUndefined(e.name)||(r.name=e.name),i.isUndefined(n)||(r.value=n),r}))}t.exports={write:function(t){var e={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:o(t),edges:a(t)};i.isUndefined(t.graph())||(e.value=i.clone(t.graph()));return e},read:function(t){var e=new r(t.options).setGraph(t.value);return i.each(t.nodes,(function(t){e.setNode(t.v,t.value),t.parent&&e.setParent(t.v,t.parent)})),i.each(t.edges,(function(t){e.setEdge({v:t.v,w:t.w,name:t.name},t.value)})),e}}},89126:(t,e,n)=>{var i;try{i={clone:n(66678),constant:n(75703),each:n(66073),filter:n(63105),has:n(18721),isArray:n(1469),isEmpty:n(41609),isFunction:n(23560),isUndefined:n(52353),keys:n(3674),map:n(35161),reduce:n(54061),size:n(84238),transform:n(68718),union:n(93386),values:n(52628)}}catch(t){}i||(i=window._),t.exports=i},49631:t=>{t.exports="2.1.8"},94075:function(t,e,n){var i,r,o;o=function(){var t,e={defaultRadius:40,defaultRenderer:"canvas2d",defaultGradient:{.25:"rgb(0,0,255)",.55:"rgb(0,255,0)",.85:"yellow",1:"rgb(255,0,0)"},defaultMaxOpacity:1,defaultMinOpacity:0,defaultBlur:.85,defaultXField:"x",defaultYField:"y",defaultValueField:"value",plugins:{}},n=function(){var t=function(t){this._coordinator={},this._data=[],this._radi=[],this._min=10,this._max=1,this._xField=t.xField||t.defaultXField,this._yField=t.yField||t.defaultYField,this._valueField=t.valueField||t.defaultValueField,t.radius&&(this._cfgRadius=t.radius)},n=e.defaultRadius;return t.prototype={_organiseData:function(t,e){var i=t[this._xField],r=t[this._yField],o=this._radi,a=this._data,s=this._max,l=this._min,u=t[this._valueField]||1,c=t.radius||this._cfgRadius||n;a[i]||(a[i]=[],o[i]=[]),a[i][r]?a[i][r]+=u:(a[i][r]=u,o[i][r]=c);var h=a[i][r];return h>s?(e?this.setDataMax(h):this._max=h,!1):h<l?(e?this.setDataMin(h):this._min=h,!1):{x:i,y:r,value:u,radius:c,min:l,max:s}},_unOrganizeData:function(){var t=[],e=this._data,n=this._radi;for(var i in e)for(var r in e[i])t.push({x:i,y:r,radius:n[i][r],value:e[i][r]});return{min:this._min,max:this._max,data:t}},_onExtremaChange:function(){this._coordinator.emit("extremachange",{min:this._min,max:this._max})},addData:function(){if(arguments[0].length>0)for(var t=arguments[0],e=t.length;e--;)this.addData.call(this,t[e]);else{var n=this._organiseData(arguments[0],!0);n&&(0===this._data.length&&(this._min=this._max=n.value),this._coordinator.emit("renderpartial",{min:this._min,max:this._max,data:[n]}))}return this},setData:function(t){var e=t.data,n=e.length;this._data=[],this._radi=[];for(var i=0;i<n;i++)this._organiseData(e[i],!1);return this._max=t.max,this._min=t.min||0,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},removeData:function(){},setDataMax:function(t){return this._max=t,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},setDataMin:function(t){return this._min=t,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},setCoordinator:function(t){this._coordinator=t},_getInternalData:function(){return{max:this._max,min:this._min,data:this._data,radi:this._radi}},getData:function(){return this._unOrganizeData()}},t}(),i=function(){var t=function(t){var e=t.gradient||t.defaultGradient,n=document.createElement("canvas"),i=n.getContext("2d");n.width=256,n.height=1;var r=i.createLinearGradient(0,0,256,1);for(var o in e)r.addColorStop(o,e[o]);return i.fillStyle=r,i.fillRect(0,0,256,1),i.getImageData(0,0,256,1).data},e=function(t,e){var n=document.createElement("canvas"),i=n.getContext("2d"),r=t,o=t;if(n.width=n.height=2*t,1==e)i.beginPath(),i.arc(r,o,t,0,2*Math.PI,!1),i.fillStyle="rgba(0,0,0,1)",i.fill();else{var a=i.createRadialGradient(r,o,t*e,r,o,t);a.addColorStop(0,"rgba(0,0,0,1)"),a.addColorStop(1,"rgba(0,0,0,0)"),i.fillStyle=a,i.fillRect(0,0,2*t,2*t)}return n};function n(e){var n=e.container,i=this.shadowCanvas=document.createElement("canvas"),r=this.canvas=e.canvas||document.createElement("canvas"),o=(this._renderBoundaries=[1e4,1e4,0,0],getComputedStyle(e.container)||{});r.className="heatmap-canvas",this._width=r.width=i.width=e.width||+o.width.replace(/px/,""),this._height=r.height=i.height=e.height||+o.height.replace(/px/,""),this.shadowCtx=i.getContext("2d"),this.ctx=r.getContext("2d"),r.style.cssText=i.style.cssText="position:absolute;left:0;top:0;",n.style.position="relative",n.appendChild(r),this._palette=t(e),this._templates={},this._setStyles(e)}return n.prototype={renderPartial:function(t){t.data.length>0&&(this._drawAlpha(t),this._colorize())},renderAll:function(t){this._clear(),t.data.length>0&&(this._drawAlpha(function(t){for(var e=[],n=t.min,i=t.max,r=t.radi,o=(t=t.data,Object.keys(t)),a=o.length;a--;)for(var s=o[a],l=Object.keys(t[s]),u=l.length;u--;){var c=l[u],h=t[s][c],d=r[s][c];e.push({x:s,y:c,value:h,radius:d})}return{min:n,max:i,data:e}}(t)),this._colorize())},_updateGradient:function(e){this._palette=t(e)},updateConfig:function(t){t.gradient&&this._updateGradient(t),this._setStyles(t)},setDimensions:function(t,e){this._width=t,this._height=e,this.canvas.width=this.shadowCanvas.width=t,this.canvas.height=this.shadowCanvas.height=e},_clear:function(){this.shadowCtx.clearRect(0,0,this._width,this._height),this.ctx.clearRect(0,0,this._width,this._height)},_setStyles:function(t){this._blur=0==t.blur?0:t.blur||t.defaultBlur,t.backgroundColor&&(this.canvas.style.backgroundColor=t.backgroundColor),this._width=this.canvas.width=this.shadowCanvas.width=t.width||this._width,this._height=this.canvas.height=this.shadowCanvas.height=t.height||this._height,this._opacity=255*(t.opacity||0),this._maxOpacity=255*(t.maxOpacity||t.defaultMaxOpacity),this._minOpacity=255*(t.minOpacity||t.defaultMinOpacity),this._useGradientOpacity=!!t.useGradientOpacity},_drawAlpha:function(t){for(var n=this._min=t.min,i=this._max=t.max,r=(t=t.data||[]).length,o=1-this._blur;r--;){var a,s=t[r],l=s.x,u=s.y,c=s.radius,h=Math.min(s.value,i),d=l-c,f=u-c,p=this.shadowCtx;this._templates[c]?a=this._templates[c]:this._templates[c]=a=e(c,o);var m=(h-n)/(i-n);p.globalAlpha=m<.01?.01:m,p.drawImage(a,d,f),d<this._renderBoundaries[0]&&(this._renderBoundaries[0]=d),f<this._renderBoundaries[1]&&(this._renderBoundaries[1]=f),d+2*c>this._renderBoundaries[2]&&(this._renderBoundaries[2]=d+2*c),f+2*c>this._renderBoundaries[3]&&(this._renderBoundaries[3]=f+2*c)}},_colorize:function(){var t=this._renderBoundaries[0],e=this._renderBoundaries[1],n=this._renderBoundaries[2]-t,i=this._renderBoundaries[3]-e,r=this._width,o=this._height,a=this._opacity,s=this._maxOpacity,l=this._minOpacity,u=this._useGradientOpacity;t<0&&(t=0),e<0&&(e=0),t+n>r&&(n=r-t),e+i>o&&(i=o-e);for(var c=this.shadowCtx.getImageData(t,e,n,i),h=c.data,d=h.length,f=this._palette,p=3;p<d;p+=4){var m,g=h[p],v=4*g;v&&(m=a>0?a:g<s?g<l?l:g:s,h[p-3]=f[v],h[p-2]=f[v+1],h[p-1]=f[v+2],h[p]=u?f[v+3]:m)}c.data=h,this.ctx.putImageData(c,t,e),this._renderBoundaries=[1e3,1e3,0,0]},getValueAt:function(t){var e=this.shadowCtx.getImageData(t.x,t.y,1,1).data[3],n=this._max,i=this._min;return Math.abs(n-i)*(e/255)>>0},getDataURL:function(){return this.canvas.toDataURL()}},n}(),r=(t=!1,"canvas2d"===e.defaultRenderer&&(t=i),t),o=function(){for(var t={},e=arguments.length,n=0;n<e;n++){var i=arguments[n];for(var r in i)t[r]=i[r]}return t},a=function(){var t=function(){function t(){this.cStore={}}return t.prototype={on:function(t,e,n){var i=this.cStore;i[t]||(i[t]=[]),i[t].push((function(t){return e.call(n,t)}))},emit:function(t,e){var n=this.cStore;if(n[t])for(var i=n[t].length,r=0;r<i;r++)(0,n[t][r])(e)}},t}(),i=function(t){var e=t._renderer,n=t._coordinator,i=t._store;n.on("renderpartial",e.renderPartial,e),n.on("renderall",e.renderAll,e),n.on("extremachange",(function(e){t._config.onExtremaChange&&t._config.onExtremaChange({min:e.min,max:e.max,gradient:t._config.gradient||t._config.defaultGradient})})),i.setCoordinator(n)};function a(){var a=this._config=o(e,arguments[0]||{});if(this._coordinator=new t,a.plugin){var s=a.plugin;if(!e.plugins[s])throw new Error("Plugin '"+s+"' not found. Maybe it was not registered.");var l=e.plugins[s];this._renderer=new l.renderer(a),this._store=new l.store(a)}else this._renderer=new r(a),this._store=new n(a);i(this)}return a.prototype={addData:function(){return this._store.addData.apply(this._store,arguments),this},removeData:function(){return this._store.removeData&&this._store.removeData.apply(this._store,arguments),this},setData:function(){return this._store.setData.apply(this._store,arguments),this},setDataMax:function(){return this._store.setDataMax.apply(this._store,arguments),this},setDataMin:function(){return this._store.setDataMin.apply(this._store,arguments),this},configure:function(t){return this._config=o(this._config,t),this._renderer.updateConfig(this._config),this._coordinator.emit("renderall",this._store._getInternalData()),this},repaint:function(){return this._coordinator.emit("renderall",this._store._getInternalData()),this},getData:function(){return this._store.getData()},getDataURL:function(){return this._renderer.getDataURL()},getValueAt:function(t){return this._store.getValueAt?this._store.getValueAt(t):this._renderer.getValueAt?this._renderer.getValueAt(t):null}},a}();return{create:function(t){return new a(t)},register:function(t,n){e.plugins[t]=n}}},t.exports?t.exports=o():void 0===(r="function"==typeof(i=o)?i.call(e,n,e,t):i)||(t.exports=r)},38186:t=>{var e=[],n=[];function i(t,i){if(i=i||{},void 0===t)throw new Error("insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).");var r,o=!0===i.prepend?"prepend":"append",a=void 0!==i.container?i.container:document.querySelector("head"),s=e.indexOf(a);return-1===s&&(s=e.push(a)-1,n[s]={}),void 0!==n[s]&&void 0!==n[s][o]?r=n[s][o]:(r=n[s][o]=function(){var t=document.createElement("style");return t.setAttribute("type","text/css"),t}(),"prepend"===o?a.insertBefore(r,a.childNodes[0]):a.appendChild(r)),65279===t.charCodeAt(0)&&(t=t.substr(1,t.length)),r.styleSheet?r.styleSheet.cssText+=t:r.textContent+=t,r}t.exports=i,t.exports.insertCss=i},7375:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=Symbol.for("INJECTION");function i(t,e,i,r){Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return r&&!Reflect.hasMetadata(n,this,e)&&Reflect.defineMetadata(n,i(),this,e),Reflect.hasMetadata(n,this,e)?Reflect.getMetadata(n,this,e):i()},set:function(t){Reflect.defineMetadata(n,t,this,e)}})}e.makePropertyInjectDecorator=function(t,e){return function(n){return function(r,o){i(r,o,(function(){return t.get(n)}),e)}}},e.makePropertyInjectNamedDecorator=function(t,e){return function(n,r){return function(o,a){i(o,a,(function(){return t.getNamed(n,r)}),e)}}},e.makePropertyInjectTaggedDecorator=function(t,e){return function(n,r,o){return function(a,s){i(a,s,(function(){return t.getTagged(n,r,o)}),e)}}},e.makePropertyMultiInjectDecorator=function(t,e){return function(n){return function(r,o){i(r,o,(function(){return t.getAll(n)}),e)}}}},84879:(t,e,n)=>{"use strict";var i=n(7375);e.Z=function(t,e){return void 0===e&&(e=!0),{lazyInject:i.makePropertyInjectDecorator(t,e),lazyInjectNamed:i.makePropertyInjectNamedDecorator(t,e),lazyInjectTagged:i.makePropertyInjectTaggedDecorator(t,e),lazyMultiInject:i.makePropertyMultiInjectDecorator(t,e)}}},99934:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tagProperty=e.tagParameter=e.decorate=void 0;var i=n(16674),r=n(6867);function o(t,e,n,r,o){var a={},s="number"==typeof o,l=void 0!==o&&s?o.toString():n;if(s&&void 0!==n)throw new Error(i.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(t,e)&&(a=Reflect.getMetadata(t,e));var u=a[l];if(Array.isArray(u))for(var c=0,h=u;c<h.length;c++){var d=h[c];if(d.key===r.key)throw new Error(i.DUPLICATED_METADATA+" "+d.key.toString())}else u=[];u.push(r),a[l]=u,Reflect.defineMetadata(t,a,e)}function a(t,e){Reflect.decorate(t,e)}function s(t,e){return function(n,i){e(n,i,t)}}e.tagParameter=function(t,e,n,i){o(r.TAGGED,t,e,i,n)},e.tagProperty=function(t,e,n){o(r.TAGGED_PROP,t.constructor,e,n)},e.decorate=function(t,e,n){"number"==typeof n?a([s(n,t)],e):"string"==typeof n?Reflect.decorate([t],e,n):a([t],e)}},5744:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.inject=e.LazyServiceIdentifer=void 0;var i=n(16674),r=n(6867),o=n(47738),a=n(99934),s=function(){function t(t){this._cb=t}return t.prototype.unwrap=function(){return this._cb()},t}();e.LazyServiceIdentifer=s,e.inject=function(t){return function(e,n,s){if(void 0===t)throw new Error(i.UNDEFINED_INJECT_ANNOTATION(e.name));var l=new o.Metadata(r.INJECT_TAG,t);"number"==typeof s?a.tagParameter(e,n,s,l):a.tagProperty(e,n,l)}}},64315:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.injectable=void 0;var i=n(16674),r=n(6867);e.injectable=function(){return function(t){if(Reflect.hasOwnMetadata(r.PARAM_TYPES,t))throw new Error(i.DUPLICATED_INJECTABLE_DECORATOR);var e=Reflect.getMetadata(r.DESIGN_PARAM_TYPES,t)||[];return Reflect.defineMetadata(r.PARAM_TYPES,e,t),t}}},71693:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.multiInject=void 0;var i=n(6867),r=n(47738),o=n(99934);e.multiInject=function(t){return function(e,n,a){var s=new r.Metadata(i.MULTI_INJECT_TAG,t);"number"==typeof a?o.tagParameter(e,n,a,s):o.tagProperty(e,n,s)}}},38085:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.named=void 0;var i=n(6867),r=n(47738),o=n(99934);e.named=function(t){return function(e,n,a){var s=new r.Metadata(i.NAMED_TAG,t);"number"==typeof a?o.tagParameter(e,n,a,s):o.tagProperty(e,n,s)}}},6515:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.optional=void 0;var i=n(6867),r=n(47738),o=n(99934);e.optional=function(){return function(t,e,n){var a=new r.Metadata(i.OPTIONAL_TAG,!0);"number"==typeof n?o.tagParameter(t,e,n,a):o.tagProperty(t,e,a)}}},7014:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.postConstruct=void 0;var i=n(16674),r=n(6867),o=n(47738);e.postConstruct=function(){return function(t,e,n){var a=new o.Metadata(r.POST_CONSTRUCT,e);if(Reflect.hasOwnMetadata(r.POST_CONSTRUCT,t.constructor))throw new Error(i.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(r.POST_CONSTRUCT,a,t.constructor)}}},32052:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tagged=void 0;var i=n(47738),r=n(99934);e.tagged=function(t,e){return function(n,o,a){var s=new i.Metadata(t,e);"number"==typeof a?r.tagParameter(n,o,a,s):r.tagProperty(n,o,s)}}},55638:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.targetName=void 0;var i=n(6867),r=n(47738),o=n(99934);e.targetName=function(t){return function(e,n,a){var s=new r.Metadata(i.NAME_TAG,t);o.tagParameter(e,n,a,s)}}},86757:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.unmanaged=void 0;var i=n(6867),r=n(47738),o=n(99934);e.unmanaged=function(){return function(t,e,n){var a=new r.Metadata(i.UNMANAGED_TAG,!0);o.tagParameter(t,e,n,a)}}},44290:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Binding=void 0;var i=n(28421),r=n(37791),o=function(){function t(t,e){this.id=r.id(),this.activated=!1,this.serviceIdentifier=t,this.scope=e,this.type=i.BindingTypeEnum.Invalid,this.constraint=function(t){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return t.prototype.clone=function(){var e=new t(this.serviceIdentifier,this.scope);return e.activated=e.scope===i.BindingScopeEnum.Singleton&&this.activated,e.implementationType=this.implementationType,e.dynamicValue=this.dynamicValue,e.scope=this.scope,e.type=this.type,e.factory=this.factory,e.provider=this.provider,e.constraint=this.constraint,e.onActivation=this.onActivation,e.cache=this.cache,e},t}();e.Binding=o},23184:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingCount=void 0;e.BindingCount={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1}},16674:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.STACK_OVERFLOW=e.CIRCULAR_DEPENDENCY_IN_FACTORY=e.POST_CONSTRUCT_ERROR=e.MULTIPLE_POST_CONSTRUCT_METHODS=e.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK=e.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE=e.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE=e.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT=e.ARGUMENTS_LENGTH_MISMATCH=e.INVALID_DECORATOR_OPERATION=e.INVALID_TO_SELF_VALUE=e.INVALID_FUNCTION_BINDING=e.INVALID_MIDDLEWARE_RETURN=e.NO_MORE_SNAPSHOTS_AVAILABLE=e.INVALID_BINDING_TYPE=e.NOT_IMPLEMENTED=e.CIRCULAR_DEPENDENCY=e.UNDEFINED_INJECT_ANNOTATION=e.MISSING_INJECT_ANNOTATION=e.MISSING_INJECTABLE_ANNOTATION=e.NOT_REGISTERED=e.CANNOT_UNBIND=e.AMBIGUOUS_MATCH=e.KEY_NOT_FOUND=e.NULL_ARGUMENT=e.DUPLICATED_METADATA=e.DUPLICATED_INJECTABLE_DECORATOR=void 0,e.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",e.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",e.NULL_ARGUMENT="NULL argument",e.KEY_NOT_FOUND="Key Not Found",e.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",e.CANNOT_UNBIND="Could not unbind serviceIdentifier:",e.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",e.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",e.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:";e.UNDEFINED_INJECT_ANNOTATION=function(t){return"@inject called with undefined this could mean that the class "+t+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."},e.CIRCULAR_DEPENDENCY="Circular dependency found:",e.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",e.INVALID_BINDING_TYPE="Invalid binding type:",e.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",e.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",e.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",e.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",e.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.";e.ARGUMENTS_LENGTH_MISMATCH=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"The number of constructor arguments in the derived class "+t[0]+" must be >= than the number of constructor arguments of its base class."},e.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",e.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",e.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",e.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",e.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class";e.POST_CONSTRUCT_ERROR=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"@postConstruct error in class "+t[0]+": "+t[1]};e.CIRCULAR_DEPENDENCY_IN_FACTORY=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"It looks like there is a circular dependency in one of the '"+t[0]+"' bindings. Please investigate bindings withservice identifier '"+t[1]+"'."},e.STACK_OVERFLOW="Maximum call stack size exceeded"},28421:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TargetTypeEnum=e.BindingTypeEnum=e.BindingScopeEnum=void 0;e.BindingScopeEnum={Request:"Request",Singleton:"Singleton",Transient:"Transient"};e.BindingTypeEnum={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"};e.TargetTypeEnum={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"}},6867:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NON_CUSTOM_TAG_KEYS=e.POST_CONSTRUCT=e.DESIGN_PARAM_TYPES=e.PARAM_TYPES=e.TAGGED_PROP=e.TAGGED=e.MULTI_INJECT_TAG=e.INJECT_TAG=e.OPTIONAL_TAG=e.UNMANAGED_TAG=e.NAME_TAG=e.NAMED_TAG=void 0,e.NAMED_TAG="named",e.NAME_TAG="name",e.UNMANAGED_TAG="unmanaged",e.OPTIONAL_TAG="optional",e.INJECT_TAG="inject",e.MULTI_INJECT_TAG="multi_inject",e.TAGGED="inversify:tagged",e.TAGGED_PROP="inversify:tagged_props",e.PARAM_TYPES="inversify:paramtypes",e.DESIGN_PARAM_TYPES="design:paramtypes",e.POST_CONSTRUCT="post_construct",e.NON_CUSTOM_TAG_KEYS=[e.INJECT_TAG,e.MULTI_INJECT_TAG,e.NAME_TAG,e.UNMANAGED_TAG,e.NAMED_TAG,e.OPTIONAL_TAG]},51389:function(t,e,n){"use strict";var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function a(t){try{l(i.next(t))}catch(t){o(t)}}function s(t){try{l(i.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((i=i.apply(t,e||[])).next())}))},r=this&&this.__generator||function(t,e){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},o=this&&this.__spreadArray||function(t,e){for(var n=0,i=e.length,r=t.length;n<i;n++,r++)t[r]=e[n];return t};Object.defineProperty(e,"__esModule",{value:!0}),e.Container=void 0;var a=n(44290),s=n(16674),l=n(28421),u=n(6867),c=n(51377),h=n(86311),d=n(31927),f=n(51860),p=n(37791),m=n(55800),g=n(85700),v=n(80175),y=function(){function t(t){this._appliedMiddleware=[];var e=t||{};if("object"!=typeof e)throw new Error(""+s.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(void 0===e.defaultScope)e.defaultScope=l.BindingScopeEnum.Transient;else if(e.defaultScope!==l.BindingScopeEnum.Singleton&&e.defaultScope!==l.BindingScopeEnum.Transient&&e.defaultScope!==l.BindingScopeEnum.Request)throw new Error(""+s.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(void 0===e.autoBindInjectable)e.autoBindInjectable=!1;else if("boolean"!=typeof e.autoBindInjectable)throw new Error(""+s.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(void 0===e.skipBaseClassChecks)e.skipBaseClassChecks=!1;else if("boolean"!=typeof e.skipBaseClassChecks)throw new Error(""+s.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:e.autoBindInjectable,defaultScope:e.defaultScope,skipBaseClassChecks:e.skipBaseClassChecks},this.id=p.id(),this._bindingDictionary=new v.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new c.MetadataReader}return t.merge=function(e,n){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];var a=new t,s=o([e,n],i).map((function(t){return h.getBindingDictionary(t)})),l=h.getBindingDictionary(a);function u(t,e){t.traverse((function(t,n){n.forEach((function(t){e.add(t.serviceIdentifier,t.clone())}))}))}return s.forEach((function(t){u(t,l)})),a},t.prototype.load=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=this._getContainerModuleHelpersFactory(),i=0,r=t;i<r.length;i++){var o=r[i],a=n(o.id);o.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction)}},t.prototype.loadAsync=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return i(this,void 0,void 0,(function(){var e,n,i,o,a;return r(this,(function(r){switch(r.label){case 0:e=this._getContainerModuleHelpersFactory(),n=0,i=t,r.label=1;case 1:return n<i.length?(o=i[n],a=e(o.id),[4,o.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction)]):[3,4];case 2:r.sent(),r.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))},t.prototype.unload=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=function(t){return function(e){return e.moduleId===t}};e.forEach((function(e){var n=i(e.id);t._bindingDictionary.removeByCondition(n)}))},t.prototype.bind=function(t){var e=this.options.defaultScope||l.BindingScopeEnum.Transient,n=new a.Binding(t,e);return this._bindingDictionary.add(t,n),new f.BindingToSyntax(n)},t.prototype.rebind=function(t){return this.unbind(t),this.bind(t)},t.prototype.unbind=function(t){try{this._bindingDictionary.remove(t)}catch(e){throw new Error(s.CANNOT_UNBIND+" "+m.getServiceIdentifierAsString(t))}},t.prototype.unbindAll=function(){this._bindingDictionary=new v.Lookup},t.prototype.isBound=function(t){var e=this._bindingDictionary.hasKey(t);return!e&&this.parent&&(e=this.parent.isBound(t)),e},t.prototype.isBoundNamed=function(t,e){return this.isBoundTagged(t,u.NAMED_TAG,e)},t.prototype.isBoundTagged=function(t,e,n){var i=!1;if(this._bindingDictionary.hasKey(t)){var r=this._bindingDictionary.get(t),o=h.createMockRequest(this,t,e,n);i=r.some((function(t){return t.constraint(o)}))}return!i&&this.parent&&(i=this.parent.isBoundTagged(t,e,n)),i},t.prototype.snapshot=function(){this._snapshots.push(g.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},t.prototype.restore=function(){var t=this._snapshots.pop();if(void 0===t)throw new Error(s.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=t.bindings,this._middleware=t.middleware},t.prototype.createChild=function(e){var n=new t(e||this.options);return n.parent=this,n},t.prototype.applyMiddleware=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._appliedMiddleware=this._appliedMiddleware.concat(t);var n=this._middleware?this._middleware:this._planAndResolve();this._middleware=t.reduce((function(t,e){return e(t)}),n)},t.prototype.applyCustomMetadataReader=function(t){this._metadataReader=t},t.prototype.get=function(t){return this._get(!1,!1,l.TargetTypeEnum.Variable,t)},t.prototype.getTagged=function(t,e,n){return this._get(!1,!1,l.TargetTypeEnum.Variable,t,e,n)},t.prototype.getNamed=function(t,e){return this.getTagged(t,u.NAMED_TAG,e)},t.prototype.getAll=function(t){return this._get(!0,!0,l.TargetTypeEnum.Variable,t)},t.prototype.getAllTagged=function(t,e,n){return this._get(!1,!0,l.TargetTypeEnum.Variable,t,e,n)},t.prototype.getAllNamed=function(t,e){return this.getAllTagged(t,u.NAMED_TAG,e)},t.prototype.resolve=function(t){var e=this.createChild();return e.bind(t).toSelf(),this._appliedMiddleware.forEach((function(t){e.applyMiddleware(t)})),e.get(t)},t.prototype._getContainerModuleHelpersFactory=function(){var t=this,e=function(t,e){t._binding.moduleId=e},n=function(n){return function(i){var r=t.rebind.bind(t)(i);return e(r,n),r}};return function(i){return{bindFunction:(r=i,function(n){var i=t.bind.bind(t)(n);return e(i,r),i}),isboundFunction:function(e){return t.isBound.bind(t)(e)},rebindFunction:n(i),unbindFunction:function(e){t.unbind.bind(t)(e)}};var r}},t.prototype._get=function(t,e,n,i,r,o){var a=null,l={avoidConstraints:t,contextInterceptor:function(t){return t},isMultiInject:e,key:r,serviceIdentifier:i,targetType:n,value:o};if(this._middleware){if(null==(a=this._middleware(l)))throw new Error(s.INVALID_MIDDLEWARE_RETURN)}else a=this._planAndResolve()(l);return a},t.prototype._planAndResolve=function(){var t=this;return function(e){var n=h.plan(t._metadataReader,t,e.isMultiInject,e.targetType,e.serviceIdentifier,e.key,e.value,e.avoidConstraints);return n=e.contextInterceptor(n),d.resolve(n)}},t}();e.Container=y},33244:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncContainerModule=e.ContainerModule=void 0;var i=n(37791),r=function(t){this.id=i.id(),this.registry=t};e.ContainerModule=r;var o=function(t){this.id=i.id(),this.registry=t};e.AsyncContainerModule=o},85700:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContainerSnapshot=void 0;var n=function(){function t(){}return t.of=function(e,n){var i=new t;return i.bindings=e,i.middleware=n,i},t}();e.ContainerSnapshot=n},80175:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Lookup=void 0;var i=n(16674),r=function(){function t(){this._map=new Map}return t.prototype.getMap=function(){return this._map},t.prototype.add=function(t,e){if(null==t)throw new Error(i.NULL_ARGUMENT);if(null==e)throw new Error(i.NULL_ARGUMENT);var n=this._map.get(t);void 0!==n?(n.push(e),this._map.set(t,n)):this._map.set(t,[e])},t.prototype.get=function(t){if(null==t)throw new Error(i.NULL_ARGUMENT);var e=this._map.get(t);if(void 0!==e)return e;throw new Error(i.KEY_NOT_FOUND)},t.prototype.remove=function(t){if(null==t)throw new Error(i.NULL_ARGUMENT);if(!this._map.delete(t))throw new Error(i.KEY_NOT_FOUND)},t.prototype.removeByCondition=function(t){var e=this;this._map.forEach((function(n,i){var r=n.filter((function(e){return!t(e)}));r.length>0?e._map.set(i,r):e._map.delete(i)}))},t.prototype.hasKey=function(t){if(null==t)throw new Error(i.NULL_ARGUMENT);return this._map.has(t)},t.prototype.clone=function(){var e=new t;return this._map.forEach((function(t,n){t.forEach((function(t){return e.add(n,t.clone())}))})),e},t.prototype.traverse=function(t){this._map.forEach((function(e,n){t(n,e)}))},t}();e.Lookup=r},86700:(t,e,n)=>{"use strict";e.f3=e.t6=e.b2=e.W2=void 0,n(6867);var i=n(51389);Object.defineProperty(e,"W2",{enumerable:!0,get:function(){return i.Container}});var r=n(28421);var o=n(33244);var a=n(64315);Object.defineProperty(e,"b2",{enumerable:!0,get:function(){return a.injectable}});var s=n(32052);var l=n(38085);Object.defineProperty(e,"t6",{enumerable:!0,get:function(){return l.named}});var u=n(5744);Object.defineProperty(e,"f3",{enumerable:!0,get:function(){return u.inject}});var c=n(6515);var h=n(86757);var d=n(71693);var f=n(55638);var p=n(7014);var m=n(51377);var g=n(37791);var v=n(99934);var y=n(80758);var b=n(55800);var _=n(70600)},95228:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Context=void 0;var i=n(37791),r=function(){function t(t){this.id=i.id(),this.container=t}return t.prototype.addPlan=function(t){this.plan=t},t.prototype.setCurrentRequest=function(t){this.currentRequest=t},t}();e.Context=r},47738:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var i=n(6867),r=function(){function t(t,e){this.key=t,this.value=e}return t.prototype.toString=function(){return this.key===i.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},t}();e.Metadata=r},51377:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MetadataReader=void 0;var i=n(6867),r=function(){function t(){}return t.prototype.getConstructorMetadata=function(t){return{compilerGeneratedMetadata:Reflect.getMetadata(i.PARAM_TYPES,t),userGeneratedMetadata:Reflect.getMetadata(i.TAGGED,t)||{}}},t.prototype.getPropertiesMetadata=function(t){return Reflect.getMetadata(i.TAGGED_PROP,t)||[]},t}();e.MetadataReader=r},55314:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Plan=void 0;var n=function(t,e){this.parentContext=t,this.rootRequest=e};e.Plan=n},86311:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getBindingDictionary=e.createMockRequest=e.plan=void 0;var i=n(23184),r=n(16674),o=n(28421),a=n(6867),s=n(85265),l=n(55800),u=n(95228),c=n(47738),h=n(55314),d=n(6e3),f=n(6748),p=n(18924);function m(t){return t._bindingDictionary}function g(t,e,n,o,a){var s=y(n.container,a.serviceIdentifier),u=[];return s.length===i.BindingCount.NoBindingsAvailable&&n.container.options.autoBindInjectable&&"function"==typeof a.serviceIdentifier&&t.getConstructorMetadata(a.serviceIdentifier).compilerGeneratedMetadata&&(n.container.bind(a.serviceIdentifier).toSelf(),s=y(n.container,a.serviceIdentifier)),u=e?s:s.filter((function(t){var e=new f.Request(t.serviceIdentifier,n,o,t,a);return t.constraint(e)})),function(t,e,n,o){switch(e.length){case i.BindingCount.NoBindingsAvailable:if(n.isOptional())return e;var a=l.getServiceIdentifierAsString(t),s=r.NOT_REGISTERED;throw s+=l.listMetadataForTarget(a,n),s+=l.listRegisteredBindingsForServiceIdentifier(o,a,y),new Error(s);case i.BindingCount.OnlyOneBindingAvailable:if(!n.isArray())return e;case i.BindingCount.MultipleBindingsAvailable:default:if(n.isArray())return e;a=l.getServiceIdentifierAsString(t),s=r.AMBIGUOUS_MATCH+" "+a;throw s+=l.listRegisteredBindingsForServiceIdentifier(o,a,y),new Error(s)}}(a.serviceIdentifier,u,a,n.container),u}function v(t,e,n,i,a,s){var l,u;if(null===a){l=g(t,e,i,null,s),u=new f.Request(n,i,null,l,s);var c=new h.Plan(i,u);i.addPlan(c)}else l=g(t,e,i,a,s),u=a.addChildRequest(s.serviceIdentifier,l,s);l.forEach((function(e){var n=null;if(s.isArray())n=u.addChildRequest(e.serviceIdentifier,e,s);else{if(e.cache)return;n=u}if(e.type===o.BindingTypeEnum.Instance&&null!==e.implementationType){var a=d.getDependencies(t,e.implementationType);if(!i.container.options.skipBaseClassChecks){var l=d.getBaseClassDependencyCount(t,e.implementationType);if(a.length<l){var c=r.ARGUMENTS_LENGTH_MISMATCH(d.getFunctionName(e.implementationType));throw new Error(c)}}a.forEach((function(e){v(t,!1,e.serviceIdentifier,i,n,e)}))}}))}function y(t,e){var n=[],i=m(t);return i.hasKey(e)?n=i.get(e):null!==t.parent&&(n=y(t.parent,e)),n}e.getBindingDictionary=m,e.plan=function(t,e,n,i,r,o,h,d){void 0===d&&(d=!1);var f=new u.Context(e),m=function(t,e,n,i,r,o){var s=t?a.MULTI_INJECT_TAG:a.INJECT_TAG,l=new c.Metadata(s,n),u=new p.Target(e,i,n,l);if(void 0!==r){var h=new c.Metadata(r,o);u.metadata.push(h)}return u}(n,i,r,"",o,h);try{return v(t,d,r,f,null,m),f}catch(t){throw s.isStackOverflowExeption(t)&&f.plan&&l.circularDependencyToException(f.plan.rootRequest),t}},e.createMockRequest=function(t,e,n,i){var r=new p.Target(o.TargetTypeEnum.Variable,"",e,new c.Metadata(n,i)),a=new u.Context(t);return new f.Request(e,a,null,[],r)}},88460:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QueryableString=void 0;var n=function(){function t(t){this.str=t}return t.prototype.startsWith=function(t){return 0===this.str.indexOf(t)},t.prototype.endsWith=function(t){var e,n=t.split("").reverse().join("");return e=this.str.split("").reverse().join(""),this.startsWith.call({str:e},n)},t.prototype.contains=function(t){return-1!==this.str.indexOf(t)},t.prototype.equals=function(t){return this.str===t},t.prototype.value=function(){return this.str},t}();e.QueryableString=n},6e3:function(t,e,n){"use strict";var i=this&&this.__spreadArray||function(t,e){for(var n=0,i=e.length,r=t.length;n<i;n++,r++)t[r]=e[n];return t};Object.defineProperty(e,"__esModule",{value:!0}),e.getFunctionName=e.getBaseClassDependencyCount=e.getDependencies=void 0;var r=n(5744),o=n(16674),a=n(28421),s=n(6867),l=n(55800);Object.defineProperty(e,"getFunctionName",{enumerable:!0,get:function(){return l.getFunctionName}});var u=n(18924);function c(t,e,n,r){var a=t.getConstructorMetadata(n),s=a.compilerGeneratedMetadata;if(void 0===s){var l=o.MISSING_INJECTABLE_ANNOTATION+" "+e+".";throw new Error(l)}var u=a.userGeneratedMetadata,c=Object.keys(u),f=0===n.length&&c.length>0,p=c.length>n.length,m=function(t,e,n,i,r){for(var o=[],a=0;a<r;a++){var s=h(a,t,e,n,i);null!==s&&o.push(s)}return o}(r,e,s,u,f||p?c.length:n.length),g=d(t,n);return i(i([],m),g)}function h(t,e,n,i,s){var l=s[t.toString()]||[],c=f(l),h=!0!==c.unmanaged,d=i[t],p=c.inject||c.multiInject;if((d=p||d)instanceof r.LazyServiceIdentifer&&(d=d.unwrap()),h){if(!e&&(d===Object||d===Function||void 0===d)){var m=o.MISSING_INJECT_ANNOTATION+" argument "+t+" in class "+n+".";throw new Error(m)}var g=new u.Target(a.TargetTypeEnum.ConstructorArgument,c.targetName,d);return g.metadata=l,g}return null}function d(t,e){for(var n=t.getPropertiesMetadata(e),r=[],o=0,s=Object.keys(n);o<s.length;o++){var l=s[o],c=n[l],h=f(n[l]),p=h.targetName||l,m=h.inject||h.multiInject,g=new u.Target(a.TargetTypeEnum.ClassProperty,p,m);g.metadata=c,r.push(g)}var v=Object.getPrototypeOf(e.prototype).constructor;if(v!==Object){var y=d(t,v);r=i(i([],r),y)}return r}function f(t){var e={};return t.forEach((function(t){e[t.key.toString()]=t.value})),{inject:e[s.INJECT_TAG],multiInject:e[s.MULTI_INJECT_TAG],targetName:e[s.NAME_TAG],unmanaged:e[s.UNMANAGED_TAG]}}e.getDependencies=function(t,e){return c(t,l.getFunctionName(e),e,!1)},e.getBaseClassDependencyCount=function t(e,n){var i=Object.getPrototypeOf(n.prototype).constructor;if(i!==Object){var r=c(e,l.getFunctionName(i),i,!0),o=r.map((function(t){return t.metadata.filter((function(t){return t.key===s.UNMANAGED_TAG}))})),a=[].concat.apply([],o).length,u=r.length-a;return u>0?u:t(e,i)}return 0}},6748:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Request=void 0;var i=n(37791),r=function(){function t(t,e,n,r,o){this.id=i.id(),this.serviceIdentifier=t,this.parentContext=e,this.parentRequest=n,this.target=o,this.childRequests=[],this.bindings=Array.isArray(r)?r:[r],this.requestScope=null===n?new Map:null}return t.prototype.addChildRequest=function(e,n,i){var r=new t(e,this.parentContext,this,n,i);return this.childRequests.push(r),r},t}();e.Request=r},18924:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Target=void 0;var i=n(6867),r=n(37791),o=n(47738),a=n(88460),s=function(){function t(t,e,n,s){this.id=r.id(),this.type=t,this.serviceIdentifier=n,this.name=new a.QueryableString(e||""),this.metadata=new Array;var l=null;"string"==typeof s?l=new o.Metadata(i.NAMED_TAG,s):s instanceof o.Metadata&&(l=s),null!==l&&this.metadata.push(l)}return t.prototype.hasTag=function(t){for(var e=0,n=this.metadata;e<n.length;e++){if(n[e].key===t)return!0}return!1},t.prototype.isArray=function(){return this.hasTag(i.MULTI_INJECT_TAG)},t.prototype.matchesArray=function(t){return this.matchesTag(i.MULTI_INJECT_TAG)(t)},t.prototype.isNamed=function(){return this.hasTag(i.NAMED_TAG)},t.prototype.isTagged=function(){return this.metadata.some((function(t){return i.NON_CUSTOM_TAG_KEYS.every((function(e){return t.key!==e}))}))},t.prototype.isOptional=function(){return this.matchesTag(i.OPTIONAL_TAG)(!0)},t.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter((function(t){return t.key===i.NAMED_TAG}))[0]:null},t.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter((function(t){return i.NON_CUSTOM_TAG_KEYS.every((function(e){return t.key!==e}))})):null},t.prototype.matchesNamedTag=function(t){return this.matchesTag(i.NAMED_TAG)(t)},t.prototype.matchesTag=function(t){var e=this;return function(n){for(var i=0,r=e.metadata;i<r.length;i++){var o=r[i];if(o.key===t&&o.value===n)return!0}return!1}},t}();e.Target=s},52279:function(t,e,n){"use strict";var i=this&&this.__spreadArray||function(t,e){for(var n=0,i=e.length,r=t.length;n<i;n++,r++)t[r]=e[n];return t};Object.defineProperty(e,"__esModule",{value:!0}),e.resolveInstance=void 0;var r=n(16674),o=n(28421),a=n(6867);e.resolveInstance=function(t,e,n){var s,l,u=null;if(e.length>0){var c=e.filter((function(t){return null!==t.target&&t.target.type===o.TargetTypeEnum.ConstructorArgument})).map(n);l=c,u=function(t,e,n){var i=e.filter((function(t){return null!==t.target&&t.target.type===o.TargetTypeEnum.ClassProperty})),r=i.map(n);return i.forEach((function(e,n){var i;i=e.target.name.value();var o=r[n];t[i]=o})),t}(u=new((s=t).bind.apply(s,i([void 0],l))),e,n)}else u=new t;return function(t,e){if(Reflect.hasMetadata(a.POST_CONSTRUCT,t)){var n=Reflect.getMetadata(a.POST_CONSTRUCT,t);try{e[n.value]()}catch(e){throw new Error(r.POST_CONSTRUCT_ERROR(t.name,e.message))}}}(t,u),u}},31927:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.resolve=void 0;var i=n(16674),r=n(28421),o=n(85265),a=n(55800),s=n(52279),l=function(t,e,n){try{return n()}catch(n){throw o.isStackOverflowExeption(n)?new Error(i.CIRCULAR_DEPENDENCY_IN_FACTORY(t,e.toString())):n}},u=function(t){return function(e){e.parentContext.setCurrentRequest(e);var n=e.bindings,o=e.childRequests,c=e.target&&e.target.isArray(),h=!(e.parentRequest&&e.parentRequest.target&&e.target&&e.parentRequest.target.matchesArray(e.target.serviceIdentifier));if(c&&h)return o.map((function(e){return u(t)(e)}));var d=null;if(!e.target.isOptional()||0!==n.length){var f=n[0],p=f.scope===r.BindingScopeEnum.Singleton,m=f.scope===r.BindingScopeEnum.Request;if(p&&f.activated)return f.cache;if(m&&null!==t&&t.has(f.id))return t.get(f.id);if(f.type===r.BindingTypeEnum.ConstantValue)d=f.cache,f.activated=!0;else if(f.type===r.BindingTypeEnum.Function)d=f.cache,f.activated=!0;else if(f.type===r.BindingTypeEnum.Constructor)d=f.implementationType;else if(f.type===r.BindingTypeEnum.DynamicValue&&null!==f.dynamicValue)d=l("toDynamicValue",f.serviceIdentifier,(function(){return f.dynamicValue(e.parentContext)}));else if(f.type===r.BindingTypeEnum.Factory&&null!==f.factory)d=l("toFactory",f.serviceIdentifier,(function(){return f.factory(e.parentContext)}));else if(f.type===r.BindingTypeEnum.Provider&&null!==f.provider)d=l("toProvider",f.serviceIdentifier,(function(){return f.provider(e.parentContext)}));else{if(f.type!==r.BindingTypeEnum.Instance||null===f.implementationType){var g=a.getServiceIdentifierAsString(e.serviceIdentifier);throw new Error(i.INVALID_BINDING_TYPE+" "+g)}d=s.resolveInstance(f.implementationType,o,u(t))}return"function"==typeof f.onActivation&&(d=f.onActivation(e.parentContext,d)),p&&(f.cache=d,f.activated=!0),m&&null!==t&&!t.has(f.id)&&t.set(f.id,d),d}}};e.resolve=function(t){return u(t.plan.rootRequest.requestScope)(t.plan.rootRequest)}},83366:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingInSyntax=void 0;var i=n(28421),r=n(71325),o=function(){function t(t){this._binding=t}return t.prototype.inRequestScope=function(){return this._binding.scope=i.BindingScopeEnum.Request,new r.BindingWhenOnSyntax(this._binding)},t.prototype.inSingletonScope=function(){return this._binding.scope=i.BindingScopeEnum.Singleton,new r.BindingWhenOnSyntax(this._binding)},t.prototype.inTransientScope=function(){return this._binding.scope=i.BindingScopeEnum.Transient,new r.BindingWhenOnSyntax(this._binding)},t}();e.BindingInSyntax=o},99812:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingInWhenOnSyntax=void 0;var i=n(83366),r=n(51811),o=n(98370),a=function(){function t(t){this._binding=t,this._bindingWhenSyntax=new o.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new r.BindingOnSyntax(this._binding),this._bindingInSyntax=new i.BindingInSyntax(t)}return t.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},t.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},t.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},t.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},t.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(t,e){return this._bindingWhenSyntax.whenTargetTagged(t,e)},t.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},t.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},t.prototype.whenParentTagged=function(t,e){return this._bindingWhenSyntax.whenParentTagged(t,e)},t.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},t.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},t.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,e)},t.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},t.prototype.whenNoAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenNoAncestorTagged(t,e)},t.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},t.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},t.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},t}();e.BindingInWhenOnSyntax=a},51811:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingOnSyntax=void 0;var i=n(98370),r=function(){function t(t){this._binding=t}return t.prototype.onActivation=function(t){return this._binding.onActivation=t,new i.BindingWhenSyntax(this._binding)},t}();e.BindingOnSyntax=r},51860:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingToSyntax=void 0;var i=n(16674),r=n(28421),o=n(99812),a=n(71325),s=function(){function t(t){this._binding=t}return t.prototype.to=function(t){return this._binding.type=r.BindingTypeEnum.Instance,this._binding.implementationType=t,new o.BindingInWhenOnSyntax(this._binding)},t.prototype.toSelf=function(){if("function"!=typeof this._binding.serviceIdentifier)throw new Error(""+i.INVALID_TO_SELF_VALUE);var t=this._binding.serviceIdentifier;return this.to(t)},t.prototype.toConstantValue=function(t){return this._binding.type=r.BindingTypeEnum.ConstantValue,this._binding.cache=t,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=r.BindingScopeEnum.Singleton,new a.BindingWhenOnSyntax(this._binding)},t.prototype.toDynamicValue=function(t){return this._binding.type=r.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=t,this._binding.implementationType=null,new o.BindingInWhenOnSyntax(this._binding)},t.prototype.toConstructor=function(t){return this._binding.type=r.BindingTypeEnum.Constructor,this._binding.implementationType=t,this._binding.scope=r.BindingScopeEnum.Singleton,new a.BindingWhenOnSyntax(this._binding)},t.prototype.toFactory=function(t){return this._binding.type=r.BindingTypeEnum.Factory,this._binding.factory=t,this._binding.scope=r.BindingScopeEnum.Singleton,new a.BindingWhenOnSyntax(this._binding)},t.prototype.toFunction=function(t){if("function"!=typeof t)throw new Error(i.INVALID_FUNCTION_BINDING);var e=this.toConstantValue(t);return this._binding.type=r.BindingTypeEnum.Function,this._binding.scope=r.BindingScopeEnum.Singleton,e},t.prototype.toAutoFactory=function(t){return this._binding.type=r.BindingTypeEnum.Factory,this._binding.factory=function(e){return function(){return e.container.get(t)}},this._binding.scope=r.BindingScopeEnum.Singleton,new a.BindingWhenOnSyntax(this._binding)},t.prototype.toProvider=function(t){return this._binding.type=r.BindingTypeEnum.Provider,this._binding.provider=t,this._binding.scope=r.BindingScopeEnum.Singleton,new a.BindingWhenOnSyntax(this._binding)},t.prototype.toService=function(t){this.toDynamicValue((function(e){return e.container.get(t)}))},t}();e.BindingToSyntax=s},71325:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingWhenOnSyntax=void 0;var i=n(51811),r=n(98370),o=function(){function t(t){this._binding=t,this._bindingWhenSyntax=new r.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new i.BindingOnSyntax(this._binding)}return t.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},t.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(t,e){return this._bindingWhenSyntax.whenTargetTagged(t,e)},t.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},t.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},t.prototype.whenParentTagged=function(t,e){return this._bindingWhenSyntax.whenParentTagged(t,e)},t.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},t.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},t.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,e)},t.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},t.prototype.whenNoAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenNoAncestorTagged(t,e)},t.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},t.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},t.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},t}();e.BindingWhenOnSyntax=o},98370:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingWhenSyntax=void 0;var i=n(51811),r=n(80758),o=function(){function t(t){this._binding=t}return t.prototype.when=function(t){return this._binding.constraint=t,new i.BindingOnSyntax(this._binding)},t.prototype.whenTargetNamed=function(t){return this._binding.constraint=r.namedConstraint(t),new i.BindingOnSyntax(this._binding)},t.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(t){return null!==t.target&&!t.target.isNamed()&&!t.target.isTagged()},new i.BindingOnSyntax(this._binding)},t.prototype.whenTargetTagged=function(t,e){return this._binding.constraint=r.taggedConstraint(t)(e),new i.BindingOnSyntax(this._binding)},t.prototype.whenInjectedInto=function(t){return this._binding.constraint=function(e){return r.typeConstraint(t)(e.parentRequest)},new i.BindingOnSyntax(this._binding)},t.prototype.whenParentNamed=function(t){return this._binding.constraint=function(e){return r.namedConstraint(t)(e.parentRequest)},new i.BindingOnSyntax(this._binding)},t.prototype.whenParentTagged=function(t,e){return this._binding.constraint=function(n){return r.taggedConstraint(t)(e)(n.parentRequest)},new i.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorIs=function(t){return this._binding.constraint=function(e){return r.traverseAncerstors(e,r.typeConstraint(t))},new i.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorIs=function(t){return this._binding.constraint=function(e){return!r.traverseAncerstors(e,r.typeConstraint(t))},new i.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorNamed=function(t){return this._binding.constraint=function(e){return r.traverseAncerstors(e,r.namedConstraint(t))},new i.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorNamed=function(t){return this._binding.constraint=function(e){return!r.traverseAncerstors(e,r.namedConstraint(t))},new i.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._binding.constraint=function(n){return r.traverseAncerstors(n,r.taggedConstraint(t)(e))},new i.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorTagged=function(t,e){return this._binding.constraint=function(n){return!r.traverseAncerstors(n,r.taggedConstraint(t)(e))},new i.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorMatches=function(t){return this._binding.constraint=function(e){return r.traverseAncerstors(e,t)},new i.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorMatches=function(t){return this._binding.constraint=function(e){return!r.traverseAncerstors(e,t)},new i.BindingOnSyntax(this._binding)},t}();e.BindingWhenSyntax=o},80758:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.typeConstraint=e.namedConstraint=e.taggedConstraint=e.traverseAncerstors=void 0;var i=n(6867),r=n(47738),o=function(t,e){var n=t.parentRequest;return null!==n&&(!!e(n)||o(n,e))};e.traverseAncerstors=o;var a=function(t){return function(e){var n=function(n){return null!==n&&null!==n.target&&n.target.matchesTag(t)(e)};return n.metaData=new r.Metadata(t,e),n}};e.taggedConstraint=a;var s=a(i.NAMED_TAG);e.namedConstraint=s;e.typeConstraint=function(t){return function(e){var n=null;if(null!==e){if(n=e.bindings[0],"string"==typeof t)return n.serviceIdentifier===t;var i=e.bindings[0].implementationType;return t===i}return!1}}},70600:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.multiBindToService=void 0;e.multiBindToService=function(t){return function(e){return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return n.forEach((function(n){return t.bind(n).toService(e)}))}}}},85265:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isStackOverflowExeption=void 0;var i=n(16674);e.isStackOverflowExeption=function(t){return t instanceof RangeError||t.message===i.STACK_OVERFLOW}},37791:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.id=void 0;var n=0;e.id=function(){return n++}},55800:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.circularDependencyToException=e.listMetadataForTarget=e.listRegisteredBindingsForServiceIdentifier=e.getServiceIdentifierAsString=e.getFunctionName=void 0;var i=n(16674);function r(t){return"function"==typeof t?t.name:"symbol"==typeof t?t.toString():t}function o(t,e){return null!==t.parentRequest&&(t.parentRequest.serviceIdentifier===e||o(t.parentRequest,e))}function a(t){if(t.name)return t.name;var e=t.toString(),n=e.match(/^function\s*([^\s(]+)/);return n?n[1]:"Anonymous function: "+e}e.getServiceIdentifierAsString=r,e.listRegisteredBindingsForServiceIdentifier=function(t,e,n){var i="",r=n(t,e);return 0!==r.length&&(i="\nRegistered bindings:",r.forEach((function(t){var e="Object";null!==t.implementationType&&(e=a(t.implementationType)),i=i+"\n "+e,t.constraint.metaData&&(i=i+" - "+t.constraint.metaData)}))),i},e.circularDependencyToException=function t(e){e.childRequests.forEach((function(e){if(o(e,e.serviceIdentifier)){var n=function(t){return function t(e,n){void 0===n&&(n=[]);var i=r(e.serviceIdentifier);return n.push(i),null!==e.parentRequest?t(e.parentRequest,n):n}(t).reverse().join(" --\x3e ")}(e);throw new Error(i.CIRCULAR_DEPENDENCY+" "+n)}t(e)}))},e.listMetadataForTarget=function(t,e){if(e.isTagged()||e.isNamed()){var n="",i=e.getNamedTag(),r=e.getCustomTags();return null!==i&&(n+=i.toString()+"\n"),null!==r&&r.forEach((function(t){n+=t.toString()+"\n"}))," "+t+"\n "+t+" - "+n}return" "+t},e.getFunctionName=a},18552:(t,e,n)=>{var i=n(10852)(n(55639),"DataView");t.exports=i},1989:(t,e,n)=>{var i=n(51789),r=n(80401),o=n(57667),a=n(21327),s=n(81866);function l(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}l.prototype.clear=i,l.prototype.delete=r,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,t.exports=l},38407:(t,e,n)=>{var i=n(27040),r=n(14125),o=n(82117),a=n(67518),s=n(54705);function l(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}l.prototype.clear=i,l.prototype.delete=r,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,t.exports=l},57071:(t,e,n)=>{var i=n(10852)(n(55639),"Map");t.exports=i},83369:(t,e,n)=>{var i=n(24785),r=n(11285),o=n(96e3),a=n(49916),s=n(95265);function l(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}l.prototype.clear=i,l.prototype.delete=r,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,t.exports=l},53818:(t,e,n)=>{var i=n(10852)(n(55639),"Promise");t.exports=i},58525:(t,e,n)=>{var i=n(10852)(n(55639),"Set");t.exports=i},88668:(t,e,n)=>{var i=n(83369),r=n(90619),o=n(72385);function a(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new i;++e<n;)this.add(t[e])}a.prototype.add=a.prototype.push=r,a.prototype.has=o,t.exports=a},46384:(t,e,n)=>{var i=n(38407),r=n(37465),o=n(63779),a=n(67599),s=n(44758),l=n(34309);function u(t){var e=this.__data__=new i(t);this.size=e.size}u.prototype.clear=r,u.prototype.delete=o,u.prototype.get=a,u.prototype.has=s,u.prototype.set=l,t.exports=u},62705:(t,e,n)=>{var i=n(55639).Symbol;t.exports=i},11149:(t,e,n)=>{var i=n(55639).Uint8Array;t.exports=i},70577:(t,e,n)=>{var i=n(10852)(n(55639),"WeakMap");t.exports=i},96874:t=>{t.exports=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}},77412:t=>{t.exports=function(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&!1!==e(t[n],n,t););return t}},34963:t=>{t.exports=function(t,e){for(var n=-1,i=null==t?0:t.length,r=0,o=[];++n<i;){var a=t[n];e(a,n,t)&&(o[r++]=a)}return o}},47443:(t,e,n)=>{var i=n(42118);t.exports=function(t,e){return!!(null==t?0:t.length)&&i(t,e,0)>-1}},1196:t=>{t.exports=function(t,e,n){for(var i=-1,r=null==t?0:t.length;++i<r;)if(n(e,t[i]))return!0;return!1}},14636:(t,e,n)=>{var i=n(22545),r=n(35694),o=n(1469),a=n(44144),s=n(65776),l=n(36719),u=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=o(t),c=!n&&r(t),h=!n&&!c&&a(t),d=!n&&!c&&!h&&l(t),f=n||c||h||d,p=f?i(t.length,String):[],m=p.length;for(var g in t)!e&&!u.call(t,g)||f&&("length"==g||h&&("offset"==g||"parent"==g)||d&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||s(g,m))||p.push(g);return p}},29932:t=>{t.exports=function(t,e){for(var n=-1,i=null==t?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}},62488:t=>{t.exports=function(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}},62663:t=>{t.exports=function(t,e,n,i){var r=-1,o=null==t?0:t.length;for(i&&o&&(n=t[++r]);++r<o;)n=e(n,t[r],r,t);return n}},82908:t=>{t.exports=function(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}},48983:(t,e,n)=>{var i=n(40371)("length");t.exports=i},86556:(t,e,n)=>{var i=n(89465),r=n(77813);t.exports=function(t,e,n){(void 0!==n&&!r(t[e],n)||void 0===n&&!(e in t))&&i(t,e,n)}},34865:(t,e,n)=>{var i=n(89465),r=n(77813),o=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var a=t[e];o.call(t,e)&&r(a,n)&&(void 0!==n||e in t)||i(t,e,n)}},18470:(t,e,n)=>{var i=n(77813);t.exports=function(t,e){for(var n=t.length;n--;)if(i(t[n][0],e))return n;return-1}},44037:(t,e,n)=>{var i=n(98363),r=n(3674);t.exports=function(t,e){return t&&i(e,r(e),t)}},63886:(t,e,n)=>{var i=n(98363),r=n(81704);t.exports=function(t,e){return t&&i(e,r(e),t)}},89465:(t,e,n)=>{var i=n(38777);t.exports=function(t,e,n){"__proto__"==e&&i?i(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},85990:(t,e,n)=>{var i=n(46384),r=n(77412),o=n(34865),a=n(44037),s=n(63886),l=n(64626),u=n(278),c=n(18805),h=n(1911),d=n(58234),f=n(46904),p=n(64160),m=n(43824),g=n(29148),v=n(38517),y=n(1469),b=n(44144),_=n(56688),w=n(13218),x=n(72928),M=n(3674),E=n(81704),S="[object Arguments]",k="[object Function]",C="[object Object]",T={};T[S]=T["[object Array]"]=T["[object ArrayBuffer]"]=T["[object DataView]"]=T["[object Boolean]"]=T["[object Date]"]=T["[object Float32Array]"]=T["[object Float64Array]"]=T["[object Int8Array]"]=T["[object Int16Array]"]=T["[object Int32Array]"]=T["[object Map]"]=T["[object Number]"]=T[C]=T["[object RegExp]"]=T["[object Set]"]=T["[object String]"]=T["[object Symbol]"]=T["[object Uint8Array]"]=T["[object Uint8ClampedArray]"]=T["[object Uint16Array]"]=T["[object Uint32Array]"]=!0,T["[object Error]"]=T[k]=T["[object WeakMap]"]=!1,t.exports=function t(e,n,D,L,A,O){var P,I=1&n,N=2&n,R=4&n;if(D&&(P=A?D(e,L,A,O):D(e)),void 0!==P)return P;if(!w(e))return e;var Y=y(e);if(Y){if(P=m(e),!I)return u(e,P)}else{var j=p(e),F=j==k||"[object GeneratorFunction]"==j;if(b(e))return l(e,I);if(j==C||j==S||F&&!A){if(P=N||F?{}:v(e),!I)return N?h(e,s(P,e)):c(e,a(P,e))}else{if(!T[j])return A?e:{};P=g(e,j,I)}}O||(O=new i);var B=O.get(e);if(B)return B;O.set(e,P),x(e)?e.forEach((function(i){P.add(t(i,n,D,i,e,O))})):_(e)&&e.forEach((function(i,r){P.set(r,t(i,n,D,r,e,O))}));var z=Y?void 0:(R?N?f:d:N?E:M)(e);return r(z||e,(function(i,r){z&&(i=e[r=i]),o(P,r,t(i,n,D,r,e,O))})),P}},3118:(t,e,n)=>{var i=n(13218),r=Object.create,o=function(){function t(){}return function(e){if(!i(e))return{};if(r)return r(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();t.exports=o},89881:(t,e,n)=>{var i=n(47816),r=n(99291)(i);t.exports=r},56029:(t,e,n)=>{var i=n(33448);t.exports=function(t,e,n){for(var r=-1,o=t.length;++r<o;){var a=t[r],s=e(a);if(null!=s&&(void 0===l?s==s&&!i(s):n(s,l)))var l=s,u=a}return u}},80760:(t,e,n)=>{var i=n(89881);t.exports=function(t,e){var n=[];return i(t,(function(t,i,r){e(t,i,r)&&n.push(t)})),n}},41848:t=>{t.exports=function(t,e,n,i){for(var r=t.length,o=n+(i?1:-1);i?o--:++o<r;)if(e(t[o],o,t))return o;return-1}},21078:(t,e,n)=>{var i=n(62488),r=n(37285);t.exports=function t(e,n,o,a,s){var l=-1,u=e.length;for(o||(o=r),s||(s=[]);++l<u;){var c=e[l];n>0&&o(c)?n>1?t(c,n-1,o,a,s):i(s,c):a||(s[s.length]=c)}return s}},28483:(t,e,n)=>{var i=n(25063)();t.exports=i},47816:(t,e,n)=>{var i=n(28483),r=n(3674);t.exports=function(t,e){return t&&i(t,e,r)}},97786:(t,e,n)=>{var i=n(71811),r=n(40327);t.exports=function(t,e){for(var n=0,o=(e=i(e,t)).length;null!=t&&n<o;)t=t[r(e[n++])];return n&&n==o?t:void 0}},68866:(t,e,n)=>{var i=n(62488),r=n(1469);t.exports=function(t,e,n){var o=e(t);return r(t)?o:i(o,n(t))}},44239:(t,e,n)=>{var i=n(62705),r=n(89607),o=n(2333),a=i?i.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":a&&a in Object(t)?r(t):o(t)}},53325:t=>{t.exports=function(t,e){return t>e}},78565:t=>{var e=Object.prototype.hasOwnProperty;t.exports=function(t,n){return null!=t&&e.call(t,n)}},13:t=>{t.exports=function(t,e){return null!=t&&e in Object(t)}},42118:(t,e,n)=>{var i=n(41848),r=n(62722),o=n(42351);t.exports=function(t,e,n){return e==e?o(t,e,n):i(t,r,n)}},9454:(t,e,n)=>{var i=n(44239),r=n(37005);t.exports=function(t){return r(t)&&"[object Arguments]"==i(t)}},90939:(t,e,n)=>{var i=n(2492),r=n(37005);t.exports=function t(e,n,o,a,s){return e===n||(null==e||null==n||!r(e)&&!r(n)?e!=e&&n!=n:i(e,n,o,a,t,s))}},2492:(t,e,n)=>{var i=n(46384),r=n(67114),o=n(18351),a=n(16096),s=n(64160),l=n(1469),u=n(44144),c=n(36719),h="[object Arguments]",d="[object Array]",f="[object Object]",p=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,m,g,v){var y=l(t),b=l(e),_=y?d:s(t),w=b?d:s(e),x=(_=_==h?f:_)==f,M=(w=w==h?f:w)==f,E=_==w;if(E&&u(t)){if(!u(e))return!1;y=!0,x=!1}if(E&&!x)return v||(v=new i),y||c(t)?r(t,e,n,m,g,v):o(t,e,_,n,m,g,v);if(!(1&n)){var S=x&&p.call(t,"__wrapped__"),k=M&&p.call(e,"__wrapped__");if(S||k){var C=S?t.value():t,T=k?e.value():e;return v||(v=new i),g(C,T,n,m,v)}}return!!E&&(v||(v=new i),a(t,e,n,m,g,v))}},25588:(t,e,n)=>{var i=n(64160),r=n(37005);t.exports=function(t){return r(t)&&"[object Map]"==i(t)}},2958:(t,e,n)=>{var i=n(46384),r=n(90939);t.exports=function(t,e,n,o){var a=n.length,s=a,l=!o;if(null==t)return!s;for(t=Object(t);a--;){var u=n[a];if(l&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++a<s;){var c=(u=n[a])[0],h=t[c],d=u[1];if(l&&u[2]){if(void 0===h&&!(c in t))return!1}else{var f=new i;if(o)var p=o(h,d,c,t,e,f);if(!(void 0===p?r(d,h,3,o,f):p))return!1}}return!0}},62722:t=>{t.exports=function(t){return t!=t}},28458:(t,e,n)=>{var i=n(23560),r=n(15346),o=n(13218),a=n(80346),s=/^\[object .+?Constructor\]$/,l=Function.prototype,u=Object.prototype,c=l.toString,h=u.hasOwnProperty,d=RegExp("^"+c.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!o(t)||r(t))&&(i(t)?d:s).test(a(t))}},29221:(t,e,n)=>{var i=n(64160),r=n(37005);t.exports=function(t){return r(t)&&"[object Set]"==i(t)}},38749:(t,e,n)=>{var i=n(44239),r=n(41780),o=n(37005),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,t.exports=function(t){return o(t)&&r(t.length)&&!!a[i(t)]}},67206:(t,e,n)=>{var i=n(91573),r=n(16432),o=n(6557),a=n(1469),s=n(39601);t.exports=function(t){return"function"==typeof t?t:null==t?o:"object"==typeof t?a(t)?r(t[0],t[1]):i(t):s(t)}},280:(t,e,n)=>{var i=n(25726),r=n(86916),o=Object.prototype.hasOwnProperty;t.exports=function(t){if(!i(t))return r(t);var e=[];for(var n in Object(t))o.call(t,n)&&"constructor"!=n&&e.push(n);return e}},10313:(t,e,n)=>{var i=n(13218),r=n(25726),o=n(33498),a=Object.prototype.hasOwnProperty;t.exports=function(t){if(!i(t))return o(t);var e=r(t),n=[];for(var s in t)("constructor"!=s||!e&&a.call(t,s))&&n.push(s);return n}},70433:t=>{t.exports=function(t,e){return t<e}},69199:(t,e,n)=>{var i=n(89881),r=n(98612);t.exports=function(t,e){var n=-1,o=r(t)?Array(t.length):[];return i(t,(function(t,i,r){o[++n]=e(t,i,r)})),o}},91573:(t,e,n)=>{var i=n(2958),r=n(1499),o=n(42634);t.exports=function(t){var e=r(t);return 1==e.length&&e[0][2]?o(e[0][0],e[0][1]):function(n){return n===t||i(n,t,e)}}},16432:(t,e,n)=>{var i=n(90939),r=n(27361),o=n(79095),a=n(15403),s=n(89162),l=n(42634),u=n(40327);t.exports=function(t,e){return a(t)&&s(e)?l(u(t),e):function(n){var a=r(n,t);return void 0===a&&a===e?o(n,t):i(e,a,3)}}},42980:(t,e,n)=>{var i=n(46384),r=n(86556),o=n(28483),a=n(59783),s=n(13218),l=n(81704),u=n(36390);t.exports=function t(e,n,c,h,d){e!==n&&o(n,(function(o,l){if(d||(d=new i),s(o))a(e,n,l,c,t,h,d);else{var f=h?h(u(e,l),o,l+"",e,n,d):void 0;void 0===f&&(f=o),r(e,l,f)}}),l)}},59783:(t,e,n)=>{var i=n(86556),r=n(64626),o=n(77133),a=n(278),s=n(38517),l=n(35694),u=n(1469),c=n(29246),h=n(44144),d=n(23560),f=n(13218),p=n(68630),m=n(36719),g=n(36390),v=n(59881);t.exports=function(t,e,n,y,b,_,w){var x=g(t,n),M=g(e,n),E=w.get(M);if(E)i(t,n,E);else{var S=_?_(x,M,n+"",t,e,w):void 0,k=void 0===S;if(k){var C=u(M),T=!C&&h(M),D=!C&&!T&&m(M);S=M,C||T||D?u(x)?S=x:c(x)?S=a(x):T?(k=!1,S=r(M,!0)):D?(k=!1,S=o(M,!0)):S=[]:p(M)||l(M)?(S=x,l(x)?S=v(x):f(x)&&!d(x)||(S=s(M))):k=!1}k&&(w.set(M,S),b(S,M,y,_,w),w.delete(M)),i(t,n,S)}}},82689:(t,e,n)=>{var i=n(29932),r=n(97786),o=n(67206),a=n(69199),s=n(71131),l=n(7518),u=n(85022),c=n(6557),h=n(1469);t.exports=function(t,e,n){e=e.length?i(e,(function(t){return h(t)?function(e){return r(e,1===t.length?t[0]:t)}:t})):[c];var d=-1;e=i(e,l(o));var f=a(t,(function(t,n,r){return{criteria:i(e,(function(e){return e(t)})),index:++d,value:t}}));return s(f,(function(t,e){return u(t,e,n)}))}},25970:(t,e,n)=>{var i=n(63012),r=n(79095);t.exports=function(t,e){return i(t,e,(function(e,n){return r(t,n)}))}},63012:(t,e,n)=>{var i=n(97786),r=n(10611),o=n(71811);t.exports=function(t,e,n){for(var a=-1,s=e.length,l={};++a<s;){var u=e[a],c=i(t,u);n(c,u)&&r(l,o(u,t),c)}return l}},40371:t=>{t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},79152:(t,e,n)=>{var i=n(97786);t.exports=function(t){return function(e){return i(e,t)}}},40098:t=>{var e=Math.ceil,n=Math.max;t.exports=function(t,i,r,o){for(var a=-1,s=n(e((i-t)/(r||1)),0),l=Array(s);s--;)l[o?s:++a]=t,t+=r;return l}},10107:t=>{t.exports=function(t,e,n,i,r){return r(t,(function(t,r,o){n=i?(i=!1,t):e(n,t,r,o)})),n}},5976:(t,e,n)=>{var i=n(6557),r=n(45357),o=n(30061);t.exports=function(t,e){return o(r(t,e,i),t+"")}},10611:(t,e,n)=>{var i=n(34865),r=n(71811),o=n(65776),a=n(13218),s=n(40327);t.exports=function(t,e,n,l){if(!a(t))return t;for(var u=-1,c=(e=r(e,t)).length,h=c-1,d=t;null!=d&&++u<c;){var f=s(e[u]),p=n;if("__proto__"===f||"constructor"===f||"prototype"===f)return t;if(u!=h){var m=d[f];void 0===(p=l?l(m,f,d):void 0)&&(p=a(m)?m:o(e[u+1])?[]:{})}i(d,f,p),d=d[f]}return t}},56560:(t,e,n)=>{var i=n(75703),r=n(38777),o=n(6557),a=r?function(t,e){return r(t,"toString",{configurable:!0,enumerable:!1,value:i(e),writable:!0})}:o;t.exports=a},71131:t=>{t.exports=function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}},22545:t=>{t.exports=function(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}},80531:(t,e,n)=>{var i=n(62705),r=n(29932),o=n(1469),a=n(33448),s=i?i.prototype:void 0,l=s?s.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(o(e))return r(e,t)+"";if(a(e))return l?l.call(e):"";var n=e+"";return"0"==n&&1/e==-Infinity?"-0":n}},27561:(t,e,n)=>{var i=n(67990),r=/^\s+/;t.exports=function(t){return t?t.slice(0,i(t)+1).replace(r,""):t}},7518:t=>{t.exports=function(t){return function(e){return t(e)}}},45652:(t,e,n)=>{var i=n(88668),r=n(47443),o=n(1196),a=n(74757),s=n(23593),l=n(21814);t.exports=function(t,e,n){var u=-1,c=r,h=t.length,d=!0,f=[],p=f;if(n)d=!1,c=o;else if(h>=200){var m=e?null:s(t);if(m)return l(m);d=!1,c=a,p=new i}else p=e?[]:f;t:for(;++u<h;){var g=t[u],v=e?e(g):g;if(g=n||0!==g?g:0,d&&v==v){for(var y=p.length;y--;)if(p[y]===v)continue t;e&&p.push(v),f.push(g)}else c(p,v,n)||(p!==f&&p.push(v),f.push(g))}return f}},47415:(t,e,n)=>{var i=n(29932);t.exports=function(t,e){return i(e,(function(e){return t[e]}))}},1757:t=>{t.exports=function(t,e,n){for(var i=-1,r=t.length,o=e.length,a={};++i<r;){var s=i<o?e[i]:void 0;n(a,t[i],s)}return a}},74757:t=>{t.exports=function(t,e){return t.has(e)}},54290:(t,e,n)=>{var i=n(6557);t.exports=function(t){return"function"==typeof t?t:i}},71811:(t,e,n)=>{var i=n(1469),r=n(15403),o=n(55514),a=n(79833);t.exports=function(t,e){return i(t)?t:r(t,e)?[t]:o(a(t))}},74318:(t,e,n)=>{var i=n(11149);t.exports=function(t){var e=new t.constructor(t.byteLength);return new i(e).set(new i(t)),e}},64626:(t,e,n)=>{t=n.nmd(t);var i=n(55639),r=e&&!e.nodeType&&e,o=r&&t&&!t.nodeType&&t,a=o&&o.exports===r?i.Buffer:void 0,s=a?a.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var n=t.length,i=s?s(n):new t.constructor(n);return t.copy(i),i}},57157:(t,e,n)=>{var i=n(74318);t.exports=function(t,e){var n=e?i(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}},93147:t=>{var e=/\w*$/;t.exports=function(t){var n=new t.constructor(t.source,e.exec(t));return n.lastIndex=t.lastIndex,n}},40419:(t,e,n)=>{var i=n(62705),r=i?i.prototype:void 0,o=r?r.valueOf:void 0;t.exports=function(t){return o?Object(o.call(t)):{}}},77133:(t,e,n)=>{var i=n(74318);t.exports=function(t,e){var n=e?i(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}},26393:(t,e,n)=>{var i=n(33448);t.exports=function(t,e){if(t!==e){var n=void 0!==t,r=null===t,o=t==t,a=i(t),s=void 0!==e,l=null===e,u=e==e,c=i(e);if(!l&&!c&&!a&&t>e||a&&s&&u&&!l&&!c||r&&s&&u||!n&&u||!o)return 1;if(!r&&!a&&!c&&t<e||c&&n&&o&&!r&&!a||l&&n&&o||!s&&o||!u)return-1}return 0}},85022:(t,e,n)=>{var i=n(26393);t.exports=function(t,e,n){for(var r=-1,o=t.criteria,a=e.criteria,s=o.length,l=n.length;++r<s;){var u=i(o[r],a[r]);if(u)return r>=l?u:u*("desc"==n[r]?-1:1)}return t.index-e.index}},278:t=>{t.exports=function(t,e){var n=-1,i=t.length;for(e||(e=Array(i));++n<i;)e[n]=t[n];return e}},98363:(t,e,n)=>{var i=n(34865),r=n(89465);t.exports=function(t,e,n,o){var a=!n;n||(n={});for(var s=-1,l=e.length;++s<l;){var u=e[s],c=o?o(n[u],t[u],u,n,t):void 0;void 0===c&&(c=t[u]),a?r(n,u,c):i(n,u,c)}return n}},18805:(t,e,n)=>{var i=n(98363),r=n(99551);t.exports=function(t,e){return i(t,r(t),e)}},1911:(t,e,n)=>{var i=n(98363),r=n(51442);t.exports=function(t,e){return i(t,r(t),e)}},14429:(t,e,n)=>{var i=n(55639)["__core-js_shared__"];t.exports=i},21463:(t,e,n)=>{var i=n(5976),r=n(16612);t.exports=function(t){return i((function(e,n){var i=-1,o=n.length,a=o>1?n[o-1]:void 0,s=o>2?n[2]:void 0;for(a=t.length>3&&"function"==typeof a?(o--,a):void 0,s&&r(n[0],n[1],s)&&(a=o<3?void 0:a,o=1),e=Object(e);++i<o;){var l=n[i];l&&t(e,l,i,a)}return e}))}},99291:(t,e,n)=>{var i=n(98612);t.exports=function(t,e){return function(n,r){if(null==n)return n;if(!i(n))return t(n,r);for(var o=n.length,a=e?o:-1,s=Object(n);(e?a--:++a<o)&&!1!==r(s[a],a,s););return n}}},25063:t=>{t.exports=function(t){return function(e,n,i){for(var r=-1,o=Object(e),a=i(e),s=a.length;s--;){var l=a[t?s:++r];if(!1===n(o[l],l,o))break}return e}}},67740:(t,e,n)=>{var i=n(67206),r=n(98612),o=n(3674);t.exports=function(t){return function(e,n,a){var s=Object(e);if(!r(e)){var l=i(n,3);e=o(e),n=function(t){return l(s[t],t,s)}}var u=t(e,n,a);return u>-1?s[l?e[u]:u]:void 0}}},47445:(t,e,n)=>{var i=n(40098),r=n(16612),o=n(18601);t.exports=function(t){return function(e,n,a){return a&&"number"!=typeof a&&r(e,n,a)&&(n=a=void 0),e=o(e),void 0===n?(n=e,e=0):n=o(n),a=void 0===a?e<n?1:-1:o(a),i(e,n,a,t)}}},23593:(t,e,n)=>{var i=n(58525),r=n(50308),o=n(21814),a=i&&1/o(new i([,-0]))[1]==1/0?function(t){return new i(t)}:r;t.exports=a},38777:(t,e,n)=>{var i=n(10852),r=function(){try{var t=i(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=r},67114:(t,e,n)=>{var i=n(88668),r=n(82908),o=n(74757);t.exports=function(t,e,n,a,s,l){var u=1&n,c=t.length,h=e.length;if(c!=h&&!(u&&h>c))return!1;var d=l.get(t),f=l.get(e);if(d&&f)return d==e&&f==t;var p=-1,m=!0,g=2&n?new i:void 0;for(l.set(t,e),l.set(e,t);++p<c;){var v=t[p],y=e[p];if(a)var b=u?a(y,v,p,e,t,l):a(v,y,p,t,e,l);if(void 0!==b){if(b)continue;m=!1;break}if(g){if(!r(e,(function(t,e){if(!o(g,e)&&(v===t||s(v,t,n,a,l)))return g.push(e)}))){m=!1;break}}else if(v!==y&&!s(v,y,n,a,l)){m=!1;break}}return l.delete(t),l.delete(e),m}},18351:(t,e,n)=>{var i=n(62705),r=n(11149),o=n(77813),a=n(67114),s=n(68776),l=n(21814),u=i?i.prototype:void 0,c=u?u.valueOf:void 0;t.exports=function(t,e,n,i,u,h,d){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!h(new r(t),new r(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var f=s;case"[object Set]":var p=1&i;if(f||(f=l),t.size!=e.size&&!p)return!1;var m=d.get(t);if(m)return m==e;i|=2,d.set(t,e);var g=a(f(t),f(e),i,u,h,d);return d.delete(t),g;case"[object Symbol]":if(c)return c.call(t)==c.call(e)}return!1}},16096:(t,e,n)=>{var i=n(58234),r=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,o,a,s){var l=1&n,u=i(t),c=u.length;if(c!=i(e).length&&!l)return!1;for(var h=c;h--;){var d=u[h];if(!(l?d in e:r.call(e,d)))return!1}var f=s.get(t),p=s.get(e);if(f&&p)return f==e&&p==t;var m=!0;s.set(t,e),s.set(e,t);for(var g=l;++h<c;){var v=t[d=u[h]],y=e[d];if(o)var b=l?o(y,v,d,e,t,s):o(v,y,d,t,e,s);if(!(void 0===b?v===y||a(v,y,n,o,s):b)){m=!1;break}g||(g="constructor"==d)}if(m&&!g){var _=t.constructor,w=e.constructor;_==w||!("constructor"in t)||!("constructor"in e)||"function"==typeof _&&_ instanceof _&&"function"==typeof w&&w instanceof w||(m=!1)}return s.delete(t),s.delete(e),m}},99021:(t,e,n)=>{var i=n(85564),r=n(45357),o=n(30061);t.exports=function(t){return o(r(t,void 0,i),t+"")}},31957:(t,e,n)=>{var i="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;t.exports=i},58234:(t,e,n)=>{var i=n(68866),r=n(99551),o=n(3674);t.exports=function(t){return i(t,o,r)}},46904:(t,e,n)=>{var i=n(68866),r=n(51442),o=n(81704);t.exports=function(t){return i(t,o,r)}},45050:(t,e,n)=>{var i=n(37019);t.exports=function(t,e){var n=t.__data__;return i(e)?n["string"==typeof e?"string":"hash"]:n.map}},1499:(t,e,n)=>{var i=n(89162),r=n(3674);t.exports=function(t){for(var e=r(t),n=e.length;n--;){var o=e[n],a=t[o];e[n]=[o,a,i(a)]}return e}},10852:(t,e,n)=>{var i=n(28458),r=n(47801);t.exports=function(t,e){var n=r(t,e);return i(n)?n:void 0}},85924:(t,e,n)=>{var i=n(5569)(Object.getPrototypeOf,Object);t.exports=i},89607:(t,e,n)=>{var i=n(62705),r=Object.prototype,o=r.hasOwnProperty,a=r.toString,s=i?i.toStringTag:void 0;t.exports=function(t){var e=o.call(t,s),n=t[s];try{t[s]=void 0;var i=!0}catch(t){}var r=a.call(t);return i&&(e?t[s]=n:delete t[s]),r}},99551:(t,e,n)=>{var i=n(34963),r=n(70479),o=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(t){return null==t?[]:(t=Object(t),i(a(t),(function(e){return o.call(t,e)})))}:r;t.exports=s},51442:(t,e,n)=>{var i=n(62488),r=n(85924),o=n(99551),a=n(70479),s=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)i(e,o(t)),t=r(t);return e}:a;t.exports=s},64160:(t,e,n)=>{var i=n(18552),r=n(57071),o=n(53818),a=n(58525),s=n(70577),l=n(44239),u=n(80346),c="[object Map]",h="[object Promise]",d="[object Set]",f="[object WeakMap]",p="[object DataView]",m=u(i),g=u(r),v=u(o),y=u(a),b=u(s),_=l;(i&&_(new i(new ArrayBuffer(1)))!=p||r&&_(new r)!=c||o&&_(o.resolve())!=h||a&&_(new a)!=d||s&&_(new s)!=f)&&(_=function(t){var e=l(t),n="[object Object]"==e?t.constructor:void 0,i=n?u(n):"";if(i)switch(i){case m:return p;case g:return c;case v:return h;case y:return d;case b:return f}return e}),t.exports=_},47801:t=>{t.exports=function(t,e){return null==t?void 0:t[e]}},222:(t,e,n)=>{var i=n(71811),r=n(35694),o=n(1469),a=n(65776),s=n(41780),l=n(40327);t.exports=function(t,e,n){for(var u=-1,c=(e=i(e,t)).length,h=!1;++u<c;){var d=l(e[u]);if(!(h=null!=t&&n(t,d)))break;t=t[d]}return h||++u!=c?h:!!(c=null==t?0:t.length)&&s(c)&&a(d,c)&&(o(t)||r(t))}},62689:t=>{var e=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");t.exports=function(t){return e.test(t)}},51789:(t,e,n)=>{var i=n(94536);t.exports=function(){this.__data__=i?i(null):{},this.size=0}},80401:t=>{t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},57667:(t,e,n)=>{var i=n(94536),r=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(i){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return r.call(e,t)?e[t]:void 0}},21327:(t,e,n)=>{var i=n(94536),r=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return i?void 0!==e[t]:r.call(e,t)}},81866:(t,e,n)=>{var i=n(94536);t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=i&&void 0===e?"__lodash_hash_undefined__":e,this}},43824:t=>{var e=Object.prototype.hasOwnProperty;t.exports=function(t){var n=t.length,i=new t.constructor(n);return n&&"string"==typeof t[0]&&e.call(t,"index")&&(i.index=t.index,i.input=t.input),i}},29148:(t,e,n)=>{var i=n(74318),r=n(57157),o=n(93147),a=n(40419),s=n(77133);t.exports=function(t,e,n){var l=t.constructor;switch(e){case"[object ArrayBuffer]":return i(t);case"[object Boolean]":case"[object Date]":return new l(+t);case"[object DataView]":return r(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return s(t,n);case"[object Map]":case"[object Set]":return new l;case"[object Number]":case"[object String]":return new l(t);case"[object RegExp]":return o(t);case"[object Symbol]":return a(t)}}},38517:(t,e,n)=>{var i=n(3118),r=n(85924),o=n(25726);t.exports=function(t){return"function"!=typeof t.constructor||o(t)?{}:i(r(t))}},37285:(t,e,n)=>{var i=n(62705),r=n(35694),o=n(1469),a=i?i.isConcatSpreadable:void 0;t.exports=function(t){return o(t)||r(t)||!!(a&&t&&t[a])}},65776:t=>{var e=/^(?:0|[1-9]\d*)$/;t.exports=function(t,n){var i=typeof t;return!!(n=null==n?9007199254740991:n)&&("number"==i||"symbol"!=i&&e.test(t))&&t>-1&&t%1==0&&t<n}},16612:(t,e,n)=>{var i=n(77813),r=n(98612),o=n(65776),a=n(13218);t.exports=function(t,e,n){if(!a(n))return!1;var s=typeof e;return!!("number"==s?r(n)&&o(e,n.length):"string"==s&&e in n)&&i(n[e],t)}},15403:(t,e,n)=>{var i=n(1469),r=n(33448),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;t.exports=function(t,e){if(i(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!r(t))||(a.test(t)||!o.test(t)||null!=e&&t in Object(e))}},37019:t=>{t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},15346:(t,e,n)=>{var i,r=n(14429),o=(i=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||""))?"Symbol(src)_1."+i:"";t.exports=function(t){return!!o&&o in t}},25726:t=>{var e=Object.prototype;t.exports=function(t){var n=t&&t.constructor;return t===("function"==typeof n&&n.prototype||e)}},89162:(t,e,n)=>{var i=n(13218);t.exports=function(t){return t==t&&!i(t)}},27040:t=>{t.exports=function(){this.__data__=[],this.size=0}},14125:(t,e,n)=>{var i=n(18470),r=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=i(e,t);return!(n<0)&&(n==e.length-1?e.pop():r.call(e,n,1),--this.size,!0)}},82117:(t,e,n)=>{var i=n(18470);t.exports=function(t){var e=this.__data__,n=i(e,t);return n<0?void 0:e[n][1]}},67518:(t,e,n)=>{var i=n(18470);t.exports=function(t){return i(this.__data__,t)>-1}},54705:(t,e,n)=>{var i=n(18470);t.exports=function(t,e){var n=this.__data__,r=i(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}},24785:(t,e,n)=>{var i=n(1989),r=n(38407),o=n(57071);t.exports=function(){this.size=0,this.__data__={hash:new i,map:new(o||r),string:new i}}},11285:(t,e,n)=>{var i=n(45050);t.exports=function(t){var e=i(this,t).delete(t);return this.size-=e?1:0,e}},96e3:(t,e,n)=>{var i=n(45050);t.exports=function(t){return i(this,t).get(t)}},49916:(t,e,n)=>{var i=n(45050);t.exports=function(t){return i(this,t).has(t)}},95265:(t,e,n)=>{var i=n(45050);t.exports=function(t,e){var n=i(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}},68776:t=>{t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,i){n[++e]=[i,t]})),n}},42634:t=>{t.exports=function(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}}},24523:(t,e,n)=>{var i=n(88306);t.exports=function(t){var e=i(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}},94536:(t,e,n)=>{var i=n(10852)(Object,"create");t.exports=i},86916:(t,e,n)=>{var i=n(5569)(Object.keys,Object);t.exports=i},33498:t=>{t.exports=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}},31167:(t,e,n)=>{t=n.nmd(t);var i=n(31957),r=e&&!e.nodeType&&e,o=r&&t&&!t.nodeType&&t,a=o&&o.exports===r&&i.process,s=function(){try{var t=o&&o.require&&o.require("util").types;return t||a&&a.binding&&a.binding("util")}catch(t){}}();t.exports=s},2333:t=>{var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},5569:t=>{t.exports=function(t,e){return function(n){return t(e(n))}}},45357:(t,e,n)=>{var i=n(96874),r=Math.max;t.exports=function(t,e,n){return e=r(void 0===e?t.length-1:e,0),function(){for(var o=arguments,a=-1,s=r(o.length-e,0),l=Array(s);++a<s;)l[a]=o[e+a];a=-1;for(var u=Array(e+1);++a<e;)u[a]=o[a];return u[e]=n(l),i(t,this,u)}}},55639:(t,e,n)=>{var i=n(31957),r="object"==typeof self&&self&&self.Object===Object&&self,o=i||r||Function("return this")();t.exports=o},36390:t=>{t.exports=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}},90619:t=>{t.exports=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this}},72385:t=>{t.exports=function(t){return this.__data__.has(t)}},21814:t=>{t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}},30061:(t,e,n)=>{var i=n(56560),r=n(21275)(i);t.exports=r},21275:t=>{var e=Date.now;t.exports=function(t){var n=0,i=0;return function(){var r=e(),o=16-(r-i);if(i=r,o>0){if(++n>=800)return arguments[0]}else n=0;return t.apply(void 0,arguments)}}},37465:(t,e,n)=>{var i=n(38407);t.exports=function(){this.__data__=new i,this.size=0}},63779:t=>{t.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}},67599:t=>{t.exports=function(t){return this.__data__.get(t)}},44758:t=>{t.exports=function(t){return this.__data__.has(t)}},34309:(t,e,n)=>{var i=n(38407),r=n(57071),o=n(83369);t.exports=function(t,e){var n=this.__data__;if(n instanceof i){var a=n.__data__;if(!r||a.length<199)return a.push([t,e]),this.size=++n.size,this;n=this.__data__=new o(a)}return n.set(t,e),this.size=n.size,this}},42351:t=>{t.exports=function(t,e,n){for(var i=n-1,r=t.length;++i<r;)if(t[i]===e)return i;return-1}},88016:(t,e,n)=>{var i=n(48983),r=n(62689),o=n(21903);t.exports=function(t){return r(t)?o(t):i(t)}},55514:(t,e,n)=>{var i=n(24523),r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,a=i((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(r,(function(t,n,i,r){e.push(i?r.replace(o,"$1"):n||t)})),e}));t.exports=a},40327:(t,e,n)=>{var i=n(33448);t.exports=function(t){if("string"==typeof t||i(t))return t;var e=t+"";return"0"==e&&1/t==-Infinity?"-0":e}},80346:t=>{var e=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return e.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},67990:t=>{var e=/\s/;t.exports=function(t){for(var n=t.length;n--&&e.test(t.charAt(n)););return n}},21903:t=>{var e="[\\ud800-\\udfff]",n="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",i="\\ud83c[\\udffb-\\udfff]",r="[^\\ud800-\\udfff]",o="(?:\\ud83c[\\udde6-\\uddff]){2}",a="[\\ud800-\\udbff][\\udc00-\\udfff]",s="(?:"+n+"|"+i+")"+"?",l="[\\ufe0e\\ufe0f]?",u=l+s+("(?:\\u200d(?:"+[r,o,a].join("|")+")"+l+s+")*"),c="(?:"+[r+n+"?",n,o,a,e].join("|")+")",h=RegExp(i+"(?="+i+")|"+c+u,"g");t.exports=function(t){for(var e=h.lastIndex=0;h.test(t);)++e;return e}},66678:(t,e,n)=>{var i=n(85990);t.exports=function(t){return i(t,4)}},50361:(t,e,n)=>{var i=n(85990);t.exports=function(t){return i(t,5)}},75703:t=>{t.exports=function(t){return function(){return t}}},91747:(t,e,n)=>{var i=n(5976),r=n(77813),o=n(16612),a=n(81704),s=Object.prototype,l=s.hasOwnProperty,u=i((function(t,e){t=Object(t);var n=-1,i=e.length,u=i>2?e[2]:void 0;for(u&&o(e[0],e[1],u)&&(i=1);++n<i;)for(var c=e[n],h=a(c),d=-1,f=h.length;++d<f;){var p=h[d],m=t[p];(void 0===m||r(m,s[p])&&!l.call(t,p))&&(t[p]=c[p])}return t}));t.exports=u},66073:(t,e,n)=>{t.exports=n(84486)},77813:t=>{t.exports=function(t,e){return t===e||t!=t&&e!=e}},63105:(t,e,n)=>{var i=n(34963),r=n(80760),o=n(67206),a=n(1469);t.exports=function(t,e){return(a(t)?i:r)(t,o(e,3))}},13311:(t,e,n)=>{var i=n(67740)(n(30998));t.exports=i},30998:(t,e,n)=>{var i=n(41848),r=n(67206),o=n(40554),a=Math.max;t.exports=function(t,e,n){var s=null==t?0:t.length;if(!s)return-1;var l=null==n?0:o(n);return l<0&&(l=a(s+l,0)),i(t,r(e,3),l)}},85564:(t,e,n)=>{var i=n(21078);t.exports=function(t){return(null==t?0:t.length)?i(t,1):[]}},84486:(t,e,n)=>{var i=n(77412),r=n(89881),o=n(54290),a=n(1469);t.exports=function(t,e){return(a(t)?i:r)(t,o(e))}},62620:(t,e,n)=>{var i=n(28483),r=n(54290),o=n(81704);t.exports=function(t,e){return null==t?t:i(t,r(e),o)}},27361:(t,e,n)=>{var i=n(97786);t.exports=function(t,e,n){var r=null==t?void 0:i(t,e);return void 0===r?n:r}},18721:(t,e,n)=>{var i=n(78565),r=n(222);t.exports=function(t,e){return null!=t&&r(t,e,i)}},79095:(t,e,n)=>{var i=n(13),r=n(222);t.exports=function(t,e){return null!=t&&r(t,e,i)}},6557:t=>{t.exports=function(t){return t}},35694:(t,e,n)=>{var i=n(9454),r=n(37005),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,l=i(function(){return arguments}())?i:function(t){return r(t)&&a.call(t,"callee")&&!s.call(t,"callee")};t.exports=l},1469:t=>{var e=Array.isArray;t.exports=e},98612:(t,e,n)=>{var i=n(23560),r=n(41780);t.exports=function(t){return null!=t&&r(t.length)&&!i(t)}},29246:(t,e,n)=>{var i=n(98612),r=n(37005);t.exports=function(t){return r(t)&&i(t)}},44144:(t,e,n)=>{t=n.nmd(t);var i=n(55639),r=n(95062),o=e&&!e.nodeType&&e,a=o&&t&&!t.nodeType&&t,s=a&&a.exports===o?i.Buffer:void 0,l=(s?s.isBuffer:void 0)||r;t.exports=l},41609:(t,e,n)=>{var i=n(280),r=n(64160),o=n(35694),a=n(1469),s=n(98612),l=n(44144),u=n(25726),c=n(36719),h=Object.prototype.hasOwnProperty;t.exports=function(t){if(null==t)return!0;if(s(t)&&(a(t)||"string"==typeof t||"function"==typeof t.splice||l(t)||c(t)||o(t)))return!t.length;var e=r(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(u(t))return!i(t).length;for(var n in t)if(h.call(t,n))return!1;return!0}},23560:(t,e,n)=>{var i=n(44239),r=n(13218);t.exports=function(t){if(!r(t))return!1;var e=i(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},41780:t=>{t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},56688:(t,e,n)=>{var i=n(25588),r=n(7518),o=n(31167),a=o&&o.isMap,s=a?r(a):i;t.exports=s},13218:t=>{t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},37005:t=>{t.exports=function(t){return null!=t&&"object"==typeof t}},68630:(t,e,n)=>{var i=n(44239),r=n(85924),o=n(37005),a=Function.prototype,s=Object.prototype,l=a.toString,u=s.hasOwnProperty,c=l.call(Object);t.exports=function(t){if(!o(t)||"[object Object]"!=i(t))return!1;var e=r(t);if(null===e)return!0;var n=u.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&l.call(n)==c}},72928:(t,e,n)=>{var i=n(29221),r=n(7518),o=n(31167),a=o&&o.isSet,s=a?r(a):i;t.exports=s},47037:(t,e,n)=>{var i=n(44239),r=n(1469),o=n(37005);t.exports=function(t){return"string"==typeof t||!r(t)&&o(t)&&"[object String]"==i(t)}},33448:(t,e,n)=>{var i=n(44239),r=n(37005);t.exports=function(t){return"symbol"==typeof t||r(t)&&"[object Symbol]"==i(t)}},36719:(t,e,n)=>{var i=n(38749),r=n(7518),o=n(31167),a=o&&o.isTypedArray,s=a?r(a):i;t.exports=s},52353:t=>{t.exports=function(t){return void 0===t}},3674:(t,e,n)=>{var i=n(14636),r=n(280),o=n(98612);t.exports=function(t){return o(t)?i(t):r(t)}},81704:(t,e,n)=>{var i=n(14636),r=n(10313),o=n(98612);t.exports=function(t){return o(t)?i(t,!0):r(t)}},10928:t=>{t.exports=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}},96486:function(t,e,n){var i;t=n.nmd(t),function(){var r,o="Expected a function",a="__lodash_hash_undefined__",s="__lodash_placeholder__",l=16,u=32,c=64,h=128,d=256,f=1/0,p=9007199254740991,m=NaN,g=4294967295,v=[["ary",h],["bind",1],["bindKey",2],["curry",8],["curryRight",l],["flip",512],["partial",u],["partialRight",c],["rearg",d]],y="[object Arguments]",b="[object Array]",_="[object Boolean]",w="[object Date]",x="[object Error]",M="[object Function]",E="[object GeneratorFunction]",S="[object Map]",k="[object Number]",C="[object Object]",T="[object Promise]",D="[object RegExp]",L="[object Set]",A="[object String]",O="[object Symbol]",P="[object WeakMap]",I="[object ArrayBuffer]",N="[object DataView]",R="[object Float32Array]",Y="[object Float64Array]",j="[object Int8Array]",F="[object Int16Array]",B="[object Int32Array]",z="[object Uint8Array]",H="[object Uint8ClampedArray]",G="[object Uint16Array]",W="[object Uint32Array]",U=/\b__p \+= '';/g,V=/\b(__p \+=) '' \+/g,X=/(__e\(.*?\)|\b__t\)) \+\n'';/g,q=/&(?:amp|lt|gt|quot|#39);/g,K=/[&<>"']/g,$=RegExp(q.source),Z=RegExp(K.source),J=/<%-([\s\S]+?)%>/g,Q=/<%([\s\S]+?)%>/g,tt=/<%=([\s\S]+?)%>/g,et=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,nt=/^\w*$/,it=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,rt=/[\\^$.*+?()[\]{}|]/g,ot=RegExp(rt.source),at=/^\s+/,st=/\s/,lt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ut=/\{\n\/\* \[wrapped with (.+)\] \*/,ct=/,? & /,ht=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,dt=/[()=,{}\[\]\/\s]/,ft=/\\(\\)?/g,pt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,mt=/\w*$/,gt=/^[-+]0x[0-9a-f]+$/i,vt=/^0b[01]+$/i,yt=/^\[object .+?Constructor\]$/,bt=/^0o[0-7]+$/i,_t=/^(?:0|[1-9]\d*)$/,wt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,xt=/($^)/,Mt=/['\n\r\u2028\u2029\\]/g,Et="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",St="\\u2700-\\u27bf",kt="a-z\\xdf-\\xf6\\xf8-\\xff",Ct="A-Z\\xc0-\\xd6\\xd8-\\xde",Tt="\\ufe0e\\ufe0f",Dt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Lt="[']",At="[\\ud800-\\udfff]",Ot="["+Dt+"]",Pt="["+Et+"]",It="\\d+",Nt="[\\u2700-\\u27bf]",Rt="["+kt+"]",Yt="[^\\ud800-\\udfff"+Dt+It+St+kt+Ct+"]",jt="\\ud83c[\\udffb-\\udfff]",Ft="[^\\ud800-\\udfff]",Bt="(?:\\ud83c[\\udde6-\\uddff]){2}",zt="[\\ud800-\\udbff][\\udc00-\\udfff]",Ht="["+Ct+"]",Gt="(?:"+Rt+"|"+Yt+")",Wt="(?:"+Ht+"|"+Yt+")",Ut="(?:['](?:d|ll|m|re|s|t|ve))?",Vt="(?:['](?:D|LL|M|RE|S|T|VE))?",Xt="(?:"+Pt+"|"+jt+")"+"?",qt="[\\ufe0e\\ufe0f]?",Kt=qt+Xt+("(?:\\u200d(?:"+[Ft,Bt,zt].join("|")+")"+qt+Xt+")*"),$t="(?:"+[Nt,Bt,zt].join("|")+")"+Kt,Zt="(?:"+[Ft+Pt+"?",Pt,Bt,zt,At].join("|")+")",Jt=RegExp(Lt,"g"),Qt=RegExp(Pt,"g"),te=RegExp(jt+"(?="+jt+")|"+Zt+Kt,"g"),ee=RegExp([Ht+"?"+Rt+"+"+Ut+"(?="+[Ot,Ht,"$"].join("|")+")",Wt+"+"+Vt+"(?="+[Ot,Ht+Gt,"$"].join("|")+")",Ht+"?"+Gt+"+"+Ut,Ht+"+"+Vt,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",It,$t].join("|"),"g"),ne=RegExp("[\\u200d\\ud800-\\udfff"+Et+Tt+"]"),ie=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,re=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],oe=-1,ae={};ae[R]=ae[Y]=ae[j]=ae[F]=ae[B]=ae[z]=ae[H]=ae[G]=ae[W]=!0,ae[y]=ae[b]=ae[I]=ae[_]=ae[N]=ae[w]=ae[x]=ae[M]=ae[S]=ae[k]=ae[C]=ae[D]=ae[L]=ae[A]=ae[P]=!1;var se={};se[y]=se[b]=se[I]=se[N]=se[_]=se[w]=se[R]=se[Y]=se[j]=se[F]=se[B]=se[S]=se[k]=se[C]=se[D]=se[L]=se[A]=se[O]=se[z]=se[H]=se[G]=se[W]=!0,se[x]=se[M]=se[P]=!1;var le={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ue=parseFloat,ce=parseInt,he="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,de="object"==typeof self&&self&&self.Object===Object&&self,fe=he||de||Function("return this")(),pe=e&&!e.nodeType&&e,me=pe&&t&&!t.nodeType&&t,ge=me&&me.exports===pe,ve=ge&&he.process,ye=function(){try{var t=me&&me.require&&me.require("util").types;return t||ve&&ve.binding&&ve.binding("util")}catch(t){}}(),be=ye&&ye.isArrayBuffer,_e=ye&&ye.isDate,we=ye&&ye.isMap,xe=ye&&ye.isRegExp,Me=ye&&ye.isSet,Ee=ye&&ye.isTypedArray;function Se(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function ke(t,e,n,i){for(var r=-1,o=null==t?0:t.length;++r<o;){var a=t[r];e(i,a,n(a),t)}return i}function Ce(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&!1!==e(t[n],n,t););return t}function Te(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function De(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(!e(t[n],n,t))return!1;return!0}function Le(t,e){for(var n=-1,i=null==t?0:t.length,r=0,o=[];++n<i;){var a=t[n];e(a,n,t)&&(o[r++]=a)}return o}function Ae(t,e){return!!(null==t?0:t.length)&&ze(t,e,0)>-1}function Oe(t,e,n){for(var i=-1,r=null==t?0:t.length;++i<r;)if(n(e,t[i]))return!0;return!1}function Pe(t,e){for(var n=-1,i=null==t?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}function Ie(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}function Ne(t,e,n,i){var r=-1,o=null==t?0:t.length;for(i&&o&&(n=t[++r]);++r<o;)n=e(n,t[r],r,t);return n}function Re(t,e,n,i){var r=null==t?0:t.length;for(i&&r&&(n=t[--r]);r--;)n=e(n,t[r],r,t);return n}function Ye(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}var je=Ue("length");function Fe(t,e,n){var i;return n(t,(function(t,n,r){if(e(t,n,r))return i=n,!1})),i}function Be(t,e,n,i){for(var r=t.length,o=n+(i?1:-1);i?o--:++o<r;)if(e(t[o],o,t))return o;return-1}function ze(t,e,n){return e==e?function(t,e,n){var i=n-1,r=t.length;for(;++i<r;)if(t[i]===e)return i;return-1}(t,e,n):Be(t,Ge,n)}function He(t,e,n,i){for(var r=n-1,o=t.length;++r<o;)if(i(t[r],e))return r;return-1}function Ge(t){return t!=t}function We(t,e){var n=null==t?0:t.length;return n?qe(t,e)/n:m}function Ue(t){return function(e){return null==e?r:e[t]}}function Ve(t){return function(e){return null==t?r:t[e]}}function Xe(t,e,n,i,r){return r(t,(function(t,r,o){n=i?(i=!1,t):e(n,t,r,o)})),n}function qe(t,e){for(var n,i=-1,o=t.length;++i<o;){var a=e(t[i]);a!==r&&(n=n===r?a:n+a)}return n}function Ke(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}function $e(t){return t?t.slice(0,mn(t)+1).replace(at,""):t}function Ze(t){return function(e){return t(e)}}function Je(t,e){return Pe(e,(function(e){return t[e]}))}function Qe(t,e){return t.has(e)}function tn(t,e){for(var n=-1,i=t.length;++n<i&&ze(e,t[n],0)>-1;);return n}function en(t,e){for(var n=t.length;n--&&ze(e,t[n],0)>-1;);return n}function nn(t,e){for(var n=t.length,i=0;n--;)t[n]===e&&++i;return i}var rn=Ve({:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"}),on=Ve({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function an(t){return"\\"+le[t]}function sn(t){return ne.test(t)}function ln(t){var e=-1,n=Array(t.size);return t.forEach((function(t,i){n[++e]=[i,t]})),n}function un(t,e){return function(n){return t(e(n))}}function cn(t,e){for(var n=-1,i=t.length,r=0,o=[];++n<i;){var a=t[n];a!==e&&a!==s||(t[n]=s,o[r++]=n)}return o}function hn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function dn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function fn(t){return sn(t)?function(t){var e=te.lastIndex=0;for(;te.test(t);)++e;return e}(t):je(t)}function pn(t){return sn(t)?function(t){return t.match(te)||[]}(t):function(t){return t.split("")}(t)}function mn(t){for(var e=t.length;e--&&st.test(t.charAt(e)););return e}var gn=Ve({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var vn=function t(e){var n,i=(e=null==e?fe:vn.defaults(fe.Object(),e,vn.pick(fe,re))).Array,st=e.Date,Et=e.Error,St=e.Function,kt=e.Math,Ct=e.Object,Tt=e.RegExp,Dt=e.String,Lt=e.TypeError,At=i.prototype,Ot=St.prototype,Pt=Ct.prototype,It=e["__core-js_shared__"],Nt=Ot.toString,Rt=Pt.hasOwnProperty,Yt=0,jt=(n=/[^.]+$/.exec(It&&It.keys&&It.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Ft=Pt.toString,Bt=Nt.call(Ct),zt=fe._,Ht=Tt("^"+Nt.call(Rt).replace(rt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Gt=ge?e.Buffer:r,Wt=e.Symbol,Ut=e.Uint8Array,Vt=Gt?Gt.allocUnsafe:r,Xt=un(Ct.getPrototypeOf,Ct),qt=Ct.create,Kt=Pt.propertyIsEnumerable,$t=At.splice,Zt=Wt?Wt.isConcatSpreadable:r,te=Wt?Wt.iterator:r,ne=Wt?Wt.toStringTag:r,le=function(){try{var t=po(Ct,"defineProperty");return t({},"",{}),t}catch(t){}}(),he=e.clearTimeout!==fe.clearTimeout&&e.clearTimeout,de=st&&st.now!==fe.Date.now&&st.now,pe=e.setTimeout!==fe.setTimeout&&e.setTimeout,me=kt.ceil,ve=kt.floor,ye=Ct.getOwnPropertySymbols,je=Gt?Gt.isBuffer:r,Ve=e.isFinite,yn=At.join,bn=un(Ct.keys,Ct),_n=kt.max,wn=kt.min,xn=st.now,Mn=e.parseInt,En=kt.random,Sn=At.reverse,kn=po(e,"DataView"),Cn=po(e,"Map"),Tn=po(e,"Promise"),Dn=po(e,"Set"),Ln=po(e,"WeakMap"),An=po(Ct,"create"),On=Ln&&new Ln,Pn={},In=zo(kn),Nn=zo(Cn),Rn=zo(Tn),Yn=zo(Dn),jn=zo(Ln),Fn=Wt?Wt.prototype:r,Bn=Fn?Fn.valueOf:r,zn=Fn?Fn.toString:r;function Hn(t){if(rs(t)&&!Xa(t)&&!(t instanceof Vn)){if(t instanceof Un)return t;if(Rt.call(t,"__wrapped__"))return Ho(t)}return new Un(t)}var Gn=function(){function t(){}return function(e){if(!is(e))return{};if(qt)return qt(e);t.prototype=e;var n=new t;return t.prototype=r,n}}();function Wn(){}function Un(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=r}function Vn(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=g,this.__views__=[]}function Xn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function qn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Kn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function $n(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Kn;++e<n;)this.add(t[e])}function Zn(t){var e=this.__data__=new qn(t);this.size=e.size}function Jn(t,e){var n=Xa(t),i=!n&&Va(t),r=!n&&!i&&Za(t),o=!n&&!i&&!r&&ds(t),a=n||i||r||o,s=a?Ke(t.length,Dt):[],l=s.length;for(var u in t)!e&&!Rt.call(t,u)||a&&("length"==u||r&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||wo(u,l))||s.push(u);return s}function Qn(t){var e=t.length;return e?t[$i(0,e-1)]:r}function ti(t,e){return jo(Ar(t),ui(e,0,t.length))}function ei(t){return jo(Ar(t))}function ni(t,e,n){(n!==r&&!Ga(t[e],n)||n===r&&!(e in t))&&si(t,e,n)}function ii(t,e,n){var i=t[e];Rt.call(t,e)&&Ga(i,n)&&(n!==r||e in t)||si(t,e,n)}function ri(t,e){for(var n=t.length;n--;)if(Ga(t[n][0],e))return n;return-1}function oi(t,e,n,i){return pi(t,(function(t,r,o){e(i,t,n(t),o)})),i}function ai(t,e){return t&&Or(e,Is(e),t)}function si(t,e,n){"__proto__"==e&&le?le(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function li(t,e){for(var n=-1,o=e.length,a=i(o),s=null==t;++n<o;)a[n]=s?r:Ds(t,e[n]);return a}function ui(t,e,n){return t==t&&(n!==r&&(t=t<=n?t:n),e!==r&&(t=t>=e?t:e)),t}function ci(t,e,n,i,o,a){var s,l=1&e,u=2&e,c=4&e;if(n&&(s=o?n(t,i,o,a):n(t)),s!==r)return s;if(!is(t))return t;var h=Xa(t);if(h){if(s=function(t){var e=t.length,n=new t.constructor(e);e&&"string"==typeof t[0]&&Rt.call(t,"index")&&(n.index=t.index,n.input=t.input);return n}(t),!l)return Ar(t,s)}else{var d=vo(t),f=d==M||d==E;if(Za(t))return Sr(t,l);if(d==C||d==y||f&&!o){if(s=u||f?{}:bo(t),!l)return u?function(t,e){return Or(t,go(t),e)}(t,function(t,e){return t&&Or(e,Ns(e),t)}(s,t)):function(t,e){return Or(t,mo(t),e)}(t,ai(s,t))}else{if(!se[d])return o?t:{};s=function(t,e,n){var i=t.constructor;switch(e){case I:return kr(t);case _:case w:return new i(+t);case N:return function(t,e){var n=e?kr(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case R:case Y:case j:case F:case B:case z:case H:case G:case W:return Cr(t,n);case S:case L:return new i;case k:case A:return new i(t);case D:return function(t){var e=new t.constructor(t.source,mt.exec(t));return e.lastIndex=t.lastIndex,e}(t);case O:return r=t,Bn?Ct(Bn.call(r)):{}}var r}(t,d,l)}}a||(a=new Zn);var p=a.get(t);if(p)return p;a.set(t,s),us(t)?t.forEach((function(i){s.add(ci(i,e,n,i,t,a))})):os(t)&&t.forEach((function(i,r){s.set(r,ci(i,e,n,r,t,a))}));var m=h?r:(c?u?ao:oo:u?Ns:Is)(t);return Ce(m||t,(function(i,r){m&&(i=t[r=i]),ii(s,r,ci(i,e,n,r,t,a))})),s}function hi(t,e,n){var i=n.length;if(null==t)return!i;for(t=Ct(t);i--;){var o=n[i],a=e[o],s=t[o];if(s===r&&!(o in t)||!a(s))return!1}return!0}function di(t,e,n){if("function"!=typeof t)throw new Lt(o);return Io((function(){t.apply(r,n)}),e)}function fi(t,e,n,i){var r=-1,o=Ae,a=!0,s=t.length,l=[],u=e.length;if(!s)return l;n&&(e=Pe(e,Ze(n))),i?(o=Oe,a=!1):e.length>=200&&(o=Qe,a=!1,e=new $n(e));t:for(;++r<s;){var c=t[r],h=null==n?c:n(c);if(c=i||0!==c?c:0,a&&h==h){for(var d=u;d--;)if(e[d]===h)continue t;l.push(c)}else o(e,h,i)||l.push(c)}return l}Hn.templateSettings={escape:J,evaluate:Q,interpolate:tt,variable:"",imports:{_:Hn}},Hn.prototype=Wn.prototype,Hn.prototype.constructor=Hn,Un.prototype=Gn(Wn.prototype),Un.prototype.constructor=Un,Vn.prototype=Gn(Wn.prototype),Vn.prototype.constructor=Vn,Xn.prototype.clear=function(){this.__data__=An?An(null):{},this.size=0},Xn.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Xn.prototype.get=function(t){var e=this.__data__;if(An){var n=e[t];return n===a?r:n}return Rt.call(e,t)?e[t]:r},Xn.prototype.has=function(t){var e=this.__data__;return An?e[t]!==r:Rt.call(e,t)},Xn.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=An&&e===r?a:e,this},qn.prototype.clear=function(){this.__data__=[],this.size=0},qn.prototype.delete=function(t){var e=this.__data__,n=ri(e,t);return!(n<0)&&(n==e.length-1?e.pop():$t.call(e,n,1),--this.size,!0)},qn.prototype.get=function(t){var e=this.__data__,n=ri(e,t);return n<0?r:e[n][1]},qn.prototype.has=function(t){return ri(this.__data__,t)>-1},qn.prototype.set=function(t,e){var n=this.__data__,i=ri(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this},Kn.prototype.clear=function(){this.size=0,this.__data__={hash:new Xn,map:new(Cn||qn),string:new Xn}},Kn.prototype.delete=function(t){var e=ho(this,t).delete(t);return this.size-=e?1:0,e},Kn.prototype.get=function(t){return ho(this,t).get(t)},Kn.prototype.has=function(t){return ho(this,t).has(t)},Kn.prototype.set=function(t,e){var n=ho(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this},$n.prototype.add=$n.prototype.push=function(t){return this.__data__.set(t,a),this},$n.prototype.has=function(t){return this.__data__.has(t)},Zn.prototype.clear=function(){this.__data__=new qn,this.size=0},Zn.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Zn.prototype.get=function(t){return this.__data__.get(t)},Zn.prototype.has=function(t){return this.__data__.has(t)},Zn.prototype.set=function(t,e){var n=this.__data__;if(n instanceof qn){var i=n.__data__;if(!Cn||i.length<199)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new Kn(i)}return n.set(t,e),this.size=n.size,this};var pi=Nr(xi),mi=Nr(Mi,!0);function gi(t,e){var n=!0;return pi(t,(function(t,i,r){return n=!!e(t,i,r)})),n}function vi(t,e,n){for(var i=-1,o=t.length;++i<o;){var a=t[i],s=e(a);if(null!=s&&(l===r?s==s&&!hs(s):n(s,l)))var l=s,u=a}return u}function yi(t,e){var n=[];return pi(t,(function(t,i,r){e(t,i,r)&&n.push(t)})),n}function bi(t,e,n,i,r){var o=-1,a=t.length;for(n||(n=_o),r||(r=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?bi(s,e-1,n,i,r):Ie(r,s):i||(r[r.length]=s)}return r}var _i=Rr(),wi=Rr(!0);function xi(t,e){return t&&_i(t,e,Is)}function Mi(t,e){return t&&wi(t,e,Is)}function Ei(t,e){return Le(e,(function(e){return ts(t[e])}))}function Si(t,e){for(var n=0,i=(e=wr(e,t)).length;null!=t&&n<i;)t=t[Bo(e[n++])];return n&&n==i?t:r}function ki(t,e,n){var i=e(t);return Xa(t)?i:Ie(i,n(t))}function Ci(t){return null==t?t===r?"[object Undefined]":"[object Null]":ne&&ne in Ct(t)?function(t){var e=Rt.call(t,ne),n=t[ne];try{t[ne]=r;var i=!0}catch(t){}var o=Ft.call(t);i&&(e?t[ne]=n:delete t[ne]);return o}(t):function(t){return Ft.call(t)}(t)}function Ti(t,e){return t>e}function Di(t,e){return null!=t&&Rt.call(t,e)}function Li(t,e){return null!=t&&e in Ct(t)}function Ai(t,e,n){for(var o=n?Oe:Ae,a=t[0].length,s=t.length,l=s,u=i(s),c=1/0,h=[];l--;){var d=t[l];l&&e&&(d=Pe(d,Ze(e))),c=wn(d.length,c),u[l]=!n&&(e||a>=120&&d.length>=120)?new $n(l&&d):r}d=t[0];var f=-1,p=u[0];t:for(;++f<a&&h.length<c;){var m=d[f],g=e?e(m):m;if(m=n||0!==m?m:0,!(p?Qe(p,g):o(h,g,n))){for(l=s;--l;){var v=u[l];if(!(v?Qe(v,g):o(t[l],g,n)))continue t}p&&p.push(g),h.push(m)}}return h}function Oi(t,e,n){var i=null==(t=Lo(t,e=wr(e,t)))?t:t[Bo(Qo(e))];return null==i?r:Se(i,t,n)}function Pi(t){return rs(t)&&Ci(t)==y}function Ii(t,e,n,i,o){return t===e||(null==t||null==e||!rs(t)&&!rs(e)?t!=t&&e!=e:function(t,e,n,i,o,a){var s=Xa(t),l=Xa(e),u=s?b:vo(t),c=l?b:vo(e),h=(u=u==y?C:u)==C,d=(c=c==y?C:c)==C,f=u==c;if(f&&Za(t)){if(!Za(e))return!1;s=!0,h=!1}if(f&&!h)return a||(a=new Zn),s||ds(t)?io(t,e,n,i,o,a):function(t,e,n,i,r,o,a){switch(n){case N:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case I:return!(t.byteLength!=e.byteLength||!o(new Ut(t),new Ut(e)));case _:case w:case k:return Ga(+t,+e);case x:return t.name==e.name&&t.message==e.message;case D:case A:return t==e+"";case S:var s=ln;case L:var l=1&i;if(s||(s=hn),t.size!=e.size&&!l)return!1;var u=a.get(t);if(u)return u==e;i|=2,a.set(t,e);var c=io(s(t),s(e),i,r,o,a);return a.delete(t),c;case O:if(Bn)return Bn.call(t)==Bn.call(e)}return!1}(t,e,u,n,i,o,a);if(!(1&n)){var p=h&&Rt.call(t,"__wrapped__"),m=d&&Rt.call(e,"__wrapped__");if(p||m){var g=p?t.value():t,v=m?e.value():e;return a||(a=new Zn),o(g,v,n,i,a)}}if(!f)return!1;return a||(a=new Zn),function(t,e,n,i,o,a){var s=1&n,l=oo(t),u=l.length,c=oo(e).length;if(u!=c&&!s)return!1;var h=u;for(;h--;){var d=l[h];if(!(s?d in e:Rt.call(e,d)))return!1}var f=a.get(t),p=a.get(e);if(f&&p)return f==e&&p==t;var m=!0;a.set(t,e),a.set(e,t);var g=s;for(;++h<u;){var v=t[d=l[h]],y=e[d];if(i)var b=s?i(y,v,d,e,t,a):i(v,y,d,t,e,a);if(!(b===r?v===y||o(v,y,n,i,a):b)){m=!1;break}g||(g="constructor"==d)}if(m&&!g){var _=t.constructor,w=e.constructor;_==w||!("constructor"in t)||!("constructor"in e)||"function"==typeof _&&_ instanceof _&&"function"==typeof w&&w instanceof w||(m=!1)}return a.delete(t),a.delete(e),m}(t,e,n,i,o,a)}(t,e,n,i,Ii,o))}function Ni(t,e,n,i){var o=n.length,a=o,s=!i;if(null==t)return!a;for(t=Ct(t);o--;){var l=n[o];if(s&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++o<a;){var u=(l=n[o])[0],c=t[u],h=l[1];if(s&&l[2]){if(c===r&&!(u in t))return!1}else{var d=new Zn;if(i)var f=i(c,h,u,t,e,d);if(!(f===r?Ii(h,c,3,i,d):f))return!1}}return!0}function Ri(t){return!(!is(t)||(e=t,jt&&jt in e))&&(ts(t)?Ht:yt).test(zo(t));var e}function Yi(t){return"function"==typeof t?t:null==t?al:"object"==typeof t?Xa(t)?Gi(t[0],t[1]):Hi(t):ml(t)}function ji(t){if(!ko(t))return bn(t);var e=[];for(var n in Ct(t))Rt.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Fi(t){if(!is(t))return function(t){var e=[];if(null!=t)for(var n in Ct(t))e.push(n);return e}(t);var e=ko(t),n=[];for(var i in t)("constructor"!=i||!e&&Rt.call(t,i))&&n.push(i);return n}function Bi(t,e){return t<e}function zi(t,e){var n=-1,r=Ka(t)?i(t.length):[];return pi(t,(function(t,i,o){r[++n]=e(t,i,o)})),r}function Hi(t){var e=fo(t);return 1==e.length&&e[0][2]?To(e[0][0],e[0][1]):function(n){return n===t||Ni(n,t,e)}}function Gi(t,e){return Mo(t)&&Co(e)?To(Bo(t),e):function(n){var i=Ds(n,t);return i===r&&i===e?Ls(n,t):Ii(e,i,3)}}function Wi(t,e,n,i,o){t!==e&&_i(e,(function(a,s){if(o||(o=new Zn),is(a))!function(t,e,n,i,o,a,s){var l=Oo(t,n),u=Oo(e,n),c=s.get(u);if(c)return void ni(t,n,c);var h=a?a(l,u,n+"",t,e,s):r,d=h===r;if(d){var f=Xa(u),p=!f&&Za(u),m=!f&&!p&&ds(u);h=u,f||p||m?Xa(l)?h=l:$a(l)?h=Ar(l):p?(d=!1,h=Sr(u,!0)):m?(d=!1,h=Cr(u,!0)):h=[]:ss(u)||Va(u)?(h=l,Va(l)?h=_s(l):is(l)&&!ts(l)||(h=bo(u))):d=!1}d&&(s.set(u,h),o(h,u,i,a,s),s.delete(u));ni(t,n,h)}(t,e,s,n,Wi,i,o);else{var l=i?i(Oo(t,s),a,s+"",t,e,o):r;l===r&&(l=a),ni(t,s,l)}}),Ns)}function Ui(t,e){var n=t.length;if(n)return wo(e+=e<0?n:0,n)?t[e]:r}function Vi(t,e,n){e=e.length?Pe(e,(function(t){return Xa(t)?function(e){return Si(e,1===t.length?t[0]:t)}:t})):[al];var i=-1;e=Pe(e,Ze(co()));var r=zi(t,(function(t,n,r){var o=Pe(e,(function(e){return e(t)}));return{criteria:o,index:++i,value:t}}));return function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(r,(function(t,e){return function(t,e,n){var i=-1,r=t.criteria,o=e.criteria,a=r.length,s=n.length;for(;++i<a;){var l=Tr(r[i],o[i]);if(l)return i>=s?l:l*("desc"==n[i]?-1:1)}return t.index-e.index}(t,e,n)}))}function Xi(t,e,n){for(var i=-1,r=e.length,o={};++i<r;){var a=e[i],s=Si(t,a);n(s,a)&&er(o,wr(a,t),s)}return o}function qi(t,e,n,i){var r=i?He:ze,o=-1,a=e.length,s=t;for(t===e&&(e=Ar(e)),n&&(s=Pe(t,Ze(n)));++o<a;)for(var l=0,u=e[o],c=n?n(u):u;(l=r(s,c,l,i))>-1;)s!==t&&$t.call(s,l,1),$t.call(t,l,1);return t}function Ki(t,e){for(var n=t?e.length:0,i=n-1;n--;){var r=e[n];if(n==i||r!==o){var o=r;wo(r)?$t.call(t,r,1):fr(t,r)}}return t}function $i(t,e){return t+ve(En()*(e-t+1))}function Zi(t,e){var n="";if(!t||e<1||e>p)return n;do{e%2&&(n+=t),(e=ve(e/2))&&(t+=t)}while(e);return n}function Ji(t,e){return No(Do(t,e,al),t+"")}function Qi(t){return Qn(Gs(t))}function tr(t,e){var n=Gs(t);return jo(n,ui(e,0,n.length))}function er(t,e,n,i){if(!is(t))return t;for(var o=-1,a=(e=wr(e,t)).length,s=a-1,l=t;null!=l&&++o<a;){var u=Bo(e[o]),c=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return t;if(o!=s){var h=l[u];(c=i?i(h,u,l):r)===r&&(c=is(h)?h:wo(e[o+1])?[]:{})}ii(l,u,c),l=l[u]}return t}var nr=On?function(t,e){return On.set(t,e),t}:al,ir=le?function(t,e){return le(t,"toString",{configurable:!0,enumerable:!1,value:il(e),writable:!0})}:al;function rr(t){return jo(Gs(t))}function or(t,e,n){var r=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(n=n>o?o:n)<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var a=i(o);++r<o;)a[r]=t[r+e];return a}function ar(t,e){var n;return pi(t,(function(t,i,r){return!(n=e(t,i,r))})),!!n}function sr(t,e,n){var i=0,r=null==t?i:t.length;if("number"==typeof e&&e==e&&r<=2147483647){for(;i<r;){var o=i+r>>>1,a=t[o];null!==a&&!hs(a)&&(n?a<=e:a<e)?i=o+1:r=o}return r}return lr(t,e,al,n)}function lr(t,e,n,i){var o=0,a=null==t?0:t.length;if(0===a)return 0;for(var s=(e=n(e))!=e,l=null===e,u=hs(e),c=e===r;o<a;){var h=ve((o+a)/2),d=n(t[h]),f=d!==r,p=null===d,m=d==d,g=hs(d);if(s)var v=i||m;else v=c?m&&(i||f):l?m&&f&&(i||!p):u?m&&f&&!p&&(i||!g):!p&&!g&&(i?d<=e:d<e);v?o=h+1:a=h}return wn(a,4294967294)}function ur(t,e){for(var n=-1,i=t.length,r=0,o=[];++n<i;){var a=t[n],s=e?e(a):a;if(!n||!Ga(s,l)){var l=s;o[r++]=0===a?0:a}}return o}function cr(t){return"number"==typeof t?t:hs(t)?m:+t}function hr(t){if("string"==typeof t)return t;if(Xa(t))return Pe(t,hr)+"";if(hs(t))return zn?zn.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function dr(t,e,n){var i=-1,r=Ae,o=t.length,a=!0,s=[],l=s;if(n)a=!1,r=Oe;else if(o>=200){var u=e?null:Zr(t);if(u)return hn(u);a=!1,r=Qe,l=new $n}else l=e?[]:s;t:for(;++i<o;){var c=t[i],h=e?e(c):c;if(c=n||0!==c?c:0,a&&h==h){for(var d=l.length;d--;)if(l[d]===h)continue t;e&&l.push(h),s.push(c)}else r(l,h,n)||(l!==s&&l.push(h),s.push(c))}return s}function fr(t,e){return null==(t=Lo(t,e=wr(e,t)))||delete t[Bo(Qo(e))]}function pr(t,e,n,i){return er(t,e,n(Si(t,e)),i)}function mr(t,e,n,i){for(var r=t.length,o=i?r:-1;(i?o--:++o<r)&&e(t[o],o,t););return n?or(t,i?0:o,i?o+1:r):or(t,i?o+1:0,i?r:o)}function gr(t,e){var n=t;return n instanceof Vn&&(n=n.value()),Ne(e,(function(t,e){return e.func.apply(e.thisArg,Ie([t],e.args))}),n)}function vr(t,e,n){var r=t.length;if(r<2)return r?dr(t[0]):[];for(var o=-1,a=i(r);++o<r;)for(var s=t[o],l=-1;++l<r;)l!=o&&(a[o]=fi(a[o]||s,t[l],e,n));return dr(bi(a,1),e,n)}function yr(t,e,n){for(var i=-1,o=t.length,a=e.length,s={};++i<o;){var l=i<a?e[i]:r;n(s,t[i],l)}return s}function br(t){return $a(t)?t:[]}function _r(t){return"function"==typeof t?t:al}function wr(t,e){return Xa(t)?t:Mo(t,e)?[t]:Fo(ws(t))}var xr=Ji;function Mr(t,e,n){var i=t.length;return n=n===r?i:n,!e&&n>=i?t:or(t,e,n)}var Er=he||function(t){return fe.clearTimeout(t)};function Sr(t,e){if(e)return t.slice();var n=t.length,i=Vt?Vt(n):new t.constructor(n);return t.copy(i),i}function kr(t){var e=new t.constructor(t.byteLength);return new Ut(e).set(new Ut(t)),e}function Cr(t,e){var n=e?kr(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Tr(t,e){if(t!==e){var n=t!==r,i=null===t,o=t==t,a=hs(t),s=e!==r,l=null===e,u=e==e,c=hs(e);if(!l&&!c&&!a&&t>e||a&&s&&u&&!l&&!c||i&&s&&u||!n&&u||!o)return 1;if(!i&&!a&&!c&&t<e||c&&n&&o&&!i&&!a||l&&n&&o||!s&&o||!u)return-1}return 0}function Dr(t,e,n,r){for(var o=-1,a=t.length,s=n.length,l=-1,u=e.length,c=_n(a-s,0),h=i(u+c),d=!r;++l<u;)h[l]=e[l];for(;++o<s;)(d||o<a)&&(h[n[o]]=t[o]);for(;c--;)h[l++]=t[o++];return h}function Lr(t,e,n,r){for(var o=-1,a=t.length,s=-1,l=n.length,u=-1,c=e.length,h=_n(a-l,0),d=i(h+c),f=!r;++o<h;)d[o]=t[o];for(var p=o;++u<c;)d[p+u]=e[u];for(;++s<l;)(f||o<a)&&(d[p+n[s]]=t[o++]);return d}function Ar(t,e){var n=-1,r=t.length;for(e||(e=i(r));++n<r;)e[n]=t[n];return e}function Or(t,e,n,i){var o=!n;n||(n={});for(var a=-1,s=e.length;++a<s;){var l=e[a],u=i?i(n[l],t[l],l,n,t):r;u===r&&(u=t[l]),o?si(n,l,u):ii(n,l,u)}return n}function Pr(t,e){return function(n,i){var r=Xa(n)?ke:oi,o=e?e():{};return r(n,t,co(i,2),o)}}function Ir(t){return Ji((function(e,n){var i=-1,o=n.length,a=o>1?n[o-1]:r,s=o>2?n[2]:r;for(a=t.length>3&&"function"==typeof a?(o--,a):r,s&&xo(n[0],n[1],s)&&(a=o<3?r:a,o=1),e=Ct(e);++i<o;){var l=n[i];l&&t(e,l,i,a)}return e}))}function Nr(t,e){return function(n,i){if(null==n)return n;if(!Ka(n))return t(n,i);for(var r=n.length,o=e?r:-1,a=Ct(n);(e?o--:++o<r)&&!1!==i(a[o],o,a););return n}}function Rr(t){return function(e,n,i){for(var r=-1,o=Ct(e),a=i(e),s=a.length;s--;){var l=a[t?s:++r];if(!1===n(o[l],l,o))break}return e}}function Yr(t){return function(e){var n=sn(e=ws(e))?pn(e):r,i=n?n[0]:e.charAt(0),o=n?Mr(n,1).join(""):e.slice(1);return i[t]()+o}}function jr(t){return function(e){return Ne(tl(Vs(e).replace(Jt,"")),t,"")}}function Fr(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Gn(t.prototype),i=t.apply(n,e);return is(i)?i:n}}function Br(t){return function(e,n,i){var o=Ct(e);if(!Ka(e)){var a=co(n,3);e=Is(e),n=function(t){return a(o[t],t,o)}}var s=t(e,n,i);return s>-1?o[a?e[s]:s]:r}}function zr(t){return ro((function(e){var n=e.length,i=n,a=Un.prototype.thru;for(t&&e.reverse();i--;){var s=e[i];if("function"!=typeof s)throw new Lt(o);if(a&&!l&&"wrapper"==lo(s))var l=new Un([],!0)}for(i=l?i:n;++i<n;){var u=lo(s=e[i]),c="wrapper"==u?so(s):r;l=c&&Eo(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?l[lo(c[0])].apply(l,c[3]):1==s.length&&Eo(s)?l[u]():l.thru(s)}return function(){var t=arguments,i=t[0];if(l&&1==t.length&&Xa(i))return l.plant(i).value();for(var r=0,o=n?e[r].apply(this,t):i;++r<n;)o=e[r].call(this,o);return o}}))}function Hr(t,e,n,o,a,s,l,u,c,d){var f=e&h,p=1&e,m=2&e,g=24&e,v=512&e,y=m?r:Fr(t);return function r(){for(var h=arguments.length,b=i(h),_=h;_--;)b[_]=arguments[_];if(g)var w=uo(r),x=nn(b,w);if(o&&(b=Dr(b,o,a,g)),s&&(b=Lr(b,s,l,g)),h-=x,g&&h<d){var M=cn(b,w);return Kr(t,e,Hr,r.placeholder,n,b,M,u,c,d-h)}var E=p?n:this,S=m?E[t]:t;return h=b.length,u?b=Ao(b,u):v&&h>1&&b.reverse(),f&&c<h&&(b.length=c),this&&this!==fe&&this instanceof r&&(S=y||Fr(S)),S.apply(E,b)}}function Gr(t,e){return function(n,i){return function(t,e,n,i){return xi(t,(function(t,r,o){e(i,n(t),r,o)})),i}(n,t,e(i),{})}}function Wr(t,e){return function(n,i){var o;if(n===r&&i===r)return e;if(n!==r&&(o=n),i!==r){if(o===r)return i;"string"==typeof n||"string"==typeof i?(n=hr(n),i=hr(i)):(n=cr(n),i=cr(i)),o=t(n,i)}return o}}function Ur(t){return ro((function(e){return e=Pe(e,Ze(co())),Ji((function(n){var i=this;return t(e,(function(t){return Se(t,i,n)}))}))}))}function Vr(t,e){var n=(e=e===r?" ":hr(e)).length;if(n<2)return n?Zi(e,t):e;var i=Zi(e,me(t/fn(e)));return sn(e)?Mr(pn(i),0,t).join(""):i.slice(0,t)}function Xr(t){return function(e,n,o){return o&&"number"!=typeof o&&xo(e,n,o)&&(n=o=r),e=gs(e),n===r?(n=e,e=0):n=gs(n),function(t,e,n,r){for(var o=-1,a=_n(me((e-t)/(n||1)),0),s=i(a);a--;)s[r?a:++o]=t,t+=n;return s}(e,n,o=o===r?e<n?1:-1:gs(o),t)}}function qr(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=bs(e),n=bs(n)),t(e,n)}}function Kr(t,e,n,i,o,a,s,l,h,d){var f=8&e;e|=f?u:c,4&(e&=~(f?c:u))||(e&=-4);var p=[t,e,o,f?a:r,f?s:r,f?r:a,f?r:s,l,h,d],m=n.apply(r,p);return Eo(t)&&Po(m,p),m.placeholder=i,Ro(m,t,e)}function $r(t){var e=kt[t];return function(t,n){if(t=bs(t),(n=null==n?0:wn(vs(n),292))&&Ve(t)){var i=(ws(t)+"e").split("e");return+((i=(ws(e(i[0]+"e"+(+i[1]+n)))+"e").split("e"))[0]+"e"+(+i[1]-n))}return e(t)}}var Zr=Dn&&1/hn(new Dn([,-0]))[1]==f?function(t){return new Dn(t)}:hl;function Jr(t){return function(e){var n=vo(e);return n==S?ln(e):n==L?dn(e):function(t,e){return Pe(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Qr(t,e,n,a,f,p,m,g){var v=2&e;if(!v&&"function"!=typeof t)throw new Lt(o);var y=a?a.length:0;if(y||(e&=-97,a=f=r),m=m===r?m:_n(vs(m),0),g=g===r?g:vs(g),y-=f?f.length:0,e&c){var b=a,_=f;a=f=r}var w=v?r:so(t),x=[t,e,n,a,f,b,_,p,m,g];if(w&&function(t,e){var n=t[1],i=e[1],r=n|i,o=r<131,a=i==h&&8==n||i==h&&n==d&&t[7].length<=e[8]||384==i&&e[7].length<=e[8]&&8==n;if(!o&&!a)return t;1&i&&(t[2]=e[2],r|=1&n?0:4);var l=e[3];if(l){var u=t[3];t[3]=u?Dr(u,l,e[4]):l,t[4]=u?cn(t[3],s):e[4]}(l=e[5])&&(u=t[5],t[5]=u?Lr(u,l,e[6]):l,t[6]=u?cn(t[5],s):e[6]);(l=e[7])&&(t[7]=l);i&h&&(t[8]=null==t[8]?e[8]:wn(t[8],e[8]));null==t[9]&&(t[9]=e[9]);t[0]=e[0],t[1]=r}(x,w),t=x[0],e=x[1],n=x[2],a=x[3],f=x[4],!(g=x[9]=x[9]===r?v?0:t.length:_n(x[9]-y,0))&&24&e&&(e&=-25),e&&1!=e)M=8==e||e==l?function(t,e,n){var o=Fr(t);return function a(){for(var s=arguments.length,l=i(s),u=s,c=uo(a);u--;)l[u]=arguments[u];var h=s<3&&l[0]!==c&&l[s-1]!==c?[]:cn(l,c);return(s-=h.length)<n?Kr(t,e,Hr,a.placeholder,r,l,h,r,r,n-s):Se(this&&this!==fe&&this instanceof a?o:t,this,l)}}(t,e,g):e!=u&&33!=e||f.length?Hr.apply(r,x):function(t,e,n,r){var o=1&e,a=Fr(t);return function e(){for(var s=-1,l=arguments.length,u=-1,c=r.length,h=i(c+l),d=this&&this!==fe&&this instanceof e?a:t;++u<c;)h[u]=r[u];for(;l--;)h[u++]=arguments[++s];return Se(d,o?n:this,h)}}(t,e,n,a);else var M=function(t,e,n){var i=1&e,r=Fr(t);return function e(){return(this&&this!==fe&&this instanceof e?r:t).apply(i?n:this,arguments)}}(t,e,n);return Ro((w?nr:Po)(M,x),t,e)}function to(t,e,n,i){return t===r||Ga(t,Pt[n])&&!Rt.call(i,n)?e:t}function eo(t,e,n,i,o,a){return is(t)&&is(e)&&(a.set(e,t),Wi(t,e,r,eo,a),a.delete(e)),t}function no(t){return ss(t)?r:t}function io(t,e,n,i,o,a){var s=1&n,l=t.length,u=e.length;if(l!=u&&!(s&&u>l))return!1;var c=a.get(t),h=a.get(e);if(c&&h)return c==e&&h==t;var d=-1,f=!0,p=2&n?new $n:r;for(a.set(t,e),a.set(e,t);++d<l;){var m=t[d],g=e[d];if(i)var v=s?i(g,m,d,e,t,a):i(m,g,d,t,e,a);if(v!==r){if(v)continue;f=!1;break}if(p){if(!Ye(e,(function(t,e){if(!Qe(p,e)&&(m===t||o(m,t,n,i,a)))return p.push(e)}))){f=!1;break}}else if(m!==g&&!o(m,g,n,i,a)){f=!1;break}}return a.delete(t),a.delete(e),f}function ro(t){return No(Do(t,r,qo),t+"")}function oo(t){return ki(t,Is,mo)}function ao(t){return ki(t,Ns,go)}var so=On?function(t){return On.get(t)}:hl;function lo(t){for(var e=t.name+"",n=Pn[e],i=Rt.call(Pn,e)?n.length:0;i--;){var r=n[i],o=r.func;if(null==o||o==t)return r.name}return e}function uo(t){return(Rt.call(Hn,"placeholder")?Hn:t).placeholder}function co(){var t=Hn.iteratee||sl;return t=t===sl?Yi:t,arguments.length?t(arguments[0],arguments[1]):t}function ho(t,e){var n,i,r=t.__data__;return("string"==(i=typeof(n=e))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?r["string"==typeof e?"string":"hash"]:r.map}function fo(t){for(var e=Is(t),n=e.length;n--;){var i=e[n],r=t[i];e[n]=[i,r,Co(r)]}return e}function po(t,e){var n=function(t,e){return null==t?r:t[e]}(t,e);return Ri(n)?n:r}var mo=ye?function(t){return null==t?[]:(t=Ct(t),Le(ye(t),(function(e){return Kt.call(t,e)})))}:yl,go=ye?function(t){for(var e=[];t;)Ie(e,mo(t)),t=Xt(t);return e}:yl,vo=Ci;function yo(t,e,n){for(var i=-1,r=(e=wr(e,t)).length,o=!1;++i<r;){var a=Bo(e[i]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++i!=r?o:!!(r=null==t?0:t.length)&&ns(r)&&wo(a,r)&&(Xa(t)||Va(t))}function bo(t){return"function"!=typeof t.constructor||ko(t)?{}:Gn(Xt(t))}function _o(t){return Xa(t)||Va(t)||!!(Zt&&t&&t[Zt])}function wo(t,e){var n=typeof t;return!!(e=null==e?p:e)&&("number"==n||"symbol"!=n&&_t.test(t))&&t>-1&&t%1==0&&t<e}function xo(t,e,n){if(!is(n))return!1;var i=typeof e;return!!("number"==i?Ka(n)&&wo(e,n.length):"string"==i&&e in n)&&Ga(n[e],t)}function Mo(t,e){if(Xa(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!hs(t))||(nt.test(t)||!et.test(t)||null!=e&&t in Ct(e))}function Eo(t){var e=lo(t),n=Hn[e];if("function"!=typeof n||!(e in Vn.prototype))return!1;if(t===n)return!0;var i=so(n);return!!i&&t===i[0]}(kn&&vo(new kn(new ArrayBuffer(1)))!=N||Cn&&vo(new Cn)!=S||Tn&&vo(Tn.resolve())!=T||Dn&&vo(new Dn)!=L||Ln&&vo(new Ln)!=P)&&(vo=function(t){var e=Ci(t),n=e==C?t.constructor:r,i=n?zo(n):"";if(i)switch(i){case In:return N;case Nn:return S;case Rn:return T;case Yn:return L;case jn:return P}return e});var So=It?ts:bl;function ko(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Pt)}function Co(t){return t==t&&!is(t)}function To(t,e){return function(n){return null!=n&&(n[t]===e&&(e!==r||t in Ct(n)))}}function Do(t,e,n){return e=_n(e===r?t.length-1:e,0),function(){for(var r=arguments,o=-1,a=_n(r.length-e,0),s=i(a);++o<a;)s[o]=r[e+o];o=-1;for(var l=i(e+1);++o<e;)l[o]=r[o];return l[e]=n(s),Se(t,this,l)}}function Lo(t,e){return e.length<2?t:Si(t,or(e,0,-1))}function Ao(t,e){for(var n=t.length,i=wn(e.length,n),o=Ar(t);i--;){var a=e[i];t[i]=wo(a,n)?o[a]:r}return t}function Oo(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var Po=Yo(nr),Io=pe||function(t,e){return fe.setTimeout(t,e)},No=Yo(ir);function Ro(t,e,n){var i=e+"";return No(t,function(t,e){var n=e.length;if(!n)return t;var i=n-1;return e[i]=(n>1?"& ":"")+e[i],e=e.join(n>2?", ":" "),t.replace(lt,"{\n/* [wrapped with "+e+"] */\n")}(i,function(t,e){return Ce(v,(function(n){var i="_."+n[0];e&n[1]&&!Ae(t,i)&&t.push(i)})),t.sort()}(function(t){var e=t.match(ut);return e?e[1].split(ct):[]}(i),n)))}function Yo(t){var e=0,n=0;return function(){var i=xn(),o=16-(i-n);if(n=i,o>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(r,arguments)}}function jo(t,e){var n=-1,i=t.length,o=i-1;for(e=e===r?i:e;++n<e;){var a=$i(n,o),s=t[a];t[a]=t[n],t[n]=s}return t.length=e,t}var Fo=function(t){var e=Ya(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(it,(function(t,n,i,r){e.push(i?r.replace(ft,"$1"):n||t)})),e}));function Bo(t){if("string"==typeof t||hs(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function zo(t){if(null!=t){try{return Nt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Ho(t){if(t instanceof Vn)return t.clone();var e=new Un(t.__wrapped__,t.__chain__);return e.__actions__=Ar(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Go=Ji((function(t,e){return $a(t)?fi(t,bi(e,1,$a,!0)):[]})),Wo=Ji((function(t,e){var n=Qo(e);return $a(n)&&(n=r),$a(t)?fi(t,bi(e,1,$a,!0),co(n,2)):[]})),Uo=Ji((function(t,e){var n=Qo(e);return $a(n)&&(n=r),$a(t)?fi(t,bi(e,1,$a,!0),r,n):[]}));function Vo(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=null==n?0:vs(n);return r<0&&(r=_n(i+r,0)),Be(t,co(e,3),r)}function Xo(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var o=i-1;return n!==r&&(o=vs(n),o=n<0?_n(i+o,0):wn(o,i-1)),Be(t,co(e,3),o,!0)}function qo(t){return(null==t?0:t.length)?bi(t,1):[]}function Ko(t){return t&&t.length?t[0]:r}var $o=Ji((function(t){var e=Pe(t,br);return e.length&&e[0]===t[0]?Ai(e):[]})),Zo=Ji((function(t){var e=Qo(t),n=Pe(t,br);return e===Qo(n)?e=r:n.pop(),n.length&&n[0]===t[0]?Ai(n,co(e,2)):[]})),Jo=Ji((function(t){var e=Qo(t),n=Pe(t,br);return(e="function"==typeof e?e:r)&&n.pop(),n.length&&n[0]===t[0]?Ai(n,r,e):[]}));function Qo(t){var e=null==t?0:t.length;return e?t[e-1]:r}var ta=Ji(ea);function ea(t,e){return t&&t.length&&e&&e.length?qi(t,e):t}var na=ro((function(t,e){var n=null==t?0:t.length,i=li(t,e);return Ki(t,Pe(e,(function(t){return wo(t,n)?+t:t})).sort(Tr)),i}));function ia(t){return null==t?t:Sn.call(t)}var ra=Ji((function(t){return dr(bi(t,1,$a,!0))})),oa=Ji((function(t){var e=Qo(t);return $a(e)&&(e=r),dr(bi(t,1,$a,!0),co(e,2))})),aa=Ji((function(t){var e=Qo(t);return e="function"==typeof e?e:r,dr(bi(t,1,$a,!0),r,e)}));function sa(t){if(!t||!t.length)return[];var e=0;return t=Le(t,(function(t){if($a(t))return e=_n(t.length,e),!0})),Ke(e,(function(e){return Pe(t,Ue(e))}))}function la(t,e){if(!t||!t.length)return[];var n=sa(t);return null==e?n:Pe(n,(function(t){return Se(e,r,t)}))}var ua=Ji((function(t,e){return $a(t)?fi(t,e):[]})),ca=Ji((function(t){return vr(Le(t,$a))})),ha=Ji((function(t){var e=Qo(t);return $a(e)&&(e=r),vr(Le(t,$a),co(e,2))})),da=Ji((function(t){var e=Qo(t);return e="function"==typeof e?e:r,vr(Le(t,$a),r,e)})),fa=Ji(sa);var pa=Ji((function(t){var e=t.length,n=e>1?t[e-1]:r;return n="function"==typeof n?(t.pop(),n):r,la(t,n)}));function ma(t){var e=Hn(t);return e.__chain__=!0,e}function ga(t,e){return e(t)}var va=ro((function(t){var e=t.length,n=e?t[0]:0,i=this.__wrapped__,o=function(e){return li(e,t)};return!(e>1||this.__actions__.length)&&i instanceof Vn&&wo(n)?((i=i.slice(n,+n+(e?1:0))).__actions__.push({func:ga,args:[o],thisArg:r}),new Un(i,this.__chain__).thru((function(t){return e&&!t.length&&t.push(r),t}))):this.thru(o)}));var ya=Pr((function(t,e,n){Rt.call(t,n)?++t[n]:si(t,n,1)}));var ba=Br(Vo),_a=Br(Xo);function wa(t,e){return(Xa(t)?Ce:pi)(t,co(e,3))}function xa(t,e){return(Xa(t)?Te:mi)(t,co(e,3))}var Ma=Pr((function(t,e,n){Rt.call(t,n)?t[n].push(e):si(t,n,[e])}));var Ea=Ji((function(t,e,n){var r=-1,o="function"==typeof e,a=Ka(t)?i(t.length):[];return pi(t,(function(t){a[++r]=o?Se(e,t,n):Oi(t,e,n)})),a})),Sa=Pr((function(t,e,n){si(t,n,e)}));function ka(t,e){return(Xa(t)?Pe:zi)(t,co(e,3))}var Ca=Pr((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]}));var Ta=Ji((function(t,e){if(null==t)return[];var n=e.length;return n>1&&xo(t,e[0],e[1])?e=[]:n>2&&xo(e[0],e[1],e[2])&&(e=[e[0]]),Vi(t,bi(e,1),[])})),Da=de||function(){return fe.Date.now()};function La(t,e,n){return e=n?r:e,e=t&&null==e?t.length:e,Qr(t,h,r,r,r,r,e)}function Aa(t,e){var n;if("function"!=typeof e)throw new Lt(o);return t=vs(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=r),n}}var Oa=Ji((function(t,e,n){var i=1;if(n.length){var r=cn(n,uo(Oa));i|=u}return Qr(t,i,e,n,r)})),Pa=Ji((function(t,e,n){var i=3;if(n.length){var r=cn(n,uo(Pa));i|=u}return Qr(e,i,t,n,r)}));function Ia(t,e,n){var i,a,s,l,u,c,h=0,d=!1,f=!1,p=!0;if("function"!=typeof t)throw new Lt(o);function m(e){var n=i,o=a;return i=a=r,h=e,l=t.apply(o,n)}function g(t){return h=t,u=Io(y,e),d?m(t):l}function v(t){var n=t-c;return c===r||n>=e||n<0||f&&t-h>=s}function y(){var t=Da();if(v(t))return b(t);u=Io(y,function(t){var n=e-(t-c);return f?wn(n,s-(t-h)):n}(t))}function b(t){return u=r,p&&i?m(t):(i=a=r,l)}function _(){var t=Da(),n=v(t);if(i=arguments,a=this,c=t,n){if(u===r)return g(c);if(f)return Er(u),u=Io(y,e),m(c)}return u===r&&(u=Io(y,e)),l}return e=bs(e)||0,is(n)&&(d=!!n.leading,s=(f="maxWait"in n)?_n(bs(n.maxWait)||0,e):s,p="trailing"in n?!!n.trailing:p),_.cancel=function(){u!==r&&Er(u),h=0,i=c=a=u=r},_.flush=function(){return u===r?l:b(Da())},_}var Na=Ji((function(t,e){return di(t,1,e)})),Ra=Ji((function(t,e,n){return di(t,bs(e)||0,n)}));function Ya(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new Lt(o);var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var a=t.apply(this,i);return n.cache=o.set(r,a)||o,a};return n.cache=new(Ya.Cache||Kn),n}function ja(t){if("function"!=typeof t)throw new Lt(o);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}Ya.Cache=Kn;var Fa=xr((function(t,e){var n=(e=1==e.length&&Xa(e[0])?Pe(e[0],Ze(co())):Pe(bi(e,1),Ze(co()))).length;return Ji((function(i){for(var r=-1,o=wn(i.length,n);++r<o;)i[r]=e[r].call(this,i[r]);return Se(t,this,i)}))})),Ba=Ji((function(t,e){var n=cn(e,uo(Ba));return Qr(t,u,r,e,n)})),za=Ji((function(t,e){var n=cn(e,uo(za));return Qr(t,c,r,e,n)})),Ha=ro((function(t,e){return Qr(t,d,r,r,r,e)}));function Ga(t,e){return t===e||t!=t&&e!=e}var Wa=qr(Ti),Ua=qr((function(t,e){return t>=e})),Va=Pi(function(){return arguments}())?Pi:function(t){return rs(t)&&Rt.call(t,"callee")&&!Kt.call(t,"callee")},Xa=i.isArray,qa=be?Ze(be):function(t){return rs(t)&&Ci(t)==I};function Ka(t){return null!=t&&ns(t.length)&&!ts(t)}function $a(t){return rs(t)&&Ka(t)}var Za=je||bl,Ja=_e?Ze(_e):function(t){return rs(t)&&Ci(t)==w};function Qa(t){if(!rs(t))return!1;var e=Ci(t);return e==x||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!ss(t)}function ts(t){if(!is(t))return!1;var e=Ci(t);return e==M||e==E||"[object AsyncFunction]"==e||"[object Proxy]"==e}function es(t){return"number"==typeof t&&t==vs(t)}function ns(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=p}function is(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function rs(t){return null!=t&&"object"==typeof t}var os=we?Ze(we):function(t){return rs(t)&&vo(t)==S};function as(t){return"number"==typeof t||rs(t)&&Ci(t)==k}function ss(t){if(!rs(t)||Ci(t)!=C)return!1;var e=Xt(t);if(null===e)return!0;var n=Rt.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Nt.call(n)==Bt}var ls=xe?Ze(xe):function(t){return rs(t)&&Ci(t)==D};var us=Me?Ze(Me):function(t){return rs(t)&&vo(t)==L};function cs(t){return"string"==typeof t||!Xa(t)&&rs(t)&&Ci(t)==A}function hs(t){return"symbol"==typeof t||rs(t)&&Ci(t)==O}var ds=Ee?Ze(Ee):function(t){return rs(t)&&ns(t.length)&&!!ae[Ci(t)]};var fs=qr(Bi),ps=qr((function(t,e){return t<=e}));function ms(t){if(!t)return[];if(Ka(t))return cs(t)?pn(t):Ar(t);if(te&&t[te])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[te]());var e=vo(t);return(e==S?ln:e==L?hn:Gs)(t)}function gs(t){return t?(t=bs(t))===f||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function vs(t){var e=gs(t),n=e%1;return e==e?n?e-n:e:0}function ys(t){return t?ui(vs(t),0,g):0}function bs(t){if("number"==typeof t)return t;if(hs(t))return m;if(is(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=is(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=$e(t);var n=vt.test(t);return n||bt.test(t)?ce(t.slice(2),n?2:8):gt.test(t)?m:+t}function _s(t){return Or(t,Ns(t))}function ws(t){return null==t?"":hr(t)}var xs=Ir((function(t,e){if(ko(e)||Ka(e))Or(e,Is(e),t);else for(var n in e)Rt.call(e,n)&&ii(t,n,e[n])})),Ms=Ir((function(t,e){Or(e,Ns(e),t)})),Es=Ir((function(t,e,n,i){Or(e,Ns(e),t,i)})),Ss=Ir((function(t,e,n,i){Or(e,Is(e),t,i)})),ks=ro(li);var Cs=Ji((function(t,e){t=Ct(t);var n=-1,i=e.length,o=i>2?e[2]:r;for(o&&xo(e[0],e[1],o)&&(i=1);++n<i;)for(var a=e[n],s=Ns(a),l=-1,u=s.length;++l<u;){var c=s[l],h=t[c];(h===r||Ga(h,Pt[c])&&!Rt.call(t,c))&&(t[c]=a[c])}return t})),Ts=Ji((function(t){return t.push(r,eo),Se(Ys,r,t)}));function Ds(t,e,n){var i=null==t?r:Si(t,e);return i===r?n:i}function Ls(t,e){return null!=t&&yo(t,e,Li)}var As=Gr((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Ft.call(e)),t[e]=n}),il(al)),Os=Gr((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Ft.call(e)),Rt.call(t,e)?t[e].push(n):t[e]=[n]}),co),Ps=Ji(Oi);function Is(t){return Ka(t)?Jn(t):ji(t)}function Ns(t){return Ka(t)?Jn(t,!0):Fi(t)}var Rs=Ir((function(t,e,n){Wi(t,e,n)})),Ys=Ir((function(t,e,n,i){Wi(t,e,n,i)})),js=ro((function(t,e){var n={};if(null==t)return n;var i=!1;e=Pe(e,(function(e){return e=wr(e,t),i||(i=e.length>1),e})),Or(t,ao(t),n),i&&(n=ci(n,7,no));for(var r=e.length;r--;)fr(n,e[r]);return n}));var Fs=ro((function(t,e){return null==t?{}:function(t,e){return Xi(t,e,(function(e,n){return Ls(t,n)}))}(t,e)}));function Bs(t,e){if(null==t)return{};var n=Pe(ao(t),(function(t){return[t]}));return e=co(e),Xi(t,n,(function(t,n){return e(t,n[0])}))}var zs=Jr(Is),Hs=Jr(Ns);function Gs(t){return null==t?[]:Je(t,Is(t))}var Ws=jr((function(t,e,n){return e=e.toLowerCase(),t+(n?Us(e):e)}));function Us(t){return Qs(ws(t).toLowerCase())}function Vs(t){return(t=ws(t))&&t.replace(wt,rn).replace(Qt,"")}var Xs=jr((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),qs=jr((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),Ks=Yr("toLowerCase");var $s=jr((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}));var Zs=jr((function(t,e,n){return t+(n?" ":"")+Qs(e)}));var Js=jr((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),Qs=Yr("toUpperCase");function tl(t,e,n){return t=ws(t),(e=n?r:e)===r?function(t){return ie.test(t)}(t)?function(t){return t.match(ee)||[]}(t):function(t){return t.match(ht)||[]}(t):t.match(e)||[]}var el=Ji((function(t,e){try{return Se(t,r,e)}catch(t){return Qa(t)?t:new Et(t)}})),nl=ro((function(t,e){return Ce(e,(function(e){e=Bo(e),si(t,e,Oa(t[e],t))})),t}));function il(t){return function(){return t}}var rl=zr(),ol=zr(!0);function al(t){return t}function sl(t){return Yi("function"==typeof t?t:ci(t,1))}var ll=Ji((function(t,e){return function(n){return Oi(n,t,e)}})),ul=Ji((function(t,e){return function(n){return Oi(t,n,e)}}));function cl(t,e,n){var i=Is(e),r=Ei(e,i);null!=n||is(e)&&(r.length||!i.length)||(n=e,e=t,t=this,r=Ei(e,Is(e)));var o=!(is(n)&&"chain"in n&&!n.chain),a=ts(t);return Ce(r,(function(n){var i=e[n];t[n]=i,a&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__),r=n.__actions__=Ar(this.__actions__);return r.push({func:i,args:arguments,thisArg:t}),n.__chain__=e,n}return i.apply(t,Ie([this.value()],arguments))})})),t}function hl(){}var dl=Ur(Pe),fl=Ur(De),pl=Ur(Ye);function ml(t){return Mo(t)?Ue(Bo(t)):function(t){return function(e){return Si(e,t)}}(t)}var gl=Xr(),vl=Xr(!0);function yl(){return[]}function bl(){return!1}var _l=Wr((function(t,e){return t+e}),0),wl=$r("ceil"),xl=Wr((function(t,e){return t/e}),1),Ml=$r("floor");var El,Sl=Wr((function(t,e){return t*e}),1),kl=$r("round"),Cl=Wr((function(t,e){return t-e}),0);return Hn.after=function(t,e){if("function"!=typeof e)throw new Lt(o);return t=vs(t),function(){if(--t<1)return e.apply(this,arguments)}},Hn.ary=La,Hn.assign=xs,Hn.assignIn=Ms,Hn.assignInWith=Es,Hn.assignWith=Ss,Hn.at=ks,Hn.before=Aa,Hn.bind=Oa,Hn.bindAll=nl,Hn.bindKey=Pa,Hn.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Xa(t)?t:[t]},Hn.chain=ma,Hn.chunk=function(t,e,n){e=(n?xo(t,e,n):e===r)?1:_n(vs(e),0);var o=null==t?0:t.length;if(!o||e<1)return[];for(var a=0,s=0,l=i(me(o/e));a<o;)l[s++]=or(t,a,a+=e);return l},Hn.compact=function(t){for(var e=-1,n=null==t?0:t.length,i=0,r=[];++e<n;){var o=t[e];o&&(r[i++]=o)}return r},Hn.concat=function(){var t=arguments.length;if(!t)return[];for(var e=i(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return Ie(Xa(n)?Ar(n):[n],bi(e,1))},Hn.cond=function(t){var e=null==t?0:t.length,n=co();return t=e?Pe(t,(function(t){if("function"!=typeof t[1])throw new Lt(o);return[n(t[0]),t[1]]})):[],Ji((function(n){for(var i=-1;++i<e;){var r=t[i];if(Se(r[0],this,n))return Se(r[1],this,n)}}))},Hn.conforms=function(t){return function(t){var e=Is(t);return function(n){return hi(n,t,e)}}(ci(t,1))},Hn.constant=il,Hn.countBy=ya,Hn.create=function(t,e){var n=Gn(t);return null==e?n:ai(n,e)},Hn.curry=function t(e,n,i){var o=Qr(e,8,r,r,r,r,r,n=i?r:n);return o.placeholder=t.placeholder,o},Hn.curryRight=function t(e,n,i){var o=Qr(e,l,r,r,r,r,r,n=i?r:n);return o.placeholder=t.placeholder,o},Hn.debounce=Ia,Hn.defaults=Cs,Hn.defaultsDeep=Ts,Hn.defer=Na,Hn.delay=Ra,Hn.difference=Go,Hn.differenceBy=Wo,Hn.differenceWith=Uo,Hn.drop=function(t,e,n){var i=null==t?0:t.length;return i?or(t,(e=n||e===r?1:vs(e))<0?0:e,i):[]},Hn.dropRight=function(t,e,n){var i=null==t?0:t.length;return i?or(t,0,(e=i-(e=n||e===r?1:vs(e)))<0?0:e):[]},Hn.dropRightWhile=function(t,e){return t&&t.length?mr(t,co(e,3),!0,!0):[]},Hn.dropWhile=function(t,e){return t&&t.length?mr(t,co(e,3),!0):[]},Hn.fill=function(t,e,n,i){var o=null==t?0:t.length;return o?(n&&"number"!=typeof n&&xo(t,e,n)&&(n=0,i=o),function(t,e,n,i){var o=t.length;for((n=vs(n))<0&&(n=-n>o?0:o+n),(i=i===r||i>o?o:vs(i))<0&&(i+=o),i=n>i?0:ys(i);n<i;)t[n++]=e;return t}(t,e,n,i)):[]},Hn.filter=function(t,e){return(Xa(t)?Le:yi)(t,co(e,3))},Hn.flatMap=function(t,e){return bi(ka(t,e),1)},Hn.flatMapDeep=function(t,e){return bi(ka(t,e),f)},Hn.flatMapDepth=function(t,e,n){return n=n===r?1:vs(n),bi(ka(t,e),n)},Hn.flatten=qo,Hn.flattenDeep=function(t){return(null==t?0:t.length)?bi(t,f):[]},Hn.flattenDepth=function(t,e){return(null==t?0:t.length)?bi(t,e=e===r?1:vs(e)):[]},Hn.flip=function(t){return Qr(t,512)},Hn.flow=rl,Hn.flowRight=ol,Hn.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,i={};++e<n;){var r=t[e];i[r[0]]=r[1]}return i},Hn.functions=function(t){return null==t?[]:Ei(t,Is(t))},Hn.functionsIn=function(t){return null==t?[]:Ei(t,Ns(t))},Hn.groupBy=Ma,Hn.initial=function(t){return(null==t?0:t.length)?or(t,0,-1):[]},Hn.intersection=$o,Hn.intersectionBy=Zo,Hn.intersectionWith=Jo,Hn.invert=As,Hn.invertBy=Os,Hn.invokeMap=Ea,Hn.iteratee=sl,Hn.keyBy=Sa,Hn.keys=Is,Hn.keysIn=Ns,Hn.map=ka,Hn.mapKeys=function(t,e){var n={};return e=co(e,3),xi(t,(function(t,i,r){si(n,e(t,i,r),t)})),n},Hn.mapValues=function(t,e){var n={};return e=co(e,3),xi(t,(function(t,i,r){si(n,i,e(t,i,r))})),n},Hn.matches=function(t){return Hi(ci(t,1))},Hn.matchesProperty=function(t,e){return Gi(t,ci(e,1))},Hn.memoize=Ya,Hn.merge=Rs,Hn.mergeWith=Ys,Hn.method=ll,Hn.methodOf=ul,Hn.mixin=cl,Hn.negate=ja,Hn.nthArg=function(t){return t=vs(t),Ji((function(e){return Ui(e,t)}))},Hn.omit=js,Hn.omitBy=function(t,e){return Bs(t,ja(co(e)))},Hn.once=function(t){return Aa(2,t)},Hn.orderBy=function(t,e,n,i){return null==t?[]:(Xa(e)||(e=null==e?[]:[e]),Xa(n=i?r:n)||(n=null==n?[]:[n]),Vi(t,e,n))},Hn.over=dl,Hn.overArgs=Fa,Hn.overEvery=fl,Hn.overSome=pl,Hn.partial=Ba,Hn.partialRight=za,Hn.partition=Ca,Hn.pick=Fs,Hn.pickBy=Bs,Hn.property=ml,Hn.propertyOf=function(t){return function(e){return null==t?r:Si(t,e)}},Hn.pull=ta,Hn.pullAll=ea,Hn.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?qi(t,e,co(n,2)):t},Hn.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?qi(t,e,r,n):t},Hn.pullAt=na,Hn.range=gl,Hn.rangeRight=vl,Hn.rearg=Ha,Hn.reject=function(t,e){return(Xa(t)?Le:yi)(t,ja(co(e,3)))},Hn.remove=function(t,e){var n=[];if(!t||!t.length)return n;var i=-1,r=[],o=t.length;for(e=co(e,3);++i<o;){var a=t[i];e(a,i,t)&&(n.push(a),r.push(i))}return Ki(t,r),n},Hn.rest=function(t,e){if("function"!=typeof t)throw new Lt(o);return Ji(t,e=e===r?e:vs(e))},Hn.reverse=ia,Hn.sampleSize=function(t,e,n){return e=(n?xo(t,e,n):e===r)?1:vs(e),(Xa(t)?ti:tr)(t,e)},Hn.set=function(t,e,n){return null==t?t:er(t,e,n)},Hn.setWith=function(t,e,n,i){return i="function"==typeof i?i:r,null==t?t:er(t,e,n,i)},Hn.shuffle=function(t){return(Xa(t)?ei:rr)(t)},Hn.slice=function(t,e,n){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&xo(t,e,n)?(e=0,n=i):(e=null==e?0:vs(e),n=n===r?i:vs(n)),or(t,e,n)):[]},Hn.sortBy=Ta,Hn.sortedUniq=function(t){return t&&t.length?ur(t):[]},Hn.sortedUniqBy=function(t,e){return t&&t.length?ur(t,co(e,2)):[]},Hn.split=function(t,e,n){return n&&"number"!=typeof n&&xo(t,e,n)&&(e=n=r),(n=n===r?g:n>>>0)?(t=ws(t))&&("string"==typeof e||null!=e&&!ls(e))&&!(e=hr(e))&&sn(t)?Mr(pn(t),0,n):t.split(e,n):[]},Hn.spread=function(t,e){if("function"!=typeof t)throw new Lt(o);return e=null==e?0:_n(vs(e),0),Ji((function(n){var i=n[e],r=Mr(n,0,e);return i&&Ie(r,i),Se(t,this,r)}))},Hn.tail=function(t){var e=null==t?0:t.length;return e?or(t,1,e):[]},Hn.take=function(t,e,n){return t&&t.length?or(t,0,(e=n||e===r?1:vs(e))<0?0:e):[]},Hn.takeRight=function(t,e,n){var i=null==t?0:t.length;return i?or(t,(e=i-(e=n||e===r?1:vs(e)))<0?0:e,i):[]},Hn.takeRightWhile=function(t,e){return t&&t.length?mr(t,co(e,3),!1,!0):[]},Hn.takeWhile=function(t,e){return t&&t.length?mr(t,co(e,3)):[]},Hn.tap=function(t,e){return e(t),t},Hn.throttle=function(t,e,n){var i=!0,r=!0;if("function"!=typeof t)throw new Lt(o);return is(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),Ia(t,e,{leading:i,maxWait:e,trailing:r})},Hn.thru=ga,Hn.toArray=ms,Hn.toPairs=zs,Hn.toPairsIn=Hs,Hn.toPath=function(t){return Xa(t)?Pe(t,Bo):hs(t)?[t]:Ar(Fo(ws(t)))},Hn.toPlainObject=_s,Hn.transform=function(t,e,n){var i=Xa(t),r=i||Za(t)||ds(t);if(e=co(e,4),null==n){var o=t&&t.constructor;n=r?i?new o:[]:is(t)&&ts(o)?Gn(Xt(t)):{}}return(r?Ce:xi)(t,(function(t,i,r){return e(n,t,i,r)})),n},Hn.unary=function(t){return La(t,1)},Hn.union=ra,Hn.unionBy=oa,Hn.unionWith=aa,Hn.uniq=function(t){return t&&t.length?dr(t):[]},Hn.uniqBy=function(t,e){return t&&t.length?dr(t,co(e,2)):[]},Hn.uniqWith=function(t,e){return e="function"==typeof e?e:r,t&&t.length?dr(t,r,e):[]},Hn.unset=function(t,e){return null==t||fr(t,e)},Hn.unzip=sa,Hn.unzipWith=la,Hn.update=function(t,e,n){return null==t?t:pr(t,e,_r(n))},Hn.updateWith=function(t,e,n,i){return i="function"==typeof i?i:r,null==t?t:pr(t,e,_r(n),i)},Hn.values=Gs,Hn.valuesIn=function(t){return null==t?[]:Je(t,Ns(t))},Hn.without=ua,Hn.words=tl,Hn.wrap=function(t,e){return Ba(_r(e),t)},Hn.xor=ca,Hn.xorBy=ha,Hn.xorWith=da,Hn.zip=fa,Hn.zipObject=function(t,e){return yr(t||[],e||[],ii)},Hn.zipObjectDeep=function(t,e){return yr(t||[],e||[],er)},Hn.zipWith=pa,Hn.entries=zs,Hn.entriesIn=Hs,Hn.extend=Ms,Hn.extendWith=Es,cl(Hn,Hn),Hn.add=_l,Hn.attempt=el,Hn.camelCase=Ws,Hn.capitalize=Us,Hn.ceil=wl,Hn.clamp=function(t,e,n){return n===r&&(n=e,e=r),n!==r&&(n=(n=bs(n))==n?n:0),e!==r&&(e=(e=bs(e))==e?e:0),ui(bs(t),e,n)},Hn.clone=function(t){return ci(t,4)},Hn.cloneDeep=function(t){return ci(t,5)},Hn.cloneDeepWith=function(t,e){return ci(t,5,e="function"==typeof e?e:r)},Hn.cloneWith=function(t,e){return ci(t,4,e="function"==typeof e?e:r)},Hn.conformsTo=function(t,e){return null==e||hi(t,e,Is(e))},Hn.deburr=Vs,Hn.defaultTo=function(t,e){return null==t||t!=t?e:t},Hn.divide=xl,Hn.endsWith=function(t,e,n){t=ws(t),e=hr(e);var i=t.length,o=n=n===r?i:ui(vs(n),0,i);return(n-=e.length)>=0&&t.slice(n,o)==e},Hn.eq=Ga,Hn.escape=function(t){return(t=ws(t))&&Z.test(t)?t.replace(K,on):t},Hn.escapeRegExp=function(t){return(t=ws(t))&&ot.test(t)?t.replace(rt,"\\$&"):t},Hn.every=function(t,e,n){var i=Xa(t)?De:gi;return n&&xo(t,e,n)&&(e=r),i(t,co(e,3))},Hn.find=ba,Hn.findIndex=Vo,Hn.findKey=function(t,e){return Fe(t,co(e,3),xi)},Hn.findLast=_a,Hn.findLastIndex=Xo,Hn.findLastKey=function(t,e){return Fe(t,co(e,3),Mi)},Hn.floor=Ml,Hn.forEach=wa,Hn.forEachRight=xa,Hn.forIn=function(t,e){return null==t?t:_i(t,co(e,3),Ns)},Hn.forInRight=function(t,e){return null==t?t:wi(t,co(e,3),Ns)},Hn.forOwn=function(t,e){return t&&xi(t,co(e,3))},Hn.forOwnRight=function(t,e){return t&&Mi(t,co(e,3))},Hn.get=Ds,Hn.gt=Wa,Hn.gte=Ua,Hn.has=function(t,e){return null!=t&&yo(t,e,Di)},Hn.hasIn=Ls,Hn.head=Ko,Hn.identity=al,Hn.includes=function(t,e,n,i){t=Ka(t)?t:Gs(t),n=n&&!i?vs(n):0;var r=t.length;return n<0&&(n=_n(r+n,0)),cs(t)?n<=r&&t.indexOf(e,n)>-1:!!r&&ze(t,e,n)>-1},Hn.indexOf=function(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=null==n?0:vs(n);return r<0&&(r=_n(i+r,0)),ze(t,e,r)},Hn.inRange=function(t,e,n){return e=gs(e),n===r?(n=e,e=0):n=gs(n),function(t,e,n){return t>=wn(e,n)&&t<_n(e,n)}(t=bs(t),e,n)},Hn.invoke=Ps,Hn.isArguments=Va,Hn.isArray=Xa,Hn.isArrayBuffer=qa,Hn.isArrayLike=Ka,Hn.isArrayLikeObject=$a,Hn.isBoolean=function(t){return!0===t||!1===t||rs(t)&&Ci(t)==_},Hn.isBuffer=Za,Hn.isDate=Ja,Hn.isElement=function(t){return rs(t)&&1===t.nodeType&&!ss(t)},Hn.isEmpty=function(t){if(null==t)return!0;if(Ka(t)&&(Xa(t)||"string"==typeof t||"function"==typeof t.splice||Za(t)||ds(t)||Va(t)))return!t.length;var e=vo(t);if(e==S||e==L)return!t.size;if(ko(t))return!ji(t).length;for(var n in t)if(Rt.call(t,n))return!1;return!0},Hn.isEqual=function(t,e){return Ii(t,e)},Hn.isEqualWith=function(t,e,n){var i=(n="function"==typeof n?n:r)?n(t,e):r;return i===r?Ii(t,e,r,n):!!i},Hn.isError=Qa,Hn.isFinite=function(t){return"number"==typeof t&&Ve(t)},Hn.isFunction=ts,Hn.isInteger=es,Hn.isLength=ns,Hn.isMap=os,Hn.isMatch=function(t,e){return t===e||Ni(t,e,fo(e))},Hn.isMatchWith=function(t,e,n){return n="function"==typeof n?n:r,Ni(t,e,fo(e),n)},Hn.isNaN=function(t){return as(t)&&t!=+t},Hn.isNative=function(t){if(So(t))throw new Et("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Ri(t)},Hn.isNil=function(t){return null==t},Hn.isNull=function(t){return null===t},Hn.isNumber=as,Hn.isObject=is,Hn.isObjectLike=rs,Hn.isPlainObject=ss,Hn.isRegExp=ls,Hn.isSafeInteger=function(t){return es(t)&&t>=-9007199254740991&&t<=p},Hn.isSet=us,Hn.isString=cs,Hn.isSymbol=hs,Hn.isTypedArray=ds,Hn.isUndefined=function(t){return t===r},Hn.isWeakMap=function(t){return rs(t)&&vo(t)==P},Hn.isWeakSet=function(t){return rs(t)&&"[object WeakSet]"==Ci(t)},Hn.join=function(t,e){return null==t?"":yn.call(t,e)},Hn.kebabCase=Xs,Hn.last=Qo,Hn.lastIndexOf=function(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var o=i;return n!==r&&(o=(o=vs(n))<0?_n(i+o,0):wn(o,i-1)),e==e?function(t,e,n){for(var i=n+1;i--;)if(t[i]===e)return i;return i}(t,e,o):Be(t,Ge,o,!0)},Hn.lowerCase=qs,Hn.lowerFirst=Ks,Hn.lt=fs,Hn.lte=ps,Hn.max=function(t){return t&&t.length?vi(t,al,Ti):r},Hn.maxBy=function(t,e){return t&&t.length?vi(t,co(e,2),Ti):r},Hn.mean=function(t){return We(t,al)},Hn.meanBy=function(t,e){return We(t,co(e,2))},Hn.min=function(t){return t&&t.length?vi(t,al,Bi):r},Hn.minBy=function(t,e){return t&&t.length?vi(t,co(e,2),Bi):r},Hn.stubArray=yl,Hn.stubFalse=bl,Hn.stubObject=function(){return{}},Hn.stubString=function(){return""},Hn.stubTrue=function(){return!0},Hn.multiply=Sl,Hn.nth=function(t,e){return t&&t.length?Ui(t,vs(e)):r},Hn.noConflict=function(){return fe._===this&&(fe._=zt),this},Hn.noop=hl,Hn.now=Da,Hn.pad=function(t,e,n){t=ws(t);var i=(e=vs(e))?fn(t):0;if(!e||i>=e)return t;var r=(e-i)/2;return Vr(ve(r),n)+t+Vr(me(r),n)},Hn.padEnd=function(t,e,n){t=ws(t);var i=(e=vs(e))?fn(t):0;return e&&i<e?t+Vr(e-i,n):t},Hn.padStart=function(t,e,n){t=ws(t);var i=(e=vs(e))?fn(t):0;return e&&i<e?Vr(e-i,n)+t:t},Hn.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),Mn(ws(t).replace(at,""),e||0)},Hn.random=function(t,e,n){if(n&&"boolean"!=typeof n&&xo(t,e,n)&&(e=n=r),n===r&&("boolean"==typeof e?(n=e,e=r):"boolean"==typeof t&&(n=t,t=r)),t===r&&e===r?(t=0,e=1):(t=gs(t),e===r?(e=t,t=0):e=gs(e)),t>e){var i=t;t=e,e=i}if(n||t%1||e%1){var o=En();return wn(t+o*(e-t+ue("1e-"+((o+"").length-1))),e)}return $i(t,e)},Hn.reduce=function(t,e,n){var i=Xa(t)?Ne:Xe,r=arguments.length<3;return i(t,co(e,4),n,r,pi)},Hn.reduceRight=function(t,e,n){var i=Xa(t)?Re:Xe,r=arguments.length<3;return i(t,co(e,4),n,r,mi)},Hn.repeat=function(t,e,n){return e=(n?xo(t,e,n):e===r)?1:vs(e),Zi(ws(t),e)},Hn.replace=function(){var t=arguments,e=ws(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Hn.result=function(t,e,n){var i=-1,o=(e=wr(e,t)).length;for(o||(o=1,t=r);++i<o;){var a=null==t?r:t[Bo(e[i])];a===r&&(i=o,a=n),t=ts(a)?a.call(t):a}return t},Hn.round=kl,Hn.runInContext=t,Hn.sample=function(t){return(Xa(t)?Qn:Qi)(t)},Hn.size=function(t){if(null==t)return 0;if(Ka(t))return cs(t)?fn(t):t.length;var e=vo(t);return e==S||e==L?t.size:ji(t).length},Hn.snakeCase=$s,Hn.some=function(t,e,n){var i=Xa(t)?Ye:ar;return n&&xo(t,e,n)&&(e=r),i(t,co(e,3))},Hn.sortedIndex=function(t,e){return sr(t,e)},Hn.sortedIndexBy=function(t,e,n){return lr(t,e,co(n,2))},Hn.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var i=sr(t,e);if(i<n&&Ga(t[i],e))return i}return-1},Hn.sortedLastIndex=function(t,e){return sr(t,e,!0)},Hn.sortedLastIndexBy=function(t,e,n){return lr(t,e,co(n,2),!0)},Hn.sortedLastIndexOf=function(t,e){if(null==t?0:t.length){var n=sr(t,e,!0)-1;if(Ga(t[n],e))return n}return-1},Hn.startCase=Zs,Hn.startsWith=function(t,e,n){return t=ws(t),n=null==n?0:ui(vs(n),0,t.length),e=hr(e),t.slice(n,n+e.length)==e},Hn.subtract=Cl,Hn.sum=function(t){return t&&t.length?qe(t,al):0},Hn.sumBy=function(t,e){return t&&t.length?qe(t,co(e,2)):0},Hn.template=function(t,e,n){var i=Hn.templateSettings;n&&xo(t,e,n)&&(e=r),t=ws(t),e=Es({},e,i,to);var o,a,s=Es({},e.imports,i.imports,to),l=Is(s),u=Je(s,l),c=0,h=e.interpolate||xt,d="__p += '",f=Tt((e.escape||xt).source+"|"+h.source+"|"+(h===tt?pt:xt).source+"|"+(e.evaluate||xt).source+"|$","g"),p="//# sourceURL="+(Rt.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++oe+"]")+"\n";t.replace(f,(function(e,n,i,r,s,l){return i||(i=r),d+=t.slice(c,l).replace(Mt,an),n&&(o=!0,d+="' +\n__e("+n+") +\n'"),s&&(a=!0,d+="';\n"+s+";\n__p += '"),i&&(d+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),c=l+e.length,e})),d+="';\n";var m=Rt.call(e,"variable")&&e.variable;if(m){if(dt.test(m))throw new Et("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(a?d.replace(U,""):d).replace(V,"$1").replace(X,"$1;"),d="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var g=el((function(){return St(l,p+"return "+d).apply(r,u)}));if(g.source=d,Qa(g))throw g;return g},Hn.times=function(t,e){if((t=vs(t))<1||t>p)return[];var n=g,i=wn(t,g);e=co(e),t-=g;for(var r=Ke(i,e);++n<t;)e(n);return r},Hn.toFinite=gs,Hn.toInteger=vs,Hn.toLength=ys,Hn.toLower=function(t){return ws(t).toLowerCase()},Hn.toNumber=bs,Hn.toSafeInteger=function(t){return t?ui(vs(t),-9007199254740991,p):0===t?t:0},Hn.toString=ws,Hn.toUpper=function(t){return ws(t).toUpperCase()},Hn.trim=function(t,e,n){if((t=ws(t))&&(n||e===r))return $e(t);if(!t||!(e=hr(e)))return t;var i=pn(t),o=pn(e);return Mr(i,tn(i,o),en(i,o)+1).join("")},Hn.trimEnd=function(t,e,n){if((t=ws(t))&&(n||e===r))return t.slice(0,mn(t)+1);if(!t||!(e=hr(e)))return t;var i=pn(t);return Mr(i,0,en(i,pn(e))+1).join("")},Hn.trimStart=function(t,e,n){if((t=ws(t))&&(n||e===r))return t.replace(at,"");if(!t||!(e=hr(e)))return t;var i=pn(t);return Mr(i,tn(i,pn(e))).join("")},Hn.truncate=function(t,e){var n=30,i="...";if(is(e)){var o="separator"in e?e.separator:o;n="length"in e?vs(e.length):n,i="omission"in e?hr(e.omission):i}var a=(t=ws(t)).length;if(sn(t)){var s=pn(t);a=s.length}if(n>=a)return t;var l=n-fn(i);if(l<1)return i;var u=s?Mr(s,0,l).join(""):t.slice(0,l);if(o===r)return u+i;if(s&&(l+=u.length-l),ls(o)){if(t.slice(l).search(o)){var c,h=u;for(o.global||(o=Tt(o.source,ws(mt.exec(o))+"g")),o.lastIndex=0;c=o.exec(h);)var d=c.index;u=u.slice(0,d===r?l:d)}}else if(t.indexOf(hr(o),l)!=l){var f=u.lastIndexOf(o);f>-1&&(u=u.slice(0,f))}return u+i},Hn.unescape=function(t){return(t=ws(t))&&$.test(t)?t.replace(q,gn):t},Hn.uniqueId=function(t){var e=++Yt;return ws(t)+e},Hn.upperCase=Js,Hn.upperFirst=Qs,Hn.each=wa,Hn.eachRight=xa,Hn.first=Ko,cl(Hn,(El={},xi(Hn,(function(t,e){Rt.call(Hn.prototype,e)||(El[e]=t)})),El),{chain:!1}),Hn.VERSION="4.17.21",Ce(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){Hn[t].placeholder=Hn})),Ce(["drop","take"],(function(t,e){Vn.prototype[t]=function(n){n=n===r?1:_n(vs(n),0);var i=this.__filtered__&&!e?new Vn(this):this.clone();return i.__filtered__?i.__takeCount__=wn(n,i.__takeCount__):i.__views__.push({size:wn(n,g),type:t+(i.__dir__<0?"Right":"")}),i},Vn.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),Ce(["filter","map","takeWhile"],(function(t,e){var n=e+1,i=1==n||3==n;Vn.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:co(t,3),type:n}),e.__filtered__=e.__filtered__||i,e}})),Ce(["head","last"],(function(t,e){var n="take"+(e?"Right":"");Vn.prototype[t]=function(){return this[n](1).value()[0]}})),Ce(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");Vn.prototype[t]=function(){return this.__filtered__?new Vn(this):this[n](1)}})),Vn.prototype.compact=function(){return this.filter(al)},Vn.prototype.find=function(t){return this.filter(t).head()},Vn.prototype.findLast=function(t){return this.reverse().find(t)},Vn.prototype.invokeMap=Ji((function(t,e){return"function"==typeof t?new Vn(this):this.map((function(n){return Oi(n,t,e)}))})),Vn.prototype.reject=function(t){return this.filter(ja(co(t)))},Vn.prototype.slice=function(t,e){t=vs(t);var n=this;return n.__filtered__&&(t>0||e<0)?new Vn(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==r&&(n=(e=vs(e))<0?n.dropRight(-e):n.take(e-t)),n)},Vn.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Vn.prototype.toArray=function(){return this.take(g)},xi(Vn.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),i=/^(?:head|last)$/.test(e),o=Hn[i?"take"+("last"==e?"Right":""):e],a=i||/^find/.test(e);o&&(Hn.prototype[e]=function(){var e=this.__wrapped__,s=i?[1]:arguments,l=e instanceof Vn,u=s[0],c=l||Xa(e),h=function(t){var e=o.apply(Hn,Ie([t],s));return i&&d?e[0]:e};c&&n&&"function"==typeof u&&1!=u.length&&(l=c=!1);var d=this.__chain__,f=!!this.__actions__.length,p=a&&!d,m=l&&!f;if(!a&&c){e=m?e:new Vn(this);var g=t.apply(e,s);return g.__actions__.push({func:ga,args:[h],thisArg:r}),new Un(g,d)}return p&&m?t.apply(this,s):(g=this.thru(h),p?i?g.value()[0]:g.value():g)})})),Ce(["pop","push","shift","sort","splice","unshift"],(function(t){var e=At[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:pop|shift)$/.test(t);Hn.prototype[t]=function(){var t=arguments;if(i&&!this.__chain__){var r=this.value();return e.apply(Xa(r)?r:[],t)}return this[n]((function(n){return e.apply(Xa(n)?n:[],t)}))}})),xi(Vn.prototype,(function(t,e){var n=Hn[e];if(n){var i=n.name+"";Rt.call(Pn,i)||(Pn[i]=[]),Pn[i].push({name:e,func:n})}})),Pn[Hr(r,2).name]=[{name:"wrapper",func:r}],Vn.prototype.clone=function(){var t=new Vn(this.__wrapped__);return t.__actions__=Ar(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Ar(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Ar(this.__views__),t},Vn.prototype.reverse=function(){if(this.__filtered__){var t=new Vn(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Vn.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Xa(t),i=e<0,r=n?t.length:0,o=function(t,e,n){var i=-1,r=n.length;for(;++i<r;){var o=n[i],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=wn(e,t+a);break;case"takeRight":t=_n(t,e-a)}}return{start:t,end:e}}(0,r,this.__views__),a=o.start,s=o.end,l=s-a,u=i?s:a-1,c=this.__iteratees__,h=c.length,d=0,f=wn(l,this.__takeCount__);if(!n||!i&&r==l&&f==l)return gr(t,this.__actions__);var p=[];t:for(;l--&&d<f;){for(var m=-1,g=t[u+=e];++m<h;){var v=c[m],y=v.iteratee,b=v.type,_=y(g);if(2==b)g=_;else if(!_){if(1==b)continue t;break t}}p[d++]=g}return p},Hn.prototype.at=va,Hn.prototype.chain=function(){return ma(this)},Hn.prototype.commit=function(){return new Un(this.value(),this.__chain__)},Hn.prototype.next=function(){this.__values__===r&&(this.__values__=ms(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?r:this.__values__[this.__index__++]}},Hn.prototype.plant=function(t){for(var e,n=this;n instanceof Wn;){var i=Ho(n);i.__index__=0,i.__values__=r,e?o.__wrapped__=i:e=i;var o=i;n=n.__wrapped__}return o.__wrapped__=t,e},Hn.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Vn){var e=t;return this.__actions__.length&&(e=new Vn(this)),(e=e.reverse()).__actions__.push({func:ga,args:[ia],thisArg:r}),new Un(e,this.__chain__)}return this.thru(ia)},Hn.prototype.toJSON=Hn.prototype.valueOf=Hn.prototype.value=function(){return gr(this.__wrapped__,this.__actions__)},Hn.prototype.first=Hn.prototype.head,te&&(Hn.prototype[te]=function(){return this}),Hn}();fe._=vn,(i=function(){return vn}.call(e,n,e,t))===r||(t.exports=i)}.call(this)},35161:(t,e,n)=>{var i=n(29932),r=n(67206),o=n(69199),a=n(1469);t.exports=function(t,e){return(a(t)?i:o)(t,r(e,3))}},66604:(t,e,n)=>{var i=n(89465),r=n(47816),o=n(67206);t.exports=function(t,e){var n={};return e=o(e,3),r(t,(function(t,r,o){i(n,r,e(t,r,o))})),n}},6162:(t,e,n)=>{var i=n(56029),r=n(53325),o=n(6557);t.exports=function(t){return t&&t.length?i(t,o,r):void 0}},88306:(t,e,n)=>{var i=n(83369);function r(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var a=t.apply(this,i);return n.cache=o.set(r,a)||o,a};return n.cache=new(r.Cache||i),n}r.Cache=i,t.exports=r},82492:(t,e,n)=>{var i=n(42980),r=n(21463)((function(t,e,n){i(t,e,n)}));t.exports=r},53632:(t,e,n)=>{var i=n(56029),r=n(70433),o=n(6557);t.exports=function(t){return t&&t.length?i(t,o,r):void 0}},22762:(t,e,n)=>{var i=n(56029),r=n(67206),o=n(70433);t.exports=function(t,e){return t&&t.length?i(t,r(e,2),o):void 0}},50308:t=>{t.exports=function(){}},7771:(t,e,n)=>{var i=n(55639);t.exports=function(){return i.Date.now()}},78718:(t,e,n)=>{var i=n(25970),r=n(99021)((function(t,e){return null==t?{}:i(t,e)}));t.exports=r},39601:(t,e,n)=>{var i=n(40371),r=n(79152),o=n(15403),a=n(40327);t.exports=function(t){return o(t)?i(a(t)):r(t)}},96026:(t,e,n)=>{var i=n(47445)();t.exports=i},54061:(t,e,n)=>{var i=n(62663),r=n(89881),o=n(67206),a=n(10107),s=n(1469);t.exports=function(t,e,n){var l=s(t)?i:a,u=arguments.length<3;return l(t,o(e,4),n,u,r)}},84238:(t,e,n)=>{var i=n(280),r=n(64160),o=n(98612),a=n(47037),s=n(88016);t.exports=function(t){if(null==t)return 0;if(o(t))return a(t)?s(t):t.length;var e=r(t);return"[object Map]"==e||"[object Set]"==e?t.size:i(t).length}},89734:(t,e,n)=>{var i=n(21078),r=n(82689),o=n(5976),a=n(16612),s=o((function(t,e){if(null==t)return[];var n=e.length;return n>1&&a(t,e[0],e[1])?e=[]:n>2&&a(e[0],e[1],e[2])&&(e=[e[0]]),r(t,i(e,1),[])}));t.exports=s},70479:t=>{t.exports=function(){return[]}},95062:t=>{t.exports=function(){return!1}},18601:(t,e,n)=>{var i=n(14841),r=1/0;t.exports=function(t){return t?(t=i(t))===r||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}},40554:(t,e,n)=>{var i=n(18601);t.exports=function(t){var e=i(t),n=e%1;return e==e?n?e-n:e:0}},14841:(t,e,n)=>{var i=n(27561),r=n(13218),o=n(33448),a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,u=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(o(t))return NaN;if(r(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=r(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=i(t);var n=s.test(t);return n||l.test(t)?u(t.slice(2),n?2:8):a.test(t)?NaN:+t}},59881:(t,e,n)=>{var i=n(98363),r=n(81704);t.exports=function(t){return i(t,r(t))}},79833:(t,e,n)=>{var i=n(80531);t.exports=function(t){return null==t?"":i(t)}},68718:(t,e,n)=>{var i=n(77412),r=n(3118),o=n(47816),a=n(67206),s=n(85924),l=n(1469),u=n(44144),c=n(23560),h=n(13218),d=n(36719);t.exports=function(t,e,n){var f=l(t),p=f||u(t)||d(t);if(e=a(e,4),null==n){var m=t&&t.constructor;n=p?f?new m:[]:h(t)&&c(m)?r(s(t)):{}}return(p?i:o)(t,(function(t,i,r){return e(n,t,i,r)})),n}},93386:(t,e,n)=>{var i=n(21078),r=n(5976),o=n(45652),a=n(29246),s=r((function(t){return o(i(t,1,a,!0))}));t.exports=s},73955:(t,e,n)=>{var i=n(79833),r=0;t.exports=function(t){var e=++r;return i(t)+e}},52628:(t,e,n)=>{var i=n(47415),r=n(3674);t.exports=function(t){return null==t?[]:i(t,r(t))}},7287:(t,e,n)=>{var i=n(34865),r=n(1757);t.exports=function(t,e){return r(t||[],e||[],i)}},42786:function(t,e,n){!function(t){"use strict";t.defineLocale("af",{months:"Januarie_Februarie_Maart_April_Mei_Junie_Julie_Augustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mrt_Apr_Mei_Jun_Jul_Aug_Sep_Okt_Nov_Des".split("_"),weekdays:"Sondag_Maandag_Dinsdag_Woensdag_Donderdag_Vrydag_Saterdag".split("_"),weekdaysShort:"Son_Maa_Din_Woe_Don_Vry_Sat".split("_"),weekdaysMin:"So_Ma_Di_Wo_Do_Vr_Sa".split("_"),meridiemParse:/vm|nm/i,isPM:function(t){return/^nm$/i.test(t)},meridiem:function(t,e,n){return t<12?n?"vm":"VM":n?"nm":"NM"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Vandag om] LT",nextDay:"[Mre om] LT",nextWeek:"dddd [om] LT",lastDay:"[Gister om] LT",lastWeek:"[Laas] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oor %s",past:"%s gelede",s:"'n paar sekondes",ss:"%d sekondes",m:"'n minuut",mm:"%d minute",h:"'n uur",hh:"%d ure",d:"'n dag",dd:"%d dae",M:"'n maand",MM:"%d maande",y:"'n jaar",yy:"%d jaar"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(t){return t+(1===t||8===t||t>=20?"ste":"de")},week:{dow:1,doy:4}})}(n(30381))},14130:function(t,e,n){!function(t){"use strict";var e=function(t){return 0===t?0:1===t?1:2===t?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5},n={s:["  "," ",["",""],"%d ","%d ","%d "],m:["  "," ",["",""],"%d ","%d ","%d "],h:["  "," ",["",""],"%d ","%d ","%d "],d:["  "," ",["",""],"%d ","%d ","%d "],M:["  "," ",["",""],"%d ","%d ","%d "],y:["  "," ",["",""],"%d ","%d ","%d "]},i=function(t){return function(i,r,o,a){var s=e(i),l=n[t][e(i)];return 2===s&&(l=l[r?0:1]),l.replace(/%d/i,i)}},r=["","","","","","","","","","","",""];t.defineLocale("ar-dz",{months:r,monthsShort:r,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/M/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(t){return""===t},meridiem:function(t,e,n){return t<12?"":""},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:i("s"),ss:i("s"),m:i("m"),mm:i("m"),h:i("h"),hh:i("h"),d:i("d"),dd:i("d"),M:i("M"),MM:i("M"),y:i("y"),yy:i("y")},postformat:function(t){return t.replace(/,/g,"")},week:{dow:0,doy:4}})}(n(30381))},96135:function(t,e,n){!function(t){"use strict";t.defineLocale("ar-kw",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},week:{dow:0,doy:12}})}(n(30381))},56440:function(t,e,n){!function(t){"use strict";var e={1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",0:"0"},n=function(t){return 0===t?0:1===t?1:2===t?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5},i={s:["  "," ",["",""],"%d ","%d ","%d "],m:["  "," ",["",""],"%d ","%d ","%d "],h:["  "," ",["",""],"%d ","%d ","%d "],d:["  "," ",["",""],"%d ","%d ","%d "],M:["  "," ",["",""],"%d ","%d ","%d "],y:["  "," ",["",""],"%d ","%d ","%d "]},r=function(t){return function(e,r,o,a){var s=n(e),l=i[t][n(e)];return 2===s&&(l=l[r?0:1]),l.replace(/%d/i,e)}},o=["","","","","","","","","","","",""];t.defineLocale("ar-ly",{months:o,monthsShort:o,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/M/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(t){return""===t},meridiem:function(t,e,n){return t<12?"":""},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:r("s"),ss:r("s"),m:r("m"),mm:r("m"),h:r("h"),hh:r("h"),d:r("d"),dd:r("d"),M:r("M"),MM:r("M"),y:r("y"),yy:r("y")},preparse:function(t){return t.replace(//g,",")},postformat:function(t){return t.replace(/\d/g,(function(t){return e[t]})).replace(/,/g,"")},week:{dow:6,doy:12}})}(n(30381))},47702:function(t,e,n){!function(t){"use strict";t.defineLocale("ar-ma",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},week:{dow:1,doy:4}})}(n(30381))},16040:function(t,e,n){!function(t){"use strict";var e={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};t.defineLocale("ar-sa",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(t){return""===t},meridiem:function(t,e,n){return t<12?"":""},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},preparse:function(t){return t.replace(/[]/g,(function(t){return n[t]})).replace(//g,",")},postformat:function(t){return t.replace(/\d/g,(function(t){return e[t]})).replace(/,/g,"")},week:{dow:0,doy:6}})}(n(30381))},37100:function(t,e,n){!function(t){"use strict";t.defineLocale("ar-tn",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},week:{dow:1,doy:4}})}(n(30381))},30867:function(t,e,n){!function(t){"use strict";var e={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"},i=function(t){return 0===t?0:1===t?1:2===t?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5},r={s:["  "," ",["",""],"%d ","%d ","%d "],m:["  "," ",["",""],"%d ","%d ","%d "],h:["  "," ",["",""],"%d ","%d ","%d "],d:["  "," ",["",""],"%d ","%d ","%d "],M:["  "," ",["",""],"%d ","%d ","%d "],y:["  "," ",["",""],"%d ","%d ","%d "]},o=function(t){return function(e,n,o,a){var s=i(e),l=r[t][i(e)];return 2===s&&(l=l[n?0:1]),l.replace(/%d/i,e)}},a=["","","","","","","","","","","",""];t.defineLocale("ar",{months:a,monthsShort:a,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/M/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(t){return""===t},meridiem:function(t,e,n){return t<12?"":""},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:o("s"),ss:o("s"),m:o("m"),mm:o("m"),h:o("h"),hh:o("h"),d:o("d"),dd:o("d"),M:o("M"),MM:o("M"),y:o("y"),yy:o("y")},preparse:function(t){return t.replace(/[]/g,(function(t){return n[t]})).replace(//g,",")},postformat:function(t){return t.replace(/\d/g,(function(t){return e[t]})).replace(/,/g,"")},week:{dow:6,doy:12}})}(n(30381))},31083:function(t,e,n){!function(t){"use strict";var e={1:"-inci",5:"-inci",8:"-inci",70:"-inci",80:"-inci",2:"-nci",7:"-nci",20:"-nci",50:"-nci",3:"-nc",4:"-nc",100:"-nc",6:"-nc",9:"-uncu",10:"-uncu",30:"-uncu",60:"-nc",90:"-nc"};t.defineLocale("az",{months:"yanvar_fevral_mart_aprel_may_iyun_iyul_avqust_sentyabr_oktyabr_noyabr_dekabr".split("_"),monthsShort:"yan_fev_mar_apr_may_iyn_iyl_avq_sen_okt_noy_dek".split("_"),weekdays:"Bazar_Bazar ertsi_rnb axam_rnb_Cm axam_Cm_nb".split("_"),weekdaysShort:"Baz_BzE_Ax_r_CAx_Cm_n".split("_"),weekdaysMin:"Bz_BE_A__CA_C_".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugn saat] LT",nextDay:"[sabah saat] LT",nextWeek:"[gln hft] dddd [saat] LT",lastDay:"[dnn] LT",lastWeek:"[ken hft] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s vvl",s:"bir ne saniy",ss:"%d saniy",m:"bir dqiq",mm:"%d dqiq",h:"bir saat",hh:"%d saat",d:"bir gn",dd:"%d gn",M:"bir ay",MM:"%d ay",y:"bir il",yy:"%d il"},meridiemParse:/gec|shr|gndz|axam/,isPM:function(t){return/^(gndz|axam)$/.test(t)},meridiem:function(t,e,n){return t<4?"gec":t<12?"shr":t<17?"gndz":"axam"},dayOfMonthOrdinalParse:/\d{1,2}-(nc|inci|nci|nc|nc|uncu)/,ordinal:function(t){if(0===t)return t+"-nc";var n=t%10,i=t%100-n,r=t>=100?100:null;return t+(e[n]||e[i]||e[r])},week:{dow:1,doy:7}})}(n(30381))},9808:function(t,e,n){!function(t){"use strict";function e(t,e){var n=t.split("_");return e%10==1&&e%100!=11?n[0]:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?n[1]:n[2]}function n(t,n,i){return"m"===i?n?"":"":"h"===i?n?"":"":t+" "+e({ss:n?"__":"__",mm:n?"__":"__",hh:n?"__":"__",dd:"__",MM:"__",yy:"__"}[i],+t)}t.defineLocale("be",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:"___________".split("_"),weekdays:{format:"______".split("_"),standalone:"______".split("_"),isFormat:/\[ ?[] ?(?:|)? ?\] ?dddd/},weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., HH:mm",LLLL:"dddd, D MMMM YYYY ., HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",lastDay:"[ ] LT",nextWeek:function(){return"[] dddd [] LT"},lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return"[ ] dddd [] LT";case 1:case 2:case 4:return"[ ] dddd [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",m:n,mm:n,h:n,hh:n,d:"",dd:n,M:"",MM:n,y:"",yy:n},meridiemParse:/|||/,isPM:function(t){return/^(|)$/.test(t)},meridiem:function(t,e,n){return t<4?"":t<12?"":t<17?"":""},dayOfMonthOrdinalParse:/\d{1,2}-(||)/,ordinal:function(t,e){switch(e){case"M":case"d":case"DDD":case"w":case"W":return t%10!=2&&t%10!=3||t%100==12||t%100==13?t+"-":t+"-";case"D":return t+"-";default:return t}},week:{dow:1,doy:7}})}(n(30381))},68338:function(t,e,n){!function(t){"use strict";t.defineLocale("bg",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[] dddd [] LT";case 1:case 2:case 4:case 5:return"[] dddd [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",w:"",ww:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}-(|||||)/,ordinal:function(t){var e=t%10,n=t%100;return 0===t?t+"-":0===n?t+"-":n>10&&n<20?t+"-":1===e?t+"-":2===e?t+"-":7===e||8===e?t+"-":t+"-"},week:{dow:1,doy:7}})}(n(30381))},67438:function(t,e,n){!function(t){"use strict";t.defineLocale("bm",{months:"Zanwuyekalo_Fewuruyekalo_Marisikalo_Awirilikalo_Mkalo_Zuwnkalo_Zuluyekalo_Utikalo_Stanburukalo_kutburukalo_Nowanburukalo_Desanburukalo".split("_"),monthsShort:"Zan_Few_Mar_Awi_M_Zuw_Zul_Uti_St_ku_Now_Des".split("_"),weekdays:"Kari_Ntnn_Tarata_Araba_Alamisa_Juma_Sibiri".split("_"),weekdaysShort:"Kar_Nt_Tar_Ara_Ala_Jum_Sib".split("_"),weekdaysMin:"Ka_Nt_Ta_Ar_Al_Ju_Si".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"MMMM [tile] D [san] YYYY",LLL:"MMMM [tile] D [san] YYYY [lr] HH:mm",LLLL:"dddd MMMM [tile] D [san] YYYY [lr] HH:mm"},calendar:{sameDay:"[Bi lr] LT",nextDay:"[Sini lr] LT",nextWeek:"dddd [don lr] LT",lastDay:"[Kunu lr] LT",lastWeek:"dddd [tmnen lr] LT",sameElse:"L"},relativeTime:{future:"%s kn",past:"a b %s b",s:"sanga dama dama",ss:"sekondi %d",m:"miniti kelen",mm:"miniti %d",h:"lr kelen",hh:"lr %d",d:"tile kelen",dd:"tile %d",M:"kalo kelen",MM:"kalo %d",y:"san kelen",yy:"san %d"},week:{dow:1,doy:4}})}(n(30381))},76225:function(t,e,n){!function(t){"use strict";var e={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};t.defineLocale("bn-bd",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(t){return t.replace(/[]/g,(function(t){return n[t]}))},postformat:function(t){return t.replace(/\d/g,(function(t){return e[t]}))},meridiemParse:/||||||/,meridiemHour:function(t,e){return 12===t&&(t=0),""===e?t<4?t:t+12:""===e||""===e?t:""===e?t>=3?t:t+12:""===e||""===e?t+12:void 0},meridiem:function(t,e,n){return t<4?"":t<6?"":t<12?"":t<15?"":t<18?"":t<20?"":""},week:{dow:0,doy:6}})}(n(30381))},8905:function(t,e,n){!function(t){"use strict";var e={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};t.defineLocale("bn",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(t){return t.replace(/[]/g,(function(t){return n[t]}))},postformat:function(t){return t.replace(/\d/g,(function(t){return e[t]}))},meridiemParse:/||||/,meridiemHour:function(t,e){return 12===t&&(t=0),""===e&&t>=4||""===e&&t<5||""===e?t+12:t},meridiem:function(t,e,n){return t<4?"":t<10?"":t<17?"":t<20?"":""},week:{dow:0,doy:6}})}(n(30381))},11560:function(t,e,n){!function(t){"use strict";var e={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};t.defineLocale("bo",{months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),monthsShortRegex:/^(\d{1,2})/,monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[], LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},preparse:function(t){return t.replace(/[]/g,(function(t){return n[t]}))},postformat:function(t){return t.replace(/\d/g,(function(t){return e[t]}))},meridiemParse:/||||/,meridiemHour:function(t,e){return 12===t&&(t=0),""===e&&t>=4||""===e&&t<5||""===e?t+12:t},meridiem:function(t,e,n){return t<4?"":t<10?"":t<17?"":t<20?"":""},week:{dow:0,doy:6}})}(n(30381))},1278:function(t,e,n){!function(t){"use strict";function e(t,e,n){return t+" "+r({mm:"munutenn",MM:"miz",dd:"devezh"}[n],t)}function n(t){switch(i(t)){case 1:case 3:case 4:case 5:case 9:return t+" bloaz";default:return t+" vloaz"}}function i(t){return t>9?i(t%10):t}function r(t,e){return 2===e?o(t):t}function o(t){var e={m:"v",b:"v",d:"z"};return void 0===e[t.charAt(0)]?t:e[t.charAt(0)]+t.substring(1)}var a=[/^gen/i,/^c[\']hwe/i,/^meu/i,/^ebr/i,/^mae/i,/^(mez|eve)/i,/^gou/i,/^eos/i,/^gwe/i,/^her/i,/^du/i,/^ker/i],s=/^(genver|c[\']hwevrer|meurzh|ebrel|mae|mezheven|gouere|eost|gwengolo|here|du|kerzu|gen|c[\']hwe|meu|ebr|mae|eve|gou|eos|gwe|her|du|ker)/i,l=/^(genver|c[\']hwevrer|meurzh|ebrel|mae|mezheven|gouere|eost|gwengolo|here|du|kerzu)/i,u=/^(gen|c[\']hwe|meu|ebr|mae|eve|gou|eos|gwe|her|du|ker)/i,c=[/^sul/i,/^lun/i,/^meurzh/i,/^merc[\']her/i,/^yaou/i,/^gwener/i,/^sadorn/i],h=[/^Sul/i,/^Lun/i,/^Meu/i,/^Mer/i,/^Yao/i,/^Gwe/i,/^Sad/i],d=[/^Su/i,/^Lu/i,/^Me([^r]|$)/i,/^Mer/i,/^Ya/i,/^Gw/i,/^Sa/i];t.defineLocale("br",{months:"Genver_Chwevrer_Meurzh_Ebrel_Mae_Mezheven_Gouere_Eost_Gwengolo_Here_Du_Kerzu".split("_"),monthsShort:"Gen_Chwe_Meu_Ebr_Mae_Eve_Gou_Eos_Gwe_Her_Du_Ker".split("_"),weekdays:"Sul_Lun_Meurzh_Mercher_Yaou_Gwener_Sadorn".split("_"),weekdaysShort:"Sul_Lun_Meu_Mer_Yao_Gwe_Sad".split("_"),weekdaysMin:"Su_Lu_Me_Mer_Ya_Gw_Sa".split("_"),weekdaysParse:d,fullWeekdaysParse:c,shortWeekdaysParse:h,minWeekdaysParse:d,monthsRegex:s,monthsShortRegex:s,monthsStrictRegex:l,monthsShortStrictRegex:u,monthsParse:a,longMonthsParse:a,shortMonthsParse:a,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [a viz] MMMM YYYY",LLL:"D [a viz] MMMM YYYY HH:mm",LLLL:"dddd, D [a viz] MMMM YYYY HH:mm"},calendar:{sameDay:"[Hiziv da] LT",nextDay:"[Warchoazh da] LT",nextWeek:"dddd [da] LT",lastDay:"[Dech da] LT",lastWeek:"dddd [paset da] LT",sameElse:"L"},relativeTime:{future:"a-benn %s",past:"%s zo",s:"un nebeud segondenno",ss:"%d eilenn",m:"ur vunutenn",mm:e,h:"un eur",hh:"%d eur",d:"un devezh",dd:e,M:"ur miz",MM:e,y:"ur bloaz",yy:n},dayOfMonthOrdinalParse:/\d{1,2}(a|vet)/,ordinal:function(t){return t+(1===t?"a":"vet")},week:{dow:1,doy:4},meridiemParse:/a.m.|g.m./,isPM:function(t){return"g.m."===t},meridiem:function(t,e,n){return t<12?"a.m.":"g.m."}})}(n(30381))},80622:function(t,e,n){!function(t){"use strict";function e(t,e,n){var i=t+" ";switch(n){case"ss":return i+=1===t?"sekunda":2===t||3===t||4===t?"sekunde":"sekundi";case"m":return e?"jedna minuta":"jedne minute";case"mm":return i+=1===t?"minuta":2===t||3===t||4===t?"minute":"minuta";case"h":return e?"jedan sat":"jednog sata";case"hh":return i+=1===t?"sat":2===t||3===t||4===t?"sata":"sati";case"dd":return i+=1===t?"dan":"dana";case"MM":return i+=1===t?"mjesec":2===t||3===t||4===t?"mjeseca":"mjeseci";case"yy":return i+=1===t?"godina":2===t||3===t||4===t?"godine":"godina"}}t.defineLocale("bs",{months:"januar_februar_mart_april_maj_juni_juli_august_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._aug._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_etvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._et._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_e_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[prolu] dddd [u] LT";case 6:return"[prole] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[proli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",ss:e,m:e,mm:e,h:e,hh:e,d:"dan",dd:e,M:"mjesec",MM:e,y:"godinu",yy:e},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(30381))},2468:function(t,e,n){!function(t){"use strict";t.defineLocale("ca",{months:{standalone:"gener_febrer_mar_abril_maig_juny_juliol_agost_setembre_octubre_novembre_desembre".split("_"),format:"de gener_de febrer_de mar_d'abril_de maig_de juny_de juliol_d'agost_de setembre_d'octubre_de novembre_de desembre".split("_"),isFormat:/D[oD]?(\s)+MMMM/},monthsShort:"gen._febr._mar_abr._maig_juny_jul._ag._set._oct._nov._des.".split("_"),monthsParseExact:!0,weekdays:"diumenge_dilluns_dimarts_dimecres_dijous_divendres_dissabte".split("_"),weekdaysShort:"dg._dl._dt._dc._dj._dv._ds.".split("_"),weekdaysMin:"dg_dl_dt_dc_dj_dv_ds".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [de] YYYY",ll:"D MMM YYYY",LLL:"D MMMM [de] YYYY [a les] H:mm",lll:"D MMM YYYY, H:mm",LLLL:"dddd D MMMM [de] YYYY [a les] H:mm",llll:"ddd D MMM YYYY, H:mm"},calendar:{sameDay:function(){return"[avui a "+(1!==this.hours()?"les":"la")+"] LT"},nextDay:function(){return"[dem a "+(1!==this.hours()?"les":"la")+"] LT"},nextWeek:function(){return"dddd [a "+(1!==this.hours()?"les":"la")+"] LT"},lastDay:function(){return"[ahir a "+(1!==this.hours()?"les":"la")+"] LT"},lastWeek:function(){return"[el] dddd [passat a "+(1!==this.hours()?"les":"la")+"] LT"},sameElse:"L"},relativeTime:{future:"d'aqu %s",past:"fa %s",s:"uns segons",ss:"%d segons",m:"un minut",mm:"%d minuts",h:"una hora",hh:"%d hores",d:"un dia",dd:"%d dies",M:"un mes",MM:"%d mesos",y:"un any",yy:"%d anys"},dayOfMonthOrdinalParse:/\d{1,2}(r|n|t||a)/,ordinal:function(t,e){var n=1===t?"r":2===t?"n":3===t?"r":4===t?"t":"";return"w"!==e&&"W"!==e||(n="a"),t+n},week:{dow:1,doy:4}})}(n(30381))},5822:function(t,e,n){!function(t){"use strict";var e="leden_nor_bezen_duben_kvten_erven_ervenec_srpen_z_jen_listopad_prosinec".split("_"),n="led_no_be_dub_kv_vn_vc_srp_z_j_lis_pro".split("_"),i=[/^led/i,/^no/i,/^be/i,/^dub/i,/^kv/i,/^(vn|erven$|ervna)/i,/^(vc|ervenec|ervence)/i,/^srp/i,/^z/i,/^j/i,/^lis/i,/^pro/i],r=/^(leden|nor|bezen|duben|kvten|ervenec|ervence|erven|ervna|srpen|z|jen|listopad|prosinec|led|no|be|dub|kv|vn|vc|srp|z|j|lis|pro)/i;function o(t){return t>1&&t<5&&1!=~~(t/10)}function a(t,e,n,i){var r=t+" ";switch(n){case"s":return e||i?"pr sekund":"pr sekundami";case"ss":return e||i?r+(o(t)?"sekundy":"sekund"):r+"sekundami";case"m":return e?"minuta":i?"minutu":"minutou";case"mm":return e||i?r+(o(t)?"minuty":"minut"):r+"minutami";case"h":return e?"hodina":i?"hodinu":"hodinou";case"hh":return e||i?r+(o(t)?"hodiny":"hodin"):r+"hodinami";case"d":return e||i?"den":"dnem";case"dd":return e||i?r+(o(t)?"dny":"dn"):r+"dny";case"M":return e||i?"msc":"mscem";case"MM":return e||i?r+(o(t)?"msce":"msc"):r+"msci";case"y":return e||i?"rok":"rokem";case"yy":return e||i?r+(o(t)?"roky":"let"):r+"lety"}}t.defineLocale("cs",{months:e,monthsShort:n,monthsRegex:r,monthsShortRegex:r,monthsStrictRegex:/^(leden|ledna|nora|nor|bezen|bezna|duben|dubna|kvten|kvtna|ervenec|ervence|erven|ervna|srpen|srpna|z|jen|jna|listopadu|listopad|prosinec|prosince)/i,monthsShortStrictRegex:/^(led|no|be|dub|kv|vn|vc|srp|z|j|lis|pro)/i,monthsParse:i,longMonthsParse:i,shortMonthsParse:i,weekdays:"nedle_pondl_ter_steda_tvrtek_ptek_sobota".split("_"),weekdaysShort:"ne_po_t_st_t_p_so".split("_"),weekdaysMin:"ne_po_t_st_t_p_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm",l:"D. M. YYYY"},calendar:{sameDay:"[dnes v] LT",nextDay:"[ztra v] LT",nextWeek:function(){switch(this.day()){case 0:return"[v nedli v] LT";case 1:case 2:return"[v] dddd [v] LT";case 3:return"[ve stedu v] LT";case 4:return"[ve tvrtek v] LT";case 5:return"[v ptek v] LT";case 6:return"[v sobotu v] LT"}},lastDay:"[vera v] LT",lastWeek:function(){switch(this.day()){case 0:return"[minulou nedli v] LT";case 1:case 2:return"[minul] dddd [v] LT";case 3:return"[minulou stedu v] LT";case 4:case 5:return"[minul] dddd [v] LT";case 6:return"[minulou sobotu v] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"ped %s",s:a,ss:a,m:a,mm:a,h:a,hh:a,d:a,dd:a,M:a,MM:a,y:a,yy:a},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(30381))},50877:function(t,e,n){!function(t){"use strict";t.defineLocale("cv",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"YYYY [] MMMM [] D[-]",LLL:"YYYY [] MMMM [] D[-], HH:mm",LLLL:"dddd, YYYY [] MMMM [] D[-], HH:mm"},calendar:{sameDay:"[] LT []",nextDay:"[] LT []",lastDay:"[] LT []",nextWeek:"[] dddd LT []",lastWeek:"[] dddd LT []",sameElse:"L"},relativeTime:{future:function(t){return t+(/$/i.exec(t)?"":/$/i.exec(t)?"":"")},past:"%s ",s:"- ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}-/,ordinal:"%d-",week:{dow:1,doy:7}})}(n(30381))},47373:function(t,e,n){!function(t){"use strict";t.defineLocale("cy",{months:"Ionawr_Chwefror_Mawrth_Ebrill_Mai_Mehefin_Gorffennaf_Awst_Medi_Hydref_Tachwedd_Rhagfyr".split("_"),monthsShort:"Ion_Chwe_Maw_Ebr_Mai_Meh_Gor_Aws_Med_Hyd_Tach_Rhag".split("_"),weekdays:"Dydd Sul_Dydd Llun_Dydd Mawrth_Dydd Mercher_Dydd Iau_Dydd Gwener_Dydd Sadwrn".split("_"),weekdaysShort:"Sul_Llun_Maw_Mer_Iau_Gwe_Sad".split("_"),weekdaysMin:"Su_Ll_Ma_Me_Ia_Gw_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Heddiw am] LT",nextDay:"[Yfory am] LT",nextWeek:"dddd [am] LT",lastDay:"[Ddoe am] LT",lastWeek:"dddd [diwethaf am] LT",sameElse:"L"},relativeTime:{future:"mewn %s",past:"%s yn l",s:"ychydig eiliadau",ss:"%d eiliad",m:"munud",mm:"%d munud",h:"awr",hh:"%d awr",d:"diwrnod",dd:"%d diwrnod",M:"mis",MM:"%d mis",y:"blwyddyn",yy:"%d flynedd"},dayOfMonthOrdinalParse:/\d{1,2}(fed|ain|af|il|ydd|ed|eg)/,ordinal:function(t){var e="";return t>20?e=40===t||50===t||60===t||80===t||100===t?"fed":"ain":t>0&&(e=["","af","il","ydd","ydd","ed","ed","ed","fed","fed","fed","eg","fed","eg","eg","fed","eg","eg","fed","eg","fed"][t]),t+e},week:{dow:1,doy:4}})}(n(30381))},24780:function(t,e,n){!function(t){"use strict";t.defineLocale("da",{months:"januar_februar_marts_april_maj_juni_juli_august_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"sndag_mandag_tirsdag_onsdag_torsdag_fredag_lrdag".split("_"),weekdaysShort:"sn_man_tir_ons_tor_fre_lr".split("_"),weekdaysMin:"s_ma_ti_on_to_fr_l".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd [d.] D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[i dag kl.] LT",nextDay:"[i morgen kl.] LT",nextWeek:"p dddd [kl.] LT",lastDay:"[i gr kl.] LT",lastWeek:"[i] dddd[s kl.] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"f sekunder",ss:"%d sekunder",m:"et minut",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dage",M:"en mned",MM:"%d mneder",y:"et r",yy:"%d r"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(30381))},60217:function(t,e,n){!function(t){"use strict";function e(t,e,n,i){var r={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[t+" Tage",t+" Tagen"],w:["eine Woche","einer Woche"],M:["ein Monat","einem Monat"],MM:[t+" Monate",t+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[t+" Jahre",t+" Jahren"]};return e?r[n][0]:r[n][1]}t.defineLocale("de-at",{months:"Jnner_Februar_Mrz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jn._Feb._Mrz_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",ss:"%d Sekunden",m:e,mm:"%d Minuten",h:e,hh:"%d Stunden",d:e,dd:e,w:e,ww:"%d Wochen",M:e,MM:e,y:e,yy:e},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(30381))},60894:function(t,e,n){!function(t){"use strict";function e(t,e,n,i){var r={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[t+" Tage",t+" Tagen"],w:["eine Woche","einer Woche"],M:["ein Monat","einem Monat"],MM:[t+" Monate",t+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[t+" Jahre",t+" Jahren"]};return e?r[n][0]:r[n][1]}t.defineLocale("de-ch",{months:"Januar_Februar_Mrz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Feb._Mrz_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",ss:"%d Sekunden",m:e,mm:"%d Minuten",h:e,hh:"%d Stunden",d:e,dd:e,w:e,ww:"%d Wochen",M:e,MM:e,y:e,yy:e},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(30381))},59740:function(t,e,n){!function(t){"use strict";function e(t,e,n,i){var r={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[t+" Tage",t+" Tagen"],w:["eine Woche","einer Woche"],M:["ein Monat","einem Monat"],MM:[t+" Monate",t+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[t+" Jahre",t+" Jahren"]};return e?r[n][0]:r[n][1]}t.defineLocale("de",{months:"Januar_Februar_Mrz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Feb._Mrz_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",ss:"%d Sekunden",m:e,mm:"%d Minuten",h:e,hh:"%d Stunden",d:e,dd:e,w:e,ww:"%d Wochen",M:e,MM:e,y:e,yy:e},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(30381))},5300:function(t,e,n){!function(t){"use strict";var e=["","","","","","","","","","","",""],n=["","","","","","",""];t.defineLocale("dv",{months:e,monthsShort:e,weekdays:n,weekdaysShort:n,weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/M/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(t){return""===t},meridiem:function(t,e,n){return t<12?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd LT",lastDay:"[] LT",lastWeek:"[] dddd LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",ss:"d% ",m:"",mm:" %d",h:"",hh:" %d",d:"",dd:" %d",M:"",MM:" %d",y:"",yy:" %d"},preparse:function(t){return t.replace(//g,",")},postformat:function(t){return t.replace(/,/g,"")},week:{dow:7,doy:12}})}(n(30381))},50837:function(t,e,n){!function(t){"use strict";function e(t){return"undefined"!=typeof Function&&t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}t.defineLocale("el",{monthsNominativeEl:"___________".split("_"),monthsGenitiveEl:"___________".split("_"),months:function(t,e){return t?"string"==typeof e&&/D/.test(e.substring(0,e.indexOf("MMMM")))?this._monthsGenitiveEl[t.month()]:this._monthsNominativeEl[t.month()]:this._monthsNominativeEl},monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),meridiem:function(t,e,n){return t>11?n?"":"":n?"":""},isPM:function(t){return""===(t+"").toLowerCase()[0]},meridiemParse:/[]\.??\.?/i,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendarEl:{sameDay:"[ {}] LT",nextDay:"[ {}] LT",nextWeek:"dddd [{}] LT",lastDay:"[ {}] LT",lastWeek:function(){return 6===this.day()?"[ ] dddd [{}] LT":"[ ] dddd [{}] LT"},sameElse:"L"},calendar:function(t,n){var i=this._calendarEl[t],r=n&&n.hours();return e(i)&&(i=i.apply(n)),i.replace("{}",r%12==1?"":"")},relativeTime:{future:" %s",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(n(30381))},78348:function(t,e,n){!function(t){"use strict";t.defineLocale("en-au",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")},week:{dow:0,doy:4}})}(n(30381))},77925:function(t,e,n){!function(t){"use strict";t.defineLocale("en-ca",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"YYYY-MM-DD",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")}})}(n(30381))},22243:function(t,e,n){!function(t){"use strict";t.defineLocale("en-gb",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")},week:{dow:1,doy:4}})}(n(30381))},46436:function(t,e,n){!function(t){"use strict";t.defineLocale("en-ie",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")},week:{dow:1,doy:4}})}(n(30381))},47207:function(t,e,n){!function(t){"use strict";t.defineLocale("en-il",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")}})}(n(30381))},44175:function(t,e,n){!function(t){"use strict";t.defineLocale("en-in",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")},week:{dow:0,doy:6}})}(n(30381))},76319:function(t,e,n){!function(t){"use strict";t.defineLocale("en-nz",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")},week:{dow:1,doy:4}})}(n(30381))},31662:function(t,e,n){!function(t){"use strict";t.defineLocale("en-sg",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")},week:{dow:1,doy:4}})}(n(30381))},92915:function(t,e,n){!function(t){"use strict";t.defineLocale("eo",{months:"januaro_februaro_marto_aprilo_majo_junio_julio_agusto_septembro_oktobro_novembro_decembro".split("_"),monthsShort:"jan_feb_mart_apr_maj_jun_jul_ag_sept_okt_nov_dec".split("_"),weekdays:"dimano_lundo_mardo_merkredo_ado_vendredo_sabato".split("_"),weekdaysShort:"dim_lun_mard_merk_a_ven_sab".split("_"),weekdaysMin:"di_lu_ma_me_a_ve_sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"[la] D[-an de] MMMM, YYYY",LLL:"[la] D[-an de] MMMM, YYYY HH:mm",LLLL:"dddd[n], [la] D[-an de] MMMM, YYYY HH:mm",llll:"ddd, [la] D[-an de] MMM, YYYY HH:mm"},meridiemParse:/[ap]\.t\.m/i,isPM:function(t){return"p"===t.charAt(0).toLowerCase()},meridiem:function(t,e,n){return t>11?n?"p.t.m.":"P.T.M.":n?"a.t.m.":"A.T.M."},calendar:{sameDay:"[Hodia je] LT",nextDay:"[Morga je] LT",nextWeek:"dddd[n je] LT",lastDay:"[Hiera je] LT",lastWeek:"[pasintan] dddd[n je] LT",sameElse:"L"},relativeTime:{future:"post %s",past:"anta %s",s:"kelkaj sekundoj",ss:"%d sekundoj",m:"unu minuto",mm:"%d minutoj",h:"unu horo",hh:"%d horoj",d:"unu tago",dd:"%d tagoj",M:"unu monato",MM:"%d monatoj",y:"unu jaro",yy:"%d jaroj"},dayOfMonthOrdinalParse:/\d{1,2}a/,ordinal:"%da",week:{dow:1,doy:7}})}(n(30381))},55251:function(t,e,n){!function(t){"use strict";var e="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),i=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],r=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;t.defineLocale("es-do",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(t,i){return t?/-MMM-/.test(i)?n[t.month()]:e[t.month()]:e},monthsRegex:r,monthsShortRegex:r,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:i,longMonthsParse:i,shortMonthsParse:i,weekdays:"domingo_lunes_martes_mircoles_jueves_viernes_sbado".split("_"),weekdaysShort:"dom._lun._mar._mi._jue._vie._sb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY h:mm A",LLLL:"dddd, D [de] MMMM [de] YYYY h:mm A"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[maana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un da",dd:"%d das",w:"una semana",ww:"%d semanas",M:"un mes",MM:"%d meses",y:"un ao",yy:"%d aos"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(n(30381))},96112:function(t,e,n){!function(t){"use strict";var e="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),i=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],r=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;t.defineLocale("es-mx",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(t,i){return t?/-MMM-/.test(i)?n[t.month()]:e[t.month()]:e},monthsRegex:r,monthsShortRegex:r,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:i,longMonthsParse:i,shortMonthsParse:i,weekdays:"domingo_lunes_martes_mircoles_jueves_viernes_sbado".split("_"),weekdaysShort:"dom._lun._mar._mi._jue._vie._sb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[maana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un da",dd:"%d das",w:"una semana",ww:"%d semanas",M:"un mes",MM:"%d meses",y:"un ao",yy:"%d aos"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:0,doy:4},invalidDate:"Fecha invlida"})}(n(30381))},71146:function(t,e,n){!function(t){"use strict";var e="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),i=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],r=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;t.defineLocale("es-us",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(t,i){return t?/-MMM-/.test(i)?n[t.month()]:e[t.month()]:e},monthsRegex:r,monthsShortRegex:r,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:i,longMonthsParse:i,shortMonthsParse:i,weekdays:"domingo_lunes_martes_mircoles_jueves_viernes_sbado".split("_"),weekdaysShort:"dom._lun._mar._mi._jue._vie._sb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"MM/DD/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY h:mm A",LLLL:"dddd, D [de] MMMM [de] YYYY h:mm A"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[maana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un da",dd:"%d das",w:"una semana",ww:"%d semanas",M:"un mes",MM:"%d meses",y:"un ao",yy:"%d aos"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:0,doy:6}})}(n(30381))},55655:function(t,e,n){!function(t){"use strict";var e="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),i=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],r=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;t.defineLocale("es",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(t,i){return t?/-MMM-/.test(i)?n[t.month()]:e[t.month()]:e},monthsRegex:r,monthsShortRegex:r,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:i,longMonthsParse:i,shortMonthsParse:i,weekdays:"domingo_lunes_martes_mircoles_jueves_viernes_sbado".split("_"),weekdaysShort:"dom._lun._mar._mi._jue._vie._sb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[maana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un da",dd:"%d das",w:"una semana",ww:"%d semanas",M:"un mes",MM:"%d meses",y:"un ao",yy:"%d aos"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4},invalidDate:"Fecha invlida"})}(n(30381))},5603:function(t,e,n){!function(t){"use strict";function e(t,e,n,i){var r={s:["mne sekundi","mni sekund","paar sekundit"],ss:[t+"sekundi",t+"sekundit"],m:["he minuti","ks minut"],mm:[t+" minuti",t+" minutit"],h:["he tunni","tund aega","ks tund"],hh:[t+" tunni",t+" tundi"],d:["he peva","ks pev"],M:["kuu aja","kuu aega","ks kuu"],MM:[t+" kuu",t+" kuud"],y:["he aasta","aasta","ks aasta"],yy:[t+" aasta",t+" aastat"]};return e?r[n][2]?r[n][2]:r[n][1]:i?r[n][0]:r[n][1]}t.defineLocale("et",{months:"jaanuar_veebruar_mrts_aprill_mai_juuni_juuli_august_september_oktoober_november_detsember".split("_"),monthsShort:"jaan_veebr_mrts_apr_mai_juuni_juuli_aug_sept_okt_nov_dets".split("_"),weekdays:"phapev_esmaspev_teisipev_kolmapev_neljapev_reede_laupev".split("_"),weekdaysShort:"P_E_T_K_N_R_L".split("_"),weekdaysMin:"P_E_T_K_N_R_L".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[Tna,] LT",nextDay:"[Homme,] LT",nextWeek:"[Jrgmine] dddd LT",lastDay:"[Eile,] LT",lastWeek:"[Eelmine] dddd LT",sameElse:"L"},relativeTime:{future:"%s prast",past:"%s tagasi",s:e,ss:e,m:e,mm:e,h:e,hh:e,d:e,dd:"%d peva",M:e,MM:e,y:e,yy:e},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(30381))},77763:function(t,e,n){!function(t){"use strict";t.defineLocale("eu",{months:"urtarrila_otsaila_martxoa_apirila_maiatza_ekaina_uztaila_abuztua_iraila_urria_azaroa_abendua".split("_"),monthsShort:"urt._ots._mar._api._mai._eka._uzt._abu._ira._urr._aza._abe.".split("_"),monthsParseExact:!0,weekdays:"igandea_astelehena_asteartea_asteazkena_osteguna_ostirala_larunbata".split("_"),weekdaysShort:"ig._al._ar._az._og._ol._lr.".split("_"),weekdaysMin:"ig_al_ar_az_og_ol_lr".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY[ko] MMMM[ren] D[a]",LLL:"YYYY[ko] MMMM[ren] D[a] HH:mm",LLLL:"dddd, YYYY[ko] MMMM[ren] D[a] HH:mm",l:"YYYY-M-D",ll:"YYYY[ko] MMM D[a]",lll:"YYYY[ko] MMM D[a] HH:mm",llll:"ddd, YYYY[ko] MMM D[a] HH:mm"},calendar:{sameDay:"[gaur] LT[etan]",nextDay:"[bihar] LT[etan]",nextWeek:"dddd LT[etan]",lastDay:"[atzo] LT[etan]",lastWeek:"[aurreko] dddd LT[etan]",sameElse:"L"},relativeTime:{future:"%s barru",past:"duela %s",s:"segundo batzuk",ss:"%d segundo",m:"minutu bat",mm:"%d minutu",h:"ordu bat",hh:"%d ordu",d:"egun bat",dd:"%d egun",M:"hilabete bat",MM:"%d hilabete",y:"urte bat",yy:"%d urte"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(30381))},76959:function(t,e,n){!function(t){"use strict";var e={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};t.defineLocale("fa",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/  |  /,isPM:function(t){return/  /.test(t)},meridiem:function(t,e,n){return t<12?"  ":"  "},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"dddd [] [] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(t){return t.replace(/[-]/g,(function(t){return n[t]})).replace(//g,",")},postformat:function(t){return t.replace(/\d/g,(function(t){return e[t]})).replace(/,/g,"")},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:6,doy:12}})}(n(30381))},11897:function(t,e,n){!function(t){"use strict";var e="nolla yksi kaksi kolme nelj viisi kuusi seitsemn kahdeksan yhdeksn".split(" "),n=["nolla","yhden","kahden","kolmen","neljn","viiden","kuuden",e[7],e[8],e[9]];function i(t,e,n,i){var o="";switch(n){case"s":return i?"muutaman sekunnin":"muutama sekunti";case"ss":o=i?"sekunnin":"sekuntia";break;case"m":return i?"minuutin":"minuutti";case"mm":o=i?"minuutin":"minuuttia";break;case"h":return i?"tunnin":"tunti";case"hh":o=i?"tunnin":"tuntia";break;case"d":return i?"pivn":"piv";case"dd":o=i?"pivn":"piv";break;case"M":return i?"kuukauden":"kuukausi";case"MM":o=i?"kuukauden":"kuukautta";break;case"y":return i?"vuoden":"vuosi";case"yy":o=i?"vuoden":"vuotta"}return o=r(t,i)+" "+o}function r(t,i){return t<10?i?n[t]:e[t]:t}t.defineLocale("fi",{months:"tammikuu_helmikuu_maaliskuu_huhtikuu_toukokuu_keskuu_heinkuu_elokuu_syyskuu_lokakuu_marraskuu_joulukuu".split("_"),monthsShort:"tammi_helmi_maalis_huhti_touko_kes_hein_elo_syys_loka_marras_joulu".split("_"),weekdays:"sunnuntai_maanantai_tiistai_keskiviikko_torstai_perjantai_lauantai".split("_"),weekdaysShort:"su_ma_ti_ke_to_pe_la".split("_"),weekdaysMin:"su_ma_ti_ke_to_pe_la".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"Do MMMM[ta] YYYY",LLL:"Do MMMM[ta] YYYY, [klo] HH.mm",LLLL:"dddd, Do MMMM[ta] YYYY, [klo] HH.mm",l:"D.M.YYYY",ll:"Do MMM YYYY",lll:"Do MMM YYYY, [klo] HH.mm",llll:"ddd, Do MMM YYYY, [klo] HH.mm"},calendar:{sameDay:"[tnn] [klo] LT",nextDay:"[huomenna] [klo] LT",nextWeek:"dddd [klo] LT",lastDay:"[eilen] [klo] LT",lastWeek:"[viime] dddd[na] [klo] LT",sameElse:"L"},relativeTime:{future:"%s pst",past:"%s sitten",s:i,ss:i,m:i,mm:i,h:i,hh:i,d:i,dd:i,M:i,MM:i,y:i,yy:i},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(30381))},42549:function(t,e,n){!function(t){"use strict";t.defineLocale("fil",{months:"Enero_Pebrero_Marso_Abril_Mayo_Hunyo_Hulyo_Agosto_Setyembre_Oktubre_Nobyembre_Disyembre".split("_"),monthsShort:"Ene_Peb_Mar_Abr_May_Hun_Hul_Ago_Set_Okt_Nob_Dis".split("_"),weekdays:"Linggo_Lunes_Martes_Miyerkules_Huwebes_Biyernes_Sabado".split("_"),weekdaysShort:"Lin_Lun_Mar_Miy_Huw_Biy_Sab".split("_"),weekdaysMin:"Li_Lu_Ma_Mi_Hu_Bi_Sab".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"MM/D/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY HH:mm",LLLL:"dddd, MMMM DD, YYYY HH:mm"},calendar:{sameDay:"LT [ngayong araw]",nextDay:"[Bukas ng] LT",nextWeek:"LT [sa susunod na] dddd",lastDay:"LT [kahapon]",lastWeek:"LT [noong nakaraang] dddd",sameElse:"L"},relativeTime:{future:"sa loob ng %s",past:"%s ang nakalipas",s:"ilang segundo",ss:"%d segundo",m:"isang minuto",mm:"%d minuto",h:"isang oras",hh:"%d oras",d:"isang araw",dd:"%d araw",M:"isang buwan",MM:"%d buwan",y:"isang taon",yy:"%d taon"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(t){return t},week:{dow:1,doy:4}})}(n(30381))},94694:function(t,e,n){!function(t){"use strict";t.defineLocale("fo",{months:"januar_februar_mars_aprl_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sunnudagur_mnadagur_tsdagur_mikudagur_hsdagur_frggjadagur_leygardagur".split("_"),weekdaysShort:"sun_mn_ts_mik_hs_fr_ley".split("_"),weekdaysMin:"su_m_t_mi_h_fr_le".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D. MMMM, YYYY HH:mm"},calendar:{sameDay:"[ dag kl.] LT",nextDay:"[ morgin kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[ gjr kl.] LT",lastWeek:"[sstu] dddd [kl] LT",sameElse:"L"},relativeTime:{future:"um %s",past:"%s sani",s:"f sekund",ss:"%d sekundir",m:"ein minuttur",mm:"%d minuttir",h:"ein tmi",hh:"%d tmar",d:"ein dagur",dd:"%d dagar",M:"ein mnaur",MM:"%d mnair",y:"eitt r",yy:"%d r"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(30381))},63049:function(t,e,n){!function(t){"use strict";t.defineLocale("fr-ca",{months:"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre".split("_"),monthsShort:"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourdhui ] LT",nextDay:"[Demain ] LT",nextWeek:"dddd [] LT",lastDay:"[Hier ] LT",lastWeek:"dddd [dernier ] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",ss:"%d secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|e)/,ordinal:function(t,e){switch(e){default:return t+(1===t?"er":"e");case"w":case"W":return t+(1===t?"re":"e")}}})}(n(30381))},52330:function(t,e,n){!function(t){"use strict";t.defineLocale("fr-ch",{months:"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre".split("_"),monthsShort:"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourdhui ] LT",nextDay:"[Demain ] LT",nextWeek:"dddd [] LT",lastDay:"[Hier ] LT",lastWeek:"dddd [dernier ] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",ss:"%d secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|e)/,ordinal:function(t,e){switch(e){default:return t+(1===t?"er":"e");case"w":case"W":return t+(1===t?"re":"e")}},week:{dow:1,doy:4}})}(n(30381))},94470:function(t,e,n){!function(t){"use strict";var e=/^(janvier|fvrier|mars|avril|mai|juin|juillet|aot|septembre|octobre|novembre|dcembre)/i,n=/(janv\.?|fvr\.?|mars|avr\.?|mai|juin|juil\.?|aot|sept\.?|oct\.?|nov\.?|dc\.?)/i,i=/(janv\.?|fvr\.?|mars|avr\.?|mai|juin|juil\.?|aot|sept\.?|oct\.?|nov\.?|dc\.?|janvier|fvrier|mars|avril|mai|juin|juillet|aot|septembre|octobre|novembre|dcembre)/i,r=[/^janv/i,/^fvr/i,/^mars/i,/^avr/i,/^mai/i,/^juin/i,/^juil/i,/^aot/i,/^sept/i,/^oct/i,/^nov/i,/^dc/i];t.defineLocale("fr",{months:"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre".split("_"),monthsShort:"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.".split("_"),monthsRegex:i,monthsShortRegex:i,monthsStrictRegex:e,monthsShortStrictRegex:n,monthsParse:r,longMonthsParse:r,shortMonthsParse:r,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourdhui ] LT",nextDay:"[Demain ] LT",nextWeek:"dddd [] LT",lastDay:"[Hier ] LT",lastWeek:"dddd [dernier ] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",ss:"%d secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",w:"une semaine",ww:"%d semaines",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|)/,ordinal:function(t,e){switch(e){case"D":return t+(1===t?"er":"");default:return t+(1===t?"er":"e");case"w":case"W":return t+(1===t?"re":"e")}},week:{dow:1,doy:4}})}(n(30381))},5044:function(t,e,n){!function(t){"use strict";var e="jan._feb._mrt._apr._mai_jun._jul._aug._sep._okt._nov._des.".split("_"),n="jan_feb_mrt_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_");t.defineLocale("fy",{months:"jannewaris_febrewaris_maart_april_maaie_juny_july_augustus_septimber_oktober_novimber_desimber".split("_"),monthsShort:function(t,i){return t?/-MMM-/.test(i)?n[t.month()]:e[t.month()]:e},monthsParseExact:!0,weekdays:"snein_moandei_tiisdei_woansdei_tongersdei_freed_sneon".split("_"),weekdaysShort:"si._mo._ti._wo._to._fr._so.".split("_"),weekdaysMin:"Si_Mo_Ti_Wo_To_Fr_So".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[hjoed om] LT",nextDay:"[moarn om] LT",nextWeek:"dddd [om] LT",lastDay:"[juster om] LT",lastWeek:"[frne] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oer %s",past:"%s lyn",s:"in pear sekonden",ss:"%d sekonden",m:"ien mint",mm:"%d minuten",h:"ien oere",hh:"%d oeren",d:"ien dei",dd:"%d dagen",M:"ien moanne",MM:"%d moannen",y:"ien jier",yy:"%d jierren"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(t){return t+(1===t||8===t||t>=20?"ste":"de")},week:{dow:1,doy:4}})}(n(30381))},29295:function(t,e,n){!function(t){"use strict";var e=["Eanir","Feabhra","Mrta","Aibren","Bealtaine","Meitheamh","Iil","Lnasa","Men Fmhair","Deireadh Fmhair","Samhain","Nollaig"],n=["Ean","Feabh","Mrt","Aib","Beal","Meith","Iil","Ln","M.F.","D.F.","Samh","Noll"],i=["D Domhnaigh","D Luain","D Mirt","D Cadaoin","Dardaoin","D hAoine","D Sathairn"],r=["Domh","Luan","Mirt","Cad","Dar","Aoine","Sath"],o=["Do","Lu","M","C","D","A","Sa"];t.defineLocale("ga",{months:e,monthsShort:n,monthsParseExact:!0,weekdays:i,weekdaysShort:r,weekdaysMin:o,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Inniu ag] LT",nextDay:"[Amrach ag] LT",nextWeek:"dddd [ag] LT",lastDay:"[Inn ag] LT",lastWeek:"dddd [seo caite] [ag] LT",sameElse:"L"},relativeTime:{future:"i %s",past:"%s  shin",s:"cpla soicind",ss:"%d soicind",m:"nimad",mm:"%d nimad",h:"uair an chloig",hh:"%d uair an chloig",d:"l",dd:"%d l",M:"m",MM:"%d monna",y:"bliain",yy:"%d bliain"},dayOfMonthOrdinalParse:/\d{1,2}(d|na|mh)/,ordinal:function(t){return t+(1===t?"d":t%10==2?"na":"mh")},week:{dow:1,doy:4}})}(n(30381))},2101:function(t,e,n){!function(t){"use strict";var e=["Am Faoilleach","An Gearran","Am Mrt","An Giblean","An Citean","An t-gmhios","An t-Iuchar","An Lnastal","An t-Sultain","An Dmhair","An t-Samhain","An Dbhlachd"],n=["Faoi","Gear","Mrt","Gibl","Cit","gmh","Iuch","Ln","Sult","Dmh","Samh","Dbh"],i=["Didmhnaich","Diluain","Dimirt","Diciadain","Diardaoin","Dihaoine","Disathairne"],r=["Did","Dil","Dim","Dic","Dia","Dih","Dis"],o=["D","Lu","M","Ci","Ar","Ha","Sa"];t.defineLocale("gd",{months:e,monthsShort:n,monthsParseExact:!0,weekdays:i,weekdaysShort:r,weekdaysMin:o,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[An-diugh aig] LT",nextDay:"[A-mireach aig] LT",nextWeek:"dddd [aig] LT",lastDay:"[An-d aig] LT",lastWeek:"dddd [seo chaidh] [aig] LT",sameElse:"L"},relativeTime:{future:"ann an %s",past:"bho chionn %s",s:"beagan diogan",ss:"%d diogan",m:"mionaid",mm:"%d mionaidean",h:"uair",hh:"%d uairean",d:"latha",dd:"%d latha",M:"mos",MM:"%d mosan",y:"bliadhna",yy:"%d bliadhna"},dayOfMonthOrdinalParse:/\d{1,2}(d|na|mh)/,ordinal:function(t){return t+(1===t?"d":t%10==2?"na":"mh")},week:{dow:1,doy:4}})}(n(30381))},38794:function(t,e,n){!function(t){"use strict";t.defineLocale("gl",{months:"xaneiro_febreiro_marzo_abril_maio_xuo_xullo_agosto_setembro_outubro_novembro_decembro".split("_"),monthsShort:"xan._feb._mar._abr._mai._xu._xul._ago._set._out._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"domingo_luns_martes_mrcores_xoves_venres_sbado".split("_"),weekdaysShort:"dom._lun._mar._mr._xov._ven._sb.".split("_"),weekdaysMin:"do_lu_ma_m_xo_ve_s".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoxe "+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[ma "+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd ["+(1!==this.hours()?"s":"a")+"] LT"},lastDay:function(){return"[onte "+(1!==this.hours()?"":"a")+"] LT"},lastWeek:function(){return"[o] dddd [pasado "+(1!==this.hours()?"s":"a")+"] LT"},sameElse:"L"},relativeTime:{future:function(t){return 0===t.indexOf("un")?"n"+t:"en "+t},past:"hai %s",s:"uns segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"unha hora",hh:"%d horas",d:"un da",dd:"%d das",M:"un mes",MM:"%d meses",y:"un ano",yy:"%d anos"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(n(30381))},27884:function(t,e,n){!function(t){"use strict";function e(t,e,n,i){var r={s:[" "," "],ss:[t+" ",t+" "],m:[" "," "],mm:[t+" ",t+" "],h:[" "," "],hh:[t+" ",t+" "],d:[" "," "],dd:[t+" ",t+" "],M:[" "," "],MM:[t+" ",t+" "],y:[" "," "],yy:[t+" ",t+" "]};return i?r[n][0]:r[n][1]}t.defineLocale("gom-deva",{months:{standalone:"___________".split("_"),format:"___________".split("_"),isFormat:/MMMM(\s)+D[oD]?/},monthsShort:"._.__.___._._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"._._._._._._.".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"A h:mm []",LTS:"A h:mm:ss []",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY A h:mm []",LLLL:"dddd, MMMM Do, YYYY, A h:mm []",llll:"ddd, D MMM YYYY, A h:mm []"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[] dddd[,] LT",lastDay:"[] LT",lastWeek:"[] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s ",s:e,ss:e,m:e,mm:e,h:e,hh:e,d:e,dd:e,M:e,MM:e,y:e,yy:e},dayOfMonthOrdinalParse:/\d{1,2}()/,ordinal:function(t,e){return"D"===e?t+"":t},week:{dow:0,doy:3},meridiemParse:/|||/,meridiemHour:function(t,e){return 12===t&&(t=0),""===e?t<4?t:t+12:""===e?t:""===e?t>12?t:t+12:""===e?t+12:void 0},meridiem:function(t,e,n){return t<4?"":t<12?"":t<16?"":t<20?"":""}})}(n(30381))},23168:function(t,e,n){!function(t){"use strict";function e(t,e,n,i){var r={s:["thoddea sekondamni","thodde sekond"],ss:[t+" sekondamni",t+" sekond"],m:["eka mintan","ek minut"],mm:[t+" mintamni",t+" mintam"],h:["eka voran","ek vor"],hh:[t+" voramni",t+" voram"],d:["eka disan","ek dis"],dd:[t+" disamni",t+" dis"],M:["eka mhoinean","ek mhoino"],MM:[t+" mhoineamni",t+" mhoine"],y:["eka vorsan","ek voros"],yy:[t+" vorsamni",t+" vorsam"]};return i?r[n][0]:r[n][1]}t.defineLocale("gom-latn",{months:{standalone:"Janer_Febrer_Mars_Abril_Mai_Jun_Julai_Agost_Setembr_Otubr_Novembr_Dezembr".split("_"),format:"Janerachea_Febrerachea_Marsachea_Abrilachea_Maiachea_Junachea_Julaiachea_Agostachea_Setembrachea_Otubrachea_Novembrachea_Dezembrachea".split("_"),isFormat:/MMMM(\s)+D[oD]?/},monthsShort:"Jan._Feb._Mars_Abr._Mai_Jun_Jul._Ago._Set._Otu._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Aitar_Somar_Mongllar_Budhvar_Birestar_Sukrar_Son'var".split("_"),weekdaysShort:"Ait._Som._Mon._Bud._Bre._Suk._Son.".split("_"),weekdaysMin:"Ai_Sm_Mo_Bu_Br_Su_Sn".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"A h:mm [vazta]",LTS:"A h:mm:ss [vazta]",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY A h:mm [vazta]",LLLL:"dddd, MMMM Do, YYYY, A h:mm [vazta]",llll:"ddd, D MMM YYYY, A h:mm [vazta]"},calendar:{sameDay:"[Aiz] LT",nextDay:"[Faleam] LT",nextWeek:"[Fuddlo] dddd[,] LT",lastDay:"[Kal] LT",lastWeek:"[Fattlo] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s adim",s:e,ss:e,m:e,mm:e,h:e,hh:e,d:e,dd:e,M:e,MM:e,y:e,yy:e},dayOfMonthOrdinalParse:/\d{1,2}(er)/,ordinal:function(t,e){return"D"===e?t+"er":t},week:{dow:0,doy:3},meridiemParse:/rati|sokallim|donparam|sanje/,meridiemHour:function(t,e){return 12===t&&(t=0),"rati"===e?t<4?t:t+12:"sokallim"===e?t:"donparam"===e?t>12?t:t+12:"sanje"===e?t+12:void 0},meridiem:function(t,e,n){return t<4?"rati":t<12?"sokallim":t<16?"donparam":t<20?"sanje":"rati"}})}(n(30381))},95349:function(t,e,n){!function(t){"use strict";var e={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};t.defineLocale("gu",{months:"___________".split("_"),monthsShort:"._.__.___._._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(t){return t.replace(/[]/g,(function(t){return n[t]}))},postformat:function(t){return t.replace(/\d/g,(function(t){return e[t]}))},meridiemParse:/|||/,meridiemHour:function(t,e){return 12===t&&(t=0),""===e?t<4?t:t+12:""===e?t:""===e?t>=10?t:t+12:""===e?t+12:void 0},meridiem:function(t,e,n){return t<4?"":t<10?"":t<17?"":t<20?"":""},week:{dow:0,doy:6}})}(n(30381))},24206:function(t,e,n){!function(t){"use strict";t.defineLocale("he",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D []MMMM YYYY",LLL:"D []MMMM YYYY HH:mm",LLLL:"dddd, D []MMMM YYYY HH:mm",l:"D/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[ ]LT",nextDay:"[ ]LT",nextWeek:"dddd [] LT",lastDay:"[ ]LT",lastWeek:"[] dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",ss:"%d ",m:"",mm:"%d ",h:"",hh:function(t){return 2===t?"":t+" "},d:"",dd:function(t){return 2===t?"":t+" "},M:"",MM:function(t){return 2===t?"":t+" "},y:"",yy:function(t){return 2===t?"":t%10==0&&10!==t?t+" ":t+" "}},meridiemParse:/"|"| | | ||/i,isPM:function(t){return/^("| |)$/.test(t)},meridiem:function(t,e,n){return t<5?" ":t<10?"":t<12?n?'"':" ":t<18?n?'"':" ":""}})}(n(30381))},30094:function(t,e,n){!function(t){"use strict";var e={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"},i=[/^/i,/^|/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^|/i,/^/i,/^|/i,/^|/i],r=[/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i];t.defineLocale("hi",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:"._.__.___._._._._._.".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},monthsParse:i,longMonthsParse:i,shortMonthsParse:r,monthsRegex:/^(|\.?|||\.?|?||\.?|?|?||\.?||\.?|||\.?||\.?|||\.?|||\.?)/i,monthsShortRegex:/^(|\.?|||\.?|?||\.?|?|?||\.?||\.?|||\.?||\.?|||\.?|||\.?)/i,monthsStrictRegex:/^(?||?|?|?|?|?|?|?|||?\.?||\.?||?||?)/i,monthsShortStrictRegex:/^(\.?|\.?|?|\.?|?|?|\.?|\.?|\.?|\.?|\.?|\.?)/i,calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"  ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(t){return t.replace(/[]/g,(function(t){return n[t]}))},postformat:function(t){return t.replace(/\d/g,(function(t){return e[t]}))},meridiemParse:/|||/,meridiemHour:function(t,e){return 12===t&&(t=0),""===e?t<4?t:t+12:""===e?t:""===e?t>=10?t:t+12:""===e?t+12:void 0},meridiem:function(t,e,n){return t<4?"":t<10?"":t<17?"":t<20?"":""},week:{dow:0,doy:6}})}(n(30381))},30316:function(t,e,n){!function(t){"use strict";function e(t,e,n){var i=t+" ";switch(n){case"ss":return i+=1===t?"sekunda":2===t||3===t||4===t?"sekunde":"sekundi";case"m":return e?"jedna minuta":"jedne minute";case"mm":return i+=1===t?"minuta":2===t||3===t||4===t?"minute":"minuta";case"h":return e?"jedan sat":"jednog sata";case"hh":return i+=1===t?"sat":2===t||3===t||4===t?"sata":"sati";case"dd":return i+=1===t?"dan":"dana";case"MM":return i+=1===t?"mjesec":2===t||3===t||4===t?"mjeseca":"mjeseci";case"yy":return i+=1===t?"godina":2===t||3===t||4===t?"godine":"godina"}}t.defineLocale("hr",{months:{format:"sijenja_veljae_oujka_travnja_svibnja_lipnja_srpnja_kolovoza_rujna_listopada_studenoga_prosinca".split("_"),standalone:"sijeanj_veljaa_oujak_travanj_svibanj_lipanj_srpanj_kolovoz_rujan_listopad_studeni_prosinac".split("_")},monthsShort:"sij._velj._ou._tra._svi._lip._srp._kol._ruj._lis._stu._pro.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_etvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._et._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_e_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"Do MMMM YYYY",LLL:"Do MMMM YYYY H:mm",LLLL:"dddd, Do MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juer u] LT",lastWeek:function(){switch(this.day()){case 0:return"[prolu] [nedjelju] [u] LT";case 3:return"[prolu] [srijedu] [u] LT";case 6:return"[prole] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[proli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",ss:e,m:e,mm:e,h:e,hh:e,d:"dan",dd:e,M:"mjesec",MM:e,y:"godinu",yy:e},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(30381))},22138:function(t,e,n){!function(t){"use strict";var e="vasrnap htfn kedden szerdn cstrtkn pnteken szombaton".split(" ");function n(t,e,n,i){var r=t;switch(n){case"s":return i||e?"nhny msodperc":"nhny msodperce";case"ss":return r+(i||e)?" msodperc":" msodperce";case"m":return"egy"+(i||e?" perc":" perce");case"mm":return r+(i||e?" perc":" perce");case"h":return"egy"+(i||e?" ra":" rja");case"hh":return r+(i||e?" ra":" rja");case"d":return"egy"+(i||e?" nap":" napja");case"dd":return r+(i||e?" nap":" napja");case"M":return"egy"+(i||e?" hnap":" hnapja");case"MM":return r+(i||e?" hnap":" hnapja");case"y":return"egy"+(i||e?" v":" ve");case"yy":return r+(i||e?" v":" ve")}return""}function i(t){return(t?"":"[mlt] ")+"["+e[this.day()]+"] LT[-kor]"}t.defineLocale("hu",{months:"janur_februr_mrcius_prilis_mjus_jnius_jlius_augusztus_szeptember_oktber_november_december".split("_"),monthsShort:"jan._feb._mrc._pr._mj._jn._jl._aug._szept._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"vasrnap_htf_kedd_szerda_cstrtk_pntek_szombat".split("_"),weekdaysShort:"vas_ht_kedd_sze_cst_pn_szo".split("_"),weekdaysMin:"v_h_k_sze_cs_p_szo".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"YYYY.MM.DD.",LL:"YYYY. MMMM D.",LLL:"YYYY. MMMM D. H:mm",LLLL:"YYYY. MMMM D., dddd H:mm"},meridiemParse:/de|du/i,isPM:function(t){return"u"===t.charAt(1).toLowerCase()},meridiem:function(t,e,n){return t<12?!0===n?"de":"DE":!0===n?"du":"DU"},calendar:{sameDay:"[ma] LT[-kor]",nextDay:"[holnap] LT[-kor]",nextWeek:function(){return i.call(this,!0)},lastDay:"[tegnap] LT[-kor]",lastWeek:function(){return i.call(this,!1)},sameElse:"L"},relativeTime:{future:"%s mlva",past:"%s",s:n,ss:n,m:n,mm:n,h:n,hh:n,d:n,dd:n,M:n,MM:n,y:n,yy:n},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(30381))},11423:function(t,e,n){!function(t){"use strict";t.defineLocale("hy-am",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., HH:mm",LLLL:"dddd, D MMMM YYYY ., HH:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",lastDay:"[] LT",nextWeek:function(){return"dddd [ ] LT"},lastWeek:function(){return"[] dddd [ ] LT"},sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"  ",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},meridiemParse:/|||/,isPM:function(t){return/^(|)$/.test(t)},meridiem:function(t){return t<4?"":t<12?"":t<17?"":""},dayOfMonthOrdinalParse:/\d{1,2}|\d{1,2}-(|)/,ordinal:function(t,e){switch(e){case"DDD":case"w":case"W":case"DDDo":return 1===t?t+"-":t+"-";default:return t}},week:{dow:1,doy:7}})}(n(30381))},29218:function(t,e,n){!function(t){"use strict";t.defineLocale("id",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Agt_Sep_Okt_Nov_Des".split("_"),weekdays:"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),weekdaysShort:"Min_Sen_Sel_Rab_Kam_Jum_Sab".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|siang|sore|malam/,meridiemHour:function(t,e){return 12===t&&(t=0),"pagi"===e?t:"siang"===e?t>=11?t:t+12:"sore"===e||"malam"===e?t+12:void 0},meridiem:function(t,e,n){return t<11?"pagi":t<15?"siang":t<19?"sore":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Besok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kemarin pukul] LT",lastWeek:"dddd [lalu pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lalu",s:"beberapa detik",ss:"%d detik",m:"semenit",mm:"%d menit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:0,doy:6}})}(n(30381))},90135:function(t,e,n){!function(t){"use strict";function e(t){return t%100==11||t%10!=1}function n(t,n,i,r){var o=t+" ";switch(i){case"s":return n||r?"nokkrar sekndur":"nokkrum sekndum";case"ss":return e(t)?o+(n||r?"sekndur":"sekndum"):o+"seknda";case"m":return n?"mnta":"mntu";case"mm":return e(t)?o+(n||r?"mntur":"mntum"):n?o+"mnta":o+"mntu";case"hh":return e(t)?o+(n||r?"klukkustundir":"klukkustundum"):o+"klukkustund";case"d":return n?"dagur":r?"dag":"degi";case"dd":return e(t)?n?o+"dagar":o+(r?"daga":"dgum"):n?o+"dagur":o+(r?"dag":"degi");case"M":return n?"mnuur":r?"mnu":"mnui";case"MM":return e(t)?n?o+"mnuir":o+(r?"mnui":"mnuum"):n?o+"mnuur":o+(r?"mnu":"mnui");case"y":return n||r?"r":"ri";case"yy":return e(t)?o+(n||r?"r":"rum"):o+(n||r?"r":"ri")}}t.defineLocale("is",{months:"janar_febrar_mars_aprl_ma_jn_jl_gst_september_oktber_nvember_desember".split("_"),monthsShort:"jan_feb_mar_apr_ma_jn_jl_g_sep_okt_nv_des".split("_"),weekdays:"sunnudagur_mnudagur_rijudagur_mivikudagur_fimmtudagur_fstudagur_laugardagur".split("_"),weekdaysShort:"sun_mn_ri_mi_fim_fs_lau".split("_"),weekdaysMin:"Su_M_r_Mi_Fi_F_La".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] H:mm",LLLL:"dddd, D. MMMM YYYY [kl.] H:mm"},calendar:{sameDay:"[ dag kl.] LT",nextDay:"[ morgun kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[ gr kl.] LT",lastWeek:"[sasta] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"eftir %s",past:"fyrir %s san",s:n,ss:n,m:n,mm:n,h:"klukkustund",hh:n,d:n,dd:n,M:n,MM:n,y:n,yy:n},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(30381))},10150:function(t,e,n){!function(t){"use strict";t.defineLocale("it-ch",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"domenica_luned_marted_mercoled_gioved_venerd_sabato".split("_"),weekdaysShort:"dom_lun_mar_mer_gio_ven_sab".split("_"),weekdaysMin:"do_lu_ma_me_gi_ve_sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Oggi alle] LT",nextDay:"[Domani alle] LT",nextWeek:"dddd [alle] LT",lastDay:"[Ieri alle] LT",lastWeek:function(){return 0===this.day()?"[la scorsa] dddd [alle] LT":"[lo scorso] dddd [alle] LT"},sameElse:"L"},relativeTime:{future:function(t){return(/^[0-9].+$/.test(t)?"tra":"in")+" "+t},past:"%s fa",s:"alcuni secondi",ss:"%d secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(n(30381))},90626:function(t,e,n){!function(t){"use strict";t.defineLocale("it",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"domenica_luned_marted_mercoled_gioved_venerd_sabato".split("_"),weekdaysShort:"dom_lun_mar_mer_gio_ven_sab".split("_"),weekdaysMin:"do_lu_ma_me_gi_ve_sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:function(){return"[Oggi a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT"},nextDay:function(){return"[Domani a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT"},nextWeek:function(){return"dddd [a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT"},lastDay:function(){return"[Ieri a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT"},lastWeek:function(){return 0===this.day()?"[La scorsa] dddd [a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT":"[Lo scorso] dddd [a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT"},sameElse:"L"},relativeTime:{future:"tra %s",past:"%s fa",s:"alcuni secondi",ss:"%d secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",w:"una settimana",ww:"%d settimane",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(n(30381))},39183:function(t,e,n){!function(t){"use strict";t.defineLocale("ja",{eras:[{since:"2019-05-01",offset:1,name:"",narrow:"",abbr:"R"},{since:"1989-01-08",until:"2019-04-30",offset:1,name:"",narrow:"",abbr:"H"},{since:"1926-12-25",until:"1989-01-07",offset:1,name:"",narrow:"",abbr:"S"},{since:"1912-07-30",until:"1926-12-24",offset:1,name:"",narrow:"",abbr:"T"},{since:"1873-01-01",until:"1912-07-29",offset:6,name:"",narrow:"",abbr:"M"},{since:"0001-01-01",until:"1873-12-31",offset:1,name:"",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"",narrow:"BC",abbr:"BC"}],eraYearOrdinalRegex:/(|\d+)/,eraYearOrdinalParse:function(t,e){return""===e[1]?1:parseInt(e[1]||t,10)},months:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYYMD",LLL:"YYYYMD HH:mm",LLLL:"YYYYMD dddd HH:mm",l:"YYYY/MM/DD",ll:"YYYYMD",lll:"YYYYMD HH:mm",llll:"YYYYMD(ddd) HH:mm"},meridiemParse:/|/i,isPM:function(t){return""===t},meridiem:function(t,e,n){return t<12?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:function(t){return t.week()!==this.week()?"[]dddd LT":"dddd LT"},lastDay:"[] LT",lastWeek:function(t){return this.week()!==t.week()?"[]dddd LT":"dddd LT"},sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(t,e){switch(e){case"y":return 1===t?"":t+"";case"d":case"D":case"DDD":return t+"";default:return t}},relativeTime:{future:"%s",past:"%s",s:"",ss:"%d",m:"1",mm:"%d",h:"1",hh:"%d",d:"1",dd:"%d",M:"1",MM:"%d",y:"1",yy:"%d"}})}(n(30381))},24286:function(t,e,n){!function(t){"use strict";t.defineLocale("jv",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_Nopember_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nop_Des".split("_"),weekdays:"Minggu_Senen_Seloso_Rebu_Kemis_Jemuwah_Septu".split("_"),weekdaysShort:"Min_Sen_Sel_Reb_Kem_Jem_Sep".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sp".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/enjing|siyang|sonten|ndalu/,meridiemHour:function(t,e){return 12===t&&(t=0),"enjing"===e?t:"siyang"===e?t>=11?t:t+12:"sonten"===e||"ndalu"===e?t+12:void 0},meridiem:function(t,e,n){return t<11?"enjing":t<15?"siyang":t<19?"sonten":"ndalu"},calendar:{sameDay:"[Dinten puniko pukul] LT",nextDay:"[Mbenjang pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kala wingi pukul] LT",lastWeek:"dddd [kepengker pukul] LT",sameElse:"L"},relativeTime:{future:"wonten ing %s",past:"%s ingkang kepengker",s:"sawetawis detik",ss:"%d detik",m:"setunggal menit",mm:"%d menit",h:"setunggal jam",hh:"%d jam",d:"sedinten",dd:"%d dinten",M:"sewulan",MM:"%d wulan",y:"setaun",yy:"%d taun"},week:{dow:1,doy:7}})}(n(30381))},12105:function(t,e,n){!function(t){"use strict";t.defineLocale("ka",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:{standalone:"______".split("_"),format:"______".split("_"),isFormat:/(|)/},weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[] LT[-]",nextDay:"[] LT[-]",lastDay:"[] LT[-]",nextWeek:"[] dddd LT[-]",lastWeek:"[] dddd LT-",sameElse:"L"},relativeTime:{future:function(t){return t.replace(/(|||||)(|)/,(function(t,e,n){return""===n?e+"":e+n+""}))},past:function(t){return/(||||)/.test(t)?t.replace(/(|)$/," ")://.test(t)?t.replace(/$/," "):t},s:" ",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},dayOfMonthOrdinalParse:/0|1-|-\d{1,2}|\d{1,2}-/,ordinal:function(t){return 0===t?t:1===t?t+"-":t<20||t<=100&&t%20==0||t%100==0?"-"+t:t+"-"},week:{dow:1,doy:7}})}(n(30381))},47772:function(t,e,n){!function(t){"use strict";var e={0:"-",1:"-",2:"-",3:"-",4:"-",5:"-",6:"-",7:"-",8:"-",9:"-",10:"-",20:"-",30:"-",40:"-",50:"-",60:"-",70:"-",80:"-",90:"-",100:"-"};t.defineLocale("kk",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"[ ] dddd [] LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}-(|)/,ordinal:function(t){var n=t%10,i=t>=100?100:null;return t+(e[t]||e[n]||e[i])},week:{dow:1,doy:7}})}(n(30381))},18758:function(t,e,n){!function(t){"use strict";var e={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};t.defineLocale("km",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(t){return""===t},meridiem:function(t,e,n){return t<12?"":""},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"dddd [] [] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s",s:"",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",preparse:function(t){return t.replace(/[]/g,(function(t){return n[t]}))},postformat:function(t){return t.replace(/\d/g,(function(t){return e[t]}))},week:{dow:1,doy:4}})}(n(30381))},79282:function(t,e,n){!function(t){"use strict";var e={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};t.defineLocale("kn",{months:"___________".split("_"),monthsShort:"___________".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(t){return t.replace(/[]/g,(function(t){return n[t]}))},postformat:function(t){return t.replace(/\d/g,(function(t){return e[t]}))},meridiemParse:/|||/,meridiemHour:function(t,e){return 12===t&&(t=0),""===e?t<4?t:t+12:""===e?t:""===e?t>=10?t:t+12:""===e?t+12:void 0},meridiem:function(t,e,n){return t<4?"":t<10?"":t<17?"":t<20?"":""},dayOfMonthOrdinalParse:/\d{1,2}()/,ordinal:function(t){return t+""},week:{dow:0,doy:6}})}(n(30381))},33730:function(t,e,n){!function(t){"use strict";t.defineLocale("ko",{months:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"YYYY.MM.DD.",LL:"YYYY MMMM D",LLL:"YYYY MMMM D A h:mm",LLLL:"YYYY MMMM D dddd A h:mm",l:"YYYY.MM.DD.",ll:"YYYY MMMM D",lll:"YYYY MMMM D A h:mm",llll:"YYYY MMMM D dddd A h:mm"},calendar:{sameDay:" LT",nextDay:" LT",nextWeek:"dddd LT",lastDay:" LT",lastWeek:" dddd LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d",m:"1",mm:"%d",h:" ",hh:"%d",d:"",dd:"%d",M:" ",MM:"%d",y:" ",yy:"%d"},dayOfMonthOrdinalParse:/\d{1,2}(||)/,ordinal:function(t,e){switch(e){case"d":case"D":case"DDD":return t+"";case"M":return t+"";case"w":case"W":return t+"";default:return t}},meridiemParse:/|/,isPM:function(t){return""===t},meridiem:function(t,e,n){return t<12?"":""}})}(n(30381))},1408:function(t,e,n){!function(t){"use strict";var e={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"},i=[" ","","","","","","","",""," "," "," "];t.defineLocale("ku",{months:i,monthsShort:i,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(t){return//.test(t)},meridiem:function(t,e,n){return t<12?"":""},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"dddd [] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s",s:" ",ss:" %d",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(t){return t.replace(/[]/g,(function(t){return n[t]})).replace(//g,",")},postformat:function(t){return t.replace(/\d/g,(function(t){return e[t]})).replace(/,/g,"")},week:{dow:6,doy:12}})}(n(30381))},33291:function(t,e,n){!function(t){"use strict";var e={0:"-",1:"-",2:"-",3:"-",4:"-",5:"-",6:"-",7:"-",8:"-",9:"-",10:"-",20:"-",30:"-",40:"-",50:"-",60:"-",70:"-",80:"-",90:"-",100:"-"};t.defineLocale("ky",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"[ ] dddd [] [] LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}-(|||)/,ordinal:function(t){var n=t%10,i=t>=100?100:null;return t+(e[t]||e[n]||e[i])},week:{dow:1,doy:7}})}(n(30381))},36841:function(t,e,n){!function(t){"use strict";function e(t,e,n,i){var r={m:["eng Minutt","enger Minutt"],h:["eng Stonn","enger Stonn"],d:["een Dag","engem Dag"],M:["ee Mount","engem Mount"],y:["ee Joer","engem Joer"]};return e?r[n][0]:r[n][1]}function n(t){return r(t.substr(0,t.indexOf(" ")))?"a "+t:"an "+t}function i(t){return r(t.substr(0,t.indexOf(" ")))?"viru "+t:"virun "+t}function r(t){if(t=parseInt(t,10),isNaN(t))return!1;if(t<0)return!0;if(t<10)return 4<=t&&t<=7;if(t<100){var e=t%10;return r(0===e?t/10:e)}if(t<1e4){for(;t>=10;)t/=10;return r(t)}return r(t/=1e3)}t.defineLocale("lb",{months:"Januar_Februar_Merz_Abrll_Mee_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Abr._Mee_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonndeg_Mindeg_Dnschdeg_Mttwoch_Donneschdeg_Freideg_Samschdeg".split("_"),weekdaysShort:"So._M._D._M._Do._Fr._Sa.".split("_"),weekdaysMin:"So_M_D_M_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm [Auer]",LTS:"H:mm:ss [Auer]",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm [Auer]",LLLL:"dddd, D. MMMM YYYY H:mm [Auer]"},calendar:{sameDay:"[Haut um] LT",sameElse:"L",nextDay:"[Muer um] LT",nextWeek:"dddd [um] LT",lastDay:"[Gschter um] LT",lastWeek:function(){switch(this.day()){case 2:case 4:return"[Leschten] dddd [um] LT";default:return"[Leschte] dddd [um] LT"}}},relativeTime:{future:n,past:i,s:"e puer Sekonnen",ss:"%d Sekonnen",m:e,mm:"%d Minutten",h:e,hh:"%d Stonnen",d:e,dd:"%d Deeg",M:e,MM:"%d Mint",y:e,yy:"%d Joer"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(30381))},55466:function(t,e,n){!function(t){"use strict";t.defineLocale("lo",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(t){return""===t},meridiem:function(t,e,n){return t<12?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[]dddd[] LT",lastDay:"[] LT",lastWeek:"[]dddd[] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s",s:"",ss:"%d ",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "},dayOfMonthOrdinalParse:/()\d{1,2}/,ordinal:function(t){return""+t}})}(n(30381))},57010:function(t,e,n){!function(t){"use strict";var e={ss:"sekund_sekundi_sekundes",m:"minut_minuts_minut",mm:"minuts_minui_minutes",h:"valanda_valandos_valand",hh:"valandos_valand_valandas",d:"diena_dienos_dien",dd:"dienos_dien_dienas",M:"mnuo_mnesio_mnes",MM:"mnesiai_mnesi_mnesius",y:"metai_met_metus",yy:"metai_met_metus"};function n(t,e,n,i){return e?"kelios sekunds":i?"keli sekundi":"kelias sekundes"}function i(t,e,n,i){return e?o(n)[0]:i?o(n)[1]:o(n)[2]}function r(t){return t%10==0||t>10&&t<20}function o(t){return e[t].split("_")}function a(t,e,n,a){var s=t+" ";return 1===t?s+i(t,e,n[0],a):e?s+(r(t)?o(n)[1]:o(n)[0]):a?s+o(n)[1]:s+(r(t)?o(n)[1]:o(n)[2])}t.defineLocale("lt",{months:{format:"sausio_vasario_kovo_balandio_gegus_birelio_liepos_rugpjio_rugsjo_spalio_lapkriio_gruodio".split("_"),standalone:"sausis_vasaris_kovas_balandis_gegu_birelis_liepa_rugpjtis_rugsjis_spalis_lapkritis_gruodis".split("_"),isFormat:/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?|MMMM?(\[[^\[\]]*\]|\s)+D[oD]?/},monthsShort:"sau_vas_kov_bal_geg_bir_lie_rgp_rgs_spa_lap_grd".split("_"),weekdays:{format:"sekmadien_pirmadien_antradien_treiadien_ketvirtadien_penktadien_etadien".split("_"),standalone:"sekmadienis_pirmadienis_antradienis_treiadienis_ketvirtadienis_penktadienis_etadienis".split("_"),isFormat:/dddd HH:mm/},weekdaysShort:"Sek_Pir_Ant_Tre_Ket_Pen_e".split("_"),weekdaysMin:"S_P_A_T_K_Pn_".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY [m.] MMMM D [d.]",LLL:"YYYY [m.] MMMM D [d.], HH:mm [val.]",LLLL:"YYYY [m.] MMMM D [d.], dddd, HH:mm [val.]",l:"YYYY-MM-DD",ll:"YYYY [m.] MMMM D [d.]",lll:"YYYY [m.] MMMM D [d.], HH:mm [val.]",llll:"YYYY [m.] MMMM D [d.], ddd, HH:mm [val.]"},calendar:{sameDay:"[iandien] LT",nextDay:"[Rytoj] LT",nextWeek:"dddd LT",lastDay:"[Vakar] LT",lastWeek:"[Prajus] dddd LT",sameElse:"L"},relativeTime:{future:"po %s",past:"prie %s",s:n,ss:a,m:i,mm:a,h:i,hh:a,d:i,dd:a,M:i,MM:a,y:i,yy:a},dayOfMonthOrdinalParse:/\d{1,2}-oji/,ordinal:function(t){return t+"-oji"},week:{dow:1,doy:4}})}(n(30381))},37595:function(t,e,n){!function(t){"use strict";var e={ss:"sekundes_sekundm_sekunde_sekundes".split("_"),m:"mintes_mintm_minte_mintes".split("_"),mm:"mintes_mintm_minte_mintes".split("_"),h:"stundas_stundm_stunda_stundas".split("_"),hh:"stundas_stundm_stunda_stundas".split("_"),d:"dienas_dienm_diena_dienas".split("_"),dd:"dienas_dienm_diena_dienas".split("_"),M:"mnea_mneiem_mnesis_mnei".split("_"),MM:"mnea_mneiem_mnesis_mnei".split("_"),y:"gada_gadiem_gads_gadi".split("_"),yy:"gada_gadiem_gads_gadi".split("_")};function n(t,e,n){return n?e%10==1&&e%100!=11?t[2]:t[3]:e%10==1&&e%100!=11?t[0]:t[1]}function i(t,i,r){return t+" "+n(e[r],t,i)}function r(t,i,r){return n(e[r],t,i)}function o(t,e){return e?"daas sekundes":"dam sekundm"}t.defineLocale("lv",{months:"janvris_februris_marts_aprlis_maijs_jnijs_jlijs_augusts_septembris_oktobris_novembris_decembris".split("_"),monthsShort:"jan_feb_mar_apr_mai_jn_jl_aug_sep_okt_nov_dec".split("_"),weekdays:"svtdiena_pirmdiena_otrdiena_trediena_ceturtdiena_piektdiena_sestdiena".split("_"),weekdaysShort:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysMin:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY.",LL:"YYYY. [gada] D. MMMM",LLL:"YYYY. [gada] D. MMMM, HH:mm",LLLL:"YYYY. [gada] D. MMMM, dddd, HH:mm"},calendar:{sameDay:"[odien pulksten] LT",nextDay:"[Rt pulksten] LT",nextWeek:"dddd [pulksten] LT",lastDay:"[Vakar pulksten] LT",lastWeek:"[Pagju] dddd [pulksten] LT",sameElse:"L"},relativeTime:{future:"pc %s",past:"pirms %s",s:o,ss:i,m:r,mm:i,h:r,hh:i,d:r,dd:i,M:r,MM:i,y:r,yy:i},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(30381))},39861:function(t,e,n){!function(t){"use strict";var e={words:{ss:["sekund","sekunda","sekundi"],m:["jedan minut","jednog minuta"],mm:["minut","minuta","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan","dana","dana"],MM:["mjesec","mjeseca","mjeseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(t,e){return 1===t?e[0]:t>=2&&t<=4?e[1]:e[2]},translate:function(t,n,i){var r=e.words[i];return 1===i.length?n?r[0]:r[1]:t+" "+e.correctGrammaticalCase(t,r)}};t.defineLocale("me",{months:"januar_februar_mart_april_maj_jun_jul_avgust_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj_jun_jul_avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_etvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._et._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_e_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sjutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jue u] LT",lastWeek:function(){return["[prole] [nedjelje] [u] LT","[prolog] [ponedjeljka] [u] LT","[prolog] [utorka] [u] LT","[prole] [srijede] [u] LT","[prolog] [etvrtka] [u] LT","[prolog] [petka] [u] LT","[prole] [subote] [u] LT"][this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"nekoliko sekundi",ss:e.translate,m:e.translate,mm:e.translate,h:e.translate,hh:e.translate,d:"dan",dd:e.translate,M:"mjesec",MM:e.translate,y:"godinu",yy:e.translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(30381))},35493:function(t,e,n){!function(t){"use strict";t.defineLocale("mi",{months:"Kohi-tte_Hui-tanguru_Pout-te-rangi_Paenga-whwh_Haratua_Pipiri_Hngoingoi_Here-turi-kk_Mahuru_Whiringa--nuku_Whiringa--rangi_Hakihea".split("_"),monthsShort:"Kohi_Hui_Pou_Pae_Hara_Pipi_Hngoi_Here_Mahu_Whi-nu_Whi-ra_Haki".split("_"),monthsRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsStrictRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsShortRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsShortStrictRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,2}/i,weekdays:"Rtapu_Mane_Trei_Wenerei_Tite_Paraire_Htarei".split("_"),weekdaysShort:"Ta_Ma_T_We_Ti_Pa_H".split("_"),weekdaysMin:"Ta_Ma_T_We_Ti_Pa_H".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [i] HH:mm",LLLL:"dddd, D MMMM YYYY [i] HH:mm"},calendar:{sameDay:"[i teie mahana, i] LT",nextDay:"[apopo i] LT",nextWeek:"dddd [i] LT",lastDay:"[inanahi i] LT",lastWeek:"dddd [whakamutunga i] LT",sameElse:"L"},relativeTime:{future:"i roto i %s",past:"%s i mua",s:"te hkona ruarua",ss:"%d hkona",m:"he meneti",mm:"%d meneti",h:"te haora",hh:"%d haora",d:"he ra",dd:"%d ra",M:"he marama",MM:"%d marama",y:"he tau",yy:"%d tau"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(n(30381))},95966:function(t,e,n){!function(t){"use strict";t.defineLocale("mk",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"e_o_____a".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"[] dddd [] LT",lastDay:"[ ] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[] dddd [] LT";case 1:case 2:case 4:case 5:return"[] dddd [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}-(|||||)/,ordinal:function(t){var e=t%10,n=t%100;return 0===t?t+"-":0===n?t+"-":n>10&&n<20?t+"-":1===e?t+"-":2===e?t+"-":7===e||8===e?t+"-":t+"-"},week:{dow:1,doy:7}})}(n(30381))},87341:function(t,e,n){!function(t){"use strict";t.defineLocale("ml",{months:"___________".split("_"),monthsShort:"._._._.___._._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm -",LTS:"A h:mm:ss -",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm -",LLLL:"dddd, D MMMM YYYY, A h:mm -"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},meridiemParse:/|| ||/i,meridiemHour:function(t,e){return 12===t&&(t=0),""===e&&t>=4||" "===e||""===e?t+12:t},meridiem:function(t,e,n){return t<4?"":t<12?"":t<17?" ":t<20?"":""}})}(n(30381))},5115:function(t,e,n){!function(t){"use strict";function e(t,e,n,i){switch(n){case"s":return e?" ":" ";case"ss":return t+(e?" ":" ");case"m":case"mm":return t+(e?" ":" ");case"h":case"hh":return t+(e?" ":" ");case"d":case"dd":return t+(e?" ":" ");case"M":case"MM":return t+(e?" ":" ");case"y":case"yy":return t+(e?" ":" ");default:return t}}t.defineLocale("mn",{months:" _ _ _ _ _ _ _ _ _ _  _  ".split("_"),monthsShort:"1 _2 _3 _4 _5 _6 _7 _8 _9 _10 _11 _12 ".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY  MMMM D",LLL:"YYYY  MMMM D HH:mm",LLLL:"dddd, YYYY  MMMM D HH:mm"},meridiemParse:/|/i,isPM:function(t){return""===t},meridiem:function(t,e,n){return t<12?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[] dddd LT",lastDay:"[] LT",lastWeek:"[] dddd LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:e,ss:e,m:e,mm:e,h:e,hh:e,d:e,dd:e,M:e,MM:e,y:e,yy:e},dayOfMonthOrdinalParse:/\d{1,2} /,ordinal:function(t,e){switch(e){case"d":case"D":case"DDD":return t+" ";default:return t}}})}(n(30381))},10370:function(t,e,n){!function(t){"use strict";var e={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};function i(t,e,n,i){var r="";if(e)switch(n){case"s":r=" ";break;case"ss":r="%d ";break;case"m":r=" ";break;case"mm":r="%d ";break;case"h":r=" ";break;case"hh":r="%d ";break;case"d":r=" ";break;case"dd":r="%d ";break;case"M":r=" ";break;case"MM":r="%d ";break;case"y":r=" ";break;case"yy":r="%d "}else switch(n){case"s":r=" ";break;case"ss":r="%d ";break;case"m":r=" ";break;case"mm":r="%d ";break;case"h":r=" ";break;case"hh":r="%d ";break;case"d":r=" ";break;case"dd":r="%d ";break;case"M":r=" ";break;case"MM":r="%d ";break;case"y":r=" ";break;case"yy":r="%d "}return r.replace(/%d/i,t)}t.defineLocale("mr",{months:"___________".split("_"),monthsShort:"._._._._._._._._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s",s:i,ss:i,m:i,mm:i,h:i,hh:i,d:i,dd:i,M:i,MM:i,y:i,yy:i},preparse:function(t){return t.replace(/[]/g,(function(t){return n[t]}))},postformat:function(t){return t.replace(/\d/g,(function(t){return e[t]}))},meridiemParse:/||||/,meridiemHour:function(t,e){return 12===t&&(t=0),""===e||""===e?t:""===e||""===e||""===e?t>=12?t:t+12:void 0},meridiem:function(t,e,n){return t>=0&&t<6?"":t<12?"":t<17?"":t<20?"":""},week:{dow:0,doy:6}})}(n(30381))},41237:function(t,e,n){!function(t){"use strict";t.defineLocale("ms-my",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(t,e){return 12===t&&(t=0),"pagi"===e?t:"tengahari"===e?t>=11?t:t+12:"petang"===e||"malam"===e?t+12:void 0},meridiem:function(t,e,n){return t<11?"pagi":t<15?"tengahari":t<19?"petang":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",ss:"%d saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}})}(n(30381))},9847:function(t,e,n){!function(t){"use strict";t.defineLocale("ms",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(t,e){return 12===t&&(t=0),"pagi"===e?t:"tengahari"===e?t>=11?t:t+12:"petang"===e||"malam"===e?t+12:void 0},meridiem:function(t,e,n){return t<11?"pagi":t<15?"tengahari":t<19?"petang":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",ss:"%d saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}})}(n(30381))},72126:function(t,e,n){!function(t){"use strict";t.defineLocale("mt",{months:"Jannar_Frar_Marzu_April_Mejju_unju_Lulju_Awwissu_Settembru_Ottubru_Novembru_Diembru".split("_"),monthsShort:"Jan_Fra_Mar_Apr_Mej_un_Lul_Aww_Set_Ott_Nov_Di".split("_"),weekdays:"Il-add_It-Tnejn_It-Tlieta_L-Erbga_Il-amis_Il-imga_Is-Sibt".split("_"),weekdaysShort:"ad_Tne_Tli_Erb_am_im_Sib".split("_"),weekdaysMin:"a_Tn_Tl_Er_a_i_Si".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Illum fil-]LT",nextDay:"[Gada fil-]LT",nextWeek:"dddd [fil-]LT",lastDay:"[Il-biera fil-]LT",lastWeek:"dddd [li gadda] [fil-]LT",sameElse:"L"},relativeTime:{future:"f %s",past:"%s ilu",s:"ftit sekondi",ss:"%d sekondi",m:"minuta",mm:"%d minuti",h:"siega",hh:"%d siegat",d:"urnata",dd:"%d ranet",M:"xahar",MM:"%d xhur",y:"sena",yy:"%d sni"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(n(30381))},56165:function(t,e,n){!function(t){"use strict";var e={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};t.defineLocale("my",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[.] LT []",nextDay:"[] LT []",nextWeek:"dddd LT []",lastDay:"[.] LT []",lastWeek:"[] dddd LT []",sameElse:"L"},relativeTime:{future:" %s ",past:" %s ",s:".",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},preparse:function(t){return t.replace(/[]/g,(function(t){return n[t]}))},postformat:function(t){return t.replace(/\d/g,(function(t){return e[t]}))},week:{dow:1,doy:4}})}(n(30381))},64924:function(t,e,n){!function(t){"use strict";t.defineLocale("nb",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan._feb._mars_apr._mai_juni_juli_aug._sep._okt._nov._des.".split("_"),monthsParseExact:!0,weekdays:"sndag_mandag_tirsdag_onsdag_torsdag_fredag_lrdag".split("_"),weekdaysShort:"s._ma._ti._on._to._fr._l.".split("_"),weekdaysMin:"s_ma_ti_on_to_fr_l".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] HH:mm",LLLL:"dddd D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[i dag kl.] LT",nextDay:"[i morgen kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[i gr kl.] LT",lastWeek:"[forrige] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"noen sekunder",ss:"%d sekunder",m:"ett minutt",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dager",w:"en uke",ww:"%d uker",M:"en mned",MM:"%d mneder",y:"ett r",yy:"%d r"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(30381))},16744:function(t,e,n){!function(t){"use strict";var e={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};t.defineLocale("ne",{months:"___________".split("_"),monthsShort:"._.__.___._._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"._._._._._._.".split("_"),weekdaysMin:"._._._._._._.".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},preparse:function(t){return t.replace(/[]/g,(function(t){return n[t]}))},postformat:function(t){return t.replace(/\d/g,(function(t){return e[t]}))},meridiemParse:/|||/,meridiemHour:function(t,e){return 12===t&&(t=0),""===e?t<4?t:t+12:""===e?t:""===e?t>=10?t:t+12:""===e?t+12:void 0},meridiem:function(t,e,n){return t<3?"":t<12?"":t<16?"":t<20?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[] dddd[,] LT",lastDay:"[] LT",lastWeek:"[] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},week:{dow:0,doy:6}})}(n(30381))},59814:function(t,e,n){!function(t){"use strict";var e="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),n="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),i=[/^jan/i,/^feb/i,/^maart|mrt.?$/i,/^apr/i,/^mei$/i,/^jun[i.]?$/i,/^jul[i.]?$/i,/^aug/i,/^sep/i,/^okt/i,/^nov/i,/^dec/i],r=/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december|jan\.?|feb\.?|mrt\.?|apr\.?|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i;t.defineLocale("nl-be",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(t,i){return t?/-MMM-/.test(i)?n[t.month()]:e[t.month()]:e},monthsRegex:r,monthsShortRegex:r,monthsStrictRegex:/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december)/i,monthsShortStrictRegex:/^(jan\.?|feb\.?|mrt\.?|apr\.?|mei|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,monthsParse:i,longMonthsParse:i,shortMonthsParse:i,weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"zo_ma_di_wo_do_vr_za".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",ss:"%d seconden",m:"n minuut",mm:"%d minuten",h:"n uur",hh:"%d uur",d:"n dag",dd:"%d dagen",M:"n maand",MM:"%d maanden",y:"n jaar",yy:"%d jaar"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(t){return t+(1===t||8===t||t>=20?"ste":"de")},week:{dow:1,doy:4}})}(n(30381))},93901:function(t,e,n){!function(t){"use strict";var e="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),n="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),i=[/^jan/i,/^feb/i,/^maart|mrt.?$/i,/^apr/i,/^mei$/i,/^jun[i.]?$/i,/^jul[i.]?$/i,/^aug/i,/^sep/i,/^okt/i,/^nov/i,/^dec/i],r=/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december|jan\.?|feb\.?|mrt\.?|apr\.?|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i;t.defineLocale("nl",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(t,i){return t?/-MMM-/.test(i)?n[t.month()]:e[t.month()]:e},monthsRegex:r,monthsShortRegex:r,monthsStrictRegex:/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december)/i,monthsShortStrictRegex:/^(jan\.?|feb\.?|mrt\.?|apr\.?|mei|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,monthsParse:i,longMonthsParse:i,shortMonthsParse:i,weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"zo_ma_di_wo_do_vr_za".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",ss:"%d seconden",m:"n minuut",mm:"%d minuten",h:"n uur",hh:"%d uur",d:"n dag",dd:"%d dagen",w:"n week",ww:"%d weken",M:"n maand",MM:"%d maanden",y:"n jaar",yy:"%d jaar"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(t){return t+(1===t||8===t||t>=20?"ste":"de")},week:{dow:1,doy:4}})}(n(30381))},83877:function(t,e,n){!function(t){"use strict";t.defineLocale("nn",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan._feb._mars_apr._mai_juni_juli_aug._sep._okt._nov._des.".split("_"),monthsParseExact:!0,weekdays:"sundag_mndag_tysdag_onsdag_torsdag_fredag_laurdag".split("_"),weekdaysShort:"su._m._ty._on._to._fr._lau.".split("_"),weekdaysMin:"su_m_ty_on_to_fr_la".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] H:mm",LLLL:"dddd D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[I dag klokka] LT",nextDay:"[I morgon klokka] LT",nextWeek:"dddd [klokka] LT",lastDay:"[I gr klokka] LT",lastWeek:"[Fregande] dddd [klokka] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s sidan",s:"nokre sekund",ss:"%d sekund",m:"eit minutt",mm:"%d minutt",h:"ein time",hh:"%d timar",d:"ein dag",dd:"%d dagar",w:"ei veke",ww:"%d veker",M:"ein mnad",MM:"%d mnader",y:"eit r",yy:"%d r"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(30381))},92135:function(t,e,n){!function(t){"use strict";t.defineLocale("oc-lnc",{months:{standalone:"genir_febrir_mar_abril_mai_junh_julhet_agost_setembre_octbre_novembre_decembre".split("_"),format:"de genir_de febrir_de mar_d'abril_de mai_de junh_de julhet_d'agost_de setembre_d'octbre_de novembre_de decembre".split("_"),isFormat:/D[oD]?(\s)+MMMM/},monthsShort:"gen._febr._mar_abr._mai_junh_julh._ago._set._oct._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"dimenge_diluns_dimars_dimcres_dijus_divendres_dissabte".split("_"),weekdaysShort:"dg._dl._dm._dc._dj._dv._ds.".split("_"),weekdaysMin:"dg_dl_dm_dc_dj_dv_ds".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [de] YYYY",ll:"D MMM YYYY",LLL:"D MMMM [de] YYYY [a] H:mm",lll:"D MMM YYYY, H:mm",LLLL:"dddd D MMMM [de] YYYY [a] H:mm",llll:"ddd D MMM YYYY, H:mm"},calendar:{sameDay:"[ui a] LT",nextDay:"[deman a] LT",nextWeek:"dddd [a] LT",lastDay:"[ir a] LT",lastWeek:"dddd [passat a] LT",sameElse:"L"},relativeTime:{future:"d'aqu %s",past:"fa %s",s:"unas segondas",ss:"%d segondas",m:"una minuta",mm:"%d minutas",h:"una ora",hh:"%d oras",d:"un jorn",dd:"%d jorns",M:"un mes",MM:"%d meses",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(r|n|t||a)/,ordinal:function(t,e){var n=1===t?"r":2===t?"n":3===t?"r":4===t?"t":"";return"w"!==e&&"W"!==e||(n="a"),t+n},week:{dow:1,doy:4}})}(n(30381))},15858:function(t,e,n){!function(t){"use strict";var e={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};t.defineLocale("pa-in",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[] dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(t){return t.replace(/[]/g,(function(t){return n[t]}))},postformat:function(t){return t.replace(/\d/g,(function(t){return e[t]}))},meridiemParse:/|||/,meridiemHour:function(t,e){return 12===t&&(t=0),""===e?t<4?t:t+12:""===e?t:""===e?t>=10?t:t+12:""===e?t+12:void 0},meridiem:function(t,e,n){return t<4?"":t<10?"":t<17?"":t<20?"":""},week:{dow:0,doy:6}})}(n(30381))},64495:function(t,e,n){!function(t){"use strict";var e="stycze_luty_marzec_kwiecie_maj_czerwiec_lipiec_sierpie_wrzesie_padziernik_listopad_grudzie".split("_"),n="stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_wrzenia_padziernika_listopada_grudnia".split("_"),i=[/^sty/i,/^lut/i,/^mar/i,/^kwi/i,/^maj/i,/^cze/i,/^lip/i,/^sie/i,/^wrz/i,/^pa/i,/^lis/i,/^gru/i];function r(t){return t%10<5&&t%10>1&&~~(t/10)%10!=1}function o(t,e,n){var i=t+" ";switch(n){case"ss":return i+(r(t)?"sekundy":"sekund");case"m":return e?"minuta":"minut";case"mm":return i+(r(t)?"minuty":"minut");case"h":return e?"godzina":"godzin";case"hh":return i+(r(t)?"godziny":"godzin");case"ww":return i+(r(t)?"tygodnie":"tygodni");case"MM":return i+(r(t)?"miesice":"miesicy");case"yy":return i+(r(t)?"lata":"lat")}}t.defineLocale("pl",{months:function(t,i){return t?/D MMMM/.test(i)?n[t.month()]:e[t.month()]:e},monthsShort:"sty_lut_mar_kwi_maj_cze_lip_sie_wrz_pa_lis_gru".split("_"),monthsParse:i,longMonthsParse:i,shortMonthsParse:i,weekdays:"niedziela_poniedziaek_wtorek_roda_czwartek_pitek_sobota".split("_"),weekdaysShort:"ndz_pon_wt_r_czw_pt_sob".split("_"),weekdaysMin:"Nd_Pn_Wt_r_Cz_Pt_So".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Dzi o] LT",nextDay:"[Jutro o] LT",nextWeek:function(){switch(this.day()){case 0:return"[W niedziel o] LT";case 2:return"[We wtorek o] LT";case 3:return"[W rod o] LT";case 6:return"[W sobot o] LT";default:return"[W] dddd [o] LT"}},lastDay:"[Wczoraj o] LT",lastWeek:function(){switch(this.day()){case 0:return"[W zesz niedziel o] LT";case 3:return"[W zesz rod o] LT";case 6:return"[W zesz sobot o] LT";default:return"[W zeszy] dddd [o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"%s temu",s:"kilka sekund",ss:o,m:o,mm:o,h:o,hh:o,d:"1 dzie",dd:"%d dni",w:"tydzie",ww:o,M:"miesic",MM:o,y:"rok",yy:o},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(30381))},57971:function(t,e,n){!function(t){"use strict";t.defineLocale("pt-br",{months:"janeiro_fevereiro_maro_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro".split("_"),monthsShort:"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez".split("_"),weekdays:"domingo_segunda-feira_tera-feira_quarta-feira_quinta-feira_sexta-feira_sbado".split("_"),weekdaysShort:"dom_seg_ter_qua_qui_sex_sb".split("_"),weekdaysMin:"do_2_3_4_5_6_s".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY [s] HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY [s] HH:mm"},calendar:{sameDay:"[Hoje s] LT",nextDay:"[Amanh s] LT",nextWeek:"dddd [s] LT",lastDay:"[Ontem s] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[ltimo] dddd [s] LT":"[ltima] dddd [s] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"h %s",s:"poucos segundos",ss:"%d segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um ms",MM:"%d meses",y:"um ano",yy:"%d anos"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",invalidDate:"Data invlida"})}(n(30381))},89520:function(t,e,n){!function(t){"use strict";t.defineLocale("pt",{months:"janeiro_fevereiro_maro_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro".split("_"),monthsShort:"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez".split("_"),weekdays:"Domingo_Segunda-feira_Tera-feira_Quarta-feira_Quinta-feira_Sexta-feira_Sbado".split("_"),weekdaysShort:"Dom_Seg_Ter_Qua_Qui_Sex_Sb".split("_"),weekdaysMin:"Do_2_3_4_5_6_S".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY HH:mm"},calendar:{sameDay:"[Hoje s] LT",nextDay:"[Amanh s] LT",nextWeek:"dddd [s] LT",lastDay:"[Ontem s] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[ltimo] dddd [s] LT":"[ltima] dddd [s] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"h %s",s:"segundos",ss:"%d segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",w:"uma semana",ww:"%d semanas",M:"um ms",MM:"%d meses",y:"um ano",yy:"%d anos"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(n(30381))},96459:function(t,e,n){!function(t){"use strict";function e(t,e,n){var i=" ";return(t%100>=20||t>=100&&t%100==0)&&(i=" de "),t+i+{ss:"secunde",mm:"minute",hh:"ore",dd:"zile",ww:"sptmni",MM:"luni",yy:"ani"}[n]}t.defineLocale("ro",{months:"ianuarie_februarie_martie_aprilie_mai_iunie_iulie_august_septembrie_octombrie_noiembrie_decembrie".split("_"),monthsShort:"ian._feb._mart._apr._mai_iun._iul._aug._sept._oct._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"duminic_luni_mari_miercuri_joi_vineri_smbt".split("_"),weekdaysShort:"Dum_Lun_Mar_Mie_Joi_Vin_Sm".split("_"),weekdaysMin:"Du_Lu_Ma_Mi_Jo_Vi_S".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[azi la] LT",nextDay:"[mine la] LT",nextWeek:"dddd [la] LT",lastDay:"[ieri la] LT",lastWeek:"[fosta] dddd [la] LT",sameElse:"L"},relativeTime:{future:"peste %s",past:"%s n urm",s:"cteva secunde",ss:e,m:"un minut",mm:e,h:"o or",hh:e,d:"o zi",dd:e,w:"o sptmn",ww:e,M:"o lun",MM:e,y:"un an",yy:e},week:{dow:1,doy:7}})}(n(30381))},21793:function(t,e,n){!function(t){"use strict";function e(t,e){var n=t.split("_");return e%10==1&&e%100!=11?n[0]:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?n[1]:n[2]}function n(t,n,i){return"m"===i?n?"":"":t+" "+e({ss:n?"__":"__",mm:n?"__":"__",hh:"__",dd:"__",ww:"__",MM:"__",yy:"__"}[i],+t)}var i=[/^/i,/^/i,/^/i,/^/i,/^[]/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i];t.defineLocale("ru",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:{format:"._._._.____._._._._.".split("_"),standalone:"._.__.____._._._._.".split("_")},weekdays:{standalone:"______".split("_"),format:"______".split("_"),isFormat:/\[ ?[] ?(?:||)? ?] ?dddd/},weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),monthsParse:i,longMonthsParse:i,shortMonthsParse:i,monthsRegex:/^([]|\.?|[]|?\.?|?|\.?|[]|\.?|[]|[]|\.?|[]|\.?|?|\.?|[]|?\.?|[]|\.?|[]|?\.?|[]|\.?)/i,monthsShortRegex:/^([]|\.?|[]|?\.?|?|\.?|[]|\.?|[]|[]|\.?|[]|\.?|?|\.?|[]|?\.?|[]|\.?|[]|?\.?|[]|\.?)/i,monthsStrictRegex:/^([]|[]|?|[]|[]|[]|[]|?|[]|[]|[]|[])/i,monthsShortStrictRegex:/^(\.|?\.|[.]|\.|[]|[.]|[.]|\.|?\.|\.|?\.|\.)/i,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., H:mm",LLLL:"dddd, D MMMM YYYY ., H:mm"},calendar:{sameDay:"[, ] LT",nextDay:"[, ] LT",lastDay:"[, ] LT",nextWeek:function(t){if(t.week()===this.week())return 2===this.day()?"[] dddd, [] LT":"[] dddd, [] LT";switch(this.day()){case 0:return"[ ] dddd, [] LT";case 1:case 2:case 4:return"[ ] dddd, [] LT";case 3:case 5:case 6:return"[ ] dddd, [] LT"}},lastWeek:function(t){if(t.week()===this.week())return 2===this.day()?"[] dddd, [] LT":"[] dddd, [] LT";switch(this.day()){case 0:return"[ ] dddd, [] LT";case 1:case 2:case 4:return"[ ] dddd, [] LT";case 3:case 5:case 6:return"[ ] dddd, [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",ss:n,m:n,mm:n,h:"",hh:n,d:"",dd:n,w:"",ww:n,M:"",MM:n,y:"",yy:n},meridiemParse:/|||/i,isPM:function(t){return/^(|)$/.test(t)},meridiem:function(t,e,n){return t<4?"":t<12?"":t<17?"":""},dayOfMonthOrdinalParse:/\d{1,2}-(||)/,ordinal:function(t,e){switch(e){case"M":case"d":case"DDD":return t+"-";case"D":return t+"-";case"w":case"W":return t+"-";default:return t}},week:{dow:1,doy:4}})}(n(30381))},40950:function(t,e,n){!function(t){"use strict";var e=["","","","","","","","","","","",""],n=["","","","","","",""];t.defineLocale("sd",{months:e,monthsShort:e,weekdays:n,weekdaysShort:n,weekdaysMin:n,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(t){return""===t},meridiem:function(t,e,n){return t<12?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd [  ] LT",lastDay:"[] LT",lastWeek:"[ ] dddd [] LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(t){return t.replace(//g,",")},postformat:function(t){return t.replace(/,/g,"")},week:{dow:1,doy:4}})}(n(30381))},10490:function(t,e,n){!function(t){"use strict";t.defineLocale("se",{months:"oajagemnnu_guovvamnnu_njukamnnu_cuoomnnu_miessemnnu_geassemnnu_suoidnemnnu_borgemnnu_akamnnu_golggotmnnu_skbmamnnu_juovlamnnu".split("_"),monthsShort:"oj_guov_njuk_cuo_mies_geas_suoi_borg_ak_golg_skb_juov".split("_"),weekdays:"sotnabeaivi_vuossrga_maebrga_gaskavahkku_duorastat_bearjadat_lvvardat".split("_"),weekdaysShort:"sotn_vuos_ma_gask_duor_bear_lv".split("_"),weekdaysMin:"s_v_m_g_d_b_L".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"MMMM D. [b.] YYYY",LLL:"MMMM D. [b.] YYYY [ti.] HH:mm",LLLL:"dddd, MMMM D. [b.] YYYY [ti.] HH:mm"},calendar:{sameDay:"[otne ti] LT",nextDay:"[ihttin ti] LT",nextWeek:"dddd [ti] LT",lastDay:"[ikte ti] LT",lastWeek:"[ovddit] dddd [ti] LT",sameElse:"L"},relativeTime:{future:"%s geaes",past:"mait %s",s:"moadde sekunddat",ss:"%d sekunddat",m:"okta minuhta",mm:"%d minuhtat",h:"okta diimmu",hh:"%d diimmut",d:"okta beaivi",dd:"%d beaivvit",M:"okta mnnu",MM:"%d mnut",y:"okta jahki",yy:"%d jagit"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(30381))},90124:function(t,e,n){!function(t){"use strict";t.defineLocale("si",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"a h:mm",LTS:"a h:mm:ss",L:"YYYY/MM/DD",LL:"YYYY MMMM D",LLL:"YYYY MMMM D, a h:mm",LLLL:"YYYY MMMM D [] dddd, a h:mm:ss"},calendar:{sameDay:"[] LT[]",nextDay:"[] LT[]",nextWeek:"dddd LT[]",lastDay:"[] LT[]",lastWeek:"[] dddd LT[]",sameElse:"L"},relativeTime:{future:"%s",past:"%s ",s:" ",ss:" %d",m:"",mm:" %d",h:"",hh:" %d",d:"",dd:" %d",M:"",MM:" %d",y:"",yy:" %d"},dayOfMonthOrdinalParse:/\d{1,2} /,ordinal:function(t){return t+" "},meridiemParse:/ | |.|../,isPM:function(t){return".."===t||" "===t},meridiem:function(t,e,n){return t>11?n?"..":" ":n?"..":" "}})}(n(30381))},64249:function(t,e,n){!function(t){"use strict";var e="janur_februr_marec_aprl_mj_jn_jl_august_september_oktber_november_december".split("_"),n="jan_feb_mar_apr_mj_jn_jl_aug_sep_okt_nov_dec".split("_");function i(t){return t>1&&t<5}function r(t,e,n,r){var o=t+" ";switch(n){case"s":return e||r?"pr seknd":"pr sekundami";case"ss":return e||r?o+(i(t)?"sekundy":"seknd"):o+"sekundami";case"m":return e?"minta":r?"mintu":"mintou";case"mm":return e||r?o+(i(t)?"minty":"mint"):o+"mintami";case"h":return e?"hodina":r?"hodinu":"hodinou";case"hh":return e||r?o+(i(t)?"hodiny":"hodn"):o+"hodinami";case"d":return e||r?"de":"dom";case"dd":return e||r?o+(i(t)?"dni":"dn"):o+"dami";case"M":return e||r?"mesiac":"mesiacom";case"MM":return e||r?o+(i(t)?"mesiace":"mesiacov"):o+"mesiacmi";case"y":return e||r?"rok":"rokom";case"yy":return e||r?o+(i(t)?"roky":"rokov"):o+"rokmi"}}t.defineLocale("sk",{months:e,monthsShort:n,weekdays:"nedea_pondelok_utorok_streda_tvrtok_piatok_sobota".split("_"),weekdaysShort:"ne_po_ut_st_t_pi_so".split("_"),weekdaysMin:"ne_po_ut_st_t_pi_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm"},calendar:{sameDay:"[dnes o] LT",nextDay:"[zajtra o] LT",nextWeek:function(){switch(this.day()){case 0:return"[v nedeu o] LT";case 1:case 2:return"[v] dddd [o] LT";case 3:return"[v stredu o] LT";case 4:return"[vo tvrtok o] LT";case 5:return"[v piatok o] LT";case 6:return"[v sobotu o] LT"}},lastDay:"[vera o] LT",lastWeek:function(){switch(this.day()){case 0:return"[minul nedeu o] LT";case 1:case 2:case 4:case 5:return"[minul] dddd [o] LT";case 3:return"[minul stredu o] LT";case 6:return"[minul sobotu o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"pred %s",s:r,ss:r,m:r,mm:r,h:r,hh:r,d:r,dd:r,M:r,MM:r,y:r,yy:r},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(30381))},14985:function(t,e,n){!function(t){"use strict";function e(t,e,n,i){var r=t+" ";switch(n){case"s":return e||i?"nekaj sekund":"nekaj sekundami";case"ss":return r+=1===t?e?"sekundo":"sekundi":2===t?e||i?"sekundi":"sekundah":t<5?e||i?"sekunde":"sekundah":"sekund";case"m":return e?"ena minuta":"eno minuto";case"mm":return r+=1===t?e?"minuta":"minuto":2===t?e||i?"minuti":"minutama":t<5?e||i?"minute":"minutami":e||i?"minut":"minutami";case"h":return e?"ena ura":"eno uro";case"hh":return r+=1===t?e?"ura":"uro":2===t?e||i?"uri":"urama":t<5?e||i?"ure":"urami":e||i?"ur":"urami";case"d":return e||i?"en dan":"enim dnem";case"dd":return r+=1===t?e||i?"dan":"dnem":2===t?e||i?"dni":"dnevoma":e||i?"dni":"dnevi";case"M":return e||i?"en mesec":"enim mesecem";case"MM":return r+=1===t?e||i?"mesec":"mesecem":2===t?e||i?"meseca":"mesecema":t<5?e||i?"mesece":"meseci":e||i?"mesecev":"meseci";case"y":return e||i?"eno leto":"enim letom";case"yy":return r+=1===t?e||i?"leto":"letom":2===t?e||i?"leti":"letoma":t<5?e||i?"leta":"leti":e||i?"let":"leti"}}t.defineLocale("sl",{months:"januar_februar_marec_april_maj_junij_julij_avgust_september_oktober_november_december".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedelja_ponedeljek_torek_sreda_etrtek_petek_sobota".split("_"),weekdaysShort:"ned._pon._tor._sre._et._pet._sob.".split("_"),weekdaysMin:"ne_po_to_sr_e_pe_so".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danes ob] LT",nextDay:"[jutri ob] LT",nextWeek:function(){switch(this.day()){case 0:return"[v] [nedeljo] [ob] LT";case 3:return"[v] [sredo] [ob] LT";case 6:return"[v] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[v] dddd [ob] LT"}},lastDay:"[veraj ob] LT",lastWeek:function(){switch(this.day()){case 0:return"[prejnjo] [nedeljo] [ob] LT";case 3:return"[prejnjo] [sredo] [ob] LT";case 6:return"[prejnjo] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[prejnji] dddd [ob] LT"}},sameElse:"L"},relativeTime:{future:"ez %s",past:"pred %s",s:e,ss:e,m:e,mm:e,h:e,hh:e,d:e,dd:e,M:e,MM:e,y:e,yy:e},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(30381))},51104:function(t,e,n){!function(t){"use strict";t.defineLocale("sq",{months:"Janar_Shkurt_Mars_Prill_Maj_Qershor_Korrik_Gusht_Shtator_Tetor_Nntor_Dhjetor".split("_"),monthsShort:"Jan_Shk_Mar_Pri_Maj_Qer_Kor_Gus_Sht_Tet_Nn_Dhj".split("_"),weekdays:"E Diel_E Hn_E Mart_E Mrkur_E Enjte_E Premte_E Shtun".split("_"),weekdaysShort:"Die_Hn_Mar_Mr_Enj_Pre_Sht".split("_"),weekdaysMin:"D_H_Ma_M_E_P_Sh".split("_"),weekdaysParseExact:!0,meridiemParse:/PD|MD/,isPM:function(t){return"M"===t.charAt(0)},meridiem:function(t,e,n){return t<12?"PD":"MD"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Sot n] LT",nextDay:"[Nesr n] LT",nextWeek:"dddd [n] LT",lastDay:"[Dje n] LT",lastWeek:"dddd [e kaluar n] LT",sameElse:"L"},relativeTime:{future:"n %s",past:"%s m par",s:"disa sekonda",ss:"%d sekonda",m:"nj minut",mm:"%d minuta",h:"nj or",hh:"%d or",d:"nj dit",dd:"%d dit",M:"nj muaj",MM:"%d muaj",y:"nj vit",yy:"%d vite"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(30381))},79915:function(t,e,n){!function(t){"use strict";var e={words:{ss:["","",""],m:[" "," "],mm:["","",""],h:[" "," "],hh:["","",""],dd:["","",""],MM:["","",""],yy:["","",""]},correctGrammaticalCase:function(t,e){return 1===t?e[0]:t>=2&&t<=4?e[1]:e[2]},translate:function(t,n,i){var r=e.words[i];return 1===i.length?n?r[0]:r[1]:t+" "+e.correctGrammaticalCase(t,r)}};t.defineLocale("sr-cyrl",{months:"___________".split("_"),monthsShort:"._._._.____._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"._._._._._._.".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D. M. YYYY.",LL:"D. MMMM YYYY.",LLL:"D. MMMM YYYY. H:mm",LLLL:"dddd, D. MMMM YYYY. H:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:function(){switch(this.day()){case 0:return"[] [] [] LT";case 3:return"[] [] [] LT";case 6:return"[] [] [] LT";case 1:case 2:case 4:case 5:return"[] dddd [] LT"}},lastDay:"[ ] LT",lastWeek:function(){return["[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT"][this.day()]},sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",ss:e.translate,m:e.translate,mm:e.translate,h:e.translate,hh:e.translate,d:"",dd:e.translate,M:"",MM:e.translate,y:"",yy:e.translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(30381))},49131:function(t,e,n){!function(t){"use strict";var e={words:{ss:["sekunda","sekunde","sekundi"],m:["jedan minut","jedne minute"],mm:["minut","minute","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan","dana","dana"],MM:["mesec","meseca","meseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(t,e){return 1===t?e[0]:t>=2&&t<=4?e[1]:e[2]},translate:function(t,n,i){var r=e.words[i];return 1===i.length?n?r[0]:r[1]:t+" "+e.correctGrammaticalCase(t,r)}};t.defineLocale("sr",{months:"januar_februar_mart_april_maj_jun_jul_avgust_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj_jun_jul_avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedelja_ponedeljak_utorak_sreda_etvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sre._et._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_e_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D. M. YYYY.",LL:"D. MMMM YYYY.",LLL:"D. MMMM YYYY. H:mm",LLLL:"dddd, D. MMMM YYYY. H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedelju] [u] LT";case 3:return"[u] [sredu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jue u] LT",lastWeek:function(){return["[prole] [nedelje] [u] LT","[prolog] [ponedeljka] [u] LT","[prolog] [utorka] [u] LT","[prole] [srede] [u] LT","[prolog] [etvrtka] [u] LT","[prolog] [petka] [u] LT","[prole] [subote] [u] LT"][this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"pre %s",s:"nekoliko sekundi",ss:e.translate,m:e.translate,mm:e.translate,h:e.translate,hh:e.translate,d:"dan",dd:e.translate,M:"mesec",MM:e.translate,y:"godinu",yy:e.translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(30381))},85893:function(t,e,n){!function(t){"use strict";t.defineLocale("ss",{months:"Bhimbidvwane_Indlovana_Indlov'lenkhulu_Mabasa_Inkhwekhweti_Inhlaba_Kholwane_Ingci_Inyoni_Imphala_Lweti_Ingongoni".split("_"),monthsShort:"Bhi_Ina_Inu_Mab_Ink_Inh_Kho_Igc_Iny_Imp_Lwe_Igo".split("_"),weekdays:"Lisontfo_Umsombuluko_Lesibili_Lesitsatfu_Lesine_Lesihlanu_Umgcibelo".split("_"),weekdaysShort:"Lis_Umb_Lsb_Les_Lsi_Lsh_Umg".split("_"),weekdaysMin:"Li_Us_Lb_Lt_Ls_Lh_Ug".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Namuhla nga] LT",nextDay:"[Kusasa nga] LT",nextWeek:"dddd [nga] LT",lastDay:"[Itolo nga] LT",lastWeek:"dddd [leliphelile] [nga] LT",sameElse:"L"},relativeTime:{future:"nga %s",past:"wenteka nga %s",s:"emizuzwana lomcane",ss:"%d mzuzwana",m:"umzuzu",mm:"%d emizuzu",h:"lihora",hh:"%d emahora",d:"lilanga",dd:"%d emalanga",M:"inyanga",MM:"%d tinyanga",y:"umnyaka",yy:"%d iminyaka"},meridiemParse:/ekuseni|emini|entsambama|ebusuku/,meridiem:function(t,e,n){return t<11?"ekuseni":t<15?"emini":t<19?"entsambama":"ebusuku"},meridiemHour:function(t,e){return 12===t&&(t=0),"ekuseni"===e?t:"emini"===e?t>=11?t:t+12:"entsambama"===e||"ebusuku"===e?0===t?0:t+12:void 0},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(n(30381))},98760:function(t,e,n){!function(t){"use strict";t.defineLocale("sv",{months:"januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"sndag_mndag_tisdag_onsdag_torsdag_fredag_lrdag".split("_"),weekdaysShort:"sn_mn_tis_ons_tor_fre_lr".split("_"),weekdaysMin:"s_m_ti_on_to_fr_l".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [kl.] HH:mm",LLLL:"dddd D MMMM YYYY [kl.] HH:mm",lll:"D MMM YYYY HH:mm",llll:"ddd D MMM YYYY HH:mm"},calendar:{sameDay:"[Idag] LT",nextDay:"[Imorgon] LT",lastDay:"[Igr] LT",nextWeek:"[P] dddd LT",lastWeek:"[I] dddd[s] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"fr %s sedan",s:"ngra sekunder",ss:"%d sekunder",m:"en minut",mm:"%d minuter",h:"en timme",hh:"%d timmar",d:"en dag",dd:"%d dagar",M:"en mnad",MM:"%d mnader",y:"ett r",yy:"%d r"},dayOfMonthOrdinalParse:/\d{1,2}(\:e|\:a)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?":e":1===e||2===e?":a":":e")},week:{dow:1,doy:4}})}(n(30381))},91172:function(t,e,n){!function(t){"use strict";t.defineLocale("sw",{months:"Januari_Februari_Machi_Aprili_Mei_Juni_Julai_Agosti_Septemba_Oktoba_Novemba_Desemba".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ago_Sep_Okt_Nov_Des".split("_"),weekdays:"Jumapili_Jumatatu_Jumanne_Jumatano_Alhamisi_Ijumaa_Jumamosi".split("_"),weekdaysShort:"Jpl_Jtat_Jnne_Jtan_Alh_Ijm_Jmos".split("_"),weekdaysMin:"J2_J3_J4_J5_Al_Ij_J1".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"hh:mm A",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[leo saa] LT",nextDay:"[kesho saa] LT",nextWeek:"[wiki ijayo] dddd [saat] LT",lastDay:"[jana] LT",lastWeek:"[wiki iliyopita] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s baadaye",past:"tokea %s",s:"hivi punde",ss:"sekunde %d",m:"dakika moja",mm:"dakika %d",h:"saa limoja",hh:"masaa %d",d:"siku moja",dd:"siku %d",M:"mwezi mmoja",MM:"miezi %d",y:"mwaka mmoja",yy:"miaka %d"},week:{dow:1,doy:7}})}(n(30381))},27333:function(t,e,n){!function(t){"use strict";var e={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};t.defineLocale("ta",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, HH:mm",LLLL:"dddd, D MMMM YYYY, HH:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[ ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"  ",ss:"%d ",m:" ",mm:"%d ",h:"  ",hh:"%d  ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(t){return t+""},preparse:function(t){return t.replace(/[]/g,(function(t){return n[t]}))},postformat:function(t){return t.replace(/\d/g,(function(t){return e[t]}))},meridiemParse:/|||||/,meridiem:function(t,e,n){return t<2?" ":t<6?" ":t<10?" ":t<14?" ":t<18?" ":t<22?" ":" "},meridiemHour:function(t,e){return 12===t&&(t=0),""===e?t<2?t:t+12:""===e||""===e||""===e&&t>=10?t:t+12},week:{dow:0,doy:6}})}(n(30381))},23110:function(t,e,n){!function(t){"use strict";t.defineLocale("te",{months:"___________".split("_"),monthsShort:"._.__.____._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",meridiemParse:/|||/,meridiemHour:function(t,e){return 12===t&&(t=0),""===e?t<4?t:t+12:""===e?t:""===e?t>=10?t:t+12:""===e?t+12:void 0},meridiem:function(t,e,n){return t<4?"":t<10?"":t<17?"":t<20?"":""},week:{dow:0,doy:6}})}(n(30381))},52095:function(t,e,n){!function(t){"use strict";t.defineLocale("tet",{months:"Janeiru_Fevereiru_Marsu_Abril_Maiu_Juu_Jullu_Agustu_Setembru_Outubru_Novembru_Dezembru".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),weekdays:"Domingu_Segunda_Tersa_Kuarta_Kinta_Sesta_Sabadu".split("_"),weekdaysShort:"Dom_Seg_Ters_Kua_Kint_Sest_Sab".split("_"),weekdaysMin:"Do_Seg_Te_Ku_Ki_Ses_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Ohin iha] LT",nextDay:"[Aban iha] LT",nextWeek:"dddd [iha] LT",lastDay:"[Horiseik iha] LT",lastWeek:"dddd [semana kotuk] [iha] LT",sameElse:"L"},relativeTime:{future:"iha %s",past:"%s liuba",s:"segundu balun",ss:"segundu %d",m:"minutu ida",mm:"minutu %d",h:"oras ida",hh:"oras %d",d:"loron ida",dd:"loron %d",M:"fulan ida",MM:"fulan %d",y:"tinan ida",yy:"tinan %d"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")},week:{dow:1,doy:4}})}(n(30381))},27321:function(t,e,n){!function(t){"use strict";var e={0:"-",1:"-",2:"-",3:"-",4:"-",5:"-",6:"-",7:"-",8:"-",9:"-",10:"-",12:"-",13:"-",20:"-",30:"-",40:"-",50:"-",60:"-",70:"-",80:"-",90:"-",100:"-"};t.defineLocale("tg",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",lastDay:"[ ] LT",nextWeek:"dddd[] [  ] LT",lastWeek:"dddd[] [  ] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},meridiemParse:/|||/,meridiemHour:function(t,e){return 12===t&&(t=0),""===e?t<4?t:t+12:""===e?t:""===e?t>=11?t:t+12:""===e?t+12:void 0},meridiem:function(t,e,n){return t<4?"":t<11?"":t<16?"":t<19?"":""},dayOfMonthOrdinalParse:/\d{1,2}-(|)/,ordinal:function(t){var n=t%10,i=t>=100?100:null;return t+(e[t]||e[n]||e[i])},week:{dow:1,doy:7}})}(n(30381))},9041:function(t,e,n){!function(t){"use strict";t.defineLocale("th",{months:"___________".split("_"),monthsShort:".._.._.._.._.._.._.._.._.._.._.._..".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"._._._._._._.".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY  H:mm",LLLL:"dddd D MMMM YYYY  H:mm"},meridiemParse:/|/,isPM:function(t){return""===t},meridiem:function(t,e,n){return t<12?"":""},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd[ ] LT",lastDay:"[ ] LT",lastWeek:"[]dddd[ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s",s:"",ss:"%d ",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",w:"1 ",ww:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "}})}(n(30381))},19005:function(t,e,n){!function(t){"use strict";var e={1:"'inji",5:"'inji",8:"'inji",70:"'inji",80:"'inji",2:"'nji",7:"'nji",20:"'nji",50:"'nji",3:"'nji",4:"'nji",100:"'nji",6:"'njy",9:"'unjy",10:"'unjy",30:"'unjy",60:"'ynjy",90:"'ynjy"};t.defineLocale("tk",{months:"anwar_Fewral_Mart_Aprel_Ma_Iun_Iul_Awgust_Sentabr_Oktabr_Noabr_Dekabr".split("_"),monthsShort:"an_Few_Mar_Apr_Ma_In_Il_Awg_Sen_Okt_No_Dek".split("_"),weekdays:"ekenbe_Duenbe_Sienbe_arenbe_Penenbe_Anna_enbe".split("_"),weekdaysShort:"ek_Du_Si_ar_Pen_Ann_en".split("_"),weekdaysMin:"k_D_S_r_Pn_An_n".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugn sagat] LT",nextDay:"[ertir sagat] LT",nextWeek:"[indiki] dddd [sagat] LT",lastDay:"[dn] LT",lastWeek:"[geen] dddd [sagat] LT",sameElse:"L"},relativeTime:{future:"%s so",past:"%s ",s:"birne sekunt",m:"bir minut",mm:"%d minut",h:"bir sagat",hh:"%d sagat",d:"bir gn",dd:"%d gn",M:"bir a",MM:"%d a",y:"bir yl",yy:"%d yl"},ordinal:function(t,n){switch(n){case"d":case"D":case"Do":case"DD":return t;default:if(0===t)return t+"'unjy";var i=t%10,r=t%100-i,o=t>=100?100:null;return t+(e[i]||e[r]||e[o])}},week:{dow:1,doy:7}})}(n(30381))},75768:function(t,e,n){!function(t){"use strict";t.defineLocale("tl-ph",{months:"Enero_Pebrero_Marso_Abril_Mayo_Hunyo_Hulyo_Agosto_Setyembre_Oktubre_Nobyembre_Disyembre".split("_"),monthsShort:"Ene_Peb_Mar_Abr_May_Hun_Hul_Ago_Set_Okt_Nob_Dis".split("_"),weekdays:"Linggo_Lunes_Martes_Miyerkules_Huwebes_Biyernes_Sabado".split("_"),weekdaysShort:"Lin_Lun_Mar_Miy_Huw_Biy_Sab".split("_"),weekdaysMin:"Li_Lu_Ma_Mi_Hu_Bi_Sab".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"MM/D/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY HH:mm",LLLL:"dddd, MMMM DD, YYYY HH:mm"},calendar:{sameDay:"LT [ngayong araw]",nextDay:"[Bukas ng] LT",nextWeek:"LT [sa susunod na] dddd",lastDay:"LT [kahapon]",lastWeek:"LT [noong nakaraang] dddd",sameElse:"L"},relativeTime:{future:"sa loob ng %s",past:"%s ang nakalipas",s:"ilang segundo",ss:"%d segundo",m:"isang minuto",mm:"%d minuto",h:"isang oras",hh:"%d oras",d:"isang araw",dd:"%d araw",M:"isang buwan",MM:"%d buwan",y:"isang taon",yy:"%d taon"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(t){return t},week:{dow:1,doy:4}})}(n(30381))},89444:function(t,e,n){!function(t){"use strict";var e="pagh_wa_cha_wej_loS_vagh_jav_Soch_chorgh_Hut".split("_");function n(t){var e=t;return e=-1!==t.indexOf("jaj")?e.slice(0,-3)+"leS":-1!==t.indexOf("jar")?e.slice(0,-3)+"waQ":-1!==t.indexOf("DIS")?e.slice(0,-3)+"nem":e+" pIq"}function i(t){var e=t;return e=-1!==t.indexOf("jaj")?e.slice(0,-3)+"Hu":-1!==t.indexOf("jar")?e.slice(0,-3)+"wen":-1!==t.indexOf("DIS")?e.slice(0,-3)+"ben":e+" ret"}function r(t,e,n,i){var r=o(t);switch(n){case"ss":return r+" lup";case"mm":return r+" tup";case"hh":return r+" rep";case"dd":return r+" jaj";case"MM":return r+" jar";case"yy":return r+" DIS"}}function o(t){var n=Math.floor(t%1e3/100),i=Math.floor(t%100/10),r=t%10,o="";return n>0&&(o+=e[n]+"vatlh"),i>0&&(o+=(""!==o?" ":"")+e[i]+"maH"),r>0&&(o+=(""!==o?" ":"")+e[r]),""===o?"pagh":o}t.defineLocale("tlh",{months:"tera jar wa_tera jar cha_tera jar wej_tera jar loS_tera jar vagh_tera jar jav_tera jar Soch_tera jar chorgh_tera jar Hut_tera jar wamaH_tera jar wamaH wa_tera jar wamaH cha".split("_"),monthsShort:"jar wa_jar cha_jar wej_jar loS_jar vagh_jar jav_jar Soch_jar chorgh_jar Hut_jar wamaH_jar wamaH wa_jar wamaH cha".split("_"),monthsParseExact:!0,weekdays:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),weekdaysShort:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),weekdaysMin:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[DaHjaj] LT",nextDay:"[waleS] LT",nextWeek:"LLL",lastDay:"[waHu] LT",lastWeek:"LLL",sameElse:"L"},relativeTime:{future:n,past:i,s:"puS lup",ss:r,m:"wa tup",mm:r,h:"wa rep",hh:r,d:"wa jaj",dd:r,M:"wa jar",MM:r,y:"wa DIS",yy:r},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(30381))},72397:function(t,e,n){!function(t){"use strict";var e={1:"'inci",5:"'inci",8:"'inci",70:"'inci",80:"'inci",2:"'nci",7:"'nci",20:"'nci",50:"'nci",3:"'nc",4:"'nc",100:"'nc",6:"'nc",9:"'uncu",10:"'uncu",30:"'uncu",60:"'nc",90:"'nc"};t.defineLocale("tr",{months:"Ocak_ubat_Mart_Nisan_Mays_Haziran_Temmuz_Austos_Eyll_Ekim_Kasm_Aralk".split("_"),monthsShort:"Oca_ub_Mar_Nis_May_Haz_Tem_Au_Eyl_Eki_Kas_Ara".split("_"),weekdays:"Pazar_Pazartesi_Sal_aramba_Perembe_Cuma_Cumartesi".split("_"),weekdaysShort:"Paz_Pts_Sal_ar_Per_Cum_Cts".split("_"),weekdaysMin:"Pz_Pt_Sa_a_Pe_Cu_Ct".split("_"),meridiem:function(t,e,n){return t<12?n?"":"":n?"s":"S"},meridiemParse:/||s|S/,isPM:function(t){return"s"===t||"S"===t},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugn saat] LT",nextDay:"[yarn saat] LT",nextWeek:"[gelecek] dddd [saat] LT",lastDay:"[dn] LT",lastWeek:"[geen] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s nce",s:"birka saniye",ss:"%d saniye",m:"bir dakika",mm:"%d dakika",h:"bir saat",hh:"%d saat",d:"bir gn",dd:"%d gn",w:"bir hafta",ww:"%d hafta",M:"bir ay",MM:"%d ay",y:"bir yl",yy:"%d yl"},ordinal:function(t,n){switch(n){case"d":case"D":case"Do":case"DD":return t;default:if(0===t)return t+"'nc";var i=t%10,r=t%100-i,o=t>=100?100:null;return t+(e[i]||e[r]||e[o])}},week:{dow:1,doy:7}})}(n(30381))},28254:function(t,e,n){!function(t){"use strict";function e(t,e,n,i){var r={s:["viensas secunds","'iensas secunds"],ss:[t+" secunds",t+" secunds"],m:["'n mut","'iens mut"],mm:[t+" muts",t+" muts"],h:["'n ora","'iensa ora"],hh:[t+" oras",t+" oras"],d:["'n ziua","'iensa ziua"],dd:[t+" ziuas",t+" ziuas"],M:["'n mes","'iens mes"],MM:[t+" mesen",t+" mesen"],y:["'n ar","'iens ar"],yy:[t+" ars",t+" ars"]};return i||e?r[n][0]:r[n][1]}t.defineLocale("tzl",{months:"Januar_Fevraglh_Mar_Avru_Mai_Gn_Julia_Guscht_Setemvar_Listopts_Noemvar_Zecemvar".split("_"),monthsShort:"Jan_Fev_Mar_Avr_Mai_Gn_Jul_Gus_Set_Lis_Noe_Zec".split("_"),weekdays:"Sladi_Lnei_Maitzi_Mrcuri_Xhadi_Vineri_Sturi".split("_"),weekdaysShort:"Sl_Ln_Mai_Mr_Xh_Vi_St".split("_"),weekdaysMin:"S_L_Ma_M_Xh_Vi_S".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"D. MMMM [dallas] YYYY",LLL:"D. MMMM [dallas] YYYY HH.mm",LLLL:"dddd, [li] D. MMMM [dallas] YYYY HH.mm"},meridiemParse:/d\'o|d\'a/i,isPM:function(t){return"d'o"===t.toLowerCase()},meridiem:function(t,e,n){return t>11?n?"d'o":"D'O":n?"d'a":"D'A"},calendar:{sameDay:"[oxhi ] LT",nextDay:"[dem ] LT",nextWeek:"dddd [] LT",lastDay:"[ieiri ] LT",lastWeek:"[sr el] dddd [lasteu ] LT",sameElse:"L"},relativeTime:{future:"osprei %s",past:"ja%s",s:e,ss:e,m:e,mm:e,h:e,hh:e,d:e,dd:e,M:e,MM:e,y:e,yy:e},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(30381))},30699:function(t,e,n){!function(t){"use strict";t.defineLocale("tzm-latn",{months:"innayr_brayr_mars_ibrir_mayyw_ywnyw_ywlywz_wt_wtanbir_ktwbr_nwwanbir_dwjnbir".split("_"),monthsShort:"innayr_brayr_mars_ibrir_mayyw_ywnyw_ywlywz_wt_wtanbir_ktwbr_nwwanbir_dwjnbir".split("_"),weekdays:"asamas_aynas_asinas_akras_akwas_asimwas_asiyas".split("_"),weekdaysShort:"asamas_aynas_asinas_akras_akwas_asimwas_asiyas".split("_"),weekdaysMin:"asamas_aynas_asinas_akras_akwas_asimwas_asiyas".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[asdkh g] LT",nextDay:"[aska g] LT",nextWeek:"dddd [g] LT",lastDay:"[assant g] LT",lastWeek:"dddd [g] LT",sameElse:"L"},relativeTime:{future:"dadkh s yan %s",past:"yan %s",s:"imik",ss:"%d imik",m:"minu",mm:"%d minu",h:"saa",hh:"%d tassain",d:"ass",dd:"%d ossan",M:"ayowr",MM:"%d iyyirn",y:"asgas",yy:"%d isgasn"},week:{dow:6,doy:12}})}(n(30381))},51106:function(t,e,n){!function(t){"use strict";t.defineLocale("tzm",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"dddd [] LT",sameElse:"L"},relativeTime:{future:"   %s",past:" %s",s:"",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d o",M:"o",MM:"%d ",y:"",yy:"%d "},week:{dow:6,doy:12}})}(n(30381))},9288:function(t,e,n){!function(t){"use strict";t.defineLocale("ug-cn",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY-M-D-",LLL:"YYYY-M-D- HH:mm",LLLL:"dddd YYYY-M-D- HH:mm"},meridiemParse:/ || || |/,meridiemHour:function(t,e){return 12===t&&(t=0)," "===e||""===e||" "===e?t:" "===e||""===e?t+12:t>=11?t:t+12},meridiem:function(t,e,n){var i=100*t+e;return i<600?" ":i<900?"":i<1130?" ":i<1230?"":i<1800?" ":""},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"[] dddd [] LT",lastDay:"[] LT",lastWeek:"[] dddd [] LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}(-|-|-)/,ordinal:function(t,e){switch(e){case"d":case"D":case"DDD":return t+"-";case"w":case"W":return t+"-";default:return t}},preparse:function(t){return t.replace(//g,",")},postformat:function(t){return t.replace(/,/g,"")},week:{dow:1,doy:7}})}(n(30381))},67691:function(t,e,n){!function(t){"use strict";function e(t,e){var n=t.split("_");return e%10==1&&e%100!=11?n[0]:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?n[1]:n[2]}function n(t,n,i){return"m"===i?n?"":"":"h"===i?n?"":"":t+" "+e({ss:n?"__":"__",mm:n?"__":"__",hh:n?"__":"__",dd:"__",MM:"__",yy:"__"}[i],+t)}function i(t,e){var n={nominative:"______".split("_"),accusative:"______".split("_"),genitive:"______".split("_")};return!0===t?n.nominative.slice(1,7).concat(n.nominative.slice(0,1)):t?n[/(\[[]\]) ?dddd/.test(e)?"accusative":/\[?(?:|)? ?\] ?dddd/.test(e)?"genitive":"nominative"][t.day()]:n.nominative}function r(t){return function(){return t+""+(11===this.hours()?"":"")+"] LT"}}t.defineLocale("uk",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:"___________".split("_"),weekdays:i,weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., HH:mm",LLLL:"dddd, D MMMM YYYY ., HH:mm"},calendar:{sameDay:r("[ "),nextDay:r("[ "),lastDay:r("[ "),nextWeek:r("[] dddd ["),lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return r("[] dddd [").call(this);case 1:case 2:case 4:return r("[] dddd [").call(this)}},sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",ss:n,m:n,mm:n,h:"",hh:n,d:"",dd:n,M:"",MM:n,y:"",yy:n},meridiemParse:/|||/,isPM:function(t){return/^(|)$/.test(t)},meridiem:function(t,e,n){return t<4?"":t<12?"":t<17?"":""},dayOfMonthOrdinalParse:/\d{1,2}-(|)/,ordinal:function(t,e){switch(e){case"M":case"d":case"DDD":case"w":case"W":return t+"-";case"D":return t+"-";default:return t}},week:{dow:1,doy:7}})}(n(30381))},13795:function(t,e,n){!function(t){"use strict";var e=["","","","","","","","","","","",""],n=["","","","","","",""];t.defineLocale("ur",{months:e,monthsShort:e,weekdays:n,weekdaysShort:n,weekdaysMin:n,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(t){return""===t},meridiem:function(t,e,n){return t<12?"":""},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[  ] LT",lastWeek:"[] dddd [] LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(t){return t.replace(//g,",")},postformat:function(t){return t.replace(/,/g,"")},week:{dow:1,doy:4}})}(n(30381))},60588:function(t,e,n){!function(t){"use strict";t.defineLocale("uz-latn",{months:"Yanvar_Fevral_Mart_Aprel_May_Iyun_Iyul_Avgust_Sentabr_Oktabr_Noyabr_Dekabr".split("_"),monthsShort:"Yan_Fev_Mar_Apr_May_Iyun_Iyul_Avg_Sen_Okt_Noy_Dek".split("_"),weekdays:"Yakshanba_Dushanba_Seshanba_Chorshanba_Payshanba_Juma_Shanba".split("_"),weekdaysShort:"Yak_Dush_Sesh_Chor_Pay_Jum_Shan".split("_"),weekdaysMin:"Ya_Du_Se_Cho_Pa_Ju_Sha".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"D MMMM YYYY, dddd HH:mm"},calendar:{sameDay:"[Bugun soat] LT [da]",nextDay:"[Ertaga] LT [da]",nextWeek:"dddd [kuni soat] LT [da]",lastDay:"[Kecha soat] LT [da]",lastWeek:"[O'tgan] dddd [kuni soat] LT [da]",sameElse:"L"},relativeTime:{future:"Yaqin %s ichida",past:"Bir necha %s oldin",s:"soniya",ss:"%d soniya",m:"bir daqiqa",mm:"%d daqiqa",h:"bir soat",hh:"%d soat",d:"bir kun",dd:"%d kun",M:"bir oy",MM:"%d oy",y:"bir yil",yy:"%d yil"},week:{dow:1,doy:7}})}(n(30381))},6791:function(t,e,n){!function(t){"use strict";t.defineLocale("uz",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"D MMMM YYYY, dddd HH:mm"},calendar:{sameDay:"[ ] LT []",nextDay:"[] LT []",nextWeek:"dddd [ ] LT []",lastDay:"[ ] LT []",lastWeek:"[] dddd [ ] LT []",sameElse:"L"},relativeTime:{future:" %s ",past:"  %s ",s:"",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},week:{dow:1,doy:7}})}(n(30381))},65666:function(t,e,n){!function(t){"use strict";t.defineLocale("vi",{months:"thng 1_thng 2_thng 3_thng 4_thng 5_thng 6_thng 7_thng 8_thng 9_thng 10_thng 11_thng 12".split("_"),monthsShort:"Thg 01_Thg 02_Thg 03_Thg 04_Thg 05_Thg 06_Thg 07_Thg 08_Thg 09_Thg 10_Thg 11_Thg 12".split("_"),monthsParseExact:!0,weekdays:"ch nht_th hai_th ba_th t_th nm_th su_th by".split("_"),weekdaysShort:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysMin:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysParseExact:!0,meridiemParse:/sa|ch/i,isPM:function(t){return/^ch$/i.test(t)},meridiem:function(t,e,n){return t<12?n?"sa":"SA":n?"ch":"CH"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [nm] YYYY",LLL:"D MMMM [nm] YYYY HH:mm",LLLL:"dddd, D MMMM [nm] YYYY HH:mm",l:"DD/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[Hm nay lc] LT",nextDay:"[Ngy mai lc] LT",nextWeek:"dddd [tun ti lc] LT",lastDay:"[Hm qua lc] LT",lastWeek:"dddd [tun trc lc] LT",sameElse:"L"},relativeTime:{future:"%s ti",past:"%s trc",s:"vi giy",ss:"%d giy",m:"mt pht",mm:"%d pht",h:"mt gi",hh:"%d gi",d:"mt ngy",dd:"%d ngy",w:"mt tun",ww:"%d tun",M:"mt thng",MM:"%d thng",y:"mt nm",yy:"%d nm"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(t){return t},week:{dow:1,doy:4}})}(n(30381))},14378:function(t,e,n){!function(t){"use strict";t.defineLocale("x-pseudo",{months:"J~~r_F~br~r_~Mrc~h_p~rl_~M_~J~_Jl~_~gst~_Sp~tmb~r_~ctb~r_~vm~br_~Dc~mbr".split("_"),monthsShort:"J~_~Fb_~Mr_~pr_~M_~J_~Jl_~g_~Sp_~ct_~v_~Dc".split("_"),monthsParseExact:!0,weekdays:"S~d~_M~d~_T~sd~_Wd~sd~_T~hrs~d_~Frd~_S~tr~d".split("_"),weekdaysShort:"S~_~M_~T_~Wd_~Th_~Fr_~St".split("_"),weekdaysMin:"S~_M~_T_~W_T~h_Fr~_S".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[T~d~ t] LT",nextDay:"[T~m~rr~w t] LT",nextWeek:"dddd [t] LT",lastDay:"[~st~rd~ t] LT",lastWeek:"[L~st] dddd [t] LT",sameElse:"L"},relativeTime:{future:"~ %s",past:"%s ~g",s:" ~fw ~sc~ds",ss:"%d s~c~ds",m:" ~m~t",mm:"%d m~~ts",h:"~ h~r",hh:"%d h~rs",d:" ~d",dd:"%d d~s",M:" ~m~th",MM:"%d m~t~hs",y:" ~r",yy:"%d ~rs"},dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")},week:{dow:1,doy:4}})}(n(30381))},75805:function(t,e,n){!function(t){"use strict";t.defineLocale("yo",{months:"Sr_Erele_rna_Igbe_Ebibi_Okudu_Agmo_Ogun_Owewe_wara_Belu_p".split("_"),monthsShort:"Sr_Erl_rn_Igb_Ebi_Oku_Ag_Ogu_Owe_wa_Bel_p".split("_"),weekdays:"Aiku_Aje_Isgun_jru_jb_ti_Abamta".split("_"),weekdaysShort:"Aik_Aje_Is_jr_jb_ti_Aba".split("_"),weekdaysMin:"Ai_Aj_Is_r_b_t_Ab".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Oni ni] LT",nextDay:"[la ni] LT",nextWeek:"dddd [s ton'b] [ni] LT",lastDay:"[Ana ni] LT",lastWeek:"dddd [s tol] [ni] LT",sameElse:"L"},relativeTime:{future:"ni %s",past:"%s kja",s:"isju aaya die",ss:"aaya %d",m:"isju kan",mm:"isju %d",h:"wakati kan",hh:"wakati %d",d:"j kan",dd:"j %d",M:"osu kan",MM:"osu %d",y:"dun kan",yy:"dun %d"},dayOfMonthOrdinalParse:/j\s\d{1,2}/,ordinal:"j %d",week:{dow:1,doy:4}})}(n(30381))},83839:function(t,e,n){!function(t){"use strict";t.defineLocale("zh-cn",{months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYYMD",LLL:"YYYYMDAhmm",LLLL:"YYYYMDddddAhmm",l:"YYYY/M/D",ll:"YYYYMD",lll:"YYYYMD HH:mm",llll:"YYYYMDdddd HH:mm"},meridiemParse:/|||||/,meridiemHour:function(t,e){return 12===t&&(t=0),""===e||""===e||""===e?t:""===e||""===e?t+12:t>=11?t:t+12},meridiem:function(t,e,n){var i=100*t+e;return i<600?"":i<900?"":i<1130?"":i<1230?"":i<1800?"":""},calendar:{sameDay:"[]LT",nextDay:"[]LT",nextWeek:function(t){return t.week()!==this.week()?"[]dddLT":"[]dddLT"},lastDay:"[]LT",lastWeek:function(t){return this.week()!==t.week()?"[]dddLT":"[]dddLT"},sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(||)/,ordinal:function(t,e){switch(e){case"d":case"D":case"DDD":return t+"";case"M":return t+"";case"w":case"W":return t+"";default:return t}},relativeTime:{future:"%s",past:"%s",s:"",ss:"%d ",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",w:"1 ",ww:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "},week:{dow:1,doy:4}})}(n(30381))},55726:function(t,e,n){!function(t){"use strict";t.defineLocale("zh-hk",{months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYYMD",LLL:"YYYYMD HH:mm",LLLL:"YYYYMDdddd HH:mm",l:"YYYY/M/D",ll:"YYYYMD",lll:"YYYYMD HH:mm",llll:"YYYYMDdddd HH:mm"},meridiemParse:/|||||/,meridiemHour:function(t,e){return 12===t&&(t=0),""===e||""===e||""===e?t:""===e?t>=11?t:t+12:""===e||""===e?t+12:void 0},meridiem:function(t,e,n){var i=100*t+e;return i<600?"":i<900?"":i<1200?"":1200===i?"":i<1800?"":""},calendar:{sameDay:"[]LT",nextDay:"[]LT",nextWeek:"[]ddddLT",lastDay:"[]LT",lastWeek:"[]ddddLT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(||)/,ordinal:function(t,e){switch(e){case"d":case"D":case"DDD":return t+"";case"M":return t+"";case"w":case"W":return t+"";default:return t}},relativeTime:{future:"%s",past:"%s",s:"",ss:"%d ",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "}})}(n(30381))},99807:function(t,e,n){!function(t){"use strict";t.defineLocale("zh-mo",{months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"YYYYMD",LLL:"YYYYMD HH:mm",LLLL:"YYYYMDdddd HH:mm",l:"D/M/YYYY",ll:"YYYYMD",lll:"YYYYMD HH:mm",llll:"YYYYMDdddd HH:mm"},meridiemParse:/|||||/,meridiemHour:function(t,e){return 12===t&&(t=0),""===e||""===e||""===e?t:""===e?t>=11?t:t+12:""===e||""===e?t+12:void 0},meridiem:function(t,e,n){var i=100*t+e;return i<600?"":i<900?"":i<1130?"":i<1230?"":i<1800?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[]dddd LT",lastDay:"[] LT",lastWeek:"[]dddd LT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(||)/,ordinal:function(t,e){switch(e){case"d":case"D":case"DDD":return t+"";case"M":return t+"";case"w":case"W":return t+"";default:return t}},relativeTime:{future:"%s",past:"%s",s:"",ss:"%d ",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "}})}(n(30381))},74152:function(t,e,n){!function(t){"use strict";t.defineLocale("zh-tw",{months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYYMD",LLL:"YYYYMD HH:mm",LLLL:"YYYYMDdddd HH:mm",l:"YYYY/M/D",ll:"YYYYMD",lll:"YYYYMD HH:mm",llll:"YYYYMDdddd HH:mm"},meridiemParse:/|||||/,meridiemHour:function(t,e){return 12===t&&(t=0),""===e||""===e||""===e?t:""===e?t>=11?t:t+12:""===e||""===e?t+12:void 0},meridiem:function(t,e,n){var i=100*t+e;return i<600?"":i<900?"":i<1130?"":i<1230?"":i<1800?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[]dddd LT",lastDay:"[] LT",lastWeek:"[]dddd LT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(||)/,ordinal:function(t,e){switch(e){case"d":case"D":case"DDD":return t+"";case"M":return t+"";case"w":case"W":return t+"";default:return t}},relativeTime:{future:"%s",past:"%s",s:"",ss:"%d ",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "}})}(n(30381))},46700:(t,e,n)=>{var i={"./af":42786,"./af.js":42786,"./ar":30867,"./ar-dz":14130,"./ar-dz.js":14130,"./ar-kw":96135,"./ar-kw.js":96135,"./ar-ly":56440,"./ar-ly.js":56440,"./ar-ma":47702,"./ar-ma.js":47702,"./ar-sa":16040,"./ar-sa.js":16040,"./ar-tn":37100,"./ar-tn.js":37100,"./ar.js":30867,"./az":31083,"./az.js":31083,"./be":9808,"./be.js":9808,"./bg":68338,"./bg.js":68338,"./bm":67438,"./bm.js":67438,"./bn":8905,"./bn-bd":76225,"./bn-bd.js":76225,"./bn.js":8905,"./bo":11560,"./bo.js":11560,"./br":1278,"./br.js":1278,"./bs":80622,"./bs.js":80622,"./ca":2468,"./ca.js":2468,"./cs":5822,"./cs.js":5822,"./cv":50877,"./cv.js":50877,"./cy":47373,"./cy.js":47373,"./da":24780,"./da.js":24780,"./de":59740,"./de-at":60217,"./de-at.js":60217,"./de-ch":60894,"./de-ch.js":60894,"./de.js":59740,"./dv":5300,"./dv.js":5300,"./el":50837,"./el.js":50837,"./en-au":78348,"./en-au.js":78348,"./en-ca":77925,"./en-ca.js":77925,"./en-gb":22243,"./en-gb.js":22243,"./en-ie":46436,"./en-ie.js":46436,"./en-il":47207,"./en-il.js":47207,"./en-in":44175,"./en-in.js":44175,"./en-nz":76319,"./en-nz.js":76319,"./en-sg":31662,"./en-sg.js":31662,"./eo":92915,"./eo.js":92915,"./es":55655,"./es-do":55251,"./es-do.js":55251,"./es-mx":96112,"./es-mx.js":96112,"./es-us":71146,"./es-us.js":71146,"./es.js":55655,"./et":5603,"./et.js":5603,"./eu":77763,"./eu.js":77763,"./fa":76959,"./fa.js":76959,"./fi":11897,"./fi.js":11897,"./fil":42549,"./fil.js":42549,"./fo":94694,"./fo.js":94694,"./fr":94470,"./fr-ca":63049,"./fr-ca.js":63049,"./fr-ch":52330,"./fr-ch.js":52330,"./fr.js":94470,"./fy":5044,"./fy.js":5044,"./ga":29295,"./ga.js":29295,"./gd":2101,"./gd.js":2101,"./gl":38794,"./gl.js":38794,"./gom-deva":27884,"./gom-deva.js":27884,"./gom-latn":23168,"./gom-latn.js":23168,"./gu":95349,"./gu.js":95349,"./he":24206,"./he.js":24206,"./hi":30094,"./hi.js":30094,"./hr":30316,"./hr.js":30316,"./hu":22138,"./hu.js":22138,"./hy-am":11423,"./hy-am.js":11423,"./id":29218,"./id.js":29218,"./is":90135,"./is.js":90135,"./it":90626,"./it-ch":10150,"./it-ch.js":10150,"./it.js":90626,"./ja":39183,"./ja.js":39183,"./jv":24286,"./jv.js":24286,"./ka":12105,"./ka.js":12105,"./kk":47772,"./kk.js":47772,"./km":18758,"./km.js":18758,"./kn":79282,"./kn.js":79282,"./ko":33730,"./ko.js":33730,"./ku":1408,"./ku.js":1408,"./ky":33291,"./ky.js":33291,"./lb":36841,"./lb.js":36841,"./lo":55466,"./lo.js":55466,"./lt":57010,"./lt.js":57010,"./lv":37595,"./lv.js":37595,"./me":39861,"./me.js":39861,"./mi":35493,"./mi.js":35493,"./mk":95966,"./mk.js":95966,"./ml":87341,"./ml.js":87341,"./mn":5115,"./mn.js":5115,"./mr":10370,"./mr.js":10370,"./ms":9847,"./ms-my":41237,"./ms-my.js":41237,"./ms.js":9847,"./mt":72126,"./mt.js":72126,"./my":56165,"./my.js":56165,"./nb":64924,"./nb.js":64924,"./ne":16744,"./ne.js":16744,"./nl":93901,"./nl-be":59814,"./nl-be.js":59814,"./nl.js":93901,"./nn":83877,"./nn.js":83877,"./oc-lnc":92135,"./oc-lnc.js":92135,"./pa-in":15858,"./pa-in.js":15858,"./pl":64495,"./pl.js":64495,"./pt":89520,"./pt-br":57971,"./pt-br.js":57971,"./pt.js":89520,"./ro":96459,"./ro.js":96459,"./ru":21793,"./ru.js":21793,"./sd":40950,"./sd.js":40950,"./se":10490,"./se.js":10490,"./si":90124,"./si.js":90124,"./sk":64249,"./sk.js":64249,"./sl":14985,"./sl.js":14985,"./sq":51104,"./sq.js":51104,"./sr":49131,"./sr-cyrl":79915,"./sr-cyrl.js":79915,"./sr.js":49131,"./ss":85893,"./ss.js":85893,"./sv":98760,"./sv.js":98760,"./sw":91172,"./sw.js":91172,"./ta":27333,"./ta.js":27333,"./te":23110,"./te.js":23110,"./tet":52095,"./tet.js":52095,"./tg":27321,"./tg.js":27321,"./th":9041,"./th.js":9041,"./tk":19005,"./tk.js":19005,"./tl-ph":75768,"./tl-ph.js":75768,"./tlh":89444,"./tlh.js":89444,"./tr":72397,"./tr.js":72397,"./tzl":28254,"./tzl.js":28254,"./tzm":51106,"./tzm-latn":30699,"./tzm-latn.js":30699,"./tzm.js":51106,"./ug-cn":9288,"./ug-cn.js":9288,"./uk":67691,"./uk.js":67691,"./ur":13795,"./ur.js":13795,"./uz":6791,"./uz-latn":60588,"./uz-latn.js":60588,"./uz.js":6791,"./vi":65666,"./vi.js":65666,"./x-pseudo":14378,"./x-pseudo.js":14378,"./yo":75805,"./yo.js":75805,"./zh-cn":83839,"./zh-cn.js":83839,"./zh-hk":55726,"./zh-hk.js":55726,"./zh-mo":99807,"./zh-mo.js":99807,"./zh-tw":74152,"./zh-tw.js":74152};function r(t){var e=o(t);return n(e)}function o(t){if(!n.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}r.keys=function(){return Object.keys(i)},r.resolve=o,t.exports=r,r.id=46700},30381:function(t,e,n){(t=n.nmd(t)).exports=function(){"use strict";var e,i;function r(){return e.apply(null,arguments)}function o(t){e=t}function a(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function s(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)}function l(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function u(t){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(t).length;var e;for(e in t)if(l(t,e))return!1;return!0}function c(t){return void 0===t}function h(t){return"number"==typeof t||"[object Number]"===Object.prototype.toString.call(t)}function d(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function f(t,e){var n,i=[];for(n=0;n<t.length;++n)i.push(e(t[n],n));return i}function p(t,e){for(var n in e)l(e,n)&&(t[n]=e[n]);return l(e,"toString")&&(t.toString=e.toString),l(e,"valueOf")&&(t.valueOf=e.valueOf),t}function m(t,e,n,i){return qn(t,e,n,i,!0).utc()}function g(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function v(t){return null==t._pf&&(t._pf=g()),t._pf}function y(t){if(null==t._isValid){var e=v(t),n=i.call(e.parsedDateParts,(function(t){return null!=t})),r=!isNaN(t._d.getTime())&&e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&n);if(t._strict&&(r=r&&0===e.charsLeftOver&&0===e.unusedTokens.length&&void 0===e.bigHour),null!=Object.isFrozen&&Object.isFrozen(t))return r;t._isValid=r}return t._isValid}function b(t){var e=m(NaN);return null!=t?p(v(e),t):v(e).userInvalidated=!0,e}i=Array.prototype.some?Array.prototype.some:function(t){var e,n=Object(this),i=n.length>>>0;for(e=0;e<i;e++)if(e in n&&t.call(this,n[e],e,n))return!0;return!1};var _=r.momentProperties=[],w=!1;function x(t,e){var n,i,r;if(c(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),c(e._i)||(t._i=e._i),c(e._f)||(t._f=e._f),c(e._l)||(t._l=e._l),c(e._strict)||(t._strict=e._strict),c(e._tzm)||(t._tzm=e._tzm),c(e._isUTC)||(t._isUTC=e._isUTC),c(e._offset)||(t._offset=e._offset),c(e._pf)||(t._pf=v(e)),c(e._locale)||(t._locale=e._locale),_.length>0)for(n=0;n<_.length;n++)c(r=e[i=_[n]])||(t[i]=r);return t}function M(t){x(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===w&&(w=!0,r.updateOffset(this),w=!1)}function E(t){return t instanceof M||null!=t&&null!=t._isAMomentObject}function S(t){!1===r.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function k(t,e){var n=!0;return p((function(){if(null!=r.deprecationHandler&&r.deprecationHandler(null,t),n){var i,o,a,s=[];for(o=0;o<arguments.length;o++){if(i="","object"==typeof arguments[o]){for(a in i+="\n["+o+"] ",arguments[0])l(arguments[0],a)&&(i+=a+": "+arguments[0][a]+", ");i=i.slice(0,-2)}else i=arguments[o];s.push(i)}S(t+"\nArguments: "+Array.prototype.slice.call(s).join("")+"\n"+(new Error).stack),n=!1}return e.apply(this,arguments)}),e)}var C,T={};function D(t,e){null!=r.deprecationHandler&&r.deprecationHandler(t,e),T[t]||(S(e),T[t]=!0)}function L(t){return"undefined"!=typeof Function&&t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function A(t){var e,n;for(n in t)l(t,n)&&(L(e=t[n])?this[n]=e:this["_"+n]=e);this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function O(t,e){var n,i=p({},t);for(n in e)l(e,n)&&(s(t[n])&&s(e[n])?(i[n]={},p(i[n],t[n]),p(i[n],e[n])):null!=e[n]?i[n]=e[n]:delete i[n]);for(n in t)l(t,n)&&!l(e,n)&&s(t[n])&&(i[n]=p({},i[n]));return i}function P(t){null!=t&&this.set(t)}r.suppressDeprecationWarnings=!1,r.deprecationHandler=null,C=Object.keys?Object.keys:function(t){var e,n=[];for(e in t)l(t,e)&&n.push(e);return n};var I={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function N(t,e,n){var i=this._calendar[t]||this._calendar.sameElse;return L(i)?i.call(e,n):i}function R(t,e,n){var i=""+Math.abs(t),r=e-i.length;return(t>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+i}var Y=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,j=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,F={},B={};function z(t,e,n,i){var r=i;"string"==typeof i&&(r=function(){return this[i]()}),t&&(B[t]=r),e&&(B[e[0]]=function(){return R(r.apply(this,arguments),e[1],e[2])}),n&&(B[n]=function(){return this.localeData().ordinal(r.apply(this,arguments),t)})}function H(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function G(t){var e,n,i=t.match(Y);for(e=0,n=i.length;e<n;e++)B[i[e]]?i[e]=B[i[e]]:i[e]=H(i[e]);return function(e){var r,o="";for(r=0;r<n;r++)o+=L(i[r])?i[r].call(e,t):i[r];return o}}function W(t,e){return t.isValid()?(e=U(e,t.localeData()),F[e]=F[e]||G(e),F[e](t)):t.localeData().invalidDate()}function U(t,e){var n=5;function i(t){return e.longDateFormat(t)||t}for(j.lastIndex=0;n>=0&&j.test(t);)t=t.replace(j,i),j.lastIndex=0,n-=1;return t}var V={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function X(t){var e=this._longDateFormat[t],n=this._longDateFormat[t.toUpperCase()];return e||!n?e:(this._longDateFormat[t]=n.match(Y).map((function(t){return"MMMM"===t||"MM"===t||"DD"===t||"dddd"===t?t.slice(1):t})).join(""),this._longDateFormat[t])}var q="Invalid date";function K(){return this._invalidDate}var $="%d",Z=/\d{1,2}/;function J(t){return this._ordinal.replace("%d",t)}var Q={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function tt(t,e,n,i){var r=this._relativeTime[n];return L(r)?r(t,e,n,i):r.replace(/%d/i,t)}function et(t,e){var n=this._relativeTime[t>0?"future":"past"];return L(n)?n(e):n.replace(/%s/i,e)}var nt={};function it(t,e){var n=t.toLowerCase();nt[n]=nt[n+"s"]=nt[e]=t}function rt(t){return"string"==typeof t?nt[t]||nt[t.toLowerCase()]:void 0}function ot(t){var e,n,i={};for(n in t)l(t,n)&&(e=rt(n))&&(i[e]=t[n]);return i}var at={};function st(t,e){at[t]=e}function lt(t){var e,n=[];for(e in t)l(t,e)&&n.push({unit:e,priority:at[e]});return n.sort((function(t,e){return t.priority-e.priority})),n}function ut(t){return t%4==0&&t%100!=0||t%400==0}function ct(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function ht(t){var e=+t,n=0;return 0!==e&&isFinite(e)&&(n=ct(e)),n}function dt(t,e){return function(n){return null!=n?(pt(this,t,n),r.updateOffset(this,e),this):ft(this,t)}}function ft(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function pt(t,e,n){t.isValid()&&!isNaN(n)&&("FullYear"===e&&ut(t.year())&&1===t.month()&&29===t.date()?(n=ht(n),t._d["set"+(t._isUTC?"UTC":"")+e](n,t.month(),te(n,t.month()))):t._d["set"+(t._isUTC?"UTC":"")+e](n))}function mt(t){return L(this[t=rt(t)])?this[t]():this}function gt(t,e){if("object"==typeof t){var n,i=lt(t=ot(t));for(n=0;n<i.length;n++)this[i[n].unit](t[i[n].unit])}else if(L(this[t=rt(t)]))return this[t](e);return this}var vt,yt=/\d/,bt=/\d\d/,_t=/\d{3}/,wt=/\d{4}/,xt=/[+-]?\d{6}/,Mt=/\d\d?/,Et=/\d\d\d\d?/,St=/\d\d\d\d\d\d?/,kt=/\d{1,3}/,Ct=/\d{1,4}/,Tt=/[+-]?\d{1,6}/,Dt=/\d+/,Lt=/[+-]?\d+/,At=/Z|[+-]\d\d:?\d\d/gi,Ot=/Z|[+-]\d\d(?::?\d\d)?/gi,Pt=/[+-]?\d+(\.\d{1,3})?/,It=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function Nt(t,e,n){vt[t]=L(e)?e:function(t,i){return t&&n?n:e}}function Rt(t,e){return l(vt,t)?vt[t](e._strict,e._locale):new RegExp(Yt(t))}function Yt(t){return jt(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(t,e,n,i,r){return e||n||i||r})))}function jt(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}vt={};var Ft={};function Bt(t,e){var n,i=e;for("string"==typeof t&&(t=[t]),h(e)&&(i=function(t,n){n[e]=ht(t)}),n=0;n<t.length;n++)Ft[t[n]]=i}function zt(t,e){Bt(t,(function(t,n,i,r){i._w=i._w||{},e(t,i._w,i,r)}))}function Ht(t,e,n){null!=e&&l(Ft,t)&&Ft[t](e,n._a,n,t)}var Gt,Wt=0,Ut=1,Vt=2,Xt=3,qt=4,Kt=5,$t=6,Zt=7,Jt=8;function Qt(t,e){return(t%e+e)%e}function te(t,e){if(isNaN(t)||isNaN(e))return NaN;var n=Qt(e,12);return t+=(e-n)/12,1===n?ut(t)?29:28:31-n%7%2}Gt=Array.prototype.indexOf?Array.prototype.indexOf:function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1},z("M",["MM",2],"Mo",(function(){return this.month()+1})),z("MMM",0,0,(function(t){return this.localeData().monthsShort(this,t)})),z("MMMM",0,0,(function(t){return this.localeData().months(this,t)})),it("month","M"),st("month",8),Nt("M",Mt),Nt("MM",Mt,bt),Nt("MMM",(function(t,e){return e.monthsShortRegex(t)})),Nt("MMMM",(function(t,e){return e.monthsRegex(t)})),Bt(["M","MM"],(function(t,e){e[Ut]=ht(t)-1})),Bt(["MMM","MMMM"],(function(t,e,n,i){var r=n._locale.monthsParse(t,i,n._strict);null!=r?e[Ut]=r:v(n).invalidMonth=t}));var ee="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ne="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),ie=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,re=It,oe=It;function ae(t,e){return t?a(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||ie).test(e)?"format":"standalone"][t.month()]:a(this._months)?this._months:this._months.standalone}function se(t,e){return t?a(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[ie.test(e)?"format":"standalone"][t.month()]:a(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function le(t,e,n){var i,r,o,a=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;i<12;++i)o=m([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(o,"").toLocaleLowerCase();return n?"MMM"===e?-1!==(r=Gt.call(this._shortMonthsParse,a))?r:null:-1!==(r=Gt.call(this._longMonthsParse,a))?r:null:"MMM"===e?-1!==(r=Gt.call(this._shortMonthsParse,a))||-1!==(r=Gt.call(this._longMonthsParse,a))?r:null:-1!==(r=Gt.call(this._longMonthsParse,a))||-1!==(r=Gt.call(this._shortMonthsParse,a))?r:null}function ue(t,e,n){var i,r,o;if(this._monthsParseExact)return le.call(this,t,e,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(r=m([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(o="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[i]=new RegExp(o.replace(".",""),"i")),n&&"MMMM"===e&&this._longMonthsParse[i].test(t))return i;if(n&&"MMM"===e&&this._shortMonthsParse[i].test(t))return i;if(!n&&this._monthsParse[i].test(t))return i}}function ce(t,e){var n;if(!t.isValid())return t;if("string"==typeof e)if(/^\d+$/.test(e))e=ht(e);else if(!h(e=t.localeData().monthsParse(e)))return t;return n=Math.min(t.date(),te(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,n),t}function he(t){return null!=t?(ce(this,t),r.updateOffset(this,!0),this):ft(this,"Month")}function de(){return te(this.year(),this.month())}function fe(t){return this._monthsParseExact?(l(this,"_monthsRegex")||me.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(l(this,"_monthsShortRegex")||(this._monthsShortRegex=re),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)}function pe(t){return this._monthsParseExact?(l(this,"_monthsRegex")||me.call(this),t?this._monthsStrictRegex:this._monthsRegex):(l(this,"_monthsRegex")||(this._monthsRegex=oe),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)}function me(){function t(t,e){return e.length-t.length}var e,n,i=[],r=[],o=[];for(e=0;e<12;e++)n=m([2e3,e]),i.push(this.monthsShort(n,"")),r.push(this.months(n,"")),o.push(this.months(n,"")),o.push(this.monthsShort(n,""));for(i.sort(t),r.sort(t),o.sort(t),e=0;e<12;e++)i[e]=jt(i[e]),r[e]=jt(r[e]);for(e=0;e<24;e++)o[e]=jt(o[e]);this._monthsRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+i.join("|")+")","i")}function ge(t){return ut(t)?366:365}z("Y",0,0,(function(){var t=this.year();return t<=9999?R(t,4):"+"+t})),z(0,["YY",2],0,(function(){return this.year()%100})),z(0,["YYYY",4],0,"year"),z(0,["YYYYY",5],0,"year"),z(0,["YYYYYY",6,!0],0,"year"),it("year","y"),st("year",1),Nt("Y",Lt),Nt("YY",Mt,bt),Nt("YYYY",Ct,wt),Nt("YYYYY",Tt,xt),Nt("YYYYYY",Tt,xt),Bt(["YYYYY","YYYYYY"],Wt),Bt("YYYY",(function(t,e){e[Wt]=2===t.length?r.parseTwoDigitYear(t):ht(t)})),Bt("YY",(function(t,e){e[Wt]=r.parseTwoDigitYear(t)})),Bt("Y",(function(t,e){e[Wt]=parseInt(t,10)})),r.parseTwoDigitYear=function(t){return ht(t)+(ht(t)>68?1900:2e3)};var ve=dt("FullYear",!0);function ye(){return ut(this.year())}function be(t,e,n,i,r,o,a){var s;return t<100&&t>=0?(s=new Date(t+400,e,n,i,r,o,a),isFinite(s.getFullYear())&&s.setFullYear(t)):s=new Date(t,e,n,i,r,o,a),s}function _e(t){var e,n;return t<100&&t>=0?((n=Array.prototype.slice.call(arguments))[0]=t+400,e=new Date(Date.UTC.apply(null,n)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)):e=new Date(Date.UTC.apply(null,arguments)),e}function we(t,e,n){var i=7+e-n;return-(7+_e(t,0,i).getUTCDay()-e)%7+i-1}function xe(t,e,n,i,r){var o,a,s=1+7*(e-1)+(7+n-i)%7+we(t,i,r);return s<=0?a=ge(o=t-1)+s:s>ge(t)?(o=t+1,a=s-ge(t)):(o=t,a=s),{year:o,dayOfYear:a}}function Me(t,e,n){var i,r,o=we(t.year(),e,n),a=Math.floor((t.dayOfYear()-o-1)/7)+1;return a<1?i=a+Ee(r=t.year()-1,e,n):a>Ee(t.year(),e,n)?(i=a-Ee(t.year(),e,n),r=t.year()+1):(r=t.year(),i=a),{week:i,year:r}}function Ee(t,e,n){var i=we(t,e,n),r=we(t+1,e,n);return(ge(t)-i+r)/7}function Se(t){return Me(t,this._week.dow,this._week.doy).week}z("w",["ww",2],"wo","week"),z("W",["WW",2],"Wo","isoWeek"),it("week","w"),it("isoWeek","W"),st("week",5),st("isoWeek",5),Nt("w",Mt),Nt("ww",Mt,bt),Nt("W",Mt),Nt("WW",Mt,bt),zt(["w","ww","W","WW"],(function(t,e,n,i){e[i.substr(0,1)]=ht(t)}));var ke={dow:0,doy:6};function Ce(){return this._week.dow}function Te(){return this._week.doy}function De(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")}function Le(t){var e=Me(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")}function Ae(t,e){return"string"!=typeof t?t:isNaN(t)?"number"==typeof(t=e.weekdaysParse(t))?t:null:parseInt(t,10)}function Oe(t,e){return"string"==typeof t?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}function Pe(t,e){return t.slice(e,7).concat(t.slice(0,e))}z("d",0,"do","day"),z("dd",0,0,(function(t){return this.localeData().weekdaysMin(this,t)})),z("ddd",0,0,(function(t){return this.localeData().weekdaysShort(this,t)})),z("dddd",0,0,(function(t){return this.localeData().weekdays(this,t)})),z("e",0,0,"weekday"),z("E",0,0,"isoWeekday"),it("day","d"),it("weekday","e"),it("isoWeekday","E"),st("day",11),st("weekday",11),st("isoWeekday",11),Nt("d",Mt),Nt("e",Mt),Nt("E",Mt),Nt("dd",(function(t,e){return e.weekdaysMinRegex(t)})),Nt("ddd",(function(t,e){return e.weekdaysShortRegex(t)})),Nt("dddd",(function(t,e){return e.weekdaysRegex(t)})),zt(["dd","ddd","dddd"],(function(t,e,n,i){var r=n._locale.weekdaysParse(t,i,n._strict);null!=r?e.d=r:v(n).invalidWeekday=t})),zt(["d","e","E"],(function(t,e,n,i){e[i]=ht(t)}));var Ie="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Ne="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Re="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Ye=It,je=It,Fe=It;function Be(t,e){var n=a(this._weekdays)?this._weekdays:this._weekdays[t&&!0!==t&&this._weekdays.isFormat.test(e)?"format":"standalone"];return!0===t?Pe(n,this._week.dow):t?n[t.day()]:n}function ze(t){return!0===t?Pe(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort}function He(t){return!0===t?Pe(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin}function Ge(t,e,n){var i,r,o,a=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;i<7;++i)o=m([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(o,"").toLocaleLowerCase();return n?"dddd"===e?-1!==(r=Gt.call(this._weekdaysParse,a))?r:null:"ddd"===e?-1!==(r=Gt.call(this._shortWeekdaysParse,a))?r:null:-1!==(r=Gt.call(this._minWeekdaysParse,a))?r:null:"dddd"===e?-1!==(r=Gt.call(this._weekdaysParse,a))||-1!==(r=Gt.call(this._shortWeekdaysParse,a))||-1!==(r=Gt.call(this._minWeekdaysParse,a))?r:null:"ddd"===e?-1!==(r=Gt.call(this._shortWeekdaysParse,a))||-1!==(r=Gt.call(this._weekdaysParse,a))||-1!==(r=Gt.call(this._minWeekdaysParse,a))?r:null:-1!==(r=Gt.call(this._minWeekdaysParse,a))||-1!==(r=Gt.call(this._weekdaysParse,a))||-1!==(r=Gt.call(this._shortWeekdaysParse,a))?r:null}function We(t,e,n){var i,r,o;if(this._weekdaysParseExact)return Ge.call(this,t,e,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){if(r=m([2e3,1]).day(i),n&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(r,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(r,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(r,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[i]||(o="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[i]=new RegExp(o.replace(".",""),"i")),n&&"dddd"===e&&this._fullWeekdaysParse[i].test(t))return i;if(n&&"ddd"===e&&this._shortWeekdaysParse[i].test(t))return i;if(n&&"dd"===e&&this._minWeekdaysParse[i].test(t))return i;if(!n&&this._weekdaysParse[i].test(t))return i}}function Ue(t){if(!this.isValid())return null!=t?this:NaN;var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=Ae(t,this.localeData()),this.add(t-e,"d")):e}function Ve(t){if(!this.isValid())return null!=t?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")}function Xe(t){if(!this.isValid())return null!=t?this:NaN;if(null!=t){var e=Oe(t,this.localeData());return this.day(this.day()%7?e:e-7)}return this.day()||7}function qe(t){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Ze.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(l(this,"_weekdaysRegex")||(this._weekdaysRegex=Ye),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)}function Ke(t){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Ze.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(l(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=je),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function $e(t){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Ze.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(l(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Fe),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Ze(){function t(t,e){return e.length-t.length}var e,n,i,r,o,a=[],s=[],l=[],u=[];for(e=0;e<7;e++)n=m([2e3,1]).day(e),i=jt(this.weekdaysMin(n,"")),r=jt(this.weekdaysShort(n,"")),o=jt(this.weekdays(n,"")),a.push(i),s.push(r),l.push(o),u.push(i),u.push(r),u.push(o);a.sort(t),s.sort(t),l.sort(t),u.sort(t),this._weekdaysRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function Je(){return this.hours()%12||12}function Qe(){return this.hours()||24}function tn(t,e){z(t,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)}))}function en(t,e){return e._meridiemParse}function nn(t){return"p"===(t+"").toLowerCase().charAt(0)}z("H",["HH",2],0,"hour"),z("h",["hh",2],0,Je),z("k",["kk",2],0,Qe),z("hmm",0,0,(function(){return""+Je.apply(this)+R(this.minutes(),2)})),z("hmmss",0,0,(function(){return""+Je.apply(this)+R(this.minutes(),2)+R(this.seconds(),2)})),z("Hmm",0,0,(function(){return""+this.hours()+R(this.minutes(),2)})),z("Hmmss",0,0,(function(){return""+this.hours()+R(this.minutes(),2)+R(this.seconds(),2)})),tn("a",!0),tn("A",!1),it("hour","h"),st("hour",13),Nt("a",en),Nt("A",en),Nt("H",Mt),Nt("h",Mt),Nt("k",Mt),Nt("HH",Mt,bt),Nt("hh",Mt,bt),Nt("kk",Mt,bt),Nt("hmm",Et),Nt("hmmss",St),Nt("Hmm",Et),Nt("Hmmss",St),Bt(["H","HH"],Xt),Bt(["k","kk"],(function(t,e,n){var i=ht(t);e[Xt]=24===i?0:i})),Bt(["a","A"],(function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t})),Bt(["h","hh"],(function(t,e,n){e[Xt]=ht(t),v(n).bigHour=!0})),Bt("hmm",(function(t,e,n){var i=t.length-2;e[Xt]=ht(t.substr(0,i)),e[qt]=ht(t.substr(i)),v(n).bigHour=!0})),Bt("hmmss",(function(t,e,n){var i=t.length-4,r=t.length-2;e[Xt]=ht(t.substr(0,i)),e[qt]=ht(t.substr(i,2)),e[Kt]=ht(t.substr(r)),v(n).bigHour=!0})),Bt("Hmm",(function(t,e,n){var i=t.length-2;e[Xt]=ht(t.substr(0,i)),e[qt]=ht(t.substr(i))})),Bt("Hmmss",(function(t,e,n){var i=t.length-4,r=t.length-2;e[Xt]=ht(t.substr(0,i)),e[qt]=ht(t.substr(i,2)),e[Kt]=ht(t.substr(r))}));var rn=/[ap]\.?m?\.?/i,on=dt("Hours",!0);function an(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"}var sn,ln={calendar:I,longDateFormat:V,invalidDate:q,ordinal:$,dayOfMonthOrdinalParse:Z,relativeTime:Q,months:ee,monthsShort:ne,week:ke,weekdays:Ie,weekdaysMin:Re,weekdaysShort:Ne,meridiemParse:rn},un={},cn={};function hn(t,e){var n,i=Math.min(t.length,e.length);for(n=0;n<i;n+=1)if(t[n]!==e[n])return n;return i}function dn(t){return t?t.toLowerCase().replace("_","-"):t}function fn(t){for(var e,n,i,r,o=0;o<t.length;){for(e=(r=dn(t[o]).split("-")).length,n=(n=dn(t[o+1]))?n.split("-"):null;e>0;){if(i=pn(r.slice(0,e).join("-")))return i;if(n&&n.length>=e&&hn(r,n)>=e-1)break;e--}o++}return sn}function pn(e){var i=null;if(void 0===un[e]&&t&&t.exports)try{i=sn._abbr,n(46700)("./"+e),mn(i)}catch(t){un[e]=null}return un[e]}function mn(t,e){var n;return t&&((n=c(e)?yn(t):gn(t,e))?sn=n:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),sn._abbr}function gn(t,e){if(null!==e){var n,i=ln;if(e.abbr=t,null!=un[t])D("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),i=un[t]._config;else if(null!=e.parentLocale)if(null!=un[e.parentLocale])i=un[e.parentLocale]._config;else{if(null==(n=pn(e.parentLocale)))return cn[e.parentLocale]||(cn[e.parentLocale]=[]),cn[e.parentLocale].push({name:t,config:e}),null;i=n._config}return un[t]=new P(O(i,e)),cn[t]&&cn[t].forEach((function(t){gn(t.name,t.config)})),mn(t),un[t]}return delete un[t],null}function vn(t,e){if(null!=e){var n,i,r=ln;null!=un[t]&&null!=un[t].parentLocale?un[t].set(O(un[t]._config,e)):(null!=(i=pn(t))&&(r=i._config),e=O(r,e),null==i&&(e.abbr=t),(n=new P(e)).parentLocale=un[t],un[t]=n),mn(t)}else null!=un[t]&&(null!=un[t].parentLocale?(un[t]=un[t].parentLocale,t===mn()&&mn(t)):null!=un[t]&&delete un[t]);return un[t]}function yn(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return sn;if(!a(t)){if(e=pn(t))return e;t=[t]}return fn(t)}function bn(){return C(un)}function _n(t){var e,n=t._a;return n&&-2===v(t).overflow&&(e=n[Ut]<0||n[Ut]>11?Ut:n[Vt]<1||n[Vt]>te(n[Wt],n[Ut])?Vt:n[Xt]<0||n[Xt]>24||24===n[Xt]&&(0!==n[qt]||0!==n[Kt]||0!==n[$t])?Xt:n[qt]<0||n[qt]>59?qt:n[Kt]<0||n[Kt]>59?Kt:n[$t]<0||n[$t]>999?$t:-1,v(t)._overflowDayOfYear&&(e<Wt||e>Vt)&&(e=Vt),v(t)._overflowWeeks&&-1===e&&(e=Zt),v(t)._overflowWeekday&&-1===e&&(e=Jt),v(t).overflow=e),t}var wn=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,xn=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Mn=/Z|[+-]\d\d(?::?\d\d)?/,En=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Sn=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],kn=/^\/?Date\((-?\d+)/i,Cn=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Tn={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Dn(t){var e,n,i,r,o,a,s=t._i,l=wn.exec(s)||xn.exec(s);if(l){for(v(t).iso=!0,e=0,n=En.length;e<n;e++)if(En[e][1].exec(l[1])){r=En[e][0],i=!1!==En[e][2];break}if(null==r)return void(t._isValid=!1);if(l[3]){for(e=0,n=Sn.length;e<n;e++)if(Sn[e][1].exec(l[3])){o=(l[2]||" ")+Sn[e][0];break}if(null==o)return void(t._isValid=!1)}if(!i&&null!=o)return void(t._isValid=!1);if(l[4]){if(!Mn.exec(l[4]))return void(t._isValid=!1);a="Z"}t._f=r+(o||"")+(a||""),zn(t)}else t._isValid=!1}function Ln(t,e,n,i,r,o){var a=[An(t),ne.indexOf(e),parseInt(n,10),parseInt(i,10),parseInt(r,10)];return o&&a.push(parseInt(o,10)),a}function An(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}function On(t){return t.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Pn(t,e,n){return!t||Ne.indexOf(t)===new Date(e[0],e[1],e[2]).getDay()||(v(n).weekdayMismatch=!0,n._isValid=!1,!1)}function In(t,e,n){if(t)return Tn[t];if(e)return 0;var i=parseInt(n,10),r=i%100;return(i-r)/100*60+r}function Nn(t){var e,n=Cn.exec(On(t._i));if(n){if(e=Ln(n[4],n[3],n[2],n[5],n[6],n[7]),!Pn(n[1],e,t))return;t._a=e,t._tzm=In(n[8],n[9],n[10]),t._d=_e.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),v(t).rfc2822=!0}else t._isValid=!1}function Rn(t){var e=kn.exec(t._i);null===e?(Dn(t),!1===t._isValid&&(delete t._isValid,Nn(t),!1===t._isValid&&(delete t._isValid,t._strict?t._isValid=!1:r.createFromInputFallback(t)))):t._d=new Date(+e[1])}function Yn(t,e,n){return null!=t?t:null!=e?e:n}function jn(t){var e=new Date(r.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function Fn(t){var e,n,i,r,o,a=[];if(!t._d){for(i=jn(t),t._w&&null==t._a[Vt]&&null==t._a[Ut]&&Bn(t),null!=t._dayOfYear&&(o=Yn(t._a[Wt],i[Wt]),(t._dayOfYear>ge(o)||0===t._dayOfYear)&&(v(t)._overflowDayOfYear=!0),n=_e(o,0,t._dayOfYear),t._a[Ut]=n.getUTCMonth(),t._a[Vt]=n.getUTCDate()),e=0;e<3&&null==t._a[e];++e)t._a[e]=a[e]=i[e];for(;e<7;e++)t._a[e]=a[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[Xt]&&0===t._a[qt]&&0===t._a[Kt]&&0===t._a[$t]&&(t._nextDay=!0,t._a[Xt]=0),t._d=(t._useUTC?_e:be).apply(null,a),r=t._useUTC?t._d.getUTCDay():t._d.getDay(),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[Xt]=24),t._w&&void 0!==t._w.d&&t._w.d!==r&&(v(t).weekdayMismatch=!0)}}function Bn(t){var e,n,i,r,o,a,s,l,u;null!=(e=t._w).GG||null!=e.W||null!=e.E?(o=1,a=4,n=Yn(e.GG,t._a[Wt],Me(Kn(),1,4).year),i=Yn(e.W,1),((r=Yn(e.E,1))<1||r>7)&&(l=!0)):(o=t._locale._week.dow,a=t._locale._week.doy,u=Me(Kn(),o,a),n=Yn(e.gg,t._a[Wt],u.year),i=Yn(e.w,u.week),null!=e.d?((r=e.d)<0||r>6)&&(l=!0):null!=e.e?(r=e.e+o,(e.e<0||e.e>6)&&(l=!0)):r=o),i<1||i>Ee(n,o,a)?v(t)._overflowWeeks=!0:null!=l?v(t)._overflowWeekday=!0:(s=xe(n,i,r,o,a),t._a[Wt]=s.year,t._dayOfYear=s.dayOfYear)}function zn(t){if(t._f!==r.ISO_8601)if(t._f!==r.RFC_2822){t._a=[],v(t).empty=!0;var e,n,i,o,a,s,l=""+t._i,u=l.length,c=0;for(i=U(t._f,t._locale).match(Y)||[],e=0;e<i.length;e++)o=i[e],(n=(l.match(Rt(o,t))||[])[0])&&((a=l.substr(0,l.indexOf(n))).length>0&&v(t).unusedInput.push(a),l=l.slice(l.indexOf(n)+n.length),c+=n.length),B[o]?(n?v(t).empty=!1:v(t).unusedTokens.push(o),Ht(o,n,t)):t._strict&&!n&&v(t).unusedTokens.push(o);v(t).charsLeftOver=u-c,l.length>0&&v(t).unusedInput.push(l),t._a[Xt]<=12&&!0===v(t).bigHour&&t._a[Xt]>0&&(v(t).bigHour=void 0),v(t).parsedDateParts=t._a.slice(0),v(t).meridiem=t._meridiem,t._a[Xt]=Hn(t._locale,t._a[Xt],t._meridiem),null!==(s=v(t).era)&&(t._a[Wt]=t._locale.erasConvertYear(s,t._a[Wt])),Fn(t),_n(t)}else Nn(t);else Dn(t)}function Hn(t,e,n){var i;return null==n?e:null!=t.meridiemHour?t.meridiemHour(e,n):null!=t.isPM?((i=t.isPM(n))&&e<12&&(e+=12),i||12!==e||(e=0),e):e}function Gn(t){var e,n,i,r,o,a,s=!1;if(0===t._f.length)return v(t).invalidFormat=!0,void(t._d=new Date(NaN));for(r=0;r<t._f.length;r++)o=0,a=!1,e=x({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[r],zn(e),y(e)&&(a=!0),o+=v(e).charsLeftOver,o+=10*v(e).unusedTokens.length,v(e).score=o,s?o<i&&(i=o,n=e):(null==i||o<i||a)&&(i=o,n=e,a&&(s=!0));p(t,n||e)}function Wn(t){if(!t._d){var e=ot(t._i),n=void 0===e.day?e.date:e.day;t._a=f([e.year,e.month,n,e.hour,e.minute,e.second,e.millisecond],(function(t){return t&&parseInt(t,10)})),Fn(t)}}function Un(t){var e=new M(_n(Vn(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function Vn(t){var e=t._i,n=t._f;return t._locale=t._locale||yn(t._l),null===e||void 0===n&&""===e?b({nullInput:!0}):("string"==typeof e&&(t._i=e=t._locale.preparse(e)),E(e)?new M(_n(e)):(d(e)?t._d=e:a(n)?Gn(t):n?zn(t):Xn(t),y(t)||(t._d=null),t))}function Xn(t){var e=t._i;c(e)?t._d=new Date(r.now()):d(e)?t._d=new Date(e.valueOf()):"string"==typeof e?Rn(t):a(e)?(t._a=f(e.slice(0),(function(t){return parseInt(t,10)})),Fn(t)):s(e)?Wn(t):h(e)?t._d=new Date(e):r.createFromInputFallback(t)}function qn(t,e,n,i,r){var o={};return!0!==e&&!1!==e||(i=e,e=void 0),!0!==n&&!1!==n||(i=n,n=void 0),(s(t)&&u(t)||a(t)&&0===t.length)&&(t=void 0),o._isAMomentObject=!0,o._useUTC=o._isUTC=r,o._l=n,o._i=t,o._f=e,o._strict=i,Un(o)}function Kn(t,e,n,i){return qn(t,e,n,i,!1)}r.createFromInputFallback=k("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))})),r.ISO_8601=function(){},r.RFC_2822=function(){};var $n=k("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var t=Kn.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:b()})),Zn=k("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var t=Kn.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:b()}));function Jn(t,e){var n,i;if(1===e.length&&a(e[0])&&(e=e[0]),!e.length)return Kn();for(n=e[0],i=1;i<e.length;++i)e[i].isValid()&&!e[i][t](n)||(n=e[i]);return n}function Qn(){return Jn("isBefore",[].slice.call(arguments,0))}function ti(){return Jn("isAfter",[].slice.call(arguments,0))}var ei=function(){return Date.now?Date.now():+new Date},ni=["year","quarter","month","week","day","hour","minute","second","millisecond"];function ii(t){var e,n,i=!1;for(e in t)if(l(t,e)&&(-1===Gt.call(ni,e)||null!=t[e]&&isNaN(t[e])))return!1;for(n=0;n<ni.length;++n)if(t[ni[n]]){if(i)return!1;parseFloat(t[ni[n]])!==ht(t[ni[n]])&&(i=!0)}return!0}function ri(){return this._isValid}function oi(){return Ti(NaN)}function ai(t){var e=ot(t),n=e.year||0,i=e.quarter||0,r=e.month||0,o=e.week||e.isoWeek||0,a=e.day||0,s=e.hour||0,l=e.minute||0,u=e.second||0,c=e.millisecond||0;this._isValid=ii(e),this._milliseconds=+c+1e3*u+6e4*l+1e3*s*60*60,this._days=+a+7*o,this._months=+r+3*i+12*n,this._data={},this._locale=yn(),this._bubble()}function si(t){return t instanceof ai}function li(t){return t<0?-1*Math.round(-1*t):Math.round(t)}function ui(t,e,n){var i,r=Math.min(t.length,e.length),o=Math.abs(t.length-e.length),a=0;for(i=0;i<r;i++)(n&&t[i]!==e[i]||!n&&ht(t[i])!==ht(e[i]))&&a++;return a+o}function ci(t,e){z(t,0,0,(function(){var t=this.utcOffset(),n="+";return t<0&&(t=-t,n="-"),n+R(~~(t/60),2)+e+R(~~t%60,2)}))}ci("Z",":"),ci("ZZ",""),Nt("Z",Ot),Nt("ZZ",Ot),Bt(["Z","ZZ"],(function(t,e,n){n._useUTC=!0,n._tzm=di(Ot,t)}));var hi=/([\+\-]|\d\d)/gi;function di(t,e){var n,i,r=(e||"").match(t);return null===r?null:0===(i=60*(n=((r[r.length-1]||[])+"").match(hi)||["-",0,0])[1]+ht(n[2]))?0:"+"===n[0]?i:-i}function fi(t,e){var n,i;return e._isUTC?(n=e.clone(),i=(E(t)||d(t)?t.valueOf():Kn(t).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+i),r.updateOffset(n,!1),n):Kn(t).local()}function pi(t){return-Math.round(t._d.getTimezoneOffset())}function mi(t,e,n){var i,o=this._offset||0;if(!this.isValid())return null!=t?this:NaN;if(null!=t){if("string"==typeof t){if(null===(t=di(Ot,t)))return this}else Math.abs(t)<16&&!n&&(t*=60);return!this._isUTC&&e&&(i=pi(this)),this._offset=t,this._isUTC=!0,null!=i&&this.add(i,"m"),o!==t&&(!e||this._changeInProgress?Pi(this,Ti(t-o,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,r.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?o:pi(this)}function gi(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function vi(t){return this.utcOffset(0,t)}function yi(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(pi(this),"m")),this}function bi(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var t=di(At,this._i);null!=t?this.utcOffset(t):this.utcOffset(0,!0)}return this}function _i(t){return!!this.isValid()&&(t=t?Kn(t).utcOffset():0,(this.utcOffset()-t)%60==0)}function wi(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function xi(){if(!c(this._isDSTShifted))return this._isDSTShifted;var t,e={};return x(e,this),(e=Vn(e))._a?(t=e._isUTC?m(e._a):Kn(e._a),this._isDSTShifted=this.isValid()&&ui(e._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function Mi(){return!!this.isValid()&&!this._isUTC}function Ei(){return!!this.isValid()&&this._isUTC}function Si(){return!!this.isValid()&&this._isUTC&&0===this._offset}r.updateOffset=function(){};var ki=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Ci=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Ti(t,e){var n,i,r,o=t,a=null;return si(t)?o={ms:t._milliseconds,d:t._days,M:t._months}:h(t)||!isNaN(+t)?(o={},e?o[e]=+t:o.milliseconds=+t):(a=ki.exec(t))?(n="-"===a[1]?-1:1,o={y:0,d:ht(a[Vt])*n,h:ht(a[Xt])*n,m:ht(a[qt])*n,s:ht(a[Kt])*n,ms:ht(li(1e3*a[$t]))*n}):(a=Ci.exec(t))?(n="-"===a[1]?-1:1,o={y:Di(a[2],n),M:Di(a[3],n),w:Di(a[4],n),d:Di(a[5],n),h:Di(a[6],n),m:Di(a[7],n),s:Di(a[8],n)}):null==o?o={}:"object"==typeof o&&("from"in o||"to"in o)&&(r=Ai(Kn(o.from),Kn(o.to)),(o={}).ms=r.milliseconds,o.M=r.months),i=new ai(o),si(t)&&l(t,"_locale")&&(i._locale=t._locale),si(t)&&l(t,"_isValid")&&(i._isValid=t._isValid),i}function Di(t,e){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*e}function Li(t,e){var n={};return n.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function Ai(t,e){var n;return t.isValid()&&e.isValid()?(e=fi(e,t),t.isBefore(e)?n=Li(t,e):((n=Li(e,t)).milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function Oi(t,e){return function(n,i){var r;return null===i||isNaN(+i)||(D(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),r=n,n=i,i=r),Pi(this,Ti(n,i),t),this}}function Pi(t,e,n,i){var o=e._milliseconds,a=li(e._days),s=li(e._months);t.isValid()&&(i=null==i||i,s&&ce(t,ft(t,"Month")+s*n),a&&pt(t,"Date",ft(t,"Date")+a*n),o&&t._d.setTime(t._d.valueOf()+o*n),i&&r.updateOffset(t,a||s))}Ti.fn=ai.prototype,Ti.invalid=oi;var Ii=Oi(1,"add"),Ni=Oi(-1,"subtract");function Ri(t){return"string"==typeof t||t instanceof String}function Yi(t){return E(t)||d(t)||Ri(t)||h(t)||Fi(t)||ji(t)||null==t}function ji(t){var e,n,i=s(t)&&!u(t),r=!1,o=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"];for(e=0;e<o.length;e+=1)n=o[e],r=r||l(t,n);return i&&r}function Fi(t){var e=a(t),n=!1;return e&&(n=0===t.filter((function(e){return!h(e)&&Ri(t)})).length),e&&n}function Bi(t){var e,n,i=s(t)&&!u(t),r=!1,o=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(e=0;e<o.length;e+=1)n=o[e],r=r||l(t,n);return i&&r}function zi(t,e){var n=t.diff(e,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function Hi(t,e){1===arguments.length&&(arguments[0]?Yi(arguments[0])?(t=arguments[0],e=void 0):Bi(arguments[0])&&(e=arguments[0],t=void 0):(t=void 0,e=void 0));var n=t||Kn(),i=fi(n,this).startOf("day"),o=r.calendarFormat(this,i)||"sameElse",a=e&&(L(e[o])?e[o].call(this,n):e[o]);return this.format(a||this.localeData().calendar(o,this,Kn(n)))}function Gi(){return new M(this)}function Wi(t,e){var n=E(t)?t:Kn(t);return!(!this.isValid()||!n.isValid())&&("millisecond"===(e=rt(e)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(e).valueOf())}function Ui(t,e){var n=E(t)?t:Kn(t);return!(!this.isValid()||!n.isValid())&&("millisecond"===(e=rt(e)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(e).valueOf()<n.valueOf())}function Vi(t,e,n,i){var r=E(t)?t:Kn(t),o=E(e)?e:Kn(e);return!!(this.isValid()&&r.isValid()&&o.isValid())&&("("===(i=i||"()")[0]?this.isAfter(r,n):!this.isBefore(r,n))&&(")"===i[1]?this.isBefore(o,n):!this.isAfter(o,n))}function Xi(t,e){var n,i=E(t)?t:Kn(t);return!(!this.isValid()||!i.isValid())&&("millisecond"===(e=rt(e)||"millisecond")?this.valueOf()===i.valueOf():(n=i.valueOf(),this.clone().startOf(e).valueOf()<=n&&n<=this.clone().endOf(e).valueOf()))}function qi(t,e){return this.isSame(t,e)||this.isAfter(t,e)}function Ki(t,e){return this.isSame(t,e)||this.isBefore(t,e)}function $i(t,e,n){var i,r,o;if(!this.isValid())return NaN;if(!(i=fi(t,this)).isValid())return NaN;switch(r=6e4*(i.utcOffset()-this.utcOffset()),e=rt(e)){case"year":o=Zi(this,i)/12;break;case"month":o=Zi(this,i);break;case"quarter":o=Zi(this,i)/3;break;case"second":o=(this-i)/1e3;break;case"minute":o=(this-i)/6e4;break;case"hour":o=(this-i)/36e5;break;case"day":o=(this-i-r)/864e5;break;case"week":o=(this-i-r)/6048e5;break;default:o=this-i}return n?o:ct(o)}function Zi(t,e){if(t.date()<e.date())return-Zi(e,t);var n=12*(e.year()-t.year())+(e.month()-t.month()),i=t.clone().add(n,"months");return-(n+(e-i<0?(e-i)/(i-t.clone().add(n-1,"months")):(e-i)/(t.clone().add(n+1,"months")-i)))||0}function Ji(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Qi(t){if(!this.isValid())return null;var e=!0!==t,n=e?this.clone().utc():this;return n.year()<0||n.year()>9999?W(n,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):L(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",W(n,"Z")):W(n,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function tr(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t,e,n,i,r="moment",o="";return this.isLocal()||(r=0===this.utcOffset()?"moment.utc":"moment.parseZone",o="Z"),t="["+r+'("]',e=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n="-MM-DD[T]HH:mm:ss.SSS",i=o+'[")]',this.format(t+e+n+i)}function er(t){t||(t=this.isUtc()?r.defaultFormatUtc:r.defaultFormat);var e=W(this,t);return this.localeData().postformat(e)}function nr(t,e){return this.isValid()&&(E(t)&&t.isValid()||Kn(t).isValid())?Ti({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function ir(t){return this.from(Kn(),t)}function rr(t,e){return this.isValid()&&(E(t)&&t.isValid()||Kn(t).isValid())?Ti({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function or(t){return this.to(Kn(),t)}function ar(t){var e;return void 0===t?this._locale._abbr:(null!=(e=yn(t))&&(this._locale=e),this)}r.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",r.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var sr=k("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(t){return void 0===t?this.localeData():this.locale(t)}));function lr(){return this._locale}var ur=1e3,cr=60*ur,hr=60*cr,dr=3506328*hr;function fr(t,e){return(t%e+e)%e}function pr(t,e,n){return t<100&&t>=0?new Date(t+400,e,n)-dr:new Date(t,e,n).valueOf()}function mr(t,e,n){return t<100&&t>=0?Date.UTC(t+400,e,n)-dr:Date.UTC(t,e,n)}function gr(t){var e,n;if(void 0===(t=rt(t))||"millisecond"===t||!this.isValid())return this;switch(n=this._isUTC?mr:pr,t){case"year":e=n(this.year(),0,1);break;case"quarter":e=n(this.year(),this.month()-this.month()%3,1);break;case"month":e=n(this.year(),this.month(),1);break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=n(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=fr(e+(this._isUTC?0:this.utcOffset()*cr),hr);break;case"minute":e=this._d.valueOf(),e-=fr(e,cr);break;case"second":e=this._d.valueOf(),e-=fr(e,ur)}return this._d.setTime(e),r.updateOffset(this,!0),this}function vr(t){var e,n;if(void 0===(t=rt(t))||"millisecond"===t||!this.isValid())return this;switch(n=this._isUTC?mr:pr,t){case"year":e=n(this.year()+1,0,1)-1;break;case"quarter":e=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=n(this.year(),this.month()+1,1)-1;break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=hr-fr(e+(this._isUTC?0:this.utcOffset()*cr),hr)-1;break;case"minute":e=this._d.valueOf(),e+=cr-fr(e,cr)-1;break;case"second":e=this._d.valueOf(),e+=ur-fr(e,ur)-1}return this._d.setTime(e),r.updateOffset(this,!0),this}function yr(){return this._d.valueOf()-6e4*(this._offset||0)}function br(){return Math.floor(this.valueOf()/1e3)}function _r(){return new Date(this.valueOf())}function wr(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function xr(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function Mr(){return this.isValid()?this.toISOString():null}function Er(){return y(this)}function Sr(){return p({},v(this))}function kr(){return v(this).overflow}function Cr(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Tr(t,e){var n,i,o,a=this._eras||yn("en")._eras;for(n=0,i=a.length;n<i;++n)switch("string"==typeof a[n].since&&(o=r(a[n].since).startOf("day"),a[n].since=o.valueOf()),typeof a[n].until){case"undefined":a[n].until=1/0;break;case"string":o=r(a[n].until).startOf("day").valueOf(),a[n].until=o.valueOf()}return a}function Dr(t,e,n){var i,r,o,a,s,l=this.eras();for(t=t.toUpperCase(),i=0,r=l.length;i<r;++i)if(o=l[i].name.toUpperCase(),a=l[i].abbr.toUpperCase(),s=l[i].narrow.toUpperCase(),n)switch(e){case"N":case"NN":case"NNN":if(a===t)return l[i];break;case"NNNN":if(o===t)return l[i];break;case"NNNNN":if(s===t)return l[i]}else if([o,a,s].indexOf(t)>=0)return l[i]}function Lr(t,e){var n=t.since<=t.until?1:-1;return void 0===e?r(t.since).year():r(t.since).year()+(e-t.offset)*n}function Ar(){var t,e,n,i=this.localeData().eras();for(t=0,e=i.length;t<e;++t){if(n=this.clone().startOf("day").valueOf(),i[t].since<=n&&n<=i[t].until)return i[t].name;if(i[t].until<=n&&n<=i[t].since)return i[t].name}return""}function Or(){var t,e,n,i=this.localeData().eras();for(t=0,e=i.length;t<e;++t){if(n=this.clone().startOf("day").valueOf(),i[t].since<=n&&n<=i[t].until)return i[t].narrow;if(i[t].until<=n&&n<=i[t].since)return i[t].narrow}return""}function Pr(){var t,e,n,i=this.localeData().eras();for(t=0,e=i.length;t<e;++t){if(n=this.clone().startOf("day").valueOf(),i[t].since<=n&&n<=i[t].until)return i[t].abbr;if(i[t].until<=n&&n<=i[t].since)return i[t].abbr}return""}function Ir(){var t,e,n,i,o=this.localeData().eras();for(t=0,e=o.length;t<e;++t)if(n=o[t].since<=o[t].until?1:-1,i=this.clone().startOf("day").valueOf(),o[t].since<=i&&i<=o[t].until||o[t].until<=i&&i<=o[t].since)return(this.year()-r(o[t].since).year())*n+o[t].offset;return this.year()}function Nr(t){return l(this,"_erasNameRegex")||Hr.call(this),t?this._erasNameRegex:this._erasRegex}function Rr(t){return l(this,"_erasAbbrRegex")||Hr.call(this),t?this._erasAbbrRegex:this._erasRegex}function Yr(t){return l(this,"_erasNarrowRegex")||Hr.call(this),t?this._erasNarrowRegex:this._erasRegex}function jr(t,e){return e.erasAbbrRegex(t)}function Fr(t,e){return e.erasNameRegex(t)}function Br(t,e){return e.erasNarrowRegex(t)}function zr(t,e){return e._eraYearOrdinalRegex||Dt}function Hr(){var t,e,n=[],i=[],r=[],o=[],a=this.eras();for(t=0,e=a.length;t<e;++t)i.push(jt(a[t].name)),n.push(jt(a[t].abbr)),r.push(jt(a[t].narrow)),o.push(jt(a[t].name)),o.push(jt(a[t].abbr)),o.push(jt(a[t].narrow));this._erasRegex=new RegExp("^("+o.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+i.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+r.join("|")+")","i")}function Gr(t,e){z(0,[t,t.length],0,e)}function Wr(t){return $r.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Ur(t){return $r.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function Vr(){return Ee(this.year(),1,4)}function Xr(){return Ee(this.isoWeekYear(),1,4)}function qr(){var t=this.localeData()._week;return Ee(this.year(),t.dow,t.doy)}function Kr(){var t=this.localeData()._week;return Ee(this.weekYear(),t.dow,t.doy)}function $r(t,e,n,i,r){var o;return null==t?Me(this,i,r).year:(e>(o=Ee(t,i,r))&&(e=o),Zr.call(this,t,e,n,i,r))}function Zr(t,e,n,i,r){var o=xe(t,e,n,i,r),a=_e(o.year,0,o.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}function Jr(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)}z("N",0,0,"eraAbbr"),z("NN",0,0,"eraAbbr"),z("NNN",0,0,"eraAbbr"),z("NNNN",0,0,"eraName"),z("NNNNN",0,0,"eraNarrow"),z("y",["y",1],"yo","eraYear"),z("y",["yy",2],0,"eraYear"),z("y",["yyy",3],0,"eraYear"),z("y",["yyyy",4],0,"eraYear"),Nt("N",jr),Nt("NN",jr),Nt("NNN",jr),Nt("NNNN",Fr),Nt("NNNNN",Br),Bt(["N","NN","NNN","NNNN","NNNNN"],(function(t,e,n,i){var r=n._locale.erasParse(t,i,n._strict);r?v(n).era=r:v(n).invalidEra=t})),Nt("y",Dt),Nt("yy",Dt),Nt("yyy",Dt),Nt("yyyy",Dt),Nt("yo",zr),Bt(["y","yy","yyy","yyyy"],Wt),Bt(["yo"],(function(t,e,n,i){var r;n._locale._eraYearOrdinalRegex&&(r=t.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?e[Wt]=n._locale.eraYearOrdinalParse(t,r):e[Wt]=parseInt(t,10)})),z(0,["gg",2],0,(function(){return this.weekYear()%100})),z(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),Gr("gggg","weekYear"),Gr("ggggg","weekYear"),Gr("GGGG","isoWeekYear"),Gr("GGGGG","isoWeekYear"),it("weekYear","gg"),it("isoWeekYear","GG"),st("weekYear",1),st("isoWeekYear",1),Nt("G",Lt),Nt("g",Lt),Nt("GG",Mt,bt),Nt("gg",Mt,bt),Nt("GGGG",Ct,wt),Nt("gggg",Ct,wt),Nt("GGGGG",Tt,xt),Nt("ggggg",Tt,xt),zt(["gggg","ggggg","GGGG","GGGGG"],(function(t,e,n,i){e[i.substr(0,2)]=ht(t)})),zt(["gg","GG"],(function(t,e,n,i){e[i]=r.parseTwoDigitYear(t)})),z("Q",0,"Qo","quarter"),it("quarter","Q"),st("quarter",7),Nt("Q",yt),Bt("Q",(function(t,e){e[Ut]=3*(ht(t)-1)})),z("D",["DD",2],"Do","date"),it("date","D"),st("date",9),Nt("D",Mt),Nt("DD",Mt,bt),Nt("Do",(function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient})),Bt(["D","DD"],Vt),Bt("Do",(function(t,e){e[Vt]=ht(t.match(Mt)[0])}));var Qr=dt("Date",!0);function to(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")}z("DDD",["DDDD",3],"DDDo","dayOfYear"),it("dayOfYear","DDD"),st("dayOfYear",4),Nt("DDD",kt),Nt("DDDD",_t),Bt(["DDD","DDDD"],(function(t,e,n){n._dayOfYear=ht(t)})),z("m",["mm",2],0,"minute"),it("minute","m"),st("minute",14),Nt("m",Mt),Nt("mm",Mt,bt),Bt(["m","mm"],qt);var eo=dt("Minutes",!1);z("s",["ss",2],0,"second"),it("second","s"),st("second",15),Nt("s",Mt),Nt("ss",Mt,bt),Bt(["s","ss"],Kt);var no,io,ro=dt("Seconds",!1);for(z("S",0,0,(function(){return~~(this.millisecond()/100)})),z(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),z(0,["SSS",3],0,"millisecond"),z(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),z(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),z(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),z(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),z(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),z(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),it("millisecond","ms"),st("millisecond",16),Nt("S",kt,yt),Nt("SS",kt,bt),Nt("SSS",kt,_t),no="SSSS";no.length<=9;no+="S")Nt(no,Dt);function oo(t,e){e[$t]=ht(1e3*("0."+t))}for(no="S";no.length<=9;no+="S")Bt(no,oo);function ao(){return this._isUTC?"UTC":""}function so(){return this._isUTC?"Coordinated Universal Time":""}io=dt("Milliseconds",!1),z("z",0,0,"zoneAbbr"),z("zz",0,0,"zoneName");var lo=M.prototype;function uo(t){return Kn(1e3*t)}function co(){return Kn.apply(null,arguments).parseZone()}function ho(t){return t}lo.add=Ii,lo.calendar=Hi,lo.clone=Gi,lo.diff=$i,lo.endOf=vr,lo.format=er,lo.from=nr,lo.fromNow=ir,lo.to=rr,lo.toNow=or,lo.get=mt,lo.invalidAt=kr,lo.isAfter=Wi,lo.isBefore=Ui,lo.isBetween=Vi,lo.isSame=Xi,lo.isSameOrAfter=qi,lo.isSameOrBefore=Ki,lo.isValid=Er,lo.lang=sr,lo.locale=ar,lo.localeData=lr,lo.max=Zn,lo.min=$n,lo.parsingFlags=Sr,lo.set=gt,lo.startOf=gr,lo.subtract=Ni,lo.toArray=wr,lo.toObject=xr,lo.toDate=_r,lo.toISOString=Qi,lo.inspect=tr,"undefined"!=typeof Symbol&&null!=Symbol.for&&(lo[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),lo.toJSON=Mr,lo.toString=Ji,lo.unix=br,lo.valueOf=yr,lo.creationData=Cr,lo.eraName=Ar,lo.eraNarrow=Or,lo.eraAbbr=Pr,lo.eraYear=Ir,lo.year=ve,lo.isLeapYear=ye,lo.weekYear=Wr,lo.isoWeekYear=Ur,lo.quarter=lo.quarters=Jr,lo.month=he,lo.daysInMonth=de,lo.week=lo.weeks=De,lo.isoWeek=lo.isoWeeks=Le,lo.weeksInYear=qr,lo.weeksInWeekYear=Kr,lo.isoWeeksInYear=Vr,lo.isoWeeksInISOWeekYear=Xr,lo.date=Qr,lo.day=lo.days=Ue,lo.weekday=Ve,lo.isoWeekday=Xe,lo.dayOfYear=to,lo.hour=lo.hours=on,lo.minute=lo.minutes=eo,lo.second=lo.seconds=ro,lo.millisecond=lo.milliseconds=io,lo.utcOffset=mi,lo.utc=vi,lo.local=yi,lo.parseZone=bi,lo.hasAlignedHourOffset=_i,lo.isDST=wi,lo.isLocal=Mi,lo.isUtcOffset=Ei,lo.isUtc=Si,lo.isUTC=Si,lo.zoneAbbr=ao,lo.zoneName=so,lo.dates=k("dates accessor is deprecated. Use date instead.",Qr),lo.months=k("months accessor is deprecated. Use month instead",he),lo.years=k("years accessor is deprecated. Use year instead",ve),lo.zone=k("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",gi),lo.isDSTShifted=k("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",xi);var fo=P.prototype;function po(t,e,n,i){var r=yn(),o=m().set(i,e);return r[n](o,t)}function mo(t,e,n){if(h(t)&&(e=t,t=void 0),t=t||"",null!=e)return po(t,e,n,"month");var i,r=[];for(i=0;i<12;i++)r[i]=po(t,i,n,"month");return r}function go(t,e,n,i){"boolean"==typeof t?(h(e)&&(n=e,e=void 0),e=e||""):(n=e=t,t=!1,h(e)&&(n=e,e=void 0),e=e||"");var r,o=yn(),a=t?o._week.dow:0,s=[];if(null!=n)return po(e,(n+a)%7,i,"day");for(r=0;r<7;r++)s[r]=po(e,(r+a)%7,i,"day");return s}function vo(t,e){return mo(t,e,"months")}function yo(t,e){return mo(t,e,"monthsShort")}function bo(t,e,n){return go(t,e,n,"weekdays")}function _o(t,e,n){return go(t,e,n,"weekdaysShort")}function wo(t,e,n){return go(t,e,n,"weekdaysMin")}fo.calendar=N,fo.longDateFormat=X,fo.invalidDate=K,fo.ordinal=J,fo.preparse=ho,fo.postformat=ho,fo.relativeTime=tt,fo.pastFuture=et,fo.set=A,fo.eras=Tr,fo.erasParse=Dr,fo.erasConvertYear=Lr,fo.erasAbbrRegex=Rr,fo.erasNameRegex=Nr,fo.erasNarrowRegex=Yr,fo.months=ae,fo.monthsShort=se,fo.monthsParse=ue,fo.monthsRegex=pe,fo.monthsShortRegex=fe,fo.week=Se,fo.firstDayOfYear=Te,fo.firstDayOfWeek=Ce,fo.weekdays=Be,fo.weekdaysMin=He,fo.weekdaysShort=ze,fo.weekdaysParse=We,fo.weekdaysRegex=qe,fo.weekdaysShortRegex=Ke,fo.weekdaysMinRegex=$e,fo.isPM=nn,fo.meridiem=an,mn("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10;return t+(1===ht(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")}}),r.lang=k("moment.lang is deprecated. Use moment.locale instead.",mn),r.langData=k("moment.langData is deprecated. Use moment.localeData instead.",yn);var xo=Math.abs;function Mo(){var t=this._data;return this._milliseconds=xo(this._milliseconds),this._days=xo(this._days),this._months=xo(this._months),t.milliseconds=xo(t.milliseconds),t.seconds=xo(t.seconds),t.minutes=xo(t.minutes),t.hours=xo(t.hours),t.months=xo(t.months),t.years=xo(t.years),this}function Eo(t,e,n,i){var r=Ti(e,n);return t._milliseconds+=i*r._milliseconds,t._days+=i*r._days,t._months+=i*r._months,t._bubble()}function So(t,e){return Eo(this,t,e,1)}function ko(t,e){return Eo(this,t,e,-1)}function Co(t){return t<0?Math.floor(t):Math.ceil(t)}function To(){var t,e,n,i,r,o=this._milliseconds,a=this._days,s=this._months,l=this._data;return o>=0&&a>=0&&s>=0||o<=0&&a<=0&&s<=0||(o+=864e5*Co(Lo(s)+a),a=0,s=0),l.milliseconds=o%1e3,t=ct(o/1e3),l.seconds=t%60,e=ct(t/60),l.minutes=e%60,n=ct(e/60),l.hours=n%24,a+=ct(n/24),s+=r=ct(Do(a)),a-=Co(Lo(r)),i=ct(s/12),s%=12,l.days=a,l.months=s,l.years=i,this}function Do(t){return 4800*t/146097}function Lo(t){return 146097*t/4800}function Ao(t){if(!this.isValid())return NaN;var e,n,i=this._milliseconds;if("month"===(t=rt(t))||"quarter"===t||"year"===t)switch(e=this._days+i/864e5,n=this._months+Do(e),t){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(e=this._days+Math.round(Lo(this._months)),t){case"week":return e/7+i/6048e5;case"day":return e+i/864e5;case"hour":return 24*e+i/36e5;case"minute":return 1440*e+i/6e4;case"second":return 86400*e+i/1e3;case"millisecond":return Math.floor(864e5*e)+i;default:throw new Error("Unknown unit "+t)}}function Oo(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*ht(this._months/12):NaN}function Po(t){return function(){return this.as(t)}}var Io=Po("ms"),No=Po("s"),Ro=Po("m"),Yo=Po("h"),jo=Po("d"),Fo=Po("w"),Bo=Po("M"),zo=Po("Q"),Ho=Po("y");function Go(){return Ti(this)}function Wo(t){return t=rt(t),this.isValid()?this[t+"s"]():NaN}function Uo(t){return function(){return this.isValid()?this._data[t]:NaN}}var Vo=Uo("milliseconds"),Xo=Uo("seconds"),qo=Uo("minutes"),Ko=Uo("hours"),$o=Uo("days"),Zo=Uo("months"),Jo=Uo("years");function Qo(){return ct(this.days()/7)}var ta=Math.round,ea={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function na(t,e,n,i,r){return r.relativeTime(e||1,!!n,t,i)}function ia(t,e,n,i){var r=Ti(t).abs(),o=ta(r.as("s")),a=ta(r.as("m")),s=ta(r.as("h")),l=ta(r.as("d")),u=ta(r.as("M")),c=ta(r.as("w")),h=ta(r.as("y")),d=o<=n.ss&&["s",o]||o<n.s&&["ss",o]||a<=1&&["m"]||a<n.m&&["mm",a]||s<=1&&["h"]||s<n.h&&["hh",s]||l<=1&&["d"]||l<n.d&&["dd",l];return null!=n.w&&(d=d||c<=1&&["w"]||c<n.w&&["ww",c]),(d=d||u<=1&&["M"]||u<n.M&&["MM",u]||h<=1&&["y"]||["yy",h])[2]=e,d[3]=+t>0,d[4]=i,na.apply(null,d)}function ra(t){return void 0===t?ta:"function"==typeof t&&(ta=t,!0)}function oa(t,e){return void 0!==ea[t]&&(void 0===e?ea[t]:(ea[t]=e,"s"===t&&(ea.ss=e-1),!0))}function aa(t,e){if(!this.isValid())return this.localeData().invalidDate();var n,i,r=!1,o=ea;return"object"==typeof t&&(e=t,t=!1),"boolean"==typeof t&&(r=t),"object"==typeof e&&(o=Object.assign({},ea,e),null!=e.s&&null==e.ss&&(o.ss=e.s-1)),i=ia(this,!r,o,n=this.localeData()),r&&(i=n.pastFuture(+this,i)),n.postformat(i)}var sa=Math.abs;function la(t){return(t>0)-(t<0)||+t}function ua(){if(!this.isValid())return this.localeData().invalidDate();var t,e,n,i,r,o,a,s,l=sa(this._milliseconds)/1e3,u=sa(this._days),c=sa(this._months),h=this.asSeconds();return h?(t=ct(l/60),e=ct(t/60),l%=60,t%=60,n=ct(c/12),c%=12,i=l?l.toFixed(3).replace(/\.?0+$/,""):"",r=h<0?"-":"",o=la(this._months)!==la(h)?"-":"",a=la(this._days)!==la(h)?"-":"",s=la(this._milliseconds)!==la(h)?"-":"",r+"P"+(n?o+n+"Y":"")+(c?o+c+"M":"")+(u?a+u+"D":"")+(e||t||l?"T":"")+(e?s+e+"H":"")+(t?s+t+"M":"")+(l?s+i+"S":"")):"P0D"}var ca=ai.prototype;return ca.isValid=ri,ca.abs=Mo,ca.add=So,ca.subtract=ko,ca.as=Ao,ca.asMilliseconds=Io,ca.asSeconds=No,ca.asMinutes=Ro,ca.asHours=Yo,ca.asDays=jo,ca.asWeeks=Fo,ca.asMonths=Bo,ca.asQuarters=zo,ca.asYears=Ho,ca.valueOf=Oo,ca._bubble=To,ca.clone=Go,ca.get=Wo,ca.milliseconds=Vo,ca.seconds=Xo,ca.minutes=qo,ca.hours=Ko,ca.days=$o,ca.weeks=Qo,ca.months=Zo,ca.years=Jo,ca.humanize=aa,ca.toISOString=ua,ca.toString=ua,ca.toJSON=ua,ca.locale=ar,ca.localeData=lr,ca.toIsoString=k("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",ua),ca.lang=sr,z("X",0,0,"unix"),z("x",0,0,"valueOf"),Nt("x",Lt),Nt("X",Pt),Bt("X",(function(t,e,n){n._d=new Date(1e3*parseFloat(t))})),Bt("x",(function(t,e,n){n._d=new Date(ht(t))})),r.version="2.29.1",o(Kn),r.fn=lo,r.min=Qn,r.max=ti,r.now=ei,r.utc=m,r.unix=uo,r.months=vo,r.isDate=d,r.locale=mn,r.invalid=b,r.duration=Ti,r.isMoment=E,r.weekdays=bo,r.parseZone=co,r.localeData=yn,r.isDuration=si,r.monthsShort=yo,r.weekdaysMin=wo,r.defineLocale=gn,r.updateLocale=vn,r.locales=bn,r.weekdaysShort=_o,r.normalizeUnits=rt,r.relativeTimeRounding=ra,r.relativeTimeThreshold=oa,r.calendarFormat=zi,r.prototype=lo,r.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},r}()},40582:(t,e,n)=>{var i=n(89550),r=n(68854),o=n(36820),a=n(43650),s=n(56601),l=[0,0];t.exports.x7=function(t,e,n,a,u){return i(t,n,a),o(t,t),r(e,-t[1],t[0]),r(l,-n[1],n[0]),u/s(e,l)},t.exports.mJ=function(t,e){return r(t,-e[1],e[0]),t},t.exports.o7=function(t,e,n){return a(t,e,n),o(t,t),t}},28660:(t,e,n)=>{var i;!function(t){!function(e){var i="object"==typeof n.g?n.g:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),r=o(t);function o(t,e){return function(n,i){"function"!=typeof t[n]&&Object.defineProperty(t,n,{configurable:!0,writable:!0,value:i}),e&&e(n,i)}}void 0===i.Reflect?i.Reflect=t:r=o(i.Reflect,r),function(t){var e=Object.prototype.hasOwnProperty,n="function"==typeof Symbol,i=n&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",r=n&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",o="function"==typeof Object.create,a={__proto__:[]}instanceof Array,s=!o&&!a,l={create:o?function(){return it(Object.create(null))}:a?function(){return it({__proto__:null})}:function(){return it({})},has:s?function(t,n){return e.call(t,n)}:function(t,e){return e in t},get:s?function(t,n){return e.call(t,n)?t[n]:void 0}:function(t,e){return t[e]}},u=Object.getPrototypeOf(Function),c="object"==typeof process&&process.env&&"true"===process.env.REFLECT_METADATA_USE_MAP_POLYFILL,h=c||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?tt():Map,d=c||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?et():Set,f=new(c||"function"!=typeof WeakMap?nt():WeakMap);function p(t,e,n,i){if(N(n)){if(!W(t))throw new TypeError;if(!V(e))throw new TypeError;return E(t,e)}if(!W(t))throw new TypeError;if(!j(e))throw new TypeError;if(!j(i)&&!N(i)&&!R(i))throw new TypeError;return R(i)&&(i=void 0),S(t,e,n=G(n),i)}function m(t,e){function n(n,i){if(!j(n))throw new TypeError;if(!N(i)&&!X(i))throw new TypeError;A(t,e,n,i)}return n}function g(t,e,n,i){if(!j(n))throw new TypeError;return N(i)||(i=G(i)),A(t,e,n,i)}function v(t,e,n){if(!j(e))throw new TypeError;return N(n)||(n=G(n)),C(t,e,n)}function y(t,e,n){if(!j(e))throw new TypeError;return N(n)||(n=G(n)),T(t,e,n)}function b(t,e,n){if(!j(e))throw new TypeError;return N(n)||(n=G(n)),D(t,e,n)}function _(t,e,n){if(!j(e))throw new TypeError;return N(n)||(n=G(n)),L(t,e,n)}function w(t,e){if(!j(t))throw new TypeError;return N(e)||(e=G(e)),O(t,e)}function x(t,e){if(!j(t))throw new TypeError;return N(e)||(e=G(e)),P(t,e)}function M(t,e,n){if(!j(e))throw new TypeError;N(n)||(n=G(n));var i=k(e,n,!1);if(N(i))return!1;if(!i.delete(t))return!1;if(i.size>0)return!0;var r=f.get(e);return r.delete(n),r.size>0||f.delete(e),!0}function E(t,e){for(var n=t.length-1;n>=0;--n){var i=(0,t[n])(e);if(!N(i)&&!R(i)){if(!V(i))throw new TypeError;e=i}}return e}function S(t,e,n,i){for(var r=t.length-1;r>=0;--r){var o=(0,t[r])(e,n,i);if(!N(o)&&!R(o)){if(!j(o))throw new TypeError;i=o}}return i}function k(t,e,n){var i=f.get(t);if(N(i)){if(!n)return;i=new h,f.set(t,i)}var r=i.get(e);if(N(r)){if(!n)return;r=new h,i.set(e,r)}return r}function C(t,e,n){if(T(t,e,n))return!0;var i=Q(e);return!R(i)&&C(t,i,n)}function T(t,e,n){var i=k(e,n,!1);return!N(i)&&z(i.has(t))}function D(t,e,n){if(T(t,e,n))return L(t,e,n);var i=Q(e);return R(i)?void 0:D(t,i,n)}function L(t,e,n){var i=k(e,n,!1);if(!N(i))return i.get(t)}function A(t,e,n,i){k(n,i,!0).set(t,e)}function O(t,e){var n=P(t,e),i=Q(t);if(null===i)return n;var r=O(i,e);if(r.length<=0)return n;if(n.length<=0)return r;for(var o=new d,a=[],s=0,l=n;s<l.length;s++){var u=l[s];o.has(u)||(o.add(u),a.push(u))}for(var c=0,h=r;c<h.length;c++){u=h[c];o.has(u)||(o.add(u),a.push(u))}return a}function P(t,e){var n=[],i=k(t,e,!1);if(N(i))return n;for(var r=K(i.keys()),o=0;;){var a=Z(r);if(!a)return n.length=o,n;var s=$(a);try{n[o]=s}catch(t){try{J(r)}finally{throw t}}o++}}function I(t){if(null===t)return 1;switch(typeof t){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===t?1:6;default:return 6}}function N(t){return void 0===t}function R(t){return null===t}function Y(t){return"symbol"==typeof t}function j(t){return"object"==typeof t?null!==t:"function"==typeof t}function F(t,e){switch(I(t)){case 0:case 1:case 2:case 3:case 4:case 5:return t}var n=3===e?"string":5===e?"number":"default",r=q(t,i);if(void 0!==r){var o=r.call(t,n);if(j(o))throw new TypeError;return o}return B(t,"default"===n?"number":n)}function B(t,e){if("string"===e){var n=t.toString;if(U(n))if(!j(r=n.call(t)))return r;if(U(i=t.valueOf))if(!j(r=i.call(t)))return r}else{var i;if(U(i=t.valueOf))if(!j(r=i.call(t)))return r;var r,o=t.toString;if(U(o))if(!j(r=o.call(t)))return r}throw new TypeError}function z(t){return!!t}function H(t){return""+t}function G(t){var e=F(t,3);return Y(e)?e:H(e)}function W(t){return Array.isArray?Array.isArray(t):t instanceof Object?t instanceof Array:"[object Array]"===Object.prototype.toString.call(t)}function U(t){return"function"==typeof t}function V(t){return"function"==typeof t}function X(t){switch(I(t)){case 3:case 4:return!0;default:return!1}}function q(t,e){var n=t[e];if(null!=n){if(!U(n))throw new TypeError;return n}}function K(t){var e=q(t,r);if(!U(e))throw new TypeError;var n=e.call(t);if(!j(n))throw new TypeError;return n}function $(t){return t.value}function Z(t){var e=t.next();return!e.done&&e}function J(t){var e=t.return;e&&e.call(t)}function Q(t){var e=Object.getPrototypeOf(t);if("function"!=typeof t||t===u)return e;if(e!==u)return e;var n=t.prototype,i=n&&Object.getPrototypeOf(n);if(null==i||i===Object.prototype)return e;var r=i.constructor;return"function"!=typeof r||r===t?e:r}function tt(){var t={},e=[],n=function(){function t(t,e,n){this._index=0,this._keys=t,this._values=e,this._selector=n}return t.prototype["@@iterator"]=function(){return this},t.prototype[r]=function(){return this},t.prototype.next=function(){var t=this._index;if(t>=0&&t<this._keys.length){var n=this._selector(this._keys[t],this._values[t]);return t+1>=this._keys.length?(this._index=-1,this._keys=e,this._values=e):this._index++,{value:n,done:!1}}return{value:void 0,done:!0}},t.prototype.throw=function(t){throw this._index>=0&&(this._index=-1,this._keys=e,this._values=e),t},t.prototype.return=function(t){return this._index>=0&&(this._index=-1,this._keys=e,this._values=e),{value:t,done:!0}},t}();return function(){function e(){this._keys=[],this._values=[],this._cacheKey=t,this._cacheIndex=-2}return Object.defineProperty(e.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),e.prototype.has=function(t){return this._find(t,!1)>=0},e.prototype.get=function(t){var e=this._find(t,!1);return e>=0?this._values[e]:void 0},e.prototype.set=function(t,e){var n=this._find(t,!0);return this._values[n]=e,this},e.prototype.delete=function(e){var n=this._find(e,!1);if(n>=0){for(var i=this._keys.length,r=n+1;r<i;r++)this._keys[r-1]=this._keys[r],this._values[r-1]=this._values[r];return this._keys.length--,this._values.length--,e===this._cacheKey&&(this._cacheKey=t,this._cacheIndex=-2),!0}return!1},e.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=t,this._cacheIndex=-2},e.prototype.keys=function(){return new n(this._keys,this._values,i)},e.prototype.values=function(){return new n(this._keys,this._values,o)},e.prototype.entries=function(){return new n(this._keys,this._values,a)},e.prototype["@@iterator"]=function(){return this.entries()},e.prototype[r]=function(){return this.entries()},e.prototype._find=function(t,e){return this._cacheKey!==t&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=t)),this._cacheIndex<0&&e&&(this._cacheIndex=this._keys.length,this._keys.push(t),this._values.push(void 0)),this._cacheIndex},e}();function i(t,e){return t}function o(t,e){return e}function a(t,e){return[t,e]}}function et(){return function(){function t(){this._map=new h}return Object.defineProperty(t.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),t.prototype.has=function(t){return this._map.has(t)},t.prototype.add=function(t){return this._map.set(t,t),this},t.prototype.delete=function(t){return this._map.delete(t)},t.prototype.clear=function(){this._map.clear()},t.prototype.keys=function(){return this._map.keys()},t.prototype.values=function(){return this._map.values()},t.prototype.entries=function(){return this._map.entries()},t.prototype["@@iterator"]=function(){return this.keys()},t.prototype[r]=function(){return this.keys()},t}()}function nt(){var t=16,n=l.create(),i=r();return function(){function t(){this._key=r()}return t.prototype.has=function(t){var e=o(t,!1);return void 0!==e&&l.has(e,this._key)},t.prototype.get=function(t){var e=o(t,!1);return void 0!==e?l.get(e,this._key):void 0},t.prototype.set=function(t,e){return o(t,!0)[this._key]=e,this},t.prototype.delete=function(t){var e=o(t,!1);return void 0!==e&&delete e[this._key]},t.prototype.clear=function(){this._key=r()},t}();function r(){var t;do{t="@@WeakMap@@"+u()}while(l.has(n,t));return n[t]=!0,t}function o(t,n){if(!e.call(t,i)){if(!n)return;Object.defineProperty(t,i,{value:l.create()})}return t[i]}function a(t,e){for(var n=0;n<e;++n)t[n]=255*Math.random()|0;return t}function s(t){return"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(t)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(t)):a(new Uint8Array(t),t):a(new Array(t),t)}function u(){var e=s(t);e[6]=79&e[6]|64,e[8]=191&e[8]|128;for(var n="",i=0;i<t;++i){var r=e[i];4!==i&&6!==i&&8!==i||(n+="-"),r<16&&(n+="0"),n+=r.toString(16).toLowerCase()}return n}}function it(t){return t.__=void 0,delete t.__,t}t("decorate",p),t("metadata",m),t("defineMetadata",g),t("hasMetadata",v),t("hasOwnMetadata",y),t("getMetadata",b),t("getOwnMetadata",_),t("getMetadataKeys",w),t("getOwnMetadataKeys",x),t("deleteMetadata",M)}(r)}()}(i||(i={}))},35666:t=>{var e=function(t){"use strict";var e,n=Object.prototype,i=n.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function u(t,e,n,i){var r=e&&e.prototype instanceof g?e:g,o=Object.create(r.prototype),a=new T(i||[]);return o._invoke=function(t,e,n){var i=h;return function(r,o){if(i===f)throw new Error("Generator is already running");if(i===p){if("throw"===r)throw o;return L()}for(n.method=r,n.arg=o;;){var a=n.delegate;if(a){var s=S(a,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===h)throw i=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=f;var l=c(t,e,n);if("normal"===l.type){if(i=n.done?p:d,l.arg===m)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i=p,n.method="throw",n.arg=l.arg)}}}(t,n,a),o}function c(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var h="suspendedStart",d="suspendedYield",f="executing",p="completed",m={};function g(){}function v(){}function y(){}var b={};l(b,o,(function(){return this}));var _=Object.getPrototypeOf,w=_&&_(_(D([])));w&&w!==n&&i.call(w,o)&&(b=w);var x=y.prototype=g.prototype=Object.create(b);function M(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function n(r,o,a,s){var l=c(t[r],t,o);if("throw"!==l.type){var u=l.arg,h=u.value;return h&&"object"==typeof h&&i.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(h).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var r;this._invoke=function(t,i){function o(){return new e((function(e,r){n(t,i,e,r)}))}return r=r?r.then(o,o):o()}}function S(t,n){var i=t.iterator[n.method];if(i===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,S(t,n),"throw"===n.method))return m;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var r=c(i,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,m;var o=r.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function D(t){if(t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function n(){for(;++r<t.length;)if(i.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}return{next:L}}function L(){return{value:e,done:!0}}return v.prototype=y,l(x,"constructor",y),l(y,"constructor",v),v.displayName=l(y,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,l(t,s,"GeneratorFunction")),t.prototype=Object.create(x),t},t.awrap=function(t){return{__await:t}},M(E.prototype),l(E.prototype,a,(function(){return this})),t.AsyncIterator=E,t.async=function(e,n,i,r,o){void 0===o&&(o=Promise);var a=new E(u(e,n,i,r),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},M(x),l(x,s,"Generator"),l(x,o,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var i=e.pop();if(i in t)return n.value=i,n.done=!1,n}return n.done=!0,n}},t.values=D,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(i,r){return s.type="throw",s.arg=t,n.next=i,r&&(n.method="next",n.arg=e),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=i.call(a,"catchLoc"),u=i.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),C(n),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var r=i.arg;C(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,i){return this.delegate={iterator:D(t),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=e),m}},t}(t.exports);try{regeneratorRuntime=e}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}},81550:function(t){t.exports=function(){"use strict";var t=function(t){return t instanceof Uint8Array||t instanceof Uint16Array||t instanceof Uint32Array||t instanceof Int8Array||t instanceof Int16Array||t instanceof Int32Array||t instanceof Float32Array||t instanceof Float64Array||t instanceof Uint8ClampedArray},e=function(t,e){for(var n=Object.keys(e),i=0;i<n.length;++i)t[n[i]]=e[n[i]];return t},n="\n";function i(t){return"undefined"!=typeof atob?atob(t):"base64:"+t}function r(t){var e=new Error("(regl) "+t);throw console.error(e),e}function o(t,e){t||r(e)}function a(t){return t?": "+t:""}function s(t,e,n){t in e||r("unknown parameter ("+t+")"+a(n)+". possible values: "+Object.keys(e).join())}function l(e,n){t(e)||r("invalid parameter type"+a(n)+". must be a typed array")}function u(t,e){switch(e){case"number":return"number"==typeof t;case"object":return"object"==typeof t;case"string":return"string"==typeof t;case"boolean":return"boolean"==typeof t;case"function":return"function"==typeof t;case"undefined":return void 0===t;case"symbol":return"symbol"==typeof t}}function c(t,e,n){u(t,e)||r("invalid parameter type"+a(n)+". expected "+e+", got "+typeof t)}function h(t,e){t>=0&&(0|t)===t||r("invalid parameter type, ("+t+")"+a(e)+". must be a nonnegative integer")}function d(t,e,n){e.indexOf(t)<0&&r("invalid value"+a(n)+". must be one of: "+e)}var f=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function p(t){Object.keys(t).forEach((function(t){f.indexOf(t)<0&&r('invalid regl constructor argument "'+t+'". must be one of '+f)}))}function m(t,e){for(t+="";t.length<e;)t=" "+t;return t}function g(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function v(t,e){this.number=t,this.line=e,this.errors=[]}function y(t,e,n){this.file=t,this.line=e,this.message=n}function b(){var t=new Error,e=(t.stack||t).toString(),n=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(e);if(n)return n[1];var i=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(e);return i?i[1]:"unknown"}function _(){var t=new Error,e=(t.stack||t).toString(),n=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(e);if(n)return n[1];var i=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(e);return i?i[1]:"unknown"}function w(t,e){var n=t.split("\n"),r=1,o=0,a={unknown:new g,0:new g};a.unknown.name=a[0].name=e||b(),a.unknown.lines.push(new v(0,""));for(var s=0;s<n.length;++s){var l=n[s],u=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(l);if(u)switch(u[1]){case"line":var c=/(\d+)(\s+\d+)?/.exec(u[2]);c&&(r=0|c[1],c[2]&&((o=0|c[2])in a||(a[o]=new g)));break;case"define":var h=/SHADER_NAME(_B64)?\s+(.*)$/.exec(u[2]);h&&(a[o].name=h[1]?i(h[2]):h[2])}a[o].lines.push(new v(r++,l))}return Object.keys(a).forEach((function(t){var e=a[t];e.lines.forEach((function(t){e.index[t.number]=t}))})),a}function x(t){var e=[];return t.split("\n").forEach((function(t){if(!(t.length<5)){var n=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(t);n?e.push(new y(0|n[1],0|n[2],n[3].trim())):t.length>0&&e.push(new y("unknown",0,t))}})),e}function M(t,e){e.forEach((function(e){var n=t[e.file];if(n){var i=n.index[e.line];if(i)return i.errors.push(e),void(n.hasErrors=!0)}t.unknown.hasErrors=!0,t.unknown.lines[0].errors.push(e)}))}function E(t,e,i,r,a){if(!t.getShaderParameter(e,t.COMPILE_STATUS)){var s=t.getShaderInfoLog(e),l=r===t.FRAGMENT_SHADER?"fragment":"vertex";A(i,"string",l+" shader source must be a string",a);var u=w(i,a),c=x(s);M(u,c),Object.keys(u).forEach((function(t){var e=u[t];if(e.hasErrors){var i=[""],r=[""];o("file number "+t+": "+e.name+"\n","color:red;text-decoration:underline;font-weight:bold"),e.lines.forEach((function(t){if(t.errors.length>0){o(m(t.number,4)+"|  ","background-color:yellow; font-weight:bold"),o(t.line+n,"color:red; background-color:yellow; font-weight:bold");var e=0;t.errors.forEach((function(i){var r=i.message,a=/^\s*'(.*)'\s*:\s*(.*)$/.exec(r);if(a){var s=a[1];r=a[2],"assign"===s&&(s="="),e=Math.max(t.line.indexOf(s,e),0)}else e=0;o(m("| ",6)),o(m("^^^",e+3)+n,"font-weight:bold"),o(m("| ",6)),o(r+n,"font-weight:bold")})),o(m("| ",6)+n)}else o(m(t.number,4)+"|  "),o(t.line+n,"color:red")})),"undefined"==typeof document||window.chrome?console.log(i.join("")):(r[0]=i.join("%c"),console.log.apply(console,r))}function o(t,e){i.push(t),r.push(e||"")}})),o.raise("Error compiling "+l+" shader, "+u[0].name)}}function S(t,e,i,r,a){if(!t.getProgramParameter(e,t.LINK_STATUS)){var s=t.getProgramInfoLog(e),l=w(i,a),u='Error linking program with vertex shader, "'+w(r,a)[0].name+'", and fragment shader "'+l[0].name+'"';"undefined"!=typeof document?console.log("%c"+u+n+"%c"+s,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(u+n+s),o.raise(u)}}function k(t){t._commandRef=b()}function C(t,e,n,i){function r(t){return t?i.id(t):0}function o(t,e){Object.keys(e).forEach((function(e){t[i.id(e)]=!0}))}k(t),t._fragId=r(t.static.frag),t._vertId=r(t.static.vert);var a=t._uniformSet={};o(a,e.static),o(a,e.dynamic);var s=t._attributeSet={};o(s,n.static),o(s,n.dynamic),t._hasCount="count"in t.static||"count"in t.dynamic||"elements"in t.static||"elements"in t.dynamic}function T(t,e){var n=_();r(t+" in command "+(e||b())+("unknown"===n?"":" called from "+n))}function D(t,e,n){t||T(e,n||b())}function L(t,e,n,i){t in e||T("unknown parameter ("+t+")"+a(n)+". possible values: "+Object.keys(e).join(),i||b())}function A(t,e,n,i){u(t,e)||T("invalid parameter type"+a(n)+". expected "+e+", got "+typeof t,i||b())}function O(t){t()}function P(t,e,n){t.texture?d(t.texture._texture.internalformat,e,"unsupported texture format for attachment"):d(t.renderbuffer._renderbuffer.format,n,"unsupported renderbuffer format for attachment")}var I=33071,N=9728,R=9984,Y=9985,j=9986,F=9987,B=5121,z=5122,H=5123,G=5124,W=5125,U=5126,V=32819,X=32820,q=33635,K=34042,$=36193,Z={};function J(t,e){return t===X||t===V||t===q?2:t===K?4:Z[t]*e}function Q(t){return!(t&t-1||!t)}function tt(t,e,n){var i,r=e.width,a=e.height,s=e.channels;o(r>0&&r<=n.maxTextureSize&&a>0&&a<=n.maxTextureSize,"invalid texture shape"),t.wrapS===I&&t.wrapT===I||o(Q(r)&&Q(a),"incompatible wrap mode for texture, both width and height must be power of 2"),1===e.mipmask?1!==r&&1!==a&&o(t.minFilter!==R&&t.minFilter!==j&&t.minFilter!==Y&&t.minFilter!==F,"min filter requires mipmap"):(o(Q(r)&&Q(a),"texture must be a square power of 2 to support mipmapping"),o(e.mipmask===(r<<1)-1,"missing or incomplete mipmap data")),e.type===U&&(n.extensions.indexOf("oes_texture_float_linear")<0&&o(t.minFilter===N&&t.magFilter===N,"filter not supported, must enable oes_texture_float_linear"),o(!t.genMipmaps,"mipmap generation not supported with float textures"));var l=e.images;for(i=0;i<16;++i)if(l[i]){var u=r>>i,c=a>>i;o(e.mipmask&1<<i,"missing mipmap data");var h=l[i];if(o(h.width===u&&h.height===c,"invalid shape for mip images"),o(h.format===e.format&&h.internalformat===e.internalformat&&h.type===e.type,"incompatible type for mip image"),h.compressed);else if(h.data){var d=Math.ceil(J(h.type,s)*u/h.unpackAlignment)*h.unpackAlignment;o(h.data.byteLength===d*c,"invalid data for image, buffer size is inconsistent with image format")}else h.element||h.copy}else t.genMipmaps||o(0==(e.mipmask&1<<i),"extra mipmap data");e.compressed&&o(!t.genMipmaps,"mipmap generation for compressed images not supported")}function et(t,e,n,i){var r=t.width,a=t.height,s=t.channels;o(r>0&&r<=i.maxTextureSize&&a>0&&a<=i.maxTextureSize,"invalid texture shape"),o(r===a,"cube map must be square"),o(e.wrapS===I&&e.wrapT===I,"wrap mode not supported by cube map");for(var l=0;l<n.length;++l){var u=n[l];o(u.width===r&&u.height===a,"inconsistent cube map face shape"),e.genMipmaps&&(o(!u.compressed,"can not generate mipmap for compressed textures"),o(1===u.mipmask,"can not specify mipmaps and generate mipmaps"));for(var c=u.images,h=0;h<16;++h){var d=c[h];if(d){var f=r>>h,p=a>>h;o(u.mipmask&1<<h,"missing mipmap data"),o(d.width===f&&d.height===p,"invalid shape for mip images"),o(d.format===t.format&&d.internalformat===t.internalformat&&d.type===t.type,"incompatible type for mip image"),d.compressed||(d.data?o(d.data.byteLength===f*p*Math.max(J(d.type,s),d.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):d.element||d.copy)}}}}Z[5120]=Z[B]=1,Z[z]=Z[H]=Z[$]=Z[q]=Z[V]=Z[X]=2,Z[G]=Z[W]=Z[U]=Z[K]=4;var nt=e(o,{optional:O,raise:r,commandRaise:T,command:D,parameter:s,commandParameter:L,constructor:p,type:c,commandType:A,isTypedArray:l,nni:h,oneOf:d,shaderError:E,linkError:S,callSite:_,saveCommandRef:k,saveDrawInfo:C,framebufferFormat:P,guessCommand:b,texture2D:tt,textureCube:et}),it=0,rt=0,ot=5,at=6;function st(t,e){this.id=it++,this.type=t,this.data=e}function lt(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function ut(t){if(0===t.length)return[];var e=t.charAt(0),n=t.charAt(t.length-1);if(t.length>1&&e===n&&('"'===e||"'"===e))return['"'+lt(t.substr(1,t.length-2))+'"'];var i=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(t);if(i)return ut(t.substr(0,i.index)).concat(ut(i[1])).concat(ut(t.substr(i.index+i[0].length)));var r=t.split(".");if(1===r.length)return['"'+lt(t)+'"'];for(var o=[],a=0;a<r.length;++a)o=o.concat(ut(r[a]));return o}function ct(t){return"["+ut(t).join("][")+"]"}function ht(t,e){return new st(t,ct(e+""))}function dt(t){return"function"==typeof t&&!t._reglType||t instanceof st}function ft(t,e){return"function"==typeof t?new st(rt,t):"number"==typeof t||"boolean"==typeof t?new st(ot,t):Array.isArray(t)?new st(at,t.map(((t,n)=>ft(t,e+"["+n+"]")))):t instanceof st?t:void nt(!1,"invalid option type in uniform "+e)}var pt={DynamicVariable:st,define:ht,isDynamic:dt,unbox:ft,accessor:ct},mt={next:"function"==typeof requestAnimationFrame?function(t){return requestAnimationFrame(t)}:function(t){return setTimeout(t,16)},cancel:"function"==typeof cancelAnimationFrame?function(t){return cancelAnimationFrame(t)}:clearTimeout},gt="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date};function vt(){var t={"":0},e=[""];return{id:function(n){var i=t[n];return i||(i=t[n]=e.length,e.push(n),i)},str:function(t){return e[t]}}}function yt(t,n,i){var r,o=document.createElement("canvas");function a(){var n=window.innerWidth,r=window.innerHeight;if(t!==document.body){var a=t.getBoundingClientRect();n=a.right-a.left,r=a.bottom-a.top}o.width=i*n,o.height=i*r,e(o.style,{width:n+"px",height:r+"px"})}function s(){r?r.disconnect():window.removeEventListener("resize",a),t.removeChild(o)}return e(o.style,{border:0,margin:0,padding:0,top:0,left:0}),t.appendChild(o),t===document.body&&(o.style.position="absolute",e(t.style,{margin:0,padding:0})),t!==document.body&&"function"==typeof ResizeObserver?(r=new ResizeObserver((function(){setTimeout(a)}))).observe(t):window.addEventListener("resize",a,!1),a(),{canvas:o,onDestroy:s}}function bt(t,e){function n(n){try{return t.getContext(n,e)}catch(t){return null}}return n("webgl")||n("experimental-webgl")||n("webgl-experimental")}function _t(t){return"string"==typeof t.nodeName&&"function"==typeof t.appendChild&&"function"==typeof t.getBoundingClientRect}function wt(t){return"function"==typeof t.drawArrays||"function"==typeof t.drawElements}function xt(t){return"string"==typeof t?t.split():(nt(Array.isArray(t),"invalid extension array"),t)}function Mt(t){return"string"==typeof t?(nt("undefined"!=typeof document,"not supported outside of DOM"),document.querySelector(t)):t}function Et(t){var e,n,i,r,o=t||{},a={},s=[],l=[],u="undefined"==typeof window?1:window.devicePixelRatio,c=!1,h=function(t){t&&nt.raise(t)},d=function(){};if("string"==typeof o?(nt("undefined"!=typeof document,"selector queries only supported in DOM enviroments"),e=document.querySelector(o),nt(e,"invalid query string for element")):"object"==typeof o?_t(o)?e=o:wt(o)?i=(r=o).canvas:(nt.constructor(o),"gl"in o?r=o.gl:"canvas"in o?i=Mt(o.canvas):"container"in o&&(n=Mt(o.container)),"attributes"in o&&(a=o.attributes,nt.type(a,"object","invalid context attributes")),"extensions"in o&&(s=xt(o.extensions)),"optionalExtensions"in o&&(l=xt(o.optionalExtensions)),"onDone"in o&&(nt.type(o.onDone,"function","invalid or missing onDone callback"),h=o.onDone),"profile"in o&&(c=!!o.profile),"pixelRatio"in o&&(u=+o.pixelRatio,nt(u>0,"invalid pixel ratio"))):nt.raise("invalid arguments to regl"),e&&("canvas"===e.nodeName.toLowerCase()?i=e:n=e),!r){if(!i){nt("undefined"!=typeof document,"must manually specify webgl context outside of DOM environments");var f=yt(n||document.body,h,u);if(!f)return null;i=f.canvas,d=f.onDestroy}void 0===a.premultipliedAlpha&&(a.premultipliedAlpha=!0),r=bt(i,a)}return r?{gl:r,canvas:i,container:n,extensions:s,optionalExtensions:l,pixelRatio:u,profile:c,onDone:h,onDestroy:d}:(d(),h("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function St(t,e){var n={};function i(e){nt.type(e,"string","extension name must be string");var i,r=e.toLowerCase();try{i=n[r]=t.getExtension(r)}catch(t){}return!!i}for(var r=0;r<e.extensions.length;++r){var o=e.extensions[r];if(!i(o))return e.onDestroy(),e.onDone('"'+o+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return e.optionalExtensions.forEach(i),{extensions:n,restore:function(){Object.keys(n).forEach((function(t){if(n[t]&&!i(t))throw new Error("(regl): error restoring extension "+t)}))}}}function kt(t,e){for(var n=Array(t),i=0;i<t;++i)n[i]=e(i);return n}var Ct=5120,Tt=5121,Dt=5122,Lt=5123,At=5124,Ot=5125,Pt=5126;function It(t){for(var e=16;e<=1<<28;e*=16)if(t<=e)return e;return 0}function Nt(t){var e,n;return e=(t>65535)<<4,e|=n=((t>>>=e)>255)<<3,e|=n=((t>>>=n)>15)<<2,(e|=n=((t>>>=n)>3)<<1)|(t>>>=n)>>1}function Rt(){var t=kt(8,(function(){return[]}));function e(e){var n=It(e),i=t[Nt(n)>>2];return i.length>0?i.pop():new ArrayBuffer(n)}function n(e){t[Nt(e.byteLength)>>2].push(e)}function i(t,n){var i=null;switch(t){case Ct:i=new Int8Array(e(n),0,n);break;case Tt:i=new Uint8Array(e(n),0,n);break;case Dt:i=new Int16Array(e(2*n),0,n);break;case Lt:i=new Uint16Array(e(2*n),0,n);break;case At:i=new Int32Array(e(4*n),0,n);break;case Ot:i=new Uint32Array(e(4*n),0,n);break;case Pt:i=new Float32Array(e(4*n),0,n);break;default:return null}return i.length!==n?i.subarray(0,n):i}function r(t){n(t.buffer)}return{alloc:e,free:n,allocType:i,freeType:r}}var Yt=Rt();Yt.zero=Rt();var jt=3408,Ft=3410,Bt=3411,zt=3412,Ht=3413,Gt=3414,Wt=3415,Ut=33901,Vt=33902,Xt=3379,qt=3386,Kt=34921,$t=36347,Zt=36348,Jt=35661,Qt=35660,te=34930,ee=36349,ne=34076,ie=34024,re=7936,oe=7937,ae=7938,se=35724,le=34047,ue=36063,ce=34852,he=3553,de=34067,fe=34069,pe=33984,me=6408,ge=5126,ve=5121,ye=36160,be=36053,_e=36064,we=16384,xe=function(t,e){var n=1;e.ext_texture_filter_anisotropic&&(n=t.getParameter(le));var i=1,r=1;e.webgl_draw_buffers&&(i=t.getParameter(ce),r=t.getParameter(ue));var o=!!e.oes_texture_float;if(o){var a=t.createTexture();t.bindTexture(he,a),t.texImage2D(he,0,me,1,1,0,me,ge,null);var s=t.createFramebuffer();if(t.bindFramebuffer(ye,s),t.framebufferTexture2D(ye,_e,he,a,0),t.bindTexture(he,null),t.checkFramebufferStatus(ye)!==be)o=!1;else{t.viewport(0,0,1,1),t.clearColor(1,0,0,1),t.clear(we);var l=Yt.allocType(ge,4);t.readPixels(0,0,1,1,me,ge,l),t.getError()?o=!1:(t.deleteFramebuffer(s),t.deleteTexture(a),o=1===l[0]),Yt.freeType(l)}}var u=!0;if("undefined"==typeof navigator||!(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))){var c=t.createTexture(),h=Yt.allocType(ve,36);t.activeTexture(pe),t.bindTexture(de,c),t.texImage2D(fe,0,me,3,3,0,me,ve,h),Yt.freeType(h),t.bindTexture(de,null),t.deleteTexture(c),u=!t.getError()}return{colorBits:[t.getParameter(Ft),t.getParameter(Bt),t.getParameter(zt),t.getParameter(Ht)],depthBits:t.getParameter(Gt),stencilBits:t.getParameter(Wt),subpixelBits:t.getParameter(jt),extensions:Object.keys(e).filter((function(t){return!!e[t]})),maxAnisotropic:n,maxDrawbuffers:i,maxColorAttachments:r,pointSizeDims:t.getParameter(Ut),lineWidthDims:t.getParameter(Vt),maxViewportDims:t.getParameter(qt),maxCombinedTextureUnits:t.getParameter(Jt),maxCubeMapSize:t.getParameter(ne),maxRenderbufferSize:t.getParameter(ie),maxTextureUnits:t.getParameter(te),maxTextureSize:t.getParameter(Xt),maxAttributes:t.getParameter(Kt),maxVertexUniforms:t.getParameter($t),maxVertexTextureUnits:t.getParameter(Qt),maxVaryingVectors:t.getParameter(Zt),maxFragmentUniforms:t.getParameter(ee),glsl:t.getParameter(se),renderer:t.getParameter(oe),vendor:t.getParameter(re),version:t.getParameter(ae),readFloat:o,npotTextureCube:u}};function Me(e){return!!e&&"object"==typeof e&&Array.isArray(e.shape)&&Array.isArray(e.stride)&&"number"==typeof e.offset&&e.shape.length===e.stride.length&&(Array.isArray(e.data)||t(e.data))}var Ee=function(t){return Object.keys(t).map((function(e){return t[e]}))},Se={shape:Ae,flatten:Le};function ke(t,e,n){for(var i=0;i<e;++i)n[i]=t[i]}function Ce(t,e,n,i){for(var r=0,o=0;o<e;++o)for(var a=t[o],s=0;s<n;++s)i[r++]=a[s]}function Te(t,e,n,i,r,o){for(var a=o,s=0;s<e;++s)for(var l=t[s],u=0;u<n;++u)for(var c=l[u],h=0;h<i;++h)r[a++]=c[h]}function De(t,e,n,i,r){for(var o=1,a=n+1;a<e.length;++a)o*=e[a];var s=e[n];if(e.length-n==4){var l=e[n+1],u=e[n+2],c=e[n+3];for(a=0;a<s;++a)Te(t[a],l,u,c,i,r),r+=o}else for(a=0;a<s;++a)De(t[a],e,n+1,i,r),r+=o}function Le(t,e,n,i){var r=1;if(e.length)for(var o=0;o<e.length;++o)r*=e[o];else r=0;var a=i||Yt.allocType(n,r);switch(e.length){case 0:break;case 1:ke(t,e[0],a);break;case 2:Ce(t,e[0],e[1],a);break;case 3:Te(t,e[0],e[1],e[2],a,0);break;default:De(t,e,0,a,0)}return a}function Ae(t){for(var e=[],n=t;n.length;n=n[0])e.push(n.length);return e}var Oe={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Pe={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},Ie={dynamic:35048,stream:35040,static:35044},Ne=Se.flatten,Re=Se.shape,Ye=35044,je=35040,Fe=5121,Be=5126,ze=[];function He(t){return 0|Oe[Object.prototype.toString.call(t)]}function Ge(t,e){for(var n=0;n<e.length;++n)t[n]=e[n]}function We(t,e,n,i,r,o,a){for(var s=0,l=0;l<n;++l)for(var u=0;u<i;++u)t[s++]=e[r*l+o*u+a]}function Ue(e,n,i,r){var o=0,a={};function s(t){this.id=o++,this.buffer=e.createBuffer(),this.type=t,this.usage=Ye,this.byteLength=0,this.dimension=1,this.dtype=Fe,this.persistentData=null,i.profile&&(this.stats={size:0})}s.prototype.bind=function(){e.bindBuffer(this.type,this.buffer)},s.prototype.destroy=function(){f(this)};var l=[];function u(t,e){var n=l.pop();return n||(n=new s(t)),n.bind(),d(n,e,je,0,1,!1),n}function c(t){l.push(t)}function h(t,n,i){t.byteLength=n.byteLength,e.bufferData(t.type,n,i)}function d(e,n,i,r,o,a){var s,l;if(e.usage=i,Array.isArray(n)){if(e.dtype=r||Be,n.length>0)if(Array.isArray(n[0])){s=Re(n);for(var u=1,c=1;c<s.length;++c)u*=s[c];e.dimension=u,h(e,l=Ne(n,s,e.dtype),i),a?e.persistentData=l:Yt.freeType(l)}else if("number"==typeof n[0]){e.dimension=o;var d=Yt.allocType(e.dtype,n.length);Ge(d,n),h(e,d,i),a?e.persistentData=d:Yt.freeType(d)}else t(n[0])?(e.dimension=n[0].length,e.dtype=r||He(n[0])||Be,h(e,l=Ne(n,[n.length,n[0].length],e.dtype),i),a?e.persistentData=l:Yt.freeType(l)):nt.raise("invalid buffer data")}else if(t(n))e.dtype=r||He(n),e.dimension=o,h(e,n,i),a&&(e.persistentData=new Uint8Array(new Uint8Array(n.buffer)));else if(Me(n)){s=n.shape;var f=n.stride,p=n.offset,m=0,g=0,v=0,y=0;1===s.length?(m=s[0],g=1,v=f[0],y=0):2===s.length?(m=s[0],g=s[1],v=f[0],y=f[1]):nt.raise("invalid shape"),e.dtype=r||He(n.data)||Be,e.dimension=g;var b=Yt.allocType(e.dtype,m*g);We(b,n.data,m,g,v,y,p),h(e,b,i),a?e.persistentData=b:Yt.freeType(b)}else n instanceof ArrayBuffer?(e.dtype=Fe,e.dimension=o,h(e,n,i),a&&(e.persistentData=new Uint8Array(new Uint8Array(n)))):nt.raise("invalid buffer data")}function f(t){n.bufferCount--,r(t);var i=t.buffer;nt(i,"buffer must not be deleted already"),e.deleteBuffer(i),t.buffer=null,delete a[t.id]}function p(r,o,l,u){n.bufferCount++;var c=new s(o);function h(n){var r=Ye,o=null,a=0,s=0,l=1;return Array.isArray(n)||t(n)||Me(n)||n instanceof ArrayBuffer?o=n:"number"==typeof n?a=0|n:n&&(nt.type(n,"object","buffer arguments must be an object, a number or an array"),"data"in n&&(nt(null===o||Array.isArray(o)||t(o)||Me(o),"invalid data for buffer"),o=n.data),"usage"in n&&(nt.parameter(n.usage,Ie,"invalid buffer usage"),r=Ie[n.usage]),"type"in n&&(nt.parameter(n.type,Pe,"invalid buffer type"),s=Pe[n.type]),"dimension"in n&&(nt.type(n.dimension,"number","invalid dimension"),l=0|n.dimension),"length"in n&&(nt.nni(a,"buffer length must be a nonnegative integer"),a=0|n.length)),c.bind(),o?d(c,o,r,s,l,u):(a&&e.bufferData(c.type,a,r),c.dtype=s||Fe,c.usage=r,c.dimension=l,c.byteLength=a),i.profile&&(c.stats.size=c.byteLength*ze[c.dtype]),h}function p(t,n){nt(n+t.byteLength<=c.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+t.byteLength+" starting from offset "+n+" to a buffer of size "+c.byteLength),e.bufferSubData(c.type,n,t)}function m(e,n){var i,r=0|(n||0);if(c.bind(),t(e)||e instanceof ArrayBuffer)p(e,r);else if(Array.isArray(e)){if(e.length>0)if("number"==typeof e[0]){var o=Yt.allocType(c.dtype,e.length);Ge(o,e),p(o,r),Yt.freeType(o)}else if(Array.isArray(e[0])||t(e[0])){i=Re(e);var a=Ne(e,i,c.dtype);p(a,r),Yt.freeType(a)}else nt.raise("invalid buffer data")}else if(Me(e)){i=e.shape;var s=e.stride,l=0,u=0,d=0,f=0;1===i.length?(l=i[0],u=1,d=s[0],f=0):2===i.length?(l=i[0],u=i[1],d=s[0],f=s[1]):nt.raise("invalid shape");var m=Array.isArray(e.data)?c.dtype:He(e.data),g=Yt.allocType(m,l*u);We(g,e.data,l,u,d,f,e.offset),p(g,r),Yt.freeType(g)}else nt.raise("invalid data for buffer subdata");return h}return a[c.id]=c,l||h(r),h._reglType="buffer",h._buffer=c,h.subdata=m,i.profile&&(h.stats=c.stats),h.destroy=function(){f(c)},h}function m(){Ee(a).forEach((function(t){t.buffer=e.createBuffer(),e.bindBuffer(t.type,t.buffer),e.bufferData(t.type,t.persistentData||t.byteLength,t.usage)}))}return i.profile&&(n.getTotalBufferSize=function(){var t=0;return Object.keys(a).forEach((function(e){t+=a[e].stats.size})),t}),{create:p,createStream:u,destroyStream:c,clear:function(){Ee(a).forEach(f),l.forEach(f)},getBuffer:function(t){return t&&t._buffer instanceof s?t._buffer:null},restore:m,_initBuffer:d}}ze[5120]=1,ze[5122]=2,ze[5124]=4,ze[5121]=1,ze[5123]=2,ze[5125]=4,ze[5126]=4;var Ve={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Xe=0,qe=1,Ke=4,$e=5120,Ze=5121,Je=5122,Qe=5123,tn=5124,en=5125,nn=34963,rn=35040,on=35044;function an(e,n,i,r){var o={},a=0,s={uint8:Ze,uint16:Qe};function l(t){this.id=a++,o[this.id]=this,this.buffer=t,this.primType=Ke,this.vertCount=0,this.type=0}n.oes_element_index_uint&&(s.uint32=en),l.prototype.bind=function(){this.buffer.bind()};var u=[];function c(t){var e=u.pop();return e||(e=new l(i.create(null,nn,!0,!1)._buffer)),d(e,t,rn,-1,-1,0,0),e}function h(t){u.push(t)}function d(r,o,a,s,l,u,c){var h;if(r.buffer.bind(),o){var d=c;c||t(o)&&(!Me(o)||t(o.data))||(d=n.oes_element_index_uint?en:Qe),i._initBuffer(r.buffer,o,a,d,3)}else e.bufferData(nn,u,a),r.buffer.dtype=h||Ze,r.buffer.usage=a,r.buffer.dimension=3,r.buffer.byteLength=u;if(h=c,!c){switch(r.buffer.dtype){case Ze:case $e:h=Ze;break;case Qe:case Je:h=Qe;break;case en:case tn:h=en;break;default:nt.raise("unsupported type for element array")}r.buffer.dtype=h}r.type=h,nt(h!==en||!!n.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var f=l;f<0&&(f=r.buffer.byteLength,h===Qe?f>>=1:h===en&&(f>>=2)),r.vertCount=f;var p=s;if(s<0){p=Ke;var m=r.buffer.dimension;1===m&&(p=Xe),2===m&&(p=qe),3===m&&(p=Ke)}r.primType=p}function f(t){r.elementsCount--,nt(null!==t.buffer,"must not double destroy elements"),delete o[t.id],t.buffer.destroy(),t.buffer=null}function p(e,n){var o=i.create(null,nn,!0),a=new l(o._buffer);function u(e){if(e)if("number"==typeof e)o(e),a.primType=Ke,a.vertCount=0|e,a.type=Ze;else{var n=null,i=on,r=-1,l=-1,c=0,h=0;Array.isArray(e)||t(e)||Me(e)?n=e:(nt.type(e,"object","invalid arguments for elements"),"data"in e&&(n=e.data,nt(Array.isArray(n)||t(n)||Me(n),"invalid data for element buffer")),"usage"in e&&(nt.parameter(e.usage,Ie,"invalid element buffer usage"),i=Ie[e.usage]),"primitive"in e&&(nt.parameter(e.primitive,Ve,"invalid element buffer primitive"),r=Ve[e.primitive]),"count"in e&&(nt("number"==typeof e.count&&e.count>=0,"invalid vertex count for elements"),l=0|e.count),"type"in e&&(nt.parameter(e.type,s,"invalid buffer type"),h=s[e.type]),"length"in e?c=0|e.length:(c=l,h===Qe||h===Je?c*=2:h!==en&&h!==tn||(c*=4))),d(a,n,i,r,l,c,h)}else o(),a.primType=Ke,a.vertCount=0,a.type=Ze;return u}return r.elementsCount++,u(e),u._reglType="elements",u._elements=a,u.subdata=function(t,e){return o.subdata(t,e),u},u.destroy=function(){f(a)},u}return{create:p,createStream:c,destroyStream:h,getElements:function(t){return"function"==typeof t&&t._elements instanceof l?t._elements:null},clear:function(){Ee(o).forEach(f)}}}var sn=new Float32Array(1),ln=new Uint32Array(sn.buffer),un=5123;function cn(t){for(var e=Yt.allocType(un,t.length),n=0;n<t.length;++n)if(isNaN(t[n]))e[n]=65535;else if(t[n]===1/0)e[n]=31744;else if(t[n]===-1/0)e[n]=64512;else{sn[0]=t[n];var i=ln[0],r=i>>>31<<15,o=(i<<1>>>24)-127,a=i>>13&1023;if(o<-24)e[n]=r;else if(o<-14){var s=-14-o;e[n]=r+(a+1024>>s)}else e[n]=o>15?r+31744:r+(o+15<<10)+a}return e}function hn(e){return Array.isArray(e)||t(e)}var dn=function(t){return!(t&t-1||!t)},fn=34467,pn=3553,mn=34067,gn=34069,vn=6408,yn=6406,bn=6407,_n=6409,wn=6410,xn=32854,Mn=32855,En=36194,Sn=32819,kn=32820,Cn=33635,Tn=34042,Dn=6402,Ln=34041,An=35904,On=35906,Pn=36193,In=33776,Nn=33777,Rn=33778,Yn=33779,jn=35986,Fn=35987,Bn=34798,zn=35840,Hn=35841,Gn=35842,Wn=35843,Un=36196,Vn=5121,Xn=5123,qn=5125,Kn=5126,$n=10242,Zn=10243,Jn=10497,Qn=33071,ti=33648,ei=10240,ni=10241,ii=9728,ri=9729,oi=9984,ai=9985,si=9986,li=9987,ui=33170,ci=4352,hi=4353,di=4354,fi=34046,pi=3317,mi=37440,gi=37441,vi=37443,yi=37444,bi=33984,_i=[oi,si,ai,li],wi=[0,_n,wn,bn,vn],xi={};function Mi(t){return"[object "+t+"]"}xi[_n]=xi[yn]=xi[Dn]=1,xi[Ln]=xi[wn]=2,xi[bn]=xi[An]=3,xi[vn]=xi[On]=4;var Ei=Mi("HTMLCanvasElement"),Si=Mi("OffscreenCanvas"),ki=Mi("CanvasRenderingContext2D"),Ci=Mi("ImageBitmap"),Ti=Mi("HTMLImageElement"),Di=Mi("HTMLVideoElement"),Li=Object.keys(Oe).concat([Ei,Si,ki,Ci,Ti,Di]),Ai=[];Ai[Vn]=1,Ai[Kn]=4,Ai[Pn]=2,Ai[Xn]=2,Ai[qn]=4;var Oi=[];function Pi(t){return Array.isArray(t)&&(0===t.length||"number"==typeof t[0])}function Ii(t){return!!Array.isArray(t)&&!(0===t.length||!hn(t[0]))}function Ni(t){return Object.prototype.toString.call(t)}function Ri(t){return Ni(t)===Ei}function Yi(t){return Ni(t)===Si}function ji(t){return Ni(t)===ki}function Fi(t){return Ni(t)===Ci}function Bi(t){return Ni(t)===Ti}function zi(t){return Ni(t)===Di}function Hi(t){if(!t)return!1;var e=Ni(t);return Li.indexOf(e)>=0||Pi(t)||Ii(t)||Me(t)}function Gi(t){return 0|Oe[Object.prototype.toString.call(t)]}function Wi(t,e){var n=e.length;switch(t.type){case Vn:case Xn:case qn:case Kn:var i=Yt.allocType(t.type,n);i.set(e),t.data=i;break;case Pn:t.data=cn(e);break;default:nt.raise("unsupported texture type, must specify a typed array")}}function Ui(t,e){return Yt.allocType(t.type===Pn?Kn:t.type,e)}function Vi(t,e){t.type===Pn?(t.data=cn(e),Yt.freeType(e)):t.data=e}function Xi(t,e,n,i,r,o){for(var a=t.width,s=t.height,l=t.channels,u=Ui(t,a*s*l),c=0,h=0;h<s;++h)for(var d=0;d<a;++d)for(var f=0;f<l;++f)u[c++]=e[n*d+i*h+r*f+o];Vi(t,u)}function qi(t,e,n,i,r,o){var a;if(a=void 0!==Oi[t]?Oi[t]:xi[t]*Ai[e],o&&(a*=6),r){for(var s=0,l=n;l>=1;)s+=a*l*l,l/=2;return s}return a*n*i}function Ki(n,i,r,o,a,s,l){var u={"don't care":ci,"dont care":ci,nice:di,fast:hi},c={repeat:Jn,clamp:Qn,mirror:ti},h={nearest:ii,linear:ri},d=e({mipmap:li,"nearest mipmap nearest":oi,"linear mipmap nearest":ai,"nearest mipmap linear":si,"linear mipmap linear":li},h),f={none:0,browser:yi},p={uint8:Vn,rgba4:Sn,rgb565:Cn,"rgb5 a1":kn},m={alpha:yn,luminance:_n,"luminance alpha":wn,rgb:bn,rgba:vn,rgba4:xn,"rgb5 a1":Mn,rgb565:En},g={};i.ext_srgb&&(m.srgb=An,m.srgba=On),i.oes_texture_float&&(p.float32=p.float=Kn),i.oes_texture_half_float&&(p.float16=p["half float"]=Pn),i.webgl_depth_texture&&(e(m,{depth:Dn,"depth stencil":Ln}),e(p,{uint16:Xn,uint32:qn,"depth stencil":Tn})),i.webgl_compressed_texture_s3tc&&e(g,{"rgb s3tc dxt1":In,"rgba s3tc dxt1":Nn,"rgba s3tc dxt3":Rn,"rgba s3tc dxt5":Yn}),i.webgl_compressed_texture_atc&&e(g,{"rgb atc":jn,"rgba atc explicit alpha":Fn,"rgba atc interpolated alpha":Bn}),i.webgl_compressed_texture_pvrtc&&e(g,{"rgb pvrtc 4bppv1":zn,"rgb pvrtc 2bppv1":Hn,"rgba pvrtc 4bppv1":Gn,"rgba pvrtc 2bppv1":Wn}),i.webgl_compressed_texture_etc1&&(g["rgb etc1"]=Un);var v=Array.prototype.slice.call(n.getParameter(fn));Object.keys(g).forEach((function(t){var e=g[t];v.indexOf(e)>=0&&(m[t]=e)}));var y=Object.keys(m);r.textureFormats=y;var b=[];Object.keys(m).forEach((function(t){var e=m[t];b[e]=t}));var _=[];Object.keys(p).forEach((function(t){var e=p[t];_[e]=t}));var w=[];Object.keys(h).forEach((function(t){var e=h[t];w[e]=t}));var x=[];Object.keys(d).forEach((function(t){var e=d[t];x[e]=t}));var M=[];Object.keys(c).forEach((function(t){var e=c[t];M[e]=t}));var E=y.reduce((function(t,e){var n=m[e];return n===_n||n===yn||n===_n||n===wn||n===Dn||n===Ln||i.ext_srgb&&(n===An||n===On)?t[n]=n:n===Mn||e.indexOf("rgba")>=0?t[n]=vn:t[n]=bn,t}),{});function S(){this.internalformat=vn,this.format=vn,this.type=Vn,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=yi,this.width=0,this.height=0,this.channels=0}function k(t,e){t.internalformat=e.internalformat,t.format=e.format,t.type=e.type,t.compressed=e.compressed,t.premultiplyAlpha=e.premultiplyAlpha,t.flipY=e.flipY,t.unpackAlignment=e.unpackAlignment,t.colorSpace=e.colorSpace,t.width=e.width,t.height=e.height,t.channels=e.channels}function C(t,e){if("object"==typeof e&&e){if("premultiplyAlpha"in e&&(nt.type(e.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),t.premultiplyAlpha=e.premultiplyAlpha),"flipY"in e&&(nt.type(e.flipY,"boolean","invalid texture flip"),t.flipY=e.flipY),"alignment"in e&&(nt.oneOf(e.alignment,[1,2,4,8],"invalid texture unpack alignment"),t.unpackAlignment=e.alignment),"colorSpace"in e&&(nt.parameter(e.colorSpace,f,"invalid colorSpace"),t.colorSpace=f[e.colorSpace]),"type"in e){var n=e.type;nt(i.oes_texture_float||!("float"===n||"float32"===n),"you must enable the OES_texture_float extension in order to use floating point textures."),nt(i.oes_texture_half_float||!("half float"===n||"float16"===n),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),nt(i.webgl_depth_texture||!("uint16"===n||"uint32"===n||"depth stencil"===n),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),nt.parameter(n,p,"invalid texture type"),t.type=p[n]}var o=t.width,a=t.height,s=t.channels,l=!1;"shape"in e?(nt(Array.isArray(e.shape)&&e.shape.length>=2,"shape must be an array"),o=e.shape[0],a=e.shape[1],3===e.shape.length&&(s=e.shape[2],nt(s>0&&s<=4,"invalid number of channels"),l=!0),nt(o>=0&&o<=r.maxTextureSize,"invalid width"),nt(a>=0&&a<=r.maxTextureSize,"invalid height")):("radius"in e&&(o=a=e.radius,nt(o>=0&&o<=r.maxTextureSize,"invalid radius")),"width"in e&&(o=e.width,nt(o>=0&&o<=r.maxTextureSize,"invalid width")),"height"in e&&(a=e.height,nt(a>=0&&a<=r.maxTextureSize,"invalid height")),"channels"in e&&(s=e.channels,nt(s>0&&s<=4,"invalid number of channels"),l=!0)),t.width=0|o,t.height=0|a,t.channels=0|s;var u=!1;if("format"in e){var c=e.format;nt(i.webgl_depth_texture||!("depth"===c||"depth stencil"===c),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),nt.parameter(c,m,"invalid texture format");var h=t.internalformat=m[c];t.format=E[h],c in p&&("type"in e||(t.type=p[c])),c in g&&(t.compressed=!0),u=!0}!l&&u?t.channels=xi[t.format]:l&&!u?t.channels!==wi[t.format]&&(t.format=t.internalformat=wi[t.channels]):u&&l&&nt(t.channels===xi[t.format],"number of channels inconsistent with specified format")}}function T(t){n.pixelStorei(mi,t.flipY),n.pixelStorei(gi,t.premultiplyAlpha),n.pixelStorei(vi,t.colorSpace),n.pixelStorei(pi,t.unpackAlignment)}function D(){S.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function L(e,n){var i=null;if(Hi(n)?i=n:n&&(nt.type(n,"object","invalid pixel data type"),C(e,n),"x"in n&&(e.xOffset=0|n.x),"y"in n&&(e.yOffset=0|n.y),Hi(n.data)&&(i=n.data)),nt(!e.compressed||i instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),n.copy){nt(!i,"can not specify copy and data field for the same texture");var o=a.viewportWidth,s=a.viewportHeight;e.width=e.width||o-e.xOffset,e.height=e.height||s-e.yOffset,e.needsCopy=!0,nt(e.xOffset>=0&&e.xOffset<o&&e.yOffset>=0&&e.yOffset<s&&e.width>0&&e.width<=o&&e.height>0&&e.height<=s,"copy texture read out of bounds")}else if(i){if(t(i))e.channels=e.channels||4,e.data=i,"type"in n||e.type!==Vn||(e.type=Gi(i));else if(Pi(i))e.channels=e.channels||4,Wi(e,i),e.alignment=1,e.needsFree=!0;else if(Me(i)){var l=i.data;Array.isArray(l)||e.type!==Vn||(e.type=Gi(l));var u,c,h,d,f,p,m=i.shape,g=i.stride;3===m.length?(h=m[2],p=g[2]):(nt(2===m.length,"invalid ndarray pixel data, must be 2 or 3D"),h=1,p=1),u=m[0],c=m[1],d=g[0],f=g[1],e.alignment=1,e.width=u,e.height=c,e.channels=h,e.format=e.internalformat=wi[h],e.needsFree=!0,Xi(e,l,d,f,p,i.offset)}else if(Ri(i)||Yi(i)||ji(i))Ri(i)||Yi(i)?e.element=i:e.element=i.canvas,e.width=e.element.width,e.height=e.element.height,e.channels=4;else if(Fi(i))e.element=i,e.width=i.width,e.height=i.height,e.channels=4;else if(Bi(i))e.element=i,e.width=i.naturalWidth,e.height=i.naturalHeight,e.channels=4;else if(zi(i))e.element=i,e.width=i.videoWidth,e.height=i.videoHeight,e.channels=4;else if(Ii(i)){var v=e.width||i[0].length,y=e.height||i.length,b=e.channels;b=hn(i[0][0])?b||i[0][0].length:b||1;for(var _=Se.shape(i),w=1,x=0;x<_.length;++x)w*=_[x];var M=Ui(e,w);Se.flatten(i,_,"",M),Vi(e,M),e.alignment=1,e.width=v,e.height=y,e.channels=b,e.format=e.internalformat=wi[b],e.needsFree=!0}}else e.width=e.width||1,e.height=e.height||1,e.channels=e.channels||4;e.type===Kn?nt(r.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):e.type===Pn&&nt(r.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function A(t,e,i){var r=t.element,a=t.data,s=t.internalformat,l=t.format,u=t.type,c=t.width,h=t.height;T(t),r?n.texImage2D(e,i,l,l,u,r):t.compressed?n.compressedTexImage2D(e,i,s,c,h,0,a):t.needsCopy?(o(),n.copyTexImage2D(e,i,l,t.xOffset,t.yOffset,c,h,0)):n.texImage2D(e,i,l,c,h,0,l,u,a||null)}function O(t,e,i,r,a){var s=t.element,l=t.data,u=t.internalformat,c=t.format,h=t.type,d=t.width,f=t.height;T(t),s?n.texSubImage2D(e,a,i,r,c,h,s):t.compressed?n.compressedTexSubImage2D(e,a,i,r,u,d,f,l):t.needsCopy?(o(),n.copyTexSubImage2D(e,a,i,r,t.xOffset,t.yOffset,d,f)):n.texSubImage2D(e,a,i,r,d,f,c,h,l)}var P=[];function I(){return P.pop()||new D}function N(t){t.needsFree&&Yt.freeType(t.data),D.call(t),P.push(t)}function R(){S.call(this),this.genMipmaps=!1,this.mipmapHint=ci,this.mipmask=0,this.images=Array(16)}function Y(t,e,n){var i=t.images[0]=I();t.mipmask=1,i.width=t.width=e,i.height=t.height=n,i.channels=t.channels=4}function j(t,e){var n=null;if(Hi(e))k(n=t.images[0]=I(),t),L(n,e),t.mipmask=1;else if(C(t,e),Array.isArray(e.mipmap))for(var i=e.mipmap,r=0;r<i.length;++r)k(n=t.images[r]=I(),t),n.width>>=r,n.height>>=r,L(n,i[r]),t.mipmask|=1<<r;else k(n=t.images[0]=I(),t),L(n,e),t.mipmask=1;k(t,t.images[0]),!t.compressed||t.internalformat!==In&&t.internalformat!==Nn&&t.internalformat!==Rn&&t.internalformat!==Yn||nt(t.width%4==0&&t.height%4==0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function F(t,e){for(var n=t.images,i=0;i<n.length;++i){if(!n[i])return;A(n[i],e,i)}}var B=[];function z(){var t=B.pop()||new R;S.call(t),t.mipmask=0;for(var e=0;e<16;++e)t.images[e]=null;return t}function H(t){for(var e=t.images,n=0;n<e.length;++n)e[n]&&N(e[n]),e[n]=null;B.push(t)}function G(){this.minFilter=ii,this.magFilter=ii,this.wrapS=Qn,this.wrapT=Qn,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=ci}function W(t,e){if("min"in e){var n=e.min;nt.parameter(n,d),t.minFilter=d[n],_i.indexOf(t.minFilter)>=0&&!("faces"in e)&&(t.genMipmaps=!0)}if("mag"in e){var i=e.mag;nt.parameter(i,h),t.magFilter=h[i]}var o=t.wrapS,a=t.wrapT;if("wrap"in e){var s=e.wrap;"string"==typeof s?(nt.parameter(s,c),o=a=c[s]):Array.isArray(s)&&(nt.parameter(s[0],c),nt.parameter(s[1],c),o=c[s[0]],a=c[s[1]])}else{if("wrapS"in e){var l=e.wrapS;nt.parameter(l,c),o=c[l]}if("wrapT"in e){var f=e.wrapT;nt.parameter(f,c),a=c[f]}}if(t.wrapS=o,t.wrapT=a,"anisotropic"in e){var p=e.anisotropic;nt("number"==typeof p&&p>=1&&p<=r.maxAnisotropic,"aniso samples must be between 1 and "),t.anisotropic=e.anisotropic}if("mipmap"in e){var m=!1;switch(typeof e.mipmap){case"string":nt.parameter(e.mipmap,u,"invalid mipmap hint"),t.mipmapHint=u[e.mipmap],t.genMipmaps=!0,m=!0;break;case"boolean":m=t.genMipmaps=e.mipmap;break;case"object":nt(Array.isArray(e.mipmap),"invalid mipmap type"),t.genMipmaps=!1,m=!0;break;default:nt.raise("invalid mipmap type")}m&&!("min"in e)&&(t.minFilter=oi)}}function U(t,e){n.texParameteri(e,ni,t.minFilter),n.texParameteri(e,ei,t.magFilter),n.texParameteri(e,$n,t.wrapS),n.texParameteri(e,Zn,t.wrapT),i.ext_texture_filter_anisotropic&&n.texParameteri(e,fi,t.anisotropic),t.genMipmaps&&(n.hint(ui,t.mipmapHint),n.generateMipmap(e))}var V=0,X={},q=r.maxTextureUnits,K=Array(q).map((function(){return null}));function $(t){S.call(this),this.mipmask=0,this.internalformat=vn,this.id=V++,this.refCount=1,this.target=t,this.texture=n.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new G,l.profile&&(this.stats={size:0})}function Z(t){n.activeTexture(bi),n.bindTexture(t.target,t.texture)}function J(){var t=K[0];t?n.bindTexture(t.target,t.texture):n.bindTexture(pn,null)}function Q(t){var e=t.texture;nt(e,"must not double destroy texture");var i=t.unit,r=t.target;i>=0&&(n.activeTexture(bi+i),n.bindTexture(r,null),K[i]=null),n.deleteTexture(e),t.texture=null,t.params=null,t.pixels=null,t.refCount=0,delete X[t.id],s.textureCount--}function tt(t,e){var i=new $(pn);function o(t,e){var n=i.texInfo;G.call(n);var a=z();return"number"==typeof t?Y(a,0|t,"number"==typeof e?0|e:0|t):t?(nt.type(t,"object","invalid arguments to regl.texture"),W(n,t),j(a,t)):Y(a,1,1),n.genMipmaps&&(a.mipmask=(a.width<<1)-1),i.mipmask=a.mipmask,k(i,a),nt.texture2D(n,a,r),i.internalformat=a.internalformat,o.width=a.width,o.height=a.height,Z(i),F(a,pn),U(n,pn),J(),H(a),l.profile&&(i.stats.size=qi(i.internalformat,i.type,a.width,a.height,n.genMipmaps,!1)),o.format=b[i.internalformat],o.type=_[i.type],o.mag=w[n.magFilter],o.min=x[n.minFilter],o.wrapS=M[n.wrapS],o.wrapT=M[n.wrapT],o}function a(t,e,n,r){nt(!!t,"must specify image data");var a=0|e,s=0|n,l=0|r,u=I();return k(u,i),u.width=0,u.height=0,L(u,t),u.width=u.width||(i.width>>l)-a,u.height=u.height||(i.height>>l)-s,nt(i.type===u.type&&i.format===u.format&&i.internalformat===u.internalformat,"incompatible format for texture.subimage"),nt(a>=0&&s>=0&&a+u.width<=i.width&&s+u.height<=i.height,"texture.subimage write out of bounds"),nt(i.mipmask&1<<l,"missing mipmap data"),nt(u.data||u.element||u.needsCopy,"missing image data"),Z(i),O(u,pn,a,s,l),J(),N(u),o}function u(t,e){var r=0|t,a=0|e||r;if(r===i.width&&a===i.height)return o;o.width=i.width=r,o.height=i.height=a,Z(i);for(var s=0;i.mipmask>>s;++s){var u=r>>s,c=a>>s;if(!u||!c)break;n.texImage2D(pn,s,i.format,u,c,0,i.format,i.type,null)}return J(),l.profile&&(i.stats.size=qi(i.internalformat,i.type,r,a,!1,!1)),o}return X[i.id]=i,s.textureCount++,o(t,e),o.subimage=a,o.resize=u,o._reglType="texture2d",o._texture=i,l.profile&&(o.stats=i.stats),o.destroy=function(){i.decRef()},o}function et(t,e,i,o,a,u){var c=new $(mn);X[c.id]=c,s.cubeCount++;var h=new Array(6);function d(t,e,n,i,o,a){var s,u=c.texInfo;for(G.call(u),s=0;s<6;++s)h[s]=z();if("number"!=typeof t&&t)if("object"==typeof t)if(e)j(h[0],t),j(h[1],e),j(h[2],n),j(h[3],i),j(h[4],o),j(h[5],a);else if(W(u,t),C(c,t),"faces"in t){var f=t.faces;for(nt(Array.isArray(f)&&6===f.length,"cube faces must be a length 6 array"),s=0;s<6;++s)nt("object"==typeof f[s]&&!!f[s],"invalid input for cube map face"),k(h[s],c),j(h[s],f[s])}else for(s=0;s<6;++s)j(h[s],t);else nt.raise("invalid arguments to cube map");else{var p=0|t||1;for(s=0;s<6;++s)Y(h[s],p,p)}for(k(c,h[0]),r.npotTextureCube||nt(dn(c.width)&&dn(c.height),"your browser does not support non power or two texture dimensions"),u.genMipmaps?c.mipmask=(h[0].width<<1)-1:c.mipmask=h[0].mipmask,nt.textureCube(c,u,h,r),c.internalformat=h[0].internalformat,d.width=h[0].width,d.height=h[0].height,Z(c),s=0;s<6;++s)F(h[s],gn+s);for(U(u,mn),J(),l.profile&&(c.stats.size=qi(c.internalformat,c.type,d.width,d.height,u.genMipmaps,!0)),d.format=b[c.internalformat],d.type=_[c.type],d.mag=w[u.magFilter],d.min=x[u.minFilter],d.wrapS=M[u.wrapS],d.wrapT=M[u.wrapT],s=0;s<6;++s)H(h[s]);return d}function f(t,e,n,i,r){nt(!!e,"must specify image data"),nt("number"==typeof t&&t===(0|t)&&t>=0&&t<6,"invalid face");var o=0|n,a=0|i,s=0|r,l=I();return k(l,c),l.width=0,l.height=0,L(l,e),l.width=l.width||(c.width>>s)-o,l.height=l.height||(c.height>>s)-a,nt(c.type===l.type&&c.format===l.format&&c.internalformat===l.internalformat,"incompatible format for texture.subimage"),nt(o>=0&&a>=0&&o+l.width<=c.width&&a+l.height<=c.height,"texture.subimage write out of bounds"),nt(c.mipmask&1<<s,"missing mipmap data"),nt(l.data||l.element||l.needsCopy,"missing image data"),Z(c),O(l,gn+t,o,a,s),J(),N(l),d}function p(t){var e=0|t;if(e!==c.width){d.width=c.width=e,d.height=c.height=e,Z(c);for(var i=0;i<6;++i)for(var r=0;c.mipmask>>r;++r)n.texImage2D(gn+i,r,c.format,e>>r,e>>r,0,c.format,c.type,null);return J(),l.profile&&(c.stats.size=qi(c.internalformat,c.type,d.width,d.height,!1,!0)),d}}return d(t,e,i,o,a,u),d.subimage=f,d.resize=p,d._reglType="textureCube",d._texture=c,l.profile&&(d.stats=c.stats),d.destroy=function(){c.decRef()},d}function it(){for(var t=0;t<q;++t)n.activeTexture(bi+t),n.bindTexture(pn,null),K[t]=null;Ee(X).forEach(Q),s.cubeCount=0,s.textureCount=0}function rt(){for(var t=0;t<q;++t){var e=K[t];e&&(e.bindCount=0,e.unit=-1,K[t]=null)}Ee(X).forEach((function(t){t.texture=n.createTexture(),n.bindTexture(t.target,t.texture);for(var e=0;e<32;++e)if(0!=(t.mipmask&1<<e))if(t.target===pn)n.texImage2D(pn,e,t.internalformat,t.width>>e,t.height>>e,0,t.internalformat,t.type,null);else for(var i=0;i<6;++i)n.texImage2D(gn+i,e,t.internalformat,t.width>>e,t.height>>e,0,t.internalformat,t.type,null);U(t.texInfo,t.target)}))}function ot(){for(var t=0;t<q;++t){var e=K[t];e&&(e.bindCount=0,e.unit=-1,K[t]=null),n.activeTexture(bi+t),n.bindTexture(pn,null),n.bindTexture(mn,null)}}return e($.prototype,{bind:function(){var t=this;t.bindCount+=1;var e=t.unit;if(e<0){for(var i=0;i<q;++i){var r=K[i];if(r){if(r.bindCount>0)continue;r.unit=-1}K[i]=t,e=i;break}e>=q&&nt.raise("insufficient number of texture units"),l.profile&&s.maxTextureUnits<e+1&&(s.maxTextureUnits=e+1),t.unit=e,n.activeTexture(bi+e),n.bindTexture(t.target,t.texture)}return e},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&Q(this)}}),l.profile&&(s.getTotalTextureSize=function(){var t=0;return Object.keys(X).forEach((function(e){t+=X[e].stats.size})),t}),{create2D:tt,createCube:et,clear:it,getTexture:function(t){return null},restore:rt,refresh:ot}}Oi[xn]=2,Oi[Mn]=2,Oi[En]=2,Oi[Ln]=4,Oi[In]=.5,Oi[Nn]=.5,Oi[Rn]=1,Oi[Yn]=1,Oi[jn]=.5,Oi[Fn]=1,Oi[Bn]=1,Oi[zn]=.5,Oi[Hn]=.25,Oi[Gn]=.5,Oi[Wn]=.25,Oi[Un]=.5;var $i=36161,Zi=32854,Ji=32855,Qi=36194,tr=33189,er=36168,nr=34041,ir=35907,rr=34836,or=34842,ar=34843,sr=[];function lr(t,e,n){return sr[t]*e*n}sr[Zi]=2,sr[Ji]=2,sr[Qi]=2,sr[tr]=2,sr[er]=1,sr[nr]=4,sr[ir]=4,sr[rr]=16,sr[or]=8,sr[ar]=6;var ur=function(t,e,n,i,r){var o={rgba4:Zi,rgb565:Qi,"rgb5 a1":Ji,depth:tr,stencil:er,"depth stencil":nr};e.ext_srgb&&(o.srgba=ir),e.ext_color_buffer_half_float&&(o.rgba16f=or,o.rgb16f=ar),e.webgl_color_buffer_float&&(o.rgba32f=rr);var a=[];Object.keys(o).forEach((function(t){var e=o[t];a[e]=t}));var s=0,l={};function u(t){this.id=s++,this.refCount=1,this.renderbuffer=t,this.format=Zi,this.width=0,this.height=0,r.profile&&(this.stats={size:0})}function c(e){var n=e.renderbuffer;nt(n,"must not double destroy renderbuffer"),t.bindRenderbuffer($i,null),t.deleteRenderbuffer(n),e.renderbuffer=null,e.refCount=0,delete l[e.id],i.renderbufferCount--}function h(e,s){var c=new u(t.createRenderbuffer());function h(e,i){var s=0,l=0,u=Zi;if("object"==typeof e&&e){var d=e;if("shape"in d){var f=d.shape;nt(Array.isArray(f)&&f.length>=2,"invalid renderbuffer shape"),s=0|f[0],l=0|f[1]}else"radius"in d&&(s=l=0|d.radius),"width"in d&&(s=0|d.width),"height"in d&&(l=0|d.height);"format"in d&&(nt.parameter(d.format,o,"invalid renderbuffer format"),u=o[d.format])}else"number"==typeof e?(s=0|e,l="number"==typeof i?0|i:s):e?nt.raise("invalid arguments to renderbuffer constructor"):s=l=1;if(nt(s>0&&l>0&&s<=n.maxRenderbufferSize&&l<=n.maxRenderbufferSize,"invalid renderbuffer size"),s!==c.width||l!==c.height||u!==c.format)return h.width=c.width=s,h.height=c.height=l,c.format=u,t.bindRenderbuffer($i,c.renderbuffer),t.renderbufferStorage($i,u,s,l),nt(0===t.getError(),"invalid render buffer format"),r.profile&&(c.stats.size=lr(c.format,c.width,c.height)),h.format=a[c.format],h}function d(e,i){var o=0|e,a=0|i||o;return o===c.width&&a===c.height||(nt(o>0&&a>0&&o<=n.maxRenderbufferSize&&a<=n.maxRenderbufferSize,"invalid renderbuffer size"),h.width=c.width=o,h.height=c.height=a,t.bindRenderbuffer($i,c.renderbuffer),t.renderbufferStorage($i,c.format,o,a),nt(0===t.getError(),"invalid render buffer format"),r.profile&&(c.stats.size=lr(c.format,c.width,c.height))),h}return l[c.id]=c,i.renderbufferCount++,h(e,s),h.resize=d,h._reglType="renderbuffer",h._renderbuffer=c,r.profile&&(h.stats=c.stats),h.destroy=function(){c.decRef()},h}function d(){Ee(l).forEach((function(e){e.renderbuffer=t.createRenderbuffer(),t.bindRenderbuffer($i,e.renderbuffer),t.renderbufferStorage($i,e.format,e.width,e.height)})),t.bindRenderbuffer($i,null)}return u.prototype.decRef=function(){--this.refCount<=0&&c(this)},r.profile&&(i.getTotalRenderbufferSize=function(){var t=0;return Object.keys(l).forEach((function(e){t+=l[e].stats.size})),t}),{create:h,clear:function(){Ee(l).forEach(c)},restore:d}},cr=36160,hr=36161,dr=3553,fr=34069,pr=36064,mr=36096,gr=36128,vr=33306,yr=36053,br=36054,_r=36055,wr=36057,xr=36061,Mr=36193,Er=5121,Sr=5126,kr=6407,Cr=6408,Tr=6402,Dr=[kr,Cr],Lr=[];Lr[Cr]=4,Lr[kr]=3;var Ar=[];Ar[Er]=1,Ar[Sr]=4,Ar[Mr]=2;var Or=33189,Pr=36168,Ir=34041,Nr=[32854,32855,36194,35907,34842,34843,34836],Rr={};function Yr(t,n,i,r,o,a){var s={cur:null,next:null,dirty:!1,setFBO:null},l=["rgba"],u=["rgba4","rgb565","rgb5 a1"];n.ext_srgb&&u.push("srgba"),n.ext_color_buffer_half_float&&u.push("rgba16f","rgb16f"),n.webgl_color_buffer_float&&u.push("rgba32f");var c=["uint8"];function h(t,e,n){this.target=t,this.texture=e,this.renderbuffer=n;var i=0,r=0;e?(i=e.width,r=e.height):n&&(i=n.width,r=n.height),this.width=i,this.height=r}function d(t){t&&(t.texture&&t.texture._texture.decRef(),t.renderbuffer&&t.renderbuffer._renderbuffer.decRef())}function f(t,e,n){if(t)if(t.texture){var i=t.texture._texture,r=Math.max(1,i.width),o=Math.max(1,i.height);nt(r===e&&o===n,"inconsistent width/height for supplied texture"),i.refCount+=1}else{var a=t.renderbuffer._renderbuffer;nt(a.width===e&&a.height===n,"inconsistent width/height for renderbuffer"),a.refCount+=1}}function p(e,n){n&&(n.texture?t.framebufferTexture2D(cr,e,n.target,n.texture._texture.texture,0):t.framebufferRenderbuffer(cr,e,hr,n.renderbuffer._renderbuffer.renderbuffer))}function m(t){var e=dr,n=null,i=null,r=t;"object"==typeof t&&(r=t.data,"target"in t&&(e=0|t.target)),nt.type(r,"function","invalid attachment data");var o=r._reglType;return"texture2d"===o?(n=r,nt(e===dr)):"textureCube"===o?(n=r,nt(e>=fr&&e<fr+6,"invalid cube map target")):"renderbuffer"===o?(i=r,e=hr):nt.raise("invalid regl object for attachment"),new h(e,n,i)}function g(t,e,n,i,a){if(n){var s=r.create2D({width:t,height:e,format:i,type:a});return s._texture.refCount=0,new h(dr,s,null)}var l=o.create({width:t,height:e,format:i});return l._renderbuffer.refCount=0,new h(hr,null,l)}function v(t){return t&&(t.texture||t.renderbuffer)}function y(t,e,n){t&&(t.texture?t.texture.resize(e,n):t.renderbuffer&&t.renderbuffer.resize(e,n),t.width=e,t.height=n)}n.oes_texture_half_float&&c.push("half float","float16"),n.oes_texture_float&&c.push("float","float32");var b=0,_={};function w(){this.id=b++,_[this.id]=this,this.framebuffer=t.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function x(t){t.colorAttachments.forEach(d),d(t.depthAttachment),d(t.stencilAttachment),d(t.depthStencilAttachment)}function M(e){var n=e.framebuffer;nt(n,"must not double destroy framebuffer"),t.deleteFramebuffer(n),e.framebuffer=null,a.framebufferCount--,delete _[e.id]}function E(e){var n;t.bindFramebuffer(cr,e.framebuffer);var r=e.colorAttachments;for(n=0;n<r.length;++n)p(pr+n,r[n]);for(n=r.length;n<i.maxColorAttachments;++n)t.framebufferTexture2D(cr,pr+n,dr,null,0);t.framebufferTexture2D(cr,vr,dr,null,0),t.framebufferTexture2D(cr,mr,dr,null,0),t.framebufferTexture2D(cr,gr,dr,null,0),p(mr,e.depthAttachment),p(gr,e.stencilAttachment),p(vr,e.depthStencilAttachment);var o=t.checkFramebufferStatus(cr);t.isContextLost()||o===yr||nt.raise("framebuffer configuration not supported, status = "+Rr[o]),t.bindFramebuffer(cr,s.next?s.next.framebuffer:null),s.cur=s.next,t.getError()}function S(t,r){var o=new w;function h(t,e){var r;nt(s.next!==o,"can not update framebuffer which is currently in use");var a=0,d=0,p=!0,y=!0,b=null,_=!0,w="rgba",M="uint8",S=1,k=null,C=null,T=null,D=!1;if("number"==typeof t)a=0|t,d=0|e||a;else if(t){nt.type(t,"object","invalid arguments for framebuffer");var L=t;if("shape"in L){var A=L.shape;nt(Array.isArray(A)&&A.length>=2,"invalid shape for framebuffer"),a=A[0],d=A[1]}else"radius"in L&&(a=d=L.radius),"width"in L&&(a=L.width),"height"in L&&(d=L.height);("color"in L||"colors"in L)&&(b=L.color||L.colors,Array.isArray(b)&&nt(1===b.length||n.webgl_draw_buffers,"multiple render targets not supported")),b||("colorCount"in L&&(S=0|L.colorCount,nt(S>0,"invalid color buffer count")),"colorTexture"in L&&(_=!!L.colorTexture,w="rgba4"),"colorType"in L&&(M=L.colorType,_?(nt(n.oes_texture_float||!("float"===M||"float32"===M),"you must enable OES_texture_float in order to use floating point framebuffer objects"),nt(n.oes_texture_half_float||!("half float"===M||"float16"===M),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):"half float"===M||"float16"===M?(nt(n.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),w="rgba16f"):"float"!==M&&"float32"!==M||(nt(n.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),w="rgba32f"),nt.oneOf(M,c,"invalid color type")),"colorFormat"in L&&(w=L.colorFormat,l.indexOf(w)>=0?_=!0:u.indexOf(w)>=0?_=!1:_?nt.oneOf(L.colorFormat,l,"invalid color format for texture"):nt.oneOf(L.colorFormat,u,"invalid color format for renderbuffer"))),("depthTexture"in L||"depthStencilTexture"in L)&&(D=!(!L.depthTexture&&!L.depthStencilTexture),nt(!D||n.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in L&&("boolean"==typeof L.depth?p=L.depth:(k=L.depth,y=!1)),"stencil"in L&&("boolean"==typeof L.stencil?y=L.stencil:(C=L.stencil,p=!1)),"depthStencil"in L&&("boolean"==typeof L.depthStencil?p=y=L.depthStencil:(T=L.depthStencil,p=!1,y=!1))}else a=d=1;var O=null,P=null,I=null,N=null;if(Array.isArray(b))O=b.map(m);else if(b)O=[m(b)];else for(O=new Array(S),r=0;r<S;++r)O[r]=g(a,d,_,w,M);nt(n.webgl_draw_buffers||O.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),nt(O.length<=i.maxColorAttachments,"too many color attachments, not supported"),a=a||O[0].width,d=d||O[0].height,k?P=m(k):p&&!y&&(P=g(a,d,D,"depth","uint32")),C?I=m(C):y&&!p&&(I=g(a,d,!1,"stencil","uint8")),T?N=m(T):!k&&!C&&y&&p&&(N=g(a,d,D,"depth stencil","depth stencil")),nt(!!k+!!C+!!T<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var R=null;for(r=0;r<O.length;++r)if(f(O[r],a,d),nt(!O[r]||O[r].texture&&Dr.indexOf(O[r].texture._texture.format)>=0||O[r].renderbuffer&&Nr.indexOf(O[r].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+r+" is invalid"),O[r]&&O[r].texture){var Y=Lr[O[r].texture._texture.format]*Ar[O[r].texture._texture.type];null===R?R=Y:nt(R===Y,"all color attachments much have the same number of bits per pixel.")}return f(P,a,d),nt(!P||P.texture&&P.texture._texture.format===Tr||P.renderbuffer&&P.renderbuffer._renderbuffer.format===Or,"invalid depth attachment for framebuffer object"),f(I,a,d),nt(!I||I.renderbuffer&&I.renderbuffer._renderbuffer.format===Pr,"invalid stencil attachment for framebuffer object"),f(N,a,d),nt(!N||N.texture&&N.texture._texture.format===Ir||N.renderbuffer&&N.renderbuffer._renderbuffer.format===Ir,"invalid depth-stencil attachment for framebuffer object"),x(o),o.width=a,o.height=d,o.colorAttachments=O,o.depthAttachment=P,o.stencilAttachment=I,o.depthStencilAttachment=N,h.color=O.map(v),h.depth=v(P),h.stencil=v(I),h.depthStencil=v(N),h.width=o.width,h.height=o.height,E(o),h}function d(t,e){nt(s.next!==o,"can not resize a framebuffer which is currently in use");var n=Math.max(0|t,1),i=Math.max(0|e||n,1);if(n===o.width&&i===o.height)return h;for(var r=o.colorAttachments,a=0;a<r.length;++a)y(r[a],n,i);return y(o.depthAttachment,n,i),y(o.stencilAttachment,n,i),y(o.depthStencilAttachment,n,i),o.width=h.width=n,o.height=h.height=i,E(o),h}return a.framebufferCount++,h(t,r),e(h,{resize:d,_reglType:"framebuffer",_framebuffer:o,destroy:function(){M(o),x(o)},use:function(t){s.setFBO({framebuffer:h},t)}})}function k(t){var o=Array(6);function a(t){var i;nt(o.indexOf(s.next)<0,"can not update framebuffer which is currently in use");var u,h={color:null},d=0,f=null,p="rgba",m="uint8",g=1;if("number"==typeof t)d=0|t;else if(t){nt.type(t,"object","invalid arguments for framebuffer");var v=t;if("shape"in v){var y=v.shape;nt(Array.isArray(y)&&y.length>=2,"invalid shape for framebuffer"),nt(y[0]===y[1],"cube framebuffer must be square"),d=y[0]}else"radius"in v&&(d=0|v.radius),"width"in v?(d=0|v.width,"height"in v&&nt(v.height===d,"must be square")):"height"in v&&(d=0|v.height);("color"in v||"colors"in v)&&(f=v.color||v.colors,Array.isArray(f)&&nt(1===f.length||n.webgl_draw_buffers,"multiple render targets not supported")),f||("colorCount"in v&&(g=0|v.colorCount,nt(g>0,"invalid color buffer count")),"colorType"in v&&(nt.oneOf(v.colorType,c,"invalid color type"),m=v.colorType),"colorFormat"in v&&(p=v.colorFormat,nt.oneOf(v.colorFormat,l,"invalid color format for texture"))),"depth"in v&&(h.depth=v.depth),"stencil"in v&&(h.stencil=v.stencil),"depthStencil"in v&&(h.depthStencil=v.depthStencil)}else d=1;if(f)if(Array.isArray(f))for(u=[],i=0;i<f.length;++i)u[i]=f[i];else u=[f];else{u=Array(g);var b={radius:d,format:p,type:m};for(i=0;i<g;++i)u[i]=r.createCube(b)}for(h.color=Array(u.length),i=0;i<u.length;++i){var _=u[i];nt("function"==typeof _&&"textureCube"===_._reglType,"invalid cube map"),d=d||_.width,nt(_.width===d&&_.height===d,"invalid cube map shape"),h.color[i]={target:fr,data:u[i]}}for(i=0;i<6;++i){for(var w=0;w<u.length;++w)h.color[w].target=fr+i;i>0&&(h.depth=o[0].depth,h.stencil=o[0].stencil,h.depthStencil=o[0].depthStencil),o[i]?o[i](h):o[i]=S(h)}return e(a,{width:d,height:d,color:u})}function u(t){var e,n=0|t;if(nt(n>0&&n<=i.maxCubeMapSize,"invalid radius for cube fbo"),n===a.width)return a;var r=a.color;for(e=0;e<r.length;++e)r[e].resize(n);for(e=0;e<6;++e)o[e].resize(n);return a.width=a.height=n,a}return a(t),e(a,{faces:o,resize:u,_reglType:"framebufferCube",destroy:function(){o.forEach((function(t){t.destroy()}))}})}function C(){s.cur=null,s.next=null,s.dirty=!0,Ee(_).forEach((function(e){e.framebuffer=t.createFramebuffer(),E(e)}))}return e(s,{getFramebuffer:function(t){if("function"==typeof t&&"framebuffer"===t._reglType){var e=t._framebuffer;if(e instanceof w)return e}return null},create:S,createCube:k,clear:function(){Ee(_).forEach(M)},restore:C})}Rr[yr]="complete",Rr[br]="incomplete attachment",Rr[wr]="incomplete dimensions",Rr[_r]="incomplete, missing attachment",Rr[xr]="unsupported";var jr=5126,Fr=34962;function Br(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=jr,this.offset=0,this.stride=0,this.divisor=0}function zr(e,n,i,r,o){for(var a=i.maxAttributes,s=new Array(a),l=0;l<a;++l)s[l]=new Br;var u=0,c={},h={Record:Br,scope:{},state:s,currentVAO:null,targetVAO:null,restore:f()?_:function(){},createVAO:w,getVAO:m,destroyBuffer:d,setVAO:f()?g:v,clear:f()?y:function(){}};function d(t){for(var n=0;n<s.length;++n){var i=s[n];i.buffer===t&&(e.disableVertexAttribArray(n),i.buffer=null)}}function f(){return n.oes_vertex_array_object}function p(){return n.angle_instanced_arrays}function m(t){return"function"==typeof t&&t._vao?t._vao:null}function g(t){if(t!==h.currentVAO){var e=f();t?e.bindVertexArrayOES(t.vao):e.bindVertexArrayOES(null),h.currentVAO=t}}function v(t){if(t!==h.currentVAO){if(t)t.bindAttrs();else for(var n=p(),i=0;i<s.length;++i){var r=s[i];r.buffer?(e.enableVertexAttribArray(i),e.vertexAttribPointer(i,r.size,r.type,r.normalized,r.stride,r.offfset),n&&r.divisor&&n.vertexAttribDivisorANGLE(i,r.divisor)):(e.disableVertexAttribArray(i),e.vertexAttrib4f(i,r.x,r.y,r.z,r.w))}h.currentVAO=t}}function y(){Ee(c).forEach((function(t){t.destroy()}))}function b(){this.id=++u,this.attributes=[];var t=f();this.vao=t?t.createVertexArrayOES():null,c[this.id]=this,this.buffers=[]}function _(){f()&&Ee(c).forEach((function(t){t.refresh()}))}function w(e){var i=new b;function s(e){nt(Array.isArray(e),"arguments to vertex array constructor must be an array"),nt(e.length<a,"too many attributes"),nt(e.length>0,"must specify at least one attribute");var r={},l=i.attributes;l.length=e.length;for(var u=0;u<e.length;++u){var c,h=e[u],d=l[u]=new Br,f=h.data||h;Array.isArray(f)||t(f)||Me(f)?(i.buffers[u]&&(c=i.buffers[u],t(f)&&c._buffer.byteLength>=f.byteLength?c.subdata(f):(c.destroy(),i.buffers[u]=null)),i.buffers[u]||(c=i.buffers[u]=o.create(h,Fr,!1,!0)),d.buffer=o.getBuffer(c),d.size=0|d.buffer.dimension,d.normalized=!1,d.type=d.buffer.dtype,d.offset=0,d.stride=0,d.divisor=0,d.state=1,r[u]=1):o.getBuffer(h)?(d.buffer=o.getBuffer(h),d.size=0|d.buffer.dimension,d.normalized=!1,d.type=d.buffer.dtype,d.offset=0,d.stride=0,d.divisor=0,d.state=1):o.getBuffer(h.buffer)?(d.buffer=o.getBuffer(h.buffer),d.size=0|(+h.size||d.buffer.dimension),d.normalized=!!h.normalized||!1,"type"in h?(nt.parameter(h.type,Pe,"invalid buffer type"),d.type=Pe[h.type]):d.type=d.buffer.dtype,d.offset=0|(h.offset||0),d.stride=0|(h.stride||0),d.divisor=0|(h.divisor||0),d.state=1,nt(d.size>=1&&d.size<=4,"size must be between 1 and 4"),nt(d.offset>=0,"invalid offset"),nt(d.stride>=0&&d.stride<=255,"stride must be between 0 and 255"),nt(d.divisor>=0,"divisor must be positive"),nt(!d.divisor||!!n.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in h?(nt(u>0,"first attribute must not be a constant"),d.x=+h.x||0,d.y=+h.y||0,d.z=+h.z||0,d.w=+h.w||0,d.state=2):nt(!1,"invalid attribute spec for location "+u)}for(var p=0;p<i.buffers.length;++p)!r[p]&&i.buffers[p]&&(i.buffers[p].destroy(),i.buffers[p]=null);return i.refresh(),s}return r.vaoCount+=1,s.destroy=function(){for(var t=0;t<i.buffers.length;++t)i.buffers[t]&&i.buffers[t].destroy();i.buffers.length=0,i.destroy()},s._vao=i,s._reglType="vao",s(e)}return b.prototype.bindAttrs=function(){for(var t=p(),n=this.attributes,i=0;i<n.length;++i){var r=n[i];r.buffer?(e.enableVertexAttribArray(i),e.bindBuffer(Fr,r.buffer.buffer),e.vertexAttribPointer(i,r.size,r.type,r.normalized,r.stride,r.offset),t&&r.divisor&&t.vertexAttribDivisorANGLE(i,r.divisor)):(e.disableVertexAttribArray(i),e.vertexAttrib4f(i,r.x,r.y,r.z,r.w))}for(var o=n.length;o<a;++o)e.disableVertexAttribArray(o)},b.prototype.refresh=function(){var t=f();t&&(t.bindVertexArrayOES(this.vao),this.bindAttrs(),h.currentVAO=this)},b.prototype.destroy=function(){if(this.vao){var t=f();this===h.currentVAO&&(h.currentVAO=null,t.bindVertexArrayOES(null)),t.deleteVertexArrayOES(this.vao),this.vao=null}c[this.id]&&(delete c[this.id],r.vaoCount-=1)},h}var Hr=35632,Gr=35633,Wr=35718,Ur=35721;function Vr(t,n,i,r){var o={},a={};function s(t,e,n,i){this.name=t,this.id=e,this.location=n,this.info=i}function l(t,e){for(var n=0;n<t.length;++n)if(t[n].id===e.id)return void(t[n].location=e.location);t.push(e)}function u(e,i,r){var s=e===Hr?o:a,l=s[i];if(!l){var u=n.str(i);l=t.createShader(e),t.shaderSource(l,u),t.compileShader(l),nt.shaderError(t,l,u,e,r),s[i]=l}return l}var c={},h=[],d=0;function f(t,e){this.id=d++,this.fragId=t,this.vertId=e,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,r.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function p(e,i,o){var a,c,h=u(Hr,e.fragId),d=u(Gr,e.vertId),f=e.program=t.createProgram();if(t.attachShader(f,h),t.attachShader(f,d),o)for(a=0;a<o.length;++a){var p=o[a];t.bindAttribLocation(f,p[0],p[1])}t.linkProgram(f),nt.linkError(t,f,n.str(e.fragId),n.str(e.vertId),i);var m=t.getProgramParameter(f,Wr);r.profile&&(e.stats.uniformsCount=m);var g=e.uniforms;for(a=0;a<m;++a)if(c=t.getActiveUniform(f,a))if(c.size>1)for(var v=0;v<c.size;++v){var y=c.name.replace("[0]","["+v+"]");l(g,new s(y,n.id(y),t.getUniformLocation(f,y),c))}else l(g,new s(c.name,n.id(c.name),t.getUniformLocation(f,c.name),c));var b=t.getProgramParameter(f,Ur);r.profile&&(e.stats.attributesCount=b);var _=e.attributes;for(a=0;a<b;++a)(c=t.getActiveAttrib(f,a))&&l(_,new s(c.name,n.id(c.name),t.getAttribLocation(f,c.name),c))}function m(){o={},a={};for(var t=0;t<h.length;++t)p(h[t],null,h[t].attributes.map((function(t){return[t.location,t.name]})))}return r.profile&&(i.getMaxUniformsCount=function(){var t=0;return h.forEach((function(e){e.stats.uniformsCount>t&&(t=e.stats.uniformsCount)})),t},i.getMaxAttributesCount=function(){var t=0;return h.forEach((function(e){e.stats.attributesCount>t&&(t=e.stats.attributesCount)})),t}),{clear:function(){var e=t.deleteShader.bind(t);Ee(o).forEach(e),o={},Ee(a).forEach(e),a={},h.forEach((function(e){t.deleteProgram(e.program)})),h.length=0,c={},i.shaderCount=0},program:function(n,r,s,l){nt.command(n>=0,"missing vertex shader",s),nt.command(r>=0,"missing fragment shader",s);var u=c[r];u||(u=c[r]={});var d=u[n];if(d&&(d.refCount++,!l))return d;var m=new f(r,n);return i.shaderCount++,p(m,s,l),d||(u[n]=m),h.push(m),e(m,{destroy:function(){if(m.refCount--,m.refCount<=0){t.deleteProgram(m.program);var e=h.indexOf(m);h.splice(e,1),i.shaderCount--}u[m.vertId].refCount<=0&&(t.deleteShader(a[m.vertId]),delete a[m.vertId],delete c[m.fragId][m.vertId]),Object.keys(c[m.fragId]).length||(t.deleteShader(o[m.fragId]),delete o[m.fragId],delete c[m.fragId])}})},restore:m,shader:u,frag:-1,vert:-1}}var Xr=6408,qr=5121,Kr=3333,$r=5126;function Zr(e,n,i,r,o,a,s){function l(l){var u;null===n.next?(nt(o.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),u=qr):(nt(null!==n.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),u=n.next.colorAttachments[0].texture._texture.type,a.oes_texture_float?(nt(u===qr||u===$r,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),u===$r&&nt(s.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):nt(u===qr,"Reading from a framebuffer is only allowed for the type 'uint8'"));var c=0,h=0,d=r.framebufferWidth,f=r.framebufferHeight,p=null;t(l)?p=l:l&&(nt.type(l,"object","invalid arguments to regl.read()"),c=0|l.x,h=0|l.y,nt(c>=0&&c<r.framebufferWidth,"invalid x offset for regl.read"),nt(h>=0&&h<r.framebufferHeight,"invalid y offset for regl.read"),d=0|(l.width||r.framebufferWidth-c),f=0|(l.height||r.framebufferHeight-h),p=l.data||null),p&&(u===qr?nt(p instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):u===$r&&nt(p instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),nt(d>0&&d+c<=r.framebufferWidth,"invalid width for read pixels"),nt(f>0&&f+h<=r.framebufferHeight,"invalid height for read pixels"),i();var m=d*f*4;return p||(u===qr?p=new Uint8Array(m):u===$r&&(p=p||new Float32Array(m))),nt.isTypedArray(p,"data buffer for regl.read() must be a typedarray"),nt(p.byteLength>=m,"data buffer for regl.read() too small"),e.pixelStorei(Kr,4),e.readPixels(c,h,d,f,Xr,u,p),p}function u(t){var e;return n.setFBO({framebuffer:t.framebuffer},(function(){e=l(t)})),e}function c(t){return t&&"framebuffer"in t?u(t):l(t)}return c}function Jr(t){return Array.prototype.slice.call(t)}function Qr(t){return Jr(t).join("")}function to(){var t=0,n=[],i=[];function r(e){for(var r=0;r<i.length;++r)if(i[r]===e)return n[r];var o="g"+t++;return n.push(o),i.push(e),o}function o(){var n=[];function i(){n.push.apply(n,Jr(arguments))}var r=[];function o(){var e="v"+t++;return r.push(e),arguments.length>0&&(n.push(e,"="),n.push.apply(n,Jr(arguments)),n.push(";")),e}return e(i,{def:o,toString:function(){return Qr([r.length>0?"var "+r.join(",")+";":"",Qr(n)])}})}function a(){var t=o(),n=o(),i=t.toString,r=n.toString;function a(e,i){n(e,i,"=",t.def(e,i),";")}return e((function(){t.apply(t,Jr(arguments))}),{def:t.def,entry:t,exit:n,save:a,set:function(e,n,i){a(e,n),t(e,n,"=",i,";")},toString:function(){return i()+r()}})}function s(){var t=Qr(arguments),n=a(),i=a(),r=n.toString,o=i.toString;return e(n,{then:function(){return n.apply(n,Jr(arguments)),this},else:function(){return i.apply(i,Jr(arguments)),this},toString:function(){var e=o();return e&&(e="else{"+e+"}"),Qr(["if(",t,"){",r(),"}",e])}})}var l=o(),u={};function c(t,n){var i=[];function r(){var t="a"+i.length;return i.push(t),t}n=n||0;for(var o=0;o<n;++o)r();var s=a(),l=s.toString;return u[t]=e(s,{arg:r,toString:function(){return Qr(["function(",i.join(),"){",l(),"}"])}})}function h(){var t=['"use strict";',l,"return {"];Object.keys(u).forEach((function(e){t.push('"',e,'":',u[e].toString(),",")})),t.push("}");var e=Qr(t).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,n.concat(e)).apply(null,i)}return{global:l,link:r,block:o,proc:c,scope:a,cond:s,compile:h}}var eo="xyzw".split(""),no=5121,io=1,ro=2,oo=0,ao=1,so=2,lo=3,uo=4,co=5,ho=6,fo="dither",po="blend.enable",mo="blend.color",go="blend.equation",vo="blend.func",yo="depth.enable",bo="depth.func",_o="depth.range",wo="depth.mask",xo="colorMask",Mo="cull.enable",Eo="cull.face",So="frontFace",ko="lineWidth",Co="polygonOffset.enable",To="polygonOffset.offset",Do="sample.alpha",Lo="sample.enable",Ao="sample.coverage",Oo="stencil.enable",Po="stencil.mask",Io="stencil.func",No="stencil.opFront",Ro="stencil.opBack",Yo="scissor.enable",jo="scissor.box",Fo="viewport",Bo="profile",zo="framebuffer",Ho="vert",Go="frag",Wo="elements",Uo="primitive",Vo="count",Xo="offset",qo="instances",Ko="vao",$o="Width",Zo="Height",Jo=zo+$o,Qo=zo+Zo,ta=Fo+$o,ea=Fo+Zo,na="drawingBuffer",ia=na+$o,ra=na+Zo,oa=[vo,go,Io,No,Ro,Ao,Fo,jo,To],aa=34962,sa=34963,la=3553,ua=34067,ca=2884,ha=3042,da=3024,fa=2960,pa=2929,ma=3089,ga=32823,va=32926,ya=32928,ba=5126,_a=35664,wa=35665,xa=35666,Ma=5124,Ea=35667,Sa=35668,ka=35669,Ca=35670,Ta=35671,Da=35672,La=35673,Aa=35674,Oa=35675,Pa=35676,Ia=35678,Na=35680,Ra=4,Ya=1028,ja=1029,Fa=2304,Ba=2305,za=32775,Ha=32776,Ga=519,Wa=7680,Ua=0,Va=1,Xa=32774,qa=513,Ka=36160,$a=36064,Za={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Ja=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],Qa={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},ts={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},es={frag:35632,vert:35633},ns={cw:Fa,ccw:Ba};function is(e){return Array.isArray(e)||t(e)||Me(e)}function rs(t){return t.sort((function(t,e){return t===Fo?-1:e===Fo?1:t<e?-1:1}))}function os(t,e,n,i){this.thisDep=t,this.contextDep=e,this.propDep=n,this.append=i}function as(t){return t&&!(t.thisDep||t.contextDep||t.propDep)}function ss(t){return new os(!1,!1,!1,t)}function ls(t,e){var n=t.type;if(n===oo){var i=t.data.length;return new os(!0,i>=1,i>=2,e)}if(n===uo){var r=t.data;return new os(r.thisDep,r.contextDep,r.propDep,e)}if(n===co)return new os(!1,!1,!1,e);if(n===ho){for(var o=!1,a=!1,s=!1,l=0;l<t.data.length;++l){var u=t.data[l];if(u.type===ao)s=!0;else if(u.type===so)a=!0;else if(u.type===lo)o=!0;else if(u.type===oo){o=!0;var c=u.data;c>=1&&(a=!0),c>=2&&(s=!0)}else u.type===uo&&(o=o||u.data.thisDep,a=a||u.data.contextDep,s=s||u.data.propDep)}return new os(o,a,s,e)}return new os(n===lo,n===so,n===ao,e)}var us=new os(!1,!1,!1,(function(){}));function cs(t,n,i,r,o,a,s,l,u,c,h,d,f,p,m){var g=c.Record,v={add:32774,subtract:32778,"reverse subtract":32779};i.ext_blend_minmax&&(v.min=za,v.max=Ha);var y=i.angle_instanced_arrays,b=i.webgl_draw_buffers,_={dirty:!0,profile:m.profile},w={},x=[],M={},E={};function S(t){return t.replace(".","_")}function k(t,e,n){var i=S(t);x.push(t),w[i]=_[i]=!!n,M[i]=e}function C(t,e,n){var i=S(t);x.push(t),Array.isArray(n)?(_[i]=n.slice(),w[i]=n.slice()):_[i]=w[i]=n,E[i]=e}k(fo,da),k(po,ha),C(mo,"blendColor",[0,0,0,0]),C(go,"blendEquationSeparate",[Xa,Xa]),C(vo,"blendFuncSeparate",[Va,Ua,Va,Ua]),k(yo,pa,!0),C(bo,"depthFunc",qa),C(_o,"depthRange",[0,1]),C(wo,"depthMask",!0),C(xo,xo,[!0,!0,!0,!0]),k(Mo,ca),C(Eo,"cullFace",ja),C(So,So,Ba),C(ko,ko,1),k(Co,ga),C(To,"polygonOffset",[0,0]),k(Do,va),k(Lo,ya),C(Ao,"sampleCoverage",[1,!1]),k(Oo,fa),C(Po,"stencilMask",-1),C(Io,"stencilFunc",[Ga,0,-1]),C(No,"stencilOpSeparate",[Ya,Wa,Wa,Wa]),C(Ro,"stencilOpSeparate",[ja,Wa,Wa,Wa]),k(Yo,ma),C(jo,"scissor",[0,0,t.drawingBufferWidth,t.drawingBufferHeight]),C(Fo,Fo,[0,0,t.drawingBufferWidth,t.drawingBufferHeight]);var T={gl:t,context:f,strings:n,next:w,current:_,draw:d,elements:a,buffer:o,shader:h,attributes:c.state,vao:c,uniforms:u,framebuffer:l,extensions:i,timer:p,isBufferArgs:is},D={primTypes:Ve,compareFuncs:Qa,blendFuncs:Za,blendEquations:v,stencilOps:ts,glTypes:Pe,orientationType:ns};nt.optional((function(){T.isArrayLike=hn})),b&&(D.backBuffer=[ja],D.drawBuffer=kt(r.maxDrawbuffers,(function(t){return 0===t?[0]:kt(t,(function(t){return $a+t}))})));var L=0;function A(){var t=to(),e=t.link,i=t.global;t.id=L++,t.batchId="0";var r=e(T),o=t.shared={props:"a0"};Object.keys(T).forEach((function(t){o[t]=i.def(r,".",t)})),nt.optional((function(){t.CHECK=e(nt),t.commandStr=nt.guessCommand(),t.command=e(t.commandStr),t.assert=function(t,n,i){t("if(!(",n,"))",this.CHECK,".commandRaise(",e(i),",",this.command,");")},D.invalidBlendCombinations=Ja}));var a=t.next={},s=t.current={};Object.keys(E).forEach((function(t){Array.isArray(_[t])&&(a[t]=i.def(o.next,".",t),s[t]=i.def(o.current,".",t))}));var l=t.constants={};Object.keys(D).forEach((function(t){l[t]=i.def(JSON.stringify(D[t]))})),t.invoke=function(n,i){switch(i.type){case oo:var r=["this",o.context,o.props,t.batchId];return n.def(e(i.data),".call(",r.slice(0,Math.max(i.data.length+1,4)),")");case ao:return n.def(o.props,i.data);case so:return n.def(o.context,i.data);case lo:return n.def("this",i.data);case uo:return i.data.append(t,n),i.data.ref;case co:return i.data.toString();case ho:return i.data.map((function(e){return t.invoke(n,e)}))}},t.attribCache={};var u={};return t.scopeAttrib=function(t){var i=n.id(t);if(i in u)return u[i];var r=c.scope[i];return r||(r=c.scope[i]=new g),u[i]=e(r)},t}function O(t){var e,n=t.static,i=t.dynamic;if(Bo in n){var r=!!n[Bo];(e=ss((function(t,e){return r}))).enable=r}else if(Bo in i){var o=i[Bo];e=ls(o,(function(t,e){return t.invoke(e,o)}))}return e}function P(t,e){var n=t.static,i=t.dynamic;if(zo in n){var r=n[zo];return r?(r=l.getFramebuffer(r),nt.command(r,"invalid framebuffer object"),ss((function(t,e){var n=t.link(r),i=t.shared;e.set(i.framebuffer,".next",n);var o=i.context;return e.set(o,"."+Jo,n+".width"),e.set(o,"."+Qo,n+".height"),n}))):ss((function(t,e){var n=t.shared;e.set(n.framebuffer,".next","null");var i=n.context;return e.set(i,"."+Jo,i+"."+ia),e.set(i,"."+Qo,i+"."+ra),"null"}))}if(zo in i){var o=i[zo];return ls(o,(function(t,e){var n=t.invoke(e,o),i=t.shared,r=i.framebuffer,a=e.def(r,".getFramebuffer(",n,")");nt.optional((function(){t.assert(e,"!"+n+"||"+a,"invalid framebuffer object")})),e.set(r,".next",a);var s=i.context;return e.set(s,"."+Jo,a+"?"+a+".width:"+s+"."+ia),e.set(s,"."+Qo,a+"?"+a+".height:"+s+"."+ra),a}))}return null}function I(t,e,n){var i=t.static,r=t.dynamic;function o(t){if(t in i){var o=i[t];nt.commandType(o,"object","invalid "+t,n.commandStr);var a,s,l=!0,u=0|o.x,c=0|o.y;return"width"in o?(a=0|o.width,nt.command(a>=0,"invalid "+t,n.commandStr)):l=!1,"height"in o?(s=0|o.height,nt.command(s>=0,"invalid "+t,n.commandStr)):l=!1,new os(!l&&e&&e.thisDep,!l&&e&&e.contextDep,!l&&e&&e.propDep,(function(t,e){var n=t.shared.context,i=a;"width"in o||(i=e.def(n,".",Jo,"-",u));var r=s;return"height"in o||(r=e.def(n,".",Qo,"-",c)),[u,c,i,r]}))}if(t in r){var h=r[t],d=ls(h,(function(e,n){var i=e.invoke(n,h);nt.optional((function(){e.assert(n,i+"&&typeof "+i+'==="object"',"invalid "+t)}));var r=e.shared.context,o=n.def(i,".x|0"),a=n.def(i,".y|0"),s=n.def('"width" in ',i,"?",i,".width|0:","(",r,".",Jo,"-",o,")"),l=n.def('"height" in ',i,"?",i,".height|0:","(",r,".",Qo,"-",a,")");return nt.optional((function(){e.assert(n,s+">=0&&"+l+">=0","invalid "+t)})),[o,a,s,l]}));return e&&(d.thisDep=d.thisDep||e.thisDep,d.contextDep=d.contextDep||e.contextDep,d.propDep=d.propDep||e.propDep),d}return e?new os(e.thisDep,e.contextDep,e.propDep,(function(t,e){var n=t.shared.context;return[0,0,e.def(n,".",Jo),e.def(n,".",Qo)]})):null}var a=o(Fo);if(a){var s=a;a=new os(a.thisDep,a.contextDep,a.propDep,(function(t,e){var n=s.append(t,e),i=t.shared.context;return e.set(i,"."+ta,n[2]),e.set(i,"."+ea,n[3]),n}))}return{viewport:a,scissor_box:o(jo)}}function N(t,e){var n=t.static;if("string"==typeof n[Go]&&"string"==typeof n[Ho]){if(Object.keys(e.dynamic).length>0)return null;var i=e.static,r=Object.keys(i);if(r.length>0&&"number"==typeof i[r[0]]){for(var o=[],a=0;a<r.length;++a)nt("number"==typeof i[r[a]],"must specify all vertex attribute locations when using vaos"),o.push([0|i[r[a]],r[a]]);return o}}return null}function R(t,e,i){var r=t.static,o=t.dynamic;function a(t){if(t in r){var e=n.id(r[t]);nt.optional((function(){h.shader(es[t],e,nt.guessCommand())}));var i=ss((function(){return e}));return i.id=e,i}if(t in o){var a=o[t];return ls(a,(function(e,n){var i=e.invoke(n,a),r=n.def(e.shared.strings,".id(",i,")");return nt.optional((function(){n(e.shared.shader,".shader(",es[t],",",r,",",e.command,");")})),r}))}return null}var s,l=a(Go),u=a(Ho),c=null;return as(l)&&as(u)?(c=h.program(u.id,l.id,null,i),s=ss((function(t,e){return t.link(c)}))):s=new os(l&&l.thisDep||u&&u.thisDep,l&&l.contextDep||u&&u.contextDep,l&&l.propDep||u&&u.propDep,(function(t,e){var n,i=t.shared.shader;n=l?l.append(t,e):e.def(i,".",Go);var r=i+".program("+(u?u.append(t,e):e.def(i,".",Ho))+","+n;return nt.optional((function(){r+=","+t.command})),e.def(r+")")})),{frag:l,vert:u,progVar:s,program:c}}function Y(t,e){var n=t.static,i=t.dynamic;function r(){if(Wo in n){var t=n[Wo];is(t)?t=a.getElements(a.create(t,!0)):t&&(t=a.getElements(t),nt.command(t,"invalid elements",e.commandStr));var r=ss((function(e,n){if(t){var i=e.link(t);return e.ELEMENTS=i,i}return e.ELEMENTS=null,null}));return r.value=t,r}if(Wo in i){var o=i[Wo];return ls(o,(function(t,e){var n=t.shared,i=n.isBufferArgs,r=n.elements,a=t.invoke(e,o),s=e.def("null"),l=e.def(i,"(",a,")"),u=t.cond(l).then(s,"=",r,".createStream(",a,");").else(s,"=",r,".getElements(",a,");");return nt.optional((function(){t.assert(u.else,"!"+a+"||"+s,"invalid elements")})),e.entry(u),e.exit(t.cond(l).then(r,".destroyStream(",s,");")),t.ELEMENTS=s,s}))}return null}var o=r();function s(){if(Uo in n){var t=n[Uo];return nt.commandParameter(t,Ve,"invalid primitve",e.commandStr),ss((function(e,n){return Ve[t]}))}if(Uo in i){var r=i[Uo];return ls(r,(function(t,e){var n=t.constants.primTypes,i=t.invoke(e,r);return nt.optional((function(){t.assert(e,i+" in "+n,"invalid primitive, must be one of "+Object.keys(Ve))})),e.def(n,"[",i,"]")}))}return o?as(o)?o.value?ss((function(t,e){return e.def(t.ELEMENTS,".primType")})):ss((function(){return Ra})):new os(o.thisDep,o.contextDep,o.propDep,(function(t,e){var n=t.ELEMENTS;return e.def(n,"?",n,".primType:",Ra)})):null}function l(t,r){if(t in n){var a=0|n[t];return nt.command(!r||a>=0,"invalid "+t,e.commandStr),ss((function(t,e){return r&&(t.OFFSET=a),a}))}if(t in i){var s=i[t];return ls(s,(function(e,n){var i=e.invoke(n,s);return r&&(e.OFFSET=i,nt.optional((function(){e.assert(n,i+">=0","invalid "+t)}))),i}))}return r&&o?ss((function(t,e){return t.OFFSET="0",0})):null}var u=l(Xo,!0);function c(){if(Vo in n){var t=0|n[Vo];return nt.command("number"==typeof t&&t>=0,"invalid vertex count",e.commandStr),ss((function(){return t}))}if(Vo in i){var r=i[Vo];return ls(r,(function(t,e){var n=t.invoke(e,r);return nt.optional((function(){t.assert(e,"typeof "+n+'==="number"&&'+n+">=0&&"+n+"===("+n+"|0)","invalid vertex count")})),n}))}if(o){if(as(o)){if(o)return u?new os(u.thisDep,u.contextDep,u.propDep,(function(t,e){var n=e.def(t.ELEMENTS,".vertCount-",t.OFFSET);return nt.optional((function(){t.assert(e,n+">=0","invalid vertex offset/element buffer too small")})),n})):ss((function(t,e){return e.def(t.ELEMENTS,".vertCount")}));var a=ss((function(){return-1}));return nt.optional((function(){a.MISSING=!0})),a}var s=new os(o.thisDep||u.thisDep,o.contextDep||u.contextDep,o.propDep||u.propDep,(function(t,e){var n=t.ELEMENTS;return t.OFFSET?e.def(n,"?",n,".vertCount-",t.OFFSET,":-1"):e.def(n,"?",n,".vertCount:-1")}));return nt.optional((function(){s.DYNAMIC=!0})),s}return null}return{elements:o,primitive:s(),count:c(),instances:l(qo,!1),offset:u}}function j(t,e){var n=t.static,i=t.dynamic,o={};return x.forEach((function(t){var a=S(t);function s(e,r){if(t in n){var s=e(n[t]);o[a]=ss((function(){return s}))}else if(t in i){var l=i[t];o[a]=ls(l,(function(t,e){return r(t,e,t.invoke(e,l))}))}}switch(t){case Mo:case po:case fo:case Oo:case yo:case Yo:case Co:case Do:case Lo:case wo:return s((function(n){return nt.commandType(n,"boolean",t,e.commandStr),n}),(function(e,n,i){return nt.optional((function(){e.assert(n,"typeof "+i+'==="boolean"',"invalid flag "+t,e.commandStr)})),i}));case bo:return s((function(n){return nt.commandParameter(n,Qa,"invalid "+t,e.commandStr),Qa[n]}),(function(e,n,i){var r=e.constants.compareFuncs;return nt.optional((function(){e.assert(n,i+" in "+r,"invalid "+t+", must be one of "+Object.keys(Qa))})),n.def(r,"[",i,"]")}));case _o:return s((function(t){return nt.command(hn(t)&&2===t.length&&"number"==typeof t[0]&&"number"==typeof t[1]&&t[0]<=t[1],"depth range is 2d array",e.commandStr),t}),(function(t,e,n){return nt.optional((function(){t.assert(e,t.shared.isArrayLike+"("+n+")&&"+n+".length===2&&typeof "+n+'[0]==="number"&&typeof '+n+'[1]==="number"&&'+n+"[0]<="+n+"[1]","depth range must be a 2d array")})),[e.def("+",n,"[0]"),e.def("+",n,"[1]")]}));case vo:return s((function(t){nt.commandType(t,"object","blend.func",e.commandStr);var n="srcRGB"in t?t.srcRGB:t.src,i="srcAlpha"in t?t.srcAlpha:t.src,r="dstRGB"in t?t.dstRGB:t.dst,o="dstAlpha"in t?t.dstAlpha:t.dst;return nt.commandParameter(n,Za,a+".srcRGB",e.commandStr),nt.commandParameter(i,Za,a+".srcAlpha",e.commandStr),nt.commandParameter(r,Za,a+".dstRGB",e.commandStr),nt.commandParameter(o,Za,a+".dstAlpha",e.commandStr),nt.command(-1===Ja.indexOf(n+", "+r),"unallowed blending combination (srcRGB, dstRGB) = ("+n+", "+r+")",e.commandStr),[Za[n],Za[r],Za[i],Za[o]]}),(function(e,n,i){var r=e.constants.blendFuncs;function o(o,a){var s=n.def('"',o,a,'" in ',i,"?",i,".",o,a,":",i,".",o);return nt.optional((function(){e.assert(n,s+" in "+r,"invalid "+t+"."+o+a+", must be one of "+Object.keys(Za))})),s}nt.optional((function(){e.assert(n,i+"&&typeof "+i+'==="object"',"invalid blend func, must be an object")}));var a=o("src","RGB"),s=o("dst","RGB");nt.optional((function(){var t=e.constants.invalidBlendCombinations;e.assert(n,t+".indexOf("+a+'+", "+'+s+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")}));var l=n.def(r,"[",a,"]"),u=n.def(r,"[",o("src","Alpha"),"]");return[l,n.def(r,"[",s,"]"),u,n.def(r,"[",o("dst","Alpha"),"]")]}));case go:return s((function(n){return"string"==typeof n?(nt.commandParameter(n,v,"invalid "+t,e.commandStr),[v[n],v[n]]):"object"==typeof n?(nt.commandParameter(n.rgb,v,t+".rgb",e.commandStr),nt.commandParameter(n.alpha,v,t+".alpha",e.commandStr),[v[n.rgb],v[n.alpha]]):void nt.commandRaise("invalid blend.equation",e.commandStr)}),(function(e,n,i){var r=e.constants.blendEquations,o=n.def(),a=n.def(),s=e.cond("typeof ",i,'==="string"');return nt.optional((function(){function n(t,n,i){e.assert(t,i+" in "+r,"invalid "+n+", must be one of "+Object.keys(v))}n(s.then,t,i),e.assert(s.else,i+"&&typeof "+i+'==="object"',"invalid "+t),n(s.else,t+".rgb",i+".rgb"),n(s.else,t+".alpha",i+".alpha")})),s.then(o,"=",a,"=",r,"[",i,"];"),s.else(o,"=",r,"[",i,".rgb];",a,"=",r,"[",i,".alpha];"),n(s),[o,a]}));case mo:return s((function(t){return nt.command(hn(t)&&4===t.length,"blend.color must be a 4d array",e.commandStr),kt(4,(function(e){return+t[e]}))}),(function(t,e,n){return nt.optional((function(){t.assert(e,t.shared.isArrayLike+"("+n+")&&"+n+".length===4","blend.color must be a 4d array")})),kt(4,(function(t){return e.def("+",n,"[",t,"]")}))}));case Po:return s((function(t){return nt.commandType(t,"number",a,e.commandStr),0|t}),(function(t,e,n){return nt.optional((function(){t.assert(e,"typeof "+n+'==="number"',"invalid stencil.mask")})),e.def(n,"|0")}));case Io:return s((function(n){nt.commandType(n,"object",a,e.commandStr);var i=n.cmp||"keep",r=n.ref||0,o="mask"in n?n.mask:-1;return nt.commandParameter(i,Qa,t+".cmp",e.commandStr),nt.commandType(r,"number",t+".ref",e.commandStr),nt.commandType(o,"number",t+".mask",e.commandStr),[Qa[i],r,o]}),(function(t,e,n){var i=t.constants.compareFuncs;return nt.optional((function(){function r(){t.assert(e,Array.prototype.join.call(arguments,""),"invalid stencil.func")}r(n+"&&typeof ",n,'==="object"'),r('!("cmp" in ',n,")||(",n,".cmp in ",i,")")})),[e.def('"cmp" in ',n,"?",i,"[",n,".cmp]",":",Wa),e.def(n,".ref|0"),e.def('"mask" in ',n,"?",n,".mask|0:-1")]}));case No:case Ro:return s((function(n){nt.commandType(n,"object",a,e.commandStr);var i=n.fail||"keep",r=n.zfail||"keep",o=n.zpass||"keep";return nt.commandParameter(i,ts,t+".fail",e.commandStr),nt.commandParameter(r,ts,t+".zfail",e.commandStr),nt.commandParameter(o,ts,t+".zpass",e.commandStr),[t===Ro?ja:Ya,ts[i],ts[r],ts[o]]}),(function(e,n,i){var r=e.constants.stencilOps;function o(o){return nt.optional((function(){e.assert(n,'!("'+o+'" in '+i+")||("+i+"."+o+" in "+r+")","invalid "+t+"."+o+", must be one of "+Object.keys(ts))})),n.def('"',o,'" in ',i,"?",r,"[",i,".",o,"]:",Wa)}return nt.optional((function(){e.assert(n,i+"&&typeof "+i+'==="object"',"invalid "+t)})),[t===Ro?ja:Ya,o("fail"),o("zfail"),o("zpass")]}));case To:return s((function(t){nt.commandType(t,"object",a,e.commandStr);var n=0|t.factor,i=0|t.units;return nt.commandType(n,"number",a+".factor",e.commandStr),nt.commandType(i,"number",a+".units",e.commandStr),[n,i]}),(function(e,n,i){return nt.optional((function(){e.assert(n,i+"&&typeof "+i+'==="object"',"invalid "+t)})),[n.def(i,".factor|0"),n.def(i,".units|0")]}));case Eo:return s((function(t){var n=0;return"front"===t?n=Ya:"back"===t&&(n=ja),nt.command(!!n,a,e.commandStr),n}),(function(t,e,n){return nt.optional((function(){t.assert(e,n+'==="front"||'+n+'==="back"',"invalid cull.face")})),e.def(n,'==="front"?',Ya,":",ja)}));case ko:return s((function(t){return nt.command("number"==typeof t&&t>=r.lineWidthDims[0]&&t<=r.lineWidthDims[1],"invalid line width, must be a positive number between "+r.lineWidthDims[0]+" and "+r.lineWidthDims[1],e.commandStr),t}),(function(t,e,n){return nt.optional((function(){t.assert(e,"typeof "+n+'==="number"&&'+n+">="+r.lineWidthDims[0]+"&&"+n+"<="+r.lineWidthDims[1],"invalid line width")})),n}));case So:return s((function(t){return nt.commandParameter(t,ns,a,e.commandStr),ns[t]}),(function(t,e,n){return nt.optional((function(){t.assert(e,n+'==="cw"||'+n+'==="ccw"',"invalid frontFace, must be one of cw,ccw")})),e.def(n+'==="cw"?'+Fa+":"+Ba)}));case xo:return s((function(t){return nt.command(hn(t)&&4===t.length,"color.mask must be length 4 array",e.commandStr),t.map((function(t){return!!t}))}),(function(t,e,n){return nt.optional((function(){t.assert(e,t.shared.isArrayLike+"("+n+")&&"+n+".length===4","invalid color.mask")})),kt(4,(function(t){return"!!"+n+"["+t+"]"}))}));case Ao:return s((function(t){nt.command("object"==typeof t&&t,a,e.commandStr);var n="value"in t?t.value:1,i=!!t.invert;return nt.command("number"==typeof n&&n>=0&&n<=1,"sample.coverage.value must be a number between 0 and 1",e.commandStr),[n,i]}),(function(t,e,n){return nt.optional((function(){t.assert(e,n+"&&typeof "+n+'==="object"',"invalid sample.coverage")})),[e.def('"value" in ',n,"?+",n,".value:1"),e.def("!!",n,".invert")]}))}})),o}function F(t,e){var n=t.static,i=t.dynamic,r={};return Object.keys(n).forEach((function(t){var i,o=n[t];if("number"==typeof o||"boolean"==typeof o)i=ss((function(){return o}));else if("function"==typeof o){var a=o._reglType;"texture2d"===a||"textureCube"===a?i=ss((function(t){return t.link(o)})):"framebuffer"===a||"framebufferCube"===a?(nt.command(o.color.length>0,'missing color attachment for framebuffer sent to uniform "'+t+'"',e.commandStr),i=ss((function(t){return t.link(o.color[0])}))):nt.commandRaise('invalid data for uniform "'+t+'"',e.commandStr)}else hn(o)?i=ss((function(e){return e.global.def("[",kt(o.length,(function(n){return nt.command("number"==typeof o[n]||"boolean"==typeof o[n],"invalid uniform "+t,e.commandStr),o[n]})),"]")})):nt.commandRaise('invalid or missing data for uniform "'+t+'"',e.commandStr);i.value=o,r[t]=i})),Object.keys(i).forEach((function(t){var e=i[t];r[t]=ls(e,(function(t,n){return t.invoke(n,e)}))})),r}function B(t,e){var i=t.static,r=t.dynamic,a={};return Object.keys(i).forEach((function(t){var r=i[t],s=n.id(t),l=new g;if(is(r))l.state=io,l.buffer=o.getBuffer(o.create(r,aa,!1,!0)),l.type=0;else{var u=o.getBuffer(r);if(u)l.state=io,l.buffer=u,l.type=0;else if(nt.command("object"==typeof r&&r,"invalid data for attribute "+t,e.commandStr),"constant"in r){var c=r.constant;l.buffer="null",l.state=ro,"number"==typeof c?l.x=c:(nt.command(hn(c)&&c.length>0&&c.length<=4,"invalid constant for attribute "+t,e.commandStr),eo.forEach((function(t,e){e<c.length&&(l[t]=c[e])})))}else{u=is(r.buffer)?o.getBuffer(o.create(r.buffer,aa,!1,!0)):o.getBuffer(r.buffer),nt.command(!!u,'missing buffer for attribute "'+t+'"',e.commandStr);var h=0|r.offset;nt.command(h>=0,'invalid offset for attribute "'+t+'"',e.commandStr);var d=0|r.stride;nt.command(d>=0&&d<256,'invalid stride for attribute "'+t+'", must be integer betweeen [0, 255]',e.commandStr);var f=0|r.size;nt.command(!("size"in r)||f>0&&f<=4,'invalid size for attribute "'+t+'", must be 1,2,3,4',e.commandStr);var p=!!r.normalized,m=0;"type"in r&&(nt.commandParameter(r.type,Pe,"invalid type for attribute "+t,e.commandStr),m=Pe[r.type]);var v=0|r.divisor;"divisor"in r&&(nt.command(0===v||y,'cannot specify divisor for attribute "'+t+'", instancing not supported',e.commandStr),nt.command(v>=0,'invalid divisor for attribute "'+t+'"',e.commandStr)),nt.optional((function(){var n=e.commandStr,i=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(r).forEach((function(e){nt.command(i.indexOf(e)>=0,'unknown parameter "'+e+'" for attribute pointer "'+t+'" (valid parameters are '+i+")",n)}))})),l.buffer=u,l.state=io,l.size=f,l.normalized=p,l.type=m||u.dtype,l.offset=h,l.stride=d,l.divisor=v}}a[t]=ss((function(t,e){var n=t.attribCache;if(s in n)return n[s];var i={isStream:!1};return Object.keys(l).forEach((function(t){i[t]=l[t]})),l.buffer&&(i.buffer=t.link(l.buffer),i.type=i.type||i.buffer+".dtype"),n[s]=i,i}))})),Object.keys(r).forEach((function(t){var e=r[t];function n(n,i){var r=n.invoke(i,e),o=n.shared,a=n.constants,s=o.isBufferArgs,l=o.buffer;nt.optional((function(){n.assert(i,r+"&&(typeof "+r+'==="object"||typeof '+r+'==="function")&&('+s+"("+r+")||"+l+".getBuffer("+r+")||"+l+".getBuffer("+r+".buffer)||"+s+"("+r+'.buffer)||("constant" in '+r+"&&(typeof "+r+'.constant==="number"||'+o.isArrayLike+"("+r+".constant))))",'invalid dynamic attribute "'+t+'"')}));var u={isStream:i.def(!1)},c=new g;c.state=io,Object.keys(c).forEach((function(t){u[t]=i.def(""+c[t])}));var h=u.buffer,d=u.type;function f(t){i(u[t],"=",r,".",t,"|0;")}return i("if(",s,"(",r,")){",u.isStream,"=true;",h,"=",l,".createStream(",aa,",",r,");",d,"=",h,".dtype;","}else{",h,"=",l,".getBuffer(",r,");","if(",h,"){",d,"=",h,".dtype;",'}else if("constant" in ',r,"){",u.state,"=",ro,";","if(typeof "+r+'.constant === "number"){',u[eo[0]],"=",r,".constant;",eo.slice(1).map((function(t){return u[t]})).join("="),"=0;","}else{",eo.map((function(t,e){return u[t]+"="+r+".constant.length>"+e+"?"+r+".constant["+e+"]:0;"})).join(""),"}}else{","if(",s,"(",r,".buffer)){",h,"=",l,".createStream(",aa,",",r,".buffer);","}else{",h,"=",l,".getBuffer(",r,".buffer);","}",d,'="type" in ',r,"?",a.glTypes,"[",r,".type]:",h,".dtype;",u.normalized,"=!!",r,".normalized;"),f("size"),f("offset"),f("stride"),f("divisor"),i("}}"),i.exit("if(",u.isStream,"){",l,".destroyStream(",h,");","}"),u}a[t]=ls(e,n)})),a}function z(t,e){var n=t.static,i=t.dynamic;if(Ko in n){var r=n[Ko];return null!==r&&null===c.getVAO(r)&&(r=c.createVAO(r)),ss((function(t){return t.link(c.getVAO(r))}))}if(Ko in i){var o=i[Ko];return ls(o,(function(t,e){var n=t.invoke(e,o);return e.def(t.shared.vao+".getVAO("+n+")")}))}return null}function H(t){var e=t.static,n=t.dynamic,i={};return Object.keys(e).forEach((function(t){var n=e[t];i[t]=ss((function(t,e){return"number"==typeof n||"boolean"==typeof n?""+n:t.link(n)}))})),Object.keys(n).forEach((function(t){var e=n[t];i[t]=ls(e,(function(t,n){return t.invoke(n,e)}))})),i}function G(t,e,n,r,o){var a=t.static,s=t.dynamic;nt.optional((function(){var t=[zo,Ho,Go,Wo,Uo,Xo,Vo,qo,Bo,Ko].concat(x);function e(e){Object.keys(e).forEach((function(e){nt.command(t.indexOf(e)>=0,'unknown parameter "'+e+'"',o.commandStr)}))}e(a),e(s)}));var l=N(t,e),u=P(t,o),h=I(t,u,o),d=Y(t,o),f=j(t,o),p=R(t,o,l);function m(t){var e=h[t];e&&(f[t]=e)}m(Fo),m(S(jo));var g=Object.keys(f).length>0,v={framebuffer:u,draw:d,shader:p,state:f,dirty:g,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(v.profile=O(t,o),v.uniforms=F(n,o),v.drawVAO=v.scopeVAO=z(t,o),!v.drawVAO&&p.program&&!l&&i.angle_instanced_arrays){var y=!0,b=p.program.attributes.map((function(t){var n=e.static[t];return y=y&&!!n,n}));if(y&&b.length>0){var _=c.getVAO(c.createVAO(b));v.drawVAO=new os(null,null,null,(function(t,e){return t.link(_)})),v.useVAO=!0}}return l?v.useVAO=!0:v.attributes=B(e,o),v.context=H(r,o),v}function W(t,e,n){var i=t.shared.context,r=t.scope();Object.keys(n).forEach((function(o){e.save(i,"."+o);var a=n[o].append(t,e);Array.isArray(a)?r(i,".",o,"=[",a.join(),"];"):r(i,".",o,"=",a,";")})),e(r)}function U(t,e,n,i){var r,o=t.shared,a=o.gl,s=o.framebuffer;b&&(r=e.def(o.extensions,".webgl_draw_buffers"));var l,u=t.constants,c=u.drawBuffer,h=u.backBuffer;l=n?n.append(t,e):e.def(s,".next"),i||e("if(",l,"!==",s,".cur){"),e("if(",l,"){",a,".bindFramebuffer(",Ka,",",l,".framebuffer);"),b&&e(r,".drawBuffersWEBGL(",c,"[",l,".colorAttachments.length]);"),e("}else{",a,".bindFramebuffer(",Ka,",null);"),b&&e(r,".drawBuffersWEBGL(",h,");"),e("}",s,".cur=",l,";"),i||e("}")}function V(t,e,n){var i=t.shared,r=i.gl,o=t.current,a=t.next,s=i.current,l=i.next,u=t.cond(s,".dirty");x.forEach((function(e){var i,c,h=S(e);if(!(h in n.state))if(h in a){i=a[h],c=o[h];var d=kt(_[h].length,(function(t){return u.def(i,"[",t,"]")}));u(t.cond(d.map((function(t,e){return t+"!=="+c+"["+e+"]"})).join("||")).then(r,".",E[h],"(",d,");",d.map((function(t,e){return c+"["+e+"]="+t})).join(";"),";"))}else{i=u.def(l,".",h);var f=t.cond(i,"!==",s,".",h);u(f),h in M?f(t.cond(i).then(r,".enable(",M[h],");").else(r,".disable(",M[h],");"),s,".",h,"=",i,";"):f(r,".",E[h],"(",i,");",s,".",h,"=",i,";")}})),0===Object.keys(n.state).length&&u(s,".dirty=false;"),e(u)}function X(t,e,n,i){var r=t.shared,o=t.current,a=r.current,s=r.gl;rs(Object.keys(n)).forEach((function(r){var l=n[r];if(!i||i(l)){var u=l.append(t,e);if(M[r]){var c=M[r];as(l)?e(s,u?".enable(":".disable(",c,");"):e(t.cond(u).then(s,".enable(",c,");").else(s,".disable(",c,");")),e(a,".",r,"=",u,";")}else if(hn(u)){var h=o[r];e(s,".",E[r],"(",u,");",u.map((function(t,e){return h+"["+e+"]="+t})).join(";"),";")}else e(s,".",E[r],"(",u,");",a,".",r,"=",u,";")}}))}function q(t,e){y&&(t.instancing=e.def(t.shared.extensions,".angle_instanced_arrays"))}function K(t,e,n,i,r){var o,a,s,l=t.shared,u=t.stats,c=l.current,h=l.timer,d=n.profile;function f(){return"undefined"==typeof performance?"Date.now()":"performance.now()"}function m(t){t(o=e.def(),"=",f(),";"),"string"==typeof r?t(u,".count+=",r,";"):t(u,".count++;"),p&&(i?t(a=e.def(),"=",h,".getNumPendingQueries();"):t(h,".beginQuery(",u,");"))}function g(t){t(u,".cpuTime+=",f(),"-",o,";"),p&&(i?t(h,".pushScopeStats(",a,",",h,".getNumPendingQueries(),",u,");"):t(h,".endQuery();"))}function v(t){var n=e.def(c,".profile");e(c,".profile=",t,";"),e.exit(c,".profile=",n,";")}if(d){if(as(d))return void(d.enable?(m(e),g(e.exit),v("true")):v("false"));v(s=d.append(t,e))}else s=e.def(c,".profile");var y=t.block();m(y),e("if(",s,"){",y,"}");var b=t.block();g(b),e.exit("if(",s,"){",b,"}")}function $(t,e,n,i,r){var o=t.shared;function a(t){switch(t){case _a:case Ea:case Ta:return 2;case wa:case Sa:case Da:return 3;case xa:case ka:case La:return 4;default:return 1}}function s(n,i,r){var a=o.gl,s=e.def(n,".location"),l=e.def(o.attributes,"[",s,"]"),u=r.state,c=r.buffer,h=[r.x,r.y,r.z,r.w],d=["buffer","normalized","offset","stride"];function f(){e("if(!",l,".buffer){",a,".enableVertexAttribArray(",s,");}");var n,o=r.type;if(n=r.size?e.def(r.size,"||",i):i,e("if(",l,".type!==",o,"||",l,".size!==",n,"||",d.map((function(t){return l+"."+t+"!=="+r[t]})).join("||"),"){",a,".bindBuffer(",aa,",",c,".buffer);",a,".vertexAttribPointer(",[s,n,o,r.normalized,r.stride,r.offset],");",l,".type=",o,";",l,".size=",n,";",d.map((function(t){return l+"."+t+"="+r[t]+";"})).join(""),"}"),y){var u=r.divisor;e("if(",l,".divisor!==",u,"){",t.instancing,".vertexAttribDivisorANGLE(",[s,u],");",l,".divisor=",u,";}")}}function p(){e("if(",l,".buffer){",a,".disableVertexAttribArray(",s,");",l,".buffer=null;","}if(",eo.map((function(t,e){return l+"."+t+"!=="+h[e]})).join("||"),"){",a,".vertexAttrib4f(",s,",",h,");",eo.map((function(t,e){return l+"."+t+"="+h[e]+";"})).join(""),"}")}u===io?f():u===ro?p():(e("if(",u,"===",io,"){"),f(),e("}else{"),p(),e("}"))}i.forEach((function(i){var o,l=i.name,u=n.attributes[l];if(u){if(!r(u))return;o=u.append(t,e)}else{if(!r(us))return;var c=t.scopeAttrib(l);nt.optional((function(){t.assert(e,c+".state","missing attribute "+l)})),o={},Object.keys(new g).forEach((function(t){o[t]=e.def(c,".",t)}))}s(t.link(i),a(i.info.type),o)}))}function Z(t,e,i,r,o){for(var a,s=t.shared,l=s.gl,u=0;u<r.length;++u){var c,h=r[u],d=h.name,f=h.info.type,p=i.uniforms[d],m=t.link(h)+".location";if(p){if(!o(p))continue;if(as(p)){var g=p.value;if(nt.command(null!=g,'missing uniform "'+d+'"',t.commandStr),f===Ia||f===Na){nt.command("function"==typeof g&&(f===Ia&&("texture2d"===g._reglType||"framebuffer"===g._reglType)||f===Na&&("textureCube"===g._reglType||"framebufferCube"===g._reglType)),"invalid texture for uniform "+d,t.commandStr);var v=t.link(g._texture||g.color[0]._texture);e(l,".uniform1i(",m,",",v+".bind());"),e.exit(v,".unbind();")}else if(f===Aa||f===Oa||f===Pa){nt.optional((function(){nt.command(hn(g),"invalid matrix for uniform "+d,t.commandStr),nt.command(f===Aa&&4===g.length||f===Oa&&9===g.length||f===Pa&&16===g.length,"invalid length for matrix uniform "+d,t.commandStr)}));var y=t.global.def("new Float32Array(["+Array.prototype.slice.call(g)+"])"),b=2;f===Oa?b=3:f===Pa&&(b=4),e(l,".uniformMatrix",b,"fv(",m,",false,",y,");")}else{switch(f){case ba:nt.commandType(g,"number","uniform "+d,t.commandStr),a="1f";break;case _a:nt.command(hn(g)&&2===g.length,"uniform "+d,t.commandStr),a="2f";break;case wa:nt.command(hn(g)&&3===g.length,"uniform "+d,t.commandStr),a="3f";break;case xa:nt.command(hn(g)&&4===g.length,"uniform "+d,t.commandStr),a="4f";break;case Ca:nt.commandType(g,"boolean","uniform "+d,t.commandStr),a="1i";break;case Ma:nt.commandType(g,"number","uniform "+d,t.commandStr),a="1i";break;case Ta:case Ea:nt.command(hn(g)&&2===g.length,"uniform "+d,t.commandStr),a="2i";break;case Da:case Sa:nt.command(hn(g)&&3===g.length,"uniform "+d,t.commandStr),a="3i";break;case La:case ka:nt.command(hn(g)&&4===g.length,"uniform "+d,t.commandStr),a="4i"}e(l,".uniform",a,"(",m,",",hn(g)?Array.prototype.slice.call(g):g,");")}continue}c=p.append(t,e)}else{if(!o(us))continue;c=e.def(s.uniforms,"[",n.id(d),"]")}f===Ia?(nt(!Array.isArray(c),"must specify a scalar prop for textures"),e("if(",c,"&&",c,'._reglType==="framebuffer"){',c,"=",c,".color[0];","}")):f===Na&&(nt(!Array.isArray(c),"must specify a scalar prop for cube maps"),e("if(",c,"&&",c,'._reglType==="framebufferCube"){',c,"=",c,".color[0];","}")),nt.optional((function(){function n(n,i){t.assert(e,n,'bad data or missing for uniform "'+d+'".  '+i)}function i(t){nt(!Array.isArray(c),"must not specify an array type for uniform"),n("typeof "+c+'==="'+t+'"',"invalid type, expected "+t)}function r(e,i){Array.isArray(c)?nt(c.length===e,"must have length "+e):n(s.isArrayLike+"("+c+")&&"+c+".length==="+e,"invalid vector, should have length "+e,t.commandStr)}function o(e){nt(!Array.isArray(c),"must not specify a value type"),n("typeof "+c+'==="function"&&'+c+'._reglType==="texture'+(e===la?"2d":"Cube")+'"',"invalid texture type",t.commandStr)}switch(f){case Ma:case ba:i("number");break;case Ea:case _a:r(2,"number");break;case Sa:case wa:r(3,"number");break;case ka:case xa:case Aa:r(4,"number");break;case Ca:i("boolean");break;case Ta:r(2,"boolean");break;case Da:r(3,"boolean");break;case La:r(4,"boolean");break;case Oa:r(9,"number");break;case Pa:r(16,"number");break;case Ia:o(la);break;case Na:o(ua)}}));var _=1;switch(f){case Ia:case Na:var w=e.def(c,"._texture");e(l,".uniform1i(",m,",",w,".bind());"),e.exit(w,".unbind();");continue;case Ma:case Ca:a="1i";break;case Ea:case Ta:a="2i",_=2;break;case Sa:case Da:a="3i",_=3;break;case ka:case La:a="4i",_=4;break;case ba:a="1f";break;case _a:a="2f",_=2;break;case wa:a="3f",_=3;break;case xa:a="4f",_=4;break;case Aa:a="Matrix2fv";break;case Oa:a="Matrix3fv";break;case Pa:a="Matrix4fv"}if(e(l,".uniform",a,"(",m,","),"M"===a.charAt(0)){var x=Math.pow(f-Aa+2,2),M=t.global.def("new Float32Array(",x,")");Array.isArray(c)?e("false,(",kt(x,(function(t){return M+"["+t+"]="+c[t]})),",",M,")"):e("false,(Array.isArray(",c,")||",c," instanceof Float32Array)?",c,":(",kt(x,(function(t){return M+"["+t+"]="+c+"["+t+"]"})),",",M,")")}else _>1?e(kt(_,(function(t){return Array.isArray(c)?c[t]:c+"["+t+"]"}))):(nt(!Array.isArray(c),"uniform value must not be an array"),e(c));e(");")}}function J(t,e,n,i){var r=t.shared,o=r.gl,a=r.draw,s=i.draw;function l(){var r,l=s.elements,u=e;return l?((l.contextDep&&i.contextDynamic||l.propDep)&&(u=n),r=l.append(t,u)):r=u.def(a,".",Wo),r&&u("if("+r+")"+o+".bindBuffer("+sa+","+r+".buffer.buffer);"),r}function u(){var r,o=s.count,l=e;return o?((o.contextDep&&i.contextDynamic||o.propDep)&&(l=n),r=o.append(t,l),nt.optional((function(){o.MISSING&&t.assert(e,"false","missing vertex count"),o.DYNAMIC&&t.assert(l,r+">=0","missing vertex count")}))):(r=l.def(a,".",Vo),nt.optional((function(){t.assert(l,r+">=0","missing vertex count")}))),r}var c=l();function h(r){var o=s[r];return o?o.contextDep&&i.contextDynamic||o.propDep?o.append(t,n):o.append(t,e):e.def(a,".",r)}var d,f,p=h(Uo),m=h(Xo),g=u();if("number"==typeof g){if(0===g)return}else n("if(",g,"){"),n.exit("}");y&&(d=h(qo),f=t.instancing);var v=c+".type",b=s.elements&&as(s.elements);function _(){function t(){n(f,".drawElementsInstancedANGLE(",[p,g,v,m+"<<(("+v+"-"+no+")>>1)",d],");")}function e(){n(f,".drawArraysInstancedANGLE(",[p,m,g,d],");")}c?b?t():(n("if(",c,"){"),t(),n("}else{"),e(),n("}")):e()}function w(){function t(){n(o+".drawElements("+[p,g,v,m+"<<(("+v+"-"+no+")>>1)"]+");")}function e(){n(o+".drawArrays("+[p,m,g]+");")}c?b?t():(n("if(",c,"){"),t(),n("}else{"),e(),n("}")):e()}y&&("number"!=typeof d||d>=0)?"string"==typeof d?(n("if(",d,">0){"),_(),n("}else if(",d,"<0){"),w(),n("}")):_():w()}function Q(t,e,n,i,r){var o=A(),a=o.proc("body",r);return nt.optional((function(){o.commandStr=e.commandStr,o.command=o.link(e.commandStr)})),y&&(o.instancing=a.def(o.shared.extensions,".angle_instanced_arrays")),t(o,a,n,i),o.compile().body}function tt(t,e,n,i){q(t,e),n.useVAO?n.drawVAO?e(t.shared.vao,".setVAO(",n.drawVAO.append(t,e),");"):e(t.shared.vao,".setVAO(",t.shared.vao,".targetVAO);"):(e(t.shared.vao,".setVAO(null);"),$(t,e,n,i.attributes,(function(){return!0}))),Z(t,e,n,i.uniforms,(function(){return!0})),J(t,e,e,n)}function et(t,e){var n=t.proc("draw",1);q(t,n),W(t,n,e.context),U(t,n,e.framebuffer),V(t,n,e),X(t,n,e.state),K(t,n,e,!1,!0);var i=e.shader.progVar.append(t,n);if(n(t.shared.gl,".useProgram(",i,".program);"),e.shader.program)tt(t,n,e,e.shader.program);else{n(t.shared.vao,".setVAO(null);");var r=t.global.def("{}"),o=n.def(i,".id"),a=n.def(r,"[",o,"]");n(t.cond(a).then(a,".call(this,a0);").else(a,"=",r,"[",o,"]=",t.link((function(n){return Q(tt,t,e,n,1)})),"(",i,");",a,".call(this,a0);"))}Object.keys(e.state).length>0&&n(t.shared.current,".dirty=true;")}function it(t,e,n,i){function r(){return!0}t.batchId="a1",q(t,e),$(t,e,n,i.attributes,r),Z(t,e,n,i.uniforms,r),J(t,e,e,n)}function rt(t,e,n,i){q(t,e);var r=n.contextDep,o=e.def(),a="a0",s="a1",l=e.def();t.shared.props=l,t.batchId=o;var u=t.scope(),c=t.scope();function h(t){return t.contextDep&&r||t.propDep}function d(t){return!h(t)}if(e(u.entry,"for(",o,"=0;",o,"<",s,";++",o,"){",l,"=",a,"[",o,"];",c,"}",u.exit),n.needsContext&&W(t,c,n.context),n.needsFramebuffer&&U(t,c,n.framebuffer),X(t,c,n.state,h),n.profile&&h(n.profile)&&K(t,c,n,!1,!0),i)n.useVAO?n.drawVAO?h(n.drawVAO)?c(t.shared.vao,".setVAO(",n.drawVAO.append(t,c),");"):u(t.shared.vao,".setVAO(",n.drawVAO.append(t,u),");"):u(t.shared.vao,".setVAO(",t.shared.vao,".targetVAO);"):(u(t.shared.vao,".setVAO(null);"),$(t,u,n,i.attributes,d),$(t,c,n,i.attributes,h)),Z(t,u,n,i.uniforms,d),Z(t,c,n,i.uniforms,h),J(t,u,c,n);else{var f=t.global.def("{}"),p=n.shader.progVar.append(t,c),m=c.def(p,".id"),g=c.def(f,"[",m,"]");c(t.shared.gl,".useProgram(",p,".program);","if(!",g,"){",g,"=",f,"[",m,"]=",t.link((function(e){return Q(it,t,n,e,2)})),"(",p,");}",g,".call(this,a0[",o,"],",o,");")}}function ot(t,e){var n=t.proc("batch",2);t.batchId="0",q(t,n);var i=!1,r=!0;Object.keys(e.context).forEach((function(t){i=i||e.context[t].propDep})),i||(W(t,n,e.context),r=!1);var o=e.framebuffer,a=!1;function s(t){return t.contextDep&&i||t.propDep}o?(o.propDep?i=a=!0:o.contextDep&&i&&(a=!0),a||U(t,n,o)):U(t,n,null),e.state.viewport&&e.state.viewport.propDep&&(i=!0),V(t,n,e),X(t,n,e.state,(function(t){return!s(t)})),e.profile&&s(e.profile)||K(t,n,e,!1,"a1"),e.contextDep=i,e.needsContext=r,e.needsFramebuffer=a;var l=e.shader.progVar;if(l.contextDep&&i||l.propDep)rt(t,n,e,null);else{var u=l.append(t,n);if(n(t.shared.gl,".useProgram(",u,".program);"),e.shader.program)rt(t,n,e,e.shader.program);else{n(t.shared.vao,".setVAO(null);");var c=t.global.def("{}"),h=n.def(u,".id"),d=n.def(c,"[",h,"]");n(t.cond(d).then(d,".call(this,a0,a1);").else(d,"=",c,"[",h,"]=",t.link((function(n){return Q(rt,t,e,n,2)})),"(",u,");",d,".call(this,a0,a1);"))}}Object.keys(e.state).length>0&&n(t.shared.current,".dirty=true;")}function at(t,e){var i=t.proc("scope",3);t.batchId="a2";var r=t.shared,o=r.current;function a(n){var o=e.shader[n];o&&i.set(r.shader,"."+n,o.append(t,i))}W(t,i,e.context),e.framebuffer&&e.framebuffer.append(t,i),rs(Object.keys(e.state)).forEach((function(n){var o=e.state[n].append(t,i);hn(o)?o.forEach((function(e,r){i.set(t.next[n],"["+r+"]",e)})):i.set(r.next,"."+n,o)})),K(t,i,e,!0,!0),[Wo,Xo,Vo,qo,Uo].forEach((function(n){var o=e.draw[n];o&&i.set(r.draw,"."+n,""+o.append(t,i))})),Object.keys(e.uniforms).forEach((function(o){var a=e.uniforms[o].append(t,i);Array.isArray(a)&&(a="["+a.join()+"]"),i.set(r.uniforms,"["+n.id(o)+"]",a)})),Object.keys(e.attributes).forEach((function(n){var r=e.attributes[n].append(t,i),o=t.scopeAttrib(n);Object.keys(new g).forEach((function(t){i.set(o,"."+t,r[t])}))})),e.scopeVAO&&i.set(r.vao,".targetVAO",e.scopeVAO.append(t,i)),a(Ho),a(Go),Object.keys(e.state).length>0&&(i(o,".dirty=true;"),i.exit(o,".dirty=true;")),i("a1(",t.shared.context,",a0,",t.batchId,");")}function st(t){if("object"==typeof t&&!hn(t)){for(var e=Object.keys(t),n=0;n<e.length;++n)if(pt.isDynamic(t[e[n]]))return!0;return!1}}function lt(t,e,n){var i=e.static[n];if(i&&st(i)){var r=t.global,o=Object.keys(i),a=!1,s=!1,l=!1,u=t.global.def("{}");o.forEach((function(e){var n=i[e];if(pt.isDynamic(n)){"function"==typeof n&&(n=i[e]=pt.unbox(n));var o=ls(n,null);a=a||o.thisDep,l=l||o.propDep,s=s||o.contextDep}else{switch(r(u,".",e,"="),typeof n){case"number":r(n);break;case"string":r('"',n,'"');break;case"object":Array.isArray(n)&&r("[",n.join(),"]");break;default:r(t.link(n))}r(";")}})),e.dynamic[n]=new pt.DynamicVariable(uo,{thisDep:a,contextDep:s,propDep:l,ref:u,append:c}),delete e.static[n]}function c(t,e){o.forEach((function(n){var r=i[n];if(pt.isDynamic(r)){var o=t.invoke(e,r);e(u,".",n,"=",o,";")}}))}}function ut(t,n,i,r,o){var a=A();a.stats=a.link(o),Object.keys(n.static).forEach((function(t){lt(a,n,t)})),oa.forEach((function(e){lt(a,t,e)}));var s=G(t,n,i,r,a);return et(a,s),at(a,s),ot(a,s),e(a.compile(),{destroy:function(){s.shader.program.destroy()}})}return{next:w,current:_,procs:function(){var t=A(),e=t.proc("poll"),n=t.proc("refresh"),o=t.block();e(o),n(o);var a,s=t.shared,l=s.gl,u=s.next,c=s.current;o(c,".dirty=false;"),U(t,e),U(t,n,null,!0),y&&(a=t.link(y)),i.oes_vertex_array_object&&n(t.link(i.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var h=0;h<r.maxAttributes;++h){var d=n.def(s.attributes,"[",h,"]"),f=t.cond(d,".buffer");f.then(l,".enableVertexAttribArray(",h,");",l,".bindBuffer(",aa,",",d,".buffer.buffer);",l,".vertexAttribPointer(",h,",",d,".size,",d,".type,",d,".normalized,",d,".stride,",d,".offset);").else(l,".disableVertexAttribArray(",h,");",l,".vertexAttrib4f(",h,",",d,".x,",d,".y,",d,".z,",d,".w);",d,".buffer=null;"),n(f),y&&n(a,".vertexAttribDivisorANGLE(",h,",",d,".divisor);")}return n(t.shared.vao,".currentVAO=null;",t.shared.vao,".setVAO(",t.shared.vao,".targetVAO);"),Object.keys(M).forEach((function(i){var r=M[i],a=o.def(u,".",i),s=t.block();s("if(",a,"){",l,".enable(",r,")}else{",l,".disable(",r,")}",c,".",i,"=",a,";"),n(s),e("if(",a,"!==",c,".",i,"){",s,"}")})),Object.keys(E).forEach((function(i){var r,a,s=E[i],h=_[i],d=t.block();if(d(l,".",s,"("),hn(h)){var f=h.length;r=t.global.def(u,".",i),a=t.global.def(c,".",i),d(kt(f,(function(t){return r+"["+t+"]"})),");",kt(f,(function(t){return a+"["+t+"]="+r+"["+t+"];"})).join("")),e("if(",kt(f,(function(t){return r+"["+t+"]!=="+a+"["+t+"]"})).join("||"),"){",d,"}")}else r=o.def(u,".",i),a=o.def(c,".",i),d(r,");",c,".",i,"=",r,";"),e("if(",r,"!==",a,"){",d,"}");n(d)})),t.compile()}(),compile:ut}}function hs(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var ds=34918,fs=34919,ps=35007,ms=function(t,e){if(!e.ext_disjoint_timer_query)return null;var n=[];function i(){return n.pop()||e.ext_disjoint_timer_query.createQueryEXT()}function r(t){n.push(t)}var o=[];function a(t){var n=i();e.ext_disjoint_timer_query.beginQueryEXT(ps,n),o.push(n),f(o.length-1,o.length,t)}function s(){e.ext_disjoint_timer_query.endQueryEXT(ps)}function l(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var u=[];function c(){return u.pop()||new l}function h(t){u.push(t)}var d=[];function f(t,e,n){var i=c();i.startQueryIndex=t,i.endQueryIndex=e,i.sum=0,i.stats=n,d.push(i)}var p=[],m=[];function g(){var t,n,i=o.length;if(0!==i){m.length=Math.max(m.length,i+1),p.length=Math.max(p.length,i+1),p[0]=0,m[0]=0;var a=0;for(t=0,n=0;n<o.length;++n){var s=o[n];e.ext_disjoint_timer_query.getQueryObjectEXT(s,fs)?(a+=e.ext_disjoint_timer_query.getQueryObjectEXT(s,ds),r(s)):o[t++]=s,p[n+1]=a,m[n+1]=t}for(o.length=t,t=0,n=0;n<d.length;++n){var l=d[n],u=l.startQueryIndex,c=l.endQueryIndex;l.sum+=p[c]-p[u];var f=m[u],g=m[c];g===f?(l.stats.gpuTime+=l.sum/1e6,h(l)):(l.startQueryIndex=f,l.endQueryIndex=g,d[t++]=l)}d.length=t}}return{beginQuery:a,endQuery:s,pushScopeStats:f,update:g,getNumPendingQueries:function(){return o.length},clear:function(){n.push.apply(n,o);for(var t=0;t<n.length;t++)e.ext_disjoint_timer_query.deleteQueryEXT(n[t]);o.length=0,n.length=0},restore:function(){o.length=0,n.length=0}}},gs=16384,vs=256,ys=1024,bs=34962,_s="webglcontextlost",ws="webglcontextrestored",xs=1,Ms=2,Es=3;function Ss(t,e){for(var n=0;n<t.length;++n)if(t[n]===e)return n;return-1}function ks(t){var n=Et(t);if(!n)return null;var i=n.gl,r=i.getContextAttributes(),o=i.isContextLost(),a=St(i,n);if(!a)return null;var s=vt(),l=hs(),u=a.extensions,c=ms(i,u),h=gt(),d=i.drawingBufferWidth,f=i.drawingBufferHeight,p={tick:0,time:0,viewportWidth:d,viewportHeight:f,framebufferWidth:d,framebufferHeight:f,drawingBufferWidth:d,drawingBufferHeight:f,pixelRatio:n.pixelRatio},m={},g={elements:null,primitive:4,count:-1,offset:0,instances:-1},v=xe(i,u),y=Ue(i,l,n,_),b=zr(i,u,v,l,y);function _(t){return b.destroyBuffer(t)}var w=an(i,u,y,l),x=Vr(i,s,l,n),M=Ki(i,u,v,(function(){k.procs.poll()}),p,l,n),E=ur(i,u,v,l,n),S=Yr(i,u,v,M,E,l),k=cs(i,s,u,v,y,w,M,S,m,b,x,g,p,c,n),C=Zr(i,S,k.procs.poll,p,r,u,v),T=k.next,D=i.canvas,L=[],A=[],O=[],P=[n.onDestroy],I=null;function N(){if(0===L.length)return c&&c.update(),void(I=null);I=mt.next(N),X();for(var t=L.length-1;t>=0;--t){var e=L[t];e&&e(p,null,0)}i.flush(),c&&c.update()}function R(){!I&&L.length>0&&(I=mt.next(N))}function Y(){I&&(mt.cancel(N),I=null)}function j(t){t.preventDefault(),o=!0,Y(),A.forEach((function(t){t()}))}function F(t){i.getError(),o=!1,a.restore(),x.restore(),y.restore(),M.restore(),E.restore(),S.restore(),b.restore(),c&&c.restore(),k.procs.refresh(),R(),O.forEach((function(t){t()}))}function B(){L.length=0,Y(),D&&(D.removeEventListener(_s,j),D.removeEventListener(ws,F)),x.clear(),S.clear(),E.clear(),M.clear(),w.clear(),y.clear(),b.clear(),c&&c.clear(),P.forEach((function(t){t()}))}function z(t){function n(t){var n=e({},t);function i(t){if(t in n){var e=n[t];delete n[t],Object.keys(e).forEach((function(i){n[t+"."+i]=e[i]}))}}return delete n.uniforms,delete n.attributes,delete n.context,delete n.vao,"stencil"in n&&n.stencil.op&&(n.stencil.opBack=n.stencil.opFront=n.stencil.op,delete n.stencil.op),i("blend"),i("depth"),i("cull"),i("stencil"),i("polygonOffset"),i("scissor"),i("sample"),"vao"in t&&(n.vao=t.vao),n}function i(t,e){var n={},i={};return Object.keys(t).forEach((function(r){var o=t[r];if(pt.isDynamic(o))i[r]=pt.unbox(o,r);else{if(e&&Array.isArray(o))for(var a=0;a<o.length;++a)if(pt.isDynamic(o[a]))return void(i[r]=pt.unbox(o,r));n[r]=o}})),{dynamic:i,static:n}}nt(!!t,"invalid args to regl({...})"),nt.type(t,"object","invalid args to regl({...})");var r=i(t.context||{},!0),a=i(t.uniforms||{},!0),s=i(t.attributes||{},!1),l=i(n(t),!1),u={gpuTime:0,cpuTime:0,count:0},c=k.compile(l,s,a,r,u),h=c.draw,d=c.batch,f=c.scope,p=[];function m(t){for(;p.length<t;)p.push(null);return p}function g(t,e){var n;if(o&&nt.raise("context lost"),"function"==typeof t)return f.call(this,null,t,0);if("function"==typeof e)if("number"==typeof t)for(n=0;n<t;++n)f.call(this,null,e,n);else{if(!Array.isArray(t))return f.call(this,t,e,0);for(n=0;n<t.length;++n)f.call(this,t[n],e,n)}else if("number"==typeof t){if(t>0)return d.call(this,m(0|t),0|t)}else{if(!Array.isArray(t))return h.call(this,t);if(t.length)return d.call(this,t,t.length)}}return e(g,{stats:u,destroy:function(){c.destroy()}})}D&&(D.addEventListener(_s,j,!1),D.addEventListener(ws,F,!1));var H=S.setFBO=z({framebuffer:pt.define.call(null,xs,"framebuffer")});function G(t,e){var n=0;k.procs.poll();var r=e.color;r&&(i.clearColor(+r[0]||0,+r[1]||0,+r[2]||0,+r[3]||0),n|=gs),"depth"in e&&(i.clearDepth(+e.depth),n|=vs),"stencil"in e&&(i.clearStencil(0|e.stencil),n|=ys),nt(!!n,"called regl.clear with no buffer specified"),i.clear(n)}function W(t){if(nt("object"==typeof t&&t,"regl.clear() takes an object as input"),"framebuffer"in t)if(t.framebuffer&&"framebufferCube"===t.framebuffer_reglType)for(var n=0;n<6;++n)H(e({framebuffer:t.framebuffer.faces[n]},t),G);else H(t,G);else G(null,t)}function U(t){function e(){var e=Ss(L,t);function n(){var t=Ss(L,n);L[t]=L[L.length-1],L.length-=1,L.length<=0&&Y()}nt(e>=0,"cannot cancel a frame twice"),L[e]=n}return nt.type(t,"function","regl.frame() callback must be a function"),L.push(t),R(),{cancel:e}}function V(){var t=T.viewport,e=T.scissor_box;t[0]=t[1]=e[0]=e[1]=0,p.viewportWidth=p.framebufferWidth=p.drawingBufferWidth=t[2]=e[2]=i.drawingBufferWidth,p.viewportHeight=p.framebufferHeight=p.drawingBufferHeight=t[3]=e[3]=i.drawingBufferHeight}function X(){p.tick+=1,p.time=K(),V(),k.procs.poll()}function q(){M.refresh(),V(),k.procs.refresh(),c&&c.update()}function K(){return(gt()-h)/1e3}function $(t,e){var n;switch(nt.type(e,"function","listener callback must be a function"),t){case"frame":return U(e);case"lost":n=A;break;case"restore":n=O;break;case"destroy":n=P;break;default:nt.raise("invalid event, must be one of frame,lost,restore,destroy")}return n.push(e),{cancel:function(){for(var t=0;t<n.length;++t)if(n[t]===e)return n[t]=n[n.length-1],void n.pop()}}}q();var Z=e(z,{clear:W,prop:pt.define.bind(null,xs),context:pt.define.bind(null,Ms),this:pt.define.bind(null,Es),draw:z({}),buffer:function(t){return y.create(t,bs,!1,!1)},elements:function(t){return w.create(t,!1)},texture:M.create2D,cube:M.createCube,renderbuffer:E.create,framebuffer:S.create,framebufferCube:S.createCube,vao:b.createVAO,attributes:r,frame:U,on:$,limits:v,hasExtension:function(t){return v.extensions.indexOf(t.toLowerCase())>=0},read:C,destroy:B,_gl:i,_refresh:q,poll:function(){X(),c&&c.update()},now:K,stats:l});return n.onDone(null,Z),Z}return ks}()},86851:(t,e,n)=>{"use strict";var i=n(89594),r=Array.prototype.concat,o=Array.prototype.slice,a=t.exports=function(t){for(var e=[],n=0,a=t.length;n<a;n++){var s=t[n];i(s)?e=r.call(e,o.call(s)):e.push(s)}return e};a.wrap=function(t){return function(){return t(a(arguments))}}},89594:t=>{t.exports=function(t){return!(!t||"string"==typeof t)&&(t instanceof Array||Array.isArray(t)||t.length>=0&&(t.splice instanceof Function||Object.getOwnPropertyDescriptor(t,t.length-1)&&"String"!==t.constructor.name))}},17621:(t,e,n)=>{var i;!function(r){var o=/^\s+/,a=/\s+$/,s=0,l=r.round,u=r.min,c=r.max,h=r.random;function d(t,e){if(e=e||{},(t=t||"")instanceof d)return t;if(!(this instanceof d))return new d(t,e);var n=function(t){var e={r:0,g:0,b:0},n=1,i=null,s=null,l=null,h=!1,d=!1;"string"==typeof t&&(t=function(t){t=t.replace(o,"").replace(a,"").toLowerCase();var e,n=!1;if(L[t])t=L[t],n=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};if(e=G.rgb.exec(t))return{r:e[1],g:e[2],b:e[3]};if(e=G.rgba.exec(t))return{r:e[1],g:e[2],b:e[3],a:e[4]};if(e=G.hsl.exec(t))return{h:e[1],s:e[2],l:e[3]};if(e=G.hsla.exec(t))return{h:e[1],s:e[2],l:e[3],a:e[4]};if(e=G.hsv.exec(t))return{h:e[1],s:e[2],v:e[3]};if(e=G.hsva.exec(t))return{h:e[1],s:e[2],v:e[3],a:e[4]};if(e=G.hex8.exec(t))return{r:N(e[1]),g:N(e[2]),b:N(e[3]),a:F(e[4]),format:n?"name":"hex8"};if(e=G.hex6.exec(t))return{r:N(e[1]),g:N(e[2]),b:N(e[3]),format:n?"name":"hex"};if(e=G.hex4.exec(t))return{r:N(e[1]+""+e[1]),g:N(e[2]+""+e[2]),b:N(e[3]+""+e[3]),a:F(e[4]+""+e[4]),format:n?"name":"hex8"};if(e=G.hex3.exec(t))return{r:N(e[1]+""+e[1]),g:N(e[2]+""+e[2]),b:N(e[3]+""+e[3]),format:n?"name":"hex"};return!1}(t));"object"==typeof t&&(W(t.r)&&W(t.g)&&W(t.b)?(f=t.r,p=t.g,m=t.b,e={r:255*P(f,255),g:255*P(p,255),b:255*P(m,255)},h=!0,d="%"===String(t.r).substr(-1)?"prgb":"rgb"):W(t.h)&&W(t.s)&&W(t.v)?(i=Y(t.s),s=Y(t.v),e=function(t,e,n){t=6*P(t,360),e=P(e,100),n=P(n,100);var i=r.floor(t),o=t-i,a=n*(1-e),s=n*(1-o*e),l=n*(1-(1-o)*e),u=i%6;return{r:255*[n,s,a,a,l,n][u],g:255*[l,n,n,s,a,a][u],b:255*[a,a,l,n,n,s][u]}}(t.h,i,s),h=!0,d="hsv"):W(t.h)&&W(t.s)&&W(t.l)&&(i=Y(t.s),l=Y(t.l),e=function(t,e,n){var i,r,o;function a(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}if(t=P(t,360),e=P(e,100),n=P(n,100),0===e)i=r=o=n;else{var s=n<.5?n*(1+e):n+e-n*e,l=2*n-s;i=a(l,s,t+1/3),r=a(l,s,t),o=a(l,s,t-1/3)}return{r:255*i,g:255*r,b:255*o}}(t.h,i,l),h=!0,d="hsl"),t.hasOwnProperty("a")&&(n=t.a));var f,p,m;return n=O(n),{ok:h,format:t.format||d,r:u(255,c(e.r,0)),g:u(255,c(e.g,0)),b:u(255,c(e.b,0)),a:n}}(t);this._originalInput=t,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=l(100*this._a)/100,this._format=e.format||n.format,this._gradientType=e.gradientType,this._r<1&&(this._r=l(this._r)),this._g<1&&(this._g=l(this._g)),this._b<1&&(this._b=l(this._b)),this._ok=n.ok,this._tc_id=s++}function f(t,e,n){t=P(t,255),e=P(e,255),n=P(n,255);var i,r,o=c(t,e,n),a=u(t,e,n),s=(o+a)/2;if(o==a)i=r=0;else{var l=o-a;switch(r=s>.5?l/(2-o-a):l/(o+a),o){case t:i=(e-n)/l+(e<n?6:0);break;case e:i=(n-t)/l+2;break;case n:i=(t-e)/l+4}i/=6}return{h:i,s:r,l:s}}function p(t,e,n){t=P(t,255),e=P(e,255),n=P(n,255);var i,r,o=c(t,e,n),a=u(t,e,n),s=o,l=o-a;if(r=0===o?0:l/o,o==a)i=0;else{switch(o){case t:i=(e-n)/l+(e<n?6:0);break;case e:i=(n-t)/l+2;break;case n:i=(t-e)/l+4}i/=6}return{h:i,s:r,v:s}}function m(t,e,n,i){var r=[R(l(t).toString(16)),R(l(e).toString(16)),R(l(n).toString(16))];return i&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}function g(t,e,n,i){return[R(j(i)),R(l(t).toString(16)),R(l(e).toString(16)),R(l(n).toString(16))].join("")}function v(t,e){e=0===e?0:e||10;var n=d(t).toHsl();return n.s-=e/100,n.s=I(n.s),d(n)}function y(t,e){e=0===e?0:e||10;var n=d(t).toHsl();return n.s+=e/100,n.s=I(n.s),d(n)}function b(t){return d(t).desaturate(100)}function _(t,e){e=0===e?0:e||10;var n=d(t).toHsl();return n.l+=e/100,n.l=I(n.l),d(n)}function w(t,e){e=0===e?0:e||10;var n=d(t).toRgb();return n.r=c(0,u(255,n.r-l(-e/100*255))),n.g=c(0,u(255,n.g-l(-e/100*255))),n.b=c(0,u(255,n.b-l(-e/100*255))),d(n)}function x(t,e){e=0===e?0:e||10;var n=d(t).toHsl();return n.l-=e/100,n.l=I(n.l),d(n)}function M(t,e){var n=d(t).toHsl(),i=(n.h+e)%360;return n.h=i<0?360+i:i,d(n)}function E(t){var e=d(t).toHsl();return e.h=(e.h+180)%360,d(e)}function S(t){var e=d(t).toHsl(),n=e.h;return[d(t),d({h:(n+120)%360,s:e.s,l:e.l}),d({h:(n+240)%360,s:e.s,l:e.l})]}function k(t){var e=d(t).toHsl(),n=e.h;return[d(t),d({h:(n+90)%360,s:e.s,l:e.l}),d({h:(n+180)%360,s:e.s,l:e.l}),d({h:(n+270)%360,s:e.s,l:e.l})]}function C(t){var e=d(t).toHsl(),n=e.h;return[d(t),d({h:(n+72)%360,s:e.s,l:e.l}),d({h:(n+216)%360,s:e.s,l:e.l})]}function T(t,e,n){e=e||6,n=n||30;var i=d(t).toHsl(),r=360/n,o=[d(t)];for(i.h=(i.h-(r*e>>1)+720)%360;--e;)i.h=(i.h+r)%360,o.push(d(i));return o}function D(t,e){e=e||6;for(var n=d(t).toHsv(),i=n.h,r=n.s,o=n.v,a=[],s=1/e;e--;)a.push(d({h:i,s:r,v:o})),o=(o+s)%1;return a}d.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},getLuminance:function(){var t,e,n,i=this.toRgb();return t=i.r/255,e=i.g/255,n=i.b/255,.2126*(t<=.03928?t/12.92:r.pow((t+.055)/1.055,2.4))+.7152*(e<=.03928?e/12.92:r.pow((e+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:r.pow((n+.055)/1.055,2.4))},setAlpha:function(t){return this._a=O(t),this._roundA=l(100*this._a)/100,this},toHsv:function(){var t=p(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=p(this._r,this._g,this._b),e=l(360*t.h),n=l(100*t.s),i=l(100*t.v);return 1==this._a?"hsv("+e+", "+n+"%, "+i+"%)":"hsva("+e+", "+n+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var t=f(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=f(this._r,this._g,this._b),e=l(360*t.h),n=l(100*t.s),i=l(100*t.l);return 1==this._a?"hsl("+e+", "+n+"%, "+i+"%)":"hsla("+e+", "+n+"%, "+i+"%, "+this._roundA+")"},toHex:function(t){return m(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return function(t,e,n,i,r){var o=[R(l(t).toString(16)),R(l(e).toString(16)),R(l(n).toString(16)),R(j(i))];if(r&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1))return o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0);return o.join("")}(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:l(this._r),g:l(this._g),b:l(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+l(this._r)+", "+l(this._g)+", "+l(this._b)+")":"rgba("+l(this._r)+", "+l(this._g)+", "+l(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:l(100*P(this._r,255))+"%",g:l(100*P(this._g,255))+"%",b:l(100*P(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+l(100*P(this._r,255))+"%, "+l(100*P(this._g,255))+"%, "+l(100*P(this._b,255))+"%)":"rgba("+l(100*P(this._r,255))+"%, "+l(100*P(this._g,255))+"%, "+l(100*P(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(A[m(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e="#"+g(this._r,this._g,this._b,this._a),n=e,i=this._gradientType?"GradientType = 1, ":"";if(t){var r=d(t);n="#"+g(r._r,r._g,r._b,r._a)}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+e+",endColorstr="+n+")"},toString:function(t){var e=!!t;t=t||this._format;var n=!1,i=this._a<1&&this._a>=0;return e||!i||"hex"!==t&&"hex6"!==t&&"hex3"!==t&&"hex4"!==t&&"hex8"!==t&&"name"!==t?("rgb"===t&&(n=this.toRgbString()),"prgb"===t&&(n=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(n=this.toHexString()),"hex3"===t&&(n=this.toHexString(!0)),"hex4"===t&&(n=this.toHex8String(!0)),"hex8"===t&&(n=this.toHex8String()),"name"===t&&(n=this.toName()),"hsl"===t&&(n=this.toHslString()),"hsv"===t&&(n=this.toHsvString()),n||this.toHexString()):"name"===t&&0===this._a?this.toName():this.toRgbString()},clone:function(){return d(this.toString())},_applyModification:function(t,e){var n=t.apply(null,[this].concat([].slice.call(e)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(_,arguments)},brighten:function(){return this._applyModification(w,arguments)},darken:function(){return this._applyModification(x,arguments)},desaturate:function(){return this._applyModification(v,arguments)},saturate:function(){return this._applyModification(y,arguments)},greyscale:function(){return this._applyModification(b,arguments)},spin:function(){return this._applyModification(M,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(T,arguments)},complement:function(){return this._applyCombination(E,arguments)},monochromatic:function(){return this._applyCombination(D,arguments)},splitcomplement:function(){return this._applyCombination(C,arguments)},triad:function(){return this._applyCombination(S,arguments)},tetrad:function(){return this._applyCombination(k,arguments)}},d.fromRatio=function(t,e){if("object"==typeof t){var n={};for(var i in t)t.hasOwnProperty(i)&&(n[i]="a"===i?t[i]:Y(t[i]));t=n}return d(t,e)},d.equals=function(t,e){return!(!t||!e)&&d(t).toRgbString()==d(e).toRgbString()},d.random=function(){return d.fromRatio({r:h(),g:h(),b:h()})},d.mix=function(t,e,n){n=0===n?0:n||50;var i=d(t).toRgb(),r=d(e).toRgb(),o=n/100;return d({r:(r.r-i.r)*o+i.r,g:(r.g-i.g)*o+i.g,b:(r.b-i.b)*o+i.b,a:(r.a-i.a)*o+i.a})},d.readability=function(t,e){var n=d(t),i=d(e);return(r.max(n.getLuminance(),i.getLuminance())+.05)/(r.min(n.getLuminance(),i.getLuminance())+.05)},d.isReadable=function(t,e,n){var i,r,o=d.readability(t,e);switch(r=!1,(i=function(t){var e,n;e=((t=t||{level:"AA",size:"small"}).level||"AA").toUpperCase(),n=(t.size||"small").toLowerCase(),"AA"!==e&&"AAA"!==e&&(e="AA");"small"!==n&&"large"!==n&&(n="small");return{level:e,size:n}}(n)).level+i.size){case"AAsmall":case"AAAlarge":r=o>=4.5;break;case"AAlarge":r=o>=3;break;case"AAAsmall":r=o>=7}return r},d.mostReadable=function(t,e,n){var i,r,o,a,s=null,l=0;r=(n=n||{}).includeFallbackColors,o=n.level,a=n.size;for(var u=0;u<e.length;u++)(i=d.readability(t,e[u]))>l&&(l=i,s=d(e[u]));return d.isReadable(t,s,{level:o,size:a})||!r?s:(n.includeFallbackColors=!1,d.mostReadable(t,["#fff","#000"],n))};var L=d.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},A=d.hexNames=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}(L);function O(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function P(t,e){(function(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)})(t)&&(t="100%");var n=function(t){return"string"==typeof t&&-1!=t.indexOf("%")}(t);return t=u(e,c(0,parseFloat(t))),n&&(t=parseInt(t*e,10)/100),r.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function I(t){return u(1,c(0,t))}function N(t){return parseInt(t,16)}function R(t){return 1==t.length?"0"+t:""+t}function Y(t){return t<=1&&(t=100*t+"%"),t}function j(t){return r.round(255*parseFloat(t)).toString(16)}function F(t){return N(t)/255}var B,z,H,G=(z="[\\s|\\(]+("+(B="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+B+")[,|\\s]+("+B+")\\s*\\)?",H="[\\s|\\(]+("+B+")[,|\\s]+("+B+")[,|\\s]+("+B+")[,|\\s]+("+B+")\\s*\\)?",{CSS_UNIT:new RegExp(B),rgb:new RegExp("rgb"+z),rgba:new RegExp("rgba"+H),hsl:new RegExp("hsl"+z),hsla:new RegExp("hsla"+H),hsv:new RegExp("hsv"+z),hsva:new RegExp("hsva"+H),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function W(t){return!!G.CSS_UNIT.exec(t)}t.exports?t.exports=d:void 0===(i=function(){return d}.call(e,n,e,t))||(t.exports=i)}(Math)},70655:(t,e,n)=>{"use strict";n.r(e),n.d(e,{__extends:()=>r,__assign:()=>o,__rest:()=>a,__decorate:()=>s,__param:()=>l,__metadata:()=>u,__awaiter:()=>c,__generator:()=>h,__createBinding:()=>d,__exportStar:()=>f,__values:()=>p,__read:()=>m,__spread:()=>g,__spreadArrays:()=>v,__spreadArray:()=>y,__await:()=>b,__asyncGenerator:()=>_,__asyncDelegator:()=>w,__asyncValues:()=>x,__makeTemplateObject:()=>M,__importStar:()=>S,__importDefault:()=>k,__classPrivateFieldGet:()=>C,__classPrivateFieldSet:()=>T});var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)};function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},o.apply(this,arguments)};function a(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}function s(t,e,n,i){var r,o=arguments.length,a=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(o<3?r(a):o>3?r(e,n,a):r(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}function l(t,e){return function(n,i){e(n,i,t)}}function u(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function c(t,e,n,i){return new(n||(n=Promise))((function(r,o){function a(t){try{l(i.next(t))}catch(t){o(t)}}function s(t){try{l(i.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((i=i.apply(t,e||[])).next())}))}function h(t,e){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var d=Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]};function f(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||d(e,t,n)}function p(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function m(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)a.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return a}function g(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(m(arguments[e]));return t}function v(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i}function y(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}function b(t){return this instanceof b?(this.v=t,this):new b(t)}function _(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(t,e||[]),o=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(t){r[t]&&(i[t]=function(e){return new Promise((function(n,i){o.push([t,e,n,i])>1||s(t,e)}))})}function s(t,e){try{(n=r[t](e)).value instanceof b?Promise.resolve(n.value.v).then(l,u):c(o[0][2],n)}catch(t){c(o[0][3],t)}var n}function l(t){s("next",t)}function u(t){s("throw",t)}function c(t,e){t(e),o.shift(),o.length&&s(o[0][0],o[0][1])}}function w(t){var e,n;return e={},i("next"),i("throw",(function(t){throw t})),i("return"),e[Symbol.iterator]=function(){return this},e;function i(i,r){e[i]=t[i]?function(e){return(n=!n)?{value:b(t[i](e)),done:"return"===i}:r?r(e):e}:r}}function x(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=p(t),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(n){e[n]=t[n]&&function(e){return new Promise((function(i,r){(function(t,e,n,i){Promise.resolve(i).then((function(e){t({value:e,done:n})}),e)})(i,r,(e=t[n](e)).done,e.value)}))}}}function M(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var E=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e};function S(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&d(e,t,n);return E(e,t),e}function k(t){return t&&t.__esModule?t:{default:t}}function C(t,e,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(t):i?i.value:e.get(t)}function T(t,e,n,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(t,n):r?r.value=n:e.set(t,n),n}},30404:function(t,e,n){!function(t){var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{};function i(t){var e={exports:{}};return t(e,e.exports),e.exports}var r=function(t){return t&&t.Math==Math&&t},o=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof e&&e)||function(){return this}()||Function("return this")(),a=function(t){try{return!!t()}catch(t){return!0}},s=!a((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),l={}.propertyIsEnumerable,u=Object.getOwnPropertyDescriptor,c={f:u&&!l.call({1:2},1)?function(t){var e=u(this,t);return!!e&&e.enumerable}:l},h=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},d={}.toString,f=function(t){return d.call(t).slice(8,-1)},p="".split,m=a((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==f(t)?p.call(t,""):Object(t)}:Object,g=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},v=function(t){return m(g(t))},y=function(t){return"object"==typeof t?null!==t:"function"==typeof t},b=function(t,e){if(!y(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!y(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!y(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!y(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")},_={}.hasOwnProperty,w=function(t,e){return _.call(t,e)},x=o.document,M=y(x)&&y(x.createElement),E=function(t){return M?x.createElement(t):{}},S=!s&&!a((function(){return 7!=Object.defineProperty(E("div"),"a",{get:function(){return 7}}).a})),k=Object.getOwnPropertyDescriptor,C={f:s?k:function(t,e){if(t=v(t),e=b(e,!0),S)try{return k(t,e)}catch(t){}if(w(t,e))return h(!c.f.call(t,e),t[e])}},T=/#|\.prototype\./,D=function(t,e){var n=A[L(t)];return n==P||n!=O&&("function"==typeof e?a(e):!!e)},L=D.normalize=function(t){return String(t).replace(T,".").toLowerCase()},A=D.data={},O=D.NATIVE="N",P=D.POLYFILL="P",I=D,N={},R=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t},Y=function(t,e,n){if(R(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)}}return function(){return t.apply(e,arguments)}},j=function(t){if(!y(t))throw TypeError(String(t)+" is not an object");return t},F=Object.defineProperty,B={f:s?F:function(t,e,n){if(j(t),e=b(e,!0),j(n),S)try{return F(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},z=s?function(t,e,n){return B.f(t,e,h(1,n))}:function(t,e,n){return t[e]=n,t},H=C.f,G=function(t){var e=function(e,n,i){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,i)}return t.apply(this,arguments)};return e.prototype=t.prototype,e},W=function(t,e){var n,i,r,a,s,l,u,c,h=t.target,d=t.global,f=t.stat,p=t.proto,m=d?o:f?o[h]:(o[h]||{}).prototype,g=d?N:N[h]||(N[h]={}),v=g.prototype;for(r in e)n=!I(d?r:h+(f?".":"#")+r,t.forced)&&m&&w(m,r),s=g[r],n&&(l=t.noTargetGet?(c=H(m,r))&&c.value:m[r]),a=n&&l?l:e[r],n&&typeof s==typeof a||(u=t.bind&&n?Y(a,o):t.wrap&&n?G(a):p&&"function"==typeof a?Y(Function.call,a):a,(t.sham||a&&a.sham||s&&s.sham)&&z(u,"sham",!0),g[r]=u,p&&(w(N,i=h+"Prototype")||z(N,i,{}),N[i][r]=a,t.real&&v&&!v[r]&&z(v,r,a)))},U=Array.isArray||function(t){return"Array"==f(t)},V=Math.ceil,X=Math.floor,q=function(t){return isNaN(t=+t)?0:(t>0?X:V)(t)},K=Math.min,$=function(t){return t>0?K(q(t),9007199254740991):0},Z=function(t,e,n,i,r,o,a,s){for(var l,u=r,c=0,h=!!a&&Y(a,s,3);c<i;){if(c in n){if(l=h?h(n[c],c,e):n[c],o>0&&U(l))u=Z(t,e,l,$(l.length),u,o-1)-1;else{if(u>=9007199254740991)throw TypeError("Exceed the acceptable array length");t[u]=l}u++}c++}return u},J=Z,Q=function(t){return Object(g(t))},tt="__core-js_shared__",et=o[tt]||function(t,e){try{z(o,t,e)}catch(n){o[t]=e}return e}(tt,{}),nt=i((function(t){(t.exports=function(t,e){return et[t]||(et[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.7.0",mode:"pure",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})})),it=0,rt=Math.random(),ot=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++it+rt).toString(36)},at=!!Object.getOwnPropertySymbols&&!a((function(){return!String(Symbol())})),st=at&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,lt=nt("wks"),ut=o.Symbol,ct=st?ut:ut&&ut.withoutSetter||ot,ht=function(t){return w(lt,t)||(at&&w(ut,t)?lt[t]=ut[t]:lt[t]=ct("Symbol."+t)),lt[t]},dt=ht("species"),ft=function(t,e){var n;return U(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!U(n.prototype)?y(n)&&null===(n=n[dt])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)};W({target:"Array",proto:!0},{flatMap:function(t){var e,n=Q(this),i=$(n.length);return R(t),(e=ft(n,0)).length=J(e,n,n,i,0,1,t,arguments.length>1?arguments[1]:void 0),e}});var pt,mt,gt=function(t){return N[t+"Prototype"]},vt=gt("Array").flatMap,yt=Array.prototype,bt=function(t){var e=t.flatMap;return t===yt||t instanceof Array&&e===yt.flatMap?vt:e},_t=[].push,wt=function(t){var e=1==t,n=2==t,i=3==t,r=4==t,o=6==t,a=5==t||o;return function(s,l,u,c){for(var h,d,f=Q(s),p=m(f),g=Y(l,u,3),v=$(p.length),y=0,b=c||ft,_=e?b(s,v):n?b(s,0):void 0;v>y;y++)if((a||y in p)&&(d=g(h=p[y],y,f),t))if(e)_[y]=d;else if(d)switch(t){case 3:return!0;case 5:return h;case 6:return y;case 2:_t.call(_,h)}else if(r)return!1;return o?-1:i||r?r:_}},xt={forEach:wt(0),map:wt(1),filter:wt(2),some:wt(3),every:wt(4),find:wt(5),findIndex:wt(6)},Mt=function(t){return"function"==typeof t?t:void 0},Et=function(t,e){return arguments.length<2?Mt(N[t])||Mt(o[t]):N[t]&&N[t][e]||o[t]&&o[t][e]},St=Et("navigator","userAgent")||"",kt=o.process,Ct=kt&&kt.versions,Tt=Ct&&Ct.v8;Tt?mt=(pt=Tt.split("."))[0]+pt[1]:St&&(!(pt=St.match(/Edge\/(\d+)/))||pt[1]>=74)&&(pt=St.match(/Chrome\/(\d+)/))&&(mt=pt[1]);var Dt=mt&&+mt,Lt=ht("species"),At=function(t){return Dt>=51||!a((function(){var e=[];return(e.constructor={})[Lt]=function(){return{foo:1}},1!==e[t](Boolean).foo}))},Ot=Object.defineProperty,Pt={},It=function(t){throw t},Nt=function(t,e){if(w(Pt,t))return Pt[t];e||(e={});var n=[][t],i=!!w(e,"ACCESSORS")&&e.ACCESSORS,r=w(e,0)?e[0]:It,o=w(e,1)?e[1]:void 0;return Pt[t]=!!n&&!a((function(){if(i&&!s)return!0;var t={length:-1};i?Ot(t,1,{enumerable:!0,get:It}):t[1]=1,n.call(t,r,o)}))},Rt=xt.map,Yt=At("map"),jt=Nt("map");W({target:"Array",proto:!0,forced:!Yt||!jt},{map:function(t){return Rt(this,t,arguments.length>1?arguments[1]:void 0)}});var Ft=gt("Array").map,Bt=Array.prototype,zt=function(t){var e=t.map;return t===Bt||t instanceof Array&&e===Bt.map?Ft:e},Ht=xt.filter,Gt=At("filter"),Wt=Nt("filter");W({target:"Array",proto:!0,forced:!Gt||!Wt},{filter:function(t){return Ht(this,t,arguments.length>1?arguments[1]:void 0)}});var Ut=gt("Array").filter,Vt=Array.prototype,Xt=function(t){var e=t.filter;return t===Vt||t instanceof Array&&e===Vt.filter?Ut:e},qt=function(t){return function(e,n,i,r){R(n);var o=Q(e),a=m(o),s=$(o.length),l=t?s-1:0,u=t?-1:1;if(i<2)for(;;){if(l in a){r=a[l],l+=u;break}if(l+=u,t?l<0:s<=l)throw TypeError("Reduce of empty array with no initial value")}for(;t?l>=0:s>l;l+=u)l in a&&(r=n(r,a[l],l,o));return r}},Kt={left:qt(!1),right:qt(!0)},$t=function(t,e){var n=[][t];return!!n&&a((function(){n.call(null,e||function(){throw 1},1)}))},Zt="process"==f(o.process),Jt=Kt.left,Qt=$t("reduce"),te=Nt("reduce",{1:0});W({target:"Array",proto:!0,forced:!Qt||!te||!Zt&&Dt>79&&Dt<83},{reduce:function(t){return Jt(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}});var ee=gt("Array").reduce,ne=Array.prototype,ie=function(t){var e=t.reduce;return t===ne||t instanceof Array&&e===ne.reduce?ee:e},re=[].slice,oe={},ae=function(t,e,n){if(!(e in oe)){for(var i=[],r=0;r<e;r++)i[r]="a["+r+"]";oe[e]=Function("C,a","return new C("+i.join(",")+")")}return oe[e](t,n)},se=Function.bind||function(t){var e=R(this),n=re.call(arguments,1),i=function(){var r=n.concat(re.call(arguments));return this instanceof i?ae(e,r.length,r):e.apply(t,r)};return y(e.prototype)&&(i.prototype=e.prototype),i};W({target:"Function",proto:!0},{bind:se});var le=gt("Function").bind,ue=Function.prototype,ce=function(t){var e=t.bind;return t===ue||t instanceof Function&&e===ue.bind?le:e},he=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};W({target:"Object",stat:!0,forced:!s,sham:!s},{defineProperty:B.f});var de=i((function(t){var e=N.Object,n=t.exports=function(t,n,i){return e.defineProperty(t,n,i)};e.defineProperty.sham&&(n.sham=!0)})),fe=de;function pe(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),fe(t,i.key,i)}}var me=function(t,e,n){return e&&pe(t.prototype,e),n&&pe(t,n),t},ge=function(){function t(e,n,i){var r,o,a;he(this,t),this._source=e,this._transformers=n,this._target=i,this._listeners={add:ce(r=this._add).call(r,this),remove:ce(o=this._remove).call(o,this),update:ce(a=this._update).call(a,this)}}return me(t,[{key:"all",value:function(){return this._target.update(this._transformItems(this._source.get())),this}},{key:"start",value:function(){return this._source.on("add",this._listeners.add),this._source.on("remove",this._listeners.remove),this._source.on("update",this._listeners.update),this}},{key:"stop",value:function(){return this._source.off("add",this._listeners.add),this._source.off("remove",this._listeners.remove),this._source.off("update",this._listeners.update),this}},{key:"_transformItems",value:function(t){var e;return ie(e=this._transformers).call(e,(function(t,e){return e(t)}),t)}},{key:"_add",value:function(t,e){null!=e&&this._target.add(this._transformItems(this._source.get(e.items)))}},{key:"_update",value:function(t,e){null!=e&&this._target.update(this._transformItems(this._source.get(e.items)))}},{key:"_remove",value:function(t,e){null!=e&&this._target.remove(this._transformItems(e.oldData))}}]),t}(),ve=function(){function t(e){he(this,t),this._source=e,this._transformers=[]}return me(t,[{key:"filter",value:function(t){return this._transformers.push((function(e){return Xt(e).call(e,t)})),this}},{key:"map",value:function(t){return this._transformers.push((function(e){return zt(e).call(e,t)})),this}},{key:"flatMap",value:function(t){return this._transformers.push((function(e){return bt(e).call(e,t)})),this}},{key:"to",value:function(t){return new ge(this._source,this._transformers,t)}}]),t}(),ye=de,be=Math.max,_e=Math.min,we=function(t,e){var n=q(t);return n<0?be(n+e,0):_e(n,e)},xe=function(t){return function(e,n,i){var r,o=v(e),a=$(o.length),s=we(i,a);if(t&&n!=n){for(;a>s;)if((r=o[s++])!=r)return!0}else for(;a>s;s++)if((t||s in o)&&o[s]===n)return t||s||0;return!t&&-1}},Me={includes:xe(!0),indexOf:xe(!1)},Ee={},Se=Me.indexOf,ke=function(t,e){var n,i=v(t),r=0,o=[];for(n in i)!w(Ee,n)&&w(i,n)&&o.push(n);for(;e.length>r;)w(i,n=e[r++])&&(~Se(o,n)||o.push(n));return o},Ce=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Te=Object.keys||function(t){return ke(t,Ce)},De=s?Object.defineProperties:function(t,e){j(t);for(var n,i=Te(e),r=i.length,o=0;r>o;)B.f(t,n=i[o++],e[n]);return t};W({target:"Object",stat:!0,forced:!s,sham:!s},{defineProperties:De});var Le=i((function(t){var e=N.Object,n=t.exports=function(t,n){return e.defineProperties(t,n)};e.defineProperties.sham&&(n.sham=!0)})),Ae=Ce.concat("length","prototype"),Oe={f:Object.getOwnPropertyNames||function(t){return ke(t,Ae)}},Pe={f:Object.getOwnPropertySymbols},Ie=Et("Reflect","ownKeys")||function(t){var e=Oe.f(j(t)),n=Pe.f;return n?e.concat(n(t)):e},Ne=function(t,e,n){var i=b(e);i in t?B.f(t,i,h(0,n)):t[i]=n};W({target:"Object",stat:!0,sham:!s},{getOwnPropertyDescriptors:function(t){for(var e,n,i=v(t),r=C.f,o=Ie(i),a={},s=0;o.length>s;)void 0!==(n=r(i,e=o[s++]))&&Ne(a,e,n);return a}});var Re=N.Object.getOwnPropertyDescriptors,Ye=C.f,je=a((function(){Ye(1)}));W({target:"Object",stat:!0,forced:!s||je,sham:!s},{getOwnPropertyDescriptor:function(t,e){return Ye(v(t),e)}});var Fe,Be=i((function(t){var e=N.Object,n=t.exports=function(t,n){return e.getOwnPropertyDescriptor(t,n)};e.getOwnPropertyDescriptor.sham&&(n.sham=!0)})),ze=Et("document","documentElement"),He=nt("keys"),Ge=function(t){return He[t]||(He[t]=ot(t))},We=Ge("IE_PROTO"),Ue=function(){},Ve=function(t){return"<script>"+t+"<\/script>"},Xe=function(){try{Fe=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;Xe=Fe?function(t){t.write(Ve("")),t.close();var e=t.parentWindow.Object;return t=null,e}(Fe):((e=E("iframe")).style.display="none",ze.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(Ve("document.F=Object")),t.close(),t.F);for(var n=Ce.length;n--;)delete Xe.prototype[Ce[n]];return Xe()};Ee[We]=!0;var qe=Object.create||function(t,e){var n;return null!==t?(Ue.prototype=j(t),n=new Ue,Ue.prototype=null,n[We]=t):n=Xe(),void 0===e?n:De(n,e)},Ke=Oe.f,$e={}.toString,Ze="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Je={f:function(t){return Ze&&"[object Window]"==$e.call(t)?function(t){try{return Ke(t)}catch(t){return Ze.slice()}}(t):Ke(v(t))}},Qe=function(t,e,n,i){i&&i.enumerable?t[e]=n:z(t,e,n)},tn={f:ht},en=B.f,nn=function(t){var e=N.Symbol||(N.Symbol={});w(e,t)||en(e,t,{value:tn.f(t)})},rn={};rn[ht("toStringTag")]="z";var on="[object z]"===String(rn),an=ht("toStringTag"),sn="Arguments"==f(function(){return arguments}()),ln=on?f:function(t){var e,n,i;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),an))?n:sn?f(e):"Object"==(i=f(e))&&"function"==typeof e.callee?"Arguments":i},un=on?{}.toString:function(){return"[object "+ln(this)+"]"},cn=B.f,hn=ht("toStringTag"),dn=function(t,e,n,i){if(t){var r=n?t:t.prototype;w(r,hn)||cn(r,hn,{configurable:!0,value:e}),i&&!on&&z(r,"toString",un)}},fn=Function.toString;"function"!=typeof et.inspectSource&&(et.inspectSource=function(t){return fn.call(t)});var pn,mn,gn,vn=et.inspectSource,yn=o.WeakMap,bn="function"==typeof yn&&/native code/.test(vn(yn)),_n=o.WeakMap;if(bn){var wn=et.state||(et.state=new _n),xn=wn.get,Mn=wn.has,En=wn.set;pn=function(t,e){return e.facade=t,En.call(wn,t,e),e},mn=function(t){return xn.call(wn,t)||{}},gn=function(t){return Mn.call(wn,t)}}else{var Sn=Ge("state");Ee[Sn]=!0,pn=function(t,e){return e.facade=t,z(t,Sn,e),e},mn=function(t){return w(t,Sn)?t[Sn]:{}},gn=function(t){return w(t,Sn)}}var kn={set:pn,get:mn,has:gn,enforce:function(t){return gn(t)?mn(t):pn(t,{})},getterFor:function(t){return function(e){var n;if(!y(e)||(n=mn(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}},Cn=xt.forEach,Tn=Ge("hidden"),Dn="Symbol",Ln=ht("toPrimitive"),An=kn.set,On=kn.getterFor(Dn),Pn=Object.prototype,In=o.Symbol,Nn=Et("JSON","stringify"),Rn=C.f,Yn=B.f,jn=Je.f,Fn=c.f,Bn=nt("symbols"),zn=nt("op-symbols"),Hn=nt("string-to-symbol-registry"),Gn=nt("symbol-to-string-registry"),Wn=nt("wks"),Un=o.QObject,Vn=!Un||!Un.prototype||!Un.prototype.findChild,Xn=s&&a((function(){return 7!=qe(Yn({},"a",{get:function(){return Yn(this,"a",{value:7}).a}})).a}))?function(t,e,n){var i=Rn(Pn,e);i&&delete Pn[e],Yn(t,e,n),i&&t!==Pn&&Yn(Pn,e,i)}:Yn,qn=function(t,e){var n=Bn[t]=qe(In.prototype);return An(n,{type:Dn,tag:t,description:e}),s||(n.description=e),n},Kn=st?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof In},$n=function(t,e,n){t===Pn&&$n(zn,e,n),j(t);var i=b(e,!0);return j(n),w(Bn,i)?(n.enumerable?(w(t,Tn)&&t[Tn][i]&&(t[Tn][i]=!1),n=qe(n,{enumerable:h(0,!1)})):(w(t,Tn)||Yn(t,Tn,h(1,{})),t[Tn][i]=!0),Xn(t,i,n)):Yn(t,i,n)},Zn=function(t,e){j(t);var n=v(e),i=Te(n).concat(ei(n));return Cn(i,(function(e){s&&!Jn.call(n,e)||$n(t,e,n[e])})),t},Jn=function(t){var e=b(t,!0),n=Fn.call(this,e);return!(this===Pn&&w(Bn,e)&&!w(zn,e))&&(!(n||!w(this,e)||!w(Bn,e)||w(this,Tn)&&this[Tn][e])||n)},Qn=function(t,e){var n=v(t),i=b(e,!0);if(n!==Pn||!w(Bn,i)||w(zn,i)){var r=Rn(n,i);return!r||!w(Bn,i)||w(n,Tn)&&n[Tn][i]||(r.enumerable=!0),r}},ti=function(t){var e=jn(v(t)),n=[];return Cn(e,(function(t){w(Bn,t)||w(Ee,t)||n.push(t)})),n},ei=function(t){var e=t===Pn,n=jn(e?zn:v(t)),i=[];return Cn(n,(function(t){!w(Bn,t)||e&&!w(Pn,t)||i.push(Bn[t])})),i};if(at||(Qe((In=function(){if(this instanceof In)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=ot(t),n=function(t){this===Pn&&n.call(zn,t),w(this,Tn)&&w(this[Tn],e)&&(this[Tn][e]=!1),Xn(this,e,h(1,t))};return s&&Vn&&Xn(Pn,e,{configurable:!0,set:n}),qn(e,t)}).prototype,"toString",(function(){return On(this).tag})),Qe(In,"withoutSetter",(function(t){return qn(ot(t),t)})),c.f=Jn,B.f=$n,C.f=Qn,Oe.f=Je.f=ti,Pe.f=ei,tn.f=function(t){return qn(ht(t),t)},s&&Yn(In.prototype,"description",{configurable:!0,get:function(){return On(this).description}})),W({global:!0,wrap:!0,forced:!at,sham:!at},{Symbol:In}),Cn(Te(Wn),(function(t){nn(t)})),W({target:Dn,stat:!0,forced:!at},{for:function(t){var e=String(t);if(w(Hn,e))return Hn[e];var n=In(e);return Hn[e]=n,Gn[n]=e,n},keyFor:function(t){if(!Kn(t))throw TypeError(t+" is not a symbol");if(w(Gn,t))return Gn[t]},useSetter:function(){Vn=!0},useSimple:function(){Vn=!1}}),W({target:"Object",stat:!0,forced:!at,sham:!s},{create:function(t,e){return void 0===e?qe(t):Zn(qe(t),e)},defineProperty:$n,defineProperties:Zn,getOwnPropertyDescriptor:Qn}),W({target:"Object",stat:!0,forced:!at},{getOwnPropertyNames:ti,getOwnPropertySymbols:ei}),W({target:"Object",stat:!0,forced:a((function(){Pe.f(1)}))},{getOwnPropertySymbols:function(t){return Pe.f(Q(t))}}),Nn){var ni=!at||a((function(){var t=In();return"[null]"!=Nn([t])||"{}"!=Nn({a:t})||"{}"!=Nn(Object(t))}));W({target:"JSON",stat:!0,forced:ni},{stringify:function(t,e,n){for(var i,r=[t],o=1;arguments.length>o;)r.push(arguments[o++]);if(i=e,(y(e)||void 0!==t)&&!Kn(t))return U(e)||(e=function(t,e){if("function"==typeof i&&(e=i.call(this,t,e)),!Kn(e))return e}),r[1]=e,Nn.apply(null,r)}})}In.prototype[Ln]||z(In.prototype,Ln,In.prototype.valueOf),dn(In,Dn),Ee[Tn]=!0;var ii,ri,oi,ai=N.Object.getOwnPropertySymbols,si={},li=!a((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),ui=Ge("IE_PROTO"),ci=Object.prototype,hi=li?Object.getPrototypeOf:function(t){return t=Q(t),w(t,ui)?t[ui]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?ci:null},di=(ht("iterator"),!1);[].keys&&("next"in(oi=[].keys())?(ri=hi(hi(oi)))!==Object.prototype&&(ii=ri):di=!0),null==ii&&(ii={});var fi={IteratorPrototype:ii,BUGGY_SAFARI_ITERATORS:di},pi=fi.IteratorPrototype,mi=function(){return this},gi=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function(n,i){return j(n),function(t){if(!y(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(i),e?t.call(n,i):n.__proto__=i,n}}():void 0),vi=fi.IteratorPrototype,yi=fi.BUGGY_SAFARI_ITERATORS,bi=ht("iterator"),_i="keys",wi="values",xi="entries",Mi=function(){return this},Ei=function(t,e,n,i,r,o,a){!function(t,e,n){var i=e+" Iterator";t.prototype=qe(pi,{next:h(1,n)}),dn(t,i,!1,!0),si[i]=mi}(n,e,i);var s,l,u,c=function(t){if(t===r&&g)return g;if(!yi&&t in p)return p[t];switch(t){case _i:case wi:case xi:return function(){return new n(this,t)}}return function(){return new n(this)}},d=e+" Iterator",f=!1,p=t.prototype,m=p[bi]||p["@@iterator"]||r&&p[r],g=!yi&&m||c(r),v="Array"==e&&p.entries||m;if(v&&(s=hi(v.call(new t)),vi!==Object.prototype&&s.next&&(dn(s,d,!0,!0),si[d]=Mi)),r==wi&&m&&m.name!==wi&&(f=!0,g=function(){return m.call(this)}),a&&p[bi]!==g&&z(p,bi,g),si[e]=g,r)if(l={values:c(wi),keys:o?g:c(_i),entries:c(xi)},a)for(u in l)(yi||f||!(u in p))&&Qe(p,u,l[u]);else W({target:e,proto:!0,forced:yi||f},l);return l},Si="Array Iterator",ki=kn.set,Ci=kn.getterFor(Si);Ei(Array,"Array",(function(t,e){ki(this,{type:Si,target:v(t),index:0,kind:e})}),(function(){var t=Ci(this),e=t.target,n=t.kind,i=t.index++;return!e||i>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:i,done:!1}:"values"==n?{value:e[i],done:!1}:{value:[i,e[i]],done:!1}}),"values"),si.Arguments=si.Array;var Ti=ht("toStringTag");for(var Di in{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}){var Li=o[Di],Ai=Li&&Li.prototype;Ai&&ln(Ai)!==Ti&&z(Ai,Ti,Di),si[Di]=si.Array}var Oi=function(t){return function(e,n){var i,r,o=String(g(e)),a=q(n),s=o.length;return a<0||a>=s?t?"":void 0:(i=o.charCodeAt(a))<55296||i>56319||a+1===s||(r=o.charCodeAt(a+1))<56320||r>57343?t?o.charAt(a):i:t?o.slice(a,a+2):r-56320+(i-55296<<10)+65536}},Pi=(Oi(!1),Oi(!0)),Ii="String Iterator",Ni=kn.set,Ri=kn.getterFor(Ii);Ei(String,"String",(function(t){Ni(this,{type:Ii,string:String(t),index:0})}),(function(){var t,e=Ri(this),n=e.string,i=e.index;return i>=n.length?{value:void 0,done:!0}:(t=Pi(n,i),e.index+=t.length,{value:t,done:!1})}));var Yi=ht("iterator"),ji=function(t){if(null!=t)return t[Yi]||t["@@iterator"]||si[ln(t)]},Fi=function(t){var e=ji(t);if("function"!=typeof e)throw TypeError(String(t)+" is not iterable");return j(e.call(t))},Bi=ji,zi=function(t){var e=t.return;if(void 0!==e)return j(e.call(t)).value},Hi=function(t,e,n,i){try{return i?e(j(n)[0],n[1]):e(n)}catch(e){throw zi(t),e}},Gi=ht("iterator"),Wi=Array.prototype,Ui=function(t){return void 0!==t&&(si.Array===t||Wi[Gi]===t)},Vi=ht("iterator"),Xi=!1;try{var qi=0,Ki={next:function(){return{done:!!qi++}},return:function(){Xi=!0}};Ki[Vi]=function(){return this},Array.from(Ki,(function(){throw 2}))}catch(t){}var $i=!function(t,e){if(!Xi)return!1;var n=!1;try{var i={};i[Vi]=function(){return{next:function(){return{done:n=!0}}}},t(i)}catch(t){}return n}((function(t){Array.from(t)}));W({target:"Array",stat:!0,forced:$i},{from:function(t){var e,n,i,r,o,a,s=Q(t),l="function"==typeof this?this:Array,u=arguments.length,c=u>1?arguments[1]:void 0,h=void 0!==c,d=ji(s),f=0;if(h&&(c=Y(c,u>2?arguments[2]:void 0,2)),null==d||l==Array&&Ui(d))for(n=new l(e=$(s.length));e>f;f++)a=h?c(s[f],f):s[f],Ne(n,f,a);else for(o=(r=d.call(s)).next,n=new l;!(i=o.call(r)).done;f++)a=h?Hi(r,c,[i.value,f],!0):i.value,Ne(n,f,a);return n.length=f,n}});var Zi=N.Array.from,Ji=Zi;W({target:"Array",proto:!0},{fill:function(t){for(var e=Q(this),n=$(e.length),i=arguments.length,r=we(i>1?arguments[1]:void 0,n),o=i>2?arguments[2]:void 0,a=void 0===o?n:we(o,n);a>r;)e[r++]=t;return e}}),gt("Array").fill;var Qi=[].slice,tr=/MSIE .\./.test(St),er=function(t){return function(e,n){var i=arguments.length>2,r=i?Qi.call(arguments,2):void 0;return t(i?function(){("function"==typeof e?e:Function(e)).apply(this,r)}:e,n)}};W({global:!0,bind:!0,forced:tr},{setTimeout:er(o.setTimeout),setInterval:er(o.setInterval)});var nr=N.setTimeout,ir=Et("JSON","stringify"),rr=/[\uD800-\uDFFF]/g,or=/^[\uD800-\uDBFF]$/,ar=/^[\uDC00-\uDFFF]$/,sr=function(t,e,n){var i=n.charAt(e-1),r=n.charAt(e+1);return or.test(t)&&!ar.test(r)||ar.test(t)&&!or.test(i)?"\\u"+t.charCodeAt(0).toString(16):t},lr=a((function(){return'"\\udf06\\ud834"'!==ir("\udf06\ud834")||'"\\udead"'!==ir("\udead")}));ir&&W({target:"JSON",stat:!0,forced:lr},{stringify:function(t,e,n){var i=ir.apply(null,arguments);return"string"==typeof i?i.replace(rr,sr):i}}),N.JSON||(N.JSON={stringify:JSON.stringify});var ur=function(t,e,n){return N.JSON.stringify.apply(null,arguments)};W({target:"Object",stat:!0,sham:!s},{create:qe});var cr,hr=N.Object,dr=function(t,e){return hr.create(t,e)},fr=dr,pr=function(t,e,n){return e in t?fe(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},mr="\t\n\v\f\r \u2028\u2029\ufeff",gr="["+mr+"]",vr=RegExp("^"+gr+gr+"*"),yr=RegExp(gr+gr+"*$"),br=function(t){return function(e){var n=String(g(e));return 1&t&&(n=n.replace(vr,"")),2&t&&(n=n.replace(yr,"")),n}},_r={start:br(1),end:br(2),trim:br(3)},wr=_r.trim;W({target:"String",proto:!0,forced:(cr="trim",a((function(){return!!mr[cr]()||""!=""[cr]()||mr[cr].name!==cr})))},{trim:function(){return wr(this)}}),gt("String").trim;var xr=Me.indexOf,Mr=[].indexOf,Er=!!Mr&&1/[1].indexOf(1,-0)<0,Sr=$t("indexOf"),kr=Nt("indexOf",{ACCESSORS:!0,1:0});W({target:"Array",proto:!0,forced:Er||!Sr||!kr},{indexOf:function(t){return Er?Mr.apply(this,arguments)||0:xr(this,t,arguments.length>1?arguments[1]:void 0)}}),gt("Array").indexOf;var Cr=_r.trim,Tr=o.parseInt,Dr=/^[+-]?0[Xx]/,Lr=8!==Tr(mr+"08")||22!==Tr(mr+"0x16")?function(t,e){var n=Cr(String(t));return Tr(n,e>>>0||(Dr.test(n)?16:10))}:Tr;W({global:!0,forced:parseInt!=Lr},{parseInt:Lr});var Ar=c.f,Or=function(t){return function(e){for(var n,i=v(e),r=Te(i),o=r.length,a=0,l=[];o>a;)n=r[a++],s&&!Ar.call(i,n)||l.push(t?[n,i[n]]:i[n]);return l}},Pr=(Or(!0),Or(!1));W({target:"Object",stat:!0},{values:function(t){return Pr(t)}}),N.Object.values;var Ir=a((function(){hi(1)}));W({target:"Object",stat:!0,forced:Ir,sham:!li},{getPrototypeOf:function(t){return hi(Q(t))}});var Nr=N.Object.getPrototypeOf,Rr=Me.includes,Yr=Nt("indexOf",{ACCESSORS:!0,1:0});W({target:"Array",proto:!0,forced:!Yr},{includes:function(t){return Rr(this,t,arguments.length>1?arguments[1]:void 0)}}),gt("Array").includes;var jr=ht("match"),Fr=function(t){if(function(t){var e;return y(t)&&(void 0!==(e=t[jr])?!!e:"RegExp"==f(t))}(t))throw TypeError("The method doesn't accept regular expressions");return t},Br=ht("match");W({target:"String",proto:!0,forced:!function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[Br]=!1,"/./"[t](e)}catch(t){}}return!1}("includes")},{includes:function(t){return!!~String(g(this)).indexOf(Fr(t),arguments.length>1?arguments[1]:void 0)}}),gt("String").includes;var zr=Object.assign,Hr=Object.defineProperty,Gr=!zr||a((function(){if(s&&1!==zr({b:1},zr(Hr({},"a",{enumerable:!0,get:function(){Hr(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach((function(t){e[t]=t})),7!=zr({},t)[n]||Te(zr({},e)).join("")!=i}))?function(t,e){for(var n=Q(t),i=arguments.length,r=1,o=Pe.f,a=c.f;i>r;)for(var l,u=m(arguments[r++]),h=o?Te(u).concat(o(u)):Te(u),d=h.length,f=0;d>f;)l=h[f++],s&&!a.call(u,l)||(n[l]=u[l]);return n}:zr;W({target:"Object",stat:!0,forced:Object.assign!==Gr},{assign:Gr});var Wr=N.Object.assign,Ur=At("splice"),Vr=Nt("splice",{ACCESSORS:!0,0:0,1:2}),Xr=Math.max,qr=Math.min,Kr=9007199254740991,$r="Maximum allowed length exceeded";W({target:"Array",proto:!0,forced:!Ur||!Vr},{splice:function(t,e){var n,i,r,o,a,s,l=Q(this),u=$(l.length),c=we(t,u),h=arguments.length;if(0===h?n=i=0:1===h?(n=0,i=u-c):(n=h-2,i=qr(Xr(q(e),0),u-c)),u+n-i>Kr)throw TypeError($r);for(r=ft(l,i),o=0;o<i;o++)(a=c+o)in l&&Ne(r,o,l[a]);if(r.length=i,n<i){for(o=c;o<u-i;o++)s=o+n,(a=o+i)in l?l[s]=l[a]:delete l[s];for(o=u;o>u-i+n;o--)delete l[o-1]}else if(n>i)for(o=u-i;o>c;o--)s=o+n-1,(a=o+i-1)in l?l[s]=l[a]:delete l[s];for(o=0;o<n;o++)l[o+c]=arguments[o+2];return l.length=u-i+n,r}});var Zr=gt("Array").splice,Jr=Array.prototype,Qr=function(t){var e=t.splice;return t===Jr||t instanceof Array&&e===Jr.splice?Zr:e},to=[].reverse,eo=[1,2];W({target:"Array",proto:!0,forced:String(eo)===String(eo.reverse())},{reverse:function(){return U(this)&&(this.length=this.length),to.call(this)}});var no=gt("Array").reverse,io=Array.prototype,ro=function(t){var e=t.reverse;return t===io||t instanceof Array&&e===io.reverse?no:e},oo=xt.forEach,ao=$t("forEach"),so=Nt("forEach"),lo=ao&&so?[].forEach:function(t){return oo(this,t,arguments.length>1?arguments[1]:void 0)};W({target:"Array",proto:!0,forced:[].forEach!=lo},{forEach:lo});var uo=gt("Array").forEach,co=Array.prototype,ho={DOMTokenList:!0,NodeList:!0},fo=function(t){var e=t.forEach;return t===co||t instanceof Array&&e===co.forEach||ho.hasOwnProperty(ln(t))?uo:e};W({target:"Array",stat:!0},{isArray:U});var po=N.Array.isArray,mo=po,go=function(t){if(mo(t))return t},vo=ht("iterator"),yo=function(t){var e=Object(t);return void 0!==e[vo]||"@@iterator"in e||si.hasOwnProperty(ln(e))},bo=ht("isConcatSpreadable"),_o=9007199254740991,wo="Maximum allowed index exceeded",xo=Dt>=51||!a((function(){var t=[];return t[bo]=!1,t.concat()[0]!==t})),Mo=At("concat"),Eo=function(t){if(!y(t))return!1;var e=t[bo];return void 0!==e?!!e:U(t)};W({target:"Array",proto:!0,forced:!xo||!Mo},{concat:function(t){var e,n,i,r,o,a=Q(this),s=ft(a,0),l=0;for(e=-1,i=arguments.length;e<i;e++)if(Eo(o=-1===e?a:arguments[e])){if(l+(r=$(o.length))>_o)throw TypeError(wo);for(n=0;n<r;n++,l++)n in o&&Ne(s,l,o[n])}else{if(l>=_o)throw TypeError(wo);Ne(s,l++,o)}return s.length=l,s}}),nn("asyncIterator"),nn("hasInstance"),nn("isConcatSpreadable"),nn("iterator"),nn("match"),nn("matchAll"),nn("replace"),nn("search"),nn("species"),nn("split"),nn("toPrimitive"),nn("toStringTag"),nn("unscopables"),dn(o.JSON,"JSON",!0);var So=N.Symbol;nn("asyncDispose"),nn("dispose"),nn("observable"),nn("patternMatch"),nn("replaceAll");var ko=So,Co=function(t,e){if(void 0!==ko&&yo(Object(t))){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=Fi(t);!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}},To=Zi,Do=At("slice"),Lo=Nt("slice",{ACCESSORS:!0,0:0,1:2}),Ao=ht("species"),Oo=[].slice,Po=Math.max;W({target:"Array",proto:!0,forced:!Do||!Lo},{slice:function(t,e){var n,i,r,o=v(this),a=$(o.length),s=we(t,a),l=we(void 0===e?a:e,a);if(U(o)&&("function"!=typeof(n=o.constructor)||n!==Array&&!U(n.prototype)?y(n)&&null===(n=n[Ao])&&(n=void 0):n=void 0,n===Array||void 0===n))return Oo.call(o,s,l);for(i=new(void 0===n?Array:n)(Po(l-s,0)),r=0;s<l;s++,r++)s in o&&Ne(i,r,o[s]);return i.length=r,i}});var Io=gt("Array").slice,No=Array.prototype,Ro=function(t){var e=t.slice;return t===No||t instanceof Array&&e===No.slice?Io:e},Yo=Ro,jo=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i},Fo=function(t,e){var n;if(t){if("string"==typeof t)return jo(t,e);var i=Yo(n=Object.prototype.toString.call(t)).call(n,8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?To(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?jo(t,e):void 0}},Bo=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},zo=function(t,e){return go(t)||Co(t,e)||Fo(t,e)||Bo()};W({target:"Date",stat:!0},{now:function(){return(new Date).getTime()}}),N.Date.now;var Ho=a((function(){Te(1)}));W({target:"Object",stat:!0,forced:Ho},{keys:function(t){return Te(Q(t))}});var Go=N.Object.keys,Wo=po,Uo=tn.f("iterator"),Vo=Uo,Xo=i((function(t){function e(n){return t.exports=e="function"==typeof ko&&"symbol"==typeof Vo?function(t){return typeof t}:function(t){return t&&"function"==typeof ko&&t.constructor===ko&&t!==ko.prototype?"symbol":typeof t},e(n)}t.exports=e}));W({target:"Reflect",stat:!0},{ownKeys:Ie});var qo=N.Reflect.ownKeys,Ko=Ro,$o=function(t){if(mo(t))return jo(t)},Zo=function(t){if(void 0!==ko&&yo(Object(t)))return To(t)},Jo=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},Qo=function(t){return $o(t)||Zo(t)||Fo(t)||Jo()},ta=gt("Array").concat,ea=Array.prototype,na=function(t){var e=t.concat;return t===ea||t instanceof Array&&e===ea.concat?ta:e},ia=So,ra=i((function(t){function e(t){if(t)return function(t){for(var n in e.prototype)t[n]=e.prototype[n];return t}(t)}t.exports=e,e.prototype.on=e.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},e.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,i=this._callbacks["$"+t];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var r=0;r<i.length;r++)if((n=i[r])===e||n.fn===e){i.splice(r,1);break}return 0===i.length&&delete this._callbacks["$"+t],this},e.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(n){i=0;for(var r=(n=n.slice(0)).length;i<r;++i)n[i].apply(this,e)}return this},e.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},e.prototype.hasListeners=function(t){return!!this.listeners(t).length}}));function oa(){return(oa=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function aa(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function sa(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var la,ua="function"!=typeof Object.assign?function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var r in i)i.hasOwnProperty(r)&&(e[r]=i[r])}return e}:Object.assign,ca=["","webkit","Moz","MS","ms","o"],ha="undefined"==typeof document?{style:{}}:document.createElement("div"),da=Math.round,fa=Math.abs,pa=Date.now;function ma(t,e){for(var n,i,r=e[0].toUpperCase()+e.slice(1),o=0;o<ca.length;){if((i=(n=ca[o])?n+r:e)in t)return i;o++}}la="undefined"==typeof window?{}:window;var ga=ma(ha.style,"touchAction"),va=void 0!==ga,ya="compute",ba="auto",_a="manipulation",wa="none",xa="pan-x",Ma="pan-y",Ea=function(){if(!va)return!1;var t={},e=la.CSS&&la.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(n){return t[n]=!e||la.CSS.supports("touch-action",n)})),t}(),Sa="ontouchstart"in la,ka=void 0!==ma(la,"PointerEvent"),Ca=Sa&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),Ta="touch",Da="mouse",La=16,Aa=24,Oa=["x","y"],Pa=["clientX","clientY"];function Ia(t,e,n){var i;if(t)if(t.forEach)t.forEach(e,n);else if(void 0!==t.length)for(i=0;i<t.length;)e.call(n,t[i],i,t),i++;else for(i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i,t)}function Na(t,e){return"function"==typeof t?t.apply(e&&e[0]||void 0,e):t}function Ra(t,e){return t.indexOf(e)>-1}var Ya=function(){function t(t,e){this.manager=t,this.set(e)}var e=t.prototype;return e.set=function(t){t===ya&&(t=this.compute()),va&&this.manager.element.style&&Ea[t]&&(this.manager.element.style[ga]=t),this.actions=t.toLowerCase().trim()},e.update=function(){this.set(this.manager.options.touchAction)},e.compute=function(){var t=[];return Ia(this.manager.recognizers,(function(e){Na(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))})),function(t){if(Ra(t,wa))return wa;var e=Ra(t,xa),n=Ra(t,Ma);return e&&n?wa:e||n?e?xa:Ma:Ra(t,_a)?_a:ba}(t.join(" "))},e.preventDefaults=function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var i=this.actions,r=Ra(i,wa)&&!Ea.none,o=Ra(i,Ma)&&!Ea["pan-y"],a=Ra(i,xa)&&!Ea["pan-x"];if(r){var s=1===t.pointers.length,l=t.distance<2,u=t.deltaTime<250;if(s&&l&&u)return}if(!a||!o)return r||o&&6&n||a&&n&Aa?this.preventSrc(e):void 0}},e.preventSrc=function(t){this.manager.session.prevented=!0,t.preventDefault()},t}();function ja(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}function Fa(t){var e=t.length;if(1===e)return{x:da(t[0].clientX),y:da(t[0].clientY)};for(var n=0,i=0,r=0;r<e;)n+=t[r].clientX,i+=t[r].clientY,r++;return{x:da(n/e),y:da(i/e)}}function Ba(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:da(t.pointers[n].clientX),clientY:da(t.pointers[n].clientY)},n++;return{timeStamp:pa(),pointers:e,center:Fa(e),deltaX:t.deltaX,deltaY:t.deltaY}}function za(t,e,n){n||(n=Oa);var i=e[n[0]]-t[n[0]],r=e[n[1]]-t[n[1]];return Math.sqrt(i*i+r*r)}function Ha(t,e,n){n||(n=Oa);var i=e[n[0]]-t[n[0]],r=e[n[1]]-t[n[1]];return 180*Math.atan2(r,i)/Math.PI}function Ga(t,e){return t===e?1:fa(t)>=fa(e)?t<0?2:4:e<0?8:La}function Wa(t,e,n){return{x:e/t||0,y:n/t||0}}function Ua(t,e){var n=t.session,i=e.pointers,r=i.length;n.firstInput||(n.firstInput=Ba(e)),r>1&&!n.firstMultiple?n.firstMultiple=Ba(e):1===r&&(n.firstMultiple=!1);var o=n.firstInput,a=n.firstMultiple,s=a?a.center:o.center,l=e.center=Fa(i);e.timeStamp=pa(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=Ha(s,l),e.distance=za(s,l),function(t,e){var n=e.center,i=t.offsetDelta||{},r=t.prevDelta||{},o=t.prevInput||{};1!==e.eventType&&4!==o.eventType||(r=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},i=t.offsetDelta={x:n.x,y:n.y}),e.deltaX=r.x+(n.x-i.x),e.deltaY=r.y+(n.y-i.y)}(n,e),e.offsetDirection=Ga(e.deltaX,e.deltaY);var u,c,h=Wa(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=h.x,e.overallVelocityY=h.y,e.overallVelocity=fa(h.x)>fa(h.y)?h.x:h.y,e.scale=a?(u=a.pointers,za((c=i)[0],c[1],Pa)/za(u[0],u[1],Pa)):1,e.rotation=a?function(t,e){return Ha(e[1],e[0],Pa)+Ha(t[1],t[0],Pa)}(a.pointers,i):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,function(t,e){var n,i,r,o,a=t.lastInterval||e,s=e.timeStamp-a.timeStamp;if(8!==e.eventType&&(s>25||void 0===a.velocity)){var l=e.deltaX-a.deltaX,u=e.deltaY-a.deltaY,c=Wa(s,l,u);i=c.x,r=c.y,n=fa(c.x)>fa(c.y)?c.x:c.y,o=Ga(l,u),t.lastInterval=e}else n=a.velocity,i=a.velocityX,r=a.velocityY,o=a.direction;e.velocity=n,e.velocityX=i,e.velocityY=r,e.direction=o}(n,e);var d,f=t.element,p=e.srcEvent;ja(d=p.composedPath?p.composedPath()[0]:p.path?p.path[0]:p.target,f)&&(f=d),e.target=f}function Va(t,e,n){var i=n.pointers.length,r=n.changedPointers.length,o=1&e&&i-r==0,a=12&e&&i-r==0;n.isFirst=!!o,n.isFinal=!!a,o&&(t.session={}),n.eventType=e,Ua(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function Xa(t){return t.trim().split(/\s+/g)}function qa(t,e,n){Ia(Xa(e),(function(e){t.addEventListener(e,n,!1)}))}function Ka(t,e,n){Ia(Xa(e),(function(e){t.removeEventListener(e,n,!1)}))}function $a(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||window}var Za=function(){function t(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){Na(t.options.enable,[t])&&n.handler(e)},this.init()}var e=t.prototype;return e.handler=function(){},e.init=function(){this.evEl&&qa(this.element,this.evEl,this.domHandler),this.evTarget&&qa(this.target,this.evTarget,this.domHandler),this.evWin&&qa($a(this.element),this.evWin,this.domHandler)},e.destroy=function(){this.evEl&&Ka(this.element,this.evEl,this.domHandler),this.evTarget&&Ka(this.target,this.evTarget,this.domHandler),this.evWin&&Ka($a(this.element),this.evWin,this.domHandler)},t}();function Ja(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var i=0;i<t.length;){if(n&&t[i][n]==e||!n&&t[i]===e)return i;i++}return-1}var Qa={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},ts={2:Ta,3:"pen",4:Da,5:"kinect"},es="pointerdown",ns="pointermove pointerup pointercancel";la.MSPointerEvent&&!la.PointerEvent&&(es="MSPointerDown",ns="MSPointerMove MSPointerUp MSPointerCancel");var is=function(t){function e(){var n,i=e.prototype;return i.evEl=es,i.evWin=ns,(n=t.apply(this,arguments)||this).store=n.manager.session.pointerEvents=[],n}return aa(e,t),e.prototype.handler=function(t){var e=this.store,n=!1,i=t.type.toLowerCase().replace("ms",""),r=Qa[i],o=ts[t.pointerType]||t.pointerType,a=o===Ta,s=Ja(e,t.pointerId,"pointerId");1&r&&(0===t.button||a)?s<0&&(e.push(t),s=e.length-1):12&r&&(n=!0),s<0||(e[s]=t,this.callback(this.manager,r,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),n&&e.splice(s,1))},e}(Za);function rs(t){return Array.prototype.slice.call(t,0)}function os(t,e,n){for(var i=[],r=[],o=0;o<t.length;){var a=e?t[o][e]:t[o];Ja(r,a)<0&&i.push(t[o]),r[o]=a,o++}return n&&(i=e?i.sort((function(t,n){return t[e]>n[e]})):i.sort()),i}var as={touchstart:1,touchmove:2,touchend:4,touchcancel:8},ss="touchstart touchmove touchend touchcancel",ls=function(t){function e(){var n;return e.prototype.evTarget=ss,(n=t.apply(this,arguments)||this).targetIds={},n}return aa(e,t),e.prototype.handler=function(t){var e=as[t.type],n=us.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:Ta,srcEvent:t})},e}(Za);function us(t,e){var n,i,r=rs(t.touches),o=this.targetIds;if(3&e&&1===r.length)return o[r[0].identifier]=!0,[r,r];var a=rs(t.changedTouches),s=[],l=this.target;if(i=r.filter((function(t){return ja(t.target,l)})),1===e)for(n=0;n<i.length;)o[i[n].identifier]=!0,n++;for(n=0;n<a.length;)o[a[n].identifier]&&s.push(a[n]),12&e&&delete o[a[n].identifier],n++;return s.length?[os(i.concat(s),"identifier",!0),s]:void 0}var cs={mousedown:1,mousemove:2,mouseup:4},hs="mousedown",ds="mousemove mouseup",fs=function(t){function e(){var n,i=e.prototype;return i.evEl=hs,i.evWin=ds,(n=t.apply(this,arguments)||this).pressed=!1,n}return aa(e,t),e.prototype.handler=function(t){var e=cs[t.type];1&e&&0===t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=4),this.pressed&&(4&e&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:Da,srcEvent:t}))},e}(Za);function ps(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY},i=this.lastTouches;this.lastTouches.push(n),setTimeout((function(){var t=i.indexOf(n);t>-1&&i.splice(t,1)}),2500)}}function ms(t,e){1&t?(this.primaryTouch=e.changedPointers[0].identifier,ps.call(this,e)):12&t&&ps.call(this,e)}function gs(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var r=this.lastTouches[i],o=Math.abs(e-r.x),a=Math.abs(n-r.y);if(o<=25&&a<=25)return!0}return!1}var vs=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).handler=function(t,e,n){var r=n.pointerType===Ta,o=n.pointerType===Da;if(!(o&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)ms.call(sa(sa(i)),e,n);else if(o&&gs.call(sa(sa(i)),n))return;i.callback(t,e,n)}},i.touch=new ls(i.manager,i.handler),i.mouse=new fs(i.manager,i.handler),i.primaryTouch=null,i.lastTouches=[],i}return aa(e,t),e.prototype.destroy=function(){this.touch.destroy(),this.mouse.destroy()},e}(Za);function ys(t,e,n){return!!Array.isArray(t)&&(Ia(t,n[e],n),!0)}var bs=32,_s=1;function ws(t,e){var n=e.manager;return n?n.get(t):t}function xs(t){return 16&t?"cancel":8&t?"end":4&t?"move":2&t?"start":""}var Ms=function(){function t(t){void 0===t&&(t={}),this.options=oa({enable:!0},t),this.id=_s++,this.manager=null,this.state=1,this.simultaneous={},this.requireFail=[]}var e=t.prototype;return e.set=function(t){return ua(this.options,t),this.manager&&this.manager.touchAction.update(),this},e.recognizeWith=function(t){if(ys(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=ws(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},e.dropRecognizeWith=function(t){return ys(t,"dropRecognizeWith",this)||(t=ws(t,this),delete this.simultaneous[t.id]),this},e.requireFailure=function(t){if(ys(t,"requireFailure",this))return this;var e=this.requireFail;return-1===Ja(e,t=ws(t,this))&&(e.push(t),t.requireFailure(this)),this},e.dropRequireFailure=function(t){if(ys(t,"dropRequireFailure",this))return this;t=ws(t,this);var e=Ja(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},e.hasRequireFailures=function(){return this.requireFail.length>0},e.canRecognizeWith=function(t){return!!this.simultaneous[t.id]},e.emit=function(t){var e=this,n=this.state;function i(n){e.manager.emit(n,t)}n<8&&i(e.options.event+xs(n)),i(e.options.event),t.additionalEvent&&i(t.additionalEvent),n>=8&&i(e.options.event+xs(n))},e.tryEmit=function(t){if(this.canEmit())return this.emit(t);this.state=bs},e.canEmit=function(){for(var t=0;t<this.requireFail.length;){if(!(33&this.requireFail[t].state))return!1;t++}return!0},e.recognize=function(t){var e=ua({},t);if(!Na(this.options.enable,[this,e]))return this.reset(),void(this.state=bs);56&this.state&&(this.state=1),this.state=this.process(e),30&this.state&&this.tryEmit(e)},e.process=function(t){},e.getTouchAction=function(){},e.reset=function(){},t}(),Es=function(t){function e(e){var n;return void 0===e&&(e={}),(n=t.call(this,oa({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},e))||this).pTime=!1,n.pCenter=!1,n._timer=null,n._input=null,n.count=0,n}aa(e,t);var n=e.prototype;return n.getTouchAction=function(){return[_a]},n.process=function(t){var e=this,n=this.options,i=t.pointers.length===n.pointers,r=t.distance<n.threshold,o=t.deltaTime<n.time;if(this.reset(),1&t.eventType&&0===this.count)return this.failTimeout();if(r&&o&&i){if(4!==t.eventType)return this.failTimeout();var a=!this.pTime||t.timeStamp-this.pTime<n.interval,s=!this.pCenter||za(this.pCenter,t.center)<n.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,s&&a?this.count+=1:this.count=1,this._input=t,0==this.count%n.taps)return this.hasRequireFailures()?(this._timer=setTimeout((function(){e.state=8,e.tryEmit()}),n.interval),2):8}return bs},n.failTimeout=function(){var t=this;return this._timer=setTimeout((function(){t.state=bs}),this.options.interval),bs},n.reset=function(){clearTimeout(this._timer)},n.emit=function(){8===this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},e}(Ms),Ss=function(t){function e(e){return void 0===e&&(e={}),t.call(this,oa({pointers:1},e))||this}aa(e,t);var n=e.prototype;return n.attrTest=function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},n.process=function(t){var e=this.state,n=t.eventType,i=6&e,r=this.attrTest(t);return i&&(8&n||!r)?16|e:i||r?4&n?8|e:2&e?4|e:2:bs},e}(Ms);function ks(t){return t===La?"down":8===t?"up":2===t?"left":4===t?"right":""}var Cs=function(t){function e(e){var n;return void 0===e&&(e={}),(n=t.call(this,oa({event:"pan",threshold:10,pointers:1,direction:30},e))||this).pX=null,n.pY=null,n}aa(e,t);var n=e.prototype;return n.getTouchAction=function(){var t=this.options.direction,e=[];return 6&t&&e.push(Ma),t&Aa&&e.push(xa),e},n.directionTest=function(t){var e=this.options,n=!0,i=t.distance,r=t.direction,o=t.deltaX,a=t.deltaY;return r&e.direction||(6&e.direction?(r=0===o?1:o<0?2:4,n=o!==this.pX,i=Math.abs(t.deltaX)):(r=0===a?1:a<0?8:La,n=a!==this.pY,i=Math.abs(t.deltaY))),t.direction=r,n&&i>e.threshold&&r&e.direction},n.attrTest=function(t){return Ss.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},n.emit=function(e){this.pX=e.deltaX,this.pY=e.deltaY;var n=ks(e.direction);n&&(e.additionalEvent=this.options.event+n),t.prototype.emit.call(this,e)},e}(Ss),Ts=function(t){function e(e){return void 0===e&&(e={}),t.call(this,oa({event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},e))||this}aa(e,t);var n=e.prototype;return n.getTouchAction=function(){return Cs.prototype.getTouchAction.call(this)},n.attrTest=function(e){var n,i=this.options.direction;return 30&i?n=e.overallVelocity:6&i?n=e.overallVelocityX:i&Aa&&(n=e.overallVelocityY),t.prototype.attrTest.call(this,e)&&i&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers===this.options.pointers&&fa(n)>this.options.velocity&&4&e.eventType},n.emit=function(t){var e=ks(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)},e}(Ss),Ds=function(t){function e(e){return void 0===e&&(e={}),t.call(this,oa({event:"pinch",threshold:0,pointers:2},e))||this}aa(e,t);var n=e.prototype;return n.getTouchAction=function(){return[wa]},n.attrTest=function(e){return t.prototype.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||2&this.state)},n.emit=function(e){if(1!==e.scale){var n=e.scale<1?"in":"out";e.additionalEvent=this.options.event+n}t.prototype.emit.call(this,e)},e}(Ss),Ls=function(t){function e(e){return void 0===e&&(e={}),t.call(this,oa({event:"rotate",threshold:0,pointers:2},e))||this}aa(e,t);var n=e.prototype;return n.getTouchAction=function(){return[wa]},n.attrTest=function(e){return t.prototype.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||2&this.state)},e}(Ss),As=function(t){function e(e){var n;return void 0===e&&(e={}),(n=t.call(this,oa({event:"press",pointers:1,time:251,threshold:9},e))||this)._timer=null,n._input=null,n}aa(e,t);var n=e.prototype;return n.getTouchAction=function(){return[ba]},n.process=function(t){var e=this,n=this.options,i=t.pointers.length===n.pointers,r=t.distance<n.threshold,o=t.deltaTime>n.time;if(this._input=t,!r||!i||12&t.eventType&&!o)this.reset();else if(1&t.eventType)this.reset(),this._timer=setTimeout((function(){e.state=8,e.tryEmit()}),n.time);else if(4&t.eventType)return 8;return bs},n.reset=function(){clearTimeout(this._timer)},n.emit=function(t){8===this.state&&(t&&4&t.eventType?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=pa(),this.manager.emit(this.options.event,this._input)))},e}(Ms),Os={domEvents:!1,touchAction:ya,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Ps=[[Ls,{enable:!1}],[Ds,{enable:!1},["rotate"]],[Ts,{direction:6}],[Cs,{direction:6},["swipe"]],[Es],[Es,{event:"doubletap",taps:2},["tap"]],[As]];function Is(t,e){var n,i=t.element;i.style&&(Ia(t.options.cssProps,(function(r,o){n=ma(i.style,o),e?(t.oldCssProps[n]=i.style[n],i.style[n]=r):i.style[n]=t.oldCssProps[n]||""})),e||(t.oldCssProps={}))}var Ns=function(){function t(t,e){var n,i=this;this.options=ua({},Os,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new((n=this).options.inputClass||(ka?is:Ca?ls:Sa?vs:fs))(n,Va),this.touchAction=new Ya(this,this.options.touchAction),Is(this,!0),Ia(this.options.recognizers,(function(t){var e=i.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])}),this)}var e=t.prototype;return e.set=function(t){return ua(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},e.stop=function(t){this.session.stopped=t?2:1},e.recognize=function(t){var e=this.session;if(!e.stopped){var n;this.touchAction.preventDefaults(t);var i=this.recognizers,r=e.curRecognizer;(!r||r&&8&r.state)&&(e.curRecognizer=null,r=null);for(var o=0;o<i.length;)n=i[o],2===e.stopped||r&&n!==r&&!n.canRecognizeWith(r)?n.reset():n.recognize(t),!r&&14&n.state&&(e.curRecognizer=n,r=n),o++}},e.get=function(t){if(t instanceof Ms)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event===t)return e[n];return null},e.add=function(t){if(ys(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},e.remove=function(t){if(ys(t,"remove",this))return this;var e=this.get(t);if(t){var n=this.recognizers,i=Ja(n,e);-1!==i&&(n.splice(i,1),this.touchAction.update())}return this},e.on=function(t,e){if(void 0===t||void 0===e)return this;var n=this.handlers;return Ia(Xa(t),(function(t){n[t]=n[t]||[],n[t].push(e)})),this},e.off=function(t,e){if(void 0===t)return this;var n=this.handlers;return Ia(Xa(t),(function(t){e?n[t]&&n[t].splice(Ja(n[t],e),1):delete n[t]})),this},e.emit=function(t,e){this.options.domEvents&&function(t,e){var n=document.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var i=0;i<n.length;)n[i](e),i++}},e.destroy=function(){this.element&&Is(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},t}(),Rs={touchstart:1,touchmove:2,touchend:4,touchcancel:8},Ys="touchstart",js="touchstart touchmove touchend touchcancel",Fs=function(t){function e(){var n,i=e.prototype;return i.evTarget=Ys,i.evWin=js,(n=t.apply(this,arguments)||this).started=!1,n}return aa(e,t),e.prototype.handler=function(t){var e=Rs[t.type];if(1===e&&(this.started=!0),this.started){var n=Bs.call(this,t,e);12&e&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:Ta,srcEvent:t})}},e}(Za);function Bs(t,e){var n=rs(t.touches),i=rs(t.changedTouches);return 12&e&&(n=os(n.concat(i),"identifier",!0)),[n,i]}function zs(t,e,n){var i="DEPRECATED METHOD: "+e+"\n"+n+" AT \n";return function(){var e=new Error("get-stack-trace"),n=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",r=window.console&&(window.console.warn||window.console.log);return r&&r.call(window.console,i,n),t.apply(this,arguments)}}var Hs=zs((function(t,e,n){for(var i=Object.keys(e),r=0;r<i.length;)(!n||n&&void 0===t[i[r]])&&(t[i[r]]=e[i[r]]),r++;return t}),"extend","Use `assign`."),Gs=zs((function(t,e){return Hs(t,e,!0)}),"merge","Use `assign`.");function Ws(t,e,n){var i,r=e.prototype;(i=t.prototype=Object.create(r)).constructor=t,i._super=r,n&&ua(i,n)}function Us(t,e){return function(){return t.apply(e,arguments)}}var Vs=function(){var t=function(t,e){return void 0===e&&(e={}),new Ns(t,oa({recognizers:Ps.concat()},e))};return t.VERSION="2.0.17-rc",t.DIRECTION_ALL=30,t.DIRECTION_DOWN=La,t.DIRECTION_LEFT=2,t.DIRECTION_RIGHT=4,t.DIRECTION_UP=8,t.DIRECTION_HORIZONTAL=6,t.DIRECTION_VERTICAL=Aa,t.DIRECTION_NONE=1,t.DIRECTION_DOWN=La,t.INPUT_START=1,t.INPUT_MOVE=2,t.INPUT_END=4,t.INPUT_CANCEL=8,t.STATE_POSSIBLE=1,t.STATE_BEGAN=2,t.STATE_CHANGED=4,t.STATE_ENDED=8,t.STATE_RECOGNIZED=8,t.STATE_CANCELLED=16,t.STATE_FAILED=bs,t.Manager=Ns,t.Input=Za,t.TouchAction=Ya,t.TouchInput=ls,t.MouseInput=fs,t.PointerEventInput=is,t.TouchMouseInput=vs,t.SingleTouchInput=Fs,t.Recognizer=Ms,t.AttrRecognizer=Ss,t.Tap=Es,t.Pan=Cs,t.Swipe=Ts,t.Pinch=Ds,t.Rotate=Ls,t.Press=As,t.on=qa,t.off=Ka,t.each=Ia,t.merge=Gs,t.extend=Hs,t.bindFn=Us,t.assign=ua,t.inherit=Ws,t.bindFn=Us,t.prefixed=ma,t.toArray=rs,t.inArray=Ja,t.uniqueArray=os,t.splitStr=Xa,t.boolOrFn=Na,t.hasParent=ja,t.addEventListeners=qa,t.removeEventListeners=Ka,t.defaults=ua({},Os,{preset:Ps}),t}();function Xs(t,e){var n;if(void 0===ia||null==Bi(t)){if(Wo(t)||(n=function(t,e){var n;if(t){if("string"==typeof t)return qs(t,e);var i=Ko(n=Object.prototype.toString.call(t)).call(n,8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Ji(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?qs(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=Fi(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function qs(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var Ks=ia("DELETE");function $s(){var t=Zs.apply(void 0,arguments);return Qs(t),t}function Zs(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(e.length<2)return e[0];var i;if(e.length>2)return Zs.apply(void 0,na(i=[$s(e[0],e[1])]).call(i,Qo(Ko(e).call(e,2))));var r,o=e[0],a=e[1],s=Xs(qo(a));try{for(s.s();!(r=s.n()).done;){var l=r.value;Object.prototype.propertyIsEnumerable.call(a,l)&&(a[l]===Ks?delete o[l]:null===o[l]||null===a[l]||"object"!==Xo(o[l])||"object"!==Xo(a[l])||Wo(o[l])||Wo(a[l])?o[l]=Js(a[l]):o[l]=Zs(o[l],a[l]))}}catch(t){s.e(t)}finally{s.f()}return o}function Js(t){return Wo(t)?zt(t).call(t,(function(t){return Js(t)})):"object"===Xo(t)&&null!==t?Zs({},t):t}function Qs(t){for(var e=0,n=Go(t);e<n.length;e++){var i=n[e];t[i]===Ks?delete t[i]:"object"===Xo(t[i])&&null!==t[i]&&Qs(t[i])}}var tl="undefined"!=typeof window?window.Hammer||Vs:function(){return{on:t=function(){},off:t,destroy:t,emit:t,get:function(){return{set:t}}};var t};function el(t){var e,n=this;this._cleanupQueue=[],this.active=!1,this._dom={container:t,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push((function(){n._dom.overlay.parentNode.removeChild(n._dom.overlay)}));var i=tl(this._dom.overlay);i.on("tap",ce(e=this._onTapOverlay).call(e,this)),this._cleanupQueue.push((function(){i.destroy()}));var r=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];fo(r).call(r,(function(t){i.on(t,(function(t){t.srcEvent.stopPropagation()}))})),document&&document.body&&(this._onClick=function(e){(function(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1})(e.target,t)||n.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push((function(){document.body.removeEventListener("click",n._onClick)}))),this._escListener=function(t){("key"in t?"Escape"===t.key:27===t.keyCode)&&n.deactivate()}}ra(el.prototype),el.current=null,el.prototype.destroy=function(){var t,e;this.deactivate();var n,i=Xs(ro(t=Qr(e=this._cleanupQueue).call(e,0)).call(t));try{for(i.s();!(n=i.n()).done;)(0,n.value)()}catch(t){i.e(t)}finally{i.f()}},el.prototype.activate=function(){el.current&&el.current.deactivate(),el.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)},el.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")},el.prototype._onTapOverlay=function(t){this.activate(),t.srcEvent.stopPropagation()};var nl=Et("Reflect","construct"),il=a((function(){function t(){}return!(nl((function(){}),[],t)instanceof t)})),rl=!a((function(){nl((function(){}))})),ol=il||rl;W({target:"Reflect",stat:!0,forced:ol,sham:ol},{construct:function(t,e){R(t),j(e);var n=arguments.length<3?t:R(arguments[2]);if(rl&&!il)return nl(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var i=[null];return i.push.apply(i,e),new(se.apply(t,i))}var r=n.prototype,o=qe(y(r)?r:Object.prototype),a=Function.apply.call(t,o,e);return y(a)?a:o}});var al=N.Reflect.construct,sl=gt("Array").entries,ll=Array.prototype,ul={DOMTokenList:!0,NodeList:!0},cl=function(t){var e=t.entries;return t===ll||t instanceof Array&&e===ll.entries||ul.hasOwnProperty(ln(t))?sl:e},hl=i((function(t){var e=function(t){var e,n=Object.prototype,i=n.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function u(t,e,n,i){var r=e&&e.prototype instanceof g?e:g,o=Object.create(r.prototype),a=new T(i||[]);return o._invoke=function(t,e,n){var i=h;return function(r,o){if(i===f)throw new Error("Generator is already running");if(i===p){if("throw"===r)throw o;return L()}for(n.method=r,n.arg=o;;){var a=n.delegate;if(a){var s=S(a,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===h)throw i=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=f;var l=c(t,e,n);if("normal"===l.type){if(i=n.done?p:d,l.arg===m)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i=p,n.method="throw",n.arg=l.arg)}}}(t,n,a),o}function c(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var h="suspendedStart",d="suspendedYield",f="executing",p="completed",m={};function g(){}function v(){}function y(){}var b={};b[o]=function(){return this};var _=Object.getPrototypeOf,w=_&&_(_(D([])));w&&w!==n&&i.call(w,o)&&(b=w);var x=y.prototype=g.prototype=Object.create(b);function M(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function n(r,o,a,s){var l=c(t[r],t,o);if("throw"!==l.type){var u=l.arg,h=u.value;return h&&"object"==typeof h&&i.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(h).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var r;this._invoke=function(t,i){function o(){return new e((function(e,r){n(t,i,e,r)}))}return r=r?r.then(o,o):o()}}function S(t,n){var i=t.iterator[n.method];if(i===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,S(t,n),"throw"===n.method))return m;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var r=c(i,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,m;var o=r.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function D(t){if(t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function n(){for(;++r<t.length;)if(i.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}return{next:L}}function L(){return{value:e,done:!0}}return v.prototype=x.constructor=y,y.constructor=v,v.displayName=l(y,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,l(t,s,"GeneratorFunction")),t.prototype=Object.create(x),t},t.awrap=function(t){return{__await:t}},M(E.prototype),E.prototype[a]=function(){return this},t.AsyncIterator=E,t.async=function(e,n,i,r,o){void 0===o&&(o=Promise);var a=new E(u(e,n,i,r),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},M(x),l(x,s,"Generator"),x[o]=function(){return this},x.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var i=e.pop();if(i in t)return n.value=i,n.done=!1,n}return n.done=!0,n}},t.values=D,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(i,r){return s.type="throw",s.arg=t,n.next=i,r&&(n.method="next",n.arg=e),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=i.call(a,"catchLoc"),u=i.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),C(n),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var r=i.arg;C(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,i){return this.delegate={iterator:D(t),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=e),m}},t}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}})),dl=Uo,fl=gt("Array").values,pl=Array.prototype,ml={DOMTokenList:!0,NodeList:!0},gl=function(t){var e=t.values;return t===pl||t instanceof Array&&e===pl.values||ml.hasOwnProperty(ln(t))?fl:e},vl=[],yl=vl.sort,bl=a((function(){vl.sort(void 0)})),_l=a((function(){vl.sort(null)})),wl=$t("sort");W({target:"Array",proto:!0,forced:bl||!_l||!wl},{sort:function(t){return void 0===t?yl.call(Q(this)):yl.call(Q(this),R(t))}});var xl=gt("Array").sort,Ml=Array.prototype,El=function(t){var e=t.sort;return t===Ml||t instanceof Array&&e===Ml.sort?xl:e},Sl=gt("Array").keys,kl=Array.prototype,Cl={DOMTokenList:!0,NodeList:!0},Tl=function(t){var e=t.keys;return t===kl||t instanceof Array&&e===kl.keys||Cl.hasOwnProperty(ln(t))?Sl:e},Dl=xt.some,Ll=$t("some"),Al=Nt("some");W({target:"Array",proto:!0,forced:!Ll||!Al},{some:function(t){return Dl(this,t,arguments.length>1?arguments[1]:void 0)}});var Ol=gt("Array").some,Pl=Array.prototype,Il=function(t){var e=t.some;return t===Pl||t instanceof Array&&e===Pl.some?Ol:e},Nl=!a((function(){return Object.isExtensible(Object.preventExtensions({}))})),Rl=i((function(t){var e=B.f,n=ot("meta"),i=0,r=Object.isExtensible||function(){return!0},o=function(t){e(t,n,{value:{objectID:"O"+ ++i,weakData:{}}})},a=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!y(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!w(t,n)){if(!r(t))return"F";if(!e)return"E";o(t)}return t[n].objectID},getWeakData:function(t,e){if(!w(t,n)){if(!r(t))return!0;if(!e)return!1;o(t)}return t[n].weakData},onFreeze:function(t){return Nl&&a.REQUIRED&&r(t)&&!w(t,n)&&o(t),t}};Ee[n]=!0})),Yl=function(t,e){this.stopped=t,this.result=e},jl=function(t,e,n){var i,r,o,a,s,l,u,c=n&&n.that,h=!(!n||!n.AS_ENTRIES),d=!(!n||!n.IS_ITERATOR),f=!(!n||!n.INTERRUPTED),p=Y(e,c,1+h+f),m=function(t){return i&&zi(i),new Yl(!0,t)},g=function(t){return h?(j(t),f?p(t[0],t[1],m):p(t[0],t[1])):f?p(t,m):p(t)};if(d)i=t;else{if("function"!=typeof(r=ji(t)))throw TypeError("Target is not iterable");if(Ui(r)){for(o=0,a=$(t.length);a>o;o++)if((s=g(t[o]))&&s instanceof Yl)return s;return new Yl(!1)}i=r.call(t)}for(l=i.next;!(u=l.call(i)).done;){try{s=g(u.value)}catch(t){throw zi(i),t}if("object"==typeof s&&s&&s instanceof Yl)return s}return new Yl(!1)},Fl=function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t},Bl=B.f,zl=xt.forEach,Hl=kn.set,Gl=kn.getterFor,Wl=function(t,e,n){var i,r=-1!==t.indexOf("Map"),l=-1!==t.indexOf("Weak"),u=r?"set":"add",c=o[t],h=c&&c.prototype,d={};if(s&&"function"==typeof c&&(l||h.forEach&&!a((function(){(new c).entries().next()})))){i=e((function(e,n){Hl(Fl(e,i,t),{type:t,collection:new c}),null!=n&&jl(n,e[u],{that:e,AS_ENTRIES:r})}));var f=Gl(t);zl(["add","clear","delete","forEach","get","has","set","keys","values","entries"],(function(t){var e="add"==t||"set"==t;!(t in h)||l&&"clear"==t||z(i.prototype,t,(function(n,i){var r=f(this).collection;if(!e&&l&&!y(n))return"get"==t&&void 0;var o=r[t](0===n?0:n,i);return e?this:o}))})),l||Bl(i.prototype,"size",{configurable:!0,get:function(){return f(this).collection.size}})}else i=n.getConstructor(e,t,r,u),Rl.REQUIRED=!0;return dn(i,t,!1,!0),d[t]=i,W({global:!0,forced:!0},d),l||n.setStrong(i,t,r),i},Ul=function(t,e,n){for(var i in e)n&&n.unsafe&&t[i]?t[i]=e[i]:Qe(t,i,e[i],n);return t},Vl=ht("species"),Xl=B.f,ql=Rl.fastKey,Kl=kn.set,$l=kn.getterFor,Zl={getConstructor:function(t,e,n,i){var r=t((function(t,o){Fl(t,r,e),Kl(t,{type:e,index:qe(null),first:void 0,last:void 0,size:0}),s||(t.size=0),null!=o&&jl(o,t[i],{that:t,AS_ENTRIES:n})})),o=$l(e),a=function(t,e,n){var i,r,a=o(t),u=l(t,e);return u?u.value=n:(a.last=u={index:r=ql(e,!0),key:e,value:n,previous:i=a.last,next:void 0,removed:!1},a.first||(a.first=u),i&&(i.next=u),s?a.size++:t.size++,"F"!==r&&(a.index[r]=u)),t},l=function(t,e){var n,i=o(t),r=ql(e);if("F"!==r)return i.index[r];for(n=i.first;n;n=n.next)if(n.key==e)return n};return Ul(r.prototype,{clear:function(){for(var t=o(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,s?t.size=0:this.size=0},delete:function(t){var e=this,n=o(e),i=l(e,t);if(i){var r=i.next,a=i.previous;delete n.index[i.index],i.removed=!0,a&&(a.next=r),r&&(r.previous=a),n.first==i&&(n.first=r),n.last==i&&(n.last=a),s?n.size--:e.size--}return!!i},forEach:function(t){for(var e,n=o(this),i=Y(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.next:n.first;)for(i(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!l(this,t)}}),Ul(r.prototype,n?{get:function(t){var e=l(this,t);return e&&e.value},set:function(t,e){return a(this,0===t?0:t,e)}}:{add:function(t){return a(this,t=0===t?0:t,t)}}),s&&Xl(r.prototype,"size",{get:function(){return o(this).size}}),r},setStrong:function(t,e,n){var i=e+" Iterator",r=$l(e),o=$l(i);Ei(t,e,(function(t,e){Kl(this,{type:i,target:t,state:r(t),kind:e,last:void 0})}),(function(){for(var t=o(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),function(t){var e=Et(t),n=B.f;s&&e&&!e[Vl]&&n(e,Vl,{configurable:!0,get:function(){return this}})}(e)}},Jl=(Wl("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),Zl),N.Map),Ql=dr;W({target:"Object",stat:!0},{setPrototypeOf:gi});var tu,eu=N.Object.setPrototypeOf,nu=i((function(t){function e(n,i){return t.exports=e=eu||function(t,e){return t.__proto__=e,t},e(n,i)}t.exports=e})),iu=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Ql(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&nu(t,e)},ru=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},ou=function(t,e){return!e||"object"!==Xo(e)&&"function"!=typeof e?ru(t):e},au=Nr,su=i((function(t){function e(n){return t.exports=e=eu?au:function(t){return t.__proto__||au(t)},e(n)}t.exports=e})),lu=new Uint8Array(16);function uu(){if(!tu&&!(tu="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return tu(lu)}var cu=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function hu(t){return"string"==typeof t&&cu.test(t)}for(var du=[],fu=0;fu<256;++fu)du.push((fu+256).toString(16).substr(1));function pu(t,e,n){var i=(t=t||{}).random||(t.rng||uu)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,e){n=n||0;for(var r=0;r<16;++r)e[n+r]=i[r];return e}return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(du[t[e+0]]+du[t[e+1]]+du[t[e+2]]+du[t[e+3]]+"-"+du[t[e+4]]+du[t[e+5]]+"-"+du[t[e+6]]+du[t[e+7]]+"-"+du[t[e+8]]+du[t[e+9]]+"-"+du[t[e+10]]+du[t[e+11]]+du[t[e+12]]+du[t[e+13]]+du[t[e+14]]+du[t[e+15]]).toLowerCase();if(!hu(n))throw TypeError("Stringified UUID is invalid");return n}(i)}function mu(t){return"string"==typeof t||"number"==typeof t}var gu=function(){function t(e){he(this,t),this._queue=[],this._timeout=null,this._extended=null,this.delay=null,this.max=1/0,this.setOptions(e)}return me(t,[{key:"setOptions",value:function(t){t&&void 0!==t.delay&&(this.delay=t.delay),t&&void 0!==t.max&&(this.max=t.max),this._flushIfNeeded()}},{key:"destroy",value:function(){if(this.flush(),this._extended){for(var t=this._extended.object,e=this._extended.methods,n=0;n<e.length;n++){var i=e[n];i.original?t[i.name]=i.original:delete t[i.name]}this._extended=null}}},{key:"replace",value:function(t,e){var n=this,i=t[e];if(!i)throw new Error("Method "+e+" undefined");t[e]=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];n.queue({args:e,fn:i,context:this})}}},{key:"queue",value:function(t){"function"==typeof t?this._queue.push({fn:t}):this._queue.push(t),this._flushIfNeeded()}},{key:"_flushIfNeeded",value:function(){var t=this;this._queue.length>this.max&&this.flush(),null!=this._timeout&&(clearTimeout(this._timeout),this._timeout=null),this.queue.length>0&&"number"==typeof this.delay&&(this._timeout=nr((function(){t.flush()}),this.delay))}},{key:"flush",value:function(){var t,e;fo(t=Qr(e=this._queue).call(e,0)).call(t,(function(t){t.fn.apply(t.context||t.fn,t.args||[])}))}}],[{key:"extend",value:function(e,n){var i=new t(n);if(void 0!==e.flush)throw new Error("Target object already has a property flush");e.flush=function(){i.flush()};var r=[{name:"flush",original:void 0}];if(n&&n.replace)for(var o=0;o<n.replace.length;o++){var a=n.replace[o];r.push({name:a,original:e[a]}),i.replace(e,a)}return i._extended={object:e,methods:r},i}}]),t}(),vu=function(){function t(){he(this,t),this._subscribers={"*":[],add:[],remove:[],update:[]},this.subscribe=t.prototype.on,this.unsubscribe=t.prototype.off}return me(t,[{key:"_trigger",value:function(t,e,n){var i,r;if("*"===t)throw new Error("Cannot trigger event *");fo(i=na(r=[]).call(r,Qo(this._subscribers[t]),Qo(this._subscribers["*"]))).call(i,(function(i){i(t,e,null!=n?n:null)}))}},{key:"on",value:function(t,e){"function"==typeof e&&this._subscribers[t].push(e)}},{key:"off",value:function(t,e){var n;this._subscribers[t]=Xt(n=this._subscribers[t]).call(n,(function(t){return t!==e}))}}]),t}(),yu=(Wl("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),Zl),N.Set);function bu(t,e){var n;if(void 0===ia||null==Bi(t)){if(Wo(t)||(n=function(t,e){var n;if(t){if("string"==typeof t)return _u(t,e);var i=Ko(n=Object.prototype.toString.call(t)).call(n,8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Ji(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_u(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=Fi(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function _u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var wu=function(){function t(e){he(this,t),this._pairs=e}return me(t,[{key:dl,value:hl.mark((function t(){var e,n,i,r,o;return hl.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=bu(this._pairs),t.prev=1,e.s();case 3:if((n=e.n()).done){t.next=9;break}return i=zo(n.value,2),r=i[0],o=i[1],t.next=7,[r,o];case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),e.e(t.t0);case 14:return t.prev=14,e.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[1,11,14,17]])}))},{key:"entries",value:hl.mark((function t(){var e,n,i,r,o;return hl.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=bu(this._pairs),t.prev=1,e.s();case 3:if((n=e.n()).done){t.next=9;break}return i=zo(n.value,2),r=i[0],o=i[1],t.next=7,[r,o];case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),e.e(t.t0);case 14:return t.prev=14,e.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[1,11,14,17]])}))},{key:"keys",value:hl.mark((function t(){var e,n,i,r;return hl.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=bu(this._pairs),t.prev=1,e.s();case 3:if((n=e.n()).done){t.next=9;break}return i=zo(n.value,1),r=i[0],t.next=7,r;case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),e.e(t.t0);case 14:return t.prev=14,e.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[1,11,14,17]])}))},{key:"values",value:hl.mark((function t(){var e,n,i,r;return hl.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=bu(this._pairs),t.prev=1,e.s();case 3:if((n=e.n()).done){t.next=9;break}return i=zo(n.value,2),r=i[1],t.next=7,r;case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),e.e(t.t0);case 14:return t.prev=14,e.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[1,11,14,17]])}))},{key:"toIdArray",value:function(){var t;return zt(t=Qo(this._pairs)).call(t,(function(t){return t[0]}))}},{key:"toItemArray",value:function(){var t;return zt(t=Qo(this._pairs)).call(t,(function(t){return t[1]}))}},{key:"toEntryArray",value:function(){return Qo(this._pairs)}},{key:"toObjectMap",value:function(){var t,e=fr(null),n=bu(this._pairs);try{for(n.s();!(t=n.n()).done;){var i=zo(t.value,2),r=i[0],o=i[1];e[r]=o}}catch(t){n.e(t)}finally{n.f()}return e}},{key:"toMap",value:function(){return new Jl(this._pairs)}},{key:"toIdSet",value:function(){return new yu(this.toIdArray())}},{key:"toItemSet",value:function(){return new yu(this.toItemArray())}},{key:"cache",value:function(){return new t(Qo(this._pairs))}},{key:"distinct",value:function(t){var e,n=new yu,i=bu(this._pairs);try{for(i.s();!(e=i.n()).done;){var r=zo(e.value,2),o=r[0],a=r[1];n.add(t(a,o))}}catch(t){i.e(t)}finally{i.f()}return n}},{key:"filter",value:function(e){var n=this._pairs;return new t(pr({},dl,hl.mark((function t(){var i,r,o,a,s;return hl.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=bu(n),t.prev=1,i.s();case 3:if((r=i.n()).done){t.next=10;break}if(o=zo(r.value,2),a=o[0],s=o[1],!e(s,a)){t.next=8;break}return t.next=8,[a,s];case 8:t.next=3;break;case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),i.e(t.t0);case 15:return t.prev=15,i.f(),t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[1,12,15,18]])}))))}},{key:"forEach",value:function(t){var e,n=bu(this._pairs);try{for(n.s();!(e=n.n()).done;){var i=zo(e.value,2),r=i[0];t(i[1],r)}}catch(t){n.e(t)}finally{n.f()}}},{key:"map",value:function(e){var n=this._pairs;return new t(pr({},dl,hl.mark((function t(){var i,r,o,a,s;return hl.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=bu(n),t.prev=1,i.s();case 3:if((r=i.n()).done){t.next=9;break}return o=zo(r.value,2),a=o[0],s=o[1],t.next=7,[a,e(s,a)];case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),i.e(t.t0);case 14:return t.prev=14,i.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[1,11,14,17]])}))))}},{key:"max",value:function(t){var e=Fi(this._pairs),n=e.next();if(n.done)return null;for(var i=n.value[1],r=t(n.value[1],n.value[0]);!(n=e.next()).done;){var o=zo(n.value,2),a=o[0],s=o[1],l=t(s,a);l>r&&(r=l,i=s)}return i}},{key:"min",value:function(t){var e=Fi(this._pairs),n=e.next();if(n.done)return null;for(var i=n.value[1],r=t(n.value[1],n.value[0]);!(n=e.next()).done;){var o=zo(n.value,2),a=o[0],s=o[1],l=t(s,a);l<r&&(r=l,i=s)}return i}},{key:"reduce",value:function(t,e){var n,i=bu(this._pairs);try{for(i.s();!(n=i.n()).done;){var r=zo(n.value,2),o=r[0];e=t(e,r[1],o)}}catch(t){i.e(t)}finally{i.f()}return e}},{key:"sort",value:function(e){var n=this;return new t(pr({},dl,(function(){var t;return Fi(El(t=Qo(n._pairs)).call(t,(function(t,n){var i=zo(t,2),r=i[0],o=i[1],a=zo(n,2),s=a[0],l=a[1];return e(o,l,r,s)})))})))}}]),t}();function xu(t,e){var n=Go(t);if(ai){var i=ai(t);e&&(i=Xt(i).call(i,(function(e){return Be(t,e).enumerable}))),n.push.apply(n,i)}return n}function Mu(t){for(var e=1;e<arguments.length;e++){var n,i=null!=arguments[e]?arguments[e]:{};if(e%2)fo(n=xu(Object(i),!0)).call(n,(function(e){pr(t,e,i[e])}));else if(Re)Le(t,Re(i));else{var r;fo(r=xu(Object(i))).call(r,(function(e){ye(t,e,Be(i,e))}))}}return t}function Eu(t,e){var n;if(void 0===ia||null==Bi(t)){if(Wo(t)||(n=function(t,e){var n;if(t){if("string"==typeof t)return Su(t,e);var i=Ko(n=Object.prototype.toString.call(t)).call(n,8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Ji(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Su(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=Fi(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Su(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function ku(t){var e=function(){if("undefined"==typeof Reflect||!al)return!1;if(al.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(al(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=su(t);if(e){var r=su(this).constructor;n=al(i,arguments,r)}else n=i.apply(this,arguments);return ou(this,n)}}var Cu=function(t){iu(n,t);var e=ku(n);function n(t,i){var r;return he(this,n),(r=e.call(this))._queue=null,t&&!Wo(t)&&(i=t,t=[]),r._options=i||{},r._data=new Jl,r.length=0,r._idProp=r._options.fieldId||"id",t&&t.length&&r.add(t),r.setOptions(i),r}return me(n,[{key:"setOptions",value:function(t){t&&void 0!==t.queue&&(!1===t.queue?this._queue&&(this._queue.destroy(),this._queue=null):(this._queue||(this._queue=gu.extend(this,{replace:["add","update","remove"]})),t.queue&&"object"===Xo(t.queue)&&this._queue.setOptions(t.queue)))}},{key:"add",value:function(t,e){var n,i=this,r=[];if(Wo(t)){var o=zt(t).call(t,(function(t){return t[i._idProp]}));if(Il(o).call(o,(function(t){return i._data.has(t)})))throw new Error("A duplicate id was found in the parameter array.");for(var a=0,s=t.length;a<s;a++)n=this._addItem(t[a]),r.push(n)}else{if(!t||"object"!==Xo(t))throw new Error("Unknown dataType");n=this._addItem(t),r.push(n)}return r.length&&this._trigger("add",{items:r},e),r}},{key:"update",value:function(t,e){var n=this,i=[],r=[],o=[],a=[],s=this._idProp,l=function(t){var e=t[s];if(null!=e&&n._data.has(e)){var l=t,u=Wr({},n._data.get(e)),c=n._updateItem(l);r.push(c),a.push(l),o.push(u)}else{var h=n._addItem(t);i.push(h)}};if(Wo(t))for(var u=0,c=t.length;u<c;u++)t[u]&&"object"===Xo(t[u])?l(t[u]):console.warn("Ignoring input item, which is not an object at index "+u);else{if(!t||"object"!==Xo(t))throw new Error("Unknown dataType");l(t)}if(i.length&&this._trigger("add",{items:i},e),r.length){var h={items:r,oldData:o,data:a};this._trigger("update",h,e)}return na(i).call(i,r)}},{key:"updateOnly",value:function(t,e){var n,i=this;Wo(t)||(t=[t]);var r=zt(n=zt(t).call(t,(function(t){var e=i._data.get(t[i._idProp]);if(null==e)throw new Error("Updating non-existent items is not allowed.");return{oldData:e,update:t}}))).call(n,(function(t){var e=t.oldData,n=t.update,r=e[i._idProp],o=function(t){for(var e,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return $s.apply(void 0,na(e=[{},t]).call(e,i))}(e,n);return i._data.set(r,o),{id:r,oldData:e,updatedData:o}}));if(r.length){var o={items:zt(r).call(r,(function(t){return t.id})),oldData:zt(r).call(r,(function(t){return t.oldData})),data:zt(r).call(r,(function(t){return t.updatedData}))};return this._trigger("update",o,e),o.items}return[]}},{key:"get",value:function(t,e){var n=void 0,i=void 0,r=void 0;mu(t)?(n=t,r=e):Wo(t)?(i=t,r=e):r=t;var o,a=r&&"Object"===r.returnType?"Object":"Array",s=r&&Xt(r),l=[],u=void 0,c=void 0,h=void 0;if(null!=n)(u=this._data.get(n))&&s&&!s(u)&&(u=void 0);else if(null!=i)for(var d=0,f=i.length;d<f;d++)null==(u=this._data.get(i[d]))||s&&!s(u)||l.push(u);else for(var p,m=0,g=(c=Qo(Tl(p=this._data).call(p))).length;m<g;m++)h=c[m],null==(u=this._data.get(h))||s&&!s(u)||l.push(u);if(r&&r.order&&null==n&&this._sort(l,r.order),r&&r.fields){var v=r.fields;if(null!=n&&null!=u)u=this._filterFields(u,v);else for(var y=0,b=l.length;y<b;y++)l[y]=this._filterFields(l[y],v)}if("Object"==a){for(var _={},w=0,x=l.length;w<x;w++){var M=l[w];_[M[this._idProp]]=M}return _}return null!=n?null!==(o=u)&&void 0!==o?o:null:l}},{key:"getIds",value:function(t){var e=this._data,n=t&&Xt(t),i=t&&t.order,r=Qo(Tl(e).call(e)),o=[];if(n)if(i){for(var a=[],s=0,l=r.length;s<l;s++){var u=r[s],c=this._data.get(u);null!=c&&n(c)&&a.push(c)}this._sort(a,i);for(var h=0,d=a.length;h<d;h++)o.push(a[h][this._idProp])}else for(var f=0,p=r.length;f<p;f++){var m=r[f],g=this._data.get(m);null!=g&&n(g)&&o.push(g[this._idProp])}else if(i){for(var v=[],y=0,b=r.length;y<b;y++){var _=r[y];v.push(e.get(_))}this._sort(v,i);for(var w=0,x=v.length;w<x;w++)o.push(v[w][this._idProp])}else for(var M=0,E=r.length;M<E;M++){var S=r[M],k=e.get(S);null!=k&&o.push(k[this._idProp])}return o}},{key:"getDataSet",value:function(){return this}},{key:"forEach",value:function(t,e){var n=e&&Xt(e),i=this._data,r=Qo(Tl(i).call(i));if(e&&e.order)for(var o=this.get(e),a=0,s=o.length;a<s;a++){var l=o[a];t(l,l[this._idProp])}else for(var u=0,c=r.length;u<c;u++){var h=r[u],d=this._data.get(h);null==d||n&&!n(d)||t(d,h)}}},{key:"map",value:function(t,e){for(var n=e&&Xt(e),i=[],r=this._data,o=Qo(Tl(r).call(r)),a=0,s=o.length;a<s;a++){var l=o[a],u=this._data.get(l);null==u||n&&!n(u)||i.push(t(u,l))}return e&&e.order&&this._sort(i,e.order),i}},{key:"_filterFields",value:function(t,e){var n;return t?ie(n=Wo(e)?e:Go(e)).call(n,(function(e,n){return e[n]=t[n],e}),{}):t}},{key:"_sort",value:function(t,e){if("string"==typeof e){var n=e;El(t).call(t,(function(t,e){var i=t[n],r=e[n];return i>r?1:i<r?-1:0}))}else{if("function"!=typeof e)throw new TypeError("Order must be a function or a string");El(t).call(t,e)}}},{key:"remove",value:function(t,e){for(var n=[],i=[],r=Wo(t)?t:[t],o=0,a=r.length;o<a;o++){var s=this._remove(r[o]);if(s){var l=s[this._idProp];null!=l&&(n.push(l),i.push(s))}}return n.length&&this._trigger("remove",{items:n,oldData:i},e),n}},{key:"_remove",value:function(t){var e;if(mu(t)?e=t:t&&"object"===Xo(t)&&(e=t[this._idProp]),null!=e&&this._data.has(e)){var n=this._data.get(e)||null;return this._data.delete(e),--this.length,n}return null}},{key:"clear",value:function(t){for(var e,n=Qo(Tl(e=this._data).call(e)),i=[],r=0,o=n.length;r<o;r++)i.push(this._data.get(n[r]));return this._data.clear(),this.length=0,this._trigger("remove",{items:n,oldData:i},t),n}},{key:"max",value:function(t){var e,n,i=null,r=null,o=Eu(gl(e=this._data).call(e));try{for(o.s();!(n=o.n()).done;){var a=n.value,s=a[t];"number"==typeof s&&(null==r||s>r)&&(i=a,r=s)}}catch(t){o.e(t)}finally{o.f()}return i||null}},{key:"min",value:function(t){var e,n,i=null,r=null,o=Eu(gl(e=this._data).call(e));try{for(o.s();!(n=o.n()).done;){var a=n.value,s=a[t];"number"==typeof s&&(null==r||s<r)&&(i=a,r=s)}}catch(t){o.e(t)}finally{o.f()}return i||null}},{key:"distinct",value:function(t){for(var e=this._data,n=Qo(Tl(e).call(e)),i=[],r=0,o=0,a=n.length;o<a;o++){for(var s=n[o],l=e.get(s)[t],u=!1,c=0;c<r;c++)if(i[c]==l){u=!0;break}u||void 0===l||(i[r]=l,r++)}return i}},{key:"_addItem",value:function(t){var e=function(t,e){return null==t[e]&&(t[e]=pu()),t}(t,this._idProp),n=e[this._idProp];if(this._data.has(n))throw new Error("Cannot add item: item with id "+n+" already exists");return this._data.set(n,e),++this.length,n}},{key:"_updateItem",value:function(t){var e=t[this._idProp];if(null==e)throw new Error("Cannot update item: item has no id (item: "+ur(t)+")");var n=this._data.get(e);if(!n)throw new Error("Cannot update item: no item with id "+e+" found");return this._data.set(e,Mu(Mu({},n),t)),e}},{key:"stream",value:function(t){if(t){var e=this._data;return new wu(pr({},dl,hl.mark((function n(){var i,r,o,a;return hl.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:i=Eu(t),n.prev=1,i.s();case 3:if((r=i.n()).done){n.next=11;break}if(o=r.value,null==(a=e.get(o))){n.next=9;break}return n.next=9,[o,a];case 9:n.next=3;break;case 11:n.next=16;break;case 13:n.prev=13,n.t0=n.catch(1),i.e(n.t0);case 16:return n.prev=16,i.f(),n.finish(16);case 19:case"end":return n.stop()}}),n,null,[[1,13,16,19]])}))))}var n;return new wu(pr({},dl,ce(n=cl(this._data)).call(n,this._data)))}},{key:"idProp",get:function(){return this._idProp}}]),n}(vu);function Tu(t,e){var n;if(void 0===ia||null==Bi(t)){if(Wo(t)||(n=function(t,e){var n;if(t){if("string"==typeof t)return Du(t,e);var i=Ko(n=Object.prototype.toString.call(t)).call(n,8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Ji(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Du(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=Fi(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Du(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Lu(t){var e=function(){if("undefined"==typeof Reflect||!al)return!1;if(al.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(al(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=su(t);if(e){var r=su(this).constructor;n=al(i,arguments,r)}else n=i.apply(this,arguments);return ou(this,n)}}var Au=function(t){iu(n,t);var e=Lu(n);function n(t,i){var r,o;return he(this,n),(o=e.call(this)).length=0,o._ids=new yu,o._options=i||{},o._listener=ce(r=o._onEvent).call(r,ru(o)),o.setData(t),o}return me(n,[{key:"setData",value:function(t){if(this._data){this._data.off&&this._data.off("*",this._listener);var e=this._data.getIds({filter:Xt(this._options)}),n=this._data.get(e);this._ids.clear(),this.length=0,this._trigger("remove",{items:e,oldData:n})}if(null!=t){this._data=t;for(var i=this._data.getIds({filter:Xt(this._options)}),r=0,o=i.length;r<o;r++){var a=i[r];this._ids.add(a)}this.length=i.length,this._trigger("add",{items:i})}else this._data=new Cu;this._data.on&&this._data.on("*",this._listener)}},{key:"refresh",value:function(){for(var t=this._data.getIds({filter:Xt(this._options)}),e=Qo(this._ids),n={},i=[],r=[],o=[],a=0,s=t.length;a<s;a++){var l=t[a];n[l]=!0,this._ids.has(l)||(i.push(l),this._ids.add(l))}for(var u=0,c=e.length;u<c;u++){var h=e[u],d=this._data.get(h);null==d?console.error("If you see this, report it please."):n[h]||(r.push(h),o.push(d),this._ids.delete(h))}this.length+=i.length-r.length,i.length&&this._trigger("add",{items:i}),r.length&&this._trigger("remove",{items:r,oldData:o})}},{key:"get",value:function(t,e){if(null==this._data)return null;var n,i=null;mu(t)||Wo(t)?(i=t,n=e):n=t;var r=Wr({},this._options,n),o=Xt(this._options),a=n&&Xt(n);return o&&a&&(r.filter=function(t){return o(t)&&a(t)}),null==i?this._data.get(r):this._data.get(i,r)}},{key:"getIds",value:function(t){if(this._data.length){var e,n=Xt(this._options),i=null!=t?Xt(t):null;return e=i?n?function(t){return n(t)&&i(t)}:i:n,this._data.getIds({filter:e,order:t&&t.order})}return[]}},{key:"forEach",value:function(t,e){if(this._data){var n,i,r=Xt(this._options),o=e&&Xt(e);i=o?r?function(t){return r(t)&&o(t)}:o:r,fo(n=this._data).call(n,t,{filter:i,order:e&&e.order})}}},{key:"map",value:function(t,e){if(this._data){var n,i,r=Xt(this._options),o=e&&Xt(e);return i=o?r?function(t){return r(t)&&o(t)}:o:r,zt(n=this._data).call(n,t,{filter:i,order:e&&e.order})}return[]}},{key:"getDataSet",value:function(){return this._data.getDataSet()}},{key:"stream",value:function(t){var e;return this._data.stream(t||pr({},dl,ce(e=Tl(this._ids)).call(e,this._ids)))}},{key:"dispose",value:function(){var t;null!==(t=this._data)&&void 0!==t&&t.off&&this._data.off("*",this._listener);var e,i="This data view has already been disposed of.",r={get:function(){throw new Error(i)},set:function(){throw new Error(i)},configurable:!1},o=Tu(qo(n.prototype));try{for(o.s();!(e=o.n()).done;){var a=e.value;ye(this,a,r)}}catch(t){o.e(t)}finally{o.f()}}},{key:"_onEvent",value:function(t,e,n){if(e&&e.items&&this._data){var i=e.items,r=[],o=[],a=[],s=[],l=[],u=[];switch(t){case"add":for(var c=0,h=i.length;c<h;c++){var d=i[c];this.get(d)&&(this._ids.add(d),r.push(d))}break;case"update":for(var f=0,p=i.length;f<p;f++){var m=i[f];this.get(m)?this._ids.has(m)?(o.push(m),l.push(e.data[f]),s.push(e.oldData[f])):(this._ids.add(m),r.push(m)):this._ids.has(m)&&(this._ids.delete(m),a.push(m),u.push(e.oldData[f]))}break;case"remove":for(var g=0,v=i.length;g<v;g++){var y=i[g];this._ids.has(y)&&(this._ids.delete(y),a.push(y),u.push(e.oldData[g]))}}this.length+=r.length-a.length,r.length&&this._trigger("add",{items:r},n),o.length&&this._trigger("update",{items:o,oldData:s,data:l},n),a.length&&this._trigger("remove",{items:a,oldData:u},n)}}},{key:"idProp",get:function(){return this.getDataSet().idProp}}]),n}(vu);function Ou(t,e){return"object"===Xo(e)&&null!==e&&t===e.idProp&&"function"==typeof e.add&&"function"==typeof e.clear&&"function"==typeof e.distinct&&"function"==typeof fo(e)&&"function"==typeof e.get&&"function"==typeof e.getDataSet&&"function"==typeof e.getIds&&"number"==typeof e.length&&"function"==typeof zt(e)&&"function"==typeof e.max&&"function"==typeof e.min&&"function"==typeof e.off&&"function"==typeof e.on&&"function"==typeof e.remove&&"function"==typeof e.setOptions&&"function"==typeof e.stream&&"function"==typeof e.update&&"function"==typeof e.updateOnly}t.DELETE=Ks,t.DataSet=Cu,t.DataStream=wu,t.DataView=Au,t.Queue=gu,t.createNewDataPipeFrom=function(t){return new ve(t)},t.isDataSetLike=Ou,t.isDataViewLike=function(t,e){return"object"===Xo(e)&&null!==e&&t===e.idProp&&"function"==typeof fo(e)&&"function"==typeof e.get&&"function"==typeof e.getDataSet&&"function"==typeof e.getIds&&"number"==typeof e.length&&"function"==typeof zt(e)&&"function"==typeof e.off&&"function"==typeof e.on&&"function"==typeof e.stream&&Ou(t,e.getDataSet())},Object.defineProperty(t,"__esModule",{value:!0})}(e)},19419:(t,e,n)=>{"use strict";n.r(e),n.d(e,{Graph2d:()=>lo,Timeline:()=>Ir,timeline:()=>co});var r={};n.r(r),n.d(r,{Activator:()=>_n,Alea:()=>re,ColorPicker:()=>wn,Configurator:()=>xn,DELETE:()=>Jt,HSVToHex:()=>Je,HSVToRGB:()=>Ze,Hammer:()=>Mn,Popup:()=>En,RGBToHSV:()=>Xe,RGBToHex:()=>Ue,VALIDATOR_PRINT_STYLE:()=>Sn,Validator:()=>kn,addClassName:()=>Ae,addCssText:()=>Ke,addEventListener:()=>Ye,binarySearchCustom:()=>ln,binarySearchValue:()=>un,bridgeObject:()=>on,copyAndExtendArray:()=>ke,copyArray:()=>Ce,deepExtend:()=>Me,deepObjectAssign:()=>te,easingFunctions:()=>cn,equalArray:()=>Ee,extend:()=>be,fillIfDefined:()=>ye,forEach:()=>Pe,getAbsoluteLeft:()=>Te,getAbsoluteRight:()=>De,getAbsoluteTop:()=>Le,getScrollBarWidth:()=>hn,getTarget:()=>Be,getType:()=>Se,hasParent:()=>ze,hexToHSV:()=>Qe,hexToRGB:()=>Ge,insertSort:()=>an,isDate:()=>ge,isNumber:()=>de,isObject:()=>me,isString:()=>pe,isValidHex:()=>tn,isValidRGB:()=>en,isValidRGBA:()=>nn,mergeOptions:()=>sn,option:()=>He,overrideOpacity:()=>We,parseColor:()=>Ve,preventDefault:()=>Fe,pureDeepObjectAssign:()=>Qt,recursiveDOMDelete:()=>fe,removeClassName:()=>Oe,removeCssText:()=>$e,removeEventListener:()=>je,selectiveBridgeObject:()=>rn,selectiveDeepExtend:()=>we,selectiveExtend:()=>_e,selectiveNotDeepExtend:()=>xe,throttle:()=>Re,toArray:()=>Ie,topMost:()=>dn,updateProperty:()=>Ne});var o=n(30381),a=n.n(o),s=n(98767),l=n.n(s);function u(){return u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},u.apply(this,arguments)}function c(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var d,f="function"!=typeof Object.assign?function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var r in i)i.hasOwnProperty(r)&&(e[r]=i[r])}return e}:Object.assign,p=["","webkit","Moz","MS","ms","o"],m="undefined"==typeof document?{style:{}}:document.createElement("div"),g=Math.round,v=Math.abs,y=Date.now;function b(t,e){for(var n,i,r=e[0].toUpperCase()+e.slice(1),o=0;o<p.length;){if((i=(n=p[o])?n+r:e)in t)return i;o++}}d="undefined"==typeof window?{}:window;var _=b(m.style,"touchAction"),w=void 0!==_;var x="compute",M="auto",E="manipulation",S="none",k="pan-x",C="pan-y",T=function(){if(!w)return!1;var t={},e=d.CSS&&d.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(n){return t[n]=!e||d.CSS.supports("touch-action",n)})),t}(),D="ontouchstart"in d,L=void 0!==b(d,"PointerEvent"),A=D&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),O="touch",P="mouse",I=16,N=24,R=["x","y"],Y=["clientX","clientY"];function j(t,e,n){var i;if(t)if(t.forEach)t.forEach(e,n);else if(void 0!==t.length)for(i=0;i<t.length;)e.call(n,t[i],i,t),i++;else for(i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i,t)}function F(t,e){return"function"==typeof t?t.apply(e&&e[0]||void 0,e):t}function B(t,e){return t.indexOf(e)>-1}var z=function(){function t(t,e){this.manager=t,this.set(e)}var e=t.prototype;return e.set=function(t){t===x&&(t=this.compute()),w&&this.manager.element.style&&T[t]&&(this.manager.element.style[_]=t),this.actions=t.toLowerCase().trim()},e.update=function(){this.set(this.manager.options.touchAction)},e.compute=function(){var t=[];return j(this.manager.recognizers,(function(e){F(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))})),function(t){if(B(t,S))return S;var e=B(t,k),n=B(t,C);return e&&n?S:e||n?e?k:C:B(t,E)?E:M}(t.join(" "))},e.preventDefaults=function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var i=this.actions,r=B(i,S)&&!T.none,o=B(i,C)&&!T["pan-y"],a=B(i,k)&&!T["pan-x"];if(r){var s=1===t.pointers.length,l=t.distance<2,u=t.deltaTime<250;if(s&&l&&u)return}if(!a||!o)return r||o&&6&n||a&&n&N?this.preventSrc(e):void 0}},e.preventSrc=function(t){this.manager.session.prevented=!0,t.preventDefault()},t}();function H(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}function G(t){var e=t.length;if(1===e)return{x:g(t[0].clientX),y:g(t[0].clientY)};for(var n=0,i=0,r=0;r<e;)n+=t[r].clientX,i+=t[r].clientY,r++;return{x:g(n/e),y:g(i/e)}}function W(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:g(t.pointers[n].clientX),clientY:g(t.pointers[n].clientY)},n++;return{timeStamp:y(),pointers:e,center:G(e),deltaX:t.deltaX,deltaY:t.deltaY}}function U(t,e,n){n||(n=R);var i=e[n[0]]-t[n[0]],r=e[n[1]]-t[n[1]];return Math.sqrt(i*i+r*r)}function V(t,e,n){n||(n=R);var i=e[n[0]]-t[n[0]],r=e[n[1]]-t[n[1]];return 180*Math.atan2(r,i)/Math.PI}function X(t,e){return t===e?1:v(t)>=v(e)?t<0?2:4:e<0?8:I}function q(t,e,n){return{x:e/t||0,y:n/t||0}}function K(t,e){var n=t.session,i=e.pointers,r=i.length;n.firstInput||(n.firstInput=W(e)),r>1&&!n.firstMultiple?n.firstMultiple=W(e):1===r&&(n.firstMultiple=!1);var o=n.firstInput,a=n.firstMultiple,s=a?a.center:o.center,l=e.center=G(i);e.timeStamp=y(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=V(s,l),e.distance=U(s,l),function(t,e){var n=e.center,i=t.offsetDelta||{},r=t.prevDelta||{},o=t.prevInput||{};1!==e.eventType&&4!==o.eventType||(r=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},i=t.offsetDelta={x:n.x,y:n.y}),e.deltaX=r.x+(n.x-i.x),e.deltaY=r.y+(n.y-i.y)}(n,e),e.offsetDirection=X(e.deltaX,e.deltaY);var u,c,h=q(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=h.x,e.overallVelocityY=h.y,e.overallVelocity=v(h.x)>v(h.y)?h.x:h.y,e.scale=a?(u=a.pointers,U((c=i)[0],c[1],Y)/U(u[0],u[1],Y)):1,e.rotation=a?function(t,e){return V(e[1],e[0],Y)+V(t[1],t[0],Y)}(a.pointers,i):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,function(t,e){var n,i,r,o,a=t.lastInterval||e,s=e.timeStamp-a.timeStamp;if(8!==e.eventType&&(s>25||void 0===a.velocity)){var l=e.deltaX-a.deltaX,u=e.deltaY-a.deltaY,c=q(s,l,u);i=c.x,r=c.y,n=v(c.x)>v(c.y)?c.x:c.y,o=X(l,u),t.lastInterval=e}else n=a.velocity,i=a.velocityX,r=a.velocityY,o=a.direction;e.velocity=n,e.velocityX=i,e.velocityY=r,e.direction=o}(n,e);var d,f=t.element,p=e.srcEvent;H(d=p.composedPath?p.composedPath()[0]:p.path?p.path[0]:p.target,f)&&(f=d),e.target=f}function $(t,e,n){var i=n.pointers.length,r=n.changedPointers.length,o=1&e&&i-r==0,a=12&e&&i-r==0;n.isFirst=!!o,n.isFinal=!!a,o&&(t.session={}),n.eventType=e,K(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function Z(t){return t.trim().split(/\s+/g)}function J(t,e,n){j(Z(e),(function(e){t.addEventListener(e,n,!1)}))}function Q(t,e,n){j(Z(e),(function(e){t.removeEventListener(e,n,!1)}))}function tt(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||window}var et=function(){function t(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){F(t.options.enable,[t])&&n.handler(e)},this.init()}var e=t.prototype;return e.handler=function(){},e.init=function(){this.evEl&&J(this.element,this.evEl,this.domHandler),this.evTarget&&J(this.target,this.evTarget,this.domHandler),this.evWin&&J(tt(this.element),this.evWin,this.domHandler)},e.destroy=function(){this.evEl&&Q(this.element,this.evEl,this.domHandler),this.evTarget&&Q(this.target,this.evTarget,this.domHandler),this.evWin&&Q(tt(this.element),this.evWin,this.domHandler)},t}();function nt(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var i=0;i<t.length;){if(n&&t[i][n]==e||!n&&t[i]===e)return i;i++}return-1}var it={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},rt={2:O,3:"pen",4:P,5:"kinect"},ot="pointerdown",at="pointermove pointerup pointercancel";d.MSPointerEvent&&!d.PointerEvent&&(ot="MSPointerDown",at="MSPointerMove MSPointerUp MSPointerCancel");var st=function(t){function e(){var n,i=e.prototype;return i.evEl=ot,i.evWin=at,(n=t.apply(this,arguments)||this).store=n.manager.session.pointerEvents=[],n}return c(e,t),e.prototype.handler=function(t){var e=this.store,n=!1,i=t.type.toLowerCase().replace("ms",""),r=it[i],o=rt[t.pointerType]||t.pointerType,a=o===O,s=nt(e,t.pointerId,"pointerId");1&r&&(0===t.button||a)?s<0&&(e.push(t),s=e.length-1):12&r&&(n=!0),s<0||(e[s]=t,this.callback(this.manager,r,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),n&&e.splice(s,1))},e}(et);function lt(t){return Array.prototype.slice.call(t,0)}function ut(t,e,n){for(var i=[],r=[],o=0;o<t.length;){var a=e?t[o][e]:t[o];nt(r,a)<0&&i.push(t[o]),r[o]=a,o++}return n&&(i=e?i.sort((function(t,n){return t[e]>n[e]})):i.sort()),i}var ct={touchstart:1,touchmove:2,touchend:4,touchcancel:8},ht="touchstart touchmove touchend touchcancel",dt=function(t){function e(){var n;return e.prototype.evTarget=ht,(n=t.apply(this,arguments)||this).targetIds={},n}return c(e,t),e.prototype.handler=function(t){var e=ct[t.type],n=ft.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:O,srcEvent:t})},e}(et);function ft(t,e){var n,i,r=lt(t.touches),o=this.targetIds;if(3&e&&1===r.length)return o[r[0].identifier]=!0,[r,r];var a=lt(t.changedTouches),s=[],l=this.target;if(i=r.filter((function(t){return H(t.target,l)})),1===e)for(n=0;n<i.length;)o[i[n].identifier]=!0,n++;for(n=0;n<a.length;)o[a[n].identifier]&&s.push(a[n]),12&e&&delete o[a[n].identifier],n++;return s.length?[ut(i.concat(s),"identifier",!0),s]:void 0}var pt={mousedown:1,mousemove:2,mouseup:4},mt="mousedown",gt="mousemove mouseup",vt=function(t){function e(){var n,i=e.prototype;return i.evEl=mt,i.evWin=gt,(n=t.apply(this,arguments)||this).pressed=!1,n}return c(e,t),e.prototype.handler=function(t){var e=pt[t.type];1&e&&0===t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=4),this.pressed&&(4&e&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:P,srcEvent:t}))},e}(et);function yt(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY},i=this.lastTouches;this.lastTouches.push(n);setTimeout((function(){var t=i.indexOf(n);t>-1&&i.splice(t,1)}),2500)}}function bt(t,e){1&t?(this.primaryTouch=e.changedPointers[0].identifier,yt.call(this,e)):12&t&&yt.call(this,e)}function _t(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var r=this.lastTouches[i],o=Math.abs(e-r.x),a=Math.abs(n-r.y);if(o<=25&&a<=25)return!0}return!1}var wt=function(){return function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).handler=function(t,e,n){var r=n.pointerType===O,o=n.pointerType===P;if(!(o&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)bt.call(h(h(i)),e,n);else if(o&&_t.call(h(h(i)),n))return;i.callback(t,e,n)}},i.touch=new dt(i.manager,i.handler),i.mouse=new vt(i.manager,i.handler),i.primaryTouch=null,i.lastTouches=[],i}return c(e,t),e.prototype.destroy=function(){this.touch.destroy(),this.mouse.destroy()},e}(et)}();function xt(t,e,n){return!!Array.isArray(t)&&(j(t,n[e],n),!0)}var Mt=32,Et=1;function St(t,e){var n=e.manager;return n?n.get(t):t}function kt(t){return 16&t?"cancel":8&t?"end":4&t?"move":2&t?"start":""}var Ct=function(){function t(t){void 0===t&&(t={}),this.options=u({enable:!0},t),this.id=Et++,this.manager=null,this.state=1,this.simultaneous={},this.requireFail=[]}var e=t.prototype;return e.set=function(t){return f(this.options,t),this.manager&&this.manager.touchAction.update(),this},e.recognizeWith=function(t){if(xt(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=St(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},e.dropRecognizeWith=function(t){return xt(t,"dropRecognizeWith",this)||(t=St(t,this),delete this.simultaneous[t.id]),this},e.requireFailure=function(t){if(xt(t,"requireFailure",this))return this;var e=this.requireFail;return-1===nt(e,t=St(t,this))&&(e.push(t),t.requireFailure(this)),this},e.dropRequireFailure=function(t){if(xt(t,"dropRequireFailure",this))return this;t=St(t,this);var e=nt(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},e.hasRequireFailures=function(){return this.requireFail.length>0},e.canRecognizeWith=function(t){return!!this.simultaneous[t.id]},e.emit=function(t){var e=this,n=this.state;function i(n){e.manager.emit(n,t)}n<8&&i(e.options.event+kt(n)),i(e.options.event),t.additionalEvent&&i(t.additionalEvent),n>=8&&i(e.options.event+kt(n))},e.tryEmit=function(t){if(this.canEmit())return this.emit(t);this.state=Mt},e.canEmit=function(){for(var t=0;t<this.requireFail.length;){if(!(33&this.requireFail[t].state))return!1;t++}return!0},e.recognize=function(t){var e=f({},t);if(!F(this.options.enable,[this,e]))return this.reset(),void(this.state=Mt);56&this.state&&(this.state=1),this.state=this.process(e),30&this.state&&this.tryEmit(e)},e.process=function(t){},e.getTouchAction=function(){},e.reset=function(){},t}(),Tt=function(t){function e(e){var n;return void 0===e&&(e={}),(n=t.call(this,u({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},e))||this).pTime=!1,n.pCenter=!1,n._timer=null,n._input=null,n.count=0,n}c(e,t);var n=e.prototype;return n.getTouchAction=function(){return[E]},n.process=function(t){var e=this,n=this.options,i=t.pointers.length===n.pointers,r=t.distance<n.threshold,o=t.deltaTime<n.time;if(this.reset(),1&t.eventType&&0===this.count)return this.failTimeout();if(r&&o&&i){if(4!==t.eventType)return this.failTimeout();var a=!this.pTime||t.timeStamp-this.pTime<n.interval,s=!this.pCenter||U(this.pCenter,t.center)<n.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,s&&a?this.count+=1:this.count=1,this._input=t,0===this.count%n.taps)return this.hasRequireFailures()?(this._timer=setTimeout((function(){e.state=8,e.tryEmit()}),n.interval),2):8}return Mt},n.failTimeout=function(){var t=this;return this._timer=setTimeout((function(){t.state=Mt}),this.options.interval),Mt},n.reset=function(){clearTimeout(this._timer)},n.emit=function(){8===this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},e}(Ct),Dt=function(t){function e(e){return void 0===e&&(e={}),t.call(this,u({pointers:1},e))||this}c(e,t);var n=e.prototype;return n.attrTest=function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},n.process=function(t){var e=this.state,n=t.eventType,i=6&e,r=this.attrTest(t);return i&&(8&n||!r)?16|e:i||r?4&n?8|e:2&e?4|e:2:Mt},e}(Ct);function Lt(t){return t===I?"down":8===t?"up":2===t?"left":4===t?"right":""}var At=function(t){function e(e){var n;return void 0===e&&(e={}),(n=t.call(this,u({event:"pan",threshold:10,pointers:1,direction:30},e))||this).pX=null,n.pY=null,n}c(e,t);var n=e.prototype;return n.getTouchAction=function(){var t=this.options.direction,e=[];return 6&t&&e.push(C),t&N&&e.push(k),e},n.directionTest=function(t){var e=this.options,n=!0,i=t.distance,r=t.direction,o=t.deltaX,a=t.deltaY;return r&e.direction||(6&e.direction?(r=0===o?1:o<0?2:4,n=o!==this.pX,i=Math.abs(t.deltaX)):(r=0===a?1:a<0?8:I,n=a!==this.pY,i=Math.abs(t.deltaY))),t.direction=r,n&&i>e.threshold&&r&e.direction},n.attrTest=function(t){return Dt.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},n.emit=function(e){this.pX=e.deltaX,this.pY=e.deltaY;var n=Lt(e.direction);n&&(e.additionalEvent=this.options.event+n),t.prototype.emit.call(this,e)},e}(Dt),Ot=function(t){function e(e){return void 0===e&&(e={}),t.call(this,u({event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},e))||this}c(e,t);var n=e.prototype;return n.getTouchAction=function(){return At.prototype.getTouchAction.call(this)},n.attrTest=function(e){var n,i=this.options.direction;return 30&i?n=e.overallVelocity:6&i?n=e.overallVelocityX:i&N&&(n=e.overallVelocityY),t.prototype.attrTest.call(this,e)&&i&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers===this.options.pointers&&v(n)>this.options.velocity&&4&e.eventType},n.emit=function(t){var e=Lt(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)},e}(Dt),Pt=function(t){function e(e){return void 0===e&&(e={}),t.call(this,u({event:"pinch",threshold:0,pointers:2},e))||this}c(e,t);var n=e.prototype;return n.getTouchAction=function(){return[S]},n.attrTest=function(e){return t.prototype.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||2&this.state)},n.emit=function(e){if(1!==e.scale){var n=e.scale<1?"in":"out";e.additionalEvent=this.options.event+n}t.prototype.emit.call(this,e)},e}(Dt),It=function(t){function e(e){return void 0===e&&(e={}),t.call(this,u({event:"rotate",threshold:0,pointers:2},e))||this}c(e,t);var n=e.prototype;return n.getTouchAction=function(){return[S]},n.attrTest=function(e){return t.prototype.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||2&this.state)},e}(Dt),Nt=function(t){function e(e){var n;return void 0===e&&(e={}),(n=t.call(this,u({event:"press",pointers:1,time:251,threshold:9},e))||this)._timer=null,n._input=null,n}c(e,t);var n=e.prototype;return n.getTouchAction=function(){return[M]},n.process=function(t){var e=this,n=this.options,i=t.pointers.length===n.pointers,r=t.distance<n.threshold,o=t.deltaTime>n.time;if(this._input=t,!r||!i||12&t.eventType&&!o)this.reset();else if(1&t.eventType)this.reset(),this._timer=setTimeout((function(){e.state=8,e.tryEmit()}),n.time);else if(4&t.eventType)return 8;return Mt},n.reset=function(){clearTimeout(this._timer)},n.emit=function(t){8===this.state&&(t&&4&t.eventType?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=y(),this.manager.emit(this.options.event,this._input)))},e}(Ct),Rt={domEvents:!1,touchAction:x,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Yt=[[It,{enable:!1}],[Pt,{enable:!1},["rotate"]],[Ot,{direction:6}],[At,{direction:6},["swipe"]],[Tt],[Tt,{event:"doubletap",taps:2},["tap"]],[Nt]];function jt(t,e){var n,i=t.element;i.style&&(j(t.options.cssProps,(function(r,o){n=b(i.style,o),e?(t.oldCssProps[n]=i.style[n],i.style[n]=r):i.style[n]=t.oldCssProps[n]||""})),e||(t.oldCssProps={}))}var Ft=function(){function t(t,e){var n,i=this;this.options=f({},Rt,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new((n=this).options.inputClass||(L?st:A?dt:D?wt:vt))(n,$),this.touchAction=new z(this,this.options.touchAction),jt(this,!0),j(this.options.recognizers,(function(t){var e=i.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])}),this)}var e=t.prototype;return e.set=function(t){return f(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},e.stop=function(t){this.session.stopped=t?2:1},e.recognize=function(t){var e=this.session;if(!e.stopped){var n;this.touchAction.preventDefaults(t);var i=this.recognizers,r=e.curRecognizer;(!r||r&&8&r.state)&&(e.curRecognizer=null,r=null);for(var o=0;o<i.length;)n=i[o],2===e.stopped||r&&n!==r&&!n.canRecognizeWith(r)?n.reset():n.recognize(t),!r&&14&n.state&&(e.curRecognizer=n,r=n),o++}},e.get=function(t){if(t instanceof Ct)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event===t)return e[n];return null},e.add=function(t){if(xt(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},e.remove=function(t){if(xt(t,"remove",this))return this;var e=this.get(t);if(t){var n=this.recognizers,i=nt(n,e);-1!==i&&(n.splice(i,1),this.touchAction.update())}return this},e.on=function(t,e){if(void 0===t||void 0===e)return this;var n=this.handlers;return j(Z(t),(function(t){n[t]=n[t]||[],n[t].push(e)})),this},e.off=function(t,e){if(void 0===t)return this;var n=this.handlers;return j(Z(t),(function(t){e?n[t]&&n[t].splice(nt(n[t],e),1):delete n[t]})),this},e.emit=function(t,e){this.options.domEvents&&function(t,e){var n=document.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var i=0;i<n.length;)n[i](e),i++}},e.destroy=function(){this.element&&jt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},t}(),Bt={touchstart:1,touchmove:2,touchend:4,touchcancel:8},zt="touchstart",Ht="touchstart touchmove touchend touchcancel",Gt=function(t){function e(){var n,i=e.prototype;return i.evTarget=zt,i.evWin=Ht,(n=t.apply(this,arguments)||this).started=!1,n}return c(e,t),e.prototype.handler=function(t){var e=Bt[t.type];if(1===e&&(this.started=!0),this.started){var n=Wt.call(this,t,e);12&e&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:O,srcEvent:t})}},e}(et);function Wt(t,e){var n=lt(t.touches),i=lt(t.changedTouches);return 12&e&&(n=ut(n.concat(i),"identifier",!0)),[n,i]}function Ut(t,e,n){var i="DEPRECATED METHOD: "+e+"\n"+n+" AT \n";return function(){var e=new Error("get-stack-trace"),n=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",r=window.console&&(window.console.warn||window.console.log);return r&&r.call(window.console,i,n),t.apply(this,arguments)}}var Vt=Ut((function(t,e,n){for(var i=Object.keys(e),r=0;r<i.length;)(!n||n&&void 0===t[i[r]])&&(t[i[r]]=e[i[r]]),r++;return t}),"extend","Use `assign`."),Xt=Ut((function(t,e){return Vt(t,e,!0)}),"merge","Use `assign`.");function qt(t,e,n){var i,r=e.prototype;(i=t.prototype=Object.create(r)).constructor=t,i._super=r,n&&f(i,n)}function Kt(t,e){return function(){return t.apply(e,arguments)}}var $t=function(){var t=function(t,e){return void 0===e&&(e={}),new Ft(t,u({recognizers:Yt.concat()},e))};return t.VERSION="2.0.17-rc",t.DIRECTION_ALL=30,t.DIRECTION_DOWN=I,t.DIRECTION_LEFT=2,t.DIRECTION_RIGHT=4,t.DIRECTION_UP=8,t.DIRECTION_HORIZONTAL=6,t.DIRECTION_VERTICAL=N,t.DIRECTION_NONE=1,t.DIRECTION_DOWN=I,t.INPUT_START=1,t.INPUT_MOVE=2,t.INPUT_END=4,t.INPUT_CANCEL=8,t.STATE_POSSIBLE=1,t.STATE_BEGAN=2,t.STATE_CHANGED=4,t.STATE_ENDED=8,t.STATE_RECOGNIZED=8,t.STATE_CANCELLED=16,t.STATE_FAILED=Mt,t.Manager=Ft,t.Input=et,t.TouchAction=z,t.TouchInput=dt,t.MouseInput=vt,t.PointerEventInput=st,t.TouchMouseInput=wt,t.SingleTouchInput=Gt,t.Recognizer=Ct,t.AttrRecognizer=Dt,t.Tap=Tt,t.Pan=At,t.Swipe=Ot,t.Pinch=Pt,t.Rotate=It,t.Press=Nt,t.on=J,t.off=Q,t.each=j,t.merge=Xt,t.extend=Vt,t.bindFn=Kt,t.assign=f,t.inherit=qt,t.bindFn=Kt,t.prefixed=b,t.toArray=lt,t.inArray=nt,t.uniqueArray=ut,t.splitStr=Z,t.boolOrFn=F,t.hasParent=H,t.addEventListeners=J,t.removeEventListeners=Q,t.defaults=f({},Rt,{preset:Yt}),t}();$t.defaults;const Zt=$t,Jt=Symbol("DELETE");function Qt(t,...e){return te({},t,...e)}function te(...t){const e=ee(...t);return ie(e),e}function ee(...t){if(t.length<2)return t[0];if(t.length>2)return ee(te(t[0],t[1]),...t.slice(2));const e=t[0],n=t[1];for(const t of Reflect.ownKeys(n))Object.prototype.propertyIsEnumerable.call(n,t)&&(n[t]===Jt?delete e[t]:null===e[t]||null===n[t]||"object"!=typeof e[t]||"object"!=typeof n[t]||Array.isArray(e[t])||Array.isArray(n[t])?e[t]=ne(n[t]):e[t]=ee(e[t],n[t]));return e}function ne(t){return Array.isArray(t)?t.map((t=>ne(t))):"object"==typeof t&&null!==t?ee({},t):t}function ie(t){for(const e of Object.keys(t))t[e]===Jt?delete t[e]:"object"==typeof t[e]&&null!==t[e]&&ie(t[e])}function re(...t){return function(t){let[e,n,i]=function(...t){const e=function(){let t=4022871197;return function(e){const n=e.toString();for(let e=0;e<n.length;e++){t+=n.charCodeAt(e);let i=.02519603282416938*t;t=i>>>0,i-=t,i*=t,t=i>>>0,i-=t,t+=4294967296*i}return 2.3283064365386963e-10*(t>>>0)}}();let n=e(" "),i=e(" "),r=e(" ");for(let o=0;o<t.length;o++)n-=e(t[o]),n<0&&(n+=1),i-=e(t[o]),i<0&&(i+=1),r-=e(t[o]),r<0&&(r+=1);return[n,i,r]}(t),r=1;const o=()=>{const t=2091639*e+2.3283064365386963e-10*r;return e=n,n=i,i=t-(r=0|t)};return o.uint32=()=>4294967296*o(),o.fract53=()=>o()+11102230246251565e-32*(2097152*o()|0),o.algorithm="Alea",o.seed=t,o.version="0.9",o}(t.length?t:[Date.now()])}const oe="undefined"!=typeof window?window.Hammer||Zt:function(){return function(){const t=()=>{};return{on:t,off:t,destroy:t,emit:t,get:()=>({set:t})}}()};function ae(t){this._cleanupQueue=[],this.active=!1,this._dom={container:t,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push((()=>{this._dom.overlay.parentNode.removeChild(this._dom.overlay)}));const e=oe(this._dom.overlay);e.on("tap",this._onTapOverlay.bind(this)),this._cleanupQueue.push((()=>{e.destroy()}));["tap","doubletap","press","pinch","pan","panstart","panmove","panend"].forEach((t=>{e.on(t,(t=>{t.srcEvent.stopPropagation()}))})),document&&document.body&&(this._onClick=e=>{(function(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1})(e.target,t)||this.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push((()=>{document.body.removeEventListener("click",this._onClick)}))),this._escListener=t=>{("key"in t?"Escape"===t.key:27===t.keyCode)&&this.deactivate()}}l()(ae.prototype),ae.current=null,ae.prototype.destroy=function(){this.deactivate();for(const t of this._cleanupQueue.splice(0).reverse())t()},ae.prototype.activate=function(){ae.current&&ae.current.deactivate(),ae.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)},ae.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")},ae.prototype._onTapOverlay=function(t){this.activate(),t.srcEvent.stopPropagation()};const se=/^\/?Date\((-?\d+)/i,le=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,ue=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,ce=/^rgb\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *\)$/i,he=/^rgba\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *([01]|0?\.\d+) *\)$/i;function de(t){return t instanceof Number||"number"==typeof t}function fe(t){if(t)for(;!0===t.hasChildNodes();){const e=t.firstChild;e&&(fe(e),t.removeChild(e))}}function pe(t){return t instanceof String||"string"==typeof t}function me(t){return"object"==typeof t&&null!==t}function ge(t){if(t instanceof Date)return!0;if(pe(t)){if(se.exec(t))return!0;if(!isNaN(Date.parse(t)))return!0}return!1}function ve(t,e,n,i){let r=!1;!0===i&&(r=null===e[n]&&void 0!==t[n]),r?delete t[n]:t[n]=e[n]}function ye(t,e,n=!1){for(const i in t)if(void 0!==e[i])if(null===e[i]||"object"!=typeof e[i])ve(t,e,i,n);else{const r=t[i],o=e[i];me(r)&&me(o)&&ye(r,o,n)}}const be=Object.assign;function _e(t,e,...n){if(!Array.isArray(t))throw new Error("Array with property names expected as first argument");for(const i of n)for(let n=0;n<t.length;n++){const r=t[n];i&&Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}function we(t,e,n,i=!1){if(Array.isArray(n))throw new TypeError("Arrays are not supported by deepExtend");for(let r=0;r<t.length;r++){const o=t[r];if(Object.prototype.hasOwnProperty.call(n,o))if(n[o]&&n[o].constructor===Object)void 0===e[o]&&(e[o]={}),e[o].constructor===Object?Me(e[o],n[o],!1,i):ve(e,n,o,i);else{if(Array.isArray(n[o]))throw new TypeError("Arrays are not supported by deepExtend");ve(e,n,o,i)}}return e}function xe(t,e,n,i=!1){if(Array.isArray(n))throw new TypeError("Arrays are not supported by deepExtend");for(const r in n)if(Object.prototype.hasOwnProperty.call(n,r)&&!t.includes(r))if(n[r]&&n[r].constructor===Object)void 0===e[r]&&(e[r]={}),e[r].constructor===Object?Me(e[r],n[r]):ve(e,n,r,i);else if(Array.isArray(n[r])){e[r]=[];for(let t=0;t<n[r].length;t++)e[r].push(n[r][t])}else ve(e,n,r,i);return e}function Me(t,e,n=!1,i=!1){for(const r in e)(Object.prototype.hasOwnProperty.call(e,r)||!0===n)&&("object"==typeof e[r]&&null!==e[r]&&Object.getPrototypeOf(e[r])===Object.prototype?void 0===t[r]?t[r]=Me({},e[r],n):"object"==typeof t[r]&&null!==t[r]&&Object.getPrototypeOf(t[r])===Object.prototype?Me(t[r],e[r],n):ve(t,e,r,i):Array.isArray(e[r])?t[r]=e[r].slice():ve(t,e,r,i));return t}function Ee(t,e){if(t.length!==e.length)return!1;for(let n=0,i=t.length;n<i;n++)if(t[n]!=e[n])return!1;return!0}function Se(t){const e=typeof t;return"object"===e?null===t?"null":t instanceof Boolean?"Boolean":t instanceof Number?"Number":t instanceof String?"String":Array.isArray(t)?"Array":t instanceof Date?"Date":"Object":"number"===e?"Number":"boolean"===e?"Boolean":"string"===e?"String":void 0===e?"undefined":e}function ke(t,e){return[...t,e]}function Ce(t){return t.slice()}function Te(t){return t.getBoundingClientRect().left}function De(t){return t.getBoundingClientRect().right}function Le(t){return t.getBoundingClientRect().top}function Ae(t,e){let n=t.className.split(" ");const i=e.split(" ");n=n.concat(i.filter((function(t){return!n.includes(t)}))),t.className=n.join(" ")}function Oe(t,e){let n=t.className.split(" ");const i=e.split(" ");n=n.filter((function(t){return!i.includes(t)})),t.className=n.join(" ")}function Pe(t,e){if(Array.isArray(t)){const n=t.length;for(let i=0;i<n;i++)e(t[i],i,t)}else for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(t[n],n,t)}const Ie=Object.values;function Ne(t,e,n){return t[e]!==n&&(t[e]=n,!0)}function Re(t){let e=!1;return()=>{e||(e=!0,requestAnimationFrame((()=>{e=!1,t()})))}}function Ye(t,e,n,i){t.addEventListener?(void 0===i&&(i=!1),"mousewheel"===e&&navigator.userAgent.includes("Firefox")&&(e="DOMMouseScroll"),t.addEventListener(e,n,i)):t.attachEvent("on"+e,n)}function je(t,e,n,i){t.removeEventListener?(void 0===i&&(i=!1),"mousewheel"===e&&navigator.userAgent.includes("Firefox")&&(e="DOMMouseScroll"),t.removeEventListener(e,n,i)):t.detachEvent("on"+e,n)}function Fe(t){t||(t=window.event),t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)}function Be(t=window.event){let e=null;return t&&(t.target?e=t.target:t.srcElement&&(e=t.srcElement)),e instanceof Element&&(null==e.nodeType||3!=e.nodeType||(e=e.parentNode,e instanceof Element))?e:null}function ze(t,e){let n=t;for(;n;){if(n===e)return!0;if(!n.parentNode)return!1;n=n.parentNode}return!1}const He={asBoolean:(t,e)=>("function"==typeof t&&(t=t()),null!=t?0!=t:e||null),asNumber:(t,e)=>("function"==typeof t&&(t=t()),null!=t?Number(t)||e||null:e||null),asString:(t,e)=>("function"==typeof t&&(t=t()),null!=t?String(t):e||null),asSize:(t,e)=>("function"==typeof t&&(t=t()),pe(t)?t:de(t)?t+"px":e||null),asElement:(t,e)=>("function"==typeof t&&(t=t()),t||e||null)};function Ge(t){let e;switch(t.length){case 3:case 4:return e=ue.exec(t),e?{r:parseInt(e[1]+e[1],16),g:parseInt(e[2]+e[2],16),b:parseInt(e[3]+e[3],16)}:null;case 6:case 7:return e=le.exec(t),e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null;default:return null}}function We(t,e){if(t.includes("rgba"))return t;if(t.includes("rgb")){const n=t.substr(t.indexOf("(")+1).replace(")","").split(",");return"rgba("+n[0]+","+n[1]+","+n[2]+","+e+")"}{const n=Ge(t);return null==n?t:"rgba("+n.r+","+n.g+","+n.b+","+e+")"}}function Ue(t,e,n){return"#"+((1<<24)+(t<<16)+(e<<8)+n).toString(16).slice(1)}function Ve(t,e){if(pe(t)){let e=t;if(en(e)){const t=e.substr(4).substr(0,e.length-5).split(",").map((function(t){return parseInt(t)}));e=Ue(t[0],t[1],t[2])}if(!0===tn(e)){const t=Qe(e),n={h:t.h,s:.8*t.s,v:Math.min(1,1.02*t.v)},i={h:t.h,s:Math.min(1,1.25*t.s),v:.8*t.v},r=Je(i.h,i.s,i.v),o=Je(n.h,n.s,n.v);return{background:e,border:r,highlight:{background:o,border:r},hover:{background:o,border:r}}}return{background:e,border:e,highlight:{background:e,border:e},hover:{background:e,border:e}}}if(e){return{background:t.background||e.background,border:t.border||e.border,highlight:pe(t.highlight)?{border:t.highlight,background:t.highlight}:{background:t.highlight&&t.highlight.background||e.highlight.background,border:t.highlight&&t.highlight.border||e.highlight.border},hover:pe(t.hover)?{border:t.hover,background:t.hover}:{border:t.hover&&t.hover.border||e.hover.border,background:t.hover&&t.hover.background||e.hover.background}}}return{background:t.background||void 0,border:t.border||void 0,highlight:pe(t.highlight)?{border:t.highlight,background:t.highlight}:{background:t.highlight&&t.highlight.background||void 0,border:t.highlight&&t.highlight.border||void 0},hover:pe(t.hover)?{border:t.hover,background:t.hover}:{border:t.hover&&t.hover.border||void 0,background:t.hover&&t.hover.background||void 0}}}function Xe(t,e,n){t/=255,e/=255,n/=255;const i=Math.min(t,Math.min(e,n)),r=Math.max(t,Math.max(e,n));if(i===r)return{h:0,s:0,v:i};return{h:60*((t===i?3:n===i?1:5)-(t===i?e-n:n===i?t-e:n-t)/(r-i))/360,s:(r-i)/r,v:r}}const qe={split(t){const e={};return t.split(";").forEach((t=>{if(""!=t.trim()){const n=t.split(":"),i=n[0].trim(),r=n[1].trim();e[i]=r}})),e},join:t=>Object.keys(t).map((function(e){return e+": "+t[e]})).join("; ")};function Ke(t,e){const n={...qe.split(t.style.cssText),...qe.split(e)};t.style.cssText=qe.join(n)}function $e(t,e){const n=qe.split(t.style.cssText),i=qe.split(e);for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&delete n[t];t.style.cssText=qe.join(n)}function Ze(t,e,n){let i,r,o;const a=Math.floor(6*t),s=6*t-a,l=n*(1-e),u=n*(1-s*e),c=n*(1-(1-s)*e);switch(a%6){case 0:i=n,r=c,o=l;break;case 1:i=u,r=n,o=l;break;case 2:i=l,r=n,o=c;break;case 3:i=l,r=u,o=n;break;case 4:i=c,r=l,o=n;break;case 5:i=n,r=l,o=u}return{r:Math.floor(255*i),g:Math.floor(255*r),b:Math.floor(255*o)}}function Je(t,e,n){const i=Ze(t,e,n);return Ue(i.r,i.g,i.b)}function Qe(t){const e=Ge(t);if(!e)throw new TypeError(`'${t}' is not a valid color.`);return Xe(e.r,e.g,e.b)}function tn(t){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t)}function en(t){return ce.test(t)}function nn(t){return he.test(t)}function rn(t,e){if(null!==e&&"object"==typeof e){const n=Object.create(e);for(let i=0;i<t.length;i++)Object.prototype.hasOwnProperty.call(e,t[i])&&"object"==typeof e[t[i]]&&(n[t[i]]=on(e[t[i]]));return n}return null}function on(t){if(null===t||"object"!=typeof t)return null;if(t instanceof Element)return t;const e=Object.create(t);for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&"object"==typeof t[n]&&(e[n]=on(t[n]));return e}function an(t,e){for(let n=0;n<t.length;n++){const i=t[n];let r;for(r=n;r>0&&e(i,t[r-1])<0;r--)t[r]=t[r-1];t[r]=i}return t}function sn(t,e,n,i={}){const r=function(t){return null!=t},o=function(t){return null!==t&&"object"==typeof t};if(!o(t))throw new Error("Parameter mergeTarget must be an object");if(!o(e))throw new Error("Parameter options must be an object");if(!r(n))throw new Error("Parameter option must have a value");if(!o(i))throw new Error("Parameter globalOptions must be an object");const a=e[n],s=o(i)&&!function(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}(i)?i[n]:void 0,l=s?s.enabled:void 0;if(void 0===a)return;if("boolean"==typeof a)return o(t[n])||(t[n]={}),void(t[n].enabled=a);if(null===a&&!o(t[n])){if(!r(s))return;t[n]=Object.create(s)}if(!o(a))return;let u=!0;void 0!==a.enabled?u=a.enabled:void 0!==l&&(u=s.enabled),function(t,e,n){o(t[n])||(t[n]={});const i=e[n],r=t[n];for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&(r[t]=i[t])}(t,e,n),t[n].enabled=u}function ln(t,e,n,i){let r=0,o=0,a=t.length-1;for(;o<=a&&r<1e4;){const s=Math.floor((o+a)/2),l=t[s],u=e(void 0===i?l[n]:l[n][i]);if(0==u)return s;-1==u?o=s+1:a=s-1,r++}return-1}function un(t,e,n,i,r){let o,a,s,l,u=0,c=0,h=t.length-1;for(r=null!=r?r:function(t,e){return t==e?0:t<e?-1:1};c<=h&&u<1e4;){if(l=Math.floor(.5*(h+c)),o=t[Math.max(0,l-1)][n],a=t[l][n],s=t[Math.min(t.length-1,l+1)][n],0==r(a,e))return l;if(r(o,e)<0&&r(a,e)>0)return"before"==i?Math.max(0,l-1):l;if(r(a,e)<0&&r(s,e)>0)return"before"==i?l:Math.min(t.length-1,l+1);r(a,e)<0?c=l+1:h=l-1,u++}return-1}const cn={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>t*(2-t),easeInOutQuad:t=>t<.5?2*t*t:(4-2*t)*t-1,easeInCubic:t=>t*t*t,easeOutCubic:t=>--t*t*t+1,easeInOutCubic:t=>t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1,easeInQuart:t=>t*t*t*t,easeOutQuart:t=>1- --t*t*t*t,easeInOutQuart:t=>t<.5?8*t*t*t*t:1-8*--t*t*t*t,easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>1+--t*t*t*t*t,easeInOutQuint:t=>t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t};function hn(){const t=document.createElement("p");t.style.width="100%",t.style.height="200px";const e=document.createElement("div");e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.visibility="hidden",e.style.width="200px",e.style.height="150px",e.style.overflow="hidden",e.appendChild(t),document.body.appendChild(e);const n=t.offsetWidth;e.style.overflow="scroll";let i=t.offsetWidth;return n==i&&(i=e.clientWidth),document.body.removeChild(e),n-i}function dn(t,e){let n;Array.isArray(e)||(e=[e]);for(const i of t)if(i){n=i[e[0]];for(let t=1;t<e.length;t++)n&&(n=n[e[t]]);if(void 0!==n)break}return n}const fn={black:"#000000",navy:"#000080",darkblue:"#00008B",mediumblue:"#0000CD",blue:"#0000FF",darkgreen:"#006400",green:"#008000",teal:"#008080",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",lime:"#00FF00",springgreen:"#00FF7F",aqua:"#00FFFF",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",mediumaquamarine:"#66CDAA",dimgray:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",lightslategray:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",maroon:"#800000",purple:"#800080",olive:"#808000",gray:"#808080",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370D8",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",silver:"#C0C0C0",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgrey:"#D3D3D3",palevioletred:"#D87093",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",red:"#FF0000",fuchsia:"#FF00FF",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",yellow:"#FFFF00",lightyellow:"#FFFFE0",ivory:"#FFFFF0",white:"#FFFFFF"};class pn{constructor(t=1){this.pixelRatio=t,this.generated=!1,this.centerCoordinates={x:144.5,y:144.5},this.r=289*.49,this.color={r:255,g:255,b:255,a:1},this.hueCircle=void 0,this.initialColor={r:255,g:255,b:255,a:1},this.previousColor=void 0,this.applied=!1,this.updateCallback=()=>{},this.closeCallback=()=>{},this._create()}insertTo(t){void 0!==this.hammer&&(this.hammer.destroy(),this.hammer=void 0),this.container=t,this.container.appendChild(this.frame),this._bindHammer(),this._setSize()}setUpdateCallback(t){if("function"!=typeof t)throw new Error("Function attempted to set as colorPicker update callback is not a function.");this.updateCallback=t}setCloseCallback(t){if("function"!=typeof t)throw new Error("Function attempted to set as colorPicker closing callback is not a function.");this.closeCallback=t}_isColorString(t){if("string"==typeof t)return fn[t]}setColor(t,e=!0){if("none"===t)return;let n;const i=this._isColorString(t);if(void 0!==i&&(t=i),!0===pe(t)){if(!0===en(t)){const e=t.substr(4).substr(0,t.length-5).split(",");n={r:e[0],g:e[1],b:e[2],a:1}}else if(!0===nn(t)){const e=t.substr(5).substr(0,t.length-6).split(",");n={r:e[0],g:e[1],b:e[2],a:e[3]}}else if(!0===tn(t)){const e=Ge(t);n={r:e.r,g:e.g,b:e.b,a:1}}}else if(t instanceof Object&&void 0!==t.r&&void 0!==t.g&&void 0!==t.b){const e=void 0!==t.a?t.a:"1.0";n={r:t.r,g:t.g,b:t.b,a:e}}if(void 0===n)throw new Error("Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: "+JSON.stringify(t));this._setColor(n,e)}show(){void 0!==this.closeCallback&&(this.closeCallback(),this.closeCallback=void 0),this.applied=!1,this.frame.style.display="block",this._generateHueCircle()}_hide(t=!0){!0===t&&(this.previousColor=Object.assign({},this.color)),!0===this.applied&&this.updateCallback(this.initialColor),this.frame.style.display="none",setTimeout((()=>{void 0!==this.closeCallback&&(this.closeCallback(),this.closeCallback=void 0)}),0)}_save(){this.updateCallback(this.color),this.applied=!1,this._hide()}_apply(){this.applied=!0,this.updateCallback(this.color),this._updatePicker(this.color)}_loadLast(){void 0!==this.previousColor?this.setColor(this.previousColor,!1):alert("There is no last color to load...")}_setColor(t,e=!0){!0===e&&(this.initialColor=Object.assign({},t)),this.color=t;const n=Xe(t.r,t.g,t.b),i=2*Math.PI,r=this.r*n.s,o=this.centerCoordinates.x+r*Math.sin(i*n.h),a=this.centerCoordinates.y+r*Math.cos(i*n.h);this.colorPickerSelector.style.left=o-.5*this.colorPickerSelector.clientWidth+"px",this.colorPickerSelector.style.top=a-.5*this.colorPickerSelector.clientHeight+"px",this._updatePicker(t)}_setOpacity(t){this.color.a=t/100,this._updatePicker(this.color)}_setBrightness(t){const e=Xe(this.color.r,this.color.g,this.color.b);e.v=t/100;const n=Ze(e.h,e.s,e.v);n.a=this.color.a,this.color=n,this._updatePicker()}_updatePicker(t=this.color){const e=Xe(t.r,t.g,t.b),n=this.colorPickerCanvas.getContext("2d");void 0===this.pixelRation&&(this.pixelRatio=(window.devicePixelRatio||1)/(n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1)),n.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);const i=this.colorPickerCanvas.clientWidth,r=this.colorPickerCanvas.clientHeight;n.clearRect(0,0,i,r),n.putImageData(this.hueCircle,0,0),n.fillStyle="rgba(0,0,0,"+(1-e.v)+")",n.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),n.fill(),this.brightnessRange.value=100*e.v,this.opacityRange.value=100*t.a,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}_setSize(){this.colorPickerCanvas.style.width="100%",this.colorPickerCanvas.style.height="100%",this.colorPickerCanvas.width=289*this.pixelRatio,this.colorPickerCanvas.height=289*this.pixelRatio}_create(){if(this.frame=document.createElement("div"),this.frame.className="vis-color-picker",this.colorPickerDiv=document.createElement("div"),this.colorPickerSelector=document.createElement("div"),this.colorPickerSelector.className="vis-selector",this.colorPickerDiv.appendChild(this.colorPickerSelector),this.colorPickerCanvas=document.createElement("canvas"),this.colorPickerDiv.appendChild(this.colorPickerCanvas),this.colorPickerCanvas.getContext){const t=this.colorPickerCanvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1),this.colorPickerCanvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else{const t=document.createElement("DIV");t.style.color="red",t.style.fontWeight="bold",t.style.padding="10px",t.innerText="Error: your browser does not support HTML canvas",this.colorPickerCanvas.appendChild(t)}this.colorPickerDiv.className="vis-color",this.opacityDiv=document.createElement("div"),this.opacityDiv.className="vis-opacity",this.brightnessDiv=document.createElement("div"),this.brightnessDiv.className="vis-brightness",this.arrowDiv=document.createElement("div"),this.arrowDiv.className="vis-arrow",this.opacityRange=document.createElement("input");try{this.opacityRange.type="range",this.opacityRange.min="0",this.opacityRange.max="100"}catch(t){}this.opacityRange.value="100",this.opacityRange.className="vis-range",this.brightnessRange=document.createElement("input");try{this.brightnessRange.type="range",this.brightnessRange.min="0",this.brightnessRange.max="100"}catch(t){}this.brightnessRange.value="100",this.brightnessRange.className="vis-range",this.opacityDiv.appendChild(this.opacityRange),this.brightnessDiv.appendChild(this.brightnessRange);const t=this;this.opacityRange.onchange=function(){t._setOpacity(this.value)},this.opacityRange.oninput=function(){t._setOpacity(this.value)},this.brightnessRange.onchange=function(){t._setBrightness(this.value)},this.brightnessRange.oninput=function(){t._setBrightness(this.value)},this.brightnessLabel=document.createElement("div"),this.brightnessLabel.className="vis-label vis-brightness",this.brightnessLabel.innerText="brightness:",this.opacityLabel=document.createElement("div"),this.opacityLabel.className="vis-label vis-opacity",this.opacityLabel.innerText="opacity:",this.newColorDiv=document.createElement("div"),this.newColorDiv.className="vis-new-color",this.newColorDiv.innerText="new",this.initialColorDiv=document.createElement("div"),this.initialColorDiv.className="vis-initial-color",this.initialColorDiv.innerText="initial",this.cancelButton=document.createElement("div"),this.cancelButton.className="vis-button vis-cancel",this.cancelButton.innerText="cancel",this.cancelButton.onclick=this._hide.bind(this,!1),this.applyButton=document.createElement("div"),this.applyButton.className="vis-button vis-apply",this.applyButton.innerText="apply",this.applyButton.onclick=this._apply.bind(this),this.saveButton=document.createElement("div"),this.saveButton.className="vis-button vis-save",this.saveButton.innerText="save",this.saveButton.onclick=this._save.bind(this),this.loadButton=document.createElement("div"),this.loadButton.className="vis-button vis-load",this.loadButton.innerText="load last",this.loadButton.onclick=this._loadLast.bind(this),this.frame.appendChild(this.colorPickerDiv),this.frame.appendChild(this.arrowDiv),this.frame.appendChild(this.brightnessLabel),this.frame.appendChild(this.brightnessDiv),this.frame.appendChild(this.opacityLabel),this.frame.appendChild(this.opacityDiv),this.frame.appendChild(this.newColorDiv),this.frame.appendChild(this.initialColorDiv),this.frame.appendChild(this.cancelButton),this.frame.appendChild(this.applyButton),this.frame.appendChild(this.saveButton),this.frame.appendChild(this.loadButton)}_bindHammer(){this.drag={},this.pinch={},this.hammer=new oe(this.colorPickerCanvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.on("hammer.input",(t=>{t.isFirst&&this._moveSelector(t)})),this.hammer.on("tap",(t=>{this._moveSelector(t)})),this.hammer.on("panstart",(t=>{this._moveSelector(t)})),this.hammer.on("panmove",(t=>{this._moveSelector(t)})),this.hammer.on("panend",(t=>{this._moveSelector(t)}))}_generateHueCircle(){if(!1===this.generated){const t=this.colorPickerCanvas.getContext("2d");void 0===this.pixelRation&&(this.pixelRatio=(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)),t.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);const e=this.colorPickerCanvas.clientWidth,n=this.colorPickerCanvas.clientHeight;let i,r,o,a;t.clearRect(0,0,e,n),this.centerCoordinates={x:.5*e,y:.5*n},this.r=.49*e;const s=2*Math.PI/360,l=1/360,u=1/this.r;let c;for(o=0;o<360;o++)for(a=0;a<this.r;a++)i=this.centerCoordinates.x+a*Math.sin(s*o),r=this.centerCoordinates.y+a*Math.cos(s*o),c=Ze(o*l,a*u,1),t.fillStyle="rgb("+c.r+","+c.g+","+c.b+")",t.fillRect(i-.5,r-.5,2,2);t.strokeStyle="rgba(0,0,0,1)",t.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),t.stroke(),this.hueCircle=t.getImageData(0,0,e,n)}this.generated=!0}_moveSelector(t){const e=this.colorPickerDiv.getBoundingClientRect(),n=t.center.x-e.left,i=t.center.y-e.top,r=.5*this.colorPickerDiv.clientHeight,o=.5*this.colorPickerDiv.clientWidth,a=n-o,s=i-r,l=Math.atan2(a,s),u=.98*Math.min(Math.sqrt(a*a+s*s),o),c=Math.cos(l)*u+r,h=Math.sin(l)*u+o;this.colorPickerSelector.style.top=c-.5*this.colorPickerSelector.clientHeight+"px",this.colorPickerSelector.style.left=h-.5*this.colorPickerSelector.clientWidth+"px";let d=l/(2*Math.PI);d=d<0?d+1:d;const f=u/this.r,p=Xe(this.color.r,this.color.g,this.color.b);p.h=d,p.s=f;const m=Ze(p.h,p.s,p.v);m.a=this.color.a,this.color=m,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}}function mn(...t){if(t.length<1)throw new TypeError("Invalid arguments.");if(1===t.length)return document.createTextNode(t[0]);{const e=document.createElement(t[0]);return e.appendChild(mn(...t.slice(1))),e}}let gn,vn=!1;const yn="background: #FFeeee; color: #dd0000";class bn{static validate(t,e,n){vn=!1,gn=e;let i=e;return void 0!==n&&(i=e[n]),bn.parse(t,i,[]),vn}static parse(t,e,n){for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&bn.check(i,t,e,n)}static check(t,e,n,i){if(void 0===n[t]&&void 0===n.__any__)return void bn.getSuggestion(t,n,i);let r=t,o=!0;void 0===n[t]&&void 0!==n.__any__&&(r="__any__",o="object"===bn.getType(e[t]));let a=n[r];o&&void 0!==a.__type__&&(a=a.__type__),bn.checkFields(t,e,n,r,a,i)}static checkFields(t,e,n,i,r,o){const a=function(e){console.error("%c"+e+bn.printLocation(o,t),yn)},s=bn.getType(e[t]),l=r[s];void 0!==l?"array"===bn.getType(l)&&-1===l.indexOf(e[t])?(a('Invalid option detected in "'+t+'". Allowed values are:'+bn.print(l)+' not "'+e[t]+'". '),vn=!0):"object"===s&&"__any__"!==i&&(o=ke(o,t),bn.parse(e[t],n[i],o)):void 0===r.any&&(a('Invalid type received for "'+t+'". Expected: '+bn.print(Object.keys(r))+". Received ["+s+'] "'+e[t]+'"'),vn=!0)}static getType(t){const e=typeof t;return"object"===e?null===t?"null":t instanceof Boolean?"boolean":t instanceof Number?"number":t instanceof String?"string":Array.isArray(t)?"array":t instanceof Date?"date":void 0!==t.nodeType?"dom":!0===t._isAMomentObject?"moment":"object":"number"===e?"number":"boolean"===e?"boolean":"string"===e?"string":void 0===e?"undefined":e}static getSuggestion(t,e,n){const i=bn.findInOptions(t,e,n,!1),r=bn.findInOptions(t,gn,[],!0);let o;o=void 0!==i.indexMatch?" in "+bn.printLocation(i.path,t,"")+'Perhaps it was incomplete? Did you mean: "'+i.indexMatch+'"?\n\n':r.distance<=4&&i.distance>r.distance?" in "+bn.printLocation(i.path,t,"")+"Perhaps it was misplaced? Matching option found at: "+bn.printLocation(r.path,r.closestMatch,""):i.distance<=8?'. Did you mean "'+i.closestMatch+'"?'+bn.printLocation(i.path,t):". Did you mean one of these: "+bn.print(Object.keys(e))+bn.printLocation(n,t),console.error('%cUnknown option detected: "'+t+'"'+o,yn),vn=!0}static findInOptions(t,e,n,i=!1){let r=1e9,o="",a=[];const s=t.toLowerCase();let l;for(const u in e){let c;if(void 0!==e[u].__type__&&!0===i){const i=bn.findInOptions(t,e[u],ke(n,u));r>i.distance&&(o=i.closestMatch,a=i.path,r=i.distance,l=i.indexMatch)}else-1!==u.toLowerCase().indexOf(s)&&(l=u),c=bn.levenshteinDistance(t,u),r>c&&(o=u,a=Ce(n),r=c)}return{closestMatch:o,path:a,distance:r,indexMatch:l}}static printLocation(t,e,n="Problem value found at: \n"){let i="\n\n"+n+"options = {\n";for(let e=0;e<t.length;e++){for(let t=0;t<e+1;t++)i+="  ";i+=t[e]+": {\n"}for(let e=0;e<t.length+1;e++)i+="  ";i+=e+"\n";for(let e=0;e<t.length+1;e++){for(let n=0;n<t.length-e;n++)i+="  ";i+="}\n"}return i+"\n\n"}static print(t){return JSON.stringify(t).replace(/(")|(\[)|(\])|(,"__type__")/g,"").replace(/(,)/g,", ")}static levenshteinDistance(t,e){if(0===t.length)return e.length;if(0===e.length)return t.length;const n=[];let i,r;for(i=0;i<=e.length;i++)n[i]=[i];for(r=0;r<=t.length;r++)n[0][r]=r;for(i=1;i<=e.length;i++)for(r=1;r<=t.length;r++)e.charAt(i-1)==t.charAt(r-1)?n[i][r]=n[i-1][r-1]:n[i][r]=Math.min(n[i-1][r-1]+1,Math.min(n[i][r-1]+1,n[i-1][r]+1));return n[e.length][t.length]}}const _n=ae,wn=pn,xn=class{constructor(t,e,n,i=1,r=(()=>!1)){this.parent=t,this.changedOptions=[],this.container=e,this.allowCreation=!1,this.hideOption=r,this.options={},this.initialized=!1,this.popupCounter=0,this.defaultOptions={enabled:!1,filter:!0,container:void 0,showButton:!0},Object.assign(this.options,this.defaultOptions),this.configureOptions=n,this.moduleOptions={},this.domElements=[],this.popupDiv={},this.popupLimit=5,this.popupHistory={},this.colorPicker=new pn(i),this.wrapper=void 0}setOptions(t){if(void 0!==t){this.popupHistory={},this._removePopup();let e=!0;if("string"==typeof t)this.options.filter=t;else if(Array.isArray(t))this.options.filter=t.join();else if("object"==typeof t){if(null==t)throw new TypeError("options cannot be null");void 0!==t.container&&(this.options.container=t.container),void 0!==t.filter&&(this.options.filter=t.filter),void 0!==t.showButton&&(this.options.showButton=t.showButton),void 0!==t.enabled&&(e=t.enabled)}else"boolean"==typeof t?(this.options.filter=!0,e=t):"function"==typeof t&&(this.options.filter=t,e=!0);!1===this.options.filter&&(e=!1),this.options.enabled=e}this._clean()}setModuleOptions(t){this.moduleOptions=t,!0===this.options.enabled&&(this._clean(),void 0!==this.options.container&&(this.container=this.options.container),this._create())}_create(){this._clean(),this.changedOptions=[];const t=this.options.filter;let e=0,n=!1;for(const i in this.configureOptions)Object.prototype.hasOwnProperty.call(this.configureOptions,i)&&(this.allowCreation=!1,n=!1,"function"==typeof t?(n=t(i,[]),n=n||this._handleObject(this.configureOptions[i],[i],!0)):!0!==t&&-1===t.indexOf(i)||(n=!0),!1!==n&&(this.allowCreation=!0,e>0&&this._makeItem([]),this._makeHeader(i),this._handleObject(this.configureOptions[i],[i])),e++);this._makeButton(),this._push()}_push(){this.wrapper=document.createElement("div"),this.wrapper.className="vis-configuration-wrapper",this.container.appendChild(this.wrapper);for(let t=0;t<this.domElements.length;t++)this.wrapper.appendChild(this.domElements[t]);this._showPopupIfNeeded()}_clean(){for(let t=0;t<this.domElements.length;t++)this.wrapper.removeChild(this.domElements[t]);void 0!==this.wrapper&&(this.container.removeChild(this.wrapper),this.wrapper=void 0),this.domElements=[],this._removePopup()}_getValue(t){let e=this.moduleOptions;for(let n=0;n<t.length;n++){if(void 0===e[t[n]]){e=void 0;break}e=e[t[n]]}return e}_makeItem(t,...e){if(!0===this.allowCreation){const n=document.createElement("div");return n.className="vis-configuration vis-config-item vis-config-s"+t.length,e.forEach((t=>{n.appendChild(t)})),this.domElements.push(n),this.domElements.length}return 0}_makeHeader(t){const e=document.createElement("div");e.className="vis-configuration vis-config-header",e.innerText=t,this._makeItem([],e)}_makeLabel(t,e,n=!1){const i=document.createElement("div");if(i.className="vis-configuration vis-config-label vis-config-s"+e.length,!0===n){for(;i.firstChild;)i.removeChild(i.firstChild);i.appendChild(mn("i","b",t))}else i.innerText=t+":";return i}_makeDropdown(t,e,n){const i=document.createElement("select");i.className="vis-configuration vis-config-select";let r=0;void 0!==e&&-1!==t.indexOf(e)&&(r=t.indexOf(e));for(let e=0;e<t.length;e++){const n=document.createElement("option");n.value=t[e],e===r&&(n.selected="selected"),n.innerText=t[e],i.appendChild(n)}const o=this;i.onchange=function(){o._update(this.value,n)};const a=this._makeLabel(n[n.length-1],n);this._makeItem(n,a,i)}_makeRange(t,e,n){const i=t[0],r=t[1],o=t[2],a=t[3],s=document.createElement("input");s.className="vis-configuration vis-config-range";try{s.type="range",s.min=r,s.max=o}catch(t){}s.step=a;let l="",u=0;if(void 0!==e){const t=1.2;e<0&&e*t<r?(s.min=Math.ceil(e*t),u=s.min,l="range increased"):e/t<r&&(s.min=Math.ceil(e/t),u=s.min,l="range increased"),e*t>o&&1!==o&&(s.max=Math.ceil(e*t),u=s.max,l="range increased"),s.value=e}else s.value=i;const c=document.createElement("input");c.className="vis-configuration vis-config-rangeinput",c.value=s.value;const h=this;s.onchange=function(){c.value=this.value,h._update(Number(this.value),n)},s.oninput=function(){c.value=this.value};const d=this._makeLabel(n[n.length-1],n),f=this._makeItem(n,d,s,c);""!==l&&this.popupHistory[f]!==u&&(this.popupHistory[f]=u,this._setupPopup(l,f))}_makeButton(){if(!0===this.options.showButton){const t=document.createElement("div");t.className="vis-configuration vis-config-button",t.innerText="generate options",t.onclick=()=>{this._printOptions()},t.onmouseover=()=>{t.className="vis-configuration vis-config-button hover"},t.onmouseout=()=>{t.className="vis-configuration vis-config-button"},this.optionsContainer=document.createElement("div"),this.optionsContainer.className="vis-configuration vis-config-option-container",this.domElements.push(this.optionsContainer),this.domElements.push(t)}}_setupPopup(t,e){if(!0===this.initialized&&!0===this.allowCreation&&this.popupCounter<this.popupLimit){const n=document.createElement("div");n.id="vis-configuration-popup",n.className="vis-configuration-popup",n.innerText=t,n.onclick=()=>{this._removePopup()},this.popupCounter+=1,this.popupDiv={html:n,index:e}}}_removePopup(){void 0!==this.popupDiv.html&&(this.popupDiv.html.parentNode.removeChild(this.popupDiv.html),clearTimeout(this.popupDiv.hideTimeout),clearTimeout(this.popupDiv.deleteTimeout),this.popupDiv={})}_showPopupIfNeeded(){if(void 0!==this.popupDiv.html){const t=this.domElements[this.popupDiv.index].getBoundingClientRect();this.popupDiv.html.style.left=t.left+"px",this.popupDiv.html.style.top=t.top-30+"px",document.body.appendChild(this.popupDiv.html),this.popupDiv.hideTimeout=setTimeout((()=>{this.popupDiv.html.style.opacity=0}),1500),this.popupDiv.deleteTimeout=setTimeout((()=>{this._removePopup()}),1800)}}_makeCheckbox(t,e,n){const i=document.createElement("input");i.type="checkbox",i.className="vis-configuration vis-config-checkbox",i.checked=t,void 0!==e&&(i.checked=e,e!==t&&("object"==typeof t?e!==t.enabled&&this.changedOptions.push({path:n,value:e}):this.changedOptions.push({path:n,value:e})));const r=this;i.onchange=function(){r._update(this.checked,n)};const o=this._makeLabel(n[n.length-1],n);this._makeItem(n,o,i)}_makeTextInput(t,e,n){const i=document.createElement("input");i.type="text",i.className="vis-configuration vis-config-text",i.value=e,e!==t&&this.changedOptions.push({path:n,value:e});const r=this;i.onchange=function(){r._update(this.value,n)};const o=this._makeLabel(n[n.length-1],n);this._makeItem(n,o,i)}_makeColorField(t,e,n){const i=t[1],r=document.createElement("div");"none"!==(e=void 0===e?i:e)?(r.className="vis-configuration vis-config-colorBlock",r.style.backgroundColor=e):r.className="vis-configuration vis-config-colorBlock none",e=void 0===e?i:e,r.onclick=()=>{this._showColorPicker(e,r,n)};const o=this._makeLabel(n[n.length-1],n);this._makeItem(n,o,r)}_showColorPicker(t,e,n){e.onclick=function(){},this.colorPicker.insertTo(e),this.colorPicker.show(),this.colorPicker.setColor(t),this.colorPicker.setUpdateCallback((t=>{const i="rgba("+t.r+","+t.g+","+t.b+","+t.a+")";e.style.backgroundColor=i,this._update(i,n)})),this.colorPicker.setCloseCallback((()=>{e.onclick=()=>{this._showColorPicker(t,e,n)}}))}_handleObject(t,e=[],n=!1){let i=!1;const r=this.options.filter;let o=!1;for(const a in t)if(Object.prototype.hasOwnProperty.call(t,a)){i=!0;const s=t[a],l=ke(e,a);if("function"==typeof r&&(i=r(a,e),!1===i&&!Array.isArray(s)&&"string"!=typeof s&&"boolean"!=typeof s&&s instanceof Object&&(this.allowCreation=!1,i=this._handleObject(s,l,!0),this.allowCreation=!1===n)),!1!==i){o=!0;const t=this._getValue(l);if(Array.isArray(s))this._handleArray(s,t,l);else if("string"==typeof s)this._makeTextInput(s,t,l);else if("boolean"==typeof s)this._makeCheckbox(s,t,l);else if(s instanceof Object){if(!this.hideOption(e,a,this.moduleOptions))if(void 0!==s.enabled){const t=ke(l,"enabled"),e=this._getValue(t);if(!0===e){const t=this._makeLabel(a,l,!0);this._makeItem(l,t),o=this._handleObject(s,l)||o}else this._makeCheckbox(s,e,l)}else{const t=this._makeLabel(a,l,!0);this._makeItem(l,t),o=this._handleObject(s,l)||o}}else console.error("dont know how to handle",s,a,l)}}return o}_handleArray(t,e,n){"string"==typeof t[0]&&"color"===t[0]?(this._makeColorField(t,e,n),t[1]!==e&&this.changedOptions.push({path:n,value:e})):"string"==typeof t[0]?(this._makeDropdown(t,e,n),t[0]!==e&&this.changedOptions.push({path:n,value:e})):"number"==typeof t[0]&&(this._makeRange(t,e,n),t[0]!==e&&this.changedOptions.push({path:n,value:Number(e)}))}_update(t,e){const n=this._constructOptions(t,e);this.parent.body&&this.parent.body.emitter&&this.parent.body.emitter.emit&&this.parent.body.emitter.emit("configChange",n),this.initialized=!0,this.parent.setOptions(n)}_constructOptions(t,e,n={}){let i=n;t="false"!==(t="true"===t||t)&&t;for(let n=0;n<e.length;n++)"global"!==e[n]&&(void 0===i[e[n]]&&(i[e[n]]={}),n!==e.length-1?i=i[e[n]]:i[e[n]]=t);return n}_printOptions(){const t=this.getOptions();for(;this.optionsContainer.firstChild;)this.optionsContainer.removeChild(this.optionsContainer.firstChild);this.optionsContainer.appendChild(mn("pre","const options = "+JSON.stringify(t,null,2)))}getOptions(){const t={};for(let e=0;e<this.changedOptions.length;e++)this._constructOptions(this.changedOptions[e].value,this.changedOptions[e].path,t);return t}},Mn=oe,En=class{constructor(t,e){this.container=t,this.overflowMethod=e||"cap",this.x=0,this.y=0,this.padding=5,this.hidden=!1,this.frame=document.createElement("div"),this.frame.className="vis-tooltip",this.container.appendChild(this.frame)}setPosition(t,e){this.x=parseInt(t),this.y=parseInt(e)}setText(t){if(t instanceof Element){for(;this.frame.firstChild;)this.frame.removeChild(this.frame.firstChild);this.frame.appendChild(t)}else this.frame.innerText=t}show(t){if(void 0===t&&(t=!0),!0===t){const t=this.frame.clientHeight,e=this.frame.clientWidth,n=this.frame.parentNode.clientHeight,i=this.frame.parentNode.clientWidth;let r=0,o=0;if("flip"==this.overflowMethod){let n=!1,a=!0;this.y-t<this.padding&&(a=!1),this.x+e>i-this.padding&&(n=!0),r=n?this.x-e:this.x,o=a?this.y-t:this.y}else o=this.y-t,o+t+this.padding>n&&(o=n-t-this.padding),o<this.padding&&(o=this.padding),r=this.x,r+e+this.padding>i&&(r=i-e-this.padding),r<this.padding&&(r=this.padding);this.frame.style.left=r+"px",this.frame.style.top=o+"px",this.frame.style.visibility="visible",this.hidden=!1}else this.hide()}hide(){this.hidden=!0,this.frame.style.left="0",this.frame.style.top="0",this.frame.style.visibility="hidden"}destroy(){this.frame.parentNode.removeChild(this.frame)}},Sn=yn,kn=bn;var Cn,Tn=new Uint8Array(16);function Dn(){if(!Cn&&!(Cn="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Cn(Tn)}const Ln=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const An=function(t){return"string"==typeof t&&Ln.test(t)};for(var On=[],Pn=0;Pn<256;++Pn)On.push((Pn+256).toString(16).substr(1));const In=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(On[t[e+0]]+On[t[e+1]]+On[t[e+2]]+On[t[e+3]]+"-"+On[t[e+4]]+On[t[e+5]]+"-"+On[t[e+6]]+On[t[e+7]]+"-"+On[t[e+8]]+On[t[e+9]]+"-"+On[t[e+10]]+On[t[e+11]]+On[t[e+12]]+On[t[e+13]]+On[t[e+14]]+On[t[e+15]]).toLowerCase();if(!An(n))throw TypeError("Stringified UUID is invalid");return n};const Nn=function(t,e,n){var i=(t=t||{}).random||(t.rng||Dn)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,e){n=n||0;for(var r=0;r<16;++r)e[n+r]=i[r];return e}return In(i)};class Rn{constructor(t,e,n){this._source=t,this._transformers=e,this._target=n,this._listeners={add:this._add.bind(this),remove:this._remove.bind(this),update:this._update.bind(this)}}all(){return this._target.update(this._transformItems(this._source.get())),this}start(){return this._source.on("add",this._listeners.add),this._source.on("remove",this._listeners.remove),this._source.on("update",this._listeners.update),this}stop(){return this._source.off("add",this._listeners.add),this._source.off("remove",this._listeners.remove),this._source.off("update",this._listeners.update),this}_transformItems(t){return this._transformers.reduce(((t,e)=>e(t)),t)}_add(t,e){null!=e&&this._target.add(this._transformItems(this._source.get(e.items)))}_update(t,e){null!=e&&this._target.update(this._transformItems(this._source.get(e.items)))}_remove(t,e){null!=e&&this._target.remove(this._transformItems(e.oldData))}}class Yn{constructor(t){this._source=t,this._transformers=[]}filter(t){return this._transformers.push((e=>e.filter(t))),this}map(t){return this._transformers.push((e=>e.map(t))),this}flatMap(t){return this._transformers.push((e=>e.flatMap(t))),this}to(t){return new Rn(this._source,this._transformers,t)}}function jn(t){return"string"==typeof t||"number"==typeof t}class Fn{constructor(t){this._queue=[],this._timeout=null,this._extended=null,this.delay=null,this.max=1/0,this.setOptions(t)}setOptions(t){t&&void 0!==t.delay&&(this.delay=t.delay),t&&void 0!==t.max&&(this.max=t.max),this._flushIfNeeded()}static extend(t,e){const n=new Fn(e);if(void 0!==t.flush)throw new Error("Target object already has a property flush");t.flush=()=>{n.flush()};const i=[{name:"flush",original:void 0}];if(e&&e.replace)for(let r=0;r<e.replace.length;r++){const o=e.replace[r];i.push({name:o,original:t[o]}),n.replace(t,o)}return n._extended={object:t,methods:i},n}destroy(){if(this.flush(),this._extended){const t=this._extended.object,e=this._extended.methods;for(let n=0;n<e.length;n++){const i=e[n];i.original?t[i.name]=i.original:delete t[i.name]}this._extended=null}}replace(t,e){const n=this,i=t[e];if(!i)throw new Error("Method "+e+" undefined");t[e]=function(...t){n.queue({args:t,fn:i,context:this})}}queue(t){"function"==typeof t?this._queue.push({fn:t}):this._queue.push(t),this._flushIfNeeded()}_flushIfNeeded(){this._queue.length>this.max&&this.flush(),null!=this._timeout&&(clearTimeout(this._timeout),this._timeout=null),this.queue.length>0&&"number"==typeof this.delay&&(this._timeout=setTimeout((()=>{this.flush()}),this.delay))}flush(){this._queue.splice(0).forEach((t=>{t.fn.apply(t.context||t.fn,t.args||[])}))}}class Bn{constructor(){this._subscribers={"*":[],add:[],remove:[],update:[]},this.subscribe=Bn.prototype.on,this.unsubscribe=Bn.prototype.off}_trigger(t,e,n){if("*"===t)throw new Error("Cannot trigger event *");[...this._subscribers[t],...this._subscribers["*"]].forEach((i=>{i(t,e,null!=n?n:null)}))}on(t,e){"function"==typeof e&&this._subscribers[t].push(e)}off(t,e){this._subscribers[t]=this._subscribers[t].filter((t=>t!==e))}}class zn{constructor(t){this._pairs=t}*[Symbol.iterator](){for(const[t,e]of this._pairs)yield[t,e]}*entries(){for(const[t,e]of this._pairs)yield[t,e]}*keys(){for(const[t]of this._pairs)yield t}*values(){for(const[,t]of this._pairs)yield t}toIdArray(){return[...this._pairs].map((t=>t[0]))}toItemArray(){return[...this._pairs].map((t=>t[1]))}toEntryArray(){return[...this._pairs]}toObjectMap(){const t=Object.create(null);for(const[e,n]of this._pairs)t[e]=n;return t}toMap(){return new Map(this._pairs)}toIdSet(){return new Set(this.toIdArray())}toItemSet(){return new Set(this.toItemArray())}cache(){return new zn([...this._pairs])}distinct(t){const e=new Set;for(const[n,i]of this._pairs)e.add(t(i,n));return e}filter(t){const e=this._pairs;return new zn({*[Symbol.iterator](){for(const[n,i]of e)t(i,n)&&(yield[n,i])}})}forEach(t){for(const[e,n]of this._pairs)t(n,e)}map(t){const e=this._pairs;return new zn({*[Symbol.iterator](){for(const[n,i]of e)yield[n,t(i,n)]}})}max(t){const e=this._pairs[Symbol.iterator]();let n=e.next();if(n.done)return null;let i=n.value[1],r=t(n.value[1],n.value[0]);for(;!(n=e.next()).done;){const[e,o]=n.value,a=t(o,e);a>r&&(r=a,i=o)}return i}min(t){const e=this._pairs[Symbol.iterator]();let n=e.next();if(n.done)return null;let i=n.value[1],r=t(n.value[1],n.value[0]);for(;!(n=e.next()).done;){const[e,o]=n.value,a=t(o,e);a<r&&(r=a,i=o)}return i}reduce(t,e){for(const[n,i]of this._pairs)e=t(e,i,n);return e}sort(t){return new zn({[Symbol.iterator]:()=>[...this._pairs].sort((([e,n],[i,r])=>t(n,r,e,i)))[Symbol.iterator]()})}}class Hn extends Bn{constructor(t,e){super(),this._queue=null,t&&!Array.isArray(t)&&(e=t,t=[]),this._options=e||{},this._data=new Map,this.length=0,this._idProp=this._options.fieldId||"id",t&&t.length&&this.add(t),this.setOptions(e)}get idProp(){return this._idProp}setOptions(t){t&&void 0!==t.queue&&(!1===t.queue?this._queue&&(this._queue.destroy(),this._queue=null):(this._queue||(this._queue=Fn.extend(this,{replace:["add","update","remove"]})),t.queue&&"object"==typeof t.queue&&this._queue.setOptions(t.queue)))}add(t,e){const n=[];let i;if(Array.isArray(t)){if(t.map((t=>t[this._idProp])).some((t=>this._data.has(t))))throw new Error("A duplicate id was found in the parameter array.");for(let e=0,r=t.length;e<r;e++)i=this._addItem(t[e]),n.push(i)}else{if(!t||"object"!=typeof t)throw new Error("Unknown dataType");i=this._addItem(t),n.push(i)}return n.length&&this._trigger("add",{items:n},e),n}update(t,e){const n=[],i=[],r=[],o=[],a=this._idProp,s=t=>{const e=t[a];if(null!=e&&this._data.has(e)){const n=t,a=Object.assign({},this._data.get(e)),s=this._updateItem(n);i.push(s),o.push(n),r.push(a)}else{const e=this._addItem(t);n.push(e)}};if(Array.isArray(t))for(let e=0,n=t.length;e<n;e++)t[e]&&"object"==typeof t[e]?s(t[e]):console.warn("Ignoring input item, which is not an object at index "+e);else{if(!t||"object"!=typeof t)throw new Error("Unknown dataType");s(t)}if(n.length&&this._trigger("add",{items:n},e),i.length){const t={items:i,oldData:r,data:o};this._trigger("update",t,e)}return n.concat(i)}updateOnly(t,e){Array.isArray(t)||(t=[t]);const n=t.map((t=>{const e=this._data.get(t[this._idProp]);if(null==e)throw new Error("Updating non-existent items is not allowed.");return{oldData:e,update:t}})).map((({oldData:t,update:e})=>{const n=t[this._idProp],i=Qt(t,e);return this._data.set(n,i),{id:n,oldData:t,updatedData:i}}));if(n.length){const t={items:n.map((t=>t.id)),oldData:n.map((t=>t.oldData)),data:n.map((t=>t.updatedData))};return this._trigger("update",t,e),t.items}return[]}get(t,e){let n,i,r;jn(t)?(n=t,r=e):Array.isArray(t)?(i=t,r=e):r=t;const o=r&&"Object"===r.returnType?"Object":"Array",a=r&&r.filter,s=[];let l,u,c;if(null!=n)l=this._data.get(n),l&&a&&!a(l)&&(l=void 0);else if(null!=i)for(let t=0,e=i.length;t<e;t++)l=this._data.get(i[t]),null==l||a&&!a(l)||s.push(l);else{u=[...this._data.keys()];for(let t=0,e=u.length;t<e;t++)c=u[t],l=this._data.get(c),null==l||a&&!a(l)||s.push(l)}if(r&&r.order&&null==n&&this._sort(s,r.order),r&&r.fields){const t=r.fields;if(null!=n&&null!=l)l=this._filterFields(l,t);else for(let e=0,n=s.length;e<n;e++)s[e]=this._filterFields(s[e],t)}if("Object"==o){const t={};for(let e=0,n=s.length;e<n;e++){const n=s[e];t[n[this._idProp]]=n}return t}return null!=n?l??null:s}getIds(t){const e=this._data,n=t&&t.filter,i=t&&t.order,r=[...e.keys()],o=[];if(n)if(i){const t=[];for(let e=0,i=r.length;e<i;e++){const i=r[e],o=this._data.get(i);null!=o&&n(o)&&t.push(o)}this._sort(t,i);for(let e=0,n=t.length;e<n;e++)o.push(t[e][this._idProp])}else for(let t=0,e=r.length;t<e;t++){const e=r[t],i=this._data.get(e);null!=i&&n(i)&&o.push(i[this._idProp])}else if(i){const t=[];for(let n=0,i=r.length;n<i;n++){const i=r[n];t.push(e.get(i))}this._sort(t,i);for(let e=0,n=t.length;e<n;e++)o.push(t[e][this._idProp])}else for(let t=0,n=r.length;t<n;t++){const n=r[t],i=e.get(n);null!=i&&o.push(i[this._idProp])}return o}getDataSet(){return this}forEach(t,e){const n=e&&e.filter,i=[...this._data.keys()];if(e&&e.order){const n=this.get(e);for(let e=0,i=n.length;e<i;e++){const i=n[e];t(i,i[this._idProp])}}else for(let e=0,r=i.length;e<r;e++){const r=i[e],o=this._data.get(r);null==o||n&&!n(o)||t(o,r)}}map(t,e){const n=e&&e.filter,i=[],r=[...this._data.keys()];for(let e=0,o=r.length;e<o;e++){const o=r[e],a=this._data.get(o);null==a||n&&!n(a)||i.push(t(a,o))}return e&&e.order&&this._sort(i,e.order),i}_filterFields(t,e){return t?(Array.isArray(e)?e:Object.keys(e)).reduce(((e,n)=>(e[n]=t[n],e)),{}):t}_sort(t,e){if("string"==typeof e){const n=e;t.sort(((t,e)=>{const i=t[n],r=e[n];return i>r?1:i<r?-1:0}))}else{if("function"!=typeof e)throw new TypeError("Order must be a function or a string");t.sort(e)}}remove(t,e){const n=[],i=[],r=Array.isArray(t)?t:[t];for(let t=0,e=r.length;t<e;t++){const e=this._remove(r[t]);if(e){const t=e[this._idProp];null!=t&&(n.push(t),i.push(e))}}return n.length&&this._trigger("remove",{items:n,oldData:i},e),n}_remove(t){let e;if(jn(t)?e=t:t&&"object"==typeof t&&(e=t[this._idProp]),null!=e&&this._data.has(e)){const t=this._data.get(e)||null;return this._data.delete(e),--this.length,t}return null}clear(t){const e=[...this._data.keys()],n=[];for(let t=0,i=e.length;t<i;t++)n.push(this._data.get(e[t]));return this._data.clear(),this.length=0,this._trigger("remove",{items:e,oldData:n},t),e}max(t){let e=null,n=null;for(const i of this._data.values()){const r=i[t];"number"==typeof r&&(null==n||r>n)&&(e=i,n=r)}return e||null}min(t){let e=null,n=null;for(const i of this._data.values()){const r=i[t];"number"==typeof r&&(null==n||r<n)&&(e=i,n=r)}return e||null}distinct(t){const e=this._data,n=[...e.keys()],i=[];let r=0;for(let o=0,a=n.length;o<a;o++){const a=n[o],s=e.get(a)[t];let l=!1;for(let t=0;t<r;t++)if(i[t]==s){l=!0;break}l||void 0===s||(i[r]=s,r++)}return i}_addItem(t){const e=function(t,e){return null==t[e]&&(t[e]=Nn()),t}(t,this._idProp),n=e[this._idProp];if(this._data.has(n))throw new Error("Cannot add item: item with id "+n+" already exists");return this._data.set(n,e),++this.length,n}_updateItem(t){const e=t[this._idProp];if(null==e)throw new Error("Cannot update item: item has no id (item: "+JSON.stringify(t)+")");const n=this._data.get(e);if(!n)throw new Error("Cannot update item: no item with id "+e+" found");return this._data.set(e,{...n,...t}),e}stream(t){if(t){const e=this._data;return new zn({*[Symbol.iterator](){for(const n of t){const t=e.get(n);null!=t&&(yield[n,t])}}})}return new zn({[Symbol.iterator]:this._data.entries.bind(this._data)})}}class Gn extends Bn{constructor(t,e){super(),this.length=0,this._ids=new Set,this._options=e||{},this._listener=this._onEvent.bind(this),this.setData(t)}get idProp(){return this.getDataSet().idProp}setData(t){if(this._data){this._data.off&&this._data.off("*",this._listener);const t=this._data.getIds({filter:this._options.filter}),e=this._data.get(t);this._ids.clear(),this.length=0,this._trigger("remove",{items:t,oldData:e})}if(null!=t){this._data=t;const e=this._data.getIds({filter:this._options.filter});for(let t=0,n=e.length;t<n;t++){const n=e[t];this._ids.add(n)}this.length=e.length,this._trigger("add",{items:e})}else this._data=new Hn;this._data.on&&this._data.on("*",this._listener)}refresh(){const t=this._data.getIds({filter:this._options.filter}),e=[...this._ids],n={},i=[],r=[],o=[];for(let e=0,r=t.length;e<r;e++){const r=t[e];n[r]=!0,this._ids.has(r)||(i.push(r),this._ids.add(r))}for(let t=0,i=e.length;t<i;t++){const i=e[t],a=this._data.get(i);null==a?console.error("If you see this, report it please."):n[i]||(r.push(i),o.push(a),this._ids.delete(i))}this.length+=i.length-r.length,i.length&&this._trigger("add",{items:i}),r.length&&this._trigger("remove",{items:r,oldData:o})}get(t,e){if(null==this._data)return null;let n,i=null;jn(t)||Array.isArray(t)?(i=t,n=e):n=t;const r=Object.assign({},this._options,n),o=this._options.filter,a=n&&n.filter;return o&&a&&(r.filter=t=>o(t)&&a(t)),null==i?this._data.get(r):this._data.get(i,r)}getIds(t){if(this._data.length){const e=this._options.filter,n=null!=t?t.filter:null;let i;return i=n?e?t=>e(t)&&n(t):n:e,this._data.getIds({filter:i,order:t&&t.order})}return[]}forEach(t,e){if(this._data){const n=this._options.filter,i=e&&e.filter;let r;r=i?n?function(t){return n(t)&&i(t)}:i:n,this._data.forEach(t,{filter:r,order:e&&e.order})}}map(t,e){if(this._data){const n=this._options.filter,i=e&&e.filter;let r;return r=i?n?t=>n(t)&&i(t):i:n,this._data.map(t,{filter:r,order:e&&e.order})}return[]}getDataSet(){return this._data.getDataSet()}stream(t){return this._data.stream(t||{[Symbol.iterator]:this._ids.keys.bind(this._ids)})}dispose(){this._data?.off&&this._data.off("*",this._listener);const t="This data view has already been disposed of.",e={get:()=>{throw new Error(t)},set:()=>{throw new Error(t)},configurable:!1};for(const t of Reflect.ownKeys(Gn.prototype))Object.defineProperty(this,t,e)}_onEvent(t,e,n){if(!e||!e.items||!this._data)return;const i=e.items,r=[],o=[],a=[],s=[],l=[],u=[];switch(t){case"add":for(let t=0,e=i.length;t<e;t++){const e=i[t];this.get(e)&&(this._ids.add(e),r.push(e))}break;case"update":for(let t=0,n=i.length;t<n;t++){const n=i[t];this.get(n)?this._ids.has(n)?(o.push(n),l.push(e.data[t]),s.push(e.oldData[t])):(this._ids.add(n),r.push(n)):this._ids.has(n)&&(this._ids.delete(n),a.push(n),u.push(e.oldData[t]))}break;case"remove":for(let t=0,n=i.length;t<n;t++){const n=i[t];this._ids.has(n)&&(this._ids.delete(n),a.push(n),u.push(e.oldData[t]))}}this.length+=r.length-a.length,r.length&&this._trigger("add",{items:r},n),o.length&&this._trigger("update",{items:o,oldData:s,data:l},n),a.length&&this._trigger("remove",{items:a,oldData:u},n)}}function Wn(t,e){return"object"==typeof e&&null!==e&&t===e.idProp&&"function"==typeof e.forEach&&"function"==typeof e.get&&"function"==typeof e.getDataSet&&"function"==typeof e.getIds&&"number"==typeof e.length&&"function"==typeof e.map&&"function"==typeof e.off&&"function"==typeof e.on&&"function"==typeof e.stream&&function(t,e){return"object"==typeof e&&null!==e&&t===e.idProp&&"function"==typeof e.add&&"function"==typeof e.clear&&"function"==typeof e.distinct&&"function"==typeof e.forEach&&"function"==typeof e.get&&"function"==typeof e.getDataSet&&"function"==typeof e.getIds&&"number"==typeof e.length&&"function"==typeof e.map&&"function"==typeof e.max&&"function"==typeof e.min&&"function"==typeof e.off&&"function"==typeof e.on&&"function"==typeof e.remove&&"function"==typeof e.setOptions&&"function"==typeof e.stream&&"function"==typeof e.update&&"function"==typeof e.updateOnly}(t,e.getDataSet())}var Un=n(68924),Vn=n.n(Un),Xn=null;var qn="undefined"!=typeof window&&window.moment||a();const Kn=/^\/?Date\((-?\d+)/i,$n=/^\d+$/;function Zn(t,e){let n;if(void 0!==t){if(null===t)return null;if(!e)return t;if("string"!=typeof e&&!(e instanceof String))throw new Error("Type must be a string");switch(e){case"boolean":case"Boolean":return Boolean(t);case"number":case"Number":return pe(t)&&!isNaN(Date.parse(t))?a()(t).valueOf():Number(t.valueOf());case"string":case"String":return String(t);case"Date":try{return Zn(t,"Moment").toDate()}catch(n){throw n instanceof TypeError?new TypeError("Cannot convert object of type "+Se(t)+" to type "+e):n}case"Moment":if(de(t))return a()(t);if(t instanceof Date)return a()(t.valueOf());if(a().isMoment(t))return a()(t);if(pe(t))return n=Kn.exec(t),n?a()(Number(n[1])):(n=$n.exec(t),n?a()(Number(t)):a()(t));throw new TypeError("Cannot convert object of type "+Se(t)+" to type "+e);case"ISODate":if(de(t))return new Date(t);if(t instanceof Date)return t.toISOString();if(a().isMoment(t))return t.toDate().toISOString();if(pe(t))return n=Kn.exec(t),n?new Date(Number(n[1])).toISOString():a()(t).format();throw new Error("Cannot convert object of type "+Se(t)+" to type ISODate");case"ASPDate":if(de(t))return"/Date("+t+")/";if(t instanceof Date||a().isMoment(t))return"/Date("+t.valueOf()+")/";if(pe(t)){let e;return n=Kn.exec(t),e=n?new Date(Number(n[1])).valueOf():new Date(t).valueOf(),"/Date("+e+")/"}throw new Error("Cannot convert object of type "+Se(t)+" to type ASPDate");default:throw new Error(`Unknown type ${e}`)}}}function Jn(t,e={start:"Date",end:"Date"}){const n=t._idProp,i=new Hn({fieldId:n}),r=(o=t,new Yn(o)).map((t=>Object.keys(t).reduce(((n,i)=>(n[i]=Zn(t[i],e[i]),n)),{}))).to(i);var o;return r.all().start(),{add:(...e)=>t.getDataSet().add(...e),remove:(...e)=>t.getDataSet().remove(...e),update:(...e)=>t.getDataSet().update(...e),updateOnly:(...e)=>t.getDataSet().updateOnly(...e),clear:(...e)=>t.getDataSet().clear(...e),forEach:i.forEach.bind(i),get:i.get.bind(i),getIds:i.getIds.bind(i),off:i.off.bind(i),on:i.on.bind(i),get length(){return i.length},idProp:n,type:e,rawDS:t,coercedDS:i,dispose:()=>r.stop()}}const Qn=t=>{const e=new(Vn().FilterXSS)(t);return t=>e.process(t)},ti=t=>t;let ei=Qn();const ni={...r,convert:Zn,setupXSSProtection:t=>{t&&(!0===t.disabled?(ei=ti,console.warn("You disabled XSS protection for vis-Timeline. I sure hope you know what you're doing!")):t.filterOptions&&(ei=Qn(t.filterOptions)))}};Object.defineProperty(ni,"xss",{get:function(){return ei}});class ii{constructor(t,e){this.options=null,this.props=null}setOptions(t){t&&ni.extend(this.options,t)}redraw(){return!1}destroy(){}_isResized(){const t=this.props._previousWidth!==this.props.width||this.props._previousHeight!==this.props.height;return this.props._previousWidth=this.props.width,this.props._previousHeight=this.props.height,t}}function ri(t,e,n){if(n&&!Array.isArray(n))return ri(t,e,[n]);if(e.hiddenDates=[],n&&1==Array.isArray(n)){for(let i=0;i<n.length;i++)if(void 0===n[i].repeat){const r={};r.start=t(n[i].start).toDate().valueOf(),r.end=t(n[i].end).toDate().valueOf(),e.hiddenDates.push(r)}e.hiddenDates.sort(((t,e)=>t.start-e.start))}}function oi(t,e,n){if(n&&!Array.isArray(n))return oi(t,e,[n]);if(n&&void 0!==e.domProps.centerContainer.width){ri(t,e,n);const i=t(e.range.start),r=t(e.range.end),o=(e.range.end-e.range.start)/e.domProps.centerContainer.width;for(let a=0;a<n.length;a++)if(void 0!==n[a].repeat){const s=t(n[a].start);let l=t(n[a].end);if("Invalid Date"==s._d)throw new Error(`Supplied start date is not valid: ${n[a].start}`);if("Invalid Date"==l._d)throw new Error(`Supplied end date is not valid: ${n[a].end}`);if(l-s>=4*o){let t=0;const o=r.clone();switch(n[a].repeat){case"daily":s.day()!=l.day()&&(t=1),s.dayOfYear(i.dayOfYear()),s.year(i.year()),s.subtract(7,"days"),l.dayOfYear(i.dayOfYear()),l.year(i.year()),l.subtract(7-t,"days"),o.add(1,"weeks");break;case"weekly":{const t=l.diff(s,"days"),e=s.day();s.date(i.date()),s.month(i.month()),s.year(i.year()),l=s.clone(),s.day(e),l.day(e),l.add(t,"days"),s.subtract(1,"weeks"),l.subtract(1,"weeks"),o.add(1,"weeks");break}case"monthly":s.month()!=l.month()&&(t=1),s.month(i.month()),s.year(i.year()),s.subtract(1,"months"),l.month(i.month()),l.year(i.year()),l.subtract(1,"months"),l.add(t,"months"),o.add(1,"months");break;case"yearly":s.year()!=l.year()&&(t=1),s.year(i.year()),s.subtract(1,"years"),l.year(i.year()),l.subtract(1,"years"),l.add(t,"years"),o.add(1,"years");break;default:return void console.log("Wrong repeat format, allowed are: daily, weekly, monthly, yearly. Given:",n[a].repeat)}for(;s<o;)switch(e.hiddenDates.push({start:s.valueOf(),end:l.valueOf()}),n[a].repeat){case"daily":s.add(1,"days"),l.add(1,"days");break;case"weekly":s.add(1,"weeks"),l.add(1,"weeks");break;case"monthly":s.add(1,"months"),l.add(1,"months");break;case"yearly":s.add(1,"y"),l.add(1,"y");break;default:return void console.log("Wrong repeat format, allowed are: daily, weekly, monthly, yearly. Given:",n[a].repeat)}e.hiddenDates.push({start:s.valueOf(),end:l.valueOf()})}}ai(e);const a=gi(e.range.start,e.hiddenDates),s=gi(e.range.end,e.hiddenDates);let l=e.range.start,u=e.range.end;1==a.hidden&&(l=1==e.range.startToFront?a.startDate-1:a.endDate+1),1==s.hidden&&(u=1==e.range.endToFront?s.startDate-1:s.endDate+1),1!=a.hidden&&1!=s.hidden||e.range._applyRange(l,u)}}function ai(t){const e=t.hiddenDates,n=[];for(var i=0;i<e.length;i++)for(let t=0;t<e.length;t++)i!=t&&1!=e[t].remove&&1!=e[i].remove&&(e[t].start>=e[i].start&&e[t].end<=e[i].end?e[t].remove=!0:e[t].start>=e[i].start&&e[t].start<=e[i].end?(e[i].end=e[t].end,e[t].remove=!0):e[t].end>=e[i].start&&e[t].end<=e[i].end&&(e[i].start=e[t].start,e[t].remove=!0));for(i=0;i<e.length;i++)!0!==e[i].remove&&n.push(e[i]);t.hiddenDates=n,t.hiddenDates.sort(((t,e)=>t.start-e.start))}function si(t,e,n){let i=!1;const r=e.current.valueOf();for(let t=0;t<e.hiddenDates.length;t++){const n=e.hiddenDates[t].start;var o=e.hiddenDates[t].end;if(r>=n&&r<o){i=!0;break}}if(1==i&&r<e._end.valueOf()&&r!=n){const i=t(n),r=t(o);i.year()!=r.year()?e.switchedYear=!0:i.month()!=r.month()?e.switchedMonth=!0:i.dayOfYear()!=r.dayOfYear()&&(e.switchedDay=!0),e.current=r}}function li(t,e,n){let i;if(0==t.body.hiddenDates.length)return i=t.range.conversion(n),(e.valueOf()-i.offset)*i.scale;{const r=gi(e,t.body.hiddenDates);1==r.hidden&&(e=r.startDate);const o=ci(t.body.hiddenDates,t.range.start,t.range.end);if(e<t.range.start){i=t.range.conversion(n,o);const r=hi(t.body.hiddenDates,e,i.offset);return e=t.options.moment(e).toDate().valueOf(),e+=r,-(i.offset-e.valueOf())*i.scale}if(e>t.range.end){const r={start:t.range.start,end:e};return e=di(t.options.moment,t.body.hiddenDates,r,e),i=t.range.conversion(n,o),(e.valueOf()-i.offset)*i.scale}return e=di(t.options.moment,t.body.hiddenDates,t.range,e),i=t.range.conversion(n,o),(e.valueOf()-i.offset)*i.scale}}function ui(t,e,n){if(0==t.body.hiddenDates.length){const i=t.range.conversion(n);return new Date(e/i.scale+i.offset)}{const i=ci(t.body.hiddenDates,t.range.start,t.range.end),r=(t.range.end-t.range.start-i)*e/n,o=pi(t.body.hiddenDates,t.range,r);return new Date(o+r+t.range.start)}}function ci(t,e,n){let i=0;for(let r=0;r<t.length;r++){const o=t[r].start,a=t[r].end;o>=e&&a<n&&(i+=a-o)}return i}function hi(t,e,n){let i=0;for(let r=0;r<t.length;r++){const o=t[r].start,a=t[r].end;o>=e&&a<=n&&(i+=a-o)}return i}function di(t,e,n,i){return i=t(i).toDate().valueOf(),i-=fi(t,e,n,i)}function fi(t,e,n,i){let r=0;i=t(i).toDate().valueOf();for(let t=0;t<e.length;t++){const o=e[t].start,a=e[t].end;o>=n.start&&a<n.end&&i>=a&&(r+=a-o)}return r}function pi(t,e,n){let i=0,r=0,o=e.start;for(let a=0;a<t.length;a++){const s=t[a].start,l=t[a].end;if(s>=e.start&&l<e.end){if(r+=s-o,o=l,r>=n)break;i+=l-s}}return i}function mi(t,e,n,i){const r=gi(e,t);return 1==r.hidden?n<0?1==i?r.startDate-(r.endDate-e)-1:r.startDate-1:1==i?r.endDate+(e-r.startDate)+1:r.endDate+1:e}function gi(t,e){for(let r=0;r<e.length;r++){var n=e[r].start,i=e[r].end;if(t>=n&&t<i)return{hidden:!0,startDate:n,endDate:i}}return{hidden:!1,startDate:n,endDate:i}}var vi=Object.freeze({__proto__:null,convertHiddenOptions:ri,updateHiddenDates:oi,removeDuplicates:ai,printDates:function(t){for(let e=0;e<t.length;e++)console.log(e,new Date(t[e].start),new Date(t[e].end),t[e].start,t[e].end,t[e].remove)},stepOverHiddenDates:si,toScreen:li,toTime:ui,getHiddenDurationBetween:ci,getHiddenDurationBeforeStart:hi,correctTimeForHidden:di,getHiddenDurationBefore:fi,getAccumulatedHiddenDuration:pi,snapAwayFromHidden:mi,getIsHidden:gi});class yi extends ii{constructor(t,e){super();const n=qn().hours(0).minutes(0).seconds(0).milliseconds(0),i=n.clone().add(-3,"days").valueOf(),r=n.clone().add(3,"days").valueOf();this.millisecondsPerPixelCache=void 0,void 0===e?(this.start=i,this.end=r):(this.start=e.start||i,this.end=e.end||r),this.rolling=!1,this.body=t,this.deltaDifference=0,this.scaleOffset=0,this.startToFront=!1,this.endToFront=!0,this.defaultOptions={rtl:!1,start:null,end:null,moment:qn,direction:"horizontal",moveable:!0,zoomable:!0,min:null,max:null,zoomMin:10,zoomMax:31536e10,rollingMode:{follow:!1,offset:.5}},this.options=ni.extend({},this.defaultOptions),this.props={touch:{}},this.animationTimer=null,this.body.emitter.on("panstart",this._onDragStart.bind(this)),this.body.emitter.on("panmove",this._onDrag.bind(this)),this.body.emitter.on("panend",this._onDragEnd.bind(this)),this.body.emitter.on("mousewheel",this._onMouseWheel.bind(this)),this.body.emitter.on("touch",this._onTouch.bind(this)),this.body.emitter.on("pinch",this._onPinch.bind(this)),this.body.dom.rollingModeBtn.addEventListener("click",this.startRolling.bind(this)),this.setOptions(e)}setOptions(t){if(t){const e=["animation","direction","min","max","zoomMin","zoomMax","moveable","zoomable","moment","activate","hiddenDates","zoomKey","zoomFriction","rtl","showCurrentTime","rollingMode","horizontalScroll"];ni.selectiveExtend(e,this.options,t),t.rollingMode&&t.rollingMode.follow&&this.startRolling(),("start"in t||"end"in t)&&this.setRange(t.start,t.end)}}startRolling(){const t=this;!function e(){t.stopRolling(),t.rolling=!0;let n=t.end-t.start;const i=ni.convert(new Date,"Date").valueOf(),r=t.options.rollingMode&&t.options.rollingMode.offset||.5,o=i-n*r,a=i+n*(1-r);t.setRange(o,a,{animation:!1}),n=1/t.conversion(t.body.domProps.center.width).scale/10,n<30&&(n=30),n>1e3&&(n=1e3),t.body.dom.rollingModeBtn.style.visibility="hidden",t.currentTimeTimer=setTimeout(e,n)}()}stopRolling(){void 0!==this.currentTimeTimer&&(clearTimeout(this.currentTimeTimer),this.rolling=!1,this.body.dom.rollingModeBtn.style.visibility="visible")}setRange(t,e,n,i,r){n||(n={}),!0!==n.byUser&&(n.byUser=!1);const o=this,a=null!=t?ni.convert(t,"Date").valueOf():null,s=null!=e?ni.convert(e,"Date").valueOf():null;if(this._cancelAnimation(),this.millisecondsPerPixelCache=void 0,n.animation){const t=this.start,e=this.end,u="object"==typeof n.animation&&"duration"in n.animation?n.animation.duration:500,c="object"==typeof n.animation&&"easingFunction"in n.animation?n.animation.easingFunction:"easeInOutQuad",h=ni.easingFunctions[c];if(!h)throw new Error(`Unknown easing function ${JSON.stringify(c)}. Choose from: ${Object.keys(ni.easingFunctions).join(", ")}`);const d=Date.now();let f=!1;const p=()=>{if(!o.props.touch.dragging){const c=Date.now()-d,m=h(c/u),g=c>u,v=g||null===a?a:t+(a-t)*m,y=g||null===s?s:e+(s-e)*m;l=o._applyRange(v,y),oi(o.options.moment,o.body,o.options.hiddenDates),f=f||l;const b={start:new Date(o.start),end:new Date(o.end),byUser:n.byUser,event:n.event};if(r&&r(m,l,g),l&&o.body.emitter.emit("rangechange",b),g){if(f&&(o.body.emitter.emit("rangechanged",b),i))return i()}else o.animationTimer=setTimeout(p,20)}};return p()}var l=this._applyRange(a,s);if(oi(this.options.moment,this.body,this.options.hiddenDates),l){const t={start:new Date(this.start),end:new Date(this.end),byUser:n.byUser,event:n.event};if(this.body.emitter.emit("rangechange",t),clearTimeout(o.timeoutID),o.timeoutID=setTimeout((()=>{o.body.emitter.emit("rangechanged",t)}),200),i)return i()}}getMillisecondsPerPixel(){return void 0===this.millisecondsPerPixelCache&&(this.millisecondsPerPixelCache=(this.end-this.start)/this.body.dom.center.clientWidth),this.millisecondsPerPixelCache}_cancelAnimation(){this.animationTimer&&(clearTimeout(this.animationTimer),this.animationTimer=null)}_applyRange(t,e){let n=null!=t?ni.convert(t,"Date").valueOf():this.start,i=null!=e?ni.convert(e,"Date").valueOf():this.end;const r=null!=this.options.max?ni.convert(this.options.max,"Date").valueOf():null,o=null!=this.options.min?ni.convert(this.options.min,"Date").valueOf():null;let a;if(isNaN(n)||null===n)throw new Error(`Invalid start "${t}"`);if(isNaN(i)||null===i)throw new Error(`Invalid end "${e}"`);if(i<n&&(i=n),null!==o&&n<o&&(a=o-n,n+=a,i+=a,null!=r&&i>r&&(i=r)),null!==r&&i>r&&(a=i-r,n-=a,i-=a,null!=o&&n<o&&(n=o)),null!==this.options.zoomMin){let t=parseFloat(this.options.zoomMin);if(t<0&&(t=0),i-n<t){const e=.5;this.end-this.start===t&&n>=this.start-e&&i<=this.end?(n=this.start,i=this.end):(a=t-(i-n),n-=a/2,i+=a/2)}}if(null!==this.options.zoomMax){let t=parseFloat(this.options.zoomMax);t<0&&(t=0),i-n>t&&(this.end-this.start===t&&n<this.start&&i>this.end?(n=this.start,i=this.end):(a=i-n-t,n+=a/2,i-=a/2))}const s=this.start!=n||this.end!=i;return n>=this.start&&n<=this.end||i>=this.start&&i<=this.end||this.start>=n&&this.start<=i||this.end>=n&&this.end<=i||this.body.emitter.emit("checkRangedItems"),this.start=n,this.end=i,s}getRange(){return{start:this.start,end:this.end}}conversion(t,e){return yi.conversion(this.start,this.end,t,e)}static conversion(t,e,n,i){return void 0===i&&(i=0),0!=n&&e-t!=0?{offset:t,scale:n/(e-t-i)}:{offset:0,scale:1}}_onDragStart(t){this.deltaDifference=0,this.previousDelta=0,this.options.moveable&&this._isInsideRange(t)&&this.props.touch.allowDragging&&(this.stopRolling(),this.props.touch.start=this.start,this.props.touch.end=this.end,this.props.touch.dragging=!0,this.body.dom.root&&(this.body.dom.root.style.cursor="move"))}_onDrag(t){if(!t)return;if(!this.props.touch.dragging)return;if(!this.options.moveable)return;if(!this.props.touch.allowDragging)return;const e=this.options.direction;bi(e);let n="horizontal"==e?t.deltaX:t.deltaY;n-=this.deltaDifference;let i=this.props.touch.end-this.props.touch.start;i-=ci(this.body.hiddenDates,this.start,this.end);const r="horizontal"==e?this.body.domProps.center.width:this.body.domProps.center.height;let o;o=this.options.rtl?n/r*i:-n/r*i;const a=this.props.touch.start+o,s=this.props.touch.end+o,l=mi(this.body.hiddenDates,a,this.previousDelta-n,!0),u=mi(this.body.hiddenDates,s,this.previousDelta-n,!0);if(l!=a||u!=s)return this.deltaDifference+=n,this.props.touch.start=l,this.props.touch.end=u,void this._onDrag(t);this.previousDelta=n,this._applyRange(a,s);const c=new Date(this.start),h=new Date(this.end);this.body.emitter.emit("rangechange",{start:c,end:h,byUser:!0,event:t}),this.body.emitter.emit("panmove")}_onDragEnd(t){this.props.touch.dragging&&this.options.moveable&&this.props.touch.allowDragging&&(this.props.touch.dragging=!1,this.body.dom.root&&(this.body.dom.root.style.cursor="auto"),this.body.emitter.emit("rangechanged",{start:new Date(this.start),end:new Date(this.end),byUser:!0,event:t}))}_onMouseWheel(t){let e=0;if(t.wheelDelta?e=t.wheelDelta/120:t.detail?e=-t.detail/3:t.deltaY&&(e=-t.deltaY/3),!(this.options.zoomKey&&!t[this.options.zoomKey]&&this.options.zoomable||!this.options.zoomable&&this.options.moveable)&&this.options.zoomable&&this.options.moveable&&this._isInsideRange(t)&&e){const n=this.options.zoomFriction||5;let i,r;if(i=e<0?1-e/n:1/(1+e/n),this.rolling){const t=this.options.rollingMode&&this.options.rollingMode.offset||.5;r=this.start+(this.end-this.start)*t}else{const e=this.getPointer({x:t.clientX,y:t.clientY},this.body.dom.center);r=this._pointerToDate(e)}this.zoom(i,r,e,t),t.preventDefault()}}_onTouch(t){this.props.touch.start=this.start,this.props.touch.end=this.end,this.props.touch.allowDragging=!0,this.props.touch.center=null,this.props.touch.centerDate=null,this.scaleOffset=0,this.deltaDifference=0,ni.preventDefault(t)}_onPinch(t){if(!this.options.zoomable||!this.options.moveable)return;ni.preventDefault(t),this.props.touch.allowDragging=!1,this.props.touch.center||(this.props.touch.center=this.getPointer(t.center,this.body.dom.center),this.props.touch.centerDate=this._pointerToDate(this.props.touch.center)),this.stopRolling();const e=1/(t.scale+this.scaleOffset),n=this.props.touch.centerDate,i=ci(this.body.hiddenDates,this.start,this.end),r=fi(this.options.moment,this.body.hiddenDates,this,n),o=i-r;let a=n-r+(this.props.touch.start-(n-r))*e,s=n+o+(this.props.touch.end-(n+o))*e;this.startToFront=1-e<=0,this.endToFront=e-1<=0;const l=mi(this.body.hiddenDates,a,1-e,!0),u=mi(this.body.hiddenDates,s,e-1,!0);l==a&&u==s||(this.props.touch.start=l,this.props.touch.end=u,this.scaleOffset=1-t.scale,a=l,s=u);const c={animation:!1,byUser:!0,event:t};this.setRange(a,s,c),this.startToFront=!1,this.endToFront=!0}_isInsideRange(t){const e=t.center?t.center.x:t.clientX,n=this.body.dom.centerContainer.getBoundingClientRect(),i=this.options.rtl?e-n.left:n.right-e,r=this.body.util.toTime(i);return r>=this.start&&r<=this.end}_pointerToDate(t){let e;const n=this.options.direction;if(bi(n),"horizontal"==n)return this.body.util.toTime(t.x).valueOf();{const n=this.body.domProps.center.height;return e=this.conversion(n),t.y/e.scale+e.offset}}getPointer(t,e){const n=e.getBoundingClientRect();return this.options.rtl?{x:n.right-t.x,y:t.y-n.top}:{x:t.x-n.left,y:t.y-n.top}}zoom(t,e,n,i){null==e&&(e=(this.start+this.end)/2);const r=ci(this.body.hiddenDates,this.start,this.end),o=fi(this.options.moment,this.body.hiddenDates,this,e),a=r-o;let s=e-o+(this.start-(e-o))*t,l=e+a+(this.end-(e+a))*t;this.startToFront=!(n>0),this.endToFront=!(-n>0);const u=mi(this.body.hiddenDates,s,n,!0),c=mi(this.body.hiddenDates,l,-n,!0);u==s&&c==l||(s=u,l=c);const h={animation:!1,byUser:!0,event:i};this.setRange(s,l,h),this.startToFront=!1,this.endToFront=!0}move(t){const e=this.end-this.start,n=this.start+e*t,i=this.end+e*t;this.start=n,this.end=i}moveTo(t){const e=(this.start+this.end)/2-t,n=this.start-e,i=this.end-e;this.setRange(n,i,{animation:!1,byUser:!0,event:null})}}function bi(t){if("horizontal"!=t&&"vertical"!=t)throw new TypeError(`Unknown direction "${t}". Choose "horizontal" or "vertical".`)}let _i;if("undefined"!=typeof window){_i=function t(e,n){var i=n||{preventDefault:!1};if(e.Manager){var r=e,o=function(e,n){var o=Object.create(i);return n&&r.assign(o,n),t(new r(e,o),o)};return r.assign(o,r),o.Manager=function(e,n){var o=Object.create(i);return n&&r.assign(o,n),t(new r.Manager(e,o),o)},o}var a=Object.create(e),s=e.element;function l(t){return t.match(/[^ ]+/g)}function u(t){if("hammer.input"!==t.type){if(t.srcEvent._handled||(t.srcEvent._handled={}),t.srcEvent._handled[t.type])return;t.srcEvent._handled[t.type]=!0}var e=!1;t.stopPropagation=function(){e=!0};var n=t.srcEvent.stopPropagation.bind(t.srcEvent);"function"==typeof n&&(t.srcEvent.stopPropagation=function(){n(),t.stopPropagation()}),t.firstTarget=Xn;for(var i=Xn;i&&!e;){var r=i.hammer;if(r)for(var o,a=0;a<r.length;a++)if(o=r[a]._handlers[t.type])for(var s=0;s<o.length&&!e;s++)o[s](t);i=i.parentNode}}return s.hammer||(s.hammer=[]),s.hammer.push(a),e.on("hammer.input",(function(t){!0!==i.preventDefault&&i.preventDefault!==t.pointerType||t.preventDefault(),t.isFirst&&(Xn=t.target)})),a._handlers={},a.on=function(t,n){return l(t).forEach((function(t){var i=a._handlers[t];i||(a._handlers[t]=i=[],e.on(t,u)),i.push(n)})),a},a.off=function(t,n){return l(t).forEach((function(t){var i=a._handlers[t];i&&((i=n?i.filter((function(t){return t!==n})):[]).length>0?a._handlers[t]=i:(e.off(t,u),delete a._handlers[t]))})),a},a.emit=function(t,n){Xn=n.target,e.emit(t,n)},a.destroy=function(){var t=e.element.hammer,n=t.indexOf(a);-1!==n&&t.splice(n,1),t.length||delete e.element.hammer,a._handlers={},e.destroy()},a}(window.Hammer||Zt,{preventDefault:"mouse"})}else _i=()=>function(){const t=()=>{};return{on:t,off:t,destroy:t,emit:t,get:e=>({set:t})}}();var wi=_i;function xi(t,e){e.inputHandler=function(t){t.isFirst&&e(t)},t.on("hammer.input",e.inputHandler)}class Mi{constructor(t,e,n,i,r){this.moment=r&&r.moment||qn,this.options=r||{},this.current=this.moment(),this._start=this.moment(),this._end=this.moment(),this.autoScale=!0,this.scale="day",this.step=1,this.setRange(t,e,n),this.switchedDay=!1,this.switchedMonth=!1,this.switchedYear=!1,Array.isArray(i)?this.hiddenDates=i:this.hiddenDates=null!=i?[i]:[],this.format=Mi.FORMAT}setMoment(t){this.moment=t,this.current=this.moment(this.current.valueOf()),this._start=this.moment(this._start.valueOf()),this._end=this.moment(this._end.valueOf())}setFormat(t){const e=ni.deepExtend({},Mi.FORMAT);this.format=ni.deepExtend(e,t)}setRange(t,e,n){if(!(t instanceof Date&&e instanceof Date))throw"No legal start or end date in method setRange";this._start=null!=t?this.moment(t.valueOf()):Date.now(),this._end=null!=e?this.moment(e.valueOf()):Date.now(),this.autoScale&&this.setMinimumStep(n)}start(){this.current=this._start.clone(),this.roundToMinor()}roundToMinor(){switch("week"==this.scale&&this.current.weekday(0),this.scale){case"year":this.current.year(this.step*Math.floor(this.current.year()/this.step)),this.current.month(0);case"month":this.current.date(1);case"week":case"day":case"weekday":this.current.hours(0);case"hour":this.current.minutes(0);case"minute":this.current.seconds(0);case"second":this.current.milliseconds(0)}if(1!=this.step){let t=this.current.clone();switch(this.scale){case"millisecond":this.current.subtract(this.current.milliseconds()%this.step,"milliseconds");break;case"second":this.current.subtract(this.current.seconds()%this.step,"seconds");break;case"minute":this.current.subtract(this.current.minutes()%this.step,"minutes");break;case"hour":this.current.subtract(this.current.hours()%this.step,"hours");break;case"weekday":case"day":this.current.subtract((this.current.date()-1)%this.step,"day");break;case"week":this.current.subtract(this.current.week()%this.step,"week");break;case"month":this.current.subtract(this.current.month()%this.step,"month");break;case"year":this.current.subtract(this.current.year()%this.step,"year")}t.isSame(this.current)||(this.current=this.moment(mi(this.hiddenDates,this.current.valueOf(),-1,!0)))}}hasNext(){return this.current.valueOf()<=this._end.valueOf()}next(){const t=this.current.valueOf();switch(this.scale){case"millisecond":this.current.add(this.step,"millisecond");break;case"second":this.current.add(this.step,"second");break;case"minute":this.current.add(this.step,"minute");break;case"hour":this.current.add(this.step,"hour"),this.current.month()<6?this.current.subtract(this.current.hours()%this.step,"hour"):this.current.hours()%this.step!=0&&this.current.add(this.step-this.current.hours()%this.step,"hour");break;case"weekday":case"day":this.current.add(this.step,"day");break;case"week":if(0!==this.current.weekday())this.current.weekday(0),this.current.add(this.step,"week");else if(!1===this.options.showMajorLabels)this.current.add(this.step,"week");else{const t=this.current.clone();t.add(1,"week"),t.isSame(this.current,"month")?this.current.add(this.step,"week"):(this.current.add(this.step,"week"),this.current.date(1))}break;case"month":this.current.add(this.step,"month");break;case"year":this.current.add(this.step,"year")}if(1!=this.step)switch(this.scale){case"millisecond":this.current.milliseconds()>0&&this.current.milliseconds()<this.step&&this.current.milliseconds(0);break;case"second":this.current.seconds()>0&&this.current.seconds()<this.step&&this.current.seconds(0);break;case"minute":this.current.minutes()>0&&this.current.minutes()<this.step&&this.current.minutes(0);break;case"hour":this.current.hours()>0&&this.current.hours()<this.step&&this.current.hours(0);break;case"weekday":case"day":this.current.date()<this.step+1&&this.current.date(1);break;case"week":this.current.week()<this.step&&this.current.week(1);break;case"month":this.current.month()<this.step&&this.current.month(0)}this.current.valueOf()==t&&(this.current=this._end.clone()),this.switchedDay=!1,this.switchedMonth=!1,this.switchedYear=!1,si(this.moment,this,t)}getCurrent(){return this.current.clone()}setScale(t){t&&"string"==typeof t.scale&&(this.scale=t.scale,this.step=t.step>0?t.step:1,this.autoScale=!1)}setAutoScale(t){this.autoScale=t}setMinimumStep(t){if(null==t)return;const e=31104e6,n=2592e6,i=864e5,r=36e5,o=6e4,a=1e3;1e3*e>t&&(this.scale="year",this.step=1e3),500*e>t&&(this.scale="year",this.step=500),100*e>t&&(this.scale="year",this.step=100),50*e>t&&(this.scale="year",this.step=50),10*e>t&&(this.scale="year",this.step=10),5*e>t&&(this.scale="year",this.step=5),e>t&&(this.scale="year",this.step=1),7776e6>t&&(this.scale="month",this.step=3),n>t&&(this.scale="month",this.step=1),6048e5>t&&this.options.showWeekScale&&(this.scale="week",this.step=1),1728e5>t&&(this.scale="day",this.step=2),i>t&&(this.scale="day",this.step=1),432e5>t&&(this.scale="weekday",this.step=1),144e5>t&&(this.scale="hour",this.step=4),r>t&&(this.scale="hour",this.step=1),9e5>t&&(this.scale="minute",this.step=15),6e5>t&&(this.scale="minute",this.step=10),3e5>t&&(this.scale="minute",this.step=5),o>t&&(this.scale="minute",this.step=1),15e3>t&&(this.scale="second",this.step=15),1e4>t&&(this.scale="second",this.step=10),5e3>t&&(this.scale="second",this.step=5),a>t&&(this.scale="second",this.step=1),200>t&&(this.scale="millisecond",this.step=200),100>t&&(this.scale="millisecond",this.step=100),50>t&&(this.scale="millisecond",this.step=50),10>t&&(this.scale="millisecond",this.step=10),5>t&&(this.scale="millisecond",this.step=5),1>t&&(this.scale="millisecond",this.step=1)}static snap(t,e,n){const i=qn(t);if("year"==e){const t=i.year()+Math.round(i.month()/12);i.year(Math.round(t/n)*n),i.month(0),i.date(0),i.hours(0),i.minutes(0),i.seconds(0),i.milliseconds(0)}else if("month"==e)i.date()>15?(i.date(1),i.add(1,"month")):i.date(1),i.hours(0),i.minutes(0),i.seconds(0),i.milliseconds(0);else if("week"==e)i.weekday()>2?(i.weekday(0),i.add(1,"week")):i.weekday(0),i.hours(0),i.minutes(0),i.seconds(0),i.milliseconds(0);else if("day"==e){switch(n){case 5:case 2:i.hours(24*Math.round(i.hours()/24));break;default:i.hours(12*Math.round(i.hours()/12))}i.minutes(0),i.seconds(0),i.milliseconds(0)}else if("weekday"==e){switch(n){case 5:case 2:i.hours(12*Math.round(i.hours()/12));break;default:i.hours(6*Math.round(i.hours()/6))}i.minutes(0),i.seconds(0),i.milliseconds(0)}else if("hour"==e){if(4===n)i.minutes(60*Math.round(i.minutes()/60));else i.minutes(30*Math.round(i.minutes()/30));i.seconds(0),i.milliseconds(0)}else if("minute"==e){switch(n){case 15:case 10:i.minutes(5*Math.round(i.minutes()/5)),i.seconds(0);break;case 5:i.seconds(60*Math.round(i.seconds()/60));break;default:i.seconds(30*Math.round(i.seconds()/30))}i.milliseconds(0)}else if("second"==e)switch(n){case 15:case 10:i.seconds(5*Math.round(i.seconds()/5)),i.milliseconds(0);break;case 5:i.milliseconds(1e3*Math.round(i.milliseconds()/1e3));break;default:i.milliseconds(500*Math.round(i.milliseconds()/500))}else if("millisecond"==e){const t=n>5?n/2:1;i.milliseconds(Math.round(i.milliseconds()/t)*t)}return i}isMajor(){if(1==this.switchedYear)switch(this.scale){case"year":case"month":case"week":case"weekday":case"day":case"hour":case"minute":case"second":case"millisecond":return!0;default:return!1}else if(1==this.switchedMonth)switch(this.scale){case"week":case"weekday":case"day":case"hour":case"minute":case"second":case"millisecond":return!0;default:return!1}else if(1==this.switchedDay)switch(this.scale){case"millisecond":case"second":case"minute":case"hour":return!0;default:return!1}const t=this.moment(this.current);switch(this.scale){case"millisecond":return 0==t.milliseconds();case"second":return 0==t.seconds();case"minute":return 0==t.hours()&&0==t.minutes();case"hour":return 0==t.hours();case"weekday":case"day":case"week":return 1==t.date();case"month":return 0==t.month();default:return!1}}getLabelMinor(t){if(null==t&&(t=this.current),t instanceof Date&&(t=this.moment(t)),"function"==typeof this.format.minorLabels)return this.format.minorLabels(t,this.scale,this.step);const e=this.format.minorLabels[this.scale];return"week"===this.scale&&1===t.date()&&0!==t.weekday()?"":e&&e.length>0?this.moment(t).format(e):""}getLabelMajor(t){if(null==t&&(t=this.current),t instanceof Date&&(t=this.moment(t)),"function"==typeof this.format.majorLabels)return this.format.majorLabels(t,this.scale,this.step);const e=this.format.majorLabels[this.scale];return e&&e.length>0?this.moment(t).format(e):""}getClassName(){const t=this.moment,e=this.moment(this.current),n=e.locale?e.locale("en"):e.lang("en"),i=this.step,r=[];function o(t){return t/i%2==0?" vis-even":" vis-odd"}function a(e){return e.isSame(Date.now(),"day")?" vis-today":e.isSame(t().add(1,"day"),"day")?" vis-tomorrow":e.isSame(t().add(-1,"day"),"day")?" vis-yesterday":""}function s(t){return t.isSame(Date.now(),"week")?" vis-current-week":""}function l(t){return t.isSame(Date.now(),"month")?" vis-current-month":""}switch(this.scale){case"millisecond":r.push(a(n)),r.push(o(n.milliseconds()));break;case"second":r.push(a(n)),r.push(o(n.seconds()));break;case"minute":r.push(a(n)),r.push(o(n.minutes()));break;case"hour":r.push(`vis-h${n.hours()}${4==this.step?"-h"+(n.hours()+4):""}`),r.push(a(n)),r.push(o(n.hours()));break;case"weekday":r.push(`vis-${n.format("dddd").toLowerCase()}`),r.push(a(n)),r.push(s(n)),r.push(o(n.date()));break;case"day":r.push(`vis-day${n.date()}`),r.push(`vis-${n.format("MMMM").toLowerCase()}`),r.push(a(n)),r.push(l(n)),r.push(this.step<=2?a(n):""),r.push(this.step<=2?`vis-${n.format("dddd").toLowerCase()}`:""),r.push(o(n.date()-1));break;case"week":r.push(`vis-week${n.format("w")}`),r.push(s(n)),r.push(o(n.week()));break;case"month":r.push(`vis-${n.format("MMMM").toLowerCase()}`),r.push(l(n)),r.push(o(n.month()));break;case"year":r.push(`vis-year${n.year()}`),r.push(function(t){return t.isSame(Date.now(),"year")?" vis-current-year":""}(n)),r.push(o(n.year()))}return r.filter(String).join(" ")}}Mi.FORMAT={minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",week:"w",month:"MMM",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",week:"MMMM YYYY",month:"YYYY",year:""}};class Ei extends ii{constructor(t,e){super(),this.dom={foreground:null,lines:[],majorTexts:[],minorTexts:[],redundant:{lines:[],majorTexts:[],minorTexts:[]}},this.props={range:{start:0,end:0,minimumStep:0},lineTop:0},this.defaultOptions={orientation:{axis:"bottom"},showMinorLabels:!0,showMajorLabels:!0,showWeekScale:!1,maxMinorChars:7,format:ni.extend({},Mi.FORMAT),moment:qn,timeAxis:null},this.options=ni.extend({},this.defaultOptions),this.body=t,this._create(),this.setOptions(e)}setOptions(t){t&&(ni.selectiveExtend(["showMinorLabels","showMajorLabels","showWeekScale","maxMinorChars","hiddenDates","timeAxis","moment","rtl"],this.options,t),ni.selectiveDeepExtend(["format"],this.options,t),"orientation"in t&&("string"==typeof t.orientation?this.options.orientation.axis=t.orientation:"object"==typeof t.orientation&&"axis"in t.orientation&&(this.options.orientation.axis=t.orientation.axis)),"locale"in t&&("function"==typeof qn.locale?qn.locale(t.locale):qn.lang(t.locale)))}_create(){this.dom.foreground=document.createElement("div"),this.dom.background=document.createElement("div"),this.dom.foreground.className="vis-time-axis vis-foreground",this.dom.background.className="vis-time-axis vis-background"}destroy(){this.dom.foreground.parentNode&&this.dom.foreground.parentNode.removeChild(this.dom.foreground),this.dom.background.parentNode&&this.dom.background.parentNode.removeChild(this.dom.background),this.body=null}redraw(){const t=this.props,e=this.dom.foreground,n=this.dom.background,i="top"==this.options.orientation.axis?this.body.dom.top:this.body.dom.bottom,r=e.parentNode!==i;this._calculateCharSize();const o=this.options.showMinorLabels&&"none"!==this.options.orientation.axis,a=this.options.showMajorLabels&&"none"!==this.options.orientation.axis;t.minorLabelHeight=o?t.minorCharHeight:0,t.majorLabelHeight=a?t.majorCharHeight:0,t.height=t.minorLabelHeight+t.majorLabelHeight,t.width=e.offsetWidth,t.minorLineHeight=this.body.domProps.root.height-t.majorLabelHeight-("top"==this.options.orientation.axis?this.body.domProps.bottom.height:this.body.domProps.top.height),t.minorLineWidth=1,t.majorLineHeight=t.minorLineHeight+t.majorLabelHeight,t.majorLineWidth=1;const s=e.nextSibling,l=n.nextSibling;return e.parentNode&&e.parentNode.removeChild(e),n.parentNode&&n.parentNode.removeChild(n),e.style.height=`${this.props.height}px`,this._repaintLabels(),s?i.insertBefore(e,s):i.appendChild(e),l?this.body.dom.backgroundVertical.insertBefore(n,l):this.body.dom.backgroundVertical.appendChild(n),this._isResized()||r}_repaintLabels(){const t=this.options.orientation.axis,e=ni.convert(this.body.range.start,"Number"),n=ni.convert(this.body.range.end,"Number"),i=this.body.util.toTime((this.props.minorCharWidth||10)*this.options.maxMinorChars).valueOf();let r=i-fi(this.options.moment,this.body.hiddenDates,this.body.range,i);r-=this.body.util.toTime(0).valueOf();const o=new Mi(new Date(e),new Date(n),r,this.body.hiddenDates,this.options);o.setMoment(this.options.moment),this.options.format&&o.setFormat(this.options.format),this.options.timeAxis&&o.setScale(this.options.timeAxis),this.step=o;const a=this.dom;let s,l,u,c,h,d;a.redundant.lines=a.lines,a.redundant.majorTexts=a.majorTexts,a.redundant.minorTexts=a.minorTexts,a.lines=[],a.majorTexts=[],a.minorTexts=[];let f,p,m,g=0,v=0;const y=1e3;let b;for(o.start(),l=o.getCurrent(),c=this.body.util.toScreen(l);o.hasNext()&&v<y;){if(v++,h=o.isMajor(),b=o.getClassName(),s=l,u=c,o.next(),l=o.getCurrent(),c=this.body.util.toScreen(l),f=g,g=c-u,"week"===o.scale)d=!0;else d=g>=.4*f;if(this.options.showMinorLabels&&d){var _=this._repaintMinorText(u,o.getLabelMinor(s),t,b);_.style.width=`${g}px`}h&&this.options.showMajorLabels?(u>0&&(null==m&&(m=u),_=this._repaintMajorText(u,o.getLabelMajor(s),t,b)),p=this._repaintMajorLine(u,g,t,b)):d?p=this._repaintMinorLine(u,g,t,b):p&&(p.style.width=`${parseInt(p.style.width)+g}px`)}if(v!==y||Si||(console.warn("Something is wrong with the Timeline scale. Limited drawing of grid lines to 1000 lines."),Si=!0),this.options.showMajorLabels){const e=this.body.util.toTime(0),n=o.getLabelMajor(e),i=n.length*(this.props.majorCharWidth||10)+10;(null==m||i<m)&&this._repaintMajorText(0,n,t,b)}ni.forEach(this.dom.redundant,(t=>{for(;t.length;){const e=t.pop();e&&e.parentNode&&e.parentNode.removeChild(e)}}))}_repaintMinorText(t,e,n,i){let r=this.dom.redundant.minorTexts.shift();if(!r){const t=document.createTextNode("");r=document.createElement("div"),r.appendChild(t),this.dom.foreground.appendChild(r)}this.dom.minorTexts.push(r),r.innerHTML=ni.xss(e);let o="top"==n?this.props.majorLabelHeight:0;return this._setXY(r,t,o),r.className=`vis-text vis-minor ${i}`,r}_repaintMajorText(t,e,n,i){let r=this.dom.redundant.majorTexts.shift();if(!r){const t=document.createElement("div");r=document.createElement("div"),r.appendChild(t),this.dom.foreground.appendChild(r)}r.childNodes[0].innerHTML=ni.xss(e),r.className=`vis-text vis-major ${i}`;let o="top"==n?0:this.props.minorLabelHeight;return this._setXY(r,t,o),this.dom.majorTexts.push(r),r}_setXY(t,e,n){const i=this.options.rtl?-1*e:e;t.style.transform=`translate(${i}px, ${n}px)`}_repaintMinorLine(t,e,n,i){let r=this.dom.redundant.lines.shift();r||(r=document.createElement("div"),this.dom.background.appendChild(r)),this.dom.lines.push(r);const o=this.props;r.style.width=`${e}px`,r.style.height=`${o.minorLineHeight}px`;let a="top"==n?o.majorLabelHeight:this.body.domProps.top.height,s=t-o.minorLineWidth/2;return this._setXY(r,s,a),r.className=`vis-grid ${this.options.rtl?"vis-vertical-rtl":"vis-vertical"} vis-minor ${i}`,r}_repaintMajorLine(t,e,n,i){let r=this.dom.redundant.lines.shift();r||(r=document.createElement("div"),this.dom.background.appendChild(r)),this.dom.lines.push(r);const o=this.props;r.style.width=`${e}px`,r.style.height=`${o.majorLineHeight}px`;let a="top"==n?0:this.body.domProps.top.height,s=t-o.majorLineWidth/2;return this._setXY(r,s,a),r.className=`vis-grid ${this.options.rtl?"vis-vertical-rtl":"vis-vertical"} vis-major ${i}`,r}_calculateCharSize(){this.dom.measureCharMinor||(this.dom.measureCharMinor=document.createElement("DIV"),this.dom.measureCharMinor.className="vis-text vis-minor vis-measure",this.dom.measureCharMinor.style.position="absolute",this.dom.measureCharMinor.appendChild(document.createTextNode("0")),this.dom.foreground.appendChild(this.dom.measureCharMinor)),this.props.minorCharHeight=this.dom.measureCharMinor.clientHeight,this.props.minorCharWidth=this.dom.measureCharMinor.clientWidth,this.dom.measureCharMajor||(this.dom.measureCharMajor=document.createElement("DIV"),this.dom.measureCharMajor.className="vis-text vis-major vis-measure",this.dom.measureCharMajor.style.position="absolute",this.dom.measureCharMajor.appendChild(document.createTextNode("0")),this.dom.foreground.appendChild(this.dom.measureCharMajor)),this.props.majorCharHeight=this.dom.measureCharMajor.clientHeight,this.props.majorCharWidth=this.dom.measureCharMajor.clientWidth}}var Si=!1;function ki(t){this.active=!1,this.dom={container:t},this.dom.overlay=document.createElement("div"),this.dom.overlay.className="vis-overlay",this.dom.container.appendChild(this.dom.overlay),this.hammer=wi(this.dom.overlay),this.hammer.on("tap",this._onTapOverlay.bind(this));var e=this;["tap","doubletap","press","pinch","pan","panstart","panmove","panend"].forEach((function(t){e.hammer.on(t,(function(t){t.stopPropagation()}))})),document&&document.body&&(this.onClick=function(n){(function(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1})(n.target,t)||e.deactivate()},document.body.addEventListener("click",this.onClick)),void 0!==this.keycharm&&this.keycharm.destroy(),this.keycharm=function(t){var e,n=t&&t.preventDefault||!1,i=t&&t.container||window,r={},o={keydown:{},keyup:{}},a={};for(e=97;e<=122;e++)a[String.fromCharCode(e)]={code:e-97+65,shift:!1};for(e=65;e<=90;e++)a[String.fromCharCode(e)]={code:e,shift:!0};for(e=0;e<=9;e++)a[""+e]={code:48+e,shift:!1};for(e=1;e<=12;e++)a["F"+e]={code:111+e,shift:!1};for(e=0;e<=9;e++)a["num"+e]={code:96+e,shift:!1};a["num*"]={code:106,shift:!1},a["num+"]={code:107,shift:!1},a["num-"]={code:109,shift:!1},a["num/"]={code:111,shift:!1},a["num."]={code:110,shift:!1},a.left={code:37,shift:!1},a.up={code:38,shift:!1},a.right={code:39,shift:!1},a.down={code:40,shift:!1},a.space={code:32,shift:!1},a.enter={code:13,shift:!1},a.shift={code:16,shift:void 0},a.esc={code:27,shift:!1},a.backspace={code:8,shift:!1},a.tab={code:9,shift:!1},a.ctrl={code:17,shift:!1},a.alt={code:18,shift:!1},a.delete={code:46,shift:!1},a.pageup={code:33,shift:!1},a.pagedown={code:34,shift:!1},a["="]={code:187,shift:!1},a["-"]={code:189,shift:!1},a["]"]={code:221,shift:!1},a["["]={code:219,shift:!1};var s=function(t){u(t,"keydown")},l=function(t){u(t,"keyup")},u=function(t,e){if(void 0!==o[e][t.keyCode]){for(var i=o[e][t.keyCode],r=0;r<i.length;r++)(void 0===i[r].shift||1==i[r].shift&&1==t.shiftKey||0==i[r].shift&&0==t.shiftKey)&&i[r].fn(t);1==n&&t.preventDefault()}};return r.bind=function(t,e,n){if(void 0===n&&(n="keydown"),void 0===a[t])throw new Error("unsupported key: "+t);void 0===o[n][a[t].code]&&(o[n][a[t].code]=[]),o[n][a[t].code].push({fn:e,shift:a[t].shift})},r.bindAll=function(t,e){for(var n in void 0===e&&(e="keydown"),a)a.hasOwnProperty(n)&&r.bind(n,t,e)},r.getKey=function(t){for(var e in a)if(a.hasOwnProperty(e)){if(1==t.shiftKey&&1==a[e].shift&&t.keyCode==a[e].code)return e;if(0==t.shiftKey&&0==a[e].shift&&t.keyCode==a[e].code)return e;if(t.keyCode==a[e].code&&"shift"==e)return e}return"unknown key, currently not supported"},r.unbind=function(t,e,n){if(void 0===n&&(n="keydown"),void 0===a[t])throw new Error("unsupported key: "+t);if(void 0!==e){var i=[],r=o[n][a[t].code];if(void 0!==r)for(var s=0;s<r.length;s++)r[s].fn==e&&r[s].shift==a[t].shift||i.push(o[n][a[t].code][s]);o[n][a[t].code]=i}else o[n][a[t].code]=[]},r.reset=function(){o={keydown:{},keyup:{}}},r.destroy=function(){o={keydown:{},keyup:{}},i.removeEventListener("keydown",s,!0),i.removeEventListener("keyup",l,!0)},i.addEventListener("keydown",s,!0),i.addEventListener("keyup",l,!0),r}(),this.escListener=this.deactivate.bind(this)}l()(ki.prototype),ki.current=null,ki.prototype.destroy=function(){this.deactivate(),this.dom.overlay.parentNode.removeChild(this.dom.overlay),this.onClick&&document.body.removeEventListener("click",this.onClick),void 0!==this.keycharm&&this.keycharm.destroy(),this.keycharm=null,this.hammer.destroy(),this.hammer=null},ki.prototype.activate=function(){ki.current&&ki.current.deactivate(),ki.current=this,this.active=!0,this.dom.overlay.style.display="none",ni.addClassName(this.dom.container,"vis-active"),this.emit("change"),this.emit("activate"),this.keycharm.bind("esc",this.escListener)},ki.prototype.deactivate=function(){ki.current===this&&(ki.current=null),this.active=!1,this.dom.overlay.style.display="",ni.removeClassName(this.dom.container,"vis-active"),this.keycharm.unbind("esc",this.escListener),this.emit("change"),this.emit("deactivate")},ki.prototype._onTapOverlay=function(t){this.activate(),t.stopPropagation()};const Ci={current:"current",time:"time",deleteSelected:"Delete selected"},Ti={current:"attuale",time:"tempo",deleteSelected:"Cancella la selezione"},Di={current:"huidige",time:"tijd",deleteSelected:"Selectie verwijderen"},Li={current:"Aktuelle",time:"Zeit",deleteSelected:"Lsche Auswahl"},Ai={current:"actuel",time:"heure",deleteSelected:"Effacer la selection"},Oi={current:"corriente",time:"hora",deleteSelected:"Eliminar seleccin"},Pi={current:"",time:"",deleteSelected:" "},Ii={current:"",time:"",deleteSelected:" "},Ni={current:"aktualny",time:"czas",deleteSelected:"Usu wybrane"},Ri={current:"atual",time:"data",deleteSelected:"Apagar selecionado"},Yi={current:"",time:"",deleteSelected:""},ji={current:"nuvarande",time:"tid",deleteSelected:"Radera valda"},Fi={current:"nvrende",time:"tid",deleteSelected:"Slett valgte"},Bi={current:"einamas",time:"laikas",deleteSelected:"Paalinti pasirinkt"},zi={en:Ci,en_EN:Ci,en_US:Ci,it:Ti,it_IT:Ti,it_CH:Ti,nl:Di,nl_NL:Di,nl_BE:Di,de:Li,de_DE:Li,fr:Ai,fr_FR:Ai,fr_CA:Ai,fr_BE:Ai,es:Oi,es_ES:Oi,uk:Pi,uk_UA:Pi,ru:Ii,ru_RU:Ii,pl:Ni,pl_PL:Ni,pt:Ri,pt_BR:Ri,pt_PT:Ri,ja:Yi,ja_JP:Yi,lt:Bi,lt_LT:Bi,sv:ji,sv_SE:ji,nb:Fi,nn:Fi,nb_NO:Fi,nn_NO:Fi};class Hi extends ii{constructor(t,e){super(),this.body=t,this.defaultOptions={moment:qn,locales:zi,locale:"en",id:void 0,title:void 0},this.options=ni.extend({},this.defaultOptions),this.setOptions(e),this.options.locales=ni.extend({},zi,this.options.locales);const n=this.defaultOptions.locales[this.defaultOptions.locale];Object.keys(this.options.locales).forEach((t=>{this.options.locales[t]=ni.extend({},n,this.options.locales[t])})),e&&null!=e.time?this.customTime=e.time:this.customTime=new Date,this.eventParams={},this._create()}setOptions(t){t&&ni.selectiveExtend(["moment","locale","locales","id","title","rtl","snap"],this.options,t)}_create(){const t=document.createElement("div");t["custom-time"]=this,t.className=`vis-custom-time ${this.options.id||""}`,t.style.position="absolute",t.style.top="0px",t.style.height="100%",this.bar=t;const e=document.createElement("div");function n(t){this.body.range._onMouseWheel(t)}e.style.position="relative",e.style.top="0px",this.options.rtl?e.style.right="-10px":e.style.left="-10px",e.style.height="100%",e.style.width="20px",e.addEventListener?(e.addEventListener("mousewheel",n.bind(this),!1),e.addEventListener("DOMMouseScroll",n.bind(this),!1)):e.attachEvent("onmousewheel",n.bind(this)),t.appendChild(e),this.hammer=new wi(e),this.hammer.on("panstart",this._onDragStart.bind(this)),this.hammer.on("panmove",this._onDrag.bind(this)),this.hammer.on("panend",this._onDragEnd.bind(this)),this.hammer.get("pan").set({threshold:5,direction:wi.DIRECTION_ALL}),this.hammer.get("press").set({time:1e4})}destroy(){this.hide(),this.hammer.destroy(),this.hammer=null,this.body=null}redraw(){const t=this.body.dom.backgroundVertical;this.bar.parentNode!=t&&(this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),t.appendChild(this.bar));const e=this.body.util.toScreen(this.customTime);let n=this.options.locales[this.options.locale];n||(this.warned||(console.warn(`WARNING: options.locales['${this.options.locale}'] not found. See https://visjs.github.io/vis-timeline/docs/timeline/#Localization`),this.warned=!0),n=this.options.locales.en);let i=this.options.title;return void 0===i?(i=`${n.time}: ${this.options.moment(this.customTime).format("dddd, MMMM Do YYYY, H:mm:ss")}`,i=i.charAt(0).toUpperCase()+i.substring(1)):"function"==typeof i&&(i=i.call(this,this.customTime)),this.options.rtl?this.bar.style.right=`${e}px`:this.bar.style.left=`${e}px`,this.bar.title=i,!1}hide(){this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar)}setCustomTime(t){this.customTime=ni.convert(t,"Date"),this.redraw()}getCustomTime(){return new Date(this.customTime.valueOf())}setCustomMarker(t,e){const n=document.createElement("div");n.className="vis-custom-time-marker",n.innerHTML=ni.xss(t),n.style.position="absolute",e&&(n.setAttribute("contenteditable","true"),n.addEventListener("pointerdown",(function(){n.focus()})),n.addEventListener("input",this._onMarkerChange.bind(this)),n.title=t,n.addEventListener("blur",function(t){this.title!=t.target.innerHTML&&(this._onMarkerChanged(t),this.title=t.target.innerHTML)}.bind(this))),this.bar.appendChild(n)}setCustomTitle(t){this.options.title=t}_onDragStart(t){this.eventParams.dragging=!0,this.eventParams.customTime=this.customTime,t.stopPropagation()}_onDrag(t){if(!this.eventParams.dragging)return;let e=this.options.rtl?-1*t.deltaX:t.deltaX;const n=this.body.util.toScreen(this.eventParams.customTime)+e,i=this.body.util.toTime(n),r=this.body.util.getScale(),o=this.body.util.getStep(),a=this.options.snap,s=a?a(i,r,o):i;this.setCustomTime(s),this.body.emitter.emit("timechange",{id:this.options.id,time:new Date(this.customTime.valueOf()),event:t}),t.stopPropagation()}_onDragEnd(t){this.eventParams.dragging&&(this.body.emitter.emit("timechanged",{id:this.options.id,time:new Date(this.customTime.valueOf()),event:t}),t.stopPropagation())}_onMarkerChange(t){this.body.emitter.emit("markerchange",{id:this.options.id,title:t.target.innerHTML,event:t}),t.stopPropagation()}_onMarkerChanged(t){this.body.emitter.emit("markerchanged",{id:this.options.id,title:t.target.innerHTML,event:t}),t.stopPropagation()}static customTimeFromTarget(t){let e=t.target;for(;e;){if(e.hasOwnProperty("custom-time"))return e["custom-time"];e=e.parentNode}return null}}class Gi{_create(t){this.dom={},this.dom.container=t,this.dom.container.style.position="relative",this.dom.root=document.createElement("div"),this.dom.background=document.createElement("div"),this.dom.backgroundVertical=document.createElement("div"),this.dom.backgroundHorizontal=document.createElement("div"),this.dom.centerContainer=document.createElement("div"),this.dom.leftContainer=document.createElement("div"),this.dom.rightContainer=document.createElement("div"),this.dom.center=document.createElement("div"),this.dom.left=document.createElement("div"),this.dom.right=document.createElement("div"),this.dom.top=document.createElement("div"),this.dom.bottom=document.createElement("div"),this.dom.shadowTop=document.createElement("div"),this.dom.shadowBottom=document.createElement("div"),this.dom.shadowTopLeft=document.createElement("div"),this.dom.shadowBottomLeft=document.createElement("div"),this.dom.shadowTopRight=document.createElement("div"),this.dom.shadowBottomRight=document.createElement("div"),this.dom.rollingModeBtn=document.createElement("div"),this.dom.loadingScreen=document.createElement("div"),this.dom.root.className="vis-timeline",this.dom.background.className="vis-panel vis-background",this.dom.backgroundVertical.className="vis-panel vis-background vis-vertical",this.dom.backgroundHorizontal.className="vis-panel vis-background vis-horizontal",this.dom.centerContainer.className="vis-panel vis-center",this.dom.leftContainer.className="vis-panel vis-left",this.dom.rightContainer.className="vis-panel vis-right",this.dom.top.className="vis-panel vis-top",this.dom.bottom.className="vis-panel vis-bottom",this.dom.left.className="vis-content",this.dom.center.className="vis-content",this.dom.right.className="vis-content",this.dom.shadowTop.className="vis-shadow vis-top",this.dom.shadowBottom.className="vis-shadow vis-bottom",this.dom.shadowTopLeft.className="vis-shadow vis-top",this.dom.shadowBottomLeft.className="vis-shadow vis-bottom",this.dom.shadowTopRight.className="vis-shadow vis-top",this.dom.shadowBottomRight.className="vis-shadow vis-bottom",this.dom.rollingModeBtn.className="vis-rolling-mode-btn",this.dom.loadingScreen.className="vis-loading-screen",this.dom.root.appendChild(this.dom.background),this.dom.root.appendChild(this.dom.backgroundVertical),this.dom.root.appendChild(this.dom.backgroundHorizontal),this.dom.root.appendChild(this.dom.centerContainer),this.dom.root.appendChild(this.dom.leftContainer),this.dom.root.appendChild(this.dom.rightContainer),this.dom.root.appendChild(this.dom.top),this.dom.root.appendChild(this.dom.bottom),this.dom.root.appendChild(this.dom.rollingModeBtn),this.dom.centerContainer.appendChild(this.dom.center),this.dom.leftContainer.appendChild(this.dom.left),this.dom.rightContainer.appendChild(this.dom.right),this.dom.centerContainer.appendChild(this.dom.shadowTop),this.dom.centerContainer.appendChild(this.dom.shadowBottom),this.dom.leftContainer.appendChild(this.dom.shadowTopLeft),this.dom.leftContainer.appendChild(this.dom.shadowBottomLeft),this.dom.rightContainer.appendChild(this.dom.shadowTopRight),this.dom.rightContainer.appendChild(this.dom.shadowBottomRight),this.props={root:{},background:{},centerContainer:{},leftContainer:{},rightContainer:{},center:{},left:{},right:{},top:{},bottom:{},border:{},scrollTop:0,scrollTopMin:0},this.on("rangechange",(()=>{!0===this.initialDrawDone&&this._redraw()})),this.on("rangechanged",(()=>{this.initialRangeChangeDone||(this.initialRangeChangeDone=!0)})),this.on("touch",this._onTouch.bind(this)),this.on("panmove",this._onDrag.bind(this));const e=this;this._origRedraw=this._redraw.bind(this),this._redraw=ni.throttle(this._origRedraw),this.on("_change",(t=>{e.itemSet&&e.itemSet.initialItemSetDrawn&&t&&1==t.queue?e._redraw():e._origRedraw()})),this.hammer=new wi(this.dom.root);const n=this.hammer.get("pinch").set({enable:!0});n&&function(t){t.getTouchAction=function(){return["pan-y"]}}(n),this.hammer.get("pan").set({threshold:5,direction:wi.DIRECTION_ALL}),this.timelineListeners={};var i,r;function o(t){this.isActive()&&this.emit("mousewheel",t);let e=0,n=0;if("detail"in t&&(n=-1*t.detail),"wheelDelta"in t&&(n=t.wheelDelta),"wheelDeltaY"in t&&(n=t.wheelDeltaY),"wheelDeltaX"in t&&(e=-1*t.wheelDeltaX),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(e=-1*n,n=0),"deltaY"in t&&(n=-1*t.deltaY),"deltaX"in t&&(e=t.deltaX),t.deltaMode&&(1===t.deltaMode?(e*=40,n*=40):(e*=40,n*=800)),this.options.preferZoom){if(!this.options.zoomKey||t[this.options.zoomKey])return}else if(this.options.zoomKey&&t[this.options.zoomKey])return;if(this.options.verticalScroll||this.options.horizontalScroll)if(this.options.verticalScroll&&Math.abs(n)>=Math.abs(e)){const e=this.props.scrollTop,i=e+n;if(this.isActive()){this._setScrollTop(i)!==e&&(this._redraw(),this.emit("scroll",t),t.preventDefault())}}else if(this.options.horizontalScroll){const i=(Math.abs(e)>=Math.abs(n)?e:n)/120*(this.range.end-this.range.start)/20,r=this.range.start+i,o=this.range.end+i,a={animation:!1,byUser:!0,event:t};this.range.setRange(r,o,a),t.preventDefault()}}["tap","doubletap","press","pinch","pan","panstart","panmove","panend"].forEach((t=>{const n=n=>{e.isActive()&&e.emit(t,n)};e.hammer.on(t,n),e.timelineListeners[t]=n})),xi(this.hammer,(t=>{e.emit("touch",t)})),i=this.hammer,(r=t=>{e.emit("release",t)}).inputHandler=function(t){t.isFinal&&r(t)},i.on("hammer.input",r.inputHandler);const a="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":this.dom.centerContainer.addEventListener?"DOMMouseScroll":"onmousewheel";function s(t){if(e.options.verticalScroll&&(t.preventDefault(),e.isActive())){const n=-t.target.scrollTop;e._setScrollTop(n),e._redraw(),e.emit("scrollSide",t)}}this.dom.top.addEventListener,this.dom.bottom.addEventListener,this.dom.centerContainer.addEventListener(a,o.bind(this),!1),this.dom.top.addEventListener(a,o.bind(this),!1),this.dom.bottom.addEventListener(a,o.bind(this),!1),this.dom.left.parentNode.addEventListener("scroll",s.bind(this)),this.dom.right.parentNode.addEventListener("scroll",s.bind(this));let l=!1;if(this.dom.center.addEventListener("dragover",function(t){if(t.preventDefault&&(e.emit("dragover",e.getEventProperties(t)),t.preventDefault()),t.target.className.indexOf("timeline")>-1&&!l)return t.dataTransfer.dropEffect="move",l=!0,!1}.bind(this),!1),this.dom.center.addEventListener("drop",function(t){t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation();try{var n=JSON.parse(t.dataTransfer.getData("text"));if(!n||!n.content)return}catch(t){return!1}return l=!1,t.center={x:t.clientX,y:t.clientY},"item"!==n.target?e.itemSet._onAddItem(t):e.itemSet._onDropObjectOnItem(t),e.emit("drop",e.getEventProperties(t)),!1}.bind(this),!1),this.customTimes=[],this.touch={},this.redrawCount=0,this.initialDrawDone=!1,this.initialRangeChangeDone=!1,!t)throw new Error("No container provided");t.appendChild(this.dom.root),t.appendChild(this.dom.loadingScreen)}setOptions(t){if(t){const e=["width","height","minHeight","maxHeight","autoResize","start","end","clickToUse","dataAttributes","hiddenDates","locale","locales","moment","preferZoom","rtl","zoomKey","horizontalScroll","verticalScroll","longSelectPressTime","snap"];if(ni.selectiveExtend(e,this.options,t),this.dom.rollingModeBtn.style.visibility="hidden",this.options.rtl&&(this.dom.container.style.direction="rtl",this.dom.backgroundVertical.className="vis-panel vis-background vis-vertical-rtl"),this.options.verticalScroll&&(this.options.rtl?this.dom.rightContainer.className="vis-panel vis-right vis-vertical-scroll":this.dom.leftContainer.className="vis-panel vis-left vis-vertical-scroll"),"object"!=typeof this.options.orientation&&(this.options.orientation={item:void 0,axis:void 0}),"orientation"in t&&("string"==typeof t.orientation?this.options.orientation={item:t.orientation,axis:t.orientation}:"object"==typeof t.orientation&&("item"in t.orientation&&(this.options.orientation.item=t.orientation.item),"axis"in t.orientation&&(this.options.orientation.axis=t.orientation.axis))),"both"===this.options.orientation.axis){if(!this.timeAxis2){const t=this.timeAxis2=new Ei(this.body);t.setOptions=e=>{const n=e?ni.extend({},e):{};n.orientation="top",Ei.prototype.setOptions.call(t,n)},this.components.push(t)}}else if(this.timeAxis2){const t=this.components.indexOf(this.timeAxis2);-1!==t&&this.components.splice(t,1),this.timeAxis2.destroy(),this.timeAxis2=null}"function"==typeof t.drawPoints&&(t.drawPoints={onRender:t.drawPoints}),"hiddenDates"in this.options&&ri(this.options.moment,this.body,this.options.hiddenDates),"clickToUse"in t&&(t.clickToUse?this.activator||(this.activator=new ki(this.dom.root)):this.activator&&(this.activator.destroy(),delete this.activator)),this._initAutoResize()}if(this.components.forEach((e=>e.setOptions(t))),"configure"in t){this.configurator||(this.configurator=this._createConfigurator()),this.configurator.setOptions(t.configure);const e=ni.deepExtend({},this.options);this.components.forEach((t=>{ni.deepExtend(e,t.options)})),this.configurator.setModuleOptions({global:e})}this._redraw()}isActive(){return!this.activator||this.activator.active}destroy(){this.setItems(null),this.setGroups(null),this.off(),this._stopAutoResize(),this.dom.root.parentNode&&this.dom.root.parentNode.removeChild(this.dom.root),this.dom=null,this.activator&&(this.activator.destroy(),delete this.activator);for(const t in this.timelineListeners)this.timelineListeners.hasOwnProperty(t)&&delete this.timelineListeners[t];this.timelineListeners=null,this.hammer&&this.hammer.destroy(),this.hammer=null,this.components.forEach((t=>t.destroy())),this.body=null}setCustomTime(t,e){const n=this.customTimes.filter((t=>e===t.options.id));if(0===n.length)throw new Error(`No custom time bar found with id ${JSON.stringify(e)}`);n.length>0&&n[0].setCustomTime(t)}getCustomTime(t){const e=this.customTimes.filter((e=>e.options.id===t));if(0===e.length)throw new Error(`No custom time bar found with id ${JSON.stringify(t)}`);return e[0].getCustomTime()}setCustomTimeMarker(t,e,n){const i=this.customTimes.filter((t=>t.options.id===e));if(0===i.length)throw new Error(`No custom time bar found with id ${JSON.stringify(e)}`);i.length>0&&i[0].setCustomMarker(t,n)}setCustomTimeTitle(t,e){const n=this.customTimes.filter((t=>t.options.id===e));if(0===n.length)throw new Error(`No custom time bar found with id ${JSON.stringify(e)}`);if(n.length>0)return n[0].setCustomTitle(t)}getEventProperties(t){return{event:t}}addCustomTime(t,e){const n=void 0!==t?ni.convert(t,"Date"):new Date,i=this.customTimes.some((t=>t.options.id===e));if(i)throw new Error(`A custom time with id ${JSON.stringify(e)} already exists`);const r=new Hi(this.body,ni.extend({},this.options,{time:n,id:e,snap:this.itemSet?this.itemSet.options.snap:this.options.snap}));return this.customTimes.push(r),this.components.push(r),this._redraw(),e}removeCustomTime(t){const e=this.customTimes.filter((e=>e.options.id===t));if(0===e.length)throw new Error(`No custom time bar found with id ${JSON.stringify(t)}`);e.forEach((t=>{this.customTimes.splice(this.customTimes.indexOf(t),1),this.components.splice(this.components.indexOf(t),1),t.destroy()}))}getVisibleItems(){return this.itemSet&&this.itemSet.getVisibleItems()||[]}getItemsAtCurrentTime(t){return this.time=t,this.itemSet&&this.itemSet.getItemsAtCurrentTime(this.time)||[]}getVisibleGroups(){return this.itemSet&&this.itemSet.getVisibleGroups()||[]}fit(t,e){const n=this.getDataRange();if(null===n.min&&null===n.max)return;const i=n.max-n.min,r=new Date(n.min.valueOf()-.01*i),o=new Date(n.max.valueOf()+.01*i),a=!t||void 0===t.animation||t.animation;this.range.setRange(r,o,{animation:a},e)}getDataRange(){throw new Error("Cannot invoke abstract method getDataRange")}setWindow(t,e,n,i){let r,o;"function"==typeof arguments[2]&&(i=arguments[2],n={}),1==arguments.length?(o=arguments[0],r=void 0===o.animation||o.animation,this.range.setRange(o.start,o.end,{animation:r})):2==arguments.length&&"function"==typeof arguments[1]?(o=arguments[0],i=arguments[1],r=void 0===o.animation||o.animation,this.range.setRange(o.start,o.end,{animation:r},i)):(r=!n||void 0===n.animation||n.animation,this.range.setRange(t,e,{animation:r},i))}moveTo(t,e,n){"function"==typeof arguments[1]&&(n=arguments[1],e={});const i=this.range.end-this.range.start,r=ni.convert(t,"Date").valueOf(),o=r-i/2,a=r+i/2,s=!e||void 0===e.animation||e.animation;this.range.setRange(o,a,{animation:s},n)}getWindow(){const t=this.range.getRange();return{start:new Date(t.start),end:new Date(t.end)}}zoomIn(t,e,n){if(!t||t<0||t>1)return;"function"==typeof arguments[1]&&(n=arguments[1],e={});const i=this.getWindow(),r=i.start.valueOf(),o=i.end.valueOf(),a=o-r,s=(a-a/(1+t))/2,l=r+s,u=o-s;this.setWindow(l,u,e,n)}zoomOut(t,e,n){if(!t||t<0||t>1)return;"function"==typeof arguments[1]&&(n=arguments[1],e={});const i=this.getWindow(),r=i.start.valueOf(),o=i.end.valueOf(),a=o-r,s=r-a*t/2,l=o+a*t/2;this.setWindow(s,l,e,n)}redraw(){this._redraw()}_redraw(){this.redrawCount++;const t=this.dom;if(!t||!t.container||0==t.root.offsetWidth)return;let e=!1;const n=this.options,i=this.props;oi(this.options.moment,this.body,this.options.hiddenDates),"top"==n.orientation?(ni.addClassName(t.root,"vis-top"),ni.removeClassName(t.root,"vis-bottom")):(ni.removeClassName(t.root,"vis-top"),ni.addClassName(t.root,"vis-bottom")),n.rtl?(ni.addClassName(t.root,"vis-rtl"),ni.removeClassName(t.root,"vis-ltr")):(ni.addClassName(t.root,"vis-ltr"),ni.removeClassName(t.root,"vis-rtl")),t.root.style.maxHeight=ni.option.asSize(n.maxHeight,""),t.root.style.minHeight=ni.option.asSize(n.minHeight,""),t.root.style.width=ni.option.asSize(n.width,"");const r=t.root.offsetWidth;i.border.left=1,i.border.right=1,i.border.top=1,i.border.bottom=1,i.center.height=t.center.offsetHeight,i.left.height=t.left.offsetHeight,i.right.height=t.right.offsetHeight,i.top.height=t.top.clientHeight||-i.border.top,i.bottom.height=Math.round(t.bottom.getBoundingClientRect().height)||t.bottom.clientHeight||-i.border.bottom;const o=Math.max(i.left.height,i.center.height,i.right.height),a=i.top.height+o+i.bottom.height+i.border.top+i.border.bottom;t.root.style.height=ni.option.asSize(n.height,`${a}px`),i.root.height=t.root.offsetHeight,i.background.height=i.root.height;const s=i.root.height-i.top.height-i.bottom.height;i.centerContainer.height=s,i.leftContainer.height=s,i.rightContainer.height=i.leftContainer.height,i.root.width=r,i.background.width=i.root.width,this.initialDrawDone||(i.scrollbarWidth=ni.getScrollBarWidth());const l=t.leftContainer.clientWidth,u=t.rightContainer.clientWidth;n.verticalScroll?n.rtl?(i.left.width=l||-i.border.left,i.right.width=u+i.scrollbarWidth||-i.border.right):(i.left.width=l+i.scrollbarWidth||-i.border.left,i.right.width=u||-i.border.right):(i.left.width=l||-i.border.left,i.right.width=u||-i.border.right),this._setDOM();let c=this._updateScrollTop();"top"!=n.orientation.item&&(c+=Math.max(i.centerContainer.height-i.center.height-i.border.top-i.border.bottom,0)),t.center.style.transform=`translateY(${c}px)`;const h=0==i.scrollTop?"hidden":"",d=i.scrollTop==i.scrollTopMin?"hidden":"";t.shadowTop.style.visibility=h,t.shadowBottom.style.visibility=d,t.shadowTopLeft.style.visibility=h,t.shadowBottomLeft.style.visibility=d,t.shadowTopRight.style.visibility=h,t.shadowBottomRight.style.visibility=d,n.verticalScroll&&(t.rightContainer.className="vis-panel vis-right vis-vertical-scroll",t.leftContainer.className="vis-panel vis-left vis-vertical-scroll",t.shadowTopRight.style.visibility="hidden",t.shadowBottomRight.style.visibility="hidden",t.shadowTopLeft.style.visibility="hidden",t.shadowBottomLeft.style.visibility="hidden",t.left.style.top="0px",t.right.style.top="0px"),(!n.verticalScroll||i.center.height<i.centerContainer.height)&&(t.left.style.top=`${c}px`,t.right.style.top=`${c}px`,t.rightContainer.className=t.rightContainer.className.replace(new RegExp("(?:^|\\s)vis-vertical-scroll(?:\\s|$)")," "),t.leftContainer.className=t.leftContainer.className.replace(new RegExp("(?:^|\\s)vis-vertical-scroll(?:\\s|$)")," "),i.left.width=l||-i.border.left,i.right.width=u||-i.border.right,this._setDOM());const f=i.center.height>i.centerContainer.height;this.hammer.get("pan").set({direction:f?wi.DIRECTION_ALL:wi.DIRECTION_HORIZONTAL}),this.hammer.get("press").set({time:this.options.longSelectPressTime}),this.components.forEach((t=>{e=t.redraw()||e}));if(e){if(this.redrawCount<5)return void this.body.emitter.emit("_change");console.log("WARNING: infinite loop in redraw?")}else this.redrawCount=0;this.body.emitter.emit("changed")}_setDOM(){const t=this.props,e=this.dom;t.leftContainer.width=t.left.width,t.rightContainer.width=t.right.width;const n=t.root.width-t.left.width-t.right.width;t.center.width=n,t.centerContainer.width=n,t.top.width=n,t.bottom.width=n,e.background.style.height=`${t.background.height}px`,e.backgroundVertical.style.height=`${t.background.height}px`,e.backgroundHorizontal.style.height=`${t.centerContainer.height}px`,e.centerContainer.style.height=`${t.centerContainer.height}px`,e.leftContainer.style.height=`${t.leftContainer.height}px`,e.rightContainer.style.height=`${t.rightContainer.height}px`,e.background.style.width=`${t.background.width}px`,e.backgroundVertical.style.width=`${t.centerContainer.width}px`,e.backgroundHorizontal.style.width=`${t.background.width}px`,e.centerContainer.style.width=`${t.center.width}px`,e.top.style.width=`${t.top.width}px`,e.bottom.style.width=`${t.bottom.width}px`,e.background.style.left="0",e.background.style.top="0",e.backgroundVertical.style.left=`${t.left.width+t.border.left}px`,e.backgroundVertical.style.top="0",e.backgroundHorizontal.style.left="0",e.backgroundHorizontal.style.top=`${t.top.height}px`,e.centerContainer.style.left=`${t.left.width}px`,e.centerContainer.style.top=`${t.top.height}px`,e.leftContainer.style.left="0",e.leftContainer.style.top=`${t.top.height}px`,e.rightContainer.style.left=`${t.left.width+t.center.width}px`,e.rightContainer.style.top=`${t.top.height}px`,e.top.style.left=`${t.left.width}px`,e.top.style.top="0",e.bottom.style.left=`${t.left.width}px`,e.bottom.style.top=`${t.top.height+t.centerContainer.height}px`,e.center.style.left="0",e.left.style.left="0",e.right.style.left="0"}setCurrentTime(t){if(!this.currentTime)throw new Error("Option showCurrentTime must be true");this.currentTime.setCurrentTime(t)}getCurrentTime(){if(!this.currentTime)throw new Error("Option showCurrentTime must be true");return this.currentTime.getCurrentTime()}_toTime(t){return ui(this,t,this.props.center.width)}_toGlobalTime(t){return ui(this,t,this.props.root.width)}_toScreen(t){return li(this,t,this.props.center.width)}_toGlobalScreen(t){return li(this,t,this.props.root.width)}_initAutoResize(){1==this.options.autoResize?this._startAutoResize():this._stopAutoResize()}_startAutoResize(){const t=this;this._stopAutoResize(),this._onResize=()=>{if(1==t.options.autoResize){if(t.dom.root){const e=t.dom.root.offsetHeight,n=t.dom.root.offsetWidth;n==t.props.lastWidth&&e==t.props.lastHeight||(t.props.lastWidth=n,t.props.lastHeight=e,t.props.scrollbarWidth=ni.getScrollBarWidth(),t.body.emitter.emit("_change"))}}else t._stopAutoResize()},ni.addEventListener(window,"resize",this._onResize),t.dom.root&&(t.props.lastWidth=t.dom.root.offsetWidth,t.props.lastHeight=t.dom.root.offsetHeight),this.watchTimer=setInterval(this._onResize,1e3)}_stopAutoResize(){this.watchTimer&&(clearInterval(this.watchTimer),this.watchTimer=void 0),this._onResize&&(ni.removeEventListener(window,"resize",this._onResize),this._onResize=null)}_onTouch(t){this.touch.allowDragging=!0,this.touch.initialScrollTop=this.props.scrollTop}_onPinch(t){this.touch.allowDragging=!1}_onDrag(t){if(!t)return;if(!this.touch.allowDragging)return;const e=t.deltaY,n=this._getScrollTop(),i=this._setScrollTop(this.touch.initialScrollTop+e);this.options.verticalScroll&&(this.dom.left.parentNode.scrollTop=-this.props.scrollTop,this.dom.right.parentNode.scrollTop=-this.props.scrollTop),i!=n&&this.emit("verticalDrag")}_setScrollTop(t){return this.props.scrollTop=t,this._updateScrollTop(),this.props.scrollTop}_updateScrollTop(){const t=Math.min(this.props.centerContainer.height-this.props.border.top-this.props.border.bottom-this.props.center.height,0);return t!=this.props.scrollTopMin&&("top"!=this.options.orientation.item&&(this.props.scrollTop+=t-this.props.scrollTopMin),this.props.scrollTopMin=t),this.props.scrollTop>0&&(this.props.scrollTop=0),this.props.scrollTop<t&&(this.props.scrollTop=t),this.options.verticalScroll&&(this.dom.left.parentNode.scrollTop=-this.props.scrollTop,this.dom.right.parentNode.scrollTop=-this.props.scrollTop),this.props.scrollTop}_getScrollTop(){return this.props.scrollTop}_createConfigurator(){throw new Error("Cannot invoke abstract method _createConfigurator")}}l()(Gi.prototype);class Wi extends ii{constructor(t,e){super(),this.body=t,this.defaultOptions={rtl:!1,showCurrentTime:!0,alignCurrentTime:void 0,moment:qn,locales:zi,locale:"en"},this.options=ni.extend({},this.defaultOptions),this.setOptions(e),this.options.locales=ni.extend({},zi,this.options.locales);const n=this.defaultOptions.locales[this.defaultOptions.locale];Object.keys(this.options.locales).forEach((t=>{this.options.locales[t]=ni.extend({},n,this.options.locales[t])})),this.offset=0,this._create()}_create(){const t=document.createElement("div");t.className="vis-current-time",t.style.position="absolute",t.style.top="0px",t.style.height="100%",this.bar=t}destroy(){this.options.showCurrentTime=!1,this.redraw(),this.body=null}setOptions(t){t&&ni.selectiveExtend(["rtl","showCurrentTime","alignCurrentTime","moment","locale","locales"],this.options,t)}redraw(){if(this.options.showCurrentTime){const t=this.body.dom.backgroundVertical;this.bar.parentNode!=t&&(this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),t.appendChild(this.bar),this.start());let e=this.options.moment(Date.now()+this.offset);this.options.alignCurrentTime&&(e=e.startOf(this.options.alignCurrentTime));const n=this.body.util.toScreen(e);let i=this.options.locales[this.options.locale];i||(this.warned||(console.warn(`WARNING: options.locales['${this.options.locale}'] not found. See https://visjs.github.io/vis-timeline/docs/timeline/#Localization`),this.warned=!0),i=this.options.locales.en);let r=`${i.current} ${i.time}: ${e.format("dddd, MMMM Do YYYY, H:mm:ss")}`;r=r.charAt(0).toUpperCase()+r.substring(1),this.options.rtl?this.bar.style.transform=`translateX(${-1*n}px)`:this.bar.style.transform=`translateX(${n}px)`,this.bar.title=r}else this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),this.stop();return!1}start(){const t=this;!function e(){t.stop();let n=1/t.body.range.conversion(t.body.domProps.center.width).scale/10;n<30&&(n=30),n>1e3&&(n=1e3),t.redraw(),t.body.emitter.emit("currentTimeTick"),t.currentTimeTimer=setTimeout(e,n)}()}stop(){void 0!==this.currentTimeTimer&&(clearTimeout(this.currentTimeTimer),delete this.currentTimeTimer)}setCurrentTime(t){const e=ni.convert(t,"Date").valueOf(),n=Date.now();this.offset=e-n,this.redraw()}getCurrentTime(){return new Date(Date.now()+this.offset)}}const Ui=.001;function Vi(t){t.sort(((t,e)=>t.data.start-e.data.start))}function Xi(t){t.sort(((t,e)=>("end"in t.data?t.data.end:t.data.start)-("end"in e.data?e.data.end:e.data.start)))}function qi(t,e,n,i){return null===Qi(t,e.item,!1,(t=>t.stack&&(n||null===t.top)),(t=>t.stack),(t=>e.axis),i)}function Ki(t,e,n){const i=Qi(t,e.item,!1,(t=>t.stack),(t=>!0),(t=>t.baseTop));n.height=i-n.top+.5*e.item.vertical}function $i(t,e,n,i){for(let r=0;r<t.length;r++)if(null==t[r].data.subgroup)t[r].top=e.item.vertical;else if(void 0!==t[r].data.subgroup&&i){let i=0;for(const e in n)n.hasOwnProperty(e)&&1==n[e].visible&&n[e].index<n[t[r].data.subgroup].index&&(i+=n[e].height,n[t[r].data.subgroup].top=i);t[r].top=i+.5*e.item.vertical}i||Zi(t,e,n)}function Zi(t,e,n){Qi(Object.values(n).sort(((t,e)=>t.index>e.index?1:t.index<e.index?-1:0)),{vertical:0},!0,(t=>!0),(t=>!0),(t=>0));for(let i=0;i<t.length;i++)void 0!==t[i].data.subgroup&&(t[i].top=n[t[i].data.subgroup].top+.5*e.item.vertical)}function Ji(t,e,n){let i=!1;const r=[];for(var o in n)n[o].hasOwnProperty("index")?r[n[o].index]=o:r.push(o);for(let a=0;a<r.length;a++)if(o=r[a],n.hasOwnProperty(o)){i=i||n[o].stack,n[o].top=0;for(const t in n)n[t].visible&&n[o].index>n[t].index&&(n[o].top+=n[t].height);const r=t[o];for(let t=0;t<r.length;t++)void 0!==r[t].data.subgroup&&(r[t].top=n[r[t].data.subgroup].top+.5*e.item.vertical,n[o].stack&&(r[t].baseTop=r[t].top));i&&n[o].stack&&Ki(t[o],e,n[o])}}function Qi(t,e,n,i,r,o,a){let s=t=>t.start,l=t=>t.end;if(!n){const n=!(!t[0]||!t[0].options.rtl);s=n?t=>t.right:t=>t.left,l=t=>s(t)+t.width+e.horizontal}const u=[],c=[];let h=null,d=0;for(const e of t)if(i(e))u.push(e);else if(r(e)){const t=s(e);null!==h&&t<h-Ui&&(d=0),h=t,d=tr(c,(e=>s(e)-Ui>t),d),c.splice(d,0,e),d++}h=null;let f=null;d=0;let p=0,m=0,g=0;for(;u.length>0;){const t=u.shift();t.top=o(t);const n=s(t),i=l(t);null!==h&&n<h-Ui&&(p=0,m=0,d=0,f=null),h=n,p=tr(c,(t=>n<l(t)-Ui),p),(null===f||f<i-Ui)&&(m=tr(c,(t=>i<s(t)-Ui),Math.max(p,m))),null!==f&&f-Ui>i&&(m=er(c,(t=>i+Ui>=s(t)),p,horizontalOVerlapEndIndex)+1);const _=c.slice(p,m).filter((t=>n<l(t)-Ui&&i-Ui>s(t))).sort(((t,e)=>t.top-e.top));for(let n=0;n<_.length;n++){const i=_[n];y=i,b=e,(v=t).top-b.vertical+Ui<y.top+y.height&&v.top+v.height+b.vertical-Ui>y.top&&(t.top=i.top+i.height+e.vertical)}r(t)&&(d=tr(c,(t=>s(t)-Ui>n),d),c.splice(d,0,t),d++);const w=t.top+t.height;if(w>g&&(g=w),a&&a())return null}var v,y,b;return g}function tr(t,e,n){n||(n=0);const i=t.slice(n).findIndex(e);return-1===i?t.length:i+n}function er(t,e,n,r){for(n||(n=0),r||(r=t.length),i=r-1;i>=n;i--)if(e(t[i]))return i;return n-1}var nr=Object.freeze({__proto__:null,orderByStart:Vi,orderByEnd:Xi,stack:qi,substack:Ki,nostack:$i,stackSubgroups:Zi,stackSubgroupsWithInnerStack:Ji});const ir="__background__";class rr{constructor(t,e,n){if(this.groupId=t,this.subgroups={},this.subgroupStack={},this.subgroupStackAll=!1,this.subgroupVisibility={},this.doInnerStack=!1,this.shouldBailStackItems=!1,this.subgroupIndex=0,this.subgroupOrderer=e&&e.subgroupOrder,this.itemSet=n,this.isVisible=null,this.stackDirty=!0,this._disposeCallbacks=[],e&&e.nestedGroups&&(this.nestedGroups=e.nestedGroups,0==e.showNested?this.showNested=!1:this.showNested=!0),e&&e.subgroupStack)if("boolean"==typeof e.subgroupStack)this.doInnerStack=e.subgroupStack,this.subgroupStackAll=e.subgroupStack;else for(const t in e.subgroupStack)this.subgroupStack[t]=e.subgroupStack[t],this.doInnerStack=this.doInnerStack||e.subgroupStack[t];e&&e.heightMode?this.heightMode=e.heightMode:this.heightMode=n.options.groupHeightMode,this.nestedInGroup=null,this.dom={},this.props={label:{width:0,height:0}},this.className=null,this.items={},this.visibleItems=[],this.itemsInRange=[],this.orderedItems={byStart:[],byEnd:[]},this.checkRangedItems=!1;const i=()=>{this.checkRangedItems=!0};this.itemSet.body.emitter.on("checkRangedItems",i),this._disposeCallbacks.push((()=>{this.itemSet.body.emitter.off("checkRangedItems",i)})),this._create(),this.setData(e)}_create(){const t=document.createElement("div");this.itemSet.options.groupEditable.order?t.className="vis-label draggable":t.className="vis-label",this.dom.label=t;const e=document.createElement("div");e.className="vis-inner",t.appendChild(e),this.dom.inner=e;const n=document.createElement("div");n.className="vis-group",n["vis-group"]=this,this.dom.foreground=n,this.dom.background=document.createElement("div"),this.dom.background.className="vis-group",this.dom.axis=document.createElement("div"),this.dom.axis.className="vis-group",this.dom.marker=document.createElement("div"),this.dom.marker.style.visibility="hidden",this.dom.marker.style.position="absolute",this.dom.marker.innerHTML="",this.dom.background.appendChild(this.dom.marker)}setData(t){if(this.itemSet.groupTouchParams.isDragging)return;let e,n;if(t&&t.subgroupVisibility)for(const e in t.subgroupVisibility)this.subgroupVisibility[e]=t.subgroupVisibility[e];if(this.itemSet.options&&this.itemSet.options.groupTemplate?(n=this.itemSet.options.groupTemplate.bind(this),e=n(t,this.dom.inner)):e=t&&t.content,e instanceof Element){for(;this.dom.inner.firstChild;)this.dom.inner.removeChild(this.dom.inner.firstChild);this.dom.inner.appendChild(e)}else e instanceof Object&&e.isReactComponent||(e instanceof Object?n(t,this.dom.inner):this.dom.inner.innerHTML=null!=e?ni.xss(e):ni.xss(this.groupId||""));this.dom.label.title=t&&t.title||"",this.dom.inner.firstChild?ni.removeClassName(this.dom.inner,"vis-hidden"):ni.addClassName(this.dom.inner,"vis-hidden"),t&&t.nestedGroups?(this.nestedGroups&&this.nestedGroups==t.nestedGroups||(this.nestedGroups=t.nestedGroups),void 0===t.showNested&&void 0!==this.showNested||(0==t.showNested?this.showNested=!1:this.showNested=!0),ni.addClassName(this.dom.label,"vis-nesting-group"),this.showNested?(ni.removeClassName(this.dom.label,"collapsed"),ni.addClassName(this.dom.label,"expanded")):(ni.removeClassName(this.dom.label,"expanded"),ni.addClassName(this.dom.label,"collapsed"))):this.nestedGroups&&(this.nestedGroups=null,ni.removeClassName(this.dom.label,"collapsed"),ni.removeClassName(this.dom.label,"expanded"),ni.removeClassName(this.dom.label,"vis-nesting-group")),t&&(t.treeLevel||t.nestedInGroup)?(ni.addClassName(this.dom.label,"vis-nested-group"),t.treeLevel?ni.addClassName(this.dom.label,"vis-group-level-"+t.treeLevel):ni.addClassName(this.dom.label,"vis-group-level-unknown-but-gte1")):ni.addClassName(this.dom.label,"vis-group-level-0");const i=t&&t.className||null;i!=this.className&&(this.className&&(ni.removeClassName(this.dom.label,this.className),ni.removeClassName(this.dom.foreground,this.className),ni.removeClassName(this.dom.background,this.className),ni.removeClassName(this.dom.axis,this.className)),ni.addClassName(this.dom.label,i),ni.addClassName(this.dom.foreground,i),ni.addClassName(this.dom.background,i),ni.addClassName(this.dom.axis,i),this.className=i),this.style&&(ni.removeCssText(this.dom.label,this.style),this.style=null),t&&t.style&&(ni.addCssText(this.dom.label,t.style),this.style=t.style)}getLabelWidth(){return this.props.label.width}_didMarkerHeightChange(){const t=this.dom.marker.clientHeight;if(t!=this.lastMarkerHeight){this.lastMarkerHeight=t;const e={};let n=0;ni.forEach(this.items,((t,i)=>{if(t.dirty=!0,t.displayed){const r=!0;e[i]=t.redraw(r),n=e[i].length}}));if(n>0)for(let t=0;t<n;t++)ni.forEach(e,(e=>{e[t]()}));return!0}return!1}_calculateGroupSizeAndPosition(){const{offsetTop:t,offsetLeft:e,offsetWidth:n}=this.dom.foreground;this.top=t,this.right=e,this.width=n}_shouldBailItemsRedraw(){const t=this,e=this.itemSet.options.onTimeout,n={relativeBailingTime:this.itemSet.itemsSettingTime,bailTimeMs:e&&e.timeoutMs,userBailFunction:e&&e.callback,shouldBailStackItems:this.shouldBailStackItems};let i=null;if(!this.itemSet.initialDrawDone){if(n.shouldBailStackItems)return!0;Math.abs(Date.now()-new Date(n.relativeBailingTime))>n.bailTimeMs&&(n.userBailFunction&&null==this.itemSet.userContinueNotBail?n.userBailFunction((e=>{t.itemSet.userContinueNotBail=e,i=!e})):i=0==t.itemSet.userContinueNotBail)}return i}_redrawItems(t,e,n,i){if(t||this.stackDirty||this.isVisible&&!e){const t={byEnd:this.orderedItems.byEnd.filter((t=>!t.isCluster)),byStart:this.orderedItems.byStart.filter((t=>!t.isCluster))},e={byEnd:[...new Set(this.orderedItems.byEnd.map((t=>t.cluster)).filter((t=>!!t)))],byStart:[...new Set(this.orderedItems.byStart.map((t=>t.cluster)).filter((t=>!!t)))]},r=()=>[...this._updateItemsInRange(t,this.visibleItems.filter((t=>!t.isCluster)),i),...this._updateClustersInRange(e,this.visibleItems.filter((t=>t.isCluster)),i)],o=t=>{let e={};for(const n in this.subgroups){const i=this.visibleItems.filter((t=>t.data.subgroup===n));e[n]=t?i.sort(((e,n)=>t(e.data,n.data))):i}return e};if("function"==typeof this.itemSet.options.order){const t=this;if(this.doInnerStack&&this.itemSet.options.stackSubgroups){Ji(o(this.itemSet.options.order),n,this.subgroups),this.visibleItems=r(),this._updateSubGroupHeights(n)}else{this.visibleItems=r(),this._updateSubGroupHeights(n);const e=this.visibleItems.slice().filter((t=>t.isCluster||!t.isCluster&&!t.cluster)).sort(((e,n)=>t.itemSet.options.order(e.data,n.data)));this.shouldBailStackItems=qi(e,n,!0,this._shouldBailItemsRedraw.bind(this))}}else if(this.visibleItems=r(),this._updateSubGroupHeights(n),this.itemSet.options.stack)if(this.doInnerStack&&this.itemSet.options.stackSubgroups){Ji(o(),n,this.subgroups)}else this.shouldBailStackItems=qi(this.visibleItems,n,!0,this._shouldBailItemsRedraw.bind(this));else $i(this.visibleItems,n,this.subgroups,this.itemSet.options.stackSubgroups);for(let t=0;t<this.visibleItems.length;t++)this.visibleItems[t].repositionX(),void 0!==this.subgroupVisibility[this.visibleItems[t].data.subgroup]&&(this.subgroupVisibility[this.visibleItems[t].data.subgroup]||this.visibleItems[t].hide());this.itemSet.options.cluster&&ni.forEach(this.items,(t=>{t.cluster&&t.displayed&&t.hide()})),this.shouldBailStackItems&&this.itemSet.body.emitter.emit("destroyTimeline"),this.stackDirty=!1}}_didResize(t,e){t=ni.updateProperty(this,"height",e)||t;const n=this.dom.inner.clientWidth,i=this.dom.inner.clientHeight;return t=ni.updateProperty(this.props.label,"width",n)||t,t=ni.updateProperty(this.props.label,"height",i)||t}_applyGroupHeight(t){this.dom.background.style.height=`${t}px`,this.dom.foreground.style.height=`${t}px`,this.dom.label.style.height=`${t}px`}_updateItemsVerticalPosition(t){for(let e=0,n=this.visibleItems.length;e<n;e++){const n=this.visibleItems[e];n.repositionY(t),this.isVisible||this.groupId==ir||n.displayed&&n.hide()}}redraw(t,e,n,i){let r=!1;const o=this.isVisible;let a;const s=[()=>{n=this._didMarkerHeightChange.call(this)||n},this._updateSubGroupHeights.bind(this,e),this._calculateGroupSizeAndPosition.bind(this),()=>{this.isVisible=this._isGroupVisible.bind(this)(t,e)},()=>{this._redrawItems.bind(this)(n,o,e,t)},this._updateSubgroupsSizes.bind(this),()=>{a=this._calculateHeight.bind(this)(e)},this._calculateGroupSizeAndPosition.bind(this),()=>{r=this._didResize.bind(this)(r,a)},()=>{this._applyGroupHeight.bind(this)(a)},()=>{this._updateItemsVerticalPosition.bind(this)(e)},(()=>(!this.isVisible&&this.height&&(r=!1),r)).bind(this)];if(i)return s;{let t;return s.forEach((e=>{t=e()})),t}}_updateSubGroupHeights(t){if(Object.keys(this.subgroups).length>0){const e=this;this._resetSubgroups(),ni.forEach(this.visibleItems,(n=>{void 0!==n.data.subgroup&&(e.subgroups[n.data.subgroup].height=Math.max(e.subgroups[n.data.subgroup].height,n.height+t.item.vertical),e.subgroups[n.data.subgroup].visible=void 0===this.subgroupVisibility[n.data.subgroup]||Boolean(this.subgroupVisibility[n.data.subgroup]))}))}}_isGroupVisible(t,e){return this.top<=t.body.domProps.centerContainer.height-t.body.domProps.scrollTop+e.axis&&this.top+this.height+e.axis>=-t.body.domProps.scrollTop}_calculateHeight(t){let e,n;if(n="fixed"===this.heightMode?ni.toArray(this.items):this.visibleItems,n.length>0){let i=n[0].top,r=n[0].top+n[0].height;if(ni.forEach(n,(t=>{i=Math.min(i,t.top),r=Math.max(r,t.top+t.height)})),i>t.axis){const e=i-t.axis;r-=e,ni.forEach(n,(t=>{t.top-=e}))}e=Math.ceil(r+t.item.vertical/2),"fitItems"!==this.heightMode&&(e=Math.max(e,this.props.label.height))}else e=this.props.label.height;return e}show(){this.dom.label.parentNode||this.itemSet.dom.labelSet.appendChild(this.dom.label),this.dom.foreground.parentNode||this.itemSet.dom.foreground.appendChild(this.dom.foreground),this.dom.background.parentNode||this.itemSet.dom.background.appendChild(this.dom.background),this.dom.axis.parentNode||this.itemSet.dom.axis.appendChild(this.dom.axis)}hide(){const t=this.dom.label;t.parentNode&&t.parentNode.removeChild(t);const e=this.dom.foreground;e.parentNode&&e.parentNode.removeChild(e);const n=this.dom.background;n.parentNode&&n.parentNode.removeChild(n);const i=this.dom.axis;i.parentNode&&i.parentNode.removeChild(i)}add(t){if(this.items[t.id]=t,t.setParent(this),this.stackDirty=!0,void 0!==t.data.subgroup&&(this._addToSubgroup(t),this.orderSubgroups()),!this.visibleItems.includes(t)){const e=this.itemSet.body.range;this._checkIfVisible(t,this.visibleItems,e)}}_addToSubgroup(t,e=t.data.subgroup){null!=e&&void 0===this.subgroups[e]&&(this.subgroups[e]={height:0,top:0,start:t.data.start,end:t.data.end||t.data.start,visible:!1,index:this.subgroupIndex,items:[],stack:this.subgroupStackAll||this.subgroupStack[e]||!1},this.subgroupIndex++),new Date(t.data.start)<new Date(this.subgroups[e].start)&&(this.subgroups[e].start=t.data.start);const n=t.data.end||t.data.start;new Date(n)>new Date(this.subgroups[e].end)&&(this.subgroups[e].end=n),this.subgroups[e].items.push(t)}_updateSubgroupsSizes(){const t=this;if(t.subgroups)for(const e in t.subgroups){const n=t.subgroups[e].items[0].data.end||t.subgroups[e].items[0].data.start;let i=t.subgroups[e].items[0].data.start,r=n-1;t.subgroups[e].items.forEach((t=>{new Date(t.data.start)<new Date(i)&&(i=t.data.start);const e=t.data.end||t.data.start;new Date(e)>new Date(r)&&(r=e)})),t.subgroups[e].start=i,t.subgroups[e].end=new Date(r-1)}}orderSubgroups(){if(void 0!==this.subgroupOrderer){const t=[];if("string"==typeof this.subgroupOrderer){for(const e in this.subgroups)t.push({subgroup:e,sortField:this.subgroups[e].items[0].data[this.subgroupOrderer]});t.sort(((t,e)=>t.sortField-e.sortField))}else if("function"==typeof this.subgroupOrderer){for(const e in this.subgroups)t.push(this.subgroups[e].items[0].data);t.sort(this.subgroupOrderer)}if(t.length>0)for(let e=0;e<t.length;e++)this.subgroups[t[e].subgroup].index=e}}_resetSubgroups(){for(const t in this.subgroups)this.subgroups.hasOwnProperty(t)&&(this.subgroups[t].visible=!1,this.subgroups[t].height=0)}remove(t){delete this.items[t.id],t.setParent(null),this.stackDirty=!0;const e=this.visibleItems.indexOf(t);-1!=e&&this.visibleItems.splice(e,1),void 0!==t.data.subgroup&&(this._removeFromSubgroup(t),this.orderSubgroups())}_removeFromSubgroup(t,e=t.data.subgroup){if(null!=e){const n=this.subgroups[e];if(n){const i=n.items.indexOf(t);i>=0&&(n.items.splice(i,1),n.items.length?this._updateSubgroupsSizes():delete this.subgroups[e])}}}removeFromDataSet(t){this.itemSet.removeItem(t.id)}order(){const t=ni.toArray(this.items),e=[],n=[];for(let i=0;i<t.length;i++)void 0!==t[i].data.end&&n.push(t[i]),e.push(t[i]);this.orderedItems={byStart:e,byEnd:n},Vi(this.orderedItems.byStart),Xi(this.orderedItems.byEnd)}_updateItemsInRange(t,e,n){const i=[],r={};if(!this.isVisible&&this.groupId!=ir){for(let t=0;t<e.length;t++){var o=e[t];o.displayed&&o.hide()}return i}const a=(n.end-n.start)/4,s=n.start-a,l=n.end+a,u=t=>{const{start:e,end:n}=t;return n<s?-1:e<=l?0:1};if(e.length>0)for(let t=0;t<e.length;t++)this._checkIfVisibleWithReference(e[t],i,r,n);const c=ni.binarySearchCustom(t.byStart,(t=>t<s?-1:t<=l?0:1),"data","start");if(this._traceVisible(c,t.byStart,i,r,(t=>t.data.start<s||t.data.start>l)),1==this.checkRangedItems){this.checkRangedItems=!1;for(let e=0;e<t.byEnd.length;e++)this._checkIfVisibleWithReference(t.byEnd[e],i,r,n)}else{const e=ni.binarySearchCustom(t.byEnd,u,"data");this._traceVisible(e,t.byEnd,i,r,(t=>t.data.end<s||t.data.start>l))}const h={};let d=0;for(let t=0;t<i.length;t++){const e=i[t];if(!e.displayed){const n=!0;h[t]=e.redraw(n),d=h[t].length}}if(d>0)for(let t=0;t<d;t++)ni.forEach(h,(e=>{e[t]()}));for(let t=0;t<i.length;t++)i[t].repositionX();return i}_traceVisible(t,e,n,i,r){if(-1!=t){for(let o=t;o>=0;o--){let t=e[o];if(r(t))break;t.isCluster&&!t.hasItems()||t.cluster||void 0===i[t.id]&&(i[t.id]=!0,n.push(t))}for(let o=t+1;o<e.length;o++){let t=e[o];if(r(t))break;t.isCluster&&!t.hasItems()||t.cluster||void 0===i[t.id]&&(i[t.id]=!0,n.push(t))}}}_checkIfVisible(t,e,n){t.isVisible(n)?(t.displayed||t.show(),t.repositionX(),e.push(t)):t.displayed&&t.hide()}_checkIfVisibleWithReference(t,e,n,i){t.isVisible(i)?void 0===n[t.id]&&(n[t.id]=!0,e.push(t)):t.displayed&&t.hide()}_updateClustersInRange(t,e,n){const i=[],r={};if(e.length>0)for(let t=0;t<e.length;t++)this._checkIfVisibleWithReference(e[t],i,r,n);for(let e=0;e<t.byStart.length;e++)this._checkIfVisibleWithReference(t.byStart[e],i,r,n);for(let e=0;e<t.byEnd.length;e++)this._checkIfVisibleWithReference(t.byEnd[e],i,r,n);const o={};let a=0;for(let t=0;t<i.length;t++){const e=i[t];if(!e.displayed){const n=!0;o[t]=e.redraw(n),a=o[t].length}}if(a>0)for(var s=0;s<a;s++)ni.forEach(o,(function(t){t[s]()}));for(let t=0;t<i.length;t++)i[t].repositionX();return i}changeSubgroup(t,e,n){this._removeFromSubgroup(t,e),this._addToSubgroup(t,n),this.orderSubgroups()}dispose(){let t;for(this.hide();t=this._disposeCallbacks.pop();)t()}}class or extends rr{constructor(t,e,n){super(t,e,n),this.width=0,this.height=0,this.top=0,this.left=0}redraw(t,e,n){this.visibleItems=this._updateItemsInRange(this.orderedItems,this.visibleItems,t),this.width=this.dom.background.offsetWidth,this.dom.background.style.height="0";for(let t=0,n=this.visibleItems.length;t<n;t++){this.visibleItems[t].repositionY(e)}return!1}show(){this.dom.background.parentNode||this.itemSet.dom.background.appendChild(this.dom.background)}}class ar{constructor(t,e,n){this.id=null,this.parent=null,this.data=t,this.dom=null,this.conversion=e||{},this.defaultOptions={locales:zi,locale:"en"},this.options=ni.extend({},this.defaultOptions,n),this.options.locales=ni.extend({},zi,this.options.locales);const i=this.defaultOptions.locales[this.defaultOptions.locale];Object.keys(this.options.locales).forEach((t=>{this.options.locales[t]=ni.extend({},i,this.options.locales[t])})),this.selected=!1,this.displayed=!1,this.groupShowing=!0,this.selectable=n&&n.selectable||!1,this.dirty=!0,this.top=null,this.right=null,this.left=null,this.width=null,this.height=null,this.setSelectability(t),this.editable=null,this._updateEditStatus()}select(){this.selectable&&(this.selected=!0,this.dirty=!0,this.displayed&&this.redraw())}unselect(){this.selected=!1,this.dirty=!0,this.displayed&&this.redraw()}setData(t){null!=t.group&&this.data.group!=t.group&&null!=this.parent&&this.parent.itemSet._moveToGroup(this,t.group),this.setSelectability(t),this.parent&&(this.parent.stackDirty=!0);null!=t.subgroup&&this.data.subgroup!=t.subgroup&&null!=this.parent&&this.parent.changeSubgroup(this,this.data.subgroup,t.subgroup),this.data=t,this._updateEditStatus(),this.dirty=!0,this.displayed&&this.redraw()}setSelectability(t){t&&(this.selectable=void 0===t.selectable||Boolean(t.selectable))}setParent(t){this.displayed?(this.hide(),this.parent=t,this.parent&&this.show()):this.parent=t}isVisible(t){return!1}show(){return!1}hide(){return!1}redraw(){}repositionX(){}repositionY(){}_repaintDragCenter(){if(this.selected&&this.editable.updateTime&&!this.dom.dragCenter){const t=this,e=document.createElement("div");e.className="vis-drag-center",e.dragCenterItem=this,this.hammerDragCenter=new wi(e),this.hammerDragCenter.on("tap",(e=>{t.parent.itemSet.body.emitter.emit("click",{event:e,item:t.id})})),this.hammerDragCenter.on("doubletap",(e=>{e.stopPropagation(),t.parent.itemSet._onUpdateItem(t),t.parent.itemSet.body.emitter.emit("doubleClick",{event:e,item:t.id})})),this.hammerDragCenter.on("panstart",(e=>{e.stopPropagation(),t.parent.itemSet._onDragStart(e)})),this.hammerDragCenter.on("panmove",t.parent.itemSet._onDrag.bind(t.parent.itemSet)),this.hammerDragCenter.on("panend",t.parent.itemSet._onDragEnd.bind(t.parent.itemSet)),this.hammerDragCenter.get("press").set({time:1e4}),this.dom.box?this.dom.dragLeft?this.dom.box.insertBefore(e,this.dom.dragLeft):this.dom.box.appendChild(e):this.dom.point&&this.dom.point.appendChild(e),this.dom.dragCenter=e}else!this.selected&&this.dom.dragCenter&&(this.dom.dragCenter.parentNode&&this.dom.dragCenter.parentNode.removeChild(this.dom.dragCenter),this.dom.dragCenter=null,this.hammerDragCenter&&(this.hammerDragCenter.destroy(),this.hammerDragCenter=null))}_repaintDeleteButton(t){const e=(this.options.editable.overrideItems||null==this.editable)&&this.options.editable.remove||!this.options.editable.overrideItems&&null!=this.editable&&this.editable.remove;if(this.selected&&e&&!this.dom.deleteButton){const e=this,n=document.createElement("div");this.options.rtl?n.className="vis-delete-rtl":n.className="vis-delete";let i=this.options.locales[this.options.locale];i||(this.warned||(console.warn(`WARNING: options.locales['${this.options.locale}'] not found. See https://visjs.github.io/vis-timeline/docs/timeline/#Localization`),this.warned=!0),i=this.options.locales.en),n.title=i.deleteSelected,this.hammerDeleteButton=new wi(n).on("tap",(t=>{t.stopPropagation(),e.parent.removeFromDataSet(e)})),t.appendChild(n),this.dom.deleteButton=n}else this.selected&&e||!this.dom.deleteButton||(this.dom.deleteButton.parentNode&&this.dom.deleteButton.parentNode.removeChild(this.dom.deleteButton),this.dom.deleteButton=null,this.hammerDeleteButton&&(this.hammerDeleteButton.destroy(),this.hammerDeleteButton=null))}_repaintOnItemUpdateTimeTooltip(t){if(!this.options.tooltipOnItemUpdateTime)return;const e=(this.options.editable.updateTime||!0===this.data.editable)&&!1!==this.data.editable;if(this.selected&&e&&!this.dom.onItemUpdateTimeTooltip){const e=document.createElement("div");e.className="vis-onUpdateTime-tooltip",t.appendChild(e),this.dom.onItemUpdateTimeTooltip=e}else!this.selected&&this.dom.onItemUpdateTimeTooltip&&(this.dom.onItemUpdateTimeTooltip.parentNode&&this.dom.onItemUpdateTimeTooltip.parentNode.removeChild(this.dom.onItemUpdateTimeTooltip),this.dom.onItemUpdateTimeTooltip=null);if(this.dom.onItemUpdateTimeTooltip){this.dom.onItemUpdateTimeTooltip.style.visibility=this.parent.itemSet.touchParams.itemIsDragging?"visible":"hidden",this.dom.onItemUpdateTimeTooltip.style.transform="translateX(-50%)",this.dom.onItemUpdateTimeTooltip.style.left="50%";const t=50,e=this.parent.itemSet.body.domProps.scrollTop;let n;n="top"==this.options.orientation.item?this.top:this.parent.height-this.top-this.height;let i,r;n+this.parent.top-t<-e?(this.dom.onItemUpdateTimeTooltip.style.bottom="",this.dom.onItemUpdateTimeTooltip.style.top=`${this.height+2}px`):(this.dom.onItemUpdateTimeTooltip.style.top="",this.dom.onItemUpdateTimeTooltip.style.bottom=`${this.height+2}px`),this.options.tooltipOnItemUpdateTime&&this.options.tooltipOnItemUpdateTime.template?(r=this.options.tooltipOnItemUpdateTime.template.bind(this),i=r(this.data)):(i=`start: ${qn(this.data.start).format("MM/DD/YYYY hh:mm")}`,this.data.end&&(i+=`<br> end: ${qn(this.data.end).format("MM/DD/YYYY hh:mm")}`)),this.dom.onItemUpdateTimeTooltip.innerHTML=ni.xss(i)}}_getItemData(){return this.parent.itemSet.itemsData.get(this.id)}_updateContents(t){let e,n,i,r,o;const a=this._getItemData(),s=(this.dom.box||this.dom.point).getElementsByClassName("vis-item-visible-frame")[0];if(this.options.visibleFrameTemplate?(o=this.options.visibleFrameTemplate.bind(this),r=ni.xss(o(a,s))):r="",s)if(r instanceof Object&&!(r instanceof Element))o(a,s);else if(n=this._contentToString(this.itemVisibleFrameContent)!==this._contentToString(r),n){if(r instanceof Element)s.innerHTML="",s.appendChild(r);else if(null!=r)s.innerHTML=ni.xss(r);else if("background"!=this.data.type||void 0!==this.data.content)throw new Error(`Property "content" missing in item ${this.id}`);this.itemVisibleFrameContent=r}if(this.options.template?(i=this.options.template.bind(this),e=i(a,t,this.data)):e=this.data.content,e instanceof Object&&!(e instanceof Element))i(a,t);else if(n=this._contentToString(this.content)!==this._contentToString(e),n){if(e instanceof Element)t.innerHTML="",t.appendChild(e);else if(null!=e)t.innerHTML=ni.xss(e);else if("background"!=this.data.type||void 0!==this.data.content)throw new Error(`Property "content" missing in item ${this.id}`);this.content=e}}_updateDataAttributes(t){if(this.options.dataAttributes&&this.options.dataAttributes.length>0){let e=[];if(Array.isArray(this.options.dataAttributes))e=this.options.dataAttributes;else{if("all"!=this.options.dataAttributes)return;e=Object.keys(this.data)}for(const n of e){const e=this.data[n];null!=e?t.setAttribute(`data-${n}`,e):t.removeAttribute(`data-${n}`)}}}_updateStyle(t){this.style&&(ni.removeCssText(t,this.style),this.style=null),this.data.style&&(ni.addCssText(t,this.data.style),this.style=this.data.style)}_contentToString(t){return"string"==typeof t?t:t&&"outerHTML"in t?t.outerHTML:t}_updateEditStatus(){this.options&&("boolean"==typeof this.options.editable?this.editable={updateTime:this.options.editable,updateGroup:this.options.editable,remove:this.options.editable}:"object"==typeof this.options.editable&&(this.editable={},ni.selectiveExtend(["updateTime","updateGroup","remove"],this.editable,this.options.editable))),this.options&&this.options.editable&&!0===this.options.editable.overrideItems||this.data&&("boolean"==typeof this.data.editable?this.editable={updateTime:this.data.editable,updateGroup:this.data.editable,remove:this.data.editable}:"object"==typeof this.data.editable&&(this.editable={},ni.selectiveExtend(["updateTime","updateGroup","remove"],this.editable,this.data.editable)))}getWidthLeft(){return 0}getWidthRight(){return 0}getTitle(){if(this.options.tooltip&&this.options.tooltip.template){return this.options.tooltip.template.bind(this)(this._getItemData(),this.data)}return this.data.title}}ar.prototype.stack=!0;class sr extends ar{constructor(t,e,n){if(super(t,e,n),this.props={dot:{width:0,height:0},line:{width:0,height:0}},t&&null==t.start)throw new Error(`Property "start" missing in item ${t}`)}isVisible(t){if(this.cluster)return!1;let e;const n=this.data.align||this.options.align,i=this.width*t.getMillisecondsPerPixel();return e="right"==n?this.data.start.getTime()>t.start&&this.data.start.getTime()-i<t.end:"left"==n?this.data.start.getTime()+i>t.start&&this.data.start.getTime()<t.end:this.data.start.getTime()+i/2>t.start&&this.data.start.getTime()-i/2<t.end,e}_createDomElement(){this.dom||(this.dom={},this.dom.box=document.createElement("DIV"),this.dom.content=document.createElement("DIV"),this.dom.content.className="vis-item-content",this.dom.box.appendChild(this.dom.content),this.dom.line=document.createElement("DIV"),this.dom.line.className="vis-line",this.dom.dot=document.createElement("DIV"),this.dom.dot.className="vis-dot",this.dom.box["vis-item"]=this,this.dirty=!0)}_appendDomElement(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.box.parentNode){const t=this.parent.dom.foreground;if(!t)throw new Error("Cannot redraw item: parent has no foreground container element");t.appendChild(this.dom.box)}if(!this.dom.line.parentNode){var t=this.parent.dom.background;if(!t)throw new Error("Cannot redraw item: parent has no background container element");t.appendChild(this.dom.line)}if(!this.dom.dot.parentNode){const e=this.parent.dom.axis;if(!t)throw new Error("Cannot redraw item: parent has no axis container element");e.appendChild(this.dom.dot)}this.displayed=!0}_updateDirtyDomComponents(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.box),this._updateStyle(this.dom.box);const t=this.editable.updateTime||this.editable.updateGroup,e=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(t?" vis-editable":" vis-readonly");this.dom.box.className=`vis-item vis-box${e}`,this.dom.line.className=`vis-item vis-line${e}`,this.dom.dot.className=`vis-item vis-dot${e}`}}_getDomComponentsSizes(){return{previous:{right:this.dom.box.style.right,left:this.dom.box.style.left},dot:{height:this.dom.dot.offsetHeight,width:this.dom.dot.offsetWidth},line:{width:this.dom.line.offsetWidth},box:{width:this.dom.box.offsetWidth,height:this.dom.box.offsetHeight}}}_updateDomComponentsSizes(t){this.options.rtl?this.dom.box.style.right="0px":this.dom.box.style.left="0px",this.props.dot.height=t.dot.height,this.props.dot.width=t.dot.width,this.props.line.width=t.line.width,this.width=t.box.width,this.height=t.box.height,this.options.rtl?this.dom.box.style.right=t.previous.right:this.dom.box.style.left=t.previous.left,this.dirty=!1}_repaintDomAdditionals(){this._repaintOnItemUpdateTimeTooltip(this.dom.box),this._repaintDragCenter(),this._repaintDeleteButton(this.dom.box)}redraw(t){let e;const n=[this._createDomElement.bind(this),this._appendDomElement.bind(this),this._updateDirtyDomComponents.bind(this),()=>{this.dirty&&(e=this._getDomComponentsSizes())},()=>{this.dirty&&this._updateDomComponentsSizes.bind(this)(e)},this._repaintDomAdditionals.bind(this)];if(t)return n;{let t;return n.forEach((e=>{t=e()})),t}}show(t){if(!this.displayed)return this.redraw(t)}hide(){if(this.displayed){const t=this.dom;t.box.remove?t.box.remove():t.box.parentNode&&t.box.parentNode.removeChild(t.box),t.line.remove?t.line.remove():t.line.parentNode&&t.line.parentNode.removeChild(t.line),t.dot.remove?t.dot.remove():t.dot.parentNode&&t.dot.parentNode.removeChild(t.dot),this.displayed=!1}}repositionXY(){const t=this.options.rtl,e=(t,e,n,i=!1)=>{if(void 0===e&&void 0===n)return;const r=i?-1*e:e;t.style.transform=void 0!==n?void 0!==e?`translate(${r}px, ${n}px)`:`translateY(${n}px)`:`translateX(${r}px)`};e(this.dom.box,this.boxX,this.boxY,t),e(this.dom.dot,this.dotX,this.dotY,t),e(this.dom.line,this.lineX,this.lineY,t)}repositionX(){const t=this.conversion.toScreen(this.data.start),e=void 0===this.data.align?this.options.align:this.data.align,n=this.props.line.width,i=this.props.dot.width;"right"==e?(this.boxX=t-this.width,this.lineX=t-n,this.dotX=t-n/2-i/2):"left"==e?(this.boxX=t,this.lineX=t,this.dotX=t+n/2-i/2):(this.boxX=t-this.width/2,this.lineX=this.options.rtl?t-n:t-n/2,this.dotX=t-i/2),this.options.rtl?this.right=this.boxX:this.left=this.boxX,this.repositionXY()}repositionY(){const t=this.options.orientation.item,e=this.dom.line.style;if("top"==t){const t=this.parent.top+this.top+1;this.boxY=this.top||0,e.height=`${t}px`,e.bottom="",e.top="0"}else{const t=this.parent.itemSet.props.height-this.parent.top-this.parent.height+this.top;this.boxY=this.parent.height-this.top-(this.height||0),e.height=`${t}px`,e.top="",e.bottom="0"}this.dotY=-this.props.dot.height/2,this.repositionXY()}getWidthLeft(){return this.width/2}getWidthRight(){return this.width/2}}class lr extends ar{constructor(t,e,n){if(super(t,e,n),this.props={dot:{top:0,width:0,height:0},content:{height:0,marginLeft:0,marginRight:0}},t&&null==t.start)throw new Error(`Property "start" missing in item ${t}`)}isVisible(t){if(this.cluster)return!1;const e=this.width*t.getMillisecondsPerPixel();return this.data.start.getTime()+e>t.start&&this.data.start<t.end}_createDomElement(){this.dom||(this.dom={},this.dom.point=document.createElement("div"),this.dom.content=document.createElement("div"),this.dom.content.className="vis-item-content",this.dom.point.appendChild(this.dom.content),this.dom.dot=document.createElement("div"),this.dom.point.appendChild(this.dom.dot),this.dom.point["vis-item"]=this,this.dirty=!0)}_appendDomElement(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.point.parentNode){const t=this.parent.dom.foreground;if(!t)throw new Error("Cannot redraw item: parent has no foreground container element");t.appendChild(this.dom.point)}this.displayed=!0}_updateDirtyDomComponents(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.point),this._updateStyle(this.dom.point);const t=this.editable.updateTime||this.editable.updateGroup,e=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(t?" vis-editable":" vis-readonly");this.dom.point.className=`vis-item vis-point${e}`,this.dom.dot.className=`vis-item vis-dot${e}`}}_getDomComponentsSizes(){return{dot:{width:this.dom.dot.offsetWidth,height:this.dom.dot.offsetHeight},content:{width:this.dom.content.offsetWidth,height:this.dom.content.offsetHeight},point:{width:this.dom.point.offsetWidth,height:this.dom.point.offsetHeight}}}_updateDomComponentsSizes(t){this.props.dot.width=t.dot.width,this.props.dot.height=t.dot.height,this.props.content.height=t.content.height,this.options.rtl?this.dom.content.style.marginRight=this.props.dot.width/2+"px":this.dom.content.style.marginLeft=this.props.dot.width/2+"px",this.width=t.point.width,this.height=t.point.height,this.dom.dot.style.top=(this.height-this.props.dot.height)/2+"px";const e=this.props.dot.width,n=this.options.rtl?e/2:e/2*-1;this.dom.dot.style.transform=`translateX(${n}px`,this.dirty=!1}_repaintDomAdditionals(){this._repaintOnItemUpdateTimeTooltip(this.dom.point),this._repaintDragCenter(),this._repaintDeleteButton(this.dom.point)}redraw(t){let e;const n=[this._createDomElement.bind(this),this._appendDomElement.bind(this),this._updateDirtyDomComponents.bind(this),()=>{this.dirty&&(e=this._getDomComponentsSizes())},()=>{this.dirty&&this._updateDomComponentsSizes.bind(this)(e)},this._repaintDomAdditionals.bind(this)];if(t)return n;{let t;return n.forEach((e=>{t=e()})),t}}repositionXY(){const t=this.options.rtl;((t,e,n,i=!1)=>{if(void 0===e&&void 0===n)return;const r=i?-1*e:e;t.style.transform=void 0!==n?void 0!==e?`translate(${r}px, ${n}px)`:`translateY(${n}px)`:`translateX(${r}px)`})(this.dom.point,this.pointX,this.pointY,t)}show(t){if(!this.displayed)return this.redraw(t)}hide(){this.displayed&&(this.dom.point.parentNode&&this.dom.point.parentNode.removeChild(this.dom.point),this.displayed=!1)}repositionX(){const t=this.conversion.toScreen(this.data.start);this.pointX=t,this.options.rtl?this.right=t-this.props.dot.width:this.left=t-this.props.dot.width,this.repositionXY()}repositionY(){const t=this.options.orientation.item;this.pointY="top"==t?this.top:this.parent.height-this.top-this.height,this.repositionXY()}getWidthLeft(){return this.props.dot.width}getWidthRight(){return this.props.dot.width}}class ur extends ar{constructor(t,e,n){if(super(t,e,n),this.props={content:{width:0}},this.overflow=!1,t){if(null==t.start)throw new Error(`Property "start" missing in item ${t.id}`);if(null==t.end)throw new Error(`Property "end" missing in item ${t.id}`)}}isVisible(t){return!this.cluster&&(this.data.start<t.end&&this.data.end>t.start)}_createDomElement(){this.dom||(this.dom={},this.dom.box=document.createElement("div"),this.dom.frame=document.createElement("div"),this.dom.frame.className="vis-item-overflow",this.dom.box.appendChild(this.dom.frame),this.dom.visibleFrame=document.createElement("div"),this.dom.visibleFrame.className="vis-item-visible-frame",this.dom.box.appendChild(this.dom.visibleFrame),this.dom.content=document.createElement("div"),this.dom.content.className="vis-item-content",this.dom.frame.appendChild(this.dom.content),this.dom.box["vis-item"]=this,this.dirty=!0)}_appendDomElement(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.box.parentNode){const t=this.parent.dom.foreground;if(!t)throw new Error("Cannot redraw item: parent has no foreground container element");t.appendChild(this.dom.box)}this.displayed=!0}_updateDirtyDomComponents(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.box),this._updateStyle(this.dom.box);const t=this.editable.updateTime||this.editable.updateGroup,e=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(t?" vis-editable":" vis-readonly");this.dom.box.className=this.baseClassName+e,this.dom.content.style.maxWidth="none"}}_getDomComponentsSizes(){return this.overflow="hidden"!==window.getComputedStyle(this.dom.frame).overflow,this.whiteSpace="nowrap"!==window.getComputedStyle(this.dom.content).whiteSpace,{content:{width:this.dom.content.offsetWidth},box:{height:this.dom.box.offsetHeight}}}_updateDomComponentsSizes(t){this.props.content.width=t.content.width,this.height=t.box.height,this.dom.content.style.maxWidth="",this.dirty=!1}_repaintDomAdditionals(){this._repaintOnItemUpdateTimeTooltip(this.dom.box),this._repaintDeleteButton(this.dom.box),this._repaintDragCenter(),this._repaintDragLeft(),this._repaintDragRight()}redraw(t){let e;const n=[this._createDomElement.bind(this),this._appendDomElement.bind(this),this._updateDirtyDomComponents.bind(this),()=>{this.dirty&&(e=this._getDomComponentsSizes.bind(this)())},()=>{this.dirty&&this._updateDomComponentsSizes.bind(this)(e)},this._repaintDomAdditionals.bind(this)];if(t)return n;{let t;return n.forEach((e=>{t=e()})),t}}show(t){if(!this.displayed)return this.redraw(t)}hide(){if(this.displayed){const t=this.dom.box;t.parentNode&&t.parentNode.removeChild(t),this.displayed=!1}}repositionX(t){const e=this.parent.width;let n=this.conversion.toScreen(this.data.start),i=this.conversion.toScreen(this.data.end);const r=void 0===this.data.align?this.options.align:this.data.align;let o,a;!1===this.data.limitSize||void 0!==t&&!0!==t||(n<-e&&(n=-e),i>2*e&&(i=2*e));const s=Math.max(Math.round(1e3*(i-n))/1e3,1);switch(this.overflow?(this.options.rtl?this.right=n:this.left=n,this.width=s+this.props.content.width,a=this.props.content.width):(this.options.rtl?this.right=n:this.left=n,this.width=s,a=Math.min(i-n,this.props.content.width)),this.options.rtl?this.dom.box.style.transform=`translateX(${-1*this.right}px)`:this.dom.box.style.transform=`translateX(${this.left}px)`,this.dom.box.style.width=`${s}px`,this.whiteSpace&&(this.height=this.dom.box.offsetHeight),r){case"left":this.dom.content.style.transform="translateX(0)";break;case"right":if(this.options.rtl){const t=-1*Math.max(s-a,0);this.dom.content.style.transform=`translateX(${t}px)`}else this.dom.content.style.transform=`translateX(${Math.max(s-a,0)}px)`;break;case"center":if(this.options.rtl){const t=-1*Math.max((s-a)/2,0);this.dom.content.style.transform=`translateX(${t}px)`}else this.dom.content.style.transform=`translateX(${Math.max((s-a)/2,0)}px)`;break;default:if(o=this.overflow?i>0?Math.max(-n,0):-a:n<0?-n:0,this.options.rtl){const t=-1*o;this.dom.content.style.transform=`translateX(${t}px)`}else this.dom.content.style.transform=`translateX(${o}px)`}}repositionY(){const t=this.options.orientation.item,e=this.dom.box;e.style.top="top"==t?`${this.top}px`:this.parent.height-this.top-this.height+"px"}_repaintDragLeft(){if((this.selected||this.options.itemsAlwaysDraggable.range)&&this.editable.updateTime&&!this.dom.dragLeft){const t=document.createElement("div");t.className="vis-drag-left",t.dragLeftItem=this,this.dom.box.appendChild(t),this.dom.dragLeft=t}else this.selected||this.options.itemsAlwaysDraggable.range||!this.dom.dragLeft||(this.dom.dragLeft.parentNode&&this.dom.dragLeft.parentNode.removeChild(this.dom.dragLeft),this.dom.dragLeft=null)}_repaintDragRight(){if((this.selected||this.options.itemsAlwaysDraggable.range)&&this.editable.updateTime&&!this.dom.dragRight){const t=document.createElement("div");t.className="vis-drag-right",t.dragRightItem=this,this.dom.box.appendChild(t),this.dom.dragRight=t}else this.selected||this.options.itemsAlwaysDraggable.range||!this.dom.dragRight||(this.dom.dragRight.parentNode&&this.dom.dragRight.parentNode.removeChild(this.dom.dragRight),this.dom.dragRight=null)}}ur.prototype.baseClassName="vis-item vis-range";class cr extends ar{constructor(t,e,n){if(super(t,e,n),this.props={content:{width:0}},this.overflow=!1,t){if(null==t.start)throw new Error(`Property "start" missing in item ${t.id}`);if(null==t.end)throw new Error(`Property "end" missing in item ${t.id}`)}}isVisible(t){return this.data.start<t.end&&this.data.end>t.start}_createDomElement(){this.dom||(this.dom={},this.dom.box=document.createElement("div"),this.dom.frame=document.createElement("div"),this.dom.frame.className="vis-item-overflow",this.dom.box.appendChild(this.dom.frame),this.dom.content=document.createElement("div"),this.dom.content.className="vis-item-content",this.dom.frame.appendChild(this.dom.content),this.dirty=!0)}_appendDomElement(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.box.parentNode){const t=this.parent.dom.background;if(!t)throw new Error("Cannot redraw item: parent has no background container element");t.appendChild(this.dom.box)}this.displayed=!0}_updateDirtyDomComponents(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.content),this._updateStyle(this.dom.box);const t=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"");this.dom.box.className=this.baseClassName+t}}_getDomComponentsSizes(){return this.overflow="hidden"!==window.getComputedStyle(this.dom.content).overflow,{content:{width:this.dom.content.offsetWidth}}}_updateDomComponentsSizes(t){this.props.content.width=t.content.width,this.height=0,this.dirty=!1}_repaintDomAdditionals(){}redraw(t){let e;const n=[this._createDomElement.bind(this),this._appendDomElement.bind(this),this._updateDirtyDomComponents.bind(this),()=>{this.dirty&&(e=this._getDomComponentsSizes.bind(this)())},()=>{this.dirty&&this._updateDomComponentsSizes.bind(this)(e)},this._repaintDomAdditionals.bind(this)];if(t)return n;{let t;return n.forEach((e=>{t=e()})),t}}repositionY(t){let e;const n=this.options.orientation.item;if(void 0!==this.data.subgroup){const t=this.data.subgroup;this.dom.box.style.height=`${this.parent.subgroups[t].height}px`,this.dom.box.style.top="top"==n?`${this.parent.top+this.parent.subgroups[t].top}px`:this.parent.top+this.parent.height-this.parent.subgroups[t].top-this.parent.subgroups[t].height+"px",this.dom.box.style.bottom=""}else this.parent instanceof or?(e=Math.max(this.parent.height,this.parent.itemSet.body.domProps.center.height,this.parent.itemSet.body.domProps.centerContainer.height),this.dom.box.style.bottom="bottom"==n?"0":"",this.dom.box.style.top="top"==n?"0":""):(e=this.parent.height,this.dom.box.style.top=`${this.parent.top}px`,this.dom.box.style.bottom="");this.dom.box.style.height=`${e}px`}}cr.prototype.baseClassName="vis-item vis-background",cr.prototype.stack=!1,cr.prototype.show=ur.prototype.show,cr.prototype.hide=ur.prototype.hide,cr.prototype.repositionX=ur.prototype.repositionX;class hr{constructor(t,e){this.container=t,this.overflowMethod=e||"cap",this.x=0,this.y=0,this.padding=5,this.hidden=!1,this.frame=document.createElement("div"),this.frame.className="vis-tooltip",this.container.appendChild(this.frame)}setPosition(t,e){this.x=parseInt(t),this.y=parseInt(e)}setText(t){t instanceof Element?(this.frame.innerHTML="",this.frame.appendChild(t)):this.frame.innerHTML=ni.xss(t)}show(t){if(void 0===t&&(t=!0),!0===t){var e=this.frame.clientHeight,n=this.frame.clientWidth,i=this.frame.parentNode.clientHeight,r=this.frame.parentNode.clientWidth,o=0,a=0;if("flip"==this.overflowMethod||"none"==this.overflowMethod){let t=!1,i=!0;"flip"==this.overflowMethod&&(this.y-e<this.padding&&(i=!1),this.x+n>r-this.padding&&(t=!0)),o=t?this.x-n:this.x,a=i?this.y-e:this.y}else(a=this.y-e)+e+this.padding>i&&(a=i-e-this.padding),a<this.padding&&(a=this.padding),(o=this.x)+n+this.padding>r&&(o=r-n-this.padding),o<this.padding&&(o=this.padding);this.frame.style.left=o+"px",this.frame.style.top=a+"px",this.frame.style.visibility="visible",this.hidden=!1}else this.hide()}hide(){this.hidden=!0,this.frame.style.left="0",this.frame.style.top="0",this.frame.style.visibility="hidden"}destroy(){this.frame.parentNode.removeChild(this.frame)}}class dr extends ar{constructor(t,e,n){if(super(t,e,Object.assign({},{fitOnDoubleClick:!0},n,{editable:!1})),this.props={content:{width:0,height:0}},!t||null==t.uiItems)throw new Error('Property "uiItems" missing in item '+t.id);this.id=Nn(),this.group=t.group,this._setupRange(),this.emitter=this.data.eventEmitter,this.range=this.data.range,this.attached=!1,this.isCluster=!0,this.data.isCluster=!0}hasItems(){return this.data.uiItems&&this.data.uiItems.length&&this.attached}setUiItems(t){this.detach(),this.data.uiItems=t,this._setupRange(),this.attach()}isVisible(t){const e=this.data.end?this.data.end-this.data.start:0,n=this.width*t.getMillisecondsPerPixel(),i=Math.max(this.data.start.getTime()+e,this.data.start.getTime()+n);return this.data.start<t.end&&i>t.start&&this.hasItems()}getData(){return{isCluster:!0,id:this.id,items:this.data.items||[],data:this.data}}redraw(t){var e,n,i=[this._createDomElement.bind(this),this._appendDomElement.bind(this),this._updateDirtyDomComponents.bind(this),function(){this.dirty&&(e=this._getDomComponentsSizes())}.bind(this),function(){this.dirty&&this._updateDomComponentsSizes.bind(this)(e)}.bind(this),this._repaintDomAdditionals.bind(this)];return t?i:(i.forEach((function(t){n=t()})),n)}show(){this.displayed||this.redraw()}hide(){if(this.displayed){var t=this.dom;t.box.parentNode&&t.box.parentNode.removeChild(t.box),this.options.showStipes&&(t.line.parentNode&&t.line.parentNode.removeChild(t.line),t.dot.parentNode&&t.dot.parentNode.removeChild(t.dot)),this.displayed=!1}}repositionX(){let t=this.conversion.toScreen(this.data.start),e=this.data.end?this.conversion.toScreen(this.data.end):0;if(e)this.repositionXWithRanges(t,e);else{let e=void 0===this.data.align?this.options.align:this.data.align;this.repositionXWithoutRanges(t,e)}this.options.showStipes&&(this.dom.line.style.display=this._isStipeVisible()?"block":"none",this.dom.dot.style.display=this._isStipeVisible()?"block":"none",this._isStipeVisible()&&this.repositionStype(t,e))}repositionStype(t,e){this.dom.line.style.display="block",this.dom.dot.style.display="block";const n=this.dom.line.offsetWidth,i=this.dom.dot.offsetWidth;if(e){const r=n+t+(e-t)/2,o=r-i/2,a=this.options.rtl?-1*r:r,s=this.options.rtl?-1*o:o;this.dom.line.style.transform=`translateX(${a}px)`,this.dom.dot.style.transform=`translateX(${s}px)`}else{const e=this.options.rtl?-1*t:t,n=this.options.rtl?-1*(t-i/2):t-i/2;this.dom.line.style.transform=`translateX(${e}px)`,this.dom.dot.style.transform=`translateX(${n}px)`}}repositionXWithoutRanges(t,e){"right"==e?this.options.rtl?(this.right=t-this.width,this.dom.box.style.right=this.right+"px"):(this.left=t-this.width,this.dom.box.style.left=this.left+"px"):"left"==e?this.options.rtl?(this.right=t,this.dom.box.style.right=this.right+"px"):(this.left=t,this.dom.box.style.left=this.left+"px"):this.options.rtl?(this.right=t-this.width/2,this.dom.box.style.right=this.right+"px"):(this.left=t-this.width/2,this.dom.box.style.left=this.left+"px")}repositionXWithRanges(t,e){let n=Math.round(Math.max(e-t+.5,1));this.options.rtl?this.right=t:this.left=t,this.width=Math.max(n,this.minWidth||0),this.options.rtl?this.dom.box.style.right=this.right+"px":this.dom.box.style.left=this.left+"px",this.dom.box.style.width=n+"px"}repositionY(){var t=this.options.orientation.item,e=this.dom.box;if(e.style.top="top"==t?(this.top||0)+"px":(this.parent.height-this.top-this.height||0)+"px",this.options.showStipes){if("top"==t)this.dom.line.style.top="0",this.dom.line.style.height=this.parent.top+this.top+1+"px",this.dom.line.style.bottom="";else{var n=this.parent.itemSet.props.height,i=n-this.parent.top-this.parent.height+this.top;this.dom.line.style.top=n-i+"px",this.dom.line.style.bottom="0"}this.dom.dot.style.top=-this.dom.dot.offsetHeight/2+"px"}}getWidthLeft(){return this.width/2}getWidthRight(){return this.width/2}move(){this.repositionX(),this.repositionY()}attach(){for(let t of this.data.uiItems)t.cluster=this;this.data.items=this.data.uiItems.map((t=>t.data)),this.attached=!0,this.dirty=!0}detach(t=!1){if(this.hasItems()){for(let t of this.data.uiItems)delete t.cluster;this.attached=!1,t&&this.group&&(this.group.remove(this),this.group=null),this.data.items=[],this.dirty=!0}}_onDoubleClick(){this._fit()}_setupRange(){const t=this.data.uiItems.map((t=>({start:t.data.start.valueOf(),end:t.data.end?t.data.end.valueOf():t.data.start.valueOf()})));this.data.min=Math.min(...t.map((t=>Math.min(t.start,t.end||t.start)))),this.data.max=Math.max(...t.map((t=>Math.max(t.start,t.end||t.start))));const e=this.data.uiItems.map((t=>t.center)).reduce(((t,e)=>t+e),0)/this.data.uiItems.length;this.data.uiItems.some((t=>t.data.end))?(this.data.start=new Date(this.data.min),this.data.end=new Date(this.data.max)):(this.data.start=new Date(e),this.data.end=null)}_getUiItems(){return this.data.uiItems&&this.data.uiItems.length?this.data.uiItems.filter((t=>t.cluster===this)):[]}_createDomElement(){this.dom||(this.dom={},this.dom.box=document.createElement("DIV"),this.dom.content=document.createElement("DIV"),this.dom.content.className="vis-item-content",this.dom.box.appendChild(this.dom.content),this.options.showStipes&&(this.dom.line=document.createElement("DIV"),this.dom.line.className="vis-cluster-line",this.dom.line.style.display="none",this.dom.dot=document.createElement("DIV"),this.dom.dot.className="vis-cluster-dot",this.dom.dot.style.display="none"),this.options.fitOnDoubleClick&&(this.dom.box.ondblclick=dr.prototype._onDoubleClick.bind(this)),this.dom.box["vis-item"]=this,this.dirty=!0)}_appendDomElement(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.box.parentNode){const t=this.parent.dom.foreground;if(!t)throw new Error("Cannot redraw item: parent has no foreground container element");t.appendChild(this.dom.box)}const t=this.parent.dom.background;if(this.options.showStipes){if(!this.dom.line.parentNode){if(!t)throw new Error("Cannot redraw item: parent has no background container element");t.appendChild(this.dom.line)}if(!this.dom.dot.parentNode){var e=this.parent.dom.axis;if(!t)throw new Error("Cannot redraw item: parent has no axis container element");e.appendChild(this.dom.dot)}}this.displayed=!0}_updateDirtyDomComponents(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.box),this._updateStyle(this.dom.box);const t=this.baseClassName+" "+(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+" vis-readonly";this.dom.box.className="vis-item "+t,this.options.showStipes&&(this.dom.line.className="vis-item vis-cluster-line "+(this.selected?" vis-selected":""),this.dom.dot.className="vis-item vis-cluster-dot "+(this.selected?" vis-selected":"")),this.data.end&&(this.dom.content.style.maxWidth="none")}}_getDomComponentsSizes(){const t={previous:{right:this.dom.box.style.right,left:this.dom.box.style.left},box:{width:this.dom.box.offsetWidth,height:this.dom.box.offsetHeight}};return this.options.showStipes&&(t.dot={height:this.dom.dot.offsetHeight,width:this.dom.dot.offsetWidth},t.line={width:this.dom.line.offsetWidth}),t}_updateDomComponentsSizes(t){this.options.rtl?this.dom.box.style.right="0px":this.dom.box.style.left="0px",this.data.end?this.minWidth=t.box.width:this.width=t.box.width,this.height=t.box.height,this.options.rtl?this.dom.box.style.right=t.previous.right:this.dom.box.style.left=t.previous.left,this.dirty=!1}_repaintDomAdditionals(){this._repaintOnItemUpdateTimeTooltip(this.dom.box)}_isStipeVisible(){return this.minWidth>=this.width||!this.data.end}_getFitRange(){const t=.05*(this.data.max-this.data.min)/2;return{fitStart:this.data.min-t,fitEnd:this.data.max+t}}_fit(){if(this.emitter){const{fitStart:t,fitEnd:e}=this._getFitRange(),n={start:new Date(t),end:new Date(e),animation:!0};this.emitter.emit("fit",n)}}_getItemData(){return this.data}}dr.prototype.baseClassName="vis-item vis-range vis-cluster";const fr="__ungrouped__";class pr{constructor(t){this.itemSet=t,this.groups={},this.cache={},this.cache[-1]=[]}createClusterItem(t,e,n){return new dr(t,e,n)}setItems(t,e){this.items=t||[],this.dataChanged=!0,this.applyOnChangedLevel=!1,e&&e.applyOnChangedLevel&&(this.applyOnChangedLevel=e.applyOnChangedLevel)}updateData(){this.dataChanged=!0,this.applyOnChangedLevel=!1}getClusters(t,e,n){let{maxItems:i,clusterCriteria:r}="boolean"==typeof n?{}:n;r||(r=()=>!0),i=i||1;let o=-1,a=0;if(e>0){if(e>=1)return[];o=Math.abs(Math.round(Math.log(100/e)/Math.log(2))),a=Math.abs(Math.pow(2,o))}if(this.dataChanged){const t=o!=this.cacheLevel;(!this.applyOnChangedLevel||t)&&(this._dropLevelsCache(),this._filterData())}this.cacheLevel=o;let s=this.cache[o];if(!s){s=[];for(let e in this.groups)if(this.groups.hasOwnProperty(e)){const o=this.groups[e],l=o.length;let u=0;for(;u<l;){let e=o[u],l=1,c=u-1;for(;c>=0&&e.center-o[c].center<a/2;)!o[c].cluster&&r(e.data,o[c].data)&&l++,c--;let h=u+1;for(;h<o.length&&o[h].center-e.center<a/2;)r(e.data,o[h].data)&&l++,h++;let d=s.length-1;for(;d>=0&&e.center-s[d].center<a;)e.group==s[d].group&&r(e.data,s[d].data)&&l++,d--;if(l>i){const a=l-i+1,c=[];let h=u;for(;c.length<a&&h<o.length;)r(o[u].data,o[h].data)&&c.push(o[h]),h++;const d=this.itemSet.getGroupId(e.data),f=this.itemSet.groups[d]||this.itemSet.groups[fr];let p=this._getClusterForItems(c,f,t,n);s.push(p),u+=a}else delete e.cluster,u+=1}}this.cache[o]=s}return s}_filterData(){const t={};this.groups=t;for(const e of Object.values(this.items)){const n=e.parent?e.parent.groupId:"";let i=t[n];i||(i=[],t[n]=i),i.push(e),e.data.start&&(e.data.end?e.center=(e.data.start.valueOf()+e.data.end.valueOf())/2:e.center=e.data.start.valueOf())}for(let e in t)t.hasOwnProperty(e)&&t[e].sort(((t,e)=>t.center-e.center));this.dataChanged=!1}_getClusterForItems(t,e,n,i){const r=(n||[]).map((t=>({cluster:t,itemsIds:new Set(t.data.uiItems.map((t=>t.id)))})));let o;if(r.length)for(let e of r)if(e.itemsIds.size===t.length&&t.every((t=>e.itemsIds.has(t.id)))){o=e.cluster;break}if(o)return o.setUiItems(t),o.group!==e&&(o.group&&o.group.remove(o),e&&(e.add(o),o.group=e)),o;let a=i.titleTemplate||"";const s={toScreen:this.itemSet.body.util.toScreen,toTime:this.itemSet.body.util.toTime},l=a.replace(/{count}/,t.length),u='<div title="'+l+'">'+t.length+"</div>",c=Object.assign({},i,this.itemSet.options),h={content:u,title:l,group:e,uiItems:t,eventEmitter:this.itemSet.body.emitter,range:this.itemSet.body.range};return o=this.createClusterItem(h,s,c),e&&(e.add(o),o.group=e),o.attach(),o}_dropLevelsCache(){this.cache={},this.cacheLevel=-1,this.cache[this.cacheLevel]=[]}}const mr="__ungrouped__",gr="__background__";class vr extends ii{constructor(t,e){super(),this.body=t,this.defaultOptions={type:null,orientation:{item:"bottom"},align:"auto",stack:!0,stackSubgroups:!0,groupOrderSwap(t,e,n){const i=e.order;e.order=t.order,t.order=i},groupOrder:"order",selectable:!0,multiselect:!1,longSelectPressTime:251,itemsAlwaysDraggable:{item:!1,range:!1},editable:{updateTime:!1,updateGroup:!1,add:!1,remove:!1,overrideItems:!1},groupEditable:{order:!1,add:!1,remove:!1},snap:Mi.snap,onDropObjectOnItem(t,e,n){n(e)},onAdd(t,e){e(t)},onUpdate(t,e){e(t)},onMove(t,e){e(t)},onRemove(t,e){e(t)},onMoving(t,e){e(t)},onAddGroup(t,e){e(t)},onMoveGroup(t,e){e(t)},onRemoveGroup(t,e){e(t)},margin:{item:{horizontal:10,vertical:10},axis:20},showTooltips:!0,tooltip:{followMouse:!1,overflowMethod:"flip",delay:500},tooltipOnItemUpdateTime:!1},this.options=ni.extend({},this.defaultOptions),this.options.rtl=e.rtl,this.options.onTimeout=e.onTimeout,this.conversion={toScreen:t.util.toScreen,toTime:t.util.toTime},this.dom={},this.props={},this.hammer=null;const n=this;this.itemsData=null,this.groupsData=null,this.itemsSettingTime=null,this.initialItemSetDrawn=!1,this.userContinueNotBail=null,this.sequentialSelection=!1,this.itemListeners={add(t,e,i){n._onAdd(e.items),n.options.cluster&&n.clusterGenerator.setItems(n.items,{applyOnChangedLevel:!1}),n.redraw()},update(t,e,i){n._onUpdate(e.items),n.options.cluster&&n.clusterGenerator.setItems(n.items,{applyOnChangedLevel:!1}),n.redraw()},remove(t,e,i){n._onRemove(e.items),n.options.cluster&&n.clusterGenerator.setItems(n.items,{applyOnChangedLevel:!1}),n.redraw()}},this.groupListeners={add(t,e,i){if(n._onAddGroups(e.items),n.groupsData&&n.groupsData.length>0){const t=n.groupsData.getDataSet();t.get().forEach((e=>{if(e.nestedGroups){0!=e.showNested&&(e.showNested=!0);let n=[];e.nestedGroups.forEach((i=>{const r=t.get(i);r&&(r.nestedInGroup=e.id,0==e.showNested&&(r.visible=!1),n=n.concat(r))})),t.update(n,i)}}))}},update(t,e,i){n._onUpdateGroups(e.items)},remove(t,e,i){n._onRemoveGroups(e.items)}},this.items={},this.groups={},this.groupIds=[],this.selection=[],this.popup=null,this.popupTimer=null,this.touchParams={},this.groupTouchParams={group:null,isDragging:!1},this._create(),this.setOptions(e),this.clusters=[]}_create(){const t=document.createElement("div");t.className="vis-itemset",t["vis-itemset"]=this,this.dom.frame=t;const e=document.createElement("div");e.className="vis-background",t.appendChild(e),this.dom.background=e;const n=document.createElement("div");n.className="vis-foreground",t.appendChild(n),this.dom.foreground=n;const i=document.createElement("div");i.className="vis-axis",this.dom.axis=i;const r=document.createElement("div");r.className="vis-labelset",this.dom.labelSet=r,this._updateUngrouped();const o=new or(gr,null,this);o.show(),this.groups[gr]=o,this.hammer=new wi(this.body.dom.centerContainer),this.hammer.on("hammer.input",(t=>{t.isFirst&&this._onTouch(t)})),this.hammer.on("panstart",this._onDragStart.bind(this)),this.hammer.on("panmove",this._onDrag.bind(this)),this.hammer.on("panend",this._onDragEnd.bind(this)),this.hammer.get("pan").set({threshold:5,direction:wi.ALL}),this.hammer.get("press").set({time:1e4}),this.hammer.on("tap",this._onSelectItem.bind(this)),this.hammer.on("press",this._onMultiSelectItem.bind(this)),this.hammer.get("press").set({time:1e4}),this.hammer.on("doubletap",this._onAddItem.bind(this)),this.options.rtl?this.groupHammer=new wi(this.body.dom.rightContainer):this.groupHammer=new wi(this.body.dom.leftContainer),this.groupHammer.on("tap",this._onGroupClick.bind(this)),this.groupHammer.on("panstart",this._onGroupDragStart.bind(this)),this.groupHammer.on("panmove",this._onGroupDrag.bind(this)),this.groupHammer.on("panend",this._onGroupDragEnd.bind(this)),this.groupHammer.get("pan").set({threshold:5,direction:wi.DIRECTION_VERTICAL}),this.body.dom.centerContainer.addEventListener("mouseover",this._onMouseOver.bind(this)),this.body.dom.centerContainer.addEventListener("mouseout",this._onMouseOut.bind(this)),this.body.dom.centerContainer.addEventListener("mousemove",this._onMouseMove.bind(this)),this.body.dom.centerContainer.addEventListener("contextmenu",this._onDragEnd.bind(this)),this.body.dom.centerContainer.addEventListener("mousewheel",this._onMouseWheel.bind(this)),this.show()}setOptions(t){if(t){const e=["type","rtl","align","order","stack","stackSubgroups","selectable","multiselect","sequentialSelection","multiselectPerGroup","longSelectPressTime","groupOrder","dataAttributes","template","groupTemplate","visibleFrameTemplate","hide","snap","groupOrderSwap","showTooltips","tooltip","tooltipOnItemUpdateTime","groupHeightMode","onTimeout"];ni.selectiveExtend(e,this.options,t),"itemsAlwaysDraggable"in t&&("boolean"==typeof t.itemsAlwaysDraggable?(this.options.itemsAlwaysDraggable.item=t.itemsAlwaysDraggable,this.options.itemsAlwaysDraggable.range=!1):"object"==typeof t.itemsAlwaysDraggable&&(ni.selectiveExtend(["item","range"],this.options.itemsAlwaysDraggable,t.itemsAlwaysDraggable),this.options.itemsAlwaysDraggable.item||(this.options.itemsAlwaysDraggable.range=!1))),"sequentialSelection"in t&&"boolean"==typeof t.sequentialSelection&&(this.options.sequentialSelection=t.sequentialSelection),"orientation"in t&&("string"==typeof t.orientation?this.options.orientation.item="top"===t.orientation?"top":"bottom":"object"==typeof t.orientation&&"item"in t.orientation&&(this.options.orientation.item=t.orientation.item)),"margin"in t&&("number"==typeof t.margin?(this.options.margin.axis=t.margin,this.options.margin.item.horizontal=t.margin,this.options.margin.item.vertical=t.margin):"object"==typeof t.margin&&(ni.selectiveExtend(["axis"],this.options.margin,t.margin),"item"in t.margin&&("number"==typeof t.margin.item?(this.options.margin.item.horizontal=t.margin.item,this.options.margin.item.vertical=t.margin.item):"object"==typeof t.margin.item&&ni.selectiveExtend(["horizontal","vertical"],this.options.margin.item,t.margin.item)))),["locale","locales"].forEach((e=>{e in t&&(this.options[e]=t[e])})),"editable"in t&&("boolean"==typeof t.editable?(this.options.editable.updateTime=t.editable,this.options.editable.updateGroup=t.editable,this.options.editable.add=t.editable,this.options.editable.remove=t.editable,this.options.editable.overrideItems=!1):"object"==typeof t.editable&&ni.selectiveExtend(["updateTime","updateGroup","add","remove","overrideItems"],this.options.editable,t.editable)),"groupEditable"in t&&("boolean"==typeof t.groupEditable?(this.options.groupEditable.order=t.groupEditable,this.options.groupEditable.add=t.groupEditable,this.options.groupEditable.remove=t.groupEditable):"object"==typeof t.groupEditable&&ni.selectiveExtend(["order","add","remove"],this.options.groupEditable,t.groupEditable));["onDropObjectOnItem","onAdd","onUpdate","onRemove","onMove","onMoving","onAddGroup","onMoveGroup","onRemoveGroup"].forEach((e=>{const n=t[e];if(n){if("function"!=typeof n)throw new Error(`option ${e} must be a function ${e}(item, callback)`);this.options[e]=n}})),t.cluster?(Object.assign(this.options,{cluster:t.cluster}),this.clusterGenerator||(this.clusterGenerator=new pr(this)),this.clusterGenerator.setItems(this.items,{applyOnChangedLevel:!1}),this.markDirty({refreshItems:!0,restackGroups:!0}),this.redraw()):this.clusterGenerator?(this._detachAllClusters(),this.clusters=[],this.clusterGenerator=null,this.options.cluster=void 0,this.markDirty({refreshItems:!0,restackGroups:!0}),this.redraw()):this.markDirty()}}markDirty(t){this.groupIds=[],t&&(t.refreshItems&&ni.forEach(this.items,(t=>{t.dirty=!0,t.displayed&&t.redraw()})),t.restackGroups&&ni.forEach(this.groups,((t,e)=>{e!==gr&&(t.stackDirty=!0)})))}destroy(){this.clearPopupTimer(),this.hide(),this.setItems(null),this.setGroups(null),this.hammer&&this.hammer.destroy(),this.groupHammer&&this.groupHammer.destroy(),this.hammer=null,this.body=null,this.conversion=null}hide(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame),this.dom.axis.parentNode&&this.dom.axis.parentNode.removeChild(this.dom.axis),this.dom.labelSet.parentNode&&this.dom.labelSet.parentNode.removeChild(this.dom.labelSet)}show(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame),this.dom.axis.parentNode||this.body.dom.backgroundVertical.appendChild(this.dom.axis),this.dom.labelSet.parentNode||(this.options.rtl?this.body.dom.right.appendChild(this.dom.labelSet):this.body.dom.left.appendChild(this.dom.labelSet))}setPopupTimer(t){if(this.clearPopupTimer(),t){const e=this.options.tooltip.delay||"number"==typeof this.options.tooltip.delay?this.options.tooltip.delay:500;this.popupTimer=setTimeout((function(){t.show()}),e)}}clearPopupTimer(){null!=this.popupTimer&&(clearTimeout(this.popupTimer),this.popupTimer=null)}setSelection(t){null==t&&(t=[]),Array.isArray(t)||(t=[t]);const e=this.selection.filter((e=>-1===t.indexOf(e)));for(let t of e){const e=this.getItemById(t);e&&e.unselect()}this.selection=[...t];for(let e of t){const t=this.getItemById(e);t&&t.select()}}getSelection(){return this.selection.concat([])}getVisibleItems(){const t=this.body.range.getRange();let e,n;this.options.rtl?(e=this.body.util.toScreen(t.start),n=this.body.util.toScreen(t.end)):(n=this.body.util.toScreen(t.start),e=this.body.util.toScreen(t.end));const i=[];for(const t in this.groups)if(this.groups.hasOwnProperty(t)){const r=this.groups[t],o=r.isVisible?r.visibleItems:[];for(const t of o)this.options.rtl?t.right<n&&t.right+t.width>e&&i.push(t.id):t.left<e&&t.left+t.width>n&&i.push(t.id)}return i}getItemsAtCurrentTime(t){let e,n;this.options.rtl?(e=this.body.util.toScreen(t),n=this.body.util.toScreen(t)):(n=this.body.util.toScreen(t),e=this.body.util.toScreen(t));const i=[];for(const t in this.groups)if(this.groups.hasOwnProperty(t)){const r=this.groups[t],o=r.isVisible?r.visibleItems:[];for(const t of o)this.options.rtl?t.right<n&&t.right+t.width>e&&i.push(t.id):t.left<e&&t.left+t.width>n&&i.push(t.id)}return i}getVisibleGroups(){const t=[];for(const e in this.groups)if(this.groups.hasOwnProperty(e)){this.groups[e].isVisible&&t.push(e)}return t}getItemById(t){return this.items[t]||this.clusters.find((e=>e.id===t))}_deselect(t){const e=this.selection;for(let n=0,i=e.length;n<i;n++)if(e[n]==t){e.splice(n,1);break}}redraw(){const t=this.options.margin,e=this.body.range,n=ni.option.asSize,i=this.options,r=i.orientation.item;let o=!1;const a=this.dom.frame;this.props.top=this.body.domProps.top.height+this.body.domProps.border.top,this.options.rtl?this.props.right=this.body.domProps.right.width+this.body.domProps.border.right:this.props.left=this.body.domProps.left.width+this.body.domProps.border.left,a.className="vis-itemset",this.options.cluster&&this._clusterItems(),o=this._orderGroups()||o;const s=e.end-e.start,l=s!=this.lastVisibleInterval||this.props.width!=this.props.lastWidth,u=e.start!=this.lastRangeStart,c=i.stack!=this.lastStack,h=i.stackSubgroups!=this.lastStackSubgroups,d=l||u||c||h;this.lastVisibleInterval=s,this.lastRangeStart=e.start,this.lastStack=i.stack,this.lastStackSubgroups=i.stackSubgroups,this.props.lastWidth=this.props.width;const f=this._firstGroup(),p={item:t.item,axis:t.axis},m={item:t.item,axis:t.item.vertical/2};let g=0;const v=t.axis+t.item.vertical;this.groups[gr].redraw(e,m,d);const y={};let b=0;ni.forEach(this.groups,((t,n)=>{if(n===gr)return;const i=t==f?p:m;y[n]=t.redraw(e,i,d,!0),b=y[n].length}));if(b>0){const t={};for(let e=0;e<b;e++)ni.forEach(y,((n,i)=>{t[i]=n[e]()}));ni.forEach(this.groups,((e,n)=>{if(n===gr)return;const i=t[n];o=i||o,g+=e.height})),g=Math.max(g,v)}return g=Math.max(g,v),a.style.height=n(g),this.props.width=a.offsetWidth,this.props.height=g,this.dom.axis.style.top=n("top"==r?this.body.domProps.top.height+this.body.domProps.border.top:this.body.domProps.top.height+this.body.domProps.centerContainer.height),this.options.rtl?this.dom.axis.style.right="0":this.dom.axis.style.left="0",this.hammer.get("press").set({time:this.options.longSelectPressTime}),this.initialItemSetDrawn=!0,o=this._isResized()||o,o}_firstGroup(){const t="top"==this.options.orientation.item?0:this.groupIds.length-1,e=this.groupIds[t];return this.groups[e]||this.groups[mr]||null}_updateUngrouped(){let t,e,n=this.groups[mr];if(this.groupsData){if(n)for(e in n.dispose(),delete this.groups[mr],this.items)if(this.items.hasOwnProperty(e)){t=this.items[e],t.parent&&t.parent.remove(t);const n=this.getGroupId(t.data),i=this.groups[n];i&&i.add(t)||t.hide()}}else if(!n){const i=null,r=null;for(e in n=new rr(i,r,this),this.groups[mr]=n,this.items)this.items.hasOwnProperty(e)&&(t=this.items[e],n.add(t));n.show()}}getLabelSet(){return this.dom.labelSet}setItems(t){this.itemsSettingTime=new Date;const e=this;let n;const i=this.itemsData;if(t){if(!Wn("id",t))throw new TypeError("Data must implement the interface of DataSet or DataView");this.itemsData=Jn(t)}else this.itemsData=null;if(i&&(ni.forEach(this.itemListeners,((t,e)=>{i.off(e,t)})),i.dispose(),n=i.getIds(),this._onRemove(n)),this.itemsData){const t=this.id;ni.forEach(this.itemListeners,((n,i)=>{e.itemsData.on(i,n,t)})),n=this.itemsData.getIds(),this._onAdd(n),this._updateUngrouped()}this.body.emitter.emit("_change",{queue:!0})}getItems(){return null!=this.itemsData?this.itemsData.rawDS:null}setGroups(t){const e=this;let n;if(this.groupsData&&(ni.forEach(this.groupListeners,((t,n)=>{e.groupsData.off(n,t)})),n=this.groupsData.getIds(),this.groupsData=null,this._onRemoveGroups(n)),t){if(!Wn("id",t))throw new TypeError("Data must implement the interface of DataSet or DataView");this.groupsData=t}else this.groupsData=null;if(this.groupsData){const t=this.groupsData.getDataSet();t.get().forEach((e=>{e.nestedGroups&&e.nestedGroups.forEach((n=>{const i=t.get(n);i.nestedInGroup=e.id,0==e.showNested&&(i.visible=!1),t.update(i)}))}));const i=this.id;ni.forEach(this.groupListeners,((t,n)=>{e.groupsData.on(n,t,i)})),n=this.groupsData.getIds(),this._onAddGroups(n)}this._updateUngrouped(),this._order(),this.options.cluster&&(this.clusterGenerator.updateData(),this._clusterItems(),this.markDirty({refreshItems:!0,restackGroups:!0})),this.body.emitter.emit("_change",{queue:!0})}getGroups(){return this.groupsData}removeItem(t){const e=this.itemsData.get(t);e&&this.options.onRemove(e,(e=>{e&&this.itemsData.remove(t)}))}_getType(t){return t.type||this.options.type||(t.end?"range":"box")}getGroupId(t){return"background"==this._getType(t)&&null==t.group?gr:this.groupsData?t.group:mr}_onUpdate(t){const e=this;t.forEach((t=>{const n=e.itemsData.get(t);let i=e.items[t];const r=n?e._getType(n):null,o=vr.types[r];let a;if(i&&(o&&i instanceof o?e._updateItem(i,n):(a=i.selected,e._removeItem(i),i=null)),!i&&n){if(!o)throw new TypeError(`Unknown item type "${r}"`);i=new o(n,e.conversion,e.options),i.id=t,e._addItem(i),a&&(this.selection.push(t),i.select())}})),this._order(),this.options.cluster&&(this.clusterGenerator.setItems(this.items,{applyOnChangedLevel:!1}),this._clusterItems()),this.body.emitter.emit("_change",{queue:!0})}_onRemove(t){let e=0;const n=this;t.forEach((t=>{const i=n.items[t];i&&(e++,n._removeItem(i))})),e&&(this._order(),this.body.emitter.emit("_change",{queue:!0}))}_order(){ni.forEach(this.groups,(t=>{t.order()}))}_onUpdateGroups(t){this._onAddGroups(t)}_onAddGroups(t){const e=this;t.forEach((t=>{const n=e.groupsData.get(t);let i=e.groups[t];if(i)i.setData(n);else{if(t==mr||t==gr)throw new Error(`Illegal group id. ${t} is a reserved id.`);const r=Object.create(e.options);ni.extend(r,{height:null}),i=new rr(t,n,e),e.groups[t]=i;for(const n in e.items)if(e.items.hasOwnProperty(n)){const r=e.items[n];r.data.group==t&&i.add(r)}i.order(),i.show()}})),this.body.emitter.emit("_change",{queue:!0})}_onRemoveGroups(t){t.forEach((t=>{const e=this.groups[t];e&&(e.dispose(),delete this.groups[t])})),this.options.cluster&&(this.clusterGenerator.updateData(),this._clusterItems()),this.markDirty({restackGroups:!!this.options.cluster}),this.body.emitter.emit("_change",{queue:!0})}_orderGroups(){if(this.groupsData){let t=this.groupsData.getIds({order:this.options.groupOrder});t=this._orderNestedGroups(t);const e=!ni.equalArray(t,this.groupIds);if(e){const e=this.groups;t.forEach((t=>{e[t].hide()})),t.forEach((t=>{e[t].show()})),this.groupIds=t}return e}return!1}_orderNestedGroups(t){return function t(e,n){let i=[];return n.forEach((n=>{i.push(n);if(e.groupsData.get(n).nestedGroups){const r=e.groupsData.get({filter:t=>t.nestedInGroup==n,order:e.options.groupOrder}).map((t=>t.id));i=i.concat(t(e,r))}})),i}(this,t.filter((t=>!this.groupsData.get(t).nestedInGroup)))}_addItem(t){this.items[t.id]=t;const e=this.getGroupId(t.data),n=this.groups[e];n?n&&n.data&&n.data.showNested&&(t.groupShowing=!0):t.groupShowing=!1,n&&n.add(t)}_updateItem(t,e){t.setData(e);const n=this.getGroupId(t.data),i=this.groups[n];i?i&&i.data&&i.data.showNested&&(t.groupShowing=!0):t.groupShowing=!1}_removeItem(t){t.hide(),delete this.items[t.id];const e=this.selection.indexOf(t.id);-1!=e&&this.selection.splice(e,1),t.parent&&t.parent.remove(t),null!=this.popup&&this.popup.hide()}_constructByEndArray(t){const e=[];for(let n=0;n<t.length;n++)t[n]instanceof ur&&e.push(t[n]);return e}_onTouch(t){this.touchParams.item=this.itemFromTarget(t),this.touchParams.dragLeftItem=t.target.dragLeftItem||!1,this.touchParams.dragRightItem=t.target.dragRightItem||!1,this.touchParams.itemProps=null}_getGroupIndex(t){for(let e=0;e<this.groupIds.length;e++)if(t==this.groupIds[e])return e}_onDragStart(t){if(this.touchParams.itemIsDragging)return;const e=this.touchParams.item||null,n=this;let i;if(e&&(e.selected||this.options.itemsAlwaysDraggable.item)){if(this.options.editable.overrideItems&&!this.options.editable.updateTime&&!this.options.editable.updateGroup)return;if(null!=e.editable&&!e.editable.updateTime&&!e.editable.updateGroup&&!this.options.editable.overrideItems)return;const r=this.touchParams.dragLeftItem,o=this.touchParams.dragRightItem;if(this.touchParams.itemIsDragging=!0,this.touchParams.selectedItem=e,r)i={item:r,initialX:t.center.x,dragLeft:!0,data:this._cloneItemData(e.data)},this.touchParams.itemProps=[i];else if(o)i={item:o,initialX:t.center.x,dragRight:!0,data:this._cloneItemData(e.data)},this.touchParams.itemProps=[i];else if(this.options.editable.add&&(t.srcEvent.ctrlKey||t.srcEvent.metaKey))this._onDragStartAddItem(t);else{this.groupIds.length<1&&this.redraw();const i=this._getGroupIndex(e.data.group),r=this.options.itemsAlwaysDraggable.item&&!e.selected?[e.id]:this.getSelection();this.touchParams.itemProps=r.map((e=>{const r=n.items[e],o=n._getGroupIndex(r.data.group);return{item:r,initialX:t.center.x,groupOffset:i-o,data:this._cloneItemData(r.data)}}))}t.stopPropagation()}else this.options.editable.add&&(t.srcEvent.ctrlKey||t.srcEvent.metaKey)&&this._onDragStartAddItem(t)}_onDragStartAddItem(t){const e=this.options.snap||null,n=this.dom.frame.getBoundingClientRect(),i=this.options.rtl?n.right-t.center.x+10:t.center.x-n.left-10,r=this.body.util.toTime(i),o=this.body.util.getScale(),a=this.body.util.getStep(),s=e?e(r,o,a):r,l={type:"range",start:s,end:s,content:"new item"},u=Nn();l[this.itemsData.idProp]=u;const c=this.groupFromTarget(t);c&&(l.group=c.groupId);const h=new ur(l,this.conversion,this.options);h.id=u,h.data=this._cloneItemData(l),this._addItem(h),this.touchParams.selectedItem=h;const d={item:h,initialX:t.center.x,data:h.data};this.options.rtl?d.dragLeft=!0:d.dragRight=!0,this.touchParams.itemProps=[d],t.stopPropagation()}_onDrag(t){if(null!=this.popup&&this.options.showTooltips&&!this.popup.hidden){const e=this.body.dom.centerContainer,n=e.getBoundingClientRect();this.popup.setPosition(t.center.x-n.left+e.offsetLeft,t.center.y-n.top+e.offsetTop),this.popup.show()}if(this.touchParams.itemProps){t.stopPropagation();const e=this,n=this.options.snap||null,i=this.body.dom.root.offsetLeft,r=this.options.rtl?i+this.body.domProps.right.width:i+this.body.domProps.left.width,o=this.body.util.getScale(),a=this.body.util.getStep(),s=this.touchParams.selectedItem,l=(this.options.editable.overrideItems||null==s.editable)&&this.options.editable.updateGroup||!this.options.editable.overrideItems&&null!=s.editable&&s.editable.updateGroup;let u=null;if(l&&s&&null!=s.data.group){const n=e.groupFromTarget(t);n&&(u=this._getGroupIndex(n.groupId))}this.touchParams.itemProps.forEach((i=>{const c=e.body.util.toTime(t.center.x-r),h=e.body.util.toTime(i.initialX-r);let d,f,p,m,g;d=this.options.rtl?-(c-h):c-h;let v=this._cloneItemData(i.item.data);if(null!=i.item.editable&&!i.item.editable.updateTime&&!i.item.editable.updateGroup&&!e.options.editable.overrideItems)return;if((this.options.editable.overrideItems||null==s.editable)&&this.options.editable.updateTime||!this.options.editable.overrideItems&&null!=s.editable&&s.editable.updateTime)if(i.dragLeft)this.options.rtl?null!=v.end&&(p=ni.convert(i.data.end,"Date"),g=new Date(p.valueOf()+d),v.end=n?n(g,o,a):g):null!=v.start&&(f=ni.convert(i.data.start,"Date"),m=new Date(f.valueOf()+d),v.start=n?n(m,o,a):m);else if(i.dragRight)this.options.rtl?null!=v.start&&(f=ni.convert(i.data.start,"Date"),m=new Date(f.valueOf()+d),v.start=n?n(m,o,a):m):null!=v.end&&(p=ni.convert(i.data.end,"Date"),g=new Date(p.valueOf()+d),v.end=n?n(g,o,a):g);else if(null!=v.start)if(f=ni.convert(i.data.start,"Date").valueOf(),m=new Date(f+d),null!=v.end){p=ni.convert(i.data.end,"Date");const t=p.valueOf()-f.valueOf();v.start=n?n(m,o,a):m,v.end=new Date(v.start.valueOf()+t)}else v.start=n?n(m,o,a):m;if(l&&!i.dragLeft&&!i.dragRight&&null!=u&&null!=v.group){let t=u-i.groupOffset;t=Math.max(0,t),t=Math.min(e.groupIds.length-1,t),v.group=e.groupIds[t]}v=this._cloneItemData(v),e.options.onMoving(v,(t=>{t&&i.item.setData(this._cloneItemData(t,"Date"))}))})),this.body.emitter.emit("_change")}}_moveToGroup(t,e){const n=this.groups[e];if(n&&n.groupId!=t.data.group){const e=t.parent;e.remove(t),e.order(),t.data.group=n.groupId,n.add(t),n.order()}}_onDragEnd(t){if(this.touchParams.itemIsDragging=!1,this.touchParams.itemProps){t.stopPropagation();const e=this,n=this.touchParams.itemProps;this.touchParams.itemProps=null,n.forEach((t=>{const n=t.item.id;if(null!=e.itemsData.get(n)){const i=this._cloneItemData(t.item.data);e.options.onMove(i,(i=>{i?(i[this.itemsData.idProp]=n,this.itemsData.update(i)):(t.item.setData(t.data),e.body.emitter.emit("_change"))}))}else e.options.onAdd(t.item.data,(n=>{e._removeItem(t.item),n&&e.itemsData.add(n),e.body.emitter.emit("_change")}))}))}}_onGroupClick(t){const e=this.groupFromTarget(t);setTimeout((()=>{this.toggleGroupShowNested(e)}),1)}toggleGroupShowNested(t,e){if(!t||!t.nestedGroups)return;const n=this.groupsData.getDataSet();t.showNested=null!=e?!!e:!t.showNested;let i=n.get(t.groupId);i.showNested=t.showNested;let r=t.nestedGroups,o=r;for(;o.length>0;){let t=o;o=[];for(let e=0;e<t.length;e++){let i=n.get(t[e]);i.nestedGroups&&(o=o.concat(i.nestedGroups))}o.length>0&&(r=r.concat(o))}let a=n.get(r).map((function(t){return null==t.visible&&(t.visible=!0),t.visible=!!i.showNested,t}));n.update(a.concat(i)),i.showNested?(ni.removeClassName(t.dom.label,"collapsed"),ni.addClassName(t.dom.label,"expanded")):(ni.removeClassName(t.dom.label,"expanded"),ni.addClassName(t.dom.label,"collapsed"))}toggleGroupDragClassName(t){t.dom.label.classList.toggle("vis-group-is-dragging"),t.dom.foreground.classList.toggle("vis-group-is-dragging")}_onGroupDragStart(t){this.groupTouchParams.isDragging||this.options.groupEditable.order&&(this.groupTouchParams.group=this.groupFromTarget(t),this.groupTouchParams.group&&(t.stopPropagation(),this.groupTouchParams.isDragging=!0,this.toggleGroupDragClassName(this.groupTouchParams.group),this.groupTouchParams.originalOrder=this.groupsData.getIds({order:this.options.groupOrder})))}_onGroupDrag(t){if(this.options.groupEditable.order&&this.groupTouchParams.group){t.stopPropagation();const e=this.groupsData.getDataSet(),n=this.groupFromTarget(t);if(n&&n.height!=this.groupTouchParams.group.height){const e=n.top<this.groupTouchParams.group.top,i=t.center?t.center.y:t.clientY,r=n.dom.foreground.getBoundingClientRect(),o=this.groupTouchParams.group.height;if(e){if(r.top+o<i)return}else{const t=n.height;if(r.top+t-o>i)return}}if(n&&n!=this.groupTouchParams.group){const t=e.get(n.groupId),i=e.get(this.groupTouchParams.group.groupId);i&&t&&(this.options.groupOrderSwap(i,t,e),e.update(i),e.update(t));const r=e.getIds({order:this.options.groupOrder});if(!ni.equalArray(r,this.groupTouchParams.originalOrder)){const t=this.groupTouchParams.originalOrder,n=this.groupTouchParams.group.groupId,i=Math.min(t.length,r.length);let o=0,a=0,s=0;for(;o<i;){for(;o+a<i&&o+s<i&&r[o+a]==t[o+s];)o++;if(o+a>=i)break;if(r[o+a]==n)a=1;else if(t[o+s]==n)s=1;else{const n=r.indexOf(t[o+s]),i=e.get(r[o+a]),l=e.get(t[o+s]);this.options.groupOrderSwap(i,l,e),e.update(i),e.update(l);const u=r[o+a];r[o+a]=t[o+s],r[n]=u,o++}}}}}}_onGroupDragEnd(t){if(this.groupTouchParams.isDragging=!1,this.options.groupEditable.order&&this.groupTouchParams.group){t.stopPropagation();const e=this,n=e.groupTouchParams.group.groupId,i=e.groupsData.getDataSet(),r=ni.extend({},i.get(n));e.options.onMoveGroup(r,(t=>{if(t)t[i._idProp]=n,i.update(t);else{const t=i.getIds({order:e.options.groupOrder});if(!ni.equalArray(t,e.groupTouchParams.originalOrder)){const n=e.groupTouchParams.originalOrder,r=Math.min(n.length,t.length);let o=0;for(;o<r;){for(;o<r&&t[o]==n[o];)o++;if(o>=r)break;const a=t.indexOf(n[o]),s=i.get(t[o]),l=i.get(n[o]);e.options.groupOrderSwap(s,l,i),i.update(s),i.update(l);const u=t[o];t[o]=n[o],t[a]=u,o++}}}})),e.body.emitter.emit("groupDragged",{groupId:n}),this.toggleGroupDragClassName(this.groupTouchParams.group),this.groupTouchParams.group=null}}_onSelectItem(t){if(!this.options.selectable)return;const e=t.srcEvent&&(t.srcEvent.ctrlKey||t.srcEvent.metaKey),n=t.srcEvent&&t.srcEvent.shiftKey;if(e||n)return void this._onMultiSelectItem(t);const i=this.getSelection(),r=this.itemFromTarget(t),o=r&&r.selectable?[r.id]:[];this.setSelection(o);const a=this.getSelection();(a.length>0||i.length>0)&&this.body.emitter.emit("select",{items:a,event:t})}_onMouseOver(t){const e=this.itemFromTarget(t);if(!e)return;if(e===this.itemFromRelatedTarget(t))return;const n=e.getTitle();if(this.options.showTooltips&&n){null==this.popup&&(this.popup=new hr(this.body.dom.root,this.options.tooltip.overflowMethod||"flip")),this.popup.setText(n);const e=this.body.dom.centerContainer,i=e.getBoundingClientRect();this.popup.setPosition(t.clientX-i.left+e.offsetLeft,t.clientY-i.top+e.offsetTop),this.setPopupTimer(this.popup)}else this.clearPopupTimer(),null!=this.popup&&this.popup.hide();this.body.emitter.emit("itemover",{item:e.id,event:t})}_onMouseOut(t){const e=this.itemFromTarget(t);if(!e)return;e!==this.itemFromRelatedTarget(t)&&(this.clearPopupTimer(),null!=this.popup&&this.popup.hide(),this.body.emitter.emit("itemout",{item:e.id,event:t}))}_onMouseMove(t){if(this.itemFromTarget(t)&&(null!=this.popupTimer&&this.setPopupTimer(this.popup),this.options.showTooltips&&this.options.tooltip.followMouse&&this.popup&&!this.popup.hidden)){const e=this.body.dom.centerContainer,n=e.getBoundingClientRect();this.popup.setPosition(t.clientX-n.left+e.offsetLeft,t.clientY-n.top+e.offsetTop),this.popup.show()}}_onMouseWheel(t){this.touchParams.itemIsDragging&&this._onDragEnd(t)}_onUpdateItem(t){if(!this.options.selectable)return;if(!this.options.editable.updateTime&&!this.options.editable.updateGroup)return;const e=this;if(t){const n=e.itemsData.get(t.id);this.options.onUpdate(n,(t=>{t&&e.itemsData.update(t)}))}}_onDropObjectOnItem(t){const e=this.itemFromTarget(t),n=JSON.parse(t.dataTransfer.getData("text"));this.options.onDropObjectOnItem(n,e)}_onAddItem(t){if(!this.options.selectable)return;if(!this.options.editable.add)return;const e=this,n=this.options.snap||null,i=this.dom.frame.getBoundingClientRect(),r=this.options.rtl?i.right-t.center.x:t.center.x-i.left,o=this.body.util.toTime(r),a=this.body.util.getScale(),s=this.body.util.getStep();let l,u;"drop"==t.type?(u=JSON.parse(t.dataTransfer.getData("text")),u.content=u.content?u.content:"new item",u.start=u.start?u.start:n?n(o,a,s):o,u.type=u.type||"box",u[this.itemsData.idProp]=u.id||Nn(),"range"!=u.type||u.end||(l=this.body.util.toTime(r+this.props.width/5),u.end=n?n(l,a,s):l)):(u={start:n?n(o,a,s):o,content:"new item"},u[this.itemsData.idProp]=Nn(),"range"===this.options.type&&(l=this.body.util.toTime(r+this.props.width/5),u.end=n?n(l,a,s):l));const c=this.groupFromTarget(t);c&&(u.group=c.groupId),u=this._cloneItemData(u),this.options.onAdd(u,(n=>{n&&(e.itemsData.add(n),"drop"==t.type&&e.setSelection([n.id]))}))}_onMultiSelectItem(t){if(!this.options.selectable)return;const e=this.itemFromTarget(t);if(e){let n=this.options.multiselect?this.getSelection():[];if((t.srcEvent&&t.srcEvent.shiftKey||!1||this.options.sequentialSelection)&&this.options.multiselect){const t=this.itemsData.get(e.id).group;let i;this.options.multiselectPerGroup&&n.length>0&&(i=this.itemsData.get(n[0]).group),this.options.multiselectPerGroup&&null!=i&&i!=t||n.push(e.id);const r=vr._getItemRange(this.itemsData.get(n));if(!this.options.multiselectPerGroup||i==t){n=[];for(const t in this.items)if(this.items.hasOwnProperty(t)){const e=this.items[t],o=e.data.start,a=void 0!==e.data.end?e.data.end:o;!(o>=r.min&&a<=r.max)||this.options.multiselectPerGroup&&i!=this.itemsData.get(e.id).group||e instanceof cr||n.push(e.id)}}}else{const t=n.indexOf(e.id);-1==t?n.push(e.id):n.splice(t,1)}const i=n.filter((t=>this.getItemById(t).selectable));this.setSelection(i),this.body.emitter.emit("select",{items:this.getSelection(),event:t})}}static _getItemRange(t){let e=null,n=null;return t.forEach((t=>{(null==n||t.start<n)&&(n=t.start),null!=t.end?(null==e||t.end>e)&&(e=t.end):(null==e||t.start>e)&&(e=t.start)})),{min:n,max:e}}itemFromElement(t){let e=t;for(;e;){if(e.hasOwnProperty("vis-item"))return e["vis-item"];e=e.parentNode}return null}itemFromTarget(t){return this.itemFromElement(t.target)}itemFromRelatedTarget(t){return this.itemFromElement(t.relatedTarget)}groupFromTarget(t){const e=t.center?t.center.y:t.clientY;let n=this.groupIds;n.length<=0&&this.groupsData&&(n=this.groupsData.getIds({order:this.options.groupOrder}));for(let t=0;t<n.length;t++){const i=n[t],r=this.groups[i],o=r.dom.foreground,a=o.getBoundingClientRect();if(e>=a.top&&e<a.top+o.offsetHeight)return r;if("top"===this.options.orientation.item){if(t===this.groupIds.length-1&&e>a.top)return r}else if(0===t&&e<a.top+o.offset)return r}return null}static itemSetFromTarget(t){let e=t.target;for(;e;){if(e.hasOwnProperty("vis-itemset"))return e["vis-itemset"];e=e.parentNode}return null}_cloneItemData(t,e){const n=ni.extend({},t);return e||(e=this.itemsData.type),null!=n.start&&(n.start=ni.convert(n.start,e&&e.start||"Date")),null!=n.end&&(n.end=ni.convert(n.end,e&&e.end||"Date")),n}_clusterItems(){if(!this.options.cluster)return;const{scale:t}=this.body.range.conversion(this.body.domProps.center.width),e=this.clusterGenerator.getClusters(this.clusters,t,this.options.cluster);if(this.clusters!=e){if(this._detachAllClusters(),e){for(let t of e)t.attach();this.clusters=e}this._updateClusters(e)}}_detachAllClusters(){if(this.options.cluster&&this.clusters&&this.clusters.length)for(let t of this.clusters)t.detach()}_updateClusters(t){if(this.clusters&&this.clusters.length){const e=new Set(t.map((t=>t.id))),n=this.clusters.filter((t=>!e.has(t.id)));let i=!1;for(let t of n){const e=this.selection.indexOf(t.id);-1!==e&&(t.unselect(),this.selection.splice(e,1),i=!0)}if(i){const t=this.getSelection();this.body.emitter.emit("select",{items:t,event})}}this.clusters=t||[]}}vr.types={background:cr,box:sr,range:ur,point:lr},vr.prototype._onAdd=vr.prototype._onUpdate;let yr,br=!1,_r="background: #FFeeee; color: #dd0000";class wr{constructor(){}static validate(t,e,n){br=!1,yr=e;let i=e;return void 0!==n&&(i=e[n]),wr.parse(t,i,[]),br}static parse(t,e,n){for(let i in t)t.hasOwnProperty(i)&&wr.check(i,t,e,n)}static check(t,e,n,i){if(void 0===n[t]&&void 0===n.__any__)return void wr.getSuggestion(t,n,i);let r=t,o=!0;void 0===n[t]&&void 0!==n.__any__&&(r="__any__",o="object"===wr.getType(e[t]));let a=n[r];o&&void 0!==a.__type__&&(a=a.__type__),wr.checkFields(t,e,n,r,a,i)}static checkFields(t,e,n,i,r,o){let a=function(e){console.log("%c"+e+wr.printLocation(o,t),_r)},s=wr.getType(e[t]),l=r[s];void 0!==l?"array"===wr.getType(l)&&-1===l.indexOf(e[t])?(a('Invalid option detected in "'+t+'". Allowed values are:'+wr.print(l)+' not "'+e[t]+'". '),br=!0):"object"===s&&"__any__"!==i&&(o=ni.copyAndExtendArray(o,t),wr.parse(e[t],n[i],o)):void 0===r.any&&(a('Invalid type received for "'+t+'". Expected: '+wr.print(Object.keys(r))+". Received ["+s+'] "'+e[t]+'"'),br=!0)}static getType(t){var e=typeof t;return"object"===e?null===t?"null":t instanceof Boolean?"boolean":t instanceof Number?"number":t instanceof String?"string":Array.isArray(t)?"array":t instanceof Date?"date":void 0!==t.nodeType?"dom":!0===t._isAMomentObject?"moment":"object":"number"===e?"number":"boolean"===e?"boolean":"string"===e?"string":void 0===e?"undefined":e}static getSuggestion(t,e,n){let i,r=wr.findInOptions(t,e,n,!1),o=wr.findInOptions(t,yr,[],!0);i=void 0!==r.indexMatch?" in "+wr.printLocation(r.path,t,"")+'Perhaps it was incomplete? Did you mean: "'+r.indexMatch+'"?\n\n':o.distance<=4&&r.distance>o.distance?" in "+wr.printLocation(r.path,t,"")+"Perhaps it was misplaced? Matching option found at: "+wr.printLocation(o.path,o.closestMatch,""):r.distance<=8?'. Did you mean "'+r.closestMatch+'"?'+wr.printLocation(r.path,t):". Did you mean one of these: "+wr.print(Object.keys(e))+wr.printLocation(n,t),console.log('%cUnknown option detected: "'+t+'"'+i,_r),br=!0}static findInOptions(t,e,n,i=!1){let r,o=1e9,a="",s=[],l=t.toLowerCase();for(let u in e){let c;if(void 0!==e[u].__type__&&!0===i){let i=wr.findInOptions(t,e[u],ni.copyAndExtendArray(n,u));o>i.distance&&(a=i.closestMatch,s=i.path,o=i.distance,r=i.indexMatch)}else-1!==u.toLowerCase().indexOf(l)&&(r=u),c=wr.levenshteinDistance(t,u),o>c&&(a=u,s=ni.copyArray(n),o=c)}return{closestMatch:a,path:s,distance:o,indexMatch:r}}static printLocation(t,e,n="Problem value found at: \n"){let i="\n\n"+n+"options = {\n";for(let e=0;e<t.length;e++){for(let t=0;t<e+1;t++)i+="  ";i+=t[e]+": {\n"}for(let e=0;e<t.length+1;e++)i+="  ";i+=e+"\n";for(let e=0;e<t.length+1;e++){for(let n=0;n<t.length-e;n++)i+="  ";i+="}\n"}return i+"\n\n"}static print(t){return JSON.stringify(t).replace(/(\")|(\[)|(\])|(,"__type__")/g,"").replace(/(\,)/g,", ")}static levenshteinDistance(t,e){if(0===t.length)return e.length;if(0===e.length)return t.length;var n,i,r=[];for(n=0;n<=e.length;n++)r[n]=[n];for(i=0;i<=t.length;i++)r[0][i]=i;for(n=1;n<=e.length;n++)for(i=1;i<=t.length;i++)e.charAt(n-1)==t.charAt(i-1)?r[n][i]=r[n-1][i-1]:r[n][i]=Math.min(r[n-1][i-1]+1,Math.min(r[n][i-1]+1,r[n-1][i]+1));return r[e.length][t.length]}}let xr="string",Mr="boolean",Er="number",Sr="array",kr="date",Cr="object",Tr="moment",Dr={configure:{enabled:{boolean:Mr},filter:{boolean:Mr,function:"function"},container:{dom:"dom"},__type__:{object:Cr,boolean:Mr,function:"function"}},align:{string:xr},alignCurrentTime:{string:xr,undefined:"undefined"},rtl:{boolean:Mr,undefined:"undefined"},rollingMode:{follow:{boolean:Mr},offset:{number:Er,undefined:"undefined"},__type__:{object:Cr}},onTimeout:{timeoutMs:{number:Er},callback:{function:"function"},__type__:{object:Cr}},verticalScroll:{boolean:Mr,undefined:"undefined"},horizontalScroll:{boolean:Mr,undefined:"undefined"},autoResize:{boolean:Mr},throttleRedraw:{number:Er},clickToUse:{boolean:Mr},dataAttributes:{string:xr,array:Sr},editable:{add:{boolean:Mr,undefined:"undefined"},remove:{boolean:Mr,undefined:"undefined"},updateGroup:{boolean:Mr,undefined:"undefined"},updateTime:{boolean:Mr,undefined:"undefined"},overrideItems:{boolean:Mr,undefined:"undefined"},__type__:{boolean:Mr,object:Cr}},end:{number:Er,date:kr,string:xr,moment:Tr},format:{minorLabels:{millisecond:{string:xr,undefined:"undefined"},second:{string:xr,undefined:"undefined"},minute:{string:xr,undefined:"undefined"},hour:{string:xr,undefined:"undefined"},weekday:{string:xr,undefined:"undefined"},day:{string:xr,undefined:"undefined"},week:{string:xr,undefined:"undefined"},month:{string:xr,undefined:"undefined"},year:{string:xr,undefined:"undefined"},__type__:{object:Cr,function:"function"}},majorLabels:{millisecond:{string:xr,undefined:"undefined"},second:{string:xr,undefined:"undefined"},minute:{string:xr,undefined:"undefined"},hour:{string:xr,undefined:"undefined"},weekday:{string:xr,undefined:"undefined"},day:{string:xr,undefined:"undefined"},week:{string:xr,undefined:"undefined"},month:{string:xr,undefined:"undefined"},year:{string:xr,undefined:"undefined"},__type__:{object:Cr,function:"function"}},__type__:{object:Cr}},moment:{function:"function"},groupHeightMode:{string:xr},groupOrder:{string:xr,function:"function"},groupEditable:{add:{boolean:Mr,undefined:"undefined"},remove:{boolean:Mr,undefined:"undefined"},order:{boolean:Mr,undefined:"undefined"},__type__:{boolean:Mr,object:Cr}},groupOrderSwap:{function:"function"},height:{string:xr,number:Er},hiddenDates:{start:{date:kr,number:Er,string:xr,moment:Tr},end:{date:kr,number:Er,string:xr,moment:Tr},repeat:{string:xr},__type__:{object:Cr,array:Sr}},itemsAlwaysDraggable:{item:{boolean:Mr,undefined:"undefined"},range:{boolean:Mr,undefined:"undefined"},__type__:{boolean:Mr,object:Cr}},limitSize:{boolean:Mr},locale:{string:xr},locales:{__any__:{any:"any"},__type__:{object:Cr}},longSelectPressTime:{number:Er},margin:{axis:{number:Er},item:{horizontal:{number:Er,undefined:"undefined"},vertical:{number:Er,undefined:"undefined"},__type__:{object:Cr,number:Er}},__type__:{object:Cr,number:Er}},max:{date:kr,number:Er,string:xr,moment:Tr},maxHeight:{number:Er,string:xr},maxMinorChars:{number:Er},min:{date:kr,number:Er,string:xr,moment:Tr},minHeight:{number:Er,string:xr},moveable:{boolean:Mr},multiselect:{boolean:Mr},multiselectPerGroup:{boolean:Mr},onAdd:{function:"function"},onDropObjectOnItem:{function:"function"},onUpdate:{function:"function"},onMove:{function:"function"},onMoving:{function:"function"},onRemove:{function:"function"},onAddGroup:{function:"function"},onMoveGroup:{function:"function"},onRemoveGroup:{function:"function"},onInitialDrawComplete:{function:"function"},order:{function:"function"},orientation:{axis:{string:xr,undefined:"undefined"},item:{string:xr,undefined:"undefined"},__type__:{string:xr,object:Cr}},selectable:{boolean:Mr},sequentialSelection:{boolean:Mr},showCurrentTime:{boolean:Mr},showMajorLabels:{boolean:Mr},showMinorLabels:{boolean:Mr},showWeekScale:{boolean:Mr},stack:{boolean:Mr},stackSubgroups:{boolean:Mr},cluster:{maxItems:{number:Er,undefined:"undefined"},titleTemplate:{string:xr,undefined:"undefined"},clusterCriteria:{function:"function",undefined:"undefined"},showStipes:{boolean:Mr,undefined:"undefined"},fitOnDoubleClick:{boolean:Mr,undefined:"undefined"},__type__:{boolean:Mr,object:Cr}},snap:{function:"function",null:"null"},start:{date:kr,number:Er,string:xr,moment:Tr},template:{function:"function"},loadingScreenTemplate:{function:"function"},groupTemplate:{function:"function"},visibleFrameTemplate:{string:xr,function:"function"},showTooltips:{boolean:Mr},tooltip:{followMouse:{boolean:Mr},overflowMethod:{string:["cap","flip","none"]},delay:{number:Er},template:{function:"function"},__type__:{object:Cr}},tooltipOnItemUpdateTime:{template:{function:"function"},__type__:{boolean:Mr,object:Cr}},timeAxis:{scale:{string:xr,undefined:"undefined"},step:{number:Er,undefined:"undefined"},__type__:{object:Cr}},type:{string:xr},width:{string:xr,number:Er},preferZoom:{boolean:Mr},zoomable:{boolean:Mr},zoomKey:{string:["ctrlKey","altKey","shiftKey","metaKey",""]},zoomFriction:{number:Er},zoomMax:{number:Er},zoomMin:{number:Er},xss:{disabled:{boolean:Mr},filterOptions:{__any__:{any:"any"},__type__:{object:Cr}},__type__:{object:Cr}},__type__:{object:Cr}},Lr={global:{align:["center","left","right"],alignCurrentTime:["none","year","month","quarter","week","isoWeek","day","date","hour","minute","second"],direction:!1,autoResize:!0,clickToUse:!1,editable:{add:!1,remove:!1,updateGroup:!1,updateTime:!1},end:"",format:{minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",week:"w",month:"MMM",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",week:"MMMM YYYY",month:"YYYY",year:""}},groupHeightMode:["auto","fixed","fitItems"],groupsDraggable:!1,height:"",locale:"",longSelectPressTime:251,margin:{axis:[20,0,100,1],item:{horizontal:[10,0,100,1],vertical:[10,0,100,1]}},max:"",maxHeight:"",maxMinorChars:[7,0,20,1],min:"",minHeight:"",moveable:!1,multiselect:!1,multiselectPerGroup:!1,orientation:{axis:["both","bottom","top"],item:["bottom","top"]},preferZoom:!1,selectable:!0,showCurrentTime:!1,showMajorLabels:!0,showMinorLabels:!0,stack:!0,stackSubgroups:!0,cluster:!1,start:"",showTooltips:!0,tooltip:{followMouse:!1,overflowMethod:"flip",delay:[500,0,99999,100]},tooltipOnItemUpdateTime:!1,type:["box","point","range","background"],width:"100%",zoomable:!0,zoomKey:["ctrlKey","altKey","shiftKey","metaKey",""],zoomMax:[31536e10,10,31536e10,1],zoomMin:[10,10,31536e10,1],xss:{disabled:!1}}};var Ar={black:"#000000",navy:"#000080",darkblue:"#00008B",mediumblue:"#0000CD",blue:"#0000FF",darkgreen:"#006400",green:"#008000",teal:"#008080",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",lime:"#00FF00",springgreen:"#00FF7F",aqua:"#00FFFF",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",mediumaquamarine:"#66CDAA",dimgray:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",lightslategray:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",maroon:"#800000",purple:"#800080",olive:"#808000",gray:"#808080",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370D8",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",silver:"#C0C0C0",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgrey:"#D3D3D3",palevioletred:"#D87093",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",red:"#FF0000",fuchsia:"#FF00FF",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",yellow:"#FFFF00",lightyellow:"#FFFFE0",ivory:"#FFFFF0",white:"#FFFFFF"};class Or{constructor(t=1){this.pixelRatio=t,this.generated=!1,this.centerCoordinates={x:144.5,y:144.5},this.r=289*.49,this.color={r:255,g:255,b:255,a:1},this.hueCircle=void 0,this.initialColor={r:255,g:255,b:255,a:1},this.previousColor=void 0,this.applied=!1,this.updateCallback=()=>{},this.closeCallback=()=>{},this._create()}insertTo(t){void 0!==this.hammer&&(this.hammer.destroy(),this.hammer=void 0),this.container=t,this.container.appendChild(this.frame),this._bindHammer(),this._setSize()}setUpdateCallback(t){if("function"!=typeof t)throw new Error("Function attempted to set as colorPicker update callback is not a function.");this.updateCallback=t}setCloseCallback(t){if("function"!=typeof t)throw new Error("Function attempted to set as colorPicker closing callback is not a function.");this.closeCallback=t}_isColorString(t){if("string"==typeof t)return Ar[t]}setColor(t,e=!0){if("none"===t)return;let n;var i=this._isColorString(t);if(void 0!==i&&(t=i),!0===ni.isString(t)){if(!0===ni.isValidRGB(t)){let e=t.substr(4).substr(0,t.length-5).split(",");n={r:e[0],g:e[1],b:e[2],a:1}}else if(!0===ni.isValidRGBA(t)){let e=t.substr(5).substr(0,t.length-6).split(",");n={r:e[0],g:e[1],b:e[2],a:e[3]}}else if(!0===ni.isValidHex(t)){let e=ni.hexToRGB(t);n={r:e.r,g:e.g,b:e.b,a:1}}}else if(t instanceof Object&&void 0!==t.r&&void 0!==t.g&&void 0!==t.b){let e=void 0!==t.a?t.a:"1.0";n={r:t.r,g:t.g,b:t.b,a:e}}if(void 0===n)throw new Error("Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: "+JSON.stringify(t));this._setColor(n,e)}show(){void 0!==this.closeCallback&&(this.closeCallback(),this.closeCallback=void 0),this.applied=!1,this.frame.style.display="block",this._generateHueCircle()}_hide(t=!0){!0===t&&(this.previousColor=ni.extend({},this.color)),!0===this.applied&&this.updateCallback(this.initialColor),this.frame.style.display="none",setTimeout((()=>{void 0!==this.closeCallback&&(this.closeCallback(),this.closeCallback=void 0)}),0)}_save(){this.updateCallback(this.color),this.applied=!1,this._hide()}_apply(){this.applied=!0,this.updateCallback(this.color),this._updatePicker(this.color)}_loadLast(){void 0!==this.previousColor?this.setColor(this.previousColor,!1):alert("There is no last color to load...")}_setColor(t,e=!0){!0===e&&(this.initialColor=ni.extend({},t)),this.color=t;let n=ni.RGBToHSV(t.r,t.g,t.b),i=2*Math.PI,r=this.r*n.s,o=this.centerCoordinates.x+r*Math.sin(i*n.h),a=this.centerCoordinates.y+r*Math.cos(i*n.h);this.colorPickerSelector.style.left=o-.5*this.colorPickerSelector.clientWidth+"px",this.colorPickerSelector.style.top=a-.5*this.colorPickerSelector.clientHeight+"px",this._updatePicker(t)}_setOpacity(t){this.color.a=t/100,this._updatePicker(this.color)}_setBrightness(t){let e=ni.RGBToHSV(this.color.r,this.color.g,this.color.b);e.v=t/100;let n=ni.HSVToRGB(e.h,e.s,e.v);n.a=this.color.a,this.color=n,this._updatePicker()}_updatePicker(t=this.color){let e=ni.RGBToHSV(t.r,t.g,t.b),n=this.colorPickerCanvas.getContext("2d");void 0===this.pixelRation&&(this.pixelRatio=(window.devicePixelRatio||1)/(n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1)),n.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);let i=this.colorPickerCanvas.clientWidth,r=this.colorPickerCanvas.clientHeight;n.clearRect(0,0,i,r),n.putImageData(this.hueCircle,0,0),n.fillStyle="rgba(0,0,0,"+(1-e.v)+")",n.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),n.fill(),this.brightnessRange.value=100*e.v,this.opacityRange.value=100*t.a,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}_setSize(){this.colorPickerCanvas.style.width="100%",this.colorPickerCanvas.style.height="100%",this.colorPickerCanvas.width=289*this.pixelRatio,this.colorPickerCanvas.height=289*this.pixelRatio}_create(){if(this.frame=document.createElement("div"),this.frame.className="vis-color-picker",this.colorPickerDiv=document.createElement("div"),this.colorPickerSelector=document.createElement("div"),this.colorPickerSelector.className="vis-selector",this.colorPickerDiv.appendChild(this.colorPickerSelector),this.colorPickerCanvas=document.createElement("canvas"),this.colorPickerDiv.appendChild(this.colorPickerCanvas),this.colorPickerCanvas.getContext){let t=this.colorPickerCanvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1),this.colorPickerCanvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else{let t=document.createElement("DIV");t.style.color="red",t.style.fontWeight="bold",t.style.padding="10px",t.innerHTML="Error: your browser does not support HTML canvas",this.colorPickerCanvas.appendChild(t)}this.colorPickerDiv.className="vis-color",this.opacityDiv=document.createElement("div"),this.opacityDiv.className="vis-opacity",this.brightnessDiv=document.createElement("div"),this.brightnessDiv.className="vis-brightness",this.arrowDiv=document.createElement("div"),this.arrowDiv.className="vis-arrow",this.opacityRange=document.createElement("input");try{this.opacityRange.type="range",this.opacityRange.min="0",this.opacityRange.max="100"}catch(t){}this.opacityRange.value="100",this.opacityRange.className="vis-range",this.brightnessRange=document.createElement("input");try{this.brightnessRange.type="range",this.brightnessRange.min="0",this.brightnessRange.max="100"}catch(t){}this.brightnessRange.value="100",this.brightnessRange.className="vis-range",this.opacityDiv.appendChild(this.opacityRange),this.brightnessDiv.appendChild(this.brightnessRange);var t=this;this.opacityRange.onchange=function(){t._setOpacity(this.value)},this.opacityRange.oninput=function(){t._setOpacity(this.value)},this.brightnessRange.onchange=function(){t._setBrightness(this.value)},this.brightnessRange.oninput=function(){t._setBrightness(this.value)},this.brightnessLabel=document.createElement("div"),this.brightnessLabel.className="vis-label vis-brightness",this.brightnessLabel.innerHTML="brightness:",this.opacityLabel=document.createElement("div"),this.opacityLabel.className="vis-label vis-opacity",this.opacityLabel.innerHTML="opacity:",this.newColorDiv=document.createElement("div"),this.newColorDiv.className="vis-new-color",this.newColorDiv.innerHTML="new",this.initialColorDiv=document.createElement("div"),this.initialColorDiv.className="vis-initial-color",this.initialColorDiv.innerHTML="initial",this.cancelButton=document.createElement("div"),this.cancelButton.className="vis-button vis-cancel",this.cancelButton.innerHTML="cancel",this.cancelButton.onclick=this._hide.bind(this,!1),this.applyButton=document.createElement("div"),this.applyButton.className="vis-button vis-apply",this.applyButton.innerHTML="apply",this.applyButton.onclick=this._apply.bind(this),this.saveButton=document.createElement("div"),this.saveButton.className="vis-button vis-save",this.saveButton.innerHTML="save",this.saveButton.onclick=this._save.bind(this),this.loadButton=document.createElement("div"),this.loadButton.className="vis-button vis-load",this.loadButton.innerHTML="load last",this.loadButton.onclick=this._loadLast.bind(this),this.frame.appendChild(this.colorPickerDiv),this.frame.appendChild(this.arrowDiv),this.frame.appendChild(this.brightnessLabel),this.frame.appendChild(this.brightnessDiv),this.frame.appendChild(this.opacityLabel),this.frame.appendChild(this.opacityDiv),this.frame.appendChild(this.newColorDiv),this.frame.appendChild(this.initialColorDiv),this.frame.appendChild(this.cancelButton),this.frame.appendChild(this.applyButton),this.frame.appendChild(this.saveButton),this.frame.appendChild(this.loadButton)}_bindHammer(){this.drag={},this.pinch={},this.hammer=new wi(this.colorPickerCanvas),this.hammer.get("pinch").set({enable:!0}),xi(this.hammer,(t=>{this._moveSelector(t)})),this.hammer.on("tap",(t=>{this._moveSelector(t)})),this.hammer.on("panstart",(t=>{this._moveSelector(t)})),this.hammer.on("panmove",(t=>{this._moveSelector(t)})),this.hammer.on("panend",(t=>{this._moveSelector(t)}))}_generateHueCircle(){if(!1===this.generated){let t=this.colorPickerCanvas.getContext("2d");void 0===this.pixelRation&&(this.pixelRatio=(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)),t.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);let e,n,i,r,o=this.colorPickerCanvas.clientWidth,a=this.colorPickerCanvas.clientHeight;t.clearRect(0,0,o,a),this.centerCoordinates={x:.5*o,y:.5*a},this.r=.49*o;let s,l=2*Math.PI/360,u=1/360,c=1/this.r;for(i=0;i<360;i++)for(r=0;r<this.r;r++)e=this.centerCoordinates.x+r*Math.sin(l*i),n=this.centerCoordinates.y+r*Math.cos(l*i),s=ni.HSVToRGB(i*u,r*c,1),t.fillStyle="rgb("+s.r+","+s.g+","+s.b+")",t.fillRect(e-.5,n-.5,2,2);t.strokeStyle="rgba(0,0,0,1)",t.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),t.stroke(),this.hueCircle=t.getImageData(0,0,o,a)}this.generated=!0}_moveSelector(t){let e=this.colorPickerDiv.getBoundingClientRect(),n=t.center.x-e.left,i=t.center.y-e.top,r=.5*this.colorPickerDiv.clientHeight,o=.5*this.colorPickerDiv.clientWidth,a=n-o,s=i-r,l=Math.atan2(a,s),u=.98*Math.min(Math.sqrt(a*a+s*s),o),c=Math.cos(l)*u+r,h=Math.sin(l)*u+o;this.colorPickerSelector.style.top=c-.5*this.colorPickerSelector.clientHeight+"px",this.colorPickerSelector.style.left=h-.5*this.colorPickerSelector.clientWidth+"px";let d=l/(2*Math.PI);d=d<0?d+1:d;let f=u/this.r,p=ni.RGBToHSV(this.color.r,this.color.g,this.color.b);p.h=d,p.s=f;let m=ni.HSVToRGB(p.h,p.s,p.v);m.a=this.color.a,this.color=m,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}}class Pr{constructor(t,e,n,i=1){this.parent=t,this.changedOptions=[],this.container=e,this.allowCreation=!1,this.options={},this.initialized=!1,this.popupCounter=0,this.defaultOptions={enabled:!1,filter:!0,container:void 0,showButton:!0},ni.extend(this.options,this.defaultOptions),this.configureOptions=n,this.moduleOptions={},this.domElements=[],this.popupDiv={},this.popupLimit=5,this.popupHistory={},this.colorPicker=new Or(i),this.wrapper=void 0}setOptions(t){if(void 0!==t){this.popupHistory={},this._removePopup();let e=!0;if("string"==typeof t)this.options.filter=t;else if(Array.isArray(t))this.options.filter=t.join();else if("object"==typeof t){if(null==t)throw new TypeError("options cannot be null");void 0!==t.container&&(this.options.container=t.container),void 0!==t.filter&&(this.options.filter=t.filter),void 0!==t.showButton&&(this.options.showButton=t.showButton),void 0!==t.enabled&&(e=t.enabled)}else"boolean"==typeof t?(this.options.filter=!0,e=t):"function"==typeof t&&(this.options.filter=t,e=!0);!1===this.options.filter&&(e=!1),this.options.enabled=e}this._clean()}setModuleOptions(t){this.moduleOptions=t,!0===this.options.enabled&&(this._clean(),void 0!==this.options.container&&(this.container=this.options.container),this._create())}_create(){this._clean(),this.changedOptions=[];let t=this.options.filter,e=0,n=!1;for(let i in this.configureOptions)this.configureOptions.hasOwnProperty(i)&&(this.allowCreation=!1,n=!1,"function"==typeof t?(n=t(i,[]),n=n||this._handleObject(this.configureOptions[i],[i],!0)):!0!==t&&-1===t.indexOf(i)||(n=!0),!1!==n&&(this.allowCreation=!0,e>0&&this._makeItem([]),this._makeHeader(i),this._handleObject(this.configureOptions[i],[i])),e++);this._makeButton(),this._push()}_push(){this.wrapper=document.createElement("div"),this.wrapper.className="vis-configuration-wrapper",this.container.appendChild(this.wrapper);for(var t=0;t<this.domElements.length;t++)this.wrapper.appendChild(this.domElements[t]);this._showPopupIfNeeded()}_clean(){for(var t=0;t<this.domElements.length;t++)this.wrapper.removeChild(this.domElements[t]);void 0!==this.wrapper&&(this.container.removeChild(this.wrapper),this.wrapper=void 0),this.domElements=[],this._removePopup()}_getValue(t){let e=this.moduleOptions;for(let n=0;n<t.length;n++){if(void 0===e[t[n]]){e=void 0;break}e=e[t[n]]}return e}_makeItem(t,...e){if(!0===this.allowCreation){let n=document.createElement("div");return n.className="vis-configuration vis-config-item vis-config-s"+t.length,e.forEach((t=>{n.appendChild(t)})),this.domElements.push(n),this.domElements.length}return 0}_makeHeader(t){let e=document.createElement("div");e.className="vis-configuration vis-config-header",e.innerHTML=ni.xss(t),this._makeItem([],e)}_makeLabel(t,e,n=!1){let i=document.createElement("div");return i.className="vis-configuration vis-config-label vis-config-s"+e.length,i.innerHTML=!0===n?ni.xss("<i><b>"+t+":</b></i>"):ni.xss(t+":"),i}_makeDropdown(t,e,n){let i=document.createElement("select");i.className="vis-configuration vis-config-select";let r=0;void 0!==e&&-1!==t.indexOf(e)&&(r=t.indexOf(e));for(let e=0;e<t.length;e++){let n=document.createElement("option");n.value=t[e],e===r&&(n.selected="selected"),n.innerHTML=t[e],i.appendChild(n)}let o=this;i.onchange=function(){o._update(this.value,n)};let a=this._makeLabel(n[n.length-1],n);this._makeItem(n,a,i)}_makeRange(t,e,n){let i=t[0],r=t[1],o=t[2],a=t[3],s=document.createElement("input");s.className="vis-configuration vis-config-range";try{s.type="range",s.min=r,s.max=o}catch(t){}s.step=a;let l="",u=0;if(void 0!==e){let t=1.2;e<0&&e*t<r?(s.min=Math.ceil(e*t),u=s.min,l="range increased"):e/t<r&&(s.min=Math.ceil(e/t),u=s.min,l="range increased"),e*t>o&&1!==o&&(s.max=Math.ceil(e*t),u=s.max,l="range increased"),s.value=e}else s.value=i;let c=document.createElement("input");c.className="vis-configuration vis-config-rangeinput",c.value=Number(s.value);var h=this;s.onchange=function(){c.value=this.value,h._update(Number(this.value),n)},s.oninput=function(){c.value=this.value};let d=this._makeLabel(n[n.length-1],n),f=this._makeItem(n,d,s,c);""!==l&&this.popupHistory[f]!==u&&(this.popupHistory[f]=u,this._setupPopup(l,f))}_makeButton(){if(!0===this.options.showButton){let t=document.createElement("div");t.className="vis-configuration vis-config-button",t.innerHTML="generate options",t.onclick=()=>{this._printOptions()},t.onmouseover=()=>{t.className="vis-configuration vis-config-button hover"},t.onmouseout=()=>{t.className="vis-configuration vis-config-button"},this.optionsContainer=document.createElement("div"),this.optionsContainer.className="vis-configuration vis-config-option-container",this.domElements.push(this.optionsContainer),this.domElements.push(t)}}_setupPopup(t,e){if(!0===this.initialized&&!0===this.allowCreation&&this.popupCounter<this.popupLimit){let n=document.createElement("div");n.id="vis-configuration-popup",n.className="vis-configuration-popup",n.innerHTML=ni.xss(t),n.onclick=()=>{this._removePopup()},this.popupCounter+=1,this.popupDiv={html:n,index:e}}}_removePopup(){void 0!==this.popupDiv.html&&(this.popupDiv.html.parentNode.removeChild(this.popupDiv.html),clearTimeout(this.popupDiv.hideTimeout),clearTimeout(this.popupDiv.deleteTimeout),this.popupDiv={})}_showPopupIfNeeded(){if(void 0!==this.popupDiv.html){let t=this.domElements[this.popupDiv.index].getBoundingClientRect();this.popupDiv.html.style.left=t.left+"px",this.popupDiv.html.style.top=t.top-30+"px",document.body.appendChild(this.popupDiv.html),this.popupDiv.hideTimeout=setTimeout((()=>{this.popupDiv.html.style.opacity=0}),1500),this.popupDiv.deleteTimeout=setTimeout((()=>{this._removePopup()}),1800)}}_makeCheckbox(t,e,n){var i=document.createElement("input");i.type="checkbox",i.className="vis-configuration vis-config-checkbox",i.checked=t,void 0!==e&&(i.checked=e,e!==t&&("object"==typeof t?e!==t.enabled&&this.changedOptions.push({path:n,value:e}):this.changedOptions.push({path:n,value:e})));let r=this;i.onchange=function(){r._update(this.checked,n)};let o=this._makeLabel(n[n.length-1],n);this._makeItem(n,o,i)}_makeTextInput(t,e,n){var i=document.createElement("input");i.type="text",i.className="vis-configuration vis-config-text",i.value=e,e!==t&&this.changedOptions.push({path:n,value:e});let r=this;i.onchange=function(){r._update(this.value,n)};let o=this._makeLabel(n[n.length-1],n);this._makeItem(n,o,i)}_makeColorField(t,e,n){let i=t[1],r=document.createElement("div");"none"!==(e=void 0===e?i:e)?(r.className="vis-configuration vis-config-colorBlock",r.style.backgroundColor=e):r.className="vis-configuration vis-config-colorBlock none",e=void 0===e?i:e,r.onclick=()=>{this._showColorPicker(e,r,n)};let o=this._makeLabel(n[n.length-1],n);this._makeItem(n,o,r)}_showColorPicker(t,e,n){e.onclick=function(){},this.colorPicker.insertTo(e),this.colorPicker.show(),this.colorPicker.setColor(t),this.colorPicker.setUpdateCallback((t=>{let i="rgba("+t.r+","+t.g+","+t.b+","+t.a+")";e.style.backgroundColor=i,this._update(i,n)})),this.colorPicker.setCloseCallback((()=>{e.onclick=()=>{this._showColorPicker(t,e,n)}}))}_handleObject(t,e=[],n=!1){let i=!1,r=this.options.filter,o=!1;for(let a in t)if(t.hasOwnProperty(a)){i=!0;let s=t[a],l=ni.copyAndExtendArray(e,a);if("function"==typeof r&&(i=r(a,e),!1===i&&!Array.isArray(s)&&"string"!=typeof s&&"boolean"!=typeof s&&s instanceof Object&&(this.allowCreation=!1,i=this._handleObject(s,l,!0),this.allowCreation=!1===n)),!1!==i){o=!0;let t=this._getValue(l);if(Array.isArray(s))this._handleArray(s,t,l);else if("string"==typeof s)this._makeTextInput(s,t,l);else if("boolean"==typeof s)this._makeCheckbox(s,t,l);else if(s instanceof Object){let t=!0;if(-1!==e.indexOf("physics")&&this.moduleOptions.physics.solver!==a&&(t=!1),!0===t)if(void 0!==s.enabled){let t=ni.copyAndExtendArray(l,"enabled"),e=this._getValue(t);if(!0===e){let t=this._makeLabel(a,l,!0);this._makeItem(l,t),o=this._handleObject(s,l)||o}else this._makeCheckbox(s,e,l)}else{let t=this._makeLabel(a,l,!0);this._makeItem(l,t),o=this._handleObject(s,l)||o}}else console.error("dont know how to handle",s,a,l)}}return o}_handleArray(t,e,n){"string"==typeof t[0]&&"color"===t[0]?(this._makeColorField(t,e,n),t[1]!==e&&this.changedOptions.push({path:n,value:e})):"string"==typeof t[0]?(this._makeDropdown(t,e,n),t[0]!==e&&this.changedOptions.push({path:n,value:e})):"number"==typeof t[0]&&(this._makeRange(t,e,n),t[0]!==e&&this.changedOptions.push({path:n,value:Number(e)}))}_update(t,e){let n=this._constructOptions(t,e);this.parent.body&&this.parent.body.emitter&&this.parent.body.emitter.emit&&this.parent.body.emitter.emit("configChange",n),this.initialized=!0,this.parent.setOptions(n)}_constructOptions(t,e,n={}){let i=n;t="false"!==(t="true"===t||t)&&t;for(let n=0;n<e.length;n++)"global"!==e[n]&&(void 0===i[e[n]]&&(i[e[n]]={}),n!==e.length-1?i=i[e[n]]:i[e[n]]=t);return n}_printOptions(){let t=this.getOptions();this.optionsContainer.innerHTML="<pre>var options = "+JSON.stringify(t,null,2)+"</pre>"}getOptions(){let t={};for(var e=0;e<this.changedOptions.length;e++)this._constructOptions(this.changedOptions[e].value,this.changedOptions[e].path,t);return t}}class Ir extends Gi{constructor(t,e,n,i){if(super(),this.initTime=new Date,this.itemsDone=!1,!(this instanceof Ir))throw new SyntaxError("Constructor must be called with the new operator");if(!Array.isArray(n)&&!Wn("id",n)&&n instanceof Object){const t=i;i=n,n=t}i&&i.throttleRedraw&&console.warn('Timeline option "throttleRedraw" is DEPRICATED and no longer supported. It will be removed in the next MAJOR release.');const r=this;if(this.defaultOptions={autoResize:!0,longSelectPressTime:251,orientation:{axis:"bottom",item:"bottom"},moment:qn},this.options=ni.deepExtend({},this.defaultOptions),i&&ni.setupXSSProtection(i.xss),this._create(t),!i||i&&void 0===i.rtl){let t;this.dom.root.style.visibility="hidden";let e=this.dom.root;for(;!t&&e;)t=window.getComputedStyle(e,null).direction,e=e.parentElement;this.options.rtl=t&&"rtl"==t.toLowerCase()}else this.options.rtl=i.rtl;i&&(i.rollingMode&&(this.options.rollingMode=i.rollingMode),i.onInitialDrawComplete&&(this.options.onInitialDrawComplete=i.onInitialDrawComplete),i.onTimeout&&(this.options.onTimeout=i.onTimeout),i.loadingScreenTemplate&&(this.options.loadingScreenTemplate=i.loadingScreenTemplate));const o=document.createElement("div");if(this.options.loadingScreenTemplate){const t=this.options.loadingScreenTemplate.bind(this),e=t(this.dom.loadingScreen);e instanceof Object&&!(e instanceof Element)?t(o):e instanceof Element?(o.innerHTML="",o.appendChild(e)):null!=e&&(o.innerHTML=ni.xss(e))}function a(t,e){r.hasListeners(t)&&r.emit(t,r.getEventProperties(e))}this.dom.loadingScreen.appendChild(o),this.components=[],this.body={dom:this.dom,domProps:this.props,emitter:{on:this.on.bind(this),off:this.off.bind(this),emit:this.emit.bind(this)},hiddenDates:[],util:{getScale:()=>r.timeAxis.step.scale,getStep:()=>r.timeAxis.step.step,toScreen:r._toScreen.bind(r),toGlobalScreen:r._toGlobalScreen.bind(r),toTime:r._toTime.bind(r),toGlobalTime:r._toGlobalTime.bind(r)}},this.range=new yi(this.body,this.options),this.components.push(this.range),this.body.range=this.range,this.timeAxis=new Ei(this.body,this.options),this.timeAxis2=null,this.components.push(this.timeAxis),this.currentTime=new Wi(this.body,this.options),this.components.push(this.currentTime),this.itemSet=new vr(this.body,this.options),this.components.push(this.itemSet),this.itemsData=null,this.groupsData=null,this.dom.root.onclick=t=>{a("click",t)},this.dom.root.ondblclick=t=>{a("doubleClick",t)},this.dom.root.oncontextmenu=t=>{a("contextmenu",t)},this.dom.root.onmouseover=t=>{a("mouseOver",t)},window.PointerEvent?(this.dom.root.onpointerdown=t=>{a("mouseDown",t)},this.dom.root.onpointermove=t=>{a("mouseMove",t)},this.dom.root.onpointerup=t=>{a("mouseUp",t)}):(this.dom.root.onmousemove=t=>{a("mouseMove",t)},this.dom.root.onmousedown=t=>{a("mouseDown",t)},this.dom.root.onmouseup=t=>{a("mouseUp",t)}),this.initialFitDone=!1,this.on("changed",(()=>{if(null!=r.itemsData){if(!r.initialFitDone&&!r.options.rollingMode)if(r.initialFitDone=!0,null!=r.options.start||null!=r.options.end){if(null==r.options.start||null==r.options.end)var t=r.getItemRange();const e=null!=r.options.start?r.options.start:t.min,n=null!=r.options.end?r.options.end:t.max;r.setWindow(e,n,{animation:!1})}else r.fit({animation:!1});r.initialDrawDone||!r.initialRangeChangeDone&&(r.options.start||r.options.end)&&!r.options.rollingMode||(r.initialDrawDone=!0,r.itemSet.initialDrawDone=!0,r.dom.root.style.visibility="visible",r.dom.loadingScreen.parentNode.removeChild(r.dom.loadingScreen),r.options.onInitialDrawComplete&&setTimeout((()=>r.options.onInitialDrawComplete()),0))}})),this.on("destroyTimeline",(()=>{r.destroy()})),i&&this.setOptions(i),this.body.emitter.on("fit",(t=>{this._onFit(t),this.redraw()})),n&&this.setGroups(n),e&&this.setItems(e),this._redraw()}_createConfigurator(){return new Pr(this,this.dom.container,Lr)}redraw(){this.itemSet&&this.itemSet.markDirty({refreshItems:!0}),this._redraw()}setOptions(t){if(!0===wr.validate(t,Dr)&&console.log("%cErrors have been found in the supplied options object.",_r),Gi.prototype.setOptions.call(this,t),"type"in t&&t.type!==this.options.type){this.options.type=t.type;const e=this.itemsData;if(e){const t=this.getSelection();this.setItems(null),this.setItems(e.rawDS),this.setSelection(t)}}}setItems(t){let e;this.itemsDone=!1,e=t?Wn("id",t)?Jn(t):Jn(new Hn(t)):null,this.itemsData&&this.itemsData.dispose(),this.itemsData=e,this.itemSet&&this.itemSet.setItems(null!=e?e.rawDS:null)}setGroups(t){let e;const n=t=>!1!==t.visible;t?(Array.isArray(t)&&(t=new Hn(t)),e=new Gn(t,{filter:n})):e=null,null!=this.groupsData&&"function"==typeof this.groupsData.setData&&this.groupsData.setData(null),this.groupsData=e,this.itemSet.setGroups(e)}setData(t){t&&t.groups&&this.setGroups(t.groups),t&&t.items&&this.setItems(t.items)}setSelection(t,e){this.itemSet&&this.itemSet.setSelection(t),e&&e.focus&&this.focus(t,e)}getSelection(){return this.itemSet&&this.itemSet.getSelection()||[]}focus(t,e){if(!this.itemsData||null==t)return;const n=Array.isArray(t)?t:[t],i=this.itemsData.get(n);let r=null,o=null;if(i.forEach((t=>{const e=t.start.valueOf(),n="end"in t?t.end.valueOf():t.start.valueOf();(null===r||e<r)&&(r=e),(null===o||n>o)&&(o=n)})),null!==r&&null!==o){const t=this,i=this.itemSet.items[n[0]];let a=-1*this._getScrollTop(),s=null;const l=(e,n,r)=>{const o=Yr(t,i);if(!1===o)return;if(s||(s=o),s.itemTop==o.itemTop&&!s.shouldScroll)return;s.itemTop!=o.itemTop&&o.shouldScroll&&(s=o,a=-1*t._getScrollTop());const l=a,u=s.scrollOffset,c=r?u:l+(u-l)*e;t._setScrollTop(-c),n||t._redraw()},u=()=>{const e=Yr(t,i);e.shouldScroll&&e.itemTop!=s.itemTop&&(t._setScrollTop(-e.scrollOffset),t._redraw())},c=()=>{u(),setTimeout(u,100)},h=!e||void 0===e.zoom||e.zoom,d=(r+o)/2,f=h?1.1*(o-r):Math.max(this.range.end-this.range.start,1.1*(o-r)),p=!e||void 0===e.animation||e.animation;p||(s={shouldScroll:!1,scrollOffset:-1,itemTop:-1}),this.range.setRange(d-f/2,d+f/2,{animation:p},c,l)}}fit(t,e){const n=!t||void 0===t.animation||t.animation;let i;1===this.itemsData.length&&void 0===this.itemsData.get()[0].end?(i=this.getDataRange(),this.moveTo(i.min.valueOf(),{animation:n},e)):(i=this.getItemRange(),this.range.setRange(i.min,i.max,{animation:n},e))}getItemRange(){const t=this.getDataRange();let e=null!==t.min?t.min.valueOf():null,n=null!==t.max?t.max.valueOf():null,i=null,r=null;if(null!=e&&null!=n){let t=n-e;t<=0&&(t=10);const o=t/this.props.center.width,a={};let s=0;ni.forEach(this.itemSet.items,((t,e)=>{if(t.groupShowing){const n=!0;a[e]=t.redraw(n),s=a[e].length}}));if(s>0)for(let t=0;t<s;t++)ni.forEach(a,(e=>{e[t]()}));if(ni.forEach(this.itemSet.items,(t=>{const a=Nr(t),s=Rr(t);let l,u;this.options.rtl?(l=a-(t.getWidthRight()+10)*o,u=s+(t.getWidthLeft()+10)*o):(l=a-(t.getWidthLeft()+10)*o,u=s+(t.getWidthRight()+10)*o),l<e&&(e=l,i=t),u>n&&(n=u,r=t)})),i&&r){const o=i.getWidthLeft()+10,a=r.getWidthRight()+10,s=this.props.center.width-o-a;s>0&&(this.options.rtl?(e=Nr(i)-a*t/s,n=Rr(r)+o*t/s):(e=Nr(i)-o*t/s,n=Rr(r)+a*t/s))}}return{min:null!=e?new Date(e):null,max:null!=n?new Date(n):null}}getDataRange(){let t=null,e=null;return this.itemsData&&this.itemsData.forEach((n=>{const i=ni.convert(n.start,"Date").valueOf(),r=ni.convert(null!=n.end?n.end:n.start,"Date").valueOf();(null===t||i<t)&&(t=i),(null===e||r>e)&&(e=r)})),{min:null!=t?new Date(t):null,max:null!=e?new Date(e):null}}getEventProperties(t){const e=t.center?t.center.x:t.clientX,n=t.center?t.center.y:t.clientY,i=this.dom.centerContainer.getBoundingClientRect(),r=this.options.rtl?i.right-e:e-i.left,o=n-i.top,a=this.itemSet.itemFromTarget(t),s=this.itemSet.groupFromTarget(t),l=Hi.customTimeFromTarget(t),u=this.itemSet.options.snap||null,c=this.body.util.getScale(),h=this.body.util.getStep(),d=this._toTime(r),f=u?u(d,c,h):d,p=ni.getTarget(t);let m=null;return null!=a?m="item":null!=l?m="custom-time":ni.hasParent(p,this.timeAxis.dom.foreground)||this.timeAxis2&&ni.hasParent(p,this.timeAxis2.dom.foreground)?m="axis":ni.hasParent(p,this.itemSet.dom.labelSet)?m="group-label":ni.hasParent(p,this.currentTime.bar)?m="current-time":ni.hasParent(p,this.dom.center)&&(m="background"),{event:t,item:a?a.id:null,isCluster:!!a&&!!a.isCluster,items:a?a.items||[]:null,group:s?s.groupId:null,customTime:l?l.options.id:null,what:m,pageX:t.srcEvent?t.srcEvent.pageX:t.pageX,pageY:t.srcEvent?t.srcEvent.pageY:t.pageY,x:r,y:o,time:d,snappedTime:f}}toggleRollingMode(){this.range.rolling?this.range.stopRolling():(null==this.options.rollingMode&&this.setOptions(this.options),this.range.startRolling())}_redraw(){Gi.prototype._redraw.call(this)}_onFit(t){const{start:e,end:n,animation:i}=t;n?this.range.setRange(e,n,{animation:i}):this.moveTo(e.valueOf(),{animation:i})}}function Nr(t){return ni.convert(t.data.start,"Date").valueOf()}function Rr(t){const e=null!=t.data.end?t.data.end:t.data.start;return ni.convert(e,"Date").valueOf()}function Yr(t,e){if(!e.parent)return!1;const n=t.options.rtl?t.props.rightContainer.height:t.props.leftContainer.height,i=t.props.center.height,r=e.parent;let o=r.top,a=!0;const s=t.timeAxis.options.orientation.axis,l=()=>"bottom"==s?r.height-e.top-e.height:e.top,u=-1*t._getScrollTop(),c=o+l(),h=e.height;return c<u?o+n<=o+l()+h&&(o+=l()-t.itemSet.options.margin.item.vertical):c+h>u+n?o+=l()+h-n+t.itemSet.options.margin.item.vertical:a=!1,o=Math.min(o,i-n),{shouldScroll:a,scrollOffset:o,itemTop:c}}function jr(t){for(var e in t)t.hasOwnProperty(e)&&(t[e].redundant=t[e].used,t[e].used=[])}function Fr(t){for(var e in t)if(t.hasOwnProperty(e)&&t[e].redundant){for(var n=0;n<t[e].redundant.length;n++)t[e].redundant[n].parentNode.removeChild(t[e].redundant[n]);t[e].redundant=[]}}function Br(t,e,n){var i;return e.hasOwnProperty(t)?e[t].redundant.length>0?(i=e[t].redundant[0],e[t].redundant.shift()):(i=document.createElementNS("http://www.w3.org/2000/svg",t),n.appendChild(i)):(i=document.createElementNS("http://www.w3.org/2000/svg",t),e[t]={used:[],redundant:[]},n.appendChild(i)),e[t].used.push(i),i}function zr(t,e,n,i){var r;return e.hasOwnProperty(t)?e[t].redundant.length>0?(r=e[t].redundant[0],e[t].redundant.shift()):(r=document.createElement(t),void 0!==i?n.insertBefore(r,i):n.appendChild(r)):(r=document.createElement(t),e[t]={used:[],redundant:[]},void 0!==i?n.insertBefore(r,i):n.appendChild(r)),e[t].used.push(r),r}function Hr(t,e,n,i,r,o){var a;if("circle"==n.style?((a=Br("circle",i,r)).setAttributeNS(null,"cx",t),a.setAttributeNS(null,"cy",e),a.setAttributeNS(null,"r",.5*n.size)):((a=Br("rect",i,r)).setAttributeNS(null,"x",t-.5*n.size),a.setAttributeNS(null,"y",e-.5*n.size),a.setAttributeNS(null,"width",n.size),a.setAttributeNS(null,"height",n.size)),void 0!==n.styles&&a.setAttributeNS(null,"style",n.styles),a.setAttributeNS(null,"class",n.className+" vis-point"),o){var s=Br("text",i,r);o.xOffset&&(t+=o.xOffset),o.yOffset&&(e+=o.yOffset),o.content&&(s.textContent=o.content),o.className&&s.setAttributeNS(null,"class",o.className+" vis-label"),s.setAttributeNS(null,"x",t),s.setAttributeNS(null,"y",e)}return a}function Gr(t,e,n,i,r,o,a,s){if(0!=i){i<0&&(e-=i*=-1);var l=Br("rect",o,a);l.setAttributeNS(null,"x",t-.5*n),l.setAttributeNS(null,"y",e),l.setAttributeNS(null,"width",n),l.setAttributeNS(null,"height",i),l.setAttributeNS(null,"class",r),s&&l.setAttributeNS(null,"style",s)}}class Wr{constructor(t,e,n,i,r,o,a=!1,s=!1){if(this.majorSteps=[1,2,5,10],this.minorSteps=[.25,.5,1,2],this.customLines=null,this.containerHeight=r,this.majorCharHeight=o,this._start=t,this._end=e,this.scale=1,this.minorStepIdx=-1,this.magnitudefactor=1,this.determineScale(),this.zeroAlign=a,this.autoScaleStart=n,this.autoScaleEnd=i,this.formattingFunction=s,n||i){const t=this,e=e=>{const n=e-e%(t.magnitudefactor*t.minorSteps[t.minorStepIdx]);return e%(t.magnitudefactor*t.minorSteps[t.minorStepIdx])>t.magnitudefactor*t.minorSteps[t.minorStepIdx]*.5?n+t.magnitudefactor*t.minorSteps[t.minorStepIdx]:n};n&&(this._start-=2*this.magnitudefactor*this.minorSteps[this.minorStepIdx],this._start=e(this._start)),i&&(this._end+=this.magnitudefactor*this.minorSteps[this.minorStepIdx],this._end=e(this._end)),this.determineScale()}}setCharHeight(t){this.majorCharHeight=t}setHeight(t){this.containerHeight=t}determineScale(){const t=this._end-this._start;this.scale=this.containerHeight/t;const e=this.majorCharHeight/this.scale,n=t>0?Math.round(Math.log(t)/Math.LN10):0;this.minorStepIdx=-1,this.magnitudefactor=Math.pow(10,n);let i=0;n<0&&(i=n);let r=!1;for(let t=i;Math.abs(t)<=Math.abs(n);t++){this.magnitudefactor=Math.pow(10,t);for(let t=0;t<this.minorSteps.length;t++){if(this.magnitudefactor*this.minorSteps[t]>=e){r=!0,this.minorStepIdx=t;break}}if(!0===r)break}}is_major(t){return t%(this.magnitudefactor*this.majorSteps[this.minorStepIdx])==0}getStep(){return this.magnitudefactor*this.minorSteps[this.minorStepIdx]}getFirstMajor(){const t=this.magnitudefactor*this.majorSteps[this.minorStepIdx];return this.convertValue(this._start+(t-this._start%t)%t)}formatValue(t){let e=t.toPrecision(5);return"function"==typeof this.formattingFunction&&(e=this.formattingFunction(t)),"number"==typeof e?`${e}`:"string"==typeof e?e:t.toPrecision(5)}getLines(){const t=[],e=this.getStep(),n=(e-this._start%e)%e;for(let i=this._start+n;this._end-i>1e-5;i+=e)i!=this._start&&t.push({major:this.is_major(i),y:this.convertValue(i),val:this.formatValue(i)});return t}followScale(t){const e=this.minorStepIdx,n=this._start,i=this._end,r=this,o=()=>{r.magnitudefactor*=2},a=()=>{r.magnitudefactor/=2};t.minorStepIdx<=1&&this.minorStepIdx<=1||t.minorStepIdx>1&&this.minorStepIdx>1||(t.minorStepIdx<this.minorStepIdx?(this.minorStepIdx=1,2==e||o(),o()):(this.minorStepIdx=2,1==e||a(),a()));const s=t.convertValue(0),l=t.getStep()*t.scale;let u=!1,c=0;for(;!u&&c++<5;){this.scale=l/(this.minorSteps[this.minorStepIdx]*this.magnitudefactor);const e=this.containerHeight/this.scale;this._start=n,this._end=this._start+e;const r=this._end*this.scale,c=this.magnitudefactor*this.majorSteps[this.minorStepIdx],h=this.getFirstMajor()-t.getFirstMajor();if(this.zeroAlign){const t=s-r;this._end+=t/this.scale,this._start=this._end-e}else this.autoScaleStart?(this._start-=h/this.scale,this._end=this._start+e):(this._start+=c-h/this.scale,this._end=this._start+e);if(!this.autoScaleEnd&&this._end>i+1e-5)a(),u=!1;else{if(!this.autoScaleStart&&this._start<n-1e-5){if(!(this.zeroAlign&&n>=0)){a(),u=!1;continue}console.warn("Can't adhere to given 'min' range, due to zeroalign")}this.autoScaleStart&&this.autoScaleEnd&&e<i-n?(o(),u=!1):u=!0}}}convertValue(t){return this.containerHeight-(t-this._start)*this.scale}screenToValue(t){return(this.containerHeight-t)/this.scale+this._start}}class Ur extends ii{constructor(t,e,n,i){super(),this.id=Nn(),this.body=t,this.defaultOptions={orientation:"left",showMinorLabels:!0,showMajorLabels:!0,showWeekScale:!1,icons:!1,majorLinesOffset:7,minorLinesOffset:4,labelOffsetX:10,labelOffsetY:2,iconWidth:20,width:"40px",visible:!0,alignZeros:!0,left:{range:{min:void 0,max:void 0},format:t=>`${parseFloat(t.toPrecision(3))}`,title:{text:void 0,style:void 0}},right:{range:{min:void 0,max:void 0},format:t=>`${parseFloat(t.toPrecision(3))}`,title:{text:void 0,style:void 0}}},this.linegraphOptions=i,this.linegraphSVG=n,this.props={},this.DOMelements={lines:{},labels:{},title:{}},this.dom={},this.scale=void 0,this.range={start:0,end:0},this.options=ni.extend({},this.defaultOptions),this.conversionFactor=1,this.setOptions(e),this.width=Number(`${this.options.width}`.replace("px","")),this.minWidth=this.width,this.height=this.linegraphSVG.getBoundingClientRect().height,this.hidden=!1,this.stepPixels=25,this.zeroCrossing=-1,this.amountOfSteps=-1,this.lineOffset=0,this.master=!0,this.masterAxis=null,this.svgElements={},this.iconsRemoved=!1,this.groups={},this.amountOfGroups=0,this._create(),null==this.scale&&this._redrawLabels(),this.framework={svg:this.svg,svgElements:this.svgElements,options:this.options,groups:this.groups};const r=this;this.body.emitter.on("verticalDrag",(()=>{r.dom.lineContainer.style.top=`${r.body.domProps.scrollTop}px`}))}addGroup(t,e){this.groups.hasOwnProperty(t)||(this.groups[t]=e),this.amountOfGroups+=1}updateGroup(t,e){this.groups.hasOwnProperty(t)||(this.amountOfGroups+=1),this.groups[t]=e}removeGroup(t){this.groups.hasOwnProperty(t)&&(delete this.groups[t],this.amountOfGroups-=1)}setOptions(t){if(t){let e=!1;this.options.orientation!=t.orientation&&void 0!==t.orientation&&(e=!0);const n=["orientation","showMinorLabels","showMajorLabels","icons","majorLinesOffset","minorLinesOffset","labelOffsetX","labelOffsetY","iconWidth","width","visible","left","right","alignZeros"];ni.selectiveDeepExtend(n,this.options,t),this.minWidth=Number(`${this.options.width}`.replace("px","")),!0===e&&this.dom.frame&&(this.hide(),this.show())}}_create(){this.dom.frame=document.createElement("div"),this.dom.frame.style.width=this.options.width,this.dom.frame.style.height=this.height,this.dom.lineContainer=document.createElement("div"),this.dom.lineContainer.style.width="100%",this.dom.lineContainer.style.height=this.height,this.dom.lineContainer.style.position="relative",this.dom.lineContainer.style.visibility="visible",this.dom.lineContainer.style.display="block",this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="absolute",this.svg.style.top="0px",this.svg.style.height="100%",this.svg.style.width="100%",this.svg.style.display="block",this.dom.frame.appendChild(this.svg)}_redrawGroupIcons(){let t;jr(this.svgElements);const e=this.options.iconWidth;let n=11.5;t="left"===this.options.orientation?4:this.width-e-4;const i=Object.keys(this.groups);i.sort(((t,e)=>t<e?-1:1));for(const r of i)!0!==this.groups[r].visible||void 0!==this.linegraphOptions.visibility[r]&&!0!==this.linegraphOptions.visibility[r]||(this.groups[r].getLegend(e,15,this.framework,t,n),n+=19);Fr(this.svgElements),this.iconsRemoved=!1}_cleanupIcons(){!1===this.iconsRemoved&&(jr(this.svgElements),Fr(this.svgElements),this.iconsRemoved=!0)}show(){this.hidden=!1,this.dom.frame.parentNode||("left"===this.options.orientation?this.body.dom.left.appendChild(this.dom.frame):this.body.dom.right.appendChild(this.dom.frame)),this.dom.lineContainer.parentNode||this.body.dom.backgroundHorizontal.appendChild(this.dom.lineContainer),this.dom.lineContainer.style.display="block"}hide(){this.hidden=!0,this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame),this.dom.lineContainer.style.display="none"}setRange(t,e){this.range.start=t,this.range.end=e}redraw(){let t=!1,e=0;this.dom.lineContainer.style.top=`${this.body.domProps.scrollTop}px`;for(const t in this.groups)this.groups.hasOwnProperty(t)&&(!0!==this.groups[t].visible||void 0!==this.linegraphOptions.visibility[t]&&!0!==this.linegraphOptions.visibility[t]||e++);if(0===this.amountOfGroups||0===e)this.hide();else{this.show(),this.height=Number(this.linegraphSVG.style.height.replace("px","")),this.dom.lineContainer.style.height=`${this.height}px`,this.width=!0===this.options.visible?Number(`${this.options.width}`.replace("px","")):0;const e=this.props,n=this.dom.frame;n.className="vis-data-axis",this._calculateCharSize();const i=this.options.orientation,r=this.options.showMinorLabels,o=this.options.showMajorLabels,a=this.body.dom.backgroundHorizontal.offsetWidth;e.minorLabelHeight=r?e.minorCharHeight:0,e.majorLabelHeight=o?e.majorCharHeight:0,e.minorLineWidth=a-this.lineOffset-this.width+2*this.options.minorLinesOffset,e.minorLineHeight=1,e.majorLineWidth=a-this.lineOffset-this.width+2*this.options.majorLinesOffset,e.majorLineHeight=1,"left"===i?(n.style.top="0",n.style.left="0",n.style.bottom="",n.style.width=`${this.width}px`,n.style.height=`${this.height}px`,this.props.width=this.body.domProps.left.width,this.props.height=this.body.domProps.left.height):(n.style.top="",n.style.bottom="0",n.style.left="0",n.style.width=`${this.width}px`,n.style.height=`${this.height}px`,this.props.width=this.body.domProps.right.width,this.props.height=this.body.domProps.right.height),t=this._redrawLabels(),t=this._isResized()||t,!0===this.options.icons?this._redrawGroupIcons():this._cleanupIcons(),this._redrawTitle(i)}return t}_redrawLabels(){let t=!1;jr(this.DOMelements.lines),jr(this.DOMelements.labels);const e=this.options.orientation,n=null!=this.options[e].range?this.options[e].range:{};let i=!0;null!=n.max&&(this.range.end=n.max,i=!1);let r=!0;null!=n.min&&(this.range.start=n.min,r=!1),this.scale=new Wr(this.range.start,this.range.end,r,i,this.dom.frame.offsetHeight,this.props.majorCharHeight,this.options.alignZeros,this.options[e].format),!1===this.master&&null!=this.masterAxis?(this.scale.followScale(this.masterAxis.scale),this.dom.lineContainer.style.display="none"):this.dom.lineContainer.style.display="block",this.maxLabelSize=0;this.scale.getLines().forEach((t=>{const n=t.y,i=t.major;this.options.showMinorLabels&&!1===i&&this._redrawLabel(n-2,t.val,e,"vis-y-axis vis-minor",this.props.minorCharHeight),i&&n>=0&&this._redrawLabel(n-2,t.val,e,"vis-y-axis vis-major",this.props.majorCharHeight),!0===this.master&&(i?this._redrawLine(n,e,"vis-grid vis-horizontal vis-major",this.options.majorLinesOffset,this.props.majorLineWidth):this._redrawLine(n,e,"vis-grid vis-horizontal vis-minor",this.options.minorLinesOffset,this.props.minorLineWidth))}));let o=0;void 0!==this.options[e].title&&void 0!==this.options[e].title.text&&(o=this.props.titleCharHeight);const a=!0===this.options.icons?Math.max(this.options.iconWidth,o)+this.options.labelOffsetX+15:o+this.options.labelOffsetX+15;return this.maxLabelSize>this.width-a&&!0===this.options.visible?(this.width=this.maxLabelSize+a,this.options.width=`${this.width}px`,Fr(this.DOMelements.lines),Fr(this.DOMelements.labels),this.redraw(),t=!0):this.maxLabelSize<this.width-a&&!0===this.options.visible&&this.width>this.minWidth?(this.width=Math.max(this.minWidth,this.maxLabelSize+a),this.options.width=`${this.width}px`,Fr(this.DOMelements.lines),Fr(this.DOMelements.labels),this.redraw(),t=!0):(Fr(this.DOMelements.lines),Fr(this.DOMelements.labels),t=!1),t}convertValue(t){return this.scale.convertValue(t)}screenToValue(t){return this.scale.screenToValue(t)}_redrawLabel(t,e,n,i,r){const o=zr("div",this.DOMelements.labels,this.dom.frame);o.className=i,o.innerHTML=ni.xss(e),"left"===n?(o.style.left=`-${this.options.labelOffsetX}px`,o.style.textAlign="right"):(o.style.right=`-${this.options.labelOffsetX}px`,o.style.textAlign="left"),o.style.top=`${t-.5*r+this.options.labelOffsetY}px`,e+="";const a=Math.max(this.props.majorCharWidth,this.props.minorCharWidth);this.maxLabelSize<e.length*a&&(this.maxLabelSize=e.length*a)}_redrawLine(t,e,n,i,r){if(!0===this.master){const o=zr("div",this.DOMelements.lines,this.dom.lineContainer);o.className=n,o.innerHTML="","left"===e?o.style.left=this.width-i+"px":o.style.right=this.width-i+"px",o.style.width=`${r}px`,o.style.top=`${t}px`}}_redrawTitle(t){if(jr(this.DOMelements.title),void 0!==this.options[t].title&&void 0!==this.options[t].title.text){const e=zr("div",this.DOMelements.title,this.dom.frame);e.className=`vis-y-axis vis-title vis-${t}`,e.innerHTML=ni.xss(this.options[t].title.text),void 0!==this.options[t].title.style&&ni.addCssText(e,this.options[t].title.style),"left"===t?e.style.left=`${this.props.titleCharHeight}px`:e.style.right=`${this.props.titleCharHeight}px`,e.style.width=`${this.height}px`}Fr(this.DOMelements.title)}_calculateCharSize(){if(!("minorCharHeight"in this.props)){const t=document.createTextNode("0"),e=document.createElement("div");e.className="vis-y-axis vis-minor vis-measure",e.appendChild(t),this.dom.frame.appendChild(e),this.props.minorCharHeight=e.clientHeight,this.props.minorCharWidth=e.clientWidth,this.dom.frame.removeChild(e)}if(!("majorCharHeight"in this.props)){const t=document.createTextNode("0"),e=document.createElement("div");e.className="vis-y-axis vis-major vis-measure",e.appendChild(t),this.dom.frame.appendChild(e),this.props.majorCharHeight=e.clientHeight,this.props.majorCharWidth=e.clientWidth,this.dom.frame.removeChild(e)}if(!("titleCharHeight"in this.props)){const t=document.createTextNode("0"),e=document.createElement("div");e.className="vis-y-axis vis-title vis-measure",e.appendChild(t),this.dom.frame.appendChild(e),this.props.titleCharHeight=e.clientHeight,this.props.titleCharWidth=e.clientWidth,this.dom.frame.removeChild(e)}}}function Vr(t,e){}function Xr(t,e){return{style:(e=void 0===e?{}:e).style||t.options.drawPoints.style,styles:e.styles||t.options.drawPoints.styles,size:e.size||t.options.drawPoints.size,className:e.className||t.className}}function qr(t,e){}function Kr(t,e){}function $r(t,e,n,i){this.id=e;this.options=ni.selectiveBridgeObject(["sampling","style","sort","yAxisOrientation","barChart","drawPoints","shaded","interpolation","zIndex","excludeFromStacking","excludeFromLegend"],n),this.usingDefaultStyle=void 0===t.className,this.groupsUsingDefaultStyles=i,this.zeroPosition=0,this.update(t),1==this.usingDefaultStyle&&(this.groupsUsingDefaultStyles[0]+=1),this.itemsData=[],this.visible=void 0===t.visible||t.visible}function Zr(t,e,n,i){this.body=t,this.defaultOptions={enabled:!1,icons:!0,iconSize:20,iconSpacing:6,left:{visible:!0,position:"top-left"},right:{visible:!0,position:"top-right"}},this.side=n,this.options=ni.extend({},this.defaultOptions),this.linegraphOptions=i,this.svgElements={},this.dom={},this.groups={},this.amountOfGroups=0,this._create(),this.framework={svg:this.svg,svgElements:this.svgElements,options:this.options,groups:this.groups},this.setOptions(e)}Vr.draw=function(t,e,n,i){i=i||0;for(var r=function(t,e){var n=void 0;t.options&&t.options.drawPoints&&t.options.drawPoints.onRender&&"function"==typeof t.options.drawPoints.onRender&&(n=t.options.drawPoints.onRender);e.group.options&&e.group.options.drawPoints&&e.group.options.drawPoints.onRender&&"function"==typeof e.group.options.drawPoints.onRender&&(n=e.group.options.drawPoints.onRender);return n}(n,e),o=0;o<t.length;o++)if(r){var a=r(t[o],e);!0!==a&&"object"!=typeof a||Hr(t[o].screen_x+i,t[o].screen_y,Xr(e,a),n.svgElements,n.svg,t[o].label)}else Hr(t[o].screen_x+i,t[o].screen_y,Xr(e),n.svgElements,n.svg,t[o].label)},Vr.drawIcon=function(t,e,n,i,r,o){var a=.5*r,s=Br("rect",o.svgElements,o.svg);s.setAttributeNS(null,"x",e),s.setAttributeNS(null,"y",n-a),s.setAttributeNS(null,"width",i),s.setAttributeNS(null,"height",2*a),s.setAttributeNS(null,"class","vis-outline"),Hr(e+.5*i,n,Xr(t),o.svgElements,o.svg)},qr.drawIcon=function(t,e,n,i,r,o){var a=.5*r,s=Br("rect",o.svgElements,o.svg);s.setAttributeNS(null,"x",e),s.setAttributeNS(null,"y",n-a),s.setAttributeNS(null,"width",i),s.setAttributeNS(null,"height",2*a),s.setAttributeNS(null,"class","vis-outline");var l=Math.round(.3*i),u=t.options.barChart.width/l,c=Math.round(.4*r),h=Math.round(.75*r),d=Math.round((i-2*l)/3);if(Gr(e+.5*l+d,n+a-c-1,l,c,t.className+" vis-bar",o.svgElements,o.svg,t.style),Gr(e+1.5*l+d+2,n+a-h-1,l,h,t.className+" vis-bar",o.svgElements,o.svg,t.style),1==t.options.drawPoints.enabled){var f={style:t.options.drawPoints.style,styles:t.options.drawPoints.styles,size:t.options.drawPoints.size/u,className:t.className};Hr(e+.5*l+d,n+a-c-1,f,o.svgElements,o.svg),Hr(e+1.5*l+d+2,n+a-h-1,f,o.svgElements,o.svg)}},qr.draw=function(t,e,n){var i,r,o,a,s,l,u=[],c={},h=0;for(s=0;s<t.length;s++)if("bar"===(a=n.groups[t[s]]).options.style&&!0===a.visible&&(void 0===n.options.groups.visibility[t[s]]||!0===n.options.groups.visibility[t[s]]))for(l=0;l<e[t[s]].length;l++)u.push({screen_x:e[t[s]][l].screen_x,screen_end:e[t[s]][l].screen_end,screen_y:e[t[s]][l].screen_y,x:e[t[s]][l].x,end:e[t[s]][l].end,y:e[t[s]][l].y,groupId:t[s],label:e[t[s]][l].label}),h+=1;if(0!==h)for(u.sort((function(t,e){return t.screen_x===e.screen_x?t.groupId<e.groupId?-1:1:t.screen_x-e.screen_x})),qr._getDataIntersections(c,u),s=0;s<u.length;s++){var d=null!=(a=n.groups[u[s].groupId]).options.barChart.minWidth?a.options.barChart.minWidth:.1*a.options.barChart.width,f=0;if(void 0===c[r=u[s].screen_x])s+1<u.length&&(i=Math.abs(u[s+1].screen_x-r)),o=qr._getSafeDrawData(i,a,d);else{var p=s+(c[r].amount-c[r].resolved);p<u.length&&(i=Math.abs(u[p].screen_x-r)),o=qr._getSafeDrawData(i,a,d),c[r].resolved+=1,!0===a.options.stack&&!0!==a.options.excludeFromStacking?u[s].screen_y<a.zeroPosition?(f=c[r].accumulatedNegative,c[r].accumulatedNegative+=a.zeroPosition-u[s].screen_y):(f=c[r].accumulatedPositive,c[r].accumulatedPositive+=a.zeroPosition-u[s].screen_y):!0===a.options.barChart.sideBySide&&(o.width=o.width/c[r].amount,o.offset+=c[r].resolved*o.width-.5*o.width*(c[r].amount+1))}let t=o.width,e=u[s].screen_x;if(null!=u[s].screen_end?(t=u[s].screen_end-u[s].screen_x,e+=.5*t):e+=o.offset,Gr(e,u[s].screen_y-f,t,a.zeroPosition-u[s].screen_y,a.className+" vis-bar",n.svgElements,n.svg,a.style),!0===a.options.drawPoints.enabled){let t={screen_x:u[s].screen_x,screen_y:u[s].screen_y-f,x:u[s].x,y:u[s].y,groupId:u[s].groupId,label:u[s].label};Vr.draw([t],a,n,o.offset)}}},qr._getDataIntersections=function(t,e){for(var n,i=0;i<e.length;i++)i+1<e.length&&(n=Math.abs(e[i+1].screen_x-e[i].screen_x)),i>0&&(n=Math.min(n,Math.abs(e[i-1].screen_x-e[i].screen_x))),0===n&&(void 0===t[e[i].screen_x]&&(t[e[i].screen_x]={amount:0,resolved:0,accumulatedPositive:0,accumulatedNegative:0}),t[e[i].screen_x].amount+=1)},qr._getSafeDrawData=function(t,e,n){var i,r;return t<e.options.barChart.width&&t>0?(i=t<n?n:t,r=0,"left"===e.options.barChart.align?r-=.5*t:"right"===e.options.barChart.align&&(r+=.5*t)):(i=e.options.barChart.width,r=0,"left"===e.options.barChart.align?r-=.5*e.options.barChart.width:"right"===e.options.barChart.align&&(r+=.5*e.options.barChart.width)),{width:i,offset:r}},qr.getStackedYRange=function(t,e,n,i,r){if(t.length>0){t.sort((function(t,e){return t.screen_x===e.screen_x?t.groupId<e.groupId?-1:1:t.screen_x-e.screen_x}));var o={};qr._getDataIntersections(o,t),e[i]=qr._getStackedYRange(o,t),e[i].yAxisOrientation=r,n.push(i)}},qr._getStackedYRange=function(t,e){for(var n,i=e[0].screen_y,r=e[0].screen_y,o=0;o<e.length;o++)void 0===t[n=e[o].screen_x]?(i=i>e[o].screen_y?e[o].screen_y:i,r=r<e[o].screen_y?e[o].screen_y:r):e[o].screen_y<0?t[n].accumulatedNegative+=e[o].screen_y:t[n].accumulatedPositive+=e[o].screen_y;for(var a in t)t.hasOwnProperty(a)&&(i=(i=i>t[a].accumulatedNegative?t[a].accumulatedNegative:i)>t[a].accumulatedPositive?t[a].accumulatedPositive:i,r=(r=r<t[a].accumulatedNegative?t[a].accumulatedNegative:r)<t[a].accumulatedPositive?t[a].accumulatedPositive:r);return{min:i,max:r}},Kr.calcPath=function(t,e){if(null!=t&&t.length>0){return 1==e.options.interpolation.enabled?Kr._catmullRom(t,e):Kr._linear(t)}},Kr.drawIcon=function(t,e,n,i,r,o){var a,s,l=.5*r,u=Br("rect",o.svgElements,o.svg);(u.setAttributeNS(null,"x",e),u.setAttributeNS(null,"y",n-l),u.setAttributeNS(null,"width",i),u.setAttributeNS(null,"height",2*l),u.setAttributeNS(null,"class","vis-outline"),(a=Br("path",o.svgElements,o.svg)).setAttributeNS(null,"class",t.className),void 0!==t.style&&a.setAttributeNS(null,"style",t.style),a.setAttributeNS(null,"d","M"+e+","+n+" L"+(e+i)+","+n),1==t.options.shaded.enabled&&(s=Br("path",o.svgElements,o.svg),"top"==t.options.shaded.orientation?s.setAttributeNS(null,"d","M"+e+", "+(n-l)+"L"+e+","+n+" L"+(e+i)+","+n+" L"+(e+i)+","+(n-l)):s.setAttributeNS(null,"d","M"+e+","+n+" L"+e+","+(n+l)+" L"+(e+i)+","+(n+l)+"L"+(e+i)+","+n),s.setAttributeNS(null,"class",t.className+" vis-icon-fill"),void 0!==t.options.shaded.style&&""!==t.options.shaded.style&&s.setAttributeNS(null,"style",t.options.shaded.style)),1==t.options.drawPoints.enabled)&&Hr(e+.5*i,n,{style:t.options.drawPoints.style,styles:t.options.drawPoints.styles,size:t.options.drawPoints.size,className:t.className},o.svgElements,o.svg)},Kr.drawShading=function(t,e,n,i){if(1==e.options.shaded.enabled){var r,o=Number(i.svg.style.height.replace("px","")),a=Br("path",i.svgElements,i.svg),s="L";1==e.options.interpolation.enabled&&(s="C");var l=0;l="top"==e.options.shaded.orientation?0:"bottom"==e.options.shaded.orientation?o:Math.min(Math.max(0,e.zeroPosition),o),r="group"==e.options.shaded.orientation&&null!=n&&null!=n?"M"+t[0][0]+","+t[0][1]+" "+this.serializePath(t,s,!1)+" L"+n[n.length-1][0]+","+n[n.length-1][1]+" "+this.serializePath(n,s,!0)+n[0][0]+","+n[0][1]+" Z":"M"+t[0][0]+","+t[0][1]+" "+this.serializePath(t,s,!1)+" V"+l+" H"+t[0][0]+" Z",a.setAttributeNS(null,"class",e.className+" vis-fill"),void 0!==e.options.shaded.style&&a.setAttributeNS(null,"style",e.options.shaded.style),a.setAttributeNS(null,"d",r)}},Kr.draw=function(t,e,n){if(null!=t&&null!=t){var i=Br("path",n.svgElements,n.svg);i.setAttributeNS(null,"class",e.className),void 0!==e.style&&i.setAttributeNS(null,"style",e.style);var r="L";1==e.options.interpolation.enabled&&(r="C"),i.setAttributeNS(null,"d","M"+t[0][0]+","+t[0][1]+" "+this.serializePath(t,r,!1))}},Kr.serializePath=function(t,e,n){if(t.length<2)return"";var i,r=e;if(n)for(i=t.length-2;i>0;i--)r+=t[i][0]+","+t[i][1]+" ";else for(i=1;i<t.length;i++)r+=t[i][0]+","+t[i][1]+" ";return r},Kr._catmullRomUniform=function(t){var e,n,i,r,o,a,s=[];s.push([Math.round(t[0].screen_x),Math.round(t[0].screen_y)]);for(var l=1/6,u=t.length,c=0;c<u-1;c++)e=0==c?t[0]:t[c-1],n=t[c],i=t[c+1],r=c+2<u?t[c+2]:i,o={screen_x:(-e.screen_x+6*n.screen_x+i.screen_x)*l,screen_y:(-e.screen_y+6*n.screen_y+i.screen_y)*l},a={screen_x:(n.screen_x+6*i.screen_x-r.screen_x)*l,screen_y:(n.screen_y+6*i.screen_y-r.screen_y)*l},s.push([o.screen_x,o.screen_y]),s.push([a.screen_x,a.screen_y]),s.push([i.screen_x,i.screen_y]);return s},Kr._catmullRom=function(t,e){var n=e.options.interpolation.alpha;if(0==n||void 0===n)return this._catmullRomUniform(t);var i,r,o,a,s,l,u,c,h,d,f,p,m,g,v,y,b,_,w,x=[];x.push([Math.round(t[0].screen_x),Math.round(t[0].screen_y)]);for(var M=t.length,E=0;E<M-1;E++)i=0==E?t[0]:t[E-1],r=t[E],o=t[E+1],a=E+2<M?t[E+2]:o,u=Math.sqrt(Math.pow(i.screen_x-r.screen_x,2)+Math.pow(i.screen_y-r.screen_y,2)),c=Math.sqrt(Math.pow(r.screen_x-o.screen_x,2)+Math.pow(r.screen_y-o.screen_y,2)),h=Math.sqrt(Math.pow(o.screen_x-a.screen_x,2)+Math.pow(o.screen_y-a.screen_y,2)),g=Math.pow(h,n),y=Math.pow(h,2*n),v=Math.pow(c,n),b=Math.pow(c,2*n),w=Math.pow(u,n),d=2*(_=Math.pow(u,2*n))+3*w*v+b,f=2*y+3*g*v+b,(p=3*w*(w+v))>0&&(p=1/p),(m=3*g*(g+v))>0&&(m=1/m),s={screen_x:(-b*i.screen_x+d*r.screen_x+_*o.screen_x)*p,screen_y:(-b*i.screen_y+d*r.screen_y+_*o.screen_y)*p},l={screen_x:(y*r.screen_x+f*o.screen_x-b*a.screen_x)*m,screen_y:(y*r.screen_y+f*o.screen_y-b*a.screen_y)*m},0==s.screen_x&&0==s.screen_y&&(s=r),0==l.screen_x&&0==l.screen_y&&(l=o),x.push([s.screen_x,s.screen_y]),x.push([l.screen_x,l.screen_y]),x.push([o.screen_x,o.screen_y]);return x},Kr._linear=function(t){for(var e=[],n=0;n<t.length;n++)e.push([t[n].screen_x,t[n].screen_y]);return e},$r.prototype.setItems=function(t){null!=t?(this.itemsData=t,1==this.options.sort&&ni.insertSort(this.itemsData,(function(t,e){return t.x>e.x?1:-1}))):this.itemsData=[]},$r.prototype.getItems=function(){return this.itemsData},$r.prototype.setZeroPosition=function(t){this.zeroPosition=t},$r.prototype.setOptions=function(t){if(void 0!==t){ni.selectiveDeepExtend(["sampling","style","sort","yAxisOrientation","barChart","zIndex","excludeFromStacking","excludeFromLegend"],this.options,t),"function"==typeof t.drawPoints&&(t.drawPoints={onRender:t.drawPoints}),ni.mergeOptions(this.options,t,"interpolation"),ni.mergeOptions(this.options,t,"drawPoints"),ni.mergeOptions(this.options,t,"shaded"),t.interpolation&&"object"==typeof t.interpolation&&t.interpolation.parametrization&&("uniform"==t.interpolation.parametrization?this.options.interpolation.alpha=0:"chordal"==t.interpolation.parametrization?this.options.interpolation.alpha=1:(this.options.interpolation.parametrization="centripetal",this.options.interpolation.alpha=.5))}},$r.prototype.update=function(t){this.group=t,this.content=t.content||"graph",this.className=t.className||this.className||"vis-graph-group"+this.groupsUsingDefaultStyles[0]%10,this.visible=void 0===t.visible||t.visible,this.style=t.style,this.setOptions(t.options)},$r.prototype.getLegend=function(t,e,n,i,r){null!=n&&null!=n||(n={svg:document.createElementNS("http://www.w3.org/2000/svg","svg"),svgElements:{},options:this.options,groups:[this]});switch(null!=i&&null!=i||(i=0),null!=r&&null!=r||(r=.5*e),this.options.style){case"line":Kr.drawIcon(this,i,r,t,e,n);break;case"points":case"point":Vr.drawIcon(this,i,r,t,e,n);break;case"bar":qr.drawIcon(this,i,r,t,e,n)}return{icon:n.svg,label:this.content,orientation:this.options.yAxisOrientation}},$r.prototype.getYRange=function(t){for(var e=t[0].y,n=t[0].y,i=0;i<t.length;i++)e=e>t[i].y?t[i].y:e,n=n<t[i].y?t[i].y:n;return{min:e,max:n,yAxisOrientation:this.options.yAxisOrientation}},Zr.prototype=new ii,Zr.prototype.clear=function(){this.groups={},this.amountOfGroups=0},Zr.prototype.addGroup=function(t,e){1!=e.options.excludeFromLegend&&(this.groups.hasOwnProperty(t)||(this.groups[t]=e),this.amountOfGroups+=1)},Zr.prototype.updateGroup=function(t,e){this.groups[t]=e},Zr.prototype.removeGroup=function(t){this.groups.hasOwnProperty(t)&&(delete this.groups[t],this.amountOfGroups-=1)},Zr.prototype._create=function(){this.dom.frame=document.createElement("div"),this.dom.frame.className="vis-legend",this.dom.frame.style.position="absolute",this.dom.frame.style.top="10px",this.dom.frame.style.display="block",this.dom.textArea=document.createElement("div"),this.dom.textArea.className="vis-legend-text",this.dom.textArea.style.position="relative",this.dom.textArea.style.top="0px",this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="absolute",this.svg.style.top="0px",this.svg.style.width=this.options.iconSize+5+"px",this.svg.style.height="100%",this.dom.frame.appendChild(this.svg),this.dom.frame.appendChild(this.dom.textArea)},Zr.prototype.hide=function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame)},Zr.prototype.show=function(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame)},Zr.prototype.setOptions=function(t){ni.selectiveDeepExtend(["enabled","orientation","icons","left","right"],this.options,t)},Zr.prototype.redraw=function(){var t=0,e=Object.keys(this.groups);e.sort((function(t,e){return t<e?-1:1}));for(var n=0;n<e.length;n++){var i=e[n];1!=this.groups[i].visible||void 0!==this.linegraphOptions.visibility[i]&&1!=this.linegraphOptions.visibility[i]||t++}if(0==this.options[this.side].visible||0==this.amountOfGroups||0==this.options.enabled||0==t)this.hide();else{if(this.show(),"top-left"==this.options[this.side].position||"bottom-left"==this.options[this.side].position?(this.dom.frame.style.left="4px",this.dom.frame.style.textAlign="left",this.dom.textArea.style.textAlign="left",this.dom.textArea.style.left=this.options.iconSize+15+"px",this.dom.textArea.style.right="",this.svg.style.left="0px",this.svg.style.right=""):(this.dom.frame.style.right="4px",this.dom.frame.style.textAlign="right",this.dom.textArea.style.textAlign="right",this.dom.textArea.style.right=this.options.iconSize+15+"px",this.dom.textArea.style.left="",this.svg.style.right="0px",this.svg.style.left=""),"top-left"==this.options[this.side].position||"top-right"==this.options[this.side].position)this.dom.frame.style.top=4-Number(this.body.dom.center.style.top.replace("px",""))+"px",this.dom.frame.style.bottom="";else{var r=this.body.domProps.center.height-this.body.domProps.centerContainer.height;this.dom.frame.style.bottom=4+r+Number(this.body.dom.center.style.top.replace("px",""))+"px",this.dom.frame.style.top=""}0==this.options.icons?(this.dom.frame.style.width=this.dom.textArea.offsetWidth+10+"px",this.dom.textArea.style.right="",this.dom.textArea.style.left="",this.svg.style.width="0px"):(this.dom.frame.style.width=this.options.iconSize+15+this.dom.textArea.offsetWidth+10+"px",this.drawLegendIcons());var o="";for(n=0;n<e.length;n++)i=e[n],1!=this.groups[i].visible||void 0!==this.linegraphOptions.visibility[i]&&1!=this.linegraphOptions.visibility[i]||(o+=this.groups[i].content+"<br />");this.dom.textArea.innerHTML=ni.xss(o),this.dom.textArea.style.lineHeight=.75*this.options.iconSize+this.options.iconSpacing+"px"}},Zr.prototype.drawLegendIcons=function(){if(this.dom.frame.parentNode){var t=Object.keys(this.groups);t.sort((function(t,e){return t<e?-1:1})),jr(u=this.svgElements),Fr(u),jr(u);var e=window.getComputedStyle(this.dom.frame).paddingTop,n=Number(e.replace("px","")),i=n,r=this.options.iconSize,o=.75*this.options.iconSize,a=n+.5*o+3;this.svg.style.width=r+5+n+"px";for(var s=0;s<t.length;s++){var l=t[s];1!=this.groups[l].visible||void 0!==this.linegraphOptions.visibility[l]&&1!=this.linegraphOptions.visibility[l]||(this.groups[l].getLegend(r,o,this.framework,i,a),a+=o+this.options.iconSpacing)}}var u};var Jr="__ungrouped__";function Qr(t,e){this.id=Nn(),this.body=t,this.defaultOptions={yAxisOrientation:"left",defaultGroup:"default",sort:!0,sampling:!0,stack:!1,graphHeight:"400px",shaded:{enabled:!1,orientation:"bottom"},style:"line",barChart:{width:50,sideBySide:!1,align:"center"},interpolation:{enabled:!0,parametrization:"centripetal",alpha:.5},drawPoints:{enabled:!0,size:6,style:"square"},dataAxis:{},legend:{},groups:{visibility:{}}},this.options=ni.extend({},this.defaultOptions),this.dom={},this.props={},this.hammer=null,this.groups={},this.abortedGraphUpdate=!1,this.updateSVGheight=!1,this.updateSVGheightOnResize=!1,this.forceGraphUpdate=!0;var n=this;this.itemsData=null,this.groupsData=null,this.itemListeners={add:function(t,e,i){n._onAdd(e.items)},update:function(t,e,i){n._onUpdate(e.items)},remove:function(t,e,i){n._onRemove(e.items)}},this.groupListeners={add:function(t,e,i){n._onAddGroups(e.items)},update:function(t,e,i){n._onUpdateGroups(e.items)},remove:function(t,e,i){n._onRemoveGroups(e.items)}},this.items={},this.selection=[],this.lastStart=this.body.range.start,this.touchParams={},this.svgElements={},this.setOptions(e),this.groupsUsingDefaultStyles=[0],this.body.emitter.on("rangechanged",(function(){n.svg.style.left=ni.option.asSize(-n.props.width),n.forceGraphUpdate=!0,n.redraw.call(n)})),this._create(),this.framework={svg:this.svg,svgElements:this.svgElements,options:this.options,groups:this.groups}}Qr.prototype=new ii,Qr.prototype._create=function(){var t=document.createElement("div");t.className="vis-line-graph",this.dom.frame=t,this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="relative",this.svg.style.height=(""+this.options.graphHeight).replace("px","")+"px",this.svg.style.display="block",t.appendChild(this.svg),this.options.dataAxis.orientation="left",this.yAxisLeft=new Ur(this.body,this.options.dataAxis,this.svg,this.options.groups),this.options.dataAxis.orientation="right",this.yAxisRight=new Ur(this.body,this.options.dataAxis,this.svg,this.options.groups),delete this.options.dataAxis.orientation,this.legendLeft=new Zr(this.body,this.options.legend,"left",this.options.groups),this.legendRight=new Zr(this.body,this.options.legend,"right",this.options.groups),this.show()},Qr.prototype.setOptions=function(t){if(t){void 0===t.graphHeight&&void 0!==t.height?(this.updateSVGheight=!0,this.updateSVGheightOnResize=!0):void 0!==this.body.domProps.centerContainer.height&&void 0!==t.graphHeight&&parseInt((t.graphHeight+"").replace("px",""))<this.body.domProps.centerContainer.height&&(this.updateSVGheight=!0),ni.selectiveDeepExtend(["sampling","defaultGroup","stack","height","graphHeight","yAxisOrientation","style","barChart","dataAxis","sort","groups"],this.options,t),ni.mergeOptions(this.options,t,"interpolation"),ni.mergeOptions(this.options,t,"drawPoints"),ni.mergeOptions(this.options,t,"shaded"),ni.mergeOptions(this.options,t,"legend"),t.interpolation&&"object"==typeof t.interpolation&&t.interpolation.parametrization&&("uniform"==t.interpolation.parametrization?this.options.interpolation.alpha=0:"chordal"==t.interpolation.parametrization?this.options.interpolation.alpha=1:(this.options.interpolation.parametrization="centripetal",this.options.interpolation.alpha=.5)),this.yAxisLeft&&void 0!==t.dataAxis&&(this.yAxisLeft.setOptions(this.options.dataAxis),this.yAxisRight.setOptions(this.options.dataAxis)),this.legendLeft&&void 0!==t.legend&&(this.legendLeft.setOptions(this.options.legend),this.legendRight.setOptions(this.options.legend)),this.groups.hasOwnProperty(Jr)&&this.groups[Jr].setOptions(t)}this.dom.frame&&(this.forceGraphUpdate=!0,this.body.emitter.emit("_change",{queue:!0}))},Qr.prototype.hide=function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame)},Qr.prototype.show=function(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame)},Qr.prototype.setItems=function(t){var e,n=this,i=this.itemsData;if(t){if(!Wn("id",t))throw new TypeError("Data must implement the interface of DataSet or DataView");this.itemsData=Jn(t)}else this.itemsData=null;if(i&&(ni.forEach(this.itemListeners,(function(t,e){i.off(e,t)})),i.dispose(),e=i.getIds(),this._onRemove(e)),this.itemsData){var r=this.id;ni.forEach(this.itemListeners,(function(t,e){n.itemsData.on(e,t,r)})),e=this.itemsData.getIds(),this._onAdd(e)}},Qr.prototype.setGroups=function(t){var e,n=this;if(this.groupsData){ni.forEach(this.groupListeners,(function(t,e){n.groupsData.off(e,t)})),e=this.groupsData.getIds(),this.groupsData=null;for(var i=0;i<e.length;i++)this._removeGroup(e[i])}if(t){if(!Wn("id",t))throw new TypeError("Data must implement the interface of DataSet or DataView");this.groupsData=t}else this.groupsData=null;if(this.groupsData){var r=this.id;ni.forEach(this.groupListeners,(function(t,e){n.groupsData.on(e,t,r)})),e=this.groupsData.getIds(),this._onAddGroups(e)}},Qr.prototype._onUpdate=function(t){this._updateAllGroupData(t)},Qr.prototype._onAdd=function(t){this._onUpdate(t)},Qr.prototype._onRemove=function(t){this._onUpdate(t)},Qr.prototype._onUpdateGroups=function(t){this._updateAllGroupData(null,t)},Qr.prototype._onAddGroups=function(t){this._onUpdateGroups(t)},Qr.prototype._onRemoveGroups=function(t){for(var e=0;e<t.length;e++)this._removeGroup(t[e]);this.forceGraphUpdate=!0,this.body.emitter.emit("_change",{queue:!0})},Qr.prototype._removeGroup=function(t){this.groups.hasOwnProperty(t)&&("right"==this.groups[t].options.yAxisOrientation?(this.yAxisRight.removeGroup(t),this.legendRight.removeGroup(t),this.legendRight.redraw()):(this.yAxisLeft.removeGroup(t),this.legendLeft.removeGroup(t),this.legendLeft.redraw()),delete this.groups[t])},Qr.prototype._updateGroup=function(t,e){this.groups.hasOwnProperty(e)?(this.groups[e].update(t),"right"==this.groups[e].options.yAxisOrientation?(this.yAxisRight.updateGroup(e,this.groups[e]),this.legendRight.updateGroup(e,this.groups[e]),this.yAxisLeft.removeGroup(e),this.legendLeft.removeGroup(e)):(this.yAxisLeft.updateGroup(e,this.groups[e]),this.legendLeft.updateGroup(e,this.groups[e]),this.yAxisRight.removeGroup(e),this.legendRight.removeGroup(e))):(this.groups[e]=new $r(t,e,this.options,this.groupsUsingDefaultStyles),"right"==this.groups[e].options.yAxisOrientation?(this.yAxisRight.addGroup(e,this.groups[e]),this.legendRight.addGroup(e,this.groups[e])):(this.yAxisLeft.addGroup(e,this.groups[e]),this.legendLeft.addGroup(e,this.groups[e]))),this.legendLeft.redraw(),this.legendRight.redraw()},Qr.prototype._updateAllGroupData=function(t,e){if(null!=this.itemsData){var n={},i=this.itemsData.get(),r=this.itemsData.idProp,o={};t&&t.map((function(t){o[t]=t}));for(var a={},s=0;s<i.length;s++){var l=i[s],u=l.group;null==u&&(u=Jr),a.hasOwnProperty(u)?a[u]++:a[u]=1}var c={};if(!e&&t)for(u in this.groups)if(this.groups.hasOwnProperty(u)){var h=(m=this.groups[u]).getItems();n[u]=h.filter((function(t){return c[t[r]]=t[r],t[r]!==o[t[r]]}));var d=a[u];a[u]-=n[u].length,n[u].length<d&&(n[u][d-1]={})}for(s=0;s<i.length;s++)if(null==(u=(l=i[s]).group)&&(u=Jr),e||!t||l[r]===o[l[r]]||!c.hasOwnProperty(l[r])){n.hasOwnProperty(u)||(n[u]=new Array(a[u]));var f=ni.bridgeObject(l);f.x=ni.convert(l.x,"Date"),f.end=ni.convert(l.end,"Date"),f.orginalY=l.y,f.y=Number(l.y),f[r]=l[r];var p=n[u].length-a[u]--;n[u][p]=f}for(u in this.groups)this.groups.hasOwnProperty(u)&&(n.hasOwnProperty(u)||(n[u]=new Array(0)));for(u in n)if(n.hasOwnProperty(u))if(0==n[u].length)this.groups.hasOwnProperty(u)&&this._removeGroup(u);else{var m=void 0;null!=this.groupsData&&(m=this.groupsData.get(u)),null==m&&(m={id:u,content:this.options.defaultGroup+u}),this._updateGroup(m,u),this.groups[u].setItems(n[u])}this.forceGraphUpdate=!0,this.body.emitter.emit("_change",{queue:!0})}},Qr.prototype.redraw=function(){var t=!1;this.props.width=this.dom.frame.offsetWidth,this.props.height=this.body.domProps.centerContainer.height-this.body.domProps.border.top-this.body.domProps.border.bottom,t=this._isResized()||t;var e=this.body.range.end-this.body.range.start,n=e!=this.lastVisibleInterval;if(this.lastVisibleInterval=e,1==t&&(this.svg.style.width=ni.option.asSize(3*this.props.width),this.svg.style.left=ni.option.asSize(-this.props.width),-1==(this.options.height+"").indexOf("%")&&1!=this.updateSVGheightOnResize||(this.updateSVGheight=!0)),1==this.updateSVGheight?(this.options.graphHeight!=this.props.height+"px"&&(this.options.graphHeight=this.props.height+"px",this.svg.style.height=this.props.height+"px"),this.updateSVGheight=!1):this.svg.style.height=(""+this.options.graphHeight).replace("px","")+"px",1==t||1==n||1==this.abortedGraphUpdate||1==this.forceGraphUpdate)t=this._updateGraph()||t,this.forceGraphUpdate=!1,this.lastStart=this.body.range.start,this.svg.style.left=-this.props.width+"px";else if(0!=this.lastStart){var i=this.body.range.start-this.lastStart,r=this.body.range.end-this.body.range.start;if(0!=this.props.width){var o=i*(this.props.width/r);this.svg.style.left=-this.props.width-o+"px"}}return this.legendLeft.redraw(),this.legendRight.redraw(),t},Qr.prototype._getSortedGroupIds=function(){var t=[];for(var e in this.groups)if(this.groups.hasOwnProperty(e)){var n=this.groups[e];1!=n.visible||void 0!==this.options.groups.visibility[e]&&1!=this.options.groups.visibility[e]||t.push({id:e,zIndex:n.options.zIndex})}ni.insertSort(t,(function(t,e){var n=t.zIndex,i=e.zIndex;return void 0===n&&(n=0),void 0===i&&(i=0),n==i?0:n<i?-1:1}));for(var i=new Array(t.length),r=0;r<t.length;r++)i[r]=t[r].id;return i},Qr.prototype._updateGraph=function(){if(jr(this.svgElements),0!=this.props.width&&null!=this.itemsData){var t,e,n={},i=this.body.util.toGlobalTime(-this.body.domProps.root.width),r=this.body.util.toGlobalTime(2*this.body.domProps.root.width),o=this._getSortedGroupIds();if(o.length>0){var a={};for(this._getRelevantData(o,a,i,r),this._applySampling(o,a),e=0;e<o.length;e++)this._convertXcoordinates(a[o[e]]);if(this._getYRanges(o,a,n),1==this._updateYAxis(o,n))return Fr(this.svgElements),this.abortedGraphUpdate=!0,!0;this.abortedGraphUpdate=!1;var s=void 0;for(e=0;e<o.length;e++)t=this.groups[o[e]],!0===this.options.stack&&"line"===this.options.style&&(null!=t.options.excludeFromStacking&&t.options.excludeFromStacking||(null!=s&&(this._stack(a[t.id],a[s.id]),1==t.options.shaded.enabled&&"group"!==t.options.shaded.orientation&&("top"==t.options.shaded.orientation&&"group"!==s.options.shaded.orientation?(s.options.shaded.orientation="group",s.options.shaded.groupId=t.id):(t.options.shaded.orientation="group",t.options.shaded.groupId=s.id))),s=t)),this._convertYcoordinates(a[o[e]],t);var l={};for(e=0;e<o.length;e++)if("line"===(t=this.groups[o[e]]).options.style&&1==t.options.shaded.enabled){var u=a[o[e]];if(null==u||0==u.length)continue;if(l.hasOwnProperty(o[e])||(l[o[e]]=Kr.calcPath(u,t)),"group"===t.options.shaded.orientation){var c=t.options.shaded.groupId;if(-1===o.indexOf(c)){console.log(t.id+": Unknown shading group target given:"+c);continue}l.hasOwnProperty(c)||(l[c]=Kr.calcPath(a[c],this.groups[c])),Kr.drawShading(l[o[e]],t,l[c],this.framework)}else Kr.drawShading(l[o[e]],t,void 0,this.framework)}for(qr.draw(o,a,this.framework),e=0;e<o.length;e++)if(t=this.groups[o[e]],a[o[e]].length>0)switch(t.options.style){case"line":l.hasOwnProperty(o[e])||(l[o[e]]=Kr.calcPath(a[o[e]],t)),Kr.draw(l[o[e]],t,this.framework);case"point":case"points":"point"!=t.options.style&&"points"!=t.options.style&&1!=t.options.drawPoints.enabled||Vr.draw(a[o[e]],t,this.framework)}}}return Fr(this.svgElements),!1},Qr.prototype._stack=function(t,e){var n,i,r,o,a;n=0;for(var s=0;s<t.length;s++){o=void 0,a=void 0;for(var l=n;l<e.length;l++){if(e[l].x===t[s].x){o=e[l],a=e[l],n=l;break}if(e[l].x>t[s].x){a=e[l],o=0==l?a:e[l-1],n=l;break}}void 0===a&&(o=e[e.length-1],a=e[e.length-1]),i=a.x-o.x,r=a.y-o.y,t[s].y=0==i?t[s].orginalY+a.y:t[s].orginalY+r/i*(t[s].x-o.x)+o.y}},Qr.prototype._getRelevantData=function(t,e,n,i){var r,o,a,s;if(t.length>0)for(o=0;o<t.length;o++){var l=(r=this.groups[t[o]]).getItems();if(1==r.options.sort){var u=function(t,e){return t.getTime()==e.getTime()?0:t<e?-1:1},c=Math.max(0,ni.binarySearchValue(l,n,"x","before",u)),h=Math.min(l.length,ni.binarySearchValue(l,i,"x","after",u)+1);h<=0&&(h=l.length);var d=new Array(h-c);for(a=c;a<h;a++)s=r.itemsData[a],d[a-c]=s;e[t[o]]=d}else e[t[o]]=r.itemsData}},Qr.prototype._applySampling=function(t,e){if(t.length>0)for(var n=0;n<t.length;n++)if(1==this.groups[t[n]].options.sampling){var i=e[t[n]];if(i.length>0){var r,o=i.length,a=o/(this.body.util.toGlobalScreen(i[i.length-1].x)-this.body.util.toGlobalScreen(i[0].x));r=Math.min(Math.ceil(.2*o),Math.max(1,Math.round(a)));for(var s=new Array(o),l=0;l<o;l+=r){s[Math.round(l/r)]=i[l]}e[t[n]]=s.splice(0,Math.round(o/r))}}},Qr.prototype._getYRanges=function(t,e,n){var i,r,o,a,s=[],l=[];if(t.length>0){for(o=0;o<t.length;o++)i=e[t[o]],a=this.groups[t[o]].options,i.length>0&&(r=this.groups[t[o]],!0===a.stack&&"bar"===a.style?"left"===a.yAxisOrientation?s=s.concat(i):l=l.concat(i):n[t[o]]=r.getYRange(i,t[o]));qr.getStackedYRange(s,n,t,"__barStackLeft","left"),qr.getStackedYRange(l,n,t,"__barStackRight","right")}},Qr.prototype._updateYAxis=function(t,e){var n,i,r=!1,o=!1,a=!1,s=1e9,l=1e9,u=-1e9,c=-1e9;if(t.length>0){for(var h=0;h<t.length;h++){var d=this.groups[t[h]];d&&"right"!=d.options.yAxisOrientation?(o=!0,s=1e9,u=-1e9):d&&d.options.yAxisOrientation&&(a=!0,l=1e9,c=-1e9)}for(h=0;h<t.length;h++)e.hasOwnProperty(t[h])&&!0!==e[t[h]].ignore&&(n=e[t[h]].min,i=e[t[h]].max,"right"!=e[t[h]].yAxisOrientation?(o=!0,s=s>n?n:s,u=u<i?i:u):(a=!0,l=l>n?n:l,c=c<i?i:c));1==o&&this.yAxisLeft.setRange(s,u),1==a&&this.yAxisRight.setRange(l,c)}r=this._toggleAxisVisiblity(o,this.yAxisLeft)||r,r=this._toggleAxisVisiblity(a,this.yAxisRight)||r,1==a&&1==o?(this.yAxisLeft.drawIcons=!0,this.yAxisRight.drawIcons=!0):(this.yAxisLeft.drawIcons=!1,this.yAxisRight.drawIcons=!1),this.yAxisRight.master=!o,this.yAxisRight.masterAxis=this.yAxisLeft,0==this.yAxisRight.master?(this.yAxisLeft.lineOffset=1==a?this.yAxisRight.width:0,r=this.yAxisLeft.redraw()||r,r=this.yAxisRight.redraw()||r):r=this.yAxisRight.redraw()||r;var f=["__barStackLeft","__barStackRight","__lineStackLeft","__lineStackRight"];for(h=0;h<f.length;h++)-1!=t.indexOf(f[h])&&t.splice(t.indexOf(f[h]),1);return r},Qr.prototype._toggleAxisVisiblity=function(t,e){var n=!1;return 0==t?e.dom.frame.parentNode&&0==e.hidden&&(e.hide(),n=!0):e.dom.frame.parentNode||1!=e.hidden||(e.show(),n=!0),n},Qr.prototype._convertXcoordinates=function(t){for(var e=this.body.util.toScreen,n=0;n<t.length;n++)t[n].screen_x=e(t[n].x)+this.props.width,t[n].screen_y=t[n].y,null!=t[n].end?t[n].screen_end=e(t[n].end)+this.props.width:t[n].screen_end=void 0},Qr.prototype._convertYcoordinates=function(t,e){var n=this.yAxisLeft,i=Number(this.svg.style.height.replace("px",""));"right"==e.options.yAxisOrientation&&(n=this.yAxisRight);for(var r=0;r<t.length;r++)t[r].screen_y=Math.round(n.convertValue(t[r].y));e.setZeroPosition(Math.min(i,n.convertValue(0)))};let to="string",eo="boolean",no="number",io="date",ro="object",oo="moment",ao={configure:{enabled:{boolean:eo},filter:{boolean:eo,function:"function"},container:{dom:"dom"},__type__:{object:ro,boolean:eo,function:"function"}},alignCurrentTime:{string:to,undefined:"undefined"},yAxisOrientation:{string:["left","right"]},defaultGroup:{string:to},sort:{boolean:eo},sampling:{boolean:eo},stack:{boolean:eo},graphHeight:{string:to,number:no},shaded:{enabled:{boolean:eo},orientation:{string:["bottom","top","zero","group"]},groupId:{object:ro},__type__:{boolean:eo,object:ro}},style:{string:["line","bar","points"]},barChart:{width:{number:no},minWidth:{number:no},sideBySide:{boolean:eo},align:{string:["left","center","right"]},__type__:{object:ro}},interpolation:{enabled:{boolean:eo},parametrization:{string:["centripetal","chordal","uniform"]},alpha:{number:no},__type__:{object:ro,boolean:eo}},drawPoints:{enabled:{boolean:eo},onRender:{function:"function"},size:{number:no},style:{string:["square","circle"]},__type__:{object:ro,boolean:eo,function:"function"}},dataAxis:{showMinorLabels:{boolean:eo},showMajorLabels:{boolean:eo},showWeekScale:{boolean:eo},icons:{boolean:eo},width:{string:to,number:no},visible:{boolean:eo},alignZeros:{boolean:eo},left:{range:{min:{number:no,undefined:"undefined"},max:{number:no,undefined:"undefined"},__type__:{object:ro}},format:{function:"function"},title:{text:{string:to,number:no,undefined:"undefined"},style:{string:to,undefined:"undefined"},__type__:{object:ro}},__type__:{object:ro}},right:{range:{min:{number:no,undefined:"undefined"},max:{number:no,undefined:"undefined"},__type__:{object:ro}},format:{function:"function"},title:{text:{string:to,number:no,undefined:"undefined"},style:{string:to,undefined:"undefined"},__type__:{object:ro}},__type__:{object:ro}},__type__:{object:ro}},legend:{enabled:{boolean:eo},icons:{boolean:eo},left:{visible:{boolean:eo},position:{string:["top-right","bottom-right","top-left","bottom-left"]},__type__:{object:ro}},right:{visible:{boolean:eo},position:{string:["top-right","bottom-right","top-left","bottom-left"]},__type__:{object:ro}},__type__:{object:ro,boolean:eo}},groups:{visibility:{any:"any"},__type__:{object:ro}},autoResize:{boolean:eo},throttleRedraw:{number:no},clickToUse:{boolean:eo},end:{number:no,date:io,string:to,moment:oo},format:{minorLabels:{millisecond:{string:to,undefined:"undefined"},second:{string:to,undefined:"undefined"},minute:{string:to,undefined:"undefined"},hour:{string:to,undefined:"undefined"},weekday:{string:to,undefined:"undefined"},day:{string:to,undefined:"undefined"},week:{string:to,undefined:"undefined"},month:{string:to,undefined:"undefined"},quarter:{string:to,undefined:"undefined"},year:{string:to,undefined:"undefined"},__type__:{object:ro}},majorLabels:{millisecond:{string:to,undefined:"undefined"},second:{string:to,undefined:"undefined"},minute:{string:to,undefined:"undefined"},hour:{string:to,undefined:"undefined"},weekday:{string:to,undefined:"undefined"},day:{string:to,undefined:"undefined"},week:{string:to,undefined:"undefined"},month:{string:to,undefined:"undefined"},quarter:{string:to,undefined:"undefined"},year:{string:to,undefined:"undefined"},__type__:{object:ro}},__type__:{object:ro}},moment:{function:"function"},height:{string:to,number:no},hiddenDates:{start:{date:io,number:no,string:to,moment:oo},end:{date:io,number:no,string:to,moment:oo},repeat:{string:to},__type__:{object:ro,array:"array"}},locale:{string:to},locales:{__any__:{any:"any"},__type__:{object:ro}},max:{date:io,number:no,string:to,moment:oo},maxHeight:{number:no,string:to},maxMinorChars:{number:no},min:{date:io,number:no,string:to,moment:oo},minHeight:{number:no,string:to},moveable:{boolean:eo},multiselect:{boolean:eo},orientation:{string:to},showCurrentTime:{boolean:eo},showMajorLabels:{boolean:eo},showMinorLabels:{boolean:eo},showWeekScale:{boolean:eo},snap:{function:"function",null:"null"},start:{date:io,number:no,string:to,moment:oo},timeAxis:{scale:{string:to,undefined:"undefined"},step:{number:no,undefined:"undefined"},__type__:{object:ro}},width:{string:to,number:no},zoomable:{boolean:eo},zoomKey:{string:["ctrlKey","altKey","metaKey",""]},zoomMax:{number:no},zoomMin:{number:no},zIndex:{number:no},__type__:{object:ro}},so={global:{alignCurrentTime:["none","year","month","quarter","week","isoWeek","day","date","hour","minute","second"],sort:!0,sampling:!0,stack:!1,shaded:{enabled:!1,orientation:["zero","top","bottom","group"]},style:["line","bar","points"],barChart:{width:[50,5,100,5],minWidth:[50,5,100,5],sideBySide:!1,align:["left","center","right"]},interpolation:{enabled:!0,parametrization:["centripetal","chordal","uniform"]},drawPoints:{enabled:!0,size:[6,2,30,1],style:["square","circle"]},dataAxis:{showMinorLabels:!0,showMajorLabels:!0,showWeekScale:!1,icons:!1,width:[40,0,200,1],visible:!0,alignZeros:!0,left:{title:{text:"",style:""}},right:{title:{text:"",style:""}}},legend:{enabled:!1,icons:!0,left:{visible:!0,position:["top-right","bottom-right","top-left","bottom-left"]},right:{visible:!0,position:["top-right","bottom-right","top-left","bottom-left"]}},autoResize:!0,clickToUse:!1,end:"",format:{minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",week:"w",month:"MMM",quarter:"[Q]Q",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",week:"MMMM YYYY",month:"YYYY",quarter:"YYYY",year:""}},height:"",locale:"",max:"",maxHeight:"",maxMinorChars:[7,0,20,1],min:"",minHeight:"",moveable:!0,orientation:["both","bottom","top"],showCurrentTime:!1,showMajorLabels:!0,showMinorLabels:!0,showWeekScale:!1,start:"",width:"100%",zoomable:!0,zoomKey:["ctrlKey","altKey","metaKey",""],zoomMax:[31536e10,10,31536e10,1],zoomMin:[10,10,31536e10,1],zIndex:0}};function lo(t,e,n,i){if(!Array.isArray(n)&&!Wn("id",n)&&n instanceof Object){var r=i;i=n,n=r}i&&i.throttleRedraw&&console.warn('Graph2d option "throttleRedraw" is DEPRICATED and no longer supported. It will be removed in the next MAJOR release.');var o=this;this.defaultOptions={start:null,end:null,autoResize:!0,orientation:{axis:"bottom",item:"bottom"},moment:qn,width:null,height:null,maxHeight:null,minHeight:null},this.options=ni.deepExtend({},this.defaultOptions),this._create(t),this.components=[],this.body={dom:this.dom,domProps:this.props,emitter:{on:this.on.bind(this),off:this.off.bind(this),emit:this.emit.bind(this)},hiddenDates:[],util:{getScale:()=>o.timeAxis.step.scale,getStep:()=>o.timeAxis.step.step,toScreen:o._toScreen.bind(o),toGlobalScreen:o._toGlobalScreen.bind(o),toTime:o._toTime.bind(o),toGlobalTime:o._toGlobalTime.bind(o)}},this.range=new yi(this.body),this.components.push(this.range),this.body.range=this.range,this.timeAxis=new Ei(this.body),this.components.push(this.timeAxis),this.currentTime=new Wi(this.body),this.components.push(this.currentTime),this.linegraph=new Qr(this.body),this.components.push(this.linegraph),this.itemsData=null,this.groupsData=null,this.on("tap",(function(t){o.emit("click",o.getEventProperties(t))})),this.on("doubletap",(function(t){o.emit("doubleClick",o.getEventProperties(t))})),this.dom.root.oncontextmenu=function(t){o.emit("contextmenu",o.getEventProperties(t))},this.initialFitDone=!1,this.on("changed",(function(){if(null!=o.itemsData){if(!o.initialFitDone&&!o.options.rollingMode)if(o.initialFitDone=!0,null!=o.options.start||null!=o.options.end){if(null==o.options.start||null==o.options.end)var t=o.getItemRange();var e=null!=o.options.start?o.options.start:t.min,n=null!=o.options.end?o.options.end:t.max;o.setWindow(e,n,{animation:!1})}else o.fit({animation:!1});o.initialDrawDone||!o.initialRangeChangeDone&&(o.options.start||o.options.end)&&!o.options.rollingMode||(o.initialDrawDone=!0,o.dom.root.style.visibility="visible",o.dom.loadingScreen.parentNode.removeChild(o.dom.loadingScreen),o.options.onInitialDrawComplete&&setTimeout((()=>o.options.onInitialDrawComplete()),0))}})),i&&this.setOptions(i),n&&this.setGroups(n),e&&this.setItems(e),this._redraw()}lo.prototype=new Gi,lo.prototype.setOptions=function(t){!0===wr.validate(t,ao)&&console.log("%cErrors have been found in the supplied options object.",_r),Gi.prototype.setOptions.call(this,t)},lo.prototype.setItems=function(t){var e,n=null==this.itemsData;if(e=t?Wn("id",t)?Jn(t):Jn(new Hn(t)):null,this.itemsData&&this.itemsData.dispose(),this.itemsData=e,this.linegraph&&this.linegraph.setItems(null!=e?e.rawDS:null),n)if(null!=this.options.start||null!=this.options.end){var i=null!=this.options.start?this.options.start:null,r=null!=this.options.end?this.options.end:null;this.setWindow(i,r,{animation:!1})}else this.fit({animation:!1})},lo.prototype.setGroups=function(t){var e;e=t?Wn("id",t)?t:new Hn(t):null,this.groupsData=e,this.linegraph.setGroups(e)},lo.prototype.getLegend=function(t,e,n){return void 0===e&&(e=15),void 0===n&&(n=15),void 0!==this.linegraph.groups[t]?this.linegraph.groups[t].getLegend(e,n):"cannot find group:'"+t+"'"},lo.prototype.isGroupVisible=function(t){return void 0!==this.linegraph.groups[t]&&(this.linegraph.groups[t].visible&&(void 0===this.linegraph.options.groups.visibility[t]||1==this.linegraph.options.groups.visibility[t]))},lo.prototype.getDataRange=function(){var t=null,e=null;for(var n in this.linegraph.groups)if(this.linegraph.groups.hasOwnProperty(n)&&1==this.linegraph.groups[n].visible)for(var i=0;i<this.linegraph.groups[n].itemsData.length;i++){var r=this.linegraph.groups[n].itemsData[i],o=ni.convert(r.x,"Date").valueOf();t=null==t||t>o?o:t,e=null==e||e<o?o:e}return{min:null!=t?new Date(t):null,max:null!=e?new Date(e):null}},lo.prototype.getEventProperties=function(t){var e=t.center?t.center.x:t.clientX,n=t.center?t.center.y:t.clientY,i=e-ni.getAbsoluteLeft(this.dom.centerContainer),r=n-ni.getAbsoluteTop(this.dom.centerContainer),o=this._toTime(i),a=Hi.customTimeFromTarget(t),s=ni.getTarget(t),l=null;ni.hasParent(s,this.timeAxis.dom.foreground)||this.timeAxis2&&ni.hasParent(s,this.timeAxis2.dom.foreground)?l="axis":ni.hasParent(s,this.linegraph.yAxisLeft.dom.frame)||ni.hasParent(s,this.linegraph.yAxisRight.dom.frame)?l="data-axis":ni.hasParent(s,this.linegraph.legendLeft.dom.frame)||ni.hasParent(s,this.linegraph.legendRight.dom.frame)?l="legend":null!=a?l="custom-time":ni.hasParent(s,this.currentTime.bar)?l="current-time":ni.hasParent(s,this.dom.center)&&(l="background");var u=[],c=this.linegraph.yAxisLeft,h=this.linegraph.yAxisRight;return!c.hidden&&this.itemsData.length>0&&u.push(c.screenToValue(r)),!h.hidden&&this.itemsData.length>0&&u.push(h.screenToValue(r)),{event:t,customTime:a?a.options.id:null,what:l,pageX:t.srcEvent?t.srcEvent.pageX:t.pageX,pageY:t.srcEvent?t.srcEvent.pageY:t.pageY,x:i,y:r,time:o,value:u}},lo.prototype._createConfigurator=function(){return new Pr(this,this.dom.container,so)};const uo=function(){try{return navigator?navigator.languages&&navigator.languages.length?navigator.languages:navigator.userLanguage||navigator.language||navigator.browserLanguage||"en":"en"}catch(t){return"en"}}();a().locale(uo);const co={Core:Gi,DateUtil:vi,Range:yi,stack:nr,TimeStep:Mi,components:{items:{Item:ar,BackgroundItem:cr,BoxItem:sr,ClusterItem:dr,PointItem:lr,RangeItem:ur},BackgroundGroup:or,Component:ii,CurrentTime:Wi,CustomTime:Hi,DataAxis:Ur,DataScale:Wr,GraphGroup:$r,Group:rr,ItemSet:vr,Legend:Zr,LineGraph:Qr,TimeAxis:Ei}}},82302:(t,e,n)=>{var i=n(29970).FilterCSS,r=n(29970).getDefaultWhiteList,o=n(75938);function a(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var s=new i;function l(t){return t.replace(u,"&lt;").replace(c,"&gt;")}var u=/</g,c=/>/g,h=/"/g,d=/&quot;/g,f=/&#([a-zA-Z0-9]*);?/gim,p=/&colon;?/gim,m=/&newline;?/gim,g=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a)\:/gi,v=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,y=/u\s*r\s*l\s*\(.*/gi;function b(t){return t.replace(h,"&quot;")}function _(t){return t.replace(d,'"')}function w(t){return t.replace(f,(function(t,e){return"x"===e[0]||"X"===e[0]?String.fromCharCode(parseInt(e.substr(1),16)):String.fromCharCode(parseInt(e,10))}))}function x(t){return t.replace(p,":").replace(m," ")}function M(t){for(var e="",n=0,i=t.length;n<i;n++)e+=t.charCodeAt(n)<32?" ":t.charAt(n);return o.trim(e)}function E(t){return t=M(t=x(t=w(t=_(t))))}function S(t){return t=l(t=b(t))}e.whiteList={a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]},e.getDefaultWhiteList=a,e.onTag=function(t,e,n){},e.onIgnoreTag=function(t,e,n){},e.onTagAttr=function(t,e,n){},e.onIgnoreTagAttr=function(t,e,n){},e.safeAttrValue=function(t,e,n,i){if(n=E(n),"href"===e||"src"===e){if("#"===(n=o.trim(n)))return"#";if("http://"!==n.substr(0,7)&&"https://"!==n.substr(0,8)&&"mailto:"!==n.substr(0,7)&&"tel:"!==n.substr(0,4)&&"data:image/"!==n.substr(0,11)&&"ftp://"!==n.substr(0,6)&&"./"!==n.substr(0,2)&&"../"!==n.substr(0,3)&&"#"!==n[0]&&"/"!==n[0])return""}else if("background"===e){if(g.lastIndex=0,g.test(n))return""}else if("style"===e){if(v.lastIndex=0,v.test(n))return"";if(y.lastIndex=0,y.test(n)&&(g.lastIndex=0,g.test(n)))return"";!1!==i&&(n=(i=i||s).process(n))}return n=S(n)},e.escapeHtml=l,e.escapeQuote=b,e.unescapeQuote=_,e.escapeHtmlEntities=w,e.escapeDangerHtml5Entities=x,e.clearNonPrintableCharacter=M,e.friendlyAttrValue=E,e.escapeAttrValue=S,e.onIgnoreTagStripAll=function(){return""},e.StripTagBody=function(t,e){"function"!=typeof e&&(e=function(){});var n=!Array.isArray(t),i=[],r=!1;return{onIgnoreTag:function(a,s,l){if(function(e){return!!n||-1!==o.indexOf(t,e)}(a)){if(l.isClosing){var u="[/removed]",c=l.position+u.length;return i.push([!1!==r?r:l.position,c]),r=!1,u}return r||(r=l.position),"[removed]"}return e(a,s,l)},remove:function(t){var e="",n=0;return o.forEach(i,(function(i){e+=t.slice(n,i[0]),n=i[1]})),e+=t.slice(n)}}},e.stripCommentTag=function(t){for(var e="",n=0;n<t.length;){var i=t.indexOf("\x3c!--",n);if(-1===i){e+=t.slice(n);break}e+=t.slice(n,i);var r=t.indexOf("--\x3e",i);if(-1===r)break;n=r+3}return e},e.stripBlankChar=function(t){var e=t.split("");return(e=e.filter((function(t){var e=t.charCodeAt(0);return 127!==e&&(!(e<=31)||(10===e||13===e))}))).join("")},e.cssFilter=s,e.getDefaultCSSWhiteList=r},68924:(t,e,n)=>{var i=n(82302),r=n(73268),o=n(82973);function a(t,e){return new o(e).process(t)}for(var s in(e=t.exports=a).filterXSS=a,e.FilterXSS=o,i)e[s]=i[s];for(var s in r)e[s]=r[s];"undefined"!=typeof window&&(window.filterXSS=t.exports),"undefined"!=typeof self&&"undefined"!=typeof DedicatedWorkerGlobalScope&&self instanceof DedicatedWorkerGlobalScope&&(self.filterXSS=t.exports)},73268:(t,e,n)=>{var i=n(75938);function r(t){var e=i.spaceIndex(t);if(-1===e)var n=t.slice(1,-1);else n=t.slice(1,e+1);return"/"===(n=i.trim(n).toLowerCase()).slice(0,1)&&(n=n.slice(1)),"/"===n.slice(-1)&&(n=n.slice(0,-1)),n}function o(t){return"</"===t.slice(0,2)}var a=/[^a-zA-Z0-9_:\.\-]/gim;function s(t,e){for(;e<t.length;e++){var n=t[e];if(" "!==n)return"="===n?e:-1}}function l(t,e){for(;e>0;e--){var n=t[e];if(" "!==n)return"="===n?e:-1}}function u(t){return function(t){return'"'===t[0]&&'"'===t[t.length-1]||"'"===t[0]&&"'"===t[t.length-1]}(t)?t.substr(1,t.length-2):t}e.parseTag=function(t,e,n){"use strict";var i="",a=0,s=!1,l=!1,u=0,c=t.length,h="",d="";t:for(u=0;u<c;u++){var f=t.charAt(u);if(!1===s){if("<"===f){s=u;continue}}else if(!1===l){if("<"===f){i+=n(t.slice(a,u)),s=u,a=u;continue}if(">"===f){i+=n(t.slice(a,s)),h=r(d=t.slice(s,u+1)),i+=e(s,i.length,h,d,o(d)),a=u+1,s=!1;continue}if('"'===f||"'"===f)for(var p=1,m=t.charAt(u-p);""===m.trim()||"="===m;){if("="===m){l=f;continue t}m=t.charAt(u-++p)}}else if(f===l){l=!1;continue}}return a<t.length&&(i+=n(t.substr(a))),i},e.parseAttr=function(t,e){"use strict";var n=0,r=[],o=!1,c=t.length;function h(t,n){if(!((t=(t=i.trim(t)).replace(a,"").toLowerCase()).length<1)){var o=e(t,n||"");o&&r.push(o)}}for(var d=0;d<c;d++){var f,p=t.charAt(d);if(!1!==o||"="!==p)if(!1===o||d!==n||'"'!==p&&"'"!==p||"="!==t.charAt(d-1))if(/\s|\n|\t/.test(p)){if(t=t.replace(/\s|\n|\t/g," "),!1===o){if(-1===(f=s(t,d))){h(i.trim(t.slice(n,d))),o=!1,n=d+1;continue}d=f-1;continue}if(-1===(f=l(t,d-1))){h(o,u(i.trim(t.slice(n,d)))),o=!1,n=d+1;continue}}else;else{if(-1===(f=t.indexOf(p,d+1)))break;h(o,i.trim(t.slice(n+1,f))),o=!1,n=(d=f)+1}else o=t.slice(n,d),n=d+1}return n<t.length&&(!1===o?h(t.slice(n)):h(o,u(i.trim(t.slice(n))))),i.trim(r.join(" "))}},75938:t=>{t.exports={indexOf:function(t,e){var n,i;if(Array.prototype.indexOf)return t.indexOf(e);for(n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},forEach:function(t,e,n){var i,r;if(Array.prototype.forEach)return t.forEach(e,n);for(i=0,r=t.length;i<r;i++)e.call(n,t[i],i,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(t){var e=/\s|\n|\t/.exec(t);return e?e.index:-1}}},82973:(t,e,n)=>{var i=n(29970).FilterCSS,r=n(82302),o=n(73268),a=o.parseTag,s=o.parseAttr,l=n(75938);function u(t){return null==t}function c(t){(t=function(t){var e={};for(var n in t)e[n]=t[n];return e}(t||{})).stripIgnoreTag&&(t.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),t.onIgnoreTag=r.onIgnoreTagStripAll),t.whiteList=t.whiteList||r.whiteList,t.onTag=t.onTag||r.onTag,t.onTagAttr=t.onTagAttr||r.onTagAttr,t.onIgnoreTag=t.onIgnoreTag||r.onIgnoreTag,t.onIgnoreTagAttr=t.onIgnoreTagAttr||r.onIgnoreTagAttr,t.safeAttrValue=t.safeAttrValue||r.safeAttrValue,t.escapeHtml=t.escapeHtml||r.escapeHtml,this.options=t,!1===t.css?this.cssFilter=!1:(t.css=t.css||{},this.cssFilter=new i(t.css))}c.prototype.process=function(t){if(!(t=(t=t||"").toString()))return"";var e=this.options,n=e.whiteList,i=e.onTag,o=e.onIgnoreTag,c=e.onTagAttr,h=e.onIgnoreTagAttr,d=e.safeAttrValue,f=e.escapeHtml,p=this.cssFilter;e.stripBlankChar&&(t=r.stripBlankChar(t)),e.allowCommentTag||(t=r.stripCommentTag(t));var m=!1;if(e.stripIgnoreTagBody){m=r.StripTagBody(e.stripIgnoreTagBody,o);o=m.onIgnoreTag}var g=a(t,(function(t,e,r,a,m){var g,v={sourcePosition:t,position:e,isClosing:m,isWhite:n.hasOwnProperty(r)};if(!u(g=i(r,a,v)))return g;if(v.isWhite){if(v.isClosing)return"</"+r+">";var y=function(t){var e=l.spaceIndex(t);if(-1===e)return{html:"",closing:"/"===t[t.length-2]};var n="/"===(t=l.trim(t.slice(e+1,-1)))[t.length-1];return n&&(t=l.trim(t.slice(0,-1))),{html:t,closing:n}}(a),b=n[r],_=s(y.html,(function(t,e){var n,i=-1!==l.indexOf(b,t);return u(n=c(r,t,e,i))?i?(e=d(r,t,e,p))?t+'="'+e+'"':t:u(n=h(r,t,e,i))?void 0:n:n}));a="<"+r;return _&&(a+=" "+_),y.closing&&(a+=" /"),a+=">"}return u(g=o(r,a,v))?f(a):g}),f);return m&&(g=m.remove(g)),g},t.exports=c},30694:(t,e,n)=>{"use strict";function i(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function r(t){let e=t,n=t,r=t;function o(t,e,i=0,o=t.length){if(i<o){if(0!==n(e,e))return o;do{const n=i+o>>>1;r(t[n],e)<0?i=n+1:o=n}while(i<o)}return i}return 2!==t.length&&(e=(e,n)=>t(e)-n,n=i,r=(e,n)=>i(t(e),n)),{left:o,center:function(t,n,i=0,r=t.length){const a=o(t,n,i,r-1);return a>i&&e(t[a-1],n)>-e(t[a],n)?a-1:a},right:function(t,e,i=0,o=t.length){if(i<o){if(0!==n(e,e))return o;do{const n=i+o>>>1;r(t[n],e)<=0?i=n+1:o=n}while(i<o)}return i}}}function o(t){return null===t?NaN:+t}n.r(e),n.d(e,{Adder:()=>w,Delaunay:()=>Xa,FormatSpecifier:()=>ku,InternMap:()=>E,InternSet:()=>S,Node:()=>Vp,Voronoi:()=>za,ZoomTransform:()=>qS,active:()=>Ri,arc:()=>RM,area:()=>WM,areaRadial:()=>QM,ascending:()=>i,autoType:()=>As,axisBottom:()=>re,axisLeft:()=>oe,axisRight:()=>ie,axisTop:()=>ne,bin:()=>rt,bisect:()=>c,bisectCenter:()=>u,bisectLeft:()=>l,bisectRight:()=>s,bisector:()=>r,blob:()=>ml,brush:()=>fr,brushSelection:()=>cr,brushX:()=>hr,brushY:()=>dr,buffer:()=>vl,chord:()=>Sr,chordDirected:()=>Cr,chordTranspose:()=>kr,cluster:()=>Fp,color:()=>fo,contourDensity:()=>ya,contours:()=>da,count:()=>h,create:()=>uM,creator:()=>ln,cross:()=>m,csv:()=>xl,csvFormat:()=>ys,csvFormatBody:()=>bs,csvFormatRow:()=>ws,csvFormatRows:()=>_s,csvFormatValue:()=>xs,csvParse:()=>gs,csvParseRows:()=>vs,cubehelix:()=>na,cumsum:()=>g,curveBasis:()=>OE,curveBasisClosed:()=>IE,curveBasisOpen:()=>RE,curveBumpX:()=>jE,curveBumpY:()=>FE,curveBundle:()=>zE,curveCardinal:()=>WE,curveCardinalClosed:()=>VE,curveCardinalOpen:()=>qE,curveCatmullRom:()=>ZE,curveCatmullRomClosed:()=>QE,curveCatmullRomOpen:()=>eS,curveLinear:()=>BM,curveLinearClosed:()=>iS,curveMonotoneX:()=>hS,curveMonotoneY:()=>dS,curveNatural:()=>mS,curveStep:()=>vS,curveStepAfter:()=>bS,curveStepBefore:()=>yS,descending:()=>v,deviation:()=>b,difference:()=>Bt,disjoint:()=>zt,dispatch:()=>ts,drag:()=>ss,dragDisable:()=>Tn,dragEnable:()=>Dn,dsv:()=>wl,dsvFormat:()=>ps,easeBack:()=>ul,easeBackIn:()=>sl,easeBackInOut:()=>ul,easeBackOut:()=>ll,easeBounce:()=>rl,easeBounceIn:()=>il,easeBounceInOut:()=>ol,easeBounceOut:()=>rl,easeCircle:()=>tl,easeCircleIn:()=>Js,easeCircleInOut:()=>tl,easeCircleOut:()=>Qs,easeCubic:()=>Fs,easeCubicIn:()=>Ys,easeCubicInOut:()=>Fs,easeCubicOut:()=>js,easeElastic:()=>dl,easeElasticIn:()=>hl,easeElasticInOut:()=>fl,easeElasticOut:()=>dl,easeExp:()=>Zs,easeExpIn:()=>Ks,easeExpInOut:()=>Zs,easeExpOut:()=>$s,easeLinear:()=>Ps,easePoly:()=>Hs,easePolyIn:()=>Bs,easePolyInOut:()=>Hs,easePolyOut:()=>zs,easeQuad:()=>Rs,easeQuadIn:()=>Is,easeQuadInOut:()=>Rs,easeQuadOut:()=>Ns,easeSin:()=>Xs,easeSinIn:()=>Us,easeSinInOut:()=>Xs,easeSinOut:()=>Vs,every:()=>It,extent:()=>_,fcumsum:()=>M,filter:()=>Rt,flatGroup:()=>I,flatRollup:()=>N,forceCenter:()=>Al,forceCollide:()=>Wl,forceLink:()=>Xl,forceManyBody:()=>vu,forceRadial:()=>yu,forceSimulation:()=>gu,forceX:()=>bu,forceY:()=>_u,format:()=>Au,formatDefaultLocale:()=>Ru,formatLocale:()=>Nu,formatPrefix:()=>Ou,formatSpecifier:()=>Su,fsum:()=>x,geoAlbers:()=>tp,geoAlbersUsa:()=>ep,geoArea:()=>Bc,geoAzimuthalEqualArea:()=>op,geoAzimuthalEqualAreaRaw:()=>rp,geoAzimuthalEquidistant:()=>sp,geoAzimuthalEquidistantRaw:()=>ap,geoBounds:()=>wh,geoCentroid:()=>Ph,geoCircle:()=>Wh,geoClipAntimeridian:()=>ed,geoClipCircle:()=>nd,geoClipExtent:()=>cd,geoClipRectangle:()=>ud,geoConicConformal:()=>fp,geoConicConformalRaw:()=>dp,geoConicEqualArea:()=>Qf,geoConicEqualAreaRaw:()=>Jf,geoConicEquidistant:()=>vp,geoConicEquidistantRaw:()=>gp,geoContains:()=>Cd,geoDistance:()=>yd,geoEqualEarth:()=>Ep,geoEqualEarthRaw:()=>Mp,geoEquirectangular:()=>mp,geoEquirectangularRaw:()=>pp,geoGnomonic:()=>kp,geoGnomonicRaw:()=>Sp,geoGraticule:()=>Ld,geoGraticule10:()=>Ad,geoIdentity:()=>Cp,geoInterpolate:()=>Od,geoLength:()=>md,geoMercator:()=>up,geoMercatorRaw:()=>lp,geoNaturalEarth1:()=>Dp,geoNaturalEarth1Raw:()=>Tp,geoOrthographic:()=>Ap,geoOrthographicRaw:()=>Lp,geoPath:()=>Rf,geoProjection:()=>Kf,geoProjectionMutator:()=>$f,geoRotation:()=>zh,geoStereographic:()=>Pp,geoStereographicRaw:()=>Op,geoStream:()=>gc,geoTransform:()=>Yf,geoTransverseMercator:()=>Np,geoTransverseMercatorRaw:()=>Ip,gray:()=>No,greatest:()=>St,greatestIndex:()=>kt,group:()=>A,groupSort:()=>V,groups:()=>O,hcl:()=>Wo,hierarchy:()=>zp,histogram:()=>rt,hsl:()=>Eo,html:()=>Dl,image:()=>El,index:()=>j,indexes:()=>F,interpolate:()=>sg,interpolateArray:()=>Qm,interpolateBasis:()=>Bm,interpolateBasisClosed:()=>zm,interpolateBlues:()=>bx,interpolateBrBG:()=>Aw,interpolateBuGn:()=>Kw,interpolateBuPu:()=>Zw,interpolateCividis:()=>Lx,interpolateCool:()=>$x,interpolateCubehelix:()=>Tg,interpolateCubehelixDefault:()=>qx,interpolateCubehelixLong:()=>Dg,interpolateDate:()=>eg,interpolateDiscrete:()=>lg,interpolateGnBu:()=>Qw,interpolateGreens:()=>wx,interpolateGreys:()=>Mx,interpolateHcl:()=>Sg,interpolateHclLong:()=>kg,interpolateHsl:()=>wg,interpolateHslLong:()=>xg,interpolateHue:()=>ug,interpolateInferno:()=>sM,interpolateLab:()=>Mg,interpolateMagma:()=>aM,interpolateNumber:()=>ng,interpolateNumberArray:()=>Zm,interpolateObject:()=>ig,interpolateOrRd:()=>ex,interpolateOranges:()=>Dx,interpolatePRGn:()=>Pw,interpolatePiYG:()=>Nw,interpolatePlasma:()=>lM,interpolatePuBu:()=>ox,interpolatePuBuGn:()=>ix,interpolatePuOr:()=>Yw,interpolatePuRd:()=>sx,interpolatePurples:()=>Sx,interpolateRainbow:()=>Jx,interpolateRdBu:()=>Fw,interpolateRdGy:()=>zw,interpolateRdPu:()=>ux,interpolateRdYlBu:()=>Gw,interpolateRdYlGn:()=>Uw,interpolateReds:()=>Cx,interpolateRgb:()=>Xm,interpolateRgbBasis:()=>Km,interpolateRgbBasisClosed:()=>$m,interpolateRound:()=>cg,interpolateSinebow:()=>nM,interpolateSpectral:()=>Xw,interpolateString:()=>ag,interpolateTransformCss:()=>gg,interpolateTransformSvg:()=>vg,interpolateTurbo:()=>iM,interpolateViridis:()=>oM,interpolateWarm:()=>Kx,interpolateYlGn:()=>fx,interpolateYlGnBu:()=>hx,interpolateYlOrBr:()=>mx,interpolateYlOrRd:()=>vx,interpolateZoom:()=>bg,interrupt:()=>zn,intersection:()=>Ht,interval:()=>HS,isoFormat:()=>jS,isoParse:()=>BS,json:()=>kl,lab:()=>Ro,lch:()=>Go,least:()=>Mt,leastIndex:()=>Et,line:()=>GM,lineRadial:()=>JM,linkHorizontal:()=>sE,linkRadial:()=>uE,linkVertical:()=>lE,local:()=>hM,map:()=>Yt,matcher:()=>de,max:()=>ot,maxIndex:()=>ft,mean:()=>pt,median:()=>mt,merge:()=>gt,min:()=>at,minIndex:()=>vt,mode:()=>yt,namespace:()=>Te,namespaces:()=>Ce,nice:()=>nt,now:()=>ru,pack:()=>dm,packEnclose:()=>Xp,packSiblings:()=>am,pairs:()=>bt,partition:()=>ym,path:()=>Nr,permute:()=>H,pie:()=>XM,piecewise:()=>Lg,pointRadial:()=>tE,pointer:()=>On,pointers:()=>fM,polygonArea:()=>Og,polygonCentroid:()=>Pg,polygonContains:()=>jg,polygonHull:()=>Yg,polygonLength:()=>Fg,precisionFixed:()=>Yu,precisionPrefix:()=>ju,precisionRound:()=>Fu,quadtree:()=>Rl,quantile:()=>ut,quantileSorted:()=>ct,quantize:()=>Ag,quickselect:()=>st,radialArea:()=>QM,radialLine:()=>JM,randomBates:()=>Vg,randomBernoulli:()=>Kg,randomBeta:()=>Jg,randomBinomial:()=>Qg,randomCauchy:()=>ev,randomExponential:()=>Xg,randomGamma:()=>Zg,randomGeometric:()=>$g,randomInt:()=>Hg,randomIrwinHall:()=>Ug,randomLcg:()=>ov,randomLogNormal:()=>Wg,randomLogistic:()=>nv,randomNormal:()=>Gg,randomPareto:()=>qg,randomPoisson:()=>iv,randomUniform:()=>zg,randomWeibull:()=>tv,range:()=>wt,rank:()=>xt,reduce:()=>jt,reverse:()=>Ft,rgb:()=>vo,ribbon:()=>Vr,ribbonArrow:()=>Xr,rollup:()=>R,rollups:()=>Y,scaleBand:()=>cv,scaleDiverging:()=>fw,scaleDivergingLog:()=>pw,scaleDivergingPow:()=>gw,scaleDivergingSqrt:()=>vw,scaleDivergingSymlog:()=>mw,scaleIdentity:()=>kv,scaleImplicit:()=>lv,scaleLinear:()=>Sv,scaleLog:()=>Nv,scaleOrdinal:()=>uv,scalePoint:()=>dv,scalePow:()=>Wv,scaleQuantile:()=>Kv,scaleQuantize:()=>$v,scaleRadial:()=>qv,scaleSequential:()=>ow,scaleSequentialLog:()=>aw,scaleSequentialPow:()=>lw,scaleSequentialQuantile:()=>cw,scaleSequentialSqrt:()=>uw,scaleSequentialSymlog:()=>sw,scaleSqrt:()=>Uv,scaleSymlog:()=>Fv,scaleThreshold:()=>Zv,scaleTime:()=>ew,scaleUtc:()=>nw,scan:()=>Ct,schemeAccent:()=>_w,schemeBlues:()=>yx,schemeBrBG:()=>Lw,schemeBuGn:()=>qw,schemeBuPu:()=>$w,schemeCategory10:()=>bw,schemeDark2:()=>ww,schemeGnBu:()=>Jw,schemeGreens:()=>_x,schemeGreys:()=>xx,schemeOrRd:()=>tx,schemeOranges:()=>Tx,schemePRGn:()=>Ow,schemePaired:()=>xw,schemePastel1:()=>Mw,schemePastel2:()=>Ew,schemePiYG:()=>Iw,schemePuBu:()=>rx,schemePuBuGn:()=>nx,schemePuOr:()=>Rw,schemePuRd:()=>ax,schemePurples:()=>Ex,schemeRdBu:()=>jw,schemeRdGy:()=>Bw,schemeRdPu:()=>lx,schemeRdYlBu:()=>Hw,schemeRdYlGn:()=>Ww,schemeReds:()=>kx,schemeSet1:()=>Sw,schemeSet2:()=>kw,schemeSet3:()=>Cw,schemeSpectral:()=>Vw,schemeTableau10:()=>Tw,schemeYlGn:()=>dx,schemeYlGnBu:()=>cx,schemeYlOrBr:()=>px,schemeYlOrRd:()=>gx,select:()=>Mn,selectAll:()=>pM,selection:()=>xn,selector:()=>le,selectorAll:()=>he,shuffle:()=>Tt,shuffler:()=>Dt,some:()=>Nt,sort:()=>G,stack:()=>ES,stackOffsetDiverging:()=>kS,stackOffsetExpand:()=>SS,stackOffsetNone:()=>_S,stackOffsetSilhouette:()=>CS,stackOffsetWiggle:()=>TS,stackOrderAppearance:()=>DS,stackOrderAscending:()=>AS,stackOrderDescending:()=>PS,stackOrderInsideOut:()=>IS,stackOrderNone:()=>wS,stackOrderReverse:()=>NS,stratify:()=>Mm,style:()=>Fe,subset:()=>Vt,sum:()=>Lt,superset:()=>Wt,svg:()=>Ll,symbol:()=>TE,symbolCircle:()=>cE,symbolCross:()=>hE,symbolDiamond:()=>pE,symbolSquare:()=>bE,symbolStar:()=>yE,symbolTriangle:()=>wE,symbolWye:()=>kE,symbols:()=>CE,text:()=>bl,thresholdFreedmanDiaconis:()=>ht,thresholdScott:()=>dt,thresholdSturges:()=>it,tickFormat:()=>Mv,tickIncrement:()=>tt,tickStep:()=>et,ticks:()=>Q,timeDay:()=>wy,timeDays:()=>xy,timeFormat:()=>Lb,timeFormatDefaultLocale:()=>Z_,timeFormatLocale:()=>Tb,timeFriday:()=>Dy,timeFridays:()=>Ry,timeHour:()=>yy,timeHours:()=>by,timeInterval:()=>sy,timeMillisecond:()=>uy,timeMilliseconds:()=>cy,timeMinute:()=>my,timeMinutes:()=>gy,timeMonday:()=>Sy,timeMondays:()=>Oy,timeMonth:()=>Fy,timeMonths:()=>By,timeParse:()=>Ab,timeSaturday:()=>Ly,timeSaturdays:()=>Yy,timeSecond:()=>dy,timeSeconds:()=>fy,timeSunday:()=>Ey,timeSundays:()=>Ay,timeThursday:()=>Ty,timeThursdays:()=>Ny,timeTickInterval:()=>Eb,timeTicks:()=>Mb,timeTuesday:()=>ky,timeTuesdays:()=>Py,timeWednesday:()=>Cy,timeWednesdays:()=>Iy,timeWeek:()=>Ey,timeWeeks:()=>Ay,timeYear:()=>Hy,timeYears:()=>Gy,timeout:()=>zS,timer:()=>su,timerFlush:()=>lu,transition:()=>Li,transpose:()=>At,tree:()=>Lm,treemap:()=>Nm,treemapBinary:()=>Rm,treemapDice:()=>vm,treemapResquarify:()=>jm,treemapSlice:()=>Am,treemapSliceDice:()=>Ym,treemapSquarify:()=>Im,tsv:()=>Ml,tsvFormat:()=>ks,tsvFormatBody:()=>Cs,tsvFormatRow:()=>Ds,tsvFormatRows:()=>Ts,tsvFormatValue:()=>Ls,tsvParse:()=>Es,tsvParseRows:()=>Ss,union:()=>Xt,utcDay:()=>Zy,utcDays:()=>Jy,utcFormat:()=>Ob,utcFriday:()=>ob,utcFridays:()=>db,utcHour:()=>qy,utcHours:()=>Ky,utcMillisecond:()=>uy,utcMilliseconds:()=>cy,utcMinute:()=>Uy,utcMinutes:()=>Vy,utcMonday:()=>eb,utcMondays:()=>lb,utcMonth:()=>mb,utcMonths:()=>gb,utcParse:()=>Pb,utcSaturday:()=>ab,utcSaturdays:()=>fb,utcSecond:()=>dy,utcSeconds:()=>fy,utcSunday:()=>tb,utcSundays:()=>sb,utcThursday:()=>rb,utcThursdays:()=>hb,utcTickInterval:()=>xb,utcTicks:()=>wb,utcTuesday:()=>nb,utcTuesdays:()=>ub,utcWednesday:()=>ib,utcWednesdays:()=>cb,utcWeek:()=>tb,utcWeeks:()=>sb,utcYear:()=>yb,utcYears:()=>bb,variance:()=>y,window:()=>Ne,xml:()=>Tl,zip:()=>Pt,zoom:()=>ok,zoomIdentity:()=>KS,zoomTransform:()=>$S});const a=r(i),s=a.right,l=a.left,u=r(o).center,c=s;function h(t,e){let n=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&++n;else{let i=-1;for(let r of t)null!=(r=e(r,++i,t))&&(r=+r)>=r&&++n}return n}function d(t){return 0|t.length}function f(t){return!(t>0)}function p(t){return"object"!=typeof t||"length"in t?t:Array.from(t)}function m(...t){const e="function"==typeof t[t.length-1]&&function(t){return e=>t(...e)}(t.pop()),n=(t=t.map(p)).map(d),i=t.length-1,r=new Array(i+1).fill(0),o=[];if(i<0||n.some(f))return o;for(;;){o.push(r.map(((e,n)=>t[n][e])));let a=i;for(;++r[a]===n[a];){if(0===a)return e?o.map(e):o;r[a--]=0}}}function g(t,e){var n=0,i=0;return Float64Array.from(t,void 0===e?t=>n+=+t||0:r=>n+=+e(r,i++,t)||0)}function v(t,e){return null==t||null==e?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function y(t,e){let n,i=0,r=0,o=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(n=e-r,r+=n/++i,o+=n*(e-r));else{let a=-1;for(let s of t)null!=(s=e(s,++a,t))&&(s=+s)>=s&&(n=s-r,r+=n/++i,o+=n*(s-r))}if(i>1)return o/(i-1)}function b(t,e){const n=y(t,e);return n?Math.sqrt(n):n}function _(t,e){let n,i;if(void 0===e)for(const e of t)null!=e&&(void 0===n?e>=e&&(n=i=e):(n>e&&(n=e),i<e&&(i=e)));else{let r=-1;for(let o of t)null!=(o=e(o,++r,t))&&(void 0===n?o>=o&&(n=i=o):(n>o&&(n=o),i<o&&(i=o)))}return[n,i]}class w{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const e=this._partials;let n=0;for(let i=0;i<this._n&&i<32;i++){const r=e[i],o=t+r,a=Math.abs(t)<Math.abs(r)?t-(o-r):r-(o-t);a&&(e[n++]=a),t=o}return e[n]=t,this._n=n+1,this}valueOf(){const t=this._partials;let e,n,i,r=this._n,o=0;if(r>0){for(o=t[--r];r>0&&(e=o,n=t[--r],o=e+n,i=n-(o-e),!i););r>0&&(i<0&&t[r-1]<0||i>0&&t[r-1]>0)&&(n=2*i,e=o+n,n==e-o&&(o=e))}return o}}function x(t,e){const n=new w;if(void 0===e)for(let e of t)(e=+e)&&n.add(e);else{let i=-1;for(let r of t)(r=+e(r,++i,t))&&n.add(r)}return+n}function M(t,e){const n=new w;let i=-1;return Float64Array.from(t,void 0===e?t=>n.add(+t||0):r=>n.add(+e(r,++i,t)||0))}class E extends Map{constructor(t,e=D){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const[e,n]of t)this.set(e,n)}get(t){return super.get(k(this,t))}has(t){return super.has(k(this,t))}set(t,e){return super.set(C(this,t),e)}delete(t){return super.delete(T(this,t))}}class S extends Set{constructor(t,e=D){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const e of t)this.add(e)}has(t){return super.has(k(this,t))}add(t){return super.add(C(this,t))}delete(t){return super.delete(T(this,t))}}function k({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):n}function C({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):(t.set(i,n),n)}function T({_intern:t,_key:e},n){const i=e(n);return t.has(i)&&(n=t.get(i),t.delete(i)),n}function D(t){return null!==t&&"object"==typeof t?t.valueOf():t}function L(t){return t}function A(t,...e){return z(t,L,L,e)}function O(t,...e){return z(t,Array.from,L,e)}function P(t,e){for(let n=1,i=e.length;n<i;++n)t=t.flatMap((t=>t.pop().map((([e,n])=>[...t,e,n]))));return t}function I(t,...e){return P(O(t,...e),e)}function N(t,e,...n){return P(Y(t,e,...n),n)}function R(t,e,...n){return z(t,L,e,n)}function Y(t,e,...n){return z(t,Array.from,e,n)}function j(t,...e){return z(t,L,B,e)}function F(t,...e){return z(t,Array.from,B,e)}function B(t){if(1!==t.length)throw new Error("duplicate key");return t[0]}function z(t,e,n,i){return function t(r,o){if(o>=i.length)return n(r);const a=new E,s=i[o++];let l=-1;for(const t of r){const e=s(t,++l,r),n=a.get(e);n?n.push(t):a.set(e,[t])}for(const[e,n]of a)a.set(e,t(n,o));return e(a)}(t,0)}function H(t,e){return Array.from(e,(e=>t[e]))}function G(t,...e){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");t=Array.from(t);let[n]=e;if(n&&2!==n.length||e.length>1){const i=Uint32Array.from(t,((t,e)=>e));return e.length>1?(e=e.map((e=>t.map(e))),i.sort(((t,n)=>{for(const i of e){const e=U(i[t],i[n]);if(e)return e}}))):(n=t.map(n),i.sort(((t,e)=>U(n[t],n[e])))),H(t,i)}return t.sort(W(n))}function W(t=i){if(t===i)return U;if("function"!=typeof t)throw new TypeError("compare is not a function");return(e,n)=>{const i=t(e,n);return i||0===i?i:(0===t(n,n))-(0===t(e,e))}}function U(t,e){return(null==t||!(t>=t))-(null==e||!(e>=e))||(t<e?-1:t>e?1:0)}function V(t,e,n){return(2!==e.length?G(R(t,e,n),(([t,e],[n,r])=>i(e,r)||i(t,n))):G(A(t,n),(([t,n],[r,o])=>e(n,o)||i(t,r)))).map((([t])=>t))}var X=Array.prototype,q=X.slice;X.map;function K(t){return()=>t}var $=Math.sqrt(50),Z=Math.sqrt(10),J=Math.sqrt(2);function Q(t,e,n){var i,r,o,a,s=-1;if(n=+n,(t=+t)===(e=+e)&&n>0)return[t];if((i=e<t)&&(r=t,t=e,e=r),0===(a=tt(t,e,n))||!isFinite(a))return[];if(a>0){let n=Math.round(t/a),i=Math.round(e/a);for(n*a<t&&++n,i*a>e&&--i,o=new Array(r=i-n+1);++s<r;)o[s]=(n+s)*a}else{a=-a;let n=Math.round(t*a),i=Math.round(e*a);for(n/a<t&&++n,i/a>e&&--i,o=new Array(r=i-n+1);++s<r;)o[s]=(n+s)/a}return i&&o.reverse(),o}function tt(t,e,n){var i=(e-t)/Math.max(0,n),r=Math.floor(Math.log(i)/Math.LN10),o=i/Math.pow(10,r);return r>=0?(o>=$?10:o>=Z?5:o>=J?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(o>=$?10:o>=Z?5:o>=J?2:1)}function et(t,e,n){var i=Math.abs(e-t)/Math.max(0,n),r=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),o=i/r;return o>=$?r*=10:o>=Z?r*=5:o>=J&&(r*=2),e<t?-r:r}function nt(t,e,n){let i;for(;;){const r=tt(t,e,n);if(r===i||0===r||!isFinite(r))return[t,e];r>0?(t=Math.floor(t/r)*r,e=Math.ceil(e/r)*r):r<0&&(t=Math.ceil(t*r)/r,e=Math.floor(e*r)/r),i=r}}function it(t){return Math.ceil(Math.log(h(t))/Math.LN2)+1}function rt(){var t=L,e=_,n=it;function i(i){Array.isArray(i)||(i=Array.from(i));var r,o,a=i.length,s=new Array(a);for(r=0;r<a;++r)s[r]=t(i[r],r,i);var l=e(s),u=l[0],h=l[1],d=n(s,u,h);if(!Array.isArray(d)){const t=h,n=+d;if(e===_&&([u,h]=nt(u,h,n)),(d=Q(u,h,n))[d.length-1]>=h)if(t>=h&&e===_){const t=tt(u,h,n);isFinite(t)&&(t>0?h=(Math.floor(h/t)+1)*t:t<0&&(h=(Math.ceil(h*-t)+1)/-t))}else d.pop()}for(var f=d.length;d[0]<=u;)d.shift(),--f;for(;d[f-1]>h;)d.pop(),--f;var p,m=new Array(f+1);for(r=0;r<=f;++r)(p=m[r]=[]).x0=r>0?d[r-1]:u,p.x1=r<f?d[r]:h;for(r=0;r<a;++r)null!=(o=s[r])&&u<=o&&o<=h&&m[c(d,o,0,f)].push(i[r]);return m}return i.value=function(e){return arguments.length?(t="function"==typeof e?e:K(e),i):t},i.domain=function(t){return arguments.length?(e="function"==typeof t?t:K([t[0],t[1]]),i):e},i.thresholds=function(t){return arguments.length?(n="function"==typeof t?t:Array.isArray(t)?K(q.call(t)):K(t),i):n},i}function ot(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n<e||void 0===n&&e>=e)&&(n=e);else{let i=-1;for(let r of t)null!=(r=e(r,++i,t))&&(n<r||void 0===n&&r>=r)&&(n=r)}return n}function at(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n>e||void 0===n&&e>=e)&&(n=e);else{let i=-1;for(let r of t)null!=(r=e(r,++i,t))&&(n>r||void 0===n&&r>=r)&&(n=r)}return n}function st(t,e,n=0,i=t.length-1,r){for(r=void 0===r?U:W(r);i>n;){if(i-n>600){const o=i-n+1,a=e-n+1,s=Math.log(o),l=.5*Math.exp(2*s/3),u=.5*Math.sqrt(s*l*(o-l)/o)*(a-o/2<0?-1:1);st(t,e,Math.max(n,Math.floor(e-a*l/o+u)),Math.min(i,Math.floor(e+(o-a)*l/o+u)),r)}const o=t[e];let a=n,s=i;for(lt(t,n,e),r(t[i],o)>0&&lt(t,n,i);a<s;){for(lt(t,a,s),++a,--s;r(t[a],o)<0;)++a;for(;r(t[s],o)>0;)--s}0===r(t[n],o)?lt(t,n,s):(++s,lt(t,s,i)),s<=e&&(n=s+1),e<=s&&(i=s-1)}return t}function lt(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}function ut(t,e,n){if(t=Float64Array.from(function*(t,e){if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(yield e);else{let n=-1;for(let i of t)null!=(i=e(i,++n,t))&&(i=+i)>=i&&(yield i)}}(t,n)),i=t.length){if((e=+e)<=0||i<2)return at(t);if(e>=1)return ot(t);var i,r=(i-1)*e,o=Math.floor(r),a=ot(st(t,o).subarray(0,o+1));return a+(at(t.subarray(o+1))-a)*(r-o)}}function ct(t,e,n=o){if(i=t.length){if((e=+e)<=0||i<2)return+n(t[0],0,t);if(e>=1)return+n(t[i-1],i-1,t);var i,r=(i-1)*e,a=Math.floor(r),s=+n(t[a],a,t);return s+(+n(t[a+1],a+1,t)-s)*(r-a)}}function ht(t,e,n){return Math.ceil((n-e)/(2*(ut(t,.75)-ut(t,.25))*Math.pow(h(t),-1/3)))}function dt(t,e,n){return Math.ceil((n-e)/(3.5*b(t)*Math.pow(h(t),-1/3)))}function ft(t,e){let n,i=-1,r=-1;if(void 0===e)for(const e of t)++r,null!=e&&(n<e||void 0===n&&e>=e)&&(n=e,i=r);else for(let o of t)null!=(o=e(o,++r,t))&&(n<o||void 0===n&&o>=o)&&(n=o,i=r);return i}function pt(t,e){let n=0,i=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(++n,i+=e);else{let r=-1;for(let o of t)null!=(o=e(o,++r,t))&&(o=+o)>=o&&(++n,i+=o)}if(n)return i/n}function mt(t,e){return ut(t,.5,e)}function gt(t){return Array.from(function*(t){for(const e of t)yield*e}(t))}function vt(t,e){let n,i=-1,r=-1;if(void 0===e)for(const e of t)++r,null!=e&&(n>e||void 0===n&&e>=e)&&(n=e,i=r);else for(let o of t)null!=(o=e(o,++r,t))&&(n>o||void 0===n&&o>=o)&&(n=o,i=r);return i}function yt(t,e){const n=new E;if(void 0===e)for(let e of t)null!=e&&e>=e&&n.set(e,(n.get(e)||0)+1);else{let i=-1;for(let r of t)null!=(r=e(r,++i,t))&&r>=r&&n.set(r,(n.get(r)||0)+1)}let i,r=0;for(const[t,e]of n)e>r&&(r=e,i=t);return i}function bt(t,e=_t){const n=[];let i,r=!1;for(const o of t)r&&n.push(e(i,o)),i=o,r=!0;return n}function _t(t,e){return[t,e]}function wt(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var i=-1,r=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(r);++i<r;)o[i]=t+i*n;return o}function xt(t,e=i){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");let n=Array.from(t);const r=new Float64Array(n.length);2!==e.length&&(n=n.map(e),e=i);const o=(t,i)=>e(n[t],n[i]);let a,s;return Uint32Array.from(n,((t,e)=>e)).sort(e===i?(t,e)=>U(n[t],n[e]):W(o)).forEach(((t,e)=>{const n=o(t,void 0===a?t:a);n>=0?((void 0===a||n>0)&&(a=t,s=e),r[t]=s):r[t]=NaN})),r}function Mt(t,e=i){let n,r=!1;if(1===e.length){let o;for(const a of t){const t=e(a);(r?i(t,o)<0:0===i(t,t))&&(n=a,o=t,r=!0)}}else for(const i of t)(r?e(i,n)<0:0===e(i,i))&&(n=i,r=!0);return n}function Et(t,e=i){if(1===e.length)return vt(t,e);let n,r=-1,o=-1;for(const i of t)++o,(r<0?0===e(i,i):e(i,n)<0)&&(n=i,r=o);return r}function St(t,e=i){let n,r=!1;if(1===e.length){let o;for(const a of t){const t=e(a);(r?i(t,o)>0:0===i(t,t))&&(n=a,o=t,r=!0)}}else for(const i of t)(r?e(i,n)>0:0===e(i,i))&&(n=i,r=!0);return n}function kt(t,e=i){if(1===e.length)return ft(t,e);let n,r=-1,o=-1;for(const i of t)++o,(r<0?0===e(i,i):e(i,n)>0)&&(n=i,r=o);return r}function Ct(t,e){const n=Et(t,e);return n<0?void 0:n}const Tt=Dt(Math.random);function Dt(t){return function(e,n=0,i=e.length){let r=i-(n=+n);for(;r;){const i=t()*r--|0,o=e[r+n];e[r+n]=e[i+n],e[i+n]=o}return e}}function Lt(t,e){let n=0;if(void 0===e)for(let e of t)(e=+e)&&(n+=e);else{let i=-1;for(let r of t)(r=+e(r,++i,t))&&(n+=r)}return n}function At(t){if(!(r=t.length))return[];for(var e=-1,n=at(t,Ot),i=new Array(n);++e<n;)for(var r,o=-1,a=i[e]=new Array(r);++o<r;)a[o]=t[o][e];return i}function Ot(t){return t.length}function Pt(){return At(arguments)}function It(t,e){if("function"!=typeof e)throw new TypeError("test is not a function");let n=-1;for(const i of t)if(!e(i,++n,t))return!1;return!0}function Nt(t,e){if("function"!=typeof e)throw new TypeError("test is not a function");let n=-1;for(const i of t)if(e(i,++n,t))return!0;return!1}function Rt(t,e){if("function"!=typeof e)throw new TypeError("test is not a function");const n=[];let i=-1;for(const r of t)e(r,++i,t)&&n.push(r);return n}function Yt(t,e){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");if("function"!=typeof e)throw new TypeError("mapper is not a function");return Array.from(t,((n,i)=>e(n,i,t)))}function jt(t,e,n){if("function"!=typeof e)throw new TypeError("reducer is not a function");const i=t[Symbol.iterator]();let r,o,a=-1;if(arguments.length<3){if(({done:r,value:n}=i.next()),r)return;++a}for(;({done:r,value:o}=i.next()),!r;)n=e(n,o,++a,t);return n}function Ft(t){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");return Array.from(t).reverse()}function Bt(t,...e){t=new S(t);for(const n of e)for(const e of n)t.delete(e);return t}function zt(t,e){const n=e[Symbol.iterator](),i=new S;for(const e of t){if(i.has(e))return!1;let t,r;for(;({value:t,done:r}=n.next())&&!r;){if(Object.is(e,t))return!1;i.add(t)}}return!0}function Ht(t,...e){t=new S(t),e=e.map(Gt);t:for(const n of t)for(const i of e)if(!i.has(n)){t.delete(n);continue t}return t}function Gt(t){return t instanceof S?t:new S(t)}function Wt(t,e){const n=t[Symbol.iterator](),i=new Set;for(const t of e){const e=Ut(t);if(i.has(e))continue;let r,o;for(;({value:r,done:o}=n.next());){if(o)return!1;const t=Ut(r);if(i.add(t),Object.is(e,t))break}}return!0}function Ut(t){return null!==t&&"object"==typeof t?t.valueOf():t}function Vt(t,e){return Wt(e,t)}function Xt(...t){const e=new S;for(const n of t)for(const t of n)e.add(t);return e}function qt(t){return t}var Kt=1e-6;function $t(t){return"translate("+t+",0)"}function Zt(t){return"translate(0,"+t+")"}function Jt(t){return e=>+t(e)}function Qt(t,e){return e=Math.max(0,t.bandwidth()-2*e)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function te(){return!this.__axis}function ee(t,e){var n=[],i=null,r=null,o=6,a=6,s=3,l="undefined"!=typeof window&&window.devicePixelRatio>1?0:.5,u=1===t||4===t?-1:1,c=4===t||2===t?"x":"y",h=1===t||3===t?$t:Zt;function d(d){var f=null==i?e.ticks?e.ticks.apply(e,n):e.domain():i,p=null==r?e.tickFormat?e.tickFormat.apply(e,n):qt:r,m=Math.max(o,0)+s,g=e.range(),v=+g[0]+l,y=+g[g.length-1]+l,b=(e.bandwidth?Qt:Jt)(e.copy(),l),_=d.selection?d.selection():d,w=_.selectAll(".domain").data([null]),x=_.selectAll(".tick").data(f,e).order(),M=x.exit(),E=x.enter().append("g").attr("class","tick"),S=x.select("line"),k=x.select("text");w=w.merge(w.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),x=x.merge(E),S=S.merge(E.append("line").attr("stroke","currentColor").attr(c+"2",u*o)),k=k.merge(E.append("text").attr("fill","currentColor").attr(c,u*m).attr("dy",1===t?"0em":3===t?"0.71em":"0.32em")),d!==_&&(w=w.transition(d),x=x.transition(d),S=S.transition(d),k=k.transition(d),M=M.transition(d).attr("opacity",Kt).attr("transform",(function(t){return isFinite(t=b(t))?h(t+l):this.getAttribute("transform")})),E.attr("opacity",Kt).attr("transform",(function(t){var e=this.parentNode.__axis;return h((e&&isFinite(e=e(t))?e:b(t))+l)}))),M.remove(),w.attr("d",4===t||2===t?a?"M"+u*a+","+v+"H"+l+"V"+y+"H"+u*a:"M"+l+","+v+"V"+y:a?"M"+v+","+u*a+"V"+l+"H"+y+"V"+u*a:"M"+v+","+l+"H"+y),x.attr("opacity",1).attr("transform",(function(t){return h(b(t)+l)})),S.attr(c+"2",u*o),k.attr(c,u*m).text(p),_.filter(te).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===t?"start":4===t?"end":"middle"),_.each((function(){this.__axis=b}))}return d.scale=function(t){return arguments.length?(e=t,d):e},d.ticks=function(){return n=Array.from(arguments),d},d.tickArguments=function(t){return arguments.length?(n=null==t?[]:Array.from(t),d):n.slice()},d.tickValues=function(t){return arguments.length?(i=null==t?null:Array.from(t),d):i&&i.slice()},d.tickFormat=function(t){return arguments.length?(r=t,d):r},d.tickSize=function(t){return arguments.length?(o=a=+t,d):o},d.tickSizeInner=function(t){return arguments.length?(o=+t,d):o},d.tickSizeOuter=function(t){return arguments.length?(a=+t,d):a},d.tickPadding=function(t){return arguments.length?(s=+t,d):s},d.offset=function(t){return arguments.length?(l=+t,d):l},d}function ne(t){return ee(1,t)}function ie(t){return ee(2,t)}function re(t){return ee(3,t)}function oe(t){return ee(4,t)}var ae=n(92626);function se(){}function le(t){return null==t?se:function(){return this.querySelector(t)}}function ue(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}function ce(){return[]}function he(t){return null==t?ce:function(){return this.querySelectorAll(t)}}function de(t){return function(){return this.matches(t)}}function fe(t){return function(e){return e.matches(t)}}var pe=Array.prototype.find;function me(){return this.firstElementChild}var ge=Array.prototype.filter;function ve(){return Array.from(this.children)}function ye(t){return new Array(t.length)}function be(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function _e(t){return function(){return t}}function we(t,e,n,i,r,o){for(var a,s=0,l=e.length,u=o.length;s<u;++s)(a=e[s])?(a.__data__=o[s],i[s]=a):n[s]=new be(t,o[s]);for(;s<l;++s)(a=e[s])&&(r[s]=a)}function xe(t,e,n,i,r,o,a){var s,l,u,c=new Map,h=e.length,d=o.length,f=new Array(h);for(s=0;s<h;++s)(l=e[s])&&(f[s]=u=a.call(l,l.__data__,s,e)+"",c.has(u)?r[s]=l:c.set(u,l));for(s=0;s<d;++s)u=a.call(t,o[s],s,o)+"",(l=c.get(u))?(i[s]=l,l.__data__=o[s],c.delete(u)):n[s]=new be(t,o[s]);for(s=0;s<h;++s)(l=e[s])&&c.get(f[s])===l&&(r[s]=l)}function Me(t){return t.__data__}function Ee(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function Se(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}be.prototype={constructor:be,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var ke="http://www.w3.org/1999/xhtml";const Ce={svg:"http://www.w3.org/2000/svg",xhtml:ke,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Te(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),Ce.hasOwnProperty(e)?{space:Ce[e],local:t}:t}function De(t){return function(){this.removeAttribute(t)}}function Le(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ae(t,e){return function(){this.setAttribute(t,e)}}function Oe(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Pe(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function Ie(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Ne(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Re(t){return function(){this.style.removeProperty(t)}}function Ye(t,e,n){return function(){this.style.setProperty(t,e,n)}}function je(t,e,n){return function(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function Fe(t,e){return t.style.getPropertyValue(e)||Ne(t).getComputedStyle(t,null).getPropertyValue(e)}function Be(t){return function(){delete this[t]}}function ze(t,e){return function(){this[t]=e}}function He(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function Ge(t){return t.trim().split(/^|\s+/)}function We(t){return t.classList||new Ue(t)}function Ue(t){this._node=t,this._names=Ge(t.getAttribute("class")||"")}function Ve(t,e){for(var n=We(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function Xe(t,e){for(var n=We(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function qe(t){return function(){Ve(this,t)}}function Ke(t){return function(){Xe(this,t)}}function $e(t,e){return function(){(e.apply(this,arguments)?Ve:Xe)(this,t)}}function Ze(){this.textContent=""}function Je(t){return function(){this.textContent=t}}function Qe(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function tn(){this.innerHTML=""}function en(t){return function(){this.innerHTML=t}}function nn(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function rn(){this.nextSibling&&this.parentNode.appendChild(this)}function on(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function an(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===ke&&e.documentElement.namespaceURI===ke?e.createElement(t):e.createElementNS(n,t)}}function sn(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function ln(t){var e=Te(t);return(e.local?sn:an)(e)}function un(){return null}function cn(){var t=this.parentNode;t&&t.removeChild(this)}function hn(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function dn(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function fn(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}function pn(t){return function(){var e=this.__on;if(e){for(var n,i=0,r=-1,o=e.length;i<o;++i)n=e[i],t.type&&n.type!==t.type||n.name!==t.name?e[++r]=n:this.removeEventListener(n.type,n.listener,n.options);++r?e.length=r:delete this.__on}}}function mn(t,e,n){return function(){var i,r=this.__on,o=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(r)for(var a=0,s=r.length;a<s;++a)if((i=r[a]).type===t.type&&i.name===t.name)return this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),void(i.value=e);this.addEventListener(t.type,o,n),i={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(i):this.__on=[i]}}function gn(t,e,n){var i=Ne(t),r=i.CustomEvent;"function"==typeof r?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function vn(t,e){return function(){return gn(this,t,e)}}function yn(t,e){return function(){return gn(this,t,e.apply(this,arguments))}}Ue.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var bn=[null];function _n(t,e){this._groups=t,this._parents=e}function wn(){return new _n([[document.documentElement]],bn)}_n.prototype=wn.prototype={constructor:_n,select:function(t){"function"!=typeof t&&(t=le(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o,a,s=e[r],l=s.length,u=i[r]=new Array(l),c=0;c<l;++c)(o=s[c])&&(a=t.call(o,o.__data__,c,s))&&("__data__"in o&&(a.__data__=o.__data__),u[c]=a);return new _n(i,this._parents)},selectAll:function(t){t="function"==typeof t?function(t){return function(){return ue(t.apply(this,arguments))}}(t):he(t);for(var e=this._groups,n=e.length,i=[],r=[],o=0;o<n;++o)for(var a,s=e[o],l=s.length,u=0;u<l;++u)(a=s[u])&&(i.push(t.call(a,a.__data__,u,s)),r.push(a));return new _n(i,r)},selectChild:function(t){return this.select(null==t?me:function(t){return function(){return pe.call(this.children,t)}}("function"==typeof t?t:fe(t)))},selectChildren:function(t){return this.selectAll(null==t?ve:function(t){return function(){return ge.call(this.children,t)}}("function"==typeof t?t:fe(t)))},filter:function(t){"function"!=typeof t&&(t=de(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o,a=e[r],s=a.length,l=i[r]=[],u=0;u<s;++u)(o=a[u])&&t.call(o,o.__data__,u,a)&&l.push(o);return new _n(i,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,Me);var n=e?xe:we,i=this._parents,r=this._groups;"function"!=typeof t&&(t=_e(t));for(var o=r.length,a=new Array(o),s=new Array(o),l=new Array(o),u=0;u<o;++u){var c=i[u],h=r[u],d=h.length,f=Ee(t.call(c,c&&c.__data__,u,i)),p=f.length,m=s[u]=new Array(p),g=a[u]=new Array(p),v=l[u]=new Array(d);n(c,h,m,g,v,f,e);for(var y,b,_=0,w=0;_<p;++_)if(y=m[_]){for(_>=w&&(w=_+1);!(b=g[w])&&++w<p;);y._next=b||null}}return(a=new _n(a,i))._enter=s,a._exit=l,a},enter:function(){return new _n(this._enter||this._groups.map(ye),this._parents)},exit:function(){return new _n(this._exit||this._groups.map(ye),this._parents)},join:function(t,e,n){var i=this.enter(),r=this,o=this.exit();return"function"==typeof t?(i=t(i))&&(i=i.selection()):i=i.append(t+""),null!=e&&(r=e(r))&&(r=r.selection()),null==n?o.remove():n(o),i&&r?i.merge(r).order():r},merge:function(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,r=n.length,o=i.length,a=Math.min(r,o),s=new Array(r),l=0;l<a;++l)for(var u,c=n[l],h=i[l],d=c.length,f=s[l]=new Array(d),p=0;p<d;++p)(u=c[p]||h[p])&&(f[p]=u);for(;l<r;++l)s[l]=n[l];return new _n(s,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i,r=t[e],o=r.length-1,a=r[o];--o>=0;)(i=r[o])&&(a&&4^i.compareDocumentPosition(a)&&a.parentNode.insertBefore(i,a),a=i);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=Se);for(var n=this._groups,i=n.length,r=new Array(i),o=0;o<i;++o){for(var a,s=n[o],l=s.length,u=r[o]=new Array(l),c=0;c<l;++c)(a=s[c])&&(u[c]=a);u.sort(e)}return new _n(r,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,o=i.length;r<o;++r){var a=i[r];if(a)return a}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r,o=e[n],a=0,s=o.length;a<s;++a)(r=o[a])&&t.call(r,r.__data__,a,o);return this},attr:function(t,e){var n=Te(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==e?n.local?Le:De:"function"==typeof e?n.local?Ie:Pe:n.local?Oe:Ae)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?Re:"function"==typeof e?je:Ye)(t,e,null==n?"":n)):Fe(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?Be:"function"==typeof e?He:ze)(t,e)):this.node()[t]},classed:function(t,e){var n=Ge(t+"");if(arguments.length<2){for(var i=We(this.node()),r=-1,o=n.length;++r<o;)if(!i.contains(n[r]))return!1;return!0}return this.each(("function"==typeof e?$e:e?qe:Ke)(n,e))},text:function(t){return arguments.length?this.each(null==t?Ze:("function"==typeof t?Qe:Je)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?tn:("function"==typeof t?nn:en)(t)):this.node().innerHTML},raise:function(){return this.each(rn)},lower:function(){return this.each(on)},append:function(t){var e="function"==typeof t?t:ln(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:ln(t),i=null==e?un:"function"==typeof e?e:le(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)}))},remove:function(){return this.each(cn)},clone:function(t){return this.select(t?dn:hn)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var i,r,o=fn(t+""),a=o.length;if(!(arguments.length<2)){for(s=e?mn:pn,i=0;i<a;++i)this.each(s(o[i],e,n));return this}var s=this.node().__on;if(s)for(var l,u=0,c=s.length;u<c;++u)for(i=0,l=s[u];i<a;++i)if((r=o[i]).type===l.type&&r.name===l.name)return l.value},dispatch:function(t,e){return this.each(("function"==typeof e?yn:vn)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i,r=t[e],o=0,a=r.length;o<a;++o)(i=r[o])&&(yield i)}};const xn=wn;function Mn(t){return"string"==typeof t?new _n([[document.querySelector(t)]],[document.documentElement]):new _n([[t]],bn)}const En={passive:!1},Sn={capture:!0,passive:!1};function kn(t){t.stopImmediatePropagation()}function Cn(t){t.preventDefault(),t.stopImmediatePropagation()}function Tn(t){var e=t.document.documentElement,n=Mn(t).on("dragstart.drag",Cn,Sn);"onselectstart"in e?n.on("selectstart.drag",Cn,Sn):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Dn(t,e){var n=t.document.documentElement,i=Mn(t).on("dragstart.drag",null);e&&(i.on("click.drag",Cn,Sn),setTimeout((function(){i.on("click.drag",null)}),0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var Ln=n(81655);function An(t){let e;for(;e=t.sourceEvent;)t=e;return t}function On(t,e){if(t=An(t),void 0===e&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,[(i=i.matrixTransform(e.getScreenCTM().inverse())).x,i.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return[t.pageX,t.pageY]}var Pn=n(35374);function In(t,e,n){var i=new Pn.B7;return e=null==e?0:+e,i.restart((function(n){i.stop(),t(n+e)}),e,n),i}var Nn=(0,ae.Z)("start","end","cancel","interrupt"),Rn=[];function Yn(t,e,n,i,r,o){var a=t.__transition;if(a){if(n in a)return}else t.__transition={};!function(t,e,n){var i,r=t.__transition;function o(t){n.state=1,n.timer.restart(a,n.delay,n.time),n.delay<=t&&a(t-n.delay)}function a(o){var u,c,h,d;if(1!==n.state)return l();for(u in r)if((d=r[u]).name===n.name){if(3===d.state)return In(a);4===d.state?(d.state=6,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete r[u]):+u<e&&(d.state=6,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete r[u])}if(In((function(){3===n.state&&(n.state=4,n.timer.restart(s,n.delay,n.time),s(o))})),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,i=new Array(h=n.tween.length),u=0,c=-1;u<h;++u)(d=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(i[++c]=d);i.length=c+1}}function s(e){for(var r=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(l),n.state=5,1),o=-1,a=i.length;++o<a;)i[o].call(t,r);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){for(var i in n.state=6,n.timer.stop(),delete r[e],r)return;delete t.__transition}r[e]=n,n.timer=(0,Pn.HT)(o,0,n.time)}(t,n,{name:e,index:i,group:r,on:Nn,tween:Rn,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})}function jn(t,e){var n=Bn(t,e);if(n.state>0)throw new Error("too late; already scheduled");return n}function Fn(t,e){var n=Bn(t,e);if(n.state>3)throw new Error("too late; already running");return n}function Bn(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function zn(t,e){var n,i,r,o=t.__transition,a=!0;if(o){for(r in e=null==e?null:e+"",o)(n=o[r]).name===e?(i=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(i?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete o[r]):a=!1;a&&delete t.__transition}}var Hn,Gn,Wn,Un,Vn=n(73626),Xn=180/Math.PI,qn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Kn(t,e,n,i,r,o){var a,s,l;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(l=t*n+e*i)&&(n-=t*l,i-=e*l),(s=Math.sqrt(n*n+i*i))&&(n/=s,i/=s,l/=s),t*i<e*n&&(t=-t,e=-e,l=-l,a=-a),{translateX:r,translateY:o,rotate:Math.atan2(e,t)*Xn,skewX:Math.atan(l)*Xn,scaleX:a,scaleY:s}}function $n(t,e,n,i){function r(t){return t.length?t.pop()+" ":""}return function(o,a){var s=[],l=[];return o=t(o),a=t(a),function(t,i,r,o,a,s){if(t!==r||i!==o){var l=a.push("translate(",null,e,null,n);s.push({i:l-4,x:(0,Vn.Z)(t,r)},{i:l-2,x:(0,Vn.Z)(i,o)})}else(r||o)&&a.push("translate("+r+e+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,s,l),function(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(r(n)+"rotate(",null,i)-2,x:(0,Vn.Z)(t,e)})):e&&n.push(r(n)+"rotate("+e+i)}(o.rotate,a.rotate,s,l),function(t,e,n,o){t!==e?o.push({i:n.push(r(n)+"skewX(",null,i)-2,x:(0,Vn.Z)(t,e)}):e&&n.push(r(n)+"skewX("+e+i)}(o.skewX,a.skewX,s,l),function(t,e,n,i,o,a){if(t!==n||e!==i){var s=o.push(r(o)+"scale(",null,",",null,")");a.push({i:s-4,x:(0,Vn.Z)(t,n)},{i:s-2,x:(0,Vn.Z)(e,i)})}else 1===n&&1===i||o.push(r(o)+"scale("+n+","+i+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,s,l),o=a=null,function(t){for(var e,n=-1,i=l.length;++n<i;)s[(e=l[n]).i]=e.x(t);return s.join("")}}}var Zn=$n((function(t){return"none"===t?qn:(Hn||(Hn=document.createElement("DIV"),Gn=document.documentElement,Wn=document.defaultView),Hn.style.transform=t,t=Wn.getComputedStyle(Gn.appendChild(Hn),null).getPropertyValue("transform"),Gn.removeChild(Hn),Kn(+(t=t.slice(7,-1).split(","))[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}),"px, ","px)","deg)"),Jn=$n((function(t){return null==t?qn:(Un||(Un=document.createElementNS("http://www.w3.org/2000/svg","g")),Un.setAttribute("transform",t),(t=Un.transform.baseVal.consolidate())?Kn((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):qn)}),", ",")",")");function Qn(t,e){var n,i;return function(){var r=Fn(this,t),o=r.tween;if(o!==n)for(var a=0,s=(i=n=o).length;a<s;++a)if(i[a].name===e){(i=i.slice()).splice(a,1);break}r.tween=i}}function ti(t,e,n){var i,r;if("function"!=typeof n)throw new Error;return function(){var o=Fn(this,t),a=o.tween;if(a!==i){r=(i=a).slice();for(var s={name:e,value:n},l=0,u=r.length;l<u;++l)if(r[l].name===e){r[l]=s;break}l===u&&r.push(s)}o.tween=r}}function ei(t,e,n){var i=t._id;return t.each((function(){var t=Fn(this,i);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return Bn(t,i).value[e]}}var ni=n(16372),ii=n(3474),ri=n(59843);function oi(t,e){var n;return("number"==typeof e?Vn.Z:e instanceof ni.ZP?ii.ZP:(n=(0,ni.ZP)(e))?(e=n,ii.ZP):ri.Z)(t,e)}function ai(t){return function(){this.removeAttribute(t)}}function si(t){return function(){this.removeAttributeNS(t.space,t.local)}}function li(t,e,n){var i,r,o=n+"";return function(){var a=this.getAttribute(t);return a===o?null:a===i?r:r=e(i=a,n)}}function ui(t,e,n){var i,r,o=n+"";return function(){var a=this.getAttributeNS(t.space,t.local);return a===o?null:a===i?r:r=e(i=a,n)}}function ci(t,e,n){var i,r,o;return function(){var a,s,l=n(this);if(null!=l)return(a=this.getAttribute(t))===(s=l+"")?null:a===i&&s===r?o:(r=s,o=e(i=a,l));this.removeAttribute(t)}}function hi(t,e,n){var i,r,o;return function(){var a,s,l=n(this);if(null!=l)return(a=this.getAttributeNS(t.space,t.local))===(s=l+"")?null:a===i&&s===r?o:(r=s,o=e(i=a,l));this.removeAttributeNS(t.space,t.local)}}function di(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function fi(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function pi(t,e){var n,i;function r(){var r=e.apply(this,arguments);return r!==i&&(n=(i=r)&&fi(t,r)),n}return r._value=e,r}function mi(t,e){var n,i;function r(){var r=e.apply(this,arguments);return r!==i&&(n=(i=r)&&di(t,r)),n}return r._value=e,r}function gi(t,e){return function(){jn(this,t).delay=+e.apply(this,arguments)}}function vi(t,e){return e=+e,function(){jn(this,t).delay=e}}function yi(t,e){return function(){Fn(this,t).duration=+e.apply(this,arguments)}}function bi(t,e){return e=+e,function(){Fn(this,t).duration=e}}function _i(t,e){if("function"!=typeof e)throw new Error;return function(){Fn(this,t).ease=e}}function wi(t,e,n){var i,r,o=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?jn:Fn;return function(){var a=o(this,t),s=a.on;s!==i&&(r=(i=s).copy()).on(e,n),a.on=r}}var xi=xn.prototype.constructor;function Mi(t){return function(){this.style.removeProperty(t)}}function Ei(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function Si(t,e,n){var i,r;function o(){var o=e.apply(this,arguments);return o!==r&&(i=(r=o)&&Ei(t,o,n)),i}return o._value=e,o}function ki(t){return function(e){this.textContent=t.call(this,e)}}function Ci(t){var e,n;function i(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&ki(i)),e}return i._value=t,i}var Ti=0;function Di(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function Li(t){return xn().transition(t)}function Ai(){return++Ti}var Oi=xn.prototype;Di.prototype=Li.prototype={constructor:Di,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=le(t));for(var i=this._groups,r=i.length,o=new Array(r),a=0;a<r;++a)for(var s,l,u=i[a],c=u.length,h=o[a]=new Array(c),d=0;d<c;++d)(s=u[d])&&(l=t.call(s,s.__data__,d,u))&&("__data__"in s&&(l.__data__=s.__data__),h[d]=l,Yn(h[d],e,n,d,h,Bn(s,n)));return new Di(o,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=he(t));for(var i=this._groups,r=i.length,o=[],a=[],s=0;s<r;++s)for(var l,u=i[s],c=u.length,h=0;h<c;++h)if(l=u[h]){for(var d,f=t.call(l,l.__data__,h,u),p=Bn(l,n),m=0,g=f.length;m<g;++m)(d=f[m])&&Yn(d,e,n,m,f,p);o.push(f),a.push(l)}return new Di(o,a,e,n)},selectChild:Oi.selectChild,selectChildren:Oi.selectChildren,filter:function(t){"function"!=typeof t&&(t=de(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o,a=e[r],s=a.length,l=i[r]=[],u=0;u<s;++u)(o=a[u])&&t.call(o,o.__data__,u,a)&&l.push(o);return new Di(i,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,r=n.length,o=Math.min(i,r),a=new Array(i),s=0;s<o;++s)for(var l,u=e[s],c=n[s],h=u.length,d=a[s]=new Array(h),f=0;f<h;++f)(l=u[f]||c[f])&&(d[f]=l);for(;s<i;++s)a[s]=e[s];return new Di(a,this._parents,this._name,this._id)},selection:function(){return new xi(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=Ai(),i=this._groups,r=i.length,o=0;o<r;++o)for(var a,s=i[o],l=s.length,u=0;u<l;++u)if(a=s[u]){var c=Bn(a,e);Yn(a,t,n,u,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Di(i,this._parents,t,n)},call:Oi.call,nodes:Oi.nodes,node:Oi.node,size:Oi.size,empty:Oi.empty,each:Oi.each,on:function(t,e){var n=this._id;return arguments.length<2?Bn(this.node(),n).on.on(t):this.each(wi(n,t,e))},attr:function(t,e){var n=Te(t),i="transform"===n?Jn:oi;return this.attrTween(t,"function"==typeof e?(n.local?hi:ci)(n,i,ei(this,"attr."+t,e)):null==e?(n.local?si:ai)(n):(n.local?ui:li)(n,i,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var i=Te(t);return this.tween(n,(i.local?pi:mi)(i,e))},style:function(t,e,n){var i="transform"==(t+="")?Zn:oi;return null==e?this.styleTween(t,function(t,e){var n,i,r;return function(){var o=Fe(this,t),a=(this.style.removeProperty(t),Fe(this,t));return o===a?null:o===n&&a===i?r:r=e(n=o,i=a)}}(t,i)).on("end.style."+t,Mi(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var i,r,o;return function(){var a=Fe(this,t),s=n(this),l=s+"";return null==s&&(this.style.removeProperty(t),l=s=Fe(this,t)),a===l?null:a===i&&l===r?o:(r=l,o=e(i=a,s))}}(t,i,ei(this,"style."+t,e))).each(function(t,e){var n,i,r,o,a="style."+e,s="end."+a;return function(){var l=Fn(this,t),u=l.on,c=null==l.value[a]?o||(o=Mi(e)):void 0;u===n&&r===c||(i=(n=u).copy()).on(s,r=c),l.on=i}}(this._id,t)):this.styleTween(t,function(t,e,n){var i,r,o=n+"";return function(){var a=Fe(this,t);return a===o?null:a===i?r:r=e(i=a,n)}}(t,i,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==e)return this.tween(i,null);if("function"!=typeof e)throw new Error;return this.tween(i,Si(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(ei(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,Ci(t))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i,r=Bn(this.node(),n).tween,o=0,a=r.length;o<a;++o)if((i=r[o]).name===t)return i.value;return null}return this.each((null==e?Qn:ti)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?gi:vi)(e,t)):Bn(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?yi:bi)(e,t)):Bn(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(_i(e,t)):Bn(this.node(),e).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each(function(t,e){return function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw new Error;Fn(this,t).ease=n}}(this._id,t))},end:function(){var t,e,n=this,i=n._id,r=n.size();return new Promise((function(o,a){var s={value:a},l={value:function(){0==--r&&o()}};n.each((function(){var n=Fn(this,i),r=n.on;r!==t&&((e=(t=r).copy())._.cancel.push(s),e._.interrupt.push(s),e._.end.push(l)),n.on=e})),0===r&&o()}))},[Symbol.iterator]:Oi[Symbol.iterator]};var Pi={time:null,delay:0,duration:250,ease:n(68716).tw};function Ii(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}xn.prototype.interrupt=function(t){return this.each((function(){zn(this,t)}))},xn.prototype.transition=function(t){var e,n;t instanceof Di?(e=t._id,t=t._name):(e=Ai(),(n=Pi).time=(0,Pn.zO)(),t=null==t?null:t+"");for(var i=this._groups,r=i.length,o=0;o<r;++o)for(var a,s=i[o],l=s.length,u=0;u<l;++u)(a=s[u])&&Yn(a,t,e,u,s,n||Ii(a,e));return new Di(i,this._parents,t,e)};var Ni=[null];function Ri(t,e){var n,i,r=t.__transition;if(r)for(i in e=null==e?null:e+"",r)if((n=r[i]).state>1&&n.name===e)return new Di([[t]],Ni,e,+i);return null}const Yi=t=>()=>t;function ji(t,{sourceEvent:e,target:n,selection:i,mode:r,dispatch:o}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:i,enumerable:!0,configurable:!0},mode:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function Fi(t){t.stopImmediatePropagation()}function Bi(t){t.preventDefault(),t.stopImmediatePropagation()}var zi={name:"drag"},Hi={name:"space"},Gi={name:"handle"},Wi={name:"center"};const{abs:Ui,max:Vi,min:Xi}=Math;function qi(t){return[+t[0],+t[1]]}function Ki(t){return[qi(t[0]),qi(t[1])]}var $i={name:"x",handles:["w","e"].map(rr),input:function(t,e){return null==t?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},Zi={name:"y",handles:["n","s"].map(rr),input:function(t,e){return null==t?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},Ji={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(rr),input:function(t){return null==t?null:Ki(t)},output:function(t){return t}},Qi={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},tr={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},er={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},nr={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},ir={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function rr(t){return{type:t}}function or(t){return!t.ctrlKey&&!t.button}function ar(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function sr(){return navigator.maxTouchPoints||"ontouchstart"in this}function lr(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function ur(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function cr(t){var e=t.__brush;return e?e.dim.output(e.selection):null}function hr(){return pr($i)}function dr(){return pr(Zi)}function fr(){return pr(Ji)}function pr(t){var e,n=ar,i=or,r=sr,o=!0,a=(0,ae.Z)("start","brush","end"),s=6;function l(e){var n=e.property("__brush",m).selectAll(".overlay").data([rr("overlay")]);n.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Qi.overlay).merge(n).each((function(){var t=lr(this).extent;Mn(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])})),e.selectAll(".selection").data([rr("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Qi.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var i=e.selectAll(".handle").data(t.handles,(function(t){return t.type}));i.exit().remove(),i.enter().append("rect").attr("class",(function(t){return"handle handle--"+t.type})).attr("cursor",(function(t){return Qi[t.type]})),e.each(u).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(r).on("touchstart.brush",d).on("touchmove.brush",f).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function u(){var t=Mn(this),e=lr(this).selection;e?(t.selectAll(".selection").style("display",null).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1]),t.selectAll(".handle").style("display",null).attr("x",(function(t){return"e"===t.type[t.type.length-1]?e[1][0]-s/2:e[0][0]-s/2})).attr("y",(function(t){return"s"===t.type[0]?e[1][1]-s/2:e[0][1]-s/2})).attr("width",(function(t){return"n"===t.type||"s"===t.type?e[1][0]-e[0][0]+s:s})).attr("height",(function(t){return"e"===t.type||"w"===t.type?e[1][1]-e[0][1]+s:s}))):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(t,e,n){var i=t.__brush.emitter;return!i||n&&i.clean?new h(t,e,n):i}function h(t,e,n){this.that=t,this.args=e,this.state=t.__brush,this.active=0,this.clean=n}function d(n){if((!e||n.touches)&&i.apply(this,arguments)){var r,a,s,l,h,d,f,p,m,g,v,y=this,b=n.target.__data__.type,_="selection"===(o&&n.metaKey?b="overlay":b)?zi:o&&n.altKey?Wi:Gi,w=t===Zi?null:nr[b],x=t===$i?null:ir[b],M=lr(y),E=M.extent,S=M.selection,k=E[0][0],C=E[0][1],T=E[1][0],D=E[1][1],L=0,A=0,O=w&&x&&o&&n.shiftKey,P=Array.from(n.touches||[n],(t=>{const e=t.identifier;return(t=On(t,y)).point0=t.slice(),t.identifier=e,t}));zn(y);var I=c(y,arguments,!0).beforestart();if("overlay"===b){S&&(m=!0);const e=[P[0],P[1]||P[0]];M.selection=S=[[r=t===Zi?k:Xi(e[0][0],e[1][0]),s=t===$i?C:Xi(e[0][1],e[1][1])],[h=t===Zi?T:Vi(e[0][0],e[1][0]),f=t===$i?D:Vi(e[0][1],e[1][1])]],P.length>1&&F(n)}else r=S[0][0],s=S[0][1],h=S[1][0],f=S[1][1];a=r,l=s,d=h,p=f;var N=Mn(y).attr("pointer-events","none"),R=N.selectAll(".overlay").attr("cursor",Qi[b]);if(n.touches)I.moved=j,I.ended=B;else{var Y=Mn(n.view).on("mousemove.brush",j,!0).on("mouseup.brush",B,!0);o&&Y.on("keydown.brush",z,!0).on("keyup.brush",H,!0),Tn(n.view)}u.call(y),I.start(n,_.name)}function j(t){for(const e of t.changedTouches||[t])for(const t of P)t.identifier===e.identifier&&(t.cur=On(e,y));if(O&&!g&&!v&&1===P.length){const t=P[0];Ui(t.cur[0]-t[0])>Ui(t.cur[1]-t[1])?v=!0:g=!0}for(const t of P)t.cur&&(t[0]=t.cur[0],t[1]=t.cur[1]);m=!0,Bi(t),F(t)}function F(t){const e=P[0],n=e.point0;var i;switch(L=e[0]-n[0],A=e[1]-n[1],_){case Hi:case zi:w&&(L=Vi(k-r,Xi(T-h,L)),a=r+L,d=h+L),x&&(A=Vi(C-s,Xi(D-f,A)),l=s+A,p=f+A);break;case Gi:P[1]?(w&&(a=Vi(k,Xi(T,P[0][0])),d=Vi(k,Xi(T,P[1][0])),w=1),x&&(l=Vi(C,Xi(D,P[0][1])),p=Vi(C,Xi(D,P[1][1])),x=1)):(w<0?(L=Vi(k-r,Xi(T-r,L)),a=r+L,d=h):w>0&&(L=Vi(k-h,Xi(T-h,L)),a=r,d=h+L),x<0?(A=Vi(C-s,Xi(D-s,A)),l=s+A,p=f):x>0&&(A=Vi(C-f,Xi(D-f,A)),l=s,p=f+A));break;case Wi:w&&(a=Vi(k,Xi(T,r-L*w)),d=Vi(k,Xi(T,h+L*w))),x&&(l=Vi(C,Xi(D,s-A*x)),p=Vi(C,Xi(D,f+A*x)))}d<a&&(w*=-1,i=r,r=h,h=i,i=a,a=d,d=i,b in tr&&R.attr("cursor",Qi[b=tr[b]])),p<l&&(x*=-1,i=s,s=f,f=i,i=l,l=p,p=i,b in er&&R.attr("cursor",Qi[b=er[b]])),M.selection&&(S=M.selection),g&&(a=S[0][0],d=S[1][0]),v&&(l=S[0][1],p=S[1][1]),S[0][0]===a&&S[0][1]===l&&S[1][0]===d&&S[1][1]===p||(M.selection=[[a,l],[d,p]],u.call(y),I.brush(t,_.name))}function B(t){if(Fi(t),t.touches){if(t.touches.length)return;e&&clearTimeout(e),e=setTimeout((function(){e=null}),500)}else Dn(t.view,m),Y.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);N.attr("pointer-events","all"),R.attr("cursor",Qi.overlay),M.selection&&(S=M.selection),ur(S)&&(M.selection=null,u.call(y)),I.end(t,_.name)}function z(t){switch(t.keyCode){case 16:O=w&&x;break;case 18:_===Gi&&(w&&(h=d-L*w,r=a+L*w),x&&(f=p-A*x,s=l+A*x),_=Wi,F(t));break;case 32:_!==Gi&&_!==Wi||(w<0?h=d-L:w>0&&(r=a-L),x<0?f=p-A:x>0&&(s=l-A),_=Hi,R.attr("cursor",Qi.selection),F(t));break;default:return}Bi(t)}function H(t){switch(t.keyCode){case 16:O&&(g=v=O=!1,F(t));break;case 18:_===Wi&&(w<0?h=d:w>0&&(r=a),x<0?f=p:x>0&&(s=l),_=Gi,F(t));break;case 32:_===Hi&&(t.altKey?(w&&(h=d-L*w,r=a+L*w),x&&(f=p-A*x,s=l+A*x),_=Wi):(w<0?h=d:w>0&&(r=a),x<0?f=p:x>0&&(s=l),_=Gi),R.attr("cursor",Qi[b]),F(t));break;default:return}Bi(t)}}function f(t){c(this,arguments).moved(t)}function p(t){c(this,arguments).ended(t)}function m(){var e=this.__brush||{selection:null};return e.extent=Ki(n.apply(this,arguments)),e.dim=t,e}return l.move=function(e,n,i){e.tween?e.on("start.brush",(function(t){c(this,arguments).beforestart().start(t)})).on("interrupt.brush end.brush",(function(t){c(this,arguments).end(t)})).tween("brush",(function(){var e=this,i=e.__brush,r=c(e,arguments),o=i.selection,a=t.input("function"==typeof n?n.apply(this,arguments):n,i.extent),s=(0,Ln.Z)(o,a);function l(t){i.selection=1===t&&null===a?null:s(t),u.call(e),r.brush()}return null!==o&&null!==a?l:l(1)})):e.each((function(){var e=this,r=arguments,o=e.__brush,a=t.input("function"==typeof n?n.apply(e,r):n,o.extent),s=c(e,r).beforestart();zn(e),o.selection=null===a?null:a,u.call(e),s.start(i).brush(i).end(i)}))},l.clear=function(t,e){l.move(t,null,e)},h.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(t,e){return this.starting?(this.starting=!1,this.emit("start",t,e)):this.emit("brush",t),this},brush:function(t,e){return this.emit("brush",t,e),this},end:function(t,e){return 0==--this.active&&(delete this.state.emitter,this.emit("end",t,e)),this},emit:function(e,n,i){var r=Mn(this.that).datum();a.call(e,this.that,new ji(e,{sourceEvent:n,target:l,selection:t.output(this.state.selection),mode:i,dispatch:a}),r)}},l.extent=function(t){return arguments.length?(n="function"==typeof t?t:Yi(Ki(t)),l):n},l.filter=function(t){return arguments.length?(i="function"==typeof t?t:Yi(!!t),l):i},l.touchable=function(t){return arguments.length?(r="function"==typeof t?t:Yi(!!t),l):r},l.handleSize=function(t){return arguments.length?(s=+t,l):s},l.keyModifiers=function(t){return arguments.length?(o=!!t,l):o},l.on=function(){var t=a.on.apply(a,arguments);return t===a?l:t},l}var mr=Math.abs,gr=Math.cos,vr=Math.sin,yr=Math.PI,br=yr/2,_r=2*yr,wr=Math.max,xr=1e-12;function Mr(t,e){return Array.from({length:e-t},((e,n)=>t+n))}function Er(t){return function(e,n){return t(e.source.value+e.target.value,n.source.value+n.target.value)}}function Sr(){return Tr(!1,!1)}function kr(){return Tr(!1,!0)}function Cr(){return Tr(!0,!1)}function Tr(t,e){var n=0,i=null,r=null,o=null;function a(a){var s,l=a.length,u=new Array(l),c=Mr(0,l),h=new Array(l*l),d=new Array(l),f=0;a=Float64Array.from({length:l*l},e?(t,e)=>a[e%l][e/l|0]:(t,e)=>a[e/l|0][e%l]);for(let e=0;e<l;++e){let n=0;for(let i=0;i<l;++i)n+=a[e*l+i]+t*a[i*l+e];f+=u[e]=n}s=(f=wr(0,_r-n*l)/f)?n:_r/l;{let e=0;i&&c.sort(((t,e)=>i(u[t],u[e])));for(const n of c){const i=e;if(t){const t=Mr(1+~l,l).filter((t=>t<0?a[~t*l+n]:a[n*l+t]));r&&t.sort(((t,e)=>r(t<0?-a[~t*l+n]:a[n*l+t],e<0?-a[~e*l+n]:a[n*l+e])));for(const i of t)if(i<0){(h[~i*l+n]||(h[~i*l+n]={source:null,target:null})).target={index:n,startAngle:e,endAngle:e+=a[~i*l+n]*f,value:a[~i*l+n]}}else{(h[n*l+i]||(h[n*l+i]={source:null,target:null})).source={index:n,startAngle:e,endAngle:e+=a[n*l+i]*f,value:a[n*l+i]}}d[n]={index:n,startAngle:i,endAngle:e,value:u[n]}}else{const t=Mr(0,l).filter((t=>a[n*l+t]||a[t*l+n]));r&&t.sort(((t,e)=>r(a[n*l+t],a[n*l+e])));for(const i of t){let t;if(n<i?(t=h[n*l+i]||(h[n*l+i]={source:null,target:null}),t.source={index:n,startAngle:e,endAngle:e+=a[n*l+i]*f,value:a[n*l+i]}):(t=h[i*l+n]||(h[i*l+n]={source:null,target:null}),t.target={index:n,startAngle:e,endAngle:e+=a[n*l+i]*f,value:a[n*l+i]},n===i&&(t.source=t.target)),t.source&&t.target&&t.source.value<t.target.value){const e=t.source;t.source=t.target,t.target=e}}d[n]={index:n,startAngle:i,endAngle:e,value:u[n]}}e+=s}}return(h=Object.values(h)).groups=d,o?h.sort(o):h}return a.padAngle=function(t){return arguments.length?(n=wr(0,t),a):n},a.sortGroups=function(t){return arguments.length?(i=t,a):i},a.sortSubgroups=function(t){return arguments.length?(r=t,a):r},a.sortChords=function(t){return arguments.length?(null==t?o=null:(o=Er(t))._=t,a):o&&o._},a}const Dr=Math.PI,Lr=2*Dr,Ar=1e-6,Or=Lr-Ar;function Pr(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Ir(){return new Pr}Pr.prototype=Ir.prototype={constructor:Pr,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,i){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+i)},bezierCurveTo:function(t,e,n,i,r,o){this._+="C"+ +t+","+ +e+","+ +n+","+ +i+","+(this._x1=+r)+","+(this._y1=+o)},arcTo:function(t,e,n,i,r){t=+t,e=+e,n=+n,i=+i,r=+r;var o=this._x1,a=this._y1,s=n-t,l=i-e,u=o-t,c=a-e,h=u*u+c*c;if(r<0)throw new Error("negative radius: "+r);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(h>Ar)if(Math.abs(c*s-l*u)>Ar&&r){var d=n-o,f=i-a,p=s*s+l*l,m=d*d+f*f,g=Math.sqrt(p),v=Math.sqrt(h),y=r*Math.tan((Dr-Math.acos((p+h-m)/(2*g*v)))/2),b=y/v,_=y/g;Math.abs(b-1)>Ar&&(this._+="L"+(t+b*u)+","+(e+b*c)),this._+="A"+r+","+r+",0,0,"+ +(c*d>u*f)+","+(this._x1=t+_*s)+","+(this._y1=e+_*l)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,n,i,r,o){t=+t,e=+e,o=!!o;var a=(n=+n)*Math.cos(i),s=n*Math.sin(i),l=t+a,u=e+s,c=1^o,h=o?i-r:r-i;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+l+","+u:(Math.abs(this._x1-l)>Ar||Math.abs(this._y1-u)>Ar)&&(this._+="L"+l+","+u),n&&(h<0&&(h=h%Lr+Lr),h>Or?this._+="A"+n+","+n+",0,1,"+c+","+(t-a)+","+(e-s)+"A"+n+","+n+",0,1,"+c+","+(this._x1=l)+","+(this._y1=u):h>Ar&&(this._+="A"+n+","+n+",0,"+ +(h>=Dr)+","+c+","+(this._x1=t+n*Math.cos(r))+","+(this._y1=e+n*Math.sin(r))))},rect:function(t,e,n,i){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +i+"h"+-n+"Z"},toString:function(){return this._}};const Nr=Ir;var Rr=Array.prototype.slice;function Yr(t){return function(){return t}}function jr(t){return t.source}function Fr(t){return t.target}function Br(t){return t.radius}function zr(t){return t.startAngle}function Hr(t){return t.endAngle}function Gr(){return 0}function Wr(){return 10}function Ur(t){var e=jr,n=Fr,i=Br,r=Br,o=zr,a=Hr,s=Gr,l=null;function u(){var u,c=e.apply(this,arguments),h=n.apply(this,arguments),d=s.apply(this,arguments)/2,f=Rr.call(arguments),p=+i.apply(this,(f[0]=c,f)),m=o.apply(this,f)-br,g=a.apply(this,f)-br,v=+r.apply(this,(f[0]=h,f)),y=o.apply(this,f)-br,b=a.apply(this,f)-br;if(l||(l=u=Nr()),d>xr&&(mr(g-m)>2*d+xr?g>m?(m+=d,g-=d):(m-=d,g+=d):m=g=(m+g)/2,mr(b-y)>2*d+xr?b>y?(y+=d,b-=d):(y-=d,b+=d):y=b=(y+b)/2),l.moveTo(p*gr(m),p*vr(m)),l.arc(0,0,p,m,g),m!==y||g!==b)if(t){var _=+t.apply(this,arguments),w=v-_,x=(y+b)/2;l.quadraticCurveTo(0,0,w*gr(y),w*vr(y)),l.lineTo(v*gr(x),v*vr(x)),l.lineTo(w*gr(b),w*vr(b))}else l.quadraticCurveTo(0,0,v*gr(y),v*vr(y)),l.arc(0,0,v,y,b);if(l.quadraticCurveTo(0,0,p*gr(m),p*vr(m)),l.closePath(),u)return l=null,u+""||null}return t&&(u.headRadius=function(e){return arguments.length?(t="function"==typeof e?e:Yr(+e),u):t}),u.radius=function(t){return arguments.length?(i=r="function"==typeof t?t:Yr(+t),u):i},u.sourceRadius=function(t){return arguments.length?(i="function"==typeof t?t:Yr(+t),u):i},u.targetRadius=function(t){return arguments.length?(r="function"==typeof t?t:Yr(+t),u):r},u.startAngle=function(t){return arguments.length?(o="function"==typeof t?t:Yr(+t),u):o},u.endAngle=function(t){return arguments.length?(a="function"==typeof t?t:Yr(+t),u):a},u.padAngle=function(t){return arguments.length?(s="function"==typeof t?t:Yr(+t),u):s},u.source=function(t){return arguments.length?(e=t,u):e},u.target=function(t){return arguments.length?(n=t,u):n},u.context=function(t){return arguments.length?(l=null==t?null:t,u):l},u}function Vr(){return Ur()}function Xr(){return Ur(Wr)}function qr(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Kr(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function $r(){}var Zr=.7,Jr=1/Zr,Qr="\\s*([+-]?\\d+)\\s*",to="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",eo="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",no=/^#([0-9a-f]{3,8})$/,io=new RegExp("^rgb\\("+[Qr,Qr,Qr]+"\\)$"),ro=new RegExp("^rgb\\("+[eo,eo,eo]+"\\)$"),oo=new RegExp("^rgba\\("+[Qr,Qr,Qr,to]+"\\)$"),ao=new RegExp("^rgba\\("+[eo,eo,eo,to]+"\\)$"),so=new RegExp("^hsl\\("+[to,eo,eo]+"\\)$"),lo=new RegExp("^hsla\\("+[to,eo,eo,to]+"\\)$"),uo={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function co(){return this.rgb().formatHex()}function ho(){return this.rgb().formatRgb()}function fo(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=no.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?po(e):3===n?new yo(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?mo(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?mo(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=io.exec(t))?new yo(e[1],e[2],e[3],1):(e=ro.exec(t))?new yo(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=oo.exec(t))?mo(e[1],e[2],e[3],e[4]):(e=ao.exec(t))?mo(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=so.exec(t))?xo(e[1],e[2]/100,e[3]/100,1):(e=lo.exec(t))?xo(e[1],e[2]/100,e[3]/100,e[4]):uo.hasOwnProperty(t)?po(uo[t]):"transparent"===t?new yo(NaN,NaN,NaN,0):null}function po(t){return new yo(t>>16&255,t>>8&255,255&t,1)}function mo(t,e,n,i){return i<=0&&(t=e=n=NaN),new yo(t,e,n,i)}function go(t){return t instanceof $r||(t=fo(t)),t?new yo((t=t.rgb()).r,t.g,t.b,t.opacity):new yo}function vo(t,e,n,i){return 1===arguments.length?go(t):new yo(t,e,n,null==i?1:i)}function yo(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}function bo(){return"#"+wo(this.r)+wo(this.g)+wo(this.b)}function _o(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function wo(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function xo(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new So(t,e,n,i)}function Mo(t){if(t instanceof So)return new So(t.h,t.s,t.l,t.opacity);if(t instanceof $r||(t=fo(t)),!t)return new So;if(t instanceof So)return t;var e=(t=t.rgb()).r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),o=Math.max(e,n,i),a=NaN,s=o-r,l=(o+r)/2;return s?(a=e===o?(n-i)/s+6*(n<i):n===o?(i-e)/s+2:(e-n)/s+4,s/=l<.5?o+r:2-o-r,a*=60):s=l>0&&l<1?0:a,new So(a,s,l,t.opacity)}function Eo(t,e,n,i){return 1===arguments.length?Mo(t):new So(t,e,n,null==i?1:i)}function So(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function ko(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}qr($r,fo,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:co,formatHex:co,formatHsl:function(){return Mo(this).formatHsl()},formatRgb:ho,toString:ho}),qr(yo,vo,Kr($r,{brighter:function(t){return t=null==t?Jr:Math.pow(Jr,t),new yo(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?Zr:Math.pow(Zr,t),new yo(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:bo,formatHex:bo,formatRgb:_o,toString:_o})),qr(So,Eo,Kr($r,{brighter:function(t){return t=null==t?Jr:Math.pow(Jr,t),new So(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?Zr:Math.pow(Zr,t),new So(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new yo(ko(t>=240?t-240:t+120,r,i),ko(t,r,i),ko(t<120?t+240:t-120,r,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));const Co=Math.PI/180,To=180/Math.PI,Do=.96422,Lo=.82521,Ao=4/29,Oo=6/29,Po=3*Oo*Oo;function Io(t){if(t instanceof Yo)return new Yo(t.l,t.a,t.b,t.opacity);if(t instanceof Uo)return Vo(t);t instanceof yo||(t=go(t));var e,n,i=zo(t.r),r=zo(t.g),o=zo(t.b),a=jo((.2225045*i+.7168786*r+.0606169*o)/1);return i===r&&r===o?e=n=a:(e=jo((.4360747*i+.3850649*r+.1430804*o)/Do),n=jo((.0139322*i+.0971045*r+.7141733*o)/Lo)),new Yo(116*a-16,500*(e-a),200*(a-n),t.opacity)}function No(t,e){return new Yo(t,0,0,null==e?1:e)}function Ro(t,e,n,i){return 1===arguments.length?Io(t):new Yo(t,e,n,null==i?1:i)}function Yo(t,e,n,i){this.l=+t,this.a=+e,this.b=+n,this.opacity=+i}function jo(t){return t>.008856451679035631?Math.pow(t,1/3):t/Po+Ao}function Fo(t){return t>Oo?t*t*t:Po*(t-Ao)}function Bo(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function zo(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Ho(t){if(t instanceof Uo)return new Uo(t.h,t.c,t.l,t.opacity);if(t instanceof Yo||(t=Io(t)),0===t.a&&0===t.b)return new Uo(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*To;return new Uo(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function Go(t,e,n,i){return 1===arguments.length?Ho(t):new Uo(n,e,t,null==i?1:i)}function Wo(t,e,n,i){return 1===arguments.length?Ho(t):new Uo(t,e,n,null==i?1:i)}function Uo(t,e,n,i){this.h=+t,this.c=+e,this.l=+n,this.opacity=+i}function Vo(t){if(isNaN(t.h))return new Yo(t.l,0,0,t.opacity);var e=t.h*Co;return new Yo(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}qr(Yo,Ro,Kr($r,{brighter:function(t){return new Yo(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new Yo(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return new yo(Bo(3.1338561*(e=Do*Fo(e))-1.6168667*(t=1*Fo(t))-.4906146*(n=Lo*Fo(n))),Bo(-.9787684*e+1.9161415*t+.033454*n),Bo(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),qr(Uo,Wo,Kr($r,{brighter:function(t){return new Uo(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new Uo(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return Vo(this).rgb()}}));var Xo=-.14861,qo=1.78277,Ko=-.29227,$o=-.90649,Zo=1.97294,Jo=Zo*$o,Qo=Zo*qo,ta=qo*Ko-$o*Xo;function ea(t){if(t instanceof ia)return new ia(t.h,t.s,t.l,t.opacity);t instanceof yo||(t=go(t));var e=t.r/255,n=t.g/255,i=t.b/255,r=(ta*i+Jo*e-Qo*n)/(ta+Jo-Qo),o=i-r,a=(Zo*(n-r)-Ko*o)/$o,s=Math.sqrt(a*a+o*o)/(Zo*r*(1-r)),l=s?Math.atan2(a,o)*To-120:NaN;return new ia(l<0?l+360:l,s,r,t.opacity)}function na(t,e,n,i){return 1===arguments.length?ea(t):new ia(t,e,n,null==i?1:i)}function ia(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}qr(ia,na,Kr($r,{brighter:function(t){return t=null==t?Jr:Math.pow(Jr,t),new ia(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?Zr:Math.pow(Zr,t),new ia(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*Co,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),i=Math.cos(t),r=Math.sin(t);return new yo(255*(e+n*(Xo*i+qo*r)),255*(e+n*(Ko*i+$o*r)),255*(e+n*(Zo*i)),this.opacity)}}));var ra=Array.prototype.slice;function oa(t,e){return t-e}const aa=t=>()=>t;function sa(t,e){for(var n,i=-1,r=e.length;++i<r;)if(n=la(t,e[i]))return n;return 0}function la(t,e){for(var n=e[0],i=e[1],r=-1,o=0,a=t.length,s=a-1;o<a;s=o++){var l=t[o],u=l[0],c=l[1],h=t[s],d=h[0],f=h[1];if(ua(l,h,e))return 0;c>i!=f>i&&n<(d-u)*(i-c)/(f-c)+u&&(r=-r)}return r}function ua(t,e,n){var i,r,o,a;return function(t,e,n){return(e[0]-t[0])*(n[1]-t[1])==(n[0]-t[0])*(e[1]-t[1])}(t,e,n)&&(r=t[i=+(t[0]===e[0])],o=n[i],a=e[i],r<=o&&o<=a||a<=o&&o<=r)}function ca(){}var ha=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function da(){var t=1,e=1,n=it,i=s;function r(t){var e=n(t);if(Array.isArray(e))e=e.slice().sort(oa);else{const n=_(t),i=et(n[0],n[1],e);e=Q(Math.floor(n[0]/i)*i,Math.floor(n[1]/i-1)*i,e)}return e.map((e=>o(t,e)))}function o(n,r){var o=[],s=[];return function(n,i,r){var o,s,l,u,c,h,d=new Array,f=new Array;o=s=-1,u=n[0]>=i,ha[u<<1].forEach(p);for(;++o<t-1;)l=u,u=n[o+1]>=i,ha[l|u<<1].forEach(p);ha[u<<0].forEach(p);for(;++s<e-1;){for(o=-1,u=n[s*t+t]>=i,c=n[s*t]>=i,ha[u<<1|c<<2].forEach(p);++o<t-1;)l=u,u=n[s*t+t+o+1]>=i,h=c,c=n[s*t+o+1]>=i,ha[l|u<<1|c<<2|h<<3].forEach(p);ha[u|c<<3].forEach(p)}o=-1,c=n[s*t]>=i,ha[c<<2].forEach(p);for(;++o<t-1;)h=c,c=n[s*t+o+1]>=i,ha[c<<2|h<<3].forEach(p);function p(t){var e,n,i=[t[0][0]+o,t[0][1]+s],l=[t[1][0]+o,t[1][1]+s],u=a(i),c=a(l);(e=f[u])?(n=d[c])?(delete f[e.end],delete d[n.start],e===n?(e.ring.push(l),r(e.ring)):d[e.start]=f[n.end]={start:e.start,end:n.end,ring:e.ring.concat(n.ring)}):(delete f[e.end],e.ring.push(l),f[e.end=c]=e):(e=d[c])?(n=f[u])?(delete d[e.start],delete f[n.end],e===n?(e.ring.push(l),r(e.ring)):d[n.start]=f[e.end]={start:n.start,end:e.end,ring:n.ring.concat(e.ring)}):(delete d[e.start],e.ring.unshift(i),d[e.start=u]=e):d[u]=f[c]={start:u,end:c,ring:[i,l]}}ha[c<<3].forEach(p)}(n,r,(function(t){i(t,n,r),function(t){for(var e=0,n=t.length,i=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];++e<n;)i+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return i}(t)>0?o.push([t]):s.push(t)})),s.forEach((function(t){for(var e,n=0,i=o.length;n<i;++n)if(-1!==sa((e=o[n])[0],t))return void e.push(t)})),{type:"MultiPolygon",value:r,coordinates:o}}function a(e){return 2*e[0]+e[1]*(t+1)*4}function s(n,i,r){n.forEach((function(n){var o,a=n[0],s=n[1],l=0|a,u=0|s,c=i[u*t+l];a>0&&a<t&&l===a&&(o=i[u*t+l-1],n[0]=a+(r-o)/(c-o)-.5),s>0&&s<e&&u===s&&(o=i[(u-1)*t+l],n[1]=s+(r-o)/(c-o)-.5)}))}return r.contour=o,r.size=function(n){if(!arguments.length)return[t,e];var i=Math.floor(n[0]),o=Math.floor(n[1]);if(!(i>=0&&o>=0))throw new Error("invalid size");return t=i,e=o,r},r.thresholds=function(t){return arguments.length?(n="function"==typeof t?t:Array.isArray(t)?aa(ra.call(t)):aa(t),r):n},r.smooth=function(t){return arguments.length?(i=t?s:ca,r):i===s},r}function fa(t,e,n){for(var i=t.width,r=t.height,o=1+(n<<1),a=0;a<r;++a)for(var s=0,l=0;s<i+n;++s)s<i&&(l+=t.data[s+a*i]),s>=n&&(s>=o&&(l-=t.data[s-o+a*i]),e.data[s-n+a*i]=l/Math.min(s+1,i-1+o-s,o))}function pa(t,e,n){for(var i=t.width,r=t.height,o=1+(n<<1),a=0;a<i;++a)for(var s=0,l=0;s<r+n;++s)s<r&&(l+=t.data[a+s*i]),s>=n&&(s>=o&&(l-=t.data[a+(s-o)*i]),e.data[a+(s-n)*i]=l/Math.min(s+1,r-1+o-s,o))}function ma(t){return t[0]}function ga(t){return t[1]}function va(){return 1}function ya(){var t=ma,e=ga,n=va,i=960,r=500,o=20,a=2,s=3*o,l=i+2*s>>a,u=r+2*s>>a,c=aa(20);function h(i){var r=new Float32Array(l*u),h=new Float32Array(l*u),f=Math.pow(2,-a);i.forEach((function(i,o,a){var c=(t(i,o,a)+s)*f,h=(e(i,o,a)+s)*f,d=+n(i,o,a);if(c>=0&&c<l&&h>=0&&h<u){var p=Math.floor(c),m=Math.floor(h),g=c-p-.5,v=h-m-.5;r[p+m*l]+=(1-g)*(1-v)*d,r[p+1+m*l]+=g*(1-v)*d,r[p+1+(m+1)*l]+=g*v*d,r[p+(m+1)*l]+=(1-g)*v*d}})),fa({width:l,height:u,data:r},{width:l,height:u,data:h},o>>a),pa({width:l,height:u,data:h},{width:l,height:u,data:r},o>>a),fa({width:l,height:u,data:r},{width:l,height:u,data:h},o>>a),pa({width:l,height:u,data:h},{width:l,height:u,data:r},o>>a),fa({width:l,height:u,data:r},{width:l,height:u,data:h},o>>a),pa({width:l,height:u,data:h},{width:l,height:u,data:r},o>>a);var p=c(r);if(!Array.isArray(p)){var m=ot(r);p=et(0,m,p),(p=wt(0,Math.floor(m/p)*p,p)).shift()}return da().thresholds(p).size([l,u])(r).map(d)}function d(t){return t.value*=Math.pow(2,-2*a),t.coordinates.forEach(f),t}function f(t){t.forEach(p)}function p(t){t.forEach(m)}function m(t){t[0]=t[0]*Math.pow(2,a)-s,t[1]=t[1]*Math.pow(2,a)-s}function g(){return l=i+2*(s=3*o)>>a,u=r+2*s>>a,h}return h.x=function(e){return arguments.length?(t="function"==typeof e?e:aa(+e),h):t},h.y=function(t){return arguments.length?(e="function"==typeof t?t:aa(+t),h):e},h.weight=function(t){return arguments.length?(n="function"==typeof t?t:aa(+t),h):n},h.size=function(t){if(!arguments.length)return[i,r];var e=+t[0],n=+t[1];if(!(e>=0&&n>=0))throw new Error("invalid size");return i=e,r=n,g()},h.cellSize=function(t){if(!arguments.length)return 1<<a;if(!((t=+t)>=1))throw new Error("invalid cell size");return a=Math.floor(Math.log(t)/Math.LN2),g()},h.thresholds=function(t){return arguments.length?(c="function"==typeof t?t:Array.isArray(t)?aa(ra.call(t)):aa(t),h):c},h.bandwidth=function(t){if(!arguments.length)return Math.sqrt(o*(o+1));if(!((t=+t)>=0))throw new Error("invalid bandwidth");return o=Math.round((Math.sqrt(4*t*t+1)-1)/2),g()},h}const ba=134217729;function _a(t,e,n,i,r){let o,a,s,l,u=e[0],c=i[0],h=0,d=0;c>u==c>-u?(o=u,u=e[++h]):(o=c,c=i[++d]);let f=0;if(h<t&&d<n)for(c>u==c>-u?(a=u+o,s=o-(a-u),u=e[++h]):(a=c+o,s=o-(a-c),c=i[++d]),o=a,0!==s&&(r[f++]=s);h<t&&d<n;)c>u==c>-u?(a=o+u,l=a-o,s=o-(a-l)+(u-l),u=e[++h]):(a=o+c,l=a-o,s=o-(a-l)+(c-l),c=i[++d]),o=a,0!==s&&(r[f++]=s);for(;h<t;)a=o+u,l=a-o,s=o-(a-l)+(u-l),u=e[++h],o=a,0!==s&&(r[f++]=s);for(;d<n;)a=o+c,l=a-o,s=o-(a-l)+(c-l),c=i[++d],o=a,0!==s&&(r[f++]=s);return 0===o&&0!==f||(r[f++]=o),f}function wa(t){return new Float64Array(t)}const xa=wa(4),Ma=wa(8),Ea=wa(12),Sa=wa(16),ka=wa(4);function Ca(t,e,n,i,r,o){const a=(e-o)*(n-r),s=(t-r)*(i-o),l=a-s;if(0===a||0===s||a>0!=s>0)return l;const u=Math.abs(a+s);return Math.abs(l)>=33306690738754716e-32*u?l:-function(t,e,n,i,r,o,a){let s,l,u,c,h,d,f,p,m,g,v,y,b,_,w,x,M,E;const S=t-r,k=n-r,C=e-o,T=i-o;_=S*T,d=ba*S,f=d-(d-S),p=S-f,d=ba*T,m=d-(d-T),g=T-m,w=p*g-(_-f*m-p*m-f*g),x=C*k,d=ba*C,f=d-(d-C),p=C-f,d=ba*k,m=d-(d-k),g=k-m,M=p*g-(x-f*m-p*m-f*g),v=w-M,h=w-v,xa[0]=w-(v+h)+(h-M),y=_+v,h=y-_,b=_-(y-h)+(v-h),v=b-x,h=b-v,xa[1]=b-(v+h)+(h-x),E=y+v,h=E-y,xa[2]=y-(E-h)+(v-h),xa[3]=E;let D=function(t,e){let n=e[0];for(let i=1;i<t;i++)n+=e[i];return n}(4,xa),L=22204460492503146e-32*a;if(D>=L||-D>=L)return D;if(h=t-S,s=t-(S+h)+(h-r),h=n-k,u=n-(k+h)+(h-r),h=e-C,l=e-(C+h)+(h-o),h=i-T,c=i-(T+h)+(h-o),0===s&&0===l&&0===u&&0===c)return D;if(L=11093356479670487e-47*a+33306690738754706e-32*Math.abs(D),D+=S*c+T*s-(C*u+k*l),D>=L||-D>=L)return D;_=s*T,d=ba*s,f=d-(d-s),p=s-f,d=ba*T,m=d-(d-T),g=T-m,w=p*g-(_-f*m-p*m-f*g),x=l*k,d=ba*l,f=d-(d-l),p=l-f,d=ba*k,m=d-(d-k),g=k-m,M=p*g-(x-f*m-p*m-f*g),v=w-M,h=w-v,ka[0]=w-(v+h)+(h-M),y=_+v,h=y-_,b=_-(y-h)+(v-h),v=b-x,h=b-v,ka[1]=b-(v+h)+(h-x),E=y+v,h=E-y,ka[2]=y-(E-h)+(v-h),ka[3]=E;const A=_a(4,xa,4,ka,Ma);_=S*c,d=ba*S,f=d-(d-S),p=S-f,d=ba*c,m=d-(d-c),g=c-m,w=p*g-(_-f*m-p*m-f*g),x=C*u,d=ba*C,f=d-(d-C),p=C-f,d=ba*u,m=d-(d-u),g=u-m,M=p*g-(x-f*m-p*m-f*g),v=w-M,h=w-v,ka[0]=w-(v+h)+(h-M),y=_+v,h=y-_,b=_-(y-h)+(v-h),v=b-x,h=b-v,ka[1]=b-(v+h)+(h-x),E=y+v,h=E-y,ka[2]=y-(E-h)+(v-h),ka[3]=E;const O=_a(A,Ma,4,ka,Ea);_=s*c,d=ba*s,f=d-(d-s),p=s-f,d=ba*c,m=d-(d-c),g=c-m,w=p*g-(_-f*m-p*m-f*g),x=l*u,d=ba*l,f=d-(d-l),p=l-f,d=ba*u,m=d-(d-u),g=u-m,M=p*g-(x-f*m-p*m-f*g),v=w-M,h=w-v,ka[0]=w-(v+h)+(h-M),y=_+v,h=y-_,b=_-(y-h)+(v-h),v=b-x,h=b-v,ka[1]=b-(v+h)+(h-x),E=y+v,h=E-y,ka[2]=y-(E-h)+(v-h),ka[3]=E;const P=_a(O,Ea,4,ka,Sa);return Sa[P-1]}(t,e,n,i,r,o,u)}wa(4),wa(4),wa(4),wa(4),wa(4),wa(4),wa(4),wa(4),wa(4),wa(8),wa(8),wa(8),wa(4),wa(8),wa(8),wa(8),wa(12);wa(192),wa(192);wa(4),wa(4),wa(4),wa(4),wa(4),wa(4),wa(4),wa(4),wa(8),wa(8),wa(8),wa(8),wa(8),wa(8),wa(8),wa(8),wa(8),wa(4),wa(4),wa(4),wa(8),wa(16),wa(16),wa(16),wa(32),wa(32),wa(48),wa(64);wa(1152),wa(1152);wa(4),wa(4),wa(4),wa(4),wa(4),wa(4),wa(4),wa(4),wa(4),wa(4),wa(24),wa(24),wa(24),wa(24),wa(24),wa(24),wa(24),wa(24),wa(24),wa(24),wa(1152),wa(1152),wa(1152),wa(1152),wa(1152),wa(2304),wa(2304),wa(3456),wa(5760),wa(8),wa(8),wa(8),wa(16),wa(24),wa(48),wa(48),wa(96),wa(192),wa(384),wa(384),wa(384),wa(768);wa(96),wa(96),wa(96),wa(1152);const Ta=Math.pow(2,-52),Da=new Uint32Array(512);class La{static from(t,e=Ra,n=Ya){const i=t.length,r=new Float64Array(2*i);for(let o=0;o<i;o++){const i=t[o];r[2*o]=e(i),r[2*o+1]=n(i)}return new La(r)}constructor(t){const e=t.length>>1;if(e>0&&"number"!=typeof t[0])throw new Error("Expected coords to contain numbers.");this.coords=t;const n=Math.max(2*e-5,0);this._triangles=new Uint32Array(3*n),this._halfedges=new Int32Array(3*n),this._hashSize=Math.ceil(Math.sqrt(e)),this._hullPrev=new Uint32Array(e),this._hullNext=new Uint32Array(e),this._hullTri=new Uint32Array(e),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(e),this._dists=new Float64Array(e),this.update()}update(){const{coords:t,_hullPrev:e,_hullNext:n,_hullTri:i,_hullHash:r}=this,o=t.length>>1;let a=1/0,s=1/0,l=-1/0,u=-1/0;for(let e=0;e<o;e++){const n=t[2*e],i=t[2*e+1];n<a&&(a=n),i<s&&(s=i),n>l&&(l=n),i>u&&(u=i),this._ids[e]=e}const c=(a+l)/2,h=(s+u)/2;let d,f,p,m=1/0;for(let e=0;e<o;e++){const n=Aa(c,h,t[2*e],t[2*e+1]);n<m&&(d=e,m=n)}const g=t[2*d],v=t[2*d+1];m=1/0;for(let e=0;e<o;e++){if(e===d)continue;const n=Aa(g,v,t[2*e],t[2*e+1]);n<m&&n>0&&(f=e,m=n)}let y=t[2*f],b=t[2*f+1],_=1/0;for(let e=0;e<o;e++){if(e===d||e===f)continue;const n=Pa(g,v,y,b,t[2*e],t[2*e+1]);n<_&&(p=e,_=n)}let w=t[2*p],x=t[2*p+1];if(_===1/0){for(let e=0;e<o;e++)this._dists[e]=t[2*e]-t[0]||t[2*e+1]-t[1];Ia(this._ids,this._dists,0,o-1);const e=new Uint32Array(o);let n=0;for(let t=0,i=-1/0;t<o;t++){const r=this._ids[t];this._dists[r]>i&&(e[n++]=r,i=this._dists[r])}return this.hull=e.subarray(0,n),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(Ca(g,v,y,b,w,x)<0){const t=f,e=y,n=b;f=p,y=w,b=x,p=t,w=e,x=n}const M=function(t,e,n,i,r,o){const a=n-t,s=i-e,l=r-t,u=o-e,c=a*a+s*s,h=l*l+u*u,d=.5/(a*u-s*l);return{x:t+(u*c-s*h)*d,y:e+(a*h-l*c)*d}}(g,v,y,b,w,x);this._cx=M.x,this._cy=M.y;for(let e=0;e<o;e++)this._dists[e]=Aa(t[2*e],t[2*e+1],M.x,M.y);Ia(this._ids,this._dists,0,o-1),this._hullStart=d;let E=3;n[d]=e[p]=f,n[f]=e[d]=p,n[p]=e[f]=d,i[d]=0,i[f]=1,i[p]=2,r.fill(-1),r[this._hashKey(g,v)]=d,r[this._hashKey(y,b)]=f,r[this._hashKey(w,x)]=p,this.trianglesLen=0,this._addTriangle(d,f,p,-1,-1,-1);for(let o,a,s=0;s<this._ids.length;s++){const l=this._ids[s],u=t[2*l],c=t[2*l+1];if(s>0&&Math.abs(u-o)<=Ta&&Math.abs(c-a)<=Ta)continue;if(o=u,a=c,l===d||l===f||l===p)continue;let h=0;for(let t=0,e=this._hashKey(u,c);t<this._hashSize&&(h=r[(e+t)%this._hashSize],-1===h||h===n[h]);t++);h=e[h];let m,g=h;for(;m=n[g],Ca(u,c,t[2*g],t[2*g+1],t[2*m],t[2*m+1])>=0;)if(g=m,g===h){g=-1;break}if(-1===g)continue;let v=this._addTriangle(g,l,n[g],-1,-1,i[g]);i[l]=this._legalize(v+2),i[g]=v,E++;let y=n[g];for(;m=n[y],Ca(u,c,t[2*y],t[2*y+1],t[2*m],t[2*m+1])<0;)v=this._addTriangle(y,l,m,i[l],-1,i[y]),i[l]=this._legalize(v+2),n[y]=y,E--,y=m;if(g===h)for(;m=e[g],Ca(u,c,t[2*m],t[2*m+1],t[2*g],t[2*g+1])<0;)v=this._addTriangle(m,l,g,-1,i[g],i[m]),this._legalize(v+2),i[m]=v,n[g]=g,E--,g=m;this._hullStart=e[l]=g,n[g]=e[y]=l,n[l]=y,r[this._hashKey(u,c)]=l,r[this._hashKey(t[2*g],t[2*g+1])]=g}this.hull=new Uint32Array(E);for(let t=0,e=this._hullStart;t<E;t++)this.hull[t]=e,e=n[e];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,e){return Math.floor(function(t,e){const n=t/(Math.abs(t)+Math.abs(e));return(e>0?3-n:1+n)/4}(t-this._cx,e-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:e,_halfedges:n,coords:i}=this;let r=0,o=0;for(;;){const a=n[t],s=t-t%3;if(o=s+(t+2)%3,-1===a){if(0===r)break;t=Da[--r];continue}const l=a-a%3,u=s+(t+1)%3,c=l+(a+2)%3,h=e[o],d=e[t],f=e[u],p=e[c];if(Oa(i[2*h],i[2*h+1],i[2*d],i[2*d+1],i[2*f],i[2*f+1],i[2*p],i[2*p+1])){e[t]=p,e[a]=h;const i=n[c];if(-1===i){let e=this._hullStart;do{if(this._hullTri[e]===c){this._hullTri[e]=t;break}e=this._hullPrev[e]}while(e!==this._hullStart)}this._link(t,i),this._link(a,n[o]),this._link(o,c);const s=l+(a+1)%3;r<Da.length&&(Da[r++]=s)}else{if(0===r)break;t=Da[--r]}}return o}_link(t,e){this._halfedges[t]=e,-1!==e&&(this._halfedges[e]=t)}_addTriangle(t,e,n,i,r,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=e,this._triangles[a+2]=n,this._link(a,i),this._link(a+1,r),this._link(a+2,o),this.trianglesLen+=3,a}}function Aa(t,e,n,i){const r=t-n,o=e-i;return r*r+o*o}function Oa(t,e,n,i,r,o,a,s){const l=t-a,u=e-s,c=n-a,h=i-s,d=r-a,f=o-s,p=c*c+h*h,m=d*d+f*f;return l*(h*m-p*f)-u*(c*m-p*d)+(l*l+u*u)*(c*f-h*d)<0}function Pa(t,e,n,i,r,o){const a=n-t,s=i-e,l=r-t,u=o-e,c=a*a+s*s,h=l*l+u*u,d=.5/(a*u-s*l),f=(u*c-s*h)*d,p=(a*h-l*c)*d;return f*f+p*p}function Ia(t,e,n,i){if(i-n<=20)for(let r=n+1;r<=i;r++){const i=t[r],o=e[i];let a=r-1;for(;a>=n&&e[t[a]]>o;)t[a+1]=t[a--];t[a+1]=i}else{let r=n+1,o=i;Na(t,n+i>>1,r),e[t[n]]>e[t[i]]&&Na(t,n,i),e[t[r]]>e[t[i]]&&Na(t,r,i),e[t[n]]>e[t[r]]&&Na(t,n,r);const a=t[r],s=e[a];for(;;){do{r++}while(e[t[r]]<s);do{o--}while(e[t[o]]>s);if(o<r)break;Na(t,r,o)}t[n+1]=t[o],t[o]=a,i-r+1>=o-n?(Ia(t,e,r,i),Ia(t,e,n,o-1)):(Ia(t,e,n,o-1),Ia(t,e,r,i))}}function Na(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}function Ra(t){return t[0]}function Ya(t){return t[1]}const ja=1e-6;class Fa{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,e){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,e){this._+=`L${this._x1=+t},${this._y1=+e}`}arc(t,e,n){const i=(t=+t)+(n=+n),r=e=+e;if(n<0)throw new Error("negative radius");null===this._x1?this._+=`M${i},${r}`:(Math.abs(this._x1-i)>ja||Math.abs(this._y1-r)>ja)&&(this._+="L"+i+","+r),n&&(this._+=`A${n},${n},0,1,1,${t-n},${e}A${n},${n},0,1,1,${this._x1=i},${this._y1=r}`)}rect(t,e,n,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${+n}v${+i}h${-n}Z`}value(){return this._||null}}class Ba{constructor(){this._=[]}moveTo(t,e){this._.push([t,e])}closePath(){this._.push(this._[0].slice())}lineTo(t,e){this._.push([t,e])}value(){return this._.length?this._:null}}class za{constructor(t,[e,n,i,r]=[0,0,960,500]){if(!((i=+i)>=(e=+e)&&(r=+r)>=(n=+n)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(2*t.points.length),this.vectors=new Float64Array(2*t.points.length),this.xmax=i,this.xmin=e,this.ymax=r,this.ymin=n,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:e,triangles:n},vectors:i}=this,r=this.circumcenters=this._circumcenters.subarray(0,n.length/3*2);for(let e,i,o=0,a=0,s=n.length;o<s;o+=3,a+=2){const s=2*n[o],l=2*n[o+1],u=2*n[o+2],c=t[s],h=t[s+1],d=t[l],f=t[l+1],p=t[u],m=t[u+1],g=d-c,v=f-h,y=p-c,b=m-h,_=2*(g*b-v*y);if(Math.abs(_)<1e-9){let r=1e9;const o=2*n[0];r*=Math.sign((t[o]-c)*b-(t[o+1]-h)*y),e=(c+p)/2-r*b,i=(h+m)/2+r*y}else{const t=1/_,n=g*g+v*v,r=y*y+b*b;e=c+(b*n-v*r)*t,i=h+(g*r-y*n)*t}r[a]=e,r[a+1]=i}let o,a,s,l=e[e.length-1],u=4*l,c=t[2*l],h=t[2*l+1];i.fill(0);for(let n=0;n<e.length;++n)l=e[n],o=u,a=c,s=h,u=4*l,c=t[2*l],h=t[2*l+1],i[o+2]=i[u]=s-h,i[o+3]=i[u+1]=c-a}render(t){const e=null==t?t=new Fa:void 0,{delaunay:{halfedges:n,inedges:i,hull:r},circumcenters:o,vectors:a}=this;if(r.length<=1)return null;for(let e=0,i=n.length;e<i;++e){const i=n[e];if(i<e)continue;const r=2*Math.floor(e/3),a=2*Math.floor(i/3),s=o[r],l=o[r+1],u=o[a],c=o[a+1];this._renderSegment(s,l,u,c,t)}let s,l=r[r.length-1];for(let e=0;e<r.length;++e){s=l,l=r[e];const n=2*Math.floor(i[l]/3),u=o[n],c=o[n+1],h=4*s,d=this._project(u,c,a[h+2],a[h+3]);d&&this._renderSegment(u,c,d[0],d[1],t)}return e&&e.value()}renderBounds(t){const e=null==t?t=new Fa:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),e&&e.value()}renderCell(t,e){const n=null==e?e=new Fa:void 0,i=this._clip(t);if(null===i||!i.length)return;e.moveTo(i[0],i[1]);let r=i.length;for(;i[0]===i[r-2]&&i[1]===i[r-1]&&r>1;)r-=2;for(let t=2;t<r;t+=2)i[t]===i[t-2]&&i[t+1]===i[t-1]||e.lineTo(i[t],i[t+1]);return e.closePath(),n&&n.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let e=0,n=t.length/2;e<n;++e){const t=this.cellPolygon(e);t&&(t.index=e,yield t)}}cellPolygon(t){const e=new Ba;return this.renderCell(t,e),e.value()}_renderSegment(t,e,n,i,r){let o;const a=this._regioncode(t,e),s=this._regioncode(n,i);0===a&&0===s?(r.moveTo(t,e),r.lineTo(n,i)):(o=this._clipSegment(t,e,n,i,a,s))&&(r.moveTo(o[0],o[1]),r.lineTo(o[2],o[3]))}contains(t,e,n){return(e=+e)==e&&(n=+n)==n&&this.delaunay._step(t,e,n)===t}*neighbors(t){const e=this._clip(t);if(e)for(const n of this.delaunay.neighbors(t)){const t=this._clip(n);if(t)t:for(let i=0,r=e.length;i<r;i+=2)for(let o=0,a=t.length;o<a;o+=2)if(e[i]==t[o]&&e[i+1]==t[o+1]&&e[(i+2)%r]==t[(o+a-2)%a]&&e[(i+3)%r]==t[(o+a-1)%a]){yield n;break t}}}_cell(t){const{circumcenters:e,delaunay:{inedges:n,halfedges:i,triangles:r}}=this,o=n[t];if(-1===o)return null;const a=[];let s=o;do{const n=Math.floor(s/3);if(a.push(e[2*n],e[2*n+1]),s=s%3==2?s-2:s+1,r[s]!==t)break;s=i[s]}while(s!==o&&-1!==s);return a}_clip(t){if(0===t&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const e=this._cell(t);if(null===e)return null;const{vectors:n}=this,i=4*t;return n[i]||n[i+1]?this._clipInfinite(t,e,n[i],n[i+1],n[i+2],n[i+3]):this._clipFinite(t,e)}_clipFinite(t,e){const n=e.length;let i,r,o,a,s=null,l=e[n-2],u=e[n-1],c=this._regioncode(l,u),h=0;for(let d=0;d<n;d+=2)if(i=l,r=u,l=e[d],u=e[d+1],o=c,c=this._regioncode(l,u),0===o&&0===c)a=h,h=0,s?s.push(l,u):s=[l,u];else{let e,n,d,f,p;if(0===o){if(null===(e=this._clipSegment(i,r,l,u,o,c)))continue;[n,d,f,p]=e}else{if(null===(e=this._clipSegment(l,u,i,r,c,o)))continue;[f,p,n,d]=e,a=h,h=this._edgecode(n,d),a&&h&&this._edge(t,a,h,s,s.length),s?s.push(n,d):s=[n,d]}a=h,h=this._edgecode(f,p),a&&h&&this._edge(t,a,h,s,s.length),s?s.push(f,p):s=[f,p]}if(s)a=h,h=this._edgecode(s[0],s[1]),a&&h&&this._edge(t,a,h,s,s.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return s}_clipSegment(t,e,n,i,r,o){for(;;){if(0===r&&0===o)return[t,e,n,i];if(r&o)return null;let a,s,l=r||o;8&l?(a=t+(n-t)*(this.ymax-e)/(i-e),s=this.ymax):4&l?(a=t+(n-t)*(this.ymin-e)/(i-e),s=this.ymin):2&l?(s=e+(i-e)*(this.xmax-t)/(n-t),a=this.xmax):(s=e+(i-e)*(this.xmin-t)/(n-t),a=this.xmin),r?(t=a,e=s,r=this._regioncode(t,e)):(n=a,i=s,o=this._regioncode(n,i))}}_clipInfinite(t,e,n,i,r,o){let a,s=Array.from(e);if((a=this._project(s[0],s[1],n,i))&&s.unshift(a[0],a[1]),(a=this._project(s[s.length-2],s[s.length-1],r,o))&&s.push(a[0],a[1]),s=this._clipFinite(t,s))for(let e,n=0,i=s.length,r=this._edgecode(s[i-2],s[i-1]);n<i;n+=2)e=r,r=this._edgecode(s[n],s[n+1]),e&&r&&(n=this._edge(t,e,r,s,n),i=s.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(s=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return s}_edge(t,e,n,i,r){for(;e!==n;){let n,o;switch(e){case 5:e=4;continue;case 4:e=6,n=this.xmax,o=this.ymin;break;case 6:e=2;continue;case 2:e=10,n=this.xmax,o=this.ymax;break;case 10:e=8;continue;case 8:e=9,n=this.xmin,o=this.ymax;break;case 9:e=1;continue;case 1:e=5,n=this.xmin,o=this.ymin}i[r]===n&&i[r+1]===o||!this.contains(t,n,o)||(i.splice(r,0,n,o),r+=2)}if(i.length>4)for(let t=0;t<i.length;t+=2){const e=(t+2)%i.length,n=(t+4)%i.length;(i[t]===i[e]&&i[e]===i[n]||i[t+1]===i[e+1]&&i[e+1]===i[n+1])&&(i.splice(e,2),t-=2)}return r}_project(t,e,n,i){let r,o,a,s=1/0;if(i<0){if(e<=this.ymin)return null;(r=(this.ymin-e)/i)<s&&(a=this.ymin,o=t+(s=r)*n)}else if(i>0){if(e>=this.ymax)return null;(r=(this.ymax-e)/i)<s&&(a=this.ymax,o=t+(s=r)*n)}if(n>0){if(t>=this.xmax)return null;(r=(this.xmax-t)/n)<s&&(o=this.xmax,a=e+(s=r)*i)}else if(n<0){if(t<=this.xmin)return null;(r=(this.xmin-t)/n)<s&&(o=this.xmin,a=e+(s=r)*i)}return[o,a]}_edgecode(t,e){return(t===this.xmin?1:t===this.xmax?2:0)|(e===this.ymin?4:e===this.ymax?8:0)}_regioncode(t,e){return(t<this.xmin?1:t>this.xmax?2:0)|(e<this.ymin?4:e>this.ymax?8:0)}}const Ha=2*Math.PI,Ga=Math.pow;function Wa(t){return t[0]}function Ua(t){return t[1]}function Va(t,e,n){return[t+Math.sin(t+e)*n,e+Math.cos(t-e)*n]}class Xa{static from(t,e=Wa,n=Ua,i){return new Xa("length"in t?function(t,e,n,i){const r=t.length,o=new Float64Array(2*r);for(let a=0;a<r;++a){const r=t[a];o[2*a]=e.call(i,r,a,t),o[2*a+1]=n.call(i,r,a,t)}return o}(t,e,n,i):Float64Array.from(function*(t,e,n,i){let r=0;for(const o of t)yield e.call(i,o,r,t),yield n.call(i,o,r,t),++r}(t,e,n,i)))}constructor(t){this._delaunator=new La(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,e=this.points;if(t.hull&&t.hull.length>2&&function(t){const{triangles:e,coords:n}=t;for(let t=0;t<e.length;t+=3){const i=2*e[t],r=2*e[t+1],o=2*e[t+2];if((n[o]-n[i])*(n[r+1]-n[i+1])-(n[r]-n[i])*(n[o+1]-n[i+1])>1e-10)return!1}return!0}(t)){this.collinear=Int32Array.from({length:e.length/2},((t,e)=>e)).sort(((t,n)=>e[2*t]-e[2*n]||e[2*t+1]-e[2*n+1]));const t=this.collinear[0],n=this.collinear[this.collinear.length-1],i=[e[2*t],e[2*t+1],e[2*n],e[2*n+1]],r=1e-8*Math.hypot(i[3]-i[1],i[2]-i[0]);for(let t=0,n=e.length/2;t<n;++t){const n=Va(e[2*t],e[2*t+1],r);e[2*t]=n[0],e[2*t+1]=n[1]}this._delaunator=new La(e)}else delete this.collinear;const n=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,r=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let t=0,e=n.length;t<e;++t){const e=r[t%3==2?t-2:t+1];-1!==n[t]&&-1!==o[e]||(o[e]=t)}for(let t=0,e=i.length;t<e;++t)a[i[t]]=t;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],o[i[0]]=1,2===i.length&&(o[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new za(this,t)}*neighbors(t){const{inedges:e,hull:n,_hullIndex:i,halfedges:r,triangles:o,collinear:a}=this;if(a){const e=a.indexOf(t);return e>0&&(yield a[e-1]),void(e<a.length-1&&(yield a[e+1]))}const s=e[t];if(-1===s)return;let l=s,u=-1;do{if(yield u=o[l],l=l%3==2?l-2:l+1,o[l]!==t)return;if(l=r[l],-1===l){const e=n[(i[t]+1)%n.length];return void(e!==u&&(yield e))}}while(l!==s)}find(t,e,n=0){if((t=+t)!=t||(e=+e)!=e)return-1;const i=n;let r;for(;(r=this._step(n,t,e))>=0&&r!==n&&r!==i;)n=r;return r}_step(t,e,n){const{inedges:i,hull:r,_hullIndex:o,halfedges:a,triangles:s,points:l}=this;if(-1===i[t]||!l.length)return(t+1)%(l.length>>1);let u=t,c=Ga(e-l[2*t],2)+Ga(n-l[2*t+1],2);const h=i[t];let d=h;do{let i=s[d];const h=Ga(e-l[2*i],2)+Ga(n-l[2*i+1],2);if(h<c&&(c=h,u=i),d=d%3==2?d-2:d+1,s[d]!==t)break;if(d=a[d],-1===d){if(d=r[(o[t]+1)%r.length],d!==i&&Ga(e-l[2*d],2)+Ga(n-l[2*d+1],2)<c)return d;break}}while(d!==h);return u}render(t){const e=null==t?t=new Fa:void 0,{points:n,halfedges:i,triangles:r}=this;for(let e=0,o=i.length;e<o;++e){const o=i[e];if(o<e)continue;const a=2*r[e],s=2*r[o];t.moveTo(n[a],n[a+1]),t.lineTo(n[s],n[s+1])}return this.renderHull(t),e&&e.value()}renderPoints(t,e){void 0!==e||t&&"function"==typeof t.moveTo||(e=t,t=null),e=null==e?2:+e;const n=null==t?t=new Fa:void 0,{points:i}=this;for(let n=0,r=i.length;n<r;n+=2){const r=i[n],o=i[n+1];t.moveTo(r+e,o),t.arc(r,o,e,0,Ha)}return n&&n.value()}renderHull(t){const e=null==t?t=new Fa:void 0,{hull:n,points:i}=this,r=2*n[0],o=n.length;t.moveTo(i[r],i[r+1]);for(let e=1;e<o;++e){const r=2*n[e];t.lineTo(i[r],i[r+1])}return t.closePath(),e&&e.value()}hullPolygon(){const t=new Ba;return this.renderHull(t),t.value()}renderTriangle(t,e){const n=null==e?e=new Fa:void 0,{points:i,triangles:r}=this,o=2*r[t*=3],a=2*r[t+1],s=2*r[t+2];return e.moveTo(i[o],i[o+1]),e.lineTo(i[a],i[a+1]),e.lineTo(i[s],i[s+1]),e.closePath(),n&&n.value()}*trianglePolygons(){const{triangles:t}=this;for(let e=0,n=t.length/3;e<n;++e)yield this.trianglePolygon(e)}trianglePolygon(t){const e=new Ba;return this.renderTriangle(t,e),e.value()}}var qa={value:()=>{}};function Ka(){for(var t,e=0,n=arguments.length,i={};e<n;++e){if(!(t=arguments[e]+"")||t in i||/[\s.]/.test(t))throw new Error("illegal type: "+t);i[t]=[]}return new $a(i)}function $a(t){this._=t}function Za(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",i=t.indexOf(".");if(i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function Ja(t,e){for(var n,i=0,r=t.length;i<r;++i)if((n=t[i]).name===e)return n.value}function Qa(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=qa,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=n&&t.push({name:e,value:n}),t}$a.prototype=Ka.prototype={constructor:$a,on:function(t,e){var n,i=this._,r=Za(t+"",i),o=-1,a=r.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<a;)if(n=(t=r[o]).type)i[n]=Qa(i[n],t.name,e);else if(null==e)for(n in i)i[n]=Qa(i[n],t.name,null);return this}for(;++o<a;)if((n=(t=r[o]).type)&&(n=Ja(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new $a(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,i,r=new Array(n),o=0;o<n;++o)r[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(i=this._[t]).length;o<n;++o)i[o].value.apply(e,r)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,o=i.length;r<o;++r)i[r].value.apply(e,n)}};const ts=Ka,es=t=>()=>t;function ns(t,{sourceEvent:e,subject:n,target:i,identifier:r,active:o,x:a,y:s,dx:l,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}function is(t){return!t.ctrlKey&&!t.button}function rs(){return this.parentNode}function os(t,e){return null==e?{x:t.x,y:t.y}:e}function as(){return navigator.maxTouchPoints||"ontouchstart"in this}function ss(){var t,e,n,i,r=is,o=rs,a=os,s=as,l={},u=(0,ae.Z)("start","drag","end"),c=0,h=0;function d(t){t.on("mousedown.drag",f).filter(s).on("touchstart.drag",g).on("touchmove.drag",v,En).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function f(a,s){if(!i&&r.call(this,a,s)){var l=b(this,o.call(this,a,s),a,s,"mouse");l&&(Mn(a.view).on("mousemove.drag",p,Sn).on("mouseup.drag",m,Sn),Tn(a.view),kn(a),n=!1,t=a.clientX,e=a.clientY,l("start",a))}}function p(i){if(Cn(i),!n){var r=i.clientX-t,o=i.clientY-e;n=r*r+o*o>h}l.mouse("drag",i)}function m(t){Mn(t.view).on("mousemove.drag mouseup.drag",null),Dn(t.view,n),Cn(t),l.mouse("end",t)}function g(t,e){if(r.call(this,t,e)){var n,i,a=t.changedTouches,s=o.call(this,t,e),l=a.length;for(n=0;n<l;++n)(i=b(this,s,t,e,a[n].identifier,a[n]))&&(kn(t),i("start",t,a[n]))}}function v(t){var e,n,i=t.changedTouches,r=i.length;for(e=0;e<r;++e)(n=l[i[e].identifier])&&(Cn(t),n("drag",t,i[e]))}function y(t){var e,n,r=t.changedTouches,o=r.length;for(i&&clearTimeout(i),i=setTimeout((function(){i=null}),500),e=0;e<o;++e)(n=l[r[e].identifier])&&(kn(t),n("end",t,r[e]))}function b(t,e,n,i,r,o){var s,h,f,p=u.copy(),m=On(o||n,e);if(null!=(f=a.call(t,new ns("beforestart",{sourceEvent:n,target:d,identifier:r,active:c,x:m[0],y:m[1],dx:0,dy:0,dispatch:p}),i)))return s=f.x-m[0]||0,h=f.y-m[1]||0,function n(o,a,u){var g,v=m;switch(o){case"start":l[r]=n,g=c++;break;case"end":delete l[r],--c;case"drag":m=On(u||a,e),g=c}p.call(o,t,new ns(o,{sourceEvent:a,subject:f,target:d,identifier:r,active:g,x:m[0]+s,y:m[1]+h,dx:m[0]-v[0],dy:m[1]-v[1],dispatch:p}),i)}}return d.filter=function(t){return arguments.length?(r="function"==typeof t?t:es(!!t),d):r},d.container=function(t){return arguments.length?(o="function"==typeof t?t:es(t),d):o},d.subject=function(t){return arguments.length?(a="function"==typeof t?t:es(t),d):a},d.touchable=function(t){return arguments.length?(s="function"==typeof t?t:es(!!t),d):s},d.on=function(){var t=u.on.apply(u,arguments);return t===u?d:t},d.clickDistance=function(t){return arguments.length?(h=(t=+t)*t,d):Math.sqrt(h)},d}ns.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var ls={},us={};function cs(t){return new Function("d","return {"+t.map((function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'})).join(",")+"}")}function hs(t){var e=Object.create(null),n=[];return t.forEach((function(t){for(var i in t)i in e||n.push(e[i]=i)})),n}function ds(t,e){var n=t+"",i=n.length;return i<e?new Array(e-i+1).join(0)+n:n}function fs(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),i=t.getUTCSeconds(),r=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":function(t){return t<0?"-"+ds(-t,6):t>9999?"+"+ds(t,6):ds(t,4)}(t.getUTCFullYear())+"-"+ds(t.getUTCMonth()+1,2)+"-"+ds(t.getUTCDate(),2)+(r?"T"+ds(e,2)+":"+ds(n,2)+":"+ds(i,2)+"."+ds(r,3)+"Z":i?"T"+ds(e,2)+":"+ds(n,2)+":"+ds(i,2)+"Z":n||e?"T"+ds(e,2)+":"+ds(n,2)+"Z":"")}function ps(t){var e=new RegExp('["'+t+"\n\r]"),n=t.charCodeAt(0);function i(t,e){var i,r=[],o=t.length,a=0,s=0,l=o<=0,u=!1;function c(){if(l)return us;if(u)return u=!1,ls;var e,i,r=a;if(34===t.charCodeAt(r)){for(;a++<o&&34!==t.charCodeAt(a)||34===t.charCodeAt(++a););return(e=a)>=o?l=!0:10===(i=t.charCodeAt(a++))?u=!0:13===i&&(u=!0,10===t.charCodeAt(a)&&++a),t.slice(r+1,e-1).replace(/""/g,'"')}for(;a<o;){if(10===(i=t.charCodeAt(e=a++)))u=!0;else if(13===i)u=!0,10===t.charCodeAt(a)&&++a;else if(i!==n)continue;return t.slice(r,e)}return l=!0,t.slice(r,o)}for(10===t.charCodeAt(o-1)&&--o,13===t.charCodeAt(o-1)&&--o;(i=c())!==us;){for(var h=[];i!==ls&&i!==us;)h.push(i),i=c();e&&null==(h=e(h,s++))||r.push(h)}return r}function r(e,n){return e.map((function(e){return n.map((function(t){return a(e[t])})).join(t)}))}function o(e){return e.map(a).join(t)}function a(t){return null==t?"":t instanceof Date?fs(t):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,e){var n,r,o=i(t,(function(t,i){if(n)return n(t,i-1);r=t,n=e?function(t,e){var n=cs(t);return function(i,r){return e(n(i),r,t)}}(t,e):cs(t)}));return o.columns=r||[],o},parseRows:i,format:function(e,n){return null==n&&(n=hs(e)),[n.map(a).join(t)].concat(r(e,n)).join("\n")},formatBody:function(t,e){return null==e&&(e=hs(t)),r(t,e).join("\n")},formatRows:function(t){return t.map(o).join("\n")},formatRow:o,formatValue:a}}var ms=ps(","),gs=ms.parse,vs=ms.parseRows,ys=ms.format,bs=ms.formatBody,_s=ms.formatRows,ws=ms.formatRow,xs=ms.formatValue,Ms=ps("\t"),Es=Ms.parse,Ss=Ms.parseRows,ks=Ms.format,Cs=Ms.formatBody,Ts=Ms.formatRows,Ds=Ms.formatRow,Ls=Ms.formatValue;function As(t){for(var e in t){var n,i,r=t[e].trim();if(r)if("true"===r)r=!0;else if("false"===r)r=!1;else if("NaN"===r)r=NaN;else if(isNaN(n=+r)){if(!(i=r.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;Os&&i[4]&&!i[7]&&(r=r.replace(/-/g,"/").replace(/T/," ")),r=new Date(r)}else r=n;else r=null;t[e]=r}return t}const Os=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours(),Ps=t=>+t;function Is(t){return t*t}function Ns(t){return t*(2-t)}function Rs(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function Ys(t){return t*t*t}function js(t){return--t*t*t+1}function Fs(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Bs=function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n}(3),zs=function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(3),Hs=function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(3),Gs=Math.PI,Ws=Gs/2;function Us(t){return 1==+t?1:1-Math.cos(t*Ws)}function Vs(t){return Math.sin(t*Ws)}function Xs(t){return(1-Math.cos(Gs*t))/2}function qs(t){return 1.0009775171065494*(Math.pow(2,-10*t)-.0009765625)}function Ks(t){return qs(1-+t)}function $s(t){return 1-qs(t)}function Zs(t){return((t*=2)<=1?qs(1-t):2-qs(t-1))/2}function Js(t){return 1-Math.sqrt(1-t*t)}function Qs(t){return Math.sqrt(1- --t*t)}function tl(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var el=4/11,nl=7.5625;function il(t){return 1-rl(1-t)}function rl(t){return(t=+t)<el?nl*t*t:t<.7272727272727273?nl*(t-=.5454545454545454)*t+.75:t<.9090909090909091?nl*(t-=.8181818181818182)*t+.9375:nl*(t-=.9545454545454546)*t+.984375}function ol(t){return((t*=2)<=1?1-rl(1-t):rl(t-1)+1)/2}var al=1.70158,sl=function t(e){function n(t){return(t=+t)*t*(e*(t-1)+t)}return e=+e,n.overshoot=t,n}(al),ll=function t(e){function n(t){return--t*t*((t+1)*e+t)+1}return e=+e,n.overshoot=t,n}(al),ul=function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}(al),cl=2*Math.PI,hl=function t(e,n){var i=Math.asin(1/(e=Math.max(1,e)))*(n/=cl);function r(t){return e*qs(- --t)*Math.sin((i-t)/n)}return r.amplitude=function(e){return t(e,n*cl)},r.period=function(n){return t(e,n)},r}(1,.3),dl=function t(e,n){var i=Math.asin(1/(e=Math.max(1,e)))*(n/=cl);function r(t){return 1-e*qs(t=+t)*Math.sin((t+i)/n)}return r.amplitude=function(e){return t(e,n*cl)},r.period=function(n){return t(e,n)},r}(1,.3),fl=function t(e,n){var i=Math.asin(1/(e=Math.max(1,e)))*(n/=cl);function r(t){return((t=2*t-1)<0?e*qs(-t)*Math.sin((i-t)/n):2-e*qs(t)*Math.sin((i+t)/n))/2}return r.amplitude=function(e){return t(e,n*cl)},r.period=function(n){return t(e,n)},r}(1,.3);function pl(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.blob()}function ml(t,e){return fetch(t,e).then(pl)}function gl(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.arrayBuffer()}function vl(t,e){return fetch(t,e).then(gl)}function yl(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function bl(t,e){return fetch(t,e).then(yl)}function _l(t){return function(e,n,i){return 2===arguments.length&&"function"==typeof n&&(i=n,n=void 0),bl(e,n).then((function(e){return t(e,i)}))}}function wl(t,e,n,i){3===arguments.length&&"function"==typeof n&&(i=n,n=void 0);var r=ps(t);return bl(e,n).then((function(t){return r.parse(t,i)}))}var xl=_l(gs),Ml=_l(Es);function El(t,e){return new Promise((function(n,i){var r=new Image;for(var o in e)r[o]=e[o];r.onerror=i,r.onload=function(){n(r)},r.src=t}))}function Sl(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(204!==t.status&&205!==t.status)return t.json()}function kl(t,e){return fetch(t,e).then(Sl)}function Cl(t){return(e,n)=>bl(e,n).then((e=>(new DOMParser).parseFromString(e,t)))}const Tl=Cl("application/xml");var Dl=Cl("text/html"),Ll=Cl("image/svg+xml");function Al(t,e){var n,i=1;function r(){var r,o,a=n.length,s=0,l=0;for(r=0;r<a;++r)s+=(o=n[r]).x,l+=o.y;for(s=(s/a-t)*i,l=(l/a-e)*i,r=0;r<a;++r)(o=n[r]).x-=s,o.y-=l}return null==t&&(t=0),null==e&&(e=0),r.initialize=function(t){n=t},r.x=function(e){return arguments.length?(t=+e,r):t},r.y=function(t){return arguments.length?(e=+t,r):e},r.strength=function(t){return arguments.length?(i=+t,r):i},r}function Ol(t,e,n,i){if(isNaN(e)||isNaN(n))return t;var r,o,a,s,l,u,c,h,d,f=t._root,p={data:i},m=t._x0,g=t._y0,v=t._x1,y=t._y1;if(!f)return t._root=p,t;for(;f.length;)if((u=e>=(o=(m+v)/2))?m=o:v=o,(c=n>=(a=(g+y)/2))?g=a:y=a,r=f,!(f=f[h=c<<1|u]))return r[h]=p,t;if(s=+t._x.call(null,f.data),l=+t._y.call(null,f.data),e===s&&n===l)return p.next=f,r?r[h]=p:t._root=p,t;do{r=r?r[h]=new Array(4):t._root=new Array(4),(u=e>=(o=(m+v)/2))?m=o:v=o,(c=n>=(a=(g+y)/2))?g=a:y=a}while((h=c<<1|u)==(d=(l>=a)<<1|s>=o));return r[d]=f,r[h]=p,t}function Pl(t,e,n,i,r){this.node=t,this.x0=e,this.y0=n,this.x1=i,this.y1=r}function Il(t){return t[0]}function Nl(t){return t[1]}function Rl(t,e,n){var i=new Yl(null==e?Il:e,null==n?Nl:n,NaN,NaN,NaN,NaN);return null==t?i:i.addAll(t)}function Yl(t,e,n,i,r,o){this._x=t,this._y=e,this._x0=n,this._y0=i,this._x1=r,this._y1=o,this._root=void 0}function jl(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var Fl=Rl.prototype=Yl.prototype;function Bl(t){return function(){return t}}function zl(t){return 1e-6*(t()-.5)}function Hl(t){return t.x+t.vx}function Gl(t){return t.y+t.vy}function Wl(t){var e,n,i,r=1,o=1;function a(){for(var t,a,l,u,c,h,d,f=e.length,p=0;p<o;++p)for(a=Rl(e,Hl,Gl).visitAfter(s),t=0;t<f;++t)l=e[t],h=n[l.index],d=h*h,u=l.x+l.vx,c=l.y+l.vy,a.visit(m);function m(t,e,n,o,a){var s=t.data,f=t.r,p=h+f;if(!s)return e>u+p||o<u-p||n>c+p||a<c-p;if(s.index>l.index){var m=u-s.x-s.vx,g=c-s.y-s.vy,v=m*m+g*g;v<p*p&&(0===m&&(v+=(m=zl(i))*m),0===g&&(v+=(g=zl(i))*g),v=(p-(v=Math.sqrt(v)))/v*r,l.vx+=(m*=v)*(p=(f*=f)/(d+f)),l.vy+=(g*=v)*p,s.vx-=m*(p=1-p),s.vy-=g*p)}}}function s(t){if(t.data)return t.r=n[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function l(){if(e){var i,r,o=e.length;for(n=new Array(o),i=0;i<o;++i)r=e[i],n[r.index]=+t(r,i,e)}}return"function"!=typeof t&&(t=Bl(null==t?1:+t)),a.initialize=function(t,n){e=t,i=n,l()},a.iterations=function(t){return arguments.length?(o=+t,a):o},a.strength=function(t){return arguments.length?(r=+t,a):r},a.radius=function(e){return arguments.length?(t="function"==typeof e?e:Bl(+e),l(),a):t},a}function Ul(t){return t.index}function Vl(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function Xl(t){var e,n,i,r,o,a,s=Ul,l=function(t){return 1/Math.min(r[t.source.index],r[t.target.index])},u=Bl(30),c=1;function h(i){for(var r=0,s=t.length;r<c;++r)for(var l,u,h,d,f,p,m,g=0;g<s;++g)u=(l=t[g]).source,d=(h=l.target).x+h.vx-u.x-u.vx||zl(a),f=h.y+h.vy-u.y-u.vy||zl(a),d*=p=((p=Math.sqrt(d*d+f*f))-n[g])/p*i*e[g],f*=p,h.vx-=d*(m=o[g]),h.vy-=f*m,u.vx+=d*(m=1-m),u.vy+=f*m}function d(){if(i){var a,l,u=i.length,c=t.length,h=new Map(i.map(((t,e)=>[s(t,e,i),t])));for(a=0,r=new Array(u);a<c;++a)(l=t[a]).index=a,"object"!=typeof l.source&&(l.source=Vl(h,l.source)),"object"!=typeof l.target&&(l.target=Vl(h,l.target)),r[l.source.index]=(r[l.source.index]||0)+1,r[l.target.index]=(r[l.target.index]||0)+1;for(a=0,o=new Array(c);a<c;++a)l=t[a],o[a]=r[l.source.index]/(r[l.source.index]+r[l.target.index]);e=new Array(c),f(),n=new Array(c),p()}}function f(){if(i)for(var n=0,r=t.length;n<r;++n)e[n]=+l(t[n],n,t)}function p(){if(i)for(var e=0,r=t.length;e<r;++e)n[e]=+u(t[e],e,t)}return null==t&&(t=[]),h.initialize=function(t,e){i=t,a=e,d()},h.links=function(e){return arguments.length?(t=e,d(),h):t},h.id=function(t){return arguments.length?(s=t,h):s},h.iterations=function(t){return arguments.length?(c=+t,h):c},h.strength=function(t){return arguments.length?(l="function"==typeof t?t:Bl(+t),f(),h):l},h.distance=function(t){return arguments.length?(u="function"==typeof t?t:Bl(+t),p(),h):u},h}Fl.copy=function(){var t,e,n=new Yl(this._x,this._y,this._x0,this._y0,this._x1,this._y1),i=this._root;if(!i)return n;if(!i.length)return n._root=jl(i),n;for(t=[{source:i,target:n._root=new Array(4)}];i=t.pop();)for(var r=0;r<4;++r)(e=i.source[r])&&(e.length?t.push({source:e,target:i.target[r]=new Array(4)}):i.target[r]=jl(e));return n},Fl.add=function(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return Ol(this.cover(e,n),e,n,t)},Fl.addAll=function(t){var e,n,i,r,o=t.length,a=new Array(o),s=new Array(o),l=1/0,u=1/0,c=-1/0,h=-1/0;for(n=0;n<o;++n)isNaN(i=+this._x.call(null,e=t[n]))||isNaN(r=+this._y.call(null,e))||(a[n]=i,s[n]=r,i<l&&(l=i),i>c&&(c=i),r<u&&(u=r),r>h&&(h=r));if(l>c||u>h)return this;for(this.cover(l,u).cover(c,h),n=0;n<o;++n)Ol(this,a[n],s[n],t[n]);return this},Fl.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,i=this._y0,r=this._x1,o=this._y1;if(isNaN(n))r=(n=Math.floor(t))+1,o=(i=Math.floor(e))+1;else{for(var a,s,l=r-n||1,u=this._root;n>t||t>=r||i>e||e>=o;)switch(s=(e<i)<<1|t<n,(a=new Array(4))[s]=u,u=a,l*=2,s){case 0:r=n+l,o=i+l;break;case 1:n=r-l,o=i+l;break;case 2:r=n+l,i=o-l;break;case 3:n=r-l,i=o-l}this._root&&this._root.length&&(this._root=u)}return this._x0=n,this._y0=i,this._x1=r,this._y1=o,this},Fl.data=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},Fl.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Fl.find=function(t,e,n){var i,r,o,a,s,l,u,c=this._x0,h=this._y0,d=this._x1,f=this._y1,p=[],m=this._root;for(m&&p.push(new Pl(m,c,h,d,f)),null==n?n=1/0:(c=t-n,h=e-n,d=t+n,f=e+n,n*=n);l=p.pop();)if(!(!(m=l.node)||(r=l.x0)>d||(o=l.y0)>f||(a=l.x1)<c||(s=l.y1)<h))if(m.length){var g=(r+a)/2,v=(o+s)/2;p.push(new Pl(m[3],g,v,a,s),new Pl(m[2],r,v,g,s),new Pl(m[1],g,o,a,v),new Pl(m[0],r,o,g,v)),(u=(e>=v)<<1|t>=g)&&(l=p[p.length-1],p[p.length-1]=p[p.length-1-u],p[p.length-1-u]=l)}else{var y=t-+this._x.call(null,m.data),b=e-+this._y.call(null,m.data),_=y*y+b*b;if(_<n){var w=Math.sqrt(n=_);c=t-w,h=e-w,d=t+w,f=e+w,i=m.data}}return i},Fl.remove=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var e,n,i,r,o,a,s,l,u,c,h,d,f=this._root,p=this._x0,m=this._y0,g=this._x1,v=this._y1;if(!f)return this;if(f.length)for(;;){if((u=o>=(s=(p+g)/2))?p=s:g=s,(c=a>=(l=(m+v)/2))?m=l:v=l,e=f,!(f=f[h=c<<1|u]))return this;if(!f.length)break;(e[h+1&3]||e[h+2&3]||e[h+3&3])&&(n=e,d=h)}for(;f.data!==t;)if(i=f,!(f=f.next))return this;return(r=f.next)&&delete f.next,i?(r?i.next=r:delete i.next,this):e?(r?e[h]=r:delete e[h],(f=e[0]||e[1]||e[2]||e[3])&&f===(e[3]||e[2]||e[1]||e[0])&&!f.length&&(n?n[d]=f:this._root=f),this):(this._root=r,this)},Fl.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},Fl.root=function(){return this._root},Fl.size=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},Fl.visit=function(t){var e,n,i,r,o,a,s=[],l=this._root;for(l&&s.push(new Pl(l,this._x0,this._y0,this._x1,this._y1));e=s.pop();)if(!t(l=e.node,i=e.x0,r=e.y0,o=e.x1,a=e.y1)&&l.length){var u=(i+o)/2,c=(r+a)/2;(n=l[3])&&s.push(new Pl(n,u,c,o,a)),(n=l[2])&&s.push(new Pl(n,i,c,u,a)),(n=l[1])&&s.push(new Pl(n,u,r,o,c)),(n=l[0])&&s.push(new Pl(n,i,r,u,c))}return this},Fl.visitAfter=function(t){var e,n=[],i=[];for(this._root&&n.push(new Pl(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var r=e.node;if(r.length){var o,a=e.x0,s=e.y0,l=e.x1,u=e.y1,c=(a+l)/2,h=(s+u)/2;(o=r[0])&&n.push(new Pl(o,a,s,c,h)),(o=r[1])&&n.push(new Pl(o,c,s,l,h)),(o=r[2])&&n.push(new Pl(o,a,h,c,u)),(o=r[3])&&n.push(new Pl(o,c,h,l,u))}i.push(e)}for(;e=i.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},Fl.x=function(t){return arguments.length?(this._x=t,this):this._x},Fl.y=function(t){return arguments.length?(this._y=t,this):this._y};var ql,Kl,$l=0,Zl=0,Jl=0,Ql=0,tu=0,eu=0,nu="object"==typeof performance&&performance.now?performance:Date,iu="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function ru(){return tu||(iu(ou),tu=nu.now()+eu)}function ou(){tu=0}function au(){this._call=this._time=this._next=null}function su(t,e,n){var i=new au;return i.restart(t,e,n),i}function lu(){ru(),++$l;for(var t,e=ql;e;)(t=tu-e._time)>=0&&e._call.call(void 0,t),e=e._next;--$l}function uu(){tu=(Ql=nu.now())+eu,$l=Zl=0;try{lu()}finally{$l=0,function(){var t,e,n=ql,i=1/0;for(;n;)n._call?(i>n._time&&(i=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:ql=e);Kl=t,hu(i)}(),tu=0}}function cu(){var t=nu.now(),e=t-Ql;e>1e3&&(eu-=e,Ql=t)}function hu(t){$l||(Zl&&(Zl=clearTimeout(Zl)),t-tu>24?(t<1/0&&(Zl=setTimeout(uu,t-nu.now()-eu)),Jl&&(Jl=clearInterval(Jl))):(Jl||(Ql=nu.now(),Jl=setInterval(cu,1e3)),$l=1,iu(uu)))}au.prototype=su.prototype={constructor:au,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?ru():+n)+(null==e?0:+e),this._next||Kl===this||(Kl?Kl._next=this:ql=this,Kl=this),this._call=t,this._time=n,hu()},stop:function(){this._call&&(this._call=null,this._time=1/0,hu())}};const du=4294967296;function fu(t){return t.x}function pu(t){return t.y}var mu=Math.PI*(3-Math.sqrt(5));function gu(t){var e,n=1,i=.001,r=1-Math.pow(i,1/300),o=0,a=.6,s=new Map,l=su(h),u=ts("tick","end"),c=function(){let t=1;return()=>(t=(1664525*t+1013904223)%du)/du}();function h(){d(),u.call("tick",e),n<i&&(l.stop(),u.call("end",e))}function d(i){var l,u,c=t.length;void 0===i&&(i=1);for(var h=0;h<i;++h)for(n+=(o-n)*r,s.forEach((function(t){t(n)})),l=0;l<c;++l)null==(u=t[l]).fx?u.x+=u.vx*=a:(u.x=u.fx,u.vx=0),null==u.fy?u.y+=u.vy*=a:(u.y=u.fy,u.vy=0);return e}function f(){for(var e,n=0,i=t.length;n<i;++n){if((e=t[n]).index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var r=10*Math.sqrt(.5+n),o=n*mu;e.x=r*Math.cos(o),e.y=r*Math.sin(o)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function p(e){return e.initialize&&e.initialize(t,c),e}return null==t&&(t=[]),f(),e={tick:d,restart:function(){return l.restart(h),e},stop:function(){return l.stop(),e},nodes:function(n){return arguments.length?(t=n,f(),s.forEach(p),e):t},alpha:function(t){return arguments.length?(n=+t,e):n},alphaMin:function(t){return arguments.length?(i=+t,e):i},alphaDecay:function(t){return arguments.length?(r=+t,e):+r},alphaTarget:function(t){return arguments.length?(o=+t,e):o},velocityDecay:function(t){return arguments.length?(a=1-t,e):1-a},randomSource:function(t){return arguments.length?(c=t,s.forEach(p),e):c},force:function(t,n){return arguments.length>1?(null==n?s.delete(t):s.set(t,p(n)),e):s.get(t)},find:function(e,n,i){var r,o,a,s,l,u=0,c=t.length;for(null==i?i=1/0:i*=i,u=0;u<c;++u)(a=(r=e-(s=t[u]).x)*r+(o=n-s.y)*o)<i&&(l=s,i=a);return l},on:function(t,n){return arguments.length>1?(u.on(t,n),e):u.on(t)}}}function vu(){var t,e,n,i,r,o=Bl(-30),a=1,s=1/0,l=.81;function u(n){var r,o=t.length,a=Rl(t,fu,pu).visitAfter(h);for(i=n,r=0;r<o;++r)e=t[r],a.visit(d)}function c(){if(t){var e,n,i=t.length;for(r=new Array(i),e=0;e<i;++e)n=t[e],r[n.index]=+o(n,e,t)}}function h(t){var e,n,i,o,a,s=0,l=0;if(t.length){for(i=o=a=0;a<4;++a)(e=t[a])&&(n=Math.abs(e.value))&&(s+=e.value,l+=n,i+=n*e.x,o+=n*e.y);t.x=i/l,t.y=o/l}else{(e=t).x=e.data.x,e.y=e.data.y;do{s+=r[e.data.index]}while(e=e.next)}t.value=s}function d(t,o,u,c){if(!t.value)return!0;var h=t.x-e.x,d=t.y-e.y,f=c-o,p=h*h+d*d;if(f*f/l<p)return p<s&&(0===h&&(p+=(h=zl(n))*h),0===d&&(p+=(d=zl(n))*d),p<a&&(p=Math.sqrt(a*p)),e.vx+=h*t.value*i/p,e.vy+=d*t.value*i/p),!0;if(!(t.length||p>=s)){(t.data!==e||t.next)&&(0===h&&(p+=(h=zl(n))*h),0===d&&(p+=(d=zl(n))*d),p<a&&(p=Math.sqrt(a*p)));do{t.data!==e&&(f=r[t.data.index]*i/p,e.vx+=h*f,e.vy+=d*f)}while(t=t.next)}}return u.initialize=function(e,i){t=e,n=i,c()},u.strength=function(t){return arguments.length?(o="function"==typeof t?t:Bl(+t),c(),u):o},u.distanceMin=function(t){return arguments.length?(a=t*t,u):Math.sqrt(a)},u.distanceMax=function(t){return arguments.length?(s=t*t,u):Math.sqrt(s)},u.theta=function(t){return arguments.length?(l=t*t,u):Math.sqrt(l)},u}function yu(t,e,n){var i,r,o,a=Bl(.1);function s(t){for(var a=0,s=i.length;a<s;++a){var l=i[a],u=l.x-e||1e-6,c=l.y-n||1e-6,h=Math.sqrt(u*u+c*c),d=(o[a]-h)*r[a]*t/h;l.vx+=u*d,l.vy+=c*d}}function l(){if(i){var e,n=i.length;for(r=new Array(n),o=new Array(n),e=0;e<n;++e)o[e]=+t(i[e],e,i),r[e]=isNaN(o[e])?0:+a(i[e],e,i)}}return"function"!=typeof t&&(t=Bl(+t)),null==e&&(e=0),null==n&&(n=0),s.initialize=function(t){i=t,l()},s.strength=function(t){return arguments.length?(a="function"==typeof t?t:Bl(+t),l(),s):a},s.radius=function(e){return arguments.length?(t="function"==typeof e?e:Bl(+e),l(),s):t},s.x=function(t){return arguments.length?(e=+t,s):e},s.y=function(t){return arguments.length?(n=+t,s):n},s}function bu(t){var e,n,i,r=Bl(.1);function o(t){for(var r,o=0,a=e.length;o<a;++o)(r=e[o]).vx+=(i[o]-r.x)*n[o]*t}function a(){if(e){var o,a=e.length;for(n=new Array(a),i=new Array(a),o=0;o<a;++o)n[o]=isNaN(i[o]=+t(e[o],o,e))?0:+r(e[o],o,e)}}return"function"!=typeof t&&(t=Bl(null==t?0:+t)),o.initialize=function(t){e=t,a()},o.strength=function(t){return arguments.length?(r="function"==typeof t?t:Bl(+t),a(),o):r},o.x=function(e){return arguments.length?(t="function"==typeof e?e:Bl(+e),a(),o):t},o}function _u(t){var e,n,i,r=Bl(.1);function o(t){for(var r,o=0,a=e.length;o<a;++o)(r=e[o]).vy+=(i[o]-r.y)*n[o]*t}function a(){if(e){var o,a=e.length;for(n=new Array(a),i=new Array(a),o=0;o<a;++o)n[o]=isNaN(i[o]=+t(e[o],o,e))?0:+r(e[o],o,e)}}return"function"!=typeof t&&(t=Bl(null==t?0:+t)),o.initialize=function(t){e=t,a()},o.strength=function(t){return arguments.length?(r="function"==typeof t?t:Bl(+t),a(),o):r},o.y=function(e){return arguments.length?(t="function"==typeof e?e:Bl(+e),a(),o):t},o}function wu(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function xu(t){return(t=wu(Math.abs(t)))?t[1]:NaN}var Mu,Eu=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Su(t){if(!(e=Eu.exec(t)))throw new Error("invalid format: "+t);var e;return new ku({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function ku(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function Cu(t,e){var n=wu(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}Su.prototype=ku.prototype,ku.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const Tu={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Cu(100*t,e),r:Cu,s:function(t,e){var n=wu(t,e);if(!n)return t+"";var i=n[0],r=n[1],o=r-(Mu=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,a=i.length;return o===a?i:o>a?i+new Array(o-a+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+wu(t,Math.max(0,e+o-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Du(t){return t}var Lu,Au,Ou,Pu=Array.prototype.map,Iu=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Nu(t){var e,n,i=void 0===t.grouping||void 0===t.thousands?Du:(e=Pu.call(t.grouping,Number),n=t.thousands+"",function(t,i){for(var r=t.length,o=[],a=0,s=e[0],l=0;r>0&&s>0&&(l+s+1>i&&(s=Math.max(1,i-l)),o.push(t.substring(r-=s,r+s)),!((l+=s+1)>i));)s=e[a=(a+1)%e.length];return o.reverse().join(n)}),r=void 0===t.currency?"":t.currency[0]+"",o=void 0===t.currency?"":t.currency[1]+"",a=void 0===t.decimal?".":t.decimal+"",s=void 0===t.numerals?Du:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(Pu.call(t.numerals,String)),l=void 0===t.percent?"%":t.percent+"",u=void 0===t.minus?"":t.minus+"",c=void 0===t.nan?"NaN":t.nan+"";function h(t){var e=(t=Su(t)).fill,n=t.align,h=t.sign,d=t.symbol,f=t.zero,p=t.width,m=t.comma,g=t.precision,v=t.trim,y=t.type;"n"===y?(m=!0,y="g"):Tu[y]||(void 0===g&&(g=12),v=!0,y="g"),(f||"0"===e&&"="===n)&&(f=!0,e="0",n="=");var b="$"===d?r:"#"===d&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",_="$"===d?o:/[%p]/.test(y)?l:"",w=Tu[y],x=/[defgprs%]/.test(y);function M(t){var r,o,l,d=b,M=_;if("c"===y)M=w(t)+M,t="";else{var E=(t=+t)<0||1/t<0;if(t=isNaN(t)?c:w(Math.abs(t),g),v&&(t=function(t){t:for(var e,n=t.length,i=1,r=-1;i<n;++i)switch(t[i]){case".":r=e=i;break;case"0":0===r&&(r=i),e=i;break;default:if(!+t[i])break t;r>0&&(r=0)}return r>0?t.slice(0,r)+t.slice(e+1):t}(t)),E&&0==+t&&"+"!==h&&(E=!1),d=(E?"("===h?h:u:"-"===h||"("===h?"":h)+d,M=("s"===y?Iu[8+Mu/3]:"")+M+(E&&"("===h?")":""),x)for(r=-1,o=t.length;++r<o;)if(48>(l=t.charCodeAt(r))||l>57){M=(46===l?a+t.slice(r+1):t.slice(r))+M,t=t.slice(0,r);break}}m&&!f&&(t=i(t,1/0));var S=d.length+t.length+M.length,k=S<p?new Array(p-S+1).join(e):"";switch(m&&f&&(t=i(k+t,k.length?p-M.length:1/0),k=""),n){case"<":t=d+t+M+k;break;case"=":t=d+k+t+M;break;case"^":t=k.slice(0,S=k.length>>1)+d+t+M+k.slice(S);break;default:t=k+d+t+M}return s(t)}return g=void 0===g?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),M.toString=function(){return t+""},M}return{format:h,formatPrefix:function(t,e){var n=h(((t=Su(t)).type="f",t)),i=3*Math.max(-8,Math.min(8,Math.floor(xu(e)/3))),r=Math.pow(10,-i),o=Iu[8+i/3];return function(t){return n(r*t)+o}}}}function Ru(t){return Lu=Nu(t),Au=Lu.format,Ou=Lu.formatPrefix,Lu}function Yu(t){return Math.max(0,-xu(Math.abs(t)))}function ju(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(xu(e)/3)))-xu(Math.abs(t)))}function Fu(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,xu(e)-xu(t))+1}Ru({thousands:",",grouping:[3],currency:["$",""]});var Bu=1e-6,zu=1e-12,Hu=Math.PI,Gu=Hu/2,Wu=Hu/4,Uu=2*Hu,Vu=180/Hu,Xu=Hu/180,qu=Math.abs,Ku=Math.atan,$u=Math.atan2,Zu=Math.cos,Ju=Math.ceil,Qu=Math.exp,tc=(Math.floor,Math.hypot),ec=Math.log,nc=Math.pow,ic=Math.sin,rc=Math.sign||function(t){return t>0?1:t<0?-1:0},oc=Math.sqrt,ac=Math.tan;function sc(t){return t>1?0:t<-1?Hu:Math.acos(t)}function lc(t){return t>1?Gu:t<-1?-Gu:Math.asin(t)}function uc(t){return(t=ic(t/2))*t}function cc(){}function hc(t,e){t&&fc.hasOwnProperty(t.type)&&fc[t.type](t,e)}var dc={Feature:function(t,e){hc(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)hc(n[i].geometry,e)}},fc={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){pc(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)pc(n[i],e,0)},Polygon:function(t,e){mc(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)mc(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)hc(n[i],e)}};function pc(t,e,n){var i,r=-1,o=t.length-n;for(e.lineStart();++r<o;)i=t[r],e.point(i[0],i[1],i[2]);e.lineEnd()}function mc(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)pc(t[n],e,1);e.polygonEnd()}function gc(t,e){t&&dc.hasOwnProperty(t.type)?dc[t.type](t,e):hc(t,e)}var vc,yc,bc,_c,wc,xc,Mc,Ec,Sc,kc,Cc,Tc,Dc,Lc,Ac,Oc,Pc=new w,Ic=new w,Nc={point:cc,lineStart:cc,lineEnd:cc,polygonStart:function(){Pc=new w,Nc.lineStart=Rc,Nc.lineEnd=Yc},polygonEnd:function(){var t=+Pc;Ic.add(t<0?Uu+t:t),this.lineStart=this.lineEnd=this.point=cc},sphere:function(){Ic.add(Uu)}};function Rc(){Nc.point=jc}function Yc(){Fc(vc,yc)}function jc(t,e){Nc.point=Fc,vc=t,yc=e,bc=t*=Xu,_c=Zu(e=(e*=Xu)/2+Wu),wc=ic(e)}function Fc(t,e){var n=(t*=Xu)-bc,i=n>=0?1:-1,r=i*n,o=Zu(e=(e*=Xu)/2+Wu),a=ic(e),s=wc*a,l=_c*o+s*Zu(r),u=s*i*ic(r);Pc.add($u(u,l)),bc=t,_c=o,wc=a}function Bc(t){return Ic=new w,gc(t,Nc),2*Ic}function zc(t){return[$u(t[1],t[0]),lc(t[2])]}function Hc(t){var e=t[0],n=t[1],i=Zu(n);return[i*Zu(e),i*ic(e),ic(n)]}function Gc(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Wc(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Uc(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Vc(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Xc(t){var e=oc(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var qc,Kc,$c,Zc,Jc,Qc,th,eh,nh,ih,rh,oh,ah,sh,lh,uh,ch={point:hh,lineStart:fh,lineEnd:ph,polygonStart:function(){ch.point=mh,ch.lineStart=gh,ch.lineEnd=vh,Lc=new w,Nc.polygonStart()},polygonEnd:function(){Nc.polygonEnd(),ch.point=hh,ch.lineStart=fh,ch.lineEnd=ph,Pc<0?(xc=-(Ec=180),Mc=-(Sc=90)):Lc>Bu?Sc=90:Lc<-1e-6&&(Mc=-90),Oc[0]=xc,Oc[1]=Ec},sphere:function(){xc=-(Ec=180),Mc=-(Sc=90)}};function hh(t,e){Ac.push(Oc=[xc=t,Ec=t]),e<Mc&&(Mc=e),e>Sc&&(Sc=e)}function dh(t,e){var n=Hc([t*Xu,e*Xu]);if(Dc){var i=Wc(Dc,n),r=Wc([i[1],-i[0],0],i);Xc(r),r=zc(r);var o,a=t-kc,s=a>0?1:-1,l=r[0]*Vu*s,u=qu(a)>180;u^(s*kc<l&&l<s*t)?(o=r[1]*Vu)>Sc&&(Sc=o):u^(s*kc<(l=(l+360)%360-180)&&l<s*t)?(o=-r[1]*Vu)<Mc&&(Mc=o):(e<Mc&&(Mc=e),e>Sc&&(Sc=e)),u?t<kc?yh(xc,t)>yh(xc,Ec)&&(Ec=t):yh(t,Ec)>yh(xc,Ec)&&(xc=t):Ec>=xc?(t<xc&&(xc=t),t>Ec&&(Ec=t)):t>kc?yh(xc,t)>yh(xc,Ec)&&(Ec=t):yh(t,Ec)>yh(xc,Ec)&&(xc=t)}else Ac.push(Oc=[xc=t,Ec=t]);e<Mc&&(Mc=e),e>Sc&&(Sc=e),Dc=n,kc=t}function fh(){ch.point=dh}function ph(){Oc[0]=xc,Oc[1]=Ec,ch.point=hh,Dc=null}function mh(t,e){if(Dc){var n=t-kc;Lc.add(qu(n)>180?n+(n>0?360:-360):n)}else Cc=t,Tc=e;Nc.point(t,e),dh(t,e)}function gh(){Nc.lineStart()}function vh(){mh(Cc,Tc),Nc.lineEnd(),qu(Lc)>Bu&&(xc=-(Ec=180)),Oc[0]=xc,Oc[1]=Ec,Dc=null}function yh(t,e){return(e-=t)<0?e+360:e}function bh(t,e){return t[0]-e[0]}function _h(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}function wh(t){var e,n,i,r,o,a,s;if(Sc=Ec=-(xc=Mc=1/0),Ac=[],gc(t,ch),n=Ac.length){for(Ac.sort(bh),e=1,o=[i=Ac[0]];e<n;++e)_h(i,(r=Ac[e])[0])||_h(i,r[1])?(yh(i[0],r[1])>yh(i[0],i[1])&&(i[1]=r[1]),yh(r[0],i[1])>yh(i[0],i[1])&&(i[0]=r[0])):o.push(i=r);for(a=-1/0,e=0,i=o[n=o.length-1];e<=n;i=r,++e)r=o[e],(s=yh(i[1],r[0]))>a&&(a=s,xc=r[0],Ec=i[1])}return Ac=Oc=null,xc===1/0||Mc===1/0?[[NaN,NaN],[NaN,NaN]]:[[xc,Mc],[Ec,Sc]]}var xh={sphere:cc,point:Mh,lineStart:Sh,lineEnd:Th,polygonStart:function(){xh.lineStart=Dh,xh.lineEnd=Lh},polygonEnd:function(){xh.lineStart=Sh,xh.lineEnd=Th}};function Mh(t,e){t*=Xu;var n=Zu(e*=Xu);Eh(n*Zu(t),n*ic(t),ic(e))}function Eh(t,e,n){++qc,$c+=(t-$c)/qc,Zc+=(e-Zc)/qc,Jc+=(n-Jc)/qc}function Sh(){xh.point=kh}function kh(t,e){t*=Xu;var n=Zu(e*=Xu);sh=n*Zu(t),lh=n*ic(t),uh=ic(e),xh.point=Ch,Eh(sh,lh,uh)}function Ch(t,e){t*=Xu;var n=Zu(e*=Xu),i=n*Zu(t),r=n*ic(t),o=ic(e),a=$u(oc((a=lh*o-uh*r)*a+(a=uh*i-sh*o)*a+(a=sh*r-lh*i)*a),sh*i+lh*r+uh*o);Kc+=a,Qc+=a*(sh+(sh=i)),th+=a*(lh+(lh=r)),eh+=a*(uh+(uh=o)),Eh(sh,lh,uh)}function Th(){xh.point=Mh}function Dh(){xh.point=Ah}function Lh(){Oh(oh,ah),xh.point=Mh}function Ah(t,e){oh=t,ah=e,t*=Xu,e*=Xu,xh.point=Oh;var n=Zu(e);sh=n*Zu(t),lh=n*ic(t),uh=ic(e),Eh(sh,lh,uh)}function Oh(t,e){t*=Xu;var n=Zu(e*=Xu),i=n*Zu(t),r=n*ic(t),o=ic(e),a=lh*o-uh*r,s=uh*i-sh*o,l=sh*r-lh*i,u=tc(a,s,l),c=lc(u),h=u&&-c/u;nh.add(h*a),ih.add(h*s),rh.add(h*l),Kc+=c,Qc+=c*(sh+(sh=i)),th+=c*(lh+(lh=r)),eh+=c*(uh+(uh=o)),Eh(sh,lh,uh)}function Ph(t){qc=Kc=$c=Zc=Jc=Qc=th=eh=0,nh=new w,ih=new w,rh=new w,gc(t,xh);var e=+nh,n=+ih,i=+rh,r=tc(e,n,i);return r<zu&&(e=Qc,n=th,i=eh,Kc<Bu&&(e=$c,n=Zc,i=Jc),(r=tc(e,n,i))<zu)?[NaN,NaN]:[$u(n,e)*Vu,lc(i/r)*Vu]}function Ih(t){return function(){return t}}function Nh(t,e){function n(n,i){return n=t(n,i),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,i){return(n=e.invert(n,i))&&t.invert(n[0],n[1])}),n}function Rh(t,e){return[qu(t)>Hu?t+Math.round(-t/Uu)*Uu:t,e]}function Yh(t,e,n){return(t%=Uu)?e||n?Nh(Fh(t),Bh(e,n)):Fh(t):e||n?Bh(e,n):Rh}function jh(t){return function(e,n){return[(e+=t)>Hu?e-Uu:e<-Hu?e+Uu:e,n]}}function Fh(t){var e=jh(t);return e.invert=jh(-t),e}function Bh(t,e){var n=Zu(t),i=ic(t),r=Zu(e),o=ic(e);function a(t,e){var a=Zu(e),s=Zu(t)*a,l=ic(t)*a,u=ic(e),c=u*n+s*i;return[$u(l*r-c*o,s*n-u*i),lc(c*r+l*o)]}return a.invert=function(t,e){var a=Zu(e),s=Zu(t)*a,l=ic(t)*a,u=ic(e),c=u*r-l*o;return[$u(l*r+u*o,s*n+c*i),lc(c*n-s*i)]},a}function zh(t){function e(e){return(e=t(e[0]*Xu,e[1]*Xu))[0]*=Vu,e[1]*=Vu,e}return t=Yh(t[0]*Xu,t[1]*Xu,t.length>2?t[2]*Xu:0),e.invert=function(e){return(e=t.invert(e[0]*Xu,e[1]*Xu))[0]*=Vu,e[1]*=Vu,e},e}function Hh(t,e,n,i,r,o){if(n){var a=Zu(e),s=ic(e),l=i*n;null==r?(r=e+i*Uu,o=e-l/2):(r=Gh(a,r),o=Gh(a,o),(i>0?r<o:r>o)&&(r+=i*Uu));for(var u,c=r;i>0?c>o:c<o;c-=l)u=zc([a,-s*Zu(c),-s*ic(c)]),t.point(u[0],u[1])}}function Gh(t,e){(e=Hc(e))[0]-=t,Xc(e);var n=sc(-e[1]);return((-e[2]<0?-n:n)+Uu-Bu)%Uu}function Wh(){var t,e,n=Ih([0,0]),i=Ih(90),r=Ih(6),o={point:function(n,i){t.push(n=e(n,i)),n[0]*=Vu,n[1]*=Vu}};function a(){var a=n.apply(this,arguments),s=i.apply(this,arguments)*Xu,l=r.apply(this,arguments)*Xu;return t=[],e=Yh(-a[0]*Xu,-a[1]*Xu,0).invert,Hh(o,s,l,1),a={type:"Polygon",coordinates:[t]},t=e=null,a}return a.center=function(t){return arguments.length?(n="function"==typeof t?t:Ih([+t[0],+t[1]]),a):n},a.radius=function(t){return arguments.length?(i="function"==typeof t?t:Ih(+t),a):i},a.precision=function(t){return arguments.length?(r="function"==typeof t?t:Ih(+t),a):r},a}function Uh(){var t,e=[];return{point:function(e,n,i){t.push([e,n,i])},lineStart:function(){e.push(t=[])},lineEnd:cc,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Vh(t,e){return qu(t[0]-e[0])<Bu&&qu(t[1]-e[1])<Bu}function Xh(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function qh(t,e,n,i,r){var o,a,s=[],l=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,i=t[0],a=t[e];if(Vh(i,a)){if(!i[2]&&!a[2]){for(r.lineStart(),o=0;o<e;++o)r.point((i=t[o])[0],i[1]);return void r.lineEnd()}a[0]+=2e-6}s.push(n=new Xh(i,t,null,!0)),l.push(n.o=new Xh(i,null,n,!1)),s.push(n=new Xh(a,t,null,!1)),l.push(n.o=new Xh(a,null,n,!0))}})),s.length){for(l.sort(e),Kh(s),Kh(l),o=0,a=l.length;o<a;++o)l[o].e=n=!n;for(var u,c,h=s[0];;){for(var d=h,f=!0;d.v;)if((d=d.n)===h)return;u=d.z,r.lineStart();do{if(d.v=d.o.v=!0,d.e){if(f)for(o=0,a=u.length;o<a;++o)r.point((c=u[o])[0],c[1]);else i(d.x,d.n.x,1,r);d=d.n}else{if(f)for(u=d.p.z,o=u.length-1;o>=0;--o)r.point((c=u[o])[0],c[1]);else i(d.x,d.p.x,-1,r);d=d.p}u=(d=d.o).z,f=!f}while(!d.v);r.lineEnd()}}}function Kh(t){if(e=t.length){for(var e,n,i=0,r=t[0];++i<e;)r.n=n=t[i],n.p=r,r=n;r.n=n=t[0],n.p=r}}function $h(t){return qu(t[0])<=Hu?t[0]:rc(t[0])*((qu(t[0])+Hu)%Uu-Hu)}function Zh(t,e){var n=$h(e),i=e[1],r=ic(i),o=[ic(n),-Zu(n),0],a=0,s=0,l=new w;1===r?i=Gu+Bu:-1===r&&(i=-Gu-Bu);for(var u=0,c=t.length;u<c;++u)if(d=(h=t[u]).length)for(var h,d,f=h[d-1],p=$h(f),m=f[1]/2+Wu,g=ic(m),v=Zu(m),y=0;y<d;++y,p=_,g=M,v=E,f=b){var b=h[y],_=$h(b),x=b[1]/2+Wu,M=ic(x),E=Zu(x),S=_-p,k=S>=0?1:-1,C=k*S,T=C>Hu,D=g*M;if(l.add($u(D*k*ic(C),v*E+D*Zu(C))),a+=T?S+k*Uu:S,T^p>=n^_>=n){var L=Wc(Hc(f),Hc(b));Xc(L);var A=Wc(o,L);Xc(A);var O=(T^S>=0?-1:1)*lc(A[2]);(i>O||i===O&&(L[0]||L[1]))&&(s+=T^S>=0?1:-1)}}return(a<-1e-6||a<Bu&&l<-1e-12)^1&s}function Jh(t,e,n,i){return function(r){var o,a,s,l=e(r),u=Uh(),c=e(u),h=!1,d={point:f,lineStart:m,lineEnd:g,polygonStart:function(){d.point=v,d.lineStart=y,d.lineEnd=b,a=[],o=[]},polygonEnd:function(){d.point=f,d.lineStart=m,d.lineEnd=g,a=gt(a);var t=Zh(o,i);a.length?(h||(r.polygonStart(),h=!0),qh(a,td,t,n,r)):t&&(h||(r.polygonStart(),h=!0),r.lineStart(),n(null,null,1,r),r.lineEnd()),h&&(r.polygonEnd(),h=!1),a=o=null},sphere:function(){r.polygonStart(),r.lineStart(),n(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function f(e,n){t(e,n)&&r.point(e,n)}function p(t,e){l.point(t,e)}function m(){d.point=p,l.lineStart()}function g(){d.point=f,l.lineEnd()}function v(t,e){s.push([t,e]),c.point(t,e)}function y(){c.lineStart(),s=[]}function b(){v(s[0][0],s[0][1]),c.lineEnd();var t,e,n,i,l=c.clean(),d=u.result(),f=d.length;if(s.pop(),o.push(s),s=null,f)if(1&l){if((e=(n=d[0]).length-1)>0){for(h||(r.polygonStart(),h=!0),r.lineStart(),t=0;t<e;++t)r.point((i=n[t])[0],i[1]);r.lineEnd()}}else f>1&&2&l&&d.push(d.pop().concat(d.shift())),a.push(d.filter(Qh))}return d}}function Qh(t){return t.length>1}function td(t,e){return((t=t.x)[0]<0?t[1]-Gu-Bu:Gu-t[1])-((e=e.x)[0]<0?e[1]-Gu-Bu:Gu-e[1])}Rh.invert=Rh;const ed=Jh((function(){return!0}),(function(t){var e,n=NaN,i=NaN,r=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var s=o>0?Hu:-Hu,l=qu(o-n);qu(l-Hu)<Bu?(t.point(n,i=(i+a)/2>0?Gu:-Gu),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(s,i),t.point(o,i),e=0):r!==s&&l>=Hu&&(qu(n-r)<Bu&&(n-=r*Bu),qu(o-s)<Bu&&(o-=s*Bu),i=function(t,e,n,i){var r,o,a=ic(t-n);return qu(a)>Bu?Ku((ic(e)*(o=Zu(i))*ic(n)-ic(i)*(r=Zu(e))*ic(t))/(r*o*a)):(e+i)/2}(n,i,o,a),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(s,i),e=0),t.point(n=o,i=a),r=s},lineEnd:function(){t.lineEnd(),n=i=NaN},clean:function(){return 2-e}}}),(function(t,e,n,i){var r;if(null==t)r=n*Gu,i.point(-Hu,r),i.point(0,r),i.point(Hu,r),i.point(Hu,0),i.point(Hu,-r),i.point(0,-r),i.point(-Hu,-r),i.point(-Hu,0),i.point(-Hu,r);else if(qu(t[0]-e[0])>Bu){var o=t[0]<e[0]?Hu:-Hu;r=n*o/2,i.point(-o,r),i.point(0,r),i.point(o,r)}else i.point(e[0],e[1])}),[-Hu,-Gu]);function nd(t){var e=Zu(t),n=6*Xu,i=e>0,r=qu(e)>Bu;function o(t,n){return Zu(t)*Zu(n)>e}function a(t,n,i){var r=[1,0,0],o=Wc(Hc(t),Hc(n)),a=Gc(o,o),s=o[0],l=a-s*s;if(!l)return!i&&t;var u=e*a/l,c=-e*s/l,h=Wc(r,o),d=Vc(r,u);Uc(d,Vc(o,c));var f=h,p=Gc(d,f),m=Gc(f,f),g=p*p-m*(Gc(d,d)-1);if(!(g<0)){var v=oc(g),y=Vc(f,(-p-v)/m);if(Uc(y,d),y=zc(y),!i)return y;var b,_=t[0],w=n[0],x=t[1],M=n[1];w<_&&(b=_,_=w,w=b);var E=w-_,S=qu(E-Hu)<Bu;if(!S&&M<x&&(b=x,x=M,M=b),S||E<Bu?S?x+M>0^y[1]<(qu(y[0]-_)<Bu?x:M):x<=y[1]&&y[1]<=M:E>Hu^(_<=y[0]&&y[0]<=w)){var k=Vc(f,(-p+v)/m);return Uc(k,d),[y,zc(k)]}}}function s(e,n){var r=i?t:Hu-t,o=0;return e<-r?o|=1:e>r&&(o|=2),n<-r?o|=4:n>r&&(o|=8),o}return Jh(o,(function(t){var e,n,l,u,c;return{lineStart:function(){u=l=!1,c=1},point:function(h,d){var f,p=[h,d],m=o(h,d),g=i?m?0:s(h,d):m?s(h+(h<0?Hu:-Hu),d):0;if(!e&&(u=l=m)&&t.lineStart(),m!==l&&(!(f=a(e,p))||Vh(e,f)||Vh(p,f))&&(p[2]=1),m!==l)c=0,m?(t.lineStart(),f=a(p,e),t.point(f[0],f[1])):(f=a(e,p),t.point(f[0],f[1],2),t.lineEnd()),e=f;else if(r&&e&&i^m){var v;g&n||!(v=a(p,e,!0))||(c=0,i?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1],3)))}!m||e&&Vh(e,p)||t.point(p[0],p[1]),e=p,l=m,n=g},lineEnd:function(){l&&t.lineEnd(),e=null},clean:function(){return c|(u&&l)<<1}}}),(function(e,i,r,o){Hh(o,t,n,r,e,i)}),i?[0,-t]:[-Hu,t-Hu])}var id,rd,od,ad,sd=1e9,ld=-sd;function ud(t,e,n,i){function r(r,o){return t<=r&&r<=n&&e<=o&&o<=i}function o(r,o,s,u){var c=0,h=0;if(null==r||(c=a(r,s))!==(h=a(o,s))||l(r,o)<0^s>0)do{u.point(0===c||3===c?t:n,c>1?i:e)}while((c=(c+s+4)%4)!==h);else u.point(o[0],o[1])}function a(i,r){return qu(i[0]-t)<Bu?r>0?0:3:qu(i[0]-n)<Bu?r>0?2:1:qu(i[1]-e)<Bu?r>0?1:0:r>0?3:2}function s(t,e){return l(t.x,e.x)}function l(t,e){var n=a(t,1),i=a(e,1);return n!==i?n-i:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(a){var l,u,c,h,d,f,p,m,g,v,y,b=a,_=Uh(),w={point:x,lineStart:function(){w.point=M,u&&u.push(c=[]);v=!0,g=!1,p=m=NaN},lineEnd:function(){l&&(M(h,d),f&&g&&_.rejoin(),l.push(_.result()));w.point=x,g&&b.lineEnd()},polygonStart:function(){b=_,l=[],u=[],y=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,r=u.length;n<r;++n)for(var o,a,s=u[n],l=1,c=s.length,h=s[0],d=h[0],f=h[1];l<c;++l)o=d,a=f,d=(h=s[l])[0],f=h[1],a<=i?f>i&&(d-o)*(i-a)>(f-a)*(t-o)&&++e:f<=i&&(d-o)*(i-a)<(f-a)*(t-o)&&--e;return e}(),n=y&&e,r=(l=gt(l)).length;(n||r)&&(a.polygonStart(),n&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),r&&qh(l,s,e,o,a),a.polygonEnd());b=a,l=u=c=null}};function x(t,e){r(t,e)&&b.point(t,e)}function M(o,a){var s=r(o,a);if(u&&c.push([o,a]),v)h=o,d=a,f=s,v=!1,s&&(b.lineStart(),b.point(o,a));else if(s&&g)b.point(o,a);else{var l=[p=Math.max(ld,Math.min(sd,p)),m=Math.max(ld,Math.min(sd,m))],_=[o=Math.max(ld,Math.min(sd,o)),a=Math.max(ld,Math.min(sd,a))];!function(t,e,n,i,r,o){var a,s=t[0],l=t[1],u=0,c=1,h=e[0]-s,d=e[1]-l;if(a=n-s,h||!(a>0)){if(a/=h,h<0){if(a<u)return;a<c&&(c=a)}else if(h>0){if(a>c)return;a>u&&(u=a)}if(a=r-s,h||!(a<0)){if(a/=h,h<0){if(a>c)return;a>u&&(u=a)}else if(h>0){if(a<u)return;a<c&&(c=a)}if(a=i-l,d||!(a>0)){if(a/=d,d<0){if(a<u)return;a<c&&(c=a)}else if(d>0){if(a>c)return;a>u&&(u=a)}if(a=o-l,d||!(a<0)){if(a/=d,d<0){if(a>c)return;a>u&&(u=a)}else if(d>0){if(a<u)return;a<c&&(c=a)}return u>0&&(t[0]=s+u*h,t[1]=l+u*d),c<1&&(e[0]=s+c*h,e[1]=l+c*d),!0}}}}}(l,_,t,e,n,i)?s&&(b.lineStart(),b.point(o,a),y=!1):(g||(b.lineStart(),b.point(l[0],l[1])),b.point(_[0],_[1]),s||b.lineEnd(),y=!1)}p=o,m=a,g=s}return w}}function cd(){var t,e,n,i=0,r=0,o=960,a=500;return n={stream:function(n){return t&&e===n?t:t=ud(i,r,o,a)(e=n)},extent:function(s){return arguments.length?(i=+s[0][0],r=+s[0][1],o=+s[1][0],a=+s[1][1],t=e=null,n):[[i,r],[o,a]]}}}var hd={sphere:cc,point:cc,lineStart:function(){hd.point=fd,hd.lineEnd=dd},lineEnd:cc,polygonStart:cc,polygonEnd:cc};function dd(){hd.point=hd.lineEnd=cc}function fd(t,e){rd=t*=Xu,od=ic(e*=Xu),ad=Zu(e),hd.point=pd}function pd(t,e){t*=Xu;var n=ic(e*=Xu),i=Zu(e),r=qu(t-rd),o=Zu(r),a=i*ic(r),s=ad*n-od*i*o,l=od*n+ad*i*o;id.add($u(oc(a*a+s*s),l)),rd=t,od=n,ad=i}function md(t){return id=new w,gc(t,hd),+id}var gd=[null,null],vd={type:"LineString",coordinates:gd};function yd(t,e){return gd[0]=t,gd[1]=e,md(vd)}var bd={Feature:function(t,e){return wd(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)if(wd(n[i].geometry,e))return!0;return!1}},_d={Sphere:function(){return!0},Point:function(t,e){return xd(t.coordinates,e)},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)if(xd(n[i],e))return!0;return!1},LineString:function(t,e){return Md(t.coordinates,e)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)if(Md(n[i],e))return!0;return!1},Polygon:function(t,e){return Ed(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)if(Ed(n[i],e))return!0;return!1},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)if(wd(n[i],e))return!0;return!1}};function wd(t,e){return!(!t||!_d.hasOwnProperty(t.type))&&_d[t.type](t,e)}function xd(t,e){return 0===yd(t,e)}function Md(t,e){for(var n,i,r,o=0,a=t.length;o<a;o++){if(0===(i=yd(t[o],e)))return!0;if(o>0&&(r=yd(t[o],t[o-1]))>0&&n<=r&&i<=r&&(n+i-r)*(1-Math.pow((n-i)/r,2))<zu*r)return!0;n=i}return!1}function Ed(t,e){return!!Zh(t.map(Sd),kd(e))}function Sd(t){return(t=t.map(kd)).pop(),t}function kd(t){return[t[0]*Xu,t[1]*Xu]}function Cd(t,e){return(t&&bd.hasOwnProperty(t.type)?bd[t.type]:wd)(t,e)}function Td(t,e,n){var i=wt(t,e-Bu,n).concat(e);return function(t){return i.map((function(e){return[t,e]}))}}function Dd(t,e,n){var i=wt(t,e-Bu,n).concat(e);return function(t){return i.map((function(e){return[e,t]}))}}function Ld(){var t,e,n,i,r,o,a,s,l,u,c,h,d=10,f=d,p=90,m=360,g=2.5;function v(){return{type:"MultiLineString",coordinates:y()}}function y(){return wt(Ju(i/p)*p,n,p).map(c).concat(wt(Ju(s/m)*m,a,m).map(h)).concat(wt(Ju(e/d)*d,t,d).filter((function(t){return qu(t%p)>Bu})).map(l)).concat(wt(Ju(o/f)*f,r,f).filter((function(t){return qu(t%m)>Bu})).map(u))}return v.lines=function(){return y().map((function(t){return{type:"LineString",coordinates:t}}))},v.outline=function(){return{type:"Polygon",coordinates:[c(i).concat(h(a).slice(1),c(n).reverse().slice(1),h(s).reverse().slice(1))]}},v.extent=function(t){return arguments.length?v.extentMajor(t).extentMinor(t):v.extentMinor()},v.extentMajor=function(t){return arguments.length?(i=+t[0][0],n=+t[1][0],s=+t[0][1],a=+t[1][1],i>n&&(t=i,i=n,n=t),s>a&&(t=s,s=a,a=t),v.precision(g)):[[i,s],[n,a]]},v.extentMinor=function(n){return arguments.length?(e=+n[0][0],t=+n[1][0],o=+n[0][1],r=+n[1][1],e>t&&(n=e,e=t,t=n),o>r&&(n=o,o=r,r=n),v.precision(g)):[[e,o],[t,r]]},v.step=function(t){return arguments.length?v.stepMajor(t).stepMinor(t):v.stepMinor()},v.stepMajor=function(t){return arguments.length?(p=+t[0],m=+t[1],v):[p,m]},v.stepMinor=function(t){return arguments.length?(d=+t[0],f=+t[1],v):[d,f]},v.precision=function(d){return arguments.length?(g=+d,l=Td(o,r,90),u=Dd(e,t,g),c=Td(s,a,90),h=Dd(i,n,g),v):g},v.extentMajor([[-180,-89.999999],[180,89.999999]]).extentMinor([[-180,-80.000001],[180,80.000001]])}function Ad(){return Ld()()}function Od(t,e){var n=t[0]*Xu,i=t[1]*Xu,r=e[0]*Xu,o=e[1]*Xu,a=Zu(i),s=ic(i),l=Zu(o),u=ic(o),c=a*Zu(n),h=a*ic(n),d=l*Zu(r),f=l*ic(r),p=2*lc(oc(uc(o-i)+a*l*uc(r-n))),m=ic(p),g=p?function(t){var e=ic(t*=p)/m,n=ic(p-t)/m,i=n*c+e*d,r=n*h+e*f,o=n*s+e*u;return[$u(r,i)*Vu,$u(o,oc(i*i+r*r))*Vu]}:function(){return[n*Vu,i*Vu]};return g.distance=p,g}const Pd=t=>t;var Id,Nd,Rd,Yd,jd=new w,Fd=new w,Bd={point:cc,lineStart:cc,lineEnd:cc,polygonStart:function(){Bd.lineStart=zd,Bd.lineEnd=Wd},polygonEnd:function(){Bd.lineStart=Bd.lineEnd=Bd.point=cc,jd.add(qu(Fd)),Fd=new w},result:function(){var t=jd/2;return jd=new w,t}};function zd(){Bd.point=Hd}function Hd(t,e){Bd.point=Gd,Id=Rd=t,Nd=Yd=e}function Gd(t,e){Fd.add(Yd*t-Rd*e),Rd=t,Yd=e}function Wd(){Gd(Id,Nd)}const Ud=Bd;var Vd=1/0,Xd=Vd,qd=-Vd,Kd=qd,$d={point:function(t,e){t<Vd&&(Vd=t);t>qd&&(qd=t);e<Xd&&(Xd=e);e>Kd&&(Kd=e)},lineStart:cc,lineEnd:cc,polygonStart:cc,polygonEnd:cc,result:function(){var t=[[Vd,Xd],[qd,Kd]];return qd=Kd=-(Xd=Vd=1/0),t}};const Zd=$d;var Jd,Qd,tf,ef,nf=0,rf=0,of=0,af=0,sf=0,lf=0,uf=0,cf=0,hf=0,df={point:ff,lineStart:pf,lineEnd:vf,polygonStart:function(){df.lineStart=yf,df.lineEnd=bf},polygonEnd:function(){df.point=ff,df.lineStart=pf,df.lineEnd=vf},result:function(){var t=hf?[uf/hf,cf/hf]:lf?[af/lf,sf/lf]:of?[nf/of,rf/of]:[NaN,NaN];return nf=rf=of=af=sf=lf=uf=cf=hf=0,t}};function ff(t,e){nf+=t,rf+=e,++of}function pf(){df.point=mf}function mf(t,e){df.point=gf,ff(tf=t,ef=e)}function gf(t,e){var n=t-tf,i=e-ef,r=oc(n*n+i*i);af+=r*(tf+t)/2,sf+=r*(ef+e)/2,lf+=r,ff(tf=t,ef=e)}function vf(){df.point=ff}function yf(){df.point=_f}function bf(){wf(Jd,Qd)}function _f(t,e){df.point=wf,ff(Jd=tf=t,Qd=ef=e)}function wf(t,e){var n=t-tf,i=e-ef,r=oc(n*n+i*i);af+=r*(tf+t)/2,sf+=r*(ef+e)/2,lf+=r,uf+=(r=ef*t-tf*e)*(tf+t),cf+=r*(ef+e),hf+=3*r,ff(tf=t,ef=e)}const xf=df;function Mf(t){this._context=t}Mf.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,Uu)}},result:cc};var Ef,Sf,kf,Cf,Tf,Df=new w,Lf={point:cc,lineStart:function(){Lf.point=Af},lineEnd:function(){Ef&&Of(Sf,kf),Lf.point=cc},polygonStart:function(){Ef=!0},polygonEnd:function(){Ef=null},result:function(){var t=+Df;return Df=new w,t}};function Af(t,e){Lf.point=Of,Sf=Cf=t,kf=Tf=e}function Of(t,e){Cf-=t,Tf-=e,Df.add(oc(Cf*Cf+Tf*Tf)),Cf=t,Tf=e}const Pf=Lf;function If(){this._string=[]}function Nf(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Rf(t,e){var n,i,r=4.5;function o(t){return t&&("function"==typeof r&&i.pointRadius(+r.apply(this,arguments)),gc(t,n(i))),i.result()}return o.area=function(t){return gc(t,n(Ud)),Ud.result()},o.measure=function(t){return gc(t,n(Pf)),Pf.result()},o.bounds=function(t){return gc(t,n(Zd)),Zd.result()},o.centroid=function(t){return gc(t,n(xf)),xf.result()},o.projection=function(e){return arguments.length?(n=null==e?(t=null,Pd):(t=e).stream,o):t},o.context=function(t){return arguments.length?(i=null==t?(e=null,new If):new Mf(e=t),"function"!=typeof r&&i.pointRadius(r),o):e},o.pointRadius=function(t){return arguments.length?(r="function"==typeof t?t:(i.pointRadius(+t),+t),o):r},o.projection(t).context(e)}function Yf(t){return{stream:jf(t)}}function jf(t){return function(e){var n=new Ff;for(var i in t)n[i]=t[i];return n.stream=e,n}}function Ff(){}function Bf(t,e,n){var i=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=i&&t.clipExtent(null),gc(n,t.stream(Zd)),e(Zd.result()),null!=i&&t.clipExtent(i),t}function zf(t,e,n){return Bf(t,(function(n){var i=e[1][0]-e[0][0],r=e[1][1]-e[0][1],o=Math.min(i/(n[1][0]-n[0][0]),r/(n[1][1]-n[0][1])),a=+e[0][0]+(i-o*(n[1][0]+n[0][0]))/2,s=+e[0][1]+(r-o*(n[1][1]+n[0][1]))/2;t.scale(150*o).translate([a,s])}),n)}function Hf(t,e,n){return zf(t,[[0,0],e],n)}function Gf(t,e,n){return Bf(t,(function(n){var i=+e,r=i/(n[1][0]-n[0][0]),o=(i-r*(n[1][0]+n[0][0]))/2,a=-r*n[0][1];t.scale(150*r).translate([o,a])}),n)}function Wf(t,e,n){return Bf(t,(function(n){var i=+e,r=i/(n[1][1]-n[0][1]),o=-r*n[0][0],a=(i-r*(n[1][1]+n[0][1]))/2;t.scale(150*r).translate([o,a])}),n)}If.prototype={_radius:4.5,_circle:Nf(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=Nf(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}},Ff.prototype={constructor:Ff,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Uf=Zu(30*Xu);function Vf(t,e){return+e?function(t,e){function n(i,r,o,a,s,l,u,c,h,d,f,p,m,g){var v=u-i,y=c-r,b=v*v+y*y;if(b>4*e&&m--){var _=a+d,w=s+f,x=l+p,M=oc(_*_+w*w+x*x),E=lc(x/=M),S=qu(qu(x)-1)<Bu||qu(o-h)<Bu?(o+h)/2:$u(w,_),k=t(S,E),C=k[0],T=k[1],D=C-i,L=T-r,A=y*D-v*L;(A*A/b>e||qu((v*D+y*L)/b-.5)>.3||a*d+s*f+l*p<Uf)&&(n(i,r,o,a,s,l,C,T,S,_/=M,w/=M,x,m,g),g.point(C,T),n(C,T,S,_,w,x,u,c,h,d,f,p,m,g))}}return function(e){var i,r,o,a,s,l,u,c,h,d,f,p,m={point:g,lineStart:v,lineEnd:b,polygonStart:function(){e.polygonStart(),m.lineStart=_},polygonEnd:function(){e.polygonEnd(),m.lineStart=v}};function g(n,i){n=t(n,i),e.point(n[0],n[1])}function v(){c=NaN,m.point=y,e.lineStart()}function y(i,r){var o=Hc([i,r]),a=t(i,r);n(c,h,u,d,f,p,c=a[0],h=a[1],u=i,d=o[0],f=o[1],p=o[2],16,e),e.point(c,h)}function b(){m.point=g,e.lineEnd()}function _(){v(),m.point=w,m.lineEnd=x}function w(t,e){y(i=t,e),r=c,o=h,a=d,s=f,l=p,m.point=y}function x(){n(c,h,u,d,f,p,r,o,i,a,s,l,16,e),m.lineEnd=b,b()}return m}}(t,e):function(t){return jf({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)}var Xf=jf({point:function(t,e){this.stream.point(t*Xu,e*Xu)}});function qf(t,e,n,i,r,o){if(!o)return function(t,e,n,i,r){function o(o,a){return[e+t*(o*=i),n-t*(a*=r)]}return o.invert=function(o,a){return[(o-e)/t*i,(n-a)/t*r]},o}(t,e,n,i,r);var a=Zu(o),s=ic(o),l=a*t,u=s*t,c=a/t,h=s/t,d=(s*n-a*e)/t,f=(s*e+a*n)/t;function p(t,o){return[l*(t*=i)-u*(o*=r)+e,n-u*t-l*o]}return p.invert=function(t,e){return[i*(c*t-h*e+d),r*(f-h*t-c*e)]},p}function Kf(t){return $f((function(){return t}))()}function $f(t){var e,n,i,r,o,a,s,l,u,c,h=150,d=480,f=250,p=0,m=0,g=0,v=0,y=0,b=0,_=1,w=1,x=null,M=ed,E=null,S=Pd,k=.5;function C(t){return l(t[0]*Xu,t[1]*Xu)}function T(t){return(t=l.invert(t[0],t[1]))&&[t[0]*Vu,t[1]*Vu]}function D(){var t=qf(h,0,0,_,w,b).apply(null,e(p,m)),i=qf(h,d-t[0],f-t[1],_,w,b);return n=Yh(g,v,y),s=Nh(e,i),l=Nh(n,s),a=Vf(s,k),L()}function L(){return u=c=null,C}return C.stream=function(t){return u&&c===t?u:u=Xf(function(t){return jf({point:function(e,n){var i=t(e,n);return this.stream.point(i[0],i[1])}})}(n)(M(a(S(c=t)))))},C.preclip=function(t){return arguments.length?(M=t,x=void 0,L()):M},C.postclip=function(t){return arguments.length?(S=t,E=i=r=o=null,L()):S},C.clipAngle=function(t){return arguments.length?(M=+t?nd(x=t*Xu):(x=null,ed),L()):x*Vu},C.clipExtent=function(t){return arguments.length?(S=null==t?(E=i=r=o=null,Pd):ud(E=+t[0][0],i=+t[0][1],r=+t[1][0],o=+t[1][1]),L()):null==E?null:[[E,i],[r,o]]},C.scale=function(t){return arguments.length?(h=+t,D()):h},C.translate=function(t){return arguments.length?(d=+t[0],f=+t[1],D()):[d,f]},C.center=function(t){return arguments.length?(p=t[0]%360*Xu,m=t[1]%360*Xu,D()):[p*Vu,m*Vu]},C.rotate=function(t){return arguments.length?(g=t[0]%360*Xu,v=t[1]%360*Xu,y=t.length>2?t[2]%360*Xu:0,D()):[g*Vu,v*Vu,y*Vu]},C.angle=function(t){return arguments.length?(b=t%360*Xu,D()):b*Vu},C.reflectX=function(t){return arguments.length?(_=t?-1:1,D()):_<0},C.reflectY=function(t){return arguments.length?(w=t?-1:1,D()):w<0},C.precision=function(t){return arguments.length?(a=Vf(s,k=t*t),L()):oc(k)},C.fitExtent=function(t,e){return zf(C,t,e)},C.fitSize=function(t,e){return Hf(C,t,e)},C.fitWidth=function(t,e){return Gf(C,t,e)},C.fitHeight=function(t,e){return Wf(C,t,e)},function(){return e=t.apply(this,arguments),C.invert=e.invert&&T,D()}}function Zf(t){var e=0,n=Hu/3,i=$f(t),r=i(e,n);return r.parallels=function(t){return arguments.length?i(e=t[0]*Xu,n=t[1]*Xu):[e*Vu,n*Vu]},r}function Jf(t,e){var n=ic(t),i=(n+ic(e))/2;if(qu(i)<Bu)return function(t){var e=Zu(t);function n(t,n){return[t*e,ic(n)/e]}return n.invert=function(t,n){return[t/e,lc(n*e)]},n}(t);var r=1+n*(2*i-n),o=oc(r)/i;function a(t,e){var n=oc(r-2*i*ic(e))/i;return[n*ic(t*=i),o-n*Zu(t)]}return a.invert=function(t,e){var n=o-e,a=$u(t,qu(n))*rc(n);return n*i<0&&(a-=Hu*rc(t)*rc(n)),[a/i,lc((r-(t*t+n*n)*i*i)/(2*i))]},a}function Qf(){return Zf(Jf).scale(155.424).center([0,33.6442])}function tp(){return Qf().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function ep(){var t,e,n,i,r,o,a=tp(),s=Qf().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l=Qf().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u={point:function(t,e){o=[t,e]}};function c(t){var e=t[0],a=t[1];return o=null,n.point(e,a),o||(i.point(e,a),o)||(r.point(e,a),o)}function h(){return t=e=null,c}return c.invert=function(t){var e=a.scale(),n=a.translate(),i=(t[0]-n[0])/e,r=(t[1]-n[1])/e;return(r>=.12&&r<.234&&i>=-.425&&i<-.214?s:r>=.166&&r<.234&&i>=-.214&&i<-.115?l:a).invert(t)},c.stream=function(n){return t&&e===n?t:(i=[a.stream(e=n),s.stream(n),l.stream(n)],r=i.length,t={point:function(t,e){for(var n=-1;++n<r;)i[n].point(t,e)},sphere:function(){for(var t=-1;++t<r;)i[t].sphere()},lineStart:function(){for(var t=-1;++t<r;)i[t].lineStart()},lineEnd:function(){for(var t=-1;++t<r;)i[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<r;)i[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<r;)i[t].polygonEnd()}});var i,r},c.precision=function(t){return arguments.length?(a.precision(t),s.precision(t),l.precision(t),h()):a.precision()},c.scale=function(t){return arguments.length?(a.scale(t),s.scale(.35*t),l.scale(t),c.translate(a.translate())):a.scale()},c.translate=function(t){if(!arguments.length)return a.translate();var e=a.scale(),o=+t[0],c=+t[1];return n=a.translate(t).clipExtent([[o-.455*e,c-.238*e],[o+.455*e,c+.238*e]]).stream(u),i=s.translate([o-.307*e,c+.201*e]).clipExtent([[o-.425*e+Bu,c+.12*e+Bu],[o-.214*e-Bu,c+.234*e-Bu]]).stream(u),r=l.translate([o-.205*e,c+.212*e]).clipExtent([[o-.214*e+Bu,c+.166*e+Bu],[o-.115*e-Bu,c+.234*e-Bu]]).stream(u),h()},c.fitExtent=function(t,e){return zf(c,t,e)},c.fitSize=function(t,e){return Hf(c,t,e)},c.fitWidth=function(t,e){return Gf(c,t,e)},c.fitHeight=function(t,e){return Wf(c,t,e)},c.scale(1070)}function np(t){return function(e,n){var i=Zu(e),r=Zu(n),o=t(i*r);return o===1/0?[2,0]:[o*r*ic(e),o*ic(n)]}}function ip(t){return function(e,n){var i=oc(e*e+n*n),r=t(i),o=ic(r),a=Zu(r);return[$u(e*o,i*a),lc(i&&n*o/i)]}}var rp=np((function(t){return oc(2/(1+t))}));function op(){return Kf(rp).scale(124.75).clipAngle(179.999)}rp.invert=ip((function(t){return 2*lc(t/2)}));var ap=np((function(t){return(t=sc(t))&&t/ic(t)}));function sp(){return Kf(ap).scale(79.4188).clipAngle(179.999)}function lp(t,e){return[t,ec(ac((Gu+e)/2))]}function up(){return cp(lp).scale(961/Uu)}function cp(t){var e,n,i,r=Kf(t),o=r.center,a=r.scale,s=r.translate,l=r.clipExtent,u=null;function c(){var o=Hu*a(),s=r(zh(r.rotate()).invert([0,0]));return l(null==u?[[s[0]-o,s[1]-o],[s[0]+o,s[1]+o]]:t===lp?[[Math.max(s[0]-o,u),e],[Math.min(s[0]+o,n),i]]:[[u,Math.max(s[1]-o,e)],[n,Math.min(s[1]+o,i)]])}return r.scale=function(t){return arguments.length?(a(t),c()):a()},r.translate=function(t){return arguments.length?(s(t),c()):s()},r.center=function(t){return arguments.length?(o(t),c()):o()},r.clipExtent=function(t){return arguments.length?(null==t?u=e=n=i=null:(u=+t[0][0],e=+t[0][1],n=+t[1][0],i=+t[1][1]),c()):null==u?null:[[u,e],[n,i]]},c()}function hp(t){return ac((Gu+t)/2)}function dp(t,e){var n=Zu(t),i=t===e?ic(t):ec(n/Zu(e))/ec(hp(e)/hp(t)),r=n*nc(hp(t),i)/i;if(!i)return lp;function o(t,e){r>0?e<-Gu+Bu&&(e=-Gu+Bu):e>Gu-Bu&&(e=Gu-Bu);var n=r/nc(hp(e),i);return[n*ic(i*t),r-n*Zu(i*t)]}return o.invert=function(t,e){var n=r-e,o=rc(i)*oc(t*t+n*n),a=$u(t,qu(n))*rc(n);return n*i<0&&(a-=Hu*rc(t)*rc(n)),[a/i,2*Ku(nc(r/o,1/i))-Gu]},o}function fp(){return Zf(dp).scale(109.5).parallels([30,30])}function pp(t,e){return[t,e]}function mp(){return Kf(pp).scale(152.63)}function gp(t,e){var n=Zu(t),i=t===e?ic(t):(n-Zu(e))/(e-t),r=n/i+t;if(qu(i)<Bu)return pp;function o(t,e){var n=r-e,o=i*t;return[n*ic(o),r-n*Zu(o)]}return o.invert=function(t,e){var n=r-e,o=$u(t,qu(n))*rc(n);return n*i<0&&(o-=Hu*rc(t)*rc(n)),[o/i,r-rc(i)*oc(t*t+n*n)]},o}function vp(){return Zf(gp).scale(131.154).center([0,13.9389])}ap.invert=ip((function(t){return t})),lp.invert=function(t,e){return[t,2*Ku(Qu(e))-Gu]},pp.invert=pp;var yp=1.340264,bp=-.081106,_p=893e-6,wp=.003796,xp=oc(3)/2;function Mp(t,e){var n=lc(xp*ic(e)),i=n*n,r=i*i*i;return[t*Zu(n)/(xp*(yp+3*bp*i+r*(7*_p+9*wp*i))),n*(yp+bp*i+r*(_p+wp*i))]}function Ep(){return Kf(Mp).scale(177.158)}function Sp(t,e){var n=Zu(e),i=Zu(t)*n;return[n*ic(t)/i,ic(e)/i]}function kp(){return Kf(Sp).scale(144.049).clipAngle(60)}function Cp(){var t,e,n,i,r,o,a,s=1,l=0,u=0,c=1,h=1,d=0,f=null,p=1,m=1,g=jf({point:function(t,e){var n=b([t,e]);this.stream.point(n[0],n[1])}}),v=Pd;function y(){return p=s*c,m=s*h,o=a=null,b}function b(n){var i=n[0]*p,r=n[1]*m;if(d){var o=r*t-i*e;i=i*t+r*e,r=o}return[i+l,r+u]}return b.invert=function(n){var i=n[0]-l,r=n[1]-u;if(d){var o=r*t+i*e;i=i*t-r*e,r=o}return[i/p,r/m]},b.stream=function(t){return o&&a===t?o:o=g(v(a=t))},b.postclip=function(t){return arguments.length?(v=t,f=n=i=r=null,y()):v},b.clipExtent=function(t){return arguments.length?(v=null==t?(f=n=i=r=null,Pd):ud(f=+t[0][0],n=+t[0][1],i=+t[1][0],r=+t[1][1]),y()):null==f?null:[[f,n],[i,r]]},b.scale=function(t){return arguments.length?(s=+t,y()):s},b.translate=function(t){return arguments.length?(l=+t[0],u=+t[1],y()):[l,u]},b.angle=function(n){return arguments.length?(e=ic(d=n%360*Xu),t=Zu(d),y()):d*Vu},b.reflectX=function(t){return arguments.length?(c=t?-1:1,y()):c<0},b.reflectY=function(t){return arguments.length?(h=t?-1:1,y()):h<0},b.fitExtent=function(t,e){return zf(b,t,e)},b.fitSize=function(t,e){return Hf(b,t,e)},b.fitWidth=function(t,e){return Gf(b,t,e)},b.fitHeight=function(t,e){return Wf(b,t,e)},b}function Tp(t,e){var n=e*e,i=n*n;return[t*(.8707-.131979*n+i*(i*(.003971*n-.001529*i)-.013791)),e*(1.007226+n*(.015085+i*(.028874*n-.044475-.005916*i)))]}function Dp(){return Kf(Tp).scale(175.295)}function Lp(t,e){return[Zu(e)*ic(t),ic(e)]}function Ap(){return Kf(Lp).scale(249.5).clipAngle(90.000001)}function Op(t,e){var n=Zu(e),i=1+Zu(t)*n;return[n*ic(t)/i,ic(e)/i]}function Pp(){return Kf(Op).scale(250).clipAngle(142)}function Ip(t,e){return[ec(ac((Gu+e)/2)),-t]}function Np(){var t=cp(Ip),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)}function Rp(t,e){return t.parent===e.parent?1:2}function Yp(t,e){return t+e.x}function jp(t,e){return Math.max(t,e.y)}function Fp(){var t=Rp,e=1,n=1,i=!1;function r(r){var o,a=0;r.eachAfter((function(e){var n=e.children;n?(e.x=function(t){return t.reduce(Yp,0)/t.length}(n),e.y=function(t){return 1+t.reduce(jp,0)}(n)):(e.x=o?a+=t(e,o):0,e.y=0,o=e)}));var s=function(t){for(var e;e=t.children;)t=e[0];return t}(r),l=function(t){for(var e;e=t.children;)t=e[e.length-1];return t}(r),u=s.x-t(s,l)/2,c=l.x+t(l,s)/2;return r.eachAfter(i?function(t){t.x=(t.x-r.x)*e,t.y=(r.y-t.y)*n}:function(t){t.x=(t.x-u)/(c-u)*e,t.y=(1-(r.y?t.y/r.y:1))*n})}return r.separation=function(e){return arguments.length?(t=e,r):t},r.size=function(t){return arguments.length?(i=!1,e=+t[0],n=+t[1],r):i?null:[e,n]},r.nodeSize=function(t){return arguments.length?(i=!0,e=+t[0],n=+t[1],r):i?[e,n]:null},r}function Bp(t){var e=0,n=t.children,i=n&&n.length;if(i)for(;--i>=0;)e+=n[i].value;else e=1;t.value=e}function zp(t,e){t instanceof Map?(t=[void 0,t],void 0===e&&(e=Gp)):void 0===e&&(e=Hp);for(var n,i,r,o,a,s=new Vp(t),l=[s];n=l.pop();)if((r=e(n.data))&&(a=(r=Array.from(r)).length))for(n.children=r,o=a-1;o>=0;--o)l.push(i=r[o]=new Vp(r[o])),i.parent=n,i.depth=n.depth+1;return s.eachBefore(Up)}function Hp(t){return t.children}function Gp(t){return Array.isArray(t)?t[1]:null}function Wp(t){void 0!==t.data.value&&(t.value=t.data.value),t.data=t.data.data}function Up(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function Vp(t){this.data=t,this.depth=this.height=0,this.parent=null}function Xp(t){for(var e,n,i=0,r=(t=function(t){for(var e,n,i=t.length;i;)n=Math.random()*i--|0,e=t[i],t[i]=t[n],t[n]=e;return t}(Array.from(t))).length,o=[];i<r;)e=t[i],n&&$p(n,e)?++i:(n=Jp(o=qp(o,e)),i=0);return n}function qp(t,e){var n,i;if(Zp(e,t))return[e];for(n=0;n<t.length;++n)if(Kp(e,t[n])&&Zp(Qp(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(i=n+1;i<t.length;++i)if(Kp(Qp(t[n],t[i]),e)&&Kp(Qp(t[n],e),t[i])&&Kp(Qp(t[i],e),t[n])&&Zp(tm(t[n],t[i],e),t))return[t[n],t[i],e];throw new Error}function Kp(t,e){var n=t.r-e.r,i=e.x-t.x,r=e.y-t.y;return n<0||n*n<i*i+r*r}function $p(t,e){var n=t.r-e.r+1e-9*Math.max(t.r,e.r,1),i=e.x-t.x,r=e.y-t.y;return n>0&&n*n>i*i+r*r}function Zp(t,e){for(var n=0;n<e.length;++n)if(!$p(t,e[n]))return!1;return!0}function Jp(t){switch(t.length){case 1:return function(t){return{x:t.x,y:t.y,r:t.r}}(t[0]);case 2:return Qp(t[0],t[1]);case 3:return tm(t[0],t[1],t[2])}}function Qp(t,e){var n=t.x,i=t.y,r=t.r,o=e.x,a=e.y,s=e.r,l=o-n,u=a-i,c=s-r,h=Math.sqrt(l*l+u*u);return{x:(n+o+l/h*c)/2,y:(i+a+u/h*c)/2,r:(h+r+s)/2}}function tm(t,e,n){var i=t.x,r=t.y,o=t.r,a=e.x,s=e.y,l=e.r,u=n.x,c=n.y,h=n.r,d=i-a,f=i-u,p=r-s,m=r-c,g=l-o,v=h-o,y=i*i+r*r-o*o,b=y-a*a-s*s+l*l,_=y-u*u-c*c+h*h,w=f*p-d*m,x=(p*_-m*b)/(2*w)-i,M=(m*g-p*v)/w,E=(f*b-d*_)/(2*w)-r,S=(d*v-f*g)/w,k=M*M+S*S-1,C=2*(o+x*M+E*S),T=x*x+E*E-o*o,D=-(k?(C+Math.sqrt(C*C-4*k*T))/(2*k):T/C);return{x:i+x+M*D,y:r+E+S*D,r:D}}function em(t,e,n){var i,r,o,a,s=t.x-e.x,l=t.y-e.y,u=s*s+l*l;u?(r=e.r+n.r,r*=r,a=t.r+n.r,r>(a*=a)?(i=(u+a-r)/(2*u),o=Math.sqrt(Math.max(0,a/u-i*i)),n.x=t.x-i*s-o*l,n.y=t.y-i*l+o*s):(i=(u+r-a)/(2*u),o=Math.sqrt(Math.max(0,r/u-i*i)),n.x=e.x+i*s-o*l,n.y=e.y+i*l+o*s)):(n.x=e.x+n.r,n.y=e.y)}function nm(t,e){var n=t.r+e.r-1e-6,i=e.x-t.x,r=e.y-t.y;return n>0&&n*n>i*i+r*r}function im(t){var e=t._,n=t.next._,i=e.r+n.r,r=(e.x*n.r+n.x*e.r)/i,o=(e.y*n.r+n.y*e.r)/i;return r*r+o*o}function rm(t){this._=t,this.next=null,this.previous=null}function om(t){if(!(r=(t=function(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}(t)).length))return 0;var e,n,i,r,o,a,s,l,u,c,h;if((e=t[0]).x=0,e.y=0,!(r>1))return e.r;if(n=t[1],e.x=-n.r,n.x=e.r,n.y=0,!(r>2))return e.r+n.r;em(n,e,i=t[2]),e=new rm(e),n=new rm(n),i=new rm(i),e.next=i.previous=n,n.next=e.previous=i,i.next=n.previous=e;t:for(s=3;s<r;++s){em(e._,n._,i=t[s]),i=new rm(i),l=n.next,u=e.previous,c=n._.r,h=e._.r;do{if(c<=h){if(nm(l._,i._)){n=l,e.next=n,n.previous=e,--s;continue t}c+=l._.r,l=l.next}else{if(nm(u._,i._)){(e=u).next=n,n.previous=e,--s;continue t}h+=u._.r,u=u.previous}}while(l!==u.next);for(i.previous=e,i.next=n,e.next=n.previous=n=i,o=im(e);(i=i.next)!==n;)(a=im(i))<o&&(e=i,o=a);n=e.next}for(e=[n._],i=n;(i=i.next)!==n;)e.push(i._);for(i=Xp(e),s=0;s<r;++s)(e=t[s]).x-=i.x,e.y-=i.y;return i.r}function am(t){return om(t),t}function sm(t){return null==t?null:lm(t)}function lm(t){if("function"!=typeof t)throw new Error;return t}function um(){return 0}function cm(t){return function(){return t}}function hm(t){return Math.sqrt(t.value)}function dm(){var t=null,e=1,n=1,i=um;function r(r){return r.x=e/2,r.y=n/2,t?r.eachBefore(fm(t)).eachAfter(pm(i,.5)).eachBefore(mm(1)):r.eachBefore(fm(hm)).eachAfter(pm(um,1)).eachAfter(pm(i,r.r/Math.min(e,n))).eachBefore(mm(Math.min(e,n)/(2*r.r))),r}return r.radius=function(e){return arguments.length?(t=sm(e),r):t},r.size=function(t){return arguments.length?(e=+t[0],n=+t[1],r):[e,n]},r.padding=function(t){return arguments.length?(i="function"==typeof t?t:cm(+t),r):i},r}function fm(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function pm(t,e){return function(n){if(i=n.children){var i,r,o,a=i.length,s=t(n)*e||0;if(s)for(r=0;r<a;++r)i[r].r+=s;if(o=om(i),s)for(r=0;r<a;++r)i[r].r-=s;n.r=o+s}}}function mm(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}function gm(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function vm(t,e,n,i,r){for(var o,a=t.children,s=-1,l=a.length,u=t.value&&(i-e)/t.value;++s<l;)(o=a[s]).y0=n,o.y1=r,o.x0=e,o.x1=e+=o.value*u}function ym(){var t=1,e=1,n=0,i=!1;function r(r){var o=r.height+1;return r.x0=r.y0=n,r.x1=t,r.y1=e/o,r.eachBefore(function(t,e){return function(i){i.children&&vm(i,i.x0,t*(i.depth+1)/e,i.x1,t*(i.depth+2)/e);var r=i.x0,o=i.y0,a=i.x1-n,s=i.y1-n;a<r&&(r=a=(r+a)/2),s<o&&(o=s=(o+s)/2),i.x0=r,i.y0=o,i.x1=a,i.y1=s}}(e,o)),i&&r.eachBefore(gm),r}return r.round=function(t){return arguments.length?(i=!!t,r):i},r.size=function(n){return arguments.length?(t=+n[0],e=+n[1],r):[t,e]},r.padding=function(t){return arguments.length?(n=+t,r):n},r}Mp.invert=function(t,e){for(var n,i=e,r=i*i,o=r*r*r,a=0;a<12&&(o=(r=(i-=n=(i*(yp+bp*r+o*(_p+wp*r))-e)/(yp+3*bp*r+o*(7*_p+9*wp*r)))*i)*r*r,!(qu(n)<zu));++a);return[xp*t*(yp+3*bp*r+o*(7*_p+9*wp*r))/Zu(i),lc(ic(i)/xp)]},Sp.invert=ip(Ku),Tp.invert=function(t,e){var n,i=e,r=25;do{var o=i*i,a=o*o;i-=n=(i*(1.007226+o*(.015085+a*(.028874*o-.044475-.005916*a)))-e)/(1.007226+o*(.045255+a*(.259866*o-.311325-.005916*11*a)))}while(qu(n)>Bu&&--r>0);return[t/(.8707+(o=i*i)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),i]},Lp.invert=ip(lc),Op.invert=ip((function(t){return 2*Ku(t)})),Ip.invert=function(t,e){return[-e,2*Ku(Qu(t))-Gu]},Vp.prototype=zp.prototype={constructor:Vp,count:function(){return this.eachAfter(Bp)},each:function(t,e){let n=-1;for(const i of this)t.call(e,i,++n,this);return this},eachAfter:function(t,e){for(var n,i,r,o=this,a=[o],s=[],l=-1;o=a.pop();)if(s.push(o),n=o.children)for(i=0,r=n.length;i<r;++i)a.push(n[i]);for(;o=s.pop();)t.call(e,o,++l,this);return this},eachBefore:function(t,e){for(var n,i,r=this,o=[r],a=-1;r=o.pop();)if(t.call(e,r,++a,this),n=r.children)for(i=n.length-1;i>=0;--i)o.push(n[i]);return this},find:function(t,e){let n=-1;for(const i of this)if(t.call(e,i,++n,this))return i},sum:function(t){return this.eachAfter((function(e){for(var n=+t(e.data)||0,i=e.children,r=i&&i.length;--r>=0;)n+=i[r].value;e.value=n}))},sort:function(t){return this.eachBefore((function(e){e.children&&e.children.sort(t)}))},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),i=e.ancestors(),r=null;t=n.pop(),e=i.pop();for(;t===e;)r=t,t=n.pop(),e=i.pop();return r}(e,t),i=[e];e!==n;)e=e.parent,i.push(e);for(var r=i.length;t!==n;)i.splice(r,0,t),t=t.parent;return i},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){return Array.from(this)},leaves:function(){var t=[];return this.eachBefore((function(e){e.children||t.push(e)})),t},links:function(){var t=this,e=[];return t.each((function(n){n!==t&&e.push({source:n.parent,target:n})})),e},copy:function(){return zp(this).eachBefore(Wp)},[Symbol.iterator]:function*(){var t,e,n,i,r=this,o=[r];do{for(t=o.reverse(),o=[];r=t.pop();)if(yield r,e=r.children)for(n=0,i=e.length;n<i;++n)o.push(e[n])}while(o.length)}};var bm={depth:-1},_m={};function wm(t){return t.id}function xm(t){return t.parentId}function Mm(){var t=wm,e=xm;function n(n){var i,r,o,a,s,l,u,c=Array.from(n),h=c.length,d=new Map;for(r=0;r<h;++r)i=c[r],s=c[r]=new Vp(i),null!=(l=t(i,r,n))&&(l+="")&&(u=s.id=l,d.set(u,d.has(u)?_m:s)),null!=(l=e(i,r,n))&&(l+="")&&(s.parent=l);for(r=0;r<h;++r)if(l=(s=c[r]).parent){if(!(a=d.get(l)))throw new Error("missing: "+l);if(a===_m)throw new Error("ambiguous: "+l);a.children?a.children.push(s):a.children=[s],s.parent=a}else{if(o)throw new Error("multiple roots");o=s}if(!o)throw new Error("no root");if(o.parent=bm,o.eachBefore((function(t){t.depth=t.parent.depth+1,--h})).eachBefore(Up),o.parent=null,h>0)throw new Error("cycle");return o}return n.id=function(e){return arguments.length?(t=lm(e),n):t},n.parentId=function(t){return arguments.length?(e=lm(t),n):e},n}function Em(t,e){return t.parent===e.parent?1:2}function Sm(t){var e=t.children;return e?e[0]:t.t}function km(t){var e=t.children;return e?e[e.length-1]:t.t}function Cm(t,e,n){var i=n/(e.i-t.i);e.c-=i,e.s+=n,t.c+=i,e.z+=n,e.m+=n}function Tm(t,e,n){return t.a.parent===e.parent?t.a:n}function Dm(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}function Lm(){var t=Em,e=1,n=1,i=null;function r(r){var l=function(t){for(var e,n,i,r,o,a=new Dm(t,0),s=[a];e=s.pop();)if(i=e._.children)for(e.children=new Array(o=i.length),r=o-1;r>=0;--r)s.push(n=e.children[r]=new Dm(i[r],r)),n.parent=e;return(a.parent=new Dm(null,0)).children=[a],a}(r);if(l.eachAfter(o),l.parent.m=-l.z,l.eachBefore(a),i)r.eachBefore(s);else{var u=r,c=r,h=r;r.eachBefore((function(t){t.x<u.x&&(u=t),t.x>c.x&&(c=t),t.depth>h.depth&&(h=t)}));var d=u===c?1:t(u,c)/2,f=d-u.x,p=e/(c.x+d+f),m=n/(h.depth||1);r.eachBefore((function(t){t.x=(t.x+f)*p,t.y=t.depth*m}))}return r}function o(e){var n=e.children,i=e.parent.children,r=e.i?i[e.i-1]:null;if(n){!function(t){for(var e,n=0,i=0,r=t.children,o=r.length;--o>=0;)(e=r[o]).z+=n,e.m+=n,n+=e.s+(i+=e.c)}(e);var o=(n[0].z+n[n.length-1].z)/2;r?(e.z=r.z+t(e._,r._),e.m=e.z-o):e.z=o}else r&&(e.z=r.z+t(e._,r._));e.parent.A=function(e,n,i){if(n){for(var r,o=e,a=e,s=n,l=o.parent.children[0],u=o.m,c=a.m,h=s.m,d=l.m;s=km(s),o=Sm(o),s&&o;)l=Sm(l),(a=km(a)).a=e,(r=s.z+h-o.z-u+t(s._,o._))>0&&(Cm(Tm(s,e,i),e,r),u+=r,c+=r),h+=s.m,u+=o.m,d+=l.m,c+=a.m;s&&!km(a)&&(a.t=s,a.m+=h-c),o&&!Sm(l)&&(l.t=o,l.m+=u-d,i=e)}return i}(e,r,e.parent.A||i[0])}function a(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function s(t){t.x*=e,t.y=t.depth*n}return r.separation=function(e){return arguments.length?(t=e,r):t},r.size=function(t){return arguments.length?(i=!1,e=+t[0],n=+t[1],r):i?null:[e,n]},r.nodeSize=function(t){return arguments.length?(i=!0,e=+t[0],n=+t[1],r):i?[e,n]:null},r}function Am(t,e,n,i,r){for(var o,a=t.children,s=-1,l=a.length,u=t.value&&(r-n)/t.value;++s<l;)(o=a[s]).x0=e,o.x1=i,o.y0=n,o.y1=n+=o.value*u}Dm.prototype=Object.create(Vp.prototype);var Om=(1+Math.sqrt(5))/2;function Pm(t,e,n,i,r,o){for(var a,s,l,u,c,h,d,f,p,m,g,v=[],y=e.children,b=0,_=0,w=y.length,x=e.value;b<w;){l=r-n,u=o-i;do{c=y[_++].value}while(!c&&_<w);for(h=d=c,g=c*c*(m=Math.max(u/l,l/u)/(x*t)),p=Math.max(d/g,g/h);_<w;++_){if(c+=s=y[_].value,s<h&&(h=s),s>d&&(d=s),g=c*c*m,(f=Math.max(d/g,g/h))>p){c-=s;break}p=f}v.push(a={value:c,dice:l<u,children:y.slice(b,_)}),a.dice?vm(a,n,i,r,x?i+=u*c/x:o):Am(a,n,i,x?n+=l*c/x:r,o),x-=c,b=_}return v}const Im=function t(e){function n(t,n,i,r,o){Pm(e,t,n,i,r,o)}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(Om);function Nm(){var t=Im,e=!1,n=1,i=1,r=[0],o=um,a=um,s=um,l=um,u=um;function c(t){return t.x0=t.y0=0,t.x1=n,t.y1=i,t.eachBefore(h),r=[0],e&&t.eachBefore(gm),t}function h(e){var n=r[e.depth],i=e.x0+n,c=e.y0+n,h=e.x1-n,d=e.y1-n;h<i&&(i=h=(i+h)/2),d<c&&(c=d=(c+d)/2),e.x0=i,e.y0=c,e.x1=h,e.y1=d,e.children&&(n=r[e.depth+1]=o(e)/2,i+=u(e)-n,c+=a(e)-n,(h-=s(e)-n)<i&&(i=h=(i+h)/2),(d-=l(e)-n)<c&&(c=d=(c+d)/2),t(e,i,c,h,d))}return c.round=function(t){return arguments.length?(e=!!t,c):e},c.size=function(t){return arguments.length?(n=+t[0],i=+t[1],c):[n,i]},c.tile=function(e){return arguments.length?(t=lm(e),c):t},c.padding=function(t){return arguments.length?c.paddingInner(t).paddingOuter(t):c.paddingInner()},c.paddingInner=function(t){return arguments.length?(o="function"==typeof t?t:cm(+t),c):o},c.paddingOuter=function(t){return arguments.length?c.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):c.paddingTop()},c.paddingTop=function(t){return arguments.length?(a="function"==typeof t?t:cm(+t),c):a},c.paddingRight=function(t){return arguments.length?(s="function"==typeof t?t:cm(+t),c):s},c.paddingBottom=function(t){return arguments.length?(l="function"==typeof t?t:cm(+t),c):l},c.paddingLeft=function(t){return arguments.length?(u="function"==typeof t?t:cm(+t),c):u},c}function Rm(t,e,n,i,r){var o,a,s=t.children,l=s.length,u=new Array(l+1);for(u[0]=a=o=0;o<l;++o)u[o+1]=a+=s[o].value;!function t(e,n,i,r,o,a,l){if(e>=n-1){var c=s[e];return c.x0=r,c.y0=o,c.x1=a,void(c.y1=l)}var h=u[e],d=i/2+h,f=e+1,p=n-1;for(;f<p;){var m=f+p>>>1;u[m]<d?f=m+1:p=m}d-u[f-1]<u[f]-d&&e+1<f&&--f;var g=u[f]-h,v=i-g;if(a-r>l-o){var y=i?(r*v+a*g)/i:a;t(e,f,g,r,o,y,l),t(f,n,v,y,o,a,l)}else{var b=i?(o*v+l*g)/i:l;t(e,f,g,r,o,a,b),t(f,n,v,r,b,a,l)}}(0,l,t.value,e,n,i,r)}function Ym(t,e,n,i,r){(1&t.depth?Am:vm)(t,e,n,i,r)}const jm=function t(e){function n(t,n,i,r,o){if((a=t._squarify)&&a.ratio===e)for(var a,s,l,u,c,h=-1,d=a.length,f=t.value;++h<d;){for(l=(s=a[h]).children,u=s.value=0,c=l.length;u<c;++u)s.value+=l[u].value;s.dice?vm(s,n,i,r,f?i+=(o-i)*s.value/f:o):Am(s,n,i,f?n+=(r-n)*s.value/f:r,o),f-=s.value}else t._squarify=a=Pm(e,t,n,i,r,o),a.ratio=e}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(Om);function Fm(t,e,n,i,r){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*i+a*r)/6}function Bm(t){var e=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),r=t[i],o=t[i+1],a=i>0?t[i-1]:2*r-o,s=i<e-1?t[i+2]:2*o-r;return Fm((n-i/e)*e,a,r,o,s)}}function zm(t){var e=t.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*e),r=t[(i+e-1)%e],o=t[i%e],a=t[(i+1)%e],s=t[(i+2)%e];return Fm((n-i/e)*e,r,o,a,s)}}const Hm=t=>()=>t;function Gm(t,e){return function(n){return t+n*e}}function Wm(t,e){var n=e-t;return n?Gm(t,n>180||n<-180?n-360*Math.round(n/360):n):Hm(isNaN(t)?e:t)}function Um(t){return 1==(t=+t)?Vm:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}(e,n,t):Hm(isNaN(e)?n:e)}}function Vm(t,e){var n=e-t;return n?Gm(t,n):Hm(isNaN(t)?e:t)}const Xm=function t(e){var n=Um(e);function i(t,e){var i=n((t=vo(t)).r,(e=vo(e)).r),r=n(t.g,e.g),o=n(t.b,e.b),a=Vm(t.opacity,e.opacity);return function(e){return t.r=i(e),t.g=r(e),t.b=o(e),t.opacity=a(e),t+""}}return i.gamma=t,i}(1);function qm(t){return function(e){var n,i,r=e.length,o=new Array(r),a=new Array(r),s=new Array(r);for(n=0;n<r;++n)i=vo(e[n]),o[n]=i.r||0,a[n]=i.g||0,s[n]=i.b||0;return o=t(o),a=t(a),s=t(s),i.opacity=1,function(t){return i.r=o(t),i.g=a(t),i.b=s(t),i+""}}}var Km=qm(Bm),$m=qm(zm);function Zm(t,e){e||(e=[]);var n,i=t?Math.min(e.length,t.length):0,r=e.slice();return function(o){for(n=0;n<i;++n)r[n]=t[n]*(1-o)+e[n]*o;return r}}function Jm(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Qm(t,e){return(Jm(e)?Zm:tg)(t,e)}function tg(t,e){var n,i=e?e.length:0,r=t?Math.min(i,t.length):0,o=new Array(r),a=new Array(i);for(n=0;n<r;++n)o[n]=sg(t[n],e[n]);for(;n<i;++n)a[n]=e[n];return function(t){for(n=0;n<r;++n)a[n]=o[n](t);return a}}function eg(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function ng(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function ig(t,e){var n,i={},r={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?i[n]=sg(t[n],e[n]):r[n]=e[n];return function(t){for(n in i)r[n]=i[n](t);return r}}var rg=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,og=new RegExp(rg.source,"g");function ag(t,e){var n,i,r,o=rg.lastIndex=og.lastIndex=0,a=-1,s=[],l=[];for(t+="",e+="";(n=rg.exec(t))&&(i=og.exec(e));)(r=i.index)>o&&(r=e.slice(o,r),s[a]?s[a]+=r:s[++a]=r),(n=n[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,l.push({i:a,x:ng(n,i)})),o=og.lastIndex;return o<e.length&&(r=e.slice(o),s[a]?s[a]+=r:s[++a]=r),s.length<2?l[0]?function(t){return function(e){return t(e)+""}}(l[0].x):function(t){return function(){return t}}(e):(e=l.length,function(t){for(var n,i=0;i<e;++i)s[(n=l[i]).i]=n.x(t);return s.join("")})}function sg(t,e){var n,i=typeof e;return null==e||"boolean"===i?Hm(e):("number"===i?ng:"string"===i?(n=fo(e))?(e=n,Xm):ag:e instanceof fo?Xm:e instanceof Date?eg:Jm(e)?Zm:Array.isArray(e)?tg:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?ig:ng)(t,e)}function lg(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}function ug(t,e){var n=Wm(+t,+e);return function(t){var e=n(t);return e-360*Math.floor(e/360)}}function cg(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var hg,dg=180/Math.PI,fg={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function pg(t,e,n,i,r,o){var a,s,l;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(l=t*n+e*i)&&(n-=t*l,i-=e*l),(s=Math.sqrt(n*n+i*i))&&(n/=s,i/=s,l/=s),t*i<e*n&&(t=-t,e=-e,l=-l,a=-a),{translateX:r,translateY:o,rotate:Math.atan2(e,t)*dg,skewX:Math.atan(l)*dg,scaleX:a,scaleY:s}}function mg(t,e,n,i){function r(t){return t.length?t.pop()+" ":""}return function(o,a){var s=[],l=[];return o=t(o),a=t(a),function(t,i,r,o,a,s){if(t!==r||i!==o){var l=a.push("translate(",null,e,null,n);s.push({i:l-4,x:ng(t,r)},{i:l-2,x:ng(i,o)})}else(r||o)&&a.push("translate("+r+e+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,s,l),function(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(r(n)+"rotate(",null,i)-2,x:ng(t,e)})):e&&n.push(r(n)+"rotate("+e+i)}(o.rotate,a.rotate,s,l),function(t,e,n,o){t!==e?o.push({i:n.push(r(n)+"skewX(",null,i)-2,x:ng(t,e)}):e&&n.push(r(n)+"skewX("+e+i)}(o.skewX,a.skewX,s,l),function(t,e,n,i,o,a){if(t!==n||e!==i){var s=o.push(r(o)+"scale(",null,",",null,")");a.push({i:s-4,x:ng(t,n)},{i:s-2,x:ng(e,i)})}else 1===n&&1===i||o.push(r(o)+"scale("+n+","+i+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,s,l),o=a=null,function(t){for(var e,n=-1,i=l.length;++n<i;)s[(e=l[n]).i]=e.x(t);return s.join("")}}}var gg=mg((function(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?fg:pg(e.a,e.b,e.c,e.d,e.e,e.f)}),"px, ","px)","deg)"),vg=mg((function(t){return null==t?fg:(hg||(hg=document.createElementNS("http://www.w3.org/2000/svg","g")),hg.setAttribute("transform",t),(t=hg.transform.baseVal.consolidate())?pg((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):fg)}),", ",")",")");function yg(t){return((t=Math.exp(t))+1/t)/2}const bg=function t(e,n,i){function r(t,r){var o,a,s=t[0],l=t[1],u=t[2],c=r[0],h=r[1],d=r[2],f=c-s,p=h-l,m=f*f+p*p;if(m<1e-12)a=Math.log(d/u)/e,o=function(t){return[s+t*f,l+t*p,u*Math.exp(e*t*a)]};else{var g=Math.sqrt(m),v=(d*d-u*u+i*m)/(2*u*n*g),y=(d*d-u*u-i*m)/(2*d*n*g),b=Math.log(Math.sqrt(v*v+1)-v),_=Math.log(Math.sqrt(y*y+1)-y);a=(_-b)/e,o=function(t){var i=t*a,r=yg(b),o=u/(n*g)*(r*function(t){return((t=Math.exp(2*t))-1)/(t+1)}(e*i+b)-function(t){return((t=Math.exp(t))-1/t)/2}(b));return[s+o*f,l+o*p,u*r/yg(e*i+b)]}}return o.duration=1e3*a*e/Math.SQRT2,o}return r.rho=function(e){var n=Math.max(.001,+e),i=n*n;return t(n,i,i*i)},r}(Math.SQRT2,2,4);function _g(t){return function(e,n){var i=t((e=Eo(e)).h,(n=Eo(n)).h),r=Vm(e.s,n.s),o=Vm(e.l,n.l),a=Vm(e.opacity,n.opacity);return function(t){return e.h=i(t),e.s=r(t),e.l=o(t),e.opacity=a(t),e+""}}}const wg=_g(Wm);var xg=_g(Vm);function Mg(t,e){var n=Vm((t=Ro(t)).l,(e=Ro(e)).l),i=Vm(t.a,e.a),r=Vm(t.b,e.b),o=Vm(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=i(e),t.b=r(e),t.opacity=o(e),t+""}}function Eg(t){return function(e,n){var i=t((e=Wo(e)).h,(n=Wo(n)).h),r=Vm(e.c,n.c),o=Vm(e.l,n.l),a=Vm(e.opacity,n.opacity);return function(t){return e.h=i(t),e.c=r(t),e.l=o(t),e.opacity=a(t),e+""}}}const Sg=Eg(Wm);var kg=Eg(Vm);function Cg(t){return function e(n){function i(e,i){var r=t((e=na(e)).h,(i=na(i)).h),o=Vm(e.s,i.s),a=Vm(e.l,i.l),s=Vm(e.opacity,i.opacity);return function(t){return e.h=r(t),e.s=o(t),e.l=a(Math.pow(t,n)),e.opacity=s(t),e+""}}return n=+n,i.gamma=e,i}(1)}const Tg=Cg(Wm);var Dg=Cg(Vm);function Lg(t,e){void 0===e&&(e=t,t=sg);for(var n=0,i=e.length-1,r=e[0],o=new Array(i<0?0:i);n<i;)o[n]=t(r,r=e[++n]);return function(t){var e=Math.max(0,Math.min(i-1,Math.floor(t*=i)));return o[e](t-e)}}function Ag(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t(i/(e-1));return n}function Og(t){for(var e,n=-1,i=t.length,r=t[i-1],o=0;++n<i;)e=r,r=t[n],o+=e[1]*r[0]-e[0]*r[1];return o/2}function Pg(t){for(var e,n,i=-1,r=t.length,o=0,a=0,s=t[r-1],l=0;++i<r;)e=s,s=t[i],l+=n=e[0]*s[1]-s[0]*e[1],o+=(e[0]+s[0])*n,a+=(e[1]+s[1])*n;return[o/(l*=3),a/l]}function Ig(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function Ng(t,e){return t[0]-e[0]||t[1]-e[1]}function Rg(t){const e=t.length,n=[0,1];let i,r=2;for(i=2;i<e;++i){for(;r>1&&Ig(t[n[r-2]],t[n[r-1]],t[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function Yg(t){if((n=t.length)<3)return null;var e,n,i=new Array(n),r=new Array(n);for(e=0;e<n;++e)i[e]=[+t[e][0],+t[e][1],e];for(i.sort(Ng),e=0;e<n;++e)r[e]=[i[e][0],-i[e][1]];var o=Rg(i),a=Rg(r),s=a[0]===o[0],l=a[a.length-1]===o[o.length-1],u=[];for(e=o.length-1;e>=0;--e)u.push(t[i[o[e]][2]]);for(e=+s;e<a.length-l;++e)u.push(t[i[a[e]][2]]);return u}function jg(t,e){for(var n,i,r=t.length,o=t[r-1],a=e[0],s=e[1],l=o[0],u=o[1],c=!1,h=0;h<r;++h)n=(o=t[h])[0],(i=o[1])>s!=u>s&&a<(l-n)*(s-i)/(u-i)+n&&(c=!c),l=n,u=i;return c}function Fg(t){for(var e,n,i=-1,r=t.length,o=t[r-1],a=o[0],s=o[1],l=0;++i<r;)e=a,n=s,e-=a=(o=t[i])[0],n-=s=o[1],l+=Math.hypot(e,n);return l}const Bg=Math.random,zg=function t(e){function n(t,n){return t=null==t?0:+t,n=null==n?1:+n,1===arguments.length?(n=t,t=0):n-=t,function(){return e()*n+t}}return n.source=t,n}(Bg),Hg=function t(e){function n(t,n){return arguments.length<2&&(n=t,t=0),t=Math.floor(t),n=Math.floor(n)-t,function(){return Math.floor(e()*n+t)}}return n.source=t,n}(Bg),Gg=function t(e){function n(t,n){var i,r;return t=null==t?0:+t,n=null==n?1:+n,function(){var o;if(null!=i)o=i,i=null;else do{i=2*e()-1,o=2*e()-1,r=i*i+o*o}while(!r||r>1);return t+n*o*Math.sqrt(-2*Math.log(r)/r)}}return n.source=t,n}(Bg),Wg=function t(e){var n=Gg.source(e);function i(){var t=n.apply(this,arguments);return function(){return Math.exp(t())}}return i.source=t,i}(Bg),Ug=function t(e){function n(t){return(t=+t)<=0?()=>0:function(){for(var n=0,i=t;i>1;--i)n+=e();return n+i*e()}}return n.source=t,n}(Bg),Vg=function t(e){var n=Ug.source(e);function i(t){if(0==(t=+t))return e;var i=n(t);return function(){return i()/t}}return i.source=t,i}(Bg),Xg=function t(e){function n(t){return function(){return-Math.log1p(-e())/t}}return n.source=t,n}(Bg),qg=function t(e){function n(t){if((t=+t)<0)throw new RangeError("invalid alpha");return t=1/-t,function(){return Math.pow(1-e(),t)}}return n.source=t,n}(Bg),Kg=function t(e){function n(t){if((t=+t)<0||t>1)throw new RangeError("invalid p");return function(){return Math.floor(e()+t)}}return n.source=t,n}(Bg),$g=function t(e){function n(t){if((t=+t)<0||t>1)throw new RangeError("invalid p");return 0===t?()=>1/0:1===t?()=>1:(t=Math.log1p(-t),function(){return 1+Math.floor(Math.log1p(-e())/t)})}return n.source=t,n}(Bg),Zg=function t(e){var n=Gg.source(e)();function i(t,i){if((t=+t)<0)throw new RangeError("invalid k");if(0===t)return()=>0;if(i=null==i?1:+i,1===t)return()=>-Math.log1p(-e())*i;var r=(t<1?t+1:t)-1/3,o=1/(3*Math.sqrt(r)),a=t<1?()=>Math.pow(e(),1/t):()=>1;return function(){do{do{var t=n(),s=1+o*t}while(s<=0);s*=s*s;var l=1-e()}while(l>=1-.0331*t*t*t*t&&Math.log(l)>=.5*t*t+r*(1-s+Math.log(s)));return r*s*a()*i}}return i.source=t,i}(Bg),Jg=function t(e){var n=Zg.source(e);function i(t,e){var i=n(t),r=n(e);return function(){var t=i();return 0===t?0:t/(t+r())}}return i.source=t,i}(Bg),Qg=function t(e){var n=$g.source(e),i=Jg.source(e);function r(t,e){return t=+t,(e=+e)>=1?()=>t:e<=0?()=>0:function(){for(var r=0,o=t,a=e;o*a>16&&o*(1-a)>16;){var s=Math.floor((o+1)*a),l=i(s,o-s+1)();l<=a?(r+=s,o-=s,a=(a-l)/(1-l)):(o=s-1,a/=l)}for(var u=a<.5,c=n(u?a:1-a),h=c(),d=0;h<=o;++d)h+=c();return r+(u?d:o-d)}}return r.source=t,r}(Bg),tv=function t(e){function n(t,n,i){var r;return 0==(t=+t)?r=t=>-Math.log(t):(t=1/t,r=e=>Math.pow(e,t)),n=null==n?0:+n,i=null==i?1:+i,function(){return n+i*r(-Math.log1p(-e()))}}return n.source=t,n}(Bg),ev=function t(e){function n(t,n){return t=null==t?0:+t,n=null==n?1:+n,function(){return t+n*Math.tan(Math.PI*e())}}return n.source=t,n}(Bg),nv=function t(e){function n(t,n){return t=null==t?0:+t,n=null==n?1:+n,function(){var i=e();return t+n*Math.log(i/(1-i))}}return n.source=t,n}(Bg),iv=function t(e){var n=Zg.source(e),i=Qg.source(e);function r(t){return function(){for(var r=0,o=t;o>16;){var a=Math.floor(.875*o),s=n(a)();if(s>o)return r+i(a-1,o/s)();r+=a,o-=s}for(var l=-Math.log1p(-e()),u=0;l<=o;++u)l-=Math.log1p(-e());return r+u}}return r.source=t,r}(Bg),rv=1/4294967296;function ov(t=Math.random()){let e=0|(0<=t&&t<1?t/rv:Math.abs(t));return()=>(e=1664525*e+1013904223|0,rv*(e>>>0))}function av(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function sv(t,e){switch(arguments.length){case 0:break;case 1:"function"==typeof t?this.interpolator(t):this.range(t);break;default:this.domain(t),"function"==typeof e?this.interpolator(e):this.range(e)}return this}const lv=Symbol("implicit");function uv(){var t=new E,e=[],n=[],i=lv;function r(r){let o=t.get(r);if(void 0===o){if(i!==lv)return i;t.set(r,o=e.push(r)-1)}return n[o%n.length]}return r.domain=function(n){if(!arguments.length)return e.slice();e=[],t=new E;for(const i of n)t.has(i)||t.set(i,e.push(i)-1);return r},r.range=function(t){return arguments.length?(n=Array.from(t),r):n.slice()},r.unknown=function(t){return arguments.length?(i=t,r):i},r.copy=function(){return uv(e,n).unknown(i)},av.apply(r,arguments),r}function cv(){var t,e,n=uv().unknown(void 0),i=n.domain,r=n.range,o=0,a=1,s=!1,l=0,u=0,c=.5;function h(){var n=i().length,h=a<o,d=h?a:o,f=h?o:a;t=(f-d)/Math.max(1,n-l+2*u),s&&(t=Math.floor(t)),d+=(f-d-t*(n-l))*c,e=t*(1-l),s&&(d=Math.round(d),e=Math.round(e));var p=wt(n).map((function(e){return d+t*e}));return r(h?p.reverse():p)}return delete n.unknown,n.domain=function(t){return arguments.length?(i(t),h()):i()},n.range=function(t){return arguments.length?([o,a]=t,o=+o,a=+a,h()):[o,a]},n.rangeRound=function(t){return[o,a]=t,o=+o,a=+a,s=!0,h()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(s=!!t,h()):s},n.padding=function(t){return arguments.length?(l=Math.min(1,u=+t),h()):l},n.paddingInner=function(t){return arguments.length?(l=Math.min(1,t),h()):l},n.paddingOuter=function(t){return arguments.length?(u=+t,h()):u},n.align=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),h()):c},n.copy=function(){return cv(i(),[o,a]).round(s).paddingInner(l).paddingOuter(u).align(c)},av.apply(h(),arguments)}function hv(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return hv(e())},t}function dv(){return hv(cv.apply(null,arguments).paddingInner(1))}function fv(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function pv(t){return+t}var mv=[0,1];function gv(t){return t}function vv(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:function(t){return function(){return t}}(isNaN(e)?NaN:.5)}function yv(t,e,n){var i=t[0],r=t[1],o=e[0],a=e[1];return r<i?(i=vv(r,i),o=n(a,o)):(i=vv(i,r),o=n(o,a)),function(t){return o(i(t))}}function bv(t,e,n){var i=Math.min(t.length,e.length)-1,r=new Array(i),o=new Array(i),a=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<i;)r[a]=vv(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(e){var n=c(t,e,1,i)-1;return o[n](r[n](e))}}function _v(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function wv(){var t,e,n,i,r,o,a=mv,s=mv,l=Ln.Z,u=gv;function c(){var t=Math.min(a.length,s.length);return u!==gv&&(u=function(t,e){var n;return t>e&&(n=t,t=e,e=n),function(n){return Math.max(t,Math.min(e,n))}}(a[0],a[t-1])),i=t>2?bv:yv,r=o=null,h}function h(e){return null==e||isNaN(e=+e)?n:(r||(r=i(a.map(t),s,l)))(t(u(e)))}return h.invert=function(n){return u(e((o||(o=i(s,a.map(t),Vn.Z)))(n)))},h.domain=function(t){return arguments.length?(a=Array.from(t,pv),c()):a.slice()},h.range=function(t){return arguments.length?(s=Array.from(t),c()):s.slice()},h.rangeRound=function(t){return s=Array.from(t),l=fv,c()},h.clamp=function(t){return arguments.length?(u=!!t||gv,c()):u!==gv},h.interpolate=function(t){return arguments.length?(l=t,c()):l},h.unknown=function(t){return arguments.length?(n=t,h):n},function(n,i){return t=n,e=i,c()}}function xv(){return wv()(gv,gv)}function Mv(t,e,n,i){var r,o=et(t,e,n);switch((i=Su(null==i?",f":i)).type){case"s":var a=Math.max(Math.abs(t),Math.abs(e));return null!=i.precision||isNaN(r=ju(o,a))||(i.precision=r),Ou(i,a);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(r=Fu(o,Math.max(Math.abs(t),Math.abs(e))))||(i.precision=r-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(r=Yu(o))||(i.precision=r-2*("%"===i.type))}return Au(i)}function Ev(t){var e=t.domain;return t.ticks=function(t){var n=e();return Q(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var i=e();return Mv(i[0],i[i.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var i,r,o=e(),a=0,s=o.length-1,l=o[a],u=o[s],c=10;for(u<l&&(r=l,l=u,u=r,r=a,a=s,s=r);c-- >0;){if((r=tt(l,u,n))===i)return o[a]=l,o[s]=u,e(o);if(r>0)l=Math.floor(l/r)*r,u=Math.ceil(u/r)*r;else{if(!(r<0))break;l=Math.ceil(l*r)/r,u=Math.floor(u*r)/r}i=r}return t},t}function Sv(){var t=xv();return t.copy=function(){return _v(t,Sv())},av.apply(t,arguments),Ev(t)}function kv(t){var e;function n(t){return null==t||isNaN(t=+t)?e:t}return n.invert=n,n.domain=n.range=function(e){return arguments.length?(t=Array.from(e,pv),n):t.slice()},n.unknown=function(t){return arguments.length?(e=t,n):e},n.copy=function(){return kv(t).unknown(e)},t=arguments.length?Array.from(t,pv):[0,1],Ev(n)}function Cv(t,e){var n,i=0,r=(t=t.slice()).length-1,o=t[i],a=t[r];return a<o&&(n=i,i=r,r=n,n=o,o=a,a=n),t[i]=e.floor(o),t[r]=e.ceil(a),t}function Tv(t){return Math.log(t)}function Dv(t){return Math.exp(t)}function Lv(t){return-Math.log(-t)}function Av(t){return-Math.exp(-t)}function Ov(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Pv(t){return(e,n)=>-t(-e,n)}function Iv(t){const e=t(Tv,Dv),n=e.domain;let i,r,o=10;function a(){return i=function(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}(o),r=function(t){return 10===t?Ov:t===Math.E?Math.exp:e=>Math.pow(t,e)}(o),n()[0]<0?(i=Pv(i),r=Pv(r),t(Lv,Av)):t(Tv,Dv),e}return e.base=function(t){return arguments.length?(o=+t,a()):o},e.domain=function(t){return arguments.length?(n(t),a()):n()},e.ticks=t=>{const e=n();let a=e[0],s=e[e.length-1];const l=s<a;l&&([a,s]=[s,a]);let u,c,h=i(a),d=i(s);const f=null==t?10:+t;let p=[];if(!(o%1)&&d-h<f){if(h=Math.floor(h),d=Math.ceil(d),a>0){for(;h<=d;++h)for(u=1;u<o;++u)if(c=h<0?u/r(-h):u*r(h),!(c<a)){if(c>s)break;p.push(c)}}else for(;h<=d;++h)for(u=o-1;u>=1;--u)if(c=h>0?u/r(-h):u*r(h),!(c<a)){if(c>s)break;p.push(c)}2*p.length<f&&(p=Q(a,s,f))}else p=Q(h,d,Math.min(d-h,f)).map(r);return l?p.reverse():p},e.tickFormat=(t,n)=>{if(null==t&&(t=10),null==n&&(n=10===o?"s":","),"function"!=typeof n&&(o%1||null!=(n=Su(n)).precision||(n.trim=!0),n=Au(n)),t===1/0)return n;const a=Math.max(1,o*t/e.ticks().length);return t=>{let e=t/r(Math.round(i(t)));return e*o<o-.5&&(e*=o),e<=a?n(t):""}},e.nice=()=>n(Cv(n(),{floor:t=>r(Math.floor(i(t))),ceil:t=>r(Math.ceil(i(t)))})),e}function Nv(){const t=Iv(wv()).domain([1,10]);return t.copy=()=>_v(t,Nv()).base(t.base()),av.apply(t,arguments),t}function Rv(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function Yv(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function jv(t){var e=1,n=t(Rv(e),Yv(e));return n.constant=function(n){return arguments.length?t(Rv(e=+n),Yv(e)):e},Ev(n)}function Fv(){var t=jv(wv());return t.copy=function(){return _v(t,Fv()).constant(t.constant())},av.apply(t,arguments)}function Bv(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function zv(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Hv(t){return t<0?-t*t:t*t}function Gv(t){var e=t(gv,gv),n=1;function i(){return 1===n?t(gv,gv):.5===n?t(zv,Hv):t(Bv(n),Bv(1/n))}return e.exponent=function(t){return arguments.length?(n=+t,i()):n},Ev(e)}function Wv(){var t=Gv(wv());return t.copy=function(){return _v(t,Wv()).exponent(t.exponent())},av.apply(t,arguments),t}function Uv(){return Wv.apply(null,arguments).exponent(.5)}function Vv(t){return Math.sign(t)*t*t}function Xv(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function qv(){var t,e=xv(),n=[0,1],i=!1;function r(n){var r=Xv(e(n));return isNaN(r)?t:i?Math.round(r):r}return r.invert=function(t){return e.invert(Vv(t))},r.domain=function(t){return arguments.length?(e.domain(t),r):e.domain()},r.range=function(t){return arguments.length?(e.range((n=Array.from(t,pv)).map(Vv)),r):n.slice()},r.rangeRound=function(t){return r.range(t).round(!0)},r.round=function(t){return arguments.length?(i=!!t,r):i},r.clamp=function(t){return arguments.length?(e.clamp(t),r):e.clamp()},r.unknown=function(e){return arguments.length?(t=e,r):t},r.copy=function(){return qv(e.domain(),n).round(i).clamp(e.clamp()).unknown(t)},av.apply(r,arguments),Ev(r)}function Kv(){var t,e=[],n=[],r=[];function o(){var t=0,i=Math.max(1,n.length);for(r=new Array(i-1);++t<i;)r[t-1]=ct(e,t/i);return a}function a(e){return null==e||isNaN(e=+e)?t:n[c(r,e)]}return a.invertExtent=function(t){var i=n.indexOf(t);return i<0?[NaN,NaN]:[i>0?r[i-1]:e[0],i<r.length?r[i]:e[e.length-1]]},a.domain=function(t){if(!arguments.length)return e.slice();e=[];for(let n of t)null==n||isNaN(n=+n)||e.push(n);return e.sort(i),o()},a.range=function(t){return arguments.length?(n=Array.from(t),o()):n.slice()},a.unknown=function(e){return arguments.length?(t=e,a):t},a.quantiles=function(){return r.slice()},a.copy=function(){return Kv().domain(e).range(n).unknown(t)},av.apply(a,arguments)}function $v(){var t,e=0,n=1,i=1,r=[.5],o=[0,1];function a(e){return null!=e&&e<=e?o[c(r,e,0,i)]:t}function s(){var t=-1;for(r=new Array(i);++t<i;)r[t]=((t+1)*n-(t-i)*e)/(i+1);return a}return a.domain=function(t){return arguments.length?([e,n]=t,e=+e,n=+n,s()):[e,n]},a.range=function(t){return arguments.length?(i=(o=Array.from(t)).length-1,s()):o.slice()},a.invertExtent=function(t){var a=o.indexOf(t);return a<0?[NaN,NaN]:a<1?[e,r[0]]:a>=i?[r[i-1],n]:[r[a-1],r[a]]},a.unknown=function(e){return arguments.length?(t=e,a):a},a.thresholds=function(){return r.slice()},a.copy=function(){return $v().domain([e,n]).range(o).unknown(t)},av.apply(Ev(a),arguments)}function Zv(){var t,e=[.5],n=[0,1],i=1;function r(r){return null!=r&&r<=r?n[c(e,r,0,i)]:t}return r.domain=function(t){return arguments.length?(e=Array.from(t),i=Math.min(e.length,n.length-1),r):e.slice()},r.range=function(t){return arguments.length?(n=Array.from(t),i=Math.min(e.length,n.length-1),r):n.slice()},r.invertExtent=function(t){var i=n.indexOf(t);return[e[i-1],e[i]]},r.unknown=function(e){return arguments.length?(t=e,r):t},r.copy=function(){return Zv().domain(e).range(n).unknown(t)},av.apply(r,arguments)}const Jv=1e3,Qv=6e4,ty=36e5,ey=864e5,ny=6048e5,iy=2592e6,ry=31536e6;var oy=new Date,ay=new Date;function sy(t,e,n,i){function r(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return r.floor=function(e){return t(e=new Date(+e)),e},r.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},r.round=function(t){var e=r(t),n=r.ceil(t);return t-e<n-t?e:n},r.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},r.range=function(n,i,o){var a,s=[];if(n=r.ceil(n),o=null==o?1:Math.floor(o),!(n<i&&o>0))return s;do{s.push(a=new Date(+n)),e(n,o),t(n)}while(a<n&&n<i);return s},r.filter=function(n){return sy((function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),(function(t,i){if(t>=t)if(i<0)for(;++i<=0;)for(;e(t,-1),!n(t););else for(;--i>=0;)for(;e(t,1),!n(t););}))},n&&(r.count=function(e,i){return oy.setTime(+e),ay.setTime(+i),t(oy),t(ay),Math.floor(n(oy,ay))},r.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?r.filter(i?function(e){return i(e)%t==0}:function(e){return r.count(0,e)%t==0}):r:null}),r}var ly=sy((function(){}),(function(t,e){t.setTime(+t+e)}),(function(t,e){return e-t}));ly.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?sy((function(e){e.setTime(Math.floor(e/t)*t)}),(function(e,n){e.setTime(+e+n*t)}),(function(e,n){return(n-e)/t})):ly:null};const uy=ly;var cy=ly.range,hy=sy((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,e){t.setTime(+t+e*Jv)}),(function(t,e){return(e-t)/Jv}),(function(t){return t.getUTCSeconds()}));const dy=hy;var fy=hy.range,py=sy((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*Jv)}),(function(t,e){t.setTime(+t+e*Qv)}),(function(t,e){return(e-t)/Qv}),(function(t){return t.getMinutes()}));const my=py;var gy=py.range,vy=sy((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*Jv-t.getMinutes()*Qv)}),(function(t,e){t.setTime(+t+e*ty)}),(function(t,e){return(e-t)/ty}),(function(t){return t.getHours()}));const yy=vy;var by=vy.range,_y=sy((t=>t.setHours(0,0,0,0)),((t,e)=>t.setDate(t.getDate()+e)),((t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Qv)/ey),(t=>t.getDate()-1));const wy=_y;var xy=_y.range;function My(t){return sy((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+7*e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Qv)/ny}))}var Ey=My(0),Sy=My(1),ky=My(2),Cy=My(3),Ty=My(4),Dy=My(5),Ly=My(6),Ay=Ey.range,Oy=Sy.range,Py=ky.range,Iy=Cy.range,Ny=Ty.range,Ry=Dy.range,Yy=Ly.range,jy=sy((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()}));const Fy=jy;var By=jy.range,zy=sy((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));zy.every=function(t){return isFinite(t=Math.floor(t))&&t>0?sy((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,n){e.setFullYear(e.getFullYear()+n*t)})):null};const Hy=zy;var Gy=zy.range,Wy=sy((function(t){t.setUTCSeconds(0,0)}),(function(t,e){t.setTime(+t+e*Qv)}),(function(t,e){return(e-t)/Qv}),(function(t){return t.getUTCMinutes()}));const Uy=Wy;var Vy=Wy.range,Xy=sy((function(t){t.setUTCMinutes(0,0,0)}),(function(t,e){t.setTime(+t+e*ty)}),(function(t,e){return(e-t)/ty}),(function(t){return t.getUTCHours()}));const qy=Xy;var Ky=Xy.range,$y=sy((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/ey}),(function(t){return t.getUTCDate()-1}));const Zy=$y;var Jy=$y.range;function Qy(t){return sy((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+7*e)}),(function(t,e){return(e-t)/ny}))}var tb=Qy(0),eb=Qy(1),nb=Qy(2),ib=Qy(3),rb=Qy(4),ob=Qy(5),ab=Qy(6),sb=tb.range,lb=eb.range,ub=nb.range,cb=ib.range,hb=rb.range,db=ob.range,fb=ab.range,pb=sy((function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCMonth(t.getUTCMonth()+e)}),(function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())}),(function(t){return t.getUTCMonth()}));const mb=pb;var gb=pb.range,vb=sy((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()}));vb.every=function(t){return isFinite(t=Math.floor(t))&&t>0?sy((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null};const yb=vb;var bb=vb.range;function _b(t,e,n,i,o,a){const s=[[dy,1,Jv],[dy,5,5e3],[dy,15,15e3],[dy,30,3e4],[a,1,Qv],[a,5,3e5],[a,15,9e5],[a,30,18e5],[o,1,ty],[o,3,108e5],[o,6,216e5],[o,12,432e5],[i,1,ey],[i,2,1728e5],[n,1,ny],[e,1,iy],[e,3,7776e6],[t,1,ry]];function l(e,n,i){const o=Math.abs(n-e)/i,a=r((([,,t])=>t)).right(s,o);if(a===s.length)return t.every(et(e/ry,n/ry,i));if(0===a)return uy.every(Math.max(et(e,n,i),1));const[l,u]=s[o/s[a-1][2]<s[a][2]/o?a-1:a];return l.every(u)}return[function(t,e,n){const i=e<t;i&&([t,e]=[e,t]);const r=n&&"function"==typeof n.range?n:l(t,e,n),o=r?r.range(t,+e+1):[];return i?o.reverse():o},l]}const[wb,xb]=_b(yb,mb,tb,Zy,qy,Uy),[Mb,Eb]=_b(Hy,Fy,Ey,wy,yy,my);function Sb(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function kb(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Cb(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function Tb(t){var e=t.dateTime,n=t.date,i=t.time,r=t.periods,o=t.days,a=t.shortDays,s=t.months,l=t.shortMonths,u=Bb(r),c=zb(r),h=Bb(o),d=zb(o),f=Bb(a),p=zb(a),m=Bb(s),g=zb(s),v=Bb(l),y=zb(l),b={a:function(t){return a[t.getDay()]},A:function(t){return o[t.getDay()]},b:function(t){return l[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:null,d:l_,e:l_,f:f_,g:E_,G:k_,H:u_,I:c_,j:h_,L:d_,m:p_,M:m_,p:function(t){return r[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:K_,s:$_,S:g_,u:v_,U:y_,V:__,w:w_,W:x_,x:null,X:null,y:M_,Y:S_,Z:C_,"%":q_},_={a:function(t){return a[t.getUTCDay()]},A:function(t){return o[t.getUTCDay()]},b:function(t){return l[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},c:null,d:T_,e:T_,f:P_,g:W_,G:V_,H:D_,I:L_,j:A_,L:O_,m:I_,M:N_,p:function(t){return r[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:K_,s:$_,S:R_,u:Y_,U:j_,V:B_,w:z_,W:H_,x:null,X:null,y:G_,Y:U_,Z:X_,"%":q_},w={a:function(t,e,n){var i=f.exec(e.slice(n));return i?(t.w=p.get(i[0].toLowerCase()),n+i[0].length):-1},A:function(t,e,n){var i=h.exec(e.slice(n));return i?(t.w=d.get(i[0].toLowerCase()),n+i[0].length):-1},b:function(t,e,n){var i=v.exec(e.slice(n));return i?(t.m=y.get(i[0].toLowerCase()),n+i[0].length):-1},B:function(t,e,n){var i=m.exec(e.slice(n));return i?(t.m=g.get(i[0].toLowerCase()),n+i[0].length):-1},c:function(t,n,i){return E(t,e,n,i)},d:Jb,e:Jb,f:r_,g:qb,G:Xb,H:t_,I:t_,j:Qb,L:i_,m:Zb,M:e_,p:function(t,e,n){var i=u.exec(e.slice(n));return i?(t.p=c.get(i[0].toLowerCase()),n+i[0].length):-1},q:$b,Q:a_,s:s_,S:n_,u:Gb,U:Wb,V:Ub,w:Hb,W:Vb,x:function(t,e,i){return E(t,n,e,i)},X:function(t,e,n){return E(t,i,e,n)},y:qb,Y:Xb,Z:Kb,"%":o_};function x(t,e){return function(n){var i,r,o,a=[],s=-1,l=0,u=t.length;for(n instanceof Date||(n=new Date(+n));++s<u;)37===t.charCodeAt(s)&&(a.push(t.slice(l,s)),null!=(r=Ib[i=t.charAt(++s)])?i=t.charAt(++s):r="e"===i?" ":"0",(o=e[i])&&(i=o(n,r)),a.push(i),l=s+1);return a.push(t.slice(l,s)),a.join("")}}function M(t,e){return function(n){var i,r,o=Cb(1900,void 0,1);if(E(o,t,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(e&&!("Z"in o)&&(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(r=(i=kb(Cb(o.y,0,1))).getUTCDay(),i=r>4||0===r?eb.ceil(i):eb(i),i=Zy.offset(i,7*(o.V-1)),o.y=i.getUTCFullYear(),o.m=i.getUTCMonth(),o.d=i.getUTCDate()+(o.w+6)%7):(r=(i=Sb(Cb(o.y,0,1))).getDay(),i=r>4||0===r?Sy.ceil(i):Sy(i),i=wy.offset(i,7*(o.V-1)),o.y=i.getFullYear(),o.m=i.getMonth(),o.d=i.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),r="Z"in o?kb(Cb(o.y,0,1)).getUTCDay():Sb(Cb(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(r+5)%7:o.w+7*o.U-(r+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,kb(o)):Sb(o)}}function E(t,e,n,i){for(var r,o,a=0,s=e.length,l=n.length;a<s;){if(i>=l)return-1;if(37===(r=e.charCodeAt(a++))){if(r=e.charAt(a++),!(o=w[r in Ib?e.charAt(a++):r])||(i=o(t,n,i))<0)return-1}else if(r!=n.charCodeAt(i++))return-1}return i}return b.x=x(n,b),b.X=x(i,b),b.c=x(e,b),_.x=x(n,_),_.X=x(i,_),_.c=x(e,_),{format:function(t){var e=x(t+="",b);return e.toString=function(){return t},e},parse:function(t){var e=M(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=x(t+="",_);return e.toString=function(){return t},e},utcParse:function(t){var e=M(t+="",!0);return e.toString=function(){return t},e}}}var Db,Lb,Ab,Ob,Pb,Ib={"-":"",_:" ",0:"0"},Nb=/^\s*\d+/,Rb=/^%/,Yb=/[\\^$*+?|[\]().{}]/g;function jb(t,e,n){var i=t<0?"-":"",r=(i?-t:t)+"",o=r.length;return i+(o<n?new Array(n-o+1).join(e)+r:r)}function Fb(t){return t.replace(Yb,"\\$&")}function Bb(t){return new RegExp("^(?:"+t.map(Fb).join("|")+")","i")}function zb(t){return new Map(t.map(((t,e)=>[t.toLowerCase(),e])))}function Hb(t,e,n){var i=Nb.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function Gb(t,e,n){var i=Nb.exec(e.slice(n,n+1));return i?(t.u=+i[0],n+i[0].length):-1}function Wb(t,e,n){var i=Nb.exec(e.slice(n,n+2));return i?(t.U=+i[0],n+i[0].length):-1}function Ub(t,e,n){var i=Nb.exec(e.slice(n,n+2));return i?(t.V=+i[0],n+i[0].length):-1}function Vb(t,e,n){var i=Nb.exec(e.slice(n,n+2));return i?(t.W=+i[0],n+i[0].length):-1}function Xb(t,e,n){var i=Nb.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function qb(t,e,n){var i=Nb.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function Kb(t,e,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function $b(t,e,n){var i=Nb.exec(e.slice(n,n+1));return i?(t.q=3*i[0]-3,n+i[0].length):-1}function Zb(t,e,n){var i=Nb.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function Jb(t,e,n){var i=Nb.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function Qb(t,e,n){var i=Nb.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function t_(t,e,n){var i=Nb.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function e_(t,e,n){var i=Nb.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function n_(t,e,n){var i=Nb.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function i_(t,e,n){var i=Nb.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function r_(t,e,n){var i=Nb.exec(e.slice(n,n+6));return i?(t.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function o_(t,e,n){var i=Rb.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function a_(t,e,n){var i=Nb.exec(e.slice(n));return i?(t.Q=+i[0],n+i[0].length):-1}function s_(t,e,n){var i=Nb.exec(e.slice(n));return i?(t.s=+i[0],n+i[0].length):-1}function l_(t,e){return jb(t.getDate(),e,2)}function u_(t,e){return jb(t.getHours(),e,2)}function c_(t,e){return jb(t.getHours()%12||12,e,2)}function h_(t,e){return jb(1+wy.count(Hy(t),t),e,3)}function d_(t,e){return jb(t.getMilliseconds(),e,3)}function f_(t,e){return d_(t,e)+"000"}function p_(t,e){return jb(t.getMonth()+1,e,2)}function m_(t,e){return jb(t.getMinutes(),e,2)}function g_(t,e){return jb(t.getSeconds(),e,2)}function v_(t){var e=t.getDay();return 0===e?7:e}function y_(t,e){return jb(Ey.count(Hy(t)-1,t),e,2)}function b_(t){var e=t.getDay();return e>=4||0===e?Ty(t):Ty.ceil(t)}function __(t,e){return t=b_(t),jb(Ty.count(Hy(t),t)+(4===Hy(t).getDay()),e,2)}function w_(t){return t.getDay()}function x_(t,e){return jb(Sy.count(Hy(t)-1,t),e,2)}function M_(t,e){return jb(t.getFullYear()%100,e,2)}function E_(t,e){return jb((t=b_(t)).getFullYear()%100,e,2)}function S_(t,e){return jb(t.getFullYear()%1e4,e,4)}function k_(t,e){var n=t.getDay();return jb((t=n>=4||0===n?Ty(t):Ty.ceil(t)).getFullYear()%1e4,e,4)}function C_(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+jb(e/60|0,"0",2)+jb(e%60,"0",2)}function T_(t,e){return jb(t.getUTCDate(),e,2)}function D_(t,e){return jb(t.getUTCHours(),e,2)}function L_(t,e){return jb(t.getUTCHours()%12||12,e,2)}function A_(t,e){return jb(1+Zy.count(yb(t),t),e,3)}function O_(t,e){return jb(t.getUTCMilliseconds(),e,3)}function P_(t,e){return O_(t,e)+"000"}function I_(t,e){return jb(t.getUTCMonth()+1,e,2)}function N_(t,e){return jb(t.getUTCMinutes(),e,2)}function R_(t,e){return jb(t.getUTCSeconds(),e,2)}function Y_(t){var e=t.getUTCDay();return 0===e?7:e}function j_(t,e){return jb(tb.count(yb(t)-1,t),e,2)}function F_(t){var e=t.getUTCDay();return e>=4||0===e?rb(t):rb.ceil(t)}function B_(t,e){return t=F_(t),jb(rb.count(yb(t),t)+(4===yb(t).getUTCDay()),e,2)}function z_(t){return t.getUTCDay()}function H_(t,e){return jb(eb.count(yb(t)-1,t),e,2)}function G_(t,e){return jb(t.getUTCFullYear()%100,e,2)}function W_(t,e){return jb((t=F_(t)).getUTCFullYear()%100,e,2)}function U_(t,e){return jb(t.getUTCFullYear()%1e4,e,4)}function V_(t,e){var n=t.getUTCDay();return jb((t=n>=4||0===n?rb(t):rb.ceil(t)).getUTCFullYear()%1e4,e,4)}function X_(){return"+0000"}function q_(){return"%"}function K_(t){return+t}function $_(t){return Math.floor(+t/1e3)}function Z_(t){return Db=Tb(t),Lb=Db.format,Ab=Db.parse,Ob=Db.utcFormat,Pb=Db.utcParse,Db}function J_(t){return new Date(t)}function Q_(t){return t instanceof Date?+t:+new Date(+t)}function tw(t,e,n,i,r,o,a,s,l,u){var c=xv(),h=c.invert,d=c.domain,f=u(".%L"),p=u(":%S"),m=u("%I:%M"),g=u("%I %p"),v=u("%a %d"),y=u("%b %d"),b=u("%B"),_=u("%Y");function w(t){return(l(t)<t?f:s(t)<t?p:a(t)<t?m:o(t)<t?g:i(t)<t?r(t)<t?v:y:n(t)<t?b:_)(t)}return c.invert=function(t){return new Date(h(t))},c.domain=function(t){return arguments.length?d(Array.from(t,Q_)):d().map(J_)},c.ticks=function(e){var n=d();return t(n[0],n[n.length-1],null==e?10:e)},c.tickFormat=function(t,e){return null==e?w:u(e)},c.nice=function(t){var n=d();return t&&"function"==typeof t.range||(t=e(n[0],n[n.length-1],null==t?10:t)),t?d(Cv(n,t)):c},c.copy=function(){return _v(c,tw(t,e,n,i,r,o,a,s,l,u))},c}function ew(){return av.apply(tw(Mb,Eb,Hy,Fy,Ey,wy,yy,my,dy,Lb).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function nw(){return av.apply(tw(wb,xb,yb,mb,tb,Zy,qy,Uy,dy,Ob).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function iw(){var t,e,n,i,r,o=0,a=1,s=gv,l=!1;function u(e){return null==e||isNaN(e=+e)?r:s(0===n?.5:(e=(i(e)-t)*n,l?Math.max(0,Math.min(1,e)):e))}function c(t){return function(e){var n,i;return arguments.length?([n,i]=e,s=t(n,i),u):[s(0),s(1)]}}return u.domain=function(r){return arguments.length?([o,a]=r,t=i(o=+o),e=i(a=+a),n=t===e?0:1/(e-t),u):[o,a]},u.clamp=function(t){return arguments.length?(l=!!t,u):l},u.interpolator=function(t){return arguments.length?(s=t,u):s},u.range=c(Ln.Z),u.rangeRound=c(fv),u.unknown=function(t){return arguments.length?(r=t,u):r},function(r){return i=r,t=r(o),e=r(a),n=t===e?0:1/(e-t),u}}function rw(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function ow(){var t=Ev(iw()(gv));return t.copy=function(){return rw(t,ow())},sv.apply(t,arguments)}function aw(){var t=Iv(iw()).domain([1,10]);return t.copy=function(){return rw(t,aw()).base(t.base())},sv.apply(t,arguments)}function sw(){var t=jv(iw());return t.copy=function(){return rw(t,sw()).constant(t.constant())},sv.apply(t,arguments)}function lw(){var t=Gv(iw());return t.copy=function(){return rw(t,lw()).exponent(t.exponent())},sv.apply(t,arguments)}function uw(){return lw.apply(null,arguments).exponent(.5)}function cw(){var t=[],e=gv;function n(n){if(null!=n&&!isNaN(n=+n))return e((c(t,n,1)-1)/(t.length-1))}return n.domain=function(e){if(!arguments.length)return t.slice();t=[];for(let n of e)null==n||isNaN(n=+n)||t.push(n);return t.sort(i),n},n.interpolator=function(t){return arguments.length?(e=t,n):e},n.range=function(){return t.map(((n,i)=>e(i/(t.length-1))))},n.quantiles=function(e){return Array.from({length:e+1},((n,i)=>ut(t,i/e)))},n.copy=function(){return cw(e).domain(t)},sv.apply(n,arguments)}function hw(t,e){for(var n=0,i=e.length-1,r=e[0],o=new Array(i<0?0:i);n<i;)o[n]=t(r,r=e[++n]);return function(t){var e=Math.max(0,Math.min(i-1,Math.floor(t*=i)));return o[e](t-e)}}function dw(){var t,e,n,i,r,o,a,s=0,l=.5,u=1,c=1,h=gv,d=!1;function f(t){return isNaN(t=+t)?a:(t=.5+((t=+o(t))-e)*(c*t<c*e?i:r),h(d?Math.max(0,Math.min(1,t)):t))}function p(t){return function(e){var n,i,r;return arguments.length?([n,i,r]=e,h=hw(t,[n,i,r]),f):[h(0),h(.5),h(1)]}}return f.domain=function(a){return arguments.length?([s,l,u]=a,t=o(s=+s),e=o(l=+l),n=o(u=+u),i=t===e?0:.5/(e-t),r=e===n?0:.5/(n-e),c=e<t?-1:1,f):[s,l,u]},f.clamp=function(t){return arguments.length?(d=!!t,f):d},f.interpolator=function(t){return arguments.length?(h=t,f):h},f.range=p(Ln.Z),f.rangeRound=p(fv),f.unknown=function(t){return arguments.length?(a=t,f):a},function(a){return o=a,t=a(s),e=a(l),n=a(u),i=t===e?0:.5/(e-t),r=e===n?0:.5/(n-e),c=e<t?-1:1,f}}function fw(){var t=Ev(dw()(gv));return t.copy=function(){return rw(t,fw())},sv.apply(t,arguments)}function pw(){var t=Iv(dw()).domain([.1,1,10]);return t.copy=function(){return rw(t,pw()).base(t.base())},sv.apply(t,arguments)}function mw(){var t=jv(dw());return t.copy=function(){return rw(t,mw()).constant(t.constant())},sv.apply(t,arguments)}function gw(){var t=Gv(dw());return t.copy=function(){return rw(t,gw()).exponent(t.exponent())},sv.apply(t,arguments)}function vw(){return gw.apply(null,arguments).exponent(.5)}function yw(t){for(var e=t.length/6|0,n=new Array(e),i=0;i<e;)n[i]="#"+t.slice(6*i,6*++i);return n}Z_({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});const bw=yw("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),_w=yw("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),ww=yw("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),xw=yw("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Mw=yw("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),Ew=yw("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),Sw=yw("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),kw=yw("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Cw=yw("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),Tw=yw("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),Dw=t=>(0,ii.hD)(t[t.length-1]);var Lw=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(yw);const Aw=Dw(Lw);var Ow=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(yw);const Pw=Dw(Ow);var Iw=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(yw);const Nw=Dw(Iw);var Rw=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(yw);const Yw=Dw(Rw);var jw=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(yw);const Fw=Dw(jw);var Bw=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(yw);const zw=Dw(Bw);var Hw=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(yw);const Gw=Dw(Hw);var Ww=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(yw);const Uw=Dw(Ww);var Vw=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(yw);const Xw=Dw(Vw);var qw=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(yw);const Kw=Dw(qw);var $w=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(yw);const Zw=Dw($w);var Jw=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(yw);const Qw=Dw(Jw);var tx=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(yw);const ex=Dw(tx);var nx=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(yw);const ix=Dw(nx);var rx=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(yw);const ox=Dw(rx);var ax=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(yw);const sx=Dw(ax);var lx=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(yw);const ux=Dw(lx);var cx=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(yw);const hx=Dw(cx);var dx=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(yw);const fx=Dw(dx);var px=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(yw);const mx=Dw(px);var gx=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(yw);const vx=Dw(gx);var yx=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(yw);const bx=Dw(yx);var _x=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(yw);const wx=Dw(_x);var xx=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(yw);const Mx=Dw(xx);var Ex=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(yw);const Sx=Dw(Ex);var kx=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(yw);const Cx=Dw(kx);var Tx=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(yw);const Dx=Dw(Tx);function Lx(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-2710.57*t)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-67.37*t)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-2475.67*t)))))))+")"}var Ax=n(44087),Ox=Math.PI/180,Px=180/Math.PI,Ix=-.14861,Nx=1.78277,Rx=-.29227,Yx=-.90649,jx=1.97294,Fx=-1.7884503806,Bx=3.5172982438,zx=-.6557636667999999;function Hx(t){if(t instanceof Wx)return new Wx(t.h,t.s,t.l,t.opacity);t instanceof ni.Ss||(t=(0,ni.SU)(t));var e=t.r/255,n=t.g/255,i=t.b/255,r=(zx*i+Fx*e-Bx*n)/-5.9615122912,o=i-r,a=(jx*(n-r)-Rx*o)/Yx,s=Math.sqrt(a*a+o*o)/(jx*r*(1-r)),l=s?Math.atan2(a,o)*Px-120:NaN;return new Wx(l<0?l+360:l,s,r,t.opacity)}function Gx(t,e,n,i){return 1===arguments.length?Hx(t):new Wx(t,e,n,null==i?1:i)}function Wx(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}(0,Ax.Z)(Wx,Gx,(0,Ax.l)(ni.Il,{brighter:function(t){return t=null==t?ni.J5:Math.pow(ni.J5,t),new Wx(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?ni.xV:Math.pow(ni.xV,t),new Wx(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*Ox,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),i=Math.cos(t),r=Math.sin(t);return new ni.Ss(255*(e+n*(Ix*i+Nx*r)),255*(e+n*(Rx*i+Yx*r)),255*(e+n*(jx*i)),this.opacity)}}));var Ux=n(85910);function Vx(t){return function e(n){function i(e,i){var r=t((e=Gx(e)).h,(i=Gx(i)).h),o=(0,Ux.ZP)(e.s,i.s),a=(0,Ux.ZP)(e.l,i.l),s=(0,Ux.ZP)(e.opacity,i.opacity);return function(t){return e.h=r(t),e.s=o(t),e.l=a(Math.pow(t,n)),e.opacity=s(t),e+""}}return n=+n,i.gamma=e,i}(1)}Vx(Ux.wx);var Xx=Vx(Ux.ZP);const qx=Xx(Gx(300,.5,0),Gx(-240,.5,1));var Kx=Xx(Gx(-100,.75,.35),Gx(80,1.5,.8)),$x=Xx(Gx(260,.75,.35),Gx(80,1.5,.8)),Zx=Gx();function Jx(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return Zx.h=360*t-100,Zx.s=1.5-1.5*e,Zx.l=.8-.9*e,Zx+""}var Qx=(0,ni.B8)(),tM=Math.PI/3,eM=2*Math.PI/3;function nM(t){var e;return t=(.5-t)*Math.PI,Qx.r=255*(e=Math.sin(t))*e,Qx.g=255*(e=Math.sin(t+tM))*e,Qx.b=255*(e=Math.sin(t+eM))*e,Qx+""}function iM(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-14825.05*t)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+707.56*t)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-6838.66*t)))))))+")"}function rM(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}const oM=rM(yw("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var aM=rM(yw("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),sM=rM(yw("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),lM=rM(yw("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function uM(t){return Mn(ln(t).call(document.documentElement))}var cM=0;function hM(){return new dM}function dM(){this._="@"+(++cM).toString(36)}function fM(t,e){return t.target&&(t=An(t),void 0===e&&(e=t.currentTarget),t=t.touches||[t]),Array.from(t,(t=>On(t,e)))}function pM(t){return"string"==typeof t?new _n([document.querySelectorAll(t)],[document.documentElement]):new _n([ue(t)],bn)}function mM(t){return function(){return t}}dM.prototype=hM.prototype={constructor:dM,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};var gM=Math.abs,vM=Math.atan2,yM=Math.cos,bM=Math.max,_M=Math.min,wM=Math.sin,xM=Math.sqrt,MM=1e-12,EM=Math.PI,SM=EM/2,kM=2*EM;function CM(t){return t>1?0:t<-1?EM:Math.acos(t)}function TM(t){return t>=1?SM:t<=-1?-SM:Math.asin(t)}function DM(t){return t.innerRadius}function LM(t){return t.outerRadius}function AM(t){return t.startAngle}function OM(t){return t.endAngle}function PM(t){return t&&t.padAngle}function IM(t,e,n,i,r,o,a,s){var l=n-t,u=i-e,c=a-r,h=s-o,d=h*l-c*u;if(!(d*d<MM))return[t+(d=(c*(e-o)-h*(t-r))/d)*l,e+d*u]}function NM(t,e,n,i,r,o,a){var s=t-n,l=e-i,u=(a?o:-o)/xM(s*s+l*l),c=u*l,h=-u*s,d=t+c,f=e+h,p=n+c,m=i+h,g=(d+p)/2,v=(f+m)/2,y=p-d,b=m-f,_=y*y+b*b,w=r-o,x=d*m-p*f,M=(b<0?-1:1)*xM(bM(0,w*w*_-x*x)),E=(x*b-y*M)/_,S=(-x*y-b*M)/_,k=(x*b+y*M)/_,C=(-x*y+b*M)/_,T=E-g,D=S-v,L=k-g,A=C-v;return T*T+D*D>L*L+A*A&&(E=k,S=C),{cx:E,cy:S,x01:-c,y01:-h,x11:E*(r/w-1),y11:S*(r/w-1)}}function RM(){var t=DM,e=LM,n=mM(0),i=null,r=AM,o=OM,a=PM,s=null;function l(){var l,u,c=+t.apply(this,arguments),h=+e.apply(this,arguments),d=r.apply(this,arguments)-SM,f=o.apply(this,arguments)-SM,p=gM(f-d),m=f>d;if(s||(s=l=Nr()),h<c&&(u=h,h=c,c=u),h>MM)if(p>kM-MM)s.moveTo(h*yM(d),h*wM(d)),s.arc(0,0,h,d,f,!m),c>MM&&(s.moveTo(c*yM(f),c*wM(f)),s.arc(0,0,c,f,d,m));else{var g,v,y=d,b=f,_=d,w=f,x=p,M=p,E=a.apply(this,arguments)/2,S=E>MM&&(i?+i.apply(this,arguments):xM(c*c+h*h)),k=_M(gM(h-c)/2,+n.apply(this,arguments)),C=k,T=k;if(S>MM){var D=TM(S/c*wM(E)),L=TM(S/h*wM(E));(x-=2*D)>MM?(_+=D*=m?1:-1,w-=D):(x=0,_=w=(d+f)/2),(M-=2*L)>MM?(y+=L*=m?1:-1,b-=L):(M=0,y=b=(d+f)/2)}var A=h*yM(y),O=h*wM(y),P=c*yM(w),I=c*wM(w);if(k>MM){var N,R=h*yM(b),Y=h*wM(b),j=c*yM(_),F=c*wM(_);if(p<EM&&(N=IM(A,O,j,F,R,Y,P,I))){var B=A-N[0],z=O-N[1],H=R-N[0],G=Y-N[1],W=1/wM(CM((B*H+z*G)/(xM(B*B+z*z)*xM(H*H+G*G)))/2),U=xM(N[0]*N[0]+N[1]*N[1]);C=_M(k,(c-U)/(W-1)),T=_M(k,(h-U)/(W+1))}}M>MM?T>MM?(g=NM(j,F,A,O,h,T,m),v=NM(R,Y,P,I,h,T,m),s.moveTo(g.cx+g.x01,g.cy+g.y01),T<k?s.arc(g.cx,g.cy,T,vM(g.y01,g.x01),vM(v.y01,v.x01),!m):(s.arc(g.cx,g.cy,T,vM(g.y01,g.x01),vM(g.y11,g.x11),!m),s.arc(0,0,h,vM(g.cy+g.y11,g.cx+g.x11),vM(v.cy+v.y11,v.cx+v.x11),!m),s.arc(v.cx,v.cy,T,vM(v.y11,v.x11),vM(v.y01,v.x01),!m))):(s.moveTo(A,O),s.arc(0,0,h,y,b,!m)):s.moveTo(A,O),c>MM&&x>MM?C>MM?(g=NM(P,I,R,Y,c,-C,m),v=NM(A,O,j,F,c,-C,m),s.lineTo(g.cx+g.x01,g.cy+g.y01),C<k?s.arc(g.cx,g.cy,C,vM(g.y01,g.x01),vM(v.y01,v.x01),!m):(s.arc(g.cx,g.cy,C,vM(g.y01,g.x01),vM(g.y11,g.x11),!m),s.arc(0,0,c,vM(g.cy+g.y11,g.cx+g.x11),vM(v.cy+v.y11,v.cx+v.x11),m),s.arc(v.cx,v.cy,C,vM(v.y11,v.x11),vM(v.y01,v.x01),!m))):s.arc(0,0,c,w,_,m):s.lineTo(P,I)}else s.moveTo(0,0);if(s.closePath(),l)return s=null,l+""||null}return l.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,i=(+r.apply(this,arguments)+ +o.apply(this,arguments))/2-EM/2;return[yM(i)*n,wM(i)*n]},l.innerRadius=function(e){return arguments.length?(t="function"==typeof e?e:mM(+e),l):t},l.outerRadius=function(t){return arguments.length?(e="function"==typeof t?t:mM(+t),l):e},l.cornerRadius=function(t){return arguments.length?(n="function"==typeof t?t:mM(+t),l):n},l.padRadius=function(t){return arguments.length?(i=null==t?null:"function"==typeof t?t:mM(+t),l):i},l.startAngle=function(t){return arguments.length?(r="function"==typeof t?t:mM(+t),l):r},l.endAngle=function(t){return arguments.length?(o="function"==typeof t?t:mM(+t),l):o},l.padAngle=function(t){return arguments.length?(a="function"==typeof t?t:mM(+t),l):a},l.context=function(t){return arguments.length?(s=null==t?null:t,l):s},l}var YM=Array.prototype.slice;function jM(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function FM(t){this._context=t}function BM(t){return new FM(t)}function zM(t){return t[0]}function HM(t){return t[1]}function GM(t,e){var n=mM(!0),i=null,r=BM,o=null;function a(a){var s,l,u,c=(a=jM(a)).length,h=!1;for(null==i&&(o=r(u=Nr())),s=0;s<=c;++s)!(s<c&&n(l=a[s],s,a))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+t(l,s,a),+e(l,s,a));if(u)return o=null,u+""||null}return t="function"==typeof t?t:void 0===t?zM:mM(t),e="function"==typeof e?e:void 0===e?HM:mM(e),a.x=function(e){return arguments.length?(t="function"==typeof e?e:mM(+e),a):t},a.y=function(t){return arguments.length?(e="function"==typeof t?t:mM(+t),a):e},a.defined=function(t){return arguments.length?(n="function"==typeof t?t:mM(!!t),a):n},a.curve=function(t){return arguments.length?(r=t,null!=i&&(o=r(i)),a):r},a.context=function(t){return arguments.length?(null==t?i=o=null:o=r(i=t),a):i},a}function WM(t,e,n){var i=null,r=mM(!0),o=null,a=BM,s=null;function l(l){var u,c,h,d,f,p=(l=jM(l)).length,m=!1,g=new Array(p),v=new Array(p);for(null==o&&(s=a(f=Nr())),u=0;u<=p;++u){if(!(u<p&&r(d=l[u],u,l))===m)if(m=!m)c=u,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),h=u-1;h>=c;--h)s.point(g[h],v[h]);s.lineEnd(),s.areaEnd()}m&&(g[u]=+t(d,u,l),v[u]=+e(d,u,l),s.point(i?+i(d,u,l):g[u],n?+n(d,u,l):v[u]))}if(f)return s=null,f+""||null}function u(){return GM().defined(r).curve(a).context(o)}return t="function"==typeof t?t:void 0===t?zM:mM(+t),e="function"==typeof e?e:mM(void 0===e?0:+e),n="function"==typeof n?n:void 0===n?HM:mM(+n),l.x=function(e){return arguments.length?(t="function"==typeof e?e:mM(+e),i=null,l):t},l.x0=function(e){return arguments.length?(t="function"==typeof e?e:mM(+e),l):t},l.x1=function(t){return arguments.length?(i=null==t?null:"function"==typeof t?t:mM(+t),l):i},l.y=function(t){return arguments.length?(e="function"==typeof t?t:mM(+t),n=null,l):e},l.y0=function(t){return arguments.length?(e="function"==typeof t?t:mM(+t),l):e},l.y1=function(t){return arguments.length?(n=null==t?null:"function"==typeof t?t:mM(+t),l):n},l.lineX0=l.lineY0=function(){return u().x(t).y(e)},l.lineY1=function(){return u().x(t).y(n)},l.lineX1=function(){return u().x(i).y(e)},l.defined=function(t){return arguments.length?(r="function"==typeof t?t:mM(!!t),l):r},l.curve=function(t){return arguments.length?(a=t,null!=o&&(s=a(o)),l):a},l.context=function(t){return arguments.length?(null==t?o=s=null:s=a(o=t),l):o},l}function UM(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function VM(t){return t}function XM(){var t=VM,e=UM,n=null,i=mM(0),r=mM(kM),o=mM(0);function a(a){var s,l,u,c,h,d=(a=jM(a)).length,f=0,p=new Array(d),m=new Array(d),g=+i.apply(this,arguments),v=Math.min(kM,Math.max(-kM,r.apply(this,arguments)-g)),y=Math.min(Math.abs(v)/d,o.apply(this,arguments)),b=y*(v<0?-1:1);for(s=0;s<d;++s)(h=m[p[s]=s]=+t(a[s],s,a))>0&&(f+=h);for(null!=e?p.sort((function(t,n){return e(m[t],m[n])})):null!=n&&p.sort((function(t,e){return n(a[t],a[e])})),s=0,u=f?(v-d*b)/f:0;s<d;++s,g=c)l=p[s],c=g+((h=m[l])>0?h*u:0)+b,m[l]={data:a[l],index:s,value:h,startAngle:g,endAngle:c,padAngle:y};return m}return a.value=function(e){return arguments.length?(t="function"==typeof e?e:mM(+e),a):t},a.sortValues=function(t){return arguments.length?(e=t,n=null,a):e},a.sort=function(t){return arguments.length?(n=t,e=null,a):n},a.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:mM(+t),a):i},a.endAngle=function(t){return arguments.length?(r="function"==typeof t?t:mM(+t),a):r},a.padAngle=function(t){return arguments.length?(o="function"==typeof t?t:mM(+t),a):o},a}FM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var qM=$M(BM);function KM(t){this._curve=t}function $M(t){function e(e){return new KM(t(e))}return e._curve=t,e}function ZM(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?e($M(t)):e()._curve},t}function JM(){return ZM(GM().curve(qM))}function QM(){var t=WM().curve(qM),e=t.curve,n=t.lineX0,i=t.lineX1,r=t.lineY0,o=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return ZM(n())},delete t.lineX0,t.lineEndAngle=function(){return ZM(i())},delete t.lineX1,t.lineInnerRadius=function(){return ZM(r())},delete t.lineY0,t.lineOuterRadius=function(){return ZM(o())},delete t.lineY1,t.curve=function(t){return arguments.length?e($M(t)):e()._curve},t}function tE(t,e){return[(e=+e)*Math.cos(t-=Math.PI/2),e*Math.sin(t)]}function eE(t){return t.source}function nE(t){return t.target}function iE(t){var e=eE,n=nE,i=zM,r=HM,o=null;function a(){var a,s=YM.call(arguments),l=e.apply(this,s),u=n.apply(this,s);if(o||(o=a=Nr()),t(o,+i.apply(this,(s[0]=l,s)),+r.apply(this,s),+i.apply(this,(s[0]=u,s)),+r.apply(this,s)),a)return o=null,a+""||null}return a.source=function(t){return arguments.length?(e=t,a):e},a.target=function(t){return arguments.length?(n=t,a):n},a.x=function(t){return arguments.length?(i="function"==typeof t?t:mM(+t),a):i},a.y=function(t){return arguments.length?(r="function"==typeof t?t:mM(+t),a):r},a.context=function(t){return arguments.length?(o=null==t?null:t,a):o},a}function rE(t,e,n,i,r){t.moveTo(e,n),t.bezierCurveTo(e=(e+i)/2,n,e,r,i,r)}function oE(t,e,n,i,r){t.moveTo(e,n),t.bezierCurveTo(e,n=(n+r)/2,i,n,i,r)}function aE(t,e,n,i,r){var o=tE(e,n),a=tE(e,n=(n+r)/2),s=tE(i,n),l=tE(i,r);t.moveTo(o[0],o[1]),t.bezierCurveTo(a[0],a[1],s[0],s[1],l[0],l[1])}function sE(){return iE(rE)}function lE(){return iE(oE)}function uE(){var t=iE(aE);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t}KM.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};const cE={draw:function(t,e){var n=Math.sqrt(e/EM);t.moveTo(n,0),t.arc(0,0,n,0,kM)}},hE={draw:function(t,e){var n=Math.sqrt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}};var dE=Math.sqrt(1/3),fE=2*dE;const pE={draw:function(t,e){var n=Math.sqrt(e/fE),i=n*dE;t.moveTo(0,-n),t.lineTo(i,0),t.lineTo(0,n),t.lineTo(-i,0),t.closePath()}};var mE=Math.sin(EM/10)/Math.sin(7*EM/10),gE=Math.sin(kM/10)*mE,vE=-Math.cos(kM/10)*mE;const yE={draw:function(t,e){var n=Math.sqrt(.8908130915292852*e),i=gE*n,r=vE*n;t.moveTo(0,-n),t.lineTo(i,r);for(var o=1;o<5;++o){var a=kM*o/5,s=Math.cos(a),l=Math.sin(a);t.lineTo(l*n,-s*n),t.lineTo(s*i-l*r,l*i+s*r)}t.closePath()}},bE={draw:function(t,e){var n=Math.sqrt(e),i=-n/2;t.rect(i,i,n,n)}};var _E=Math.sqrt(3);const wE={draw:function(t,e){var n=-Math.sqrt(e/(3*_E));t.moveTo(0,2*n),t.lineTo(-_E*n,-n),t.lineTo(_E*n,-n),t.closePath()}};var xE=-.5,ME=Math.sqrt(3)/2,EE=1/Math.sqrt(12),SE=3*(EE/2+1);const kE={draw:function(t,e){var n=Math.sqrt(e/SE),i=n/2,r=n*EE,o=i,a=n*EE+n,s=-o,l=a;t.moveTo(i,r),t.lineTo(o,a),t.lineTo(s,l),t.lineTo(xE*i-ME*r,ME*i+xE*r),t.lineTo(xE*o-ME*a,ME*o+xE*a),t.lineTo(xE*s-ME*l,ME*s+xE*l),t.lineTo(xE*i+ME*r,xE*r-ME*i),t.lineTo(xE*o+ME*a,xE*a-ME*o),t.lineTo(xE*s+ME*l,xE*l-ME*s),t.closePath()}};var CE=[cE,hE,pE,bE,yE,wE,kE];function TE(t,e){var n=null;function i(){var i;if(n||(n=i=Nr()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),i)return n=null,i+""||null}return t="function"==typeof t?t:mM(t||cE),e="function"==typeof e?e:mM(void 0===e?64:+e),i.type=function(e){return arguments.length?(t="function"==typeof e?e:mM(e),i):t},i.size=function(t){return arguments.length?(e="function"==typeof t?t:mM(+t),i):e},i.context=function(t){return arguments.length?(n=null==t?null:t,i):n},i}function DE(){}function LE(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function AE(t){this._context=t}function OE(t){return new AE(t)}function PE(t){this._context=t}function IE(t){return new PE(t)}function NE(t){this._context=t}function RE(t){return new NE(t)}AE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:LE(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:LE(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},PE.prototype={areaStart:DE,areaEnd:DE,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:LE(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},NE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:LE(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};class YE{constructor(t,e){this._context=t,this._x=e}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,e,t,e):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+e)/2,t,this._y0,t,e)}this._x0=t,this._y0=e}}function jE(t){return new YE(t,!0)}function FE(t){return new YE(t,!1)}function BE(t,e){this._basis=new AE(t),this._beta=e}BE.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var i,r=t[0],o=e[0],a=t[n]-r,s=e[n]-o,l=-1;++l<=n;)i=l/n,this._basis.point(this._beta*t[l]+(1-this._beta)*(r+i*a),this._beta*e[l]+(1-this._beta)*(o+i*s));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const zE=function t(e){function n(t){return 1===e?new AE(t):new BE(t,e)}return n.beta=function(e){return t(+e)},n}(.85);function HE(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function GE(t,e){this._context=t,this._k=(1-e)/6}GE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:HE(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:HE(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const WE=function t(e){function n(t){return new GE(t,e)}return n.tension=function(e){return t(+e)},n}(0);function UE(t,e){this._context=t,this._k=(1-e)/6}UE.prototype={areaStart:DE,areaEnd:DE,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:HE(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const VE=function t(e){function n(t){return new UE(t,e)}return n.tension=function(e){return t(+e)},n}(0);function XE(t,e){this._context=t,this._k=(1-e)/6}XE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:HE(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const qE=function t(e){function n(t){return new XE(t,e)}return n.tension=function(e){return t(+e)},n}(0);function KE(t,e,n){var i=t._x1,r=t._y1,o=t._x2,a=t._y2;if(t._l01_a>MM){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);i=(i*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,r=(r*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>MM){var u=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,c=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*u+t._x1*t._l23_2a-e*t._l12_2a)/c,a=(a*u+t._y1*t._l23_2a-n*t._l12_2a)/c}t._context.bezierCurveTo(i,r,o,a,t._x2,t._y2)}function $E(t,e){this._context=t,this._alpha=e}$E.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:KE(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const ZE=function t(e){function n(t){return e?new $E(t,e):new GE(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function JE(t,e){this._context=t,this._alpha=e}JE.prototype={areaStart:DE,areaEnd:DE,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:KE(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const QE=function t(e){function n(t){return e?new JE(t,e):new UE(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function tS(t,e){this._context=t,this._alpha=e}tS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:KE(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const eS=function t(e){function n(t){return e?new tS(t,e):new XE(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function nS(t){this._context=t}function iS(t){return new nS(t)}function rS(t){return t<0?-1:1}function oS(t,e,n){var i=t._x1-t._x0,r=e-t._x1,o=(t._y1-t._y0)/(i||r<0&&-0),a=(n-t._y1)/(r||i<0&&-0),s=(o*r+a*i)/(i+r);return(rS(o)+rS(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function aS(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function sS(t,e,n){var i=t._x0,r=t._y0,o=t._x1,a=t._y1,s=(o-i)/3;t._context.bezierCurveTo(i+s,r+s*e,o-s,a-s*n,o,a)}function lS(t){this._context=t}function uS(t){this._context=new cS(t)}function cS(t){this._context=t}function hS(t){return new lS(t)}function dS(t){return new uS(t)}function fS(t){this._context=t}function pS(t){var e,n,i=t.length-1,r=new Array(i),o=new Array(i),a=new Array(i);for(r[0]=0,o[0]=2,a[0]=t[0]+2*t[1],e=1;e<i-1;++e)r[e]=1,o[e]=4,a[e]=4*t[e]+2*t[e+1];for(r[i-1]=2,o[i-1]=7,a[i-1]=8*t[i-1]+t[i],e=1;e<i;++e)n=r[e]/o[e-1],o[e]-=n,a[e]-=n*a[e-1];for(r[i-1]=a[i-1]/o[i-1],e=i-2;e>=0;--e)r[e]=(a[e]-r[e+1])/o[e];for(o[i-1]=(t[i]+r[i-1])/2,e=0;e<i-1;++e)o[e]=2*t[e+1]-r[e+1];return[r,o]}function mS(t){return new fS(t)}function gS(t,e){this._context=t,this._t=e}function vS(t){return new gS(t,.5)}function yS(t){return new gS(t,0)}function bS(t){return new gS(t,1)}function _S(t,e){if((r=t.length)>1)for(var n,i,r,o=1,a=t[e[0]],s=a.length;o<r;++o)for(i=a,a=t[e[o]],n=0;n<s;++n)a[n][1]+=a[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function wS(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function xS(t,e){return t[e]}function MS(t){const e=[];return e.key=t,e}function ES(){var t=mM([]),e=wS,n=_S,i=xS;function r(r){var o,a,s=Array.from(t.apply(this,arguments),MS),l=s.length,u=-1;for(const t of r)for(o=0,++u;o<l;++o)(s[o][u]=[0,+i(t,s[o].key,u,r)]).data=t;for(o=0,a=jM(e(s));o<l;++o)s[a[o]].index=o;return n(s,a),s}return r.keys=function(e){return arguments.length?(t="function"==typeof e?e:mM(Array.from(e)),r):t},r.value=function(t){return arguments.length?(i="function"==typeof t?t:mM(+t),r):i},r.order=function(t){return arguments.length?(e=null==t?wS:"function"==typeof t?t:mM(Array.from(t)),r):e},r.offset=function(t){return arguments.length?(n=null==t?_S:t,r):n},r}function SS(t,e){if((i=t.length)>0){for(var n,i,r,o=0,a=t[0].length;o<a;++o){for(r=n=0;n<i;++n)r+=t[n][o][1]||0;if(r)for(n=0;n<i;++n)t[n][o][1]/=r}_S(t,e)}}function kS(t,e){if((s=t.length)>0)for(var n,i,r,o,a,s,l=0,u=t[e[0]].length;l<u;++l)for(o=a=0,n=0;n<s;++n)(r=(i=t[e[n]][l])[1]-i[0])>0?(i[0]=o,i[1]=o+=r):r<0?(i[1]=a,i[0]=a+=r):(i[0]=0,i[1]=r)}function CS(t,e){if((n=t.length)>0){for(var n,i=0,r=t[e[0]],o=r.length;i<o;++i){for(var a=0,s=0;a<n;++a)s+=t[a][i][1]||0;r[i][1]+=r[i][0]=-s/2}_S(t,e)}}function TS(t,e){if((r=t.length)>0&&(i=(n=t[e[0]]).length)>0){for(var n,i,r,o=0,a=1;a<i;++a){for(var s=0,l=0,u=0;s<r;++s){for(var c=t[e[s]],h=c[a][1]||0,d=(h-(c[a-1][1]||0))/2,f=0;f<s;++f){var p=t[e[f]];d+=(p[a][1]||0)-(p[a-1][1]||0)}l+=h,u+=d*h}n[a-1][1]+=n[a-1][0]=o,l&&(o-=u/l)}n[a-1][1]+=n[a-1][0]=o,_S(t,e)}}function DS(t){var e=t.map(LS);return wS(t).sort((function(t,n){return e[t]-e[n]}))}function LS(t){for(var e,n=-1,i=0,r=t.length,o=-1/0;++n<r;)(e=+t[n][1])>o&&(o=e,i=n);return i}function AS(t){var e=t.map(OS);return wS(t).sort((function(t,n){return e[t]-e[n]}))}function OS(t){for(var e,n=0,i=-1,r=t.length;++i<r;)(e=+t[i][1])&&(n+=e);return n}function PS(t){return AS(t).reverse()}function IS(t){var e,n,i=t.length,r=t.map(OS),o=DS(t),a=0,s=0,l=[],u=[];for(e=0;e<i;++e)n=o[e],a<s?(a+=r[n],l.push(n)):(s+=r[n],u.push(n));return u.reverse().concat(l)}function NS(t){return wS(t).reverse()}nS.prototype={areaStart:DE,areaEnd:DE,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}},lS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:sS(this,this._t0,aS(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,sS(this,aS(this,n=oS(this,t,e)),n);break;default:sS(this,this._t0,n=oS(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(uS.prototype=Object.create(lS.prototype)).point=function(t,e){lS.prototype.point.call(this,e,t)},cS.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,r,o){this._context.bezierCurveTo(e,t,i,n,o,r)}},fS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var i=pS(t),r=pS(e),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(i[0][o],r[0][o],i[1][o],r[1][o],t[a],e[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}},gS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}};var RS="%Y-%m-%dT%H:%M:%S.%LZ";var YS=Date.prototype.toISOString?function(t){return t.toISOString()}:Ob(RS);const jS=YS;var FS=+new Date("2000-01-01T00:00:00.000Z")?function(t){var e=new Date(t);return isNaN(e)?null:e}:Pb(RS);const BS=FS;function zS(t,e,n){var i=new au;return e=null==e?0:+e,i.restart((n=>{i.stop(),t(n+e)}),e,n),i}function HS(t,e,n){var i=new au,r=e;return null==e?(i.restart(t,e,n),i):(i._restart=i.restart,i.restart=function(t,e,n){e=+e,n=null==n?ru():+n,i._restart((function o(a){a+=r,i._restart(o,r+=e,n),t(a)}),e,n)},i.restart(t,e,n),i)}var GS=Math.SQRT2;function WS(t){return((t=Math.exp(t))+1/t)/2}function US(t,e){var n,i,r=t[0],o=t[1],a=t[2],s=e[0],l=e[1],u=e[2],c=s-r,h=l-o,d=c*c+h*h;if(d<1e-12)i=Math.log(u/a)/GS,n=function(t){return[r+t*c,o+t*h,a*Math.exp(GS*t*i)]};else{var f=Math.sqrt(d),p=(u*u-a*a+4*d)/(2*a*2*f),m=(u*u-a*a-4*d)/(2*u*2*f),g=Math.log(Math.sqrt(p*p+1)-p),v=Math.log(Math.sqrt(m*m+1)-m);i=(v-g)/GS,n=function(t){var e=t*i,n=WS(g),s=a/(2*f)*(n*function(t){return((t=Math.exp(2*t))-1)/(t+1)}(GS*e+g)-function(t){return((t=Math.exp(t))-1/t)/2}(g));return[r+s*c,o+s*h,a*n/WS(GS*e+g)]}}return n.duration=1e3*i,n}const VS=t=>()=>t;function XS(t,{sourceEvent:e,target:n,transform:i,dispatch:r}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:r}})}function qS(t,e,n){this.k=t,this.x=e,this.y=n}qS.prototype={constructor:qS,scale:function(t){return 1===t?this:new qS(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new qS(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var KS=new qS(1,0,0);function $S(t){for(;!t.__zoom;)if(!(t=t.parentNode))return KS;return t.__zoom}function ZS(t){t.stopImmediatePropagation()}function JS(t){t.preventDefault(),t.stopImmediatePropagation()}function QS(t){return!(t.ctrlKey&&"wheel"!==t.type||t.button)}function tk(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function ek(){return this.__zoom||KS}function nk(t){return-t.deltaY*(1===t.deltaMode?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function ik(){return navigator.maxTouchPoints||"ontouchstart"in this}function rk(t,e,n){var i=t.invertX(e[0][0])-n[0][0],r=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],a=t.invertY(e[1][1])-n[1][1];return t.translate(r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}function ok(){var t,e,n,i=QS,r=tk,o=rk,a=nk,s=ik,l=[0,1/0],u=[[-1/0,-1/0],[1/0,1/0]],c=250,h=US,d=(0,ae.Z)("start","zoom","end"),f=500,p=0,m=10;function g(t){t.property("__zoom",ek).on("wheel.zoom",M,{passive:!1}).on("mousedown.zoom",E).on("dblclick.zoom",S).filter(s).on("touchstart.zoom",k).on("touchmove.zoom",C).on("touchend.zoom touchcancel.zoom",T).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function v(t,e){return(e=Math.max(l[0],Math.min(l[1],e)))===t.k?t:new qS(e,t.x,t.y)}function y(t,e,n){var i=e[0]-n[0]*t.k,r=e[1]-n[1]*t.k;return i===t.x&&r===t.y?t:new qS(t.k,i,r)}function b(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function _(t,e,n,i){t.on("start.zoom",(function(){w(this,arguments).event(i).start()})).on("interrupt.zoom end.zoom",(function(){w(this,arguments).event(i).end()})).tween("zoom",(function(){var t=this,o=arguments,a=w(t,o).event(i),s=r.apply(t,o),l=null==n?b(s):"function"==typeof n?n.apply(t,o):n,u=Math.max(s[1][0]-s[0][0],s[1][1]-s[0][1]),c=t.__zoom,d="function"==typeof e?e.apply(t,o):e,f=h(c.invert(l).concat(u/c.k),d.invert(l).concat(u/d.k));return function(t){if(1===t)t=d;else{var e=f(t),n=u/e[2];t=new qS(n,l[0]-e[0]*n,l[1]-e[1]*n)}a.zoom(null,t)}}))}function w(t,e,n){return!n&&t.__zooming||new x(t,e)}function x(t,e){this.that=t,this.args=e,this.active=0,this.sourceEvent=null,this.extent=r.apply(t,e),this.taps=0}function M(t,...e){if(i.apply(this,arguments)){var n=w(this,e).event(t),r=this.__zoom,s=Math.max(l[0],Math.min(l[1],r.k*Math.pow(2,a.apply(this,arguments)))),c=On(t);if(n.wheel)n.mouse[0][0]===c[0]&&n.mouse[0][1]===c[1]||(n.mouse[1]=r.invert(n.mouse[0]=c)),clearTimeout(n.wheel);else{if(r.k===s)return;n.mouse=[c,r.invert(c)],zn(this),n.start()}JS(t),n.wheel=setTimeout(h,150),n.zoom("mouse",o(y(v(r,s),n.mouse[0],n.mouse[1]),n.extent,u))}function h(){n.wheel=null,n.end()}}function E(t,...e){if(!n&&i.apply(this,arguments)){var r=t.currentTarget,a=w(this,e,!0).event(t),s=Mn(t.view).on("mousemove.zoom",d,!0).on("mouseup.zoom",f,!0),l=On(t,r),c=t.clientX,h=t.clientY;Tn(t.view),ZS(t),a.mouse=[l,this.__zoom.invert(l)],zn(this),a.start()}function d(t){if(JS(t),!a.moved){var e=t.clientX-c,n=t.clientY-h;a.moved=e*e+n*n>p}a.event(t).zoom("mouse",o(y(a.that.__zoom,a.mouse[0]=On(t,r),a.mouse[1]),a.extent,u))}function f(t){s.on("mousemove.zoom mouseup.zoom",null),Dn(t.view,a.moved),JS(t),a.event(t).end()}}function S(t,...e){if(i.apply(this,arguments)){var n=this.__zoom,a=On(t.changedTouches?t.changedTouches[0]:t,this),s=n.invert(a),l=n.k*(t.shiftKey?.5:2),h=o(y(v(n,l),a,s),r.apply(this,e),u);JS(t),c>0?Mn(this).transition().duration(c).call(_,h,a,t):Mn(this).call(g.transform,h,a,t)}}function k(n,...r){if(i.apply(this,arguments)){var o,a,s,l,u=n.touches,c=u.length,h=w(this,r,n.changedTouches.length===c).event(n);for(ZS(n),a=0;a<c;++a)l=[l=On(s=u[a],this),this.__zoom.invert(l),s.identifier],h.touch0?h.touch1||h.touch0[2]===l[2]||(h.touch1=l,h.taps=0):(h.touch0=l,o=!0,h.taps=1+!!t);t&&(t=clearTimeout(t)),o&&(h.taps<2&&(e=l[0],t=setTimeout((function(){t=null}),f)),zn(this),h.start())}}function C(t,...e){if(this.__zooming){var n,i,r,a,s=w(this,e).event(t),l=t.changedTouches,c=l.length;for(JS(t),n=0;n<c;++n)r=On(i=l[n],this),s.touch0&&s.touch0[2]===i.identifier?s.touch0[0]=r:s.touch1&&s.touch1[2]===i.identifier&&(s.touch1[0]=r);if(i=s.that.__zoom,s.touch1){var h=s.touch0[0],d=s.touch0[1],f=s.touch1[0],p=s.touch1[1],m=(m=f[0]-h[0])*m+(m=f[1]-h[1])*m,g=(g=p[0]-d[0])*g+(g=p[1]-d[1])*g;i=v(i,Math.sqrt(m/g)),r=[(h[0]+f[0])/2,(h[1]+f[1])/2],a=[(d[0]+p[0])/2,(d[1]+p[1])/2]}else{if(!s.touch0)return;r=s.touch0[0],a=s.touch0[1]}s.zoom("touch",o(y(i,r,a),s.extent,u))}}function T(t,...i){if(this.__zooming){var r,o,a=w(this,i).event(t),s=t.changedTouches,l=s.length;for(ZS(t),n&&clearTimeout(n),n=setTimeout((function(){n=null}),f),r=0;r<l;++r)o=s[r],a.touch0&&a.touch0[2]===o.identifier?delete a.touch0:a.touch1&&a.touch1[2]===o.identifier&&delete a.touch1;if(a.touch1&&!a.touch0&&(a.touch0=a.touch1,delete a.touch1),a.touch0)a.touch0[1]=this.__zoom.invert(a.touch0[0]);else if(a.end(),2===a.taps&&(o=On(o,this),Math.hypot(e[0]-o[0],e[1]-o[1])<m)){var u=Mn(this).on("dblclick.zoom");u&&u.apply(this,arguments)}}}return g.transform=function(t,e,n,i){var r=t.selection?t.selection():t;r.property("__zoom",ek),t!==r?_(t,e,n,i):r.interrupt().each((function(){w(this,arguments).event(i).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()}))},g.scaleBy=function(t,e,n,i){g.scaleTo(t,(function(){var t=this.__zoom.k,n="function"==typeof e?e.apply(this,arguments):e;return t*n}),n,i)},g.scaleTo=function(t,e,n,i){g.transform(t,(function(){var t=r.apply(this,arguments),i=this.__zoom,a=null==n?b(t):"function"==typeof n?n.apply(this,arguments):n,s=i.invert(a),l="function"==typeof e?e.apply(this,arguments):e;return o(y(v(i,l),a,s),t,u)}),n,i)},g.translateBy=function(t,e,n,i){g.transform(t,(function(){return o(this.__zoom.translate("function"==typeof e?e.apply(this,arguments):e,"function"==typeof n?n.apply(this,arguments):n),r.apply(this,arguments),u)}),null,i)},g.translateTo=function(t,e,n,i,a){g.transform(t,(function(){var t=r.apply(this,arguments),a=this.__zoom,s=null==i?b(t):"function"==typeof i?i.apply(this,arguments):i;return o(KS.translate(s[0],s[1]).scale(a.k).translate("function"==typeof e?-e.apply(this,arguments):-e,"function"==typeof n?-n.apply(this,arguments):-n),t,u)}),i,a)},x.prototype={event:function(t){return t&&(this.sourceEvent=t),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(t){var e=Mn(this.that).datum();d.call(t,this.that,new XS(t,{sourceEvent:this.sourceEvent,target:g,type:t,transform:this.that.__zoom,dispatch:d}),e)}},g.wheelDelta=function(t){return arguments.length?(a="function"==typeof t?t:VS(+t),g):a},g.filter=function(t){return arguments.length?(i="function"==typeof t?t:VS(!!t),g):i},g.touchable=function(t){return arguments.length?(s="function"==typeof t?t:VS(!!t),g):s},g.extent=function(t){return arguments.length?(r="function"==typeof t?t:VS([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),g):r},g.scaleExtent=function(t){return arguments.length?(l[0]=+t[0],l[1]=+t[1],g):[l[0],l[1]]},g.translateExtent=function(t){return arguments.length?(u[0][0]=+t[0][0],u[1][0]=+t[1][0],u[0][1]=+t[0][1],u[1][1]=+t[1][1],g):[[u[0][0],u[0][1]],[u[1][0],u[1][1]]]},g.constrain=function(t){return arguments.length?(o=t,g):o},g.duration=function(t){return arguments.length?(c=+t,g):c},g.interpolate=function(t){return arguments.length?(h=t,g):h},g.on=function(){var t=d.on.apply(d,arguments);return t===d?g:t},g.clickDistance=function(t){return arguments.length?(p=(t=+t)*t,g):Math.sqrt(p)},g.tapDistance=function(t){return arguments.length?(m=+t,g):m},g}$S.prototype=qS.prototype}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var o=e[i]={id:i,loaded:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t);var r={};(()=>{"use strict";n.r(r),n.d(r,{default:()=>e});var t=n(55431);const e=n.n(t)()})(),(G6Network=void 0===G6Network?{}:G6Network).app=r})();