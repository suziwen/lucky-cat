/*! For license information please see app.js.LICENSE.txt */
var G6Decision;(()=>{var e,t,n={62238:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){var n=e.nodes,r=e.edges,i=[],o={};if(!n)throw new Error("invalid nodes data!");return n&&n.forEach((function(e,t){o[e.id]=t;i.push([])})),r&&r.forEach((function(e){var n=e.source,r=e.target,a=o[n],s=o[r];!a&&0!==a||!s&&0!==s||(i[a][s]=1,t||(i[s][a]=1))})),i};t.default=n},10369:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getAdjMatrixAsync",{enumerable:!0,get:function(){return r.getAdjMatrixAsync}}),Object.defineProperty(t,"connectedComponentAsync",{enumerable:!0,get:function(){return r.connectedComponentAsync}}),Object.defineProperty(t,"getDegreeAsync",{enumerable:!0,get:function(){return r.getDegreeAsync}}),Object.defineProperty(t,"getInDegreeAsync",{enumerable:!0,get:function(){return r.getInDegreeAsync}}),Object.defineProperty(t,"getOutDegreeAsync",{enumerable:!0,get:function(){return r.getOutDegreeAsync}}),Object.defineProperty(t,"detectCycleAsync",{enumerable:!0,get:function(){return r.detectCycleAsync}}),Object.defineProperty(t,"detectAllCyclesAsync",{enumerable:!0,get:function(){return r.detectAllCyclesAsync}}),Object.defineProperty(t,"detectAllDirectedCycleAsync",{enumerable:!0,get:function(){return r.detectAllDirectedCycleAsync}}),Object.defineProperty(t,"detectAllUndirectedCycleAsync",{enumerable:!0,get:function(){return r.detectAllUndirectedCycleAsync}}),Object.defineProperty(t,"dijkstraAsync",{enumerable:!0,get:function(){return r.dijkstraAsync}}),Object.defineProperty(t,"findAllPathAsync",{enumerable:!0,get:function(){return r.findAllPathAsync}}),Object.defineProperty(t,"findShortestPathAsync",{enumerable:!0,get:function(){return r.findShortestPathAsync}}),Object.defineProperty(t,"floydWarshallAsync",{enumerable:!0,get:function(){return r.floydWarshallAsync}}),Object.defineProperty(t,"labelPropagationAsync",{enumerable:!0,get:function(){return r.labelPropagationAsync}}),Object.defineProperty(t,"louvainAsync",{enumerable:!0,get:function(){return r.louvainAsync}}),Object.defineProperty(t,"minimumSpanningTreeAsync",{enumerable:!0,get:function(){return r.minimumSpanningTreeAsync}}),Object.defineProperty(t,"pageRankAsync",{enumerable:!0,get:function(){return r.pageRankAsync}}),Object.defineProperty(t,"getNeighborsAsync",{enumerable:!0,get:function(){return r.getNeighborsAsync}}),Object.defineProperty(t,"GADDIAsync",{enumerable:!0,get:function(){return r.GADDIAsync}}),t.default=t.detectDirectedCycleAsync=void 0;var r=n(30485),i=r.detectCycleAsync;t.detectDirectedCycleAsync=i;var o={getAdjMatrixAsync:r.getAdjMatrixAsync,connectedComponentAsync:r.connectedComponentAsync,getDegreeAsync:r.getDegreeAsync,getInDegreeAsync:r.getInDegreeAsync,getOutDegreeAsync:r.getOutDegreeAsync,detectCycleAsync:r.detectCycleAsync,detectDirectedCycleAsync:i,detectAllCyclesAsync:r.detectAllCyclesAsync,detectAllDirectedCycleAsync:r.detectAllDirectedCycleAsync,detectAllUndirectedCycleAsync:r.detectAllUndirectedCycleAsync,dijkstraAsync:r.dijkstraAsync,findAllPathAsync:r.findAllPathAsync,findShortestPathAsync:r.findShortestPathAsync,floydWarshallAsync:r.floydWarshallAsync,labelPropagationAsync:r.labelPropagationAsync,louvainAsync:r.louvainAsync,minimumSpanningTreeAsync:r.minimumSpanningTreeAsync,pageRankAsync:r.pageRankAsync,getNeighborsAsync:r.getNeighborsAsync,GADDIAsync:r.GADDIAsync};t.default=o},83764:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(93026))&&r.__esModule?r:{default:r},o=n(70643);var a=function(e,t,n,r){void 0===r&&(r=!0);var a=function(e){void 0===e&&(e={});var t,n=e,r=function(){},i=(t={},function(e){var n=e.next;return!t[n]&&(t[n]=!0,!0)});return n.allowTraversal=e.allowTraversal||i,n.enter=e.enter||r,n.leave=e.leave||r,n}(n),s=new i.default,l=e.edges,u=void 0===l?[]:l;s.enqueue(t);for(var c="",d=function(){var e=s.dequeue();a.enter({current:e,previous:c}),(0,o.getNeighbors)(e,u,r?"target":void 0).forEach((function(t){a.allowTraversal({previous:c,current:e,next:t})&&s.enqueue(t)})),a.leave({current:e,previous:c}),c=e};!s.isEmpty();)d()};t.default=a},59527:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return t?o(e):i(e)},t.detectStrongConnectComponents=t.detectConnectedComponents=void 0;var r=n(70643),i=function(e){for(var t=e.nodes,n=void 0===t?[]:t,i=e.edges,o=void 0===i?[]:i,a=[],s={},l=[],u=function e(t){l.push(t),s[t.id]=!0;for(var i=(0,r.getNeighbors)(t.id,o),a=function(t){var r=i[t];if(!s[r]){var o=n.filter((function(e){return e.id===r}));o.length>0&&e(o[0])}},u=0;u<i.length;++u)a(u)},c=0;c<n.length;c++){var d=n[c];if(!s[d.id]){u(d);for(var h=[];l.length>0;)h.push(l.pop());a.push(h)}}return a};t.detectConnectedComponents=i;var o=function(e){for(var t=e.nodes,n=void 0===t?[]:t,i=e.edges,o=void 0===i?[]:i,a=[],s={},l={},u={},c=[],d=0,h=function e(t){l[t.id]=d,u[t.id]=d,d+=1,a.push(t),s[t.id]=!0;for(var i=(0,r.getNeighbors)(t.id,o,"target").filter((function(e){return n.map((function(e){return e.id})).indexOf(e)>-1})),h=function(r){var o=i[r];if(l[o]||0===l[o])s[o]&&(u[t.id]=Math.min(u[t.id],l[o]));else{var a=n.filter((function(e){return e.id===o}));a.length>0&&e(a[0]),u[t.id]=Math.min(u[t.id],u[o])}},f=0;f<i.length;f++)h(f);if(u[t.id]===l[t.id]){for(var p=[];a.length>0;){var m=a.pop();if(s[m.id]=!1,p.push(m),m===t)break}p.length>0&&c.push(p)}},f=0,p=n;f<p.length;f++){var m=p[f];l[m.id]||0===l[m.id]||h(m)}return c};t.detectStrongConnectComponents=o},82556:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOutDegree=t.getInDegree=t.default=void 0;var n=function(e){var t={},n=e.nodes,r=void 0===n?[]:n,i=e.edges,o=void 0===i?[]:i;return r.forEach((function(e){t[e.id]={degree:0,inDegree:0,outDegree:0}})),o.forEach((function(e){t[e.source].degree++,t[e.source].outDegree++,t[e.target].degree++,t[e.target].inDegree++})),t},r=n;t.default=r;t.getInDegree=function(e,t){return n(e)[t]?n(e)[t].inDegree:0};t.getOutDegree=function(e,t){return n(e)[t]?n(e)[t].outDegree:0}},94282:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.detectAllCycles=t.detectAllDirectedCycle=t.detectAllUndirectedCycle=void 0;var i,o=(i=n(45891))&&i.__esModule?i:{default:i},a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}n.default=e,t&&t.set(e,n);return n}(n(59527)),s=n(70643);function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}var u=function(e,t,n){var r,i;void 0===n&&(n=!0);for(var o=[],l=0,u=(0,a.default)(e,!1);l<u.length;l++){var c=u[l];if(c.length)for(var d=c[0],h=d.id,f=[d],p=((r={})[h]=d,r),m=((i={})[h]=new Set,i);f.length>0;)for(var g=f.pop(),v=g.id,y=(0,s.getNeighbors)(v,e.edges),b=function(r){var i,a=y[r],s=e.nodes.find((function(e){return e.id===a}));if(a===v)o.push(((i={})[a]=g,i));else if(a in m){if(!m[v].has(s)){for(var l=!0,u=[s,g],c=p[v];m[a].size&&!m[a].has(c)&&(u.push(c),c!==p[c.id]);)c=p[c.id];if(u.push(c),t&&n?(l=!1,u.findIndex((function(e){return t.indexOf(e.id)>-1}))>-1&&(l=!0)):t&&!n&&u.findIndex((function(e){return t.indexOf(e.id)>-1}))>-1&&(l=!1),l){for(var d={},h=1;h<u.length;h+=1)d[u[h-1].id]=u[h];u.length&&(d[u[u.length-1].id]=u[0]),o.push(d)}m[a].add(g)}}else p[a]=g,f.push(s),m[a]=new Set([g])},_=0;_<y.length;_+=1)b(_)}return o};t.detectAllUndirectedCycle=u;var c=function(e,t,n){void 0===n&&(n=!0);for(var r=[],i=new Set,o=[],l=[],u={},c={},d=function e(a,s,c){var d=!1;if(t&&!1===n&&t.indexOf(a.id)>-1)return d;r.push(a),i.add(a);for(var h=c[a.id],f=0;f<h.length;f+=1){if((g=u[h[f]])===s){for(var p={},m=1;m<r.length;m+=1)p[r[m-1].id]=r[m];r.length&&(p[r[r.length-1].id]=r[0]),l.push(p),d=!0}else i.has(g)||e(g,s,c)&&(d=!0)}if(d)!function(e){for(var t=[e];t.length>0;){var n=t.pop();i.has(n)&&(i.delete(n),o[n.id].forEach((function(e){t.push(e)})),o[n.id].clear())}}(a);else for(f=0;f<h.length;f+=1){var g=u[h[f]];o[g.id].has(a)||o[g.id].add(a)}return r.pop(),d},h=e.nodes,f=void 0===h?[]:h,p=0;p<f.length;p+=1){var m=f[p],g=m.id;c[g]=p,u[p]=m}if(t&&n){var v=function(e){var n=t[e];c[f[e].id]=c[n],c[n]=0,u[0]=f.find((function(e){return e.id===n})),u[c[f[e].id]]=f[e]};for(p=0;p<t.length;p++)v(p)}for(var y=function(r){for(var i,o,a=1/0,u=0;u<r.length;u+=1)for(var d=r[u],h=0;h<d.length;h++){var f=c[d[h].id];f<a&&(a=f,o=u)}var p=r[o],m=[];for(u=0;u<p.length;u+=1){var g=p[u];m[g.id]=[];for(var v=0,y=(0,s.getNeighbors)(g.id,e.edges,"target").filter((function(e){return p.map((function(e){return e.id})).indexOf(e)>-1}));v<y.length;v++){var b=y[v];b!==g.id||!1===n&&t.indexOf(g.id)>-1?m[g.id].push(c[b]):l.push(((i={})[g.id]=g,i))}}return{component:p,adjList:m,minIdx:a}},b=0;b<f.length;){var _=f.filter((function(e){return c[e.id]>=b})),w=(0,a.detectStrongConnectComponents)({nodes:_,edges:e.edges}).filter((function(e){return e.length>1}));if(0===w.length)break;var x=y(w),M=x.minIdx,E=x.adjList,S=x.component;if(!(S.length>1))break;S.forEach((function(e){o[e.id]=new Set}));var k=u[M];if(t&&n&&-1===t.indexOf(k.id))return l;d(k,k,E),b=M+1}return l};t.detectAllDirectedCycle=c;t.detectAllCycles=function(e,t,n,r){return void 0===r&&(r=!0),t?c(e,n,r):u(e,n,r)};var d=function(e){var t=null,n=e.nodes,r={},i={},a={},s={};(void 0===n?[]:n).forEach((function(e){i[e.id]=e}));for(var l={enter:function(e){var n=e.current,o=e.previous;if(a[n]){t={};for(var s=n,l=o;l!==n;)t[s]=l,s=l,l=r[l];t[s]=l}else a[n]=n,delete i[n],r[n]=o},leave:function(e){var t=e.current;s[t]=t,delete a[t]},allowTraversal:function(e){var n=e.next;return!t&&!s[n]}};Object.keys(i).length;){var u=Object.keys(i)[0];(0,o.default)(e,u,l)}return t};t.default=d},45891:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){i(e,t,"",function(e){void 0===e&&(e={});var t=e,n=function(){},r=(i={},function(e){var t=e.next;return!i[t]&&(i[t]=!0,!0)});var i;return t.allowTraversal=e.allowTraversal||r,t.enter=e.enter||n,t.leave=e.leave||n,t}(n))};var r=n(70643);function i(e,t,n,o){o.enter({current:t,previous:n});var a=e.edges,s=void 0===a?[]:a;(0,r.getNeighbors)(t,s,"target").forEach((function(r){o.allowTraversal({previous:n,current:t,next:r})&&i(e,r,t,o)})),o.leave({current:t,previous:n})}},78089:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(70655),i=n(49242),o=n(70643),a=function(e,t,n,r){var i=e.nodes,a=void 0===i?[]:i,l=e.edges,u=void 0===l?[]:l,c=[],d={},h={},f={};a.forEach((function(e,n){var r=e.id;c.push(r),h[r]=1/0,r===t&&(h[r]=0)}));for(var p=a.length,m=function(e){var t=function(e,t,n){for(var r,i=1/0,o=0;o<t.length;o++){var a=t[o].id;!n[a]&&e[a]<=i&&(i=e[a],r=t[o])}return r}(h,a,d),i=t.id;if(d[i]=!0,h[i]===1/0)return"continue";(n?(0,o.getOutEdgesNodeId)(i,u):(0,o.getEdgesByNodeId)(i,u)).forEach((function(e){var n=e.target,o=e.source,a=n===i?o:n,s=r&&e[r]?e[r]:1;h[a]>h[t.id]+s?(h[a]=h[t.id]+s,f[a]=[t.id]):h[a]===h[t.id]+s&&f[a].push(t.id)}))},g=0;g<p;g++)m();f[t]=[t];var v={};for(var y in h)h[y]!==1/0&&s(t,y,f,v);var b={};for(var y in v)b[y]=v[y][0];return{length:h,path:b,allPath:v}};function s(e,t,n,o){if(e===t)return[e];if(o[t])return o[t];for(var a=[],l=0,u=n[t];l<u.length;l++){var c=s(e,u[l],n,o);if(!c)return;for(var d=0,h=c;d<h.length;d++){var f=h[d];(0,i.isArray)(f)?a.push((0,r.__spreadArray)((0,r.__spreadArray)([],f),[t])):a.push([f,t])}}return o[t]=a,o[t]}t.default=a},41727:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findAllPath=t.findShortestPath=void 0;var r,i=(r=n(78089))&&r.__esModule?r:{default:r},o=n(70643);t.findShortestPath=function(e,t,n,r,o){var a=(0,i.default)(e,t,r,o),s=a.length,l=a.path,u=a.allPath;return{length:s[n],path:l[n],allPath:u[n]}};t.findAllPath=function(e,t,n,r){var i;if(t===n)return[[t]];var a=e.edges,s=void 0===a?[]:a,l=[t],u=((i={})[t]=!0,i),c=[],d=[],h=r?(0,o.getNeighbors)(t,s,"target"):(0,o.getNeighbors)(t,s);for(c.push(h);l.length>0&&c.length>0;){var f=c[c.length-1];if(f.length){var p=f.shift();if(p&&(l.push(p),u[p]=!0,h=r?(0,o.getNeighbors)(p,s,"target"):(0,o.getNeighbors)(p,s),c.push(h.filter((function(e){return!u[e]})))),l[l.length-1]===n){var m=l.map((function(e){return e}));d.push(m);g=l.pop();u[g]=!1,c.pop()}}else{var g=l.pop();u[g]=!1,c.pop()}}return d}},75033:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(62238))&&r.__esModule?r:{default:r};var o=function(e,t){for(var n=(0,i.default)(e,t),r=[],o=n.length,a=0;a<o;a+=1){r[a]=[];for(var s=0;s<o;s+=1)a===s?r[a][s]=0:0!==n[a][s]&&n[a][s]?r[a][s]=n[a][s]:r[a][s]=1/0}for(var l=0;l<o;l+=1)for(a=0;a<o;a+=1)for(s=0;s<o;s+=1)r[a][s]>r[a][l]+r[l][s]&&(r[a][s]=r[a][l]+r[l][s]);return r};t.default=o},21146:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(49242),i=n(68575),o=function(){function e(e,t,n,r,o){this.fromNode=e,this.toNode=t,this.nodeEdgeNodeLabel={nodeLabel1:n||i.VACANT_NODE_LABEL,edgeLabel:r||i.VACANT_EDGE_LABEL,nodeLabel2:o||i.VACANT_NODE_LABEL}}return e.prototype.equalTo=function(e){return this.fromNode===e.formNode&&this.toNode===e.toNode&&this.nodeEdgeNodeLabel===e.nodeEdgeNodeLabel},e.prototype.notEqualTo=function(e){return!this.equalTo(e)},e}(),a=function(){function e(){this.rmpath=[],this.dfsEdgeList=[]}return e.prototype.equalTo=function(e){var t=this.dfsEdgeList.length;if(t!==e.length)return!1;for(var n=0;n<t;n++)if(this.dfsEdgeList[n]!==e[n])return!1;return!0},e.prototype.notEqualTo=function(e){return!this.equalTo(e)},e.prototype.pushBack=function(e,t,n,r,i){return this.dfsEdgeList.push(new o(e,t,n,r,i)),this.dfsEdgeList},e.prototype.toGraph=function(e,t){void 0===e&&(e=i.VACANT_GRAPH_ID),void 0===t&&(t=!1);var n=new i.Graph(e,!0,t);return this.dfsEdgeList.forEach((function(e){var t=e.fromNode,r=e.toNode,o=e.nodeEdgeNodeLabel,a=o.nodeLabel1,s=o.edgeLabel,l=o.nodeLabel2;a!==i.VACANT_NODE_LABEL&&n.addNode(t,a),l!==i.VACANT_NODE_LABEL&&n.addNode(r,l),a!==i.VACANT_NODE_LABEL&&l!==a&&n.addEdge(void 0,t,r,s)})),n},e.prototype.buildRmpath=function(){this.rmpath=[];for(var e=void 0,t=this.dfsEdgeList.length-1;t>=0;t--){var n=this.dfsEdgeList[t],r=n.fromNode,i=n.toNode;r<i&&(void 0===e||i===e)&&(this.rmpath.push(t),e=r)}return this.rmpath},e.prototype.getNodeNum=function(){var e={};return this.dfsEdgeList.forEach((function(t){e[t.fromNode]||(e[t.fromNode]=!0),e[t.toNode]||(e[t.toNode]=!0)})),Object.keys(e).length},e}(),s=function(){function e(e){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],e){for(;e;){var t=e.edge;this.edges.push(t),this.nodesUsed[t.from]=1,this.nodesUsed[t.to]=1,this.edgesUsed[t.id]=1,e=e.preNode}this.edges=this.edges.reverse()}}return e.prototype.hasNode=function(e){return 1===this.nodesUsed[e.id]},e.prototype.hasEdge=function(e){return 1===this.edgesUsed[e.id]},e}(),l=function(){function e(e){var t=e.graphs,n=e.minSupport,r=void 0===n?2:n,i=e.minNodeNum,o=void 0===i?1:i,s=e.maxNodeNum,l=void 0===s?4:s,u=e.top,c=void 0===u?10:u,d=e.directed,h=void 0!==d&&d,f=e.verbose,p=void 0!==f&&f;this.graphs=t,this.dfsCode=new a,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=r,this.top=c,this.directed=h,this.counter=0,this.maxNodeNum=l,this.minNodeNum=o,this.verbose=p,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return e.prototype.findForwardRootEdges=function(e,t){var n=this,r=[],i=e.nodeMap;return t.edges.forEach((function(e){(n.directed||t.label<=i[e.to].label)&&r.push(e)})),r},e.prototype.findBackwardEdge=function(e,t,n,r){if(!this.directed&&t===n)return null;for(var i=e.nodeMap,o=i[n.to].edges,a=o.length,s=0;s<a;s++){var l=o[s];if(!r.hasEdge(l)&&l.to===t.from)if(this.directed){if(i[t.from].label<i[n.to].label||i[t.from].label===i[n.to].label&&t.label<=l.label)return l}else if(t.label<l.label||t.label===l.label&&i[t.to].label<=i[n.to].label)return l}return null},e.prototype.findForwardPureEdges=function(e,t,n,r){for(var i=[],o=t.to,a=e.nodeMap[o].edges,s=a.length,l=0;l<s;l++){var u=a[l],c=e.nodeMap[u.to];n<=c.label&&!r.hasNode(c)&&i.push(u)}return i},e.prototype.findForwardRmpathEdges=function(e,t,n,r){for(var i=[],o=e.nodeMap,a=o[t.to].label,s=o[t.from].edges,l=s.length,u=0;u<l;u++){var c=s[u],d=o[c.to].label;t.to===c.to||n>d||r.hasNode(o[c.to])||(t.label<c.label||t.label===c.label&&a<=d)&&i.push(c)}return i},e.prototype.getSupport=function(e){var t={};return e.forEach((function(e){t[e.graphId]||(t[e.graphId]=!0)})),Object.keys(t).length},e.prototype.findMinLabel=function(e){var t=void 0;return Object.keys(e).forEach((function(n){var r=e[n],i=r.nodeLabel1,o=r.edgeLabel,a=r.nodeLabel2;t?(i<t.nodeLabel1||i===t.nodeLabel1&&o<t.edgeLabel||i===t.nodeLabel1&&o===t.edgeLabel&&a<t.nodeLabel2)&&(t={nodeLabel1:i,edgeLabel:o,nodeLabel2:a}):t={nodeLabel1:i,edgeLabel:o,nodeLabel2:a}})),t},e.prototype.isMin=function(){var e=this,t=this.dfsCode;if(this.verbose&&console.log("isMin checking",t),1===t.dfsEdgeList.length)return!0;var n=this.directed,r=t.toGraph(i.VACANT_GRAPH_ID,n),l=r.nodeMap,u=new a,c={};r.nodes.forEach((function(t){e.findForwardRootEdges(r,t).forEach((function(e){var n=l[e.to],i=t.label+"-"+e.label+"-"+n.label;c[i]||(c[i]={projected:[],nodeLabel1:t.label,edgeLabel:e.label,nodeLabel2:n.label});var o={graphId:r.id,edge:e,preNode:null};c[i].projected.push(o)}))}));var d=this.findMinLabel(c);if(d){u.dfsEdgeList.push(new o(0,1,d.nodeLabel1,d.edgeLabel,d.nodeLabel2));var h=d.nodeLabel1+"-"+d.edgeLabel+"-"+d.nodeLabel2;return function a(c){for(var d=u.buildRmpath(),h=u.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,f=u.dfsEdgeList[d[0]].toNode,p={},m=!1,g=0,v=n?-1:0,y=function(t){if(m)return"break";c.forEach((function(n){var i=new s(n),o=e.findBackwardEdge(r,i.edges[d[t]],i.edges[d[0]],i);o&&(p[o.label]||(p[o.label]={projected:[],edgeLabel:o.label}),p[o.label].projected.push({graphId:r.id,edge:p,preNode:n}),g=u.dfsEdgeList[d[t]].fromNode,m=!0)}))},b=d.length-1;b>v;b--){if("break"===y(b))break}if(m){var _=e.findMinLabel(p);u.dfsEdgeList.push(new o(f,g,i.VACANT_NODE_LABEL,_.edgeLabel,i.VACANT_NODE_LABEL));var w=u.dfsEdgeList.length-1;return e.dfsCode.dfsEdgeList[w]===u.dfsEdgeList[w]&&a(p[_.edgeLabel].projected)}var x={};m=!1;var M=0;c.forEach((function(t){var n=new s(t),i=e.findForwardPureEdges(r,n.edges[d[0]],h,n);i.length>0&&(m=!0,M=f,i.forEach((function(e){var n=e.label+"-"+l[e.to].label;x[n]||(x[n]={projected:[],edgeLabel:e.label,nodeLabel2:l[e.to].label}),x[n].projected.push({graphId:r.id,edge:e,preNode:t})})))}));var E=d.length,S=function(t){if(m)return"break";var n=d[t];c.forEach((function(t){var i=new s(t),o=e.findForwardRmpathEdges(r,i.edges[n],h,i);o.length>0&&(m=!0,M=u.dfsEdgeList[n].fromNode,o.forEach((function(e){var n=e.label+"-"+l[e.to].label;x[n]||(x[n]={projected:[],edgeLabel:e.label,nodeLabel2:l[e.to].label}),x[n].projected.push({graphId:r.id,edge:e,preNode:t})})))}))};for(b=0;b<E;b++){if("break"===S(b))break}if(!m)return!0;var k=e.findMinLabel(x);u.dfsEdgeList.push(new o(M,f+1,i.VACANT_NODE_LABEL,k.edgeLabel,k.nodeLabel2));var T=u.dfsEdgeList.length-1;return t.dfsEdgeList[T]===u.dfsEdgeList[T]&&a(x[k.edgeLabel+"-"+k.nodeLabel2].projected)}(c[h].projected)}},e.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var e=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push((0,r.clone)(e))}},e.prototype.subGraphMining=function(e){var t=this;if(!(this.getSupport(e)<this.minSupport)&&this.isMin()){this.report();var n=this.dfsCode.getNodeNum(),r=this.dfsCode.buildRmpath(),a=this.dfsCode.dfsEdgeList[r[0]].toNode,l=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,u={},c={};e.forEach((function(e){for(var i=t.graphs[e.graphId],o=i.nodeMap,d=new s(e),h=r.length-1;h>=0;h--){var f=t.findBackwardEdge(i,d.edges[r[h]],d.edges[r[0]],d);if(f){var p=t.dfsCode.dfsEdgeList[r[h]].fromNode+"-"+f.label;c[p]||(c[p]={projected:[],toNodeId:t.dfsCode.dfsEdgeList[r[h]].fromNode,edgeLabel:f.label}),c[p].projected.push({graphId:e.graphId,edge:f,preNode:e})}}if(!(n>=t.maxNodeNum)){t.findForwardPureEdges(i,d.edges[r[0]],l,d).forEach((function(t){var n=a+"-"+t.label+"-"+o[t.to].label;u[n]||(u[n]={projected:[],fromNodeId:a,edgeLabel:t.label,nodeLabel2:o[t.to].label}),u[n].projected.push({graphId:e.graphId,edge:t,preNode:e})}));var m=function(n){t.findForwardRmpathEdges(i,d.edges[r[n]],l,d).forEach((function(i){var a=t.dfsCode.dfsEdgeList[r[n]].fromNode+"-"+i.label+"-"+o[i.to].label;u[a]||(u[a]={projected:[],fromNodeId:t.dfsCode.dfsEdgeList[r[n]].fromNode,edgeLabel:i.label,nodeLabel2:o[i.to].label}),u[a].projected.push({graphId:e.graphId,edge:i,preNode:e})}))};for(h=0;h<r.length;h++)m(h)}})),Object.keys(c).forEach((function(e){var n=c[e],r=n.toNodeId,i=n.edgeLabel;t.dfsCode.dfsEdgeList.push(new o(a,r,"-1",i,"-1")),t.subGraphMining(c[e].projected),t.dfsCode.dfsEdgeList.pop()})),Object.keys(u).forEach((function(e){var n=u[e],r=n.fromNodeId,s=n.edgeLabel,l=n.nodeLabel2;t.dfsCode.dfsEdgeList.push(new o(r,a+1,i.VACANT_NODE_LABEL,s,l)),t.subGraphMining(u[e].projected),t.dfsCode.dfsEdgeList.pop()}))}},e.prototype.generate1EdgeFrequentSubGraphs=function(){var e=this.graphs,t=this.directed,n=this.minSupport,r=this.frequentSize1Subgraphs,i={},o={},a={},s={};return Object.keys(e).forEach((function(n){var r=e[n],l=r.nodeMap;r.nodes.forEach((function(e,r){var u=e.label,c=n+"-"+u;if(!a[c]){var d=i[u]||0;d++,i[u]=d}a[c]={graphKey:n,label:u},e.edges.forEach((function(e){var r=u,i=l[e.to].label;if(!t&&r>i){var a=i;i=r,r=a}var c=e.label,d=n+"-"+r+"-"+c+"-"+i,h=r+"-"+c+"-"+i;if(!o[h]){var f=o[h]||0;f++,o[h]=f}s[d]={graphId:n,nodeLabel1:r,edgeLabel:c,nodeLabel2:i}}))}))})),Object.keys(i).forEach((function(e){if(!(i[e]<n)){var t={nodes:[],edges:[]};t.nodes.push({id:"0",label:e}),r.push(t)}})),r},e.prototype.run=function(){var e=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var t=this.graphs,n=(this.directed,{});Object.keys(t).forEach((function(r){var i=t[r],o=i.nodeMap;i.nodes.forEach((function(t){e.findForwardRootEdges(i,t).forEach((function(e){var i=o[e.to],a=t.label+"-"+e.label+"-"+i.label;n[a]||(n[a]={projected:[],nodeLabel1:t.label,edgeLabel:e.label,nodeLabel2:i.label});var s={graphId:r,edge:e,preNode:null};n[a].projected.push(s)}))}))})),Object.keys(n).forEach((function(t){var r=n[t],i=r.projected,a=r.nodeLabel1,s=r.edgeLabel,l=r.nodeLabel2;e.dfsCode.dfsEdgeList.push(new o(0,1,a,s,l)),e.subGraphMining(i),e.dfsCode.dfsEdgeList.pop()}))}},e}(),u="cluster",c=function(e){var t=e.graphs,n=e.directed,r=void 0!==n&&n,o=e.nodeLabelProp,a=void 0===o?u:o,s=e.edgeLabelProp,c=void 0===s?u:s,d=function(e,t,n,r){var o={};return Object.keys(e).forEach((function(a,s){var l=e[a],u=new i.Graph(s,!0,t),c={};l.nodes.forEach((function(e,t){u.addNode(t,e[n]),c[e.id]=t})),l.edges.forEach((function(e,t){var n=c[e.source],i=c[e.target];u.addEdge(-1,n,i,e[r])})),u&&u.getNodeNum()&&(o[u.id]=u)})),o}(t,r,a,c),h=e.minSupport,f=e.maxNodeNum,p=e.minNodeNum,m=e.verbose,g=e.top,v=new l({graphs:d,minSupport:h,maxNodeNum:f,minNodeNum:p,top:g,verbose:m,directed:r});v.run();var y=function(e,t,n){var r=[];return e.forEach((function(e){var i={nodes:[],edges:[]};e.nodes.forEach((function(e){var n;i.nodes.push(((n={id:""+e.id})[t]=e.label,n))})),e.edges.forEach((function(e){var t;i.edges.push(((t={source:""+e.from,target:""+e.to})[n]=e.label,t))})),r.push(i)})),r}(v.frequentSubgraphs,a,c);return y};t.default=c},68575:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Graph=t.Node=t.Edge=t.AUTO_EDGE_ID=t.VACANT_GRAPH_ID=t.VACANT_NODE_LABEL=t.VACANT_EDGE_LABEL=t.VACANT_NODE_ID=t.VACANT_EDGE_ID=void 0;t.VACANT_EDGE_ID=-1;t.VACANT_NODE_ID=-1;t.VACANT_EDGE_LABEL="-1";t.VACANT_NODE_LABEL="-1";t.VACANT_GRAPH_ID=-1;t.AUTO_EDGE_ID="-1";var n=function(e,t,n,r){void 0===e&&(e=-1),void 0===t&&(t=-1),void 0===n&&(n=-1),void 0===r&&(r="-1"),this.id=e,this.from=t,this.to=n,this.label=r};t.Edge=n;var r=function(){function e(e,t){void 0===e&&(e=-1),void 0===t&&(t="-1"),this.id=e,this.label=t,this.edges=[],this.edgeMap={}}return e.prototype.addEdge=function(e){this.edges.push(e),this.edgeMap[e.id]=e},e}();t.Node=r;var i=function(){function e(e,t,n){void 0===e&&(e=-1),void 0===t&&(t=!0),void 0===n&&(n=!1),this.id=e,this.edgeIdAutoIncrease=t,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=n}return e.prototype.getNodeNum=function(){return this.nodes.length},e.prototype.addNode=function(e,t){if(!this.nodeMap[e]){var n=new r(e,t);this.nodes.push(n),this.nodeMap[e]=n,this.nodeLabelMap[t]||(this.nodeLabelMap[t]=[]),this.nodeLabelMap[t].push(e)}},e.prototype.addEdge=function(e,t,r,i){if((this.edgeIdAutoIncrease||void 0===e)&&(e=this.counter++),!(this.nodeMap[t]&&this.nodeMap[r]&&this.nodeMap[r].edgeMap[e])){var o=new n(e,t,r,i);if(this.edges.push(o),this.edgeMap[e]=o,this.nodeMap[t].addEdge(o),this.edgeLabelMap[i]||(this.edgeLabelMap[i]=[]),this.edgeLabelMap[i].push(o),!this.directed){var a=new n(e,r,t,i);this.nodeMap[r].addEdge(a),this.edgeLabelMap[i].push(a)}}},e}();t.Graph=i},82812:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(70655),i=l(n(75033)),o=l(n(21146)),a=l(n(78089)),s=n(70643);function l(e){return e&&e.__esModule?e:{default:e}}var u=function(e,t,n,r){void 0===n&&(n="cluster"),void 0===r&&(r=2);var i=[],o=e.nodes;return t.forEach((function(e,t){i.push(c(o,e,t,n,r))})),i},c=function(e,t,n,r,i){var o=[n],a=[],s={};return t.forEach((function(t,l){if(t<=i&&n!==l){o.push(l),a.push(e[l]);var u=e[l][r];s[u]?(s[u].count++,s[u].dists.push(t)):s[u]={count:1,dists:[t]}}})),Object.keys(s).forEach((function(e){s[e].dists=s[e].dists.sort((function(e,t){return e-t}))})),{nodeIdx:n,nodeId:e[n].id,nodeIdxs:o,neighbors:a,neighborNum:o.length-1,nodeLabelCountMap:s}},d=function(e,t,n,r){var i=n.nodes;return r||(r={}),Object.keys(e).forEach((function(o){var a,s;if(!r||!r[o]){r[o]={nodes:[],edges:[]};var l=e[o],u=null===(a=t[l.start])||void 0===a?void 0:a.nodeIdxs,c=null===(s=t[l.end])||void 0===s?void 0:s.nodeIdxs;if(u&&c){var d=new Set(c),h=u.filter((function(e){return d.has(e)}));if(h&&h.length){for(var f={},p=h.length,m=0;m<p;m++){var g=i[h[m]];r[o].nodes.push(g),f[g.id]=!0}n.edges.forEach((function(e){f[e.source]&&f[e.target]&&r[o].edges.push(e)}))}}}})),r},h=function(e,t,n,r){var i,o,a={};e.nodes.forEach((function(e){a[e.id]=e}));var s=0;return!(null===(i=null==t?void 0:t.edges)||void 0===i?void 0:i.length)||(null===(o=null==t?void 0:t.nodes)||void 0===o?void 0:o.length)<2?0:(e.edges.forEach((function(e){var i=a[e.source][n],o=a[e.target][n],l=null==t?void 0:t.nodes[0][n],u=null==t?void 0:t.nodes[1][n],c=null==t?void 0:t.edges[0][r];e[r]===c&&(i===l&&o===u||i===u&&o===l)&&s++})),s)},f=function(e,t){var n={},r={};return e.forEach((function(e,i){n[e.id]={idx:i,node:e,degree:0,inDegree:0,outDegree:0};var o=e[t];r[o]||(r[o]=[]),r[o].push(e)})),{nodeMap:n,nodeLabelMap:r}},p=function(e,t,n){var r={},i={};return e.forEach((function(e,o){r[""+s.uniqueId]={idx:o,edge:e};var a=e[t];i[a]||(i[a]=[]),i[a].push(e);var l=n[e.source];l&&(l.degree++,l.outDegree++);var u=n[e.target];u&&(u.degree++,u.inDegree++)})),{edgeMap:r,edgeLabelMap:i}},m=function(e,t,n){var r=t.length,i={};return t.forEach((function(t,o){for(var a=n?0:o+1,s=e[o].id,l=a;l<r;l++)if(o!==l){var u=e[l].id,c=t[l];i[s+"-"+u]=c,n||(i[u+"-"+s]=c)}})),i},g=function(e,t,n,r,i,o,a,s,l,u,c){var f,p=t.id+"-"+n.id;if(u&&u[p])return u[p];var m=c?c[p]:void 0;if(!m){var g=((f={})[p]={start:r[t.id].idx,end:r[n.id].idx,distance:i},f);m=(c=d(g,o,e,c))[p]}return h(m,a,s,l)},v=function(e,t,n,r){var i,o,a,s=null===(i=e[t])||void 0===i?void 0:i.degree,l=null===(o=e[t])||void 0===o?void 0:o.inDegree,u=null===(a=e[t])||void 0===a?void 0:a.outDegree;return void 0===e[t]&&(s=1/0,l=1/0,u=1/0,r[t].forEach((function(e){var t=n[e.id].degree;s>t&&(s=t);var r=n[e.id].inDegree;l>r&&(l=r);var i=n[e.id].outDegree;u>i&&(u=i)})),e[t]={degree:s,inDegree:l,outDegree:u}),{minPatternNodeLabelDegree:s,minPatternNodeLabelInDegree:l,minPatternNodeLabelOutDegree:u}},y=function(e,t,n,s,l,y,b){if(void 0===n&&(n=!1),void 0===y&&(y="cluster"),void 0===b&&(b="cluster"),e&&e.nodes){var _=e.nodes.length;if(_){var w=(0,i.default)(e,n),x=(0,i.default)(t,n),M=m(e.nodes,w,n),E=m(t.nodes,x,n),S=f(e.nodes,y),k=S.nodeMap,T=S.nodeLabelMap,L=f(t.nodes,y),C=L.nodeMap,D=L.nodeLabelMap;p(e.edges,b,k);var A=p(t.edges,b,C).edgeLabelMap,P=[];null==x||x.forEach((function(e){P=P.concat(e)})),l||(l=Math.max.apply(Math,(0,r.__spreadArray)((0,r.__spreadArray)([],P),[2]))),s||(s=l);var O=u(e,w,y,s),I=u(t,x,y,s),R=function(e,t,n,r,i){var o=Math.ceil(n/t),a={},s=0;return r.forEach((function(e,r){for(var l=0,u=0,c=e.nodeIdxs,d=e.neighborNum-1;l<o;){for(var h=c[1+Math.floor(Math.random()*d)],f=0;(a[r+"-"+h]||a[h+"-"+r])&&(h=Math.floor(Math.random()*t),!(++f>2*t)););if(f<2*t&&(a[r+"-"+h]={start:r,end:h,distance:i[r][h]},l++,++s>=n))return a;if(++u>2*t)break}l<o&&(o=(o+(o-l))/(t-r-1))})),a}(0,_,Math.min(100,_*(_-1)/2),I,w),N=d(R,O,e),Y={graphs:N,nodeLabelProp:y,edgeLabelProp:b,minSupport:1,minNodeNum:1,maxNodeNum:4,directed:n},j=(0,o.default)(Y).slice(0,10),F=j.length,B=[];j.forEach((function(e,t){B[t]={},Object.keys(N).forEach((function(n){var r=N[n],i=h(r,e,y,b);B[t][n]=i}))}));var z=function(e,t,n){for(var r=1/0,i=0,o=function(t){var n=e[t],o=Object.keys(n).sort((function(e,t){return n[e]-n[t]})),a=[];o.forEach((function(e,t){a[t%10]||(a[t%10]={graphs:[],totalCount:0,aveCount:0}),a[t%10].graphs.push(e),a[t%10].totalCount+=n[e]}));var s=0,l=[];a.forEach((function(e){var t=e.totalCount/e.graphs.length;e.aveCount=t,l.push(t);var r=0,i=e.length;e.graphs.forEach((function(t,i){var o=n[t];e.graphs.forEach((function(e,t){i!==t&&(r+=Math.abs(o-n[e]))}))})),s+=r/=i*(i-1)/2})),s/=a.length;var u=0;l.forEach((function(e,t){l.forEach((function(n,r){t!==r&&(u+=Math.abs(e-n))})),u/=l.length*(l.length-1)/2}));var c=u-s;r<c&&(r=c,i=t)},a=0;a<t;a++)o(a);return{structure:n[i],structureCountMap:e[i]}}(B,F,j),H=z.structure,G=z.structureCountMap,W=t.nodes[0],U=W[y],V=T[U],X={},q={},K={},J={},Z={},$={};Object.keys(D).forEach((function(r,i){Z[r]=[],n&&($[r]=[]);var o=-1/0,a=D[r],s={};a.forEach((function(e){var t=E[W.id+"-"+e.id];if(t&&Z[r].push(t),o<t&&(o=t),s[W.id+"-"+e.id]={start:0,end:C[e.id].idx,distance:t},n){var i=E[e.id+"-"+W.id];i&&$[r].push(i)}})),Z[r]=Z[r].sort((function(e,t){return e-t})),n&&($[r]=$[r].sort((function(e,t){return e-t}))),q=d(s,I,t,q);var l=[];if(Object.keys(s).forEach((function(e){if(K[e])l.push(K[e]);else{var t=q[e];K[e]=h(t,H,y,b),l.push(K[e])}})),l=l.sort((function(e,t){return t-e})),J[W.id+"-"+r]=l,r!==U)for(var u=function(t){var n=V[t],i=O[k[n.id].idx],o=i.nodeLabelCountMap[r],a=D[r].length;if(!o||o.count<a)return V.splice(t,1),"continue";for(var s=!1,u=0;u<a;u++)if(o.dists[u]>Z[r][u]){s=!0;break}if(s)return V.splice(t,1),"continue";var c={};i.neighbors.forEach((function(e){var t=M[n.id+"-"+e.id];c[n.id+"-"+e.id]={start:k[n.id].idx,end:k[e.id].idx,distance:t}})),N=d(c,O,e,N);var f=[];Object.keys(c).forEach((function(e){if(G[e])f.push(G[e]);else{var t=N[e];G[e]=h(t,H,y,b),f.push(G[e])}})),f=f.sort((function(e,t){return t-e}));var p=!1;for(u=0;u<a;u++)if(f[u]<l[u]){p=!0;break}return p?(V.splice(t,1),"continue"):void 0},c=V.length-1;c>=0;c--)u(c)}));var Q=[];null==V||V.forEach((function(r){for(var i=k[r.id].idx,o=c(e.nodes,w[i],i,y,l).neighbors,a=!1,s=o.length-1;s>=0;s--){if(o.length+1<t.nodes.length)return void(a=!0);var u=o[s],d=u[y];if(D[d]&&D[d].length)if(Z[d]&&Z[d].length){var h=r.id+"-"+u.id,f=M[h],p=Z[d].length-1;if(f>Z[d][p])o.splice(s,1);else{if(n){var m=u.id+"-"+r.id,_=M[m];if(p=$[d].length-1,_>$[d][p]){o.splice(s,1);continue}}var x=G[h]?G[h]:g(e,r,u,k,f,O,H,y,b,G,N),E=W.id+"-"+d;if(x<J[E][J[E].length-1])o.splice(s,1);else{var S=v(X,d,C,D),T=S.minPatternNodeLabelDegree;S.minPatternNodeLabelInDegree,S.minPatternNodeLabelOutDegree;k[u.id].degree<T&&o.splice(s,1)}}}else o.splice(s,1);else o.splice(s,1)}a||Q.push({nodes:[r].concat(o)})}));var ee=(0,a.default)(t,W.id,!1).length,te={};n?(Object.keys(ee).forEach((function(e){var t=C[e].node[y];te[t]?te[t].push(ee[e]):te[t]=[ee[e]]})),Object.keys(te).forEach((function(e){te[e].sort((function(e,t){return e-t}))}))):te=Z;for(var ne=function(r){var i=Q[r],o=i.nodes[0],s={},l={};i.nodes.forEach((function(e,t){l[e.id]={idx:t,node:e,degree:0,inDegree:0,outDegree:0};var n=e[y];s[n]?s[n]++:s[n]=1}));var u=[],c={};e.edges.forEach((function(e){l[e.source]&&l[e.target]&&(u.push(e),c[e[b]]?c[e[b]]++:c[e[b]]=1,l[e.source].degree++,l[e.target].degree++,l[e.source].outDegree++,l[e.target].inDegree++)}));for(var d=Object.keys(A).length,h=!1,f=0;f<d;f++){var p=Object.keys(A)[f];if(!c[p]||c[p]<A[p].length){h=!0;break}}if(h)return Q.splice(r,1),"continue";var m=u.length;if(m<t.edges.length)return Q.splice(r,1),"break";var g=!1,_=function(e){var t=u[e],r=t[b],i=A[r];if(!i||!i.length)return c[r]--,i&&c[r]<i.length?(g=!0,"break"):(u.splice(e,1),l[t.source].degree--,l[t.target].degree--,l[t.source].outDegree--,l[t.target].inDegree--,"continue");var o=l[t.source].node[y],a=l[t.target].node[y],s=!1;return i.forEach((function(e){var t=C[e.source].node,r=C[e.target].node;t[y]===o&&r[y]===a&&(s=!0),n||t[y]!==a||r[y]!==o||(s=!0)})),s?void 0:(c[r]--,i&&c[r]<i.length?(g=!0,"break"):(u.splice(e,1),l[t.source].degree--,l[t.target].degree--,l[t.source].outDegree--,l[t.target].inDegree--,"continue"))};for(f=m-1;f>=0;f--){if("break"===_(f))break}if(g)return Q.splice(r,1),"continue";i.edges=u;var w=(0,a.default)(i,i.nodes[0].id,!1).length;if(Object.keys(w).reverse().forEach((function(e){if(e!==i.nodes[0].id&&!g){if(w[e]===1/0){var t=l[e].node[y];if(s[t]--,s[t]<D[t].length)return void(g=!0);var n=i.nodes.indexOf(l[e].node);return i.nodes.splice(n,1),void(l[e]=void 0)}var r=k[e].node[y];if(!te[r]||!te[r].length||w[e]>te[r][te[r].length-1]){t=l[e].node[y];if(s[t]--,s[t]<D[t].length)return void(g=!0);n=i.nodes.indexOf(l[e].node);i.nodes.splice(n,1),l[e]=void 0}}})),g)return Q.splice(r,1),"continue";for(var x=!0,M=0;x&&!g;){if(x=!1,n?l[o.id].degree<C[W.id].degree||l[o.id].inDegree<C[W.id].inDegree||l[o.id].outDegree<C[W.id].outDegree:l[o.id].degree<C[W.id].degree){g=!0;break}if(s[o[y]]<D[o[y]].length){g=!0;break}for(var E=i.nodes.length-1;E>=0;E--){var S=i.nodes[E],T=l[S.id].degree,L=l[S.id].inDegree,P=l[S.id].outDegree,O=S[y],I=v(X,O,C,D),R=I.minPatternNodeLabelDegree,N=I.minPatternNodeLabelInDegree,Y=I.minPatternNodeLabelOutDegree;if(n?T<R||L<N||P<Y:T<R){if(s[S[y]]--,s[S[y]]<D[S[y]].length){g=!0;break}i.nodes.splice(E,1),l[S.id]=void 0,x=!0}}if(g||!x&&0!==M)break;for(var j=(m=u.length)-1;j>=0;j--){var F=u[j];if(!l[F.source]||!l[F.target]){u.splice(j,1);var B=F[b];if(c[B]--,l[F.source]&&(l[F.source].degree--,l[F.source].outDegree--),l[F.target]&&(l[F.target].degree--,l[F.target].inDegree--),A[B]&&c[B]<A[B].length){g=!0;break}x=!0}}M++}return g||g||i.nodes.length<t.nodes.length||u.length<t.edges.length?(Q.splice(r,1),"continue"):void 0},re=Q.length-1;re>=0;re--){if("break"===ne(re))break}var ie=Q.length,oe=function(e){var t=Q[e],n={};t.edges.forEach((function(e){var t=e.source+"-"+e.target+"-"+e.label;n[t]?n[t]++:n[t]=1}));for(var r=function(e){var t=Q[e],r={};t.edges.forEach((function(e){var t=e.source+"-"+e.target+"-"+e.label;r[t]?r[t]++:r[t]=1}));var i=!0;Object.keys(r).length!==Object.keys(n).length?i=!1:Object.keys(n).forEach((function(e){r[e]!==n[e]&&(i=!1)})),i&&Q.splice(e,1)},i=ie-1;i>e;i--)r(i);ie=Q.length};for(re=0;re<=ie-1;re++)oe(re);return Q}}};t.default=y},5170:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(62238))&&r.__esModule?r:{default:r},o=n(70643);var a=function(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n="weight"),void 0===r&&(r=1e3);var a=e.nodes,s=void 0===a?[]:a,l=e.edges,u=void 0===l?[]:l,c={},d={};s.forEach((function(e,t){var n=(0,o.uniqueId)();e.clusterId=n,c[n]={id:n,nodes:[e]},d[e.id]={node:e,idx:t}}));var h=(0,i.default)(e,t),f=[],p={};h.forEach((function(e,t){var n=0,r=s[t].id;p[r]={},e.forEach((function(e,t){if(e){n+=e;var i=s[t].id;p[r][i]=e}})),f.push(n)}));for(var m=0,g=function(){var e=!1;if(s.forEach((function(t){var n={};Object.keys(p[t.id]).forEach((function(e){var r=p[t.id][e],i=d[e].node.clusterId;n[i]||(n[i]=0),n[i]+=r}));var r=-1/0,i=[];if(Object.keys(n).forEach((function(e){r<n[e]?(r=n[e],i=[e]):r===n[e]&&i.push(e)})),1!==i.length||i[0]!==t.clusterId){var o=i.indexOf(t.clusterId);if(o>=0&&i.splice(o,1),i&&i.length){e=!0;var a=c[t.clusterId],s=a.nodes.indexOf(t);a.nodes.splice(s,1);var l=Math.floor(Math.random()*i.length),u=c[i[l]];u.nodes.push(t),t.clusterId=u.id}}})),!e)return"break";m++};m<r;){if("break"===g())break}Object.keys(c).forEach((function(e){var t=c[e];t.nodes&&t.nodes.length||delete c[e]}));var v=[],y={};u.forEach((function(e){var t=e.source,r=e.target,i=e[n]||1,o=d[t].node.clusterId,a=d[r].node.clusterId,s=o+"---"+a;if(y[s])y[s].weight+=i,y[s].count++;else{var l={source:o,target:a,weight:i,count:1};y[s]=l,v.push(l)}}));var b=[];return Object.keys(c).forEach((function(e){b.push(c[e])})),{clusters:b,clusterEdges:v}};t.default=a},35179:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(62238))&&r.__esModule?r:{default:r};var o=function(e,t,n,r){for(var i=t.length,o=2*r,a=0,s=0;s<i;s++)for(var l=e[s].clusterId,u=0;u<i;u++){if(l===e[u].clusterId)a+=(t[s][u]||0)-(n[s]||0)*(n[u]||0)/o}return a*=1/o},a=function(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n="weight"),void 0===r&&(r=1e-4);var a=e.nodes,s=void 0===a?[]:a,l=e.edges,u=void 0===l?[]:l,c=1,d={},h={};s.forEach((function(e,t){var n=String(c++);e.clusterId=n,d[n]={id:n,nodes:[e]},h[e.id]={node:e,idx:t}}));var f=(0,i.default)(e,t),p=[],m={},g=0;f.forEach((function(e,t){var n=0,r=s[t].id;m[r]={},e.forEach((function(e,t){if(e){n+=e;var i=s[t].id;m[r][i]=e,g+=e}})),p.push(n)})),g/=2;for(var v=1/0,y=1/0,b=0;v=o(s,f,p,g),!(Math.abs(v-y)<r||b>100);)y=v,b++,Object.keys(d).forEach((function(e){var t=0;u.forEach((function(r){var i=r.source,o=r.target,a=h[i].node.clusterId,s=h[o].node.clusterId;(a===e&&s!==e||s===e&&a!==e)&&(t+=r[n]||1)})),d[e].sumTot=t})),s.forEach((function(e,t){var r,i=d[e.clusterId],o=0,a=p[t]/(2*g),s=0;i.nodes.forEach((function(e){var n=h[e.id].idx;s+=f[t][n]||0}));var l=s-i.sumTot*a,c=m[e.id];if(Object.keys(c).forEach((function(n){var i=h[n].node.clusterId;if(i!==e.clusterId){var s=d[i],u=s.nodes;if(u&&u.length){var c=0;u.forEach((function(e){var n=h[e.id].idx;c+=f[t][n]||0}));var p=c-s.sumTot*a-l;p>o&&(o=p,r=s)}}})),o>0){r.nodes.push(e);var v=e.clusterId;e.clusterId=r.id;var y=i.nodes.indexOf(e);i.nodes.splice(y,1);var b=0,_=0;u.forEach((function(e){var t=e.source,i=e.target,o=h[t].node.clusterId,a=h[i].node.clusterId;(o===r.id&&a!==r.id||a===r.id&&o!==r.id)&&(b+=e[n]||1),(o===v&&a!==v||a===v&&o!==v)&&(_+=e[n]||1)})),r.sumTot=b,i.sumTot=_}}));var _={},w=0;Object.keys(d).forEach((function(e){var t=d[e];if(t.nodes&&t.nodes.length){var n=String(w+1);n!==e&&(t.id=n,t.nodes=t.nodes.map((function(e){return{id:e.id,clusterId:n}})),d[n]=t,_[e]=n,delete d[e],w++)}else delete d[e]})),s.forEach((function(e){e.clusterId&&_[e.clusterId]&&(e.clusterId=_[e.clusterId])}));var x=[],M={};u.forEach((function(e){var t=e.source,r=e.target,i=e[n]||1,o=h[t].node.clusterId,a=h[r].node.clusterId,s=o+"---"+a;if(M[s])M[s].weight+=i,M[s].count++;else{var l={source:o,target:a,weight:i,count:1};M[s]=l,x.push(l)}}));var E=[];return Object.keys(d).forEach((function(e){E.push(d[e])})),{clusters:E,clusterEdges:x}};t.default=a},89454:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(38823)),i=a(n(57085)),o=n(70643);function a(e){return e&&e.__esModule?e:{default:e}}var s=function(e,t){var n=[],r=e.nodes,a=void 0===r?[]:r,s=e.edges,l=void 0===s?[]:s;if(0===a.length)return n;var u=a[0],c=new Set;c.add(u);var d=new i.default((function(e,n){return t?e.weight-n.weight:0}));for((0,o.getEdgesByNodeId)(u.id,l).forEach((function(e){d.insert(e)}));!d.isEmpty();){var h=d.delMin(),f=h.source,p=h.target;c.has(f)&&c.has(p)||(n.push(h),c.has(f)||(c.add(f),(0,o.getEdgesByNodeId)(f,l).forEach((function(e){d.insert(e)}))),c.has(p)||(c.add(p),(0,o.getEdgesByNodeId)(p,l).forEach((function(e){d.insert(e)}))))}return n},l=function(e,t){var n=[],i=e.nodes,o=void 0===i?[]:i,a=e.edges,s=void 0===a?[]:a;if(0===o.length)return n;var l=s.map((function(e){return e}));t&&l.sort((function(e,t){return e.weight-t.weight}));for(var u=new r.default(o.map((function(e){return e.id})));l.length>0;){var c=l.shift(),d=c.source,h=c.target;u.connected(d,h)||(n.push(c),u.union(d,h))}return n},u=function(e,t,n){return n?{prim:s,kruskal:l}[n](e,t):l(e,t)};t.default=u},74926:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(82556))&&r.__esModule?r:{default:r},o=n(70643);var a=function(e,t,n){"number"!=typeof t&&(t=1e-6),"number"!=typeof n&&(n=.85);for(var r,a=1,s=0,l=1e3,u=e.nodes,c=void 0===u?[]:u,d=e.edges,h=void 0===d?[]:d,f=c.length,p={},m={},g=0;g<f;++g){p[y=(M=c[g]).id]=1/f,m[y]=1/f}for(var v=(0,i.default)(e);l>0&&a>t;){s=0;for(g=0;g<f;++g){var y=(M=c[g]).id;if(r=0,0===v[M.id].inDegree)p[y]=0;else{for(var b=(0,o.getNeighbors)(y,h,"source"),_=0;_<b.length;++_){var w=b[_],x=v[w].outDegree;x>0&&(r+=m[w]/x)}p[y]=n*r,s+=p[y]}}s=(1-s)/f,a=0;for(g=0;g<f;++g){var M;r=p[y=(M=c[g]).id]+s,a+=Math.abs(r-m[y]),m[y]=r}l-=1}return m};t.default=a},57085:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){return e-t},r=function(){function e(e){void 0===e&&(e=n),this.compareFn=e,this.list=[]}return e.prototype.getLeft=function(e){return 2*e+1},e.prototype.getRight=function(e){return 2*e+2},e.prototype.getParent=function(e){return 0===e?null:Math.floor((e-1)/2)},e.prototype.isEmpty=function(){return this.list.length<=0},e.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},e.prototype.delMin=function(){var e=this.top(),t=this.list.pop();return this.list.length>0&&(this.list[0]=t,this.moveDown(0)),e},e.prototype.insert=function(e){if(null!==e){this.list.push(e);var t=this.list.length-1;return this.moveUp(t),!0}return!1},e.prototype.moveUp=function(e){for(var t=this.getParent(e);e&&e>0&&this.compareFn(this.list[t],this.list[e])>0;){var n=this.list[t];this.list[t]=this.list[e],this.list[e]=n,e=t,t=this.getParent(e)}},e.prototype.moveDown=function(e){var t,n=e,r=this.getLeft(e),i=this.getRight(e),o=this.list.length;null!==r&&r<o&&this.compareFn(this.list[n],this.list[r])>0?n=r:null!==i&&i<o&&this.compareFn(this.list[n],this.list[i])>0&&(n=i),e!==n&&(t=[this.list[n],this.list[e]],this.list[e]=t[0],this.list[n]=t[1],this.moveDown(n))},e}();t.default=r},88481:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.LinkedListNode=void 0;var n=function(e,t){return e===t},r=function(){function e(e,t){void 0===t&&(t=null),this.value=e,this.next=t}return e.prototype.toString=function(e){return e?e(this.value):""+this.value},e}();t.LinkedListNode=r;var i=function(){function e(e){void 0===e&&(e=n),this.head=null,this.tail=null,this.compare=e}return e.prototype.prepend=function(e){var t=new r(e,this.head);return this.head=t,this.tail||(this.tail=t),this},e.prototype.append=function(e){var t=new r(e);return this.head?(this.tail.next=t,this.tail=t,this):(this.head=t,this.tail=t,this)},e.prototype.delete=function(e){if(!this.head)return null;for(var t=null;this.head&&this.compare(this.head.value,e);)t=this.head,this.head=this.head.next;var n=this.head;if(null!==n)for(;n.next;)this.compare(n.next.value,e)?(t=n.next,n.next=n.next.next):n=n.next;return this.compare(this.tail.value,e)&&(this.tail=n),t},e.prototype.find=function(e){var t=e.value,n=void 0===t?void 0:t,r=e.callback,i=void 0===r?void 0:r;if(!this.head)return null;for(var o=this.head;o;){if(i&&i(o.value))return o;if(void 0!==n&&this.compare(o.value,n))return o;o=o.next}return null},e.prototype.deleteTail=function(){var e=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,e;for(var t=this.head;t.next;)t.next.next?t=t.next:t.next=null;return this.tail=t,e},e.prototype.deleteHead=function(){if(!this.head)return null;var e=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),e},e.prototype.fromArray=function(e){var t=this;return e.forEach((function(e){return t.append(e)})),this},e.prototype.toArray=function(){for(var e=[],t=this.head;t;)e.push(t),t=t.next;return e},e.prototype.reverse=function(){for(var e=this.head,t=null,n=null;e;)n=e.next,e.next=t,t=e,e=n;this.tail=this.head,this.head=t},e.prototype.toString=function(e){return void 0===e&&(e=void 0),this.toArray().map((function(t){return t.toString(e)})).toString()},e}();t.default=i},93026:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(88481))&&r.__esModule?r:{default:r};var o=function(){function e(){this.linkedList=new i.default}return e.prototype.isEmpty=function(){return!this.linkedList.head},e.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},e.prototype.enqueue=function(e){this.linkedList.append(e)},e.prototype.dequeue=function(){var e=this.linkedList.deleteHead();return e?e.value:null},e.prototype.toString=function(e){return this.linkedList.toString(e)},e}();t.default=o},38823:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){function e(e){this.count=e.length,this.parent={};for(var t=0,n=e;t<n.length;t++){var r=n[t];this.parent[r]=r}}return e.prototype.find=function(e){for(;this.parent[e]!==e;)e=this.parent[e];return e},e.prototype.union=function(e,t){var n=this.find(e),r=this.find(t);n!==r&&(n<r?(this.parent[t]!==t&&this.union(this.parent[t],e),this.parent[t]=this.parent[e]):(this.parent[e]!==e&&this.union(this.parent[e],t),this.parent[e]=this.parent[t]))},e.prototype.connected=function(e,t){return this.find(e)===this.find(t)},e}();t.default=n},70643:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uniqueId=t.getEdgesByNodeId=t.getOutEdgesNodeId=t.getNeighbors=void 0;t.getNeighbors=function(e,t,n){void 0===t&&(t=[]);var r=t.filter((function(t){return t.source===e||t.target===e}));if("target"===n){return r.filter((function(t){return t.source===e})).map((function(e){return e.target}))}if("source"===n){return r.filter((function(t){return t.target===e})).map((function(e){return e.source}))}return r.map((function(t){return t.source===e?t.target:t.source}))};t.getOutEdgesNodeId=function(e,t){return t.filter((function(t){return t.source===e}))};t.getEdgesByNodeId=function(e,t){return t.filter((function(t){return t.source===e||t.target===e}))};t.uniqueId=function(e){return void 0===e&&(e=0),e+"-"+(""+Math.random()).split(".")[1].substr(0,5)+(""+Math.random()).split(".")[1].substr(0,5)}},31656:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getAdjMatrix",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"breadthFirstSearch",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"connectedComponent",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"getDegree",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"getInDegree",{enumerable:!0,get:function(){return s.getInDegree}}),Object.defineProperty(t,"getOutDegree",{enumerable:!0,get:function(){return s.getOutDegree}}),Object.defineProperty(t,"detectCycle",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"depthFirstSearch",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"dijkstra",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"findAllPath",{enumerable:!0,get:function(){return d.findAllPath}}),Object.defineProperty(t,"findShortestPath",{enumerable:!0,get:function(){return d.findShortestPath}}),Object.defineProperty(t,"floydWarshall",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"labelPropagation",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"louvain",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(t,"minimumSpanningTree",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(t,"pageRank",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(t,"GADDI",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(t,"getNeighbors",{enumerable:!0,get:function(){return y.getNeighbors}});var i=_(n(62238)),o=_(n(83764)),a=_(n(59527)),s=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=b();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}n.default=e,t&&t.set(e,n);return n}(n(82556)),l=_(n(94282)),u=_(n(45891)),c=_(n(78089)),d=n(41727),h=_(n(75033)),f=_(n(5170)),p=_(n(35179)),m=_(n(89454)),g=_(n(74926)),v=_(n(82812)),y=n(70643);function b(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return b=function(){return e},e}function _(e){return e&&e.__esModule?e:{default:e}}},66044:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MESSAGE=t.ALGORITHM=void 0;t.ALGORITHM={pageRank:"pageRank",breadthFirstSearch:"breadthFirstSearch",connectedComponent:"connectedComponent",depthFirstSearch:"depthFirstSearch",detectCycle:"detectCycle",detectDirectedCycle:"detectDirectedCycle",detectAllCycles:"detectAllCycles",detectAllDirectedCycle:"detectAllDirectedCycle",detectAllUndirectedCycle:"detectAllUndirectedCycle",dijkstra:"dijkstra",findAllPath:"findAllPath",findShortestPath:"findShortestPath",floydWarshall:"floydWarshall",getAdjMatrix:"getAdjMatrix",getDegree:"getDegree",getInDegree:"getInDegree",getNeighbors:"getNeighbors",getOutDegree:"getOutDegree",labelPropagation:"labelPropagation",louvain:"louvain",GADDI:"GADDI",minimumSpanningTree:"minimumSpanningTree",SUCCESS:"SUCCESS",FAILURE:"FAILURE"};t.MESSAGE={SUCCESS:"SUCCESS",FAILURE:"FAILURE"}},70585:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=n(66044),o=(r=n(12067))&&r.__esModule?r:{default:r};var a=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new Promise((function(n,r){var a=new o.default;a.postMessage({_algorithmType:e,data:t}),a.onmessage=function(e){var t=e.data,o=t.data,s=t._algorithmType;i.MESSAGE.SUCCESS===s?n(o):r(),a.terminate()}}))}};t.default=a},30485:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GADDIAsync=t.getNeighborsAsync=t.pageRankAsync=t.minimumSpanningTreeAsync=t.louvainAsync=t.labelPropagationAsync=t.floydWarshallAsync=t.findShortestPathAsync=t.findAllPathAsync=t.dijkstraAsync=t.detectAllUndirectedCycleAsync=t.detectAllDirectedCycleAsync=t.detectAllCyclesAsync=t.detectCycleAsync=t.getOutDegreeAsync=t.getInDegreeAsync=t.getDegreeAsync=t.connectedComponentAsync=t.getAdjMatrixAsync=void 0;var r,i=(r=n(70585))&&r.__esModule?r:{default:r},o=n(66044);t.getAdjMatrixAsync=function(e,t){return(0,i.default)(o.ALGORITHM.getAdjMatrix).apply(void 0,[e,t])};t.connectedComponentAsync=function(e,t){return(0,i.default)(o.ALGORITHM.connectedComponent).apply(void 0,[e,t])};t.getDegreeAsync=function(e){return(0,i.default)(o.ALGORITHM.getDegree)(e)};t.getInDegreeAsync=function(e,t){return(0,i.default)(o.ALGORITHM.getInDegree)(e,t)};t.getOutDegreeAsync=function(e,t){return(0,i.default)(o.ALGORITHM.getOutDegree)(e,t)};t.detectCycleAsync=function(e){return(0,i.default)(o.ALGORITHM.detectCycle)(e)};t.detectAllCyclesAsync=function(e){return(0,i.default)(o.ALGORITHM.detectAllCycles)(e)};t.detectAllDirectedCycleAsync=function(e){return(0,i.default)(o.ALGORITHM.detectAllDirectedCycle)(e)};t.detectAllUndirectedCycleAsync=function(e){return(0,i.default)(o.ALGORITHM.detectAllUndirectedCycle)(e)};t.dijkstraAsync=function(e,t,n,r){return(0,i.default)(o.ALGORITHM.dijkstra).apply(void 0,[e,t,n,r])};t.findAllPathAsync=function(e,t,n,r){return(0,i.default)(o.ALGORITHM.findAllPath).apply(void 0,[e,t,n,r])};t.findShortestPathAsync=function(e,t,n,r,a){return(0,i.default)(o.ALGORITHM.findShortestPath).apply(void 0,[e,t,n,r,a])};t.floydWarshallAsync=function(e,t){return(0,i.default)(o.ALGORITHM.floydWarshall).apply(void 0,[e,t])};t.labelPropagationAsync=function(e,t,n,r){return void 0===r&&(r=1e3),(0,i.default)(o.ALGORITHM.labelPropagation)(e,t,n,r)};t.louvainAsync=function(e,t,n,r){return(0,i.default)(o.ALGORITHM.louvain)(e,t,n,r)};t.minimumSpanningTreeAsync=function(e,t,n){return(0,i.default)(o.ALGORITHM.minimumSpanningTree).apply(void 0,[e,t,n])};t.pageRankAsync=function(e,t,n){return(0,i.default)(o.ALGORITHM.pageRank).apply(void 0,[e,t,n])};t.getNeighborsAsync=function(e,t,n){return(0,i.default)(o.ALGORITHM.getNeighbors).apply(void 0,[e,t,n])};t.GADDIAsync=function(e,t,n,r,a,s,l){return void 0===n&&(n=!1),void 0===s&&(s="cluster"),void 0===l&&(l="cluster"),(0,i.default)(o.ALGORITHM.GADDI).apply(void 0,[e,t,n,r,a,s,l])}},12067:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var s=i?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,t&&t.set(e,n);return n}(n(31656)),o=n(66044);function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}var s="undefined"!=typeof self?self:{};s.onmessage=function(e){var t=e.data,n=t._algorithmType,r=t.data;if(n)if("function"!=typeof i[n])s.postMessage({_algorithmType:o.MESSAGE.FAILURE});else{var a=i[n].apply(i,r);s.postMessage({_algorithmType:o.MESSAGE.SUCCESS,data:a})}};t.default=null},20499:()=>{},64851:()=>{},59518:()=>{},26199:()=>{},14156:()=>{},71468:()=>{},48871:()=>{},9871:()=>{},25612:()=>{},92777:()=>{},20159:()=>{},61622:()=>{},81746:function(e){var t;"undefined"!=typeof self&&self,t=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=31)}([function(e,t,n){"use strict";var r=n(4);t.a=function(e){return Array.isArray?Array.isArray(e):Object(r.a)(e,"Array")}},function(e,t,n){"use strict";t.a=function(e){return null!==e&&"function"!=typeof e&&isFinite(e.length)}},function(e,t,n){"use strict";var r=n(0),i=n(13);t.a=function(e,t){if(e)if(Object(r.a)(e))for(var n=0,o=e.length;n<o&&!1!==t(e[n],n);n++);else if(Object(i.a)(e))for(var a in e)if(e.hasOwnProperty(a)&&!1===t(e[a],a))break}},function(e,t,n){"use strict";var r=n(4);t.a=function(e){return Object(r.a)(e,"Function")}},function(e,t,n){"use strict";var r={}.toString;t.a=function(e,t){return r.call(e)==="[object "+t+"]"}},function(e,t,n){"use strict";var r=n(4);t.a=function(e){return Object(r.a)(e,"Number")}},function(e,t,n){"use strict";t.a=function(e){return null==e}},function(e,t,n){var r=n(33).mix;e.exports={assign:r}},function(e,t,n){"use strict";var r=n(4);t.a=function(e){return Object(r.a)(e,"String")}},function(e,t,n){"use strict";var r=n(15),i=n(4);t.a=function(e){if(!Object(r.a)(e)||!Object(i.a)(e,"Object"))return!1;if(null===Object.getPrototypeOf(e))return!0;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}},function(e,t,n){"use strict";var r=n(6);t.a=function(e){return Object(r.a)(e)?"":e.toString()}},function(e,t,n){var r=n(18),i=function(){function e(e,t){void 0===t&&(t={}),this.options=t,this.rootNode=r(e,t)}return e.prototype.execute=function(){throw new Error("please override this method")},e}();e.exports=i},function(e,t,n){"use strict";var r=n(1);t.a=function(e,t){return!!Object(r.a)(e)&&e.indexOf(t)>-1}},function(e,t,n){"use strict";t.a=function(e){var t=typeof e;return null!==e&&"object"===t||"function"===t}},function(e,t,n){"use strict";var r=n(2),i=n(1);t.a=function(e,t){if(!Object(i.a)(e))return e;var n=[];return Object(r.a)(e,(function(e,r){t(e,r)&&n.push(e)})),n}},function(e,t,n){"use strict";t.a=function(e){return"object"==typeof e&&null!==e}},function(e,t,n){"use strict";function r(e,t){for(var n in t)t.hasOwnProperty(n)&&"constructor"!==n&&void 0!==t[n]&&(e[n]=t[n])}t.a=function(e,t,n,i){return t&&r(e,t),n&&r(e,n),i&&r(e,i),e}},function(e,t,n){var r=n(30),i=["LR","RL","TB","BT","H","V"],o=["LR","RL","H"],a=i[0];e.exports=function(e,t,n){var s=t.direction||a;if(t.isHorizontal=function(e){return o.indexOf(e)>-1}(s),s&&-1===i.indexOf(s))throw new TypeError("Invalid direction: "+s);if(s===i[0])n(e,t);else if(s===i[1])n(e,t),e.right2left();else if(s===i[2])n(e,t);else if(s===i[3])n(e,t),e.bottom2top();else if(s===i[4]||s===i[5]){var l=r(e,t),u=l.left,c=l.right;n(u,t),n(c,t),t.isHorizontal?u.right2left():u.bottom2top(),c.translate(u.x-c.x,u.y-c.y),e.x=u.x,e.y=c.y;var d=e.getBoundingBox();t.isHorizontal?d.top<0&&e.translate(0,-d.top):d.left<0&&e.translate(-d.left,0)}var h=t.fixedRoot;return void 0===h&&(h=!0),h&&e.translate(-(e.x+e.width/2+e.hgap),-(e.y+e.height/2+e.vgap)),e}},function(e,t,n){var r=n(7),i={getId:function(e){return e.id||e.name},getPreH:function(e){return e.preH||0},getPreV:function(e){return e.preV||0},getHGap:function(e){return e.hgap||18},getVGap:function(e){return e.vgap||18},getChildren:function(e){return e.children},getHeight:function(e){return e.height||36},getWidth:function(e){var t=e.label||" ";return e.width||18*t.split("").length}};function o(e,t){var n=this;if(n.vgap=n.hgap=0,e instanceof o)return e;n.data=e;var r=t.getHGap(e),i=t.getVGap(e);return n.preH=t.getPreH(e),n.preV=t.getPreV(e),n.width=t.getWidth(e),n.height=t.getHeight(e),n.width+=n.preH,n.height+=n.preV,n.id=t.getId(e),n.x=n.y=0,n.depth=0,n.children||(n.children=[]),n.addGap(r,i),n}r.assign(o.prototype,{isRoot:function(){return 0===this.depth},isLeaf:function(){return 0===this.children.length},addGap:function(e,t){var n=this;n.hgap+=e,n.vgap+=t,n.width+=2*e,n.height+=2*t},eachNode:function(e){for(var t,n=[this];t=n.shift();)e(t),n=t.children.concat(n)},DFTraverse:function(e){this.eachNode(e)},BFTraverse:function(e){for(var t,n=[this];t=n.shift();)e(t),n=n.concat(t.children)},getBoundingBox:function(){var e={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode((function(t){e.left=Math.min(e.left,t.x),e.top=Math.min(e.top,t.y),e.width=Math.max(e.width,t.x+t.width),e.height=Math.max(e.height,t.y+t.height)})),e},translate:function(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this.eachNode((function(n){n.x+=e,n.y+=t,n.x+=n.preH,n.y+=n.preV}))},right2left:function(){var e=this,t=e.getBoundingBox();e.eachNode((function(e){e.x=e.x-2*(e.x-t.left)-e.width})),e.translate(t.width,0)},bottom2top:function(){var e=this,t=e.getBoundingBox();e.eachNode((function(e){e.y=e.y-2*(e.y-t.top)-e.height})),e.translate(0,t.height)}}),e.exports=function(e,t,n){void 0===t&&(t={});var a,s=new o(e,t=r.assign({},i,t)),l=[s];if(!n&&!e.collapsed)for(;a=l.shift();)if(!a.data.collapsed){var u=t.getChildren(a.data),c=u?u.length:0;if(a.children=new Array(c),u&&c)for(var d=0;d<c;d++){var h=new o(u[d],t);a.children[d]=h,l.push(h),h.parent=a,h.depth=a.depth+1}}return s}},function(e,t,n){"use strict";var r=n(6),i=n(20);t.a=function(e,t){var n=Object(i.a)(t),o=n.length;if(Object(r.a)(e))return!o;for(var a=0;a<o;a+=1){var s=n[a];if(t[s]!==e[s]||!(s in e))return!1}return!0}},function(e,t,n){"use strict";var r=n(2),i=n(3),o=Object.keys?function(e){return Object.keys(e)}:function(e){var t=[];return Object(r.a)(e,(function(n,r){Object(i.a)(e)&&"prototype"===r||t.push(r)})),t};t.a=o},function(e,t,n){"use strict";var r=n(1),i=Array.prototype.splice;t.a=function(e,t){if(!Object(r.a)(e))return[];for(var n=e?t.length:0,o=n-1;n--;){var a=void 0,s=t[n];n!==o&&s===a||(a=s,i.call(e,s,1))}return e}},function(e,t,n){"use strict";var r=n(12),i=n(2);t.a=function(e){var t=[];return Object(i.a)(e,(function(e){Object(r.a)(t,e)||t.push(e)})),t}},function(e,t,n){"use strict";var r=n(0),i=n(3),o=n(24);t.a=function(e,t){if(!t)return{0:e};if(!Object(i.a)(t)){var n=Object(r.a)(t)?t:t.replace(/\s+/g,"").split("*");t=function(e){for(var t="_",r=0,i=n.length;r<i;r++)t+=e[n[r]]&&e[n[r]].toString();return t}}return Object(o.a)(e,t)}},function(e,t,n){"use strict";var r=n(2),i=n(0),o=n(3),a=Object.prototype.hasOwnProperty;t.a=function(e,t){if(!t||!Object(i.a)(e))return{};var n,s={},l=Object(o.a)(t)?t:function(e){return e[t]};return Object(r.a)(e,(function(e){n=l(e),a.call(s,n)?s[n].push(e):s[n]=[e]})),s}},function(e,t,n){"use strict";t.a=function(e,t){return e.hasOwnProperty(t)}},function(e,t,n){"use strict";var r=n(2),i=n(3),o=Object.values?function(e){return Object.values(e)}:function(e){var t=[];return Object(r.a)(e,(function(n,r){Object(i.a)(e)&&"prototype"===r||t.push(n)})),t};t.a=o},function(e,t,n){"use strict";var r={}.toString;t.a=function(e){return r.call(e).replace(/^\[object /,"").replace(/]$/,"")}},function(e,t,n){"use strict";var r=Object.prototype;t.a=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||r)}},function(e,t,n){"use strict";var r=n(15),i=n(1),o=n(8),a=function(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Object(o.a)(e)||Object(o.a)(t))return!1;if(Object(i.a)(e)||Object(i.a)(t)){if(e.length!==t.length)return!1;for(var n=!0,s=0;s<e.length&&(n=a(e[s],t[s]));s++);return n}if(Object(r.a)(e)||Object(r.a)(t)){var l=Object.keys(e),u=Object.keys(t);if(l.length!==u.length)return!1;for(n=!0,s=0;s<l.length&&(n=a(e[l[s]],t[l[s]]));s++);return n}return!1};t.a=a},function(e,t,n){var r=n(18);e.exports=function(e,t){for(var n=r(e.data,t,!0),i=r(e.data,t,!0),o=e.children.length,a=Math.round(o/2),s=t.getSide||function(e,t){return t<a?"right":"left"},l=0;l<o;l++){var u=e.children[l];"right"===s(u,l)?i.children.push(u):n.children.push(u)}return n.eachNode((function(e){e.isRoot()||(e.side="left")})),i.eachNode((function(e){e.isRoot()||(e.side="right")})),{left:n,right:i}}},function(e,t,n){var r={compactBox:n(32),dendrogram:n(114),indented:n(116),mindmap:n(118)};e.exports=r},function(e,t,n){var r=n(11),i=n(113),o=n(17),a=n(7),s=function(e){var t,n;function r(){return e.apply(this,arguments)||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.execute=function(){return o(this.rootNode,this.options,i)},r}(r),l={};e.exports=function(e,t){return t=a.assign({},l,t),new s(e,t).execute()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(12);n.d(t,"contains",(function(){return r.a})),n.d(t,"includes",(function(){return r.a}));var i=n(34);n.d(t,"difference",(function(){return i.a}));var o=n(35);n.d(t,"find",(function(){return o.a}));var a=n(36);n.d(t,"findIndex",(function(){return a.a}));var s=n(37);n.d(t,"firstValue",(function(){return s.a}));var l=n(38);n.d(t,"flatten",(function(){return l.a}));var u=n(39);n.d(t,"flattenDeep",(function(){return u.a}));var c=n(40);n.d(t,"getRange",(function(){return c.a}));var d=n(41);n.d(t,"pull",(function(){return d.a}));var h=n(21);n.d(t,"pullAt",(function(){return h.a}));var f=n(42);n.d(t,"reduce",(function(){return f.a}));var p=n(43);n.d(t,"remove",(function(){return p.a}));var m=n(44);n.d(t,"sortBy",(function(){return m.a}));var g=n(45);n.d(t,"union",(function(){return g.a}));var v=n(22);n.d(t,"uniq",(function(){return v.a}));var y=n(46);n.d(t,"valuesOfKey",(function(){return y.a}));var b=n(47);n.d(t,"head",(function(){return b.a}));var _=n(48);n.d(t,"last",(function(){return _.a}));var w=n(49);n.d(t,"startsWith",(function(){return w.a}));var x=n(50);n.d(t,"endsWith",(function(){return x.a}));var M=n(14);n.d(t,"filter",(function(){return M.a}));var E=n(51);n.d(t,"every",(function(){return E.a}));var S=n(52);n.d(t,"some",(function(){return S.a}));var k=n(53);n.d(t,"group",(function(){return k.a}));var T=n(24);n.d(t,"groupBy",(function(){return T.a}));var L=n(23);n.d(t,"groupToMap",(function(){return L.a}));var C=n(54);n.d(t,"getWrapBehavior",(function(){return C.a}));var D=n(55);n.d(t,"wrapBehavior",(function(){return D.a}));var A=n(56);n.d(t,"number2color",(function(){return A.a}));var P=n(57);n.d(t,"parseRadius",(function(){return P.a}));var O=n(58);n.d(t,"clamp",(function(){return O.a}));var I=n(59);n.d(t,"fixedBase",(function(){return I.a}));var R=n(60);n.d(t,"isDecimal",(function(){return R.a}));var N=n(61);n.d(t,"isEven",(function(){return N.a}));var Y=n(62);n.d(t,"isInteger",(function(){return Y.a}));var j=n(63);n.d(t,"isNegative",(function(){return j.a}));var F=n(64);n.d(t,"isNumberEqual",(function(){return F.a}));var B=n(65);n.d(t,"isOdd",(function(){return B.a}));var z=n(66);n.d(t,"isPositive",(function(){return z.a}));var H=n(67);n.d(t,"maxBy",(function(){return H.a}));var G=n(68);n.d(t,"minBy",(function(){return G.a}));var W=n(69);n.d(t,"mod",(function(){return W.a}));var U=n(70);n.d(t,"toDegree",(function(){return U.a}));var V=n(71);n.d(t,"toInteger",(function(){return V.a}));var X=n(72);n.d(t,"toRadian",(function(){return X.a}));var q=n(73);n.d(t,"forIn",(function(){return q.a}));var K=n(25);n.d(t,"has",(function(){return K.a}));var J=n(74);n.d(t,"hasKey",(function(){return J.a}));var Z=n(75);n.d(t,"hasValue",(function(){return Z.a}));var $=n(20);n.d(t,"keys",(function(){return $.a}));var Q=n(19);n.d(t,"isMatch",(function(){return Q.a}));var ee=n(26);n.d(t,"values",(function(){return ee.a}));var te=n(76);n.d(t,"lowerCase",(function(){return te.a}));var ne=n(77);n.d(t,"lowerFirst",(function(){return ne.a}));var re=n(78);n.d(t,"substitute",(function(){return re.a}));var ie=n(79);n.d(t,"upperCase",(function(){return ie.a}));var oe=n(80);n.d(t,"upperFirst",(function(){return oe.a}));var ae=n(27);n.d(t,"getType",(function(){return ae.a}));var se=n(81);n.d(t,"isArguments",(function(){return se.a}));var le=n(0);n.d(t,"isArray",(function(){return le.a}));var ue=n(1);n.d(t,"isArrayLike",(function(){return ue.a}));var ce=n(82);n.d(t,"isBoolean",(function(){return ce.a}));var de=n(83);n.d(t,"isDate",(function(){return de.a}));var he=n(84);n.d(t,"isError",(function(){return he.a}));var fe=n(3);n.d(t,"isFunction",(function(){return fe.a}));var pe=n(85);n.d(t,"isFinite",(function(){return pe.a}));var me=n(6);n.d(t,"isNil",(function(){return me.a}));var ge=n(86);n.d(t,"isNull",(function(){return ge.a}));var ve=n(5);n.d(t,"isNumber",(function(){return ve.a}));var ye=n(13);n.d(t,"isObject",(function(){return ye.a}));var be=n(15);n.d(t,"isObjectLike",(function(){return be.a}));var _e=n(9);n.d(t,"isPlainObject",(function(){return _e.a}));var we=n(28);n.d(t,"isPrototype",(function(){return we.a}));var xe=n(87);n.d(t,"isRegExp",(function(){return xe.a}));var Me=n(8);n.d(t,"isString",(function(){return Me.a}));var Ee=n(4);n.d(t,"isType",(function(){return Ee.a}));var Se=n(88);n.d(t,"isUndefined",(function(){return Se.a}));var ke=n(89);n.d(t,"isElement",(function(){return ke.a}));var Te=n(90);n.d(t,"requestAnimationFrame",(function(){return Te.a}));var Le=n(91);n.d(t,"clearAnimationFrame",(function(){return Le.a}));var Ce=n(92);n.d(t,"augment",(function(){return Ce.a}));var De=n(93);n.d(t,"clone",(function(){return De.a}));var Ae=n(94);n.d(t,"debounce",(function(){return Ae.a}));var Pe=n(95);n.d(t,"memoize",(function(){return Pe.a}));var Oe=n(96);n.d(t,"deepMix",(function(){return Oe.a}));var Ie=n(2);n.d(t,"each",(function(){return Ie.a}));var Re=n(97);n.d(t,"extend",(function(){return Re.a}));var Ne=n(98);n.d(t,"indexOf",(function(){return Ne.a}));var Ye=n(99);n.d(t,"isEmpty",(function(){return Ye.a}));var je=n(29);n.d(t,"isEqual",(function(){return je.a}));var Fe=n(100);n.d(t,"isEqualWith",(function(){return Fe.a}));var Be=n(101);n.d(t,"map",(function(){return Be.a}));var ze=n(102);n.d(t,"mapValues",(function(){return ze.a}));var He=n(16);n.d(t,"mix",(function(){return He.a})),n.d(t,"assign",(function(){return He.a}));var Ge=n(103);n.d(t,"get",(function(){return Ge.a}));var We=n(104);n.d(t,"set",(function(){return We.a}));var Ue=n(105);n.d(t,"pick",(function(){return Ue.a}));var Ve=n(106);n.d(t,"throttle",(function(){return Ve.a}));var Xe=n(107);n.d(t,"toArray",(function(){return Xe.a}));var qe=n(10);n.d(t,"toString",(function(){return qe.a}));var Ke=n(108);n.d(t,"uniqueId",(function(){return Ke.a}));var Je=n(109);n.d(t,"noop",(function(){return Je.a}));var Ze=n(110);n.d(t,"identity",(function(){return Ze.a}));var $e=n(111);n.d(t,"size",(function(){return $e.a}));var Qe=n(112);n.d(t,"Cache",(function(){return Qe.a}))},function(e,t,n){"use strict";var r=n(14),i=n(12);t.a=function(e,t){return void 0===t&&(t=[]),Object(r.a)(e,(function(e){return!Object(i.a)(t,e)}))}},function(e,t,n){"use strict";var r=n(3),i=n(19),o=n(0),a=n(9);t.a=function(e,t){if(!Object(o.a)(e))return null;var n;if(Object(r.a)(t)&&(n=t),Object(a.a)(t)&&(n=function(e){return Object(i.a)(e,t)}),n)for(var s=0;s<e.length;s+=1)if(n(e[s]))return e[s];return null}},function(e,t,n){"use strict";t.a=function(e,t,n){void 0===n&&(n=0);for(var r=n;r<e.length;r++)if(t(e[r],r))return r;return-1}},function(e,t,n){"use strict";var r=n(6),i=n(0);t.a=function(e,t){for(var n=null,o=0;o<e.length;o++){var a=e[o][t];if(!Object(r.a)(a)){n=Object(i.a)(a)?a[0]:a;break}}return n}},function(e,t,n){"use strict";var r=n(0);t.a=function(e){if(!Object(r.a)(e))return[];for(var t=[],n=0;n<e.length;n++)t=t.concat(e[n]);return t}},function(e,t,n){"use strict";var r=n(0),i=function(e,t){if(void 0===t&&(t=[]),Object(r.a)(e))for(var n=0;n<e.length;n+=1)i(e[n],t);else t.push(e);return t};t.a=i},function(e,t,n){"use strict";var r=n(0),i=n(14);t.a=function(e){if(!(e=Object(i.a)(e,(function(e){return!isNaN(e)}))).length)return{min:0,max:0};if(Object(r.a)(e[0])){for(var t=[],n=0;n<e.length;n++)t=t.concat(e[n]);e=t}var o=Math.max.apply(null,e);return{min:Math.min.apply(null,e),max:o}}},function(e,t,n){"use strict";var r=Array.prototype,i=r.splice,o=r.indexOf;t.a=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r++)for(var a=t[r],s=-1;(s=o.call(e,a))>-1;)i.call(e,s,1);return e}},function(e,t,n){"use strict";var r=n(2),i=n(0),o=n(9);t.a=function(e,t,n){if(!Object(i.a)(e)&&!Object(o.a)(e))return e;var a=n;return Object(r.a)(e,(function(e,n){a=t(a,e,n)})),a}},function(e,t,n){"use strict";var r=n(1),i=n(21);t.a=function(e,t){var n=[];if(!Object(r.a)(e))return n;for(var o=-1,a=[],s=e.length;++o<s;){var l=e[o];t(l,o,e)&&(n.push(l),a.push(o))}return Object(i.a)(e,a),n}},function(e,t,n){"use strict";var r=n(0),i=n(8),o=n(3);t.a=function(e,t){var n;if(Object(o.a)(t))n=function(e,n){return t(e)-t(n)};else{var a=[];Object(i.a)(t)?a.push(t):Object(r.a)(t)&&(a=t),n=function(e,t){for(var n=0;n<a.length;n+=1){var r=a[n];if(e[r]>t[r])return 1;if(e[r]<t[r])return-1}return 0}}return e.sort(n),e}},function(e,t,n){"use strict";var r=n(22);t.a=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Object(r.a)([].concat.apply([],e))}},function(e,t,n){"use strict";var r=n(2),i=n(0),o=n(6);t.a=function(e,t){var n=[],a={};return e.forEach((function(e){var s=e[t];Object(o.a)(s)||(Object(i.a)(s)||(s=[s]),Object(r.a)(s,(function(e){a[e]||(n.push(e),a[e]=!0)})))})),n}},function(e,t,n){"use strict";t.a=function(e){if(Object(r.a)(e))return e[0]};var r=n(1)},function(e,t,n){"use strict";t.a=function(e){if(Object(r.a)(e))return e[e.length-1]};var r=n(1)},function(e,t,n){"use strict";var r=n(0),i=n(8);t.a=function(e,t){return!(!Object(r.a)(e)&&!Object(i.a)(e))&&e[0]===t}},function(e,t,n){"use strict";var r=n(0),i=n(8);t.a=function(e,t){return!(!Object(r.a)(e)&&!Object(i.a)(e))&&e[e.length-1]===t}},function(e,t,n){"use strict";t.a=function(e,t){for(var n=0;n<e.length;n++)if(!t(e[n],n))return!1;return!0}},function(e,t,n){"use strict";t.a=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n],n))return!0;return!1}},function(e,t,n){"use strict";var r=n(23);t.a=function(e,t){if(!t)return[e];var n=Object(r.a)(e,t),i=[];for(var o in n)i.push(n[o]);return i}},function(e,t,n){"use strict";t.a=function(e,t){return e["_wrap_"+t]}},function(e,t,n){"use strict";t.a=function(e,t){if(e["_wrap_"+t])return e["_wrap_"+t];var n=function(n){e[t](n)};return e["_wrap_"+t]=n,n}},function(e,t,n){"use strict";var r={};t.a=function(e){var t=r[e];if(!t){for(var n=e.toString(16),i=n.length;i<6;i++)n="0"+n;t="#"+n,r[e]=t}return t}},function(e,t,n){"use strict";var r=n(0);t.a=function(e){var t=0,n=0,i=0,o=0;return Object(r.a)(e)?1===e.length?t=n=i=o=e[0]:2===e.length?(t=i=e[0],n=o=e[1]):3===e.length?(t=e[0],n=o=e[1],i=e[2]):(t=e[0],n=e[1],i=e[2],o=e[3]):t=n=i=o=e,{r1:t,r2:n,r3:i,r4:o}}},function(e,t,n){"use strict";t.a=function(e,t,n){return e<t?t:e>n?n:e}},function(e,t,n){"use strict";t.a=function(e,t){var n=t.toString(),r=n.indexOf(".");if(-1===r)return Math.round(e);var i=n.substr(r+1).length;return i>20&&(i=20),parseFloat(e.toFixed(i))}},function(e,t,n){"use strict";var r=n(5);t.a=function(e){return Object(r.a)(e)&&e%1!=0}},function(e,t,n){"use strict";var r=n(5);t.a=function(e){return Object(r.a)(e)&&e%2==0}},function(e,t,n){"use strict";var r=n(5),i=Number.isInteger?Number.isInteger:function(e){return Object(r.a)(e)&&e%1==0};t.a=i},function(e,t,n){"use strict";var r=n(5);t.a=function(e){return Object(r.a)(e)&&e<0}},function(e,t,n){"use strict";t.a=function(e,t,n){return void 0===n&&(n=1e-5),Math.abs(e-t)<n}},function(e,t,n){"use strict";var r=n(5);t.a=function(e){return Object(r.a)(e)&&e%2!=0}},function(e,t,n){"use strict";var r=n(5);t.a=function(e){return Object(r.a)(e)&&e>0}},function(e,t,n){"use strict";var r=n(2),i=n(0),o=n(3);t.a=function(e,t){if(Object(i.a)(e)){var n,a,s=e[0];return n=Object(o.a)(t)?t(e[0]):e[0][t],Object(r.a)(e,(function(e){(a=Object(o.a)(t)?t(e):e[t])>n&&(s=e,n=a)})),s}}},function(e,t,n){"use strict";var r=n(2),i=n(0),o=n(3);t.a=function(e,t){if(Object(i.a)(e)){var n,a,s=e[0];return n=Object(o.a)(t)?t(e[0]):e[0][t],Object(r.a)(e,(function(e){(a=Object(o.a)(t)?t(e):e[t])<n&&(s=e,n=a)})),s}}},function(e,t,n){"use strict";t.a=function(e,t){return(e%t+t)%t}},function(e,t,n){"use strict";var r=180/Math.PI;t.a=function(e){return r*e}},function(e,t,n){"use strict";t.a=parseInt},function(e,t,n){"use strict";var r=Math.PI/180;t.a=function(e){return r*e}},function(e,t,n){"use strict";var r=n(2);t.a=r.a},function(e,t,n){"use strict";var r=n(25);t.a=r.a},function(e,t,n){"use strict";var r=n(12),i=n(26);t.a=function(e,t){return Object(r.a)(Object(i.a)(e),t)}},function(e,t,n){"use strict";var r=n(10);t.a=function(e){return Object(r.a)(e).toLowerCase()}},function(e,t,n){"use strict";var r=n(10);t.a=function(e){var t=Object(r.a)(e);return t.charAt(0).toLowerCase()+t.substring(1)}},function(e,t,n){"use strict";t.a=function(e,t){return e&&t?e.replace(/\\?\{([^{}]+)\}/g,(function(e,n){return"\\"===e.charAt(0)?e.slice(1):void 0===t[n]?"":t[n]})):e}},function(e,t,n){"use strict";var r=n(10);t.a=function(e){return Object(r.a)(e).toUpperCase()}},function(e,t,n){"use strict";var r=n(10);t.a=function(e){var t=Object(r.a)(e);return t.charAt(0).toUpperCase()+t.substring(1)}},function(e,t,n){"use strict";var r=n(4);t.a=function(e){return Object(r.a)(e,"Arguments")}},function(e,t,n){"use strict";var r=n(4);t.a=function(e){return Object(r.a)(e,"Boolean")}},function(e,t,n){"use strict";var r=n(4);t.a=function(e){return Object(r.a)(e,"Date")}},function(e,t,n){"use strict";var r=n(4);t.a=function(e){return Object(r.a)(e,"Error")}},function(e,t,n){"use strict";var r=n(5);t.a=function(e){return Object(r.a)(e)&&isFinite(e)}},function(e,t,n){"use strict";t.a=function(e){return null===e}},function(e,t,n){"use strict";var r=n(4);t.a=function(e){return Object(r.a)(e,"RegExp")}},function(e,t,n){"use strict";t.a=function(e){return void 0===e}},function(e,t,n){"use strict";t.a=function(e){return e instanceof Element||e instanceof HTMLDocument}},function(e,t,n){"use strict";t.a=function(e){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,16)})(e)}},function(e,t,n){"use strict";t.a=function(e){(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout)(e)}},function(e,t,n){"use strict";var r=n(16),i=n(3);t.a=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=e[0],o=1;o<e.length;o++){var a=e[o];Object(i.a)(a)&&(a=a.prototype),Object(r.a)(n.prototype,a)}}},function(e,t,n){"use strict";var r=n(0),i=function(e){if("object"!=typeof e||null===e)return e;var t;if(Object(r.a)(e)){t=[];for(var n=0,o=e.length;n<o;n++)"object"==typeof e[n]&&null!=e[n]?t[n]=i(e[n]):t[n]=e[n]}else for(var a in t={},e)"object"==typeof e[a]&&null!=e[a]?t[a]=i(e[a]):t[a]=e[a];return t};t.a=i},function(e,t,n){"use strict";t.a=function(e,t,n){var r;return function(){var i=this,o=arguments,a=function(){r=null,n||e.apply(i,o)},s=n&&!r;clearTimeout(r),r=setTimeout(a,t),s&&e.apply(i,o)}}},function(e,t,n){"use strict";var r=n(3);t.a=function(e,t){if(!Object(r.a)(e))throw new TypeError("Expected a function");var n=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=t?t.apply(this,r):r[0],a=n.cache;if(a.has(o))return a.get(o);var s=e.apply(this,r);return a.set(o,s),s};return n.cache=new Map,n}},function(e,t,n){"use strict";var r=n(0),i=n(9);function o(e,t,n,a){for(var s in n=n||0,a=a||5,t)if(t.hasOwnProperty(s)){var l=t[s];null!==l&&Object(i.a)(l)?(Object(i.a)(e[s])||(e[s]={}),n<a?o(e[s],l,n+1,a):e[s]=t[s]):Object(r.a)(l)?(e[s]=[],e[s]=e[s].concat(l)):void 0!==l&&(e[s]=l)}}t.a=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r+=1)o(e,t[r]);return e}},function(e,t,n){"use strict";var r=n(16),i=n(3);t.a=function(e,t,n,o){Object(i.a)(t)||(n=t,t=e,e=function(){});var a=Object.create?function(e,t){return Object.create(e,{constructor:{value:t}})}:function(e,t){function n(){}n.prototype=e;var r=new n;return r.constructor=t,r},s=a(t.prototype,e);return e.prototype=Object(r.a)(s,e.prototype),e.superclass=a(t.prototype,t),Object(r.a)(s,n),Object(r.a)(e,o),e}},function(e,t,n){"use strict";var r=n(1);t.a=function(e,t){if(!Object(r.a)(e))return-1;var n=Array.prototype.indexOf;if(n)return n.call(e,t);for(var i=-1,o=0;o<e.length;o++)if(e[o]===t){i=o;break}return i}},function(e,t,n){"use strict";var r=n(6),i=n(1),o=n(27),a=n(28),s=Object.prototype.hasOwnProperty;t.a=function(e){if(Object(r.a)(e))return!0;if(Object(i.a)(e))return!e.length;var t=Object(o.a)(e);if("Map"===t||"Set"===t)return!e.size;if(Object(a.a)(e))return!Object.keys(e).length;for(var n in e)if(s.call(e,n))return!1;return!0}},function(e,t,n){"use strict";var r=n(3),i=n(29);t.a=function(e,t,n){return Object(r.a)(n)?!!n(e,t):Object(i.a)(e,t)}},function(e,t,n){"use strict";var r=n(2),i=n(1);t.a=function(e,t){if(!Object(i.a)(e))return e;var n=[];return Object(r.a)(e,(function(e,r){n.push(t(e,r))})),n}},function(e,t,n){"use strict";var r=n(6),i=n(13),o=function(e){return e};t.a=function(e,t){void 0===t&&(t=o);var n={};return Object(i.a)(e)&&!Object(r.a)(e)&&Object.keys(e).forEach((function(r){n[r]=t(e[r],r)})),n}},function(e,t,n){"use strict";var r=n(8);t.a=function(e,t,n){for(var i=0,o=Object(r.a)(t)?t.split("."):t;e&&i<o.length;)e=e[o[i++]];return void 0===e||i<o.length?n:e}},function(e,t,n){"use strict";var r=n(13),i=n(8),o=n(5);t.a=function(e,t,n){var a=e,s=Object(i.a)(t)?t.split("."):t;return s.forEach((function(e,t){t<s.length-1?(Object(r.a)(a[e])||(a[e]=Object(o.a)(s[t+1])?[]:{}),a=a[e]):a[e]=n})),e}},function(e,t,n){"use strict";var r=n(2),i=n(9),o=Object.prototype.hasOwnProperty;t.a=function(e,t){if(null===e||!Object(i.a)(e))return{};var n={};return Object(r.a)(t,(function(t){o.call(e,t)&&(n[t]=e[t])})),n}},function(e,t,n){"use strict";t.a=function(e,t,n){var r,i,o,a,s=0;n||(n={});var l=function(){s=!1===n.leading?0:Date.now(),r=null,a=e.apply(i,o),r||(i=o=null)},u=function(){var u=Date.now();s||!1!==n.leading||(s=u);var c=t-(u-s);return i=this,o=arguments,c<=0||c>t?(r&&(clearTimeout(r),r=null),s=u,a=e.apply(i,o),r||(i=o=null)):r||!1===n.trailing||(r=setTimeout(l,c)),a};return u.cancel=function(){clearTimeout(r),s=0,r=i=o=null},u}},function(e,t,n){"use strict";var r=n(1);t.a=function(e){return Object(r.a)(e)?Array.prototype.slice.call(e):[]}},function(e,t,n){"use strict";var r={};t.a=function(e){return r[e=e||"g"]?r[e]+=1:r[e]=1,e+r[e]}},function(e,t,n){"use strict";t.a=function(){}},function(e,t,n){"use strict";t.a=function(e){return e}},function(e,t,n){"use strict";t.a=function(e){return Object(r.a)(e)?0:Object(i.a)(e)?e.length:Object.keys(e).length};var r=n(6),i=n(1)},function(e,t,n){"use strict";var r=function(){function e(){this.map={}}return e.prototype.has=function(e){return void 0!==this.map[e]},e.prototype.get=function(e,t){var n=this.map[e];return void 0===n?t:n},e.prototype.set=function(e,t){this.map[e]=t},e.prototype.clear=function(){this.map={}},e.prototype.delete=function(e){delete this.map[e]},e.prototype.size=function(){return Object.keys(this.map).length},e}();t.a=r},function(e,t){function n(e,t,n,r){void 0===r&&(r=[]);var i=this;i.w=e||0,i.h=t||0,i.y=n||0,i.x=0,i.c=r||[],i.cs=r.length,i.prelim=0,i.mod=0,i.shift=0,i.change=0,i.tl=null,i.tr=null,i.el=null,i.er=null,i.msel=0,i.mser=0}function r(e,t,n){n?e.y+=t:e.x+=t,e.children.forEach((function(e){r(e,t,n)}))}function i(e,t){var n=t?e.y:e.x;return e.children.forEach((function(e){n=Math.min(i(e,t),n)})),n}function o(e,t){r(e,-i(e,t),t)}function a(e,t,n){n?t.y=e.x:t.x=e.x,e.c.forEach((function(e,r){a(e,t.children[r],n)}))}function s(e,t,n){void 0===n&&(n=0),t?(e.x=n,n+=e.width):(e.y=n,n+=e.height),e.children.forEach((function(e){s(e,t,n)}))}n.fromNode=function(e,t){if(!e)return null;var r=[];return e.children.forEach((function(e){r.push(n.fromNode(e,t))})),t?new n(e.height,e.width,e.x,r):new n(e.width,e.height,e.y,r)},e.exports=function(e,t){void 0===t&&(t={});var r=t.isHorizontal;function i(e){0===e.cs?(e.el=e,e.er=e,e.msel=e.mser=0):(e.el=e.c[0].el,e.msel=e.c[0].msel,e.er=e.c[e.cs-1].er,e.mser=e.c[e.cs-1].mser)}function l(e,t,n){for(var r=e.c[t-1],i=r.mod,o=e.c[t],a=o.mod;null!==r&&null!==o;){h(r)>n.low&&(n=n.nxt);var s=i+r.prelim+r.w-(a+o.prelim);s>0&&(a+=s,u(e,t,n.index,s));var l=h(r),f=h(o);l<=f&&null!==(r=d(r))&&(i+=r.mod),l>=f&&null!==(o=c(o))&&(a+=o.mod)}!r&&o?function(e,t,n,r){var i=e.c[0].el;i.tl=n;var o=r-n.mod-e.c[0].msel;i.mod+=o,i.prelim-=o,e.c[0].el=e.c[t].el,e.c[0].msel=e.c[t].msel}(e,t,o,a):r&&!o&&function(e,t,n,r){var i=e.c[t].er;i.tr=n;var o=r-n.mod-e.c[t].mser;i.mod+=o,i.prelim-=o,e.c[t].er=e.c[t-1].er,e.c[t].mser=e.c[t-1].mser}(e,t,r,i)}function u(e,t,n,r){e.c[t].mod+=r,e.c[t].msel+=r,e.c[t].mser+=r,function(e,t,n,r){if(n!==t-1){var i=t-n;e.c[n+1].shift+=r/i,e.c[t].shift-=r/i,e.c[t].change-=r-r/i}}(e,t,n,r)}function c(e){return 0===e.cs?e.tl:e.c[0]}function d(e){return 0===e.cs?e.tr:e.c[e.cs-1]}function h(e){return e.y+e.h}function f(e,t,n){for(;null!==n&&e>=n.low;)n=n.nxt;return{low:e,index:t,nxt:n}}s(e,r);var p=n.fromNode(e,r);return function e(t){if(0!==t.cs){e(t.c[0]);for(var n=f(h(t.c[0].el),0,null),r=1;r<t.cs;++r){e(t.c[r]);var o=h(t.c[r].er);l(t,r,n),n=f(o,r,n)}!function(e){e.prelim=(e.c[0].prelim+e.c[0].mod+e.c[e.cs-1].mod+e.c[e.cs-1].prelim+e.c[e.cs-1].w)/2-e.w/2}(t),i(t)}else i(t)}(p),function e(t,n){n+=t.mod,t.x=t.prelim+n,function(e){for(var t=0,n=0,r=0;r<e.cs;r++)n+=(t+=e.c[r].shift)+e.c[r].change,e.c[r].mod+=n}(t);for(var r=0;r<t.cs;r++)e(t.c[r],n)}(p,0),a(p,e,r),o(e,r),e}},function(e,t,n){var r=n(11),i=n(115),o=n(17),a=n(7),s=function(e){var t,n;function r(){return e.apply(this,arguments)||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.execute=function(){var e=this;return e.rootNode.width=0,o(e.rootNode,e.options,i)},r}(r),l={};e.exports=function(e,t){return t=a.assign({},l,t),new s(e,t).execute()}},function(e,t,n){var r=n(7);function i(e,t){void 0===e&&(e=0),void 0===t&&(t=[]);var n=this;n.x=n.y=0,n.leftChild=n.rightChild=null,n.height=0,n.children=t}var o={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};function a(e,t,n){n?(t.x=e.x,t.y=e.y):(t.x=e.y,t.y=e.x),e.children.forEach((function(e,r){a(e,t.children[r],n)}))}e.exports=function(e,t){void 0===t&&(t={}),t=r.assign({},o,t);var n,s=0,l=function e(t){if(!t)return null;t.width=0,t.depth&&t.depth>s&&(s=t.depth);var n=t.children,r=n.length,o=new i(t.height,[]);return n.forEach((function(t,n){var i=e(t);o.children.push(i),0===n&&(o.leftChild=i),n===r-1&&(o.rightChild=i)})),o.originNode=t,o.isLeaf=t.isLeaf(),o}(e);return function e(t){if(t.isLeaf||0===t.children.length)t.drawingDepth=s;else{var n=t.children.map((function(t){return e(t)})),r=Math.min.apply(null,n);t.drawingDepth=r-1}return t.drawingDepth}(l),function e(r){r.x=r.drawingDepth*t.rankSep,r.isLeaf?(r.y=0,n&&(r.y=n.y+n.height+t.nodeSep,r.originNode.parent!==n.originNode.parent&&(r.y+=t.subTreeSep)),n=r):(r.children.forEach((function(t){e(t)})),r.y=(r.leftChild.y+r.rightChild.y)/2)}(l),a(l,e,t.isHorizontal),e}},function(e,t,n){var r=n(11),i=n(117),o=n(30),a=n(7),s=["LR","RL","H"],l=s[0],u=function(e){var t,n;function r(){return e.apply(this,arguments)||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.execute=function(){var e=this.options,t=this.rootNode;e.isHorizontal=!0;var n=e.indent,r=void 0===n?20:n,a=e.dropCap,u=void 0===a||a,c=e.direction||l;if(c&&-1===s.indexOf(c))throw new TypeError("Invalid direction: "+c);if(c===s[0])i(t,r,u);else if(c===s[1])i(t,r,u),t.right2left();else if(c===s[2]){var d=o(t,e),h=d.left,f=d.right;i(h,r,u),h.right2left(),i(f,r,u);var p=h.getBoundingBox();f.translate(p.width,0),t.x=f.x-t.width/2}return t},r}(r),c={};e.exports=function(e,t){return t=a.assign({},c,t),new u(e,t).execute()}},function(e,t){e.exports=function(e,t,n){var r=null;e.eachNode((function(e){!function(e,t,n,r){var i="function"==typeof n?n(e):n*e.depth;if(!r)try{if(e.id===e.parent.children[0].id)return e.x+=i,void(e.y=t?t.y:0)}catch(e){}e.x+=i,e.y=t?t.y+t.height:0}(e,r,t,n),r=e}))}},function(e,t,n){var r=n(11),i=n(119),o=n(17),a=n(7),s=function(e){var t,n;function r(){return e.apply(this,arguments)||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.execute=function(){return o(this.rootNode,this.options,i)},r}(r),l={};e.exports=function(e,t){return t=a.assign({},l,t),new s(e,t).execute()}},function(e,t,n){var r=n(7);function i(e,t){var n=0;return e.children.length?e.children.forEach((function(e){n+=i(e,t)})):n=e.height,e._subTreeSep=t.getSubTreeSep(e.data),e.totalHeight=Math.max(e.height,n)+2*e._subTreeSep,e.totalHeight}function o(e){var t=e.children,n=t.length;if(n){t.forEach((function(e){o(e)}));var r=t[0],i=t[n-1],a=i.y-r.y+i.height,s=0;if(t.forEach((function(e){s+=e.totalHeight})),a>e.height)e.y=r.y+a/2-e.height/2;else if(1!==t.length||e.height>s){var l=e.y+(e.height-a)/2-r.y;t.forEach((function(e){e.translate(0,l)}))}else e.y=(r.y+r.height/2+i.y+i.height/2)/2-e.height/2}}var a={getSubTreeSep:function(){return 0}};e.exports=function(e,t){void 0===t&&(t={}),t=r.assign({},a,t),e.parent={x:0,width:0,height:0,y:0},e.BFTraverse((function(e){e.x=e.parent.x+e.parent.width})),e.parent=null,i(e,t),e.startY=0,e.y=e.totalHeight/2-e.height/2,e.eachNode((function(e){var t=e.children,n=t.length;if(n){var r=t[0];if(r.startY=e.startY+e._subTreeSep,1===n)r.y=e.y+e.height/2-r.height/2;else{r.y=r.startY+r.totalHeight/2-r.height/2;for(var i=1;i<n;i++){var o=t[i];o.startY=t[i-1].startY+t[i-1].totalHeight,o.y=o.startY+o.totalHeight/2-o.height/2}}}})),o(e)}}])},e.exports=t()},49242:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Cache:()=>kt,assign:()=>Ve,augment:()=>Xe,clamp:()=>te,clearAnimationFrame:()=>We,clone:()=>Ke,contains:()=>i,debounce:()=>Je,deepMix:()=>Qe,difference:()=>a,each:()=>f,endsWith:()=>G,every:()=>W,extend:()=>et,filter:()=>o,find:()=>y,findIndex:()=>b,firstValue:()=>_,fixedBase:()=>ne,flatten:()=>w,flattenDeep:()=>M,forIn:()=>be,get:()=>ct,getEllipsisText:()=>St,getRange:()=>k,getType:()=>Ae,getWrapBehavior:()=>J,group:()=>K,groupBy:()=>X,groupToMap:()=>q,has:()=>_e,hasKey:()=>we,hasValue:()=>Me,head:()=>B,identity:()=>_t,includes:()=>i,indexOf:()=>tt,isArguments:()=>Pe,isArray:()=>d,isArrayLike:()=>r,isBoolean:()=>Oe,isDate:()=>Ie,isDecimal:()=>ie,isElement:()=>He,isEmpty:()=>rt,isEqual:()=>ot,isEqualWith:()=>at,isError:()=>Re,isEven:()=>oe,isFinite:()=>Ne,isFunction:()=>u,isInteger:()=>ae,isMatch:()=>m,isNegative:()=>se,isNil:()=>c,isNull:()=>Ye,isNumber:()=>re,isNumberEqual:()=>le,isObject:()=>h,isObjectLike:()=>g,isOdd:()=>ue,isPlainObject:()=>v,isPositive:()=>ce,isPrototype:()=>Fe,isRegExp:()=>Be,isString:()=>R,isType:()=>l,isUndefined:()=>ze,keys:()=>p,last:()=>z,lowerCase:()=>Se,lowerFirst:()=>ke,map:()=>st,mapValues:()=>ut,max:()=>E,maxBy:()=>de,measureTextWidth:()=>Et,memoize:()=>Ze,min:()=>S,minBy:()=>he,mix:()=>Ve,mod:()=>fe,noop:()=>bt,number2color:()=>Q,omit:()=>pt,parseRadius:()=>ee,pick:()=>ft,pull:()=>D,pullAt:()=>P,reduce:()=>O,remove:()=>I,requestAnimationFrame:()=>Ge,set:()=>dt,size:()=>wt,some:()=>U,sortBy:()=>N,startsWith:()=>H,substitute:()=>Te,throttle:()=>mt,toArray:()=>gt,toDegree:()=>me,toInteger:()=>ge,toRadian:()=>ye,toString:()=>Ee,union:()=>j,uniq:()=>Y,uniqueId:()=>yt,upperCase:()=>Le,upperFirst:()=>Ce,values:()=>xe,valuesOfKey:()=>F,wrapBehavior:()=>Z});const r=function(e){return null!==e&&"function"!=typeof e&&isFinite(e.length)};const i=function(e,t){return!!r(e)&&e.indexOf(t)>-1};const o=function(e,t){if(!r(e))return e;for(var n=[],i=0;i<e.length;i++){var o=e[i];t(o,i)&&n.push(o)}return n};const a=function(e,t){return void 0===t&&(t=[]),o(e,(function(e){return!i(t,e)}))};var s={}.toString;const l=function(e,t){return s.call(e)==="[object "+t+"]"},u=function(e){return l(e,"Function")};const c=function(e){return null==e},d=function(e){return Array.isArray?Array.isArray(e):l(e,"Array")},h=function(e){var t=typeof e;return null!==e&&"object"===t||"function"===t};const f=function(e,t){if(e)if(d(e))for(var n=0,r=e.length;n<r&&!1!==t(e[n],n);n++);else if(h(e))for(var i in e)if(e.hasOwnProperty(i)&&!1===t(e[i],i))break};const p=Object.keys?function(e){return Object.keys(e)}:function(e){var t=[];return f(e,(function(n,r){u(e)&&"prototype"===r||t.push(r)})),t};const m=function(e,t){var n=p(t),r=n.length;if(c(e))return!r;for(var i=0;i<r;i+=1){var o=n[i];if(t[o]!==e[o]||!(o in e))return!1}return!0};const g=function(e){return"object"==typeof e&&null!==e};const v=function(e){if(!g(e)||!l(e,"Object"))return!1;if(null===Object.getPrototypeOf(e))return!0;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t};const y=function(e,t){if(!d(e))return null;var n;if(u(t)&&(n=t),v(t)&&(n=function(e){return m(e,t)}),n)for(var r=0;r<e.length;r+=1)if(n(e[r]))return e[r];return null};const b=function(e,t,n){void 0===n&&(n=0);for(var r=n;r<e.length;r++)if(t(e[r],r))return r;return-1};const _=function(e,t){for(var n=null,r=0;r<e.length;r++){var i=e[r][t];if(!c(i)){n=d(i)?i[0]:i;break}}return n};const w=function(e){if(!d(e))return[];for(var t=[],n=0;n<e.length;n++)t=t.concat(e[n]);return t};var x=function(e,t){if(void 0===t&&(t=[]),d(e))for(var n=0;n<e.length;n+=1)x(e[n],t);else t.push(e);return t};const M=x,E=function(e){if(d(e))return e.reduce((function(e,t){return Math.max(e,t)}),e[0])},S=function(e){if(d(e))return e.reduce((function(e,t){return Math.min(e,t)}),e[0])};const k=function(e){var t=e.filter((function(e){return!isNaN(e)}));if(!t.length)return{min:0,max:0};if(d(e[0])){for(var n=[],r=0;r<e.length;r++)n=n.concat(e[r]);t=n}var i=E(t);return{min:S(t),max:i}};var T=Array.prototype,L=T.splice,C=T.indexOf;const D=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r++)for(var i=t[r],o=-1;(o=C.call(e,i))>-1;)L.call(e,o,1);return e};var A=Array.prototype.splice;const P=function(e,t){if(!r(e))return[];for(var n=e?t.length:0,i=n-1;n--;){var o=void 0,a=t[n];n!==i&&a===o||(o=a,A.call(e,a,1))}return e};const O=function(e,t,n){if(!d(e)&&!v(e))return e;var r=n;return f(e,(function(e,n){r=t(r,e,n)})),r};const I=function(e,t){var n=[];if(!r(e))return n;for(var i=-1,o=[],a=e.length;++i<a;){var s=e[i];t(s,i,e)&&(n.push(s),o.push(i))}return P(e,o),n},R=function(e){return l(e,"String")};const N=function(e,t){var n;if(u(t))n=function(e,n){return t(e)-t(n)};else{var r=[];R(t)?r.push(t):d(t)&&(r=t),n=function(e,t){for(var n=0;n<r.length;n+=1){var i=r[n];if(e[i]>t[i])return 1;if(e[i]<t[i])return-1}return 0}}return e.sort(n),e};function Y(e,t){void 0===t&&(t=new Map);var n=[];if(Array.isArray(e))for(var r=0,i=e.length;r<i;r++){var o=e[r];t.has(o)||(n.push(o),t.set(o,!0))}return n}const j=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Y([].concat.apply([],e))},F=function(e,t){for(var n=[],r={},i=0;i<e.length;i++){var o=e[i][t];if(!c(o)){d(o)||(o=[o]);for(var a=0;a<o.length;a++){var s=o[a];r[s]||(n.push(s),r[s]=!0)}}}return n};function B(e){if(r(e))return e[0]}function z(e){if(r(e)){return e[e.length-1]}}const H=function(e,t){return!(!d(e)&&!R(e))&&e[0]===t};const G=function(e,t){return!(!d(e)&&!R(e))&&e[e.length-1]===t};const W=function(e,t){for(var n=0;n<e.length;n++)if(!t(e[n],n))return!1;return!0};const U=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n],n))return!0;return!1};var V=Object.prototype.hasOwnProperty;const X=function(e,t){if(!t||!d(e))return{};for(var n,r={},i=u(t)?t:function(e){return e[t]},o=0;o<e.length;o++){var a=e[o];n=i(a),V.call(r,n)?r[n].push(a):r[n]=[a]}return r};function q(e,t){if(!t)return{0:e};if(!u(t)){var n=d(t)?t:t.replace(/\s+/g,"").split("*");t=function(e){for(var t="_",r=0,i=n.length;r<i;r++)t+=e[n[r]]&&e[n[r]].toString();return t}}return X(e,t)}const K=function(e,t){if(!t)return[e];var n=q(e,t),r=[];for(var i in n)r.push(n[i]);return r};const J=function(e,t){return e["_wrap_"+t]};const Z=function(e,t){if(e["_wrap_"+t])return e["_wrap_"+t];var n=function(n){e[t](n)};return e["_wrap_"+t]=n,n};var $={};const Q=function(e){var t=$[e];if(!t){for(var n=e.toString(16),r=n.length;r<6;r++)n="0"+n;t="#"+n,$[e]=t}return t};const ee=function(e){var t=0,n=0,r=0,i=0;return d(e)?1===e.length?t=n=r=i=e[0]:2===e.length?(t=r=e[0],n=i=e[1]):3===e.length?(t=e[0],n=i=e[1],r=e[2]):(t=e[0],n=e[1],r=e[2],i=e[3]):t=n=r=i=e,{r1:t,r2:n,r3:r,r4:i}};const te=function(e,t,n){return e<t?t:e>n?n:e};const ne=function(e,t){var n=t.toString(),r=n.indexOf(".");if(-1===r)return Math.round(e);var i=n.substr(r+1).length;return i>20&&(i=20),parseFloat(e.toFixed(i))};const re=function(e){return l(e,"Number")};const ie=function(e){return re(e)&&e%1!=0};const oe=function(e){return re(e)&&e%2==0};const ae=Number.isInteger?Number.isInteger:function(e){return re(e)&&e%1==0};const se=function(e){return re(e)&&e<0};function le(e,t,n){return void 0===n&&(n=1e-5),Math.abs(e-t)<n}const ue=function(e){return re(e)&&e%2!=0};const ce=function(e){return re(e)&&e>0},de=function(e,t){if(d(e)){for(var n,r=-1/0,i=0;i<e.length;i++){var o=e[i],a=u(t)?t(o):o[t];a>r&&(n=o,r=a)}return n}},he=function(e,t){if(d(e)){for(var n,r=1/0,i=0;i<e.length;i++){var o=e[i],a=u(t)?t(o):o[t];a<r&&(n=o,r=a)}return n}};const fe=function(e,t){return(e%t+t)%t};var pe=180/Math.PI;const me=function(e){return pe*e},ge=parseInt;var ve=Math.PI/180;const ye=function(e){return ve*e},be=f,_e=function(e,t){return e.hasOwnProperty(t)},we=_e;const xe=Object.values?function(e){return Object.values(e)}:function(e){var t=[];return f(e,(function(n,r){u(e)&&"prototype"===r||t.push(n)})),t},Me=function(e,t){return i(xe(e),t)},Ee=function(e){return c(e)?"":e.toString()};const Se=function(e){return Ee(e).toLowerCase()};const ke=function(e){var t=Ee(e);return t.charAt(0).toLowerCase()+t.substring(1)};const Te=function(e,t){return e&&t?e.replace(/\\?\{([^{}]+)\}/g,(function(e,n){return"\\"===e.charAt(0)?e.slice(1):void 0===t[n]?"":t[n]})):e};const Le=function(e){return Ee(e).toUpperCase()};const Ce=function(e){var t=Ee(e);return t.charAt(0).toUpperCase()+t.substring(1)};var De={}.toString;const Ae=function(e){return De.call(e).replace(/^\[object /,"").replace(/]$/,"")};const Pe=function(e){return l(e,"Arguments")};const Oe=function(e){return l(e,"Boolean")};const Ie=function(e){return l(e,"Date")};const Re=function(e){return l(e,"Error")};function Ne(e){return re(e)&&isFinite(e)}const Ye=function(e){return null===e};var je=Object.prototype;const Fe=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||je)};const Be=function(e){return l(e,"RegExp")};const ze=function(e){return void 0===e};const He=function(e){return e instanceof Element||e instanceof HTMLDocument};function Ge(e){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,16)})(e)}function We(e){(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout)(e)}function Ue(e,t){for(var n in t)t.hasOwnProperty(n)&&"constructor"!==n&&void 0!==t[n]&&(e[n]=t[n])}function Ve(e,t,n,r){return t&&Ue(e,t),n&&Ue(e,n),r&&Ue(e,r),e}const Xe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=e[0],r=1;r<e.length;r++){var i=e[r];u(i)&&(i=i.prototype),Ve(n.prototype,i)}};var qe=function(e){if("object"!=typeof e||null===e)return e;var t;if(d(e)){t=[];for(var n=0,r=e.length;n<r;n++)"object"==typeof e[n]&&null!=e[n]?t[n]=qe(e[n]):t[n]=e[n]}else for(var i in t={},e)"object"==typeof e[i]&&null!=e[i]?t[i]=qe(e[i]):t[i]=e[i];return t};const Ke=qe;const Je=function(e,t,n){var r;return function(){var i=this,o=arguments,a=function(){r=null,n||e.apply(i,o)},s=n&&!r;clearTimeout(r),r=setTimeout(a,t),s&&e.apply(i,o)}},Ze=function(e,t){if(!u(e))throw new TypeError("Expected a function");var n=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=t?t.apply(this,r):r[0],a=n.cache;if(a.has(o))return a.get(o);var s=e.apply(this,r);return a.set(o,s),s};return n.cache=new Map,n};function $e(e,t,n,r){for(var i in n=n||0,r=r||5,t)if(t.hasOwnProperty(i)){var o=t[i];null!==o&&v(o)?(v(e[i])||(e[i]={}),n<r?$e(e[i],o,n+1,r):e[i]=t[i]):d(o)?(e[i]=[],e[i]=e[i].concat(o)):void 0!==o&&(e[i]=o)}}const Qe=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r+=1)$e(e,t[r]);return e};const et=function(e,t,n,r){u(t)||(n=t,t=e,e=function(){});var i=Object.create?function(e,t){return Object.create(e,{constructor:{value:t}})}:function(e,t){function n(){}n.prototype=e;var r=new n;return r.constructor=t,r},o=i(t.prototype,e);return e.prototype=Ve(o,e.prototype),e.superclass=i(t.prototype,t),Ve(o,n),Ve(e,r),e};const tt=function(e,t){if(!r(e))return-1;var n=Array.prototype.indexOf;if(n)return n.call(e,t);for(var i=-1,o=0;o<e.length;o++)if(e[o]===t){i=o;break}return i};var nt=Object.prototype.hasOwnProperty;const rt=function(e){if(c(e))return!0;if(r(e))return!e.length;var t=Ae(e);if("Map"===t||"Set"===t)return!e.size;if(Fe(e))return!Object.keys(e).length;for(var n in e)if(nt.call(e,n))return!1;return!0};var it=function(e,t){if(e===t)return!0;if(!e||!t)return!1;if(R(e)||R(t))return!1;if(r(e)||r(t)){if(e.length!==t.length)return!1;for(var n=!0,i=0;i<e.length&&(n=it(e[i],t[i]));i++);return n}if(g(e)||g(t)){var o=Object.keys(e),a=Object.keys(t);if(o.length!==a.length)return!1;for(n=!0,i=0;i<o.length&&(n=it(e[o[i]],t[o[i]]));i++);return n}return!1};const ot=it,at=function(e,t,n){return u(n)?!!n(e,t):ot(e,t)};const st=function(e,t){if(!r(e))return e;for(var n=[],i=0;i<e.length;i++){var o=e[i];n.push(t(o,i))}return n};var lt=function(e){return e};const ut=function(e,t){void 0===t&&(t=lt);var n={};return h(e)&&!c(e)&&Object.keys(e).forEach((function(r){n[r]=t(e[r],r)})),n},ct=function(e,t,n){for(var r=0,i=R(t)?t.split("."):t;e&&r<i.length;)e=e[i[r++]];return void 0===e||r<i.length?n:e},dt=function(e,t,n){var r=e,i=R(t)?t.split("."):t;return i.forEach((function(e,t){t<i.length-1?(h(r[e])||(r[e]=re(i[t+1])?[]:{}),r=r[e]):r[e]=n})),e};var ht=Object.prototype.hasOwnProperty;const ft=function(e,t){if(null===e||!v(e))return{};var n={};return f(t,(function(t){ht.call(e,t)&&(n[t]=e[t])})),n},pt=function(e,t){return O(e,(function(e,n,r){return t.includes(r)||(e[r]=n),e}),{})},mt=function(e,t,n){var r,i,o,a,s=0;n||(n={});var l=function(){s=!1===n.leading?0:Date.now(),r=null,a=e.apply(i,o),r||(i=o=null)},u=function(){var u=Date.now();s||!1!==n.leading||(s=u);var c=t-(u-s);return i=this,o=arguments,c<=0||c>t?(r&&(clearTimeout(r),r=null),s=u,a=e.apply(i,o),r||(i=o=null)):r||!1===n.trailing||(r=setTimeout(l,c)),a};return u.cancel=function(){clearTimeout(r),s=0,r=i=o=null},u},gt=function(e){return r(e)?Array.prototype.slice.call(e):[]};var vt={};const yt=function(e){return vt[e=e||"g"]?vt[e]+=1:vt[e]=1,e+vt[e]},bt=function(){},_t=function(e){return e};function wt(e){return c(e)?0:r(e)?e.length:Object.keys(e).length}var xt,Mt=n(70655);const Et=Ze((function(e,t){void 0===t&&(t={});var n=t.fontSize,r=t.fontFamily,i=t.fontWeight,o=t.fontStyle,a=t.fontVariant;return xt||(xt=document.createElement("canvas").getContext("2d")),xt.font=[o,a,i,n+"px",r].join(" "),xt.measureText(R(e)?e:"").width}),(function(e,t){return void 0===t&&(t={}),(0,Mt.__spreadArrays)([e],xe(t)).join("")})),St=function(e,t,n,r){void 0===r&&(r="...");var i,o,a=Et(r,n),s=R(e)?e:Ee(e),l=t,u=[];if(Et(e,n)<=t)return e;for(;i=s.substr(0,16),!((o=Et(i,n))+a>l&&o>l);)if(u.push(i),l-=o,!(s=s.substr(16)))return u.join("");for(;i=s.substr(0,1),!((o=Et(i,n))+a>l);)if(u.push(i),l-=o,!(s=s.substr(1)))return u.join("");return""+u.join("")+r};const kt=function(){function e(){this.map={}}return e.prototype.has=function(e){return void 0!==this.map[e]},e.prototype.get=function(e,t){var n=this.map[e];return void 0===n?t:n},e.prototype.set=function(e,t){this.map[e]=t},e.prototype.clear=function(){this.map={}},e.prototype.delete=function(e){delete this.map[e]},e.prototype.size=function(){return Object.keys(this.map).length},e}()},87757:(e,t,n)=>{e.exports=n(35666)},49469:(e,t)=>{"use strict";(function(e){e.TextureCompressionBC="texture-compression-bc"})(t.UX||(t.UX={})),function(e){e.ClampToEdge="clamp-to-edge",e.Repeat="repeat",e.MirrorRepeat="mirror-repeat"}(t.OB||(t.OB={})),function(e){e.UniformBuffer="uniform-buffer",e.StorageBuffer="storage-buffer",e.ReadonlyStorageBuffer="readonly-storage-buffer",e.Sampler="sampler",e.ComparisonSampler="comparison-sampler",e.SampledTexture="sampled-texture",e.ReadonlyStorageTexture="readonly-storage-texture",e.WriteonlyStorageTexture="writeonly-storage-texture"}(t.$l||(t.$l={})),function(e){e.Zero="zero",e.One="one",e.SrcColor="src-color",e.OneMinusSrcColor="one-minus-src-color",e.SrcAlpha="src-alpha",e.OneMinusSrcAlpha="one-minus-src-alpha",e.DstColor="dst-color",e.OneMinusDstColor="one-minus-dst-color",e.DstAlpha="dst-alpha",e.OneMinusDstAlpha="one-minus-dst-alpha",e.SrcAlphaSaturated="src-alpha-saturated",e.BlendColor="blend-color",e.OneMinusBlendColor="one-minus-blend-color"}(t.zi||(t.zi={})),function(e){e.Add="add",e.Subtract="subtract",e.ReverseSubtract="reverse-subtract",e.Min="min",e.Max="max"}(t.db||(t.db={})),function(e){e.Never="never",e.Less="less",e.Equal="equal",e.LessEqual="less-equal",e.Greater="greater",e.NotEqual="not-equal",e.GreaterEqual="greater-equal",e.Always="always"}(t.wb||(t.wb={})),function(e){e.None="none",e.Front="front",e.Back="back"}(t.Wf||(t.Wf={})),function(e){e.Nearest="nearest",e.Linear="linear"}(t.X9||(t.X9={})),function(e){e.CCW="ccw",e.CW="cw"}(t.zX||(t.zX={})),function(e){e.Uint16="uint16",e.Uint32="uint32"}(t.iD||(t.iD={})),function(e){e.Vertex="vertex",e.Instance="instance"}(t.V||(t.V={})),function(e){e.Load="load"}(t.Ws||(t.Ws={})),function(e){e.PointList="point-list",e.LineList="line-list",e.LineStrip="line-strip",e.TriangleList="triangle-list",e.TriangleStrip="triangle-strip"}(t.YV||(t.YV={})),function(e){e.Keep="keep",e.Zero="zero",e.Replace="replace",e.Invert="invert",e.IncrementClamp="increment-clamp",e.DecrementClamp="decrement-clamp",e.IncrementWrap="increment-wrap",e.DecrementWrap="decrement-wrap"}(t.xS||(t.xS={})),function(e){e.Store="store",e.Clear="clear"}(t.EG||(t.EG={})),function(e){e.E1d="1d",e.E2d="2d",e.E3d="3d"}(t.kd||(t.kd={})),function(e){e.R8Unorm="r8unorm",e.R8Snorm="r8snorm",e.R8Uint="r8uint",e.R8Sint="r8sint",e.R16Uint="r16uint",e.R16Sint="r16sint",e.R16Float="r16float",e.RG8Unorm="rg8unorm",e.RG8Snorm="rg8snorm",e.RG8Uint="rg8uint",e.RG8Sint="rg8sint",e.R32Uint="r32uint",e.R32Sint="r32sint",e.R32Float="r32float",e.RG16Uint="rg16uint",e.RG16Sint="rg16sint",e.RG16Float="rg16float",e.RGBA8Unorm="rgba8unorm",e.RGBA8UnormSRGB="rgba8unorm-srgb",e.RGBA8Snorm="rgba8snorm",e.RGBA8Uint="rgba8uint",e.RGBA8Sint="rgba8sint",e.BGRA8Unorm="bgra8unorm",e.BGRA8UnormSRGB="bgra8unorm-srgb",e.RGB10A2Unorm="rgb10a2unorm",e.RG11B10Float="rg11b10float",e.RG32Uint="rg32uint",e.RG32Sint="rg32sint",e.RG32Float="rg32float",e.RGBA16Uint="rgba16uint",e.RGBA16Sint="rgba16sint",e.RGBA16Float="rgba16float",e.RGBA32Uint="rgba32uint",e.RGBA32Sint="rgba32sint",e.RGBA32Float="rgba32float",e.Depth32Float="depth32float",e.Depth24Plus="depth24plus",e.Depth24PlusStencil8="depth24plus-stencil8"}(t.EV||(t.EV={})),function(e){e.Float="float",e.Sint="sint",e.Uint="uint"}(t.Ek||(t.Ek={})),function(e){e.E1d="1d",e.E2d="2d",e.E2dArray="2d-array",e.Cube="cube",e.CubeArray="cube-array",e.E3d="3d"}(t.p_||(t.p_={})),function(e){e.Uchar2="uchar2",e.Uchar4="uchar4",e.Char2="char2",e.Char4="char4",e.Uchar2Norm="uchar2norm",e.Uchar4Norm="uchar4norm",e.Char2Norm="char2norm",e.Char4Norm="char4norm",e.Ushort2="ushort2",e.Ushort4="ushort4",e.Short2="short2",e.Short4="short4",e.Ushort2Norm="ushort2norm",e.Ushort4Norm="ushort4norm",e.Short2Norm="short2norm",e.Short4Norm="short4norm",e.Half2="half2",e.Half4="half4",e.Float="float",e.Float2="float2",e.Float3="float3",e.Float4="float4",e.Uint="uint",e.Uint2="uint2",e.Uint3="uint3",e.Uint4="uint4",e.Int="int",e.Int2="int2",e.Int3="int3",e.Int4="int4"}(t.gB||(t.gB={})),function(e){e.All="all",e.StencilOnly="stencil-only",e.DepthOnly="depth-only"}(t.H7||(t.H7={})),function(e){e.Error="error",e.Warning="warning",e.Info="info"}(t.mj||(t.mj={})),function(e){e.Occlusion="occlusion"}(t.xL||(t.xL={})),function(e){e[e.MapRead=1]="MapRead",e[e.MapWrite=2]="MapWrite",e[e.CopySrc=4]="CopySrc",e[e.CopyDst=8]="CopyDst",e[e.Index=16]="Index",e[e.Vertex=32]="Vertex",e[e.Uniform=64]="Uniform",e[e.Storage=128]="Storage",e[e.Indirect=256]="Indirect",e[e.QueryResolve=512]="QueryResolve"}(t.FB||(t.FB={})),function(e){e[e.Red=1]="Red",e[e.Green=2]="Green",e[e.Blue=4]="Blue",e[e.Alpha=8]="Alpha",e[e.All=15]="All"}(t.Yw||(t.Yw={})),function(e){e[e.Vertex=1]="Vertex",e[e.Fragment=2]="Fragment",e[e.Compute=4]="Compute"}(t.$X||(t.$X={})),function(e){e[e.CopySrc=1]="CopySrc",e[e.CopyDst=2]="CopyDst",e[e.Sampled=4]="Sampled",e[e.Storage=8]="Storage",e[e.OutputAttachment=16]="OutputAttachment"}(t.v2||(t.v2={})),function(e){e[e.Read=1]="Read",e[e.Write=2]="Write"}(t.gc||(t.gc={}))},9669:(e,t,n)=>{e.exports=n(51609)},55448:(e,t,n)=>{"use strict";var r=n(64867),i=n(36026),o=n(4372),a=n(15327),s=n(94097),l=n(84109),u=n(67985),c=n(85061);e.exports=function(e){return new Promise((function(t,n){var d=e.data,h=e.headers,f=e.responseType;r.isFormData(d)&&delete h["Content-Type"];var p=new XMLHttpRequest;if(e.auth){var m=e.auth.username||"",g=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";h.Authorization="Basic "+btoa(m+":"+g)}var v=s(e.baseURL,e.url);function y(){if(p){var r="getAllResponseHeaders"in p?l(p.getAllResponseHeaders()):null,o={data:f&&"text"!==f&&"json"!==f?p.response:p.responseText,status:p.status,statusText:p.statusText,headers:r,config:e,request:p};i(t,n,o),p=null}}if(p.open(e.method.toUpperCase(),a(v,e.params,e.paramsSerializer),!0),p.timeout=e.timeout,"onloadend"in p?p.onloadend=y:p.onreadystatechange=function(){p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))&&setTimeout(y)},p.onabort=function(){p&&(n(c("Request aborted",e,"ECONNABORTED",p)),p=null)},p.onerror=function(){n(c("Network Error",e,null,p)),p=null},p.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(c(t,e,e.transitional&&e.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",p)),p=null},r.isStandardBrowserEnv()){var b=(e.withCredentials||u(v))&&e.xsrfCookieName?o.read(e.xsrfCookieName):void 0;b&&(h[e.xsrfHeaderName]=b)}"setRequestHeader"in p&&r.forEach(h,(function(e,t){void 0===d&&"content-type"===t.toLowerCase()?delete h[t]:p.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(p.withCredentials=!!e.withCredentials),f&&"json"!==f&&(p.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&p.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){p&&(p.abort(),n(e),p=null)})),d||(d=null),p.send(d)}))}},51609:(e,t,n)=>{"use strict";var r=n(64867),i=n(91849),o=n(30321),a=n(47185);function s(e){var t=new o(e),n=i(o.prototype.request,t);return r.extend(n,o.prototype,t),r.extend(n,t),n}var l=s(n(45655));l.Axios=o,l.create=function(e){return s(a(l.defaults,e))},l.Cancel=n(65263),l.CancelToken=n(14972),l.isCancel=n(26502),l.all=function(e){return Promise.all(e)},l.spread=n(8713),l.isAxiosError=n(16268),e.exports=l,e.exports.default=l},65263:e=>{"use strict";function t(e){this.message=e}t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,e.exports=t},14972:(e,t,n)=>{"use strict";var r=n(65263);function i(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var e;return{token:new i((function(t){e=t})),cancel:e}},e.exports=i},26502:e=>{"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},30321:(e,t,n)=>{"use strict";var r=n(64867),i=n(15327),o=n(80782),a=n(13572),s=n(47185),l=n(54875),u=l.validators;function c(e){this.defaults=e,this.interceptors={request:new o,response:new o}}c.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=s(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=e.transitional;void 0!==t&&l.assertOptions(t,{silentJSONParsing:u.transitional(u.boolean,"1.0.0"),forcedJSONParsing:u.transitional(u.boolean,"1.0.0"),clarifyTimeoutError:u.transitional(u.boolean,"1.0.0")},!1);var n=[],r=!0;this.interceptors.request.forEach((function(t){"function"==typeof t.runWhen&&!1===t.runWhen(e)||(r=r&&t.synchronous,n.unshift(t.fulfilled,t.rejected))}));var i,o=[];if(this.interceptors.response.forEach((function(e){o.push(e.fulfilled,e.rejected)})),!r){var c=[a,void 0];for(Array.prototype.unshift.apply(c,n),c=c.concat(o),i=Promise.resolve(e);c.length;)i=i.then(c.shift(),c.shift());return i}for(var d=e;n.length;){var h=n.shift(),f=n.shift();try{d=h(d)}catch(e){f(e);break}}try{i=a(d)}catch(e){return Promise.reject(e)}for(;o.length;)i=i.then(o.shift(),o.shift());return i},c.prototype.getUri=function(e){return e=s(this.defaults,e),i(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){c.prototype[e]=function(t,n){return this.request(s(n||{},{method:e,url:t,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){c.prototype[e]=function(t,n,r){return this.request(s(r||{},{method:e,url:t,data:n}))}})),e.exports=c},80782:(e,t,n)=>{"use strict";var r=n(64867);function i(){this.handlers=[]}i.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=i},94097:(e,t,n)=>{"use strict";var r=n(91793),i=n(7303);e.exports=function(e,t){return e&&!r(t)?i(e,t):t}},85061:(e,t,n)=>{"use strict";var r=n(80481);e.exports=function(e,t,n,i,o){var a=new Error(e);return r(a,t,n,i,o)}},13572:(e,t,n)=>{"use strict";var r=n(64867),i=n(18527),o=n(26502),a=n(45655);function s(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return s(e),e.headers=e.headers||{},e.data=i.call(e,e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||a.adapter)(e).then((function(t){return s(e),t.data=i.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return o(t)||(s(e),t&&t.response&&(t.response.data=i.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},80481:e=>{"use strict";e.exports=function(e,t,n,r,i){return e.config=t,n&&(e.code=n),e.request=r,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},47185:(e,t,n)=>{"use strict";var r=n(64867);e.exports=function(e,t){t=t||{};var n={},i=["url","method","data"],o=["headers","auth","proxy","params"],a=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],s=["validateStatus"];function l(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function u(i){r.isUndefined(t[i])?r.isUndefined(e[i])||(n[i]=l(void 0,e[i])):n[i]=l(e[i],t[i])}r.forEach(i,(function(e){r.isUndefined(t[e])||(n[e]=l(void 0,t[e]))})),r.forEach(o,u),r.forEach(a,(function(i){r.isUndefined(t[i])?r.isUndefined(e[i])||(n[i]=l(void 0,e[i])):n[i]=l(void 0,t[i])})),r.forEach(s,(function(r){r in t?n[r]=l(e[r],t[r]):r in e&&(n[r]=l(void 0,e[r]))}));var c=i.concat(o).concat(a).concat(s),d=Object.keys(e).concat(Object.keys(t)).filter((function(e){return-1===c.indexOf(e)}));return r.forEach(d,u),n}},36026:(e,t,n)=>{"use strict";var r=n(85061);e.exports=function(e,t,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},18527:(e,t,n)=>{"use strict";var r=n(64867),i=n(45655);e.exports=function(e,t,n){var o=this||i;return r.forEach(n,(function(n){e=n.call(o,e,t)})),e}},45655:(e,t,n)=>{"use strict";var r=n(64867),i=n(16016),o=n(80481),a={"Content-Type":"application/x-www-form-urlencoded"};function s(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var l,u={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(l=n(55448)),l),transformRequest:[function(e,t){return i(t,"Accept"),i(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(s(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)||t&&"application/json"===t["Content-Type"]?(s(t,"application/json"),function(e,t,n){if(r.isString(e))try{return(t||JSON.parse)(e),r.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional,n=t&&t.silentJSONParsing,i=t&&t.forcedJSONParsing,a=!n&&"json"===this.responseType;if(a||i&&r.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(a){if("SyntaxError"===e.name)throw o(e,this,"E_JSON_PARSE");throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300}};u.headers={common:{Accept:"application/json, text/plain, */*"}},r.forEach(["delete","get","head"],(function(e){u.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){u.headers[e]=r.merge(a)})),e.exports=u},91849:e=>{"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},15327:(e,t,n)=>{"use strict";var r=n(64867);function i(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var o;if(n)o=n(t);else if(r.isURLSearchParams(t))o=t.toString();else{var a=[];r.forEach(t,(function(e,t){null!=e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),a.push(i(t)+"="+i(e))})))})),o=a.join("&")}if(o){var s=e.indexOf("#");-1!==s&&(e=e.slice(0,s)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}},7303:e=>{"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},4372:(e,t,n)=>{"use strict";var r=n(64867);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,i,o,a){var s=[];s.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(i)&&s.push("path="+i),r.isString(o)&&s.push("domain="+o),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},91793:e=>{"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},16268:e=>{"use strict";e.exports=function(e){return"object"==typeof e&&!0===e.isAxiosError}},67985:(e,t,n)=>{"use strict";var r=n(64867);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=i(window.location.href),function(t){var n=r.isString(t)?i(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},16016:(e,t,n)=>{"use strict";var r=n(64867);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},84109:(e,t,n)=>{"use strict";var r=n(64867),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,o,a={};return e?(r.forEach(e.split("\n"),(function(e){if(o=e.indexOf(":"),t=r.trim(e.substr(0,o)).toLowerCase(),n=r.trim(e.substr(o+1)),t){if(a[t]&&i.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([n]):a[t]?a[t]+", "+n:n}})),a):a}},8713:e=>{"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},54875:(e,t,n)=>{"use strict";var r=n(88593),i={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){i[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var o={},a=r.version.split(".");function s(e,t){for(var n=t?t.split("."):a,r=e.split("."),i=0;i<3;i++){if(n[i]>r[i])return!0;if(n[i]<r[i])return!1}return!1}i.transitional=function(e,t,n){var i=t&&s(t);function a(e,t){return"[Axios v"+r.version+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,r,s){if(!1===e)throw new Error(a(r," has been removed in "+t));return i&&!o[r]&&(o[r]=!0,console.warn(a(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,s)}},e.exports={isOlderVersion:s,assertOptions:function(e,t,n){if("object"!=typeof e)throw new TypeError("options must be an object");for(var r=Object.keys(e),i=r.length;i-- >0;){var o=r[i],a=t[o];if(a){var s=e[o],l=void 0===s||a(s,o,e);if(!0!==l)throw new TypeError("option "+o+" must be "+l)}else if(!0!==n)throw Error("Unknown option "+o)}},validators:i}},64867:(e,t,n)=>{"use strict";var r=n(91849),i=Object.prototype.toString;function o(e){return"[object Array]"===i.call(e)}function a(e){return void 0===e}function s(e){return null!==e&&"object"==typeof e}function l(e){if("[object Object]"!==i.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function u(e){return"[object Function]"===i.call(e)}function c(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),o(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}e.exports={isArray:o,isArrayBuffer:function(e){return"[object ArrayBuffer]"===i.call(e)},isBuffer:function(e){return null!==e&&!a(e)&&null!==e.constructor&&!a(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:s,isPlainObject:l,isUndefined:a,isDate:function(e){return"[object Date]"===i.call(e)},isFile:function(e){return"[object File]"===i.call(e)},isBlob:function(e){return"[object Blob]"===i.call(e)},isFunction:u,isStream:function(e){return s(e)&&u(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:c,merge:function e(){var t={};function n(n,r){l(t[r])&&l(n)?t[r]=e(t[r],n):l(n)?t[r]=e({},n):o(n)?t[r]=n.slice():t[r]=n}for(var r=0,i=arguments.length;r<i;r++)c(arguments[r],n);return t},extend:function(e,t,n){return c(t,(function(t,i){e[i]=n&&"function"==typeof t?r(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},7625:e=>{"use strict";var t,n,r,i,o;n=function(e){var t;return t={inNodes:[],outNodes:[],inEdges:[],outEdges:[]},e?"edge"===e.getType()?(t.edge=e,t.inNodes.push(e.getTarget()),t.outNodes.push(e.getSource()),t):("node"!==e.getType()||(t.node=e,e.getInEdges().forEach((function(e){var n;return(n=e.getSource()).get("model"),t.inEdges.push(e),t.inNodes.push(n)})),e.getOutEdges().forEach((function(e){var n;return(n=e.getTarget()).get("model"),t.outEdges.push(e),t.outNodes.push(n)}))),t):t},o=function(e,t,n){var r,o;for(r in e)(o=e[r])&&("node"===r||"edge"===r?o.setState(t,n):o.forEach((function(e){return e.setState(t,n)})));return i(e)},i=function(e){var t,n,r;for(t in n=[],e)(r=e[t])?"node"===t||"edge"===t?n.push(r.toFront()):n.push(r.forEach((function(e){return e.toFront()}))):n.push(void 0);return n},r=function(e){if(e.getNodes().forEach((function(e){return e.toFront()})),e.xsjState&&e.xsjState.selectedItems)return i(e.xsjState.selectedItems)},t=function(e,t,n){var i,o;for(i in t)(o=t[i])&&("node"===i||"edge"===i?o.clearStates(n):o.forEach((function(e){return e.clearStates(n)})));return r(e)},e.exports={getNeighborItems:n,setItemStates:o,clearItemStates:t,makeNodeFront:r,makeStatedItemFront:i}},48168:(e,t,n)=>{var r=n(8874),i={};for(var o in r)r.hasOwnProperty(o)&&(i[r[o]]=o);var a=e.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var s in a)if(a.hasOwnProperty(s)){if(!("channels"in a[s]))throw new Error("missing channels property: "+s);if(!("labels"in a[s]))throw new Error("missing channel labels property: "+s);if(a[s].labels.length!==a[s].channels)throw new Error("channel and label counts mismatch: "+s);var l=a[s].channels,u=a[s].labels;delete a[s].channels,delete a[s].labels,Object.defineProperty(a[s],"channels",{value:l}),Object.defineProperty(a[s],"labels",{value:u})}a.rgb.hsl=function(e){var t,n,r=e[0]/255,i=e[1]/255,o=e[2]/255,a=Math.min(r,i,o),s=Math.max(r,i,o),l=s-a;return s===a?t=0:r===s?t=(i-o)/l:i===s?t=2+(o-r)/l:o===s&&(t=4+(r-i)/l),(t=Math.min(60*t,360))<0&&(t+=360),n=(a+s)/2,[t,100*(s===a?0:n<=.5?l/(s+a):l/(2-s-a)),100*n]},a.rgb.hsv=function(e){var t,n,r,i,o,a=e[0]/255,s=e[1]/255,l=e[2]/255,u=Math.max(a,s,l),c=u-Math.min(a,s,l),d=function(e){return(u-e)/6/c+.5};return 0===c?i=o=0:(o=c/u,t=d(a),n=d(s),r=d(l),a===u?i=r-n:s===u?i=1/3+t-r:l===u&&(i=2/3+n-t),i<0?i+=1:i>1&&(i-=1)),[360*i,100*o,100*u]},a.rgb.hwb=function(e){var t=e[0],n=e[1],r=e[2];return[a.rgb.hsl(e)[0],100*(1/255*Math.min(t,Math.min(n,r))),100*(r=1-1/255*Math.max(t,Math.max(n,r)))]},a.rgb.cmyk=function(e){var t,n=e[0]/255,r=e[1]/255,i=e[2]/255;return[100*((1-n-(t=Math.min(1-n,1-r,1-i)))/(1-t)||0),100*((1-r-t)/(1-t)||0),100*((1-i-t)/(1-t)||0),100*t]},a.rgb.keyword=function(e){var t=i[e];if(t)return t;var n,o,a,s=1/0;for(var l in r)if(r.hasOwnProperty(l)){var u=r[l],c=(o=e,a=u,Math.pow(o[0]-a[0],2)+Math.pow(o[1]-a[1],2)+Math.pow(o[2]-a[2],2));c<s&&(s=c,n=l)}return n},a.keyword.rgb=function(e){return r[e]},a.rgb.xyz=function(e){var t=e[0]/255,n=e[1]/255,r=e[2]/255;return[100*(.4124*(t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92)+.3576*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)+.1805*(r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92)),100*(.2126*t+.7152*n+.0722*r),100*(.0193*t+.1192*n+.9505*r)]},a.rgb.lab=function(e){var t=a.rgb.xyz(e),n=t[0],r=t[1],i=t[2];return r/=100,i/=108.883,n=(n/=95.047)>.008856?Math.pow(n,1/3):7.787*n+16/116,[116*(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116)-16,500*(n-r),200*(r-(i=i>.008856?Math.pow(i,1/3):7.787*i+16/116))]},a.hsl.rgb=function(e){var t,n,r,i,o,a=e[0]/360,s=e[1]/100,l=e[2]/100;if(0===s)return[o=255*l,o,o];t=2*l-(n=l<.5?l*(1+s):l+s-l*s),i=[0,0,0];for(var u=0;u<3;u++)(r=a+1/3*-(u-1))<0&&r++,r>1&&r--,o=6*r<1?t+6*(n-t)*r:2*r<1?n:3*r<2?t+(n-t)*(2/3-r)*6:t,i[u]=255*o;return i},a.hsl.hsv=function(e){var t=e[0],n=e[1]/100,r=e[2]/100,i=n,o=Math.max(r,.01);return n*=(r*=2)<=1?r:2-r,i*=o<=1?o:2-o,[t,100*(0===r?2*i/(o+i):2*n/(r+n)),100*((r+n)/2)]},a.hsv.rgb=function(e){var t=e[0]/60,n=e[1]/100,r=e[2]/100,i=Math.floor(t)%6,o=t-Math.floor(t),a=255*r*(1-n),s=255*r*(1-n*o),l=255*r*(1-n*(1-o));switch(r*=255,i){case 0:return[r,l,a];case 1:return[s,r,a];case 2:return[a,r,l];case 3:return[a,s,r];case 4:return[l,a,r];case 5:return[r,a,s]}},a.hsv.hsl=function(e){var t,n,r,i=e[0],o=e[1]/100,a=e[2]/100,s=Math.max(a,.01);return r=(2-o)*a,n=o*s,[i,100*(n=(n/=(t=(2-o)*s)<=1?t:2-t)||0),100*(r/=2)]},a.hwb.rgb=function(e){var t,n,r,i,o,a,s,l=e[0]/360,u=e[1]/100,c=e[2]/100,d=u+c;switch(d>1&&(u/=d,c/=d),r=6*l-(t=Math.floor(6*l)),0!=(1&t)&&(r=1-r),i=u+r*((n=1-c)-u),t){default:o=n,a=i,s=u;break;case 1:o=i,a=n,s=u;break;case 2:o=u,a=n,s=i;break;case 3:o=u,a=i,s=n;break;case 4:o=i,a=u,s=n;break;case 5:o=n,a=u,s=i}return[255*o,255*a,255*s]},a.cmyk.rgb=function(e){var t=e[0]/100,n=e[1]/100,r=e[2]/100,i=e[3]/100;return[255*(1-Math.min(1,t*(1-i)+i)),255*(1-Math.min(1,n*(1-i)+i)),255*(1-Math.min(1,r*(1-i)+i))]},a.xyz.rgb=function(e){var t,n,r,i=e[0]/100,o=e[1]/100,a=e[2]/100;return n=-.9689*i+1.8758*o+.0415*a,r=.0557*i+-.204*o+1.057*a,t=(t=3.2406*i+-1.5372*o+-.4986*a)>.0031308?1.055*Math.pow(t,1/2.4)-.055:12.92*t,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:12.92*r,[255*(t=Math.min(Math.max(0,t),1)),255*(n=Math.min(Math.max(0,n),1)),255*(r=Math.min(Math.max(0,r),1))]},a.xyz.lab=function(e){var t=e[0],n=e[1],r=e[2];return n/=100,r/=108.883,t=(t/=95.047)>.008856?Math.pow(t,1/3):7.787*t+16/116,[116*(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116)-16,500*(t-n),200*(n-(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116))]},a.lab.xyz=function(e){var t,n,r,i=e[0];t=e[1]/500+(n=(i+16)/116),r=n-e[2]/200;var o=Math.pow(n,3),a=Math.pow(t,3),s=Math.pow(r,3);return n=o>.008856?o:(n-16/116)/7.787,t=a>.008856?a:(t-16/116)/7.787,r=s>.008856?s:(r-16/116)/7.787,[t*=95.047,n*=100,r*=108.883]},a.lab.lch=function(e){var t,n=e[0],r=e[1],i=e[2];return(t=360*Math.atan2(i,r)/2/Math.PI)<0&&(t+=360),[n,Math.sqrt(r*r+i*i),t]},a.lch.lab=function(e){var t,n=e[0],r=e[1];return t=e[2]/360*2*Math.PI,[n,r*Math.cos(t),r*Math.sin(t)]},a.rgb.ansi16=function(e){var t=e[0],n=e[1],r=e[2],i=1 in arguments?arguments[1]:a.rgb.hsv(e)[2];if(0===(i=Math.round(i/50)))return 30;var o=30+(Math.round(r/255)<<2|Math.round(n/255)<<1|Math.round(t/255));return 2===i&&(o+=60),o},a.hsv.ansi16=function(e){return a.rgb.ansi16(a.hsv.rgb(e),e[2])},a.rgb.ansi256=function(e){var t=e[0],n=e[1],r=e[2];return t===n&&n===r?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(n/255*5)+Math.round(r/255*5)},a.ansi16.rgb=function(e){var t=e%10;if(0===t||7===t)return e>50&&(t+=3.5),[t=t/10.5*255,t,t];var n=.5*(1+~~(e>50));return[(1&t)*n*255,(t>>1&1)*n*255,(t>>2&1)*n*255]},a.ansi256.rgb=function(e){if(e>=232){var t=10*(e-232)+8;return[t,t,t]}var n;return e-=16,[Math.floor(e/36)/5*255,Math.floor((n=e%36)/6)/5*255,n%6/5*255]},a.rgb.hex=function(e){var t=(((255&Math.round(e[0]))<<16)+((255&Math.round(e[1]))<<8)+(255&Math.round(e[2]))).toString(16).toUpperCase();return"000000".substring(t.length)+t},a.hex.rgb=function(e){var t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];var n=t[0];3===t[0].length&&(n=n.split("").map((function(e){return e+e})).join(""));var r=parseInt(n,16);return[r>>16&255,r>>8&255,255&r]},a.rgb.hcg=function(e){var t,n=e[0]/255,r=e[1]/255,i=e[2]/255,o=Math.max(Math.max(n,r),i),a=Math.min(Math.min(n,r),i),s=o-a;return t=s<=0?0:o===n?(r-i)/s%6:o===r?2+(i-n)/s:4+(n-r)/s+4,t/=6,[360*(t%=1),100*s,100*(s<1?a/(1-s):0)]},a.hsl.hcg=function(e){var t=e[1]/100,n=e[2]/100,r=1,i=0;return(r=n<.5?2*t*n:2*t*(1-n))<1&&(i=(n-.5*r)/(1-r)),[e[0],100*r,100*i]},a.hsv.hcg=function(e){var t=e[1]/100,n=e[2]/100,r=t*n,i=0;return r<1&&(i=(n-r)/(1-r)),[e[0],100*r,100*i]},a.hcg.rgb=function(e){var t=e[0]/360,n=e[1]/100,r=e[2]/100;if(0===n)return[255*r,255*r,255*r];var i,o=[0,0,0],a=t%1*6,s=a%1,l=1-s;switch(Math.floor(a)){case 0:o[0]=1,o[1]=s,o[2]=0;break;case 1:o[0]=l,o[1]=1,o[2]=0;break;case 2:o[0]=0,o[1]=1,o[2]=s;break;case 3:o[0]=0,o[1]=l,o[2]=1;break;case 4:o[0]=s,o[1]=0,o[2]=1;break;default:o[0]=1,o[1]=0,o[2]=l}return i=(1-n)*r,[255*(n*o[0]+i),255*(n*o[1]+i),255*(n*o[2]+i)]},a.hcg.hsv=function(e){var t=e[1]/100,n=t+e[2]/100*(1-t),r=0;return n>0&&(r=t/n),[e[0],100*r,100*n]},a.hcg.hsl=function(e){var t=e[1]/100,n=e[2]/100*(1-t)+.5*t,r=0;return n>0&&n<.5?r=t/(2*n):n>=.5&&n<1&&(r=t/(2*(1-n))),[e[0],100*r,100*n]},a.hcg.hwb=function(e){var t=e[1]/100,n=t+e[2]/100*(1-t);return[e[0],100*(n-t),100*(1-n)]},a.hwb.hcg=function(e){var t=e[1]/100,n=1-e[2]/100,r=n-t,i=0;return r<1&&(i=(n-r)/(1-r)),[e[0],100*r,100*i]},a.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]},a.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]},a.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]},a.gray.hsl=a.gray.hsv=function(e){return[0,0,e[0]]},a.gray.hwb=function(e){return[0,100,e[0]]},a.gray.cmyk=function(e){return[0,0,0,e[0]]},a.gray.lab=function(e){return[e[0],0,0]},a.gray.hex=function(e){var t=255&Math.round(e[0]/100*255),n=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(n.length)+n},a.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]}},12085:(e,t,n)=>{var r=n(48168),i=n(4111),o={};Object.keys(r).forEach((function(e){o[e]={},Object.defineProperty(o[e],"channels",{value:r[e].channels}),Object.defineProperty(o[e],"labels",{value:r[e].labels});var t=i(e);Object.keys(t).forEach((function(n){var r=t[n];o[e][n]=function(e){var t=function(t){if(null==t)return t;arguments.length>1&&(t=Array.prototype.slice.call(arguments));var n=e(t);if("object"==typeof n)for(var r=n.length,i=0;i<r;i++)n[i]=Math.round(n[i]);return n};return"conversion"in e&&(t.conversion=e.conversion),t}(r),o[e][n].raw=function(e){var t=function(t){return null==t?t:(arguments.length>1&&(t=Array.prototype.slice.call(arguments)),e(t))};return"conversion"in e&&(t.conversion=e.conversion),t}(r)}))})),e.exports=o},4111:(e,t,n)=>{var r=n(48168);function i(e){var t=function(){for(var e={},t=Object.keys(r),n=t.length,i=0;i<n;i++)e[t[i]]={distance:-1,parent:null};return e}(),n=[e];for(t[e].distance=0;n.length;)for(var i=n.pop(),o=Object.keys(r[i]),a=o.length,s=0;s<a;s++){var l=o[s],u=t[l];-1===u.distance&&(u.distance=t[i].distance+1,u.parent=i,n.unshift(l))}return t}function o(e,t){return function(n){return t(e(n))}}function a(e,t){for(var n=[t[e].parent,e],i=r[t[e].parent][e],a=t[e].parent;t[a].parent;)n.unshift(t[a].parent),i=o(r[t[a].parent][a],i),a=t[a].parent;return i.conversion=n,i}e.exports=function(e){for(var t=i(e),n={},r=Object.keys(t),o=r.length,s=0;s<o;s++){var l=r[s];null!==t[l].parent&&(n[l]=a(l,t))}return n}},8874:e=>{"use strict";e.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},19818:(e,t,n)=>{var r=n(8874),i=n(86851),o={};for(var a in r)r.hasOwnProperty(a)&&(o[r[a]]=a);var s=e.exports={to:{},get:{}};function l(e,t,n){return Math.min(Math.max(t,e),n)}function u(e){var t=e.toString(16).toUpperCase();return t.length<2?"0"+t:t}s.get=function(e){var t,n;switch(e.substring(0,3).toLowerCase()){case"hsl":t=s.get.hsl(e),n="hsl";break;case"hwb":t=s.get.hwb(e),n="hwb";break;default:t=s.get.rgb(e),n="rgb"}return t?{model:n,value:t}:null},s.get.rgb=function(e){if(!e)return null;var t,n,i,o=[0,0,0,1];if(t=e.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(i=t[2],t=t[1],n=0;n<3;n++){var a=2*n;o[n]=parseInt(t.slice(a,a+2),16)}i&&(o[3]=parseInt(i,16)/255)}else if(t=e.match(/^#([a-f0-9]{3,4})$/i)){for(i=(t=t[1])[3],n=0;n<3;n++)o[n]=parseInt(t[n]+t[n],16);i&&(o[3]=parseInt(i+i,16)/255)}else if(t=e.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)){for(n=0;n<3;n++)o[n]=parseInt(t[n+1],0);t[4]&&(o[3]=parseFloat(t[4]))}else{if(!(t=e.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)))return(t=e.match(/(\D+)/))?"transparent"===t[1]?[0,0,0,0]:(o=r[t[1]])?(o[3]=1,o):null:null;for(n=0;n<3;n++)o[n]=Math.round(2.55*parseFloat(t[n+1]));t[4]&&(o[3]=parseFloat(t[4]))}for(n=0;n<3;n++)o[n]=l(o[n],0,255);return o[3]=l(o[3],0,1),o},s.get.hsl=function(e){if(!e)return null;var t=e.match(/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?[\d\.]+)\s*)?\)$/);if(t){var n=parseFloat(t[4]);return[(parseFloat(t[1])+360)%360,l(parseFloat(t[2]),0,100),l(parseFloat(t[3]),0,100),l(isNaN(n)?1:n,0,1)]}return null},s.get.hwb=function(e){if(!e)return null;var t=e.match(/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(t){var n=parseFloat(t[4]);return[(parseFloat(t[1])%360+360)%360,l(parseFloat(t[2]),0,100),l(parseFloat(t[3]),0,100),l(isNaN(n)?1:n,0,1)]}return null},s.to.hex=function(){var e=i(arguments);return"#"+u(e[0])+u(e[1])+u(e[2])+(e[3]<1?u(Math.round(255*e[3])):"")},s.to.rgb=function(){var e=i(arguments);return e.length<4||1===e[3]?"rgb("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+")":"rgba("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+", "+e[3]+")"},s.to.rgb.percent=function(){var e=i(arguments),t=Math.round(e[0]/255*100),n=Math.round(e[1]/255*100),r=Math.round(e[2]/255*100);return e.length<4||1===e[3]?"rgb("+t+"%, "+n+"%, "+r+"%)":"rgba("+t+"%, "+n+"%, "+r+"%, "+e[3]+")"},s.to.hsl=function(){var e=i(arguments);return e.length<4||1===e[3]?"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)":"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+e[3]+")"},s.to.hwb=function(){var e=i(arguments),t="";return e.length>=4&&1!==e[3]&&(t=", "+e[3]),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+t+")"},s.to.keyword=function(e){return o[e.slice(0,3)]}},6767:(e,t,n)=>{"use strict";var r=n(19818),i=n(12085),o=[].slice,a=["keyword","gray","hex"],s={};Object.keys(i).forEach((function(e){s[o.call(i[e].labels).sort().join("")]=e}));var l={};function u(e,t){if(!(this instanceof u))return new u(e,t);if(t&&t in a&&(t=null),t&&!(t in i))throw new Error("Unknown model: "+t);var n,c;if(null==e)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(e instanceof u)this.model=e.model,this.color=e.color.slice(),this.valpha=e.valpha;else if("string"==typeof e){var d=r.get(e);if(null===d)throw new Error("Unable to parse color from string: "+e);this.model=d.model,c=i[this.model].channels,this.color=d.value.slice(0,c),this.valpha="number"==typeof d.value[c]?d.value[c]:1}else if(e.length){this.model=t||"rgb",c=i[this.model].channels;var h=o.call(e,0,c);this.color=f(h,c),this.valpha="number"==typeof e[c]?e[c]:1}else if("number"==typeof e)e&=16777215,this.model="rgb",this.color=[e>>16&255,e>>8&255,255&e],this.valpha=1;else{this.valpha=1;var p=Object.keys(e);"alpha"in e&&(p.splice(p.indexOf("alpha"),1),this.valpha="number"==typeof e.alpha?e.alpha:0);var m=p.sort().join("");if(!(m in s))throw new Error("Unable to parse color from object: "+JSON.stringify(e));this.model=s[m];var g=i[this.model].labels,v=[];for(n=0;n<g.length;n++)v.push(e[g[n]]);this.color=f(v)}if(l[this.model])for(c=i[this.model].channels,n=0;n<c;n++){var y=l[this.model][n];y&&(this.color[n]=y(this.color[n]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}function c(e,t,n){return(e=Array.isArray(e)?e:[e]).forEach((function(e){(l[e]||(l[e]=[]))[t]=n})),e=e[0],function(r){var i;return arguments.length?(n&&(r=n(r)),(i=this[e]()).color[t]=r,i):(i=this[e]().color[t],n&&(i=n(i)),i)}}function d(e){return function(t){return Math.max(0,Math.min(e,t))}}function h(e){return Array.isArray(e)?e:[e]}function f(e,t){for(var n=0;n<t;n++)"number"!=typeof e[n]&&(e[n]=0);return e}u.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(e){var t=this.model in r.to?this:this.rgb(),n=1===(t=t.round("number"==typeof e?e:1)).valpha?t.color:t.color.concat(this.valpha);return r.to[t.model](n)},percentString:function(e){var t=this.rgb().round("number"==typeof e?e:1),n=1===t.valpha?t.color:t.color.concat(this.valpha);return r.to.rgb.percent(n)},array:function(){return 1===this.valpha?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var e={},t=i[this.model].channels,n=i[this.model].labels,r=0;r<t;r++)e[n[r]]=this.color[r];return 1!==this.valpha&&(e.alpha=this.valpha),e},unitArray:function(){var e=this.rgb().color;return e[0]/=255,e[1]/=255,e[2]/=255,1!==this.valpha&&e.push(this.valpha),e},unitObject:function(){var e=this.rgb().object();return e.r/=255,e.g/=255,e.b/=255,1!==this.valpha&&(e.alpha=this.valpha),e},round:function(e){return e=Math.max(e||0,0),new u(this.color.map(function(e){return function(t){return function(e,t){return Number(e.toFixed(t))}(t,e)}}(e)).concat(this.valpha),this.model)},alpha:function(e){return arguments.length?new u(this.color.concat(Math.max(0,Math.min(1,e))),this.model):this.valpha},red:c("rgb",0,d(255)),green:c("rgb",1,d(255)),blue:c("rgb",2,d(255)),hue:c(["hsl","hsv","hsl","hwb","hcg"],0,(function(e){return(e%360+360)%360})),saturationl:c("hsl",1,d(100)),lightness:c("hsl",2,d(100)),saturationv:c("hsv",1,d(100)),value:c("hsv",2,d(100)),chroma:c("hcg",1,d(100)),gray:c("hcg",2,d(100)),white:c("hwb",1,d(100)),wblack:c("hwb",2,d(100)),cyan:c("cmyk",0,d(100)),magenta:c("cmyk",1,d(100)),yellow:c("cmyk",2,d(100)),black:c("cmyk",3,d(100)),x:c("xyz",0,d(100)),y:c("xyz",1,d(100)),z:c("xyz",2,d(100)),l:c("lab",0,d(100)),a:c("lab",1),b:c("lab",2),keyword:function(e){return arguments.length?new u(e):i[this.model].keyword(this.color)},hex:function(e){return arguments.length?new u(e):r.to.hex(this.rgb().round().color)},rgbNumber:function(){var e=this.rgb().color;return(255&e[0])<<16|(255&e[1])<<8|255&e[2]},luminosity:function(){for(var e=this.rgb().color,t=[],n=0;n<e.length;n++){var r=e[n]/255;t[n]=r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4)}return.2126*t[0]+.7152*t[1]+.0722*t[2]},contrast:function(e){var t=this.luminosity(),n=e.luminosity();return t>n?(t+.05)/(n+.05):(n+.05)/(t+.05)},level:function(e){var t=this.contrast(e);return t>=7.1?"AAA":t>=4.5?"AA":""},isDark:function(){var e=this.rgb().color;return(299*e[0]+587*e[1]+114*e[2])/1e3<128},isLight:function(){return!this.isDark()},negate:function(){for(var e=this.rgb(),t=0;t<3;t++)e.color[t]=255-e.color[t];return e},lighten:function(e){var t=this.hsl();return t.color[2]+=t.color[2]*e,t},darken:function(e){var t=this.hsl();return t.color[2]-=t.color[2]*e,t},saturate:function(e){var t=this.hsl();return t.color[1]+=t.color[1]*e,t},desaturate:function(e){var t=this.hsl();return t.color[1]-=t.color[1]*e,t},whiten:function(e){var t=this.hwb();return t.color[1]+=t.color[1]*e,t},blacken:function(e){var t=this.hwb();return t.color[2]+=t.color[2]*e,t},grayscale:function(){var e=this.rgb().color,t=.3*e[0]+.59*e[1]+.11*e[2];return u.rgb(t,t,t)},fade:function(e){return this.alpha(this.valpha-this.valpha*e)},opaquer:function(e){return this.alpha(this.valpha+this.valpha*e)},rotate:function(e){var t=this.hsl(),n=t.color[0];return n=(n=(n+e)%360)<0?360+n:n,t.color[0]=n,t},mix:function(e,t){if(!e||!e.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof e);var n=e.rgb(),r=this.rgb(),i=void 0===t?.5:t,o=2*i-1,a=n.alpha()-r.alpha(),s=((o*a==-1?o:(o+a)/(1+o*a))+1)/2,l=1-s;return u.rgb(s*n.red()+l*r.red(),s*n.green()+l*r.green(),s*n.blue()+l*r.blue(),n.alpha()*i+r.alpha()*(1-i))}},Object.keys(i).forEach((function(e){if(-1===a.indexOf(e)){var t=i[e].channels;u.prototype[e]=function(){if(this.model===e)return new u(this);if(arguments.length)return new u(arguments,e);var n="number"==typeof arguments[t]?t:this.valpha;return new u(h(i[this.model][e].raw(this.color)).concat(n),e)},u[e]=function(n){return"number"==typeof n&&(n=f(o.call(arguments),t)),new u(n,e)}}})),e.exports=u},70681:(e,t,n)=>{e.exports={graphlib:n(70574),layout:n(98123),debug:n(27570),util:{time:n(11138).time,notime:n(11138).notime},version:n(88177)}},92188:(e,t,n)=>{"use strict";var r=n(38436),i=n(74079);e.exports={run:function(e){var t="greedy"===e.graph().acyclicer?i(e,function(e){return function(t){return e.edge(t).weight}}(e)):function(e){var t=[],n={},i={};function o(a){r.has(i,a)||(i[a]=!0,n[a]=!0,r.forEach(e.outEdges(a),(function(e){r.has(n,e.w)?t.push(e):o(e.w)})),delete n[a])}return r.forEach(e.nodes(),o),t}(e);r.forEach(t,(function(t){var n=e.edge(t);e.removeEdge(t),n.forwardName=t.name,n.reversed=!0,e.setEdge(t.w,t.v,n,r.uniqueId("rev"))}))},undo:function(e){r.forEach(e.edges(),(function(t){var n=e.edge(t);if(n.reversed){e.removeEdge(t);var r=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,r)}}))}}},61133:(e,t,n)=>{var r=n(38436),i=n(11138);function o(e,t,n,r,o,a){var s={width:0,height:0,rank:a,borderType:t},l=o[t][a-1],u=i.addDummyNode(e,"border",s,n);o[t][a]=u,e.setParent(u,r),l&&e.setEdge(l,u,{weight:1})}e.exports=function(e){r.forEach(e.children(),(function t(n){var i=e.children(n),a=e.node(n);if(i.length&&r.forEach(i,t),r.has(a,"minRank")){a.borderLeft=[],a.borderRight=[];for(var s=a.minRank,l=a.maxRank+1;s<l;++s)o(e,"borderLeft","_bl",n,a,s),o(e,"borderRight","_br",n,a,s)}}))}},53258:(e,t,n)=>{"use strict";var r=n(38436);function i(e){r.forEach(e.nodes(),(function(t){o(e.node(t))})),r.forEach(e.edges(),(function(t){o(e.edge(t))}))}function o(e){var t=e.width;e.width=e.height,e.height=t}function a(e){e.y=-e.y}function s(e){var t=e.x;e.x=e.y,e.y=t}e.exports={adjust:function(e){var t=e.graph().rankdir.toLowerCase();"lr"!==t&&"rl"!==t||i(e)},undo:function(e){var t=e.graph().rankdir.toLowerCase();"bt"!==t&&"rl"!==t||function(e){r.forEach(e.nodes(),(function(t){a(e.node(t))})),r.forEach(e.edges(),(function(t){var n=e.edge(t);r.forEach(n.points,a),r.has(n,"y")&&a(n)}))}(e);"lr"!==t&&"rl"!==t||(!function(e){r.forEach(e.nodes(),(function(t){s(e.node(t))})),r.forEach(e.edges(),(function(t){var n=e.edge(t);r.forEach(n.points,s),r.has(n,"x")&&s(n)}))}(e),i(e))}}},77822:e=>{function t(){var e={};e._next=e._prev=e,this._sentinel=e}function n(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function r(e,t){if("_next"!==e&&"_prev"!==e)return t}e.exports=t,t.prototype.dequeue=function(){var e=this._sentinel,t=e._prev;if(t!==e)return n(t),t},t.prototype.enqueue=function(e){var t=this._sentinel;e._prev&&e._next&&n(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t},t.prototype.toString=function(){for(var e=[],t=this._sentinel,n=t._prev;n!==t;)e.push(JSON.stringify(n,r)),n=n._prev;return"["+e.join(", ")+"]"}},27570:(e,t,n)=>{var r=n(38436),i=n(11138),o=n(70574).Graph;e.exports={debugOrdering:function(e){var t=i.buildLayerMatrix(e),n=new o({compound:!0,multigraph:!0}).setGraph({});return r.forEach(e.nodes(),(function(t){n.setNode(t,{label:t}),n.setParent(t,"layer"+e.node(t).rank)})),r.forEach(e.edges(),(function(e){n.setEdge(e.v,e.w,{},e.name)})),r.forEach(t,(function(e,t){var i="layer"+t;n.setNode(i,{rank:"same"}),r.reduce(e,(function(e,t){return n.setEdge(e,t,{style:"invis"}),t}))})),n}}},70574:(e,t,n)=>{var r;try{r=n(28282)}catch(e){}r||(r=window.graphlib),e.exports=r},74079:(e,t,n)=>{var r=n(38436),i=n(70574).Graph,o=n(77822);e.exports=function(e,t){if(e.nodeCount()<=1)return[];var n=function(e,t){var n=new i,a=0,s=0;r.forEach(e.nodes(),(function(e){n.setNode(e,{v:e,in:0,out:0})})),r.forEach(e.edges(),(function(e){var r=n.edge(e.v,e.w)||0,i=t(e),o=r+i;n.setEdge(e.v,e.w,o),s=Math.max(s,n.node(e.v).out+=i),a=Math.max(a,n.node(e.w).in+=i)}));var u=r.range(s+a+3).map((function(){return new o})),c=a+1;return r.forEach(n.nodes(),(function(e){l(u,c,n.node(e))})),{graph:n,buckets:u,zeroIdx:c}}(e,t||a),u=function(e,t,n){var r,i=[],o=t[t.length-1],a=t[0];for(;e.nodeCount();){for(;r=a.dequeue();)s(e,t,n,r);for(;r=o.dequeue();)s(e,t,n,r);if(e.nodeCount())for(var l=t.length-2;l>0;--l)if(r=t[l].dequeue()){i=i.concat(s(e,t,n,r,!0));break}}return i}(n.graph,n.buckets,n.zeroIdx);return r.flatten(r.map(u,(function(t){return e.outEdges(t.v,t.w)})),!0)};var a=r.constant(1);function s(e,t,n,i,o){var a=o?[]:void 0;return r.forEach(e.inEdges(i.v),(function(r){var i=e.edge(r),s=e.node(r.v);o&&a.push({v:r.v,w:r.w}),s.out-=i,l(t,n,s)})),r.forEach(e.outEdges(i.v),(function(r){var i=e.edge(r),o=r.w,a=e.node(o);a.in-=i,l(t,n,a)})),e.removeNode(i.v),a}function l(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}},98123:(e,t,n)=>{"use strict";var r=n(38436),i=n(92188),o=n(45995),a=n(78093),s=n(11138).normalizeRanks,l=n(24219),u=n(11138).removeEmptyRanks,c=n(72981),d=n(61133),h=n(53258),f=n(53408),p=n(17873),m=n(11138),g=n(70574).Graph;e.exports=function(e,t){var n=t&&t.debugTiming?m.time:m.notime;n("layout",(function(){var t=n("  buildLayoutGraph",(function(){return function(e){var t=new g({multigraph:!0,compound:!0}),n=k(e.graph());return t.setGraph(r.merge({},y,S(n,v),r.pick(n,b))),r.forEach(e.nodes(),(function(n){var i=k(e.node(n));t.setNode(n,r.defaults(S(i,_),w)),t.setParent(n,e.parent(n))})),r.forEach(e.edges(),(function(n){var i=k(e.edge(n));t.setEdge(n,r.merge({},M,S(i,x),r.pick(i,E)))})),t}(e)}));n("  runLayout",(function(){!function(e,t){t("    makeSpaceForEdgeLabels",(function(){!function(e){var t=e.graph();t.ranksep/=2,r.forEach(e.edges(),(function(n){var r=e.edge(n);r.minlen*=2,"c"!==r.labelpos.toLowerCase()&&("TB"===t.rankdir||"BT"===t.rankdir?r.width+=r.labeloffset:r.height+=r.labeloffset)}))}(e)})),t("    removeSelfEdges",(function(){!function(e){r.forEach(e.edges(),(function(t){if(t.v===t.w){var n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}}))}(e)})),t("    acyclic",(function(){i.run(e)})),t("    nestingGraph.run",(function(){c.run(e)})),t("    rank",(function(){a(m.asNonCompoundGraph(e))})),t("    injectEdgeLabelProxies",(function(){!function(e){r.forEach(e.edges(),(function(t){var n=e.edge(t);if(n.width&&n.height){var r=e.node(t.v),i={rank:(e.node(t.w).rank-r.rank)/2+r.rank,e:t};m.addDummyNode(e,"edge-proxy",i,"_ep")}}))}(e)})),t("    removeEmptyRanks",(function(){u(e)})),t("    nestingGraph.cleanup",(function(){c.cleanup(e)})),t("    normalizeRanks",(function(){s(e)})),t("    assignRankMinMax",(function(){!function(e){var t=0;r.forEach(e.nodes(),(function(n){var i=e.node(n);i.borderTop&&(i.minRank=e.node(i.borderTop).rank,i.maxRank=e.node(i.borderBottom).rank,t=r.max(t,i.maxRank))})),e.graph().maxRank=t}(e)})),t("    removeEdgeLabelProxies",(function(){!function(e){r.forEach(e.nodes(),(function(t){var n=e.node(t);"edge-proxy"===n.dummy&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))}))}(e)})),t("    normalize.run",(function(){o.run(e)})),t("    parentDummyChains",(function(){l(e)})),t("    addBorderSegments",(function(){d(e)})),t("    order",(function(){f(e)})),t("    insertSelfEdges",(function(){!function(e){var t=m.buildLayerMatrix(e);r.forEach(t,(function(t){var n=0;r.forEach(t,(function(t,i){var o=e.node(t);o.order=i+n,r.forEach(o.selfEdges,(function(t){m.addDummyNode(e,"selfedge",{width:t.label.width,height:t.label.height,rank:o.rank,order:i+ ++n,e:t.e,label:t.label},"_se")})),delete o.selfEdges}))}))}(e)})),t("    adjustCoordinateSystem",(function(){h.adjust(e)})),t("    position",(function(){p(e)})),t("    positionSelfEdges",(function(){!function(e){r.forEach(e.nodes(),(function(t){var n=e.node(t);if("selfedge"===n.dummy){var r=e.node(n.e.v),i=r.x+r.width/2,o=r.y,a=n.x-i,s=r.height/2;e.setEdge(n.e,n.label),e.removeNode(t),n.label.points=[{x:i+2*a/3,y:o-s},{x:i+5*a/6,y:o-s},{x:i+a,y:o},{x:i+5*a/6,y:o+s},{x:i+2*a/3,y:o+s}],n.label.x=n.x,n.label.y=n.y}}))}(e)})),t("    removeBorderNodes",(function(){!function(e){r.forEach(e.nodes(),(function(t){if(e.children(t).length){var n=e.node(t),i=e.node(n.borderTop),o=e.node(n.borderBottom),a=e.node(r.last(n.borderLeft)),s=e.node(r.last(n.borderRight));n.width=Math.abs(s.x-a.x),n.height=Math.abs(o.y-i.y),n.x=a.x+n.width/2,n.y=i.y+n.height/2}})),r.forEach(e.nodes(),(function(t){"border"===e.node(t).dummy&&e.removeNode(t)}))}(e)})),t("    normalize.undo",(function(){o.undo(e)})),t("    fixupEdgeLabelCoords",(function(){!function(e){r.forEach(e.edges(),(function(t){var n=e.edge(t);if(r.has(n,"x"))switch("l"!==n.labelpos&&"r"!==n.labelpos||(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset}}))}(e)})),t("    undoCoordinateSystem",(function(){h.undo(e)})),t("    translateGraph",(function(){!function(e){var t=Number.POSITIVE_INFINITY,n=0,i=Number.POSITIVE_INFINITY,o=0,a=e.graph(),s=a.marginx||0,l=a.marginy||0;function u(e){var r=e.x,a=e.y,s=e.width,l=e.height;t=Math.min(t,r-s/2),n=Math.max(n,r+s/2),i=Math.min(i,a-l/2),o=Math.max(o,a+l/2)}r.forEach(e.nodes(),(function(t){u(e.node(t))})),r.forEach(e.edges(),(function(t){var n=e.edge(t);r.has(n,"x")&&u(n)})),t-=s,i-=l,r.forEach(e.nodes(),(function(n){var r=e.node(n);r.x-=t,r.y-=i})),r.forEach(e.edges(),(function(n){var o=e.edge(n);r.forEach(o.points,(function(e){e.x-=t,e.y-=i})),r.has(o,"x")&&(o.x-=t),r.has(o,"y")&&(o.y-=i)})),a.width=n-t+s,a.height=o-i+l}(e)})),t("    assignNodeIntersects",(function(){!function(e){r.forEach(e.edges(),(function(t){var n,r,i=e.edge(t),o=e.node(t.v),a=e.node(t.w);i.points?(n=i.points[0],r=i.points[i.points.length-1]):(i.points=[],n=a,r=o),i.points.unshift(m.intersectRect(o,n)),i.points.push(m.intersectRect(a,r))}))}(e)})),t("    reversePoints",(function(){!function(e){r.forEach(e.edges(),(function(t){var n=e.edge(t);n.reversed&&n.points.reverse()}))}(e)})),t("    acyclic.undo",(function(){i.undo(e)}))}(t,n)})),n("  updateInputGraph",(function(){!function(e,t){r.forEach(e.nodes(),(function(n){var r=e.node(n),i=t.node(n);r&&(r.x=i.x,r.y=i.y,t.children(n).length&&(r.width=i.width,r.height=i.height))})),r.forEach(e.edges(),(function(n){var i=e.edge(n),o=t.edge(n);i.points=o.points,r.has(o,"x")&&(i.x=o.x,i.y=o.y)})),e.graph().width=t.graph().width,e.graph().height=t.graph().height}(e,t)}))}))};var v=["nodesep","edgesep","ranksep","marginx","marginy"],y={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},b=["acyclicer","ranker","rankdir","align"],_=["width","height"],w={width:0,height:0},x=["minlen","weight","width","height","labeloffset"],M={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},E=["labelpos"];function S(e,t){return r.mapValues(r.pick(e,t),Number)}function k(e){var t={};return r.forEach(e,(function(e,n){t[n.toLowerCase()]=e})),t}},38436:(e,t,n)=>{var r;try{r={cloneDeep:n(50361),constant:n(75703),defaults:n(91747),each:n(66073),filter:n(63105),find:n(13311),flatten:n(85564),forEach:n(84486),forIn:n(62620),has:n(18721),isUndefined:n(52353),last:n(10928),map:n(35161),mapValues:n(66604),max:n(6162),merge:n(82492),min:n(53632),minBy:n(22762),now:n(7771),pick:n(78718),range:n(96026),reduce:n(54061),sortBy:n(89734),uniqueId:n(73955),values:n(52628),zipObject:n(7287)}}catch(e){}r||(r=window._),e.exports=r},72981:(e,t,n)=>{var r=n(38436),i=n(11138);function o(e,t,n,a,s,l,u){var c=e.children(u);if(c.length){var d=i.addBorderNode(e,"_bt"),h=i.addBorderNode(e,"_bb"),f=e.node(u);e.setParent(d,u),f.borderTop=d,e.setParent(h,u),f.borderBottom=h,r.forEach(c,(function(r){o(e,t,n,a,s,l,r);var i=e.node(r),c=i.borderTop?i.borderTop:r,f=i.borderBottom?i.borderBottom:r,p=i.borderTop?a:2*a,m=c!==f?1:s-l[u]+1;e.setEdge(d,c,{weight:p,minlen:m,nestingEdge:!0}),e.setEdge(f,h,{weight:p,minlen:m,nestingEdge:!0})})),e.parent(u)||e.setEdge(t,d,{weight:0,minlen:s+l[u]})}else u!==t&&e.setEdge(t,u,{weight:0,minlen:n})}e.exports={run:function(e){var t=i.addDummyNode(e,"root",{},"_root"),n=function(e){var t={};function n(i,o){var a=e.children(i);a&&a.length&&r.forEach(a,(function(e){n(e,o+1)})),t[i]=o}return r.forEach(e.children(),(function(e){n(e,1)})),t}(e),a=r.max(r.values(n))-1,s=2*a+1;e.graph().nestingRoot=t,r.forEach(e.edges(),(function(t){e.edge(t).minlen*=s}));var l=function(e){return r.reduce(e.edges(),(function(t,n){return t+e.edge(n).weight}),0)}(e)+1;r.forEach(e.children(),(function(r){o(e,t,s,l,a,n,r)})),e.graph().nodeRankFactor=s},cleanup:function(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,r.forEach(e.edges(),(function(t){e.edge(t).nestingEdge&&e.removeEdge(t)}))}}},45995:(e,t,n)=>{"use strict";var r=n(38436),i=n(11138);e.exports={run:function(e){e.graph().dummyChains=[],r.forEach(e.edges(),(function(t){!function(e,t){var n,r,o,a=t.v,s=e.node(a).rank,l=t.w,u=e.node(l).rank,c=t.name,d=e.edge(t),h=d.labelRank;if(u===s+1)return;for(e.removeEdge(t),o=0,++s;s<u;++o,++s)d.points=[],r={width:0,height:0,edgeLabel:d,edgeObj:t,rank:s},n=i.addDummyNode(e,"edge",r,"_d"),s===h&&(r.width=d.width,r.height=d.height,r.dummy="edge-label",r.labelpos=d.labelpos),e.setEdge(a,n,{weight:d.weight},c),0===o&&e.graph().dummyChains.push(n),a=n;e.setEdge(a,l,{weight:d.weight},c)}(e,t)}))},undo:function(e){r.forEach(e.graph().dummyChains,(function(t){var n,r=e.node(t),i=r.edgeLabel;for(e.setEdge(r.edgeObj,i);r.dummy;)n=e.successors(t)[0],e.removeNode(t),i.points.push({x:r.x,y:r.y}),"edge-label"===r.dummy&&(i.x=r.x,i.y=r.y,i.width=r.width,i.height=r.height),t=n,r=e.node(t)}))}}},55093:(e,t,n)=>{var r=n(38436);e.exports=function(e,t,n){var i,o={};r.forEach(n,(function(n){for(var r,a,s=e.parent(n);s;){if((r=e.parent(s))?(a=o[r],o[r]=s):(a=i,i=s),a&&a!==s)return void t.setEdge(a,s);s=r}}))}},35439:(e,t,n)=>{var r=n(38436);e.exports=function(e,t){return r.map(t,(function(t){var n=e.inEdges(t);if(n.length){var i=r.reduce(n,(function(t,n){var r=e.edge(n),i=e.node(n.v);return{sum:t.sum+r.weight*i.order,weight:t.weight+r.weight}}),{sum:0,weight:0});return{v:t,barycenter:i.sum/i.weight,weight:i.weight}}return{v:t}}))}},23128:(e,t,n)=>{var r=n(38436),i=n(70574).Graph;e.exports=function(e,t,n){var o=function(e){var t;for(;e.hasNode(t=r.uniqueId("_root")););return t}(e),a=new i({compound:!0}).setGraph({root:o}).setDefaultNodeLabel((function(t){return e.node(t)}));return r.forEach(e.nodes(),(function(i){var s=e.node(i),l=e.parent(i);(s.rank===t||s.minRank<=t&&t<=s.maxRank)&&(a.setNode(i),a.setParent(i,l||o),r.forEach(e[n](i),(function(t){var n=t.v===i?t.w:t.v,o=a.edge(n,i),s=r.isUndefined(o)?0:o.weight;a.setEdge(n,i,{weight:e.edge(t).weight+s})})),r.has(s,"minRank")&&a.setNode(i,{borderLeft:s.borderLeft[t],borderRight:s.borderRight[t]}))})),a}},56630:(e,t,n)=>{"use strict";var r=n(38436);function i(e,t,n){for(var i=r.zipObject(n,r.map(n,(function(e,t){return t}))),o=r.flatten(r.map(t,(function(t){return r.sortBy(r.map(e.outEdges(t),(function(t){return{pos:i[t.w],weight:e.edge(t).weight}})),"pos")})),!0),a=1;a<n.length;)a<<=1;var s=2*a-1;a-=1;var l=r.map(new Array(s),(function(){return 0})),u=0;return r.forEach(o.forEach((function(e){var t=e.pos+a;l[t]+=e.weight;for(var n=0;t>0;)t%2&&(n+=l[t+1]),l[t=t-1>>1]+=e.weight;u+=e.weight*n}))),u}e.exports=function(e,t){for(var n=0,r=1;r<t.length;++r)n+=i(e,t[r-1],t[r]);return n}},53408:(e,t,n)=>{"use strict";var r=n(38436),i=n(2588),o=n(56630),a=n(61026),s=n(23128),l=n(55093),u=n(70574).Graph,c=n(11138);function d(e,t,n){return r.map(t,(function(t){return s(e,t,n)}))}function h(e,t){var n=new u;r.forEach(e,(function(e){var i=e.graph().root,o=a(e,i,n,t);r.forEach(o.vs,(function(t,n){e.node(t).order=n})),l(e,n,o.vs)}))}function f(e,t){r.forEach(t,(function(t){r.forEach(t,(function(t,n){e.node(t).order=n}))}))}e.exports=function(e){var t=c.maxRank(e),n=d(e,r.range(1,t+1),"inEdges"),a=d(e,r.range(t-1,-1,-1),"outEdges"),s=i(e);f(e,s);for(var l,u=Number.POSITIVE_INFINITY,p=0,m=0;m<4;++p,++m){h(p%2?n:a,p%4>=2),s=c.buildLayerMatrix(e);var g=o(e,s);g<u&&(m=0,l=r.cloneDeep(s),u=g)}f(e,l)}},2588:(e,t,n)=>{"use strict";var r=n(38436);e.exports=function(e){var t={},n=r.filter(e.nodes(),(function(t){return!e.children(t).length})),i=r.max(r.map(n,(function(t){return e.node(t).rank}))),o=r.map(r.range(i+1),(function(){return[]}));var a=r.sortBy(n,(function(t){return e.node(t).rank}));return r.forEach(a,(function n(i){if(r.has(t,i))return;t[i]=!0;var a=e.node(i);o[a.rank].push(i),r.forEach(e.successors(i),n)})),o}},83678:(e,t,n)=>{"use strict";var r=n(38436);e.exports=function(e,t){var n={};return r.forEach(e,(function(e,t){var i=n[e.v]={indegree:0,in:[],out:[],vs:[e.v],i:t};r.isUndefined(e.barycenter)||(i.barycenter=e.barycenter,i.weight=e.weight)})),r.forEach(t.edges(),(function(e){var t=n[e.v],i=n[e.w];r.isUndefined(t)||r.isUndefined(i)||(i.indegree++,t.out.push(n[e.w]))})),function(e){var t=[];function n(e){return function(t){t.merged||(r.isUndefined(t.barycenter)||r.isUndefined(e.barycenter)||t.barycenter>=e.barycenter)&&function(e,t){var n=0,r=0;e.weight&&(n+=e.barycenter*e.weight,r+=e.weight);t.weight&&(n+=t.barycenter*t.weight,r+=t.weight);e.vs=t.vs.concat(e.vs),e.barycenter=n/r,e.weight=r,e.i=Math.min(t.i,e.i),t.merged=!0}(e,t)}}function i(t){return function(n){n.in.push(t),0==--n.indegree&&e.push(n)}}for(;e.length;){var o=e.pop();t.push(o),r.forEach(o.in.reverse(),n(o)),r.forEach(o.out,i(o))}return r.map(r.filter(t,(function(e){return!e.merged})),(function(e){return r.pick(e,["vs","i","barycenter","weight"])}))}(r.filter(n,(function(e){return!e.indegree})))}},61026:(e,t,n)=>{var r=n(38436),i=n(35439),o=n(83678),a=n(87304);e.exports=function e(t,n,s,l){var u=t.children(n),c=t.node(n),d=c?c.borderLeft:void 0,h=c?c.borderRight:void 0,f={};d&&(u=r.filter(u,(function(e){return e!==d&&e!==h})));var p=i(t,u);r.forEach(p,(function(n){if(t.children(n.v).length){var i=e(t,n.v,s,l);f[n.v]=i,r.has(i,"barycenter")&&(o=n,a=i,r.isUndefined(o.barycenter)?(o.barycenter=a.barycenter,o.weight=a.weight):(o.barycenter=(o.barycenter*o.weight+a.barycenter*a.weight)/(o.weight+a.weight),o.weight+=a.weight))}var o,a}));var m=o(p,s);!function(e,t){r.forEach(e,(function(e){e.vs=r.flatten(e.vs.map((function(e){return t[e]?t[e].vs:e})),!0)}))}(m,f);var g=a(m,l);if(d&&(g.vs=r.flatten([d,g.vs,h],!0),t.predecessors(d).length)){var v=t.node(t.predecessors(d)[0]),y=t.node(t.predecessors(h)[0]);r.has(g,"barycenter")||(g.barycenter=0,g.weight=0),g.barycenter=(g.barycenter*g.weight+v.order+y.order)/(g.weight+2),g.weight+=2}return g}},87304:(e,t,n)=>{var r=n(38436),i=n(11138);function o(e,t,n){for(var i;t.length&&(i=r.last(t)).i<=n;)t.pop(),e.push(i.vs),n++;return n}e.exports=function(e,t){var n=i.partition(e,(function(e){return r.has(e,"barycenter")})),a=n.lhs,s=r.sortBy(n.rhs,(function(e){return-e.i})),l=[],u=0,c=0,d=0;a.sort((h=!!t,function(e,t){return e.barycenter<t.barycenter?-1:e.barycenter>t.barycenter?1:h?t.i-e.i:e.i-t.i})),d=o(l,s,d),r.forEach(a,(function(e){d+=e.vs.length,l.push(e.vs),u+=e.barycenter*e.weight,c+=e.weight,d=o(l,s,d)}));var h;var f={vs:r.flatten(l,!0)};c&&(f.barycenter=u/c,f.weight=c);return f}},24219:(e,t,n)=>{var r=n(38436);e.exports=function(e){var t=function(e){var t={},n=0;function i(o){var a=n;r.forEach(e.children(o),i),t[o]={low:a,lim:n++}}return r.forEach(e.children(),i),t}(e);r.forEach(e.graph().dummyChains,(function(n){for(var r=e.node(n),i=r.edgeObj,o=function(e,t,n,r){var i,o,a=[],s=[],l=Math.min(t[n].low,t[r].low),u=Math.max(t[n].lim,t[r].lim);i=n;do{i=e.parent(i),a.push(i)}while(i&&(t[i].low>l||u>t[i].lim));o=i,i=r;for(;(i=e.parent(i))!==o;)s.push(i);return{path:a.concat(s.reverse()),lca:o}}(e,t,i.v,i.w),a=o.path,s=o.lca,l=0,u=a[l],c=!0;n!==i.w;){if(r=e.node(n),c){for(;(u=a[l])!==s&&e.node(u).maxRank<r.rank;)l++;u===s&&(c=!1)}if(!c){for(;l<a.length-1&&e.node(u=a[l+1]).minRank<=r.rank;)l++;u=a[l]}e.setParent(n,u),n=e.successors(n)[0]}}))}},3573:(e,t,n)=>{"use strict";var r=n(38436),i=n(70574).Graph,o=n(11138);function a(e,t){var n={};return r.reduce(t,(function(t,i){var o=0,a=0,s=t.length,u=r.last(i);return r.forEach(i,(function(t,c){var d=function(e,t){if(e.node(t).dummy)return r.find(e.predecessors(t),(function(t){return e.node(t).dummy}))}(e,t),h=d?e.node(d).order:s;(d||t===u)&&(r.forEach(i.slice(a,c+1),(function(t){r.forEach(e.predecessors(t),(function(r){var i=e.node(r),a=i.order;!(a<o||h<a)||i.dummy&&e.node(t).dummy||l(n,r,t)}))})),a=c+1,o=h)})),i})),n}function s(e,t){var n={};function i(t,i,o,a,s){var u;r.forEach(r.range(i,o),(function(i){u=t[i],e.node(u).dummy&&r.forEach(e.predecessors(u),(function(t){var r=e.node(t);r.dummy&&(r.order<a||r.order>s)&&l(n,t,u)}))}))}return r.reduce(t,(function(t,n){var o,a=-1,s=0;return r.forEach(n,(function(r,l){if("border"===e.node(r).dummy){var u=e.predecessors(r);u.length&&(o=e.node(u[0]).order,i(n,s,l,a,o),s=l,a=o)}i(n,s,n.length,o,t.length)})),n})),n}function l(e,t,n){if(t>n){var r=t;t=n,n=r}var i=e[t];i||(e[t]=i={}),i[n]=!0}function u(e,t,n){if(t>n){var i=t;t=n,n=i}return r.has(e[t],n)}function c(e,t,n,i){var o={},a={},s={};return r.forEach(t,(function(e){r.forEach(e,(function(e,t){o[e]=e,a[e]=e,s[e]=t}))})),r.forEach(t,(function(e){var t=-1;r.forEach(e,(function(e){var l=i(e);if(l.length){l=r.sortBy(l,(function(e){return s[e]}));for(var c=(l.length-1)/2,d=Math.floor(c),h=Math.ceil(c);d<=h;++d){var f=l[d];a[e]===e&&t<s[f]&&!u(n,e,f)&&(a[f]=e,a[e]=o[e]=o[f],t=s[f])}}}))})),{root:o,align:a}}function d(e,t,n,o,a){var s={},l=function(e,t,n,o){var a=new i,s=e.graph(),l=function(e,t,n){return function(i,o,a){var s,l=i.node(o),u=i.node(a),c=0;if(c+=l.width/2,r.has(l,"labelpos"))switch(l.labelpos.toLowerCase()){case"l":s=-l.width/2;break;case"r":s=l.width/2}if(s&&(c+=n?s:-s),s=0,c+=(l.dummy?t:e)/2,c+=(u.dummy?t:e)/2,c+=u.width/2,r.has(u,"labelpos"))switch(u.labelpos.toLowerCase()){case"l":s=u.width/2;break;case"r":s=-u.width/2}return s&&(c+=n?s:-s),s=0,c}}(s.nodesep,s.edgesep,o);return r.forEach(t,(function(t){var i;r.forEach(t,(function(t){var r=n[t];if(a.setNode(r),i){var o=n[i],s=a.edge(o,r);a.setEdge(o,r,Math.max(l(e,t,i),s||0))}i=t}))})),a}(e,t,n,a),u=a?"borderLeft":"borderRight";function c(e,t){for(var n=l.nodes(),r=n.pop(),i={};r;)i[r]?e(r):(i[r]=!0,n.push(r),n=n.concat(t(r))),r=n.pop()}return c((function(e){s[e]=l.inEdges(e).reduce((function(e,t){return Math.max(e,s[t.v]+l.edge(t))}),0)}),l.predecessors.bind(l)),c((function(t){var n=l.outEdges(t).reduce((function(e,t){return Math.min(e,s[t.w]-l.edge(t))}),Number.POSITIVE_INFINITY),r=e.node(t);n!==Number.POSITIVE_INFINITY&&r.borderType!==u&&(s[t]=Math.max(s[t],n))}),l.successors.bind(l)),r.forEach(o,(function(e){s[e]=s[n[e]]})),s}function h(e,t){return r.minBy(r.values(t),(function(t){var n=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;return r.forIn(t,(function(t,r){var o=function(e,t){return e.node(t).width}(e,r)/2;n=Math.max(t+o,n),i=Math.min(t-o,i)})),n-i}))}function f(e,t){var n=r.values(t),i=r.min(n),o=r.max(n);r.forEach(["u","d"],(function(n){r.forEach(["l","r"],(function(a){var s,l=n+a,u=e[l];if(u!==t){var c=r.values(u);(s="l"===a?i-r.min(c):o-r.max(c))&&(e[l]=r.mapValues(u,(function(e){return e+s})))}}))}))}function p(e,t){return r.mapValues(e.ul,(function(n,i){if(t)return e[t.toLowerCase()][i];var o=r.sortBy(r.map(e,i));return(o[1]+o[2])/2}))}e.exports={positionX:function(e){var t,n=o.buildLayerMatrix(e),i=r.merge(a(e,n),s(e,n)),l={};r.forEach(["u","d"],(function(o){t="u"===o?n:r.values(n).reverse(),r.forEach(["l","r"],(function(n){"r"===n&&(t=r.map(t,(function(e){return r.values(e).reverse()})));var a=("u"===o?e.predecessors:e.successors).bind(e),s=c(e,t,i,a),u=d(e,t,s.root,s.align,"r"===n);"r"===n&&(u=r.mapValues(u,(function(e){return-e}))),l[o+n]=u}))}));var u=h(e,l);return f(l,u),p(l,e.graph().align)},findType1Conflicts:a,findType2Conflicts:s,addConflict:l,hasConflict:u,verticalAlignment:c,horizontalCompaction:d,alignCoordinates:f,findSmallestWidthAlignment:h,balance:p}},17873:(e,t,n)=>{"use strict";var r=n(38436),i=n(11138),o=n(3573).positionX;e.exports=function(e){(function(e){var t=i.buildLayerMatrix(e),n=e.graph().ranksep,o=0;r.forEach(t,(function(t){var i=r.max(r.map(t,(function(t){return e.node(t).height})));r.forEach(t,(function(t){e.node(t).y=o+i/2})),o+=i+n}))})(e=i.asNonCompoundGraph(e)),r.forEach(o(e),(function(t,n){e.node(n).x=t}))}},20300:(e,t,n)=>{"use strict";var r=n(38436),i=n(70574).Graph,o=n(76681).slack;function a(e,t){return r.forEach(e.nodes(),(function n(i){r.forEach(t.nodeEdges(i),(function(r){var a=r.v,s=i===a?r.w:a;e.hasNode(s)||o(t,r)||(e.setNode(s,{}),e.setEdge(i,s,{}),n(s))}))})),e.nodeCount()}function s(e,t){return r.minBy(t.edges(),(function(n){if(e.hasNode(n.v)!==e.hasNode(n.w))return o(t,n)}))}function l(e,t,n){r.forEach(e.nodes(),(function(e){t.node(e).rank+=n}))}e.exports=function(e){var t,n,r=new i({directed:!1}),u=e.nodes()[0],c=e.nodeCount();r.setNode(u,{});for(;a(r,e)<c;)t=s(r,e),n=r.hasNode(t.v)?o(e,t):-o(e,t),l(r,e,n);return r}},78093:(e,t,n)=>{"use strict";var r=n(76681).longestPath,i=n(20300),o=n(42472);e.exports=function(e){switch(e.graph().ranker){default:s(e);break;case"tight-tree":!function(e){r(e),i(e)}(e);break;case"longest-path":a(e)}};var a=r;function s(e){o(e)}},42472:(e,t,n)=>{"use strict";var r=n(38436),i=n(20300),o=n(76681).slack,a=n(76681).longestPath,s=n(70574).alg.preorder,l=n(70574).alg.postorder,u=n(11138).simplify;function c(e){e=u(e),a(e);var t,n=i(e);for(f(n),d(n,e);t=m(n);)v(n,e,t,g(n,e,t))}function d(e,t){var n=l(e,e.nodes());n=n.slice(0,n.length-1),r.forEach(n,(function(n){!function(e,t,n){var r=e.node(n).parent;e.edge(n,r).cutvalue=h(e,t,n)}(e,t,n)}))}function h(e,t,n){var i=e.node(n).parent,o=!0,a=t.edge(n,i),s=0;return a||(o=!1,a=t.edge(i,n)),s=a.weight,r.forEach(t.nodeEdges(n),(function(r){var a,l,u=r.v===n,c=u?r.w:r.v;if(c!==i){var d=u===o,h=t.edge(r).weight;if(s+=d?h:-h,a=n,l=c,e.hasEdge(a,l)){var f=e.edge(n,c).cutvalue;s+=d?-f:f}}})),s}function f(e,t){arguments.length<2&&(t=e.nodes()[0]),p(e,{},1,t)}function p(e,t,n,i,o){var a=n,s=e.node(i);return t[i]=!0,r.forEach(e.neighbors(i),(function(o){r.has(t,o)||(n=p(e,t,n,o,i))})),s.low=a,s.lim=n++,o?s.parent=o:delete s.parent,n}function m(e){return r.find(e.edges(),(function(t){return e.edge(t).cutvalue<0}))}function g(e,t,n){var i=n.v,a=n.w;t.hasEdge(i,a)||(i=n.w,a=n.v);var s=e.node(i),l=e.node(a),u=s,c=!1;s.lim>l.lim&&(u=l,c=!0);var d=r.filter(t.edges(),(function(t){return c===y(e,e.node(t.v),u)&&c!==y(e,e.node(t.w),u)}));return r.minBy(d,(function(e){return o(t,e)}))}function v(e,t,n,i){var o=n.v,a=n.w;e.removeEdge(o,a),e.setEdge(i.v,i.w,{}),f(e),d(e,t),function(e,t){var n=r.find(e.nodes(),(function(e){return!t.node(e).parent})),i=s(e,n);i=i.slice(1),r.forEach(i,(function(n){var r=e.node(n).parent,i=t.edge(n,r),o=!1;i||(i=t.edge(r,n),o=!0),t.node(n).rank=t.node(r).rank+(o?i.minlen:-i.minlen)}))}(e,t)}function y(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}e.exports=c,c.initLowLimValues=f,c.initCutValues=d,c.calcCutValue=h,c.leaveEdge=m,c.enterEdge=g,c.exchangeEdges=v},76681:(e,t,n)=>{"use strict";var r=n(38436);e.exports={longestPath:function(e){var t={};r.forEach(e.sources(),(function n(i){var o=e.node(i);if(r.has(t,i))return o.rank;t[i]=!0;var a=r.min(r.map(e.outEdges(i),(function(t){return n(t.w)-e.edge(t).minlen})));return a!==Number.POSITIVE_INFINITY&&null!=a||(a=0),o.rank=a}))},slack:function(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}}},11138:(e,t,n)=>{"use strict";var r=n(38436),i=n(70574).Graph;function o(e,t,n,i){var o;do{o=r.uniqueId(i)}while(e.hasNode(o));return n.dummy=t,e.setNode(o,n),o}function a(e){return r.max(r.map(e.nodes(),(function(t){var n=e.node(t).rank;if(!r.isUndefined(n))return n})))}e.exports={addDummyNode:o,simplify:function(e){var t=(new i).setGraph(e.graph());return r.forEach(e.nodes(),(function(n){t.setNode(n,e.node(n))})),r.forEach(e.edges(),(function(n){var r=t.edge(n.v,n.w)||{weight:0,minlen:1},i=e.edge(n);t.setEdge(n.v,n.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})})),t},asNonCompoundGraph:function(e){var t=new i({multigraph:e.isMultigraph()}).setGraph(e.graph());return r.forEach(e.nodes(),(function(n){e.children(n).length||t.setNode(n,e.node(n))})),r.forEach(e.edges(),(function(n){t.setEdge(n,e.edge(n))})),t},successorWeights:function(e){var t=r.map(e.nodes(),(function(t){var n={};return r.forEach(e.outEdges(t),(function(t){n[t.w]=(n[t.w]||0)+e.edge(t).weight})),n}));return r.zipObject(e.nodes(),t)},predecessorWeights:function(e){var t=r.map(e.nodes(),(function(t){var n={};return r.forEach(e.inEdges(t),(function(t){n[t.v]=(n[t.v]||0)+e.edge(t).weight})),n}));return r.zipObject(e.nodes(),t)},intersectRect:function(e,t){var n,r,i=e.x,o=e.y,a=t.x-i,s=t.y-o,l=e.width/2,u=e.height/2;if(!a&&!s)throw new Error("Not possible to find intersection inside of the rectangle");Math.abs(s)*l>Math.abs(a)*u?(s<0&&(u=-u),n=u*a/s,r=u):(a<0&&(l=-l),n=l,r=l*s/a);return{x:i+n,y:o+r}},buildLayerMatrix:function(e){var t=r.map(r.range(a(e)+1),(function(){return[]}));return r.forEach(e.nodes(),(function(n){var i=e.node(n),o=i.rank;r.isUndefined(o)||(t[o][i.order]=n)})),t},normalizeRanks:function(e){var t=r.min(r.map(e.nodes(),(function(t){return e.node(t).rank})));r.forEach(e.nodes(),(function(n){var i=e.node(n);r.has(i,"rank")&&(i.rank-=t)}))},removeEmptyRanks:function(e){var t=r.min(r.map(e.nodes(),(function(t){return e.node(t).rank}))),n=[];r.forEach(e.nodes(),(function(r){var i=e.node(r).rank-t;n[i]||(n[i]=[]),n[i].push(r)}));var i=0,o=e.graph().nodeRankFactor;r.forEach(n,(function(t,n){r.isUndefined(t)&&n%o!=0?--i:i&&r.forEach(t,(function(t){e.node(t).rank+=i}))}))},addBorderNode:function(e,t,n,r){var i={width:0,height:0};arguments.length>=4&&(i.rank=n,i.order=r);return o(e,"border",i,t)},maxRank:a,partition:function(e,t){var n={lhs:[],rhs:[]};return r.forEach(e,(function(e){t(e)?n.lhs.push(e):n.rhs.push(e)})),n},time:function(e,t){var n=r.now();try{return t()}finally{console.log(e+" time: "+(r.now()-n)+"ms")}},notime:function(e,t){return t()}}},88177:e=>{e.exports="0.8.5"},93162:function(e,t,n){var r,i,o;i=[],r=function(){"use strict";function t(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}function r(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){l(r.response,t,n)},r.onerror=function(){console.error("could not download file")},r.send()}function i(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function o(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var a="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n.g&&n.g.global===n.g?n.g:void 0,s=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=a.saveAs||("object"!=typeof window||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!s?function(e,t,n){var s=a.URL||a.webkitURL,l=document.createElement("a");t=t||e.name||"download",l.download=t,l.rel="noopener","string"==typeof e?(l.href=e,l.origin===location.origin?o(l):i(l.href)?r(e,t,n):o(l,l.target="_blank")):(l.href=s.createObjectURL(e),setTimeout((function(){s.revokeObjectURL(l.href)}),4e4),setTimeout((function(){o(l)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,n,a){if(n=n||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(t(e,a),n);else if(i(e))r(e,n,a);else{var s=document.createElement("a");s.href=e,s.target="_blank",setTimeout((function(){o(s)}))}}:function(e,t,n,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),"string"==typeof e)return r(e,t,n);var o="application/octet-stream"===e.type,l=/constructor/i.test(a.HTMLElement)||a.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||o&&l||s)&&"undefined"!=typeof FileReader){var c=new FileReader;c.onloadend=function(){var e=c.result;e=u?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=e:location=e,i=null},c.readAsDataURL(e)}else{var d=a.URL||a.webkitURL,h=d.createObjectURL(e);i?i.location=h:location.href=h,i=null,setTimeout((function(){d.revokeObjectURL(h)}),4e4)}});a.saveAs=l.saveAs=l,e.exports=l},void 0===(o="function"==typeof r?r.apply(t,i):r)||(e.exports=o)},13006:(e,t,n)=>{"use strict";var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(43929);var a=function(e){function t(e,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n,r));return i.__id=e,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"read",value:function(e){return this._request("GET","/gists/"+this.__id,null,e)}},{key:"create",value:function(e,t){var n=this;return this._request("POST","/gists",e,t).then((function(e){return n.__id=e.data.id,e}))}},{key:"delete",value:function(e){return this._request("DELETE","/gists/"+this.__id,null,e)}},{key:"fork",value:function(e){return this._request("POST","/gists/"+this.__id+"/forks",null,e)}},{key:"update",value:function(e,t){return this._request("PATCH","/gists/"+this.__id,e,t)}},{key:"star",value:function(e){return this._request("PUT","/gists/"+this.__id+"/star",null,e)}},{key:"unstar",value:function(e){return this._request("DELETE","/gists/"+this.__id+"/star",null,e)}},{key:"isStarred",value:function(e){return this._request204or404("/gists/"+this.__id+"/star",null,e)}},{key:"listCommits",value:function(e){return this._requestAllPages("/gists/"+this.__id+"/commits",null,e)}},{key:"getRevision",value:function(e,t){return this._request("GET","/gists/"+this.__id+"/"+e,null,t)}},{key:"listComments",value:function(e){return this._requestAllPages("/gists/"+this.__id+"/comments",null,e)}},{key:"getComment",value:function(e,t){return this._request("GET","/gists/"+this.__id+"/comments/"+e,null,t)}},{key:"createComment",value:function(e,t){return this._request("POST","/gists/"+this.__id+"/comments",{body:e},t)}},{key:"editComment",value:function(e,t,n){return this._request("PATCH","/gists/"+this.__id+"/comments/"+e,{body:t},n)}},{key:"deleteComment",value:function(e,t){return this._request("DELETE","/gists/"+this.__id+"/comments/"+e,null,t)}}]),t}(((r=o)&&r.__esModule?r:{default:r}).default);e.exports=a},25435:(e,t,n)=>{"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=p(n(13006)),o=p(n(37528)),a=p(n(34610)),s=p(n(52151)),l=p(n(71603)),u=p(n(38854)),c=p(n(81384)),d=p(n(2156)),h=p(n(53394)),f=p(n(75215));function p(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var g=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"https://api.github.com";m(this,e),this.__apiBase=n,this.__auth=t||{}}return r(e,[{key:"getGist",value:function(e){return new i.default(e,this.__auth,this.__apiBase)}},{key:"getUser",value:function(e){return new o.default(e,this.__auth,this.__apiBase)}},{key:"getOrganization",value:function(e){return new c.default(e,this.__auth,this.__apiBase)}},{key:"getTeam",value:function(e){return new d.default(e,this.__auth,this.__apiBase)}},{key:"getRepo",value:function(e,t){return new u.default(this._getFullName(e,t),this.__auth,this.__apiBase)}},{key:"getIssues",value:function(e,t){return new a.default(this._getFullName(e,t),this.__auth,this.__apiBase)}},{key:"search",value:function(e){return new s.default(e,this.__auth,this.__apiBase)}},{key:"getRateLimit",value:function(){return new l.default(this.__auth,this.__apiBase)}},{key:"getMarkdown",value:function(){return new h.default(this.__auth,this.__apiBase)}},{key:"getProject",value:function(e){return new f.default(e,this.__auth,this.__apiBase)}},{key:"_getFullName",value:function(e,t){var n=e;return t&&(n=e+"/"+t),n}}]),e}();e.exports=g},34610:(e,t,n)=>{"use strict";var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(43929);var a=function(e){function t(e,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n,r));return i.__repository=e,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"createIssue",value:function(e,t){return this._request("POST","/repos/"+this.__repository+"/issues",e,t)}},{key:"listIssues",value:function(e,t){return this._requestAllPages("/repos/"+this.__repository+"/issues",e,t)}},{key:"listIssueEvents",value:function(e,t){return this._request("GET","/repos/"+this.__repository+"/issues/"+e+"/events",null,t)}},{key:"listIssueComments",value:function(e,t){return this._request("GET","/repos/"+this.__repository+"/issues/"+e+"/comments",null,t)}},{key:"getIssueComment",value:function(e,t){return this._request("GET","/repos/"+this.__repository+"/issues/comments/"+e,null,t)}},{key:"createIssueComment",value:function(e,t,n){return this._request("POST","/repos/"+this.__repository+"/issues/"+e+"/comments",{body:t},n)}},{key:"editIssueComment",value:function(e,t,n){return this._request("PATCH","/repos/"+this.__repository+"/issues/comments/"+e,{body:t},n)}},{key:"deleteIssueComment",value:function(e,t){return this._request("DELETE","/repos/"+this.__repository+"/issues/comments/"+e,null,t)}},{key:"editIssue",value:function(e,t,n){return this._request("PATCH","/repos/"+this.__repository+"/issues/"+e,t,n)}},{key:"getIssue",value:function(e,t){return this._request("GET","/repos/"+this.__repository+"/issues/"+e,null,t)}},{key:"listMilestones",value:function(e,t){return this._request("GET","/repos/"+this.__repository+"/milestones",e,t)}},{key:"getMilestone",value:function(e,t){return this._request("GET","/repos/"+this.__repository+"/milestones/"+e,null,t)}},{key:"createMilestone",value:function(e,t){return this._request("POST","/repos/"+this.__repository+"/milestones",e,t)}},{key:"editMilestone",value:function(e,t,n){return this._request("PATCH","/repos/"+this.__repository+"/milestones/"+e,t,n)}},{key:"deleteMilestone",value:function(e,t){return this._request("DELETE","/repos/"+this.__repository+"/milestones/"+e,null,t)}},{key:"createLabel",value:function(e,t){return this._request("POST","/repos/"+this.__repository+"/labels",e,t)}},{key:"listLabels",value:function(e,t){return this._request("GET","/repos/"+this.__repository+"/labels",e,t)}},{key:"getLabel",value:function(e,t){return this._request("GET","/repos/"+this.__repository+"/labels/"+e,null,t)}},{key:"editLabel",value:function(e,t,n){return this._request("PATCH","/repos/"+this.__repository+"/labels/"+e,t,n)}},{key:"deleteLabel",value:function(e,t){return this._request("DELETE","/repos/"+this.__repository+"/labels/"+e,null,t)}}]),t}(((r=o)&&r.__esModule?r:{default:r}).default);e.exports=a},53394:(e,t,n)=>{"use strict";var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(43929);var a=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"render",value:function(e,t){return this._request("POST","/markdown",e,t,!0)}}]),t}(((r=o)&&r.__esModule?r:{default:r}).default);e.exports=a},81384:(e,t,n)=>{"use strict";var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(43929);var a=function(e){function t(e,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n,r));return i.__name=e,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"createRepo",value:function(e,t){return this._request("POST","/orgs/"+this.__name+"/repos",e,t)}},{key:"getRepos",value:function(e){var t=this._getOptionsWithDefaults({direction:"desc"});return this._requestAllPages("/orgs/"+this.__name+"/repos",t,e)}},{key:"isMember",value:function(e,t){return this._request204or404("/orgs/"+this.__name+"/members/"+e,null,t)}},{key:"listMembers",value:function(e,t){return this._request("GET","/orgs/"+this.__name+"/members",e,t)}},{key:"getTeams",value:function(e){return this._requestAllPages("/orgs/"+this.__name+"/teams",void 0,e)}},{key:"createTeam",value:function(e,t){return this._request("POST","/orgs/"+this.__name+"/teams",e,t)}},{key:"listProjects",value:function(e){return this._requestAllPages("/orgs/"+this.__name+"/projects",{AcceptHeader:"inertia-preview"},e)}},{key:"createProject",value:function(e,t){return(e=e||{}).AcceptHeader="inertia-preview",this._request("POST","/orgs/"+this.__name+"/projects",e,t)}}]),t}(((r=o)&&r.__esModule?r:{default:r}).default);e.exports=a},75215:(e,t,n)=>{"use strict";var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(43929);var a=function(e){function t(e,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n,r,"inertia-preview"));return i.__id=e,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"getProject",value:function(e){return this._request("GET","/projects/"+this.__id,null,e)}},{key:"updateProject",value:function(e,t){return this._request("PATCH","/projects/"+this.__id,e,t)}},{key:"deleteProject",value:function(e){return this._request("DELETE","/projects/"+this.__id,null,e)}},{key:"listProjectColumns",value:function(e){return this._requestAllPages("/projects/"+this.__id+"/columns",null,e)}},{key:"getProjectColumn",value:function(e,t){return this._request("GET","/projects/columns/"+e,null,t)}},{key:"createProjectColumn",value:function(e,t){return this._request("POST","/projects/"+this.__id+"/columns",e,t)}},{key:"updateProjectColumn",value:function(e,t,n){return this._request("PATCH","/projects/columns/"+e,t,n)}},{key:"deleteProjectColumn",value:function(e,t){return this._request("DELETE","/projects/columns/"+e,null,t)}},{key:"moveProjectColumn",value:function(e,t,n){return this._request("POST","/projects/columns/"+e+"/moves",{position:t},n)}},{key:"listProjectCards",value:function(e){var t=this;return this.listProjectColumns().then((function(e){var n=e.data;return Promise.all(n.map((function(e){return t._requestAllPages("/projects/columns/"+e.id+"/cards",null)})))})).then((function(t){var n=t.reduce((function(e,t){var n=t.data;return e.push.apply(e,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(n)),e}),[]);return e&&e(null,n),n})).catch((function(t){if(!e)throw t;e(t)}))}},{key:"listColumnCards",value:function(e,t){return this._requestAllPages("/projects/columns/"+e+"/cards",null,t)}},{key:"getProjectCard",value:function(e,t){return this._request("GET","/projects/columns/cards/"+e,null,t)}},{key:"createProjectCard",value:function(e,t,n){return this._request("POST","/projects/columns/"+e+"/cards",t,n)}},{key:"updateProjectCard",value:function(e,t,n){return this._request("PATCH","/projects/columns/cards/"+e,t,n)}},{key:"deleteProjectCard",value:function(e,t){return this._request("DELETE","/projects/columns/cards/"+e,null,t)}},{key:"moveProjectCard",value:function(e,t,n,r){return this._request("POST","/projects/columns/cards/"+e+"/moves",{position:t,column_id:n},r)}}]),t}(((r=o)&&r.__esModule?r:{default:r}).default);e.exports=a},71603:(e,t,n)=>{"use strict";var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(43929);var a=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"getRateLimit",value:function(e){return this._request("GET","/rate_limit",null,e)}}]),t}(((r=o)&&r.__esModule?r:{default:r}).default);e.exports=a},38854:(e,t,n)=>{"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=l(n(43929)),a=l(n(57458)),s=n(19575);function l(e){return e&&e.__esModule?e:{default:e}}var u=(0,l(n(42283)).default)("github:repository"),c=function(e){function t(e,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n,r));return i.__fullname=e,i.__currentTree={branch:null,sha:null},i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"getRef",value:function(e,t){return this._request("GET","/repos/"+this.__fullname+"/git/refs/"+e,null,t)}},{key:"createRef",value:function(e,t){return this._request("POST","/repos/"+this.__fullname+"/git/refs",e,t)}},{key:"deleteRef",value:function(e,t){return this._request("DELETE","/repos/"+this.__fullname+"/git/refs/"+e,null,t)}},{key:"deleteRepo",value:function(e){return this._request("DELETE","/repos/"+this.__fullname,null,e)}},{key:"listTags",value:function(e){return this._request("GET","/repos/"+this.__fullname+"/tags",null,e)}},{key:"listPullRequests",value:function(e,t){return e=e||{},this._request("GET","/repos/"+this.__fullname+"/pulls",e,t)}},{key:"getPullRequest",value:function(e,t){return this._request("GET","/repos/"+this.__fullname+"/pulls/"+e,null,t)}},{key:"listPullRequestFiles",value:function(e,t){return this._request("GET","/repos/"+this.__fullname+"/pulls/"+e+"/files",null,t)}},{key:"compareBranches",value:function(e,t,n){return this._request("GET","/repos/"+this.__fullname+"/compare/"+e+"..."+t,null,n)}},{key:"listBranches",value:function(e){return this._request("GET","/repos/"+this.__fullname+"/branches",null,e)}},{key:"getBlob",value:function(e,t){return this._request("GET","/repos/"+this.__fullname+"/git/blobs/"+e,null,t,"raw")}},{key:"getBranch",value:function(e,t){return this._request("GET","/repos/"+this.__fullname+"/branches/"+e,null,t)}},{key:"getCommit",value:function(e,t){return this._request("GET","/repos/"+this.__fullname+"/git/commits/"+e,null,t)}},{key:"listCommits",value:function(e,t){return"function"==typeof(e=e||{})&&(t=e,e={}),e.since=this._dateToISO(e.since),e.until=this._dateToISO(e.until),this._request("GET","/repos/"+this.__fullname+"/commits",e,t)}},{key:"listCommitsOnPR",value:function(e,t,n){return"function"==typeof(t=t||{})&&(n=t,t={}),this._request("GET","/repos/"+this.__fullname+"/pulls/"+e+"/commits",t,n)}},{key:"getSingleCommit",value:function(e,t){return e=e||"",this._request("GET","/repos/"+this.__fullname+"/commits/"+e,null,t)}},{key:"getSha",value:function(e,t,n){return e=e?"?ref="+e:"",this._request("GET","/repos/"+this.__fullname+"/contents/"+t+e,null,n)}},{key:"listStatuses",value:function(e,t){return this._request("GET","/repos/"+this.__fullname+"/commits/"+e+"/statuses",null,t)}},{key:"getCombinedStatus",value:function(e,t){return this._request("GET","/repos/"+this.__fullname+"/commits/"+e+"/status",null,t)}},{key:"getTree",value:function(e,t){return this._request("GET","/repos/"+this.__fullname+"/git/trees/"+e,null,t)}},{key:"createBlob",value:function(e,t){var n=this._getContentObject(e);return u("sending content",n),this._request("POST","/repos/"+this.__fullname+"/git/blobs",n,t)}},{key:"_getContentObject",value:function(e){if("string"==typeof e)return u("contet is a string"),{content:a.default.encode(e),encoding:"utf-8"};if("undefined"!=typeof Buffer&&e instanceof Buffer)return u("We appear to be in Node"),{content:e.toString("base64"),encoding:"base64"};if("undefined"!=typeof Blob&&e instanceof Blob)return u("We appear to be in the browser"),{content:s.Base64.encode(e),encoding:"base64"};throw u("Not sure what this content is: "+(void 0===e?"undefined":r(e))+", "+JSON.stringify(e)),new Error("Unknown content passed to postBlob. Must be string or Buffer (node) or Blob (web)")}},{key:"updateTree",value:function(e,t,n,r){var i={base_tree:e,tree:[{path:t,sha:n,mode:"100644",type:"blob"}]};return this._request("POST","/repos/"+this.__fullname+"/git/trees",i,r)}},{key:"createTree",value:function(e,t,n){return this._request("POST","/repos/"+this.__fullname+"/git/trees",{tree:e,base_tree:t},n)}},{key:"commit",value:function(e,t,n,r,i){var o=this;"function"==typeof r&&(i=r,r={});var a={message:n,tree:t,parents:[e]};return a=Object.assign({},r,a),this._request("POST","/repos/"+this.__fullname+"/git/commits",a,i).then((function(e){return o.__currentTree.sha=e.data.sha,e}))}},{key:"updateHead",value:function(e,t,n,r){return this._request("PATCH","/repos/"+this.__fullname+"/git/refs/"+e,{sha:t,force:n},r)}},{key:"updateStatus",value:function(e,t,n){return this._request("POST","/repos/"+this.__fullname+"/statuses/"+e,t,n)}},{key:"updateRepository",value:function(e,t){return this._request("PATCH","/repos/"+this.__fullname,e,t)}},{key:"getDetails",value:function(e){return this._request("GET","/repos/"+this.__fullname,null,e)}},{key:"getContributors",value:function(e){return this._request("GET","/repos/"+this.__fullname+"/contributors",null,e)}},{key:"getContributorStats",value:function(e){return this._request("GET","/repos/"+this.__fullname+"/stats/contributors",null,e)}},{key:"getCollaborators",value:function(e){return this._request("GET","/repos/"+this.__fullname+"/collaborators",null,e)}},{key:"isCollaborator",value:function(e,t){return this._request("GET","/repos/"+this.__fullname+"/collaborators/"+e,null,t)}},{key:"getContents",value:function(e,t,n,r){return t=t?""+encodeURI(t):"",this._request("GET","/repos/"+this.__fullname+"/contents/"+t,{ref:e},r,n)}},{key:"getReadme",value:function(e,t,n){return this._request("GET","/repos/"+this.__fullname+"/readme",{ref:e},n,t)}},{key:"fork",value:function(e){return this._request("POST","/repos/"+this.__fullname+"/forks",null,e)}},{key:"forkToOrg",value:function(e,t){return this._request("POST","/repos/"+this.__fullname+"/forks?organization="+e,null,t)}},{key:"listForks",value:function(e){return this._request("GET","/repos/"+this.__fullname+"/forks",null,e)}},{key:"createBranch",value:function(e,t,n){var r=this;return"function"==typeof t&&(n=t,t=e,e="master"),this.getRef("heads/"+e).then((function(e){var i=e.data.object.sha;return r.createRef({sha:i,ref:"refs/heads/"+t},n)}))}},{key:"createPullRequest",value:function(e,t){return this._request("POST","/repos/"+this.__fullname+"/pulls",e,t)}},{key:"updatePullRequest",value:function(e,t,n){return this._request("PATCH","/repos/"+this.__fullname+"/pulls/"+e,t,n)}},{key:"listHooks",value:function(e){return this._request("GET","/repos/"+this.__fullname+"/hooks",null,e)}},{key:"getHook",value:function(e,t){return this._request("GET","/repos/"+this.__fullname+"/hooks/"+e,null,t)}},{key:"createHook",value:function(e,t){return this._request("POST","/repos/"+this.__fullname+"/hooks",e,t)}},{key:"updateHook",value:function(e,t,n){return this._request("PATCH","/repos/"+this.__fullname+"/hooks/"+e,t,n)}},{key:"deleteHook",value:function(e,t){return this._request("DELETE","/repos/"+this.__fullname+"/hooks/"+e,null,t)}},{key:"listKeys",value:function(e){return this._request("GET","/repos/"+this.__fullname+"/keys",null,e)}},{key:"getKey",value:function(e,t){return this._request("GET","/repos/"+this.__fullname+"/keys/"+e,null,t)}},{key:"createKey",value:function(e,t){return this._request("POST","/repos/"+this.__fullname+"/keys",e,t)}},{key:"deleteKey",value:function(e,t){return this._request("DELETE","/repos/"+this.__fullname+"/keys/"+e,null,t)}},{key:"deleteFile",value:function(e,t,n){var r=this;return this.getSha(e,t).then((function(i){var o={message:"Delete the file at '"+t+"'",sha:i.data.sha,branch:e};return r._request("DELETE","/repos/"+r.__fullname+"/contents/"+t,o,n)}))}},{key:"move",value:function(e,t,n,r){var i=this,o=void 0;return this.getRef("heads/"+e).then((function(e){var t=e.data.object;return i.getTree(t.sha+"?recursive=true")})).then((function(e){var r=e.data,a=r.tree,s=r.sha;o=s;var l=a.map((function(e){return e.path===t&&(e.path=n),"tree"===e.type&&delete e.sha,e}));return i.createTree(l)})).then((function(e){var r=e.data;return i.commit(o,r.sha,"Renamed '"+t+"' to '"+n+"'")})).then((function(t){var n=t.data;return i.updateHead("heads/"+e,n.sha,!0,r)}))}},{key:"writeFile",value:function(e,t,n,r,i,o){var a=this;"function"==typeof(i=i||{})&&(o=i,i={});var l=t?encodeURI(t):"",u=!1!==i.encode,c={branch:e,message:r,author:i.author,committer:i.committer,content:u?s.Base64.encode(n):n};return this.getSha(e,l).then((function(e){return c.sha=e.data.sha,a._request("PUT","/repos/"+a.__fullname+"/contents/"+l,c,o)}),(function(){return a._request("PUT","/repos/"+a.__fullname+"/contents/"+l,c,o)}))}},{key:"isStarred",value:function(e){return this._request204or404("/user/starred/"+this.__fullname,null,e)}},{key:"star",value:function(e){return this._request("PUT","/user/starred/"+this.__fullname,null,e)}},{key:"unstar",value:function(e){return this._request("DELETE","/user/starred/"+this.__fullname,null,e)}},{key:"createRelease",value:function(e,t){return this._request("POST","/repos/"+this.__fullname+"/releases",e,t)}},{key:"updateRelease",value:function(e,t,n){return this._request("PATCH","/repos/"+this.__fullname+"/releases/"+e,t,n)}},{key:"listReleases",value:function(e){return this._request("GET","/repos/"+this.__fullname+"/releases",null,e)}},{key:"getRelease",value:function(e,t){return this._request("GET","/repos/"+this.__fullname+"/releases/"+e,null,t)}},{key:"deleteRelease",value:function(e,t){return this._request("DELETE","/repos/"+this.__fullname+"/releases/"+e,null,t)}},{key:"mergePullRequest",value:function(e,t,n){return this._request("PUT","/repos/"+this.__fullname+"/pulls/"+e+"/merge",t,n)}},{key:"listProjects",value:function(e){return this._requestAllPages("/repos/"+this.__fullname+"/projects",{AcceptHeader:"inertia-preview"},e)}},{key:"createProject",value:function(e,t){return(e=e||{}).AcceptHeader="inertia-preview",this._request("POST","/repos/"+this.__fullname+"/projects",e,t)}}]),t}(o.default);e.exports=c},43929:(e,t,n)=>{"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=l(n(9669)),a=l(n(42283)),s=n(19575);function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c=(0,a.default)("github:request"),d=function(e){function t(e,n,r){u(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.path=n,i.request=r.config,i.response=(r||{}).response||r,i.status=r.status,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Error),t}(),h=function(){function e(t,n,r){u(this,e),this.__apiBase=n||"https://api.github.com",this.__auth={token:t.token,username:t.username,password:t.password},this.__AcceptHeader=r||"v3",t.token?this.__authorizationHeader="token "+t.token:t.username&&t.password&&(this.__authorizationHeader="Basic "+s.Base64.encode(t.username+":"+t.password))}return i(e,[{key:"__getURL",value:function(e){var t=e;-1===e.indexOf("//")&&(t=this.__apiBase+e);var n="timestamp="+(new Date).getTime();return t.replace(/(timestamp=\d+)/,n)}},{key:"__getRequestHeaders",value:function(e,t){var n={"Content-Type":"application/json;charset=UTF-8",Accept:"application/vnd.github."+(t||this.__AcceptHeader)};return e&&(n.Accept+=".raw"),n.Accept+="+json",this.__authorizationHeader&&(n.Authorization=this.__authorizationHeader),n}},{key:"_getOptionsWithDefaults",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.visibility||e.affiliation||(e.type=e.type||"all"),e.sort=e.sort||"updated",e.per_page=e.per_page||"100",e}},{key:"_dateToISO",value:function(e){return e&&e instanceof Date&&(e=e.toISOString()),e}},{key:"_request",value:function(e,t,n,i,a){var s=this.__getURL(t),l=(n||{}).AcceptHeader;l&&delete n.AcceptHeader;var u=this.__getRequestHeaders(a,l),d={},h=n&&"object"===(void 0===n?"undefined":r(n))&&function(e){return-1!==f.indexOf(e)}(e);h&&(d=n,n=void 0);var m={url:s,method:e,headers:u,params:d,data:n,responseType:a?"text":"json"};c(m.method+" to "+m.url);var g=(0,o.default)(m).catch(p(i,t));return i&&g.then((function(e){e.data&&Object.keys(e.data).length>0?i(null,e.data,e):"GET"!==m.method&&Object.keys(e.data).length<1?i(null,e.status<300,e):i(null,e.data,e)})),g}},{key:"_request204or404",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"GET";return this._request(r,e,t).then((function(e){return n&&n(null,!0,e),!0}),(function(e){if(404===e.response.status)return n&&n(null,!1,e),!1;throw n&&n(e),e}))}},{key:"_requestAllPages",value:function(e,t,n,r){var i=this;return r=r||[],this._request("GET",e,t).then((function(o){var a,s=void 0;if(o.data instanceof Array)s=o.data;else{if(!(o.data.items instanceof Array)){var l="cannot figure out how to append "+o.data+" to the result set";throw new d(l,e,o)}s=o.data.items}(a=r).push.apply(a,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(s));var u=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split(/\s*,\s*/).reduce((function(e,t){return-1!==t.search(/rel="next"/)?(t.match(/<(.*)>/)||[])[1]:e}),void 0)}(o.headers.link);return u&&(t||(t={}),t.page=parseInt(u.match(/([&\?]page=[0-9]*)/g).shift().split("=").pop()),!t||"number"==typeof t.page)?(c("getting next page: "+u),i._requestAllPages(u,t,n,r)):(n&&n(null,r,o),o.data=r,o)})).catch(p(n,e))}}]),e}();e.exports=h;var f=["GET","HEAD","DELETE"];function p(e,t){return function(n){var r=void 0;if(n.hasOwnProperty("config")){var i=n.response,o=i.status,a=i.statusText,s=n.config,l=o+" error making request "+s.method+" "+s.url+': "'+a+'"';r=new d(l,t,n),c(l+" "+JSON.stringify(n.data))}else r=n;if(!e)throw c("throwing error"),r;c("going to error callback"),e(r)}}},52151:(e,t,n)=>{"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=o(n(43929));function o(e){return e&&e.__esModule?e:{default:e}}var a=(0,o(n(42283)).default)("github:search"),s=function(e){function t(e,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n,r));return i.__defaults=i._getOptionsWithDefaults(e),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"_search",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i={};return Object.keys(this.__defaults).forEach((function(e){i[e]=t.__defaults[e]})),Object.keys(n).forEach((function(e){i[e]=n[e]})),a("searching "+e+" with options:",i),this._requestAllPages("/search/"+e,i,r)}},{key:"forRepositories",value:function(e,t){return this._search("repositories",e,t)}},{key:"forCode",value:function(e,t){return this._search("code",e,t)}},{key:"forIssues",value:function(e,t){return this._search("issues",e,t)}},{key:"forUsers",value:function(e,t){return this._search("users",e,t)}}]),t}(i.default);e.exports=s},2156:(e,t,n)=>{"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=o(n(43929));function o(e){return e&&e.__esModule?e:{default:e}}var a=(0,o(n(42283)).default)("github:team"),s=function(e){function t(e,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n,r));return i.__teamId=e,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"getTeam",value:function(e){return a("Fetching Team "+this.__teamId),this._request("Get","/teams/"+this.__teamId,void 0,e)}},{key:"listRepos",value:function(e){return a("Fetching repositories for Team "+this.__teamId),this._requestAllPages("/teams/"+this.__teamId+"/repos",void 0,e)}},{key:"editTeam",value:function(e,t){return a("Editing Team "+this.__teamId),this._request("PATCH","/teams/"+this.__teamId,e,t)}},{key:"listMembers",value:function(e,t){return a("Getting members of Team "+this.__teamId),this._requestAllPages("/teams/"+this.__teamId+"/members",e,t)}},{key:"getMembership",value:function(e,t){return a("Getting membership of user "+e+" in Team "+this.__teamId),this._request("GET","/teams/"+this.__teamId+"/memberships/"+e,void 0,t)}},{key:"addMembership",value:function(e,t,n){return a("Adding user "+e+" to Team "+this.__teamId),this._request("PUT","/teams/"+this.__teamId+"/memberships/"+e,t,n)}},{key:"isManagedRepo",value:function(e,t,n){return a("Getting repo management by Team "+this.__teamId+" for repo "+e+"/"+t),this._request204or404("/teams/"+this.__teamId+"/repos/"+e+"/"+t,void 0,n)}},{key:"manageRepo",value:function(e,t,n,r){return a("Adding or Updating repo management by Team "+this.__teamId+" for repo "+e+"/"+t),this._request204or404("/teams/"+this.__teamId+"/repos/"+e+"/"+t,n,r,"PUT")}},{key:"unmanageRepo",value:function(e,t,n){return a("Remove repo management by Team "+this.__teamId+" for repo "+e+"/"+t),this._request204or404("/teams/"+this.__teamId+"/repos/"+e+"/"+t,void 0,n,"DELETE")}},{key:"deleteTeam",value:function(e){return a("Deleting Team "+this.__teamId),this._request204or404("/teams/"+this.__teamId,void 0,e,"DELETE")}}]),t}(i.default);e.exports=s},37528:(e,t,n)=>{"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=o(n(43929));function o(e){return e&&e.__esModule?e:{default:e}}var a=(0,o(n(42283)).default)("github:user"),s=function(e){function t(e,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n,r));return i.__user=e,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"__getScopedUrl",value:function(e){if(this.__user)return e?"/users/"+this.__user+"/"+e:"/users/"+this.__user;switch(e){case"":return"/user";case"notifications":case"gists":return"/"+e;default:return"/user/"+e}}},{key:"listRepos",value:function(e,t){return"function"==typeof e&&(t=e,e={}),e=this._getOptionsWithDefaults(e),a("Fetching repositories with options: "+JSON.stringify(e)),this._requestAllPages(this.__getScopedUrl("repos"),e,t)}},{key:"listOrgs",value:function(e){return this._request("GET",this.__getScopedUrl("orgs"),null,e)}},{key:"listFollowers",value:function(e){return this._request("GET",this.__getScopedUrl("followers"),null,e)}},{key:"listFollowing",value:function(e){return this._request("GET",this.__getScopedUrl("following"),null,e)}},{key:"listGists",value:function(e){return this._request("GET",this.__getScopedUrl("gists"),null,e)}},{key:"listNotifications",value:function(e,t){return"function"==typeof(e=e||{})&&(t=e,e={}),e.since=this._dateToISO(e.since),e.before=this._dateToISO(e.before),this._request("GET",this.__getScopedUrl("notifications"),e,t)}},{key:"getProfile",value:function(e){return this._request("GET",this.__getScopedUrl(""),null,e)}},{key:"listStarredRepos",value:function(e){var t=this._getOptionsWithDefaults();return this._requestAllPages(this.__getScopedUrl("starred"),t,e)}},{key:"listStarredGists",value:function(e,t){return"function"==typeof(e=e||{})&&(t=e,e={}),e.since=this._dateToISO(e.since),this._request("GET","/gists/starred",e,t)}},{key:"getEmails",value:function(e){return this._request("GET","/user/emails",null,e)}},{key:"follow",value:function(e,t){return this._request("PUT","/user/following/"+e,null,t)}},{key:"unfollow",value:function(e,t){return this._request("DELETE","/user/following/"+e,null,t)}},{key:"createRepo",value:function(e,t){return this._request("POST","/user/repos",e,t)}}]),t}(i.default);e.exports=s},42283:(e,t,n)=>{function r(){var e;try{e=t.storage.debug}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e}(t=e.exports=n(82165)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return;var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var i=0,o=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(i++,"%c"===e&&(o=i))})),e.splice(o,0,r)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=r,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(r())},82165:(e,t,n)=>{var r;function i(e){function n(){if(n.enabled){var e=n,i=+new Date,o=i-(r||i);e.diff=o,e.prev=r,e.curr=i,r=i;for(var a=new Array(arguments.length),s=0;s<a.length;s++)a[s]=arguments[s];a[0]=t.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");var l=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,(function(n,r){if("%%"===n)return n;l++;var i=t.formatters[r];if("function"==typeof i){var o=a[l];n=i.call(e,o),a.splice(l,1),l--}return n})),t.formatArgs.call(e,a);var u=n.log||t.log||console.log.bind(console);u.apply(e,a)}}return n.namespace=e,n.enabled=t.enabled(e),n.useColors=t.useColors(),n.color=function(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}(e),"function"==typeof t.init&&t.init(n),n}(t=e.exports=i.debug=i.default=i).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e),t.names=[],t.skips=[];for(var n=("string"==typeof e?e:"").split(/[\s,]+/),r=n.length,i=0;i<r;i++)n[i]&&("-"===(e=n[i].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(12451),t.names=[],t.skips=[],t.formatters={}},12451:e=>{var t=1e3,n=60*t,r=60*n,i=24*r,o=365.25*i;function a(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}e.exports=function(e,s){s=s||{};var l,u=typeof e;if("string"===u&&e.length>0)return function(e){if((e=String(e)).length>100)return;var a=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!a)return;var s=parseFloat(a[1]);switch((a[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return s*o;case"days":case"day":case"d":return s*i;case"hours":case"hour":case"hrs":case"hr":case"h":return s*r;case"minutes":case"minute":case"mins":case"min":case"m":return s*n;case"seconds":case"second":case"secs":case"sec":case"s":return s*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}(e);if("number"===u&&!1===isNaN(e))return s.long?a(l=e,i,"day")||a(l,r,"hour")||a(l,n,"minute")||a(l,t,"second")||l+" ms":function(e){if(e>=i)return Math.round(e/i)+"d";if(e>=r)return Math.round(e/r)+"h";if(e>=n)return Math.round(e/n)+"m";if(e>=t)return Math.round(e/t)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},89550:e=>{e.exports=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}},62189:e=>{e.exports=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}},76057:e=>{e.exports=function(e){var t=new Float32Array(2);return t[0]=e[0],t[1]=e[1],t}},3492:e=>{e.exports=function(e,t){return e[0]=t[0],e[1]=t[1],e}},61589:e=>{e.exports=function(){var e=new Float32Array(2);return e[0]=0,e[1]=0,e}},77741:e=>{e.exports=function(e,t,n){var r=t[0]*n[1]-t[1]*n[0];return e[0]=e[1]=0,e[2]=r,e}},80278:(e,t,n)=>{e.exports=n(27953)},27953:e=>{e.exports=function(e,t){var n=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(n*n+r*r)}},49973:(e,t,n)=>{e.exports=n(6773)},6773:e=>{e.exports=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e}},56601:e=>{e.exports=function(e,t){return e[0]*t[0]+e[1]*t[1]}},89936:e=>{e.exports=1e-6},51232:(e,t,n)=>{e.exports=function(e,t){var n=e[0],i=e[1],o=t[0],a=t[1];return Math.abs(n-o)<=r*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(i-a)<=r*Math.max(1,Math.abs(i),Math.abs(a))};var r=n(89936)},39546:e=>{e.exports=function(e,t){return e[0]===t[0]&&e[1]===t[1]}},67744:e=>{e.exports=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}},49002:(e,t,n)=>{e.exports=function(e,t,n,i,o,a){var s,l;t||(t=2);n||(n=0);l=i?Math.min(i*t+n,e.length):e.length;for(s=n;s<l;s+=t)r[0]=e[s],r[1]=e[s+1],o(r,r,a),e[s]=r[0],e[s+1]=r[1];return e};var r=n(61589)()},69878:e=>{e.exports=function(e,t){var n=new Float32Array(2);return n[0]=e,n[1]=t,n}},32644:(e,t,n)=>{e.exports={EPSILON:n(89936),create:n(61589),clone:n(76057),fromValues:n(69878),copy:n(3492),set:n(68854),equals:n(51232),exactEquals:n(39546),add:n(89550),subtract:n(43650),sub:n(45222),multiply:n(79920),mul:n(23113),divide:n(6773),div:n(49973),inverse:n(83793),min:n(20676),max:n(97899),rotate:n(48677),floor:n(67744),ceil:n(62189),round:n(57074),scale:n(47838),scaleAndAdd:n(21066),distance:n(27953),dist:n(80278),squaredDistance:n(14290),sqrDist:n(79569),length:n(37781),len:n(8123),squaredLength:n(26791),sqrLen:n(1791),negate:n(90549),normalize:n(36820),dot:n(56601),cross:n(77741),lerp:n(20577),random:n(85773),transformMat2:n(904),transformMat2d:n(60736),transformMat3:n(60221),transformMat4:n(37674),forEach:n(49002),limit:n(82418)}},83793:e=>{e.exports=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}},8123:(e,t,n)=>{e.exports=n(37781)},37781:e=>{e.exports=function(e){var t=e[0],n=e[1];return Math.sqrt(t*t+n*n)}},20577:e=>{e.exports=function(e,t,n,r){var i=t[0],o=t[1];return e[0]=i+r*(n[0]-i),e[1]=o+r*(n[1]-o),e}},82418:e=>{e.exports=function(e,t,n){var r=t[0]*t[0]+t[1]*t[1];if(r>n*n){var i=Math.sqrt(r);e[0]=t[0]/i*n,e[1]=t[1]/i*n}else e[0]=t[0],e[1]=t[1];return e}},97899:e=>{e.exports=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e}},20676:e=>{e.exports=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e}},23113:(e,t,n)=>{e.exports=n(79920)},79920:e=>{e.exports=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e}},90549:e=>{e.exports=function(e,t){return e[0]=-t[0],e[1]=-t[1],e}},36820:e=>{e.exports=function(e,t){var n=t[0],r=t[1],i=n*n+r*r;i>0&&(i=1/Math.sqrt(i),e[0]=t[0]*i,e[1]=t[1]*i);return e}},85773:e=>{e.exports=function(e,t){t=t||1;var n=2*Math.random()*Math.PI;return e[0]=Math.cos(n)*t,e[1]=Math.sin(n)*t,e}},48677:e=>{e.exports=function(e,t,n){var r=Math.cos(n),i=Math.sin(n),o=t[0],a=t[1];return e[0]=o*r-a*i,e[1]=o*i+a*r,e}},57074:e=>{e.exports=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}},47838:e=>{e.exports=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e}},21066:e=>{e.exports=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e}},68854:e=>{e.exports=function(e,t,n){return e[0]=t,e[1]=n,e}},79569:(e,t,n)=>{e.exports=n(14290)},1791:(e,t,n)=>{e.exports=n(26791)},14290:e=>{e.exports=function(e,t){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}},26791:e=>{e.exports=function(e){var t=e[0],n=e[1];return t*t+n*n}},45222:(e,t,n)=>{e.exports=n(43650)},43650:e=>{e.exports=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e}},904:e=>{e.exports=function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[2]*i,e[1]=n[1]*r+n[3]*i,e}},60736:e=>{e.exports=function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[2]*i+n[4],e[1]=n[1]*r+n[3]*i+n[5],e}},60221:e=>{e.exports=function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[3]*i+n[6],e[1]=n[1]*r+n[4]*i+n[7],e}},37674:e=>{e.exports=function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[4]*i+n[12],e[1]=n[1]*r+n[5]*i+n[13],e}},28282:(e,t,n)=>{var r=n(82354);e.exports={Graph:r.Graph,json:n(28974),alg:n(12440),version:r.version}},2842:(e,t,n)=>{var r=n(89126);e.exports=function(e){var t,n={},i=[];function o(i){r.has(n,i)||(n[i]=!0,t.push(i),r.each(e.successors(i),o),r.each(e.predecessors(i),o))}return r.each(e.nodes(),(function(e){t=[],o(e),t.length&&i.push(t)})),i}},53984:(e,t,n)=>{var r=n(89126);function i(e,t,n,o,a,s){r.has(o,t)||(o[t]=!0,n||s.push(t),r.each(a(t),(function(t){i(e,t,n,o,a,s)})),n&&s.push(t))}e.exports=function(e,t,n){r.isArray(t)||(t=[t]);var o=(e.isDirected()?e.successors:e.neighbors).bind(e),a=[],s={};return r.each(t,(function(t){if(!e.hasNode(t))throw new Error("Graph does not have node: "+t);i(e,t,"post"===n,s,o,a)})),a}},84847:(e,t,n)=>{var r=n(63763),i=n(89126);e.exports=function(e,t,n){return i.transform(e.nodes(),(function(i,o){i[o]=r(e,o,t,n)}),{})}},63763:(e,t,n)=>{var r=n(89126),i=n(75639);e.exports=function(e,t,n,r){return function(e,t,n,r){var o,a,s={},l=new i,u=function(e){var t=e.v!==o?e.v:e.w,r=s[t],i=n(e),u=a.distance+i;if(i<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+e+" Weight: "+i);u<r.distance&&(r.distance=u,r.predecessor=o,l.decrease(t,u))};e.nodes().forEach((function(e){var n=e===t?0:Number.POSITIVE_INFINITY;s[e]={distance:n},l.add(e,n)}));for(;l.size()>0&&(o=l.removeMin(),(a=s[o]).distance!==Number.POSITIVE_INFINITY);)r(o).forEach(u);return s}(e,String(t),n||o,r||function(t){return e.outEdges(t)})};var o=r.constant(1)},9096:(e,t,n)=>{var r=n(89126),i=n(5023);e.exports=function(e){return r.filter(i(e),(function(t){return t.length>1||1===t.length&&e.hasEdge(t[0],t[0])}))}},38924:(e,t,n)=>{var r=n(89126);e.exports=function(e,t,n){return function(e,t,n){var r={},i=e.nodes();return i.forEach((function(e){r[e]={},r[e][e]={distance:0},i.forEach((function(t){e!==t&&(r[e][t]={distance:Number.POSITIVE_INFINITY})})),n(e).forEach((function(n){var i=n.v===e?n.w:n.v,o=t(n);r[e][i]={distance:o,predecessor:e}}))})),i.forEach((function(e){var t=r[e];i.forEach((function(n){var o=r[n];i.forEach((function(n){var r=o[e],i=t[n],a=o[n],s=r.distance+i.distance;s<a.distance&&(a.distance=s,a.predecessor=i.predecessor)}))}))})),r}(e,t||i,n||function(t){return e.outEdges(t)})};var i=r.constant(1)},12440:(e,t,n)=>{e.exports={components:n(2842),dijkstra:n(63763),dijkstraAll:n(84847),findCycles:n(9096),floydWarshall:n(38924),isAcyclic:n(62707),postorder:n(58828),preorder:n(92648),prim:n(80514),tarjan:n(5023),topsort:n(2166)}},62707:(e,t,n)=>{var r=n(2166);e.exports=function(e){try{r(e)}catch(e){if(e instanceof r.CycleException)return!1;throw e}return!0}},58828:(e,t,n)=>{var r=n(53984);e.exports=function(e,t){return r(e,t,"post")}},92648:(e,t,n)=>{var r=n(53984);e.exports=function(e,t){return r(e,t,"pre")}},80514:(e,t,n)=>{var r=n(89126),i=n(30771),o=n(75639);e.exports=function(e,t){var n,a=new i,s={},l=new o;function u(e){var r=e.v===n?e.w:e.v,i=l.priority(r);if(void 0!==i){var o=t(e);o<i&&(s[r]=n,l.decrease(r,o))}}if(0===e.nodeCount())return a;r.each(e.nodes(),(function(e){l.add(e,Number.POSITIVE_INFINITY),a.setNode(e)})),l.decrease(e.nodes()[0],0);var c=!1;for(;l.size()>0;){if(n=l.removeMin(),r.has(s,n))a.setEdge(n,s[n]);else{if(c)throw new Error("Input graph is not connected: "+e);c=!0}e.nodeEdges(n).forEach(u)}return a}},5023:(e,t,n)=>{var r=n(89126);e.exports=function(e){var t=0,n=[],i={},o=[];function a(s){var l=i[s]={onStack:!0,lowlink:t,index:t++};if(n.push(s),e.successors(s).forEach((function(e){r.has(i,e)?i[e].onStack&&(l.lowlink=Math.min(l.lowlink,i[e].index)):(a(e),l.lowlink=Math.min(l.lowlink,i[e].lowlink))})),l.lowlink===l.index){var u,c=[];do{u=n.pop(),i[u].onStack=!1,c.push(u)}while(s!==u);o.push(c)}}return e.nodes().forEach((function(e){r.has(i,e)||a(e)})),o}},2166:(e,t,n)=>{var r=n(89126);function i(e){var t={},n={},i=[];if(r.each(e.sinks(),(function a(s){if(r.has(n,s))throw new o;r.has(t,s)||(n[s]=!0,t[s]=!0,r.each(e.predecessors(s),a),delete n[s],i.push(s))})),r.size(t)!==e.nodeCount())throw new o;return i}function o(){}e.exports=i,i.CycleException=o,o.prototype=new Error},75639:(e,t,n)=>{var r=n(89126);function i(){this._arr=[],this._keyIndices={}}e.exports=i,i.prototype.size=function(){return this._arr.length},i.prototype.keys=function(){return this._arr.map((function(e){return e.key}))},i.prototype.has=function(e){return r.has(this._keyIndices,e)},i.prototype.priority=function(e){var t=this._keyIndices[e];if(void 0!==t)return this._arr[t].priority},i.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},i.prototype.add=function(e,t){var n=this._keyIndices;if(e=String(e),!r.has(n,e)){var i=this._arr,o=i.length;return n[e]=o,i.push({key:e,priority:t}),this._decrease(o),!0}return!1},i.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var e=this._arr.pop();return delete this._keyIndices[e.key],this._heapify(0),e.key},i.prototype.decrease=function(e,t){var n=this._keyIndices[e];if(t>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+e+" Old: "+this._arr[n].priority+" New: "+t);this._arr[n].priority=t,this._decrease(n)},i.prototype._heapify=function(e){var t=this._arr,n=2*e,r=n+1,i=e;n<t.length&&(i=t[n].priority<t[i].priority?n:i,r<t.length&&(i=t[r].priority<t[i].priority?r:i),i!==e&&(this._swap(e,i),this._heapify(i)))},i.prototype._decrease=function(e){for(var t,n=this._arr,r=n[e].priority;0!==e&&!(n[t=e>>1].priority<r);)this._swap(e,t),e=t},i.prototype._swap=function(e,t){var n=this._arr,r=this._keyIndices,i=n[e],o=n[t];n[e]=o,n[t]=i,r[o.key]=e,r[i.key]=t}},30771:(e,t,n)=>{"use strict";var r=n(89126);e.exports=o;var i="\0";function o(e){this._isDirected=!r.has(e,"directed")||e.directed,this._isMultigraph=!!r.has(e,"multigraph")&&e.multigraph,this._isCompound=!!r.has(e,"compound")&&e.compound,this._label=void 0,this._defaultNodeLabelFn=r.constant(void 0),this._defaultEdgeLabelFn=r.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function a(e,t){e[t]?e[t]++:e[t]=1}function s(e,t){--e[t]||delete e[t]}function l(e,t,n,i){var o=""+t,a=""+n;if(!e&&o>a){var s=o;o=a,a=s}return o+""+a+""+(r.isUndefined(i)?"\0":i)}function u(e,t,n,r){var i=""+t,o=""+n;if(!e&&i>o){var a=i;i=o,o=a}var s={v:i,w:o};return r&&(s.name=r),s}function c(e,t){return l(e,t.v,t.w,t.name)}o.prototype._nodeCount=0,o.prototype._edgeCount=0,o.prototype.isDirected=function(){return this._isDirected},o.prototype.isMultigraph=function(){return this._isMultigraph},o.prototype.isCompound=function(){return this._isCompound},o.prototype.setGraph=function(e){return this._label=e,this},o.prototype.graph=function(){return this._label},o.prototype.setDefaultNodeLabel=function(e){return r.isFunction(e)||(e=r.constant(e)),this._defaultNodeLabelFn=e,this},o.prototype.nodeCount=function(){return this._nodeCount},o.prototype.nodes=function(){return r.keys(this._nodes)},o.prototype.sources=function(){var e=this;return r.filter(this.nodes(),(function(t){return r.isEmpty(e._in[t])}))},o.prototype.sinks=function(){var e=this;return r.filter(this.nodes(),(function(t){return r.isEmpty(e._out[t])}))},o.prototype.setNodes=function(e,t){var n=arguments,i=this;return r.each(e,(function(e){n.length>1?i.setNode(e,t):i.setNode(e)})),this},o.prototype.setNode=function(e,t){return r.has(this._nodes,e)?(arguments.length>1&&(this._nodes[e]=t),this):(this._nodes[e]=arguments.length>1?t:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]=i,this._children[e]={},this._children["\0"][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount,this)},o.prototype.node=function(e){return this._nodes[e]},o.prototype.hasNode=function(e){return r.has(this._nodes,e)},o.prototype.removeNode=function(e){var t=this;if(r.has(this._nodes,e)){var n=function(e){t.removeEdge(t._edgeObjs[e])};delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],r.each(this.children(e),(function(e){t.setParent(e)})),delete this._children[e]),r.each(r.keys(this._in[e]),n),delete this._in[e],delete this._preds[e],r.each(r.keys(this._out[e]),n),delete this._out[e],delete this._sucs[e],--this._nodeCount}return this},o.prototype.setParent=function(e,t){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(r.isUndefined(t))t=i;else{for(var n=t+="";!r.isUndefined(n);n=this.parent(n))if(n===e)throw new Error("Setting "+t+" as parent of "+e+" would create a cycle");this.setNode(t)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=t,this._children[t][e]=!0,this},o.prototype._removeFromParentsChildList=function(e){delete this._children[this._parent[e]][e]},o.prototype.parent=function(e){if(this._isCompound){var t=this._parent[e];if(t!==i)return t}},o.prototype.children=function(e){if(r.isUndefined(e)&&(e=i),this._isCompound){var t=this._children[e];if(t)return r.keys(t)}else{if(e===i)return this.nodes();if(this.hasNode(e))return[]}},o.prototype.predecessors=function(e){var t=this._preds[e];if(t)return r.keys(t)},o.prototype.successors=function(e){var t=this._sucs[e];if(t)return r.keys(t)},o.prototype.neighbors=function(e){var t=this.predecessors(e);if(t)return r.union(t,this.successors(e))},o.prototype.isLeaf=function(e){return 0===(this.isDirected()?this.successors(e):this.neighbors(e)).length},o.prototype.filterNodes=function(e){var t=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});t.setGraph(this.graph());var n=this;r.each(this._nodes,(function(n,r){e(r)&&t.setNode(r,n)})),r.each(this._edgeObjs,(function(e){t.hasNode(e.v)&&t.hasNode(e.w)&&t.setEdge(e,n.edge(e))}));var i={};function o(e){var r=n.parent(e);return void 0===r||t.hasNode(r)?(i[e]=r,r):r in i?i[r]:o(r)}return this._isCompound&&r.each(t.nodes(),(function(e){t.setParent(e,o(e))})),t},o.prototype.setDefaultEdgeLabel=function(e){return r.isFunction(e)||(e=r.constant(e)),this._defaultEdgeLabelFn=e,this},o.prototype.edgeCount=function(){return this._edgeCount},o.prototype.edges=function(){return r.values(this._edgeObjs)},o.prototype.setPath=function(e,t){var n=this,i=arguments;return r.reduce(e,(function(e,r){return i.length>1?n.setEdge(e,r,t):n.setEdge(e,r),r})),this},o.prototype.setEdge=function(){var e,t,n,i,o=!1,s=arguments[0];"object"==typeof s&&null!==s&&"v"in s?(e=s.v,t=s.w,n=s.name,2===arguments.length&&(i=arguments[1],o=!0)):(e=s,t=arguments[1],n=arguments[3],arguments.length>2&&(i=arguments[2],o=!0)),e=""+e,t=""+t,r.isUndefined(n)||(n=""+n);var c=l(this._isDirected,e,t,n);if(r.has(this._edgeLabels,c))return o&&(this._edgeLabels[c]=i),this;if(!r.isUndefined(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(t),this._edgeLabels[c]=o?i:this._defaultEdgeLabelFn(e,t,n);var d=u(this._isDirected,e,t,n);return e=d.v,t=d.w,Object.freeze(d),this._edgeObjs[c]=d,a(this._preds[t],e),a(this._sucs[e],t),this._in[t][c]=d,this._out[e][c]=d,this._edgeCount++,this},o.prototype.edge=function(e,t,n){var r=1===arguments.length?c(this._isDirected,arguments[0]):l(this._isDirected,e,t,n);return this._edgeLabels[r]},o.prototype.hasEdge=function(e,t,n){var i=1===arguments.length?c(this._isDirected,arguments[0]):l(this._isDirected,e,t,n);return r.has(this._edgeLabels,i)},o.prototype.removeEdge=function(e,t,n){var r=1===arguments.length?c(this._isDirected,arguments[0]):l(this._isDirected,e,t,n),i=this._edgeObjs[r];return i&&(e=i.v,t=i.w,delete this._edgeLabels[r],delete this._edgeObjs[r],s(this._preds[t],e),s(this._sucs[e],t),delete this._in[t][r],delete this._out[e][r],this._edgeCount--),this},o.prototype.inEdges=function(e,t){var n=this._in[e];if(n){var i=r.values(n);return t?r.filter(i,(function(e){return e.v===t})):i}},o.prototype.outEdges=function(e,t){var n=this._out[e];if(n){var i=r.values(n);return t?r.filter(i,(function(e){return e.w===t})):i}},o.prototype.nodeEdges=function(e,t){var n=this.inEdges(e,t);if(n)return n.concat(this.outEdges(e,t))}},82354:(e,t,n)=>{e.exports={Graph:n(30771),version:n(49631)}},28974:(e,t,n)=>{var r=n(89126),i=n(30771);function o(e){return r.map(e.nodes(),(function(t){var n=e.node(t),i=e.parent(t),o={v:t};return r.isUndefined(n)||(o.value=n),r.isUndefined(i)||(o.parent=i),o}))}function a(e){return r.map(e.edges(),(function(t){var n=e.edge(t),i={v:t.v,w:t.w};return r.isUndefined(t.name)||(i.name=t.name),r.isUndefined(n)||(i.value=n),i}))}e.exports={write:function(e){var t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:o(e),edges:a(e)};r.isUndefined(e.graph())||(t.value=r.clone(e.graph()));return t},read:function(e){var t=new i(e.options).setGraph(e.value);return r.each(e.nodes,(function(e){t.setNode(e.v,e.value),e.parent&&t.setParent(e.v,e.parent)})),r.each(e.edges,(function(e){t.setEdge({v:e.v,w:e.w,name:e.name},e.value)})),t}}},89126:(e,t,n)=>{var r;try{r={clone:n(66678),constant:n(75703),each:n(66073),filter:n(63105),has:n(18721),isArray:n(1469),isEmpty:n(41609),isFunction:n(23560),isUndefined:n(52353),keys:n(3674),map:n(35161),reduce:n(54061),size:n(84238),transform:n(68718),union:n(93386),values:n(52628)}}catch(e){}r||(r=window._),e.exports=r},49631:e=>{e.exports="2.1.8"},38186:e=>{var t=[],n=[];function r(e,r){if(r=r||{},void 0===e)throw new Error("insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).");var i,o=!0===r.prepend?"prepend":"append",a=void 0!==r.container?r.container:document.querySelector("head"),s=t.indexOf(a);return-1===s&&(s=t.push(a)-1,n[s]={}),void 0!==n[s]&&void 0!==n[s][o]?i=n[s][o]:(i=n[s][o]=function(){var e=document.createElement("style");return e.setAttribute("type","text/css"),e}(),"prepend"===o?a.insertBefore(i,a.childNodes[0]):a.appendChild(i)),65279===e.charCodeAt(0)&&(e=e.substr(1,e.length)),i.styleSheet?i.styleSheet.cssText+=e:i.textContent+=e,i}e.exports=r,e.exports.insertCss=r},7375:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Symbol.for("INJECTION");function r(e,t,r,i){Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:function(){return i&&!Reflect.hasMetadata(n,this,t)&&Reflect.defineMetadata(n,r(),this,t),Reflect.hasMetadata(n,this,t)?Reflect.getMetadata(n,this,t):r()},set:function(e){Reflect.defineMetadata(n,e,this,t)}})}t.makePropertyInjectDecorator=function(e,t){return function(n){return function(i,o){r(i,o,(function(){return e.get(n)}),t)}}},t.makePropertyInjectNamedDecorator=function(e,t){return function(n,i){return function(o,a){r(o,a,(function(){return e.getNamed(n,i)}),t)}}},t.makePropertyInjectTaggedDecorator=function(e,t){return function(n,i,o){return function(a,s){r(a,s,(function(){return e.getTagged(n,i,o)}),t)}}},t.makePropertyMultiInjectDecorator=function(e,t){return function(n){return function(i,o){r(i,o,(function(){return e.getAll(n)}),t)}}}},84879:(e,t,n)=>{"use strict";var r=n(7375);t.Z=function(e,t){return void 0===t&&(t=!0),{lazyInject:r.makePropertyInjectDecorator(e,t),lazyInjectNamed:r.makePropertyInjectNamedDecorator(e,t),lazyInjectTagged:r.makePropertyInjectTaggedDecorator(e,t),lazyMultiInject:r.makePropertyMultiInjectDecorator(e,t)}}},99934:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tagProperty=t.tagParameter=t.decorate=void 0;var r=n(16674),i=n(6867);function o(e,t,n,i,o){var a={},s="number"==typeof o,l=void 0!==o&&s?o.toString():n;if(s&&void 0!==n)throw new Error(r.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(e,t)&&(a=Reflect.getMetadata(e,t));var u=a[l];if(Array.isArray(u))for(var c=0,d=u;c<d.length;c++){var h=d[c];if(h.key===i.key)throw new Error(r.DUPLICATED_METADATA+" "+h.key.toString())}else u=[];u.push(i),a[l]=u,Reflect.defineMetadata(e,a,t)}function a(e,t){Reflect.decorate(e,t)}function s(e,t){return function(n,r){t(n,r,e)}}t.tagParameter=function(e,t,n,r){o(i.TAGGED,e,t,r,n)},t.tagProperty=function(e,t,n){o(i.TAGGED_PROP,e.constructor,t,n)},t.decorate=function(e,t,n){"number"==typeof n?a([s(n,e)],t):"string"==typeof n?Reflect.decorate([e],t,n):a([e],t)}},5744:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.inject=t.LazyServiceIdentifer=void 0;var r=n(16674),i=n(6867),o=n(47738),a=n(99934),s=function(){function e(e){this._cb=e}return e.prototype.unwrap=function(){return this._cb()},e}();t.LazyServiceIdentifer=s,t.inject=function(e){return function(t,n,s){if(void 0===e)throw new Error(r.UNDEFINED_INJECT_ANNOTATION(t.name));var l=new o.Metadata(i.INJECT_TAG,e);"number"==typeof s?a.tagParameter(t,n,s,l):a.tagProperty(t,n,l)}}},64315:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.injectable=void 0;var r=n(16674),i=n(6867);t.injectable=function(){return function(e){if(Reflect.hasOwnMetadata(i.PARAM_TYPES,e))throw new Error(r.DUPLICATED_INJECTABLE_DECORATOR);var t=Reflect.getMetadata(i.DESIGN_PARAM_TYPES,e)||[];return Reflect.defineMetadata(i.PARAM_TYPES,t,e),e}}},71693:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.multiInject=void 0;var r=n(6867),i=n(47738),o=n(99934);t.multiInject=function(e){return function(t,n,a){var s=new i.Metadata(r.MULTI_INJECT_TAG,e);"number"==typeof a?o.tagParameter(t,n,a,s):o.tagProperty(t,n,s)}}},38085:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.named=void 0;var r=n(6867),i=n(47738),o=n(99934);t.named=function(e){return function(t,n,a){var s=new i.Metadata(r.NAMED_TAG,e);"number"==typeof a?o.tagParameter(t,n,a,s):o.tagProperty(t,n,s)}}},6515:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.optional=void 0;var r=n(6867),i=n(47738),o=n(99934);t.optional=function(){return function(e,t,n){var a=new i.Metadata(r.OPTIONAL_TAG,!0);"number"==typeof n?o.tagParameter(e,t,n,a):o.tagProperty(e,t,a)}}},7014:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.postConstruct=void 0;var r=n(16674),i=n(6867),o=n(47738);t.postConstruct=function(){return function(e,t,n){var a=new o.Metadata(i.POST_CONSTRUCT,t);if(Reflect.hasOwnMetadata(i.POST_CONSTRUCT,e.constructor))throw new Error(r.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(i.POST_CONSTRUCT,a,e.constructor)}}},32052:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tagged=void 0;var r=n(47738),i=n(99934);t.tagged=function(e,t){return function(n,o,a){var s=new r.Metadata(e,t);"number"==typeof a?i.tagParameter(n,o,a,s):i.tagProperty(n,o,s)}}},55638:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.targetName=void 0;var r=n(6867),i=n(47738),o=n(99934);t.targetName=function(e){return function(t,n,a){var s=new i.Metadata(r.NAME_TAG,e);o.tagParameter(t,n,a,s)}}},86757:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unmanaged=void 0;var r=n(6867),i=n(47738),o=n(99934);t.unmanaged=function(){return function(e,t,n){var a=new i.Metadata(r.UNMANAGED_TAG,!0);o.tagParameter(e,t,n,a)}}},44290:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Binding=void 0;var r=n(28421),i=n(37791),o=function(){function e(e,t){this.id=i.id(),this.activated=!1,this.serviceIdentifier=e,this.scope=t,this.type=r.BindingTypeEnum.Invalid,this.constraint=function(e){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return e.prototype.clone=function(){var t=new e(this.serviceIdentifier,this.scope);return t.activated=t.scope===r.BindingScopeEnum.Singleton&&this.activated,t.implementationType=this.implementationType,t.dynamicValue=this.dynamicValue,t.scope=this.scope,t.type=this.type,t.factory=this.factory,t.provider=this.provider,t.constraint=this.constraint,t.onActivation=this.onActivation,t.cache=this.cache,t},e}();t.Binding=o},23184:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingCount=void 0;t.BindingCount={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1}},16674:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.STACK_OVERFLOW=t.CIRCULAR_DEPENDENCY_IN_FACTORY=t.POST_CONSTRUCT_ERROR=t.MULTIPLE_POST_CONSTRUCT_METHODS=t.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK=t.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE=t.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE=t.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT=t.ARGUMENTS_LENGTH_MISMATCH=t.INVALID_DECORATOR_OPERATION=t.INVALID_TO_SELF_VALUE=t.INVALID_FUNCTION_BINDING=t.INVALID_MIDDLEWARE_RETURN=t.NO_MORE_SNAPSHOTS_AVAILABLE=t.INVALID_BINDING_TYPE=t.NOT_IMPLEMENTED=t.CIRCULAR_DEPENDENCY=t.UNDEFINED_INJECT_ANNOTATION=t.MISSING_INJECT_ANNOTATION=t.MISSING_INJECTABLE_ANNOTATION=t.NOT_REGISTERED=t.CANNOT_UNBIND=t.AMBIGUOUS_MATCH=t.KEY_NOT_FOUND=t.NULL_ARGUMENT=t.DUPLICATED_METADATA=t.DUPLICATED_INJECTABLE_DECORATOR=void 0,t.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",t.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",t.NULL_ARGUMENT="NULL argument",t.KEY_NOT_FOUND="Key Not Found",t.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",t.CANNOT_UNBIND="Could not unbind serviceIdentifier:",t.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",t.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",t.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:";t.UNDEFINED_INJECT_ANNOTATION=function(e){return"@inject called with undefined this could mean that the class "+e+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."},t.CIRCULAR_DEPENDENCY="Circular dependency found:",t.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",t.INVALID_BINDING_TYPE="Invalid binding type:",t.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",t.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",t.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",t.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",t.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.";t.ARGUMENTS_LENGTH_MISMATCH=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"The number of constructor arguments in the derived class "+e[0]+" must be >= than the number of constructor arguments of its base class."},t.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",t.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",t.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",t.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",t.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class";t.POST_CONSTRUCT_ERROR=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"@postConstruct error in class "+e[0]+": "+e[1]};t.CIRCULAR_DEPENDENCY_IN_FACTORY=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"It looks like there is a circular dependency in one of the '"+e[0]+"' bindings. Please investigate bindings withservice identifier '"+e[1]+"'."},t.STACK_OVERFLOW="Maximum call stack size exceeded"},28421:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TargetTypeEnum=t.BindingTypeEnum=t.BindingScopeEnum=void 0;t.BindingScopeEnum={Request:"Request",Singleton:"Singleton",Transient:"Transient"};t.BindingTypeEnum={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"};t.TargetTypeEnum={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"}},6867:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NON_CUSTOM_TAG_KEYS=t.POST_CONSTRUCT=t.DESIGN_PARAM_TYPES=t.PARAM_TYPES=t.TAGGED_PROP=t.TAGGED=t.MULTI_INJECT_TAG=t.INJECT_TAG=t.OPTIONAL_TAG=t.UNMANAGED_TAG=t.NAME_TAG=t.NAMED_TAG=void 0,t.NAMED_TAG="named",t.NAME_TAG="name",t.UNMANAGED_TAG="unmanaged",t.OPTIONAL_TAG="optional",t.INJECT_TAG="inject",t.MULTI_INJECT_TAG="multi_inject",t.TAGGED="inversify:tagged",t.TAGGED_PROP="inversify:tagged_props",t.PARAM_TYPES="inversify:paramtypes",t.DESIGN_PARAM_TYPES="design:paramtypes",t.POST_CONSTRUCT="post_construct",t.NON_CUSTOM_TAG_KEYS=[t.INJECT_TAG,t.MULTI_INJECT_TAG,t.NAME_TAG,t.UNMANAGED_TAG,t.NAMED_TAG,t.OPTIONAL_TAG]},51389:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},o=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.Container=void 0;var a=n(44290),s=n(16674),l=n(28421),u=n(6867),c=n(51377),d=n(86311),h=n(31927),f=n(51860),p=n(37791),m=n(55800),g=n(85700),v=n(80175),y=function(){function e(e){this._appliedMiddleware=[];var t=e||{};if("object"!=typeof t)throw new Error(""+s.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(void 0===t.defaultScope)t.defaultScope=l.BindingScopeEnum.Transient;else if(t.defaultScope!==l.BindingScopeEnum.Singleton&&t.defaultScope!==l.BindingScopeEnum.Transient&&t.defaultScope!==l.BindingScopeEnum.Request)throw new Error(""+s.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(void 0===t.autoBindInjectable)t.autoBindInjectable=!1;else if("boolean"!=typeof t.autoBindInjectable)throw new Error(""+s.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(void 0===t.skipBaseClassChecks)t.skipBaseClassChecks=!1;else if("boolean"!=typeof t.skipBaseClassChecks)throw new Error(""+s.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:t.autoBindInjectable,defaultScope:t.defaultScope,skipBaseClassChecks:t.skipBaseClassChecks},this.id=p.id(),this._bindingDictionary=new v.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new c.MetadataReader}return e.merge=function(t,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var a=new e,s=o([t,n],r).map((function(e){return d.getBindingDictionary(e)})),l=d.getBindingDictionary(a);function u(e,t){e.traverse((function(e,n){n.forEach((function(e){t.add(e.serviceIdentifier,e.clone())}))}))}return s.forEach((function(e){u(e,l)})),a},e.prototype.load=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=this._getContainerModuleHelpersFactory(),r=0,i=e;r<i.length;r++){var o=i[r],a=n(o.id);o.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction)}},e.prototype.loadAsync=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r(this,void 0,void 0,(function(){var t,n,r,o,a;return i(this,(function(i){switch(i.label){case 0:t=this._getContainerModuleHelpersFactory(),n=0,r=e,i.label=1;case 1:return n<r.length?(o=r[n],a=t(o.id),[4,o.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction)]):[3,4];case 2:i.sent(),i.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))},e.prototype.unload=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(e){return function(t){return t.moduleId===e}};t.forEach((function(t){var n=r(t.id);e._bindingDictionary.removeByCondition(n)}))},e.prototype.bind=function(e){var t=this.options.defaultScope||l.BindingScopeEnum.Transient,n=new a.Binding(e,t);return this._bindingDictionary.add(e,n),new f.BindingToSyntax(n)},e.prototype.rebind=function(e){return this.unbind(e),this.bind(e)},e.prototype.unbind=function(e){try{this._bindingDictionary.remove(e)}catch(t){throw new Error(s.CANNOT_UNBIND+" "+m.getServiceIdentifierAsString(e))}},e.prototype.unbindAll=function(){this._bindingDictionary=new v.Lookup},e.prototype.isBound=function(e){var t=this._bindingDictionary.hasKey(e);return!t&&this.parent&&(t=this.parent.isBound(e)),t},e.prototype.isBoundNamed=function(e,t){return this.isBoundTagged(e,u.NAMED_TAG,t)},e.prototype.isBoundTagged=function(e,t,n){var r=!1;if(this._bindingDictionary.hasKey(e)){var i=this._bindingDictionary.get(e),o=d.createMockRequest(this,e,t,n);r=i.some((function(e){return e.constraint(o)}))}return!r&&this.parent&&(r=this.parent.isBoundTagged(e,t,n)),r},e.prototype.snapshot=function(){this._snapshots.push(g.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},e.prototype.restore=function(){var e=this._snapshots.pop();if(void 0===e)throw new Error(s.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=e.bindings,this._middleware=e.middleware},e.prototype.createChild=function(t){var n=new e(t||this.options);return n.parent=this,n},e.prototype.applyMiddleware=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._appliedMiddleware=this._appliedMiddleware.concat(e);var n=this._middleware?this._middleware:this._planAndResolve();this._middleware=e.reduce((function(e,t){return t(e)}),n)},e.prototype.applyCustomMetadataReader=function(e){this._metadataReader=e},e.prototype.get=function(e){return this._get(!1,!1,l.TargetTypeEnum.Variable,e)},e.prototype.getTagged=function(e,t,n){return this._get(!1,!1,l.TargetTypeEnum.Variable,e,t,n)},e.prototype.getNamed=function(e,t){return this.getTagged(e,u.NAMED_TAG,t)},e.prototype.getAll=function(e){return this._get(!0,!0,l.TargetTypeEnum.Variable,e)},e.prototype.getAllTagged=function(e,t,n){return this._get(!1,!0,l.TargetTypeEnum.Variable,e,t,n)},e.prototype.getAllNamed=function(e,t){return this.getAllTagged(e,u.NAMED_TAG,t)},e.prototype.resolve=function(e){var t=this.createChild();return t.bind(e).toSelf(),this._appliedMiddleware.forEach((function(e){t.applyMiddleware(e)})),t.get(e)},e.prototype._getContainerModuleHelpersFactory=function(){var e=this,t=function(e,t){e._binding.moduleId=t},n=function(n){return function(r){var i=e.rebind.bind(e)(r);return t(i,n),i}};return function(r){return{bindFunction:(i=r,function(n){var r=e.bind.bind(e)(n);return t(r,i),r}),isboundFunction:function(t){return e.isBound.bind(e)(t)},rebindFunction:n(r),unbindFunction:function(t){e.unbind.bind(e)(t)}};var i}},e.prototype._get=function(e,t,n,r,i,o){var a=null,l={avoidConstraints:e,contextInterceptor:function(e){return e},isMultiInject:t,key:i,serviceIdentifier:r,targetType:n,value:o};if(this._middleware){if(null==(a=this._middleware(l)))throw new Error(s.INVALID_MIDDLEWARE_RETURN)}else a=this._planAndResolve()(l);return a},e.prototype._planAndResolve=function(){var e=this;return function(t){var n=d.plan(e._metadataReader,e,t.isMultiInject,t.targetType,t.serviceIdentifier,t.key,t.value,t.avoidConstraints);return n=t.contextInterceptor(n),h.resolve(n)}},e}();t.Container=y},33244:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncContainerModule=t.ContainerModule=void 0;var r=n(37791),i=function(e){this.id=r.id(),this.registry=e};t.ContainerModule=i;var o=function(e){this.id=r.id(),this.registry=e};t.AsyncContainerModule=o},85700:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContainerSnapshot=void 0;var n=function(){function e(){}return e.of=function(t,n){var r=new e;return r.bindings=t,r.middleware=n,r},e}();t.ContainerSnapshot=n},80175:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Lookup=void 0;var r=n(16674),i=function(){function e(){this._map=new Map}return e.prototype.getMap=function(){return this._map},e.prototype.add=function(e,t){if(null==e)throw new Error(r.NULL_ARGUMENT);if(null==t)throw new Error(r.NULL_ARGUMENT);var n=this._map.get(e);void 0!==n?(n.push(t),this._map.set(e,n)):this._map.set(e,[t])},e.prototype.get=function(e){if(null==e)throw new Error(r.NULL_ARGUMENT);var t=this._map.get(e);if(void 0!==t)return t;throw new Error(r.KEY_NOT_FOUND)},e.prototype.remove=function(e){if(null==e)throw new Error(r.NULL_ARGUMENT);if(!this._map.delete(e))throw new Error(r.KEY_NOT_FOUND)},e.prototype.removeByCondition=function(e){var t=this;this._map.forEach((function(n,r){var i=n.filter((function(t){return!e(t)}));i.length>0?t._map.set(r,i):t._map.delete(r)}))},e.prototype.hasKey=function(e){if(null==e)throw new Error(r.NULL_ARGUMENT);return this._map.has(e)},e.prototype.clone=function(){var t=new e;return this._map.forEach((function(e,n){e.forEach((function(e){return t.add(n,e.clone())}))})),t},e.prototype.traverse=function(e){this._map.forEach((function(t,n){e(n,t)}))},e}();t.Lookup=i},86700:(e,t,n)=>{"use strict";t.f3=t.t6=t.b2=t.W2=void 0,n(6867);var r=n(51389);Object.defineProperty(t,"W2",{enumerable:!0,get:function(){return r.Container}});var i=n(28421);var o=n(33244);var a=n(64315);Object.defineProperty(t,"b2",{enumerable:!0,get:function(){return a.injectable}});var s=n(32052);var l=n(38085);Object.defineProperty(t,"t6",{enumerable:!0,get:function(){return l.named}});var u=n(5744);Object.defineProperty(t,"f3",{enumerable:!0,get:function(){return u.inject}});var c=n(6515);var d=n(86757);var h=n(71693);var f=n(55638);var p=n(7014);var m=n(51377);var g=n(37791);var v=n(99934);var y=n(80758);var b=n(55800);var _=n(70600)},95228:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Context=void 0;var r=n(37791),i=function(){function e(e){this.id=r.id(),this.container=e}return e.prototype.addPlan=function(e){this.plan=e},e.prototype.setCurrentRequest=function(e){this.currentRequest=e},e}();t.Context=i},47738:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;var r=n(6867),i=function(){function e(e,t){this.key=e,this.value=t}return e.prototype.toString=function(){return this.key===r.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},e}();t.Metadata=i},51377:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MetadataReader=void 0;var r=n(6867),i=function(){function e(){}return e.prototype.getConstructorMetadata=function(e){return{compilerGeneratedMetadata:Reflect.getMetadata(r.PARAM_TYPES,e),userGeneratedMetadata:Reflect.getMetadata(r.TAGGED,e)||{}}},e.prototype.getPropertiesMetadata=function(e){return Reflect.getMetadata(r.TAGGED_PROP,e)||[]},e}();t.MetadataReader=i},55314:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Plan=void 0;var n=function(e,t){this.parentContext=e,this.rootRequest=t};t.Plan=n},86311:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBindingDictionary=t.createMockRequest=t.plan=void 0;var r=n(23184),i=n(16674),o=n(28421),a=n(6867),s=n(85265),l=n(55800),u=n(95228),c=n(47738),d=n(55314),h=n(6e3),f=n(6748),p=n(18924);function m(e){return e._bindingDictionary}function g(e,t,n,o,a){var s=y(n.container,a.serviceIdentifier),u=[];return s.length===r.BindingCount.NoBindingsAvailable&&n.container.options.autoBindInjectable&&"function"==typeof a.serviceIdentifier&&e.getConstructorMetadata(a.serviceIdentifier).compilerGeneratedMetadata&&(n.container.bind(a.serviceIdentifier).toSelf(),s=y(n.container,a.serviceIdentifier)),u=t?s:s.filter((function(e){var t=new f.Request(e.serviceIdentifier,n,o,e,a);return e.constraint(t)})),function(e,t,n,o){switch(t.length){case r.BindingCount.NoBindingsAvailable:if(n.isOptional())return t;var a=l.getServiceIdentifierAsString(e),s=i.NOT_REGISTERED;throw s+=l.listMetadataForTarget(a,n),s+=l.listRegisteredBindingsForServiceIdentifier(o,a,y),new Error(s);case r.BindingCount.OnlyOneBindingAvailable:if(!n.isArray())return t;case r.BindingCount.MultipleBindingsAvailable:default:if(n.isArray())return t;a=l.getServiceIdentifierAsString(e),s=i.AMBIGUOUS_MATCH+" "+a;throw s+=l.listRegisteredBindingsForServiceIdentifier(o,a,y),new Error(s)}}(a.serviceIdentifier,u,a,n.container),u}function v(e,t,n,r,a,s){var l,u;if(null===a){l=g(e,t,r,null,s),u=new f.Request(n,r,null,l,s);var c=new d.Plan(r,u);r.addPlan(c)}else l=g(e,t,r,a,s),u=a.addChildRequest(s.serviceIdentifier,l,s);l.forEach((function(t){var n=null;if(s.isArray())n=u.addChildRequest(t.serviceIdentifier,t,s);else{if(t.cache)return;n=u}if(t.type===o.BindingTypeEnum.Instance&&null!==t.implementationType){var a=h.getDependencies(e,t.implementationType);if(!r.container.options.skipBaseClassChecks){var l=h.getBaseClassDependencyCount(e,t.implementationType);if(a.length<l){var c=i.ARGUMENTS_LENGTH_MISMATCH(h.getFunctionName(t.implementationType));throw new Error(c)}}a.forEach((function(t){v(e,!1,t.serviceIdentifier,r,n,t)}))}}))}function y(e,t){var n=[],r=m(e);return r.hasKey(t)?n=r.get(t):null!==e.parent&&(n=y(e.parent,t)),n}t.getBindingDictionary=m,t.plan=function(e,t,n,r,i,o,d,h){void 0===h&&(h=!1);var f=new u.Context(t),m=function(e,t,n,r,i,o){var s=e?a.MULTI_INJECT_TAG:a.INJECT_TAG,l=new c.Metadata(s,n),u=new p.Target(t,r,n,l);if(void 0!==i){var d=new c.Metadata(i,o);u.metadata.push(d)}return u}(n,r,i,"",o,d);try{return v(e,h,i,f,null,m),f}catch(e){throw s.isStackOverflowExeption(e)&&f.plan&&l.circularDependencyToException(f.plan.rootRequest),e}},t.createMockRequest=function(e,t,n,r){var i=new p.Target(o.TargetTypeEnum.Variable,"",t,new c.Metadata(n,r)),a=new u.Context(e);return new f.Request(t,a,null,[],i)}},88460:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QueryableString=void 0;var n=function(){function e(e){this.str=e}return e.prototype.startsWith=function(e){return 0===this.str.indexOf(e)},e.prototype.endsWith=function(e){var t,n=e.split("").reverse().join("");return t=this.str.split("").reverse().join(""),this.startsWith.call({str:t},n)},e.prototype.contains=function(e){return-1!==this.str.indexOf(e)},e.prototype.equals=function(e){return this.str===e},e.prototype.value=function(){return this.str},e}();t.QueryableString=n},6e3:function(e,t,n){"use strict";var r=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.getFunctionName=t.getBaseClassDependencyCount=t.getDependencies=void 0;var i=n(5744),o=n(16674),a=n(28421),s=n(6867),l=n(55800);Object.defineProperty(t,"getFunctionName",{enumerable:!0,get:function(){return l.getFunctionName}});var u=n(18924);function c(e,t,n,i){var a=e.getConstructorMetadata(n),s=a.compilerGeneratedMetadata;if(void 0===s){var l=o.MISSING_INJECTABLE_ANNOTATION+" "+t+".";throw new Error(l)}var u=a.userGeneratedMetadata,c=Object.keys(u),f=0===n.length&&c.length>0,p=c.length>n.length,m=function(e,t,n,r,i){for(var o=[],a=0;a<i;a++){var s=d(a,e,t,n,r);null!==s&&o.push(s)}return o}(i,t,s,u,f||p?c.length:n.length),g=h(e,n);return r(r([],m),g)}function d(e,t,n,r,s){var l=s[e.toString()]||[],c=f(l),d=!0!==c.unmanaged,h=r[e],p=c.inject||c.multiInject;if((h=p||h)instanceof i.LazyServiceIdentifer&&(h=h.unwrap()),d){if(!t&&(h===Object||h===Function||void 0===h)){var m=o.MISSING_INJECT_ANNOTATION+" argument "+e+" in class "+n+".";throw new Error(m)}var g=new u.Target(a.TargetTypeEnum.ConstructorArgument,c.targetName,h);return g.metadata=l,g}return null}function h(e,t){for(var n=e.getPropertiesMetadata(t),i=[],o=0,s=Object.keys(n);o<s.length;o++){var l=s[o],c=n[l],d=f(n[l]),p=d.targetName||l,m=d.inject||d.multiInject,g=new u.Target(a.TargetTypeEnum.ClassProperty,p,m);g.metadata=c,i.push(g)}var v=Object.getPrototypeOf(t.prototype).constructor;if(v!==Object){var y=h(e,v);i=r(r([],i),y)}return i}function f(e){var t={};return e.forEach((function(e){t[e.key.toString()]=e.value})),{inject:t[s.INJECT_TAG],multiInject:t[s.MULTI_INJECT_TAG],targetName:t[s.NAME_TAG],unmanaged:t[s.UNMANAGED_TAG]}}t.getDependencies=function(e,t){return c(e,l.getFunctionName(t),t,!1)},t.getBaseClassDependencyCount=function e(t,n){var r=Object.getPrototypeOf(n.prototype).constructor;if(r!==Object){var i=c(t,l.getFunctionName(r),r,!0),o=i.map((function(e){return e.metadata.filter((function(e){return e.key===s.UNMANAGED_TAG}))})),a=[].concat.apply([],o).length,u=i.length-a;return u>0?u:e(t,r)}return 0}},6748:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Request=void 0;var r=n(37791),i=function(){function e(e,t,n,i,o){this.id=r.id(),this.serviceIdentifier=e,this.parentContext=t,this.parentRequest=n,this.target=o,this.childRequests=[],this.bindings=Array.isArray(i)?i:[i],this.requestScope=null===n?new Map:null}return e.prototype.addChildRequest=function(t,n,r){var i=new e(t,this.parentContext,this,n,r);return this.childRequests.push(i),i},e}();t.Request=i},18924:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Target=void 0;var r=n(6867),i=n(37791),o=n(47738),a=n(88460),s=function(){function e(e,t,n,s){this.id=i.id(),this.type=e,this.serviceIdentifier=n,this.name=new a.QueryableString(t||""),this.metadata=new Array;var l=null;"string"==typeof s?l=new o.Metadata(r.NAMED_TAG,s):s instanceof o.Metadata&&(l=s),null!==l&&this.metadata.push(l)}return e.prototype.hasTag=function(e){for(var t=0,n=this.metadata;t<n.length;t++){if(n[t].key===e)return!0}return!1},e.prototype.isArray=function(){return this.hasTag(r.MULTI_INJECT_TAG)},e.prototype.matchesArray=function(e){return this.matchesTag(r.MULTI_INJECT_TAG)(e)},e.prototype.isNamed=function(){return this.hasTag(r.NAMED_TAG)},e.prototype.isTagged=function(){return this.metadata.some((function(e){return r.NON_CUSTOM_TAG_KEYS.every((function(t){return e.key!==t}))}))},e.prototype.isOptional=function(){return this.matchesTag(r.OPTIONAL_TAG)(!0)},e.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter((function(e){return e.key===r.NAMED_TAG}))[0]:null},e.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter((function(e){return r.NON_CUSTOM_TAG_KEYS.every((function(t){return e.key!==t}))})):null},e.prototype.matchesNamedTag=function(e){return this.matchesTag(r.NAMED_TAG)(e)},e.prototype.matchesTag=function(e){var t=this;return function(n){for(var r=0,i=t.metadata;r<i.length;r++){var o=i[r];if(o.key===e&&o.value===n)return!0}return!1}},e}();t.Target=s},52279:function(e,t,n){"use strict";var r=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.resolveInstance=void 0;var i=n(16674),o=n(28421),a=n(6867);t.resolveInstance=function(e,t,n){var s,l,u=null;if(t.length>0){var c=t.filter((function(e){return null!==e.target&&e.target.type===o.TargetTypeEnum.ConstructorArgument})).map(n);l=c,u=function(e,t,n){var r=t.filter((function(e){return null!==e.target&&e.target.type===o.TargetTypeEnum.ClassProperty})),i=r.map(n);return r.forEach((function(t,n){var r;r=t.target.name.value();var o=i[n];e[r]=o})),e}(u=new((s=e).bind.apply(s,r([void 0],l))),t,n)}else u=new e;return function(e,t){if(Reflect.hasMetadata(a.POST_CONSTRUCT,e)){var n=Reflect.getMetadata(a.POST_CONSTRUCT,e);try{t[n.value]()}catch(t){throw new Error(i.POST_CONSTRUCT_ERROR(e.name,t.message))}}}(e,u),u}},31927:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolve=void 0;var r=n(16674),i=n(28421),o=n(85265),a=n(55800),s=n(52279),l=function(e,t,n){try{return n()}catch(n){throw o.isStackOverflowExeption(n)?new Error(r.CIRCULAR_DEPENDENCY_IN_FACTORY(e,t.toString())):n}},u=function(e){return function(t){t.parentContext.setCurrentRequest(t);var n=t.bindings,o=t.childRequests,c=t.target&&t.target.isArray(),d=!(t.parentRequest&&t.parentRequest.target&&t.target&&t.parentRequest.target.matchesArray(t.target.serviceIdentifier));if(c&&d)return o.map((function(t){return u(e)(t)}));var h=null;if(!t.target.isOptional()||0!==n.length){var f=n[0],p=f.scope===i.BindingScopeEnum.Singleton,m=f.scope===i.BindingScopeEnum.Request;if(p&&f.activated)return f.cache;if(m&&null!==e&&e.has(f.id))return e.get(f.id);if(f.type===i.BindingTypeEnum.ConstantValue)h=f.cache,f.activated=!0;else if(f.type===i.BindingTypeEnum.Function)h=f.cache,f.activated=!0;else if(f.type===i.BindingTypeEnum.Constructor)h=f.implementationType;else if(f.type===i.BindingTypeEnum.DynamicValue&&null!==f.dynamicValue)h=l("toDynamicValue",f.serviceIdentifier,(function(){return f.dynamicValue(t.parentContext)}));else if(f.type===i.BindingTypeEnum.Factory&&null!==f.factory)h=l("toFactory",f.serviceIdentifier,(function(){return f.factory(t.parentContext)}));else if(f.type===i.BindingTypeEnum.Provider&&null!==f.provider)h=l("toProvider",f.serviceIdentifier,(function(){return f.provider(t.parentContext)}));else{if(f.type!==i.BindingTypeEnum.Instance||null===f.implementationType){var g=a.getServiceIdentifierAsString(t.serviceIdentifier);throw new Error(r.INVALID_BINDING_TYPE+" "+g)}h=s.resolveInstance(f.implementationType,o,u(e))}return"function"==typeof f.onActivation&&(h=f.onActivation(t.parentContext,h)),p&&(f.cache=h,f.activated=!0),m&&null!==e&&!e.has(f.id)&&e.set(f.id,h),h}}};t.resolve=function(e){return u(e.plan.rootRequest.requestScope)(e.plan.rootRequest)}},83366:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingInSyntax=void 0;var r=n(28421),i=n(71325),o=function(){function e(e){this._binding=e}return e.prototype.inRequestScope=function(){return this._binding.scope=r.BindingScopeEnum.Request,new i.BindingWhenOnSyntax(this._binding)},e.prototype.inSingletonScope=function(){return this._binding.scope=r.BindingScopeEnum.Singleton,new i.BindingWhenOnSyntax(this._binding)},e.prototype.inTransientScope=function(){return this._binding.scope=r.BindingScopeEnum.Transient,new i.BindingWhenOnSyntax(this._binding)},e}();t.BindingInSyntax=o},99812:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingInWhenOnSyntax=void 0;var r=n(83366),i=n(51811),o=n(98370),a=function(){function e(e){this._binding=e,this._bindingWhenSyntax=new o.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new i.BindingOnSyntax(this._binding),this._bindingInSyntax=new r.BindingInSyntax(e)}return e.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},e.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},e.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},e.prototype.when=function(e){return this._bindingWhenSyntax.when(e)},e.prototype.whenTargetNamed=function(e){return this._bindingWhenSyntax.whenTargetNamed(e)},e.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},e.prototype.whenTargetTagged=function(e,t){return this._bindingWhenSyntax.whenTargetTagged(e,t)},e.prototype.whenInjectedInto=function(e){return this._bindingWhenSyntax.whenInjectedInto(e)},e.prototype.whenParentNamed=function(e){return this._bindingWhenSyntax.whenParentNamed(e)},e.prototype.whenParentTagged=function(e,t){return this._bindingWhenSyntax.whenParentTagged(e,t)},e.prototype.whenAnyAncestorIs=function(e){return this._bindingWhenSyntax.whenAnyAncestorIs(e)},e.prototype.whenNoAncestorIs=function(e){return this._bindingWhenSyntax.whenNoAncestorIs(e)},e.prototype.whenAnyAncestorNamed=function(e){return this._bindingWhenSyntax.whenAnyAncestorNamed(e)},e.prototype.whenAnyAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenAnyAncestorTagged(e,t)},e.prototype.whenNoAncestorNamed=function(e){return this._bindingWhenSyntax.whenNoAncestorNamed(e)},e.prototype.whenNoAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenNoAncestorTagged(e,t)},e.prototype.whenAnyAncestorMatches=function(e){return this._bindingWhenSyntax.whenAnyAncestorMatches(e)},e.prototype.whenNoAncestorMatches=function(e){return this._bindingWhenSyntax.whenNoAncestorMatches(e)},e.prototype.onActivation=function(e){return this._bindingOnSyntax.onActivation(e)},e}();t.BindingInWhenOnSyntax=a},51811:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingOnSyntax=void 0;var r=n(98370),i=function(){function e(e){this._binding=e}return e.prototype.onActivation=function(e){return this._binding.onActivation=e,new r.BindingWhenSyntax(this._binding)},e}();t.BindingOnSyntax=i},51860:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingToSyntax=void 0;var r=n(16674),i=n(28421),o=n(99812),a=n(71325),s=function(){function e(e){this._binding=e}return e.prototype.to=function(e){return this._binding.type=i.BindingTypeEnum.Instance,this._binding.implementationType=e,new o.BindingInWhenOnSyntax(this._binding)},e.prototype.toSelf=function(){if("function"!=typeof this._binding.serviceIdentifier)throw new Error(""+r.INVALID_TO_SELF_VALUE);var e=this._binding.serviceIdentifier;return this.to(e)},e.prototype.toConstantValue=function(e){return this._binding.type=i.BindingTypeEnum.ConstantValue,this._binding.cache=e,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=i.BindingScopeEnum.Singleton,new a.BindingWhenOnSyntax(this._binding)},e.prototype.toDynamicValue=function(e){return this._binding.type=i.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=e,this._binding.implementationType=null,new o.BindingInWhenOnSyntax(this._binding)},e.prototype.toConstructor=function(e){return this._binding.type=i.BindingTypeEnum.Constructor,this._binding.implementationType=e,this._binding.scope=i.BindingScopeEnum.Singleton,new a.BindingWhenOnSyntax(this._binding)},e.prototype.toFactory=function(e){return this._binding.type=i.BindingTypeEnum.Factory,this._binding.factory=e,this._binding.scope=i.BindingScopeEnum.Singleton,new a.BindingWhenOnSyntax(this._binding)},e.prototype.toFunction=function(e){if("function"!=typeof e)throw new Error(r.INVALID_FUNCTION_BINDING);var t=this.toConstantValue(e);return this._binding.type=i.BindingTypeEnum.Function,this._binding.scope=i.BindingScopeEnum.Singleton,t},e.prototype.toAutoFactory=function(e){return this._binding.type=i.BindingTypeEnum.Factory,this._binding.factory=function(t){return function(){return t.container.get(e)}},this._binding.scope=i.BindingScopeEnum.Singleton,new a.BindingWhenOnSyntax(this._binding)},e.prototype.toProvider=function(e){return this._binding.type=i.BindingTypeEnum.Provider,this._binding.provider=e,this._binding.scope=i.BindingScopeEnum.Singleton,new a.BindingWhenOnSyntax(this._binding)},e.prototype.toService=function(e){this.toDynamicValue((function(t){return t.container.get(e)}))},e}();t.BindingToSyntax=s},71325:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingWhenOnSyntax=void 0;var r=n(51811),i=n(98370),o=function(){function e(e){this._binding=e,this._bindingWhenSyntax=new i.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new r.BindingOnSyntax(this._binding)}return e.prototype.when=function(e){return this._bindingWhenSyntax.when(e)},e.prototype.whenTargetNamed=function(e){return this._bindingWhenSyntax.whenTargetNamed(e)},e.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},e.prototype.whenTargetTagged=function(e,t){return this._bindingWhenSyntax.whenTargetTagged(e,t)},e.prototype.whenInjectedInto=function(e){return this._bindingWhenSyntax.whenInjectedInto(e)},e.prototype.whenParentNamed=function(e){return this._bindingWhenSyntax.whenParentNamed(e)},e.prototype.whenParentTagged=function(e,t){return this._bindingWhenSyntax.whenParentTagged(e,t)},e.prototype.whenAnyAncestorIs=function(e){return this._bindingWhenSyntax.whenAnyAncestorIs(e)},e.prototype.whenNoAncestorIs=function(e){return this._bindingWhenSyntax.whenNoAncestorIs(e)},e.prototype.whenAnyAncestorNamed=function(e){return this._bindingWhenSyntax.whenAnyAncestorNamed(e)},e.prototype.whenAnyAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenAnyAncestorTagged(e,t)},e.prototype.whenNoAncestorNamed=function(e){return this._bindingWhenSyntax.whenNoAncestorNamed(e)},e.prototype.whenNoAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenNoAncestorTagged(e,t)},e.prototype.whenAnyAncestorMatches=function(e){return this._bindingWhenSyntax.whenAnyAncestorMatches(e)},e.prototype.whenNoAncestorMatches=function(e){return this._bindingWhenSyntax.whenNoAncestorMatches(e)},e.prototype.onActivation=function(e){return this._bindingOnSyntax.onActivation(e)},e}();t.BindingWhenOnSyntax=o},98370:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingWhenSyntax=void 0;var r=n(51811),i=n(80758),o=function(){function e(e){this._binding=e}return e.prototype.when=function(e){return this._binding.constraint=e,new r.BindingOnSyntax(this._binding)},e.prototype.whenTargetNamed=function(e){return this._binding.constraint=i.namedConstraint(e),new r.BindingOnSyntax(this._binding)},e.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(e){return null!==e.target&&!e.target.isNamed()&&!e.target.isTagged()},new r.BindingOnSyntax(this._binding)},e.prototype.whenTargetTagged=function(e,t){return this._binding.constraint=i.taggedConstraint(e)(t),new r.BindingOnSyntax(this._binding)},e.prototype.whenInjectedInto=function(e){return this._binding.constraint=function(t){return i.typeConstraint(e)(t.parentRequest)},new r.BindingOnSyntax(this._binding)},e.prototype.whenParentNamed=function(e){return this._binding.constraint=function(t){return i.namedConstraint(e)(t.parentRequest)},new r.BindingOnSyntax(this._binding)},e.prototype.whenParentTagged=function(e,t){return this._binding.constraint=function(n){return i.taggedConstraint(e)(t)(n.parentRequest)},new r.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorIs=function(e){return this._binding.constraint=function(t){return i.traverseAncerstors(t,i.typeConstraint(e))},new r.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorIs=function(e){return this._binding.constraint=function(t){return!i.traverseAncerstors(t,i.typeConstraint(e))},new r.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorNamed=function(e){return this._binding.constraint=function(t){return i.traverseAncerstors(t,i.namedConstraint(e))},new r.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorNamed=function(e){return this._binding.constraint=function(t){return!i.traverseAncerstors(t,i.namedConstraint(e))},new r.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorTagged=function(e,t){return this._binding.constraint=function(n){return i.traverseAncerstors(n,i.taggedConstraint(e)(t))},new r.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorTagged=function(e,t){return this._binding.constraint=function(n){return!i.traverseAncerstors(n,i.taggedConstraint(e)(t))},new r.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorMatches=function(e){return this._binding.constraint=function(t){return i.traverseAncerstors(t,e)},new r.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorMatches=function(e){return this._binding.constraint=function(t){return!i.traverseAncerstors(t,e)},new r.BindingOnSyntax(this._binding)},e}();t.BindingWhenSyntax=o},80758:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.typeConstraint=t.namedConstraint=t.taggedConstraint=t.traverseAncerstors=void 0;var r=n(6867),i=n(47738),o=function(e,t){var n=e.parentRequest;return null!==n&&(!!t(n)||o(n,t))};t.traverseAncerstors=o;var a=function(e){return function(t){var n=function(n){return null!==n&&null!==n.target&&n.target.matchesTag(e)(t)};return n.metaData=new i.Metadata(e,t),n}};t.taggedConstraint=a;var s=a(r.NAMED_TAG);t.namedConstraint=s;t.typeConstraint=function(e){return function(t){var n=null;if(null!==t){if(n=t.bindings[0],"string"==typeof e)return n.serviceIdentifier===e;var r=t.bindings[0].implementationType;return e===r}return!1}}},70600:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.multiBindToService=void 0;t.multiBindToService=function(e){return function(t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.forEach((function(n){return e.bind(n).toService(t)}))}}}},85265:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isStackOverflowExeption=void 0;var r=n(16674);t.isStackOverflowExeption=function(e){return e instanceof RangeError||e.message===r.STACK_OVERFLOW}},37791:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.id=void 0;var n=0;t.id=function(){return n++}},55800:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.circularDependencyToException=t.listMetadataForTarget=t.listRegisteredBindingsForServiceIdentifier=t.getServiceIdentifierAsString=t.getFunctionName=void 0;var r=n(16674);function i(e){return"function"==typeof e?e.name:"symbol"==typeof e?e.toString():e}function o(e,t){return null!==e.parentRequest&&(e.parentRequest.serviceIdentifier===t||o(e.parentRequest,t))}function a(e){if(e.name)return e.name;var t=e.toString(),n=t.match(/^function\s*([^\s(]+)/);return n?n[1]:"Anonymous function: "+t}t.getServiceIdentifierAsString=i,t.listRegisteredBindingsForServiceIdentifier=function(e,t,n){var r="",i=n(e,t);return 0!==i.length&&(r="\nRegistered bindings:",i.forEach((function(e){var t="Object";null!==e.implementationType&&(t=a(e.implementationType)),r=r+"\n "+t,e.constraint.metaData&&(r=r+" - "+e.constraint.metaData)}))),r},t.circularDependencyToException=function e(t){t.childRequests.forEach((function(t){if(o(t,t.serviceIdentifier)){var n=function(e){return function e(t,n){void 0===n&&(n=[]);var r=i(t.serviceIdentifier);return n.push(r),null!==t.parentRequest?e(t.parentRequest,n):n}(e).reverse().join(" --\x3e ")}(t);throw new Error(r.CIRCULAR_DEPENDENCY+" "+n)}e(t)}))},t.listMetadataForTarget=function(e,t){if(t.isTagged()||t.isNamed()){var n="",r=t.getNamedTag(),i=t.getCustomTags();return null!==r&&(n+=r.toString()+"\n"),null!==i&&i.forEach((function(e){n+=e.toString()+"\n"}))," "+e+"\n "+e+" - "+n}return" "+e},t.getFunctionName=a},19575:function(e,t,n){var r,i;i="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n.g?n.g:this,e.exports=function(n){"use strict";var i,o=(n=n||{}).Base64,a="2.6.4",s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=function(e){for(var t={},n=0,r=e.length;n<r;n++)t[e.charAt(n)]=n;return t}(s),u=String.fromCharCode,c=function(e){if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?u(192|t>>>6)+u(128|63&t):u(224|t>>>12&15)+u(128|t>>>6&63)+u(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return u(240|t>>>18&7)+u(128|t>>>12&63)+u(128|t>>>6&63)+u(128|63&t)},d=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,h=function(e){return e.replace(d,c)},f=function(e){var t=[0,2,1][e.length%3],n=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0);return[s.charAt(n>>>18),s.charAt(n>>>12&63),t>=2?"=":s.charAt(n>>>6&63),t>=1?"=":s.charAt(63&n)].join("")},p=n.btoa&&"function"==typeof n.btoa?function(e){return n.btoa(e)}:function(e){if(e.match(/[^\x00-\xFF]/))throw new RangeError("The string contains invalid characters.");return e.replace(/[\s\S]{1,3}/g,f)},m=function(e){return p(h(String(e)))},g=function(e){return e.replace(/[+\/]/g,(function(e){return"+"==e?"-":"_"})).replace(/=/g,"")},v=function(e,t){return t?g(m(e)):m(e)},y=function(e){return v(e,!0)};n.Uint8Array&&(i=function(e,t){for(var n="",r=0,i=e.length;r<i;r+=3){var o=e[r],a=e[r+1],l=e[r+2],u=o<<16|a<<8|l;n+=s.charAt(u>>>18)+s.charAt(u>>>12&63)+(void 0!==a?s.charAt(u>>>6&63):"=")+(void 0!==l?s.charAt(63&u):"=")}return t?g(n):n});var b,_=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,w=function(e){switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return u(55296+(t>>>10))+u(56320+(1023&t));case 3:return u((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return u((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},x=function(e){return e.replace(_,w)},M=function(e){var t=e.length,n=t%4,r=(t>0?l[e.charAt(0)]<<18:0)|(t>1?l[e.charAt(1)]<<12:0)|(t>2?l[e.charAt(2)]<<6:0)|(t>3?l[e.charAt(3)]:0),i=[u(r>>>16),u(r>>>8&255),u(255&r)];return i.length-=[0,0,2,1][n],i.join("")},E=n.atob&&"function"==typeof n.atob?function(e){return n.atob(e)}:function(e){return e.replace(/\S{1,4}/g,M)},S=function(e){return E(String(e).replace(/[^A-Za-z0-9\+\/]/g,""))},k=function(e){return x(E(e))},T=function(e){return String(e).replace(/[-_]/g,(function(e){return"-"==e?"+":"/"})).replace(/[^A-Za-z0-9\+\/]/g,"")},L=function(e){return k(T(e))};n.Uint8Array&&(b=function(e){return Uint8Array.from(S(T(e)),(function(e){return e.charCodeAt(0)}))});var C=function(){var e=n.Base64;return n.Base64=o,e};if(n.Base64={VERSION:a,atob:S,btoa:p,fromBase64:L,toBase64:v,utob:h,encode:v,encodeURI:y,btou:x,decode:L,noConflict:C,fromUint8Array:i,toUint8Array:b},"function"==typeof Object.defineProperty){var D=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}};n.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",D((function(){return L(this)}))),Object.defineProperty(String.prototype,"toBase64",D((function(e){return v(this,e)}))),Object.defineProperty(String.prototype,"toBase64URI",D((function(){return v(this,!0)})))}}return n.Meteor&&(Base64=n.Base64),e.exports?e.exports.Base64=n.Base64:void 0===(r=function(){return n.Base64}.apply(t,[]))||(e.exports=r),{Base64:n.Base64}}(i)},18552:(e,t,n)=>{var r=n(10852)(n(55639),"DataView");e.exports=r},1989:(e,t,n)=>{var r=n(51789),i=n(80401),o=n(57667),a=n(21327),s=n(81866);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,e.exports=l},38407:(e,t,n)=>{var r=n(27040),i=n(14125),o=n(82117),a=n(67518),s=n(54705);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,e.exports=l},57071:(e,t,n)=>{var r=n(10852)(n(55639),"Map");e.exports=r},83369:(e,t,n)=>{var r=n(24785),i=n(11285),o=n(96e3),a=n(49916),s=n(95265);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,e.exports=l},53818:(e,t,n)=>{var r=n(10852)(n(55639),"Promise");e.exports=r},58525:(e,t,n)=>{var r=n(10852)(n(55639),"Set");e.exports=r},88668:(e,t,n)=>{var r=n(83369),i=n(90619),o=n(72385);function a(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}a.prototype.add=a.prototype.push=i,a.prototype.has=o,e.exports=a},46384:(e,t,n)=>{var r=n(38407),i=n(37465),o=n(63779),a=n(67599),s=n(44758),l=n(34309);function u(e){var t=this.__data__=new r(e);this.size=t.size}u.prototype.clear=i,u.prototype.delete=o,u.prototype.get=a,u.prototype.has=s,u.prototype.set=l,e.exports=u},62705:(e,t,n)=>{var r=n(55639).Symbol;e.exports=r},11149:(e,t,n)=>{var r=n(55639).Uint8Array;e.exports=r},70577:(e,t,n)=>{var r=n(10852)(n(55639),"WeakMap");e.exports=r},96874:e=>{e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},77412:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}},34963:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}},47443:(e,t,n)=>{var r=n(42118);e.exports=function(e,t){return!!(null==e?0:e.length)&&r(e,t,0)>-1}},1196:e=>{e.exports=function(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}},14636:(e,t,n)=>{var r=n(22545),i=n(35694),o=n(1469),a=n(44144),s=n(65776),l=n(36719),u=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=o(e),c=!n&&i(e),d=!n&&!c&&a(e),h=!n&&!c&&!d&&l(e),f=n||c||d||h,p=f?r(e.length,String):[],m=p.length;for(var g in e)!t&&!u.call(e,g)||f&&("length"==g||d&&("offset"==g||"parent"==g)||h&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||s(g,m))||p.push(g);return p}},29932:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}},62488:e=>{e.exports=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}},62663:e=>{e.exports=function(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}},82908:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},48983:(e,t,n)=>{var r=n(40371)("length");e.exports=r},86556:(e,t,n)=>{var r=n(89465),i=n(77813);e.exports=function(e,t,n){(void 0!==n&&!i(e[t],n)||void 0===n&&!(t in e))&&r(e,t,n)}},34865:(e,t,n)=>{var r=n(89465),i=n(77813),o=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var a=e[t];o.call(e,t)&&i(a,n)&&(void 0!==n||t in e)||r(e,t,n)}},18470:(e,t,n)=>{var r=n(77813);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},44037:(e,t,n)=>{var r=n(98363),i=n(3674);e.exports=function(e,t){return e&&r(t,i(t),e)}},63886:(e,t,n)=>{var r=n(98363),i=n(81704);e.exports=function(e,t){return e&&r(t,i(t),e)}},89465:(e,t,n)=>{var r=n(38777);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},85990:(e,t,n)=>{var r=n(46384),i=n(77412),o=n(34865),a=n(44037),s=n(63886),l=n(64626),u=n(278),c=n(18805),d=n(1911),h=n(58234),f=n(46904),p=n(64160),m=n(43824),g=n(29148),v=n(38517),y=n(1469),b=n(44144),_=n(56688),w=n(13218),x=n(72928),M=n(3674),E=n(81704),S="[object Arguments]",k="[object Function]",T="[object Object]",L={};L[S]=L["[object Array]"]=L["[object ArrayBuffer]"]=L["[object DataView]"]=L["[object Boolean]"]=L["[object Date]"]=L["[object Float32Array]"]=L["[object Float64Array]"]=L["[object Int8Array]"]=L["[object Int16Array]"]=L["[object Int32Array]"]=L["[object Map]"]=L["[object Number]"]=L[T]=L["[object RegExp]"]=L["[object Set]"]=L["[object String]"]=L["[object Symbol]"]=L["[object Uint8Array]"]=L["[object Uint8ClampedArray]"]=L["[object Uint16Array]"]=L["[object Uint32Array]"]=!0,L["[object Error]"]=L[k]=L["[object WeakMap]"]=!1,e.exports=function e(t,n,C,D,A,P){var O,I=1&n,R=2&n,N=4&n;if(C&&(O=A?C(t,D,A,P):C(t)),void 0!==O)return O;if(!w(t))return t;var Y=y(t);if(Y){if(O=m(t),!I)return u(t,O)}else{var j=p(t),F=j==k||"[object GeneratorFunction]"==j;if(b(t))return l(t,I);if(j==T||j==S||F&&!A){if(O=R||F?{}:v(t),!I)return R?d(t,s(O,t)):c(t,a(O,t))}else{if(!L[j])return A?t:{};O=g(t,j,I)}}P||(P=new r);var B=P.get(t);if(B)return B;P.set(t,O),x(t)?t.forEach((function(r){O.add(e(r,n,C,r,t,P))})):_(t)&&t.forEach((function(r,i){O.set(i,e(r,n,C,i,t,P))}));var z=Y?void 0:(N?R?f:h:R?E:M)(t);return i(z||t,(function(r,i){z&&(r=t[i=r]),o(O,i,e(r,n,C,i,t,P))})),O}},3118:(e,t,n)=>{var r=n(13218),i=Object.create,o=function(){function e(){}return function(t){if(!r(t))return{};if(i)return i(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=o},89881:(e,t,n)=>{var r=n(47816),i=n(99291)(r);e.exports=i},56029:(e,t,n)=>{var r=n(33448);e.exports=function(e,t,n){for(var i=-1,o=e.length;++i<o;){var a=e[i],s=t(a);if(null!=s&&(void 0===l?s==s&&!r(s):n(s,l)))var l=s,u=a}return u}},80760:(e,t,n)=>{var r=n(89881);e.exports=function(e,t){var n=[];return r(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}},41848:e=>{e.exports=function(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}},21078:(e,t,n)=>{var r=n(62488),i=n(37285);e.exports=function e(t,n,o,a,s){var l=-1,u=t.length;for(o||(o=i),s||(s=[]);++l<u;){var c=t[l];n>0&&o(c)?n>1?e(c,n-1,o,a,s):r(s,c):a||(s[s.length]=c)}return s}},28483:(e,t,n)=>{var r=n(25063)();e.exports=r},47816:(e,t,n)=>{var r=n(28483),i=n(3674);e.exports=function(e,t){return e&&r(e,t,i)}},97786:(e,t,n)=>{var r=n(71811),i=n(40327);e.exports=function(e,t){for(var n=0,o=(t=r(t,e)).length;null!=e&&n<o;)e=e[i(t[n++])];return n&&n==o?e:void 0}},68866:(e,t,n)=>{var r=n(62488),i=n(1469);e.exports=function(e,t,n){var o=t(e);return i(e)?o:r(o,n(e))}},44239:(e,t,n)=>{var r=n(62705),i=n(89607),o=n(2333),a=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?i(e):o(e)}},53325:e=>{e.exports=function(e,t){return e>t}},78565:e=>{var t=Object.prototype.hasOwnProperty;e.exports=function(e,n){return null!=e&&t.call(e,n)}},13:e=>{e.exports=function(e,t){return null!=e&&t in Object(e)}},42118:(e,t,n)=>{var r=n(41848),i=n(62722),o=n(42351);e.exports=function(e,t,n){return t==t?o(e,t,n):r(e,i,n)}},9454:(e,t,n)=>{var r=n(44239),i=n(37005);e.exports=function(e){return i(e)&&"[object Arguments]"==r(e)}},90939:(e,t,n)=>{var r=n(2492),i=n(37005);e.exports=function e(t,n,o,a,s){return t===n||(null==t||null==n||!i(t)&&!i(n)?t!=t&&n!=n:r(t,n,o,a,e,s))}},2492:(e,t,n)=>{var r=n(46384),i=n(67114),o=n(18351),a=n(16096),s=n(64160),l=n(1469),u=n(44144),c=n(36719),d="[object Arguments]",h="[object Array]",f="[object Object]",p=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,m,g,v){var y=l(e),b=l(t),_=y?h:s(e),w=b?h:s(t),x=(_=_==d?f:_)==f,M=(w=w==d?f:w)==f,E=_==w;if(E&&u(e)){if(!u(t))return!1;y=!0,x=!1}if(E&&!x)return v||(v=new r),y||c(e)?i(e,t,n,m,g,v):o(e,t,_,n,m,g,v);if(!(1&n)){var S=x&&p.call(e,"__wrapped__"),k=M&&p.call(t,"__wrapped__");if(S||k){var T=S?e.value():e,L=k?t.value():t;return v||(v=new r),g(T,L,n,m,v)}}return!!E&&(v||(v=new r),a(e,t,n,m,g,v))}},25588:(e,t,n)=>{var r=n(64160),i=n(37005);e.exports=function(e){return i(e)&&"[object Map]"==r(e)}},2958:(e,t,n)=>{var r=n(46384),i=n(90939);e.exports=function(e,t,n,o){var a=n.length,s=a,l=!o;if(null==e)return!s;for(e=Object(e);a--;){var u=n[a];if(l&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++a<s;){var c=(u=n[a])[0],d=e[c],h=u[1];if(l&&u[2]){if(void 0===d&&!(c in e))return!1}else{var f=new r;if(o)var p=o(d,h,c,e,t,f);if(!(void 0===p?i(h,d,3,o,f):p))return!1}}return!0}},62722:e=>{e.exports=function(e){return e!=e}},28458:(e,t,n)=>{var r=n(23560),i=n(15346),o=n(13218),a=n(80346),s=/^\[object .+?Constructor\]$/,l=Function.prototype,u=Object.prototype,c=l.toString,d=u.hasOwnProperty,h=RegExp("^"+c.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||i(e))&&(r(e)?h:s).test(a(e))}},29221:(e,t,n)=>{var r=n(64160),i=n(37005);e.exports=function(e){return i(e)&&"[object Set]"==r(e)}},38749:(e,t,n)=>{var r=n(44239),i=n(41780),o=n(37005),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function(e){return o(e)&&i(e.length)&&!!a[r(e)]}},67206:(e,t,n)=>{var r=n(91573),i=n(16432),o=n(6557),a=n(1469),s=n(39601);e.exports=function(e){return"function"==typeof e?e:null==e?o:"object"==typeof e?a(e)?i(e[0],e[1]):r(e):s(e)}},280:(e,t,n)=>{var r=n(25726),i=n(86916),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return i(e);var t=[];for(var n in Object(e))o.call(e,n)&&"constructor"!=n&&t.push(n);return t}},10313:(e,t,n)=>{var r=n(13218),i=n(25726),o=n(33498),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return o(e);var t=i(e),n=[];for(var s in e)("constructor"!=s||!t&&a.call(e,s))&&n.push(s);return n}},70433:e=>{e.exports=function(e,t){return e<t}},69199:(e,t,n)=>{var r=n(89881),i=n(98612);e.exports=function(e,t){var n=-1,o=i(e)?Array(e.length):[];return r(e,(function(e,r,i){o[++n]=t(e,r,i)})),o}},91573:(e,t,n)=>{var r=n(2958),i=n(1499),o=n(42634);e.exports=function(e){var t=i(e);return 1==t.length&&t[0][2]?o(t[0][0],t[0][1]):function(n){return n===e||r(n,e,t)}}},16432:(e,t,n)=>{var r=n(90939),i=n(27361),o=n(79095),a=n(15403),s=n(89162),l=n(42634),u=n(40327);e.exports=function(e,t){return a(e)&&s(t)?l(u(e),t):function(n){var a=i(n,e);return void 0===a&&a===t?o(n,e):r(t,a,3)}}},42980:(e,t,n)=>{var r=n(46384),i=n(86556),o=n(28483),a=n(59783),s=n(13218),l=n(81704),u=n(36390);e.exports=function e(t,n,c,d,h){t!==n&&o(n,(function(o,l){if(h||(h=new r),s(o))a(t,n,l,c,e,d,h);else{var f=d?d(u(t,l),o,l+"",t,n,h):void 0;void 0===f&&(f=o),i(t,l,f)}}),l)}},59783:(e,t,n)=>{var r=n(86556),i=n(64626),o=n(77133),a=n(278),s=n(38517),l=n(35694),u=n(1469),c=n(29246),d=n(44144),h=n(23560),f=n(13218),p=n(68630),m=n(36719),g=n(36390),v=n(59881);e.exports=function(e,t,n,y,b,_,w){var x=g(e,n),M=g(t,n),E=w.get(M);if(E)r(e,n,E);else{var S=_?_(x,M,n+"",e,t,w):void 0,k=void 0===S;if(k){var T=u(M),L=!T&&d(M),C=!T&&!L&&m(M);S=M,T||L||C?u(x)?S=x:c(x)?S=a(x):L?(k=!1,S=i(M,!0)):C?(k=!1,S=o(M,!0)):S=[]:p(M)||l(M)?(S=x,l(x)?S=v(x):f(x)&&!h(x)||(S=s(M))):k=!1}k&&(w.set(M,S),b(S,M,y,_,w),w.delete(M)),r(e,n,S)}}},82689:(e,t,n)=>{var r=n(29932),i=n(97786),o=n(67206),a=n(69199),s=n(71131),l=n(7518),u=n(85022),c=n(6557),d=n(1469);e.exports=function(e,t,n){t=t.length?r(t,(function(e){return d(e)?function(t){return i(t,1===e.length?e[0]:e)}:e})):[c];var h=-1;t=r(t,l(o));var f=a(e,(function(e,n,i){return{criteria:r(t,(function(t){return t(e)})),index:++h,value:e}}));return s(f,(function(e,t){return u(e,t,n)}))}},25970:(e,t,n)=>{var r=n(63012),i=n(79095);e.exports=function(e,t){return r(e,t,(function(t,n){return i(e,n)}))}},63012:(e,t,n)=>{var r=n(97786),i=n(10611),o=n(71811);e.exports=function(e,t,n){for(var a=-1,s=t.length,l={};++a<s;){var u=t[a],c=r(e,u);n(c,u)&&i(l,o(u,e),c)}return l}},40371:e=>{e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},79152:(e,t,n)=>{var r=n(97786);e.exports=function(e){return function(t){return r(t,e)}}},40098:e=>{var t=Math.ceil,n=Math.max;e.exports=function(e,r,i,o){for(var a=-1,s=n(t((r-e)/(i||1)),0),l=Array(s);s--;)l[o?s:++a]=e,e+=i;return l}},10107:e=>{e.exports=function(e,t,n,r,i){return i(e,(function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)})),n}},5976:(e,t,n)=>{var r=n(6557),i=n(45357),o=n(30061);e.exports=function(e,t){return o(i(e,t,r),e+"")}},10611:(e,t,n)=>{var r=n(34865),i=n(71811),o=n(65776),a=n(13218),s=n(40327);e.exports=function(e,t,n,l){if(!a(e))return e;for(var u=-1,c=(t=i(t,e)).length,d=c-1,h=e;null!=h&&++u<c;){var f=s(t[u]),p=n;if("__proto__"===f||"constructor"===f||"prototype"===f)return e;if(u!=d){var m=h[f];void 0===(p=l?l(m,f,h):void 0)&&(p=a(m)?m:o(t[u+1])?[]:{})}r(h,f,p),h=h[f]}return e}},56560:(e,t,n)=>{var r=n(75703),i=n(38777),o=n(6557),a=i?function(e,t){return i(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:o;e.exports=a},71131:e=>{e.exports=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}},22545:e=>{e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},80531:(e,t,n)=>{var r=n(62705),i=n(29932),o=n(1469),a=n(33448),s=r?r.prototype:void 0,l=s?s.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(o(t))return i(t,e)+"";if(a(t))return l?l.call(t):"";var n=t+"";return"0"==n&&1/t==-Infinity?"-0":n}},27561:(e,t,n)=>{var r=n(67990),i=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(i,""):e}},7518:e=>{e.exports=function(e){return function(t){return e(t)}}},45652:(e,t,n)=>{var r=n(88668),i=n(47443),o=n(1196),a=n(74757),s=n(23593),l=n(21814);e.exports=function(e,t,n){var u=-1,c=i,d=e.length,h=!0,f=[],p=f;if(n)h=!1,c=o;else if(d>=200){var m=t?null:s(e);if(m)return l(m);h=!1,c=a,p=new r}else p=t?[]:f;e:for(;++u<d;){var g=e[u],v=t?t(g):g;if(g=n||0!==g?g:0,h&&v==v){for(var y=p.length;y--;)if(p[y]===v)continue e;t&&p.push(v),f.push(g)}else c(p,v,n)||(p!==f&&p.push(v),f.push(g))}return f}},47415:(e,t,n)=>{var r=n(29932);e.exports=function(e,t){return r(t,(function(t){return e[t]}))}},1757:e=>{e.exports=function(e,t,n){for(var r=-1,i=e.length,o=t.length,a={};++r<i;){var s=r<o?t[r]:void 0;n(a,e[r],s)}return a}},74757:e=>{e.exports=function(e,t){return e.has(t)}},54290:(e,t,n)=>{var r=n(6557);e.exports=function(e){return"function"==typeof e?e:r}},71811:(e,t,n)=>{var r=n(1469),i=n(15403),o=n(55514),a=n(79833);e.exports=function(e,t){return r(e)?e:i(e,t)?[e]:o(a(e))}},74318:(e,t,n)=>{var r=n(11149);e.exports=function(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}},64626:(e,t,n)=>{e=n.nmd(e);var r=n(55639),i=t&&!t.nodeType&&t,o=i&&e&&!e.nodeType&&e,a=o&&o.exports===i?r.Buffer:void 0,s=a?a.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=s?s(n):new e.constructor(n);return e.copy(r),r}},57157:(e,t,n)=>{var r=n(74318);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}},93147:e=>{var t=/\w*$/;e.exports=function(e){var n=new e.constructor(e.source,t.exec(e));return n.lastIndex=e.lastIndex,n}},40419:(e,t,n)=>{var r=n(62705),i=r?r.prototype:void 0,o=i?i.valueOf:void 0;e.exports=function(e){return o?Object(o.call(e)):{}}},77133:(e,t,n)=>{var r=n(74318);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},26393:(e,t,n)=>{var r=n(33448);e.exports=function(e,t){if(e!==t){var n=void 0!==e,i=null===e,o=e==e,a=r(e),s=void 0!==t,l=null===t,u=t==t,c=r(t);if(!l&&!c&&!a&&e>t||a&&s&&u&&!l&&!c||i&&s&&u||!n&&u||!o)return 1;if(!i&&!a&&!c&&e<t||c&&n&&o&&!i&&!a||l&&n&&o||!s&&o||!u)return-1}return 0}},85022:(e,t,n)=>{var r=n(26393);e.exports=function(e,t,n){for(var i=-1,o=e.criteria,a=t.criteria,s=o.length,l=n.length;++i<s;){var u=r(o[i],a[i]);if(u)return i>=l?u:u*("desc"==n[i]?-1:1)}return e.index-t.index}},278:e=>{e.exports=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}},98363:(e,t,n)=>{var r=n(34865),i=n(89465);e.exports=function(e,t,n,o){var a=!n;n||(n={});for(var s=-1,l=t.length;++s<l;){var u=t[s],c=o?o(n[u],e[u],u,n,e):void 0;void 0===c&&(c=e[u]),a?i(n,u,c):r(n,u,c)}return n}},18805:(e,t,n)=>{var r=n(98363),i=n(99551);e.exports=function(e,t){return r(e,i(e),t)}},1911:(e,t,n)=>{var r=n(98363),i=n(51442);e.exports=function(e,t){return r(e,i(e),t)}},14429:(e,t,n)=>{var r=n(55639)["__core-js_shared__"];e.exports=r},21463:(e,t,n)=>{var r=n(5976),i=n(16612);e.exports=function(e){return r((function(t,n){var r=-1,o=n.length,a=o>1?n[o-1]:void 0,s=o>2?n[2]:void 0;for(a=e.length>3&&"function"==typeof a?(o--,a):void 0,s&&i(n[0],n[1],s)&&(a=o<3?void 0:a,o=1),t=Object(t);++r<o;){var l=n[r];l&&e(t,l,r,a)}return t}))}},99291:(e,t,n)=>{var r=n(98612);e.exports=function(e,t){return function(n,i){if(null==n)return n;if(!r(n))return e(n,i);for(var o=n.length,a=t?o:-1,s=Object(n);(t?a--:++a<o)&&!1!==i(s[a],a,s););return n}}},25063:e=>{e.exports=function(e){return function(t,n,r){for(var i=-1,o=Object(t),a=r(t),s=a.length;s--;){var l=a[e?s:++i];if(!1===n(o[l],l,o))break}return t}}},67740:(e,t,n)=>{var r=n(67206),i=n(98612),o=n(3674);e.exports=function(e){return function(t,n,a){var s=Object(t);if(!i(t)){var l=r(n,3);t=o(t),n=function(e){return l(s[e],e,s)}}var u=e(t,n,a);return u>-1?s[l?t[u]:u]:void 0}}},47445:(e,t,n)=>{var r=n(40098),i=n(16612),o=n(18601);e.exports=function(e){return function(t,n,a){return a&&"number"!=typeof a&&i(t,n,a)&&(n=a=void 0),t=o(t),void 0===n?(n=t,t=0):n=o(n),a=void 0===a?t<n?1:-1:o(a),r(t,n,a,e)}}},23593:(e,t,n)=>{var r=n(58525),i=n(50308),o=n(21814),a=r&&1/o(new r([,-0]))[1]==1/0?function(e){return new r(e)}:i;e.exports=a},38777:(e,t,n)=>{var r=n(10852),i=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=i},67114:(e,t,n)=>{var r=n(88668),i=n(82908),o=n(74757);e.exports=function(e,t,n,a,s,l){var u=1&n,c=e.length,d=t.length;if(c!=d&&!(u&&d>c))return!1;var h=l.get(e),f=l.get(t);if(h&&f)return h==t&&f==e;var p=-1,m=!0,g=2&n?new r:void 0;for(l.set(e,t),l.set(t,e);++p<c;){var v=e[p],y=t[p];if(a)var b=u?a(y,v,p,t,e,l):a(v,y,p,e,t,l);if(void 0!==b){if(b)continue;m=!1;break}if(g){if(!i(t,(function(e,t){if(!o(g,t)&&(v===e||s(v,e,n,a,l)))return g.push(t)}))){m=!1;break}}else if(v!==y&&!s(v,y,n,a,l)){m=!1;break}}return l.delete(e),l.delete(t),m}},18351:(e,t,n)=>{var r=n(62705),i=n(11149),o=n(77813),a=n(67114),s=n(68776),l=n(21814),u=r?r.prototype:void 0,c=u?u.valueOf:void 0;e.exports=function(e,t,n,r,u,d,h){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!d(new i(e),new i(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var f=s;case"[object Set]":var p=1&r;if(f||(f=l),e.size!=t.size&&!p)return!1;var m=h.get(e);if(m)return m==t;r|=2,h.set(e,t);var g=a(f(e),f(t),r,u,d,h);return h.delete(e),g;case"[object Symbol]":if(c)return c.call(e)==c.call(t)}return!1}},16096:(e,t,n)=>{var r=n(58234),i=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,o,a,s){var l=1&n,u=r(e),c=u.length;if(c!=r(t).length&&!l)return!1;for(var d=c;d--;){var h=u[d];if(!(l?h in t:i.call(t,h)))return!1}var f=s.get(e),p=s.get(t);if(f&&p)return f==t&&p==e;var m=!0;s.set(e,t),s.set(t,e);for(var g=l;++d<c;){var v=e[h=u[d]],y=t[h];if(o)var b=l?o(y,v,h,t,e,s):o(v,y,h,e,t,s);if(!(void 0===b?v===y||a(v,y,n,o,s):b)){m=!1;break}g||(g="constructor"==h)}if(m&&!g){var _=e.constructor,w=t.constructor;_==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof _&&_ instanceof _&&"function"==typeof w&&w instanceof w||(m=!1)}return s.delete(e),s.delete(t),m}},99021:(e,t,n)=>{var r=n(85564),i=n(45357),o=n(30061);e.exports=function(e){return o(i(e,void 0,r),e+"")}},31957:(e,t,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},58234:(e,t,n)=>{var r=n(68866),i=n(99551),o=n(3674);e.exports=function(e){return r(e,o,i)}},46904:(e,t,n)=>{var r=n(68866),i=n(51442),o=n(81704);e.exports=function(e){return r(e,o,i)}},45050:(e,t,n)=>{var r=n(37019);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},1499:(e,t,n)=>{var r=n(89162),i=n(3674);e.exports=function(e){for(var t=i(e),n=t.length;n--;){var o=t[n],a=e[o];t[n]=[o,a,r(a)]}return t}},10852:(e,t,n)=>{var r=n(28458),i=n(47801);e.exports=function(e,t){var n=i(e,t);return r(n)?n:void 0}},85924:(e,t,n)=>{var r=n(5569)(Object.getPrototypeOf,Object);e.exports=r},89607:(e,t,n)=>{var r=n(62705),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r?r.toStringTag:void 0;e.exports=function(e){var t=o.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(e){}var i=a.call(e);return r&&(t?e[s]=n:delete e[s]),i}},99551:(e,t,n)=>{var r=n(34963),i=n(70479),o=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(e){return null==e?[]:(e=Object(e),r(a(e),(function(t){return o.call(e,t)})))}:i;e.exports=s},51442:(e,t,n)=>{var r=n(62488),i=n(85924),o=n(99551),a=n(70479),s=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)r(t,o(e)),e=i(e);return t}:a;e.exports=s},64160:(e,t,n)=>{var r=n(18552),i=n(57071),o=n(53818),a=n(58525),s=n(70577),l=n(44239),u=n(80346),c="[object Map]",d="[object Promise]",h="[object Set]",f="[object WeakMap]",p="[object DataView]",m=u(r),g=u(i),v=u(o),y=u(a),b=u(s),_=l;(r&&_(new r(new ArrayBuffer(1)))!=p||i&&_(new i)!=c||o&&_(o.resolve())!=d||a&&_(new a)!=h||s&&_(new s)!=f)&&(_=function(e){var t=l(e),n="[object Object]"==t?e.constructor:void 0,r=n?u(n):"";if(r)switch(r){case m:return p;case g:return c;case v:return d;case y:return h;case b:return f}return t}),e.exports=_},47801:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},222:(e,t,n)=>{var r=n(71811),i=n(35694),o=n(1469),a=n(65776),s=n(41780),l=n(40327);e.exports=function(e,t,n){for(var u=-1,c=(t=r(t,e)).length,d=!1;++u<c;){var h=l(t[u]);if(!(d=null!=e&&n(e,h)))break;e=e[h]}return d||++u!=c?d:!!(c=null==e?0:e.length)&&s(c)&&a(h,c)&&(o(e)||i(e))}},62689:e=>{var t=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return t.test(e)}},51789:(e,t,n)=>{var r=n(94536);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},80401:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},57667:(e,t,n)=>{var r=n(94536),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(t,e)?t[e]:void 0}},21327:(e,t,n)=>{var r=n(94536),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:i.call(t,e)}},81866:(e,t,n)=>{var r=n(94536);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},43824:e=>{var t=Object.prototype.hasOwnProperty;e.exports=function(e){var n=e.length,r=new e.constructor(n);return n&&"string"==typeof e[0]&&t.call(e,"index")&&(r.index=e.index,r.input=e.input),r}},29148:(e,t,n)=>{var r=n(74318),i=n(57157),o=n(93147),a=n(40419),s=n(77133);e.exports=function(e,t,n){var l=e.constructor;switch(t){case"[object ArrayBuffer]":return r(e);case"[object Boolean]":case"[object Date]":return new l(+e);case"[object DataView]":return i(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return s(e,n);case"[object Map]":case"[object Set]":return new l;case"[object Number]":case"[object String]":return new l(e);case"[object RegExp]":return o(e);case"[object Symbol]":return a(e)}}},38517:(e,t,n)=>{var r=n(3118),i=n(85924),o=n(25726);e.exports=function(e){return"function"!=typeof e.constructor||o(e)?{}:r(i(e))}},37285:(e,t,n)=>{var r=n(62705),i=n(35694),o=n(1469),a=r?r.isConcatSpreadable:void 0;e.exports=function(e){return o(e)||i(e)||!!(a&&e&&e[a])}},65776:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var r=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&t.test(e))&&e>-1&&e%1==0&&e<n}},16612:(e,t,n)=>{var r=n(77813),i=n(98612),o=n(65776),a=n(13218);e.exports=function(e,t,n){if(!a(n))return!1;var s=typeof t;return!!("number"==s?i(n)&&o(t,n.length):"string"==s&&t in n)&&r(n[t],e)}},15403:(e,t,n)=>{var r=n(1469),i=n(33448),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;e.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!i(e))||(a.test(e)||!o.test(e)||null!=t&&e in Object(t))}},37019:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},15346:(e,t,n)=>{var r,i=n(14429),o=(r=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function(e){return!!o&&o in e}},25726:e=>{var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},89162:(e,t,n)=>{var r=n(13218);e.exports=function(e){return e==e&&!r(e)}},27040:e=>{e.exports=function(){this.__data__=[],this.size=0}},14125:(e,t,n)=>{var r=n(18470),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0)&&(n==t.length-1?t.pop():i.call(t,n,1),--this.size,!0)}},82117:(e,t,n)=>{var r=n(18470);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},67518:(e,t,n)=>{var r=n(18470);e.exports=function(e){return r(this.__data__,e)>-1}},54705:(e,t,n)=>{var r=n(18470);e.exports=function(e,t){var n=this.__data__,i=r(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}},24785:(e,t,n)=>{var r=n(1989),i=n(38407),o=n(57071);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},11285:(e,t,n)=>{var r=n(45050);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},96e3:(e,t,n)=>{var r=n(45050);e.exports=function(e){return r(this,e).get(e)}},49916:(e,t,n)=>{var r=n(45050);e.exports=function(e){return r(this,e).has(e)}},95265:(e,t,n)=>{var r=n(45050);e.exports=function(e,t){var n=r(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}},68776:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}},42634:e=>{e.exports=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}},24523:(e,t,n)=>{var r=n(88306);e.exports=function(e){var t=r(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}},94536:(e,t,n)=>{var r=n(10852)(Object,"create");e.exports=r},86916:(e,t,n)=>{var r=n(5569)(Object.keys,Object);e.exports=r},33498:e=>{e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},31167:(e,t,n)=>{e=n.nmd(e);var r=n(31957),i=t&&!t.nodeType&&t,o=i&&e&&!e.nodeType&&e,a=o&&o.exports===i&&r.process,s=function(){try{var e=o&&o.require&&o.require("util").types;return e||a&&a.binding&&a.binding("util")}catch(e){}}();e.exports=s},2333:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},5569:e=>{e.exports=function(e,t){return function(n){return e(t(n))}}},45357:(e,t,n)=>{var r=n(96874),i=Math.max;e.exports=function(e,t,n){return t=i(void 0===t?e.length-1:t,0),function(){for(var o=arguments,a=-1,s=i(o.length-t,0),l=Array(s);++a<s;)l[a]=o[t+a];a=-1;for(var u=Array(t+1);++a<t;)u[a]=o[a];return u[t]=n(l),r(e,this,u)}}},55639:(e,t,n)=>{var r=n(31957),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();e.exports=o},36390:e=>{e.exports=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}},90619:e=>{e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},72385:e=>{e.exports=function(e){return this.__data__.has(e)}},21814:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},30061:(e,t,n)=>{var r=n(56560),i=n(21275)(r);e.exports=i},21275:e=>{var t=Date.now;e.exports=function(e){var n=0,r=0;return function(){var i=t(),o=16-(i-r);if(r=i,o>0){if(++n>=800)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}},37465:(e,t,n)=>{var r=n(38407);e.exports=function(){this.__data__=new r,this.size=0}},63779:e=>{e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},67599:e=>{e.exports=function(e){return this.__data__.get(e)}},44758:e=>{e.exports=function(e){return this.__data__.has(e)}},34309:(e,t,n)=>{var r=n(38407),i=n(57071),o=n(83369);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var a=n.__data__;if(!i||a.length<199)return a.push([e,t]),this.size=++n.size,this;n=this.__data__=new o(a)}return n.set(e,t),this.size=n.size,this}},42351:e=>{e.exports=function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}},88016:(e,t,n)=>{var r=n(48983),i=n(62689),o=n(21903);e.exports=function(e){return i(e)?o(e):r(e)}},55514:(e,t,n)=>{var r=n(24523),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,a=r((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(i,(function(e,n,r,i){t.push(r?i.replace(o,"$1"):n||e)})),t}));e.exports=a},40327:(e,t,n)=>{var r=n(33448);e.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}},80346:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},67990:e=>{var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},21903:e=>{var t="[\\ud800-\\udfff]",n="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",r="\\ud83c[\\udffb-\\udfff]",i="[^\\ud800-\\udfff]",o="(?:\\ud83c[\\udde6-\\uddff]){2}",a="[\\ud800-\\udbff][\\udc00-\\udfff]",s="(?:"+n+"|"+r+")"+"?",l="[\\ufe0e\\ufe0f]?",u=l+s+("(?:\\u200d(?:"+[i,o,a].join("|")+")"+l+s+")*"),c="(?:"+[i+n+"?",n,o,a,t].join("|")+")",d=RegExp(r+"(?="+r+")|"+c+u,"g");e.exports=function(e){for(var t=d.lastIndex=0;d.test(e);)++t;return t}},66678:(e,t,n)=>{var r=n(85990);e.exports=function(e){return r(e,4)}},50361:(e,t,n)=>{var r=n(85990);e.exports=function(e){return r(e,5)}},75703:e=>{e.exports=function(e){return function(){return e}}},23279:(e,t,n)=>{var r=n(13218),i=n(7771),o=n(14841),a=Math.max,s=Math.min;e.exports=function(e,t,n){var l,u,c,d,h,f,p=0,m=!1,g=!1,v=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(t){var n=l,r=u;return l=u=void 0,p=t,d=e.apply(r,n)}function b(e){return p=e,h=setTimeout(w,t),m?y(e):d}function _(e){var n=e-f;return void 0===f||n>=t||n<0||g&&e-p>=c}function w(){var e=i();if(_(e))return x(e);h=setTimeout(w,function(e){var n=t-(e-f);return g?s(n,c-(e-p)):n}(e))}function x(e){return h=void 0,v&&l?y(e):(l=u=void 0,d)}function M(){var e=i(),n=_(e);if(l=arguments,u=this,f=e,n){if(void 0===h)return b(f);if(g)return clearTimeout(h),h=setTimeout(w,t),y(f)}return void 0===h&&(h=setTimeout(w,t)),d}return t=o(t)||0,r(n)&&(m=!!n.leading,c=(g="maxWait"in n)?a(o(n.maxWait)||0,t):c,v="trailing"in n?!!n.trailing:v),M.cancel=function(){void 0!==h&&clearTimeout(h),p=0,l=f=u=h=void 0},M.flush=function(){return void 0===h?d:x(i())},M}},91747:(e,t,n)=>{var r=n(5976),i=n(77813),o=n(16612),a=n(81704),s=Object.prototype,l=s.hasOwnProperty,u=r((function(e,t){e=Object(e);var n=-1,r=t.length,u=r>2?t[2]:void 0;for(u&&o(t[0],t[1],u)&&(r=1);++n<r;)for(var c=t[n],d=a(c),h=-1,f=d.length;++h<f;){var p=d[h],m=e[p];(void 0===m||i(m,s[p])&&!l.call(e,p))&&(e[p]=c[p])}return e}));e.exports=u},66073:(e,t,n)=>{e.exports=n(84486)},77813:e=>{e.exports=function(e,t){return e===t||e!=e&&t!=t}},63105:(e,t,n)=>{var r=n(34963),i=n(80760),o=n(67206),a=n(1469);e.exports=function(e,t){return(a(e)?r:i)(e,o(t,3))}},13311:(e,t,n)=>{var r=n(67740)(n(30998));e.exports=r},30998:(e,t,n)=>{var r=n(41848),i=n(67206),o=n(40554),a=Math.max;e.exports=function(e,t,n){var s=null==e?0:e.length;if(!s)return-1;var l=null==n?0:o(n);return l<0&&(l=a(s+l,0)),r(e,i(t,3),l)}},85564:(e,t,n)=>{var r=n(21078);e.exports=function(e){return(null==e?0:e.length)?r(e,1):[]}},84486:(e,t,n)=>{var r=n(77412),i=n(89881),o=n(54290),a=n(1469);e.exports=function(e,t){return(a(e)?r:i)(e,o(t))}},62620:(e,t,n)=>{var r=n(28483),i=n(54290),o=n(81704);e.exports=function(e,t){return null==e?e:r(e,i(t),o)}},27361:(e,t,n)=>{var r=n(97786);e.exports=function(e,t,n){var i=null==e?void 0:r(e,t);return void 0===i?n:i}},18721:(e,t,n)=>{var r=n(78565),i=n(222);e.exports=function(e,t){return null!=e&&i(e,t,r)}},79095:(e,t,n)=>{var r=n(13),i=n(222);e.exports=function(e,t){return null!=e&&i(e,t,r)}},6557:e=>{e.exports=function(e){return e}},35694:(e,t,n)=>{var r=n(9454),i=n(37005),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,l=r(function(){return arguments}())?r:function(e){return i(e)&&a.call(e,"callee")&&!s.call(e,"callee")};e.exports=l},1469:e=>{var t=Array.isArray;e.exports=t},98612:(e,t,n)=>{var r=n(23560),i=n(41780);e.exports=function(e){return null!=e&&i(e.length)&&!r(e)}},29246:(e,t,n)=>{var r=n(98612),i=n(37005);e.exports=function(e){return i(e)&&r(e)}},44144:(e,t,n)=>{e=n.nmd(e);var r=n(55639),i=n(95062),o=t&&!t.nodeType&&t,a=o&&e&&!e.nodeType&&e,s=a&&a.exports===o?r.Buffer:void 0,l=(s?s.isBuffer:void 0)||i;e.exports=l},41609:(e,t,n)=>{var r=n(280),i=n(64160),o=n(35694),a=n(1469),s=n(98612),l=n(44144),u=n(25726),c=n(36719),d=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(s(e)&&(a(e)||"string"==typeof e||"function"==typeof e.splice||l(e)||c(e)||o(e)))return!e.length;var t=i(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(u(e))return!r(e).length;for(var n in e)if(d.call(e,n))return!1;return!0}},23560:(e,t,n)=>{var r=n(44239),i=n(13218);e.exports=function(e){if(!i(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},41780:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},56688:(e,t,n)=>{var r=n(25588),i=n(7518),o=n(31167),a=o&&o.isMap,s=a?i(a):r;e.exports=s},13218:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},37005:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},68630:(e,t,n)=>{var r=n(44239),i=n(85924),o=n(37005),a=Function.prototype,s=Object.prototype,l=a.toString,u=s.hasOwnProperty,c=l.call(Object);e.exports=function(e){if(!o(e)||"[object Object]"!=r(e))return!1;var t=i(e);if(null===t)return!0;var n=u.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&l.call(n)==c}},72928:(e,t,n)=>{var r=n(29221),i=n(7518),o=n(31167),a=o&&o.isSet,s=a?i(a):r;e.exports=s},47037:(e,t,n)=>{var r=n(44239),i=n(1469),o=n(37005);e.exports=function(e){return"string"==typeof e||!i(e)&&o(e)&&"[object String]"==r(e)}},33448:(e,t,n)=>{var r=n(44239),i=n(37005);e.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==r(e)}},36719:(e,t,n)=>{var r=n(38749),i=n(7518),o=n(31167),a=o&&o.isTypedArray,s=a?i(a):r;e.exports=s},52353:e=>{e.exports=function(e){return void 0===e}},3674:(e,t,n)=>{var r=n(14636),i=n(280),o=n(98612);e.exports=function(e){return o(e)?r(e):i(e)}},81704:(e,t,n)=>{var r=n(14636),i=n(10313),o=n(98612);e.exports=function(e){return o(e)?r(e,!0):i(e)}},10928:e=>{e.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},35161:(e,t,n)=>{var r=n(29932),i=n(67206),o=n(69199),a=n(1469);e.exports=function(e,t){return(a(e)?r:o)(e,i(t,3))}},66604:(e,t,n)=>{var r=n(89465),i=n(47816),o=n(67206);e.exports=function(e,t){var n={};return t=o(t,3),i(e,(function(e,i,o){r(n,i,t(e,i,o))})),n}},6162:(e,t,n)=>{var r=n(56029),i=n(53325),o=n(6557);e.exports=function(e){return e&&e.length?r(e,o,i):void 0}},88306:(e,t,n)=>{var r=n(83369);function i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(i.Cache||r),n}i.Cache=r,e.exports=i},82492:(e,t,n)=>{var r=n(42980),i=n(21463)((function(e,t,n){r(e,t,n)}));e.exports=i},53632:(e,t,n)=>{var r=n(56029),i=n(70433),o=n(6557);e.exports=function(e){return e&&e.length?r(e,o,i):void 0}},22762:(e,t,n)=>{var r=n(56029),i=n(67206),o=n(70433);e.exports=function(e,t){return e&&e.length?r(e,i(t,2),o):void 0}},50308:e=>{e.exports=function(){}},7771:(e,t,n)=>{var r=n(55639);e.exports=function(){return r.Date.now()}},78718:(e,t,n)=>{var r=n(25970),i=n(99021)((function(e,t){return null==e?{}:r(e,t)}));e.exports=i},39601:(e,t,n)=>{var r=n(40371),i=n(79152),o=n(15403),a=n(40327);e.exports=function(e){return o(e)?r(a(e)):i(e)}},96026:(e,t,n)=>{var r=n(47445)();e.exports=r},54061:(e,t,n)=>{var r=n(62663),i=n(89881),o=n(67206),a=n(10107),s=n(1469);e.exports=function(e,t,n){var l=s(e)?r:a,u=arguments.length<3;return l(e,o(t,4),n,u,i)}},84238:(e,t,n)=>{var r=n(280),i=n(64160),o=n(98612),a=n(47037),s=n(88016);e.exports=function(e){if(null==e)return 0;if(o(e))return a(e)?s(e):e.length;var t=i(e);return"[object Map]"==t||"[object Set]"==t?e.size:r(e).length}},89734:(e,t,n)=>{var r=n(21078),i=n(82689),o=n(5976),a=n(16612),s=o((function(e,t){if(null==e)return[];var n=t.length;return n>1&&a(e,t[0],t[1])?t=[]:n>2&&a(t[0],t[1],t[2])&&(t=[t[0]]),i(e,r(t,1),[])}));e.exports=s},70479:e=>{e.exports=function(){return[]}},95062:e=>{e.exports=function(){return!1}},18601:(e,t,n)=>{var r=n(14841),i=1/0;e.exports=function(e){return e?(e=r(e))===i||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}},40554:(e,t,n)=>{var r=n(18601);e.exports=function(e){var t=r(e),n=t%1;return t==t?n?t-n:t:0}},14841:(e,t,n)=>{var r=n(27561),i=n(13218),o=n(33448),a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,u=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(o(e))return NaN;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=s.test(e);return n||l.test(e)?u(e.slice(2),n?2:8):a.test(e)?NaN:+e}},59881:(e,t,n)=>{var r=n(98363),i=n(81704);e.exports=function(e){return r(e,i(e))}},79833:(e,t,n)=>{var r=n(80531);e.exports=function(e){return null==e?"":r(e)}},68718:(e,t,n)=>{var r=n(77412),i=n(3118),o=n(47816),a=n(67206),s=n(85924),l=n(1469),u=n(44144),c=n(23560),d=n(13218),h=n(36719);e.exports=function(e,t,n){var f=l(e),p=f||u(e)||h(e);if(t=a(t,4),null==n){var m=e&&e.constructor;n=p?f?new m:[]:d(e)&&c(m)?i(s(e)):{}}return(p?r:o)(e,(function(e,r,i){return t(n,e,r,i)})),n}},93386:(e,t,n)=>{var r=n(21078),i=n(5976),o=n(45652),a=n(29246),s=i((function(e){return o(r(e,1,a,!0))}));e.exports=s},73955:(e,t,n)=>{var r=n(79833),i=0;e.exports=function(e){var t=++i;return r(e)+t}},52628:(e,t,n)=>{var r=n(47415),i=n(3674);e.exports=function(e){return null==e?[]:r(e,i(e))}},7287:(e,t,n)=>{var r=n(34865),i=n(1757);e.exports=function(e,t){return i(e||[],t||[],r)}},42786:function(e,t,n){!function(e){"use strict";e.defineLocale("af",{months:"Januarie_Februarie_Maart_April_Mei_Junie_Julie_Augustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mrt_Apr_Mei_Jun_Jul_Aug_Sep_Okt_Nov_Des".split("_"),weekdays:"Sondag_Maandag_Dinsdag_Woensdag_Donderdag_Vrydag_Saterdag".split("_"),weekdaysShort:"Son_Maa_Din_Woe_Don_Vry_Sat".split("_"),weekdaysMin:"So_Ma_Di_Wo_Do_Vr_Sa".split("_"),meridiemParse:/vm|nm/i,isPM:function(e){return/^nm$/i.test(e)},meridiem:function(e,t,n){return e<12?n?"vm":"VM":n?"nm":"NM"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Vandag om] LT",nextDay:"[Mre om] LT",nextWeek:"dddd [om] LT",lastDay:"[Gister om] LT",lastWeek:"[Laas] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oor %s",past:"%s gelede",s:"'n paar sekondes",ss:"%d sekondes",m:"'n minuut",mm:"%d minute",h:"'n uur",hh:"%d ure",d:"'n dag",dd:"%d dae",M:"'n maand",MM:"%d maande",y:"'n jaar",yy:"%d jaar"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||e>=20?"ste":"de")},week:{dow:1,doy:4}})}(n(30381))},14130:function(e,t,n){!function(e){"use strict";var t=function(e){return 0===e?0:1===e?1:2===e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5},n={s:["  "," ",["",""],"%d ","%d ","%d "],m:["  "," ",["",""],"%d ","%d ","%d "],h:["  "," ",["",""],"%d ","%d ","%d "],d:["  "," ",["",""],"%d ","%d ","%d "],M:["  "," ",["",""],"%d ","%d ","%d "],y:["  "," ",["",""],"%d ","%d ","%d "]},r=function(e){return function(r,i,o,a){var s=t(r),l=n[e][t(r)];return 2===s&&(l=l[i?0:1]),l.replace(/%d/i,r)}},i=["","","","","","","","","","","",""];e.defineLocale("ar-dz",{months:i,monthsShort:i,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/M/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,t,n){return e<12?"":""},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:r("s"),ss:r("s"),m:r("m"),mm:r("m"),h:r("h"),hh:r("h"),d:r("d"),dd:r("d"),M:r("M"),MM:r("M"),y:r("y"),yy:r("y")},postformat:function(e){return e.replace(/,/g,"")},week:{dow:0,doy:4}})}(n(30381))},96135:function(e,t,n){!function(e){"use strict";e.defineLocale("ar-kw",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},week:{dow:0,doy:12}})}(n(30381))},56440:function(e,t,n){!function(e){"use strict";var t={1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",0:"0"},n=function(e){return 0===e?0:1===e?1:2===e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5},r={s:["  "," ",["",""],"%d ","%d ","%d "],m:["  "," ",["",""],"%d ","%d ","%d "],h:["  "," ",["",""],"%d ","%d ","%d "],d:["  "," ",["",""],"%d ","%d ","%d "],M:["  "," ",["",""],"%d ","%d ","%d "],y:["  "," ",["",""],"%d ","%d ","%d "]},i=function(e){return function(t,i,o,a){var s=n(t),l=r[e][n(t)];return 2===s&&(l=l[i?0:1]),l.replace(/%d/i,t)}},o=["","","","","","","","","","","",""];e.defineLocale("ar-ly",{months:o,monthsShort:o,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/M/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,t,n){return e<12?"":""},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:i("s"),ss:i("s"),m:i("m"),mm:i("m"),h:i("h"),hh:i("h"),d:i("d"),dd:i("d"),M:i("M"),MM:i("M"),y:i("y"),yy:i("y")},preparse:function(e){return e.replace(//g,",")},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]})).replace(/,/g,"")},week:{dow:6,doy:12}})}(n(30381))},47702:function(e,t,n){!function(e){"use strict";e.defineLocale("ar-ma",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},week:{dow:1,doy:4}})}(n(30381))},16040:function(e,t,n){!function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};e.defineLocale("ar-sa",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,t,n){return e<12?"":""},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},preparse:function(e){return e.replace(/[]/g,(function(e){return n[e]})).replace(//g,",")},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]})).replace(/,/g,"")},week:{dow:0,doy:6}})}(n(30381))},37100:function(e,t,n){!function(e){"use strict";e.defineLocale("ar-tn",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},week:{dow:1,doy:4}})}(n(30381))},30867:function(e,t,n){!function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"},r=function(e){return 0===e?0:1===e?1:2===e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5},i={s:["  "," ",["",""],"%d ","%d ","%d "],m:["  "," ",["",""],"%d ","%d ","%d "],h:["  "," ",["",""],"%d ","%d ","%d "],d:["  "," ",["",""],"%d ","%d ","%d "],M:["  "," ",["",""],"%d ","%d ","%d "],y:["  "," ",["",""],"%d ","%d ","%d "]},o=function(e){return function(t,n,o,a){var s=r(t),l=i[e][r(t)];return 2===s&&(l=l[n?0:1]),l.replace(/%d/i,t)}},a=["","","","","","","","","","","",""];e.defineLocale("ar",{months:a,monthsShort:a,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/M/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,t,n){return e<12?"":""},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:o("s"),ss:o("s"),m:o("m"),mm:o("m"),h:o("h"),hh:o("h"),d:o("d"),dd:o("d"),M:o("M"),MM:o("M"),y:o("y"),yy:o("y")},preparse:function(e){return e.replace(/[]/g,(function(e){return n[e]})).replace(//g,",")},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]})).replace(/,/g,"")},week:{dow:6,doy:12}})}(n(30381))},31083:function(e,t,n){!function(e){"use strict";var t={1:"-inci",5:"-inci",8:"-inci",70:"-inci",80:"-inci",2:"-nci",7:"-nci",20:"-nci",50:"-nci",3:"-nc",4:"-nc",100:"-nc",6:"-nc",9:"-uncu",10:"-uncu",30:"-uncu",60:"-nc",90:"-nc"};e.defineLocale("az",{months:"yanvar_fevral_mart_aprel_may_iyun_iyul_avqust_sentyabr_oktyabr_noyabr_dekabr".split("_"),monthsShort:"yan_fev_mar_apr_may_iyn_iyl_avq_sen_okt_noy_dek".split("_"),weekdays:"Bazar_Bazar ertsi_rnb axam_rnb_Cm axam_Cm_nb".split("_"),weekdaysShort:"Baz_BzE_Ax_r_CAx_Cm_n".split("_"),weekdaysMin:"Bz_BE_A__CA_C_".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugn saat] LT",nextDay:"[sabah saat] LT",nextWeek:"[gln hft] dddd [saat] LT",lastDay:"[dnn] LT",lastWeek:"[ken hft] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s vvl",s:"bir ne saniy",ss:"%d saniy",m:"bir dqiq",mm:"%d dqiq",h:"bir saat",hh:"%d saat",d:"bir gn",dd:"%d gn",M:"bir ay",MM:"%d ay",y:"bir il",yy:"%d il"},meridiemParse:/gec|shr|gndz|axam/,isPM:function(e){return/^(gndz|axam)$/.test(e)},meridiem:function(e,t,n){return e<4?"gec":e<12?"shr":e<17?"gndz":"axam"},dayOfMonthOrdinalParse:/\d{1,2}-(nc|inci|nci|nc|nc|uncu)/,ordinal:function(e){if(0===e)return e+"-nc";var n=e%10,r=e%100-n,i=e>=100?100:null;return e+(t[n]||t[r]||t[i])},week:{dow:1,doy:7}})}(n(30381))},9808:function(e,t,n){!function(e){"use strict";function t(e,t){var n=e.split("_");return t%10==1&&t%100!=11?n[0]:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?n[1]:n[2]}function n(e,n,r){return"m"===r?n?"":"":"h"===r?n?"":"":e+" "+t({ss:n?"__":"__",mm:n?"__":"__",hh:n?"__":"__",dd:"__",MM:"__",yy:"__"}[r],+e)}e.defineLocale("be",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:"___________".split("_"),weekdays:{format:"______".split("_"),standalone:"______".split("_"),isFormat:/\[ ?[] ?(?:|)? ?\] ?dddd/},weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., HH:mm",LLLL:"dddd, D MMMM YYYY ., HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",lastDay:"[ ] LT",nextWeek:function(){return"[] dddd [] LT"},lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return"[ ] dddd [] LT";case 1:case 2:case 4:return"[ ] dddd [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",m:n,mm:n,h:n,hh:n,d:"",dd:n,M:"",MM:n,y:"",yy:n},meridiemParse:/|||/,isPM:function(e){return/^(|)$/.test(e)},meridiem:function(e,t,n){return e<4?"":e<12?"":e<17?"":""},dayOfMonthOrdinalParse:/\d{1,2}-(||)/,ordinal:function(e,t){switch(t){case"M":case"d":case"DDD":case"w":case"W":return e%10!=2&&e%10!=3||e%100==12||e%100==13?e+"-":e+"-";case"D":return e+"-";default:return e}},week:{dow:1,doy:7}})}(n(30381))},68338:function(e,t,n){!function(e){"use strict";e.defineLocale("bg",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[] dddd [] LT";case 1:case 2:case 4:case 5:return"[] dddd [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",w:"",ww:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}-(|||||)/,ordinal:function(e){var t=e%10,n=e%100;return 0===e?e+"-":0===n?e+"-":n>10&&n<20?e+"-":1===t?e+"-":2===t?e+"-":7===t||8===t?e+"-":e+"-"},week:{dow:1,doy:7}})}(n(30381))},67438:function(e,t,n){!function(e){"use strict";e.defineLocale("bm",{months:"Zanwuyekalo_Fewuruyekalo_Marisikalo_Awirilikalo_Mkalo_Zuwnkalo_Zuluyekalo_Utikalo_Stanburukalo_kutburukalo_Nowanburukalo_Desanburukalo".split("_"),monthsShort:"Zan_Few_Mar_Awi_M_Zuw_Zul_Uti_St_ku_Now_Des".split("_"),weekdays:"Kari_Ntnn_Tarata_Araba_Alamisa_Juma_Sibiri".split("_"),weekdaysShort:"Kar_Nt_Tar_Ara_Ala_Jum_Sib".split("_"),weekdaysMin:"Ka_Nt_Ta_Ar_Al_Ju_Si".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"MMMM [tile] D [san] YYYY",LLL:"MMMM [tile] D [san] YYYY [lr] HH:mm",LLLL:"dddd MMMM [tile] D [san] YYYY [lr] HH:mm"},calendar:{sameDay:"[Bi lr] LT",nextDay:"[Sini lr] LT",nextWeek:"dddd [don lr] LT",lastDay:"[Kunu lr] LT",lastWeek:"dddd [tmnen lr] LT",sameElse:"L"},relativeTime:{future:"%s kn",past:"a b %s b",s:"sanga dama dama",ss:"sekondi %d",m:"miniti kelen",mm:"miniti %d",h:"lr kelen",hh:"lr %d",d:"tile kelen",dd:"tile %d",M:"kalo kelen",MM:"kalo %d",y:"san kelen",yy:"san %d"},week:{dow:1,doy:4}})}(n(30381))},76225:function(e,t,n){!function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};e.defineLocale("bn-bd",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(/[]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/||||||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t?e<4?e:e+12:""===t||""===t?e:""===t?e>=3?e:e+12:""===t||""===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"":e<6?"":e<12?"":e<15?"":e<18?"":e<20?"":""},week:{dow:0,doy:6}})}(n(30381))},8905:function(e,t,n){!function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};e.defineLocale("bn",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(/[]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/||||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t&&e>=4||""===t&&e<5||""===t?e+12:e},meridiem:function(e,t,n){return e<4?"":e<10?"":e<17?"":e<20?"":""},week:{dow:0,doy:6}})}(n(30381))},11560:function(e,t,n){!function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};e.defineLocale("bo",{months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),monthsShortRegex:/^(\d{1,2})/,monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[], LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},preparse:function(e){return e.replace(/[]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/||||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t&&e>=4||""===t&&e<5||""===t?e+12:e},meridiem:function(e,t,n){return e<4?"":e<10?"":e<17?"":e<20?"":""},week:{dow:0,doy:6}})}(n(30381))},1278:function(e,t,n){!function(e){"use strict";function t(e,t,n){return e+" "+i({mm:"munutenn",MM:"miz",dd:"devezh"}[n],e)}function n(e){switch(r(e)){case 1:case 3:case 4:case 5:case 9:return e+" bloaz";default:return e+" vloaz"}}function r(e){return e>9?r(e%10):e}function i(e,t){return 2===t?o(e):e}function o(e){var t={m:"v",b:"v",d:"z"};return void 0===t[e.charAt(0)]?e:t[e.charAt(0)]+e.substring(1)}var a=[/^gen/i,/^c[\']hwe/i,/^meu/i,/^ebr/i,/^mae/i,/^(mez|eve)/i,/^gou/i,/^eos/i,/^gwe/i,/^her/i,/^du/i,/^ker/i],s=/^(genver|c[\']hwevrer|meurzh|ebrel|mae|mezheven|gouere|eost|gwengolo|here|du|kerzu|gen|c[\']hwe|meu|ebr|mae|eve|gou|eos|gwe|her|du|ker)/i,l=/^(genver|c[\']hwevrer|meurzh|ebrel|mae|mezheven|gouere|eost|gwengolo|here|du|kerzu)/i,u=/^(gen|c[\']hwe|meu|ebr|mae|eve|gou|eos|gwe|her|du|ker)/i,c=[/^sul/i,/^lun/i,/^meurzh/i,/^merc[\']her/i,/^yaou/i,/^gwener/i,/^sadorn/i],d=[/^Sul/i,/^Lun/i,/^Meu/i,/^Mer/i,/^Yao/i,/^Gwe/i,/^Sad/i],h=[/^Su/i,/^Lu/i,/^Me([^r]|$)/i,/^Mer/i,/^Ya/i,/^Gw/i,/^Sa/i];e.defineLocale("br",{months:"Genver_Chwevrer_Meurzh_Ebrel_Mae_Mezheven_Gouere_Eost_Gwengolo_Here_Du_Kerzu".split("_"),monthsShort:"Gen_Chwe_Meu_Ebr_Mae_Eve_Gou_Eos_Gwe_Her_Du_Ker".split("_"),weekdays:"Sul_Lun_Meurzh_Mercher_Yaou_Gwener_Sadorn".split("_"),weekdaysShort:"Sul_Lun_Meu_Mer_Yao_Gwe_Sad".split("_"),weekdaysMin:"Su_Lu_Me_Mer_Ya_Gw_Sa".split("_"),weekdaysParse:h,fullWeekdaysParse:c,shortWeekdaysParse:d,minWeekdaysParse:h,monthsRegex:s,monthsShortRegex:s,monthsStrictRegex:l,monthsShortStrictRegex:u,monthsParse:a,longMonthsParse:a,shortMonthsParse:a,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [a viz] MMMM YYYY",LLL:"D [a viz] MMMM YYYY HH:mm",LLLL:"dddd, D [a viz] MMMM YYYY HH:mm"},calendar:{sameDay:"[Hiziv da] LT",nextDay:"[Warchoazh da] LT",nextWeek:"dddd [da] LT",lastDay:"[Dech da] LT",lastWeek:"dddd [paset da] LT",sameElse:"L"},relativeTime:{future:"a-benn %s",past:"%s zo",s:"un nebeud segondenno",ss:"%d eilenn",m:"ur vunutenn",mm:t,h:"un eur",hh:"%d eur",d:"un devezh",dd:t,M:"ur miz",MM:t,y:"ur bloaz",yy:n},dayOfMonthOrdinalParse:/\d{1,2}(a|vet)/,ordinal:function(e){return e+(1===e?"a":"vet")},week:{dow:1,doy:4},meridiemParse:/a.m.|g.m./,isPM:function(e){return"g.m."===e},meridiem:function(e,t,n){return e<12?"a.m.":"g.m."}})}(n(30381))},80622:function(e,t,n){!function(e){"use strict";function t(e,t,n){var r=e+" ";switch(n){case"ss":return r+=1===e?"sekunda":2===e||3===e||4===e?"sekunde":"sekundi";case"m":return t?"jedna minuta":"jedne minute";case"mm":return r+=1===e?"minuta":2===e||3===e||4===e?"minute":"minuta";case"h":return t?"jedan sat":"jednog sata";case"hh":return r+=1===e?"sat":2===e||3===e||4===e?"sata":"sati";case"dd":return r+=1===e?"dan":"dana";case"MM":return r+=1===e?"mjesec":2===e||3===e||4===e?"mjeseca":"mjeseci";case"yy":return r+=1===e?"godina":2===e||3===e||4===e?"godine":"godina"}}e.defineLocale("bs",{months:"januar_februar_mart_april_maj_juni_juli_august_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._aug._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_etvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._et._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_e_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[prolu] dddd [u] LT";case 6:return"[prole] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[proli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",ss:t,m:t,mm:t,h:t,hh:t,d:"dan",dd:t,M:"mjesec",MM:t,y:"godinu",yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(30381))},2468:function(e,t,n){!function(e){"use strict";e.defineLocale("ca",{months:{standalone:"gener_febrer_mar_abril_maig_juny_juliol_agost_setembre_octubre_novembre_desembre".split("_"),format:"de gener_de febrer_de mar_d'abril_de maig_de juny_de juliol_d'agost_de setembre_d'octubre_de novembre_de desembre".split("_"),isFormat:/D[oD]?(\s)+MMMM/},monthsShort:"gen._febr._mar_abr._maig_juny_jul._ag._set._oct._nov._des.".split("_"),monthsParseExact:!0,weekdays:"diumenge_dilluns_dimarts_dimecres_dijous_divendres_dissabte".split("_"),weekdaysShort:"dg._dl._dt._dc._dj._dv._ds.".split("_"),weekdaysMin:"dg_dl_dt_dc_dj_dv_ds".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [de] YYYY",ll:"D MMM YYYY",LLL:"D MMMM [de] YYYY [a les] H:mm",lll:"D MMM YYYY, H:mm",LLLL:"dddd D MMMM [de] YYYY [a les] H:mm",llll:"ddd D MMM YYYY, H:mm"},calendar:{sameDay:function(){return"[avui a "+(1!==this.hours()?"les":"la")+"] LT"},nextDay:function(){return"[dem a "+(1!==this.hours()?"les":"la")+"] LT"},nextWeek:function(){return"dddd [a "+(1!==this.hours()?"les":"la")+"] LT"},lastDay:function(){return"[ahir a "+(1!==this.hours()?"les":"la")+"] LT"},lastWeek:function(){return"[el] dddd [passat a "+(1!==this.hours()?"les":"la")+"] LT"},sameElse:"L"},relativeTime:{future:"d'aqu %s",past:"fa %s",s:"uns segons",ss:"%d segons",m:"un minut",mm:"%d minuts",h:"una hora",hh:"%d hores",d:"un dia",dd:"%d dies",M:"un mes",MM:"%d mesos",y:"un any",yy:"%d anys"},dayOfMonthOrdinalParse:/\d{1,2}(r|n|t||a)/,ordinal:function(e,t){var n=1===e?"r":2===e?"n":3===e?"r":4===e?"t":"";return"w"!==t&&"W"!==t||(n="a"),e+n},week:{dow:1,doy:4}})}(n(30381))},5822:function(e,t,n){!function(e){"use strict";var t="leden_nor_bezen_duben_kvten_erven_ervenec_srpen_z_jen_listopad_prosinec".split("_"),n="led_no_be_dub_kv_vn_vc_srp_z_j_lis_pro".split("_"),r=[/^led/i,/^no/i,/^be/i,/^dub/i,/^kv/i,/^(vn|erven$|ervna)/i,/^(vc|ervenec|ervence)/i,/^srp/i,/^z/i,/^j/i,/^lis/i,/^pro/i],i=/^(leden|nor|bezen|duben|kvten|ervenec|ervence|erven|ervna|srpen|z|jen|listopad|prosinec|led|no|be|dub|kv|vn|vc|srp|z|j|lis|pro)/i;function o(e){return e>1&&e<5&&1!=~~(e/10)}function a(e,t,n,r){var i=e+" ";switch(n){case"s":return t||r?"pr sekund":"pr sekundami";case"ss":return t||r?i+(o(e)?"sekundy":"sekund"):i+"sekundami";case"m":return t?"minuta":r?"minutu":"minutou";case"mm":return t||r?i+(o(e)?"minuty":"minut"):i+"minutami";case"h":return t?"hodina":r?"hodinu":"hodinou";case"hh":return t||r?i+(o(e)?"hodiny":"hodin"):i+"hodinami";case"d":return t||r?"den":"dnem";case"dd":return t||r?i+(o(e)?"dny":"dn"):i+"dny";case"M":return t||r?"msc":"mscem";case"MM":return t||r?i+(o(e)?"msce":"msc"):i+"msci";case"y":return t||r?"rok":"rokem";case"yy":return t||r?i+(o(e)?"roky":"let"):i+"lety"}}e.defineLocale("cs",{months:t,monthsShort:n,monthsRegex:i,monthsShortRegex:i,monthsStrictRegex:/^(leden|ledna|nora|nor|bezen|bezna|duben|dubna|kvten|kvtna|ervenec|ervence|erven|ervna|srpen|srpna|z|jen|jna|listopadu|listopad|prosinec|prosince)/i,monthsShortStrictRegex:/^(led|no|be|dub|kv|vn|vc|srp|z|j|lis|pro)/i,monthsParse:r,longMonthsParse:r,shortMonthsParse:r,weekdays:"nedle_pondl_ter_steda_tvrtek_ptek_sobota".split("_"),weekdaysShort:"ne_po_t_st_t_p_so".split("_"),weekdaysMin:"ne_po_t_st_t_p_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm",l:"D. M. YYYY"},calendar:{sameDay:"[dnes v] LT",nextDay:"[ztra v] LT",nextWeek:function(){switch(this.day()){case 0:return"[v nedli v] LT";case 1:case 2:return"[v] dddd [v] LT";case 3:return"[ve stedu v] LT";case 4:return"[ve tvrtek v] LT";case 5:return"[v ptek v] LT";case 6:return"[v sobotu v] LT"}},lastDay:"[vera v] LT",lastWeek:function(){switch(this.day()){case 0:return"[minulou nedli v] LT";case 1:case 2:return"[minul] dddd [v] LT";case 3:return"[minulou stedu v] LT";case 4:case 5:return"[minul] dddd [v] LT";case 6:return"[minulou sobotu v] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"ped %s",s:a,ss:a,m:a,mm:a,h:a,hh:a,d:a,dd:a,M:a,MM:a,y:a,yy:a},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(30381))},50877:function(e,t,n){!function(e){"use strict";e.defineLocale("cv",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"YYYY [] MMMM [] D[-]",LLL:"YYYY [] MMMM [] D[-], HH:mm",LLLL:"dddd, YYYY [] MMMM [] D[-], HH:mm"},calendar:{sameDay:"[] LT []",nextDay:"[] LT []",lastDay:"[] LT []",nextWeek:"[] dddd LT []",lastWeek:"[] dddd LT []",sameElse:"L"},relativeTime:{future:function(e){return e+(/$/i.exec(e)?"":/$/i.exec(e)?"":"")},past:"%s ",s:"- ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}-/,ordinal:"%d-",week:{dow:1,doy:7}})}(n(30381))},47373:function(e,t,n){!function(e){"use strict";e.defineLocale("cy",{months:"Ionawr_Chwefror_Mawrth_Ebrill_Mai_Mehefin_Gorffennaf_Awst_Medi_Hydref_Tachwedd_Rhagfyr".split("_"),monthsShort:"Ion_Chwe_Maw_Ebr_Mai_Meh_Gor_Aws_Med_Hyd_Tach_Rhag".split("_"),weekdays:"Dydd Sul_Dydd Llun_Dydd Mawrth_Dydd Mercher_Dydd Iau_Dydd Gwener_Dydd Sadwrn".split("_"),weekdaysShort:"Sul_Llun_Maw_Mer_Iau_Gwe_Sad".split("_"),weekdaysMin:"Su_Ll_Ma_Me_Ia_Gw_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Heddiw am] LT",nextDay:"[Yfory am] LT",nextWeek:"dddd [am] LT",lastDay:"[Ddoe am] LT",lastWeek:"dddd [diwethaf am] LT",sameElse:"L"},relativeTime:{future:"mewn %s",past:"%s yn l",s:"ychydig eiliadau",ss:"%d eiliad",m:"munud",mm:"%d munud",h:"awr",hh:"%d awr",d:"diwrnod",dd:"%d diwrnod",M:"mis",MM:"%d mis",y:"blwyddyn",yy:"%d flynedd"},dayOfMonthOrdinalParse:/\d{1,2}(fed|ain|af|il|ydd|ed|eg)/,ordinal:function(e){var t="";return e>20?t=40===e||50===e||60===e||80===e||100===e?"fed":"ain":e>0&&(t=["","af","il","ydd","ydd","ed","ed","ed","fed","fed","fed","eg","fed","eg","eg","fed","eg","eg","fed","eg","fed"][e]),e+t},week:{dow:1,doy:4}})}(n(30381))},24780:function(e,t,n){!function(e){"use strict";e.defineLocale("da",{months:"januar_februar_marts_april_maj_juni_juli_august_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"sndag_mandag_tirsdag_onsdag_torsdag_fredag_lrdag".split("_"),weekdaysShort:"sn_man_tir_ons_tor_fre_lr".split("_"),weekdaysMin:"s_ma_ti_on_to_fr_l".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd [d.] D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[i dag kl.] LT",nextDay:"[i morgen kl.] LT",nextWeek:"p dddd [kl.] LT",lastDay:"[i gr kl.] LT",lastWeek:"[i] dddd[s kl.] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"f sekunder",ss:"%d sekunder",m:"et minut",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dage",M:"en mned",MM:"%d mneder",y:"et r",yy:"%d r"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(30381))},60217:function(e,t,n){!function(e){"use strict";function t(e,t,n,r){var i={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],w:["eine Woche","einer Woche"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return t?i[n][0]:i[n][1]}e.defineLocale("de-at",{months:"Jnner_Februar_Mrz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jn._Feb._Mrz_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",ss:"%d Sekunden",m:t,mm:"%d Minuten",h:t,hh:"%d Stunden",d:t,dd:t,w:t,ww:"%d Wochen",M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(30381))},60894:function(e,t,n){!function(e){"use strict";function t(e,t,n,r){var i={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],w:["eine Woche","einer Woche"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return t?i[n][0]:i[n][1]}e.defineLocale("de-ch",{months:"Januar_Februar_Mrz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Feb._Mrz_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",ss:"%d Sekunden",m:t,mm:"%d Minuten",h:t,hh:"%d Stunden",d:t,dd:t,w:t,ww:"%d Wochen",M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(30381))},59740:function(e,t,n){!function(e){"use strict";function t(e,t,n,r){var i={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],w:["eine Woche","einer Woche"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return t?i[n][0]:i[n][1]}e.defineLocale("de",{months:"Januar_Februar_Mrz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Feb._Mrz_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",ss:"%d Sekunden",m:t,mm:"%d Minuten",h:t,hh:"%d Stunden",d:t,dd:t,w:t,ww:"%d Wochen",M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(30381))},5300:function(e,t,n){!function(e){"use strict";var t=["","","","","","","","","","","",""],n=["","","","","","",""];e.defineLocale("dv",{months:t,monthsShort:t,weekdays:n,weekdaysShort:n,weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/M/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,t,n){return e<12?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd LT",lastDay:"[] LT",lastWeek:"[] dddd LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",ss:"d% ",m:"",mm:" %d",h:"",hh:" %d",d:"",dd:" %d",M:"",MM:" %d",y:"",yy:" %d"},preparse:function(e){return e.replace(//g,",")},postformat:function(e){return e.replace(/,/g,"")},week:{dow:7,doy:12}})}(n(30381))},50837:function(e,t,n){!function(e){"use strict";function t(e){return"undefined"!=typeof Function&&e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}e.defineLocale("el",{monthsNominativeEl:"___________".split("_"),monthsGenitiveEl:"___________".split("_"),months:function(e,t){return e?"string"==typeof t&&/D/.test(t.substring(0,t.indexOf("MMMM")))?this._monthsGenitiveEl[e.month()]:this._monthsNominativeEl[e.month()]:this._monthsNominativeEl},monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),meridiem:function(e,t,n){return e>11?n?"":"":n?"":""},isPM:function(e){return""===(e+"").toLowerCase()[0]},meridiemParse:/[]\.??\.?/i,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendarEl:{sameDay:"[ {}] LT",nextDay:"[ {}] LT",nextWeek:"dddd [{}] LT",lastDay:"[ {}] LT",lastWeek:function(){return 6===this.day()?"[ ] dddd [{}] LT":"[ ] dddd [{}] LT"},sameElse:"L"},calendar:function(e,n){var r=this._calendarEl[e],i=n&&n.hours();return t(r)&&(r=r.apply(n)),r.replace("{}",i%12==1?"":"")},relativeTime:{future:" %s",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(n(30381))},78348:function(e,t,n){!function(e){"use strict";e.defineLocale("en-au",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:0,doy:4}})}(n(30381))},77925:function(e,t,n){!function(e){"use strict";e.defineLocale("en-ca",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"YYYY-MM-DD",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}})}(n(30381))},22243:function(e,t,n){!function(e){"use strict";e.defineLocale("en-gb",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}(n(30381))},46436:function(e,t,n){!function(e){"use strict";e.defineLocale("en-ie",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}(n(30381))},47207:function(e,t,n){!function(e){"use strict";e.defineLocale("en-il",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}})}(n(30381))},44175:function(e,t,n){!function(e){"use strict";e.defineLocale("en-in",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:0,doy:6}})}(n(30381))},76319:function(e,t,n){!function(e){"use strict";e.defineLocale("en-nz",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}(n(30381))},31662:function(e,t,n){!function(e){"use strict";e.defineLocale("en-sg",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}(n(30381))},92915:function(e,t,n){!function(e){"use strict";e.defineLocale("eo",{months:"januaro_februaro_marto_aprilo_majo_junio_julio_agusto_septembro_oktobro_novembro_decembro".split("_"),monthsShort:"jan_feb_mart_apr_maj_jun_jul_ag_sept_okt_nov_dec".split("_"),weekdays:"dimano_lundo_mardo_merkredo_ado_vendredo_sabato".split("_"),weekdaysShort:"dim_lun_mard_merk_a_ven_sab".split("_"),weekdaysMin:"di_lu_ma_me_a_ve_sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"[la] D[-an de] MMMM, YYYY",LLL:"[la] D[-an de] MMMM, YYYY HH:mm",LLLL:"dddd[n], [la] D[-an de] MMMM, YYYY HH:mm",llll:"ddd, [la] D[-an de] MMM, YYYY HH:mm"},meridiemParse:/[ap]\.t\.m/i,isPM:function(e){return"p"===e.charAt(0).toLowerCase()},meridiem:function(e,t,n){return e>11?n?"p.t.m.":"P.T.M.":n?"a.t.m.":"A.T.M."},calendar:{sameDay:"[Hodia je] LT",nextDay:"[Morga je] LT",nextWeek:"dddd[n je] LT",lastDay:"[Hiera je] LT",lastWeek:"[pasintan] dddd[n je] LT",sameElse:"L"},relativeTime:{future:"post %s",past:"anta %s",s:"kelkaj sekundoj",ss:"%d sekundoj",m:"unu minuto",mm:"%d minutoj",h:"unu horo",hh:"%d horoj",d:"unu tago",dd:"%d tagoj",M:"unu monato",MM:"%d monatoj",y:"unu jaro",yy:"%d jaroj"},dayOfMonthOrdinalParse:/\d{1,2}a/,ordinal:"%da",week:{dow:1,doy:7}})}(n(30381))},55251:function(e,t,n){!function(e){"use strict";var t="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),r=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],i=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;e.defineLocale("es-do",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,r){return e?/-MMM-/.test(r)?n[e.month()]:t[e.month()]:t},monthsRegex:i,monthsShortRegex:i,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:r,longMonthsParse:r,shortMonthsParse:r,weekdays:"domingo_lunes_martes_mircoles_jueves_viernes_sbado".split("_"),weekdaysShort:"dom._lun._mar._mi._jue._vie._sb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY h:mm A",LLLL:"dddd, D [de] MMMM [de] YYYY h:mm A"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[maana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un da",dd:"%d das",w:"una semana",ww:"%d semanas",M:"un mes",MM:"%d meses",y:"un ao",yy:"%d aos"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(n(30381))},96112:function(e,t,n){!function(e){"use strict";var t="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),r=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],i=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;e.defineLocale("es-mx",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,r){return e?/-MMM-/.test(r)?n[e.month()]:t[e.month()]:t},monthsRegex:i,monthsShortRegex:i,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:r,longMonthsParse:r,shortMonthsParse:r,weekdays:"domingo_lunes_martes_mircoles_jueves_viernes_sbado".split("_"),weekdaysShort:"dom._lun._mar._mi._jue._vie._sb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[maana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un da",dd:"%d das",w:"una semana",ww:"%d semanas",M:"un mes",MM:"%d meses",y:"un ao",yy:"%d aos"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:0,doy:4},invalidDate:"Fecha invlida"})}(n(30381))},71146:function(e,t,n){!function(e){"use strict";var t="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),r=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],i=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;e.defineLocale("es-us",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,r){return e?/-MMM-/.test(r)?n[e.month()]:t[e.month()]:t},monthsRegex:i,monthsShortRegex:i,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:r,longMonthsParse:r,shortMonthsParse:r,weekdays:"domingo_lunes_martes_mircoles_jueves_viernes_sbado".split("_"),weekdaysShort:"dom._lun._mar._mi._jue._vie._sb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"MM/DD/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY h:mm A",LLLL:"dddd, D [de] MMMM [de] YYYY h:mm A"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[maana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un da",dd:"%d das",w:"una semana",ww:"%d semanas",M:"un mes",MM:"%d meses",y:"un ao",yy:"%d aos"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:0,doy:6}})}(n(30381))},55655:function(e,t,n){!function(e){"use strict";var t="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),r=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],i=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;e.defineLocale("es",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,r){return e?/-MMM-/.test(r)?n[e.month()]:t[e.month()]:t},monthsRegex:i,monthsShortRegex:i,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:r,longMonthsParse:r,shortMonthsParse:r,weekdays:"domingo_lunes_martes_mircoles_jueves_viernes_sbado".split("_"),weekdaysShort:"dom._lun._mar._mi._jue._vie._sb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[maana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un da",dd:"%d das",w:"una semana",ww:"%d semanas",M:"un mes",MM:"%d meses",y:"un ao",yy:"%d aos"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4},invalidDate:"Fecha invlida"})}(n(30381))},5603:function(e,t,n){!function(e){"use strict";function t(e,t,n,r){var i={s:["mne sekundi","mni sekund","paar sekundit"],ss:[e+"sekundi",e+"sekundit"],m:["he minuti","ks minut"],mm:[e+" minuti",e+" minutit"],h:["he tunni","tund aega","ks tund"],hh:[e+" tunni",e+" tundi"],d:["he peva","ks pev"],M:["kuu aja","kuu aega","ks kuu"],MM:[e+" kuu",e+" kuud"],y:["he aasta","aasta","ks aasta"],yy:[e+" aasta",e+" aastat"]};return t?i[n][2]?i[n][2]:i[n][1]:r?i[n][0]:i[n][1]}e.defineLocale("et",{months:"jaanuar_veebruar_mrts_aprill_mai_juuni_juuli_august_september_oktoober_november_detsember".split("_"),monthsShort:"jaan_veebr_mrts_apr_mai_juuni_juuli_aug_sept_okt_nov_dets".split("_"),weekdays:"phapev_esmaspev_teisipev_kolmapev_neljapev_reede_laupev".split("_"),weekdaysShort:"P_E_T_K_N_R_L".split("_"),weekdaysMin:"P_E_T_K_N_R_L".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[Tna,] LT",nextDay:"[Homme,] LT",nextWeek:"[Jrgmine] dddd LT",lastDay:"[Eile,] LT",lastWeek:"[Eelmine] dddd LT",sameElse:"L"},relativeTime:{future:"%s prast",past:"%s tagasi",s:t,ss:t,m:t,mm:t,h:t,hh:t,d:t,dd:"%d peva",M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(30381))},77763:function(e,t,n){!function(e){"use strict";e.defineLocale("eu",{months:"urtarrila_otsaila_martxoa_apirila_maiatza_ekaina_uztaila_abuztua_iraila_urria_azaroa_abendua".split("_"),monthsShort:"urt._ots._mar._api._mai._eka._uzt._abu._ira._urr._aza._abe.".split("_"),monthsParseExact:!0,weekdays:"igandea_astelehena_asteartea_asteazkena_osteguna_ostirala_larunbata".split("_"),weekdaysShort:"ig._al._ar._az._og._ol._lr.".split("_"),weekdaysMin:"ig_al_ar_az_og_ol_lr".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY[ko] MMMM[ren] D[a]",LLL:"YYYY[ko] MMMM[ren] D[a] HH:mm",LLLL:"dddd, YYYY[ko] MMMM[ren] D[a] HH:mm",l:"YYYY-M-D",ll:"YYYY[ko] MMM D[a]",lll:"YYYY[ko] MMM D[a] HH:mm",llll:"ddd, YYYY[ko] MMM D[a] HH:mm"},calendar:{sameDay:"[gaur] LT[etan]",nextDay:"[bihar] LT[etan]",nextWeek:"dddd LT[etan]",lastDay:"[atzo] LT[etan]",lastWeek:"[aurreko] dddd LT[etan]",sameElse:"L"},relativeTime:{future:"%s barru",past:"duela %s",s:"segundo batzuk",ss:"%d segundo",m:"minutu bat",mm:"%d minutu",h:"ordu bat",hh:"%d ordu",d:"egun bat",dd:"%d egun",M:"hilabete bat",MM:"%d hilabete",y:"urte bat",yy:"%d urte"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(30381))},76959:function(e,t,n){!function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};e.defineLocale("fa",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/  |  /,isPM:function(e){return/  /.test(e)},meridiem:function(e,t,n){return e<12?"  ":"  "},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"dddd [] [] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(/[-]/g,(function(e){return n[e]})).replace(//g,",")},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]})).replace(/,/g,"")},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:6,doy:12}})}(n(30381))},11897:function(e,t,n){!function(e){"use strict";var t="nolla yksi kaksi kolme nelj viisi kuusi seitsemn kahdeksan yhdeksn".split(" "),n=["nolla","yhden","kahden","kolmen","neljn","viiden","kuuden",t[7],t[8],t[9]];function r(e,t,n,r){var o="";switch(n){case"s":return r?"muutaman sekunnin":"muutama sekunti";case"ss":o=r?"sekunnin":"sekuntia";break;case"m":return r?"minuutin":"minuutti";case"mm":o=r?"minuutin":"minuuttia";break;case"h":return r?"tunnin":"tunti";case"hh":o=r?"tunnin":"tuntia";break;case"d":return r?"pivn":"piv";case"dd":o=r?"pivn":"piv";break;case"M":return r?"kuukauden":"kuukausi";case"MM":o=r?"kuukauden":"kuukautta";break;case"y":return r?"vuoden":"vuosi";case"yy":o=r?"vuoden":"vuotta"}return o=i(e,r)+" "+o}function i(e,r){return e<10?r?n[e]:t[e]:e}e.defineLocale("fi",{months:"tammikuu_helmikuu_maaliskuu_huhtikuu_toukokuu_keskuu_heinkuu_elokuu_syyskuu_lokakuu_marraskuu_joulukuu".split("_"),monthsShort:"tammi_helmi_maalis_huhti_touko_kes_hein_elo_syys_loka_marras_joulu".split("_"),weekdays:"sunnuntai_maanantai_tiistai_keskiviikko_torstai_perjantai_lauantai".split("_"),weekdaysShort:"su_ma_ti_ke_to_pe_la".split("_"),weekdaysMin:"su_ma_ti_ke_to_pe_la".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"Do MMMM[ta] YYYY",LLL:"Do MMMM[ta] YYYY, [klo] HH.mm",LLLL:"dddd, Do MMMM[ta] YYYY, [klo] HH.mm",l:"D.M.YYYY",ll:"Do MMM YYYY",lll:"Do MMM YYYY, [klo] HH.mm",llll:"ddd, Do MMM YYYY, [klo] HH.mm"},calendar:{sameDay:"[tnn] [klo] LT",nextDay:"[huomenna] [klo] LT",nextWeek:"dddd [klo] LT",lastDay:"[eilen] [klo] LT",lastWeek:"[viime] dddd[na] [klo] LT",sameElse:"L"},relativeTime:{future:"%s pst",past:"%s sitten",s:r,ss:r,m:r,mm:r,h:r,hh:r,d:r,dd:r,M:r,MM:r,y:r,yy:r},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(30381))},42549:function(e,t,n){!function(e){"use strict";e.defineLocale("fil",{months:"Enero_Pebrero_Marso_Abril_Mayo_Hunyo_Hulyo_Agosto_Setyembre_Oktubre_Nobyembre_Disyembre".split("_"),monthsShort:"Ene_Peb_Mar_Abr_May_Hun_Hul_Ago_Set_Okt_Nob_Dis".split("_"),weekdays:"Linggo_Lunes_Martes_Miyerkules_Huwebes_Biyernes_Sabado".split("_"),weekdaysShort:"Lin_Lun_Mar_Miy_Huw_Biy_Sab".split("_"),weekdaysMin:"Li_Lu_Ma_Mi_Hu_Bi_Sab".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"MM/D/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY HH:mm",LLLL:"dddd, MMMM DD, YYYY HH:mm"},calendar:{sameDay:"LT [ngayong araw]",nextDay:"[Bukas ng] LT",nextWeek:"LT [sa susunod na] dddd",lastDay:"LT [kahapon]",lastWeek:"LT [noong nakaraang] dddd",sameElse:"L"},relativeTime:{future:"sa loob ng %s",past:"%s ang nakalipas",s:"ilang segundo",ss:"%d segundo",m:"isang minuto",mm:"%d minuto",h:"isang oras",hh:"%d oras",d:"isang araw",dd:"%d araw",M:"isang buwan",MM:"%d buwan",y:"isang taon",yy:"%d taon"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(e){return e},week:{dow:1,doy:4}})}(n(30381))},94694:function(e,t,n){!function(e){"use strict";e.defineLocale("fo",{months:"januar_februar_mars_aprl_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sunnudagur_mnadagur_tsdagur_mikudagur_hsdagur_frggjadagur_leygardagur".split("_"),weekdaysShort:"sun_mn_ts_mik_hs_fr_ley".split("_"),weekdaysMin:"su_m_t_mi_h_fr_le".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D. MMMM, YYYY HH:mm"},calendar:{sameDay:"[ dag kl.] LT",nextDay:"[ morgin kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[ gjr kl.] LT",lastWeek:"[sstu] dddd [kl] LT",sameElse:"L"},relativeTime:{future:"um %s",past:"%s sani",s:"f sekund",ss:"%d sekundir",m:"ein minuttur",mm:"%d minuttir",h:"ein tmi",hh:"%d tmar",d:"ein dagur",dd:"%d dagar",M:"ein mnaur",MM:"%d mnair",y:"eitt r",yy:"%d r"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(30381))},63049:function(e,t,n){!function(e){"use strict";e.defineLocale("fr-ca",{months:"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre".split("_"),monthsShort:"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourdhui ] LT",nextDay:"[Demain ] LT",nextWeek:"dddd [] LT",lastDay:"[Hier ] LT",lastWeek:"dddd [dernier ] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",ss:"%d secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|e)/,ordinal:function(e,t){switch(t){default:return e+(1===e?"er":"e");case"w":case"W":return e+(1===e?"re":"e")}}})}(n(30381))},52330:function(e,t,n){!function(e){"use strict";e.defineLocale("fr-ch",{months:"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre".split("_"),monthsShort:"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourdhui ] LT",nextDay:"[Demain ] LT",nextWeek:"dddd [] LT",lastDay:"[Hier ] LT",lastWeek:"dddd [dernier ] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",ss:"%d secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|e)/,ordinal:function(e,t){switch(t){default:return e+(1===e?"er":"e");case"w":case"W":return e+(1===e?"re":"e")}},week:{dow:1,doy:4}})}(n(30381))},94470:function(e,t,n){!function(e){"use strict";var t=/^(janvier|fvrier|mars|avril|mai|juin|juillet|aot|septembre|octobre|novembre|dcembre)/i,n=/(janv\.?|fvr\.?|mars|avr\.?|mai|juin|juil\.?|aot|sept\.?|oct\.?|nov\.?|dc\.?)/i,r=/(janv\.?|fvr\.?|mars|avr\.?|mai|juin|juil\.?|aot|sept\.?|oct\.?|nov\.?|dc\.?|janvier|fvrier|mars|avril|mai|juin|juillet|aot|septembre|octobre|novembre|dcembre)/i,i=[/^janv/i,/^fvr/i,/^mars/i,/^avr/i,/^mai/i,/^juin/i,/^juil/i,/^aot/i,/^sept/i,/^oct/i,/^nov/i,/^dc/i];e.defineLocale("fr",{months:"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre".split("_"),monthsShort:"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.".split("_"),monthsRegex:r,monthsShortRegex:r,monthsStrictRegex:t,monthsShortStrictRegex:n,monthsParse:i,longMonthsParse:i,shortMonthsParse:i,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourdhui ] LT",nextDay:"[Demain ] LT",nextWeek:"dddd [] LT",lastDay:"[Hier ] LT",lastWeek:"dddd [dernier ] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",ss:"%d secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",w:"une semaine",ww:"%d semaines",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|)/,ordinal:function(e,t){switch(t){case"D":return e+(1===e?"er":"");default:return e+(1===e?"er":"e");case"w":case"W":return e+(1===e?"re":"e")}},week:{dow:1,doy:4}})}(n(30381))},5044:function(e,t,n){!function(e){"use strict";var t="jan._feb._mrt._apr._mai_jun._jul._aug._sep._okt._nov._des.".split("_"),n="jan_feb_mrt_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_");e.defineLocale("fy",{months:"jannewaris_febrewaris_maart_april_maaie_juny_july_augustus_septimber_oktober_novimber_desimber".split("_"),monthsShort:function(e,r){return e?/-MMM-/.test(r)?n[e.month()]:t[e.month()]:t},monthsParseExact:!0,weekdays:"snein_moandei_tiisdei_woansdei_tongersdei_freed_sneon".split("_"),weekdaysShort:"si._mo._ti._wo._to._fr._so.".split("_"),weekdaysMin:"Si_Mo_Ti_Wo_To_Fr_So".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[hjoed om] LT",nextDay:"[moarn om] LT",nextWeek:"dddd [om] LT",lastDay:"[juster om] LT",lastWeek:"[frne] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oer %s",past:"%s lyn",s:"in pear sekonden",ss:"%d sekonden",m:"ien mint",mm:"%d minuten",h:"ien oere",hh:"%d oeren",d:"ien dei",dd:"%d dagen",M:"ien moanne",MM:"%d moannen",y:"ien jier",yy:"%d jierren"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||e>=20?"ste":"de")},week:{dow:1,doy:4}})}(n(30381))},29295:function(e,t,n){!function(e){"use strict";var t=["Eanir","Feabhra","Mrta","Aibren","Bealtaine","Meitheamh","Iil","Lnasa","Men Fmhair","Deireadh Fmhair","Samhain","Nollaig"],n=["Ean","Feabh","Mrt","Aib","Beal","Meith","Iil","Ln","M.F.","D.F.","Samh","Noll"],r=["D Domhnaigh","D Luain","D Mirt","D Cadaoin","Dardaoin","D hAoine","D Sathairn"],i=["Domh","Luan","Mirt","Cad","Dar","Aoine","Sath"],o=["Do","Lu","M","C","D","A","Sa"];e.defineLocale("ga",{months:t,monthsShort:n,monthsParseExact:!0,weekdays:r,weekdaysShort:i,weekdaysMin:o,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Inniu ag] LT",nextDay:"[Amrach ag] LT",nextWeek:"dddd [ag] LT",lastDay:"[Inn ag] LT",lastWeek:"dddd [seo caite] [ag] LT",sameElse:"L"},relativeTime:{future:"i %s",past:"%s  shin",s:"cpla soicind",ss:"%d soicind",m:"nimad",mm:"%d nimad",h:"uair an chloig",hh:"%d uair an chloig",d:"l",dd:"%d l",M:"m",MM:"%d monna",y:"bliain",yy:"%d bliain"},dayOfMonthOrdinalParse:/\d{1,2}(d|na|mh)/,ordinal:function(e){return e+(1===e?"d":e%10==2?"na":"mh")},week:{dow:1,doy:4}})}(n(30381))},2101:function(e,t,n){!function(e){"use strict";var t=["Am Faoilleach","An Gearran","Am Mrt","An Giblean","An Citean","An t-gmhios","An t-Iuchar","An Lnastal","An t-Sultain","An Dmhair","An t-Samhain","An Dbhlachd"],n=["Faoi","Gear","Mrt","Gibl","Cit","gmh","Iuch","Ln","Sult","Dmh","Samh","Dbh"],r=["Didmhnaich","Diluain","Dimirt","Diciadain","Diardaoin","Dihaoine","Disathairne"],i=["Did","Dil","Dim","Dic","Dia","Dih","Dis"],o=["D","Lu","M","Ci","Ar","Ha","Sa"];e.defineLocale("gd",{months:t,monthsShort:n,monthsParseExact:!0,weekdays:r,weekdaysShort:i,weekdaysMin:o,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[An-diugh aig] LT",nextDay:"[A-mireach aig] LT",nextWeek:"dddd [aig] LT",lastDay:"[An-d aig] LT",lastWeek:"dddd [seo chaidh] [aig] LT",sameElse:"L"},relativeTime:{future:"ann an %s",past:"bho chionn %s",s:"beagan diogan",ss:"%d diogan",m:"mionaid",mm:"%d mionaidean",h:"uair",hh:"%d uairean",d:"latha",dd:"%d latha",M:"mos",MM:"%d mosan",y:"bliadhna",yy:"%d bliadhna"},dayOfMonthOrdinalParse:/\d{1,2}(d|na|mh)/,ordinal:function(e){return e+(1===e?"d":e%10==2?"na":"mh")},week:{dow:1,doy:4}})}(n(30381))},38794:function(e,t,n){!function(e){"use strict";e.defineLocale("gl",{months:"xaneiro_febreiro_marzo_abril_maio_xuo_xullo_agosto_setembro_outubro_novembro_decembro".split("_"),monthsShort:"xan._feb._mar._abr._mai._xu._xul._ago._set._out._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"domingo_luns_martes_mrcores_xoves_venres_sbado".split("_"),weekdaysShort:"dom._lun._mar._mr._xov._ven._sb.".split("_"),weekdaysMin:"do_lu_ma_m_xo_ve_s".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoxe "+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[ma "+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd ["+(1!==this.hours()?"s":"a")+"] LT"},lastDay:function(){return"[onte "+(1!==this.hours()?"":"a")+"] LT"},lastWeek:function(){return"[o] dddd [pasado "+(1!==this.hours()?"s":"a")+"] LT"},sameElse:"L"},relativeTime:{future:function(e){return 0===e.indexOf("un")?"n"+e:"en "+e},past:"hai %s",s:"uns segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"unha hora",hh:"%d horas",d:"un da",dd:"%d das",M:"un mes",MM:"%d meses",y:"un ano",yy:"%d anos"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(n(30381))},27884:function(e,t,n){!function(e){"use strict";function t(e,t,n,r){var i={s:[" "," "],ss:[e+" ",e+" "],m:[" "," "],mm:[e+" ",e+" "],h:[" "," "],hh:[e+" ",e+" "],d:[" "," "],dd:[e+" ",e+" "],M:[" "," "],MM:[e+" ",e+" "],y:[" "," "],yy:[e+" ",e+" "]};return r?i[n][0]:i[n][1]}e.defineLocale("gom-deva",{months:{standalone:"___________".split("_"),format:"___________".split("_"),isFormat:/MMMM(\s)+D[oD]?/},monthsShort:"._.__.___._._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"._._._._._._.".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"A h:mm []",LTS:"A h:mm:ss []",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY A h:mm []",LLLL:"dddd, MMMM Do, YYYY, A h:mm []",llll:"ddd, D MMM YYYY, A h:mm []"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[] dddd[,] LT",lastDay:"[] LT",lastWeek:"[] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s ",s:t,ss:t,m:t,mm:t,h:t,hh:t,d:t,dd:t,M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}()/,ordinal:function(e,t){return"D"===t?e+"":e},week:{dow:0,doy:3},meridiemParse:/|||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t?e<4?e:e+12:""===t?e:""===t?e>12?e:e+12:""===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"":e<12?"":e<16?"":e<20?"":""}})}(n(30381))},23168:function(e,t,n){!function(e){"use strict";function t(e,t,n,r){var i={s:["thoddea sekondamni","thodde sekond"],ss:[e+" sekondamni",e+" sekond"],m:["eka mintan","ek minut"],mm:[e+" mintamni",e+" mintam"],h:["eka voran","ek vor"],hh:[e+" voramni",e+" voram"],d:["eka disan","ek dis"],dd:[e+" disamni",e+" dis"],M:["eka mhoinean","ek mhoino"],MM:[e+" mhoineamni",e+" mhoine"],y:["eka vorsan","ek voros"],yy:[e+" vorsamni",e+" vorsam"]};return r?i[n][0]:i[n][1]}e.defineLocale("gom-latn",{months:{standalone:"Janer_Febrer_Mars_Abril_Mai_Jun_Julai_Agost_Setembr_Otubr_Novembr_Dezembr".split("_"),format:"Janerachea_Febrerachea_Marsachea_Abrilachea_Maiachea_Junachea_Julaiachea_Agostachea_Setembrachea_Otubrachea_Novembrachea_Dezembrachea".split("_"),isFormat:/MMMM(\s)+D[oD]?/},monthsShort:"Jan._Feb._Mars_Abr._Mai_Jun_Jul._Ago._Set._Otu._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Aitar_Somar_Mongllar_Budhvar_Birestar_Sukrar_Son'var".split("_"),weekdaysShort:"Ait._Som._Mon._Bud._Bre._Suk._Son.".split("_"),weekdaysMin:"Ai_Sm_Mo_Bu_Br_Su_Sn".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"A h:mm [vazta]",LTS:"A h:mm:ss [vazta]",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY A h:mm [vazta]",LLLL:"dddd, MMMM Do, YYYY, A h:mm [vazta]",llll:"ddd, D MMM YYYY, A h:mm [vazta]"},calendar:{sameDay:"[Aiz] LT",nextDay:"[Faleam] LT",nextWeek:"[Fuddlo] dddd[,] LT",lastDay:"[Kal] LT",lastWeek:"[Fattlo] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s adim",s:t,ss:t,m:t,mm:t,h:t,hh:t,d:t,dd:t,M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}(er)/,ordinal:function(e,t){return"D"===t?e+"er":e},week:{dow:0,doy:3},meridiemParse:/rati|sokallim|donparam|sanje/,meridiemHour:function(e,t){return 12===e&&(e=0),"rati"===t?e<4?e:e+12:"sokallim"===t?e:"donparam"===t?e>12?e:e+12:"sanje"===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"rati":e<12?"sokallim":e<16?"donparam":e<20?"sanje":"rati"}})}(n(30381))},95349:function(e,t,n){!function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};e.defineLocale("gu",{months:"___________".split("_"),monthsShort:"._.__.___._._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(/[]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/|||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t?e<4?e:e+12:""===t?e:""===t?e>=10?e:e+12:""===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"":e<10?"":e<17?"":e<20?"":""},week:{dow:0,doy:6}})}(n(30381))},24206:function(e,t,n){!function(e){"use strict";e.defineLocale("he",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D []MMMM YYYY",LLL:"D []MMMM YYYY HH:mm",LLLL:"dddd, D []MMMM YYYY HH:mm",l:"D/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[ ]LT",nextDay:"[ ]LT",nextWeek:"dddd [] LT",lastDay:"[ ]LT",lastWeek:"[] dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",ss:"%d ",m:"",mm:"%d ",h:"",hh:function(e){return 2===e?"":e+" "},d:"",dd:function(e){return 2===e?"":e+" "},M:"",MM:function(e){return 2===e?"":e+" "},y:"",yy:function(e){return 2===e?"":e%10==0&&10!==e?e+" ":e+" "}},meridiemParse:/"|"| | | ||/i,isPM:function(e){return/^("| |)$/.test(e)},meridiem:function(e,t,n){return e<5?" ":e<10?"":e<12?n?'"':" ":e<18?n?'"':" ":""}})}(n(30381))},30094:function(e,t,n){!function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"},r=[/^/i,/^|/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^|/i,/^/i,/^|/i,/^|/i],i=[/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i];e.defineLocale("hi",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:"._.__.___._._._._._.".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},monthsParse:r,longMonthsParse:r,shortMonthsParse:i,monthsRegex:/^(|\.?|||\.?|?||\.?|?|?||\.?||\.?|||\.?||\.?|||\.?|||\.?)/i,monthsShortRegex:/^(|\.?|||\.?|?||\.?|?|?||\.?||\.?|||\.?||\.?|||\.?|||\.?)/i,monthsStrictRegex:/^(?||?|?|?|?|?|?|?|||?\.?||\.?||?||?)/i,monthsShortStrictRegex:/^(\.?|\.?|?|\.?|?|?|\.?|\.?|\.?|\.?|\.?|\.?)/i,calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"  ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(/[]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/|||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t?e<4?e:e+12:""===t?e:""===t?e>=10?e:e+12:""===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"":e<10?"":e<17?"":e<20?"":""},week:{dow:0,doy:6}})}(n(30381))},30316:function(e,t,n){!function(e){"use strict";function t(e,t,n){var r=e+" ";switch(n){case"ss":return r+=1===e?"sekunda":2===e||3===e||4===e?"sekunde":"sekundi";case"m":return t?"jedna minuta":"jedne minute";case"mm":return r+=1===e?"minuta":2===e||3===e||4===e?"minute":"minuta";case"h":return t?"jedan sat":"jednog sata";case"hh":return r+=1===e?"sat":2===e||3===e||4===e?"sata":"sati";case"dd":return r+=1===e?"dan":"dana";case"MM":return r+=1===e?"mjesec":2===e||3===e||4===e?"mjeseca":"mjeseci";case"yy":return r+=1===e?"godina":2===e||3===e||4===e?"godine":"godina"}}e.defineLocale("hr",{months:{format:"sijenja_veljae_oujka_travnja_svibnja_lipnja_srpnja_kolovoza_rujna_listopada_studenoga_prosinca".split("_"),standalone:"sijeanj_veljaa_oujak_travanj_svibanj_lipanj_srpanj_kolovoz_rujan_listopad_studeni_prosinac".split("_")},monthsShort:"sij._velj._ou._tra._svi._lip._srp._kol._ruj._lis._stu._pro.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_etvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._et._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_e_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"Do MMMM YYYY",LLL:"Do MMMM YYYY H:mm",LLLL:"dddd, Do MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juer u] LT",lastWeek:function(){switch(this.day()){case 0:return"[prolu] [nedjelju] [u] LT";case 3:return"[prolu] [srijedu] [u] LT";case 6:return"[prole] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[proli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",ss:t,m:t,mm:t,h:t,hh:t,d:"dan",dd:t,M:"mjesec",MM:t,y:"godinu",yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(30381))},22138:function(e,t,n){!function(e){"use strict";var t="vasrnap htfn kedden szerdn cstrtkn pnteken szombaton".split(" ");function n(e,t,n,r){var i=e;switch(n){case"s":return r||t?"nhny msodperc":"nhny msodperce";case"ss":return i+(r||t)?" msodperc":" msodperce";case"m":return"egy"+(r||t?" perc":" perce");case"mm":return i+(r||t?" perc":" perce");case"h":return"egy"+(r||t?" ra":" rja");case"hh":return i+(r||t?" ra":" rja");case"d":return"egy"+(r||t?" nap":" napja");case"dd":return i+(r||t?" nap":" napja");case"M":return"egy"+(r||t?" hnap":" hnapja");case"MM":return i+(r||t?" hnap":" hnapja");case"y":return"egy"+(r||t?" v":" ve");case"yy":return i+(r||t?" v":" ve")}return""}function r(e){return(e?"":"[mlt] ")+"["+t[this.day()]+"] LT[-kor]"}e.defineLocale("hu",{months:"janur_februr_mrcius_prilis_mjus_jnius_jlius_augusztus_szeptember_oktber_november_december".split("_"),monthsShort:"jan._feb._mrc._pr._mj._jn._jl._aug._szept._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"vasrnap_htf_kedd_szerda_cstrtk_pntek_szombat".split("_"),weekdaysShort:"vas_ht_kedd_sze_cst_pn_szo".split("_"),weekdaysMin:"v_h_k_sze_cs_p_szo".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"YYYY.MM.DD.",LL:"YYYY. MMMM D.",LLL:"YYYY. MMMM D. H:mm",LLLL:"YYYY. MMMM D., dddd H:mm"},meridiemParse:/de|du/i,isPM:function(e){return"u"===e.charAt(1).toLowerCase()},meridiem:function(e,t,n){return e<12?!0===n?"de":"DE":!0===n?"du":"DU"},calendar:{sameDay:"[ma] LT[-kor]",nextDay:"[holnap] LT[-kor]",nextWeek:function(){return r.call(this,!0)},lastDay:"[tegnap] LT[-kor]",lastWeek:function(){return r.call(this,!1)},sameElse:"L"},relativeTime:{future:"%s mlva",past:"%s",s:n,ss:n,m:n,mm:n,h:n,hh:n,d:n,dd:n,M:n,MM:n,y:n,yy:n},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(30381))},11423:function(e,t,n){!function(e){"use strict";e.defineLocale("hy-am",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., HH:mm",LLLL:"dddd, D MMMM YYYY ., HH:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",lastDay:"[] LT",nextWeek:function(){return"dddd [ ] LT"},lastWeek:function(){return"[] dddd [ ] LT"},sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"  ",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},meridiemParse:/|||/,isPM:function(e){return/^(|)$/.test(e)},meridiem:function(e){return e<4?"":e<12?"":e<17?"":""},dayOfMonthOrdinalParse:/\d{1,2}|\d{1,2}-(|)/,ordinal:function(e,t){switch(t){case"DDD":case"w":case"W":case"DDDo":return 1===e?e+"-":e+"-";default:return e}},week:{dow:1,doy:7}})}(n(30381))},29218:function(e,t,n){!function(e){"use strict";e.defineLocale("id",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Agt_Sep_Okt_Nov_Des".split("_"),weekdays:"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),weekdaysShort:"Min_Sen_Sel_Rab_Kam_Jum_Sab".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|siang|sore|malam/,meridiemHour:function(e,t){return 12===e&&(e=0),"pagi"===t?e:"siang"===t?e>=11?e:e+12:"sore"===t||"malam"===t?e+12:void 0},meridiem:function(e,t,n){return e<11?"pagi":e<15?"siang":e<19?"sore":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Besok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kemarin pukul] LT",lastWeek:"dddd [lalu pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lalu",s:"beberapa detik",ss:"%d detik",m:"semenit",mm:"%d menit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:0,doy:6}})}(n(30381))},90135:function(e,t,n){!function(e){"use strict";function t(e){return e%100==11||e%10!=1}function n(e,n,r,i){var o=e+" ";switch(r){case"s":return n||i?"nokkrar sekndur":"nokkrum sekndum";case"ss":return t(e)?o+(n||i?"sekndur":"sekndum"):o+"seknda";case"m":return n?"mnta":"mntu";case"mm":return t(e)?o+(n||i?"mntur":"mntum"):n?o+"mnta":o+"mntu";case"hh":return t(e)?o+(n||i?"klukkustundir":"klukkustundum"):o+"klukkustund";case"d":return n?"dagur":i?"dag":"degi";case"dd":return t(e)?n?o+"dagar":o+(i?"daga":"dgum"):n?o+"dagur":o+(i?"dag":"degi");case"M":return n?"mnuur":i?"mnu":"mnui";case"MM":return t(e)?n?o+"mnuir":o+(i?"mnui":"mnuum"):n?o+"mnuur":o+(i?"mnu":"mnui");case"y":return n||i?"r":"ri";case"yy":return t(e)?o+(n||i?"r":"rum"):o+(n||i?"r":"ri")}}e.defineLocale("is",{months:"janar_febrar_mars_aprl_ma_jn_jl_gst_september_oktber_nvember_desember".split("_"),monthsShort:"jan_feb_mar_apr_ma_jn_jl_g_sep_okt_nv_des".split("_"),weekdays:"sunnudagur_mnudagur_rijudagur_mivikudagur_fimmtudagur_fstudagur_laugardagur".split("_"),weekdaysShort:"sun_mn_ri_mi_fim_fs_lau".split("_"),weekdaysMin:"Su_M_r_Mi_Fi_F_La".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] H:mm",LLLL:"dddd, D. MMMM YYYY [kl.] H:mm"},calendar:{sameDay:"[ dag kl.] LT",nextDay:"[ morgun kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[ gr kl.] LT",lastWeek:"[sasta] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"eftir %s",past:"fyrir %s san",s:n,ss:n,m:n,mm:n,h:"klukkustund",hh:n,d:n,dd:n,M:n,MM:n,y:n,yy:n},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(30381))},10150:function(e,t,n){!function(e){"use strict";e.defineLocale("it-ch",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"domenica_luned_marted_mercoled_gioved_venerd_sabato".split("_"),weekdaysShort:"dom_lun_mar_mer_gio_ven_sab".split("_"),weekdaysMin:"do_lu_ma_me_gi_ve_sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Oggi alle] LT",nextDay:"[Domani alle] LT",nextWeek:"dddd [alle] LT",lastDay:"[Ieri alle] LT",lastWeek:function(){return 0===this.day()?"[la scorsa] dddd [alle] LT":"[lo scorso] dddd [alle] LT"},sameElse:"L"},relativeTime:{future:function(e){return(/^[0-9].+$/.test(e)?"tra":"in")+" "+e},past:"%s fa",s:"alcuni secondi",ss:"%d secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(n(30381))},90626:function(e,t,n){!function(e){"use strict";e.defineLocale("it",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"domenica_luned_marted_mercoled_gioved_venerd_sabato".split("_"),weekdaysShort:"dom_lun_mar_mer_gio_ven_sab".split("_"),weekdaysMin:"do_lu_ma_me_gi_ve_sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:function(){return"[Oggi a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT"},nextDay:function(){return"[Domani a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT"},nextWeek:function(){return"dddd [a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT"},lastDay:function(){return"[Ieri a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT"},lastWeek:function(){return 0===this.day()?"[La scorsa] dddd [a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT":"[Lo scorso] dddd [a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT"},sameElse:"L"},relativeTime:{future:"tra %s",past:"%s fa",s:"alcuni secondi",ss:"%d secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",w:"una settimana",ww:"%d settimane",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(n(30381))},39183:function(e,t,n){!function(e){"use strict";e.defineLocale("ja",{eras:[{since:"2019-05-01",offset:1,name:"",narrow:"",abbr:"R"},{since:"1989-01-08",until:"2019-04-30",offset:1,name:"",narrow:"",abbr:"H"},{since:"1926-12-25",until:"1989-01-07",offset:1,name:"",narrow:"",abbr:"S"},{since:"1912-07-30",until:"1926-12-24",offset:1,name:"",narrow:"",abbr:"T"},{since:"1873-01-01",until:"1912-07-29",offset:6,name:"",narrow:"",abbr:"M"},{since:"0001-01-01",until:"1873-12-31",offset:1,name:"",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"",narrow:"BC",abbr:"BC"}],eraYearOrdinalRegex:/(|\d+)/,eraYearOrdinalParse:function(e,t){return""===t[1]?1:parseInt(t[1]||e,10)},months:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYYMD",LLL:"YYYYMD HH:mm",LLLL:"YYYYMD dddd HH:mm",l:"YYYY/MM/DD",ll:"YYYYMD",lll:"YYYYMD HH:mm",llll:"YYYYMD(ddd) HH:mm"},meridiemParse:/|/i,isPM:function(e){return""===e},meridiem:function(e,t,n){return e<12?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:function(e){return e.week()!==this.week()?"[]dddd LT":"dddd LT"},lastDay:"[] LT",lastWeek:function(e){return this.week()!==e.week()?"[]dddd LT":"dddd LT"},sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(e,t){switch(t){case"y":return 1===e?"":e+"";case"d":case"D":case"DDD":return e+"";default:return e}},relativeTime:{future:"%s",past:"%s",s:"",ss:"%d",m:"1",mm:"%d",h:"1",hh:"%d",d:"1",dd:"%d",M:"1",MM:"%d",y:"1",yy:"%d"}})}(n(30381))},24286:function(e,t,n){!function(e){"use strict";e.defineLocale("jv",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_Nopember_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nop_Des".split("_"),weekdays:"Minggu_Senen_Seloso_Rebu_Kemis_Jemuwah_Septu".split("_"),weekdaysShort:"Min_Sen_Sel_Reb_Kem_Jem_Sep".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sp".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/enjing|siyang|sonten|ndalu/,meridiemHour:function(e,t){return 12===e&&(e=0),"enjing"===t?e:"siyang"===t?e>=11?e:e+12:"sonten"===t||"ndalu"===t?e+12:void 0},meridiem:function(e,t,n){return e<11?"enjing":e<15?"siyang":e<19?"sonten":"ndalu"},calendar:{sameDay:"[Dinten puniko pukul] LT",nextDay:"[Mbenjang pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kala wingi pukul] LT",lastWeek:"dddd [kepengker pukul] LT",sameElse:"L"},relativeTime:{future:"wonten ing %s",past:"%s ingkang kepengker",s:"sawetawis detik",ss:"%d detik",m:"setunggal menit",mm:"%d menit",h:"setunggal jam",hh:"%d jam",d:"sedinten",dd:"%d dinten",M:"sewulan",MM:"%d wulan",y:"setaun",yy:"%d taun"},week:{dow:1,doy:7}})}(n(30381))},12105:function(e,t,n){!function(e){"use strict";e.defineLocale("ka",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:{standalone:"______".split("_"),format:"______".split("_"),isFormat:/(|)/},weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[] LT[-]",nextDay:"[] LT[-]",lastDay:"[] LT[-]",nextWeek:"[] dddd LT[-]",lastWeek:"[] dddd LT-",sameElse:"L"},relativeTime:{future:function(e){return e.replace(/(|||||)(|)/,(function(e,t,n){return""===n?t+"":t+n+""}))},past:function(e){return/(||||)/.test(e)?e.replace(/(|)$/," ")://.test(e)?e.replace(/$/," "):e},s:" ",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},dayOfMonthOrdinalParse:/0|1-|-\d{1,2}|\d{1,2}-/,ordinal:function(e){return 0===e?e:1===e?e+"-":e<20||e<=100&&e%20==0||e%100==0?"-"+e:e+"-"},week:{dow:1,doy:7}})}(n(30381))},47772:function(e,t,n){!function(e){"use strict";var t={0:"-",1:"-",2:"-",3:"-",4:"-",5:"-",6:"-",7:"-",8:"-",9:"-",10:"-",20:"-",30:"-",40:"-",50:"-",60:"-",70:"-",80:"-",90:"-",100:"-"};e.defineLocale("kk",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"[ ] dddd [] LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}-(|)/,ordinal:function(e){var n=e%10,r=e>=100?100:null;return e+(t[e]||t[n]||t[r])},week:{dow:1,doy:7}})}(n(30381))},18758:function(e,t,n){!function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};e.defineLocale("km",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,t,n){return e<12?"":""},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"dddd [] [] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s",s:"",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",preparse:function(e){return e.replace(/[]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},week:{dow:1,doy:4}})}(n(30381))},79282:function(e,t,n){!function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};e.defineLocale("kn",{months:"___________".split("_"),monthsShort:"___________".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(/[]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/|||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t?e<4?e:e+12:""===t?e:""===t?e>=10?e:e+12:""===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"":e<10?"":e<17?"":e<20?"":""},dayOfMonthOrdinalParse:/\d{1,2}()/,ordinal:function(e){return e+""},week:{dow:0,doy:6}})}(n(30381))},33730:function(e,t,n){!function(e){"use strict";e.defineLocale("ko",{months:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"YYYY.MM.DD.",LL:"YYYY MMMM D",LLL:"YYYY MMMM D A h:mm",LLLL:"YYYY MMMM D dddd A h:mm",l:"YYYY.MM.DD.",ll:"YYYY MMMM D",lll:"YYYY MMMM D A h:mm",llll:"YYYY MMMM D dddd A h:mm"},calendar:{sameDay:" LT",nextDay:" LT",nextWeek:"dddd LT",lastDay:" LT",lastWeek:" dddd LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d",m:"1",mm:"%d",h:" ",hh:"%d",d:"",dd:"%d",M:" ",MM:"%d",y:" ",yy:"%d"},dayOfMonthOrdinalParse:/\d{1,2}(||)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"";case"M":return e+"";case"w":case"W":return e+"";default:return e}},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,t,n){return e<12?"":""}})}(n(30381))},1408:function(e,t,n){!function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"},r=[" ","","","","","","","",""," "," "," "];e.defineLocale("ku",{months:r,monthsShort:r,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(e){return//.test(e)},meridiem:function(e,t,n){return e<12?"":""},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"dddd [] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s",s:" ",ss:" %d",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(/[]/g,(function(e){return n[e]})).replace(//g,",")},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]})).replace(/,/g,"")},week:{dow:6,doy:12}})}(n(30381))},33291:function(e,t,n){!function(e){"use strict";var t={0:"-",1:"-",2:"-",3:"-",4:"-",5:"-",6:"-",7:"-",8:"-",9:"-",10:"-",20:"-",30:"-",40:"-",50:"-",60:"-",70:"-",80:"-",90:"-",100:"-"};e.defineLocale("ky",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"[ ] dddd [] [] LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}-(|||)/,ordinal:function(e){var n=e%10,r=e>=100?100:null;return e+(t[e]||t[n]||t[r])},week:{dow:1,doy:7}})}(n(30381))},36841:function(e,t,n){!function(e){"use strict";function t(e,t,n,r){var i={m:["eng Minutt","enger Minutt"],h:["eng Stonn","enger Stonn"],d:["een Dag","engem Dag"],M:["ee Mount","engem Mount"],y:["ee Joer","engem Joer"]};return t?i[n][0]:i[n][1]}function n(e){return i(e.substr(0,e.indexOf(" ")))?"a "+e:"an "+e}function r(e){return i(e.substr(0,e.indexOf(" ")))?"viru "+e:"virun "+e}function i(e){if(e=parseInt(e,10),isNaN(e))return!1;if(e<0)return!0;if(e<10)return 4<=e&&e<=7;if(e<100){var t=e%10;return i(0===t?e/10:t)}if(e<1e4){for(;e>=10;)e/=10;return i(e)}return i(e/=1e3)}e.defineLocale("lb",{months:"Januar_Februar_Merz_Abrll_Mee_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Abr._Mee_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonndeg_Mindeg_Dnschdeg_Mttwoch_Donneschdeg_Freideg_Samschdeg".split("_"),weekdaysShort:"So._M._D._M._Do._Fr._Sa.".split("_"),weekdaysMin:"So_M_D_M_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm [Auer]",LTS:"H:mm:ss [Auer]",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm [Auer]",LLLL:"dddd, D. MMMM YYYY H:mm [Auer]"},calendar:{sameDay:"[Haut um] LT",sameElse:"L",nextDay:"[Muer um] LT",nextWeek:"dddd [um] LT",lastDay:"[Gschter um] LT",lastWeek:function(){switch(this.day()){case 2:case 4:return"[Leschten] dddd [um] LT";default:return"[Leschte] dddd [um] LT"}}},relativeTime:{future:n,past:r,s:"e puer Sekonnen",ss:"%d Sekonnen",m:t,mm:"%d Minutten",h:t,hh:"%d Stonnen",d:t,dd:"%d Deeg",M:t,MM:"%d Mint",y:t,yy:"%d Joer"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(30381))},55466:function(e,t,n){!function(e){"use strict";e.defineLocale("lo",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,t,n){return e<12?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[]dddd[] LT",lastDay:"[] LT",lastWeek:"[]dddd[] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s",s:"",ss:"%d ",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "},dayOfMonthOrdinalParse:/()\d{1,2}/,ordinal:function(e){return""+e}})}(n(30381))},57010:function(e,t,n){!function(e){"use strict";var t={ss:"sekund_sekundi_sekundes",m:"minut_minuts_minut",mm:"minuts_minui_minutes",h:"valanda_valandos_valand",hh:"valandos_valand_valandas",d:"diena_dienos_dien",dd:"dienos_dien_dienas",M:"mnuo_mnesio_mnes",MM:"mnesiai_mnesi_mnesius",y:"metai_met_metus",yy:"metai_met_metus"};function n(e,t,n,r){return t?"kelios sekunds":r?"keli sekundi":"kelias sekundes"}function r(e,t,n,r){return t?o(n)[0]:r?o(n)[1]:o(n)[2]}function i(e){return e%10==0||e>10&&e<20}function o(e){return t[e].split("_")}function a(e,t,n,a){var s=e+" ";return 1===e?s+r(e,t,n[0],a):t?s+(i(e)?o(n)[1]:o(n)[0]):a?s+o(n)[1]:s+(i(e)?o(n)[1]:o(n)[2])}e.defineLocale("lt",{months:{format:"sausio_vasario_kovo_balandio_gegus_birelio_liepos_rugpjio_rugsjo_spalio_lapkriio_gruodio".split("_"),standalone:"sausis_vasaris_kovas_balandis_gegu_birelis_liepa_rugpjtis_rugsjis_spalis_lapkritis_gruodis".split("_"),isFormat:/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?|MMMM?(\[[^\[\]]*\]|\s)+D[oD]?/},monthsShort:"sau_vas_kov_bal_geg_bir_lie_rgp_rgs_spa_lap_grd".split("_"),weekdays:{format:"sekmadien_pirmadien_antradien_treiadien_ketvirtadien_penktadien_etadien".split("_"),standalone:"sekmadienis_pirmadienis_antradienis_treiadienis_ketvirtadienis_penktadienis_etadienis".split("_"),isFormat:/dddd HH:mm/},weekdaysShort:"Sek_Pir_Ant_Tre_Ket_Pen_e".split("_"),weekdaysMin:"S_P_A_T_K_Pn_".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY [m.] MMMM D [d.]",LLL:"YYYY [m.] MMMM D [d.], HH:mm [val.]",LLLL:"YYYY [m.] MMMM D [d.], dddd, HH:mm [val.]",l:"YYYY-MM-DD",ll:"YYYY [m.] MMMM D [d.]",lll:"YYYY [m.] MMMM D [d.], HH:mm [val.]",llll:"YYYY [m.] MMMM D [d.], ddd, HH:mm [val.]"},calendar:{sameDay:"[iandien] LT",nextDay:"[Rytoj] LT",nextWeek:"dddd LT",lastDay:"[Vakar] LT",lastWeek:"[Prajus] dddd LT",sameElse:"L"},relativeTime:{future:"po %s",past:"prie %s",s:n,ss:a,m:r,mm:a,h:r,hh:a,d:r,dd:a,M:r,MM:a,y:r,yy:a},dayOfMonthOrdinalParse:/\d{1,2}-oji/,ordinal:function(e){return e+"-oji"},week:{dow:1,doy:4}})}(n(30381))},37595:function(e,t,n){!function(e){"use strict";var t={ss:"sekundes_sekundm_sekunde_sekundes".split("_"),m:"mintes_mintm_minte_mintes".split("_"),mm:"mintes_mintm_minte_mintes".split("_"),h:"stundas_stundm_stunda_stundas".split("_"),hh:"stundas_stundm_stunda_stundas".split("_"),d:"dienas_dienm_diena_dienas".split("_"),dd:"dienas_dienm_diena_dienas".split("_"),M:"mnea_mneiem_mnesis_mnei".split("_"),MM:"mnea_mneiem_mnesis_mnei".split("_"),y:"gada_gadiem_gads_gadi".split("_"),yy:"gada_gadiem_gads_gadi".split("_")};function n(e,t,n){return n?t%10==1&&t%100!=11?e[2]:e[3]:t%10==1&&t%100!=11?e[0]:e[1]}function r(e,r,i){return e+" "+n(t[i],e,r)}function i(e,r,i){return n(t[i],e,r)}function o(e,t){return t?"daas sekundes":"dam sekundm"}e.defineLocale("lv",{months:"janvris_februris_marts_aprlis_maijs_jnijs_jlijs_augusts_septembris_oktobris_novembris_decembris".split("_"),monthsShort:"jan_feb_mar_apr_mai_jn_jl_aug_sep_okt_nov_dec".split("_"),weekdays:"svtdiena_pirmdiena_otrdiena_trediena_ceturtdiena_piektdiena_sestdiena".split("_"),weekdaysShort:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysMin:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY.",LL:"YYYY. [gada] D. MMMM",LLL:"YYYY. [gada] D. MMMM, HH:mm",LLLL:"YYYY. [gada] D. MMMM, dddd, HH:mm"},calendar:{sameDay:"[odien pulksten] LT",nextDay:"[Rt pulksten] LT",nextWeek:"dddd [pulksten] LT",lastDay:"[Vakar pulksten] LT",lastWeek:"[Pagju] dddd [pulksten] LT",sameElse:"L"},relativeTime:{future:"pc %s",past:"pirms %s",s:o,ss:r,m:i,mm:r,h:i,hh:r,d:i,dd:r,M:i,MM:r,y:i,yy:r},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(30381))},39861:function(e,t,n){!function(e){"use strict";var t={words:{ss:["sekund","sekunda","sekundi"],m:["jedan minut","jednog minuta"],mm:["minut","minuta","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan","dana","dana"],MM:["mjesec","mjeseca","mjeseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(e,t){return 1===e?t[0]:e>=2&&e<=4?t[1]:t[2]},translate:function(e,n,r){var i=t.words[r];return 1===r.length?n?i[0]:i[1]:e+" "+t.correctGrammaticalCase(e,i)}};e.defineLocale("me",{months:"januar_februar_mart_april_maj_jun_jul_avgust_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj_jun_jul_avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_etvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._et._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_e_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sjutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jue u] LT",lastWeek:function(){return["[prole] [nedjelje] [u] LT","[prolog] [ponedjeljka] [u] LT","[prolog] [utorka] [u] LT","[prole] [srijede] [u] LT","[prolog] [etvrtka] [u] LT","[prolog] [petka] [u] LT","[prole] [subote] [u] LT"][this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"nekoliko sekundi",ss:t.translate,m:t.translate,mm:t.translate,h:t.translate,hh:t.translate,d:"dan",dd:t.translate,M:"mjesec",MM:t.translate,y:"godinu",yy:t.translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(30381))},35493:function(e,t,n){!function(e){"use strict";e.defineLocale("mi",{months:"Kohi-tte_Hui-tanguru_Pout-te-rangi_Paenga-whwh_Haratua_Pipiri_Hngoingoi_Here-turi-kk_Mahuru_Whiringa--nuku_Whiringa--rangi_Hakihea".split("_"),monthsShort:"Kohi_Hui_Pou_Pae_Hara_Pipi_Hngoi_Here_Mahu_Whi-nu_Whi-ra_Haki".split("_"),monthsRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsStrictRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsShortRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsShortStrictRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,2}/i,weekdays:"Rtapu_Mane_Trei_Wenerei_Tite_Paraire_Htarei".split("_"),weekdaysShort:"Ta_Ma_T_We_Ti_Pa_H".split("_"),weekdaysMin:"Ta_Ma_T_We_Ti_Pa_H".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [i] HH:mm",LLLL:"dddd, D MMMM YYYY [i] HH:mm"},calendar:{sameDay:"[i teie mahana, i] LT",nextDay:"[apopo i] LT",nextWeek:"dddd [i] LT",lastDay:"[inanahi i] LT",lastWeek:"dddd [whakamutunga i] LT",sameElse:"L"},relativeTime:{future:"i roto i %s",past:"%s i mua",s:"te hkona ruarua",ss:"%d hkona",m:"he meneti",mm:"%d meneti",h:"te haora",hh:"%d haora",d:"he ra",dd:"%d ra",M:"he marama",MM:"%d marama",y:"he tau",yy:"%d tau"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(n(30381))},95966:function(e,t,n){!function(e){"use strict";e.defineLocale("mk",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"e_o_____a".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"[] dddd [] LT",lastDay:"[ ] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[] dddd [] LT";case 1:case 2:case 4:case 5:return"[] dddd [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}-(|||||)/,ordinal:function(e){var t=e%10,n=e%100;return 0===e?e+"-":0===n?e+"-":n>10&&n<20?e+"-":1===t?e+"-":2===t?e+"-":7===t||8===t?e+"-":e+"-"},week:{dow:1,doy:7}})}(n(30381))},87341:function(e,t,n){!function(e){"use strict";e.defineLocale("ml",{months:"___________".split("_"),monthsShort:"._._._.___._._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm -",LTS:"A h:mm:ss -",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm -",LLLL:"dddd, D MMMM YYYY, A h:mm -"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},meridiemParse:/|| ||/i,meridiemHour:function(e,t){return 12===e&&(e=0),""===t&&e>=4||" "===t||""===t?e+12:e},meridiem:function(e,t,n){return e<4?"":e<12?"":e<17?" ":e<20?"":""}})}(n(30381))},5115:function(e,t,n){!function(e){"use strict";function t(e,t,n,r){switch(n){case"s":return t?" ":" ";case"ss":return e+(t?" ":" ");case"m":case"mm":return e+(t?" ":" ");case"h":case"hh":return e+(t?" ":" ");case"d":case"dd":return e+(t?" ":" ");case"M":case"MM":return e+(t?" ":" ");case"y":case"yy":return e+(t?" ":" ");default:return e}}e.defineLocale("mn",{months:" _ _ _ _ _ _ _ _ _ _  _  ".split("_"),monthsShort:"1 _2 _3 _4 _5 _6 _7 _8 _9 _10 _11 _12 ".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY  MMMM D",LLL:"YYYY  MMMM D HH:mm",LLLL:"dddd, YYYY  MMMM D HH:mm"},meridiemParse:/|/i,isPM:function(e){return""===e},meridiem:function(e,t,n){return e<12?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[] dddd LT",lastDay:"[] LT",lastWeek:"[] dddd LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:t,ss:t,m:t,mm:t,h:t,hh:t,d:t,dd:t,M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2} /,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+" ";default:return e}}})}(n(30381))},10370:function(e,t,n){!function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};function r(e,t,n,r){var i="";if(t)switch(n){case"s":i=" ";break;case"ss":i="%d ";break;case"m":i=" ";break;case"mm":i="%d ";break;case"h":i=" ";break;case"hh":i="%d ";break;case"d":i=" ";break;case"dd":i="%d ";break;case"M":i=" ";break;case"MM":i="%d ";break;case"y":i=" ";break;case"yy":i="%d "}else switch(n){case"s":i=" ";break;case"ss":i="%d ";break;case"m":i=" ";break;case"mm":i="%d ";break;case"h":i=" ";break;case"hh":i="%d ";break;case"d":i=" ";break;case"dd":i="%d ";break;case"M":i=" ";break;case"MM":i="%d ";break;case"y":i=" ";break;case"yy":i="%d "}return i.replace(/%d/i,e)}e.defineLocale("mr",{months:"___________".split("_"),monthsShort:"._._._._._._._._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s",s:r,ss:r,m:r,mm:r,h:r,hh:r,d:r,dd:r,M:r,MM:r,y:r,yy:r},preparse:function(e){return e.replace(/[]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/||||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t||""===t?e:""===t||""===t||""===t?e>=12?e:e+12:void 0},meridiem:function(e,t,n){return e>=0&&e<6?"":e<12?"":e<17?"":e<20?"":""},week:{dow:0,doy:6}})}(n(30381))},41237:function(e,t,n){!function(e){"use strict";e.defineLocale("ms-my",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(e,t){return 12===e&&(e=0),"pagi"===t?e:"tengahari"===t?e>=11?e:e+12:"petang"===t||"malam"===t?e+12:void 0},meridiem:function(e,t,n){return e<11?"pagi":e<15?"tengahari":e<19?"petang":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",ss:"%d saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}})}(n(30381))},9847:function(e,t,n){!function(e){"use strict";e.defineLocale("ms",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(e,t){return 12===e&&(e=0),"pagi"===t?e:"tengahari"===t?e>=11?e:e+12:"petang"===t||"malam"===t?e+12:void 0},meridiem:function(e,t,n){return e<11?"pagi":e<15?"tengahari":e<19?"petang":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",ss:"%d saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}})}(n(30381))},72126:function(e,t,n){!function(e){"use strict";e.defineLocale("mt",{months:"Jannar_Frar_Marzu_April_Mejju_unju_Lulju_Awwissu_Settembru_Ottubru_Novembru_Diembru".split("_"),monthsShort:"Jan_Fra_Mar_Apr_Mej_un_Lul_Aww_Set_Ott_Nov_Di".split("_"),weekdays:"Il-add_It-Tnejn_It-Tlieta_L-Erbga_Il-amis_Il-imga_Is-Sibt".split("_"),weekdaysShort:"ad_Tne_Tli_Erb_am_im_Sib".split("_"),weekdaysMin:"a_Tn_Tl_Er_a_i_Si".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Illum fil-]LT",nextDay:"[Gada fil-]LT",nextWeek:"dddd [fil-]LT",lastDay:"[Il-biera fil-]LT",lastWeek:"dddd [li gadda] [fil-]LT",sameElse:"L"},relativeTime:{future:"f %s",past:"%s ilu",s:"ftit sekondi",ss:"%d sekondi",m:"minuta",mm:"%d minuti",h:"siega",hh:"%d siegat",d:"urnata",dd:"%d ranet",M:"xahar",MM:"%d xhur",y:"sena",yy:"%d sni"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(n(30381))},56165:function(e,t,n){!function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};e.defineLocale("my",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[.] LT []",nextDay:"[] LT []",nextWeek:"dddd LT []",lastDay:"[.] LT []",lastWeek:"[] dddd LT []",sameElse:"L"},relativeTime:{future:" %s ",past:" %s ",s:".",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},preparse:function(e){return e.replace(/[]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},week:{dow:1,doy:4}})}(n(30381))},64924:function(e,t,n){!function(e){"use strict";e.defineLocale("nb",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan._feb._mars_apr._mai_juni_juli_aug._sep._okt._nov._des.".split("_"),monthsParseExact:!0,weekdays:"sndag_mandag_tirsdag_onsdag_torsdag_fredag_lrdag".split("_"),weekdaysShort:"s._ma._ti._on._to._fr._l.".split("_"),weekdaysMin:"s_ma_ti_on_to_fr_l".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] HH:mm",LLLL:"dddd D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[i dag kl.] LT",nextDay:"[i morgen kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[i gr kl.] LT",lastWeek:"[forrige] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"noen sekunder",ss:"%d sekunder",m:"ett minutt",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dager",w:"en uke",ww:"%d uker",M:"en mned",MM:"%d mneder",y:"ett r",yy:"%d r"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(30381))},16744:function(e,t,n){!function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};e.defineLocale("ne",{months:"___________".split("_"),monthsShort:"._.__.___._._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"._._._._._._.".split("_"),weekdaysMin:"._._._._._._.".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},preparse:function(e){return e.replace(/[]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/|||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t?e<4?e:e+12:""===t?e:""===t?e>=10?e:e+12:""===t?e+12:void 0},meridiem:function(e,t,n){return e<3?"":e<12?"":e<16?"":e<20?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[] dddd[,] LT",lastDay:"[] LT",lastWeek:"[] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},week:{dow:0,doy:6}})}(n(30381))},59814:function(e,t,n){!function(e){"use strict";var t="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),n="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),r=[/^jan/i,/^feb/i,/^maart|mrt.?$/i,/^apr/i,/^mei$/i,/^jun[i.]?$/i,/^jul[i.]?$/i,/^aug/i,/^sep/i,/^okt/i,/^nov/i,/^dec/i],i=/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december|jan\.?|feb\.?|mrt\.?|apr\.?|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i;e.defineLocale("nl-be",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(e,r){return e?/-MMM-/.test(r)?n[e.month()]:t[e.month()]:t},monthsRegex:i,monthsShortRegex:i,monthsStrictRegex:/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december)/i,monthsShortStrictRegex:/^(jan\.?|feb\.?|mrt\.?|apr\.?|mei|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,monthsParse:r,longMonthsParse:r,shortMonthsParse:r,weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"zo_ma_di_wo_do_vr_za".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",ss:"%d seconden",m:"n minuut",mm:"%d minuten",h:"n uur",hh:"%d uur",d:"n dag",dd:"%d dagen",M:"n maand",MM:"%d maanden",y:"n jaar",yy:"%d jaar"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||e>=20?"ste":"de")},week:{dow:1,doy:4}})}(n(30381))},93901:function(e,t,n){!function(e){"use strict";var t="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),n="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),r=[/^jan/i,/^feb/i,/^maart|mrt.?$/i,/^apr/i,/^mei$/i,/^jun[i.]?$/i,/^jul[i.]?$/i,/^aug/i,/^sep/i,/^okt/i,/^nov/i,/^dec/i],i=/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december|jan\.?|feb\.?|mrt\.?|apr\.?|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i;e.defineLocale("nl",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(e,r){return e?/-MMM-/.test(r)?n[e.month()]:t[e.month()]:t},monthsRegex:i,monthsShortRegex:i,monthsStrictRegex:/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december)/i,monthsShortStrictRegex:/^(jan\.?|feb\.?|mrt\.?|apr\.?|mei|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,monthsParse:r,longMonthsParse:r,shortMonthsParse:r,weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"zo_ma_di_wo_do_vr_za".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",ss:"%d seconden",m:"n minuut",mm:"%d minuten",h:"n uur",hh:"%d uur",d:"n dag",dd:"%d dagen",w:"n week",ww:"%d weken",M:"n maand",MM:"%d maanden",y:"n jaar",yy:"%d jaar"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||e>=20?"ste":"de")},week:{dow:1,doy:4}})}(n(30381))},83877:function(e,t,n){!function(e){"use strict";e.defineLocale("nn",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan._feb._mars_apr._mai_juni_juli_aug._sep._okt._nov._des.".split("_"),monthsParseExact:!0,weekdays:"sundag_mndag_tysdag_onsdag_torsdag_fredag_laurdag".split("_"),weekdaysShort:"su._m._ty._on._to._fr._lau.".split("_"),weekdaysMin:"su_m_ty_on_to_fr_la".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] H:mm",LLLL:"dddd D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[I dag klokka] LT",nextDay:"[I morgon klokka] LT",nextWeek:"dddd [klokka] LT",lastDay:"[I gr klokka] LT",lastWeek:"[Fregande] dddd [klokka] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s sidan",s:"nokre sekund",ss:"%d sekund",m:"eit minutt",mm:"%d minutt",h:"ein time",hh:"%d timar",d:"ein dag",dd:"%d dagar",w:"ei veke",ww:"%d veker",M:"ein mnad",MM:"%d mnader",y:"eit r",yy:"%d r"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(30381))},92135:function(e,t,n){!function(e){"use strict";e.defineLocale("oc-lnc",{months:{standalone:"genir_febrir_mar_abril_mai_junh_julhet_agost_setembre_octbre_novembre_decembre".split("_"),format:"de genir_de febrir_de mar_d'abril_de mai_de junh_de julhet_d'agost_de setembre_d'octbre_de novembre_de decembre".split("_"),isFormat:/D[oD]?(\s)+MMMM/},monthsShort:"gen._febr._mar_abr._mai_junh_julh._ago._set._oct._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"dimenge_diluns_dimars_dimcres_dijus_divendres_dissabte".split("_"),weekdaysShort:"dg._dl._dm._dc._dj._dv._ds.".split("_"),weekdaysMin:"dg_dl_dm_dc_dj_dv_ds".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [de] YYYY",ll:"D MMM YYYY",LLL:"D MMMM [de] YYYY [a] H:mm",lll:"D MMM YYYY, H:mm",LLLL:"dddd D MMMM [de] YYYY [a] H:mm",llll:"ddd D MMM YYYY, H:mm"},calendar:{sameDay:"[ui a] LT",nextDay:"[deman a] LT",nextWeek:"dddd [a] LT",lastDay:"[ir a] LT",lastWeek:"dddd [passat a] LT",sameElse:"L"},relativeTime:{future:"d'aqu %s",past:"fa %s",s:"unas segondas",ss:"%d segondas",m:"una minuta",mm:"%d minutas",h:"una ora",hh:"%d oras",d:"un jorn",dd:"%d jorns",M:"un mes",MM:"%d meses",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(r|n|t||a)/,ordinal:function(e,t){var n=1===e?"r":2===e?"n":3===e?"r":4===e?"t":"";return"w"!==t&&"W"!==t||(n="a"),e+n},week:{dow:1,doy:4}})}(n(30381))},15858:function(e,t,n){!function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};e.defineLocale("pa-in",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[] dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(/[]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/|||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t?e<4?e:e+12:""===t?e:""===t?e>=10?e:e+12:""===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"":e<10?"":e<17?"":e<20?"":""},week:{dow:0,doy:6}})}(n(30381))},64495:function(e,t,n){!function(e){"use strict";var t="stycze_luty_marzec_kwiecie_maj_czerwiec_lipiec_sierpie_wrzesie_padziernik_listopad_grudzie".split("_"),n="stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_wrzenia_padziernika_listopada_grudnia".split("_"),r=[/^sty/i,/^lut/i,/^mar/i,/^kwi/i,/^maj/i,/^cze/i,/^lip/i,/^sie/i,/^wrz/i,/^pa/i,/^lis/i,/^gru/i];function i(e){return e%10<5&&e%10>1&&~~(e/10)%10!=1}function o(e,t,n){var r=e+" ";switch(n){case"ss":return r+(i(e)?"sekundy":"sekund");case"m":return t?"minuta":"minut";case"mm":return r+(i(e)?"minuty":"minut");case"h":return t?"godzina":"godzin";case"hh":return r+(i(e)?"godziny":"godzin");case"ww":return r+(i(e)?"tygodnie":"tygodni");case"MM":return r+(i(e)?"miesice":"miesicy");case"yy":return r+(i(e)?"lata":"lat")}}e.defineLocale("pl",{months:function(e,r){return e?/D MMMM/.test(r)?n[e.month()]:t[e.month()]:t},monthsShort:"sty_lut_mar_kwi_maj_cze_lip_sie_wrz_pa_lis_gru".split("_"),monthsParse:r,longMonthsParse:r,shortMonthsParse:r,weekdays:"niedziela_poniedziaek_wtorek_roda_czwartek_pitek_sobota".split("_"),weekdaysShort:"ndz_pon_wt_r_czw_pt_sob".split("_"),weekdaysMin:"Nd_Pn_Wt_r_Cz_Pt_So".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Dzi o] LT",nextDay:"[Jutro o] LT",nextWeek:function(){switch(this.day()){case 0:return"[W niedziel o] LT";case 2:return"[We wtorek o] LT";case 3:return"[W rod o] LT";case 6:return"[W sobot o] LT";default:return"[W] dddd [o] LT"}},lastDay:"[Wczoraj o] LT",lastWeek:function(){switch(this.day()){case 0:return"[W zesz niedziel o] LT";case 3:return"[W zesz rod o] LT";case 6:return"[W zesz sobot o] LT";default:return"[W zeszy] dddd [o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"%s temu",s:"kilka sekund",ss:o,m:o,mm:o,h:o,hh:o,d:"1 dzie",dd:"%d dni",w:"tydzie",ww:o,M:"miesic",MM:o,y:"rok",yy:o},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(30381))},57971:function(e,t,n){!function(e){"use strict";e.defineLocale("pt-br",{months:"janeiro_fevereiro_maro_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro".split("_"),monthsShort:"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez".split("_"),weekdays:"domingo_segunda-feira_tera-feira_quarta-feira_quinta-feira_sexta-feira_sbado".split("_"),weekdaysShort:"dom_seg_ter_qua_qui_sex_sb".split("_"),weekdaysMin:"do_2_3_4_5_6_s".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY [s] HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY [s] HH:mm"},calendar:{sameDay:"[Hoje s] LT",nextDay:"[Amanh s] LT",nextWeek:"dddd [s] LT",lastDay:"[Ontem s] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[ltimo] dddd [s] LT":"[ltima] dddd [s] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"h %s",s:"poucos segundos",ss:"%d segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um ms",MM:"%d meses",y:"um ano",yy:"%d anos"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",invalidDate:"Data invlida"})}(n(30381))},89520:function(e,t,n){!function(e){"use strict";e.defineLocale("pt",{months:"janeiro_fevereiro_maro_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro".split("_"),monthsShort:"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez".split("_"),weekdays:"Domingo_Segunda-feira_Tera-feira_Quarta-feira_Quinta-feira_Sexta-feira_Sbado".split("_"),weekdaysShort:"Dom_Seg_Ter_Qua_Qui_Sex_Sb".split("_"),weekdaysMin:"Do_2_3_4_5_6_S".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY HH:mm"},calendar:{sameDay:"[Hoje s] LT",nextDay:"[Amanh s] LT",nextWeek:"dddd [s] LT",lastDay:"[Ontem s] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[ltimo] dddd [s] LT":"[ltima] dddd [s] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"h %s",s:"segundos",ss:"%d segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",w:"uma semana",ww:"%d semanas",M:"um ms",MM:"%d meses",y:"um ano",yy:"%d anos"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(n(30381))},96459:function(e,t,n){!function(e){"use strict";function t(e,t,n){var r=" ";return(e%100>=20||e>=100&&e%100==0)&&(r=" de "),e+r+{ss:"secunde",mm:"minute",hh:"ore",dd:"zile",ww:"sptmni",MM:"luni",yy:"ani"}[n]}e.defineLocale("ro",{months:"ianuarie_februarie_martie_aprilie_mai_iunie_iulie_august_septembrie_octombrie_noiembrie_decembrie".split("_"),monthsShort:"ian._feb._mart._apr._mai_iun._iul._aug._sept._oct._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"duminic_luni_mari_miercuri_joi_vineri_smbt".split("_"),weekdaysShort:"Dum_Lun_Mar_Mie_Joi_Vin_Sm".split("_"),weekdaysMin:"Du_Lu_Ma_Mi_Jo_Vi_S".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[azi la] LT",nextDay:"[mine la] LT",nextWeek:"dddd [la] LT",lastDay:"[ieri la] LT",lastWeek:"[fosta] dddd [la] LT",sameElse:"L"},relativeTime:{future:"peste %s",past:"%s n urm",s:"cteva secunde",ss:t,m:"un minut",mm:t,h:"o or",hh:t,d:"o zi",dd:t,w:"o sptmn",ww:t,M:"o lun",MM:t,y:"un an",yy:t},week:{dow:1,doy:7}})}(n(30381))},21793:function(e,t,n){!function(e){"use strict";function t(e,t){var n=e.split("_");return t%10==1&&t%100!=11?n[0]:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?n[1]:n[2]}function n(e,n,r){return"m"===r?n?"":"":e+" "+t({ss:n?"__":"__",mm:n?"__":"__",hh:"__",dd:"__",ww:"__",MM:"__",yy:"__"}[r],+e)}var r=[/^/i,/^/i,/^/i,/^/i,/^[]/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i];e.defineLocale("ru",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:{format:"._._._.____._._._._.".split("_"),standalone:"._.__.____._._._._.".split("_")},weekdays:{standalone:"______".split("_"),format:"______".split("_"),isFormat:/\[ ?[] ?(?:||)? ?] ?dddd/},weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),monthsParse:r,longMonthsParse:r,shortMonthsParse:r,monthsRegex:/^([]|\.?|[]|?\.?|?|\.?|[]|\.?|[]|[]|\.?|[]|\.?|?|\.?|[]|?\.?|[]|\.?|[]|?\.?|[]|\.?)/i,monthsShortRegex:/^([]|\.?|[]|?\.?|?|\.?|[]|\.?|[]|[]|\.?|[]|\.?|?|\.?|[]|?\.?|[]|\.?|[]|?\.?|[]|\.?)/i,monthsStrictRegex:/^([]|[]|?|[]|[]|[]|[]|?|[]|[]|[]|[])/i,monthsShortStrictRegex:/^(\.|?\.|[.]|\.|[]|[.]|[.]|\.|?\.|\.|?\.|\.)/i,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., H:mm",LLLL:"dddd, D MMMM YYYY ., H:mm"},calendar:{sameDay:"[, ] LT",nextDay:"[, ] LT",lastDay:"[, ] LT",nextWeek:function(e){if(e.week()===this.week())return 2===this.day()?"[] dddd, [] LT":"[] dddd, [] LT";switch(this.day()){case 0:return"[ ] dddd, [] LT";case 1:case 2:case 4:return"[ ] dddd, [] LT";case 3:case 5:case 6:return"[ ] dddd, [] LT"}},lastWeek:function(e){if(e.week()===this.week())return 2===this.day()?"[] dddd, [] LT":"[] dddd, [] LT";switch(this.day()){case 0:return"[ ] dddd, [] LT";case 1:case 2:case 4:return"[ ] dddd, [] LT";case 3:case 5:case 6:return"[ ] dddd, [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",ss:n,m:n,mm:n,h:"",hh:n,d:"",dd:n,w:"",ww:n,M:"",MM:n,y:"",yy:n},meridiemParse:/|||/i,isPM:function(e){return/^(|)$/.test(e)},meridiem:function(e,t,n){return e<4?"":e<12?"":e<17?"":""},dayOfMonthOrdinalParse:/\d{1,2}-(||)/,ordinal:function(e,t){switch(t){case"M":case"d":case"DDD":return e+"-";case"D":return e+"-";case"w":case"W":return e+"-";default:return e}},week:{dow:1,doy:4}})}(n(30381))},40950:function(e,t,n){!function(e){"use strict";var t=["","","","","","","","","","","",""],n=["","","","","","",""];e.defineLocale("sd",{months:t,monthsShort:t,weekdays:n,weekdaysShort:n,weekdaysMin:n,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,t,n){return e<12?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd [  ] LT",lastDay:"[] LT",lastWeek:"[ ] dddd [] LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(//g,",")},postformat:function(e){return e.replace(/,/g,"")},week:{dow:1,doy:4}})}(n(30381))},10490:function(e,t,n){!function(e){"use strict";e.defineLocale("se",{months:"oajagemnnu_guovvamnnu_njukamnnu_cuoomnnu_miessemnnu_geassemnnu_suoidnemnnu_borgemnnu_akamnnu_golggotmnnu_skbmamnnu_juovlamnnu".split("_"),monthsShort:"oj_guov_njuk_cuo_mies_geas_suoi_borg_ak_golg_skb_juov".split("_"),weekdays:"sotnabeaivi_vuossrga_maebrga_gaskavahkku_duorastat_bearjadat_lvvardat".split("_"),weekdaysShort:"sotn_vuos_ma_gask_duor_bear_lv".split("_"),weekdaysMin:"s_v_m_g_d_b_L".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"MMMM D. [b.] YYYY",LLL:"MMMM D. [b.] YYYY [ti.] HH:mm",LLLL:"dddd, MMMM D. [b.] YYYY [ti.] HH:mm"},calendar:{sameDay:"[otne ti] LT",nextDay:"[ihttin ti] LT",nextWeek:"dddd [ti] LT",lastDay:"[ikte ti] LT",lastWeek:"[ovddit] dddd [ti] LT",sameElse:"L"},relativeTime:{future:"%s geaes",past:"mait %s",s:"moadde sekunddat",ss:"%d sekunddat",m:"okta minuhta",mm:"%d minuhtat",h:"okta diimmu",hh:"%d diimmut",d:"okta beaivi",dd:"%d beaivvit",M:"okta mnnu",MM:"%d mnut",y:"okta jahki",yy:"%d jagit"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(30381))},90124:function(e,t,n){!function(e){"use strict";e.defineLocale("si",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"a h:mm",LTS:"a h:mm:ss",L:"YYYY/MM/DD",LL:"YYYY MMMM D",LLL:"YYYY MMMM D, a h:mm",LLLL:"YYYY MMMM D [] dddd, a h:mm:ss"},calendar:{sameDay:"[] LT[]",nextDay:"[] LT[]",nextWeek:"dddd LT[]",lastDay:"[] LT[]",lastWeek:"[] dddd LT[]",sameElse:"L"},relativeTime:{future:"%s",past:"%s ",s:" ",ss:" %d",m:"",mm:" %d",h:"",hh:" %d",d:"",dd:" %d",M:"",MM:" %d",y:"",yy:" %d"},dayOfMonthOrdinalParse:/\d{1,2} /,ordinal:function(e){return e+" "},meridiemParse:/ | |.|../,isPM:function(e){return".."===e||" "===e},meridiem:function(e,t,n){return e>11?n?"..":" ":n?"..":" "}})}(n(30381))},64249:function(e,t,n){!function(e){"use strict";var t="janur_februr_marec_aprl_mj_jn_jl_august_september_oktber_november_december".split("_"),n="jan_feb_mar_apr_mj_jn_jl_aug_sep_okt_nov_dec".split("_");function r(e){return e>1&&e<5}function i(e,t,n,i){var o=e+" ";switch(n){case"s":return t||i?"pr seknd":"pr sekundami";case"ss":return t||i?o+(r(e)?"sekundy":"seknd"):o+"sekundami";case"m":return t?"minta":i?"mintu":"mintou";case"mm":return t||i?o+(r(e)?"minty":"mint"):o+"mintami";case"h":return t?"hodina":i?"hodinu":"hodinou";case"hh":return t||i?o+(r(e)?"hodiny":"hodn"):o+"hodinami";case"d":return t||i?"de":"dom";case"dd":return t||i?o+(r(e)?"dni":"dn"):o+"dami";case"M":return t||i?"mesiac":"mesiacom";case"MM":return t||i?o+(r(e)?"mesiace":"mesiacov"):o+"mesiacmi";case"y":return t||i?"rok":"rokom";case"yy":return t||i?o+(r(e)?"roky":"rokov"):o+"rokmi"}}e.defineLocale("sk",{months:t,monthsShort:n,weekdays:"nedea_pondelok_utorok_streda_tvrtok_piatok_sobota".split("_"),weekdaysShort:"ne_po_ut_st_t_pi_so".split("_"),weekdaysMin:"ne_po_ut_st_t_pi_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm"},calendar:{sameDay:"[dnes o] LT",nextDay:"[zajtra o] LT",nextWeek:function(){switch(this.day()){case 0:return"[v nedeu o] LT";case 1:case 2:return"[v] dddd [o] LT";case 3:return"[v stredu o] LT";case 4:return"[vo tvrtok o] LT";case 5:return"[v piatok o] LT";case 6:return"[v sobotu o] LT"}},lastDay:"[vera o] LT",lastWeek:function(){switch(this.day()){case 0:return"[minul nedeu o] LT";case 1:case 2:case 4:case 5:return"[minul] dddd [o] LT";case 3:return"[minul stredu o] LT";case 6:return"[minul sobotu o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"pred %s",s:i,ss:i,m:i,mm:i,h:i,hh:i,d:i,dd:i,M:i,MM:i,y:i,yy:i},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(30381))},14985:function(e,t,n){!function(e){"use strict";function t(e,t,n,r){var i=e+" ";switch(n){case"s":return t||r?"nekaj sekund":"nekaj sekundami";case"ss":return i+=1===e?t?"sekundo":"sekundi":2===e?t||r?"sekundi":"sekundah":e<5?t||r?"sekunde":"sekundah":"sekund";case"m":return t?"ena minuta":"eno minuto";case"mm":return i+=1===e?t?"minuta":"minuto":2===e?t||r?"minuti":"minutama":e<5?t||r?"minute":"minutami":t||r?"minut":"minutami";case"h":return t?"ena ura":"eno uro";case"hh":return i+=1===e?t?"ura":"uro":2===e?t||r?"uri":"urama":e<5?t||r?"ure":"urami":t||r?"ur":"urami";case"d":return t||r?"en dan":"enim dnem";case"dd":return i+=1===e?t||r?"dan":"dnem":2===e?t||r?"dni":"dnevoma":t||r?"dni":"dnevi";case"M":return t||r?"en mesec":"enim mesecem";case"MM":return i+=1===e?t||r?"mesec":"mesecem":2===e?t||r?"meseca":"mesecema":e<5?t||r?"mesece":"meseci":t||r?"mesecev":"meseci";case"y":return t||r?"eno leto":"enim letom";case"yy":return i+=1===e?t||r?"leto":"letom":2===e?t||r?"leti":"letoma":e<5?t||r?"leta":"leti":t||r?"let":"leti"}}e.defineLocale("sl",{months:"januar_februar_marec_april_maj_junij_julij_avgust_september_oktober_november_december".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedelja_ponedeljek_torek_sreda_etrtek_petek_sobota".split("_"),weekdaysShort:"ned._pon._tor._sre._et._pet._sob.".split("_"),weekdaysMin:"ne_po_to_sr_e_pe_so".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danes ob] LT",nextDay:"[jutri ob] LT",nextWeek:function(){switch(this.day()){case 0:return"[v] [nedeljo] [ob] LT";case 3:return"[v] [sredo] [ob] LT";case 6:return"[v] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[v] dddd [ob] LT"}},lastDay:"[veraj ob] LT",lastWeek:function(){switch(this.day()){case 0:return"[prejnjo] [nedeljo] [ob] LT";case 3:return"[prejnjo] [sredo] [ob] LT";case 6:return"[prejnjo] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[prejnji] dddd [ob] LT"}},sameElse:"L"},relativeTime:{future:"ez %s",past:"pred %s",s:t,ss:t,m:t,mm:t,h:t,hh:t,d:t,dd:t,M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(30381))},51104:function(e,t,n){!function(e){"use strict";e.defineLocale("sq",{months:"Janar_Shkurt_Mars_Prill_Maj_Qershor_Korrik_Gusht_Shtator_Tetor_Nntor_Dhjetor".split("_"),monthsShort:"Jan_Shk_Mar_Pri_Maj_Qer_Kor_Gus_Sht_Tet_Nn_Dhj".split("_"),weekdays:"E Diel_E Hn_E Mart_E Mrkur_E Enjte_E Premte_E Shtun".split("_"),weekdaysShort:"Die_Hn_Mar_Mr_Enj_Pre_Sht".split("_"),weekdaysMin:"D_H_Ma_M_E_P_Sh".split("_"),weekdaysParseExact:!0,meridiemParse:/PD|MD/,isPM:function(e){return"M"===e.charAt(0)},meridiem:function(e,t,n){return e<12?"PD":"MD"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Sot n] LT",nextDay:"[Nesr n] LT",nextWeek:"dddd [n] LT",lastDay:"[Dje n] LT",lastWeek:"dddd [e kaluar n] LT",sameElse:"L"},relativeTime:{future:"n %s",past:"%s m par",s:"disa sekonda",ss:"%d sekonda",m:"nj minut",mm:"%d minuta",h:"nj or",hh:"%d or",d:"nj dit",dd:"%d dit",M:"nj muaj",MM:"%d muaj",y:"nj vit",yy:"%d vite"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(30381))},79915:function(e,t,n){!function(e){"use strict";var t={words:{ss:["","",""],m:[" "," "],mm:["","",""],h:[" "," "],hh:["","",""],dd:["","",""],MM:["","",""],yy:["","",""]},correctGrammaticalCase:function(e,t){return 1===e?t[0]:e>=2&&e<=4?t[1]:t[2]},translate:function(e,n,r){var i=t.words[r];return 1===r.length?n?i[0]:i[1]:e+" "+t.correctGrammaticalCase(e,i)}};e.defineLocale("sr-cyrl",{months:"___________".split("_"),monthsShort:"._._._.____._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"._._._._._._.".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D. M. YYYY.",LL:"D. MMMM YYYY.",LLL:"D. MMMM YYYY. H:mm",LLLL:"dddd, D. MMMM YYYY. H:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:function(){switch(this.day()){case 0:return"[] [] [] LT";case 3:return"[] [] [] LT";case 6:return"[] [] [] LT";case 1:case 2:case 4:case 5:return"[] dddd [] LT"}},lastDay:"[ ] LT",lastWeek:function(){return["[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT"][this.day()]},sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",ss:t.translate,m:t.translate,mm:t.translate,h:t.translate,hh:t.translate,d:"",dd:t.translate,M:"",MM:t.translate,y:"",yy:t.translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(30381))},49131:function(e,t,n){!function(e){"use strict";var t={words:{ss:["sekunda","sekunde","sekundi"],m:["jedan minut","jedne minute"],mm:["minut","minute","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan","dana","dana"],MM:["mesec","meseca","meseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(e,t){return 1===e?t[0]:e>=2&&e<=4?t[1]:t[2]},translate:function(e,n,r){var i=t.words[r];return 1===r.length?n?i[0]:i[1]:e+" "+t.correctGrammaticalCase(e,i)}};e.defineLocale("sr",{months:"januar_februar_mart_april_maj_jun_jul_avgust_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj_jun_jul_avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedelja_ponedeljak_utorak_sreda_etvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sre._et._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_e_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D. M. YYYY.",LL:"D. MMMM YYYY.",LLL:"D. MMMM YYYY. H:mm",LLLL:"dddd, D. MMMM YYYY. H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedelju] [u] LT";case 3:return"[u] [sredu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jue u] LT",lastWeek:function(){return["[prole] [nedelje] [u] LT","[prolog] [ponedeljka] [u] LT","[prolog] [utorka] [u] LT","[prole] [srede] [u] LT","[prolog] [etvrtka] [u] LT","[prolog] [petka] [u] LT","[prole] [subote] [u] LT"][this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"pre %s",s:"nekoliko sekundi",ss:t.translate,m:t.translate,mm:t.translate,h:t.translate,hh:t.translate,d:"dan",dd:t.translate,M:"mesec",MM:t.translate,y:"godinu",yy:t.translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(30381))},85893:function(e,t,n){!function(e){"use strict";e.defineLocale("ss",{months:"Bhimbidvwane_Indlovana_Indlov'lenkhulu_Mabasa_Inkhwekhweti_Inhlaba_Kholwane_Ingci_Inyoni_Imphala_Lweti_Ingongoni".split("_"),monthsShort:"Bhi_Ina_Inu_Mab_Ink_Inh_Kho_Igc_Iny_Imp_Lwe_Igo".split("_"),weekdays:"Lisontfo_Umsombuluko_Lesibili_Lesitsatfu_Lesine_Lesihlanu_Umgcibelo".split("_"),weekdaysShort:"Lis_Umb_Lsb_Les_Lsi_Lsh_Umg".split("_"),weekdaysMin:"Li_Us_Lb_Lt_Ls_Lh_Ug".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Namuhla nga] LT",nextDay:"[Kusasa nga] LT",nextWeek:"dddd [nga] LT",lastDay:"[Itolo nga] LT",lastWeek:"dddd [leliphelile] [nga] LT",sameElse:"L"},relativeTime:{future:"nga %s",past:"wenteka nga %s",s:"emizuzwana lomcane",ss:"%d mzuzwana",m:"umzuzu",mm:"%d emizuzu",h:"lihora",hh:"%d emahora",d:"lilanga",dd:"%d emalanga",M:"inyanga",MM:"%d tinyanga",y:"umnyaka",yy:"%d iminyaka"},meridiemParse:/ekuseni|emini|entsambama|ebusuku/,meridiem:function(e,t,n){return e<11?"ekuseni":e<15?"emini":e<19?"entsambama":"ebusuku"},meridiemHour:function(e,t){return 12===e&&(e=0),"ekuseni"===t?e:"emini"===t?e>=11?e:e+12:"entsambama"===t||"ebusuku"===t?0===e?0:e+12:void 0},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(n(30381))},98760:function(e,t,n){!function(e){"use strict";e.defineLocale("sv",{months:"januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"sndag_mndag_tisdag_onsdag_torsdag_fredag_lrdag".split("_"),weekdaysShort:"sn_mn_tis_ons_tor_fre_lr".split("_"),weekdaysMin:"s_m_ti_on_to_fr_l".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [kl.] HH:mm",LLLL:"dddd D MMMM YYYY [kl.] HH:mm",lll:"D MMM YYYY HH:mm",llll:"ddd D MMM YYYY HH:mm"},calendar:{sameDay:"[Idag] LT",nextDay:"[Imorgon] LT",lastDay:"[Igr] LT",nextWeek:"[P] dddd LT",lastWeek:"[I] dddd[s] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"fr %s sedan",s:"ngra sekunder",ss:"%d sekunder",m:"en minut",mm:"%d minuter",h:"en timme",hh:"%d timmar",d:"en dag",dd:"%d dagar",M:"en mnad",MM:"%d mnader",y:"ett r",yy:"%d r"},dayOfMonthOrdinalParse:/\d{1,2}(\:e|\:a)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?":e":1===t||2===t?":a":":e")},week:{dow:1,doy:4}})}(n(30381))},91172:function(e,t,n){!function(e){"use strict";e.defineLocale("sw",{months:"Januari_Februari_Machi_Aprili_Mei_Juni_Julai_Agosti_Septemba_Oktoba_Novemba_Desemba".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ago_Sep_Okt_Nov_Des".split("_"),weekdays:"Jumapili_Jumatatu_Jumanne_Jumatano_Alhamisi_Ijumaa_Jumamosi".split("_"),weekdaysShort:"Jpl_Jtat_Jnne_Jtan_Alh_Ijm_Jmos".split("_"),weekdaysMin:"J2_J3_J4_J5_Al_Ij_J1".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"hh:mm A",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[leo saa] LT",nextDay:"[kesho saa] LT",nextWeek:"[wiki ijayo] dddd [saat] LT",lastDay:"[jana] LT",lastWeek:"[wiki iliyopita] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s baadaye",past:"tokea %s",s:"hivi punde",ss:"sekunde %d",m:"dakika moja",mm:"dakika %d",h:"saa limoja",hh:"masaa %d",d:"siku moja",dd:"siku %d",M:"mwezi mmoja",MM:"miezi %d",y:"mwaka mmoja",yy:"miaka %d"},week:{dow:1,doy:7}})}(n(30381))},27333:function(e,t,n){!function(e){"use strict";var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};e.defineLocale("ta",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, HH:mm",LLLL:"dddd, D MMMM YYYY, HH:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[ ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"  ",ss:"%d ",m:" ",mm:"%d ",h:"  ",hh:"%d  ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(e){return e+""},preparse:function(e){return e.replace(/[]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/|||||/,meridiem:function(e,t,n){return e<2?" ":e<6?" ":e<10?" ":e<14?" ":e<18?" ":e<22?" ":" "},meridiemHour:function(e,t){return 12===e&&(e=0),""===t?e<2?e:e+12:""===t||""===t||""===t&&e>=10?e:e+12},week:{dow:0,doy:6}})}(n(30381))},23110:function(e,t,n){!function(e){"use strict";e.defineLocale("te",{months:"___________".split("_"),monthsShort:"._.__.____._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",meridiemParse:/|||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t?e<4?e:e+12:""===t?e:""===t?e>=10?e:e+12:""===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"":e<10?"":e<17?"":e<20?"":""},week:{dow:0,doy:6}})}(n(30381))},52095:function(e,t,n){!function(e){"use strict";e.defineLocale("tet",{months:"Janeiru_Fevereiru_Marsu_Abril_Maiu_Juu_Jullu_Agustu_Setembru_Outubru_Novembru_Dezembru".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),weekdays:"Domingu_Segunda_Tersa_Kuarta_Kinta_Sesta_Sabadu".split("_"),weekdaysShort:"Dom_Seg_Ters_Kua_Kint_Sest_Sab".split("_"),weekdaysMin:"Do_Seg_Te_Ku_Ki_Ses_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Ohin iha] LT",nextDay:"[Aban iha] LT",nextWeek:"dddd [iha] LT",lastDay:"[Horiseik iha] LT",lastWeek:"dddd [semana kotuk] [iha] LT",sameElse:"L"},relativeTime:{future:"iha %s",past:"%s liuba",s:"segundu balun",ss:"segundu %d",m:"minutu ida",mm:"minutu %d",h:"oras ida",hh:"oras %d",d:"loron ida",dd:"loron %d",M:"fulan ida",MM:"fulan %d",y:"tinan ida",yy:"tinan %d"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}(n(30381))},27321:function(e,t,n){!function(e){"use strict";var t={0:"-",1:"-",2:"-",3:"-",4:"-",5:"-",6:"-",7:"-",8:"-",9:"-",10:"-",12:"-",13:"-",20:"-",30:"-",40:"-",50:"-",60:"-",70:"-",80:"-",90:"-",100:"-"};e.defineLocale("tg",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",lastDay:"[ ] LT",nextWeek:"dddd[] [  ] LT",lastWeek:"dddd[] [  ] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},meridiemParse:/|||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t?e<4?e:e+12:""===t?e:""===t?e>=11?e:e+12:""===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"":e<11?"":e<16?"":e<19?"":""},dayOfMonthOrdinalParse:/\d{1,2}-(|)/,ordinal:function(e){var n=e%10,r=e>=100?100:null;return e+(t[e]||t[n]||t[r])},week:{dow:1,doy:7}})}(n(30381))},9041:function(e,t,n){!function(e){"use strict";e.defineLocale("th",{months:"___________".split("_"),monthsShort:".._.._.._.._.._.._.._.._.._.._.._..".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"._._._._._._.".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY  H:mm",LLLL:"dddd D MMMM YYYY  H:mm"},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,t,n){return e<12?"":""},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd[ ] LT",lastDay:"[ ] LT",lastWeek:"[]dddd[ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s",s:"",ss:"%d ",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",w:"1 ",ww:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "}})}(n(30381))},19005:function(e,t,n){!function(e){"use strict";var t={1:"'inji",5:"'inji",8:"'inji",70:"'inji",80:"'inji",2:"'nji",7:"'nji",20:"'nji",50:"'nji",3:"'nji",4:"'nji",100:"'nji",6:"'njy",9:"'unjy",10:"'unjy",30:"'unjy",60:"'ynjy",90:"'ynjy"};e.defineLocale("tk",{months:"anwar_Fewral_Mart_Aprel_Ma_Iun_Iul_Awgust_Sentabr_Oktabr_Noabr_Dekabr".split("_"),monthsShort:"an_Few_Mar_Apr_Ma_In_Il_Awg_Sen_Okt_No_Dek".split("_"),weekdays:"ekenbe_Duenbe_Sienbe_arenbe_Penenbe_Anna_enbe".split("_"),weekdaysShort:"ek_Du_Si_ar_Pen_Ann_en".split("_"),weekdaysMin:"k_D_S_r_Pn_An_n".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugn sagat] LT",nextDay:"[ertir sagat] LT",nextWeek:"[indiki] dddd [sagat] LT",lastDay:"[dn] LT",lastWeek:"[geen] dddd [sagat] LT",sameElse:"L"},relativeTime:{future:"%s so",past:"%s ",s:"birne sekunt",m:"bir minut",mm:"%d minut",h:"bir sagat",hh:"%d sagat",d:"bir gn",dd:"%d gn",M:"bir a",MM:"%d a",y:"bir yl",yy:"%d yl"},ordinal:function(e,n){switch(n){case"d":case"D":case"Do":case"DD":return e;default:if(0===e)return e+"'unjy";var r=e%10,i=e%100-r,o=e>=100?100:null;return e+(t[r]||t[i]||t[o])}},week:{dow:1,doy:7}})}(n(30381))},75768:function(e,t,n){!function(e){"use strict";e.defineLocale("tl-ph",{months:"Enero_Pebrero_Marso_Abril_Mayo_Hunyo_Hulyo_Agosto_Setyembre_Oktubre_Nobyembre_Disyembre".split("_"),monthsShort:"Ene_Peb_Mar_Abr_May_Hun_Hul_Ago_Set_Okt_Nob_Dis".split("_"),weekdays:"Linggo_Lunes_Martes_Miyerkules_Huwebes_Biyernes_Sabado".split("_"),weekdaysShort:"Lin_Lun_Mar_Miy_Huw_Biy_Sab".split("_"),weekdaysMin:"Li_Lu_Ma_Mi_Hu_Bi_Sab".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"MM/D/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY HH:mm",LLLL:"dddd, MMMM DD, YYYY HH:mm"},calendar:{sameDay:"LT [ngayong araw]",nextDay:"[Bukas ng] LT",nextWeek:"LT [sa susunod na] dddd",lastDay:"LT [kahapon]",lastWeek:"LT [noong nakaraang] dddd",sameElse:"L"},relativeTime:{future:"sa loob ng %s",past:"%s ang nakalipas",s:"ilang segundo",ss:"%d segundo",m:"isang minuto",mm:"%d minuto",h:"isang oras",hh:"%d oras",d:"isang araw",dd:"%d araw",M:"isang buwan",MM:"%d buwan",y:"isang taon",yy:"%d taon"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(e){return e},week:{dow:1,doy:4}})}(n(30381))},89444:function(e,t,n){!function(e){"use strict";var t="pagh_wa_cha_wej_loS_vagh_jav_Soch_chorgh_Hut".split("_");function n(e){var t=e;return t=-1!==e.indexOf("jaj")?t.slice(0,-3)+"leS":-1!==e.indexOf("jar")?t.slice(0,-3)+"waQ":-1!==e.indexOf("DIS")?t.slice(0,-3)+"nem":t+" pIq"}function r(e){var t=e;return t=-1!==e.indexOf("jaj")?t.slice(0,-3)+"Hu":-1!==e.indexOf("jar")?t.slice(0,-3)+"wen":-1!==e.indexOf("DIS")?t.slice(0,-3)+"ben":t+" ret"}function i(e,t,n,r){var i=o(e);switch(n){case"ss":return i+" lup";case"mm":return i+" tup";case"hh":return i+" rep";case"dd":return i+" jaj";case"MM":return i+" jar";case"yy":return i+" DIS"}}function o(e){var n=Math.floor(e%1e3/100),r=Math.floor(e%100/10),i=e%10,o="";return n>0&&(o+=t[n]+"vatlh"),r>0&&(o+=(""!==o?" ":"")+t[r]+"maH"),i>0&&(o+=(""!==o?" ":"")+t[i]),""===o?"pagh":o}e.defineLocale("tlh",{months:"tera jar wa_tera jar cha_tera jar wej_tera jar loS_tera jar vagh_tera jar jav_tera jar Soch_tera jar chorgh_tera jar Hut_tera jar wamaH_tera jar wamaH wa_tera jar wamaH cha".split("_"),monthsShort:"jar wa_jar cha_jar wej_jar loS_jar vagh_jar jav_jar Soch_jar chorgh_jar Hut_jar wamaH_jar wamaH wa_jar wamaH cha".split("_"),monthsParseExact:!0,weekdays:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),weekdaysShort:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),weekdaysMin:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[DaHjaj] LT",nextDay:"[waleS] LT",nextWeek:"LLL",lastDay:"[waHu] LT",lastWeek:"LLL",sameElse:"L"},relativeTime:{future:n,past:r,s:"puS lup",ss:i,m:"wa tup",mm:i,h:"wa rep",hh:i,d:"wa jaj",dd:i,M:"wa jar",MM:i,y:"wa DIS",yy:i},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(30381))},72397:function(e,t,n){!function(e){"use strict";var t={1:"'inci",5:"'inci",8:"'inci",70:"'inci",80:"'inci",2:"'nci",7:"'nci",20:"'nci",50:"'nci",3:"'nc",4:"'nc",100:"'nc",6:"'nc",9:"'uncu",10:"'uncu",30:"'uncu",60:"'nc",90:"'nc"};e.defineLocale("tr",{months:"Ocak_ubat_Mart_Nisan_Mays_Haziran_Temmuz_Austos_Eyll_Ekim_Kasm_Aralk".split("_"),monthsShort:"Oca_ub_Mar_Nis_May_Haz_Tem_Au_Eyl_Eki_Kas_Ara".split("_"),weekdays:"Pazar_Pazartesi_Sal_aramba_Perembe_Cuma_Cumartesi".split("_"),weekdaysShort:"Paz_Pts_Sal_ar_Per_Cum_Cts".split("_"),weekdaysMin:"Pz_Pt_Sa_a_Pe_Cu_Ct".split("_"),meridiem:function(e,t,n){return e<12?n?"":"":n?"s":"S"},meridiemParse:/||s|S/,isPM:function(e){return"s"===e||"S"===e},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugn saat] LT",nextDay:"[yarn saat] LT",nextWeek:"[gelecek] dddd [saat] LT",lastDay:"[dn] LT",lastWeek:"[geen] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s nce",s:"birka saniye",ss:"%d saniye",m:"bir dakika",mm:"%d dakika",h:"bir saat",hh:"%d saat",d:"bir gn",dd:"%d gn",w:"bir hafta",ww:"%d hafta",M:"bir ay",MM:"%d ay",y:"bir yl",yy:"%d yl"},ordinal:function(e,n){switch(n){case"d":case"D":case"Do":case"DD":return e;default:if(0===e)return e+"'nc";var r=e%10,i=e%100-r,o=e>=100?100:null;return e+(t[r]||t[i]||t[o])}},week:{dow:1,doy:7}})}(n(30381))},28254:function(e,t,n){!function(e){"use strict";function t(e,t,n,r){var i={s:["viensas secunds","'iensas secunds"],ss:[e+" secunds",e+" secunds"],m:["'n mut","'iens mut"],mm:[e+" muts",e+" muts"],h:["'n ora","'iensa ora"],hh:[e+" oras",e+" oras"],d:["'n ziua","'iensa ziua"],dd:[e+" ziuas",e+" ziuas"],M:["'n mes","'iens mes"],MM:[e+" mesen",e+" mesen"],y:["'n ar","'iens ar"],yy:[e+" ars",e+" ars"]};return r||t?i[n][0]:i[n][1]}e.defineLocale("tzl",{months:"Januar_Fevraglh_Mar_Avru_Mai_Gn_Julia_Guscht_Setemvar_Listopts_Noemvar_Zecemvar".split("_"),monthsShort:"Jan_Fev_Mar_Avr_Mai_Gn_Jul_Gus_Set_Lis_Noe_Zec".split("_"),weekdays:"Sladi_Lnei_Maitzi_Mrcuri_Xhadi_Vineri_Sturi".split("_"),weekdaysShort:"Sl_Ln_Mai_Mr_Xh_Vi_St".split("_"),weekdaysMin:"S_L_Ma_M_Xh_Vi_S".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"D. MMMM [dallas] YYYY",LLL:"D. MMMM [dallas] YYYY HH.mm",LLLL:"dddd, [li] D. MMMM [dallas] YYYY HH.mm"},meridiemParse:/d\'o|d\'a/i,isPM:function(e){return"d'o"===e.toLowerCase()},meridiem:function(e,t,n){return e>11?n?"d'o":"D'O":n?"d'a":"D'A"},calendar:{sameDay:"[oxhi ] LT",nextDay:"[dem ] LT",nextWeek:"dddd [] LT",lastDay:"[ieiri ] LT",lastWeek:"[sr el] dddd [lasteu ] LT",sameElse:"L"},relativeTime:{future:"osprei %s",past:"ja%s",s:t,ss:t,m:t,mm:t,h:t,hh:t,d:t,dd:t,M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(30381))},30699:function(e,t,n){!function(e){"use strict";e.defineLocale("tzm-latn",{months:"innayr_brayr_mars_ibrir_mayyw_ywnyw_ywlywz_wt_wtanbir_ktwbr_nwwanbir_dwjnbir".split("_"),monthsShort:"innayr_brayr_mars_ibrir_mayyw_ywnyw_ywlywz_wt_wtanbir_ktwbr_nwwanbir_dwjnbir".split("_"),weekdays:"asamas_aynas_asinas_akras_akwas_asimwas_asiyas".split("_"),weekdaysShort:"asamas_aynas_asinas_akras_akwas_asimwas_asiyas".split("_"),weekdaysMin:"asamas_aynas_asinas_akras_akwas_asimwas_asiyas".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[asdkh g] LT",nextDay:"[aska g] LT",nextWeek:"dddd [g] LT",lastDay:"[assant g] LT",lastWeek:"dddd [g] LT",sameElse:"L"},relativeTime:{future:"dadkh s yan %s",past:"yan %s",s:"imik",ss:"%d imik",m:"minu",mm:"%d minu",h:"saa",hh:"%d tassain",d:"ass",dd:"%d ossan",M:"ayowr",MM:"%d iyyirn",y:"asgas",yy:"%d isgasn"},week:{dow:6,doy:12}})}(n(30381))},51106:function(e,t,n){!function(e){"use strict";e.defineLocale("tzm",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"dddd [] LT",sameElse:"L"},relativeTime:{future:"   %s",past:" %s",s:"",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d o",M:"o",MM:"%d ",y:"",yy:"%d "},week:{dow:6,doy:12}})}(n(30381))},9288:function(e,t,n){!function(e){"use strict";e.defineLocale("ug-cn",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY-M-D-",LLL:"YYYY-M-D- HH:mm",LLLL:"dddd YYYY-M-D- HH:mm"},meridiemParse:/ || || |/,meridiemHour:function(e,t){return 12===e&&(e=0)," "===t||""===t||" "===t?e:" "===t||""===t?e+12:e>=11?e:e+12},meridiem:function(e,t,n){var r=100*e+t;return r<600?" ":r<900?"":r<1130?" ":r<1230?"":r<1800?" ":""},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"[] dddd [] LT",lastDay:"[] LT",lastWeek:"[] dddd [] LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}(-|-|-)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"-";case"w":case"W":return e+"-";default:return e}},preparse:function(e){return e.replace(//g,",")},postformat:function(e){return e.replace(/,/g,"")},week:{dow:1,doy:7}})}(n(30381))},67691:function(e,t,n){!function(e){"use strict";function t(e,t){var n=e.split("_");return t%10==1&&t%100!=11?n[0]:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?n[1]:n[2]}function n(e,n,r){return"m"===r?n?"":"":"h"===r?n?"":"":e+" "+t({ss:n?"__":"__",mm:n?"__":"__",hh:n?"__":"__",dd:"__",MM:"__",yy:"__"}[r],+e)}function r(e,t){var n={nominative:"______".split("_"),accusative:"______".split("_"),genitive:"______".split("_")};return!0===e?n.nominative.slice(1,7).concat(n.nominative.slice(0,1)):e?n[/(\[[]\]) ?dddd/.test(t)?"accusative":/\[?(?:|)? ?\] ?dddd/.test(t)?"genitive":"nominative"][e.day()]:n.nominative}function i(e){return function(){return e+""+(11===this.hours()?"":"")+"] LT"}}e.defineLocale("uk",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:"___________".split("_"),weekdays:r,weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., HH:mm",LLLL:"dddd, D MMMM YYYY ., HH:mm"},calendar:{sameDay:i("[ "),nextDay:i("[ "),lastDay:i("[ "),nextWeek:i("[] dddd ["),lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return i("[] dddd [").call(this);case 1:case 2:case 4:return i("[] dddd [").call(this)}},sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",ss:n,m:n,mm:n,h:"",hh:n,d:"",dd:n,M:"",MM:n,y:"",yy:n},meridiemParse:/|||/,isPM:function(e){return/^(|)$/.test(e)},meridiem:function(e,t,n){return e<4?"":e<12?"":e<17?"":""},dayOfMonthOrdinalParse:/\d{1,2}-(|)/,ordinal:function(e,t){switch(t){case"M":case"d":case"DDD":case"w":case"W":return e+"-";case"D":return e+"-";default:return e}},week:{dow:1,doy:7}})}(n(30381))},13795:function(e,t,n){!function(e){"use strict";var t=["","","","","","","","","","","",""],n=["","","","","","",""];e.defineLocale("ur",{months:t,monthsShort:t,weekdays:n,weekdaysShort:n,weekdaysMin:n,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(e){return""===e},meridiem:function(e,t,n){return e<12?"":""},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[  ] LT",lastWeek:"[] dddd [] LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(//g,",")},postformat:function(e){return e.replace(/,/g,"")},week:{dow:1,doy:4}})}(n(30381))},60588:function(e,t,n){!function(e){"use strict";e.defineLocale("uz-latn",{months:"Yanvar_Fevral_Mart_Aprel_May_Iyun_Iyul_Avgust_Sentabr_Oktabr_Noyabr_Dekabr".split("_"),monthsShort:"Yan_Fev_Mar_Apr_May_Iyun_Iyul_Avg_Sen_Okt_Noy_Dek".split("_"),weekdays:"Yakshanba_Dushanba_Seshanba_Chorshanba_Payshanba_Juma_Shanba".split("_"),weekdaysShort:"Yak_Dush_Sesh_Chor_Pay_Jum_Shan".split("_"),weekdaysMin:"Ya_Du_Se_Cho_Pa_Ju_Sha".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"D MMMM YYYY, dddd HH:mm"},calendar:{sameDay:"[Bugun soat] LT [da]",nextDay:"[Ertaga] LT [da]",nextWeek:"dddd [kuni soat] LT [da]",lastDay:"[Kecha soat] LT [da]",lastWeek:"[O'tgan] dddd [kuni soat] LT [da]",sameElse:"L"},relativeTime:{future:"Yaqin %s ichida",past:"Bir necha %s oldin",s:"soniya",ss:"%d soniya",m:"bir daqiqa",mm:"%d daqiqa",h:"bir soat",hh:"%d soat",d:"bir kun",dd:"%d kun",M:"bir oy",MM:"%d oy",y:"bir yil",yy:"%d yil"},week:{dow:1,doy:7}})}(n(30381))},6791:function(e,t,n){!function(e){"use strict";e.defineLocale("uz",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"D MMMM YYYY, dddd HH:mm"},calendar:{sameDay:"[ ] LT []",nextDay:"[] LT []",nextWeek:"dddd [ ] LT []",lastDay:"[ ] LT []",lastWeek:"[] dddd [ ] LT []",sameElse:"L"},relativeTime:{future:" %s ",past:"  %s ",s:"",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},week:{dow:1,doy:7}})}(n(30381))},65666:function(e,t,n){!function(e){"use strict";e.defineLocale("vi",{months:"thng 1_thng 2_thng 3_thng 4_thng 5_thng 6_thng 7_thng 8_thng 9_thng 10_thng 11_thng 12".split("_"),monthsShort:"Thg 01_Thg 02_Thg 03_Thg 04_Thg 05_Thg 06_Thg 07_Thg 08_Thg 09_Thg 10_Thg 11_Thg 12".split("_"),monthsParseExact:!0,weekdays:"ch nht_th hai_th ba_th t_th nm_th su_th by".split("_"),weekdaysShort:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysMin:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysParseExact:!0,meridiemParse:/sa|ch/i,isPM:function(e){return/^ch$/i.test(e)},meridiem:function(e,t,n){return e<12?n?"sa":"SA":n?"ch":"CH"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [nm] YYYY",LLL:"D MMMM [nm] YYYY HH:mm",LLLL:"dddd, D MMMM [nm] YYYY HH:mm",l:"DD/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[Hm nay lc] LT",nextDay:"[Ngy mai lc] LT",nextWeek:"dddd [tun ti lc] LT",lastDay:"[Hm qua lc] LT",lastWeek:"dddd [tun trc lc] LT",sameElse:"L"},relativeTime:{future:"%s ti",past:"%s trc",s:"vi giy",ss:"%d giy",m:"mt pht",mm:"%d pht",h:"mt gi",hh:"%d gi",d:"mt ngy",dd:"%d ngy",w:"mt tun",ww:"%d tun",M:"mt thng",MM:"%d thng",y:"mt nm",yy:"%d nm"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(e){return e},week:{dow:1,doy:4}})}(n(30381))},14378:function(e,t,n){!function(e){"use strict";e.defineLocale("x-pseudo",{months:"J~~r_F~br~r_~Mrc~h_p~rl_~M_~J~_Jl~_~gst~_Sp~tmb~r_~ctb~r_~vm~br_~Dc~mbr".split("_"),monthsShort:"J~_~Fb_~Mr_~pr_~M_~J_~Jl_~g_~Sp_~ct_~v_~Dc".split("_"),monthsParseExact:!0,weekdays:"S~d~_M~d~_T~sd~_Wd~sd~_T~hrs~d_~Frd~_S~tr~d".split("_"),weekdaysShort:"S~_~M_~T_~Wd_~Th_~Fr_~St".split("_"),weekdaysMin:"S~_M~_T_~W_T~h_Fr~_S".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[T~d~ t] LT",nextDay:"[T~m~rr~w t] LT",nextWeek:"dddd [t] LT",lastDay:"[~st~rd~ t] LT",lastWeek:"[L~st] dddd [t] LT",sameElse:"L"},relativeTime:{future:"~ %s",past:"%s ~g",s:" ~fw ~sc~ds",ss:"%d s~c~ds",m:" ~m~t",mm:"%d m~~ts",h:"~ h~r",hh:"%d h~rs",d:" ~d",dd:"%d d~s",M:" ~m~th",MM:"%d m~t~hs",y:" ~r",yy:"%d ~rs"},dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}(n(30381))},75805:function(e,t,n){!function(e){"use strict";e.defineLocale("yo",{months:"Sr_Erele_rna_Igbe_Ebibi_Okudu_Agmo_Ogun_Owewe_wara_Belu_p".split("_"),monthsShort:"Sr_Erl_rn_Igb_Ebi_Oku_Ag_Ogu_Owe_wa_Bel_p".split("_"),weekdays:"Aiku_Aje_Isgun_jru_jb_ti_Abamta".split("_"),weekdaysShort:"Aik_Aje_Is_jr_jb_ti_Aba".split("_"),weekdaysMin:"Ai_Aj_Is_r_b_t_Ab".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Oni ni] LT",nextDay:"[la ni] LT",nextWeek:"dddd [s ton'b] [ni] LT",lastDay:"[Ana ni] LT",lastWeek:"dddd [s tol] [ni] LT",sameElse:"L"},relativeTime:{future:"ni %s",past:"%s kja",s:"isju aaya die",ss:"aaya %d",m:"isju kan",mm:"isju %d",h:"wakati kan",hh:"wakati %d",d:"j kan",dd:"j %d",M:"osu kan",MM:"osu %d",y:"dun kan",yy:"dun %d"},dayOfMonthOrdinalParse:/j\s\d{1,2}/,ordinal:"j %d",week:{dow:1,doy:4}})}(n(30381))},83839:function(e,t,n){!function(e){"use strict";e.defineLocale("zh-cn",{months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYYMD",LLL:"YYYYMDAhmm",LLLL:"YYYYMDddddAhmm",l:"YYYY/M/D",ll:"YYYYMD",lll:"YYYYMD HH:mm",llll:"YYYYMDdddd HH:mm"},meridiemParse:/|||||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t||""===t||""===t?e:""===t||""===t?e+12:e>=11?e:e+12},meridiem:function(e,t,n){var r=100*e+t;return r<600?"":r<900?"":r<1130?"":r<1230?"":r<1800?"":""},calendar:{sameDay:"[]LT",nextDay:"[]LT",nextWeek:function(e){return e.week()!==this.week()?"[]dddLT":"[]dddLT"},lastDay:"[]LT",lastWeek:function(e){return this.week()!==e.week()?"[]dddLT":"[]dddLT"},sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(||)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"";case"M":return e+"";case"w":case"W":return e+"";default:return e}},relativeTime:{future:"%s",past:"%s",s:"",ss:"%d ",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",w:"1 ",ww:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "},week:{dow:1,doy:4}})}(n(30381))},55726:function(e,t,n){!function(e){"use strict";e.defineLocale("zh-hk",{months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYYMD",LLL:"YYYYMD HH:mm",LLLL:"YYYYMDdddd HH:mm",l:"YYYY/M/D",ll:"YYYYMD",lll:"YYYYMD HH:mm",llll:"YYYYMDdddd HH:mm"},meridiemParse:/|||||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t||""===t||""===t?e:""===t?e>=11?e:e+12:""===t||""===t?e+12:void 0},meridiem:function(e,t,n){var r=100*e+t;return r<600?"":r<900?"":r<1200?"":1200===r?"":r<1800?"":""},calendar:{sameDay:"[]LT",nextDay:"[]LT",nextWeek:"[]ddddLT",lastDay:"[]LT",lastWeek:"[]ddddLT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(||)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"";case"M":return e+"";case"w":case"W":return e+"";default:return e}},relativeTime:{future:"%s",past:"%s",s:"",ss:"%d ",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "}})}(n(30381))},99807:function(e,t,n){!function(e){"use strict";e.defineLocale("zh-mo",{months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"YYYYMD",LLL:"YYYYMD HH:mm",LLLL:"YYYYMDdddd HH:mm",l:"D/M/YYYY",ll:"YYYYMD",lll:"YYYYMD HH:mm",llll:"YYYYMDdddd HH:mm"},meridiemParse:/|||||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t||""===t||""===t?e:""===t?e>=11?e:e+12:""===t||""===t?e+12:void 0},meridiem:function(e,t,n){var r=100*e+t;return r<600?"":r<900?"":r<1130?"":r<1230?"":r<1800?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[]dddd LT",lastDay:"[] LT",lastWeek:"[]dddd LT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(||)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"";case"M":return e+"";case"w":case"W":return e+"";default:return e}},relativeTime:{future:"%s",past:"%s",s:"",ss:"%d ",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "}})}(n(30381))},74152:function(e,t,n){!function(e){"use strict";e.defineLocale("zh-tw",{months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYYMD",LLL:"YYYYMD HH:mm",LLLL:"YYYYMDdddd HH:mm",l:"YYYY/M/D",ll:"YYYYMD",lll:"YYYYMD HH:mm",llll:"YYYYMDdddd HH:mm"},meridiemParse:/|||||/,meridiemHour:function(e,t){return 12===e&&(e=0),""===t||""===t||""===t?e:""===t?e>=11?e:e+12:""===t||""===t?e+12:void 0},meridiem:function(e,t,n){var r=100*e+t;return r<600?"":r<900?"":r<1130?"":r<1230?"":r<1800?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[]dddd LT",lastDay:"[] LT",lastWeek:"[]dddd LT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(||)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"";case"M":return e+"";case"w":case"W":return e+"";default:return e}},relativeTime:{future:"%s",past:"%s",s:"",ss:"%d ",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "}})}(n(30381))},46700:(e,t,n)=>{var r={"./af":42786,"./af.js":42786,"./ar":30867,"./ar-dz":14130,"./ar-dz.js":14130,"./ar-kw":96135,"./ar-kw.js":96135,"./ar-ly":56440,"./ar-ly.js":56440,"./ar-ma":47702,"./ar-ma.js":47702,"./ar-sa":16040,"./ar-sa.js":16040,"./ar-tn":37100,"./ar-tn.js":37100,"./ar.js":30867,"./az":31083,"./az.js":31083,"./be":9808,"./be.js":9808,"./bg":68338,"./bg.js":68338,"./bm":67438,"./bm.js":67438,"./bn":8905,"./bn-bd":76225,"./bn-bd.js":76225,"./bn.js":8905,"./bo":11560,"./bo.js":11560,"./br":1278,"./br.js":1278,"./bs":80622,"./bs.js":80622,"./ca":2468,"./ca.js":2468,"./cs":5822,"./cs.js":5822,"./cv":50877,"./cv.js":50877,"./cy":47373,"./cy.js":47373,"./da":24780,"./da.js":24780,"./de":59740,"./de-at":60217,"./de-at.js":60217,"./de-ch":60894,"./de-ch.js":60894,"./de.js":59740,"./dv":5300,"./dv.js":5300,"./el":50837,"./el.js":50837,"./en-au":78348,"./en-au.js":78348,"./en-ca":77925,"./en-ca.js":77925,"./en-gb":22243,"./en-gb.js":22243,"./en-ie":46436,"./en-ie.js":46436,"./en-il":47207,"./en-il.js":47207,"./en-in":44175,"./en-in.js":44175,"./en-nz":76319,"./en-nz.js":76319,"./en-sg":31662,"./en-sg.js":31662,"./eo":92915,"./eo.js":92915,"./es":55655,"./es-do":55251,"./es-do.js":55251,"./es-mx":96112,"./es-mx.js":96112,"./es-us":71146,"./es-us.js":71146,"./es.js":55655,"./et":5603,"./et.js":5603,"./eu":77763,"./eu.js":77763,"./fa":76959,"./fa.js":76959,"./fi":11897,"./fi.js":11897,"./fil":42549,"./fil.js":42549,"./fo":94694,"./fo.js":94694,"./fr":94470,"./fr-ca":63049,"./fr-ca.js":63049,"./fr-ch":52330,"./fr-ch.js":52330,"./fr.js":94470,"./fy":5044,"./fy.js":5044,"./ga":29295,"./ga.js":29295,"./gd":2101,"./gd.js":2101,"./gl":38794,"./gl.js":38794,"./gom-deva":27884,"./gom-deva.js":27884,"./gom-latn":23168,"./gom-latn.js":23168,"./gu":95349,"./gu.js":95349,"./he":24206,"./he.js":24206,"./hi":30094,"./hi.js":30094,"./hr":30316,"./hr.js":30316,"./hu":22138,"./hu.js":22138,"./hy-am":11423,"./hy-am.js":11423,"./id":29218,"./id.js":29218,"./is":90135,"./is.js":90135,"./it":90626,"./it-ch":10150,"./it-ch.js":10150,"./it.js":90626,"./ja":39183,"./ja.js":39183,"./jv":24286,"./jv.js":24286,"./ka":12105,"./ka.js":12105,"./kk":47772,"./kk.js":47772,"./km":18758,"./km.js":18758,"./kn":79282,"./kn.js":79282,"./ko":33730,"./ko.js":33730,"./ku":1408,"./ku.js":1408,"./ky":33291,"./ky.js":33291,"./lb":36841,"./lb.js":36841,"./lo":55466,"./lo.js":55466,"./lt":57010,"./lt.js":57010,"./lv":37595,"./lv.js":37595,"./me":39861,"./me.js":39861,"./mi":35493,"./mi.js":35493,"./mk":95966,"./mk.js":95966,"./ml":87341,"./ml.js":87341,"./mn":5115,"./mn.js":5115,"./mr":10370,"./mr.js":10370,"./ms":9847,"./ms-my":41237,"./ms-my.js":41237,"./ms.js":9847,"./mt":72126,"./mt.js":72126,"./my":56165,"./my.js":56165,"./nb":64924,"./nb.js":64924,"./ne":16744,"./ne.js":16744,"./nl":93901,"./nl-be":59814,"./nl-be.js":59814,"./nl.js":93901,"./nn":83877,"./nn.js":83877,"./oc-lnc":92135,"./oc-lnc.js":92135,"./pa-in":15858,"./pa-in.js":15858,"./pl":64495,"./pl.js":64495,"./pt":89520,"./pt-br":57971,"./pt-br.js":57971,"./pt.js":89520,"./ro":96459,"./ro.js":96459,"./ru":21793,"./ru.js":21793,"./sd":40950,"./sd.js":40950,"./se":10490,"./se.js":10490,"./si":90124,"./si.js":90124,"./sk":64249,"./sk.js":64249,"./sl":14985,"./sl.js":14985,"./sq":51104,"./sq.js":51104,"./sr":49131,"./sr-cyrl":79915,"./sr-cyrl.js":79915,"./sr.js":49131,"./ss":85893,"./ss.js":85893,"./sv":98760,"./sv.js":98760,"./sw":91172,"./sw.js":91172,"./ta":27333,"./ta.js":27333,"./te":23110,"./te.js":23110,"./tet":52095,"./tet.js":52095,"./tg":27321,"./tg.js":27321,"./th":9041,"./th.js":9041,"./tk":19005,"./tk.js":19005,"./tl-ph":75768,"./tl-ph.js":75768,"./tlh":89444,"./tlh.js":89444,"./tr":72397,"./tr.js":72397,"./tzl":28254,"./tzl.js":28254,"./tzm":51106,"./tzm-latn":30699,"./tzm-latn.js":30699,"./tzm.js":51106,"./ug-cn":9288,"./ug-cn.js":9288,"./uk":67691,"./uk.js":67691,"./ur":13795,"./ur.js":13795,"./uz":6791,"./uz-latn":60588,"./uz-latn.js":60588,"./uz.js":6791,"./vi":65666,"./vi.js":65666,"./x-pseudo":14378,"./x-pseudo.js":14378,"./yo":75805,"./yo.js":75805,"./zh-cn":83839,"./zh-cn.js":83839,"./zh-hk":55726,"./zh-hk.js":55726,"./zh-mo":99807,"./zh-mo.js":99807,"./zh-tw":74152,"./zh-tw.js":74152};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id=46700},30381:function(e,t,n){(e=n.nmd(e)).exports=function(){"use strict";var t,r;function i(){return t.apply(null,arguments)}function o(e){t=e}function a(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function s(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function l(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function u(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(l(e,t))return!1;return!0}function c(e){return void 0===e}function d(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function h(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function f(e,t){var n,r=[];for(n=0;n<e.length;++n)r.push(t(e[n],n));return r}function p(e,t){for(var n in t)l(t,n)&&(e[n]=t[n]);return l(t,"toString")&&(e.toString=t.toString),l(t,"valueOf")&&(e.valueOf=t.valueOf),e}function m(e,t,n,r){return qn(e,t,n,r,!0).utc()}function g(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function v(e){return null==e._pf&&(e._pf=g()),e._pf}function y(e){if(null==e._isValid){var t=v(e),n=r.call(t.parsedDateParts,(function(e){return null!=e})),i=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(i=i&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return i;e._isValid=i}return e._isValid}function b(e){var t=m(NaN);return null!=e?p(v(t),e):v(t).userInvalidated=!0,t}r=Array.prototype.some?Array.prototype.some:function(e){var t,n=Object(this),r=n.length>>>0;for(t=0;t<r;t++)if(t in n&&e.call(this,n[t],t,n))return!0;return!1};var _=i.momentProperties=[],w=!1;function x(e,t){var n,r,i;if(c(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),c(t._i)||(e._i=t._i),c(t._f)||(e._f=t._f),c(t._l)||(e._l=t._l),c(t._strict)||(e._strict=t._strict),c(t._tzm)||(e._tzm=t._tzm),c(t._isUTC)||(e._isUTC=t._isUTC),c(t._offset)||(e._offset=t._offset),c(t._pf)||(e._pf=v(t)),c(t._locale)||(e._locale=t._locale),_.length>0)for(n=0;n<_.length;n++)c(i=t[r=_[n]])||(e[r]=i);return e}function M(e){x(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===w&&(w=!0,i.updateOffset(this),w=!1)}function E(e){return e instanceof M||null!=e&&null!=e._isAMomentObject}function S(e){!1===i.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function k(e,t){var n=!0;return p((function(){if(null!=i.deprecationHandler&&i.deprecationHandler(null,e),n){var r,o,a,s=[];for(o=0;o<arguments.length;o++){if(r="","object"==typeof arguments[o]){for(a in r+="\n["+o+"] ",arguments[0])l(arguments[0],a)&&(r+=a+": "+arguments[0][a]+", ");r=r.slice(0,-2)}else r=arguments[o];s.push(r)}S(e+"\nArguments: "+Array.prototype.slice.call(s).join("")+"\n"+(new Error).stack),n=!1}return t.apply(this,arguments)}),t)}var T,L={};function C(e,t){null!=i.deprecationHandler&&i.deprecationHandler(e,t),L[e]||(S(t),L[e]=!0)}function D(e){return"undefined"!=typeof Function&&e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function A(e){var t,n;for(n in e)l(e,n)&&(D(t=e[n])?this[n]=t:this["_"+n]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function P(e,t){var n,r=p({},e);for(n in t)l(t,n)&&(s(e[n])&&s(t[n])?(r[n]={},p(r[n],e[n]),p(r[n],t[n])):null!=t[n]?r[n]=t[n]:delete r[n]);for(n in e)l(e,n)&&!l(t,n)&&s(e[n])&&(r[n]=p({},r[n]));return r}function O(e){null!=e&&this.set(e)}i.suppressDeprecationWarnings=!1,i.deprecationHandler=null,T=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)l(e,t)&&n.push(t);return n};var I={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function R(e,t,n){var r=this._calendar[e]||this._calendar.sameElse;return D(r)?r.call(t,n):r}function N(e,t,n){var r=""+Math.abs(e),i=t-r.length;return(e>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}var Y=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,j=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,F={},B={};function z(e,t,n,r){var i=r;"string"==typeof r&&(i=function(){return this[r]()}),e&&(B[e]=i),t&&(B[t[0]]=function(){return N(i.apply(this,arguments),t[1],t[2])}),n&&(B[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function H(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function G(e){var t,n,r=e.match(Y);for(t=0,n=r.length;t<n;t++)B[r[t]]?r[t]=B[r[t]]:r[t]=H(r[t]);return function(t){var i,o="";for(i=0;i<n;i++)o+=D(r[i])?r[i].call(t,e):r[i];return o}}function W(e,t){return e.isValid()?(t=U(t,e.localeData()),F[t]=F[t]||G(t),F[t](e)):e.localeData().invalidDate()}function U(e,t){var n=5;function r(e){return t.longDateFormat(e)||e}for(j.lastIndex=0;n>=0&&j.test(e);)e=e.replace(j,r),j.lastIndex=0,n-=1;return e}var V={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function X(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.match(Y).map((function(e){return"MMMM"===e||"MM"===e||"DD"===e||"dddd"===e?e.slice(1):e})).join(""),this._longDateFormat[e])}var q="Invalid date";function K(){return this._invalidDate}var J="%d",Z=/\d{1,2}/;function $(e){return this._ordinal.replace("%d",e)}var Q={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function ee(e,t,n,r){var i=this._relativeTime[n];return D(i)?i(e,t,n,r):i.replace(/%d/i,e)}function te(e,t){var n=this._relativeTime[e>0?"future":"past"];return D(n)?n(t):n.replace(/%s/i,t)}var ne={};function re(e,t){var n=e.toLowerCase();ne[n]=ne[n+"s"]=ne[t]=e}function ie(e){return"string"==typeof e?ne[e]||ne[e.toLowerCase()]:void 0}function oe(e){var t,n,r={};for(n in e)l(e,n)&&(t=ie(n))&&(r[t]=e[n]);return r}var ae={};function se(e,t){ae[e]=t}function le(e){var t,n=[];for(t in e)l(e,t)&&n.push({unit:t,priority:ae[t]});return n.sort((function(e,t){return e.priority-t.priority})),n}function ue(e){return e%4==0&&e%100!=0||e%400==0}function ce(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function de(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=ce(t)),n}function he(e,t){return function(n){return null!=n?(pe(this,e,n),i.updateOffset(this,t),this):fe(this,e)}}function fe(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function pe(e,t,n){e.isValid()&&!isNaN(n)&&("FullYear"===t&&ue(e.year())&&1===e.month()&&29===e.date()?(n=de(n),e._d["set"+(e._isUTC?"UTC":"")+t](n,e.month(),et(n,e.month()))):e._d["set"+(e._isUTC?"UTC":"")+t](n))}function me(e){return D(this[e=ie(e)])?this[e]():this}function ge(e,t){if("object"==typeof e){var n,r=le(e=oe(e));for(n=0;n<r.length;n++)this[r[n].unit](e[r[n].unit])}else if(D(this[e=ie(e)]))return this[e](t);return this}var ve,ye=/\d/,be=/\d\d/,_e=/\d{3}/,we=/\d{4}/,xe=/[+-]?\d{6}/,Me=/\d\d?/,Ee=/\d\d\d\d?/,Se=/\d\d\d\d\d\d?/,ke=/\d{1,3}/,Te=/\d{1,4}/,Le=/[+-]?\d{1,6}/,Ce=/\d+/,De=/[+-]?\d+/,Ae=/Z|[+-]\d\d:?\d\d/gi,Pe=/Z|[+-]\d\d(?::?\d\d)?/gi,Oe=/[+-]?\d+(\.\d{1,3})?/,Ie=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function Re(e,t,n){ve[e]=D(t)?t:function(e,r){return e&&n?n:t}}function Ne(e,t){return l(ve,e)?ve[e](t._strict,t._locale):new RegExp(Ye(e))}function Ye(e){return je(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(e,t,n,r,i){return t||n||r||i})))}function je(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}ve={};var Fe={};function Be(e,t){var n,r=t;for("string"==typeof e&&(e=[e]),d(t)&&(r=function(e,n){n[t]=de(e)}),n=0;n<e.length;n++)Fe[e[n]]=r}function ze(e,t){Be(e,(function(e,n,r,i){r._w=r._w||{},t(e,r._w,r,i)}))}function He(e,t,n){null!=t&&l(Fe,e)&&Fe[e](t,n._a,n,e)}var Ge,We=0,Ue=1,Ve=2,Xe=3,qe=4,Ke=5,Je=6,Ze=7,$e=8;function Qe(e,t){return(e%t+t)%t}function et(e,t){if(isNaN(e)||isNaN(t))return NaN;var n=Qe(t,12);return e+=(t-n)/12,1===n?ue(e)?29:28:31-n%7%2}Ge=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},z("M",["MM",2],"Mo",(function(){return this.month()+1})),z("MMM",0,0,(function(e){return this.localeData().monthsShort(this,e)})),z("MMMM",0,0,(function(e){return this.localeData().months(this,e)})),re("month","M"),se("month",8),Re("M",Me),Re("MM",Me,be),Re("MMM",(function(e,t){return t.monthsShortRegex(e)})),Re("MMMM",(function(e,t){return t.monthsRegex(e)})),Be(["M","MM"],(function(e,t){t[Ue]=de(e)-1})),Be(["MMM","MMMM"],(function(e,t,n,r){var i=n._locale.monthsParse(e,r,n._strict);null!=i?t[Ue]=i:v(n).invalidMonth=e}));var tt="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),nt="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),rt=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,it=Ie,ot=Ie;function at(e,t){return e?a(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||rt).test(t)?"format":"standalone"][e.month()]:a(this._months)?this._months:this._months.standalone}function st(e,t){return e?a(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[rt.test(t)?"format":"standalone"][e.month()]:a(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function lt(e,t,n){var r,i,o,a=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)o=m([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(o,"").toLocaleLowerCase();return n?"MMM"===t?-1!==(i=Ge.call(this._shortMonthsParse,a))?i:null:-1!==(i=Ge.call(this._longMonthsParse,a))?i:null:"MMM"===t?-1!==(i=Ge.call(this._shortMonthsParse,a))||-1!==(i=Ge.call(this._longMonthsParse,a))?i:null:-1!==(i=Ge.call(this._longMonthsParse,a))||-1!==(i=Ge.call(this._shortMonthsParse,a))?i:null}function ut(e,t,n){var r,i,o;if(this._monthsParseExact)return lt.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(i=m([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(o="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(o.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[r].test(e))return r;if(n&&"MMM"===t&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}}function ct(e,t){var n;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=de(t);else if(!d(t=e.localeData().monthsParse(t)))return e;return n=Math.min(e.date(),et(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function dt(e){return null!=e?(ct(this,e),i.updateOffset(this,!0),this):fe(this,"Month")}function ht(){return et(this.year(),this.month())}function ft(e){return this._monthsParseExact?(l(this,"_monthsRegex")||mt.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(l(this,"_monthsShortRegex")||(this._monthsShortRegex=it),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function pt(e){return this._monthsParseExact?(l(this,"_monthsRegex")||mt.call(this),e?this._monthsStrictRegex:this._monthsRegex):(l(this,"_monthsRegex")||(this._monthsRegex=ot),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function mt(){function e(e,t){return t.length-e.length}var t,n,r=[],i=[],o=[];for(t=0;t<12;t++)n=m([2e3,t]),r.push(this.monthsShort(n,"")),i.push(this.months(n,"")),o.push(this.months(n,"")),o.push(this.monthsShort(n,""));for(r.sort(e),i.sort(e),o.sort(e),t=0;t<12;t++)r[t]=je(r[t]),i[t]=je(i[t]);for(t=0;t<24;t++)o[t]=je(o[t]);this._monthsRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+r.join("|")+")","i")}function gt(e){return ue(e)?366:365}z("Y",0,0,(function(){var e=this.year();return e<=9999?N(e,4):"+"+e})),z(0,["YY",2],0,(function(){return this.year()%100})),z(0,["YYYY",4],0,"year"),z(0,["YYYYY",5],0,"year"),z(0,["YYYYYY",6,!0],0,"year"),re("year","y"),se("year",1),Re("Y",De),Re("YY",Me,be),Re("YYYY",Te,we),Re("YYYYY",Le,xe),Re("YYYYYY",Le,xe),Be(["YYYYY","YYYYYY"],We),Be("YYYY",(function(e,t){t[We]=2===e.length?i.parseTwoDigitYear(e):de(e)})),Be("YY",(function(e,t){t[We]=i.parseTwoDigitYear(e)})),Be("Y",(function(e,t){t[We]=parseInt(e,10)})),i.parseTwoDigitYear=function(e){return de(e)+(de(e)>68?1900:2e3)};var vt=he("FullYear",!0);function yt(){return ue(this.year())}function bt(e,t,n,r,i,o,a){var s;return e<100&&e>=0?(s=new Date(e+400,t,n,r,i,o,a),isFinite(s.getFullYear())&&s.setFullYear(e)):s=new Date(e,t,n,r,i,o,a),s}function _t(e){var t,n;return e<100&&e>=0?((n=Array.prototype.slice.call(arguments))[0]=e+400,t=new Date(Date.UTC.apply(null,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function wt(e,t,n){var r=7+t-n;return-(7+_t(e,0,r).getUTCDay()-t)%7+r-1}function xt(e,t,n,r,i){var o,a,s=1+7*(t-1)+(7+n-r)%7+wt(e,r,i);return s<=0?a=gt(o=e-1)+s:s>gt(e)?(o=e+1,a=s-gt(e)):(o=e,a=s),{year:o,dayOfYear:a}}function Mt(e,t,n){var r,i,o=wt(e.year(),t,n),a=Math.floor((e.dayOfYear()-o-1)/7)+1;return a<1?r=a+Et(i=e.year()-1,t,n):a>Et(e.year(),t,n)?(r=a-Et(e.year(),t,n),i=e.year()+1):(i=e.year(),r=a),{week:r,year:i}}function Et(e,t,n){var r=wt(e,t,n),i=wt(e+1,t,n);return(gt(e)-r+i)/7}function St(e){return Mt(e,this._week.dow,this._week.doy).week}z("w",["ww",2],"wo","week"),z("W",["WW",2],"Wo","isoWeek"),re("week","w"),re("isoWeek","W"),se("week",5),se("isoWeek",5),Re("w",Me),Re("ww",Me,be),Re("W",Me),Re("WW",Me,be),ze(["w","ww","W","WW"],(function(e,t,n,r){t[r.substr(0,1)]=de(e)}));var kt={dow:0,doy:6};function Tt(){return this._week.dow}function Lt(){return this._week.doy}function Ct(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function Dt(e){var t=Mt(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function At(e,t){return"string"!=typeof e?e:isNaN(e)?"number"==typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}function Pt(e,t){return"string"==typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function Ot(e,t){return e.slice(t,7).concat(e.slice(0,t))}z("d",0,"do","day"),z("dd",0,0,(function(e){return this.localeData().weekdaysMin(this,e)})),z("ddd",0,0,(function(e){return this.localeData().weekdaysShort(this,e)})),z("dddd",0,0,(function(e){return this.localeData().weekdays(this,e)})),z("e",0,0,"weekday"),z("E",0,0,"isoWeekday"),re("day","d"),re("weekday","e"),re("isoWeekday","E"),se("day",11),se("weekday",11),se("isoWeekday",11),Re("d",Me),Re("e",Me),Re("E",Me),Re("dd",(function(e,t){return t.weekdaysMinRegex(e)})),Re("ddd",(function(e,t){return t.weekdaysShortRegex(e)})),Re("dddd",(function(e,t){return t.weekdaysRegex(e)})),ze(["dd","ddd","dddd"],(function(e,t,n,r){var i=n._locale.weekdaysParse(e,r,n._strict);null!=i?t.d=i:v(n).invalidWeekday=e})),ze(["d","e","E"],(function(e,t,n,r){t[r]=de(e)}));var It="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Rt="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Nt="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Yt=Ie,jt=Ie,Ft=Ie;function Bt(e,t){var n=a(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"];return!0===e?Ot(n,this._week.dow):e?n[e.day()]:n}function zt(e){return!0===e?Ot(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function Ht(e){return!0===e?Ot(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function Gt(e,t,n){var r,i,o,a=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)o=m([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(o,"").toLocaleLowerCase();return n?"dddd"===t?-1!==(i=Ge.call(this._weekdaysParse,a))?i:null:"ddd"===t?-1!==(i=Ge.call(this._shortWeekdaysParse,a))?i:null:-1!==(i=Ge.call(this._minWeekdaysParse,a))?i:null:"dddd"===t?-1!==(i=Ge.call(this._weekdaysParse,a))||-1!==(i=Ge.call(this._shortWeekdaysParse,a))||-1!==(i=Ge.call(this._minWeekdaysParse,a))?i:null:"ddd"===t?-1!==(i=Ge.call(this._shortWeekdaysParse,a))||-1!==(i=Ge.call(this._weekdaysParse,a))||-1!==(i=Ge.call(this._minWeekdaysParse,a))?i:null:-1!==(i=Ge.call(this._minWeekdaysParse,a))||-1!==(i=Ge.call(this._weekdaysParse,a))||-1!==(i=Ge.call(this._shortWeekdaysParse,a))?i:null}function Wt(e,t,n){var r,i,o;if(this._weekdaysParseExact)return Gt.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(i=m([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(o="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[r]=new RegExp(o.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[r].test(e))return r;if(n&&"ddd"===t&&this._shortWeekdaysParse[r].test(e))return r;if(n&&"dd"===t&&this._minWeekdaysParse[r].test(e))return r;if(!n&&this._weekdaysParse[r].test(e))return r}}function Ut(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=At(e,this.localeData()),this.add(e-t,"d")):t}function Vt(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function Xt(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=Pt(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7}function qt(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Zt.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(l(this,"_weekdaysRegex")||(this._weekdaysRegex=Yt),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function Kt(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Zt.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(l(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=jt),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Jt(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Zt.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(l(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Ft),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Zt(){function e(e,t){return t.length-e.length}var t,n,r,i,o,a=[],s=[],l=[],u=[];for(t=0;t<7;t++)n=m([2e3,1]).day(t),r=je(this.weekdaysMin(n,"")),i=je(this.weekdaysShort(n,"")),o=je(this.weekdays(n,"")),a.push(r),s.push(i),l.push(o),u.push(r),u.push(i),u.push(o);a.sort(e),s.sort(e),l.sort(e),u.sort(e),this._weekdaysRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function $t(){return this.hours()%12||12}function Qt(){return this.hours()||24}function en(e,t){z(e,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)}))}function tn(e,t){return t._meridiemParse}function nn(e){return"p"===(e+"").toLowerCase().charAt(0)}z("H",["HH",2],0,"hour"),z("h",["hh",2],0,$t),z("k",["kk",2],0,Qt),z("hmm",0,0,(function(){return""+$t.apply(this)+N(this.minutes(),2)})),z("hmmss",0,0,(function(){return""+$t.apply(this)+N(this.minutes(),2)+N(this.seconds(),2)})),z("Hmm",0,0,(function(){return""+this.hours()+N(this.minutes(),2)})),z("Hmmss",0,0,(function(){return""+this.hours()+N(this.minutes(),2)+N(this.seconds(),2)})),en("a",!0),en("A",!1),re("hour","h"),se("hour",13),Re("a",tn),Re("A",tn),Re("H",Me),Re("h",Me),Re("k",Me),Re("HH",Me,be),Re("hh",Me,be),Re("kk",Me,be),Re("hmm",Ee),Re("hmmss",Se),Re("Hmm",Ee),Re("Hmmss",Se),Be(["H","HH"],Xe),Be(["k","kk"],(function(e,t,n){var r=de(e);t[Xe]=24===r?0:r})),Be(["a","A"],(function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e})),Be(["h","hh"],(function(e,t,n){t[Xe]=de(e),v(n).bigHour=!0})),Be("hmm",(function(e,t,n){var r=e.length-2;t[Xe]=de(e.substr(0,r)),t[qe]=de(e.substr(r)),v(n).bigHour=!0})),Be("hmmss",(function(e,t,n){var r=e.length-4,i=e.length-2;t[Xe]=de(e.substr(0,r)),t[qe]=de(e.substr(r,2)),t[Ke]=de(e.substr(i)),v(n).bigHour=!0})),Be("Hmm",(function(e,t,n){var r=e.length-2;t[Xe]=de(e.substr(0,r)),t[qe]=de(e.substr(r))})),Be("Hmmss",(function(e,t,n){var r=e.length-4,i=e.length-2;t[Xe]=de(e.substr(0,r)),t[qe]=de(e.substr(r,2)),t[Ke]=de(e.substr(i))}));var rn=/[ap]\.?m?\.?/i,on=he("Hours",!0);function an(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}var sn,ln={calendar:I,longDateFormat:V,invalidDate:q,ordinal:J,dayOfMonthOrdinalParse:Z,relativeTime:Q,months:tt,monthsShort:nt,week:kt,weekdays:It,weekdaysMin:Nt,weekdaysShort:Rt,meridiemParse:rn},un={},cn={};function dn(e,t){var n,r=Math.min(e.length,t.length);for(n=0;n<r;n+=1)if(e[n]!==t[n])return n;return r}function hn(e){return e?e.toLowerCase().replace("_","-"):e}function fn(e){for(var t,n,r,i,o=0;o<e.length;){for(t=(i=hn(e[o]).split("-")).length,n=(n=hn(e[o+1]))?n.split("-"):null;t>0;){if(r=pn(i.slice(0,t).join("-")))return r;if(n&&n.length>=t&&dn(i,n)>=t-1)break;t--}o++}return sn}function pn(t){var r=null;if(void 0===un[t]&&e&&e.exports)try{r=sn._abbr,n(46700)("./"+t),mn(r)}catch(e){un[t]=null}return un[t]}function mn(e,t){var n;return e&&((n=c(t)?yn(e):gn(e,t))?sn=n:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),sn._abbr}function gn(e,t){if(null!==t){var n,r=ln;if(t.abbr=e,null!=un[e])C("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=un[e]._config;else if(null!=t.parentLocale)if(null!=un[t.parentLocale])r=un[t.parentLocale]._config;else{if(null==(n=pn(t.parentLocale)))return cn[t.parentLocale]||(cn[t.parentLocale]=[]),cn[t.parentLocale].push({name:e,config:t}),null;r=n._config}return un[e]=new O(P(r,t)),cn[e]&&cn[e].forEach((function(e){gn(e.name,e.config)})),mn(e),un[e]}return delete un[e],null}function vn(e,t){if(null!=t){var n,r,i=ln;null!=un[e]&&null!=un[e].parentLocale?un[e].set(P(un[e]._config,t)):(null!=(r=pn(e))&&(i=r._config),t=P(i,t),null==r&&(t.abbr=e),(n=new O(t)).parentLocale=un[e],un[e]=n),mn(e)}else null!=un[e]&&(null!=un[e].parentLocale?(un[e]=un[e].parentLocale,e===mn()&&mn(e)):null!=un[e]&&delete un[e]);return un[e]}function yn(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return sn;if(!a(e)){if(t=pn(e))return t;e=[e]}return fn(e)}function bn(){return T(un)}function _n(e){var t,n=e._a;return n&&-2===v(e).overflow&&(t=n[Ue]<0||n[Ue]>11?Ue:n[Ve]<1||n[Ve]>et(n[We],n[Ue])?Ve:n[Xe]<0||n[Xe]>24||24===n[Xe]&&(0!==n[qe]||0!==n[Ke]||0!==n[Je])?Xe:n[qe]<0||n[qe]>59?qe:n[Ke]<0||n[Ke]>59?Ke:n[Je]<0||n[Je]>999?Je:-1,v(e)._overflowDayOfYear&&(t<We||t>Ve)&&(t=Ve),v(e)._overflowWeeks&&-1===t&&(t=Ze),v(e)._overflowWeekday&&-1===t&&(t=$e),v(e).overflow=t),e}var wn=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,xn=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Mn=/Z|[+-]\d\d(?::?\d\d)?/,En=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Sn=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],kn=/^\/?Date\((-?\d+)/i,Tn=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Ln={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Cn(e){var t,n,r,i,o,a,s=e._i,l=wn.exec(s)||xn.exec(s);if(l){for(v(e).iso=!0,t=0,n=En.length;t<n;t++)if(En[t][1].exec(l[1])){i=En[t][0],r=!1!==En[t][2];break}if(null==i)return void(e._isValid=!1);if(l[3]){for(t=0,n=Sn.length;t<n;t++)if(Sn[t][1].exec(l[3])){o=(l[2]||" ")+Sn[t][0];break}if(null==o)return void(e._isValid=!1)}if(!r&&null!=o)return void(e._isValid=!1);if(l[4]){if(!Mn.exec(l[4]))return void(e._isValid=!1);a="Z"}e._f=i+(o||"")+(a||""),zn(e)}else e._isValid=!1}function Dn(e,t,n,r,i,o){var a=[An(e),nt.indexOf(t),parseInt(n,10),parseInt(r,10),parseInt(i,10)];return o&&a.push(parseInt(o,10)),a}function An(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function Pn(e){return e.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function On(e,t,n){return!e||Rt.indexOf(e)===new Date(t[0],t[1],t[2]).getDay()||(v(n).weekdayMismatch=!0,n._isValid=!1,!1)}function In(e,t,n){if(e)return Ln[e];if(t)return 0;var r=parseInt(n,10),i=r%100;return(r-i)/100*60+i}function Rn(e){var t,n=Tn.exec(Pn(e._i));if(n){if(t=Dn(n[4],n[3],n[2],n[5],n[6],n[7]),!On(n[1],t,e))return;e._a=t,e._tzm=In(n[8],n[9],n[10]),e._d=_t.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),v(e).rfc2822=!0}else e._isValid=!1}function Nn(e){var t=kn.exec(e._i);null===t?(Cn(e),!1===e._isValid&&(delete e._isValid,Rn(e),!1===e._isValid&&(delete e._isValid,e._strict?e._isValid=!1:i.createFromInputFallback(e)))):e._d=new Date(+t[1])}function Yn(e,t,n){return null!=e?e:null!=t?t:n}function jn(e){var t=new Date(i.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function Fn(e){var t,n,r,i,o,a=[];if(!e._d){for(r=jn(e),e._w&&null==e._a[Ve]&&null==e._a[Ue]&&Bn(e),null!=e._dayOfYear&&(o=Yn(e._a[We],r[We]),(e._dayOfYear>gt(o)||0===e._dayOfYear)&&(v(e)._overflowDayOfYear=!0),n=_t(o,0,e._dayOfYear),e._a[Ue]=n.getUTCMonth(),e._a[Ve]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=a[t]=r[t];for(;t<7;t++)e._a[t]=a[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[Xe]&&0===e._a[qe]&&0===e._a[Ke]&&0===e._a[Je]&&(e._nextDay=!0,e._a[Xe]=0),e._d=(e._useUTC?_t:bt).apply(null,a),i=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[Xe]=24),e._w&&void 0!==e._w.d&&e._w.d!==i&&(v(e).weekdayMismatch=!0)}}function Bn(e){var t,n,r,i,o,a,s,l,u;null!=(t=e._w).GG||null!=t.W||null!=t.E?(o=1,a=4,n=Yn(t.GG,e._a[We],Mt(Kn(),1,4).year),r=Yn(t.W,1),((i=Yn(t.E,1))<1||i>7)&&(l=!0)):(o=e._locale._week.dow,a=e._locale._week.doy,u=Mt(Kn(),o,a),n=Yn(t.gg,e._a[We],u.year),r=Yn(t.w,u.week),null!=t.d?((i=t.d)<0||i>6)&&(l=!0):null!=t.e?(i=t.e+o,(t.e<0||t.e>6)&&(l=!0)):i=o),r<1||r>Et(n,o,a)?v(e)._overflowWeeks=!0:null!=l?v(e)._overflowWeekday=!0:(s=xt(n,r,i,o,a),e._a[We]=s.year,e._dayOfYear=s.dayOfYear)}function zn(e){if(e._f!==i.ISO_8601)if(e._f!==i.RFC_2822){e._a=[],v(e).empty=!0;var t,n,r,o,a,s,l=""+e._i,u=l.length,c=0;for(r=U(e._f,e._locale).match(Y)||[],t=0;t<r.length;t++)o=r[t],(n=(l.match(Ne(o,e))||[])[0])&&((a=l.substr(0,l.indexOf(n))).length>0&&v(e).unusedInput.push(a),l=l.slice(l.indexOf(n)+n.length),c+=n.length),B[o]?(n?v(e).empty=!1:v(e).unusedTokens.push(o),He(o,n,e)):e._strict&&!n&&v(e).unusedTokens.push(o);v(e).charsLeftOver=u-c,l.length>0&&v(e).unusedInput.push(l),e._a[Xe]<=12&&!0===v(e).bigHour&&e._a[Xe]>0&&(v(e).bigHour=void 0),v(e).parsedDateParts=e._a.slice(0),v(e).meridiem=e._meridiem,e._a[Xe]=Hn(e._locale,e._a[Xe],e._meridiem),null!==(s=v(e).era)&&(e._a[We]=e._locale.erasConvertYear(s,e._a[We])),Fn(e),_n(e)}else Rn(e);else Cn(e)}function Hn(e,t,n){var r;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?((r=e.isPM(n))&&t<12&&(t+=12),r||12!==t||(t=0),t):t}function Gn(e){var t,n,r,i,o,a,s=!1;if(0===e._f.length)return v(e).invalidFormat=!0,void(e._d=new Date(NaN));for(i=0;i<e._f.length;i++)o=0,a=!1,t=x({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[i],zn(t),y(t)&&(a=!0),o+=v(t).charsLeftOver,o+=10*v(t).unusedTokens.length,v(t).score=o,s?o<r&&(r=o,n=t):(null==r||o<r||a)&&(r=o,n=t,a&&(s=!0));p(e,n||t)}function Wn(e){if(!e._d){var t=oe(e._i),n=void 0===t.day?t.date:t.day;e._a=f([t.year,t.month,n,t.hour,t.minute,t.second,t.millisecond],(function(e){return e&&parseInt(e,10)})),Fn(e)}}function Un(e){var t=new M(_n(Vn(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function Vn(e){var t=e._i,n=e._f;return e._locale=e._locale||yn(e._l),null===t||void 0===n&&""===t?b({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),E(t)?new M(_n(t)):(h(t)?e._d=t:a(n)?Gn(e):n?zn(e):Xn(e),y(e)||(e._d=null),e))}function Xn(e){var t=e._i;c(t)?e._d=new Date(i.now()):h(t)?e._d=new Date(t.valueOf()):"string"==typeof t?Nn(e):a(t)?(e._a=f(t.slice(0),(function(e){return parseInt(e,10)})),Fn(e)):s(t)?Wn(e):d(t)?e._d=new Date(t):i.createFromInputFallback(e)}function qn(e,t,n,r,i){var o={};return!0!==t&&!1!==t||(r=t,t=void 0),!0!==n&&!1!==n||(r=n,n=void 0),(s(e)&&u(e)||a(e)&&0===e.length)&&(e=void 0),o._isAMomentObject=!0,o._useUTC=o._isUTC=i,o._l=n,o._i=e,o._f=t,o._strict=r,Un(o)}function Kn(e,t,n,r){return qn(e,t,n,r,!1)}i.createFromInputFallback=k("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))})),i.ISO_8601=function(){},i.RFC_2822=function(){};var Jn=k("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=Kn.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:b()})),Zn=k("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=Kn.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:b()}));function $n(e,t){var n,r;if(1===t.length&&a(t[0])&&(t=t[0]),!t.length)return Kn();for(n=t[0],r=1;r<t.length;++r)t[r].isValid()&&!t[r][e](n)||(n=t[r]);return n}function Qn(){return $n("isBefore",[].slice.call(arguments,0))}function er(){return $n("isAfter",[].slice.call(arguments,0))}var tr=function(){return Date.now?Date.now():+new Date},nr=["year","quarter","month","week","day","hour","minute","second","millisecond"];function rr(e){var t,n,r=!1;for(t in e)if(l(e,t)&&(-1===Ge.call(nr,t)||null!=e[t]&&isNaN(e[t])))return!1;for(n=0;n<nr.length;++n)if(e[nr[n]]){if(r)return!1;parseFloat(e[nr[n]])!==de(e[nr[n]])&&(r=!0)}return!0}function ir(){return this._isValid}function or(){return Lr(NaN)}function ar(e){var t=oe(e),n=t.year||0,r=t.quarter||0,i=t.month||0,o=t.week||t.isoWeek||0,a=t.day||0,s=t.hour||0,l=t.minute||0,u=t.second||0,c=t.millisecond||0;this._isValid=rr(t),this._milliseconds=+c+1e3*u+6e4*l+1e3*s*60*60,this._days=+a+7*o,this._months=+i+3*r+12*n,this._data={},this._locale=yn(),this._bubble()}function sr(e){return e instanceof ar}function lr(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function ur(e,t,n){var r,i=Math.min(e.length,t.length),o=Math.abs(e.length-t.length),a=0;for(r=0;r<i;r++)(n&&e[r]!==t[r]||!n&&de(e[r])!==de(t[r]))&&a++;return a+o}function cr(e,t){z(e,0,0,(function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+N(~~(e/60),2)+t+N(~~e%60,2)}))}cr("Z",":"),cr("ZZ",""),Re("Z",Pe),Re("ZZ",Pe),Be(["Z","ZZ"],(function(e,t,n){n._useUTC=!0,n._tzm=hr(Pe,e)}));var dr=/([\+\-]|\d\d)/gi;function hr(e,t){var n,r,i=(t||"").match(e);return null===i?null:0===(r=60*(n=((i[i.length-1]||[])+"").match(dr)||["-",0,0])[1]+de(n[2]))?0:"+"===n[0]?r:-r}function fr(e,t){var n,r;return t._isUTC?(n=t.clone(),r=(E(e)||h(e)?e.valueOf():Kn(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+r),i.updateOffset(n,!1),n):Kn(e).local()}function pr(e){return-Math.round(e._d.getTimezoneOffset())}function mr(e,t,n){var r,o=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"==typeof e){if(null===(e=hr(Pe,e)))return this}else Math.abs(e)<16&&!n&&(e*=60);return!this._isUTC&&t&&(r=pr(this)),this._offset=e,this._isUTC=!0,null!=r&&this.add(r,"m"),o!==e&&(!t||this._changeInProgress?Or(this,Lr(e-o,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,i.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?o:pr(this)}function gr(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function vr(e){return this.utcOffset(0,e)}function yr(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(pr(this),"m")),this}function br(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=hr(Ae,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this}function _r(e){return!!this.isValid()&&(e=e?Kn(e).utcOffset():0,(this.utcOffset()-e)%60==0)}function wr(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function xr(){if(!c(this._isDSTShifted))return this._isDSTShifted;var e,t={};return x(t,this),(t=Vn(t))._a?(e=t._isUTC?m(t._a):Kn(t._a),this._isDSTShifted=this.isValid()&&ur(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function Mr(){return!!this.isValid()&&!this._isUTC}function Er(){return!!this.isValid()&&this._isUTC}function Sr(){return!!this.isValid()&&this._isUTC&&0===this._offset}i.updateOffset=function(){};var kr=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Tr=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Lr(e,t){var n,r,i,o=e,a=null;return sr(e)?o={ms:e._milliseconds,d:e._days,M:e._months}:d(e)||!isNaN(+e)?(o={},t?o[t]=+e:o.milliseconds=+e):(a=kr.exec(e))?(n="-"===a[1]?-1:1,o={y:0,d:de(a[Ve])*n,h:de(a[Xe])*n,m:de(a[qe])*n,s:de(a[Ke])*n,ms:de(lr(1e3*a[Je]))*n}):(a=Tr.exec(e))?(n="-"===a[1]?-1:1,o={y:Cr(a[2],n),M:Cr(a[3],n),w:Cr(a[4],n),d:Cr(a[5],n),h:Cr(a[6],n),m:Cr(a[7],n),s:Cr(a[8],n)}):null==o?o={}:"object"==typeof o&&("from"in o||"to"in o)&&(i=Ar(Kn(o.from),Kn(o.to)),(o={}).ms=i.milliseconds,o.M=i.months),r=new ar(o),sr(e)&&l(e,"_locale")&&(r._locale=e._locale),sr(e)&&l(e,"_isValid")&&(r._isValid=e._isValid),r}function Cr(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Dr(e,t){var n={};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function Ar(e,t){var n;return e.isValid()&&t.isValid()?(t=fr(t,e),e.isBefore(t)?n=Dr(e,t):((n=Dr(t,e)).milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function Pr(e,t){return function(n,r){var i;return null===r||isNaN(+r)||(C(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=n,n=r,r=i),Or(this,Lr(n,r),e),this}}function Or(e,t,n,r){var o=t._milliseconds,a=lr(t._days),s=lr(t._months);e.isValid()&&(r=null==r||r,s&&ct(e,fe(e,"Month")+s*n),a&&pe(e,"Date",fe(e,"Date")+a*n),o&&e._d.setTime(e._d.valueOf()+o*n),r&&i.updateOffset(e,a||s))}Lr.fn=ar.prototype,Lr.invalid=or;var Ir=Pr(1,"add"),Rr=Pr(-1,"subtract");function Nr(e){return"string"==typeof e||e instanceof String}function Yr(e){return E(e)||h(e)||Nr(e)||d(e)||Fr(e)||jr(e)||null==e}function jr(e){var t,n,r=s(e)&&!u(e),i=!1,o=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"];for(t=0;t<o.length;t+=1)n=o[t],i=i||l(e,n);return r&&i}function Fr(e){var t=a(e),n=!1;return t&&(n=0===e.filter((function(t){return!d(t)&&Nr(e)})).length),t&&n}function Br(e){var t,n,r=s(e)&&!u(e),i=!1,o=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(t=0;t<o.length;t+=1)n=o[t],i=i||l(e,n);return r&&i}function zr(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function Hr(e,t){1===arguments.length&&(arguments[0]?Yr(arguments[0])?(e=arguments[0],t=void 0):Br(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var n=e||Kn(),r=fr(n,this).startOf("day"),o=i.calendarFormat(this,r)||"sameElse",a=t&&(D(t[o])?t[o].call(this,n):t[o]);return this.format(a||this.localeData().calendar(o,this,Kn(n)))}function Gr(){return new M(this)}function Wr(e,t){var n=E(e)?e:Kn(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=ie(t)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())}function Ur(e,t){var n=E(e)?e:Kn(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=ie(t)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())}function Vr(e,t,n,r){var i=E(e)?e:Kn(e),o=E(t)?t:Kn(t);return!!(this.isValid()&&i.isValid()&&o.isValid())&&("("===(r=r||"()")[0]?this.isAfter(i,n):!this.isBefore(i,n))&&(")"===r[1]?this.isBefore(o,n):!this.isAfter(o,n))}function Xr(e,t){var n,r=E(e)?e:Kn(e);return!(!this.isValid()||!r.isValid())&&("millisecond"===(t=ie(t)||"millisecond")?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))}function qr(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function Kr(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function Jr(e,t,n){var r,i,o;if(!this.isValid())return NaN;if(!(r=fr(e,this)).isValid())return NaN;switch(i=6e4*(r.utcOffset()-this.utcOffset()),t=ie(t)){case"year":o=Zr(this,r)/12;break;case"month":o=Zr(this,r);break;case"quarter":o=Zr(this,r)/3;break;case"second":o=(this-r)/1e3;break;case"minute":o=(this-r)/6e4;break;case"hour":o=(this-r)/36e5;break;case"day":o=(this-r-i)/864e5;break;case"week":o=(this-r-i)/6048e5;break;default:o=this-r}return n?o:ce(o)}function Zr(e,t){if(e.date()<t.date())return-Zr(t,e);var n=12*(t.year()-e.year())+(t.month()-e.month()),r=e.clone().add(n,"months");return-(n+(t-r<0?(t-r)/(r-e.clone().add(n-1,"months")):(t-r)/(e.clone().add(n+1,"months")-r)))||0}function $r(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Qr(e){if(!this.isValid())return null;var t=!0!==e,n=t?this.clone().utc():this;return n.year()<0||n.year()>9999?W(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):D(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",W(n,"Z")):W(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function ei(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e,t,n,r,i="moment",o="";return this.isLocal()||(i=0===this.utcOffset()?"moment.utc":"moment.parseZone",o="Z"),e="["+i+'("]',t=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n="-MM-DD[T]HH:mm:ss.SSS",r=o+'[")]',this.format(e+t+n+r)}function ti(e){e||(e=this.isUtc()?i.defaultFormatUtc:i.defaultFormat);var t=W(this,e);return this.localeData().postformat(t)}function ni(e,t){return this.isValid()&&(E(e)&&e.isValid()||Kn(e).isValid())?Lr({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function ri(e){return this.from(Kn(),e)}function ii(e,t){return this.isValid()&&(E(e)&&e.isValid()||Kn(e).isValid())?Lr({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function oi(e){return this.to(Kn(),e)}function ai(e){var t;return void 0===e?this._locale._abbr:(null!=(t=yn(e))&&(this._locale=t),this)}i.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",i.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var si=k("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(e){return void 0===e?this.localeData():this.locale(e)}));function li(){return this._locale}var ui=1e3,ci=60*ui,di=60*ci,hi=3506328*di;function fi(e,t){return(e%t+t)%t}function pi(e,t,n){return e<100&&e>=0?new Date(e+400,t,n)-hi:new Date(e,t,n).valueOf()}function mi(e,t,n){return e<100&&e>=0?Date.UTC(e+400,t,n)-hi:Date.UTC(e,t,n)}function gi(e){var t,n;if(void 0===(e=ie(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?mi:pi,e){case"year":t=n(this.year(),0,1);break;case"quarter":t=n(this.year(),this.month()-this.month()%3,1);break;case"month":t=n(this.year(),this.month(),1);break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=n(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=fi(t+(this._isUTC?0:this.utcOffset()*ci),di);break;case"minute":t=this._d.valueOf(),t-=fi(t,ci);break;case"second":t=this._d.valueOf(),t-=fi(t,ui)}return this._d.setTime(t),i.updateOffset(this,!0),this}function vi(e){var t,n;if(void 0===(e=ie(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?mi:pi,e){case"year":t=n(this.year()+1,0,1)-1;break;case"quarter":t=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=n(this.year(),this.month()+1,1)-1;break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=di-fi(t+(this._isUTC?0:this.utcOffset()*ci),di)-1;break;case"minute":t=this._d.valueOf(),t+=ci-fi(t,ci)-1;break;case"second":t=this._d.valueOf(),t+=ui-fi(t,ui)-1}return this._d.setTime(t),i.updateOffset(this,!0),this}function yi(){return this._d.valueOf()-6e4*(this._offset||0)}function bi(){return Math.floor(this.valueOf()/1e3)}function _i(){return new Date(this.valueOf())}function wi(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function xi(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function Mi(){return this.isValid()?this.toISOString():null}function Ei(){return y(this)}function Si(){return p({},v(this))}function ki(){return v(this).overflow}function Ti(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Li(e,t){var n,r,o,a=this._eras||yn("en")._eras;for(n=0,r=a.length;n<r;++n)switch("string"==typeof a[n].since&&(o=i(a[n].since).startOf("day"),a[n].since=o.valueOf()),typeof a[n].until){case"undefined":a[n].until=1/0;break;case"string":o=i(a[n].until).startOf("day").valueOf(),a[n].until=o.valueOf()}return a}function Ci(e,t,n){var r,i,o,a,s,l=this.eras();for(e=e.toUpperCase(),r=0,i=l.length;r<i;++r)if(o=l[r].name.toUpperCase(),a=l[r].abbr.toUpperCase(),s=l[r].narrow.toUpperCase(),n)switch(t){case"N":case"NN":case"NNN":if(a===e)return l[r];break;case"NNNN":if(o===e)return l[r];break;case"NNNNN":if(s===e)return l[r]}else if([o,a,s].indexOf(e)>=0)return l[r]}function Di(e,t){var n=e.since<=e.until?1:-1;return void 0===t?i(e.since).year():i(e.since).year()+(t-e.offset)*n}function Ai(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until)return r[e].name;if(r[e].until<=n&&n<=r[e].since)return r[e].name}return""}function Pi(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until)return r[e].narrow;if(r[e].until<=n&&n<=r[e].since)return r[e].narrow}return""}function Oi(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until)return r[e].abbr;if(r[e].until<=n&&n<=r[e].since)return r[e].abbr}return""}function Ii(){var e,t,n,r,o=this.localeData().eras();for(e=0,t=o.length;e<t;++e)if(n=o[e].since<=o[e].until?1:-1,r=this.clone().startOf("day").valueOf(),o[e].since<=r&&r<=o[e].until||o[e].until<=r&&r<=o[e].since)return(this.year()-i(o[e].since).year())*n+o[e].offset;return this.year()}function Ri(e){return l(this,"_erasNameRegex")||Hi.call(this),e?this._erasNameRegex:this._erasRegex}function Ni(e){return l(this,"_erasAbbrRegex")||Hi.call(this),e?this._erasAbbrRegex:this._erasRegex}function Yi(e){return l(this,"_erasNarrowRegex")||Hi.call(this),e?this._erasNarrowRegex:this._erasRegex}function ji(e,t){return t.erasAbbrRegex(e)}function Fi(e,t){return t.erasNameRegex(e)}function Bi(e,t){return t.erasNarrowRegex(e)}function zi(e,t){return t._eraYearOrdinalRegex||Ce}function Hi(){var e,t,n=[],r=[],i=[],o=[],a=this.eras();for(e=0,t=a.length;e<t;++e)r.push(je(a[e].name)),n.push(je(a[e].abbr)),i.push(je(a[e].narrow)),o.push(je(a[e].name)),o.push(je(a[e].abbr)),o.push(je(a[e].narrow));this._erasRegex=new RegExp("^("+o.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+r.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+i.join("|")+")","i")}function Gi(e,t){z(0,[e,e.length],0,t)}function Wi(e){return Ji.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Ui(e){return Ji.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function Vi(){return Et(this.year(),1,4)}function Xi(){return Et(this.isoWeekYear(),1,4)}function qi(){var e=this.localeData()._week;return Et(this.year(),e.dow,e.doy)}function Ki(){var e=this.localeData()._week;return Et(this.weekYear(),e.dow,e.doy)}function Ji(e,t,n,r,i){var o;return null==e?Mt(this,r,i).year:(t>(o=Et(e,r,i))&&(t=o),Zi.call(this,e,t,n,r,i))}function Zi(e,t,n,r,i){var o=xt(e,t,n,r,i),a=_t(o.year,0,o.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}function $i(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}z("N",0,0,"eraAbbr"),z("NN",0,0,"eraAbbr"),z("NNN",0,0,"eraAbbr"),z("NNNN",0,0,"eraName"),z("NNNNN",0,0,"eraNarrow"),z("y",["y",1],"yo","eraYear"),z("y",["yy",2],0,"eraYear"),z("y",["yyy",3],0,"eraYear"),z("y",["yyyy",4],0,"eraYear"),Re("N",ji),Re("NN",ji),Re("NNN",ji),Re("NNNN",Fi),Re("NNNNN",Bi),Be(["N","NN","NNN","NNNN","NNNNN"],(function(e,t,n,r){var i=n._locale.erasParse(e,r,n._strict);i?v(n).era=i:v(n).invalidEra=e})),Re("y",Ce),Re("yy",Ce),Re("yyy",Ce),Re("yyyy",Ce),Re("yo",zi),Be(["y","yy","yyy","yyyy"],We),Be(["yo"],(function(e,t,n,r){var i;n._locale._eraYearOrdinalRegex&&(i=e.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?t[We]=n._locale.eraYearOrdinalParse(e,i):t[We]=parseInt(e,10)})),z(0,["gg",2],0,(function(){return this.weekYear()%100})),z(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),Gi("gggg","weekYear"),Gi("ggggg","weekYear"),Gi("GGGG","isoWeekYear"),Gi("GGGGG","isoWeekYear"),re("weekYear","gg"),re("isoWeekYear","GG"),se("weekYear",1),se("isoWeekYear",1),Re("G",De),Re("g",De),Re("GG",Me,be),Re("gg",Me,be),Re("GGGG",Te,we),Re("gggg",Te,we),Re("GGGGG",Le,xe),Re("ggggg",Le,xe),ze(["gggg","ggggg","GGGG","GGGGG"],(function(e,t,n,r){t[r.substr(0,2)]=de(e)})),ze(["gg","GG"],(function(e,t,n,r){t[r]=i.parseTwoDigitYear(e)})),z("Q",0,"Qo","quarter"),re("quarter","Q"),se("quarter",7),Re("Q",ye),Be("Q",(function(e,t){t[Ue]=3*(de(e)-1)})),z("D",["DD",2],"Do","date"),re("date","D"),se("date",9),Re("D",Me),Re("DD",Me,be),Re("Do",(function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient})),Be(["D","DD"],Ve),Be("Do",(function(e,t){t[Ve]=de(e.match(Me)[0])}));var Qi=he("Date",!0);function eo(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}z("DDD",["DDDD",3],"DDDo","dayOfYear"),re("dayOfYear","DDD"),se("dayOfYear",4),Re("DDD",ke),Re("DDDD",_e),Be(["DDD","DDDD"],(function(e,t,n){n._dayOfYear=de(e)})),z("m",["mm",2],0,"minute"),re("minute","m"),se("minute",14),Re("m",Me),Re("mm",Me,be),Be(["m","mm"],qe);var to=he("Minutes",!1);z("s",["ss",2],0,"second"),re("second","s"),se("second",15),Re("s",Me),Re("ss",Me,be),Be(["s","ss"],Ke);var no,ro,io=he("Seconds",!1);for(z("S",0,0,(function(){return~~(this.millisecond()/100)})),z(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),z(0,["SSS",3],0,"millisecond"),z(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),z(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),z(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),z(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),z(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),z(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),re("millisecond","ms"),se("millisecond",16),Re("S",ke,ye),Re("SS",ke,be),Re("SSS",ke,_e),no="SSSS";no.length<=9;no+="S")Re(no,Ce);function oo(e,t){t[Je]=de(1e3*("0."+e))}for(no="S";no.length<=9;no+="S")Be(no,oo);function ao(){return this._isUTC?"UTC":""}function so(){return this._isUTC?"Coordinated Universal Time":""}ro=he("Milliseconds",!1),z("z",0,0,"zoneAbbr"),z("zz",0,0,"zoneName");var lo=M.prototype;function uo(e){return Kn(1e3*e)}function co(){return Kn.apply(null,arguments).parseZone()}function ho(e){return e}lo.add=Ir,lo.calendar=Hr,lo.clone=Gr,lo.diff=Jr,lo.endOf=vi,lo.format=ti,lo.from=ni,lo.fromNow=ri,lo.to=ii,lo.toNow=oi,lo.get=me,lo.invalidAt=ki,lo.isAfter=Wr,lo.isBefore=Ur,lo.isBetween=Vr,lo.isSame=Xr,lo.isSameOrAfter=qr,lo.isSameOrBefore=Kr,lo.isValid=Ei,lo.lang=si,lo.locale=ai,lo.localeData=li,lo.max=Zn,lo.min=Jn,lo.parsingFlags=Si,lo.set=ge,lo.startOf=gi,lo.subtract=Rr,lo.toArray=wi,lo.toObject=xi,lo.toDate=_i,lo.toISOString=Qr,lo.inspect=ei,"undefined"!=typeof Symbol&&null!=Symbol.for&&(lo[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),lo.toJSON=Mi,lo.toString=$r,lo.unix=bi,lo.valueOf=yi,lo.creationData=Ti,lo.eraName=Ai,lo.eraNarrow=Pi,lo.eraAbbr=Oi,lo.eraYear=Ii,lo.year=vt,lo.isLeapYear=yt,lo.weekYear=Wi,lo.isoWeekYear=Ui,lo.quarter=lo.quarters=$i,lo.month=dt,lo.daysInMonth=ht,lo.week=lo.weeks=Ct,lo.isoWeek=lo.isoWeeks=Dt,lo.weeksInYear=qi,lo.weeksInWeekYear=Ki,lo.isoWeeksInYear=Vi,lo.isoWeeksInISOWeekYear=Xi,lo.date=Qi,lo.day=lo.days=Ut,lo.weekday=Vt,lo.isoWeekday=Xt,lo.dayOfYear=eo,lo.hour=lo.hours=on,lo.minute=lo.minutes=to,lo.second=lo.seconds=io,lo.millisecond=lo.milliseconds=ro,lo.utcOffset=mr,lo.utc=vr,lo.local=yr,lo.parseZone=br,lo.hasAlignedHourOffset=_r,lo.isDST=wr,lo.isLocal=Mr,lo.isUtcOffset=Er,lo.isUtc=Sr,lo.isUTC=Sr,lo.zoneAbbr=ao,lo.zoneName=so,lo.dates=k("dates accessor is deprecated. Use date instead.",Qi),lo.months=k("months accessor is deprecated. Use month instead",dt),lo.years=k("years accessor is deprecated. Use year instead",vt),lo.zone=k("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",gr),lo.isDSTShifted=k("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",xr);var fo=O.prototype;function po(e,t,n,r){var i=yn(),o=m().set(r,t);return i[n](o,e)}function mo(e,t,n){if(d(e)&&(t=e,e=void 0),e=e||"",null!=t)return po(e,t,n,"month");var r,i=[];for(r=0;r<12;r++)i[r]=po(e,r,n,"month");return i}function go(e,t,n,r){"boolean"==typeof e?(d(t)&&(n=t,t=void 0),t=t||""):(n=t=e,e=!1,d(t)&&(n=t,t=void 0),t=t||"");var i,o=yn(),a=e?o._week.dow:0,s=[];if(null!=n)return po(t,(n+a)%7,r,"day");for(i=0;i<7;i++)s[i]=po(t,(i+a)%7,r,"day");return s}function vo(e,t){return mo(e,t,"months")}function yo(e,t){return mo(e,t,"monthsShort")}function bo(e,t,n){return go(e,t,n,"weekdays")}function _o(e,t,n){return go(e,t,n,"weekdaysShort")}function wo(e,t,n){return go(e,t,n,"weekdaysMin")}fo.calendar=R,fo.longDateFormat=X,fo.invalidDate=K,fo.ordinal=$,fo.preparse=ho,fo.postformat=ho,fo.relativeTime=ee,fo.pastFuture=te,fo.set=A,fo.eras=Li,fo.erasParse=Ci,fo.erasConvertYear=Di,fo.erasAbbrRegex=Ni,fo.erasNameRegex=Ri,fo.erasNarrowRegex=Yi,fo.months=at,fo.monthsShort=st,fo.monthsParse=ut,fo.monthsRegex=pt,fo.monthsShortRegex=ft,fo.week=St,fo.firstDayOfYear=Lt,fo.firstDayOfWeek=Tt,fo.weekdays=Bt,fo.weekdaysMin=Ht,fo.weekdaysShort=zt,fo.weekdaysParse=Wt,fo.weekdaysRegex=qt,fo.weekdaysShortRegex=Kt,fo.weekdaysMinRegex=Jt,fo.isPM=nn,fo.meridiem=an,mn("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===de(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),i.lang=k("moment.lang is deprecated. Use moment.locale instead.",mn),i.langData=k("moment.langData is deprecated. Use moment.localeData instead.",yn);var xo=Math.abs;function Mo(){var e=this._data;return this._milliseconds=xo(this._milliseconds),this._days=xo(this._days),this._months=xo(this._months),e.milliseconds=xo(e.milliseconds),e.seconds=xo(e.seconds),e.minutes=xo(e.minutes),e.hours=xo(e.hours),e.months=xo(e.months),e.years=xo(e.years),this}function Eo(e,t,n,r){var i=Lr(t,n);return e._milliseconds+=r*i._milliseconds,e._days+=r*i._days,e._months+=r*i._months,e._bubble()}function So(e,t){return Eo(this,e,t,1)}function ko(e,t){return Eo(this,e,t,-1)}function To(e){return e<0?Math.floor(e):Math.ceil(e)}function Lo(){var e,t,n,r,i,o=this._milliseconds,a=this._days,s=this._months,l=this._data;return o>=0&&a>=0&&s>=0||o<=0&&a<=0&&s<=0||(o+=864e5*To(Do(s)+a),a=0,s=0),l.milliseconds=o%1e3,e=ce(o/1e3),l.seconds=e%60,t=ce(e/60),l.minutes=t%60,n=ce(t/60),l.hours=n%24,a+=ce(n/24),s+=i=ce(Co(a)),a-=To(Do(i)),r=ce(s/12),s%=12,l.days=a,l.months=s,l.years=r,this}function Co(e){return 4800*e/146097}function Do(e){return 146097*e/4800}function Ao(e){if(!this.isValid())return NaN;var t,n,r=this._milliseconds;if("month"===(e=ie(e))||"quarter"===e||"year"===e)switch(t=this._days+r/864e5,n=this._months+Co(t),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(t=this._days+Math.round(Do(this._months)),e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return 24*t+r/36e5;case"minute":return 1440*t+r/6e4;case"second":return 86400*t+r/1e3;case"millisecond":return Math.floor(864e5*t)+r;default:throw new Error("Unknown unit "+e)}}function Po(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*de(this._months/12):NaN}function Oo(e){return function(){return this.as(e)}}var Io=Oo("ms"),Ro=Oo("s"),No=Oo("m"),Yo=Oo("h"),jo=Oo("d"),Fo=Oo("w"),Bo=Oo("M"),zo=Oo("Q"),Ho=Oo("y");function Go(){return Lr(this)}function Wo(e){return e=ie(e),this.isValid()?this[e+"s"]():NaN}function Uo(e){return function(){return this.isValid()?this._data[e]:NaN}}var Vo=Uo("milliseconds"),Xo=Uo("seconds"),qo=Uo("minutes"),Ko=Uo("hours"),Jo=Uo("days"),Zo=Uo("months"),$o=Uo("years");function Qo(){return ce(this.days()/7)}var ea=Math.round,ta={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function na(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}function ra(e,t,n,r){var i=Lr(e).abs(),o=ea(i.as("s")),a=ea(i.as("m")),s=ea(i.as("h")),l=ea(i.as("d")),u=ea(i.as("M")),c=ea(i.as("w")),d=ea(i.as("y")),h=o<=n.ss&&["s",o]||o<n.s&&["ss",o]||a<=1&&["m"]||a<n.m&&["mm",a]||s<=1&&["h"]||s<n.h&&["hh",s]||l<=1&&["d"]||l<n.d&&["dd",l];return null!=n.w&&(h=h||c<=1&&["w"]||c<n.w&&["ww",c]),(h=h||u<=1&&["M"]||u<n.M&&["MM",u]||d<=1&&["y"]||["yy",d])[2]=t,h[3]=+e>0,h[4]=r,na.apply(null,h)}function ia(e){return void 0===e?ea:"function"==typeof e&&(ea=e,!0)}function oa(e,t){return void 0!==ta[e]&&(void 0===t?ta[e]:(ta[e]=t,"s"===e&&(ta.ss=t-1),!0))}function aa(e,t){if(!this.isValid())return this.localeData().invalidDate();var n,r,i=!1,o=ta;return"object"==typeof e&&(t=e,e=!1),"boolean"==typeof e&&(i=e),"object"==typeof t&&(o=Object.assign({},ta,t),null!=t.s&&null==t.ss&&(o.ss=t.s-1)),r=ra(this,!i,o,n=this.localeData()),i&&(r=n.pastFuture(+this,r)),n.postformat(r)}var sa=Math.abs;function la(e){return(e>0)-(e<0)||+e}function ua(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n,r,i,o,a,s,l=sa(this._milliseconds)/1e3,u=sa(this._days),c=sa(this._months),d=this.asSeconds();return d?(e=ce(l/60),t=ce(e/60),l%=60,e%=60,n=ce(c/12),c%=12,r=l?l.toFixed(3).replace(/\.?0+$/,""):"",i=d<0?"-":"",o=la(this._months)!==la(d)?"-":"",a=la(this._days)!==la(d)?"-":"",s=la(this._milliseconds)!==la(d)?"-":"",i+"P"+(n?o+n+"Y":"")+(c?o+c+"M":"")+(u?a+u+"D":"")+(t||e||l?"T":"")+(t?s+t+"H":"")+(e?s+e+"M":"")+(l?s+r+"S":"")):"P0D"}var ca=ar.prototype;return ca.isValid=ir,ca.abs=Mo,ca.add=So,ca.subtract=ko,ca.as=Ao,ca.asMilliseconds=Io,ca.asSeconds=Ro,ca.asMinutes=No,ca.asHours=Yo,ca.asDays=jo,ca.asWeeks=Fo,ca.asMonths=Bo,ca.asQuarters=zo,ca.asYears=Ho,ca.valueOf=Po,ca._bubble=Lo,ca.clone=Go,ca.get=Wo,ca.milliseconds=Vo,ca.seconds=Xo,ca.minutes=qo,ca.hours=Ko,ca.days=Jo,ca.weeks=Qo,ca.months=Zo,ca.years=$o,ca.humanize=aa,ca.toISOString=ua,ca.toString=ua,ca.toJSON=ua,ca.locale=ai,ca.localeData=li,ca.toIsoString=k("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",ua),ca.lang=si,z("X",0,0,"unix"),z("x",0,0,"valueOf"),Re("x",De),Re("X",Oe),Be("X",(function(e,t,n){n._d=new Date(1e3*parseFloat(e))})),Be("x",(function(e,t,n){n._d=new Date(de(e))})),i.version="2.29.1",o(Kn),i.fn=lo,i.min=Qn,i.max=er,i.now=tr,i.utc=m,i.unix=uo,i.months=vo,i.isDate=h,i.locale=mn,i.invalid=b,i.duration=Lr,i.isMoment=E,i.weekdays=bo,i.parseZone=co,i.localeData=yn,i.isDuration=sr,i.monthsShort=yo,i.weekdaysMin=wo,i.defineLocale=gn,i.updateLocale=vn,i.locales=bn,i.weekdaysShort=_o,i.normalizeUnits=ie,i.relativeTimeRounding=ia,i.relativeTimeThreshold=oa,i.calendarFormat=zr,i.prototype=lo,i.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},i}()},40582:(e,t,n)=>{var r=n(89550),i=n(68854),o=n(36820),a=n(43650),s=n(56601),l=[0,0];e.exports.x7=function(e,t,n,a,u){return r(e,n,a),o(e,e),i(t,-e[1],e[0]),i(l,-n[1],n[0]),u/s(t,l)},e.exports.mJ=function(e,t){return i(e,-t[1],t[0]),e},e.exports.o7=function(e,t,n){return a(e,t,n),o(e,e),e}},28660:(e,t,n)=>{var r;!function(e){!function(t){var r="object"==typeof n.g?n.g:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),i=o(e);function o(e,t){return function(n,r){"function"!=typeof e[n]&&Object.defineProperty(e,n,{configurable:!0,writable:!0,value:r}),t&&t(n,r)}}void 0===r.Reflect?r.Reflect=e:i=o(r.Reflect,i),function(e){var t=Object.prototype.hasOwnProperty,n="function"==typeof Symbol,r=n&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",i=n&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",o="function"==typeof Object.create,a={__proto__:[]}instanceof Array,s=!o&&!a,l={create:o?function(){return re(Object.create(null))}:a?function(){return re({__proto__:null})}:function(){return re({})},has:s?function(e,n){return t.call(e,n)}:function(e,t){return t in e},get:s?function(e,n){return t.call(e,n)?e[n]:void 0}:function(e,t){return e[t]}},u=Object.getPrototypeOf(Function),c="object"==typeof process&&process.env&&"true"===process.env.REFLECT_METADATA_USE_MAP_POLYFILL,d=c||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?ee():Map,h=c||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?te():Set,f=new(c||"function"!=typeof WeakMap?ne():WeakMap);function p(e,t,n,r){if(R(n)){if(!W(e))throw new TypeError;if(!V(t))throw new TypeError;return E(e,t)}if(!W(e))throw new TypeError;if(!j(t))throw new TypeError;if(!j(r)&&!R(r)&&!N(r))throw new TypeError;return N(r)&&(r=void 0),S(e,t,n=G(n),r)}function m(e,t){function n(n,r){if(!j(n))throw new TypeError;if(!R(r)&&!X(r))throw new TypeError;A(e,t,n,r)}return n}function g(e,t,n,r){if(!j(n))throw new TypeError;return R(r)||(r=G(r)),A(e,t,n,r)}function v(e,t,n){if(!j(t))throw new TypeError;return R(n)||(n=G(n)),T(e,t,n)}function y(e,t,n){if(!j(t))throw new TypeError;return R(n)||(n=G(n)),L(e,t,n)}function b(e,t,n){if(!j(t))throw new TypeError;return R(n)||(n=G(n)),C(e,t,n)}function _(e,t,n){if(!j(t))throw new TypeError;return R(n)||(n=G(n)),D(e,t,n)}function w(e,t){if(!j(e))throw new TypeError;return R(t)||(t=G(t)),P(e,t)}function x(e,t){if(!j(e))throw new TypeError;return R(t)||(t=G(t)),O(e,t)}function M(e,t,n){if(!j(t))throw new TypeError;R(n)||(n=G(n));var r=k(t,n,!1);if(R(r))return!1;if(!r.delete(e))return!1;if(r.size>0)return!0;var i=f.get(t);return i.delete(n),i.size>0||f.delete(t),!0}function E(e,t){for(var n=e.length-1;n>=0;--n){var r=(0,e[n])(t);if(!R(r)&&!N(r)){if(!V(r))throw new TypeError;t=r}}return t}function S(e,t,n,r){for(var i=e.length-1;i>=0;--i){var o=(0,e[i])(t,n,r);if(!R(o)&&!N(o)){if(!j(o))throw new TypeError;r=o}}return r}function k(e,t,n){var r=f.get(e);if(R(r)){if(!n)return;r=new d,f.set(e,r)}var i=r.get(t);if(R(i)){if(!n)return;i=new d,r.set(t,i)}return i}function T(e,t,n){if(L(e,t,n))return!0;var r=Q(t);return!N(r)&&T(e,r,n)}function L(e,t,n){var r=k(t,n,!1);return!R(r)&&z(r.has(e))}function C(e,t,n){if(L(e,t,n))return D(e,t,n);var r=Q(t);return N(r)?void 0:C(e,r,n)}function D(e,t,n){var r=k(t,n,!1);if(!R(r))return r.get(e)}function A(e,t,n,r){k(n,r,!0).set(e,t)}function P(e,t){var n=O(e,t),r=Q(e);if(null===r)return n;var i=P(r,t);if(i.length<=0)return n;if(n.length<=0)return i;for(var o=new h,a=[],s=0,l=n;s<l.length;s++){var u=l[s];o.has(u)||(o.add(u),a.push(u))}for(var c=0,d=i;c<d.length;c++){u=d[c];o.has(u)||(o.add(u),a.push(u))}return a}function O(e,t){var n=[],r=k(e,t,!1);if(R(r))return n;for(var i=K(r.keys()),o=0;;){var a=Z(i);if(!a)return n.length=o,n;var s=J(a);try{n[o]=s}catch(e){try{$(i)}finally{throw e}}o++}}function I(e){if(null===e)return 1;switch(typeof e){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===e?1:6;default:return 6}}function R(e){return void 0===e}function N(e){return null===e}function Y(e){return"symbol"==typeof e}function j(e){return"object"==typeof e?null!==e:"function"==typeof e}function F(e,t){switch(I(e)){case 0:case 1:case 2:case 3:case 4:case 5:return e}var n=3===t?"string":5===t?"number":"default",i=q(e,r);if(void 0!==i){var o=i.call(e,n);if(j(o))throw new TypeError;return o}return B(e,"default"===n?"number":n)}function B(e,t){if("string"===t){var n=e.toString;if(U(n))if(!j(i=n.call(e)))return i;if(U(r=e.valueOf))if(!j(i=r.call(e)))return i}else{var r;if(U(r=e.valueOf))if(!j(i=r.call(e)))return i;var i,o=e.toString;if(U(o))if(!j(i=o.call(e)))return i}throw new TypeError}function z(e){return!!e}function H(e){return""+e}function G(e){var t=F(e,3);return Y(t)?t:H(t)}function W(e){return Array.isArray?Array.isArray(e):e instanceof Object?e instanceof Array:"[object Array]"===Object.prototype.toString.call(e)}function U(e){return"function"==typeof e}function V(e){return"function"==typeof e}function X(e){switch(I(e)){case 3:case 4:return!0;default:return!1}}function q(e,t){var n=e[t];if(null!=n){if(!U(n))throw new TypeError;return n}}function K(e){var t=q(e,i);if(!U(t))throw new TypeError;var n=t.call(e);if(!j(n))throw new TypeError;return n}function J(e){return e.value}function Z(e){var t=e.next();return!t.done&&t}function $(e){var t=e.return;t&&t.call(e)}function Q(e){var t=Object.getPrototypeOf(e);if("function"!=typeof e||e===u)return t;if(t!==u)return t;var n=e.prototype,r=n&&Object.getPrototypeOf(n);if(null==r||r===Object.prototype)return t;var i=r.constructor;return"function"!=typeof i||i===e?t:i}function ee(){var e={},t=[],n=function(){function e(e,t,n){this._index=0,this._keys=e,this._values=t,this._selector=n}return e.prototype["@@iterator"]=function(){return this},e.prototype[i]=function(){return this},e.prototype.next=function(){var e=this._index;if(e>=0&&e<this._keys.length){var n=this._selector(this._keys[e],this._values[e]);return e+1>=this._keys.length?(this._index=-1,this._keys=t,this._values=t):this._index++,{value:n,done:!1}}return{value:void 0,done:!0}},e.prototype.throw=function(e){throw this._index>=0&&(this._index=-1,this._keys=t,this._values=t),e},e.prototype.return=function(e){return this._index>=0&&(this._index=-1,this._keys=t,this._values=t),{value:e,done:!0}},e}();return function(){function t(){this._keys=[],this._values=[],this._cacheKey=e,this._cacheIndex=-2}return Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),t.prototype.has=function(e){return this._find(e,!1)>=0},t.prototype.get=function(e){var t=this._find(e,!1);return t>=0?this._values[t]:void 0},t.prototype.set=function(e,t){var n=this._find(e,!0);return this._values[n]=t,this},t.prototype.delete=function(t){var n=this._find(t,!1);if(n>=0){for(var r=this._keys.length,i=n+1;i<r;i++)this._keys[i-1]=this._keys[i],this._values[i-1]=this._values[i];return this._keys.length--,this._values.length--,t===this._cacheKey&&(this._cacheKey=e,this._cacheIndex=-2),!0}return!1},t.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=e,this._cacheIndex=-2},t.prototype.keys=function(){return new n(this._keys,this._values,r)},t.prototype.values=function(){return new n(this._keys,this._values,o)},t.prototype.entries=function(){return new n(this._keys,this._values,a)},t.prototype["@@iterator"]=function(){return this.entries()},t.prototype[i]=function(){return this.entries()},t.prototype._find=function(e,t){return this._cacheKey!==e&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=e)),this._cacheIndex<0&&t&&(this._cacheIndex=this._keys.length,this._keys.push(e),this._values.push(void 0)),this._cacheIndex},t}();function r(e,t){return e}function o(e,t){return t}function a(e,t){return[e,t]}}function te(){return function(){function e(){this._map=new d}return Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.has=function(e){return this._map.has(e)},e.prototype.add=function(e){return this._map.set(e,e),this},e.prototype.delete=function(e){return this._map.delete(e)},e.prototype.clear=function(){this._map.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.values()},e.prototype.entries=function(){return this._map.entries()},e.prototype["@@iterator"]=function(){return this.keys()},e.prototype[i]=function(){return this.keys()},e}()}function ne(){var e=16,n=l.create(),r=i();return function(){function e(){this._key=i()}return e.prototype.has=function(e){var t=o(e,!1);return void 0!==t&&l.has(t,this._key)},e.prototype.get=function(e){var t=o(e,!1);return void 0!==t?l.get(t,this._key):void 0},e.prototype.set=function(e,t){return o(e,!0)[this._key]=t,this},e.prototype.delete=function(e){var t=o(e,!1);return void 0!==t&&delete t[this._key]},e.prototype.clear=function(){this._key=i()},e}();function i(){var e;do{e="@@WeakMap@@"+u()}while(l.has(n,e));return n[e]=!0,e}function o(e,n){if(!t.call(e,r)){if(!n)return;Object.defineProperty(e,r,{value:l.create()})}return e[r]}function a(e,t){for(var n=0;n<t;++n)e[n]=255*Math.random()|0;return e}function s(e){return"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(e)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(e)):a(new Uint8Array(e),e):a(new Array(e),e)}function u(){var t=s(e);t[6]=79&t[6]|64,t[8]=191&t[8]|128;for(var n="",r=0;r<e;++r){var i=t[r];4!==r&&6!==r&&8!==r||(n+="-"),i<16&&(n+="0"),n+=i.toString(16).toLowerCase()}return n}}function re(e){return e.__=void 0,delete e.__,e}e("decorate",p),e("metadata",m),e("defineMetadata",g),e("hasMetadata",v),e("hasOwnMetadata",y),e("getMetadata",b),e("getOwnMetadata",_),e("getMetadataKeys",w),e("getOwnMetadataKeys",x),e("deleteMetadata",M)}(i)}()}(r||(r={}))},35666:e=>{var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof g?t:g,o=Object.create(i.prototype),a=new L(r||[]);return o._invoke=function(e,t,n){var r=d;return function(i,o){if(r===f)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw o;return D()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=S(a,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=f;var l=c(e,t,n);if("normal"===l.type){if(r=n.done?p:h,l.arg===m)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r=p,n.method="throw",n.arg=l.arg)}}}(e,n,a),o}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var d="suspendedStart",h="suspendedYield",f="executing",p="completed",m={};function g(){}function v(){}function y(){}var b={};l(b,o,(function(){return this}));var _=Object.getPrototypeOf,w=_&&_(_(C([])));w&&w!==n&&r.call(w,o)&&(b=w);var x=y.prototype=g.prototype=Object.create(b);function M(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function n(i,o,a,s){var l=c(e[i],e,o);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(d).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,s)}))}s(l.arg)}var i;this._invoke=function(e,r){function o(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(o,o):o()}}function S(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,S(e,n),"throw"===n.method))return m;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var i=c(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,m;var o=i.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function C(e){if(e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:D}}function D(){return{value:t,done:!0}}return v.prototype=y,l(x,"constructor",y),l(y,"constructor",v),v.displayName=l(y,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,s,"GeneratorFunction")),e.prototype=Object.create(x),e},e.awrap=function(e){return{__await:e}},M(E.prototype),l(E.prototype,a,(function(){return this})),e.AsyncIterator=E,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new E(u(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},M(x),l(x,s,"Generator"),l(x,o,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=C,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;T(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:C(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),m}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},81550:function(e){e.exports=function(){"use strict";var e=function(e){return e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Float32Array||e instanceof Float64Array||e instanceof Uint8ClampedArray},t=function(e,t){for(var n=Object.keys(t),r=0;r<n.length;++r)e[n[r]]=t[n[r]];return e},n="\n";function r(e){return"undefined"!=typeof atob?atob(e):"base64:"+e}function i(e){var t=new Error("(regl) "+e);throw console.error(t),t}function o(e,t){e||i(t)}function a(e){return e?": "+e:""}function s(e,t,n){e in t||i("unknown parameter ("+e+")"+a(n)+". possible values: "+Object.keys(t).join())}function l(t,n){e(t)||i("invalid parameter type"+a(n)+". must be a typed array")}function u(e,t){switch(t){case"number":return"number"==typeof e;case"object":return"object"==typeof e;case"string":return"string"==typeof e;case"boolean":return"boolean"==typeof e;case"function":return"function"==typeof e;case"undefined":return void 0===e;case"symbol":return"symbol"==typeof e}}function c(e,t,n){u(e,t)||i("invalid parameter type"+a(n)+". expected "+t+", got "+typeof e)}function d(e,t){e>=0&&(0|e)===e||i("invalid parameter type, ("+e+")"+a(t)+". must be a nonnegative integer")}function h(e,t,n){t.indexOf(e)<0&&i("invalid value"+a(n)+". must be one of: "+t)}var f=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function p(e){Object.keys(e).forEach((function(e){f.indexOf(e)<0&&i('invalid regl constructor argument "'+e+'". must be one of '+f)}))}function m(e,t){for(e+="";e.length<t;)e=" "+e;return e}function g(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function v(e,t){this.number=e,this.line=t,this.errors=[]}function y(e,t,n){this.file=e,this.line=t,this.message=n}function b(){var e=new Error,t=(e.stack||e).toString(),n=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(t);if(n)return n[1];var r=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(t);return r?r[1]:"unknown"}function _(){var e=new Error,t=(e.stack||e).toString(),n=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(t);if(n)return n[1];var r=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(t);return r?r[1]:"unknown"}function w(e,t){var n=e.split("\n"),i=1,o=0,a={unknown:new g,0:new g};a.unknown.name=a[0].name=t||b(),a.unknown.lines.push(new v(0,""));for(var s=0;s<n.length;++s){var l=n[s],u=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(l);if(u)switch(u[1]){case"line":var c=/(\d+)(\s+\d+)?/.exec(u[2]);c&&(i=0|c[1],c[2]&&((o=0|c[2])in a||(a[o]=new g)));break;case"define":var d=/SHADER_NAME(_B64)?\s+(.*)$/.exec(u[2]);d&&(a[o].name=d[1]?r(d[2]):d[2])}a[o].lines.push(new v(i++,l))}return Object.keys(a).forEach((function(e){var t=a[e];t.lines.forEach((function(e){t.index[e.number]=e}))})),a}function x(e){var t=[];return e.split("\n").forEach((function(e){if(!(e.length<5)){var n=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(e);n?t.push(new y(0|n[1],0|n[2],n[3].trim())):e.length>0&&t.push(new y("unknown",0,e))}})),t}function M(e,t){t.forEach((function(t){var n=e[t.file];if(n){var r=n.index[t.line];if(r)return r.errors.push(t),void(n.hasErrors=!0)}e.unknown.hasErrors=!0,e.unknown.lines[0].errors.push(t)}))}function E(e,t,r,i,a){if(!e.getShaderParameter(t,e.COMPILE_STATUS)){var s=e.getShaderInfoLog(t),l=i===e.FRAGMENT_SHADER?"fragment":"vertex";A(r,"string",l+" shader source must be a string",a);var u=w(r,a),c=x(s);M(u,c),Object.keys(u).forEach((function(e){var t=u[e];if(t.hasErrors){var r=[""],i=[""];o("file number "+e+": "+t.name+"\n","color:red;text-decoration:underline;font-weight:bold"),t.lines.forEach((function(e){if(e.errors.length>0){o(m(e.number,4)+"|  ","background-color:yellow; font-weight:bold"),o(e.line+n,"color:red; background-color:yellow; font-weight:bold");var t=0;e.errors.forEach((function(r){var i=r.message,a=/^\s*'(.*)'\s*:\s*(.*)$/.exec(i);if(a){var s=a[1];i=a[2],"assign"===s&&(s="="),t=Math.max(e.line.indexOf(s,t),0)}else t=0;o(m("| ",6)),o(m("^^^",t+3)+n,"font-weight:bold"),o(m("| ",6)),o(i+n,"font-weight:bold")})),o(m("| ",6)+n)}else o(m(e.number,4)+"|  "),o(e.line+n,"color:red")})),"undefined"==typeof document||window.chrome?console.log(r.join("")):(i[0]=r.join("%c"),console.log.apply(console,i))}function o(e,t){r.push(e),i.push(t||"")}})),o.raise("Error compiling "+l+" shader, "+u[0].name)}}function S(e,t,r,i,a){if(!e.getProgramParameter(t,e.LINK_STATUS)){var s=e.getProgramInfoLog(t),l=w(r,a),u='Error linking program with vertex shader, "'+w(i,a)[0].name+'", and fragment shader "'+l[0].name+'"';"undefined"!=typeof document?console.log("%c"+u+n+"%c"+s,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(u+n+s),o.raise(u)}}function k(e){e._commandRef=b()}function T(e,t,n,r){function i(e){return e?r.id(e):0}function o(e,t){Object.keys(t).forEach((function(t){e[r.id(t)]=!0}))}k(e),e._fragId=i(e.static.frag),e._vertId=i(e.static.vert);var a=e._uniformSet={};o(a,t.static),o(a,t.dynamic);var s=e._attributeSet={};o(s,n.static),o(s,n.dynamic),e._hasCount="count"in e.static||"count"in e.dynamic||"elements"in e.static||"elements"in e.dynamic}function L(e,t){var n=_();i(e+" in command "+(t||b())+("unknown"===n?"":" called from "+n))}function C(e,t,n){e||L(t,n||b())}function D(e,t,n,r){e in t||L("unknown parameter ("+e+")"+a(n)+". possible values: "+Object.keys(t).join(),r||b())}function A(e,t,n,r){u(e,t)||L("invalid parameter type"+a(n)+". expected "+t+", got "+typeof e,r||b())}function P(e){e()}function O(e,t,n){e.texture?h(e.texture._texture.internalformat,t,"unsupported texture format for attachment"):h(e.renderbuffer._renderbuffer.format,n,"unsupported renderbuffer format for attachment")}var I=33071,R=9728,N=9984,Y=9985,j=9986,F=9987,B=5121,z=5122,H=5123,G=5124,W=5125,U=5126,V=32819,X=32820,q=33635,K=34042,J=36193,Z={};function $(e,t){return e===X||e===V||e===q?2:e===K?4:Z[e]*t}function Q(e){return!(e&e-1||!e)}function ee(e,t,n){var r,i=t.width,a=t.height,s=t.channels;o(i>0&&i<=n.maxTextureSize&&a>0&&a<=n.maxTextureSize,"invalid texture shape"),e.wrapS===I&&e.wrapT===I||o(Q(i)&&Q(a),"incompatible wrap mode for texture, both width and height must be power of 2"),1===t.mipmask?1!==i&&1!==a&&o(e.minFilter!==N&&e.minFilter!==j&&e.minFilter!==Y&&e.minFilter!==F,"min filter requires mipmap"):(o(Q(i)&&Q(a),"texture must be a square power of 2 to support mipmapping"),o(t.mipmask===(i<<1)-1,"missing or incomplete mipmap data")),t.type===U&&(n.extensions.indexOf("oes_texture_float_linear")<0&&o(e.minFilter===R&&e.magFilter===R,"filter not supported, must enable oes_texture_float_linear"),o(!e.genMipmaps,"mipmap generation not supported with float textures"));var l=t.images;for(r=0;r<16;++r)if(l[r]){var u=i>>r,c=a>>r;o(t.mipmask&1<<r,"missing mipmap data");var d=l[r];if(o(d.width===u&&d.height===c,"invalid shape for mip images"),o(d.format===t.format&&d.internalformat===t.internalformat&&d.type===t.type,"incompatible type for mip image"),d.compressed);else if(d.data){var h=Math.ceil($(d.type,s)*u/d.unpackAlignment)*d.unpackAlignment;o(d.data.byteLength===h*c,"invalid data for image, buffer size is inconsistent with image format")}else d.element||d.copy}else e.genMipmaps||o(0==(t.mipmask&1<<r),"extra mipmap data");t.compressed&&o(!e.genMipmaps,"mipmap generation for compressed images not supported")}function te(e,t,n,r){var i=e.width,a=e.height,s=e.channels;o(i>0&&i<=r.maxTextureSize&&a>0&&a<=r.maxTextureSize,"invalid texture shape"),o(i===a,"cube map must be square"),o(t.wrapS===I&&t.wrapT===I,"wrap mode not supported by cube map");for(var l=0;l<n.length;++l){var u=n[l];o(u.width===i&&u.height===a,"inconsistent cube map face shape"),t.genMipmaps&&(o(!u.compressed,"can not generate mipmap for compressed textures"),o(1===u.mipmask,"can not specify mipmaps and generate mipmaps"));for(var c=u.images,d=0;d<16;++d){var h=c[d];if(h){var f=i>>d,p=a>>d;o(u.mipmask&1<<d,"missing mipmap data"),o(h.width===f&&h.height===p,"invalid shape for mip images"),o(h.format===e.format&&h.internalformat===e.internalformat&&h.type===e.type,"incompatible type for mip image"),h.compressed||(h.data?o(h.data.byteLength===f*p*Math.max($(h.type,s),h.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):h.element||h.copy)}}}}Z[5120]=Z[B]=1,Z[z]=Z[H]=Z[J]=Z[q]=Z[V]=Z[X]=2,Z[G]=Z[W]=Z[U]=Z[K]=4;var ne=t(o,{optional:P,raise:i,commandRaise:L,command:C,parameter:s,commandParameter:D,constructor:p,type:c,commandType:A,isTypedArray:l,nni:d,oneOf:h,shaderError:E,linkError:S,callSite:_,saveCommandRef:k,saveDrawInfo:T,framebufferFormat:O,guessCommand:b,texture2D:ee,textureCube:te}),re=0,ie=0,oe=5,ae=6;function se(e,t){this.id=re++,this.type=e,this.data=t}function le(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function ue(e){if(0===e.length)return[];var t=e.charAt(0),n=e.charAt(e.length-1);if(e.length>1&&t===n&&('"'===t||"'"===t))return['"'+le(e.substr(1,e.length-2))+'"'];var r=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(e);if(r)return ue(e.substr(0,r.index)).concat(ue(r[1])).concat(ue(e.substr(r.index+r[0].length)));var i=e.split(".");if(1===i.length)return['"'+le(e)+'"'];for(var o=[],a=0;a<i.length;++a)o=o.concat(ue(i[a]));return o}function ce(e){return"["+ue(e).join("][")+"]"}function de(e,t){return new se(e,ce(t+""))}function he(e){return"function"==typeof e&&!e._reglType||e instanceof se}function fe(e,t){return"function"==typeof e?new se(ie,e):"number"==typeof e||"boolean"==typeof e?new se(oe,e):Array.isArray(e)?new se(ae,e.map(((e,n)=>fe(e,t+"["+n+"]")))):e instanceof se?e:void ne(!1,"invalid option type in uniform "+t)}var pe={DynamicVariable:se,define:de,isDynamic:he,unbox:fe,accessor:ce},me={next:"function"==typeof requestAnimationFrame?function(e){return requestAnimationFrame(e)}:function(e){return setTimeout(e,16)},cancel:"function"==typeof cancelAnimationFrame?function(e){return cancelAnimationFrame(e)}:clearTimeout},ge="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date};function ve(){var e={"":0},t=[""];return{id:function(n){var r=e[n];return r||(r=e[n]=t.length,t.push(n),r)},str:function(e){return t[e]}}}function ye(e,n,r){var i,o=document.createElement("canvas");function a(){var n=window.innerWidth,i=window.innerHeight;if(e!==document.body){var a=e.getBoundingClientRect();n=a.right-a.left,i=a.bottom-a.top}o.width=r*n,o.height=r*i,t(o.style,{width:n+"px",height:i+"px"})}function s(){i?i.disconnect():window.removeEventListener("resize",a),e.removeChild(o)}return t(o.style,{border:0,margin:0,padding:0,top:0,left:0}),e.appendChild(o),e===document.body&&(o.style.position="absolute",t(e.style,{margin:0,padding:0})),e!==document.body&&"function"==typeof ResizeObserver?(i=new ResizeObserver((function(){setTimeout(a)}))).observe(e):window.addEventListener("resize",a,!1),a(),{canvas:o,onDestroy:s}}function be(e,t){function n(n){try{return e.getContext(n,t)}catch(e){return null}}return n("webgl")||n("experimental-webgl")||n("webgl-experimental")}function _e(e){return"string"==typeof e.nodeName&&"function"==typeof e.appendChild&&"function"==typeof e.getBoundingClientRect}function we(e){return"function"==typeof e.drawArrays||"function"==typeof e.drawElements}function xe(e){return"string"==typeof e?e.split():(ne(Array.isArray(e),"invalid extension array"),e)}function Me(e){return"string"==typeof e?(ne("undefined"!=typeof document,"not supported outside of DOM"),document.querySelector(e)):e}function Ee(e){var t,n,r,i,o=e||{},a={},s=[],l=[],u="undefined"==typeof window?1:window.devicePixelRatio,c=!1,d=function(e){e&&ne.raise(e)},h=function(){};if("string"==typeof o?(ne("undefined"!=typeof document,"selector queries only supported in DOM enviroments"),t=document.querySelector(o),ne(t,"invalid query string for element")):"object"==typeof o?_e(o)?t=o:we(o)?r=(i=o).canvas:(ne.constructor(o),"gl"in o?i=o.gl:"canvas"in o?r=Me(o.canvas):"container"in o&&(n=Me(o.container)),"attributes"in o&&(a=o.attributes,ne.type(a,"object","invalid context attributes")),"extensions"in o&&(s=xe(o.extensions)),"optionalExtensions"in o&&(l=xe(o.optionalExtensions)),"onDone"in o&&(ne.type(o.onDone,"function","invalid or missing onDone callback"),d=o.onDone),"profile"in o&&(c=!!o.profile),"pixelRatio"in o&&(u=+o.pixelRatio,ne(u>0,"invalid pixel ratio"))):ne.raise("invalid arguments to regl"),t&&("canvas"===t.nodeName.toLowerCase()?r=t:n=t),!i){if(!r){ne("undefined"!=typeof document,"must manually specify webgl context outside of DOM environments");var f=ye(n||document.body,d,u);if(!f)return null;r=f.canvas,h=f.onDestroy}void 0===a.premultipliedAlpha&&(a.premultipliedAlpha=!0),i=be(r,a)}return i?{gl:i,canvas:r,container:n,extensions:s,optionalExtensions:l,pixelRatio:u,profile:c,onDone:d,onDestroy:h}:(h(),d("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function Se(e,t){var n={};function r(t){ne.type(t,"string","extension name must be string");var r,i=t.toLowerCase();try{r=n[i]=e.getExtension(i)}catch(e){}return!!r}for(var i=0;i<t.extensions.length;++i){var o=t.extensions[i];if(!r(o))return t.onDestroy(),t.onDone('"'+o+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return t.optionalExtensions.forEach(r),{extensions:n,restore:function(){Object.keys(n).forEach((function(e){if(n[e]&&!r(e))throw new Error("(regl): error restoring extension "+e)}))}}}function ke(e,t){for(var n=Array(e),r=0;r<e;++r)n[r]=t(r);return n}var Te=5120,Le=5121,Ce=5122,De=5123,Ae=5124,Pe=5125,Oe=5126;function Ie(e){for(var t=16;t<=1<<28;t*=16)if(e<=t)return t;return 0}function Re(e){var t,n;return t=(e>65535)<<4,t|=n=((e>>>=t)>255)<<3,t|=n=((e>>>=n)>15)<<2,(t|=n=((e>>>=n)>3)<<1)|(e>>>=n)>>1}function Ne(){var e=ke(8,(function(){return[]}));function t(t){var n=Ie(t),r=e[Re(n)>>2];return r.length>0?r.pop():new ArrayBuffer(n)}function n(t){e[Re(t.byteLength)>>2].push(t)}function r(e,n){var r=null;switch(e){case Te:r=new Int8Array(t(n),0,n);break;case Le:r=new Uint8Array(t(n),0,n);break;case Ce:r=new Int16Array(t(2*n),0,n);break;case De:r=new Uint16Array(t(2*n),0,n);break;case Ae:r=new Int32Array(t(4*n),0,n);break;case Pe:r=new Uint32Array(t(4*n),0,n);break;case Oe:r=new Float32Array(t(4*n),0,n);break;default:return null}return r.length!==n?r.subarray(0,n):r}function i(e){n(e.buffer)}return{alloc:t,free:n,allocType:r,freeType:i}}var Ye=Ne();Ye.zero=Ne();var je=3408,Fe=3410,Be=3411,ze=3412,He=3413,Ge=3414,We=3415,Ue=33901,Ve=33902,Xe=3379,qe=3386,Ke=34921,Je=36347,Ze=36348,$e=35661,Qe=35660,et=34930,tt=36349,nt=34076,rt=34024,it=7936,ot=7937,at=7938,st=35724,lt=34047,ut=36063,ct=34852,dt=3553,ht=34067,ft=34069,pt=33984,mt=6408,gt=5126,vt=5121,yt=36160,bt=36053,_t=36064,wt=16384,xt=function(e,t){var n=1;t.ext_texture_filter_anisotropic&&(n=e.getParameter(lt));var r=1,i=1;t.webgl_draw_buffers&&(r=e.getParameter(ct),i=e.getParameter(ut));var o=!!t.oes_texture_float;if(o){var a=e.createTexture();e.bindTexture(dt,a),e.texImage2D(dt,0,mt,1,1,0,mt,gt,null);var s=e.createFramebuffer();if(e.bindFramebuffer(yt,s),e.framebufferTexture2D(yt,_t,dt,a,0),e.bindTexture(dt,null),e.checkFramebufferStatus(yt)!==bt)o=!1;else{e.viewport(0,0,1,1),e.clearColor(1,0,0,1),e.clear(wt);var l=Ye.allocType(gt,4);e.readPixels(0,0,1,1,mt,gt,l),e.getError()?o=!1:(e.deleteFramebuffer(s),e.deleteTexture(a),o=1===l[0]),Ye.freeType(l)}}var u=!0;if("undefined"==typeof navigator||!(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))){var c=e.createTexture(),d=Ye.allocType(vt,36);e.activeTexture(pt),e.bindTexture(ht,c),e.texImage2D(ft,0,mt,3,3,0,mt,vt,d),Ye.freeType(d),e.bindTexture(ht,null),e.deleteTexture(c),u=!e.getError()}return{colorBits:[e.getParameter(Fe),e.getParameter(Be),e.getParameter(ze),e.getParameter(He)],depthBits:e.getParameter(Ge),stencilBits:e.getParameter(We),subpixelBits:e.getParameter(je),extensions:Object.keys(t).filter((function(e){return!!t[e]})),maxAnisotropic:n,maxDrawbuffers:r,maxColorAttachments:i,pointSizeDims:e.getParameter(Ue),lineWidthDims:e.getParameter(Ve),maxViewportDims:e.getParameter(qe),maxCombinedTextureUnits:e.getParameter($e),maxCubeMapSize:e.getParameter(nt),maxRenderbufferSize:e.getParameter(rt),maxTextureUnits:e.getParameter(et),maxTextureSize:e.getParameter(Xe),maxAttributes:e.getParameter(Ke),maxVertexUniforms:e.getParameter(Je),maxVertexTextureUnits:e.getParameter(Qe),maxVaryingVectors:e.getParameter(Ze),maxFragmentUniforms:e.getParameter(tt),glsl:e.getParameter(st),renderer:e.getParameter(ot),vendor:e.getParameter(it),version:e.getParameter(at),readFloat:o,npotTextureCube:u}};function Mt(t){return!!t&&"object"==typeof t&&Array.isArray(t.shape)&&Array.isArray(t.stride)&&"number"==typeof t.offset&&t.shape.length===t.stride.length&&(Array.isArray(t.data)||e(t.data))}var Et=function(e){return Object.keys(e).map((function(t){return e[t]}))},St={shape:At,flatten:Dt};function kt(e,t,n){for(var r=0;r<t;++r)n[r]=e[r]}function Tt(e,t,n,r){for(var i=0,o=0;o<t;++o)for(var a=e[o],s=0;s<n;++s)r[i++]=a[s]}function Lt(e,t,n,r,i,o){for(var a=o,s=0;s<t;++s)for(var l=e[s],u=0;u<n;++u)for(var c=l[u],d=0;d<r;++d)i[a++]=c[d]}function Ct(e,t,n,r,i){for(var o=1,a=n+1;a<t.length;++a)o*=t[a];var s=t[n];if(t.length-n==4){var l=t[n+1],u=t[n+2],c=t[n+3];for(a=0;a<s;++a)Lt(e[a],l,u,c,r,i),i+=o}else for(a=0;a<s;++a)Ct(e[a],t,n+1,r,i),i+=o}function Dt(e,t,n,r){var i=1;if(t.length)for(var o=0;o<t.length;++o)i*=t[o];else i=0;var a=r||Ye.allocType(n,i);switch(t.length){case 0:break;case 1:kt(e,t[0],a);break;case 2:Tt(e,t[0],t[1],a);break;case 3:Lt(e,t[0],t[1],t[2],a,0);break;default:Ct(e,t,0,a,0)}return a}function At(e){for(var t=[],n=e;n.length;n=n[0])t.push(n.length);return t}var Pt={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Ot={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},It={dynamic:35048,stream:35040,static:35044},Rt=St.flatten,Nt=St.shape,Yt=35044,jt=35040,Ft=5121,Bt=5126,zt=[];function Ht(e){return 0|Pt[Object.prototype.toString.call(e)]}function Gt(e,t){for(var n=0;n<t.length;++n)e[n]=t[n]}function Wt(e,t,n,r,i,o,a){for(var s=0,l=0;l<n;++l)for(var u=0;u<r;++u)e[s++]=t[i*l+o*u+a]}function Ut(t,n,r,i){var o=0,a={};function s(e){this.id=o++,this.buffer=t.createBuffer(),this.type=e,this.usage=Yt,this.byteLength=0,this.dimension=1,this.dtype=Ft,this.persistentData=null,r.profile&&(this.stats={size:0})}s.prototype.bind=function(){t.bindBuffer(this.type,this.buffer)},s.prototype.destroy=function(){f(this)};var l=[];function u(e,t){var n=l.pop();return n||(n=new s(e)),n.bind(),h(n,t,jt,0,1,!1),n}function c(e){l.push(e)}function d(e,n,r){e.byteLength=n.byteLength,t.bufferData(e.type,n,r)}function h(t,n,r,i,o,a){var s,l;if(t.usage=r,Array.isArray(n)){if(t.dtype=i||Bt,n.length>0)if(Array.isArray(n[0])){s=Nt(n);for(var u=1,c=1;c<s.length;++c)u*=s[c];t.dimension=u,d(t,l=Rt(n,s,t.dtype),r),a?t.persistentData=l:Ye.freeType(l)}else if("number"==typeof n[0]){t.dimension=o;var h=Ye.allocType(t.dtype,n.length);Gt(h,n),d(t,h,r),a?t.persistentData=h:Ye.freeType(h)}else e(n[0])?(t.dimension=n[0].length,t.dtype=i||Ht(n[0])||Bt,d(t,l=Rt(n,[n.length,n[0].length],t.dtype),r),a?t.persistentData=l:Ye.freeType(l)):ne.raise("invalid buffer data")}else if(e(n))t.dtype=i||Ht(n),t.dimension=o,d(t,n,r),a&&(t.persistentData=new Uint8Array(new Uint8Array(n.buffer)));else if(Mt(n)){s=n.shape;var f=n.stride,p=n.offset,m=0,g=0,v=0,y=0;1===s.length?(m=s[0],g=1,v=f[0],y=0):2===s.length?(m=s[0],g=s[1],v=f[0],y=f[1]):ne.raise("invalid shape"),t.dtype=i||Ht(n.data)||Bt,t.dimension=g;var b=Ye.allocType(t.dtype,m*g);Wt(b,n.data,m,g,v,y,p),d(t,b,r),a?t.persistentData=b:Ye.freeType(b)}else n instanceof ArrayBuffer?(t.dtype=Ft,t.dimension=o,d(t,n,r),a&&(t.persistentData=new Uint8Array(new Uint8Array(n)))):ne.raise("invalid buffer data")}function f(e){n.bufferCount--,i(e);var r=e.buffer;ne(r,"buffer must not be deleted already"),t.deleteBuffer(r),e.buffer=null,delete a[e.id]}function p(i,o,l,u){n.bufferCount++;var c=new s(o);function d(n){var i=Yt,o=null,a=0,s=0,l=1;return Array.isArray(n)||e(n)||Mt(n)||n instanceof ArrayBuffer?o=n:"number"==typeof n?a=0|n:n&&(ne.type(n,"object","buffer arguments must be an object, a number or an array"),"data"in n&&(ne(null===o||Array.isArray(o)||e(o)||Mt(o),"invalid data for buffer"),o=n.data),"usage"in n&&(ne.parameter(n.usage,It,"invalid buffer usage"),i=It[n.usage]),"type"in n&&(ne.parameter(n.type,Ot,"invalid buffer type"),s=Ot[n.type]),"dimension"in n&&(ne.type(n.dimension,"number","invalid dimension"),l=0|n.dimension),"length"in n&&(ne.nni(a,"buffer length must be a nonnegative integer"),a=0|n.length)),c.bind(),o?h(c,o,i,s,l,u):(a&&t.bufferData(c.type,a,i),c.dtype=s||Ft,c.usage=i,c.dimension=l,c.byteLength=a),r.profile&&(c.stats.size=c.byteLength*zt[c.dtype]),d}function p(e,n){ne(n+e.byteLength<=c.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+e.byteLength+" starting from offset "+n+" to a buffer of size "+c.byteLength),t.bufferSubData(c.type,n,e)}function m(t,n){var r,i=0|(n||0);if(c.bind(),e(t)||t instanceof ArrayBuffer)p(t,i);else if(Array.isArray(t)){if(t.length>0)if("number"==typeof t[0]){var o=Ye.allocType(c.dtype,t.length);Gt(o,t),p(o,i),Ye.freeType(o)}else if(Array.isArray(t[0])||e(t[0])){r=Nt(t);var a=Rt(t,r,c.dtype);p(a,i),Ye.freeType(a)}else ne.raise("invalid buffer data")}else if(Mt(t)){r=t.shape;var s=t.stride,l=0,u=0,h=0,f=0;1===r.length?(l=r[0],u=1,h=s[0],f=0):2===r.length?(l=r[0],u=r[1],h=s[0],f=s[1]):ne.raise("invalid shape");var m=Array.isArray(t.data)?c.dtype:Ht(t.data),g=Ye.allocType(m,l*u);Wt(g,t.data,l,u,h,f,t.offset),p(g,i),Ye.freeType(g)}else ne.raise("invalid data for buffer subdata");return d}return a[c.id]=c,l||d(i),d._reglType="buffer",d._buffer=c,d.subdata=m,r.profile&&(d.stats=c.stats),d.destroy=function(){f(c)},d}function m(){Et(a).forEach((function(e){e.buffer=t.createBuffer(),t.bindBuffer(e.type,e.buffer),t.bufferData(e.type,e.persistentData||e.byteLength,e.usage)}))}return r.profile&&(n.getTotalBufferSize=function(){var e=0;return Object.keys(a).forEach((function(t){e+=a[t].stats.size})),e}),{create:p,createStream:u,destroyStream:c,clear:function(){Et(a).forEach(f),l.forEach(f)},getBuffer:function(e){return e&&e._buffer instanceof s?e._buffer:null},restore:m,_initBuffer:h}}zt[5120]=1,zt[5122]=2,zt[5124]=4,zt[5121]=1,zt[5123]=2,zt[5125]=4,zt[5126]=4;var Vt={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Xt=0,qt=1,Kt=4,Jt=5120,Zt=5121,$t=5122,Qt=5123,en=5124,tn=5125,nn=34963,rn=35040,on=35044;function an(t,n,r,i){var o={},a=0,s={uint8:Zt,uint16:Qt};function l(e){this.id=a++,o[this.id]=this,this.buffer=e,this.primType=Kt,this.vertCount=0,this.type=0}n.oes_element_index_uint&&(s.uint32=tn),l.prototype.bind=function(){this.buffer.bind()};var u=[];function c(e){var t=u.pop();return t||(t=new l(r.create(null,nn,!0,!1)._buffer)),h(t,e,rn,-1,-1,0,0),t}function d(e){u.push(e)}function h(i,o,a,s,l,u,c){var d;if(i.buffer.bind(),o){var h=c;c||e(o)&&(!Mt(o)||e(o.data))||(h=n.oes_element_index_uint?tn:Qt),r._initBuffer(i.buffer,o,a,h,3)}else t.bufferData(nn,u,a),i.buffer.dtype=d||Zt,i.buffer.usage=a,i.buffer.dimension=3,i.buffer.byteLength=u;if(d=c,!c){switch(i.buffer.dtype){case Zt:case Jt:d=Zt;break;case Qt:case $t:d=Qt;break;case tn:case en:d=tn;break;default:ne.raise("unsupported type for element array")}i.buffer.dtype=d}i.type=d,ne(d!==tn||!!n.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var f=l;f<0&&(f=i.buffer.byteLength,d===Qt?f>>=1:d===tn&&(f>>=2)),i.vertCount=f;var p=s;if(s<0){p=Kt;var m=i.buffer.dimension;1===m&&(p=Xt),2===m&&(p=qt),3===m&&(p=Kt)}i.primType=p}function f(e){i.elementsCount--,ne(null!==e.buffer,"must not double destroy elements"),delete o[e.id],e.buffer.destroy(),e.buffer=null}function p(t,n){var o=r.create(null,nn,!0),a=new l(o._buffer);function u(t){if(t)if("number"==typeof t)o(t),a.primType=Kt,a.vertCount=0|t,a.type=Zt;else{var n=null,r=on,i=-1,l=-1,c=0,d=0;Array.isArray(t)||e(t)||Mt(t)?n=t:(ne.type(t,"object","invalid arguments for elements"),"data"in t&&(n=t.data,ne(Array.isArray(n)||e(n)||Mt(n),"invalid data for element buffer")),"usage"in t&&(ne.parameter(t.usage,It,"invalid element buffer usage"),r=It[t.usage]),"primitive"in t&&(ne.parameter(t.primitive,Vt,"invalid element buffer primitive"),i=Vt[t.primitive]),"count"in t&&(ne("number"==typeof t.count&&t.count>=0,"invalid vertex count for elements"),l=0|t.count),"type"in t&&(ne.parameter(t.type,s,"invalid buffer type"),d=s[t.type]),"length"in t?c=0|t.length:(c=l,d===Qt||d===$t?c*=2:d!==tn&&d!==en||(c*=4))),h(a,n,r,i,l,c,d)}else o(),a.primType=Kt,a.vertCount=0,a.type=Zt;return u}return i.elementsCount++,u(t),u._reglType="elements",u._elements=a,u.subdata=function(e,t){return o.subdata(e,t),u},u.destroy=function(){f(a)},u}return{create:p,createStream:c,destroyStream:d,getElements:function(e){return"function"==typeof e&&e._elements instanceof l?e._elements:null},clear:function(){Et(o).forEach(f)}}}var sn=new Float32Array(1),ln=new Uint32Array(sn.buffer),un=5123;function cn(e){for(var t=Ye.allocType(un,e.length),n=0;n<e.length;++n)if(isNaN(e[n]))t[n]=65535;else if(e[n]===1/0)t[n]=31744;else if(e[n]===-1/0)t[n]=64512;else{sn[0]=e[n];var r=ln[0],i=r>>>31<<15,o=(r<<1>>>24)-127,a=r>>13&1023;if(o<-24)t[n]=i;else if(o<-14){var s=-14-o;t[n]=i+(a+1024>>s)}else t[n]=o>15?i+31744:i+(o+15<<10)+a}return t}function dn(t){return Array.isArray(t)||e(t)}var hn=function(e){return!(e&e-1||!e)},fn=34467,pn=3553,mn=34067,gn=34069,vn=6408,yn=6406,bn=6407,_n=6409,wn=6410,xn=32854,Mn=32855,En=36194,Sn=32819,kn=32820,Tn=33635,Ln=34042,Cn=6402,Dn=34041,An=35904,Pn=35906,On=36193,In=33776,Rn=33777,Nn=33778,Yn=33779,jn=35986,Fn=35987,Bn=34798,zn=35840,Hn=35841,Gn=35842,Wn=35843,Un=36196,Vn=5121,Xn=5123,qn=5125,Kn=5126,Jn=10242,Zn=10243,$n=10497,Qn=33071,er=33648,tr=10240,nr=10241,rr=9728,ir=9729,or=9984,ar=9985,sr=9986,lr=9987,ur=33170,cr=4352,dr=4353,hr=4354,fr=34046,pr=3317,mr=37440,gr=37441,vr=37443,yr=37444,br=33984,_r=[or,sr,ar,lr],wr=[0,_n,wn,bn,vn],xr={};function Mr(e){return"[object "+e+"]"}xr[_n]=xr[yn]=xr[Cn]=1,xr[Dn]=xr[wn]=2,xr[bn]=xr[An]=3,xr[vn]=xr[Pn]=4;var Er=Mr("HTMLCanvasElement"),Sr=Mr("OffscreenCanvas"),kr=Mr("CanvasRenderingContext2D"),Tr=Mr("ImageBitmap"),Lr=Mr("HTMLImageElement"),Cr=Mr("HTMLVideoElement"),Dr=Object.keys(Pt).concat([Er,Sr,kr,Tr,Lr,Cr]),Ar=[];Ar[Vn]=1,Ar[Kn]=4,Ar[On]=2,Ar[Xn]=2,Ar[qn]=4;var Pr=[];function Or(e){return Array.isArray(e)&&(0===e.length||"number"==typeof e[0])}function Ir(e){return!!Array.isArray(e)&&!(0===e.length||!dn(e[0]))}function Rr(e){return Object.prototype.toString.call(e)}function Nr(e){return Rr(e)===Er}function Yr(e){return Rr(e)===Sr}function jr(e){return Rr(e)===kr}function Fr(e){return Rr(e)===Tr}function Br(e){return Rr(e)===Lr}function zr(e){return Rr(e)===Cr}function Hr(e){if(!e)return!1;var t=Rr(e);return Dr.indexOf(t)>=0||Or(e)||Ir(e)||Mt(e)}function Gr(e){return 0|Pt[Object.prototype.toString.call(e)]}function Wr(e,t){var n=t.length;switch(e.type){case Vn:case Xn:case qn:case Kn:var r=Ye.allocType(e.type,n);r.set(t),e.data=r;break;case On:e.data=cn(t);break;default:ne.raise("unsupported texture type, must specify a typed array")}}function Ur(e,t){return Ye.allocType(e.type===On?Kn:e.type,t)}function Vr(e,t){e.type===On?(e.data=cn(t),Ye.freeType(t)):e.data=t}function Xr(e,t,n,r,i,o){for(var a=e.width,s=e.height,l=e.channels,u=Ur(e,a*s*l),c=0,d=0;d<s;++d)for(var h=0;h<a;++h)for(var f=0;f<l;++f)u[c++]=t[n*h+r*d+i*f+o];Vr(e,u)}function qr(e,t,n,r,i,o){var a;if(a=void 0!==Pr[e]?Pr[e]:xr[e]*Ar[t],o&&(a*=6),i){for(var s=0,l=n;l>=1;)s+=a*l*l,l/=2;return s}return a*n*r}function Kr(n,r,i,o,a,s,l){var u={"don't care":cr,"dont care":cr,nice:hr,fast:dr},c={repeat:$n,clamp:Qn,mirror:er},d={nearest:rr,linear:ir},h=t({mipmap:lr,"nearest mipmap nearest":or,"linear mipmap nearest":ar,"nearest mipmap linear":sr,"linear mipmap linear":lr},d),f={none:0,browser:yr},p={uint8:Vn,rgba4:Sn,rgb565:Tn,"rgb5 a1":kn},m={alpha:yn,luminance:_n,"luminance alpha":wn,rgb:bn,rgba:vn,rgba4:xn,"rgb5 a1":Mn,rgb565:En},g={};r.ext_srgb&&(m.srgb=An,m.srgba=Pn),r.oes_texture_float&&(p.float32=p.float=Kn),r.oes_texture_half_float&&(p.float16=p["half float"]=On),r.webgl_depth_texture&&(t(m,{depth:Cn,"depth stencil":Dn}),t(p,{uint16:Xn,uint32:qn,"depth stencil":Ln})),r.webgl_compressed_texture_s3tc&&t(g,{"rgb s3tc dxt1":In,"rgba s3tc dxt1":Rn,"rgba s3tc dxt3":Nn,"rgba s3tc dxt5":Yn}),r.webgl_compressed_texture_atc&&t(g,{"rgb atc":jn,"rgba atc explicit alpha":Fn,"rgba atc interpolated alpha":Bn}),r.webgl_compressed_texture_pvrtc&&t(g,{"rgb pvrtc 4bppv1":zn,"rgb pvrtc 2bppv1":Hn,"rgba pvrtc 4bppv1":Gn,"rgba pvrtc 2bppv1":Wn}),r.webgl_compressed_texture_etc1&&(g["rgb etc1"]=Un);var v=Array.prototype.slice.call(n.getParameter(fn));Object.keys(g).forEach((function(e){var t=g[e];v.indexOf(t)>=0&&(m[e]=t)}));var y=Object.keys(m);i.textureFormats=y;var b=[];Object.keys(m).forEach((function(e){var t=m[e];b[t]=e}));var _=[];Object.keys(p).forEach((function(e){var t=p[e];_[t]=e}));var w=[];Object.keys(d).forEach((function(e){var t=d[e];w[t]=e}));var x=[];Object.keys(h).forEach((function(e){var t=h[e];x[t]=e}));var M=[];Object.keys(c).forEach((function(e){var t=c[e];M[t]=e}));var E=y.reduce((function(e,t){var n=m[t];return n===_n||n===yn||n===_n||n===wn||n===Cn||n===Dn||r.ext_srgb&&(n===An||n===Pn)?e[n]=n:n===Mn||t.indexOf("rgba")>=0?e[n]=vn:e[n]=bn,e}),{});function S(){this.internalformat=vn,this.format=vn,this.type=Vn,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=yr,this.width=0,this.height=0,this.channels=0}function k(e,t){e.internalformat=t.internalformat,e.format=t.format,e.type=t.type,e.compressed=t.compressed,e.premultiplyAlpha=t.premultiplyAlpha,e.flipY=t.flipY,e.unpackAlignment=t.unpackAlignment,e.colorSpace=t.colorSpace,e.width=t.width,e.height=t.height,e.channels=t.channels}function T(e,t){if("object"==typeof t&&t){if("premultiplyAlpha"in t&&(ne.type(t.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),e.premultiplyAlpha=t.premultiplyAlpha),"flipY"in t&&(ne.type(t.flipY,"boolean","invalid texture flip"),e.flipY=t.flipY),"alignment"in t&&(ne.oneOf(t.alignment,[1,2,4,8],"invalid texture unpack alignment"),e.unpackAlignment=t.alignment),"colorSpace"in t&&(ne.parameter(t.colorSpace,f,"invalid colorSpace"),e.colorSpace=f[t.colorSpace]),"type"in t){var n=t.type;ne(r.oes_texture_float||!("float"===n||"float32"===n),"you must enable the OES_texture_float extension in order to use floating point textures."),ne(r.oes_texture_half_float||!("half float"===n||"float16"===n),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),ne(r.webgl_depth_texture||!("uint16"===n||"uint32"===n||"depth stencil"===n),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),ne.parameter(n,p,"invalid texture type"),e.type=p[n]}var o=e.width,a=e.height,s=e.channels,l=!1;"shape"in t?(ne(Array.isArray(t.shape)&&t.shape.length>=2,"shape must be an array"),o=t.shape[0],a=t.shape[1],3===t.shape.length&&(s=t.shape[2],ne(s>0&&s<=4,"invalid number of channels"),l=!0),ne(o>=0&&o<=i.maxTextureSize,"invalid width"),ne(a>=0&&a<=i.maxTextureSize,"invalid height")):("radius"in t&&(o=a=t.radius,ne(o>=0&&o<=i.maxTextureSize,"invalid radius")),"width"in t&&(o=t.width,ne(o>=0&&o<=i.maxTextureSize,"invalid width")),"height"in t&&(a=t.height,ne(a>=0&&a<=i.maxTextureSize,"invalid height")),"channels"in t&&(s=t.channels,ne(s>0&&s<=4,"invalid number of channels"),l=!0)),e.width=0|o,e.height=0|a,e.channels=0|s;var u=!1;if("format"in t){var c=t.format;ne(r.webgl_depth_texture||!("depth"===c||"depth stencil"===c),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),ne.parameter(c,m,"invalid texture format");var d=e.internalformat=m[c];e.format=E[d],c in p&&("type"in t||(e.type=p[c])),c in g&&(e.compressed=!0),u=!0}!l&&u?e.channels=xr[e.format]:l&&!u?e.channels!==wr[e.format]&&(e.format=e.internalformat=wr[e.channels]):u&&l&&ne(e.channels===xr[e.format],"number of channels inconsistent with specified format")}}function L(e){n.pixelStorei(mr,e.flipY),n.pixelStorei(gr,e.premultiplyAlpha),n.pixelStorei(vr,e.colorSpace),n.pixelStorei(pr,e.unpackAlignment)}function C(){S.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function D(t,n){var r=null;if(Hr(n)?r=n:n&&(ne.type(n,"object","invalid pixel data type"),T(t,n),"x"in n&&(t.xOffset=0|n.x),"y"in n&&(t.yOffset=0|n.y),Hr(n.data)&&(r=n.data)),ne(!t.compressed||r instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),n.copy){ne(!r,"can not specify copy and data field for the same texture");var o=a.viewportWidth,s=a.viewportHeight;t.width=t.width||o-t.xOffset,t.height=t.height||s-t.yOffset,t.needsCopy=!0,ne(t.xOffset>=0&&t.xOffset<o&&t.yOffset>=0&&t.yOffset<s&&t.width>0&&t.width<=o&&t.height>0&&t.height<=s,"copy texture read out of bounds")}else if(r){if(e(r))t.channels=t.channels||4,t.data=r,"type"in n||t.type!==Vn||(t.type=Gr(r));else if(Or(r))t.channels=t.channels||4,Wr(t,r),t.alignment=1,t.needsFree=!0;else if(Mt(r)){var l=r.data;Array.isArray(l)||t.type!==Vn||(t.type=Gr(l));var u,c,d,h,f,p,m=r.shape,g=r.stride;3===m.length?(d=m[2],p=g[2]):(ne(2===m.length,"invalid ndarray pixel data, must be 2 or 3D"),d=1,p=1),u=m[0],c=m[1],h=g[0],f=g[1],t.alignment=1,t.width=u,t.height=c,t.channels=d,t.format=t.internalformat=wr[d],t.needsFree=!0,Xr(t,l,h,f,p,r.offset)}else if(Nr(r)||Yr(r)||jr(r))Nr(r)||Yr(r)?t.element=r:t.element=r.canvas,t.width=t.element.width,t.height=t.element.height,t.channels=4;else if(Fr(r))t.element=r,t.width=r.width,t.height=r.height,t.channels=4;else if(Br(r))t.element=r,t.width=r.naturalWidth,t.height=r.naturalHeight,t.channels=4;else if(zr(r))t.element=r,t.width=r.videoWidth,t.height=r.videoHeight,t.channels=4;else if(Ir(r)){var v=t.width||r[0].length,y=t.height||r.length,b=t.channels;b=dn(r[0][0])?b||r[0][0].length:b||1;for(var _=St.shape(r),w=1,x=0;x<_.length;++x)w*=_[x];var M=Ur(t,w);St.flatten(r,_,"",M),Vr(t,M),t.alignment=1,t.width=v,t.height=y,t.channels=b,t.format=t.internalformat=wr[b],t.needsFree=!0}}else t.width=t.width||1,t.height=t.height||1,t.channels=t.channels||4;t.type===Kn?ne(i.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):t.type===On&&ne(i.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function A(e,t,r){var i=e.element,a=e.data,s=e.internalformat,l=e.format,u=e.type,c=e.width,d=e.height;L(e),i?n.texImage2D(t,r,l,l,u,i):e.compressed?n.compressedTexImage2D(t,r,s,c,d,0,a):e.needsCopy?(o(),n.copyTexImage2D(t,r,l,e.xOffset,e.yOffset,c,d,0)):n.texImage2D(t,r,l,c,d,0,l,u,a||null)}function P(e,t,r,i,a){var s=e.element,l=e.data,u=e.internalformat,c=e.format,d=e.type,h=e.width,f=e.height;L(e),s?n.texSubImage2D(t,a,r,i,c,d,s):e.compressed?n.compressedTexSubImage2D(t,a,r,i,u,h,f,l):e.needsCopy?(o(),n.copyTexSubImage2D(t,a,r,i,e.xOffset,e.yOffset,h,f)):n.texSubImage2D(t,a,r,i,h,f,c,d,l)}var O=[];function I(){return O.pop()||new C}function R(e){e.needsFree&&Ye.freeType(e.data),C.call(e),O.push(e)}function N(){S.call(this),this.genMipmaps=!1,this.mipmapHint=cr,this.mipmask=0,this.images=Array(16)}function Y(e,t,n){var r=e.images[0]=I();e.mipmask=1,r.width=e.width=t,r.height=e.height=n,r.channels=e.channels=4}function j(e,t){var n=null;if(Hr(t))k(n=e.images[0]=I(),e),D(n,t),e.mipmask=1;else if(T(e,t),Array.isArray(t.mipmap))for(var r=t.mipmap,i=0;i<r.length;++i)k(n=e.images[i]=I(),e),n.width>>=i,n.height>>=i,D(n,r[i]),e.mipmask|=1<<i;else k(n=e.images[0]=I(),e),D(n,t),e.mipmask=1;k(e,e.images[0]),!e.compressed||e.internalformat!==In&&e.internalformat!==Rn&&e.internalformat!==Nn&&e.internalformat!==Yn||ne(e.width%4==0&&e.height%4==0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function F(e,t){for(var n=e.images,r=0;r<n.length;++r){if(!n[r])return;A(n[r],t,r)}}var B=[];function z(){var e=B.pop()||new N;S.call(e),e.mipmask=0;for(var t=0;t<16;++t)e.images[t]=null;return e}function H(e){for(var t=e.images,n=0;n<t.length;++n)t[n]&&R(t[n]),t[n]=null;B.push(e)}function G(){this.minFilter=rr,this.magFilter=rr,this.wrapS=Qn,this.wrapT=Qn,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=cr}function W(e,t){if("min"in t){var n=t.min;ne.parameter(n,h),e.minFilter=h[n],_r.indexOf(e.minFilter)>=0&&!("faces"in t)&&(e.genMipmaps=!0)}if("mag"in t){var r=t.mag;ne.parameter(r,d),e.magFilter=d[r]}var o=e.wrapS,a=e.wrapT;if("wrap"in t){var s=t.wrap;"string"==typeof s?(ne.parameter(s,c),o=a=c[s]):Array.isArray(s)&&(ne.parameter(s[0],c),ne.parameter(s[1],c),o=c[s[0]],a=c[s[1]])}else{if("wrapS"in t){var l=t.wrapS;ne.parameter(l,c),o=c[l]}if("wrapT"in t){var f=t.wrapT;ne.parameter(f,c),a=c[f]}}if(e.wrapS=o,e.wrapT=a,"anisotropic"in t){var p=t.anisotropic;ne("number"==typeof p&&p>=1&&p<=i.maxAnisotropic,"aniso samples must be between 1 and "),e.anisotropic=t.anisotropic}if("mipmap"in t){var m=!1;switch(typeof t.mipmap){case"string":ne.parameter(t.mipmap,u,"invalid mipmap hint"),e.mipmapHint=u[t.mipmap],e.genMipmaps=!0,m=!0;break;case"boolean":m=e.genMipmaps=t.mipmap;break;case"object":ne(Array.isArray(t.mipmap),"invalid mipmap type"),e.genMipmaps=!1,m=!0;break;default:ne.raise("invalid mipmap type")}m&&!("min"in t)&&(e.minFilter=or)}}function U(e,t){n.texParameteri(t,nr,e.minFilter),n.texParameteri(t,tr,e.magFilter),n.texParameteri(t,Jn,e.wrapS),n.texParameteri(t,Zn,e.wrapT),r.ext_texture_filter_anisotropic&&n.texParameteri(t,fr,e.anisotropic),e.genMipmaps&&(n.hint(ur,e.mipmapHint),n.generateMipmap(t))}var V=0,X={},q=i.maxTextureUnits,K=Array(q).map((function(){return null}));function J(e){S.call(this),this.mipmask=0,this.internalformat=vn,this.id=V++,this.refCount=1,this.target=e,this.texture=n.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new G,l.profile&&(this.stats={size:0})}function Z(e){n.activeTexture(br),n.bindTexture(e.target,e.texture)}function $(){var e=K[0];e?n.bindTexture(e.target,e.texture):n.bindTexture(pn,null)}function Q(e){var t=e.texture;ne(t,"must not double destroy texture");var r=e.unit,i=e.target;r>=0&&(n.activeTexture(br+r),n.bindTexture(i,null),K[r]=null),n.deleteTexture(t),e.texture=null,e.params=null,e.pixels=null,e.refCount=0,delete X[e.id],s.textureCount--}function ee(e,t){var r=new J(pn);function o(e,t){var n=r.texInfo;G.call(n);var a=z();return"number"==typeof e?Y(a,0|e,"number"==typeof t?0|t:0|e):e?(ne.type(e,"object","invalid arguments to regl.texture"),W(n,e),j(a,e)):Y(a,1,1),n.genMipmaps&&(a.mipmask=(a.width<<1)-1),r.mipmask=a.mipmask,k(r,a),ne.texture2D(n,a,i),r.internalformat=a.internalformat,o.width=a.width,o.height=a.height,Z(r),F(a,pn),U(n,pn),$(),H(a),l.profile&&(r.stats.size=qr(r.internalformat,r.type,a.width,a.height,n.genMipmaps,!1)),o.format=b[r.internalformat],o.type=_[r.type],o.mag=w[n.magFilter],o.min=x[n.minFilter],o.wrapS=M[n.wrapS],o.wrapT=M[n.wrapT],o}function a(e,t,n,i){ne(!!e,"must specify image data");var a=0|t,s=0|n,l=0|i,u=I();return k(u,r),u.width=0,u.height=0,D(u,e),u.width=u.width||(r.width>>l)-a,u.height=u.height||(r.height>>l)-s,ne(r.type===u.type&&r.format===u.format&&r.internalformat===u.internalformat,"incompatible format for texture.subimage"),ne(a>=0&&s>=0&&a+u.width<=r.width&&s+u.height<=r.height,"texture.subimage write out of bounds"),ne(r.mipmask&1<<l,"missing mipmap data"),ne(u.data||u.element||u.needsCopy,"missing image data"),Z(r),P(u,pn,a,s,l),$(),R(u),o}function u(e,t){var i=0|e,a=0|t||i;if(i===r.width&&a===r.height)return o;o.width=r.width=i,o.height=r.height=a,Z(r);for(var s=0;r.mipmask>>s;++s){var u=i>>s,c=a>>s;if(!u||!c)break;n.texImage2D(pn,s,r.format,u,c,0,r.format,r.type,null)}return $(),l.profile&&(r.stats.size=qr(r.internalformat,r.type,i,a,!1,!1)),o}return X[r.id]=r,s.textureCount++,o(e,t),o.subimage=a,o.resize=u,o._reglType="texture2d",o._texture=r,l.profile&&(o.stats=r.stats),o.destroy=function(){r.decRef()},o}function te(e,t,r,o,a,u){var c=new J(mn);X[c.id]=c,s.cubeCount++;var d=new Array(6);function h(e,t,n,r,o,a){var s,u=c.texInfo;for(G.call(u),s=0;s<6;++s)d[s]=z();if("number"!=typeof e&&e)if("object"==typeof e)if(t)j(d[0],e),j(d[1],t),j(d[2],n),j(d[3],r),j(d[4],o),j(d[5],a);else if(W(u,e),T(c,e),"faces"in e){var f=e.faces;for(ne(Array.isArray(f)&&6===f.length,"cube faces must be a length 6 array"),s=0;s<6;++s)ne("object"==typeof f[s]&&!!f[s],"invalid input for cube map face"),k(d[s],c),j(d[s],f[s])}else for(s=0;s<6;++s)j(d[s],e);else ne.raise("invalid arguments to cube map");else{var p=0|e||1;for(s=0;s<6;++s)Y(d[s],p,p)}for(k(c,d[0]),i.npotTextureCube||ne(hn(c.width)&&hn(c.height),"your browser does not support non power or two texture dimensions"),u.genMipmaps?c.mipmask=(d[0].width<<1)-1:c.mipmask=d[0].mipmask,ne.textureCube(c,u,d,i),c.internalformat=d[0].internalformat,h.width=d[0].width,h.height=d[0].height,Z(c),s=0;s<6;++s)F(d[s],gn+s);for(U(u,mn),$(),l.profile&&(c.stats.size=qr(c.internalformat,c.type,h.width,h.height,u.genMipmaps,!0)),h.format=b[c.internalformat],h.type=_[c.type],h.mag=w[u.magFilter],h.min=x[u.minFilter],h.wrapS=M[u.wrapS],h.wrapT=M[u.wrapT],s=0;s<6;++s)H(d[s]);return h}function f(e,t,n,r,i){ne(!!t,"must specify image data"),ne("number"==typeof e&&e===(0|e)&&e>=0&&e<6,"invalid face");var o=0|n,a=0|r,s=0|i,l=I();return k(l,c),l.width=0,l.height=0,D(l,t),l.width=l.width||(c.width>>s)-o,l.height=l.height||(c.height>>s)-a,ne(c.type===l.type&&c.format===l.format&&c.internalformat===l.internalformat,"incompatible format for texture.subimage"),ne(o>=0&&a>=0&&o+l.width<=c.width&&a+l.height<=c.height,"texture.subimage write out of bounds"),ne(c.mipmask&1<<s,"missing mipmap data"),ne(l.data||l.element||l.needsCopy,"missing image data"),Z(c),P(l,gn+e,o,a,s),$(),R(l),h}function p(e){var t=0|e;if(t!==c.width){h.width=c.width=t,h.height=c.height=t,Z(c);for(var r=0;r<6;++r)for(var i=0;c.mipmask>>i;++i)n.texImage2D(gn+r,i,c.format,t>>i,t>>i,0,c.format,c.type,null);return $(),l.profile&&(c.stats.size=qr(c.internalformat,c.type,h.width,h.height,!1,!0)),h}}return h(e,t,r,o,a,u),h.subimage=f,h.resize=p,h._reglType="textureCube",h._texture=c,l.profile&&(h.stats=c.stats),h.destroy=function(){c.decRef()},h}function re(){for(var e=0;e<q;++e)n.activeTexture(br+e),n.bindTexture(pn,null),K[e]=null;Et(X).forEach(Q),s.cubeCount=0,s.textureCount=0}function ie(){for(var e=0;e<q;++e){var t=K[e];t&&(t.bindCount=0,t.unit=-1,K[e]=null)}Et(X).forEach((function(e){e.texture=n.createTexture(),n.bindTexture(e.target,e.texture);for(var t=0;t<32;++t)if(0!=(e.mipmask&1<<t))if(e.target===pn)n.texImage2D(pn,t,e.internalformat,e.width>>t,e.height>>t,0,e.internalformat,e.type,null);else for(var r=0;r<6;++r)n.texImage2D(gn+r,t,e.internalformat,e.width>>t,e.height>>t,0,e.internalformat,e.type,null);U(e.texInfo,e.target)}))}function oe(){for(var e=0;e<q;++e){var t=K[e];t&&(t.bindCount=0,t.unit=-1,K[e]=null),n.activeTexture(br+e),n.bindTexture(pn,null),n.bindTexture(mn,null)}}return t(J.prototype,{bind:function(){var e=this;e.bindCount+=1;var t=e.unit;if(t<0){for(var r=0;r<q;++r){var i=K[r];if(i){if(i.bindCount>0)continue;i.unit=-1}K[r]=e,t=r;break}t>=q&&ne.raise("insufficient number of texture units"),l.profile&&s.maxTextureUnits<t+1&&(s.maxTextureUnits=t+1),e.unit=t,n.activeTexture(br+t),n.bindTexture(e.target,e.texture)}return t},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&Q(this)}}),l.profile&&(s.getTotalTextureSize=function(){var e=0;return Object.keys(X).forEach((function(t){e+=X[t].stats.size})),e}),{create2D:ee,createCube:te,clear:re,getTexture:function(e){return null},restore:ie,refresh:oe}}Pr[xn]=2,Pr[Mn]=2,Pr[En]=2,Pr[Dn]=4,Pr[In]=.5,Pr[Rn]=.5,Pr[Nn]=1,Pr[Yn]=1,Pr[jn]=.5,Pr[Fn]=1,Pr[Bn]=1,Pr[zn]=.5,Pr[Hn]=.25,Pr[Gn]=.5,Pr[Wn]=.25,Pr[Un]=.5;var Jr=36161,Zr=32854,$r=32855,Qr=36194,ei=33189,ti=36168,ni=34041,ri=35907,ii=34836,oi=34842,ai=34843,si=[];function li(e,t,n){return si[e]*t*n}si[Zr]=2,si[$r]=2,si[Qr]=2,si[ei]=2,si[ti]=1,si[ni]=4,si[ri]=4,si[ii]=16,si[oi]=8,si[ai]=6;var ui=function(e,t,n,r,i){var o={rgba4:Zr,rgb565:Qr,"rgb5 a1":$r,depth:ei,stencil:ti,"depth stencil":ni};t.ext_srgb&&(o.srgba=ri),t.ext_color_buffer_half_float&&(o.rgba16f=oi,o.rgb16f=ai),t.webgl_color_buffer_float&&(o.rgba32f=ii);var a=[];Object.keys(o).forEach((function(e){var t=o[e];a[t]=e}));var s=0,l={};function u(e){this.id=s++,this.refCount=1,this.renderbuffer=e,this.format=Zr,this.width=0,this.height=0,i.profile&&(this.stats={size:0})}function c(t){var n=t.renderbuffer;ne(n,"must not double destroy renderbuffer"),e.bindRenderbuffer(Jr,null),e.deleteRenderbuffer(n),t.renderbuffer=null,t.refCount=0,delete l[t.id],r.renderbufferCount--}function d(t,s){var c=new u(e.createRenderbuffer());function d(t,r){var s=0,l=0,u=Zr;if("object"==typeof t&&t){var h=t;if("shape"in h){var f=h.shape;ne(Array.isArray(f)&&f.length>=2,"invalid renderbuffer shape"),s=0|f[0],l=0|f[1]}else"radius"in h&&(s=l=0|h.radius),"width"in h&&(s=0|h.width),"height"in h&&(l=0|h.height);"format"in h&&(ne.parameter(h.format,o,"invalid renderbuffer format"),u=o[h.format])}else"number"==typeof t?(s=0|t,l="number"==typeof r?0|r:s):t?ne.raise("invalid arguments to renderbuffer constructor"):s=l=1;if(ne(s>0&&l>0&&s<=n.maxRenderbufferSize&&l<=n.maxRenderbufferSize,"invalid renderbuffer size"),s!==c.width||l!==c.height||u!==c.format)return d.width=c.width=s,d.height=c.height=l,c.format=u,e.bindRenderbuffer(Jr,c.renderbuffer),e.renderbufferStorage(Jr,u,s,l),ne(0===e.getError(),"invalid render buffer format"),i.profile&&(c.stats.size=li(c.format,c.width,c.height)),d.format=a[c.format],d}function h(t,r){var o=0|t,a=0|r||o;return o===c.width&&a===c.height||(ne(o>0&&a>0&&o<=n.maxRenderbufferSize&&a<=n.maxRenderbufferSize,"invalid renderbuffer size"),d.width=c.width=o,d.height=c.height=a,e.bindRenderbuffer(Jr,c.renderbuffer),e.renderbufferStorage(Jr,c.format,o,a),ne(0===e.getError(),"invalid render buffer format"),i.profile&&(c.stats.size=li(c.format,c.width,c.height))),d}return l[c.id]=c,r.renderbufferCount++,d(t,s),d.resize=h,d._reglType="renderbuffer",d._renderbuffer=c,i.profile&&(d.stats=c.stats),d.destroy=function(){c.decRef()},d}function h(){Et(l).forEach((function(t){t.renderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(Jr,t.renderbuffer),e.renderbufferStorage(Jr,t.format,t.width,t.height)})),e.bindRenderbuffer(Jr,null)}return u.prototype.decRef=function(){--this.refCount<=0&&c(this)},i.profile&&(r.getTotalRenderbufferSize=function(){var e=0;return Object.keys(l).forEach((function(t){e+=l[t].stats.size})),e}),{create:d,clear:function(){Et(l).forEach(c)},restore:h}},ci=36160,di=36161,hi=3553,fi=34069,pi=36064,mi=36096,gi=36128,vi=33306,yi=36053,bi=36054,_i=36055,wi=36057,xi=36061,Mi=36193,Ei=5121,Si=5126,ki=6407,Ti=6408,Li=6402,Ci=[ki,Ti],Di=[];Di[Ti]=4,Di[ki]=3;var Ai=[];Ai[Ei]=1,Ai[Si]=4,Ai[Mi]=2;var Pi=33189,Oi=36168,Ii=34041,Ri=[32854,32855,36194,35907,34842,34843,34836],Ni={};function Yi(e,n,r,i,o,a){var s={cur:null,next:null,dirty:!1,setFBO:null},l=["rgba"],u=["rgba4","rgb565","rgb5 a1"];n.ext_srgb&&u.push("srgba"),n.ext_color_buffer_half_float&&u.push("rgba16f","rgb16f"),n.webgl_color_buffer_float&&u.push("rgba32f");var c=["uint8"];function d(e,t,n){this.target=e,this.texture=t,this.renderbuffer=n;var r=0,i=0;t?(r=t.width,i=t.height):n&&(r=n.width,i=n.height),this.width=r,this.height=i}function h(e){e&&(e.texture&&e.texture._texture.decRef(),e.renderbuffer&&e.renderbuffer._renderbuffer.decRef())}function f(e,t,n){if(e)if(e.texture){var r=e.texture._texture,i=Math.max(1,r.width),o=Math.max(1,r.height);ne(i===t&&o===n,"inconsistent width/height for supplied texture"),r.refCount+=1}else{var a=e.renderbuffer._renderbuffer;ne(a.width===t&&a.height===n,"inconsistent width/height for renderbuffer"),a.refCount+=1}}function p(t,n){n&&(n.texture?e.framebufferTexture2D(ci,t,n.target,n.texture._texture.texture,0):e.framebufferRenderbuffer(ci,t,di,n.renderbuffer._renderbuffer.renderbuffer))}function m(e){var t=hi,n=null,r=null,i=e;"object"==typeof e&&(i=e.data,"target"in e&&(t=0|e.target)),ne.type(i,"function","invalid attachment data");var o=i._reglType;return"texture2d"===o?(n=i,ne(t===hi)):"textureCube"===o?(n=i,ne(t>=fi&&t<fi+6,"invalid cube map target")):"renderbuffer"===o?(r=i,t=di):ne.raise("invalid regl object for attachment"),new d(t,n,r)}function g(e,t,n,r,a){if(n){var s=i.create2D({width:e,height:t,format:r,type:a});return s._texture.refCount=0,new d(hi,s,null)}var l=o.create({width:e,height:t,format:r});return l._renderbuffer.refCount=0,new d(di,null,l)}function v(e){return e&&(e.texture||e.renderbuffer)}function y(e,t,n){e&&(e.texture?e.texture.resize(t,n):e.renderbuffer&&e.renderbuffer.resize(t,n),e.width=t,e.height=n)}n.oes_texture_half_float&&c.push("half float","float16"),n.oes_texture_float&&c.push("float","float32");var b=0,_={};function w(){this.id=b++,_[this.id]=this,this.framebuffer=e.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function x(e){e.colorAttachments.forEach(h),h(e.depthAttachment),h(e.stencilAttachment),h(e.depthStencilAttachment)}function M(t){var n=t.framebuffer;ne(n,"must not double destroy framebuffer"),e.deleteFramebuffer(n),t.framebuffer=null,a.framebufferCount--,delete _[t.id]}function E(t){var n;e.bindFramebuffer(ci,t.framebuffer);var i=t.colorAttachments;for(n=0;n<i.length;++n)p(pi+n,i[n]);for(n=i.length;n<r.maxColorAttachments;++n)e.framebufferTexture2D(ci,pi+n,hi,null,0);e.framebufferTexture2D(ci,vi,hi,null,0),e.framebufferTexture2D(ci,mi,hi,null,0),e.framebufferTexture2D(ci,gi,hi,null,0),p(mi,t.depthAttachment),p(gi,t.stencilAttachment),p(vi,t.depthStencilAttachment);var o=e.checkFramebufferStatus(ci);e.isContextLost()||o===yi||ne.raise("framebuffer configuration not supported, status = "+Ni[o]),e.bindFramebuffer(ci,s.next?s.next.framebuffer:null),s.cur=s.next,e.getError()}function S(e,i){var o=new w;function d(e,t){var i;ne(s.next!==o,"can not update framebuffer which is currently in use");var a=0,h=0,p=!0,y=!0,b=null,_=!0,w="rgba",M="uint8",S=1,k=null,T=null,L=null,C=!1;if("number"==typeof e)a=0|e,h=0|t||a;else if(e){ne.type(e,"object","invalid arguments for framebuffer");var D=e;if("shape"in D){var A=D.shape;ne(Array.isArray(A)&&A.length>=2,"invalid shape for framebuffer"),a=A[0],h=A[1]}else"radius"in D&&(a=h=D.radius),"width"in D&&(a=D.width),"height"in D&&(h=D.height);("color"in D||"colors"in D)&&(b=D.color||D.colors,Array.isArray(b)&&ne(1===b.length||n.webgl_draw_buffers,"multiple render targets not supported")),b||("colorCount"in D&&(S=0|D.colorCount,ne(S>0,"invalid color buffer count")),"colorTexture"in D&&(_=!!D.colorTexture,w="rgba4"),"colorType"in D&&(M=D.colorType,_?(ne(n.oes_texture_float||!("float"===M||"float32"===M),"you must enable OES_texture_float in order to use floating point framebuffer objects"),ne(n.oes_texture_half_float||!("half float"===M||"float16"===M),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):"half float"===M||"float16"===M?(ne(n.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),w="rgba16f"):"float"!==M&&"float32"!==M||(ne(n.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),w="rgba32f"),ne.oneOf(M,c,"invalid color type")),"colorFormat"in D&&(w=D.colorFormat,l.indexOf(w)>=0?_=!0:u.indexOf(w)>=0?_=!1:_?ne.oneOf(D.colorFormat,l,"invalid color format for texture"):ne.oneOf(D.colorFormat,u,"invalid color format for renderbuffer"))),("depthTexture"in D||"depthStencilTexture"in D)&&(C=!(!D.depthTexture&&!D.depthStencilTexture),ne(!C||n.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in D&&("boolean"==typeof D.depth?p=D.depth:(k=D.depth,y=!1)),"stencil"in D&&("boolean"==typeof D.stencil?y=D.stencil:(T=D.stencil,p=!1)),"depthStencil"in D&&("boolean"==typeof D.depthStencil?p=y=D.depthStencil:(L=D.depthStencil,p=!1,y=!1))}else a=h=1;var P=null,O=null,I=null,R=null;if(Array.isArray(b))P=b.map(m);else if(b)P=[m(b)];else for(P=new Array(S),i=0;i<S;++i)P[i]=g(a,h,_,w,M);ne(n.webgl_draw_buffers||P.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),ne(P.length<=r.maxColorAttachments,"too many color attachments, not supported"),a=a||P[0].width,h=h||P[0].height,k?O=m(k):p&&!y&&(O=g(a,h,C,"depth","uint32")),T?I=m(T):y&&!p&&(I=g(a,h,!1,"stencil","uint8")),L?R=m(L):!k&&!T&&y&&p&&(R=g(a,h,C,"depth stencil","depth stencil")),ne(!!k+!!T+!!L<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var N=null;for(i=0;i<P.length;++i)if(f(P[i],a,h),ne(!P[i]||P[i].texture&&Ci.indexOf(P[i].texture._texture.format)>=0||P[i].renderbuffer&&Ri.indexOf(P[i].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+i+" is invalid"),P[i]&&P[i].texture){var Y=Di[P[i].texture._texture.format]*Ai[P[i].texture._texture.type];null===N?N=Y:ne(N===Y,"all color attachments much have the same number of bits per pixel.")}return f(O,a,h),ne(!O||O.texture&&O.texture._texture.format===Li||O.renderbuffer&&O.renderbuffer._renderbuffer.format===Pi,"invalid depth attachment for framebuffer object"),f(I,a,h),ne(!I||I.renderbuffer&&I.renderbuffer._renderbuffer.format===Oi,"invalid stencil attachment for framebuffer object"),f(R,a,h),ne(!R||R.texture&&R.texture._texture.format===Ii||R.renderbuffer&&R.renderbuffer._renderbuffer.format===Ii,"invalid depth-stencil attachment for framebuffer object"),x(o),o.width=a,o.height=h,o.colorAttachments=P,o.depthAttachment=O,o.stencilAttachment=I,o.depthStencilAttachment=R,d.color=P.map(v),d.depth=v(O),d.stencil=v(I),d.depthStencil=v(R),d.width=o.width,d.height=o.height,E(o),d}function h(e,t){ne(s.next!==o,"can not resize a framebuffer which is currently in use");var n=Math.max(0|e,1),r=Math.max(0|t||n,1);if(n===o.width&&r===o.height)return d;for(var i=o.colorAttachments,a=0;a<i.length;++a)y(i[a],n,r);return y(o.depthAttachment,n,r),y(o.stencilAttachment,n,r),y(o.depthStencilAttachment,n,r),o.width=d.width=n,o.height=d.height=r,E(o),d}return a.framebufferCount++,d(e,i),t(d,{resize:h,_reglType:"framebuffer",_framebuffer:o,destroy:function(){M(o),x(o)},use:function(e){s.setFBO({framebuffer:d},e)}})}function k(e){var o=Array(6);function a(e){var r;ne(o.indexOf(s.next)<0,"can not update framebuffer which is currently in use");var u,d={color:null},h=0,f=null,p="rgba",m="uint8",g=1;if("number"==typeof e)h=0|e;else if(e){ne.type(e,"object","invalid arguments for framebuffer");var v=e;if("shape"in v){var y=v.shape;ne(Array.isArray(y)&&y.length>=2,"invalid shape for framebuffer"),ne(y[0]===y[1],"cube framebuffer must be square"),h=y[0]}else"radius"in v&&(h=0|v.radius),"width"in v?(h=0|v.width,"height"in v&&ne(v.height===h,"must be square")):"height"in v&&(h=0|v.height);("color"in v||"colors"in v)&&(f=v.color||v.colors,Array.isArray(f)&&ne(1===f.length||n.webgl_draw_buffers,"multiple render targets not supported")),f||("colorCount"in v&&(g=0|v.colorCount,ne(g>0,"invalid color buffer count")),"colorType"in v&&(ne.oneOf(v.colorType,c,"invalid color type"),m=v.colorType),"colorFormat"in v&&(p=v.colorFormat,ne.oneOf(v.colorFormat,l,"invalid color format for texture"))),"depth"in v&&(d.depth=v.depth),"stencil"in v&&(d.stencil=v.stencil),"depthStencil"in v&&(d.depthStencil=v.depthStencil)}else h=1;if(f)if(Array.isArray(f))for(u=[],r=0;r<f.length;++r)u[r]=f[r];else u=[f];else{u=Array(g);var b={radius:h,format:p,type:m};for(r=0;r<g;++r)u[r]=i.createCube(b)}for(d.color=Array(u.length),r=0;r<u.length;++r){var _=u[r];ne("function"==typeof _&&"textureCube"===_._reglType,"invalid cube map"),h=h||_.width,ne(_.width===h&&_.height===h,"invalid cube map shape"),d.color[r]={target:fi,data:u[r]}}for(r=0;r<6;++r){for(var w=0;w<u.length;++w)d.color[w].target=fi+r;r>0&&(d.depth=o[0].depth,d.stencil=o[0].stencil,d.depthStencil=o[0].depthStencil),o[r]?o[r](d):o[r]=S(d)}return t(a,{width:h,height:h,color:u})}function u(e){var t,n=0|e;if(ne(n>0&&n<=r.maxCubeMapSize,"invalid radius for cube fbo"),n===a.width)return a;var i=a.color;for(t=0;t<i.length;++t)i[t].resize(n);for(t=0;t<6;++t)o[t].resize(n);return a.width=a.height=n,a}return a(e),t(a,{faces:o,resize:u,_reglType:"framebufferCube",destroy:function(){o.forEach((function(e){e.destroy()}))}})}function T(){s.cur=null,s.next=null,s.dirty=!0,Et(_).forEach((function(t){t.framebuffer=e.createFramebuffer(),E(t)}))}return t(s,{getFramebuffer:function(e){if("function"==typeof e&&"framebuffer"===e._reglType){var t=e._framebuffer;if(t instanceof w)return t}return null},create:S,createCube:k,clear:function(){Et(_).forEach(M)},restore:T})}Ni[yi]="complete",Ni[bi]="incomplete attachment",Ni[wi]="incomplete dimensions",Ni[_i]="incomplete, missing attachment",Ni[xi]="unsupported";var ji=5126,Fi=34962;function Bi(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=ji,this.offset=0,this.stride=0,this.divisor=0}function zi(t,n,r,i,o){for(var a=r.maxAttributes,s=new Array(a),l=0;l<a;++l)s[l]=new Bi;var u=0,c={},d={Record:Bi,scope:{},state:s,currentVAO:null,targetVAO:null,restore:f()?_:function(){},createVAO:w,getVAO:m,destroyBuffer:h,setVAO:f()?g:v,clear:f()?y:function(){}};function h(e){for(var n=0;n<s.length;++n){var r=s[n];r.buffer===e&&(t.disableVertexAttribArray(n),r.buffer=null)}}function f(){return n.oes_vertex_array_object}function p(){return n.angle_instanced_arrays}function m(e){return"function"==typeof e&&e._vao?e._vao:null}function g(e){if(e!==d.currentVAO){var t=f();e?t.bindVertexArrayOES(e.vao):t.bindVertexArrayOES(null),d.currentVAO=e}}function v(e){if(e!==d.currentVAO){if(e)e.bindAttrs();else for(var n=p(),r=0;r<s.length;++r){var i=s[r];i.buffer?(t.enableVertexAttribArray(r),t.vertexAttribPointer(r,i.size,i.type,i.normalized,i.stride,i.offfset),n&&i.divisor&&n.vertexAttribDivisorANGLE(r,i.divisor)):(t.disableVertexAttribArray(r),t.vertexAttrib4f(r,i.x,i.y,i.z,i.w))}d.currentVAO=e}}function y(){Et(c).forEach((function(e){e.destroy()}))}function b(){this.id=++u,this.attributes=[];var e=f();this.vao=e?e.createVertexArrayOES():null,c[this.id]=this,this.buffers=[]}function _(){f()&&Et(c).forEach((function(e){e.refresh()}))}function w(t){var r=new b;function s(t){ne(Array.isArray(t),"arguments to vertex array constructor must be an array"),ne(t.length<a,"too many attributes"),ne(t.length>0,"must specify at least one attribute");var i={},l=r.attributes;l.length=t.length;for(var u=0;u<t.length;++u){var c,d=t[u],h=l[u]=new Bi,f=d.data||d;Array.isArray(f)||e(f)||Mt(f)?(r.buffers[u]&&(c=r.buffers[u],e(f)&&c._buffer.byteLength>=f.byteLength?c.subdata(f):(c.destroy(),r.buffers[u]=null)),r.buffers[u]||(c=r.buffers[u]=o.create(d,Fi,!1,!0)),h.buffer=o.getBuffer(c),h.size=0|h.buffer.dimension,h.normalized=!1,h.type=h.buffer.dtype,h.offset=0,h.stride=0,h.divisor=0,h.state=1,i[u]=1):o.getBuffer(d)?(h.buffer=o.getBuffer(d),h.size=0|h.buffer.dimension,h.normalized=!1,h.type=h.buffer.dtype,h.offset=0,h.stride=0,h.divisor=0,h.state=1):o.getBuffer(d.buffer)?(h.buffer=o.getBuffer(d.buffer),h.size=0|(+d.size||h.buffer.dimension),h.normalized=!!d.normalized||!1,"type"in d?(ne.parameter(d.type,Ot,"invalid buffer type"),h.type=Ot[d.type]):h.type=h.buffer.dtype,h.offset=0|(d.offset||0),h.stride=0|(d.stride||0),h.divisor=0|(d.divisor||0),h.state=1,ne(h.size>=1&&h.size<=4,"size must be between 1 and 4"),ne(h.offset>=0,"invalid offset"),ne(h.stride>=0&&h.stride<=255,"stride must be between 0 and 255"),ne(h.divisor>=0,"divisor must be positive"),ne(!h.divisor||!!n.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in d?(ne(u>0,"first attribute must not be a constant"),h.x=+d.x||0,h.y=+d.y||0,h.z=+d.z||0,h.w=+d.w||0,h.state=2):ne(!1,"invalid attribute spec for location "+u)}for(var p=0;p<r.buffers.length;++p)!i[p]&&r.buffers[p]&&(r.buffers[p].destroy(),r.buffers[p]=null);return r.refresh(),s}return i.vaoCount+=1,s.destroy=function(){for(var e=0;e<r.buffers.length;++e)r.buffers[e]&&r.buffers[e].destroy();r.buffers.length=0,r.destroy()},s._vao=r,s._reglType="vao",s(t)}return b.prototype.bindAttrs=function(){for(var e=p(),n=this.attributes,r=0;r<n.length;++r){var i=n[r];i.buffer?(t.enableVertexAttribArray(r),t.bindBuffer(Fi,i.buffer.buffer),t.vertexAttribPointer(r,i.size,i.type,i.normalized,i.stride,i.offset),e&&i.divisor&&e.vertexAttribDivisorANGLE(r,i.divisor)):(t.disableVertexAttribArray(r),t.vertexAttrib4f(r,i.x,i.y,i.z,i.w))}for(var o=n.length;o<a;++o)t.disableVertexAttribArray(o)},b.prototype.refresh=function(){var e=f();e&&(e.bindVertexArrayOES(this.vao),this.bindAttrs(),d.currentVAO=this)},b.prototype.destroy=function(){if(this.vao){var e=f();this===d.currentVAO&&(d.currentVAO=null,e.bindVertexArrayOES(null)),e.deleteVertexArrayOES(this.vao),this.vao=null}c[this.id]&&(delete c[this.id],i.vaoCount-=1)},d}var Hi=35632,Gi=35633,Wi=35718,Ui=35721;function Vi(e,n,r,i){var o={},a={};function s(e,t,n,r){this.name=e,this.id=t,this.location=n,this.info=r}function l(e,t){for(var n=0;n<e.length;++n)if(e[n].id===t.id)return void(e[n].location=t.location);e.push(t)}function u(t,r,i){var s=t===Hi?o:a,l=s[r];if(!l){var u=n.str(r);l=e.createShader(t),e.shaderSource(l,u),e.compileShader(l),ne.shaderError(e,l,u,t,i),s[r]=l}return l}var c={},d=[],h=0;function f(e,t){this.id=h++,this.fragId=e,this.vertId=t,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,i.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function p(t,r,o){var a,c,d=u(Hi,t.fragId),h=u(Gi,t.vertId),f=t.program=e.createProgram();if(e.attachShader(f,d),e.attachShader(f,h),o)for(a=0;a<o.length;++a){var p=o[a];e.bindAttribLocation(f,p[0],p[1])}e.linkProgram(f),ne.linkError(e,f,n.str(t.fragId),n.str(t.vertId),r);var m=e.getProgramParameter(f,Wi);i.profile&&(t.stats.uniformsCount=m);var g=t.uniforms;for(a=0;a<m;++a)if(c=e.getActiveUniform(f,a))if(c.size>1)for(var v=0;v<c.size;++v){var y=c.name.replace("[0]","["+v+"]");l(g,new s(y,n.id(y),e.getUniformLocation(f,y),c))}else l(g,new s(c.name,n.id(c.name),e.getUniformLocation(f,c.name),c));var b=e.getProgramParameter(f,Ui);i.profile&&(t.stats.attributesCount=b);var _=t.attributes;for(a=0;a<b;++a)(c=e.getActiveAttrib(f,a))&&l(_,new s(c.name,n.id(c.name),e.getAttribLocation(f,c.name),c))}function m(){o={},a={};for(var e=0;e<d.length;++e)p(d[e],null,d[e].attributes.map((function(e){return[e.location,e.name]})))}return i.profile&&(r.getMaxUniformsCount=function(){var e=0;return d.forEach((function(t){t.stats.uniformsCount>e&&(e=t.stats.uniformsCount)})),e},r.getMaxAttributesCount=function(){var e=0;return d.forEach((function(t){t.stats.attributesCount>e&&(e=t.stats.attributesCount)})),e}),{clear:function(){var t=e.deleteShader.bind(e);Et(o).forEach(t),o={},Et(a).forEach(t),a={},d.forEach((function(t){e.deleteProgram(t.program)})),d.length=0,c={},r.shaderCount=0},program:function(n,i,s,l){ne.command(n>=0,"missing vertex shader",s),ne.command(i>=0,"missing fragment shader",s);var u=c[i];u||(u=c[i]={});var h=u[n];if(h&&(h.refCount++,!l))return h;var m=new f(i,n);return r.shaderCount++,p(m,s,l),h||(u[n]=m),d.push(m),t(m,{destroy:function(){if(m.refCount--,m.refCount<=0){e.deleteProgram(m.program);var t=d.indexOf(m);d.splice(t,1),r.shaderCount--}u[m.vertId].refCount<=0&&(e.deleteShader(a[m.vertId]),delete a[m.vertId],delete c[m.fragId][m.vertId]),Object.keys(c[m.fragId]).length||(e.deleteShader(o[m.fragId]),delete o[m.fragId],delete c[m.fragId])}})},restore:m,shader:u,frag:-1,vert:-1}}var Xi=6408,qi=5121,Ki=3333,Ji=5126;function Zi(t,n,r,i,o,a,s){function l(l){var u;null===n.next?(ne(o.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),u=qi):(ne(null!==n.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),u=n.next.colorAttachments[0].texture._texture.type,a.oes_texture_float?(ne(u===qi||u===Ji,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),u===Ji&&ne(s.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):ne(u===qi,"Reading from a framebuffer is only allowed for the type 'uint8'"));var c=0,d=0,h=i.framebufferWidth,f=i.framebufferHeight,p=null;e(l)?p=l:l&&(ne.type(l,"object","invalid arguments to regl.read()"),c=0|l.x,d=0|l.y,ne(c>=0&&c<i.framebufferWidth,"invalid x offset for regl.read"),ne(d>=0&&d<i.framebufferHeight,"invalid y offset for regl.read"),h=0|(l.width||i.framebufferWidth-c),f=0|(l.height||i.framebufferHeight-d),p=l.data||null),p&&(u===qi?ne(p instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):u===Ji&&ne(p instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),ne(h>0&&h+c<=i.framebufferWidth,"invalid width for read pixels"),ne(f>0&&f+d<=i.framebufferHeight,"invalid height for read pixels"),r();var m=h*f*4;return p||(u===qi?p=new Uint8Array(m):u===Ji&&(p=p||new Float32Array(m))),ne.isTypedArray(p,"data buffer for regl.read() must be a typedarray"),ne(p.byteLength>=m,"data buffer for regl.read() too small"),t.pixelStorei(Ki,4),t.readPixels(c,d,h,f,Xi,u,p),p}function u(e){var t;return n.setFBO({framebuffer:e.framebuffer},(function(){t=l(e)})),t}function c(e){return e&&"framebuffer"in e?u(e):l(e)}return c}function $i(e){return Array.prototype.slice.call(e)}function Qi(e){return $i(e).join("")}function eo(){var e=0,n=[],r=[];function i(t){for(var i=0;i<r.length;++i)if(r[i]===t)return n[i];var o="g"+e++;return n.push(o),r.push(t),o}function o(){var n=[];function r(){n.push.apply(n,$i(arguments))}var i=[];function o(){var t="v"+e++;return i.push(t),arguments.length>0&&(n.push(t,"="),n.push.apply(n,$i(arguments)),n.push(";")),t}return t(r,{def:o,toString:function(){return Qi([i.length>0?"var "+i.join(",")+";":"",Qi(n)])}})}function a(){var e=o(),n=o(),r=e.toString,i=n.toString;function a(t,r){n(t,r,"=",e.def(t,r),";")}return t((function(){e.apply(e,$i(arguments))}),{def:e.def,entry:e,exit:n,save:a,set:function(t,n,r){a(t,n),e(t,n,"=",r,";")},toString:function(){return r()+i()}})}function s(){var e=Qi(arguments),n=a(),r=a(),i=n.toString,o=r.toString;return t(n,{then:function(){return n.apply(n,$i(arguments)),this},else:function(){return r.apply(r,$i(arguments)),this},toString:function(){var t=o();return t&&(t="else{"+t+"}"),Qi(["if(",e,"){",i(),"}",t])}})}var l=o(),u={};function c(e,n){var r=[];function i(){var e="a"+r.length;return r.push(e),e}n=n||0;for(var o=0;o<n;++o)i();var s=a(),l=s.toString;return u[e]=t(s,{arg:i,toString:function(){return Qi(["function(",r.join(),"){",l(),"}"])}})}function d(){var e=['"use strict";',l,"return {"];Object.keys(u).forEach((function(t){e.push('"',t,'":',u[t].toString(),",")})),e.push("}");var t=Qi(e).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,n.concat(t)).apply(null,r)}return{global:l,link:i,block:o,proc:c,scope:a,cond:s,compile:d}}var to="xyzw".split(""),no=5121,ro=1,io=2,oo=0,ao=1,so=2,lo=3,uo=4,co=5,ho=6,fo="dither",po="blend.enable",mo="blend.color",go="blend.equation",vo="blend.func",yo="depth.enable",bo="depth.func",_o="depth.range",wo="depth.mask",xo="colorMask",Mo="cull.enable",Eo="cull.face",So="frontFace",ko="lineWidth",To="polygonOffset.enable",Lo="polygonOffset.offset",Co="sample.alpha",Do="sample.enable",Ao="sample.coverage",Po="stencil.enable",Oo="stencil.mask",Io="stencil.func",Ro="stencil.opFront",No="stencil.opBack",Yo="scissor.enable",jo="scissor.box",Fo="viewport",Bo="profile",zo="framebuffer",Ho="vert",Go="frag",Wo="elements",Uo="primitive",Vo="count",Xo="offset",qo="instances",Ko="vao",Jo="Width",Zo="Height",$o=zo+Jo,Qo=zo+Zo,ea=Fo+Jo,ta=Fo+Zo,na="drawingBuffer",ra=na+Jo,ia=na+Zo,oa=[vo,go,Io,Ro,No,Ao,Fo,jo,Lo],aa=34962,sa=34963,la=3553,ua=34067,ca=2884,da=3042,ha=3024,fa=2960,pa=2929,ma=3089,ga=32823,va=32926,ya=32928,ba=5126,_a=35664,wa=35665,xa=35666,Ma=5124,Ea=35667,Sa=35668,ka=35669,Ta=35670,La=35671,Ca=35672,Da=35673,Aa=35674,Pa=35675,Oa=35676,Ia=35678,Ra=35680,Na=4,Ya=1028,ja=1029,Fa=2304,Ba=2305,za=32775,Ha=32776,Ga=519,Wa=7680,Ua=0,Va=1,Xa=32774,qa=513,Ka=36160,Ja=36064,Za={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},$a=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],Qa={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},es={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},ts={frag:35632,vert:35633},ns={cw:Fa,ccw:Ba};function rs(t){return Array.isArray(t)||e(t)||Mt(t)}function is(e){return e.sort((function(e,t){return e===Fo?-1:t===Fo?1:e<t?-1:1}))}function os(e,t,n,r){this.thisDep=e,this.contextDep=t,this.propDep=n,this.append=r}function as(e){return e&&!(e.thisDep||e.contextDep||e.propDep)}function ss(e){return new os(!1,!1,!1,e)}function ls(e,t){var n=e.type;if(n===oo){var r=e.data.length;return new os(!0,r>=1,r>=2,t)}if(n===uo){var i=e.data;return new os(i.thisDep,i.contextDep,i.propDep,t)}if(n===co)return new os(!1,!1,!1,t);if(n===ho){for(var o=!1,a=!1,s=!1,l=0;l<e.data.length;++l){var u=e.data[l];if(u.type===ao)s=!0;else if(u.type===so)a=!0;else if(u.type===lo)o=!0;else if(u.type===oo){o=!0;var c=u.data;c>=1&&(a=!0),c>=2&&(s=!0)}else u.type===uo&&(o=o||u.data.thisDep,a=a||u.data.contextDep,s=s||u.data.propDep)}return new os(o,a,s,t)}return new os(n===lo,n===so,n===ao,t)}var us=new os(!1,!1,!1,(function(){}));function cs(e,n,r,i,o,a,s,l,u,c,d,h,f,p,m){var g=c.Record,v={add:32774,subtract:32778,"reverse subtract":32779};r.ext_blend_minmax&&(v.min=za,v.max=Ha);var y=r.angle_instanced_arrays,b=r.webgl_draw_buffers,_={dirty:!0,profile:m.profile},w={},x=[],M={},E={};function S(e){return e.replace(".","_")}function k(e,t,n){var r=S(e);x.push(e),w[r]=_[r]=!!n,M[r]=t}function T(e,t,n){var r=S(e);x.push(e),Array.isArray(n)?(_[r]=n.slice(),w[r]=n.slice()):_[r]=w[r]=n,E[r]=t}k(fo,ha),k(po,da),T(mo,"blendColor",[0,0,0,0]),T(go,"blendEquationSeparate",[Xa,Xa]),T(vo,"blendFuncSeparate",[Va,Ua,Va,Ua]),k(yo,pa,!0),T(bo,"depthFunc",qa),T(_o,"depthRange",[0,1]),T(wo,"depthMask",!0),T(xo,xo,[!0,!0,!0,!0]),k(Mo,ca),T(Eo,"cullFace",ja),T(So,So,Ba),T(ko,ko,1),k(To,ga),T(Lo,"polygonOffset",[0,0]),k(Co,va),k(Do,ya),T(Ao,"sampleCoverage",[1,!1]),k(Po,fa),T(Oo,"stencilMask",-1),T(Io,"stencilFunc",[Ga,0,-1]),T(Ro,"stencilOpSeparate",[Ya,Wa,Wa,Wa]),T(No,"stencilOpSeparate",[ja,Wa,Wa,Wa]),k(Yo,ma),T(jo,"scissor",[0,0,e.drawingBufferWidth,e.drawingBufferHeight]),T(Fo,Fo,[0,0,e.drawingBufferWidth,e.drawingBufferHeight]);var L={gl:e,context:f,strings:n,next:w,current:_,draw:h,elements:a,buffer:o,shader:d,attributes:c.state,vao:c,uniforms:u,framebuffer:l,extensions:r,timer:p,isBufferArgs:rs},C={primTypes:Vt,compareFuncs:Qa,blendFuncs:Za,blendEquations:v,stencilOps:es,glTypes:Ot,orientationType:ns};ne.optional((function(){L.isArrayLike=dn})),b&&(C.backBuffer=[ja],C.drawBuffer=ke(i.maxDrawbuffers,(function(e){return 0===e?[0]:ke(e,(function(e){return Ja+e}))})));var D=0;function A(){var e=eo(),t=e.link,r=e.global;e.id=D++,e.batchId="0";var i=t(L),o=e.shared={props:"a0"};Object.keys(L).forEach((function(e){o[e]=r.def(i,".",e)})),ne.optional((function(){e.CHECK=t(ne),e.commandStr=ne.guessCommand(),e.command=t(e.commandStr),e.assert=function(e,n,r){e("if(!(",n,"))",this.CHECK,".commandRaise(",t(r),",",this.command,");")},C.invalidBlendCombinations=$a}));var a=e.next={},s=e.current={};Object.keys(E).forEach((function(e){Array.isArray(_[e])&&(a[e]=r.def(o.next,".",e),s[e]=r.def(o.current,".",e))}));var l=e.constants={};Object.keys(C).forEach((function(e){l[e]=r.def(JSON.stringify(C[e]))})),e.invoke=function(n,r){switch(r.type){case oo:var i=["this",o.context,o.props,e.batchId];return n.def(t(r.data),".call(",i.slice(0,Math.max(r.data.length+1,4)),")");case ao:return n.def(o.props,r.data);case so:return n.def(o.context,r.data);case lo:return n.def("this",r.data);case uo:return r.data.append(e,n),r.data.ref;case co:return r.data.toString();case ho:return r.data.map((function(t){return e.invoke(n,t)}))}},e.attribCache={};var u={};return e.scopeAttrib=function(e){var r=n.id(e);if(r in u)return u[r];var i=c.scope[r];return i||(i=c.scope[r]=new g),u[r]=t(i)},e}function P(e){var t,n=e.static,r=e.dynamic;if(Bo in n){var i=!!n[Bo];(t=ss((function(e,t){return i}))).enable=i}else if(Bo in r){var o=r[Bo];t=ls(o,(function(e,t){return e.invoke(t,o)}))}return t}function O(e,t){var n=e.static,r=e.dynamic;if(zo in n){var i=n[zo];return i?(i=l.getFramebuffer(i),ne.command(i,"invalid framebuffer object"),ss((function(e,t){var n=e.link(i),r=e.shared;t.set(r.framebuffer,".next",n);var o=r.context;return t.set(o,"."+$o,n+".width"),t.set(o,"."+Qo,n+".height"),n}))):ss((function(e,t){var n=e.shared;t.set(n.framebuffer,".next","null");var r=n.context;return t.set(r,"."+$o,r+"."+ra),t.set(r,"."+Qo,r+"."+ia),"null"}))}if(zo in r){var o=r[zo];return ls(o,(function(e,t){var n=e.invoke(t,o),r=e.shared,i=r.framebuffer,a=t.def(i,".getFramebuffer(",n,")");ne.optional((function(){e.assert(t,"!"+n+"||"+a,"invalid framebuffer object")})),t.set(i,".next",a);var s=r.context;return t.set(s,"."+$o,a+"?"+a+".width:"+s+"."+ra),t.set(s,"."+Qo,a+"?"+a+".height:"+s+"."+ia),a}))}return null}function I(e,t,n){var r=e.static,i=e.dynamic;function o(e){if(e in r){var o=r[e];ne.commandType(o,"object","invalid "+e,n.commandStr);var a,s,l=!0,u=0|o.x,c=0|o.y;return"width"in o?(a=0|o.width,ne.command(a>=0,"invalid "+e,n.commandStr)):l=!1,"height"in o?(s=0|o.height,ne.command(s>=0,"invalid "+e,n.commandStr)):l=!1,new os(!l&&t&&t.thisDep,!l&&t&&t.contextDep,!l&&t&&t.propDep,(function(e,t){var n=e.shared.context,r=a;"width"in o||(r=t.def(n,".",$o,"-",u));var i=s;return"height"in o||(i=t.def(n,".",Qo,"-",c)),[u,c,r,i]}))}if(e in i){var d=i[e],h=ls(d,(function(t,n){var r=t.invoke(n,d);ne.optional((function(){t.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+e)}));var i=t.shared.context,o=n.def(r,".x|0"),a=n.def(r,".y|0"),s=n.def('"width" in ',r,"?",r,".width|0:","(",i,".",$o,"-",o,")"),l=n.def('"height" in ',r,"?",r,".height|0:","(",i,".",Qo,"-",a,")");return ne.optional((function(){t.assert(n,s+">=0&&"+l+">=0","invalid "+e)})),[o,a,s,l]}));return t&&(h.thisDep=h.thisDep||t.thisDep,h.contextDep=h.contextDep||t.contextDep,h.propDep=h.propDep||t.propDep),h}return t?new os(t.thisDep,t.contextDep,t.propDep,(function(e,t){var n=e.shared.context;return[0,0,t.def(n,".",$o),t.def(n,".",Qo)]})):null}var a=o(Fo);if(a){var s=a;a=new os(a.thisDep,a.contextDep,a.propDep,(function(e,t){var n=s.append(e,t),r=e.shared.context;return t.set(r,"."+ea,n[2]),t.set(r,"."+ta,n[3]),n}))}return{viewport:a,scissor_box:o(jo)}}function R(e,t){var n=e.static;if("string"==typeof n[Go]&&"string"==typeof n[Ho]){if(Object.keys(t.dynamic).length>0)return null;var r=t.static,i=Object.keys(r);if(i.length>0&&"number"==typeof r[i[0]]){for(var o=[],a=0;a<i.length;++a)ne("number"==typeof r[i[a]],"must specify all vertex attribute locations when using vaos"),o.push([0|r[i[a]],i[a]]);return o}}return null}function N(e,t,r){var i=e.static,o=e.dynamic;function a(e){if(e in i){var t=n.id(i[e]);ne.optional((function(){d.shader(ts[e],t,ne.guessCommand())}));var r=ss((function(){return t}));return r.id=t,r}if(e in o){var a=o[e];return ls(a,(function(t,n){var r=t.invoke(n,a),i=n.def(t.shared.strings,".id(",r,")");return ne.optional((function(){n(t.shared.shader,".shader(",ts[e],",",i,",",t.command,");")})),i}))}return null}var s,l=a(Go),u=a(Ho),c=null;return as(l)&&as(u)?(c=d.program(u.id,l.id,null,r),s=ss((function(e,t){return e.link(c)}))):s=new os(l&&l.thisDep||u&&u.thisDep,l&&l.contextDep||u&&u.contextDep,l&&l.propDep||u&&u.propDep,(function(e,t){var n,r=e.shared.shader;n=l?l.append(e,t):t.def(r,".",Go);var i=r+".program("+(u?u.append(e,t):t.def(r,".",Ho))+","+n;return ne.optional((function(){i+=","+e.command})),t.def(i+")")})),{frag:l,vert:u,progVar:s,program:c}}function Y(e,t){var n=e.static,r=e.dynamic;function i(){if(Wo in n){var e=n[Wo];rs(e)?e=a.getElements(a.create(e,!0)):e&&(e=a.getElements(e),ne.command(e,"invalid elements",t.commandStr));var i=ss((function(t,n){if(e){var r=t.link(e);return t.ELEMENTS=r,r}return t.ELEMENTS=null,null}));return i.value=e,i}if(Wo in r){var o=r[Wo];return ls(o,(function(e,t){var n=e.shared,r=n.isBufferArgs,i=n.elements,a=e.invoke(t,o),s=t.def("null"),l=t.def(r,"(",a,")"),u=e.cond(l).then(s,"=",i,".createStream(",a,");").else(s,"=",i,".getElements(",a,");");return ne.optional((function(){e.assert(u.else,"!"+a+"||"+s,"invalid elements")})),t.entry(u),t.exit(e.cond(l).then(i,".destroyStream(",s,");")),e.ELEMENTS=s,s}))}return null}var o=i();function s(){if(Uo in n){var e=n[Uo];return ne.commandParameter(e,Vt,"invalid primitve",t.commandStr),ss((function(t,n){return Vt[e]}))}if(Uo in r){var i=r[Uo];return ls(i,(function(e,t){var n=e.constants.primTypes,r=e.invoke(t,i);return ne.optional((function(){e.assert(t,r+" in "+n,"invalid primitive, must be one of "+Object.keys(Vt))})),t.def(n,"[",r,"]")}))}return o?as(o)?o.value?ss((function(e,t){return t.def(e.ELEMENTS,".primType")})):ss((function(){return Na})):new os(o.thisDep,o.contextDep,o.propDep,(function(e,t){var n=e.ELEMENTS;return t.def(n,"?",n,".primType:",Na)})):null}function l(e,i){if(e in n){var a=0|n[e];return ne.command(!i||a>=0,"invalid "+e,t.commandStr),ss((function(e,t){return i&&(e.OFFSET=a),a}))}if(e in r){var s=r[e];return ls(s,(function(t,n){var r=t.invoke(n,s);return i&&(t.OFFSET=r,ne.optional((function(){t.assert(n,r+">=0","invalid "+e)}))),r}))}return i&&o?ss((function(e,t){return e.OFFSET="0",0})):null}var u=l(Xo,!0);function c(){if(Vo in n){var e=0|n[Vo];return ne.command("number"==typeof e&&e>=0,"invalid vertex count",t.commandStr),ss((function(){return e}))}if(Vo in r){var i=r[Vo];return ls(i,(function(e,t){var n=e.invoke(t,i);return ne.optional((function(){e.assert(t,"typeof "+n+'==="number"&&'+n+">=0&&"+n+"===("+n+"|0)","invalid vertex count")})),n}))}if(o){if(as(o)){if(o)return u?new os(u.thisDep,u.contextDep,u.propDep,(function(e,t){var n=t.def(e.ELEMENTS,".vertCount-",e.OFFSET);return ne.optional((function(){e.assert(t,n+">=0","invalid vertex offset/element buffer too small")})),n})):ss((function(e,t){return t.def(e.ELEMENTS,".vertCount")}));var a=ss((function(){return-1}));return ne.optional((function(){a.MISSING=!0})),a}var s=new os(o.thisDep||u.thisDep,o.contextDep||u.contextDep,o.propDep||u.propDep,(function(e,t){var n=e.ELEMENTS;return e.OFFSET?t.def(n,"?",n,".vertCount-",e.OFFSET,":-1"):t.def(n,"?",n,".vertCount:-1")}));return ne.optional((function(){s.DYNAMIC=!0})),s}return null}return{elements:o,primitive:s(),count:c(),instances:l(qo,!1),offset:u}}function j(e,t){var n=e.static,r=e.dynamic,o={};return x.forEach((function(e){var a=S(e);function s(t,i){if(e in n){var s=t(n[e]);o[a]=ss((function(){return s}))}else if(e in r){var l=r[e];o[a]=ls(l,(function(e,t){return i(e,t,e.invoke(t,l))}))}}switch(e){case Mo:case po:case fo:case Po:case yo:case Yo:case To:case Co:case Do:case wo:return s((function(n){return ne.commandType(n,"boolean",e,t.commandStr),n}),(function(t,n,r){return ne.optional((function(){t.assert(n,"typeof "+r+'==="boolean"',"invalid flag "+e,t.commandStr)})),r}));case bo:return s((function(n){return ne.commandParameter(n,Qa,"invalid "+e,t.commandStr),Qa[n]}),(function(t,n,r){var i=t.constants.compareFuncs;return ne.optional((function(){t.assert(n,r+" in "+i,"invalid "+e+", must be one of "+Object.keys(Qa))})),n.def(i,"[",r,"]")}));case _o:return s((function(e){return ne.command(dn(e)&&2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]&&e[0]<=e[1],"depth range is 2d array",t.commandStr),e}),(function(e,t,n){return ne.optional((function(){e.assert(t,e.shared.isArrayLike+"("+n+")&&"+n+".length===2&&typeof "+n+'[0]==="number"&&typeof '+n+'[1]==="number"&&'+n+"[0]<="+n+"[1]","depth range must be a 2d array")})),[t.def("+",n,"[0]"),t.def("+",n,"[1]")]}));case vo:return s((function(e){ne.commandType(e,"object","blend.func",t.commandStr);var n="srcRGB"in e?e.srcRGB:e.src,r="srcAlpha"in e?e.srcAlpha:e.src,i="dstRGB"in e?e.dstRGB:e.dst,o="dstAlpha"in e?e.dstAlpha:e.dst;return ne.commandParameter(n,Za,a+".srcRGB",t.commandStr),ne.commandParameter(r,Za,a+".srcAlpha",t.commandStr),ne.commandParameter(i,Za,a+".dstRGB",t.commandStr),ne.commandParameter(o,Za,a+".dstAlpha",t.commandStr),ne.command(-1===$a.indexOf(n+", "+i),"unallowed blending combination (srcRGB, dstRGB) = ("+n+", "+i+")",t.commandStr),[Za[n],Za[i],Za[r],Za[o]]}),(function(t,n,r){var i=t.constants.blendFuncs;function o(o,a){var s=n.def('"',o,a,'" in ',r,"?",r,".",o,a,":",r,".",o);return ne.optional((function(){t.assert(n,s+" in "+i,"invalid "+e+"."+o+a+", must be one of "+Object.keys(Za))})),s}ne.optional((function(){t.assert(n,r+"&&typeof "+r+'==="object"',"invalid blend func, must be an object")}));var a=o("src","RGB"),s=o("dst","RGB");ne.optional((function(){var e=t.constants.invalidBlendCombinations;t.assert(n,e+".indexOf("+a+'+", "+'+s+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")}));var l=n.def(i,"[",a,"]"),u=n.def(i,"[",o("src","Alpha"),"]");return[l,n.def(i,"[",s,"]"),u,n.def(i,"[",o("dst","Alpha"),"]")]}));case go:return s((function(n){return"string"==typeof n?(ne.commandParameter(n,v,"invalid "+e,t.commandStr),[v[n],v[n]]):"object"==typeof n?(ne.commandParameter(n.rgb,v,e+".rgb",t.commandStr),ne.commandParameter(n.alpha,v,e+".alpha",t.commandStr),[v[n.rgb],v[n.alpha]]):void ne.commandRaise("invalid blend.equation",t.commandStr)}),(function(t,n,r){var i=t.constants.blendEquations,o=n.def(),a=n.def(),s=t.cond("typeof ",r,'==="string"');return ne.optional((function(){function n(e,n,r){t.assert(e,r+" in "+i,"invalid "+n+", must be one of "+Object.keys(v))}n(s.then,e,r),t.assert(s.else,r+"&&typeof "+r+'==="object"',"invalid "+e),n(s.else,e+".rgb",r+".rgb"),n(s.else,e+".alpha",r+".alpha")})),s.then(o,"=",a,"=",i,"[",r,"];"),s.else(o,"=",i,"[",r,".rgb];",a,"=",i,"[",r,".alpha];"),n(s),[o,a]}));case mo:return s((function(e){return ne.command(dn(e)&&4===e.length,"blend.color must be a 4d array",t.commandStr),ke(4,(function(t){return+e[t]}))}),(function(e,t,n){return ne.optional((function(){e.assert(t,e.shared.isArrayLike+"("+n+")&&"+n+".length===4","blend.color must be a 4d array")})),ke(4,(function(e){return t.def("+",n,"[",e,"]")}))}));case Oo:return s((function(e){return ne.commandType(e,"number",a,t.commandStr),0|e}),(function(e,t,n){return ne.optional((function(){e.assert(t,"typeof "+n+'==="number"',"invalid stencil.mask")})),t.def(n,"|0")}));case Io:return s((function(n){ne.commandType(n,"object",a,t.commandStr);var r=n.cmp||"keep",i=n.ref||0,o="mask"in n?n.mask:-1;return ne.commandParameter(r,Qa,e+".cmp",t.commandStr),ne.commandType(i,"number",e+".ref",t.commandStr),ne.commandType(o,"number",e+".mask",t.commandStr),[Qa[r],i,o]}),(function(e,t,n){var r=e.constants.compareFuncs;return ne.optional((function(){function i(){e.assert(t,Array.prototype.join.call(arguments,""),"invalid stencil.func")}i(n+"&&typeof ",n,'==="object"'),i('!("cmp" in ',n,")||(",n,".cmp in ",r,")")})),[t.def('"cmp" in ',n,"?",r,"[",n,".cmp]",":",Wa),t.def(n,".ref|0"),t.def('"mask" in ',n,"?",n,".mask|0:-1")]}));case Ro:case No:return s((function(n){ne.commandType(n,"object",a,t.commandStr);var r=n.fail||"keep",i=n.zfail||"keep",o=n.zpass||"keep";return ne.commandParameter(r,es,e+".fail",t.commandStr),ne.commandParameter(i,es,e+".zfail",t.commandStr),ne.commandParameter(o,es,e+".zpass",t.commandStr),[e===No?ja:Ya,es[r],es[i],es[o]]}),(function(t,n,r){var i=t.constants.stencilOps;function o(o){return ne.optional((function(){t.assert(n,'!("'+o+'" in '+r+")||("+r+"."+o+" in "+i+")","invalid "+e+"."+o+", must be one of "+Object.keys(es))})),n.def('"',o,'" in ',r,"?",i,"[",r,".",o,"]:",Wa)}return ne.optional((function(){t.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+e)})),[e===No?ja:Ya,o("fail"),o("zfail"),o("zpass")]}));case Lo:return s((function(e){ne.commandType(e,"object",a,t.commandStr);var n=0|e.factor,r=0|e.units;return ne.commandType(n,"number",a+".factor",t.commandStr),ne.commandType(r,"number",a+".units",t.commandStr),[n,r]}),(function(t,n,r){return ne.optional((function(){t.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+e)})),[n.def(r,".factor|0"),n.def(r,".units|0")]}));case Eo:return s((function(e){var n=0;return"front"===e?n=Ya:"back"===e&&(n=ja),ne.command(!!n,a,t.commandStr),n}),(function(e,t,n){return ne.optional((function(){e.assert(t,n+'==="front"||'+n+'==="back"',"invalid cull.face")})),t.def(n,'==="front"?',Ya,":",ja)}));case ko:return s((function(e){return ne.command("number"==typeof e&&e>=i.lineWidthDims[0]&&e<=i.lineWidthDims[1],"invalid line width, must be a positive number between "+i.lineWidthDims[0]+" and "+i.lineWidthDims[1],t.commandStr),e}),(function(e,t,n){return ne.optional((function(){e.assert(t,"typeof "+n+'==="number"&&'+n+">="+i.lineWidthDims[0]+"&&"+n+"<="+i.lineWidthDims[1],"invalid line width")})),n}));case So:return s((function(e){return ne.commandParameter(e,ns,a,t.commandStr),ns[e]}),(function(e,t,n){return ne.optional((function(){e.assert(t,n+'==="cw"||'+n+'==="ccw"',"invalid frontFace, must be one of cw,ccw")})),t.def(n+'==="cw"?'+Fa+":"+Ba)}));case xo:return s((function(e){return ne.command(dn(e)&&4===e.length,"color.mask must be length 4 array",t.commandStr),e.map((function(e){return!!e}))}),(function(e,t,n){return ne.optional((function(){e.assert(t,e.shared.isArrayLike+"("+n+")&&"+n+".length===4","invalid color.mask")})),ke(4,(function(e){return"!!"+n+"["+e+"]"}))}));case Ao:return s((function(e){ne.command("object"==typeof e&&e,a,t.commandStr);var n="value"in e?e.value:1,r=!!e.invert;return ne.command("number"==typeof n&&n>=0&&n<=1,"sample.coverage.value must be a number between 0 and 1",t.commandStr),[n,r]}),(function(e,t,n){return ne.optional((function(){e.assert(t,n+"&&typeof "+n+'==="object"',"invalid sample.coverage")})),[t.def('"value" in ',n,"?+",n,".value:1"),t.def("!!",n,".invert")]}))}})),o}function F(e,t){var n=e.static,r=e.dynamic,i={};return Object.keys(n).forEach((function(e){var r,o=n[e];if("number"==typeof o||"boolean"==typeof o)r=ss((function(){return o}));else if("function"==typeof o){var a=o._reglType;"texture2d"===a||"textureCube"===a?r=ss((function(e){return e.link(o)})):"framebuffer"===a||"framebufferCube"===a?(ne.command(o.color.length>0,'missing color attachment for framebuffer sent to uniform "'+e+'"',t.commandStr),r=ss((function(e){return e.link(o.color[0])}))):ne.commandRaise('invalid data for uniform "'+e+'"',t.commandStr)}else dn(o)?r=ss((function(t){return t.global.def("[",ke(o.length,(function(n){return ne.command("number"==typeof o[n]||"boolean"==typeof o[n],"invalid uniform "+e,t.commandStr),o[n]})),"]")})):ne.commandRaise('invalid or missing data for uniform "'+e+'"',t.commandStr);r.value=o,i[e]=r})),Object.keys(r).forEach((function(e){var t=r[e];i[e]=ls(t,(function(e,n){return e.invoke(n,t)}))})),i}function B(e,t){var r=e.static,i=e.dynamic,a={};return Object.keys(r).forEach((function(e){var i=r[e],s=n.id(e),l=new g;if(rs(i))l.state=ro,l.buffer=o.getBuffer(o.create(i,aa,!1,!0)),l.type=0;else{var u=o.getBuffer(i);if(u)l.state=ro,l.buffer=u,l.type=0;else if(ne.command("object"==typeof i&&i,"invalid data for attribute "+e,t.commandStr),"constant"in i){var c=i.constant;l.buffer="null",l.state=io,"number"==typeof c?l.x=c:(ne.command(dn(c)&&c.length>0&&c.length<=4,"invalid constant for attribute "+e,t.commandStr),to.forEach((function(e,t){t<c.length&&(l[e]=c[t])})))}else{u=rs(i.buffer)?o.getBuffer(o.create(i.buffer,aa,!1,!0)):o.getBuffer(i.buffer),ne.command(!!u,'missing buffer for attribute "'+e+'"',t.commandStr);var d=0|i.offset;ne.command(d>=0,'invalid offset for attribute "'+e+'"',t.commandStr);var h=0|i.stride;ne.command(h>=0&&h<256,'invalid stride for attribute "'+e+'", must be integer betweeen [0, 255]',t.commandStr);var f=0|i.size;ne.command(!("size"in i)||f>0&&f<=4,'invalid size for attribute "'+e+'", must be 1,2,3,4',t.commandStr);var p=!!i.normalized,m=0;"type"in i&&(ne.commandParameter(i.type,Ot,"invalid type for attribute "+e,t.commandStr),m=Ot[i.type]);var v=0|i.divisor;"divisor"in i&&(ne.command(0===v||y,'cannot specify divisor for attribute "'+e+'", instancing not supported',t.commandStr),ne.command(v>=0,'invalid divisor for attribute "'+e+'"',t.commandStr)),ne.optional((function(){var n=t.commandStr,r=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(i).forEach((function(t){ne.command(r.indexOf(t)>=0,'unknown parameter "'+t+'" for attribute pointer "'+e+'" (valid parameters are '+r+")",n)}))})),l.buffer=u,l.state=ro,l.size=f,l.normalized=p,l.type=m||u.dtype,l.offset=d,l.stride=h,l.divisor=v}}a[e]=ss((function(e,t){var n=e.attribCache;if(s in n)return n[s];var r={isStream:!1};return Object.keys(l).forEach((function(e){r[e]=l[e]})),l.buffer&&(r.buffer=e.link(l.buffer),r.type=r.type||r.buffer+".dtype"),n[s]=r,r}))})),Object.keys(i).forEach((function(e){var t=i[e];function n(n,r){var i=n.invoke(r,t),o=n.shared,a=n.constants,s=o.isBufferArgs,l=o.buffer;ne.optional((function(){n.assert(r,i+"&&(typeof "+i+'==="object"||typeof '+i+'==="function")&&('+s+"("+i+")||"+l+".getBuffer("+i+")||"+l+".getBuffer("+i+".buffer)||"+s+"("+i+'.buffer)||("constant" in '+i+"&&(typeof "+i+'.constant==="number"||'+o.isArrayLike+"("+i+".constant))))",'invalid dynamic attribute "'+e+'"')}));var u={isStream:r.def(!1)},c=new g;c.state=ro,Object.keys(c).forEach((function(e){u[e]=r.def(""+c[e])}));var d=u.buffer,h=u.type;function f(e){r(u[e],"=",i,".",e,"|0;")}return r("if(",s,"(",i,")){",u.isStream,"=true;",d,"=",l,".createStream(",aa,",",i,");",h,"=",d,".dtype;","}else{",d,"=",l,".getBuffer(",i,");","if(",d,"){",h,"=",d,".dtype;",'}else if("constant" in ',i,"){",u.state,"=",io,";","if(typeof "+i+'.constant === "number"){',u[to[0]],"=",i,".constant;",to.slice(1).map((function(e){return u[e]})).join("="),"=0;","}else{",to.map((function(e,t){return u[e]+"="+i+".constant.length>"+t+"?"+i+".constant["+t+"]:0;"})).join(""),"}}else{","if(",s,"(",i,".buffer)){",d,"=",l,".createStream(",aa,",",i,".buffer);","}else{",d,"=",l,".getBuffer(",i,".buffer);","}",h,'="type" in ',i,"?",a.glTypes,"[",i,".type]:",d,".dtype;",u.normalized,"=!!",i,".normalized;"),f("size"),f("offset"),f("stride"),f("divisor"),r("}}"),r.exit("if(",u.isStream,"){",l,".destroyStream(",d,");","}"),u}a[e]=ls(t,n)})),a}function z(e,t){var n=e.static,r=e.dynamic;if(Ko in n){var i=n[Ko];return null!==i&&null===c.getVAO(i)&&(i=c.createVAO(i)),ss((function(e){return e.link(c.getVAO(i))}))}if(Ko in r){var o=r[Ko];return ls(o,(function(e,t){var n=e.invoke(t,o);return t.def(e.shared.vao+".getVAO("+n+")")}))}return null}function H(e){var t=e.static,n=e.dynamic,r={};return Object.keys(t).forEach((function(e){var n=t[e];r[e]=ss((function(e,t){return"number"==typeof n||"boolean"==typeof n?""+n:e.link(n)}))})),Object.keys(n).forEach((function(e){var t=n[e];r[e]=ls(t,(function(e,n){return e.invoke(n,t)}))})),r}function G(e,t,n,i,o){var a=e.static,s=e.dynamic;ne.optional((function(){var e=[zo,Ho,Go,Wo,Uo,Xo,Vo,qo,Bo,Ko].concat(x);function t(t){Object.keys(t).forEach((function(t){ne.command(e.indexOf(t)>=0,'unknown parameter "'+t+'"',o.commandStr)}))}t(a),t(s)}));var l=R(e,t),u=O(e,o),d=I(e,u,o),h=Y(e,o),f=j(e,o),p=N(e,o,l);function m(e){var t=d[e];t&&(f[e]=t)}m(Fo),m(S(jo));var g=Object.keys(f).length>0,v={framebuffer:u,draw:h,shader:p,state:f,dirty:g,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(v.profile=P(e,o),v.uniforms=F(n,o),v.drawVAO=v.scopeVAO=z(e,o),!v.drawVAO&&p.program&&!l&&r.angle_instanced_arrays){var y=!0,b=p.program.attributes.map((function(e){var n=t.static[e];return y=y&&!!n,n}));if(y&&b.length>0){var _=c.getVAO(c.createVAO(b));v.drawVAO=new os(null,null,null,(function(e,t){return e.link(_)})),v.useVAO=!0}}return l?v.useVAO=!0:v.attributes=B(t,o),v.context=H(i,o),v}function W(e,t,n){var r=e.shared.context,i=e.scope();Object.keys(n).forEach((function(o){t.save(r,"."+o);var a=n[o].append(e,t);Array.isArray(a)?i(r,".",o,"=[",a.join(),"];"):i(r,".",o,"=",a,";")})),t(i)}function U(e,t,n,r){var i,o=e.shared,a=o.gl,s=o.framebuffer;b&&(i=t.def(o.extensions,".webgl_draw_buffers"));var l,u=e.constants,c=u.drawBuffer,d=u.backBuffer;l=n?n.append(e,t):t.def(s,".next"),r||t("if(",l,"!==",s,".cur){"),t("if(",l,"){",a,".bindFramebuffer(",Ka,",",l,".framebuffer);"),b&&t(i,".drawBuffersWEBGL(",c,"[",l,".colorAttachments.length]);"),t("}else{",a,".bindFramebuffer(",Ka,",null);"),b&&t(i,".drawBuffersWEBGL(",d,");"),t("}",s,".cur=",l,";"),r||t("}")}function V(e,t,n){var r=e.shared,i=r.gl,o=e.current,a=e.next,s=r.current,l=r.next,u=e.cond(s,".dirty");x.forEach((function(t){var r,c,d=S(t);if(!(d in n.state))if(d in a){r=a[d],c=o[d];var h=ke(_[d].length,(function(e){return u.def(r,"[",e,"]")}));u(e.cond(h.map((function(e,t){return e+"!=="+c+"["+t+"]"})).join("||")).then(i,".",E[d],"(",h,");",h.map((function(e,t){return c+"["+t+"]="+e})).join(";"),";"))}else{r=u.def(l,".",d);var f=e.cond(r,"!==",s,".",d);u(f),d in M?f(e.cond(r).then(i,".enable(",M[d],");").else(i,".disable(",M[d],");"),s,".",d,"=",r,";"):f(i,".",E[d],"(",r,");",s,".",d,"=",r,";")}})),0===Object.keys(n.state).length&&u(s,".dirty=false;"),t(u)}function X(e,t,n,r){var i=e.shared,o=e.current,a=i.current,s=i.gl;is(Object.keys(n)).forEach((function(i){var l=n[i];if(!r||r(l)){var u=l.append(e,t);if(M[i]){var c=M[i];as(l)?t(s,u?".enable(":".disable(",c,");"):t(e.cond(u).then(s,".enable(",c,");").else(s,".disable(",c,");")),t(a,".",i,"=",u,";")}else if(dn(u)){var d=o[i];t(s,".",E[i],"(",u,");",u.map((function(e,t){return d+"["+t+"]="+e})).join(";"),";")}else t(s,".",E[i],"(",u,");",a,".",i,"=",u,";")}}))}function q(e,t){y&&(e.instancing=t.def(e.shared.extensions,".angle_instanced_arrays"))}function K(e,t,n,r,i){var o,a,s,l=e.shared,u=e.stats,c=l.current,d=l.timer,h=n.profile;function f(){return"undefined"==typeof performance?"Date.now()":"performance.now()"}function m(e){e(o=t.def(),"=",f(),";"),"string"==typeof i?e(u,".count+=",i,";"):e(u,".count++;"),p&&(r?e(a=t.def(),"=",d,".getNumPendingQueries();"):e(d,".beginQuery(",u,");"))}function g(e){e(u,".cpuTime+=",f(),"-",o,";"),p&&(r?e(d,".pushScopeStats(",a,",",d,".getNumPendingQueries(),",u,");"):e(d,".endQuery();"))}function v(e){var n=t.def(c,".profile");t(c,".profile=",e,";"),t.exit(c,".profile=",n,";")}if(h){if(as(h))return void(h.enable?(m(t),g(t.exit),v("true")):v("false"));v(s=h.append(e,t))}else s=t.def(c,".profile");var y=e.block();m(y),t("if(",s,"){",y,"}");var b=e.block();g(b),t.exit("if(",s,"){",b,"}")}function J(e,t,n,r,i){var o=e.shared;function a(e){switch(e){case _a:case Ea:case La:return 2;case wa:case Sa:case Ca:return 3;case xa:case ka:case Da:return 4;default:return 1}}function s(n,r,i){var a=o.gl,s=t.def(n,".location"),l=t.def(o.attributes,"[",s,"]"),u=i.state,c=i.buffer,d=[i.x,i.y,i.z,i.w],h=["buffer","normalized","offset","stride"];function f(){t("if(!",l,".buffer){",a,".enableVertexAttribArray(",s,");}");var n,o=i.type;if(n=i.size?t.def(i.size,"||",r):r,t("if(",l,".type!==",o,"||",l,".size!==",n,"||",h.map((function(e){return l+"."+e+"!=="+i[e]})).join("||"),"){",a,".bindBuffer(",aa,",",c,".buffer);",a,".vertexAttribPointer(",[s,n,o,i.normalized,i.stride,i.offset],");",l,".type=",o,";",l,".size=",n,";",h.map((function(e){return l+"."+e+"="+i[e]+";"})).join(""),"}"),y){var u=i.divisor;t("if(",l,".divisor!==",u,"){",e.instancing,".vertexAttribDivisorANGLE(",[s,u],");",l,".divisor=",u,";}")}}function p(){t("if(",l,".buffer){",a,".disableVertexAttribArray(",s,");",l,".buffer=null;","}if(",to.map((function(e,t){return l+"."+e+"!=="+d[t]})).join("||"),"){",a,".vertexAttrib4f(",s,",",d,");",to.map((function(e,t){return l+"."+e+"="+d[t]+";"})).join(""),"}")}u===ro?f():u===io?p():(t("if(",u,"===",ro,"){"),f(),t("}else{"),p(),t("}"))}r.forEach((function(r){var o,l=r.name,u=n.attributes[l];if(u){if(!i(u))return;o=u.append(e,t)}else{if(!i(us))return;var c=e.scopeAttrib(l);ne.optional((function(){e.assert(t,c+".state","missing attribute "+l)})),o={},Object.keys(new g).forEach((function(e){o[e]=t.def(c,".",e)}))}s(e.link(r),a(r.info.type),o)}))}function Z(e,t,r,i,o){for(var a,s=e.shared,l=s.gl,u=0;u<i.length;++u){var c,d=i[u],h=d.name,f=d.info.type,p=r.uniforms[h],m=e.link(d)+".location";if(p){if(!o(p))continue;if(as(p)){var g=p.value;if(ne.command(null!=g,'missing uniform "'+h+'"',e.commandStr),f===Ia||f===Ra){ne.command("function"==typeof g&&(f===Ia&&("texture2d"===g._reglType||"framebuffer"===g._reglType)||f===Ra&&("textureCube"===g._reglType||"framebufferCube"===g._reglType)),"invalid texture for uniform "+h,e.commandStr);var v=e.link(g._texture||g.color[0]._texture);t(l,".uniform1i(",m,",",v+".bind());"),t.exit(v,".unbind();")}else if(f===Aa||f===Pa||f===Oa){ne.optional((function(){ne.command(dn(g),"invalid matrix for uniform "+h,e.commandStr),ne.command(f===Aa&&4===g.length||f===Pa&&9===g.length||f===Oa&&16===g.length,"invalid length for matrix uniform "+h,e.commandStr)}));var y=e.global.def("new Float32Array(["+Array.prototype.slice.call(g)+"])"),b=2;f===Pa?b=3:f===Oa&&(b=4),t(l,".uniformMatrix",b,"fv(",m,",false,",y,");")}else{switch(f){case ba:ne.commandType(g,"number","uniform "+h,e.commandStr),a="1f";break;case _a:ne.command(dn(g)&&2===g.length,"uniform "+h,e.commandStr),a="2f";break;case wa:ne.command(dn(g)&&3===g.length,"uniform "+h,e.commandStr),a="3f";break;case xa:ne.command(dn(g)&&4===g.length,"uniform "+h,e.commandStr),a="4f";break;case Ta:ne.commandType(g,"boolean","uniform "+h,e.commandStr),a="1i";break;case Ma:ne.commandType(g,"number","uniform "+h,e.commandStr),a="1i";break;case La:case Ea:ne.command(dn(g)&&2===g.length,"uniform "+h,e.commandStr),a="2i";break;case Ca:case Sa:ne.command(dn(g)&&3===g.length,"uniform "+h,e.commandStr),a="3i";break;case Da:case ka:ne.command(dn(g)&&4===g.length,"uniform "+h,e.commandStr),a="4i"}t(l,".uniform",a,"(",m,",",dn(g)?Array.prototype.slice.call(g):g,");")}continue}c=p.append(e,t)}else{if(!o(us))continue;c=t.def(s.uniforms,"[",n.id(h),"]")}f===Ia?(ne(!Array.isArray(c),"must specify a scalar prop for textures"),t("if(",c,"&&",c,'._reglType==="framebuffer"){',c,"=",c,".color[0];","}")):f===Ra&&(ne(!Array.isArray(c),"must specify a scalar prop for cube maps"),t("if(",c,"&&",c,'._reglType==="framebufferCube"){',c,"=",c,".color[0];","}")),ne.optional((function(){function n(n,r){e.assert(t,n,'bad data or missing for uniform "'+h+'".  '+r)}function r(e){ne(!Array.isArray(c),"must not specify an array type for uniform"),n("typeof "+c+'==="'+e+'"',"invalid type, expected "+e)}function i(t,r){Array.isArray(c)?ne(c.length===t,"must have length "+t):n(s.isArrayLike+"("+c+")&&"+c+".length==="+t,"invalid vector, should have length "+t,e.commandStr)}function o(t){ne(!Array.isArray(c),"must not specify a value type"),n("typeof "+c+'==="function"&&'+c+'._reglType==="texture'+(t===la?"2d":"Cube")+'"',"invalid texture type",e.commandStr)}switch(f){case Ma:case ba:r("number");break;case Ea:case _a:i(2,"number");break;case Sa:case wa:i(3,"number");break;case ka:case xa:case Aa:i(4,"number");break;case Ta:r("boolean");break;case La:i(2,"boolean");break;case Ca:i(3,"boolean");break;case Da:i(4,"boolean");break;case Pa:i(9,"number");break;case Oa:i(16,"number");break;case Ia:o(la);break;case Ra:o(ua)}}));var _=1;switch(f){case Ia:case Ra:var w=t.def(c,"._texture");t(l,".uniform1i(",m,",",w,".bind());"),t.exit(w,".unbind();");continue;case Ma:case Ta:a="1i";break;case Ea:case La:a="2i",_=2;break;case Sa:case Ca:a="3i",_=3;break;case ka:case Da:a="4i",_=4;break;case ba:a="1f";break;case _a:a="2f",_=2;break;case wa:a="3f",_=3;break;case xa:a="4f",_=4;break;case Aa:a="Matrix2fv";break;case Pa:a="Matrix3fv";break;case Oa:a="Matrix4fv"}if(t(l,".uniform",a,"(",m,","),"M"===a.charAt(0)){var x=Math.pow(f-Aa+2,2),M=e.global.def("new Float32Array(",x,")");Array.isArray(c)?t("false,(",ke(x,(function(e){return M+"["+e+"]="+c[e]})),",",M,")"):t("false,(Array.isArray(",c,")||",c," instanceof Float32Array)?",c,":(",ke(x,(function(e){return M+"["+e+"]="+c+"["+e+"]"})),",",M,")")}else _>1?t(ke(_,(function(e){return Array.isArray(c)?c[e]:c+"["+e+"]"}))):(ne(!Array.isArray(c),"uniform value must not be an array"),t(c));t(");")}}function $(e,t,n,r){var i=e.shared,o=i.gl,a=i.draw,s=r.draw;function l(){var i,l=s.elements,u=t;return l?((l.contextDep&&r.contextDynamic||l.propDep)&&(u=n),i=l.append(e,u)):i=u.def(a,".",Wo),i&&u("if("+i+")"+o+".bindBuffer("+sa+","+i+".buffer.buffer);"),i}function u(){var i,o=s.count,l=t;return o?((o.contextDep&&r.contextDynamic||o.propDep)&&(l=n),i=o.append(e,l),ne.optional((function(){o.MISSING&&e.assert(t,"false","missing vertex count"),o.DYNAMIC&&e.assert(l,i+">=0","missing vertex count")}))):(i=l.def(a,".",Vo),ne.optional((function(){e.assert(l,i+">=0","missing vertex count")}))),i}var c=l();function d(i){var o=s[i];return o?o.contextDep&&r.contextDynamic||o.propDep?o.append(e,n):o.append(e,t):t.def(a,".",i)}var h,f,p=d(Uo),m=d(Xo),g=u();if("number"==typeof g){if(0===g)return}else n("if(",g,"){"),n.exit("}");y&&(h=d(qo),f=e.instancing);var v=c+".type",b=s.elements&&as(s.elements);function _(){function e(){n(f,".drawElementsInstancedANGLE(",[p,g,v,m+"<<(("+v+"-"+no+")>>1)",h],");")}function t(){n(f,".drawArraysInstancedANGLE(",[p,m,g,h],");")}c?b?e():(n("if(",c,"){"),e(),n("}else{"),t(),n("}")):t()}function w(){function e(){n(o+".drawElements("+[p,g,v,m+"<<(("+v+"-"+no+")>>1)"]+");")}function t(){n(o+".drawArrays("+[p,m,g]+");")}c?b?e():(n("if(",c,"){"),e(),n("}else{"),t(),n("}")):t()}y&&("number"!=typeof h||h>=0)?"string"==typeof h?(n("if(",h,">0){"),_(),n("}else if(",h,"<0){"),w(),n("}")):_():w()}function Q(e,t,n,r,i){var o=A(),a=o.proc("body",i);return ne.optional((function(){o.commandStr=t.commandStr,o.command=o.link(t.commandStr)})),y&&(o.instancing=a.def(o.shared.extensions,".angle_instanced_arrays")),e(o,a,n,r),o.compile().body}function ee(e,t,n,r){q(e,t),n.useVAO?n.drawVAO?t(e.shared.vao,".setVAO(",n.drawVAO.append(e,t),");"):t(e.shared.vao,".setVAO(",e.shared.vao,".targetVAO);"):(t(e.shared.vao,".setVAO(null);"),J(e,t,n,r.attributes,(function(){return!0}))),Z(e,t,n,r.uniforms,(function(){return!0})),$(e,t,t,n)}function te(e,t){var n=e.proc("draw",1);q(e,n),W(e,n,t.context),U(e,n,t.framebuffer),V(e,n,t),X(e,n,t.state),K(e,n,t,!1,!0);var r=t.shader.progVar.append(e,n);if(n(e.shared.gl,".useProgram(",r,".program);"),t.shader.program)ee(e,n,t,t.shader.program);else{n(e.shared.vao,".setVAO(null);");var i=e.global.def("{}"),o=n.def(r,".id"),a=n.def(i,"[",o,"]");n(e.cond(a).then(a,".call(this,a0);").else(a,"=",i,"[",o,"]=",e.link((function(n){return Q(ee,e,t,n,1)})),"(",r,");",a,".call(this,a0);"))}Object.keys(t.state).length>0&&n(e.shared.current,".dirty=true;")}function re(e,t,n,r){function i(){return!0}e.batchId="a1",q(e,t),J(e,t,n,r.attributes,i),Z(e,t,n,r.uniforms,i),$(e,t,t,n)}function ie(e,t,n,r){q(e,t);var i=n.contextDep,o=t.def(),a="a0",s="a1",l=t.def();e.shared.props=l,e.batchId=o;var u=e.scope(),c=e.scope();function d(e){return e.contextDep&&i||e.propDep}function h(e){return!d(e)}if(t(u.entry,"for(",o,"=0;",o,"<",s,";++",o,"){",l,"=",a,"[",o,"];",c,"}",u.exit),n.needsContext&&W(e,c,n.context),n.needsFramebuffer&&U(e,c,n.framebuffer),X(e,c,n.state,d),n.profile&&d(n.profile)&&K(e,c,n,!1,!0),r)n.useVAO?n.drawVAO?d(n.drawVAO)?c(e.shared.vao,".setVAO(",n.drawVAO.append(e,c),");"):u(e.shared.vao,".setVAO(",n.drawVAO.append(e,u),");"):u(e.shared.vao,".setVAO(",e.shared.vao,".targetVAO);"):(u(e.shared.vao,".setVAO(null);"),J(e,u,n,r.attributes,h),J(e,c,n,r.attributes,d)),Z(e,u,n,r.uniforms,h),Z(e,c,n,r.uniforms,d),$(e,u,c,n);else{var f=e.global.def("{}"),p=n.shader.progVar.append(e,c),m=c.def(p,".id"),g=c.def(f,"[",m,"]");c(e.shared.gl,".useProgram(",p,".program);","if(!",g,"){",g,"=",f,"[",m,"]=",e.link((function(t){return Q(re,e,n,t,2)})),"(",p,");}",g,".call(this,a0[",o,"],",o,");")}}function oe(e,t){var n=e.proc("batch",2);e.batchId="0",q(e,n);var r=!1,i=!0;Object.keys(t.context).forEach((function(e){r=r||t.context[e].propDep})),r||(W(e,n,t.context),i=!1);var o=t.framebuffer,a=!1;function s(e){return e.contextDep&&r||e.propDep}o?(o.propDep?r=a=!0:o.contextDep&&r&&(a=!0),a||U(e,n,o)):U(e,n,null),t.state.viewport&&t.state.viewport.propDep&&(r=!0),V(e,n,t),X(e,n,t.state,(function(e){return!s(e)})),t.profile&&s(t.profile)||K(e,n,t,!1,"a1"),t.contextDep=r,t.needsContext=i,t.needsFramebuffer=a;var l=t.shader.progVar;if(l.contextDep&&r||l.propDep)ie(e,n,t,null);else{var u=l.append(e,n);if(n(e.shared.gl,".useProgram(",u,".program);"),t.shader.program)ie(e,n,t,t.shader.program);else{n(e.shared.vao,".setVAO(null);");var c=e.global.def("{}"),d=n.def(u,".id"),h=n.def(c,"[",d,"]");n(e.cond(h).then(h,".call(this,a0,a1);").else(h,"=",c,"[",d,"]=",e.link((function(n){return Q(ie,e,t,n,2)})),"(",u,");",h,".call(this,a0,a1);"))}}Object.keys(t.state).length>0&&n(e.shared.current,".dirty=true;")}function ae(e,t){var r=e.proc("scope",3);e.batchId="a2";var i=e.shared,o=i.current;function a(n){var o=t.shader[n];o&&r.set(i.shader,"."+n,o.append(e,r))}W(e,r,t.context),t.framebuffer&&t.framebuffer.append(e,r),is(Object.keys(t.state)).forEach((function(n){var o=t.state[n].append(e,r);dn(o)?o.forEach((function(t,i){r.set(e.next[n],"["+i+"]",t)})):r.set(i.next,"."+n,o)})),K(e,r,t,!0,!0),[Wo,Xo,Vo,qo,Uo].forEach((function(n){var o=t.draw[n];o&&r.set(i.draw,"."+n,""+o.append(e,r))})),Object.keys(t.uniforms).forEach((function(o){var a=t.uniforms[o].append(e,r);Array.isArray(a)&&(a="["+a.join()+"]"),r.set(i.uniforms,"["+n.id(o)+"]",a)})),Object.keys(t.attributes).forEach((function(n){var i=t.attributes[n].append(e,r),o=e.scopeAttrib(n);Object.keys(new g).forEach((function(e){r.set(o,"."+e,i[e])}))})),t.scopeVAO&&r.set(i.vao,".targetVAO",t.scopeVAO.append(e,r)),a(Ho),a(Go),Object.keys(t.state).length>0&&(r(o,".dirty=true;"),r.exit(o,".dirty=true;")),r("a1(",e.shared.context,",a0,",e.batchId,");")}function se(e){if("object"==typeof e&&!dn(e)){for(var t=Object.keys(e),n=0;n<t.length;++n)if(pe.isDynamic(e[t[n]]))return!0;return!1}}function le(e,t,n){var r=t.static[n];if(r&&se(r)){var i=e.global,o=Object.keys(r),a=!1,s=!1,l=!1,u=e.global.def("{}");o.forEach((function(t){var n=r[t];if(pe.isDynamic(n)){"function"==typeof n&&(n=r[t]=pe.unbox(n));var o=ls(n,null);a=a||o.thisDep,l=l||o.propDep,s=s||o.contextDep}else{switch(i(u,".",t,"="),typeof n){case"number":i(n);break;case"string":i('"',n,'"');break;case"object":Array.isArray(n)&&i("[",n.join(),"]");break;default:i(e.link(n))}i(";")}})),t.dynamic[n]=new pe.DynamicVariable(uo,{thisDep:a,contextDep:s,propDep:l,ref:u,append:c}),delete t.static[n]}function c(e,t){o.forEach((function(n){var i=r[n];if(pe.isDynamic(i)){var o=e.invoke(t,i);t(u,".",n,"=",o,";")}}))}}function ue(e,n,r,i,o){var a=A();a.stats=a.link(o),Object.keys(n.static).forEach((function(e){le(a,n,e)})),oa.forEach((function(t){le(a,e,t)}));var s=G(e,n,r,i,a);return te(a,s),ae(a,s),oe(a,s),t(a.compile(),{destroy:function(){s.shader.program.destroy()}})}return{next:w,current:_,procs:function(){var e=A(),t=e.proc("poll"),n=e.proc("refresh"),o=e.block();t(o),n(o);var a,s=e.shared,l=s.gl,u=s.next,c=s.current;o(c,".dirty=false;"),U(e,t),U(e,n,null,!0),y&&(a=e.link(y)),r.oes_vertex_array_object&&n(e.link(r.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var d=0;d<i.maxAttributes;++d){var h=n.def(s.attributes,"[",d,"]"),f=e.cond(h,".buffer");f.then(l,".enableVertexAttribArray(",d,");",l,".bindBuffer(",aa,",",h,".buffer.buffer);",l,".vertexAttribPointer(",d,",",h,".size,",h,".type,",h,".normalized,",h,".stride,",h,".offset);").else(l,".disableVertexAttribArray(",d,");",l,".vertexAttrib4f(",d,",",h,".x,",h,".y,",h,".z,",h,".w);",h,".buffer=null;"),n(f),y&&n(a,".vertexAttribDivisorANGLE(",d,",",h,".divisor);")}return n(e.shared.vao,".currentVAO=null;",e.shared.vao,".setVAO(",e.shared.vao,".targetVAO);"),Object.keys(M).forEach((function(r){var i=M[r],a=o.def(u,".",r),s=e.block();s("if(",a,"){",l,".enable(",i,")}else{",l,".disable(",i,")}",c,".",r,"=",a,";"),n(s),t("if(",a,"!==",c,".",r,"){",s,"}")})),Object.keys(E).forEach((function(r){var i,a,s=E[r],d=_[r],h=e.block();if(h(l,".",s,"("),dn(d)){var f=d.length;i=e.global.def(u,".",r),a=e.global.def(c,".",r),h(ke(f,(function(e){return i+"["+e+"]"})),");",ke(f,(function(e){return a+"["+e+"]="+i+"["+e+"];"})).join("")),t("if(",ke(f,(function(e){return i+"["+e+"]!=="+a+"["+e+"]"})).join("||"),"){",h,"}")}else i=o.def(u,".",r),a=o.def(c,".",r),h(i,");",c,".",r,"=",i,";"),t("if(",i,"!==",a,"){",h,"}");n(h)})),e.compile()}(),compile:ue}}function ds(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var hs=34918,fs=34919,ps=35007,ms=function(e,t){if(!t.ext_disjoint_timer_query)return null;var n=[];function r(){return n.pop()||t.ext_disjoint_timer_query.createQueryEXT()}function i(e){n.push(e)}var o=[];function a(e){var n=r();t.ext_disjoint_timer_query.beginQueryEXT(ps,n),o.push(n),f(o.length-1,o.length,e)}function s(){t.ext_disjoint_timer_query.endQueryEXT(ps)}function l(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var u=[];function c(){return u.pop()||new l}function d(e){u.push(e)}var h=[];function f(e,t,n){var r=c();r.startQueryIndex=e,r.endQueryIndex=t,r.sum=0,r.stats=n,h.push(r)}var p=[],m=[];function g(){var e,n,r=o.length;if(0!==r){m.length=Math.max(m.length,r+1),p.length=Math.max(p.length,r+1),p[0]=0,m[0]=0;var a=0;for(e=0,n=0;n<o.length;++n){var s=o[n];t.ext_disjoint_timer_query.getQueryObjectEXT(s,fs)?(a+=t.ext_disjoint_timer_query.getQueryObjectEXT(s,hs),i(s)):o[e++]=s,p[n+1]=a,m[n+1]=e}for(o.length=e,e=0,n=0;n<h.length;++n){var l=h[n],u=l.startQueryIndex,c=l.endQueryIndex;l.sum+=p[c]-p[u];var f=m[u],g=m[c];g===f?(l.stats.gpuTime+=l.sum/1e6,d(l)):(l.startQueryIndex=f,l.endQueryIndex=g,h[e++]=l)}h.length=e}}return{beginQuery:a,endQuery:s,pushScopeStats:f,update:g,getNumPendingQueries:function(){return o.length},clear:function(){n.push.apply(n,o);for(var e=0;e<n.length;e++)t.ext_disjoint_timer_query.deleteQueryEXT(n[e]);o.length=0,n.length=0},restore:function(){o.length=0,n.length=0}}},gs=16384,vs=256,ys=1024,bs=34962,_s="webglcontextlost",ws="webglcontextrestored",xs=1,Ms=2,Es=3;function Ss(e,t){for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}function ks(e){var n=Ee(e);if(!n)return null;var r=n.gl,i=r.getContextAttributes(),o=r.isContextLost(),a=Se(r,n);if(!a)return null;var s=ve(),l=ds(),u=a.extensions,c=ms(r,u),d=ge(),h=r.drawingBufferWidth,f=r.drawingBufferHeight,p={tick:0,time:0,viewportWidth:h,viewportHeight:f,framebufferWidth:h,framebufferHeight:f,drawingBufferWidth:h,drawingBufferHeight:f,pixelRatio:n.pixelRatio},m={},g={elements:null,primitive:4,count:-1,offset:0,instances:-1},v=xt(r,u),y=Ut(r,l,n,_),b=zi(r,u,v,l,y);function _(e){return b.destroyBuffer(e)}var w=an(r,u,y,l),x=Vi(r,s,l,n),M=Kr(r,u,v,(function(){k.procs.poll()}),p,l,n),E=ui(r,u,v,l,n),S=Yi(r,u,v,M,E,l),k=cs(r,s,u,v,y,w,M,S,m,b,x,g,p,c,n),T=Zi(r,S,k.procs.poll,p,i,u,v),L=k.next,C=r.canvas,D=[],A=[],P=[],O=[n.onDestroy],I=null;function R(){if(0===D.length)return c&&c.update(),void(I=null);I=me.next(R),X();for(var e=D.length-1;e>=0;--e){var t=D[e];t&&t(p,null,0)}r.flush(),c&&c.update()}function N(){!I&&D.length>0&&(I=me.next(R))}function Y(){I&&(me.cancel(R),I=null)}function j(e){e.preventDefault(),o=!0,Y(),A.forEach((function(e){e()}))}function F(e){r.getError(),o=!1,a.restore(),x.restore(),y.restore(),M.restore(),E.restore(),S.restore(),b.restore(),c&&c.restore(),k.procs.refresh(),N(),P.forEach((function(e){e()}))}function B(){D.length=0,Y(),C&&(C.removeEventListener(_s,j),C.removeEventListener(ws,F)),x.clear(),S.clear(),E.clear(),M.clear(),w.clear(),y.clear(),b.clear(),c&&c.clear(),O.forEach((function(e){e()}))}function z(e){function n(e){var n=t({},e);function r(e){if(e in n){var t=n[e];delete n[e],Object.keys(t).forEach((function(r){n[e+"."+r]=t[r]}))}}return delete n.uniforms,delete n.attributes,delete n.context,delete n.vao,"stencil"in n&&n.stencil.op&&(n.stencil.opBack=n.stencil.opFront=n.stencil.op,delete n.stencil.op),r("blend"),r("depth"),r("cull"),r("stencil"),r("polygonOffset"),r("scissor"),r("sample"),"vao"in e&&(n.vao=e.vao),n}function r(e,t){var n={},r={};return Object.keys(e).forEach((function(i){var o=e[i];if(pe.isDynamic(o))r[i]=pe.unbox(o,i);else{if(t&&Array.isArray(o))for(var a=0;a<o.length;++a)if(pe.isDynamic(o[a]))return void(r[i]=pe.unbox(o,i));n[i]=o}})),{dynamic:r,static:n}}ne(!!e,"invalid args to regl({...})"),ne.type(e,"object","invalid args to regl({...})");var i=r(e.context||{},!0),a=r(e.uniforms||{},!0),s=r(e.attributes||{},!1),l=r(n(e),!1),u={gpuTime:0,cpuTime:0,count:0},c=k.compile(l,s,a,i,u),d=c.draw,h=c.batch,f=c.scope,p=[];function m(e){for(;p.length<e;)p.push(null);return p}function g(e,t){var n;if(o&&ne.raise("context lost"),"function"==typeof e)return f.call(this,null,e,0);if("function"==typeof t)if("number"==typeof e)for(n=0;n<e;++n)f.call(this,null,t,n);else{if(!Array.isArray(e))return f.call(this,e,t,0);for(n=0;n<e.length;++n)f.call(this,e[n],t,n)}else if("number"==typeof e){if(e>0)return h.call(this,m(0|e),0|e)}else{if(!Array.isArray(e))return d.call(this,e);if(e.length)return h.call(this,e,e.length)}}return t(g,{stats:u,destroy:function(){c.destroy()}})}C&&(C.addEventListener(_s,j,!1),C.addEventListener(ws,F,!1));var H=S.setFBO=z({framebuffer:pe.define.call(null,xs,"framebuffer")});function G(e,t){var n=0;k.procs.poll();var i=t.color;i&&(r.clearColor(+i[0]||0,+i[1]||0,+i[2]||0,+i[3]||0),n|=gs),"depth"in t&&(r.clearDepth(+t.depth),n|=vs),"stencil"in t&&(r.clearStencil(0|t.stencil),n|=ys),ne(!!n,"called regl.clear with no buffer specified"),r.clear(n)}function W(e){if(ne("object"==typeof e&&e,"regl.clear() takes an object as input"),"framebuffer"in e)if(e.framebuffer&&"framebufferCube"===e.framebuffer_reglType)for(var n=0;n<6;++n)H(t({framebuffer:e.framebuffer.faces[n]},e),G);else H(e,G);else G(null,e)}function U(e){function t(){var t=Ss(D,e);function n(){var e=Ss(D,n);D[e]=D[D.length-1],D.length-=1,D.length<=0&&Y()}ne(t>=0,"cannot cancel a frame twice"),D[t]=n}return ne.type(e,"function","regl.frame() callback must be a function"),D.push(e),N(),{cancel:t}}function V(){var e=L.viewport,t=L.scissor_box;e[0]=e[1]=t[0]=t[1]=0,p.viewportWidth=p.framebufferWidth=p.drawingBufferWidth=e[2]=t[2]=r.drawingBufferWidth,p.viewportHeight=p.framebufferHeight=p.drawingBufferHeight=e[3]=t[3]=r.drawingBufferHeight}function X(){p.tick+=1,p.time=K(),V(),k.procs.poll()}function q(){M.refresh(),V(),k.procs.refresh(),c&&c.update()}function K(){return(ge()-d)/1e3}function J(e,t){var n;switch(ne.type(t,"function","listener callback must be a function"),e){case"frame":return U(t);case"lost":n=A;break;case"restore":n=P;break;case"destroy":n=O;break;default:ne.raise("invalid event, must be one of frame,lost,restore,destroy")}return n.push(t),{cancel:function(){for(var e=0;e<n.length;++e)if(n[e]===t)return n[e]=n[n.length-1],void n.pop()}}}q();var Z=t(z,{clear:W,prop:pe.define.bind(null,xs),context:pe.define.bind(null,Ms),this:pe.define.bind(null,Es),draw:z({}),buffer:function(e){return y.create(e,bs,!1,!1)},elements:function(e){return w.create(e,!1)},texture:M.create2D,cube:M.createCube,renderbuffer:E.create,framebuffer:S.create,framebufferCube:S.createCube,vao:b.createVAO,attributes:i,frame:U,on:J,limits:v,hasExtension:function(e){return v.extensions.indexOf(e.toLowerCase())>=0},read:T,destroy:B,_gl:r,_refresh:q,poll:function(){X(),c&&c.update()},now:K,stats:l});return n.onDone(null,Z),Z}return ks}()},86851:(e,t,n)=>{"use strict";var r=n(89594),i=Array.prototype.concat,o=Array.prototype.slice,a=e.exports=function(e){for(var t=[],n=0,a=e.length;n<a;n++){var s=e[n];r(s)?t=i.call(t,o.call(s)):t.push(s)}return t};a.wrap=function(e){return function(){return e(a(arguments))}}},89594:e=>{e.exports=function(e){return!(!e||"string"==typeof e)&&(e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&"String"!==e.constructor.name))}},17621:(e,t,n)=>{var r;!function(i){var o=/^\s+/,a=/\s+$/,s=0,l=i.round,u=i.min,c=i.max,d=i.random;function h(e,t){if(t=t||{},(e=e||"")instanceof h)return e;if(!(this instanceof h))return new h(e,t);var n=function(e){var t={r:0,g:0,b:0},n=1,r=null,s=null,l=null,d=!1,h=!1;"string"==typeof e&&(e=function(e){e=e.replace(o,"").replace(a,"").toLowerCase();var t,n=!1;if(D[e])e=D[e],n=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};if(t=G.rgb.exec(e))return{r:t[1],g:t[2],b:t[3]};if(t=G.rgba.exec(e))return{r:t[1],g:t[2],b:t[3],a:t[4]};if(t=G.hsl.exec(e))return{h:t[1],s:t[2],l:t[3]};if(t=G.hsla.exec(e))return{h:t[1],s:t[2],l:t[3],a:t[4]};if(t=G.hsv.exec(e))return{h:t[1],s:t[2],v:t[3]};if(t=G.hsva.exec(e))return{h:t[1],s:t[2],v:t[3],a:t[4]};if(t=G.hex8.exec(e))return{r:R(t[1]),g:R(t[2]),b:R(t[3]),a:F(t[4]),format:n?"name":"hex8"};if(t=G.hex6.exec(e))return{r:R(t[1]),g:R(t[2]),b:R(t[3]),format:n?"name":"hex"};if(t=G.hex4.exec(e))return{r:R(t[1]+""+t[1]),g:R(t[2]+""+t[2]),b:R(t[3]+""+t[3]),a:F(t[4]+""+t[4]),format:n?"name":"hex8"};if(t=G.hex3.exec(e))return{r:R(t[1]+""+t[1]),g:R(t[2]+""+t[2]),b:R(t[3]+""+t[3]),format:n?"name":"hex"};return!1}(e));"object"==typeof e&&(W(e.r)&&W(e.g)&&W(e.b)?(f=e.r,p=e.g,m=e.b,t={r:255*O(f,255),g:255*O(p,255),b:255*O(m,255)},d=!0,h="%"===String(e.r).substr(-1)?"prgb":"rgb"):W(e.h)&&W(e.s)&&W(e.v)?(r=Y(e.s),s=Y(e.v),t=function(e,t,n){e=6*O(e,360),t=O(t,100),n=O(n,100);var r=i.floor(e),o=e-r,a=n*(1-t),s=n*(1-o*t),l=n*(1-(1-o)*t),u=r%6;return{r:255*[n,s,a,a,l,n][u],g:255*[l,n,n,s,a,a][u],b:255*[a,a,l,n,n,s][u]}}(e.h,r,s),d=!0,h="hsv"):W(e.h)&&W(e.s)&&W(e.l)&&(r=Y(e.s),l=Y(e.l),t=function(e,t,n){var r,i,o;function a(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(e=O(e,360),t=O(t,100),n=O(n,100),0===t)r=i=o=n;else{var s=n<.5?n*(1+t):n+t-n*t,l=2*n-s;r=a(l,s,e+1/3),i=a(l,s,e),o=a(l,s,e-1/3)}return{r:255*r,g:255*i,b:255*o}}(e.h,r,l),d=!0,h="hsl"),e.hasOwnProperty("a")&&(n=e.a));var f,p,m;return n=P(n),{ok:d,format:e.format||h,r:u(255,c(t.r,0)),g:u(255,c(t.g,0)),b:u(255,c(t.b,0)),a:n}}(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=l(100*this._a)/100,this._format=t.format||n.format,this._gradientType=t.gradientType,this._r<1&&(this._r=l(this._r)),this._g<1&&(this._g=l(this._g)),this._b<1&&(this._b=l(this._b)),this._ok=n.ok,this._tc_id=s++}function f(e,t,n){e=O(e,255),t=O(t,255),n=O(n,255);var r,i,o=c(e,t,n),a=u(e,t,n),s=(o+a)/2;if(o==a)r=i=0;else{var l=o-a;switch(i=s>.5?l/(2-o-a):l/(o+a),o){case e:r=(t-n)/l+(t<n?6:0);break;case t:r=(n-e)/l+2;break;case n:r=(e-t)/l+4}r/=6}return{h:r,s:i,l:s}}function p(e,t,n){e=O(e,255),t=O(t,255),n=O(n,255);var r,i,o=c(e,t,n),a=u(e,t,n),s=o,l=o-a;if(i=0===o?0:l/o,o==a)r=0;else{switch(o){case e:r=(t-n)/l+(t<n?6:0);break;case t:r=(n-e)/l+2;break;case n:r=(e-t)/l+4}r/=6}return{h:r,s:i,v:s}}function m(e,t,n,r){var i=[N(l(e).toString(16)),N(l(t).toString(16)),N(l(n).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function g(e,t,n,r){return[N(j(r)),N(l(e).toString(16)),N(l(t).toString(16)),N(l(n).toString(16))].join("")}function v(e,t){t=0===t?0:t||10;var n=h(e).toHsl();return n.s-=t/100,n.s=I(n.s),h(n)}function y(e,t){t=0===t?0:t||10;var n=h(e).toHsl();return n.s+=t/100,n.s=I(n.s),h(n)}function b(e){return h(e).desaturate(100)}function _(e,t){t=0===t?0:t||10;var n=h(e).toHsl();return n.l+=t/100,n.l=I(n.l),h(n)}function w(e,t){t=0===t?0:t||10;var n=h(e).toRgb();return n.r=c(0,u(255,n.r-l(-t/100*255))),n.g=c(0,u(255,n.g-l(-t/100*255))),n.b=c(0,u(255,n.b-l(-t/100*255))),h(n)}function x(e,t){t=0===t?0:t||10;var n=h(e).toHsl();return n.l-=t/100,n.l=I(n.l),h(n)}function M(e,t){var n=h(e).toHsl(),r=(n.h+t)%360;return n.h=r<0?360+r:r,h(n)}function E(e){var t=h(e).toHsl();return t.h=(t.h+180)%360,h(t)}function S(e){var t=h(e).toHsl(),n=t.h;return[h(e),h({h:(n+120)%360,s:t.s,l:t.l}),h({h:(n+240)%360,s:t.s,l:t.l})]}function k(e){var t=h(e).toHsl(),n=t.h;return[h(e),h({h:(n+90)%360,s:t.s,l:t.l}),h({h:(n+180)%360,s:t.s,l:t.l}),h({h:(n+270)%360,s:t.s,l:t.l})]}function T(e){var t=h(e).toHsl(),n=t.h;return[h(e),h({h:(n+72)%360,s:t.s,l:t.l}),h({h:(n+216)%360,s:t.s,l:t.l})]}function L(e,t,n){t=t||6,n=n||30;var r=h(e).toHsl(),i=360/n,o=[h(e)];for(r.h=(r.h-(i*t>>1)+720)%360;--t;)r.h=(r.h+i)%360,o.push(h(r));return o}function C(e,t){t=t||6;for(var n=h(e).toHsv(),r=n.h,i=n.s,o=n.v,a=[],s=1/t;t--;)a.push(h({h:r,s:i,v:o})),o=(o+s)%1;return a}h.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,n,r=this.toRgb();return e=r.r/255,t=r.g/255,n=r.b/255,.2126*(e<=.03928?e/12.92:i.pow((e+.055)/1.055,2.4))+.7152*(t<=.03928?t/12.92:i.pow((t+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:i.pow((n+.055)/1.055,2.4))},setAlpha:function(e){return this._a=P(e),this._roundA=l(100*this._a)/100,this},toHsv:function(){var e=p(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=p(this._r,this._g,this._b),t=l(360*e.h),n=l(100*e.s),r=l(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+r+"%)":"hsva("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var e=f(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=f(this._r,this._g,this._b),t=l(360*e.h),n=l(100*e.s),r=l(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+r+"%)":"hsla("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return m(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,n,r,i){var o=[N(l(e).toString(16)),N(l(t).toString(16)),N(l(n).toString(16)),N(j(r))];if(i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1))return o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0);return o.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:l(this._r),g:l(this._g),b:l(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+l(this._r)+", "+l(this._g)+", "+l(this._b)+")":"rgba("+l(this._r)+", "+l(this._g)+", "+l(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:l(100*O(this._r,255))+"%",g:l(100*O(this._g,255))+"%",b:l(100*O(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+l(100*O(this._r,255))+"%, "+l(100*O(this._g,255))+"%, "+l(100*O(this._b,255))+"%)":"rgba("+l(100*O(this._r,255))+"%, "+l(100*O(this._g,255))+"%, "+l(100*O(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(A[m(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+g(this._r,this._g,this._b,this._a),n=t,r=this._gradientType?"GradientType = 1, ":"";if(e){var i=h(e);n="#"+g(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,r=this._a<1&&this._a>=0;return t||!r||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return h(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(_,arguments)},brighten:function(){return this._applyModification(w,arguments)},darken:function(){return this._applyModification(x,arguments)},desaturate:function(){return this._applyModification(v,arguments)},saturate:function(){return this._applyModification(y,arguments)},greyscale:function(){return this._applyModification(b,arguments)},spin:function(){return this._applyModification(M,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(L,arguments)},complement:function(){return this._applyCombination(E,arguments)},monochromatic:function(){return this._applyCombination(C,arguments)},splitcomplement:function(){return this._applyCombination(T,arguments)},triad:function(){return this._applyCombination(S,arguments)},tetrad:function(){return this._applyCombination(k,arguments)}},h.fromRatio=function(e,t){if("object"==typeof e){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]="a"===r?e[r]:Y(e[r]));e=n}return h(e,t)},h.equals=function(e,t){return!(!e||!t)&&h(e).toRgbString()==h(t).toRgbString()},h.random=function(){return h.fromRatio({r:d(),g:d(),b:d()})},h.mix=function(e,t,n){n=0===n?0:n||50;var r=h(e).toRgb(),i=h(t).toRgb(),o=n/100;return h({r:(i.r-r.r)*o+r.r,g:(i.g-r.g)*o+r.g,b:(i.b-r.b)*o+r.b,a:(i.a-r.a)*o+r.a})},h.readability=function(e,t){var n=h(e),r=h(t);return(i.max(n.getLuminance(),r.getLuminance())+.05)/(i.min(n.getLuminance(),r.getLuminance())+.05)},h.isReadable=function(e,t,n){var r,i,o=h.readability(e,t);switch(i=!1,(r=function(e){var t,n;t=((e=e||{level:"AA",size:"small"}).level||"AA").toUpperCase(),n=(e.size||"small").toLowerCase(),"AA"!==t&&"AAA"!==t&&(t="AA");"small"!==n&&"large"!==n&&(n="small");return{level:t,size:n}}(n)).level+r.size){case"AAsmall":case"AAAlarge":i=o>=4.5;break;case"AAlarge":i=o>=3;break;case"AAAsmall":i=o>=7}return i},h.mostReadable=function(e,t,n){var r,i,o,a,s=null,l=0;i=(n=n||{}).includeFallbackColors,o=n.level,a=n.size;for(var u=0;u<t.length;u++)(r=h.readability(e,t[u]))>l&&(l=r,s=h(t[u]));return h.isReadable(e,s,{level:o,size:a})||!i?s:(n.includeFallbackColors=!1,h.mostReadable(e,["#fff","#000"],n))};var D=h.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},A=h.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}(D);function P(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function O(e,t){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var n=function(e){return"string"==typeof e&&-1!=e.indexOf("%")}(e);return e=u(t,c(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),i.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function I(e){return u(1,c(0,e))}function R(e){return parseInt(e,16)}function N(e){return 1==e.length?"0"+e:""+e}function Y(e){return e<=1&&(e=100*e+"%"),e}function j(e){return i.round(255*parseFloat(e)).toString(16)}function F(e){return R(e)/255}var B,z,H,G=(z="[\\s|\\(]+("+(B="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+B+")[,|\\s]+("+B+")\\s*\\)?",H="[\\s|\\(]+("+B+")[,|\\s]+("+B+")[,|\\s]+("+B+")[,|\\s]+("+B+")\\s*\\)?",{CSS_UNIT:new RegExp(B),rgb:new RegExp("rgb"+z),rgba:new RegExp("rgba"+H),hsl:new RegExp("hsl"+z),hsla:new RegExp("hsla"+H),hsv:new RegExp("hsv"+z),hsva:new RegExp("hsva"+H),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function W(e){return!!G.CSS_UNIT.exec(e)}e.exports?e.exports=h:void 0===(r=function(){return h}.call(t,n,t,e))||(e.exports=r)}(Math)},70655:(e,t,n)=>{"use strict";n.r(t),n.d(t,{__extends:()=>i,__assign:()=>o,__rest:()=>a,__decorate:()=>s,__param:()=>l,__metadata:()=>u,__awaiter:()=>c,__generator:()=>d,__createBinding:()=>h,__exportStar:()=>f,__values:()=>p,__read:()=>m,__spread:()=>g,__spreadArrays:()=>v,__spreadArray:()=>y,__await:()=>b,__asyncGenerator:()=>_,__asyncDelegator:()=>w,__asyncValues:()=>x,__makeTemplateObject:()=>M,__importStar:()=>S,__importDefault:()=>k,__classPrivateFieldGet:()=>T,__classPrivateFieldSet:()=>L});var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)};function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},o.apply(this,arguments)};function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function s(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function l(e,t){return function(n,r){t(n,r,e)}}function u(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function c(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))}function d(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var h=Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]};function f(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||h(t,e,n)}function p(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function m(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function g(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(m(arguments[t]));return e}function v(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function y(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}function b(e){return this instanceof b?(this.v=e,this):new b(e)}function _(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||s(e,t)}))})}function s(e,t){try{(n=i[e](t)).value instanceof b?Promise.resolve(n.value.v).then(l,u):c(o[0][2],n)}catch(e){c(o[0][3],e)}var n}function l(e){s("next",e)}function u(e){s("throw",e)}function c(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function w(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:b(e[r](t)),done:"return"===r}:i?i(t):t}:i}}function x(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=p(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,i,(t=e[n](t)).done,t.value)}))}}}function M(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var E=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function S(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&h(t,e,n);return E(t,e),t}function k(e){return e&&e.__esModule?e:{default:e}}function T(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}function L(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n}},57458:function(e,t,n){var r;e=n.nmd(e),function(i){var o=t,a=(e&&e.exports,"object"==typeof n.g&&n.g);a.global!==a&&a.window;var s,l,u,c=String.fromCharCode;function d(e){for(var t,n,r=[],i=0,o=e.length;i<o;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<o?56320==(64512&(n=e.charCodeAt(i++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--):r.push(t);return r}function h(e){if(e>=55296&&e<=57343)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value")}function f(e,t){return c(e>>t&63|128)}function p(e){if(0==(4294967168&e))return c(e);var t="";return 0==(4294965248&e)?t=c(e>>6&31|192):0==(4294901760&e)?(h(e),t=c(e>>12&15|224),t+=f(e,6)):0==(4292870144&e)&&(t=c(e>>18&7|240),t+=f(e,12),t+=f(e,6)),t+=c(63&e|128)}function m(){if(u>=l)throw Error("Invalid byte index");var e=255&s[u];if(u++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function g(){var e,t;if(u>l)throw Error("Invalid byte index");if(u==l)return!1;if(e=255&s[u],u++,0==(128&e))return e;if(192==(224&e)){if((t=(31&e)<<6|m())>=128)return t;throw Error("Invalid continuation byte")}if(224==(240&e)){if((t=(15&e)<<12|m()<<6|m())>=2048)return h(t),t;throw Error("Invalid continuation byte")}if(240==(248&e)&&(t=(7&e)<<18|m()<<12|m()<<6|m())>=65536&&t<=1114111)return t;throw Error("Invalid UTF-8 detected")}var v={version:"2.1.2",encode:function(e){for(var t=d(e),n=t.length,r=-1,i="";++r<n;)i+=p(t[r]);return i},decode:function(e){s=d(e),l=s.length,u=0;for(var t,n=[];!1!==(t=g());)n.push(t);return function(e){for(var t,n=e.length,r=-1,i="";++r<n;)(t=e[r])>65535&&(i+=c((t-=65536)>>>10&1023|55296),t=56320|1023&t),i+=c(t);return i}(n)}};void 0===(r=function(){return v}.call(t,n,t,e))||(e.exports=r)}()},88593:e=>{"use strict";e.exports=JSON.parse('{"_from":"axios@^0.21.1","_id":"axios@0.21.4","_inBundle":false,"_integrity":"sha512-ut5vewkiu8jjGBdqpM44XxjuCjq9LAKeHVmoVfHVzy8eHgxxq8SbAVQNovDA8mVi05kP0Ea/n/UzcSHcTJQfNg==","_location":"/axios","_phantomChildren":{},"_requested":{"type":"range","registry":true,"raw":"axios@^0.21.1","name":"axios","escapedName":"axios","rawSpec":"^0.21.1","saveSpec":null,"fetchSpec":"^0.21.1"},"_requiredBy":["/github-api"],"_resolved":"https://registry.npmjs.org/axios/-/axios-0.21.4.tgz","_shasum":"c67b90dc0568e5c1cf2b0b858c43ba28e2eda575","_spec":"axios@^0.21.1","_where":"/home/suziwen/suziwengit/story/dillinger/Koi/node_modules/github-api","author":{"name":"Matt Zabriskie"},"browser":{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},"bugs":{"url":"https://github.com/axios/axios/issues"},"bundleDependencies":false,"bundlesize":[{"path":"./dist/axios.min.js","threshold":"5kB"}],"dependencies":{"follow-redirects":"^1.14.0"},"deprecated":false,"description":"Promise based HTTP client for the browser and node.js","devDependencies":{"coveralls":"^3.0.0","es6-promise":"^4.2.4","grunt":"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1","karma":"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2","minimist":"^1.2.0","mocha":"^8.2.1","sinon":"^4.5.0","terser-webpack-plugin":"^4.2.3","typescript":"^4.0.5","url-search-params":"^0.10.0","webpack":"^4.44.2","webpack-dev-server":"^3.11.0"},"homepage":"https://axios-http.com","jsdelivr":"dist/axios.min.js","keywords":["xhr","http","ajax","promise","node"],"license":"MIT","main":"index.js","name":"axios","repository":{"type":"git","url":"git+https://github.com/axios/axios.git"},"scripts":{"build":"NODE_ENV=production grunt build","coveralls":"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js","examples":"node ./examples/server.js","fix":"eslint --fix lib/**/*.js","postversion":"git push && git push --tags","preversion":"npm test","start":"node ./sandbox/server.js","test":"grunt test","version":"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json"},"typings":"./index.d.ts","unpkg":"dist/axios.min.js","version":"0.21.4"}')}},r={};function o(e){var t=r[e];if(void 0!==t)return t.exports;var i=r[e]={id:e,loaded:!1,exports:{}};return n[e].call(i.exports,i,i.exports,o),i.loaded=!0,i.exports}o.m=n,o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.f={},o.e=e=>Promise.all(Object.keys(o.f).reduce(((t,n)=>(o.f[n](e,t),t)),[])),o.u=e=>"js/"+e+".js",o.miniCssF=e=>{},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},t="G6Decision.[name]:",o.l=(n,r,i,a)=>{if(e[n])e[n].push(r);else{var s,l;if(void 0!==i)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var d=u[c];if(d.getAttribute("src")==n||d.getAttribute("data-webpack")==t+i){s=d;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,o.nc&&s.setAttribute("nonce",o.nc),s.setAttribute("data-webpack",t+i),s.src=n),e[n]=[r];var h=(t,r)=>{s.onerror=s.onload=null,clearTimeout(f);var i=e[n];if(delete e[n],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((e=>e(r))),t)return t(r)},f=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),l&&document.head.appendChild(s)}},o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e;o.g.importScripts&&(e=o.g.location+"");var t=o.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");n.length&&(e=n[n.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=e+"../"})(),(()=>{var e={143:0};o.f.j=(t,n)=>{var r=o.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var i=new Promise(((n,i)=>r=e[t]=[n,i]));n.push(r[2]=i);var a=o.p+o.u(t),s=new Error;o.l(a,(n=>{if(o.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var i=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.src;s.message="Loading chunk "+t+" failed.\n("+i+": "+a+")",s.name="ChunkLoadError",s.type=i,s.request=a,r[1](s)}}),"chunk-"+t,t)}};var t=(t,n)=>{var r,i,[a,s,l]=n,u=0;if(a.some((t=>0!==e[t]))){for(r in s)o.o(s,r)&&(o.m[r]=s[r]);if(l)l(o)}for(t&&t(n);u<a.length;u++)i=a[u],o.o(e,i)&&e[i]&&e[i][0](),e[a[u]]=0},n=self.webpackChunkG6Decision_name_=self.webpackChunkG6Decision_name_||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var a={};(()=>{"use strict";o.r(a),o.d(a,{default:()=>TO});var e={};o.r(e),o.d(e,{add:()=>$,adjoint:()=>Y,clone:()=>D,copy:()=>A,create:()=>L,determinant:()=>j,equals:()=>re,exactEquals:()=>ne,frob:()=>Z,fromMat2d:()=>V,fromMat4:()=>C,fromQuat:()=>X,fromRotation:()=>W,fromScaling:()=>U,fromTranslation:()=>G,fromValues:()=>P,identity:()=>I,invert:()=>N,mul:()=>ie,multiply:()=>F,multiplyScalar:()=>ee,multiplyScalarAndAdd:()=>te,normalFromMat4:()=>q,projection:()=>K,rotate:()=>z,scale:()=>H,set:()=>O,str:()=>J,sub:()=>oe,subtract:()=>Q,translate:()=>B,transpose:()=>R});var t={};o.r(t),o.d(t,{GADDI:()=>gt,Stack:()=>yt,breadthFirstSearch:()=>we,connectedComponent:()=>Me,default:()=>_t,depthFirstSearch:()=>Ce,detectAllCycles:()=>Pe,detectAllDirectedCycle:()=>Ae,detectAllUndirectedCycle:()=>De,detectCycle:()=>Oe,detectDirectedCycle:()=>bt,dijkstra:()=>Ie,findAllPath:()=>Ye,findShortestPath:()=>Ne,floydWarshall:()=>je,getAdjMatrix:()=>de,getDegree:()=>Se,getInDegree:()=>ke,getNeighbors:()=>ye,getOutDegree:()=>Te,labelPropagation:()=>Fe,louvain:()=>ze,minimumSpanningTree:()=>Ke,pageRank:()=>Je});var n={};o.r(n),o.d(n,{Line:()=>_n,applyMatrix:()=>rn,compare:()=>Zt,distance:()=>sn,floydWarshall:()=>un,fractionToLine:()=>En,getAdjMatrix:()=>cn,getBBoxBoundLine:()=>wn,getCircleCenterByPoints:()=>an,getCircleIntersectByPoint:()=>tn,getDegree:()=>mn,getEllipseIntersectByPoint:()=>nn,getLineIntersect:()=>Qt,getPointsCenter:()=>Sn,getRectIntersectByPoint:()=>en,intersectBBox:()=>yn,invertMatrix:()=>on,isPointInPolygon:()=>vn,isPointsOverlap:()=>Ln,isPolygonsIntersect:()=>bn,itemIntersectByLine:()=>Mn,move:()=>hn,pointLineDistance:()=>Dn,pointLineSquareDist:()=>Tn,pointRectSquareDist:()=>Cn,rotate:()=>pn,scale:()=>fn,scaleMatrix:()=>ln,squareDist:()=>kn,translate:()=>dn});var r={};o.r(r),o.d(r,{cloneBesidesImg:()=>ar,getBBox:()=>Xn,getComboBBox:()=>ir,getLabelPosition:()=>Kn,getLetterWidth:()=>er,getLoopCfgs:()=>qn,getTextSize:()=>tr,plainCombosToTrees:()=>nr,reconstructTree:()=>rr,shouldRefreshEdge:()=>or,traverseTree:()=>$n,traverseTreeUp:()=>Qn});var s={};o.r(s),o.d(s,{catmullRomToBezier:()=>pr,fillPath:()=>Nr,fillPathByDiff:()=>Fr,formatPath:()=>Hr,intersection:()=>Or,parsePathArray:()=>xr,parsePathString:()=>fr,pathToAbsolute:()=>gr,pathToCurve:()=>_r,rectPath:()=>Lr});var l={};o.r(l),o.d(l,{easeBack:()=>xo,easeBackIn:()=>_o,easeBackInOut:()=>xo,easeBackOut:()=>wo,easeBounce:()=>vo,easeBounceIn:()=>go,easeBounceInOut:()=>yo,easeBounceOut:()=>vo,easeCircle:()=>fo,easeCircleIn:()=>co,easeCircleInOut:()=>fo,easeCircleOut:()=>ho,easeCubic:()=>Zi,easeCubicIn:()=>Ki,easeCubicInOut:()=>Zi,easeCubicOut:()=>Ji,easeElastic:()=>So,easeElasticIn:()=>Eo,easeElasticInOut:()=>ko,easeElasticOut:()=>So,easeExp:()=>uo,easeExpIn:()=>so,easeExpInOut:()=>uo,easeExpOut:()=>lo,easeLinear:()=>Ui,easePoly:()=>eo,easePolyIn:()=>$i,easePolyInOut:()=>eo,easePolyOut:()=>Qi,easeQuad:()=>qi,easeQuadIn:()=>Vi,easeQuadInOut:()=>qi,easeQuadOut:()=>Xi,easeSin:()=>oo,easeSinIn:()=>ro,easeSinInOut:()=>oo,easeSinOut:()=>io});var u={};o.r(u),o.d(u,{calculationItemsBBox:()=>Us,cloneEvent:()=>Hs,formatPadding:()=>zs,isNaN:()=>Ws,isViewportChanged:()=>Gs,processParallelEdges:()=>Vs,uniqueId:()=>Bs});var c={};o.r(c),o.d(c,{getClosedSpline:()=>zl,getControlPoint:()=>jl,getSpline:()=>Yl,paddedHull:()=>Vl,pathToPoints:()=>Bl,pointsToPolygon:()=>Fl,roundedHull:()=>Ul});var d={};o.r(d),o.d(d,{defaultSubjectColors:()=>Su});var h={};o.r(h),o.d(h,{Base:()=>xc,Circle:()=>Ec,Ellipse:()=>Tc,Image:()=>Dc,Line:()=>Oc,Marker:()=>Nc,Path:()=>Jc,Polygon:()=>Qc,Polyline:()=>td,Rect:()=>rd,Text:()=>od});var f={};o.r(f),o.d(f,{Base:()=>Md,Circle:()=>Sd,Dom:()=>Td,Ellipse:()=>Cd,Image:()=>Ad,Line:()=>Od,Marker:()=>Yd,Path:()=>Fd,Polygon:()=>zd,Polyline:()=>Gd,Rect:()=>Ud,Text:()=>Jd});var p={};o.r(p),o.d(p,{getColorSetsBySubjectColors:()=>Rh,getColorsWithSubjectColor:()=>Ih,mixColor:()=>Oh});var m={};o.r(m),o.d(m,{arrayToTextureData:()=>_E,attributesToTextureData:()=>bE,buildTextureData:()=>gE,buildTextureDataWithOneEdgeAttr:()=>vE,buildTextureDataWithTwoEdgeAttr:()=>yE,proccessToFunc:()=>mE,radialLayout:()=>wE});var g={};o.r(g),o.d(g,{gpuDetector:()=>xE});var v={};o.r(v),o.d(v,{assign:()=>ZS,default:()=>vk,defaultI18n:()=>tk,format:()=>mk,parse:()=>gk,setGlobalDateI18n:()=>rk,setGlobalDateMasks:()=>pk});var y=o(70655),b=o(49242);const _={getDefaultCfg:function(){return{}},getEvents:function(){return{}},updateCfg:function(e){return Object.assign(this,e),!0},shouldBegin:function(){return!0},shouldUpdate:function(){return!0},shouldEnd:function(){return!0},bind:function(e){var t=this,n=this.events;this.graph=e,"drag-canvas"!==this.type&&"brush-select"!==this.type&&"lasso-select"!==this.type||e.get("canvas").set("draggable",!0),(0,b.each)(n,(function(t,n){e.on(n,t)})),document.addEventListener("visibilitychange",(function(){t.keydown=!1}))},unbind:function(e){var t=this.events,n=e.get("canvas").get("draggable");"drag-canvas"!==this.type&&"brush-select"!==this.type&&"lasso-select"!==this.type||e.get("canvas").set("draggable",!1),(0,b.each)(t,(function(t,n){e.off(n,t)})),e.get("canvas").set("draggable",n)},get:function(e){return this[e]},set:function(e,t){return this[e]=t,this}};var w=function(){function e(){}return e.registerBehavior=function(t,n){if(!n)throw new Error("please specify handler for this behavior: "+t);var r=(0,b.clone)(_);Object.assign(r,n);var i=function(e){var t=this;Object.assign(this,this.getDefaultCfg(),e);var n=this.getEvents();this.events=null;var r={};n&&((0,b.each)(n,(function(e,n){r[n]=(0,b.wrapBehavior)(t,e)})),this.events=r)};i.prototype=r,e.types[t]=i},e.hasBehavior=function(t){return!!e.types[t]},e.getBehavior=function(t){return e.types[t]},e.types={},e}();const x=w,M=x;var E=function(){function e(){this._events={}}return e.prototype.on=function(e,t,n){return this._events[e]||(this._events[e]=[]),this._events[e].push({callback:t,once:!!n}),this},e.prototype.once=function(e,t){return this.on(e,t,!0),this},e.prototype.emit=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this._events[e]||[],o=this._events["*"]||[],a=function(r){for(var i=r.length,o=0;o<i;o++)if(r[o]){var a=r[o],s=a.callback;a.once&&(r.splice(o,1),0===r.length&&delete t._events[e],i--,o--),s.apply(t,n)}};a(i),a(o)},e.prototype.off=function(e,t){if(e)if(t){for(var n=this._events[e]||[],r=n.length,i=0;i<r;i++)n[i].callback===t&&(n.splice(i,1),r--,i--);0===n.length&&delete this._events[e]}else delete this._events[e];else this._events={};return this},e.prototype.getEvents=function(){return this._events},e}();const S=E;var k=1e-6,T="undefined"!=typeof Float32Array?Float32Array:Array;Math.random;Math.PI;function L(){var e=new T(9);return T!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function C(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function D(e){var t=new T(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function A(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function P(e,t,n,r,i,o,a,s,l){var u=new T(9);return u[0]=e,u[1]=t,u[2]=n,u[3]=r,u[4]=i,u[5]=o,u[6]=a,u[7]=s,u[8]=l,u}function O(e,t,n,r,i,o,a,s,l,u){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=o,e[5]=a,e[6]=s,e[7]=l,e[8]=u,e}function I(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function R(e,t){if(e===t){var n=t[1],r=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function N(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8],d=c*a-s*u,h=-c*o+s*l,f=u*o-a*l,p=n*d+r*h+i*f;return p?(p=1/p,e[0]=d*p,e[1]=(-c*r+i*u)*p,e[2]=(s*r-i*a)*p,e[3]=h*p,e[4]=(c*n-i*l)*p,e[5]=(-s*n+i*o)*p,e[6]=f*p,e[7]=(-u*n+r*l)*p,e[8]=(a*n-r*o)*p,e):null}function Y(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8];return e[0]=a*c-s*u,e[1]=i*u-r*c,e[2]=r*s-i*a,e[3]=s*l-o*c,e[4]=n*c-i*l,e[5]=i*o-n*s,e[6]=o*u-a*l,e[7]=r*l-n*u,e[8]=n*a-r*o,e}function j(e){var t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],u=e[8];return t*(u*o-a*l)+n*(-u*i+a*s)+r*(l*i-o*s)}function F(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],d=t[8],h=n[0],f=n[1],p=n[2],m=n[3],g=n[4],v=n[5],y=n[6],b=n[7],_=n[8];return e[0]=h*r+f*a+p*u,e[1]=h*i+f*s+p*c,e[2]=h*o+f*l+p*d,e[3]=m*r+g*a+v*u,e[4]=m*i+g*s+v*c,e[5]=m*o+g*l+v*d,e[6]=y*r+b*a+_*u,e[7]=y*i+b*s+_*c,e[8]=y*o+b*l+_*d,e}function B(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],d=t[8],h=n[0],f=n[1];return e[0]=r,e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=l,e[6]=h*r+f*a+u,e[7]=h*i+f*s+c,e[8]=h*o+f*l+d,e}function z(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],d=t[8],h=Math.sin(n),f=Math.cos(n);return e[0]=f*r+h*a,e[1]=f*i+h*s,e[2]=f*o+h*l,e[3]=f*a-h*r,e[4]=f*s-h*i,e[5]=f*l-h*o,e[6]=u,e[7]=c,e[8]=d,e}function H(e,t,n){var r=n[0],i=n[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function G(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function W(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function U(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function V(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function X(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n+n,s=r+r,l=i+i,u=n*a,c=r*a,d=r*s,h=i*a,f=i*s,p=i*l,m=o*a,g=o*s,v=o*l;return e[0]=1-d-p,e[3]=c-v,e[6]=h+g,e[1]=c+v,e[4]=1-u-p,e[7]=f-m,e[2]=h-g,e[5]=f+m,e[8]=1-u-d,e}function q(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8],d=t[9],h=t[10],f=t[11],p=t[12],m=t[13],g=t[14],v=t[15],y=n*s-r*a,b=n*l-i*a,_=n*u-o*a,w=r*l-i*s,x=r*u-o*s,M=i*u-o*l,E=c*m-d*p,S=c*g-h*p,k=c*v-f*p,T=d*g-h*m,L=d*v-f*m,C=h*v-f*g,D=y*C-b*L+_*T+w*k-x*S+M*E;return D?(D=1/D,e[0]=(s*C-l*L+u*T)*D,e[1]=(l*k-a*C-u*S)*D,e[2]=(a*L-s*k+u*E)*D,e[3]=(i*L-r*C-o*T)*D,e[4]=(n*C-i*k+o*S)*D,e[5]=(r*k-n*L-o*E)*D,e[6]=(m*M-g*x+v*w)*D,e[7]=(g*_-p*M-v*b)*D,e[8]=(p*x-m*_+v*y)*D,e):null}function K(e,t,n){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/n,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function J(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function Z(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])}function $(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e}function Q(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e}function ee(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e}function te(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e}function ne(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function re(e,t){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],d=t[0],h=t[1],f=t[2],p=t[3],m=t[4],g=t[5],v=t[6],y=t[7],b=t[8];return Math.abs(n-d)<=k*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(r-h)<=k*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(i-f)<=k*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(o-p)<=k*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(a-m)<=k*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(s-g)<=k*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(l-v)<=k*Math.max(1,Math.abs(l),Math.abs(v))&&Math.abs(u-y)<=k*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(c-b)<=k*Math.max(1,Math.abs(c),Math.abs(b))}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var ie=F,oe=Q;function ae(e,t,n){var r=[0,0,0,0,0,0,0,0,0];return G(r,n),F(e,r,t)}function se(e,t,n){var r=[0,0,0,0,0,0,0,0,0];return W(r,n),F(e,r,t)}function le(e,t,n){var r=[0,0,0,0,0,0,0,0,0];return U(r,n),F(e,r,t)}function ue(e,t,n){return F(e,n,t)}function ce(e,t){for(var n=e?[].concat(e):[1,0,0,0,1,0,0,0,1],r=0,i=t.length;r<i;r++){var o=t[r];switch(o[0]){case"t":ae(n,n,[o[1],o[2]]);break;case"s":le(n,n,[o[1],o[2]]);break;case"r":se(n,n,o[1]);break;case"m":ue(n,n,o[1])}}return n}const de=function(e,t){var n=e.nodes,r=e.edges,i=[],o={};if(!n)throw new Error("invalid nodes data!");return n&&n.forEach((function(e,t){o[e.id]=t;i.push([])})),r&&r.forEach((function(e){var n=e.source,r=e.target,a=o[n],s=o[r];!a&&0!==a||!s&&0!==s||(i[a][s]=1,t||(i[s][a]=1))})),i};var he=function(e,t){return e===t},fe=function(){function e(e,t){void 0===t&&(t=null),this.value=e,this.next=t}return e.prototype.toString=function(e){return e?e(this.value):""+this.value},e}(),pe=function(){function e(e){void 0===e&&(e=he),this.head=null,this.tail=null,this.compare=e}return e.prototype.prepend=function(e){var t=new fe(e,this.head);return this.head=t,this.tail||(this.tail=t),this},e.prototype.append=function(e){var t=new fe(e);return this.head?(this.tail.next=t,this.tail=t,this):(this.head=t,this.tail=t,this)},e.prototype.delete=function(e){if(!this.head)return null;for(var t=null;this.head&&this.compare(this.head.value,e);)t=this.head,this.head=this.head.next;var n=this.head;if(null!==n)for(;n.next;)this.compare(n.next.value,e)?(t=n.next,n.next=n.next.next):n=n.next;return this.compare(this.tail.value,e)&&(this.tail=n),t},e.prototype.find=function(e){var t=e.value,n=void 0===t?void 0:t,r=e.callback,i=void 0===r?void 0:r;if(!this.head)return null;for(var o=this.head;o;){if(i&&i(o.value))return o;if(void 0!==n&&this.compare(o.value,n))return o;o=o.next}return null},e.prototype.deleteTail=function(){var e=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,e;for(var t=this.head;t.next;)t.next.next?t=t.next:t.next=null;return this.tail=t,e},e.prototype.deleteHead=function(){if(!this.head)return null;var e=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),e},e.prototype.fromArray=function(e){var t=this;return e.forEach((function(e){return t.append(e)})),this},e.prototype.toArray=function(){for(var e=[],t=this.head;t;)e.push(t),t=t.next;return e},e.prototype.reverse=function(){for(var e=this.head,t=null,n=null;e;)n=e.next,e.next=t,t=e,e=n;this.tail=this.head,this.head=t},e.prototype.toString=function(e){return void 0===e&&(e=void 0),this.toArray().map((function(t){return t.toString(e)})).toString()},e}();const me=pe;var ge=function(){function e(){this.linkedList=new me}return e.prototype.isEmpty=function(){return!this.linkedList.head},e.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},e.prototype.enqueue=function(e){this.linkedList.append(e)},e.prototype.dequeue=function(){var e=this.linkedList.deleteHead();return e?e.value:null},e.prototype.toString=function(e){return this.linkedList.toString(e)},e}();const ve=ge;var ye=function(e,t,n){void 0===t&&(t=[]);var r=t.filter((function(t){return t.source===e||t.target===e}));if("target"===n){return r.filter((function(t){return t.source===e})).map((function(e){return e.target}))}if("source"===n){return r.filter((function(t){return t.target===e})).map((function(e){return e.source}))}return r.map((function(t){return t.source===e?t.target:t.source}))},be=function(e,t){return t.filter((function(t){return t.source===e||t.target===e}))},_e=function(e){return void 0===e&&(e=0),e+"-"+(""+Math.random()).split(".")[1].substr(0,5)+(""+Math.random()).split(".")[1].substr(0,5)};const we=function(e,t,n,r){void 0===r&&(r=!0);var i=function(e){void 0===e&&(e={});var t,n=e,r=function(){},i=(t={},function(e){var n=e.next;return!t[n]&&(t[n]=!0,!0)});return n.allowTraversal=e.allowTraversal||i,n.enter=e.enter||r,n.leave=e.leave||r,n}(n),o=new ve,a=e.edges,s=void 0===a?[]:a;o.enqueue(t);for(var l="",u=function(){var e=o.dequeue();i.enter({current:e,previous:l}),ye(e,s,r?"target":void 0).forEach((function(t){i.allowTraversal({previous:l,current:e,next:t})&&o.enqueue(t)})),i.leave({current:e,previous:l}),l=e};!o.isEmpty();)u()};var xe=function(e){for(var t=e.nodes,n=void 0===t?[]:t,r=e.edges,i=void 0===r?[]:r,o=[],a={},s={},l={},u=[],c=0,d=function e(t){s[t.id]=c,l[t.id]=c,c+=1,o.push(t),a[t.id]=!0;for(var r=ye(t.id,i,"target").filter((function(e){return n.map((function(e){return e.id})).indexOf(e)>-1})),d=function(i){var o=r[i];if(s[o]||0===s[o])a[o]&&(l[t.id]=Math.min(l[t.id],s[o]));else{var u=n.filter((function(e){return e.id===o}));u.length>0&&e(u[0]),l[t.id]=Math.min(l[t.id],l[o])}},h=0;h<r.length;h++)d(h);if(l[t.id]===s[t.id]){for(var f=[];o.length>0;){var p=o.pop();if(a[p.id]=!1,f.push(p),p===t)break}f.length>0&&u.push(f)}},h=0,f=n;h<f.length;h++){var p=f[h];s[p.id]||0===s[p.id]||d(p)}return u};function Me(e,t){return t?xe(e):function(e){for(var t=e.nodes,n=void 0===t?[]:t,r=e.edges,i=void 0===r?[]:r,o=[],a={},s=[],l=function e(t){s.push(t),a[t.id]=!0;for(var r=ye(t.id,i),o=function(t){var i=r[t];if(!a[i]){var o=n.filter((function(e){return e.id===i}));o.length>0&&e(o[0])}},l=0;l<r.length;++l)o(l)},u=0;u<n.length;u++){var c=n[u];if(!a[c.id]){l(c);for(var d=[];s.length>0;)d.push(s.pop());o.push(d)}}return o}(e)}var Ee=function(e){var t={},n=e.nodes,r=void 0===n?[]:n,i=e.edges,o=void 0===i?[]:i;return r.forEach((function(e){t[e.id]={degree:0,inDegree:0,outDegree:0}})),o.forEach((function(e){t[e.source].degree++,t[e.source].outDegree++,t[e.target].degree++,t[e.target].inDegree++})),t};const Se=Ee;var ke=function(e,t){return Ee(e)[t]?Ee(e)[t].inDegree:0},Te=function(e,t){return Ee(e)[t]?Ee(e)[t].outDegree:0};function Le(e,t,n,r){r.enter({current:t,previous:n});var i=e.edges;ye(t,void 0===i?[]:i,"target").forEach((function(i){r.allowTraversal({previous:n,current:t,next:i})&&Le(e,i,t,r)})),r.leave({current:t,previous:n})}function Ce(e,t,n){Le(e,t,"",function(e){void 0===e&&(e={});var t,n=e,r=function(){},i=(t={},function(e){var n=e.next;return!t[n]&&(t[n]=!0,!0)});return n.allowTraversal=e.allowTraversal||i,n.enter=e.enter||r,n.leave=e.leave||r,n}(n))}var De=function(e,t,n){var r,i;void 0===n&&(n=!0);for(var o=[],a=0,s=Me(e,!1);a<s.length;a++){var l=s[a];if(l.length)for(var u=l[0],c=u.id,d=[u],h=((r={})[c]=u,r),f=((i={})[c]=new Set,i);d.length>0;)for(var p=d.pop(),m=p.id,g=ye(m,e.edges),v=function(r){var i,a=g[r],s=e.nodes.find((function(e){return e.id===a}));if(a===m)o.push(((i={})[a]=p,i));else if(a in f){if(!f[m].has(s)){for(var l=!0,u=[s,p],c=h[m];f[a].size&&!f[a].has(c)&&(u.push(c),c!==h[c.id]);)c=h[c.id];if(u.push(c),t&&n?(l=!1,u.findIndex((function(e){return t.indexOf(e.id)>-1}))>-1&&(l=!0)):t&&!n&&u.findIndex((function(e){return t.indexOf(e.id)>-1}))>-1&&(l=!1),l){for(var v={},y=1;y<u.length;y+=1)v[u[y-1].id]=u[y];u.length&&(v[u[u.length-1].id]=u[0]),o.push(v)}f[a].add(p)}}else h[a]=p,d.push(s),f[a]=new Set([p])},y=0;y<g.length;y+=1)v(y)}return o},Ae=function(e,t,n){void 0===n&&(n=!0);for(var r=[],i=new Set,o=[],a=[],s={},l={},u=function e(l,u,c){var d=!1;if(t&&!1===n&&t.indexOf(l.id)>-1)return d;r.push(l),i.add(l);for(var h=c[l.id],f=0;f<h.length;f+=1){if((g=s[h[f]])===u){for(var p={},m=1;m<r.length;m+=1)p[r[m-1].id]=r[m];r.length&&(p[r[r.length-1].id]=r[0]),a.push(p),d=!0}else i.has(g)||e(g,u,c)&&(d=!0)}if(d)!function(e){for(var t=[e];t.length>0;){var n=t.pop();i.has(n)&&(i.delete(n),o[n.id].forEach((function(e){t.push(e)})),o[n.id].clear())}}(l);else for(f=0;f<h.length;f+=1){var g=s[h[f]];o[g.id].has(l)||o[g.id].add(l)}return r.pop(),d},c=e.nodes,d=void 0===c?[]:c,h=0;h<d.length;h+=1){var f=d[h],p=f.id;l[p]=h,s[h]=f}if(t&&n){var m=function(e){var n=t[e];l[d[e].id]=l[n],l[n]=0,s[0]=d.find((function(e){return e.id===n})),s[l[d[e].id]]=d[e]};for(h=0;h<t.length;h++)m(h)}for(var g=function(r){for(var i,o,s=1/0,u=0;u<r.length;u+=1)for(var c=r[u],d=0;d<c.length;d++){var h=l[c[d].id];h<s&&(s=h,o=u)}var f=r[o],p=[];for(u=0;u<f.length;u+=1){var m=f[u];p[m.id]=[];for(var g=0,v=ye(m.id,e.edges,"target").filter((function(e){return f.map((function(e){return e.id})).indexOf(e)>-1}));g<v.length;g++){var y=v[g];y!==m.id||!1===n&&t.indexOf(m.id)>-1?p[m.id].push(l[y]):a.push(((i={})[m.id]=m,i))}}return{component:f,adjList:p,minIdx:s}},v=0;v<d.length;){var y=d.filter((function(e){return l[e.id]>=v})),b=xe({nodes:y,edges:e.edges}).filter((function(e){return e.length>1}));if(0===b.length)break;var _=g(b),w=_.minIdx,x=_.adjList,M=_.component;if(!(M.length>1))break;M.forEach((function(e){o[e.id]=new Set}));var E=s[w];if(t&&n&&-1===t.indexOf(E.id))return a;u(E,E,x),v=w+1}return a},Pe=function(e,t,n,r){return void 0===r&&(r=!0),t?Ae(e,n,r):De(e,n,r)};const Oe=function(e){var t=null,n=e.nodes,r={},i={},o={},a={};(void 0===n?[]:n).forEach((function(e){i[e.id]=e}));for(var s={enter:function(e){var n=e.current,a=e.previous;if(o[n]){t={};for(var s=n,l=a;l!==n;)t[s]=l,s=l,l=r[l];t[s]=l}else o[n]=n,delete i[n],r[n]=a},leave:function(e){var t=e.current;a[t]=t,delete o[t]},allowTraversal:function(e){var n=e.next;return!t&&!a[n]}};Object.keys(i).length;){Ce(e,Object.keys(i)[0],s)}return t};const Ie=function(e,t,n,r){var i=e.nodes,o=void 0===i?[]:i,a=e.edges,s=void 0===a?[]:a,l=[],u={},c={},d={};o.forEach((function(e,n){var r=e.id;l.push(r),c[r]=1/0,r===t&&(c[r]=0)}));for(var h=o.length,f=function(e){var t=function(e,t,n){for(var r,i=1/0,o=0;o<t.length;o++){var a=t[o].id;!n[a]&&e[a]<=i&&(i=e[a],r=t[o])}return r}(c,o,u),i=t.id;if(u[i]=!0,c[i]===1/0)return"continue";var a=[];a=n?function(e,t){return t.filter((function(t){return t.source===e}))}(i,s):be(i,s),a.forEach((function(e){var n=e.target,o=e.source,a=n===i?o:n,s=r&&e[r]?e[r]:1;c[a]>c[t.id]+s?(c[a]=c[t.id]+s,d[a]=[t.id]):c[a]===c[t.id]+s&&d[a].push(t.id)}))},p=0;p<h;p++)f();d[t]=[t];var m={};for(var g in c)c[g]!==1/0&&Re(t,g,d,m);var v={};for(var g in m)v[g]=m[g][0];return{length:c,path:v,allPath:m}};function Re(e,t,n,r){if(e===t)return[e];if(r[t])return r[t];for(var i=[],o=0,a=n[t];o<a.length;o++){var s=Re(e,a[o],n,r);if(!s)return;for(var l=0,u=s;l<u.length;l++){var c=u[l];(0,b.isArray)(c)?i.push((0,y.__spreadArray)((0,y.__spreadArray)([],c),[t])):i.push([c,t])}}return r[t]=i,r[t]}var Ne=function(e,t,n,r,i){var o=Ie(e,t,r,i),a=o.length,s=o.path,l=o.allPath;return{length:a[n],path:s[n],allPath:l[n]}},Ye=function(e,t,n,r){var i;if(t===n)return[[t]];var o=e.edges,a=void 0===o?[]:o,s=[t],l=((i={})[t]=!0,i),u=[],c=[],d=r?ye(t,a,"target"):ye(t,a);for(u.push(d);s.length>0&&u.length>0;){var h=u[u.length-1];if(h.length){var f=h.shift();if(f&&(s.push(f),l[f]=!0,d=r?ye(f,a,"target"):ye(f,a),u.push(d.filter((function(e){return!l[e]})))),s[s.length-1]===n){var p=s.map((function(e){return e}));c.push(p);m=s.pop();l[m]=!1,u.pop()}}else{var m=s.pop();l[m]=!1,u.pop()}}return c};const je=function(e,t){for(var n=de(e,t),r=[],i=n.length,o=0;o<i;o+=1){r[o]=[];for(var a=0;a<i;a+=1)o===a?r[o][a]=0:0!==n[o][a]&&n[o][a]?r[o][a]=n[o][a]:r[o][a]=1/0}for(var s=0;s<i;s+=1)for(o=0;o<i;o+=1)for(a=0;a<i;a+=1)r[o][a]>r[o][s]+r[s][a]&&(r[o][a]=r[o][s]+r[s][a]);return r};const Fe=function(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n="weight"),void 0===r&&(r=1e3);var i=e.nodes,o=void 0===i?[]:i,a=e.edges,s=void 0===a?[]:a,l={},u={};o.forEach((function(e,t){var n=_e();e.clusterId=n,l[n]={id:n,nodes:[e]},u[e.id]={node:e,idx:t}}));var c=de(e,t),d=[],h={};c.forEach((function(e,t){var n=0,r=o[t].id;h[r]={},e.forEach((function(e,t){if(e){n+=e;var i=o[t].id;h[r][i]=e}})),d.push(n)}));for(var f=0,p=function(){var e=!1;if(o.forEach((function(t){var n={};Object.keys(h[t.id]).forEach((function(e){var r=h[t.id][e],i=u[e].node.clusterId;n[i]||(n[i]=0),n[i]+=r}));var r=-1/0,i=[];if(Object.keys(n).forEach((function(e){r<n[e]?(r=n[e],i=[e]):r===n[e]&&i.push(e)})),1!==i.length||i[0]!==t.clusterId){var o=i.indexOf(t.clusterId);if(o>=0&&i.splice(o,1),i&&i.length){e=!0;var a=l[t.clusterId],s=a.nodes.indexOf(t);a.nodes.splice(s,1);var c=Math.floor(Math.random()*i.length),d=l[i[c]];d.nodes.push(t),t.clusterId=d.id}}})),!e)return"break";f++};f<r;){if("break"===p())break}Object.keys(l).forEach((function(e){var t=l[e];t.nodes&&t.nodes.length||delete l[e]}));var m=[],g={};s.forEach((function(e){var t=e.source,r=e.target,i=e[n]||1,o=u[t].node.clusterId,a=u[r].node.clusterId,s=o+"---"+a;if(g[s])g[s].weight+=i,g[s].count++;else{var l={source:o,target:a,weight:i,count:1};g[s]=l,m.push(l)}}));var v=[];return Object.keys(l).forEach((function(e){v.push(l[e])})),{clusters:v,clusterEdges:m}};var Be=function(e,t,n,r){for(var i=t.length,o=2*r,a=0,s=0;s<i;s++)for(var l=e[s].clusterId,u=0;u<i;u++){if(l===e[u].clusterId)a+=(t[s][u]||0)-(n[s]||0)*(n[u]||0)/o}return a*=1/o};const ze=function(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n="weight"),void 0===r&&(r=1e-4);var i=e.nodes,o=void 0===i?[]:i,a=e.edges,s=void 0===a?[]:a,l=1,u={},c={};o.forEach((function(e,t){var n=String(l++);e.clusterId=n,u[n]={id:n,nodes:[e]},c[e.id]={node:e,idx:t}}));var d=de(e,t),h=[],f={},p=0;d.forEach((function(e,t){var n=0,r=o[t].id;f[r]={},e.forEach((function(e,t){if(e){n+=e;var i=o[t].id;f[r][i]=e,p+=e}})),h.push(n)})),p/=2;for(var m=1/0,g=1/0,v=0;m=Be(o,d,h,p),!(Math.abs(m-g)<r||v>100);)g=m,v++,Object.keys(u).forEach((function(e){var t=0;s.forEach((function(r){var i=r.source,o=r.target,a=c[i].node.clusterId,s=c[o].node.clusterId;(a===e&&s!==e||s===e&&a!==e)&&(t+=r[n]||1)})),u[e].sumTot=t})),o.forEach((function(e,t){var r,i=u[e.clusterId],o=0,a=h[t]/(2*p),l=0;i.nodes.forEach((function(e){var n=c[e.id].idx;l+=d[t][n]||0}));var m=l-i.sumTot*a,g=f[e.id];if(Object.keys(g).forEach((function(n){var i=c[n].node.clusterId;if(i!==e.clusterId){var s=u[i],l=s.nodes;if(l&&l.length){var h=0;l.forEach((function(e){var n=c[e.id].idx;h+=d[t][n]||0}));var f=h-s.sumTot*a-m;f>o&&(o=f,r=s)}}})),o>0){r.nodes.push(e);var v=e.clusterId;e.clusterId=r.id;var y=i.nodes.indexOf(e);i.nodes.splice(y,1);var b=0,_=0;s.forEach((function(e){var t=e.source,i=e.target,o=c[t].node.clusterId,a=c[i].node.clusterId;(o===r.id&&a!==r.id||a===r.id&&o!==r.id)&&(b+=e[n]||1),(o===v&&a!==v||a===v&&o!==v)&&(_+=e[n]||1)})),r.sumTot=b,i.sumTot=_}}));var y={},b=0;Object.keys(u).forEach((function(e){var t=u[e];if(t.nodes&&t.nodes.length){var n=String(b+1);n!==e&&(t.id=n,t.nodes=t.nodes.map((function(e){return{id:e.id,clusterId:n}})),u[n]=t,y[e]=n,delete u[e],b++)}else delete u[e]})),o.forEach((function(e){e.clusterId&&y[e.clusterId]&&(e.clusterId=y[e.clusterId])}));var _=[],w={};s.forEach((function(e){var t=e.source,r=e.target,i=e[n]||1,o=c[t].node.clusterId,a=c[r].node.clusterId,s=o+"---"+a;if(w[s])w[s].weight+=i,w[s].count++;else{var l={source:o,target:a,weight:i,count:1};w[s]=l,_.push(l)}}));var x=[];return Object.keys(u).forEach((function(e){x.push(u[e])})),{clusters:x,clusterEdges:_}};var He=function(){function e(e){this.count=e.length,this.parent={};for(var t=0,n=e;t<n.length;t++){var r=n[t];this.parent[r]=r}}return e.prototype.find=function(e){for(;this.parent[e]!==e;)e=this.parent[e];return e},e.prototype.union=function(e,t){var n=this.find(e),r=this.find(t);n!==r&&(n<r?(this.parent[t]!==t&&this.union(this.parent[t],e),this.parent[t]=this.parent[e]):(this.parent[e]!==e&&this.union(this.parent[e],t),this.parent[e]=this.parent[t]))},e.prototype.connected=function(e,t){return this.find(e)===this.find(t)},e}();const Ge=He;var We=function(e,t){return e-t},Ue=function(){function e(e){void 0===e&&(e=We),this.compareFn=e,this.list=[]}return e.prototype.getLeft=function(e){return 2*e+1},e.prototype.getRight=function(e){return 2*e+2},e.prototype.getParent=function(e){return 0===e?null:Math.floor((e-1)/2)},e.prototype.isEmpty=function(){return this.list.length<=0},e.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},e.prototype.delMin=function(){var e=this.top(),t=this.list.pop();return this.list.length>0&&(this.list[0]=t,this.moveDown(0)),e},e.prototype.insert=function(e){if(null!==e){this.list.push(e);var t=this.list.length-1;return this.moveUp(t),!0}return!1},e.prototype.moveUp=function(e){for(var t=this.getParent(e);e&&e>0&&this.compareFn(this.list[t],this.list[e])>0;){var n=this.list[t];this.list[t]=this.list[e],this.list[e]=n,e=t,t=this.getParent(e)}},e.prototype.moveDown=function(e){var t,n=e,r=this.getLeft(e),i=this.getRight(e),o=this.list.length;null!==r&&r<o&&this.compareFn(this.list[n],this.list[r])>0?n=r:null!==i&&i<o&&this.compareFn(this.list[n],this.list[i])>0&&(n=i),e!==n&&(t=[this.list[n],this.list[e]],this.list[e]=t[0],this.list[n]=t[1],this.moveDown(n))},e}();const Ve=Ue;var Xe=function(e,t){var n=[],r=e.nodes,i=void 0===r?[]:r,o=e.edges,a=void 0===o?[]:o;if(0===i.length)return n;var s=i[0],l=new Set;l.add(s);var u=new Ve((function(e,n){return t?e.weight-n.weight:0}));for(be(s.id,a).forEach((function(e){u.insert(e)}));!u.isEmpty();){var c=u.delMin(),d=c.source,h=c.target;l.has(d)&&l.has(h)||(n.push(c),l.has(d)||(l.add(d),be(d,a).forEach((function(e){u.insert(e)}))),l.has(h)||(l.add(h),be(h,a).forEach((function(e){u.insert(e)}))))}return n},qe=function(e,t){var n=[],r=e.nodes,i=void 0===r?[]:r,o=e.edges,a=void 0===o?[]:o;if(0===i.length)return n;var s=a.map((function(e){return e}));t&&s.sort((function(e,t){return e.weight-t.weight}));for(var l=new Ge(i.map((function(e){return e.id})));s.length>0;){var u=s.shift(),c=u.source,d=u.target;l.connected(c,d)||(n.push(u),l.union(c,d))}return n};const Ke=function(e,t,n){return n?{prim:Xe,kruskal:qe}[n](e,t):qe(e,t)};const Je=function(e,t,n){"number"!=typeof t&&(t=1e-6),"number"!=typeof n&&(n=.85);for(var r,i=1,o=0,a=1e3,s=e.nodes,l=void 0===s?[]:s,u=e.edges,c=void 0===u?[]:u,d=l.length,h={},f={},p=0;p<d;++p){h[g=(w=l[p]).id]=1/d,f[g]=1/d}for(var m=Se(e);a>0&&i>t;){o=0;for(p=0;p<d;++p){var g=(w=l[p]).id;if(r=0,0===m[w.id].inDegree)h[g]=0;else{for(var v=ye(g,c,"source"),y=0;y<v.length;++y){var b=v[y],_=m[b].outDegree;_>0&&(r+=f[b]/_)}h[g]=n*r,o+=h[g]}}o=(1-o)/d,i=0;for(p=0;p<d;++p){var w;r=h[g=(w=l[p]).id]+o,i+=Math.abs(r-f[g]),f[g]=r}a-=1}return f};var Ze="-1",$e=function(e,t,n,r){void 0===e&&(e=-1),void 0===t&&(t=-1),void 0===n&&(n=-1),void 0===r&&(r="-1"),this.id=e,this.from=t,this.to=n,this.label=r},Qe=function(){function e(e,t){void 0===e&&(e=-1),void 0===t&&(t=Ze),this.id=e,this.label=t,this.edges=[],this.edgeMap={}}return e.prototype.addEdge=function(e){this.edges.push(e),this.edgeMap[e.id]=e},e}(),et=function(){function e(e,t,n){void 0===e&&(e=-1),void 0===t&&(t=!0),void 0===n&&(n=!1),this.id=e,this.edgeIdAutoIncrease=t,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=n}return e.prototype.getNodeNum=function(){return this.nodes.length},e.prototype.addNode=function(e,t){if(!this.nodeMap[e]){var n=new Qe(e,t);this.nodes.push(n),this.nodeMap[e]=n,this.nodeLabelMap[t]||(this.nodeLabelMap[t]=[]),this.nodeLabelMap[t].push(e)}},e.prototype.addEdge=function(e,t,n,r){if((this.edgeIdAutoIncrease||void 0===e)&&(e=this.counter++),!(this.nodeMap[t]&&this.nodeMap[n]&&this.nodeMap[n].edgeMap[e])){var i=new $e(e,t,n,r);if(this.edges.push(i),this.edgeMap[e]=i,this.nodeMap[t].addEdge(i),this.edgeLabelMap[r]||(this.edgeLabelMap[r]=[]),this.edgeLabelMap[r].push(i),!this.directed){var o=new $e(e,n,t,r);this.nodeMap[n].addEdge(o),this.edgeLabelMap[r].push(o)}}},e}(),tt=function(){function e(e,t,n,r,i){this.fromNode=e,this.toNode=t,this.nodeEdgeNodeLabel={nodeLabel1:n||Ze,edgeLabel:r||"-1",nodeLabel2:i||Ze}}return e.prototype.equalTo=function(e){return this.fromNode===e.formNode&&this.toNode===e.toNode&&this.nodeEdgeNodeLabel===e.nodeEdgeNodeLabel},e.prototype.notEqualTo=function(e){return!this.equalTo(e)},e}(),nt=function(){function e(){this.rmpath=[],this.dfsEdgeList=[]}return e.prototype.equalTo=function(e){var t=this.dfsEdgeList.length;if(t!==e.length)return!1;for(var n=0;n<t;n++)if(this.dfsEdgeList[n]!==e[n])return!1;return!0},e.prototype.notEqualTo=function(e){return!this.equalTo(e)},e.prototype.pushBack=function(e,t,n,r,i){return this.dfsEdgeList.push(new tt(e,t,n,r,i)),this.dfsEdgeList},e.prototype.toGraph=function(e,t){void 0===e&&(e=-1),void 0===t&&(t=!1);var n=new et(e,!0,t);return this.dfsEdgeList.forEach((function(e){var t=e.fromNode,r=e.toNode,i=e.nodeEdgeNodeLabel,o=i.nodeLabel1,a=i.edgeLabel,s=i.nodeLabel2;o!==Ze&&n.addNode(t,o),s!==Ze&&n.addNode(r,s),o!==Ze&&s!==o&&n.addEdge(void 0,t,r,a)})),n},e.prototype.buildRmpath=function(){this.rmpath=[];for(var e=void 0,t=this.dfsEdgeList.length-1;t>=0;t--){var n=this.dfsEdgeList[t],r=n.fromNode,i=n.toNode;r<i&&(void 0===e||i===e)&&(this.rmpath.push(t),e=r)}return this.rmpath},e.prototype.getNodeNum=function(){var e={};return this.dfsEdgeList.forEach((function(t){e[t.fromNode]||(e[t.fromNode]=!0),e[t.toNode]||(e[t.toNode]=!0)})),Object.keys(e).length},e}(),rt=function(){function e(e){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],e){for(;e;){var t=e.edge;this.edges.push(t),this.nodesUsed[t.from]=1,this.nodesUsed[t.to]=1,this.edgesUsed[t.id]=1,e=e.preNode}this.edges=this.edges.reverse()}}return e.prototype.hasNode=function(e){return 1===this.nodesUsed[e.id]},e.prototype.hasEdge=function(e){return 1===this.edgesUsed[e.id]},e}(),it=function(){function e(e){var t=e.graphs,n=e.minSupport,r=void 0===n?2:n,i=e.minNodeNum,o=void 0===i?1:i,a=e.maxNodeNum,s=void 0===a?4:a,l=e.top,u=void 0===l?10:l,c=e.directed,d=void 0!==c&&c,h=e.verbose,f=void 0!==h&&h;this.graphs=t,this.dfsCode=new nt,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=r,this.top=u,this.directed=d,this.counter=0,this.maxNodeNum=s,this.minNodeNum=o,this.verbose=f,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return e.prototype.findForwardRootEdges=function(e,t){var n=this,r=[],i=e.nodeMap;return t.edges.forEach((function(e){(n.directed||t.label<=i[e.to].label)&&r.push(e)})),r},e.prototype.findBackwardEdge=function(e,t,n,r){if(!this.directed&&t===n)return null;for(var i=e.nodeMap,o=i[n.to].edges,a=o.length,s=0;s<a;s++){var l=o[s];if(!r.hasEdge(l)&&l.to===t.from)if(this.directed){if(i[t.from].label<i[n.to].label||i[t.from].label===i[n.to].label&&t.label<=l.label)return l}else if(t.label<l.label||t.label===l.label&&i[t.to].label<=i[n.to].label)return l}return null},e.prototype.findForwardPureEdges=function(e,t,n,r){for(var i=[],o=t.to,a=e.nodeMap[o].edges,s=a.length,l=0;l<s;l++){var u=a[l],c=e.nodeMap[u.to];n<=c.label&&!r.hasNode(c)&&i.push(u)}return i},e.prototype.findForwardRmpathEdges=function(e,t,n,r){for(var i=[],o=e.nodeMap,a=o[t.to].label,s=o[t.from].edges,l=s.length,u=0;u<l;u++){var c=s[u],d=o[c.to].label;t.to===c.to||n>d||r.hasNode(o[c.to])||(t.label<c.label||t.label===c.label&&a<=d)&&i.push(c)}return i},e.prototype.getSupport=function(e){var t={};return e.forEach((function(e){t[e.graphId]||(t[e.graphId]=!0)})),Object.keys(t).length},e.prototype.findMinLabel=function(e){var t=void 0;return Object.keys(e).forEach((function(n){var r=e[n],i=r.nodeLabel1,o=r.edgeLabel,a=r.nodeLabel2;t?(i<t.nodeLabel1||i===t.nodeLabel1&&o<t.edgeLabel||i===t.nodeLabel1&&o===t.edgeLabel&&a<t.nodeLabel2)&&(t={nodeLabel1:i,edgeLabel:o,nodeLabel2:a}):t={nodeLabel1:i,edgeLabel:o,nodeLabel2:a}})),t},e.prototype.isMin=function(){var e=this,t=this.dfsCode;if(this.verbose&&console.log("isMin checking",t),1===t.dfsEdgeList.length)return!0;var n=this.directed,r=t.toGraph(-1,n),i=r.nodeMap,o=new nt,a={};r.nodes.forEach((function(t){e.findForwardRootEdges(r,t).forEach((function(e){var n=i[e.to],o=t.label+"-"+e.label+"-"+n.label;a[o]||(a[o]={projected:[],nodeLabel1:t.label,edgeLabel:e.label,nodeLabel2:n.label});var s={graphId:r.id,edge:e,preNode:null};a[o].projected.push(s)}))}));var s=this.findMinLabel(a);if(s){o.dfsEdgeList.push(new tt(0,1,s.nodeLabel1,s.edgeLabel,s.nodeLabel2));var l=s.nodeLabel1+"-"+s.edgeLabel+"-"+s.nodeLabel2;return function a(s){for(var l=o.buildRmpath(),u=o.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,c=o.dfsEdgeList[l[0]].toNode,d={},h=!1,f=0,p=n?-1:0,m=function(t){if(h)return"break";s.forEach((function(n){var i=new rt(n),a=e.findBackwardEdge(r,i.edges[l[t]],i.edges[l[0]],i);a&&(d[a.label]||(d[a.label]={projected:[],edgeLabel:a.label}),d[a.label].projected.push({graphId:r.id,edge:d,preNode:n}),f=o.dfsEdgeList[l[t]].fromNode,h=!0)}))},g=l.length-1;g>p;g--){if("break"===m(g))break}if(h){var v=e.findMinLabel(d);o.dfsEdgeList.push(new tt(c,f,Ze,v.edgeLabel,Ze));var y=o.dfsEdgeList.length-1;return e.dfsCode.dfsEdgeList[y]===o.dfsEdgeList[y]&&a(d[v.edgeLabel].projected)}var b={};h=!1;var _=0;s.forEach((function(t){var n=new rt(t),o=e.findForwardPureEdges(r,n.edges[l[0]],u,n);o.length>0&&(h=!0,_=c,o.forEach((function(e){var n=e.label+"-"+i[e.to].label;b[n]||(b[n]={projected:[],edgeLabel:e.label,nodeLabel2:i[e.to].label}),b[n].projected.push({graphId:r.id,edge:e,preNode:t})})))}));var w=l.length,x=function(t){if(h)return"break";var n=l[t];s.forEach((function(t){var a=new rt(t),s=e.findForwardRmpathEdges(r,a.edges[n],u,a);s.length>0&&(h=!0,_=o.dfsEdgeList[n].fromNode,s.forEach((function(e){var n=e.label+"-"+i[e.to].label;b[n]||(b[n]={projected:[],edgeLabel:e.label,nodeLabel2:i[e.to].label}),b[n].projected.push({graphId:r.id,edge:e,preNode:t})})))}))};for(g=0;g<w;g++){if("break"===x(g))break}if(!h)return!0;var M=e.findMinLabel(b);o.dfsEdgeList.push(new tt(_,c+1,Ze,M.edgeLabel,M.nodeLabel2));var E=o.dfsEdgeList.length-1;return t.dfsEdgeList[E]===o.dfsEdgeList[E]&&a(b[M.edgeLabel+"-"+M.nodeLabel2].projected)}(a[l].projected)}},e.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var e=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push((0,b.clone)(e))}},e.prototype.subGraphMining=function(e){var t=this;if(!(this.getSupport(e)<this.minSupport)&&this.isMin()){this.report();var n=this.dfsCode.getNodeNum(),r=this.dfsCode.buildRmpath(),i=this.dfsCode.dfsEdgeList[r[0]].toNode,o=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,a={},s={};e.forEach((function(e){for(var l=t.graphs[e.graphId],u=l.nodeMap,c=new rt(e),d=r.length-1;d>=0;d--){var h=t.findBackwardEdge(l,c.edges[r[d]],c.edges[r[0]],c);if(h){var f=t.dfsCode.dfsEdgeList[r[d]].fromNode+"-"+h.label;s[f]||(s[f]={projected:[],toNodeId:t.dfsCode.dfsEdgeList[r[d]].fromNode,edgeLabel:h.label}),s[f].projected.push({graphId:e.graphId,edge:h,preNode:e})}}if(!(n>=t.maxNodeNum)){t.findForwardPureEdges(l,c.edges[r[0]],o,c).forEach((function(t){var n=i+"-"+t.label+"-"+u[t.to].label;a[n]||(a[n]={projected:[],fromNodeId:i,edgeLabel:t.label,nodeLabel2:u[t.to].label}),a[n].projected.push({graphId:e.graphId,edge:t,preNode:e})}));var p=function(n){t.findForwardRmpathEdges(l,c.edges[r[n]],o,c).forEach((function(i){var o=t.dfsCode.dfsEdgeList[r[n]].fromNode+"-"+i.label+"-"+u[i.to].label;a[o]||(a[o]={projected:[],fromNodeId:t.dfsCode.dfsEdgeList[r[n]].fromNode,edgeLabel:i.label,nodeLabel2:u[i.to].label}),a[o].projected.push({graphId:e.graphId,edge:i,preNode:e})}))};for(d=0;d<r.length;d++)p(d)}})),Object.keys(s).forEach((function(e){var n=s[e],r=n.toNodeId,o=n.edgeLabel;t.dfsCode.dfsEdgeList.push(new tt(i,r,"-1",o,"-1")),t.subGraphMining(s[e].projected),t.dfsCode.dfsEdgeList.pop()})),Object.keys(a).forEach((function(e){var n=a[e],r=n.fromNodeId,o=n.edgeLabel,s=n.nodeLabel2;t.dfsCode.dfsEdgeList.push(new tt(r,i+1,Ze,o,s)),t.subGraphMining(a[e].projected),t.dfsCode.dfsEdgeList.pop()}))}},e.prototype.generate1EdgeFrequentSubGraphs=function(){var e=this.graphs,t=this.directed,n=this.minSupport,r=this.frequentSize1Subgraphs,i={},o={},a={},s={};return Object.keys(e).forEach((function(n){var r=e[n],l=r.nodeMap;r.nodes.forEach((function(e,r){var u=e.label,c=n+"-"+u;if(!a[c]){var d=i[u]||0;d++,i[u]=d}a[c]={graphKey:n,label:u},e.edges.forEach((function(e){var r=u,i=l[e.to].label;if(!t&&r>i){var a=i;i=r,r=a}var c=e.label,d=n+"-"+r+"-"+c+"-"+i,h=r+"-"+c+"-"+i;if(!o[h]){var f=o[h]||0;f++,o[h]=f}s[d]={graphId:n,nodeLabel1:r,edgeLabel:c,nodeLabel2:i}}))}))})),Object.keys(i).forEach((function(e){if(!(i[e]<n)){var t={nodes:[],edges:[]};t.nodes.push({id:"0",label:e}),r.push(t)}})),r},e.prototype.run=function(){var e=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var t=this.graphs,n=(this.directed,{});Object.keys(t).forEach((function(r){var i=t[r],o=i.nodeMap;i.nodes.forEach((function(t){e.findForwardRootEdges(i,t).forEach((function(e){var i=o[e.to],a=t.label+"-"+e.label+"-"+i.label;n[a]||(n[a]={projected:[],nodeLabel1:t.label,edgeLabel:e.label,nodeLabel2:i.label});var s={graphId:r,edge:e,preNode:null};n[a].projected.push(s)}))}))})),Object.keys(n).forEach((function(t){var r=n[t],i=r.projected,o=r.nodeLabel1,a=r.edgeLabel,s=r.nodeLabel2;e.dfsCode.dfsEdgeList.push(new tt(0,1,o,a,s)),e.subGraphMining(i),e.dfsCode.dfsEdgeList.pop()}))}},e}(),ot="cluster";const at=function(e){var t=e.graphs,n=e.directed,r=void 0!==n&&n,i=e.nodeLabelProp,o=void 0===i?ot:i,a=e.edgeLabelProp,s=void 0===a?ot:a,l=function(e,t,n,r){var i={};return Object.keys(e).forEach((function(o,a){var s=e[o],l=new et(a,!0,t),u={};s.nodes.forEach((function(e,t){l.addNode(t,e[n]),u[e.id]=t})),s.edges.forEach((function(e,t){var n=u[e.source],i=u[e.target];l.addEdge(-1,n,i,e[r])})),l&&l.getNodeNum()&&(i[l.id]=l)})),i}(t,r,o,s),u=e.minSupport,c=e.maxNodeNum,d=e.minNodeNum,h=e.verbose,f=e.top,p=new it({graphs:l,minSupport:u,maxNodeNum:c,minNodeNum:d,top:f,verbose:h,directed:r});p.run();var m=function(e,t,n){var r=[];return e.forEach((function(e){var i={nodes:[],edges:[]};e.nodes.forEach((function(e){var n;i.nodes.push(((n={id:""+e.id})[t]=e.label,n))})),e.edges.forEach((function(e){var t;i.edges.push(((t={source:""+e.from,target:""+e.to})[n]=e.label,t))})),r.push(i)})),r}(p.frequentSubgraphs,o,s);return m};var st=function(e,t,n,r){void 0===n&&(n="cluster"),void 0===r&&(r=2);var i=[],o=e.nodes;return t.forEach((function(e,t){i.push(lt(o,e,t,n,r))})),i},lt=function(e,t,n,r,i){var o=[n],a=[],s={};return t.forEach((function(t,l){if(t<=i&&n!==l){o.push(l),a.push(e[l]);var u=e[l][r];s[u]?(s[u].count++,s[u].dists.push(t)):s[u]={count:1,dists:[t]}}})),Object.keys(s).forEach((function(e){s[e].dists=s[e].dists.sort((function(e,t){return e-t}))})),{nodeIdx:n,nodeId:e[n].id,nodeIdxs:o,neighbors:a,neighborNum:o.length-1,nodeLabelCountMap:s}},ut=function(e,t,n,r){var i=n.nodes;return r||(r={}),Object.keys(e).forEach((function(o){var a,s;if(!r||!r[o]){r[o]={nodes:[],edges:[]};var l=e[o],u=null===(a=t[l.start])||void 0===a?void 0:a.nodeIdxs,c=null===(s=t[l.end])||void 0===s?void 0:s.nodeIdxs;if(u&&c){var d=new Set(c),h=u.filter((function(e){return d.has(e)}));if(h&&h.length){for(var f={},p=h.length,m=0;m<p;m++){var g=i[h[m]];r[o].nodes.push(g),f[g.id]=!0}n.edges.forEach((function(e){f[e.source]&&f[e.target]&&r[o].edges.push(e)}))}}}})),r},ct=function(e,t,n,r){var i,o,a={};e.nodes.forEach((function(e){a[e.id]=e}));var s=0;return!(null===(i=null==t?void 0:t.edges)||void 0===i?void 0:i.length)||(null===(o=null==t?void 0:t.nodes)||void 0===o?void 0:o.length)<2?0:(e.edges.forEach((function(e){var i=a[e.source][n],o=a[e.target][n],l=null==t?void 0:t.nodes[0][n],u=null==t?void 0:t.nodes[1][n],c=null==t?void 0:t.edges[0][r];e[r]===c&&(i===l&&o===u||i===u&&o===l)&&s++})),s)},dt=function(e,t){var n={},r={};return e.forEach((function(e,i){n[e.id]={idx:i,node:e,degree:0,inDegree:0,outDegree:0};var o=e[t];r[o]||(r[o]=[]),r[o].push(e)})),{nodeMap:n,nodeLabelMap:r}},ht=function(e,t,n){var r={},i={};return e.forEach((function(e,o){r[""+_e]={idx:o,edge:e};var a=e[t];i[a]||(i[a]=[]),i[a].push(e);var s=n[e.source];s&&(s.degree++,s.outDegree++);var l=n[e.target];l&&(l.degree++,l.inDegree++)})),{edgeMap:r,edgeLabelMap:i}},ft=function(e,t,n){var r=t.length,i={};return t.forEach((function(t,o){for(var a=n?0:o+1,s=e[o].id,l=a;l<r;l++)if(o!==l){var u=e[l].id,c=t[l];i[s+"-"+u]=c,n||(i[u+"-"+s]=c)}})),i},pt=function(e,t,n,r,i,o,a,s,l,u,c){var d,h=t.id+"-"+n.id;if(u&&u[h])return u[h];var f=c?c[h]:void 0;if(!f){var p=((d={})[h]={start:r[t.id].idx,end:r[n.id].idx,distance:i},d);f=(c=ut(p,o,e,c))[h]}return ct(f,a,s,l)},mt=function(e,t,n,r){var i,o,a,s=null===(i=e[t])||void 0===i?void 0:i.degree,l=null===(o=e[t])||void 0===o?void 0:o.inDegree,u=null===(a=e[t])||void 0===a?void 0:a.outDegree;return void 0===e[t]&&(s=1/0,l=1/0,u=1/0,r[t].forEach((function(e){var t=n[e.id].degree;s>t&&(s=t);var r=n[e.id].inDegree;l>r&&(l=r);var i=n[e.id].outDegree;u>i&&(u=i)})),e[t]={degree:s,inDegree:l,outDegree:u}),{minPatternNodeLabelDegree:s,minPatternNodeLabelInDegree:l,minPatternNodeLabelOutDegree:u}};const gt=function(e,t,n,r,i,o,a){if(void 0===n&&(n=!1),void 0===o&&(o="cluster"),void 0===a&&(a="cluster"),e&&e.nodes){var s=e.nodes.length;if(s){var l=je(e,n),u=je(t,n),c=ft(e.nodes,l,n),d=ft(t.nodes,u,n),h=dt(e.nodes,o),f=h.nodeMap,p=h.nodeLabelMap,m=dt(t.nodes,o),g=m.nodeMap,v=m.nodeLabelMap;ht(e.edges,a,f);var b=ht(t.edges,a,g).edgeLabelMap,_=[];null==u||u.forEach((function(e){_=_.concat(e)})),i||(i=Math.max.apply(Math,(0,y.__spreadArray)((0,y.__spreadArray)([],_),[2]))),r||(r=i);var w=st(e,l,o,r),x=st(t,u,o,r),M=function(e,t,n,r,i){var o=Math.ceil(n/t),a={},s=0;return r.forEach((function(e,r){for(var l=0,u=0,c=e.nodeIdxs,d=e.neighborNum-1;l<o;){for(var h=c[1+Math.floor(Math.random()*d)],f=0;(a[r+"-"+h]||a[h+"-"+r])&&(h=Math.floor(Math.random()*t),!(++f>2*t)););if(f<2*t&&(a[r+"-"+h]={start:r,end:h,distance:i[r][h]},l++,++s>=n))return a;if(++u>2*t)break}l<o&&(o=(o+(o-l))/(t-r-1))})),a}(0,s,Math.min(100,s*(s-1)/2),x,l),E=ut(M,w,e),S=at({graphs:E,nodeLabelProp:o,edgeLabelProp:a,minSupport:1,minNodeNum:1,maxNodeNum:4,directed:n}).slice(0,10),k=S.length,T=[];S.forEach((function(e,t){T[t]={},Object.keys(E).forEach((function(n){var r=E[n],i=ct(r,e,o,a);T[t][n]=i}))}));var L=function(e,t,n){for(var r=1/0,i=0,o=function(t){var n=e[t],o=Object.keys(n).sort((function(e,t){return n[e]-n[t]})),a=[];o.forEach((function(e,t){a[t%10]||(a[t%10]={graphs:[],totalCount:0,aveCount:0}),a[t%10].graphs.push(e),a[t%10].totalCount+=n[e]}));var s=0,l=[];a.forEach((function(e){var t=e.totalCount/e.graphs.length;e.aveCount=t,l.push(t);var r=0,i=e.length;e.graphs.forEach((function(t,i){var o=n[t];e.graphs.forEach((function(e,t){i!==t&&(r+=Math.abs(o-n[e]))}))})),s+=r/=i*(i-1)/2})),s/=a.length;var u=0;l.forEach((function(e,t){l.forEach((function(n,r){t!==r&&(u+=Math.abs(e-n))})),u/=l.length*(l.length-1)/2}));var c=u-s;r<c&&(r=c,i=t)},a=0;a<t;a++)o(a);return{structure:n[i],structureCountMap:e[i]}}(T,k,S),C=L.structure,D=L.structureCountMap,A=t.nodes[0],P=A[o],O=p[P],I={},R={},N={},Y={},j={},F={};Object.keys(v).forEach((function(r,i){j[r]=[],n&&(F[r]=[]);var s=-1/0,l=v[r],u={};l.forEach((function(e){var t=d[A.id+"-"+e.id];if(t&&j[r].push(t),s<t&&(s=t),u[A.id+"-"+e.id]={start:0,end:g[e.id].idx,distance:t},n){var i=d[e.id+"-"+A.id];i&&F[r].push(i)}})),j[r]=j[r].sort((function(e,t){return e-t})),n&&(F[r]=F[r].sort((function(e,t){return e-t}))),R=ut(u,x,t,R);var h=[];if(Object.keys(u).forEach((function(e){if(N[e])h.push(N[e]);else{var t=R[e];N[e]=ct(t,C,o,a),h.push(N[e])}})),h=h.sort((function(e,t){return t-e})),Y[A.id+"-"+r]=h,r!==P)for(var p=function(t){var n=O[t],i=w[f[n.id].idx],s=i.nodeLabelCountMap[r],l=v[r].length;if(!s||s.count<l)return O.splice(t,1),"continue";for(var u=!1,d=0;d<l;d++)if(s.dists[d]>j[r][d]){u=!0;break}if(u)return O.splice(t,1),"continue";var p={};i.neighbors.forEach((function(e){var t=c[n.id+"-"+e.id];p[n.id+"-"+e.id]={start:f[n.id].idx,end:f[e.id].idx,distance:t}})),E=ut(p,w,e,E);var m=[];Object.keys(p).forEach((function(e){if(D[e])m.push(D[e]);else{var t=E[e];D[e]=ct(t,C,o,a),m.push(D[e])}})),m=m.sort((function(e,t){return t-e}));var g=!1;for(d=0;d<l;d++)if(m[d]<h[d]){g=!0;break}return g?(O.splice(t,1),"continue"):void 0},m=O.length-1;m>=0;m--)p(m)}));var B=[];null==O||O.forEach((function(r){for(var s=f[r.id].idx,u=lt(e.nodes,l[s],s,o,i).neighbors,d=!1,h=u.length-1;h>=0;h--){if(u.length+1<t.nodes.length)return void(d=!0);var p=u[h],m=p[o];if(v[m]&&v[m].length)if(j[m]&&j[m].length){var y=r.id+"-"+p.id,b=c[y],_=j[m].length-1;if(b>j[m][_])u.splice(h,1);else{if(n){var x=p.id+"-"+r.id,M=c[x];if(_=F[m].length-1,M>F[m][_]){u.splice(h,1);continue}}var S=D[y]?D[y]:pt(e,r,p,f,b,w,C,o,a,D,E),k=A.id+"-"+m;if(S<Y[k][Y[k].length-1])u.splice(h,1);else{var T=mt(I,m,g,v),L=T.minPatternNodeLabelDegree;T.minPatternNodeLabelInDegree,T.minPatternNodeLabelOutDegree;f[p.id].degree<L&&u.splice(h,1)}}}else u.splice(h,1);else u.splice(h,1)}d||B.push({nodes:[r].concat(u)})}));var z=Ie(t,A.id,!1).length,H={};n?(Object.keys(z).forEach((function(e){var t=g[e].node[o];H[t]?H[t].push(z[e]):H[t]=[z[e]]})),Object.keys(H).forEach((function(e){H[e].sort((function(e,t){return e-t}))}))):H=j;for(var G=function(r){var i=B[r],s=i.nodes[0],l={},u={};i.nodes.forEach((function(e,t){u[e.id]={idx:t,node:e,degree:0,inDegree:0,outDegree:0};var n=e[o];l[n]?l[n]++:l[n]=1}));var c=[],d={};e.edges.forEach((function(e){u[e.source]&&u[e.target]&&(c.push(e),d[e[a]]?d[e[a]]++:d[e[a]]=1,u[e.source].degree++,u[e.target].degree++,u[e.source].outDegree++,u[e.target].inDegree++)}));for(var h=Object.keys(b).length,p=!1,m=0;m<h;m++){var y=Object.keys(b)[m];if(!d[y]||d[y]<b[y].length){p=!0;break}}if(p)return B.splice(r,1),"continue";var _=c.length;if(_<t.edges.length)return B.splice(r,1),"break";var w=!1,x=function(e){var t=c[e],r=t[a],i=b[r];if(!i||!i.length)return d[r]--,i&&d[r]<i.length?(w=!0,"break"):(c.splice(e,1),u[t.source].degree--,u[t.target].degree--,u[t.source].outDegree--,u[t.target].inDegree--,"continue");var s=u[t.source].node[o],l=u[t.target].node[o],h=!1;return i.forEach((function(e){var t=g[e.source].node,r=g[e.target].node;t[o]===s&&r[o]===l&&(h=!0),n||t[o]!==l||r[o]!==s||(h=!0)})),h?void 0:(d[r]--,i&&d[r]<i.length?(w=!0,"break"):(c.splice(e,1),u[t.source].degree--,u[t.target].degree--,u[t.source].outDegree--,u[t.target].inDegree--,"continue"))};for(m=_-1;m>=0;m--){if("break"===x(m))break}if(w)return B.splice(r,1),"continue";i.edges=c;var M=Ie(i,i.nodes[0].id,!1).length;if(Object.keys(M).reverse().forEach((function(e){if(e!==i.nodes[0].id&&!w){if(M[e]===1/0){var t=u[e].node[o];if(l[t]--,l[t]<v[t].length)return void(w=!0);var n=i.nodes.indexOf(u[e].node);return i.nodes.splice(n,1),void(u[e]=void 0)}var r=f[e].node[o];if(!H[r]||!H[r].length||M[e]>H[r][H[r].length-1]){t=u[e].node[o];if(l[t]--,l[t]<v[t].length)return void(w=!0);n=i.nodes.indexOf(u[e].node);i.nodes.splice(n,1),u[e]=void 0}}})),w)return B.splice(r,1),"continue";for(var E=!0,S=0;E&&!w;){if(E=!1,n?u[s.id].degree<g[A.id].degree||u[s.id].inDegree<g[A.id].inDegree||u[s.id].outDegree<g[A.id].outDegree:u[s.id].degree<g[A.id].degree){w=!0;break}if(l[s[o]]<v[s[o]].length){w=!0;break}for(var k=i.nodes.length-1;k>=0;k--){var T=i.nodes[k],L=u[T.id].degree,C=u[T.id].inDegree,D=u[T.id].outDegree,P=T[o],O=mt(I,P,g,v),R=O.minPatternNodeLabelDegree,N=O.minPatternNodeLabelInDegree,Y=O.minPatternNodeLabelOutDegree;if(n?L<R||C<N||D<Y:L<R){if(l[T[o]]--,l[T[o]]<v[T[o]].length){w=!0;break}i.nodes.splice(k,1),u[T.id]=void 0,E=!0}}if(w||!E&&0!==S)break;for(var j=(_=c.length)-1;j>=0;j--){var F=c[j];if(!u[F.source]||!u[F.target]){c.splice(j,1);var z=F[a];if(d[z]--,u[F.source]&&(u[F.source].degree--,u[F.source].outDegree--),u[F.target]&&(u[F.target].degree--,u[F.target].inDegree--),b[z]&&d[z]<b[z].length){w=!0;break}E=!0}}S++}return w||w||i.nodes.length<t.nodes.length||c.length<t.edges.length?(B.splice(r,1),"continue"):void 0},W=B.length-1;W>=0;W--){if("break"===G(W))break}var U=B.length,V=function(e){var t=B[e],n={};t.edges.forEach((function(e){var t=e.source+"-"+e.target+"-"+e.label;n[t]?n[t]++:n[t]=1}));for(var r=function(e){var t=B[e],r={};t.edges.forEach((function(e){var t=e.source+"-"+e.target+"-"+e.label;r[t]?r[t]++:r[t]=1}));var i=!0;Object.keys(r).length!==Object.keys(n).length?i=!1:Object.keys(n).forEach((function(e){r[e]!==n[e]&&(i=!1)})),i&&B.splice(e,1)},i=U-1;i>e;i--)r(i);U=B.length};for(W=0;W<=U-1;W++)V(W);return B}}};var vt=function(){function e(e){void 0===e&&(e=10),this.linkedList=new me,this.maxStep=e}return Object.defineProperty(e.prototype,"length",{get:function(){return this.linkedList.toArray().length},enumerable:!1,configurable:!0}),e.prototype.isEmpty=function(){return!this.linkedList.head},e.prototype.isMaxStack=function(){return this.toArray().length>=this.maxStep},e.prototype.peek=function(){return this.isEmpty()?null:this.linkedList.head.value},e.prototype.push=function(e){this.linkedList.prepend(e),this.length>this.maxStep&&this.linkedList.deleteTail()},e.prototype.pop=function(){var e=this.linkedList.deleteHead();return e?e.value:null},e.prototype.toArray=function(){return this.linkedList.toArray().map((function(e){return e.value}))},e.prototype.clear=function(){for(;!this.isEmpty();)this.pop()},e}();const yt=vt;var bt=Oe;const _t={getAdjMatrix:de,breadthFirstSearch:we,connectedComponent:Me,getDegree:Se,getInDegree:ke,getOutDegree:Te,detectCycle:Oe,detectDirectedCycle:bt,detectAllCycles:Pe,detectAllDirectedCycle:Ae,detectAllUndirectedCycle:De,depthFirstSearch:Ce,dijkstra:Ie,findAllPath:Ye,findShortestPath:Ne,floydWarshall:je,labelPropagation:Fe,louvain:ze,minimumSpanningTree:Ke,pageRank:Je,getNeighbors:ye,Stack:yt,GADDI:gt};function wt(){var e=new T(3);return T!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function xt(e){var t=new T(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Mt(e){var t=e[0],n=e[1],r=e[2];return Math.hypot(t,n,r)}function Et(e,t,n){var r=new T(3);return r[0]=e,r[1]=t,r[2]=n,r}function St(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function kt(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e}function Tt(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function Lt(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function Ct(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}function Dt(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function At(e,t){var n=t[0],r=t[1],i=t[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o)),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o,e}function Pt(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Ot(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[0],s=n[1],l=n[2];return e[0]=i*l-o*s,e[1]=o*a-r*l,e[2]=r*s-i*a,e}function It(e,t,n,r){var i=t[0],o=t[1],a=t[2];return e[0]=i+r*(n[0]-i),e[1]=o+r*(n[1]-o),e[2]=a+r*(n[2]-a),e}function Rt(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return a=a||1,e[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/a,e[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,e[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,e}function Nt(e,t,n){var r=t[0],i=t[1],o=t[2];return e[0]=r*n[0]+i*n[3]+o*n[6],e[1]=r*n[1]+i*n[4]+o*n[7],e[2]=r*n[2]+i*n[5]+o*n[8],e}var Yt,jt=Lt,Ft=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return Math.hypot(n,r,i)},Bt=Mt;Yt=wt();function zt(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}function Ht(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e}function Gt(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e}function Wt(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e}function Ut(e,t){var n=t[0]-e[0],r=t[1]-e[1];return Math.hypot(n,r)}function Vt(e,t){var n=t[0],r=t[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i)),e[0]=t[0]*i,e[1]=t[1]*i,e}function Xt(e,t){return e[0]*t[0]+e[1]*t[1]}function qt(e,t){return e[0]===t[0]&&e[1]===t[1]}var Kt=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e},Jt=(function(){var e,t=(e=new T(2),T!=Float32Array&&(e[0]=0,e[1]=0),e)}(),ce),Zt=function(e){return function(t,n){return t[e]-n[e]}},$t=function(e,t,n){return e>=t&&e<=n},Qt=function(e,t,n,r){var i=n.x-e.x,o=n.y-e.y,a=t.x-e.x,s=t.y-e.y,l=r.x-n.x,u=r.y-n.y,c=a*u-s*l,d=1/c;if(c*c>1e-4*(a*a+s*s)*(l*l+u*u)){var h=(i*u-o*l)*d,f=(i*s-o*a)*d;return $t(h,0,1)&&$t(f,0,1)?{x:e.x+h*a,y:e.y+h*s}:null}return null},en=function(e,t){var n=e.x,r=e.y,i=e.width,o=e.height,a=[],s={x:n+i/2,y:r+o/2};a.push({x:n,y:r}),a.push({x:n+i,y:r}),a.push({x:n+i,y:r+o}),a.push({x:n,y:r+o}),a.push({x:n,y:r});for(var l=null,u=1;u<a.length&&!(l=Qt(a[u-1],a[u],s,t));u++);return l},tn=function(e,t){var n=e.x,r=e.y,i=e.r,o=t.x-n,a=t.y-r;if(Math.sqrt(o*o+a*a)<i)return null;var s=Math.sign(o),l=Math.sign(a),u=Math.atan(a/o);return{x:n+Math.abs(i*Math.cos(u))*s,y:r+Math.abs(i*Math.sin(u))*l}},nn=function(e,t){var n=e.rx,r=e.ry,i=e.x,o=e.y,a=t.x-i,s=t.y-o,l=Math.atan2(s/r,a/n);return l<0&&(l+=2*Math.PI),{x:i+n*Math.cos(l),y:o+r*Math.sin(l)}},rn=function(e,t,n){void 0===n&&(n=1);var r=[e.x,e.y,n];return t&&!isNaN(t[0])||(t=[1,0,0,0,1,0,0,0,1]),Nt(r,r,t),{x:r[0],y:r[1]}},on=function(e,t,n){void 0===n&&(n=1),t&&!isNaN(t[0])||(t=[1,0,0,0,1,0,0,0,1]);var r=N([1,0,0,0,1,0,0,0,1],t);r||(r=[1,0,0,0,1,0,0,0,1]);var i=[e.x,e.y,n];return Nt(i,i,r),{x:i[0],y:i[1]}},an=function(e,t,n){var r=e.x-t.x,i=e.y-t.y,o=e.x-n.x,a=e.y-n.y,s=(e.x*e.x-t.x*t.x-t.y*t.y+e.y*e.y)/2,l=(e.x*e.x-n.x*n.x-n.y*n.y+e.y*e.y)/2,u=i*o-r*a;return{x:-(a*s-i*l)/u,y:-(r*l-o*s)/u}},sn=function(e,t){var n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)},ln=function(e,t){var n=[];return e.forEach((function(e){var r=[];e.forEach((function(e){r.push(e*t)})),n.push(r)})),n},un=function(e){for(var t=[],n=e.length,r=0;r<n;r+=1){t[r]=[];for(var i=0;i<n;i+=1)r===i?t[r][i]=0:0!==e[r][i]&&e[r][i]?t[r][i]=e[r][i]:t[r][i]=1/0}for(var o=0;o<n;o+=1)for(r=0;r<n;r+=1)for(i=0;i<n;i+=1)t[r][i]>t[r][o]+t[o][i]&&(t[r][i]=t[r][o]+t[o][i]);return t},cn=function(e,t){var n=e.nodes,r=e.edges,i=[],o={};if(!n)throw new Error("invalid nodes data!");return n&&n.forEach((function(e,t){o[e.id]=t;i.push([])})),r&&r.forEach((function(e){var n=e.source,r=e.target,a=o[n],s=o[r];i[a][s]=1,t||(i[s][a]=1)})),i},dn=function(e,t){e.translate(t.x,t.y)},hn=function(e,t,n,r){void 0===r&&(r={duration:500});var i=e.getMatrix();i||(i=[1,0,0,0,1,0,0,0,1]);var o=e.getCanvasBBox(),a=t.x-o.minX,s=t.y-o.minY;if(n){var l=a*i[0],u=s*i[4],c=0,d=0,h=0,f=0;e.animate((function(e){return i=Jt(i,[["t",(h=l*e)-c,(f=u*e)-d]]),c=h,d=f,{matrix:i}}),r)}else{var p=Jt(i,[["t",a,s]]);e.setMatrix(p)}},fn=function(e,t){var n=e.getMatrix();n||(n=[1,0,0,0,1,0,0,0,1]);var r=t;(0,b.isArray)(t)||(r=[t,t]),(0,b.isArray)(t)&&1===t.length&&(r=[t[0],t[0]]),n=Jt(n,[["s",r[0],r[1]]]),e.setMatrix(n)},pn=function(e,t){var n=e.getMatrix();n||(n=[1,0,0,0,1,0,0,0,1]),n=Jt(n,[["r",t]]),e.setMatrix(n)},mn=function(e,t,n){for(var r=[],i=0;i<e;i++)r[i]=0;return n.forEach((function(e){e.source&&(r[t[e.source]]+=1),e.target&&(r[t[e.target]]+=1)})),r};function gn(e,t,n){return(n[0]-e[0])*(t[1]-e[1])==(t[0]-e[0])*(n[1]-e[1])&&Math.min(e[0],t[0])<=n[0]&&n[0]<=Math.max(e[0],t[0])&&Math.min(e[1],t[1])<=n[1]&&n[1]<=Math.max(e[1],t[1])}var vn=function(e,t,n){var r=!1,i=e.length;function o(e){return Math.abs(e)<1e-6?0:e<0?-1:1}if(i<=2)return!1;for(var a=0;a<i;a++){var s=e[a],l=e[(a+1)%i];if(gn(s,l,[t,n]))return!0;o(s[1]-n)>0!=o(l[1]-n)>0&&o(t-(n-s[1])*(s[0]-l[0])/(s[1]-l[1])-s[0])<0&&(r=!r)}return r},yn=function(e,t){return!(t.minX>e.maxX||t.maxX<e.minX||t.minY>e.maxY||t.maxY<e.minY)},bn=function(e,t){var n=function(e){var t=e.map((function(e){return e[0]})),n=e.map((function(e){return e[1]}));return{minX:Math.min.apply(null,t),maxX:Math.max.apply(null,t),minY:Math.min.apply(null,n),maxY:Math.max.apply(null,n)}},r=function(e){for(var t=[],n=e.length,r=0;r<n-1;r++){var i=e[r],o=e[r+1];t.push({from:{x:i[0],y:i[1]},to:{x:o[0],y:o[1]}})}if(t.length>1){var a=e[0],s=e[n-1];t.push({from:{x:s[0],y:s[1]},to:{x:a[0],y:a[1]}})}return t};if(e.length<2||t.length<2)return!1;var i=n(e),o=n(t);if(!yn(i,o))return!1;var a=!1;if((0,b.each)(t,(function(t){if(vn(e,t[0],t[1]))return a=!0,!1})),a)return!0;if((0,b.each)(e,(function(e){if(vn(t,e[0],e[1]))return a=!0,!1})),a)return!0;var s=r(e),l=r(t),u=!1;return(0,b.each)(l,(function(e){if(function(e,t){var n=!1;return(0,b.each)(e,(function(e){if(Qt(e.from,e.to,t.from,t.to))return n=!0,!1})),n}(s,e))return u=!0,!1})),u},_n=function(){function e(e,t,n,r){this.x1=e,this.y1=t,this.x2=n,this.y2=r}return e.prototype.getBBox=function(){var e=Math.min(this.x1,this.x2),t=Math.min(this.y1,this.y2),n=Math.max(this.x1,this.x2),r=Math.max(this.y1,this.y2);return{x:e,y:t,minX:e,minY:t,maxX:n,maxY:r,width:n-e,height:r-t}},e}(),wn=function(e,t){return{top:[e.minX,e.minY,e.maxX,e.minY],left:[e.minX,e.minY,e.minX,e.maxY],bottom:[e.minX,e.maxY,e.maxX,e.maxY],right:[e.maxX,e.minY,e.maxX,e.maxY]}[t]},xn=function(e,t){var n=(t.x2-t.x1)*(e.y1-t.y1)-(t.y2-t.y1)*(e.x1-t.x1),r=(e.x2-e.x1)*(e.y1-t.y1)-(e.y2-e.y1)*(e.x1-t.x1),i=(t.y2-t.y1)*(e.x2-e.x1)-(t.x2-t.x1)*(e.y2-e.y1);if(i){var o=n/i,a=r/i;if(o>=0&&o<=1&&a>=0&&a<=1)return o}return Number.POSITIVE_INFINITY},Mn=function(e,t){for(var n=["top","left","bottom","right"],r=e.getBBox(),i=0,o=[],a=0;a<4;a++){var s=wn(r,n[a]),l=s[0],u=s[1],c=s[2],d=s[3];o[a]=Qt({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},{x:l,y:u},{x:c,y:d}),o[a]&&(i+=1)}return[o,i]},En=function(e,t){for(var n=["top","left","bottom","right"],r=e.getBBox(),i=Number.POSITIVE_INFINITY,o=0,a=0;a<4;a++){var s=wn(r,n[a]),l=s[0],u=s[1],c=s[2],d=s[3],h=xn(t,new _n(l,u,c,d));(h=Math.abs(h-.5))>=0&&h<=1&&(o+=1,i=h<i?h:i)}return 0===o?-1:i},Sn=function(e){var t=0,n=0;if(e.length>0){for(var r=0,i=e;r<i.length;r++){var o=i[r];t+=o.x,n+=o.y}t/=e.length,n/=e.length}return{x:t,y:n}},kn=function(e,t){return Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)},Tn=function(e,t){var n,r=t.x1,i=t.y1,o=t.x2-r,a=t.y2-i,s=e.x-r,l=e.y-i,u=s*o+l*a;n=u<=0||(u=(s=o-s)*o+(l=a-l)*a)<=0?0:u*u/(o*o+a*a);var c=s*s+l*l-n;return c<0&&(c=0),c},Ln=function(e,t,n){return void 0===n&&(n=.001),Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)<Math.pow(n,2)},Cn=function(e,t){var n=e.x<t.x,r=e.x>t.x+t.width,i=e.y>t.y+t.height,o=e.y<t.y;if(!(n||r||i||o))return 0;if(i&&!n&&!r)return Math.pow(t.y+t.height-e.y,2);if(o&&!n&&!r)return Math.pow(e.y-t.y,2);if(n&&!i&&!o)return Math.pow(t.x-e.x,2);if(r&&!i&&!o)return Math.pow(t.x+t.width-e.x,2);var a=Math.min(Math.abs(t.x-e.x),Math.abs(t.x+t.width-e.x)),s=Math.min(Math.abs(t.y-e.y),Math.abs(t.y+t.height-e.y));return a*a+s*s},Dn=function(e,t){var n=e[0],r=e[1],i=e[2],o=e[3],a=t.x,s=t.y,l=[i-n,o-r];if(qt(l,[0,0]))return NaN;var u=[-l[1],l[0]];Vt(u,u);var c=[a-n,s-r];return Math.abs(Xt(c,u))},An="rgb(95, 149, 255)",Pn="rgb(0, 0, 0)",On="rgb(247, 250, 255)",In="rgb(239, 244, 255)",Rn="rgb(253, 253, 253)",Nn="rgb(250, 250, 250)",Yn="rgb(224, 224, 224)",jn="rgb(234, 234, 234)",Fn="#4572d9";const Bn={version:"0.3.11",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:An,fill:In},size:20,color:An,linkPoints:{size:8,lineWidth:1,fill:On,stroke:An}},nodeStateStyles:{active:{fill:On,stroke:An,lineWidth:2,shadowColor:An,shadowBlur:10},selected:{fill:"rgb(255, 255, 255)",stroke:An,lineWidth:4,shadowColor:An,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:"rgb(223, 234, 255)",stroke:Fn,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:On,stroke:"rgb(191, 213, 255)",lineWidth:1},disable:{fill:Nn,stroke:Yn,lineWidth:1}},edgeLabel:{style:{fill:Pn,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:Yn,lineAppendWidth:2},color:Yn},edgeStateStyles:{active:{stroke:An,lineWidth:1},selected:{stroke:An,lineWidth:2,shadowColor:An,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:An,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:jn,lineWidth:1},disable:{stroke:"rgb(245, 245, 245)",lineWidth:1}},comboLabel:{style:{fill:Pn,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:Rn,lineWidth:1,stroke:Yn,r:5,width:20,height:10},size:[20,5],color:Yn,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:An,lineWidth:1,fill:On},selected:{stroke:An,lineWidth:2,fill:Rn,shadowColor:An,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:Fn,lineWidth:2,fill:Rn,"text-shape":{fontWeight:500}},inactive:{stroke:Yn,fill:Rn,lineWidth:1},disable:{stroke:jn,fill:Nn,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]}},zn={" ":.3329986572265625,a:.5589996337890625,A:.6569992065429687,b:.58599853515625,B:.6769989013671875,c:.5469985961914062,C:.7279998779296875,d:.58599853515625,D:.705999755859375,e:.554998779296875,E:.63699951171875,f:.37299957275390627,F:.5769989013671875,g:.5909988403320312,G:.7479995727539063,h:.555999755859375,H:.7199996948242188,i:.255999755859375,I:.23699951171875,j:.26699981689453123,J:.5169998168945312,k:.5289993286132812,K:.6899993896484375,l:.23499908447265624,L:.5879989624023437,m:.854998779296875,M:.8819992065429687,n:.5589996337890625,N:.7189987182617188,o:.58599853515625,O:.7669998168945312,p:.58599853515625,P:.6419998168945312,q:.58599853515625,Q:.7669998168945312,r:.3649993896484375,R:.6759994506835938,s:.504998779296875,S:.6319992065429687,t:.354998779296875,T:.6189987182617187,u:.5599990844726562,U:.7139999389648437,v:.48199920654296874,V:.6389999389648438,w:.754998779296875,W:.929998779296875,x:.5089996337890625,X:.63699951171875,y:.4959991455078125,Y:.66199951171875,z:.48699951171875,Z:.6239990234375,0:.6,1:.40099945068359377,2:.6,3:.6,4:.6,5:.6,6:.6,7:.5469985961914062,8:.6,9:.6,"[":.3329986572265625,"]":.3329986572265625,",":.26399993896484375,".":.26399993896484375,";":.26399993896484375,":":.26399993896484375,"{":.3329986572265625,"}":.3329986572265625,"\\":.5,"|":.19499969482421875,"=":.604998779296875,"+":.604998779296875,"-":.604998779296875,_:.5,"`":.3329986572265625," ~":.8329986572265625,"!":.3329986572265625,"@":.8579986572265625,"#":.6,$:.6,"%":.9699996948242188,"^":.517999267578125,"&":.7259994506835937,"*":.505999755859375,"(":.3329986572265625,")":.3329986572265625,"<":.604998779296875,">":.604998779296875,"/":.5,"?":.53699951171875};var Hn=Math.PI,Gn=Math.sin,Wn=Math.cos,Un=Gn(Hn/8),Vn=Wn(Hn/8),Xn=function(e,t){var n=e.getBBox(),r={x:n.minX,y:n.minY},i={x:n.maxX,y:n.maxY};if(t){var o=t.getMatrix();o||(o=[1,0,0,0,1,0,0,0,1]),r=rn(r,o),i=rn(i,o)}var a=r.x,s=r.y,l=i.x,u=i.y;return{x:a,y:s,minX:a,minY:s,maxX:l,maxY:u,width:l-a,height:u-s}},qn=function(e){var t=e.sourceNode||e.targetNode,n=t.get("group").getMatrix();n||(n=[1,0,0,0,1,0,0,0,1]);var r=t.getKeyShape().getBBox(),i=e.loopCfg||{},o=i.dist||2*Math.max(r.width,r.height),a=i.position||Bn.defaultLoopPosition,s=[n[6],n[7]],l=[e.startPoint.x,e.startPoint.y],u=[e.endPoint.x,e.endPoint.y],c=r.height/2,d=r.height/2,h=c*Un,f=c*Vn,p=d*Un,m=d*Vn;if(l[0]===u[0]&&l[1]===u[1]){switch(a){case"top":l=[s[0]-h,s[1]-f],u=[s[0]+p,s[1]-m];break;case"top-right":c=r.height/2,d=r.width/2,l=[s[0]+(h=c*Un),s[1]-(f=c*Vn)],u=[s[0]+(m=d*Vn),s[1]-(p=d*Un)];break;case"right":c=r.width/2,d=r.width/2,l=[s[0]+(f=c*Vn),s[1]-(h=c*Un)],u=[s[0]+(m=d*Vn),s[1]+(p=d*Un)];break;case"bottom-right":c=r.width/2,d=r.height/2,l=[s[0]+(f=c*Vn),s[1]+(h=c*Un)],u=[s[0]+(p=d*Un),s[1]+(m=d*Vn)];break;case"bottom":c=r.height/2,d=r.height/2,l=[s[0]+(h=c*Un),s[1]+(f=c*Vn)],u=[s[0]-(p=d*Un),s[1]+(m=d*Vn)];break;case"bottom-left":c=r.height/2,d=r.width/2,l=[s[0]-(h=c*Un),s[1]+(f=c*Vn)],u=[s[0]-(m=d*Vn),s[1]+(p=d*Un)];break;case"left":c=r.width/2,d=r.width/2,l=[s[0]-(f=c*Vn),s[1]+(h=c*Un)],u=[s[0]-(m=d*Vn),s[1]-(p=d*Un)];break;case"top-left":c=r.width/2,d=r.height/2,l=[s[0]-(f=c*Vn),s[1]-(h=c*Un)],u=[s[0]-(p=d*Un),s[1]-(m=d*Vn)];break;default:c=r.width/2,d=r.width/2,l=[s[0]-(h=c*Un),s[1]-(f=c*Vn)],u=[s[0]+(p=d*Un),s[1]-(m=d*Vn)]}if(!1===i.clockwise){var g=[l[0],l[1]];l=[u[0],u[1]],u=[g[0],g[1]]}}var v=[l[0]-s[0],l[1]-s[1]],y=(c+o)/c,b=(d+o)/d;!1===i.clockwise&&(y=(d+o)/d,b=(c+o)/c);var _=Wt([0,0],v,y),w=[s[0]+_[0],s[1]+_[1]],x=Wt([0,0],[u[0]-s[0],u[1]-s[1]],b),M=[s[0]+x[0],s[1]+x[1]];return e.startPoint={x:l[0],y:l[1]},e.endPoint={x:u[0],y:u[1]},e.controlPoints=[{x:w[0],y:w[1]},{x:M[0],y:M[1]}],e},Kn=function(e,t,n,r,i){var o=1e-4,a=[],s=null==e?void 0:e.getPoint(t);if(!s)return{x:0,y:0,angle:0};if(t<o)a=e.getStartTangent().reverse();else if(t>.9999)a=e.getEndTangent();else{var l=null==e?void 0:e.getPoint(t+o);a.push([s.x,s.y]),a.push([l.x,l.y])}var u=Math.atan2(a[1][1]-a[0][1],a[1][0]-a[0][0]);if(u<0&&(u+=2*Hn),n&&(s.x+=Wn(u)*n,s.y+=Gn(u)*n),r){var c=u-Hn/2;u>.5*Hn&&u<1.5*Hn&&(c-=Hn),s.x+=Wn(c)*r,s.y+=Gn(c)*r}var d={x:s.x,y:s.y,angle:u};return i?(u>.5*Hn&&u<1.5*Hn&&(u-=Hn),(0,y.__assign)({rotate:u},d)):d},Jn=function e(t,n){if(!1===n(t))return!1;if(t&&t.children)for(var r=t.children.length-1;r>=0;r--)if(!e(t.children[r],n))return!1;return!0},Zn=function e(t,n){if(t&&t.children)for(var r=t.children.length-1;r>=0;r--)if(!e(t.children[r],n))return;return!1!==n(t)},$n=function(e,t){"function"==typeof t&&Jn(e,t)},Qn=function(e,t){"function"==typeof t&&Zn(e,t)},er=function(e,t){return t*(zn[e]||1)},tr=function(e,t){var n=0,r=new RegExp("[-]+");return e.split("").forEach((function(e){r.test(e)?n+=t:n+=er(e,t)})),[n,t]},nr=function(e,t){var n=[],r={},i={};e.forEach((function(e){i[e.id]=e})),e.forEach((function(e,t){var o=(0,b.clone)(e);o.itemType="combo",o.children=void 0,o.parentId===o.id?(console.warn("The parentId for combo "+o.id+" can not be the same as the combo's id"),delete o.parentId):o.parentId&&!i[o.parentId]&&(console.warn("The parent combo for combo "+o.id+" does not exist!"),delete o.parentId);var a=r[o.id];if(a){if(o.children=a.children,r[o.id]=o,!(a=o).parentId)return void n.push(a);var s=r[a.parentId];if(s)s.children?s.children.push(o):s.children=[o];else{var l={id:a.parentId,children:[a]};r[a.parentId]=l,r[o.id]=o}}else if((0,b.isString)(e.parentId)){var u=r[e.parentId];if(u)u.children?u.children.push(o):u.children=[o],r[o.id]=o;else{var c={id:e.parentId,children:[o]};r[c.id]=c,r[o.id]=o}}else n.push(o),r[o.id]=o}));var o={};(t||[]).forEach((function(e){o[e.id]=e;var t=r[e.comboId];if(t){var n={id:e.id,comboId:e.comboId};t.children?t.children.push(n):t.children=[n],n.itemType="node",r[e.id]=n}}));var a=0;return n.forEach((function(e){e.depth=a+10,Jn(e,(function(e){var t,n=r[e.id].itemType;t="node"===n?r[e.comboId]:r[e.parentId],e.depth=t&&"node"===n?a+1:a+10,a<e.depth&&(a=e.depth);var i=o[e.id];return i&&(i.depth=e.depth),!0}))})),n},rr=function(e,t,n){var r,i=e,o={root:{children:e}},a=!1,s="root";(e||[]).forEach((function(e){if(!a)return e.id===t?(r=e,"combo"===e.itemType?r.parentId=n:r.comboId=n,void(a=!0)):void $n(e,(function(e){return o[e.id]={children:e.children},i=o[e.parentId||e.comboId||"root"].children,!e||!e.removed&&t!==e.id||!i||(s=e.parentId||e.comboId||"root",r=e,"combo"===e.itemType?r.parentId=n:r.comboId=n,a=!0,!1)}))}));var l=(i=o[s].children)?i.indexOf(r):-1;if(l>-1&&i.splice(l,1),a||(r={id:t,itemType:"node",comboId:n},o[t]={children:void 0}),t){var u=!1;if(n){var c=0;(e||[]).forEach((function(e){u||$n(e,(function(e){return n!==e.id||(u=!0,e.children?e.children.push(r):e.children=[r],c=e.depth,"node"===r.itemType?r.depth=c+2:r.depth=c+1,!1)}))}))}else n&&u||"node"===r.itemType||e.push(r);var d=r.depth;$n(r,(function(e){return"node"===e.itemType?d+=2:d+=1,e.depth=d,!0}))}return e},ir=function(e,t){var n={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0,x:void 0,y:void 0,width:void 0,height:void 0,centerX:void 0,centerY:void 0};return e&&0!==e.length?(e.forEach((function(e){var r=t.findById(e.id);if(r&&r.isVisible()){r.set("bboxCanvasCache",void 0);var i=r.getCanvasBBox();i.x&&n.minX>i.minX&&(n.minX=i.minX),i.y&&n.minY>i.minY&&(n.minY=i.minY),i.x&&n.maxX<i.maxX&&(n.maxX=i.maxX),i.y&&n.maxY<i.maxY&&(n.maxY=i.maxY)}})),n.x=(n.minX+n.maxX)/2,n.y=(n.minY+n.maxY)/2,n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2,Object.keys(n).forEach((function(e){n[e]!==1/0&&n[e]!==-1/0||(n[e]=void 0)})),n):n},or=function(e){var t=(0,b.isNumber)(e.x)||(0,b.isNumber)(e.y)||e.type||e.anchorPoints||e.size;return e.style&&(t=t||(0,b.isNumber)(e.style.r)||(0,b.isNumber)(e.style.width)||(0,b.isNumber)(e.style.height)||(0,b.isNumber)(e.style.rx)||(0,b.isNumber)(e.style.ry)),t},ar=function(e){var t={};return Object.keys(e).forEach((function(n){var r=e[n];if((0,b.isObject)(r)){var i={};Object.keys(r).forEach((function(e){var t=r[e];("img"!==e||(0,b.isString)(t))&&(i[e]=(0,b.clone)(t))})),t[n]=i}else t[n]=(0,b.clone)(r)})),t},sr=function(e){if(!e)return console.error("G6 Error Tips: the data must be defined"),!1;var t=e.nodes,n=e.edges,r=e.combos,i=void 0===r?[]:r;if(!t&&!n){var o=!0;return $n(e,(function(e){return!!(0,b.isString)(e.id)||(o=!1,!1)})),o}var a=(t||[]).find((function(e){return!(0,b.isString)(e.id)}));if(a)return console.warn("G6 Warning Tips: missing 'id' property, or %c"+a.id+"%c is not a string.","font-size: 20px; color: red;",""),!1;var s=(t||[]).map((function(e){return e.id})),l=i.map((function(e){return e.id})),u=(0,y.__spreadArray)((0,y.__spreadArray)([],s),l),c=(n||[]).find((function(e){return!u.includes(e.source)||!u.includes(e.target)}));return!c||(console.warn("G6 Warning Tips: The source %c"+c.source+"%c or the target %c"+c.target+"%c of the edge do not exist in the nodes or combos.","font-size: 20px; color: red;","","font-size: 20px; color: red;",""),!1)},lr=function(){function e(e){this.graph=e,this.destroyed=!1,this.modes=e.get("modes")||{default:[]},this.formatModes(),this.mode=e.get("defaultMode")||"default",this.currentBehaves=[],this.setMode(this.mode)}return e.prototype.formatModes=function(){var e=this.modes;(0,b.each)(e,(function(e){(0,b.each)(e,(function(t,n){(0,b.isString)(t)&&(e[n]={type:t})}))}))},e.prototype.setBehaviors=function(e){var t,n=this.graph,r=this.modes[e],i=[];(0,b.each)(r||[],(function(e){var r=x.getBehavior(e.type||e);r&&(t=new r(e))&&(t.bind(n),i.push(t))})),this.currentBehaves=i},e.mergeBehaviors=function(e,t){return(0,b.each)(t,(function(t){e.indexOf(t)<0&&((0,b.isString)(t)&&(t={type:t}),e.push(t))})),e},e.filterBehaviors=function(e,t){var n=[];return e.forEach((function(e){var r="";r=(0,b.isString)(e)?e:e.type,t.indexOf(r)<0&&n.push(e)})),n},e.prototype.setMode=function(e){var t=this.modes,n=this.graph,r=e;t[r]&&(n.emit("beforemodechange",{mode:e}),(0,b.each)(this.currentBehaves,(function(e){e.delegate&&e.delegate.remove(),e.unbind(n)})),this.setBehaviors(r),n.emit("aftermodechange",{mode:e}),this.mode=e)},e.prototype.getMode=function(){return this.mode},e.prototype.manipulateBehaviors=function(t,n,r){var i,o=this;if(i=(0,b.isArray)(t)?t:[t],(0,b.isArray)(n))return(0,b.each)(n,(function(t){o.modes[t]?o.modes[t]=r?e.mergeBehaviors(o.modes[t]||[],i):e.filterBehaviors(o.modes[t]||[],i):r&&(o.modes[t]=i)})),this;var a=n;return n||(a=this.mode),this.modes[a]||r&&(this.modes[a]=i),this.modes[a]=r?e.mergeBehaviors(this.modes[a]||[],i):e.filterBehaviors(this.modes[a]||[],i),this.formatModes(),this.setMode(this.mode),this},e.prototype.updateBehavior=function(e,t,n){(0,b.isString)(e)&&(e={type:e});var r=[];if(n&&n!==this.mode&&"default"!==n){if(!(r=this.modes[n])||!r.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;var i=r.length;for(a=0;a<i;a++){if((s=r[a]).type===e.type||s===e.type)return s===e.type&&(s={type:s}),Object.assign(s,t),r[a]=s,this;a===i-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}else{if(!(r=this.currentBehaves)||!r.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var o=r.length,a=0;a<o;a++){var s;if((s=r[a]).type===e.type)return s.updateCfg(t),this;a===o-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}return this},e.prototype.destroy=function(){this.graph=null,this.modes=null,this.currentBehaves=null,this.destroyed=!0},e}();const ur=lr;var cr="\t\n\v\f\r \u2028\u2029",dr=new RegExp("([a-z])["+cr+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+cr+"]*,?["+cr+"]*)+)","ig"),hr=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+cr+"]*,?["+cr+"]*","ig"),fr=function(e){if(!e)return null;if((0,b.isArray)(e))return e;var t={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},n=[];return String(e).replace(dr,(function(r,i,o){var a=[],s=i.toLowerCase();if(o.replace(hr,(function(e,t){t&&a.push(+t)})),"m"===s&&a.length>2&&(n.push([i].concat(a.splice(0,2))),s="l",i="m"===i?"l":"L"),"o"===s&&1===a.length&&n.push([i,a[0]]),"r"===s)n.push([i].concat(a));else for(;a.length>=t[s]&&(n.push([i].concat(a.splice(0,t[s]))),t[s]););return e})),n},pr=function(e,t){for(var n=[],r=0,i=e.length;i-2*!t>r;r+=2){var o=[{x:+e[r-2],y:+e[r-1]},{x:+e[r],y:+e[r+1]},{x:+e[r+2],y:+e[r+3]},{x:+e[r+4],y:+e[r+5]}];t?r?i-4===r?o[3]={x:+e[0],y:+e[1]}:i-2===r&&(o[2]={x:+e[0],y:+e[1]},o[3]={x:+e[2],y:+e[3]}):o[0]={x:+e[i-2],y:+e[i-1]}:i-4===r?o[3]=o[2]:r||(o[0]={x:+e[r],y:+e[r+1]}),n.push(["C",(-o[0].x+6*o[1].x+o[2].x)/6,(-o[0].y+6*o[1].y+o[2].y)/6,(o[1].x+6*o[2].x-o[3].x)/6,(o[1].y+6*o[2].y-o[3].y)/6,o[2].x,o[2].y])}return n},mr=function(e,t,n,r,i){var o=[];if(null===i&&null===r&&(r=n),e=+e,t=+t,n=+n,r=+r,null!==i){var a=Math.PI/180,s=e+n*Math.cos(-r*a),l=e+n*Math.cos(-i*a);o=[["M",s,t+n*Math.sin(-r*a)],["A",n,n,0,+(i-r>180),0,l,t+n*Math.sin(-i*a)]]}else o=[["M",e,t],["m",0,-r],["a",n,r,0,1,1,0,2*r],["a",n,r,0,1,1,0,-2*r],["z"]];return o},gr=function(e){if(!(e=fr(e))||!e.length)return[["M",0,0]];var t,n,r=[],i=0,o=0,a=0,s=0,l=0;"M"===e[0][0]&&(a=i=+e[0][1],s=o=+e[0][2],l++,r[0]=["M",i,o]);for(var u=3===e.length&&"M"===e[0][0]&&"R"===e[1][0].toUpperCase()&&"Z"===e[2][0].toUpperCase(),c=void 0,d=void 0,h=l,f=e.length;h<f;h++){if(r.push(c=[]),(t=(d=e[h])[0])!==t.toUpperCase())switch(c[0]=t.toUpperCase(),c[0]){case"A":c[1]=d[1],c[2]=d[2],c[3]=d[3],c[4]=d[4],c[5]=d[5],c[6]=+d[6]+i,c[7]=+d[7]+o;break;case"V":c[1]=+d[1]+o;break;case"H":c[1]=+d[1]+i;break;case"R":for(var p=2,m=(n=[i,o].concat(d.slice(1))).length;p<m;p++)n[p]=+n[p]+i,n[++p]=+n[p]+o;r.pop(),r=r.concat(pr(n,u));break;case"O":r.pop(),(n=mr(i,o,d[1],d[2])).push(n[0]),r=r.concat(n);break;case"U":r.pop(),r=r.concat(mr(i,o,d[1],d[2],d[3])),c=["U"].concat(r[r.length-1].slice(-2));break;case"M":a=+d[1]+i,s=+d[2]+o;break;default:for(p=1,m=d.length;p<m;p++)c[p]=+d[p]+(p%2?i:o)}else if("R"===t)n=[i,o].concat(d.slice(1)),r.pop(),r=r.concat(pr(n,u)),c=["R"].concat(d.slice(-2));else if("O"===t)r.pop(),(n=mr(i,o,d[1],d[2])).push(n[0]),r=r.concat(n);else if("U"===t)r.pop(),r=r.concat(mr(i,o,d[1],d[2],d[3])),c=["U"].concat(r[r.length-1].slice(-2));else for(var g=0,v=d.length;g<v;g++)c[g]=d[g];if("O"!==(t=t.toUpperCase()))switch(c[0]){case"Z":i=+a,o=+s;break;case"H":i=c[1];break;case"V":o=c[1];break;case"M":a=c[c.length-2],s=c[c.length-1];break;default:i=c[c.length-2],o=c[c.length-1]}}return r},vr=function(e,t,n,r){return[e,t,n,r,n,r]},yr=function(e,t,n,r,i,o){var a=1/3,s=2/3;return[a*e+s*n,a*t+s*r,a*i+s*n,a*o+s*r,i,o]},br=function(e,t,n,r,i,o,a,s,l,u){n===r&&(n+=1);var c,d,h,f,p,m=120*Math.PI/180,g=Math.PI/180*(+i||0),v=[],y=function(e,t,n){return{x:e*Math.cos(n)-t*Math.sin(n),y:e*Math.sin(n)+t*Math.cos(n)}};if(u)d=u[0],h=u[1],f=u[2],p=u[3];else{e=(c=y(e,t,-g)).x,t=c.y,s=(c=y(s,l,-g)).x,l=c.y,e===s&&t===l&&(s+=1,l+=1);var b=(e-s)/2,_=(t-l)/2,w=b*b/(n*n)+_*_/(r*r);w>1&&(n*=w=Math.sqrt(w),r*=w);var x=n*n,M=r*r,E=(o===a?-1:1)*Math.sqrt(Math.abs((x*M-x*_*_-M*b*b)/(x*_*_+M*b*b)));f=E*n*_/r+(e+s)/2,p=E*-r*b/n+(t+l)/2,d=Math.asin(((t-p)/r).toFixed(9)),h=Math.asin(((l-p)/r).toFixed(9)),d=e<f?Math.PI-d:d,h=s<f?Math.PI-h:h,d<0&&(d=2*Math.PI+d),h<0&&(h=2*Math.PI+h),a&&d>h&&(d-=2*Math.PI),!a&&h>d&&(h-=2*Math.PI)}var S=h-d;if(Math.abs(S)>m){var k=h,T=s,L=l;h=d+m*(a&&h>d?1:-1),s=f+n*Math.cos(h),l=p+r*Math.sin(h),v=br(s,l,n,r,i,0,a,T,L,[h,k,f,p])}S=h-d;var C=Math.cos(d),D=Math.sin(d),A=Math.cos(h),P=Math.sin(h),O=Math.tan(S/4),I=4/3*n*O,R=4/3*r*O,N=[e,t],Y=[e+I*D,t-R*C],j=[s+I*P,l-R*A],F=[s,l];if(Y[0]=2*N[0]-Y[0],Y[1]=2*N[1]-Y[1],u)return[Y,j,F].concat(v);for(var B=[],z=0,H=(v=[Y,j,F].concat(v).join().split(",")).length;z<H;z++)B[z]=z%2?y(v[z-1],v[z],g).y:y(v[z],v[z+1],g).x;return B},_r=function(e,t){var n,r=gr(e),i=t&&gr(t),o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},s=[],l=[],u="",c="",d=function(e,t,n){var r,i;if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];switch(!(e[0]in{T:1,Q:1})&&(t.qx=t.qy=null),e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":e=["C"].concat(br.apply(0,[t.x,t.y].concat(e.slice(1))));break;case"S":"C"===n||"S"===n?(r=2*t.x-t.bx,i=2*t.y-t.by):(r=t.x,i=t.y),e=["C",r,i].concat(e.slice(1));break;case"T":"Q"===n||"T"===n?(t.qx=2*t.x-t.qx,t.qy=2*t.y-t.qy):(t.qx=t.x,t.qy=t.y),e=["C"].concat(yr(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1],t.qy=e[2],e=["C"].concat(yr(t.x,t.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"].concat(vr(t.x,t.y,e[1],e[2]));break;case"H":e=["C"].concat(vr(t.x,t.y,e[1],t.y));break;case"V":e=["C"].concat(vr(t.x,t.y,t.x,e[1]));break;case"Z":e=["C"].concat(vr(t.x,t.y,t.X,t.Y))}return e},h=function(e,t){if(e[t].length>7){e[t].shift();for(var o=e[t];o.length;)s[t]="A",i&&(l[t]="A"),e.splice(t++,0,["C"].concat(o.splice(0,6)));e.splice(t,1),n=Math.max(r.length,i&&i.length||0)}},f=function(e,t,o,a,s){e&&t&&"M"===e[s][0]&&"M"!==t[s][0]&&(t.splice(s,0,["M",a.x,a.y]),o.bx=0,o.by=0,o.x=e[s][1],o.y=e[s][2],n=Math.max(r.length,i&&i.length||0))};n=Math.max(r.length,i&&i.length||0);for(var p=0;p<n;p++){r[p]&&(u=r[p][0]),"C"!==u&&(s[p]=u,p&&(c=s[p-1])),r[p]=d(r[p],o,c),"A"!==s[p]&&"C"===u&&(s[p]="C"),h(r,p),i&&(i[p]&&(u=i[p][0]),"C"!==u&&(l[p]=u,p&&(c=l[p-1])),i[p]=d(i[p],a,c),"A"!==l[p]&&"C"===u&&(l[p]="C"),h(i,p)),f(r,i,o,a,p),f(i,r,a,o,p);var m=r[p],g=i&&i[p],v=m.length,y=i&&g.length;o.x=m[v-2],o.y=m[v-1],o.bx=parseFloat(m[v-4])||o.x,o.by=parseFloat(m[v-3])||o.y,a.bx=i&&(parseFloat(g[y-4])||a.x),a.by=i&&(parseFloat(g[y-3])||a.y),a.x=i&&g[y-2],a.y=i&&g[y-1]}return i?[r,i]:r},wr=/,?([a-z]),?/gi,xr=function(e){return e.join(",").replace(wr,"$1")},Mr=function(e,t,n,r,i){return e*(e*(-3*t+9*n-9*r+3*i)+6*t-12*n+6*r)-3*t+3*n},Er=function(e,t,n,r,i,o,a,s,l){null===l&&(l=1);for(var u=(l=l>1?1:l<0?0:l)/2,c=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],d=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],h=0,f=0;f<12;f++){var p=u*c[f]+u,m=Mr(p,e,n,i,a),g=Mr(p,t,r,o,s),v=m*m+g*g;h+=d[f]*Math.sqrt(v)}return u*h},Sr=function(e,t,n,r,i,o,a,s){for(var l,u,c,d,h=[],f=[[],[]],p=0;p<2;++p)if(0===p?(u=6*e-12*n+6*i,l=-3*e+9*n-9*i+3*a,c=3*n-3*e):(u=6*t-12*r+6*o,l=-3*t+9*r-9*o+3*s,c=3*r-3*t),Math.abs(l)<1e-12){if(Math.abs(u)<1e-12)continue;(d=-c/u)>0&&d<1&&h.push(d)}else{var m=u*u-4*c*l,g=Math.sqrt(m);if(!(m<0)){var v=(-u+g)/(2*l);v>0&&v<1&&h.push(v);var y=(-u-g)/(2*l);y>0&&y<1&&h.push(y)}}for(var b,_=h.length,w=_;_--;)b=1-(d=h[_]),f[0][_]=b*b*b*e+3*b*b*d*n+3*b*d*d*i+d*d*d*a,f[1][_]=b*b*b*t+3*b*b*d*r+3*b*d*d*o+d*d*d*s;return f[0][w]=e,f[1][w]=t,f[0][w+1]=a,f[1][w+1]=s,f[0].length=f[1].length=w+2,{min:{x:Math.min.apply(0,f[0]),y:Math.min.apply(0,f[1])},max:{x:Math.max.apply(0,f[0]),y:Math.max.apply(0,f[1])}}},kr=function(e,t,n,r,i,o,a,s){if(!(Math.max(e,n)<Math.min(i,a)||Math.min(e,n)>Math.max(i,a)||Math.max(t,r)<Math.min(o,s)||Math.min(t,r)>Math.max(o,s))){var l=(e-n)*(o-s)-(t-r)*(i-a);if(l){var u=((e*r-t*n)*(i-a)-(e-n)*(i*s-o*a))/l,c=((e*r-t*n)*(o-s)-(t-r)*(i*s-o*a))/l,d=+u.toFixed(2),h=+c.toFixed(2);if(!(d<+Math.min(e,n).toFixed(2)||d>+Math.max(e,n).toFixed(2)||d<+Math.min(i,a).toFixed(2)||d>+Math.max(i,a).toFixed(2)||h<+Math.min(t,r).toFixed(2)||h>+Math.max(t,r).toFixed(2)||h<+Math.min(o,s).toFixed(2)||h>+Math.max(o,s).toFixed(2)))return{x:u,y:c}}}},Tr=function(e,t,n){return t>=e.x&&t<=e.x+e.width&&n>=e.y&&n<=e.y+e.height},Lr=function(e,t,n,r,i){if(i)return[["M",+e+ +i,t],["l",n-2*i,0],["a",i,i,0,0,1,i,i],["l",0,r-2*i],["a",i,i,0,0,1,-i,i],["l",2*i-n,0],["a",i,i,0,0,1,-i,-i],["l",0,2*i-r],["a",i,i,0,0,1,i,-i],["z"]];var o=[["M",e,t],["l",n,0],["l",0,r],["l",-n,0],["z"]];return o.parsePathArray=xr,o},Cr=function(e,t,n,r){return null===e&&(e=t=n=r=0),null===t&&(t=e.y,n=e.width,r=e.height,e=e.x),{x:e,y:t,width:n,w:n,height:r,h:r,x2:e+n,y2:t+r,cx:e+n/2,cy:t+r/2,r1:Math.min(n,r)/2,r2:Math.max(n,r)/2,r0:Math.sqrt(n*n+r*r)/2,path:Lr(e,t,n,r),vb:[e,t,n,r].join(" ")}},Dr=function(e,t,n,r,i,o,a,s){(0,b.isArray)(e)||(e=[e,t,n,r,i,o,a,s]);var l=Sr.apply(null,e);return Cr(l.min.x,l.min.y,l.max.x-l.min.x,l.max.y-l.min.y)},Ar=function(e,t,n,r,i,o,a,s,l){var u=1-l,c=Math.pow(u,3),d=Math.pow(u,2),h=l*l,f=h*l,p=e+2*l*(n-e)+h*(i-2*n+e),m=t+2*l*(r-t)+h*(o-2*r+t),g=n+2*l*(i-n)+h*(a-2*i+n),v=r+2*l*(o-r)+h*(s-2*o+r);return{x:c*e+3*d*l*n+3*u*l*l*i+f*a,y:c*t+3*d*l*r+3*u*l*l*o+f*s,m:{x:p,y:m},n:{x:g,y:v},start:{x:u*e+l*n,y:u*t+l*r},end:{x:u*i+l*a,y:u*o+l*s},alpha:90-180*Math.atan2(p-g,m-v)/Math.PI}},Pr=function(e,t,n){if(!function(e,t){return e=Cr(e),t=Cr(t),Tr(t,e.x,e.y)||Tr(t,e.x2,e.y)||Tr(t,e.x,e.y2)||Tr(t,e.x2,e.y2)||Tr(e,t.x,t.y)||Tr(e,t.x2,t.y)||Tr(e,t.x,t.y2)||Tr(e,t.x2,t.y2)||(e.x<t.x2&&e.x>t.x||t.x<e.x2&&t.x>e.x)&&(e.y<t.y2&&e.y>t.y||t.y<e.y2&&t.y>e.y)}(Dr(e),Dr(t)))return n?0:[];for(var r=~~(Er.apply(0,e)/8),i=~~(Er.apply(0,t)/8),o=[],a=[],s={},l=n?0:[],u=0;u<r+1;u++){var c=Ar.apply(0,e.concat(u/r));o.push({x:c.x,y:c.y,t:u/r})}for(u=0;u<i+1;u++){c=Ar.apply(0,t.concat(u/i));a.push({x:c.x,y:c.y,t:u/i})}for(u=0;u<r;u++)for(var d=0;d<i;d++){var h=o[u],f=o[u+1],p=a[d],m=a[d+1],g=Math.abs(f.x-h.x)<.001?"y":"x",v=Math.abs(m.x-p.x)<.001?"y":"x",y=kr(h.x,h.y,f.x,f.y,p.x,p.y,m.x,m.y);if(y){if(s[y.x.toFixed(4)]===y.y.toFixed(4))continue;s[y.x.toFixed(4)]=y.y.toFixed(4);var b=h.t+Math.abs((y[g]-h[g])/(f[g]-h[g]))*(f.t-h.t),_=p.t+Math.abs((y[v]-p[v])/(m[v]-p[v]))*(m.t-p.t);b>=0&&b<=1&&_>=0&&_<=1&&(n?l+=1:l.push({x:y.x,y:y.y,t1:b,t2:_}))}}return l},Or=function(e,t){return function(e,t,n){var r,i,o,a,s,l,u,c,d,h;e=_r(e),t=_r(t);for(var f=n?0:[],p=0,m=e.length;p<m;p++){var g=e[p];if("M"===g[0])r=s=g[1],i=l=g[2];else{"C"===g[0]?(d=[r,i].concat(g.slice(1)),r=d[6],i=d[7]):(d=[r,i,r,i,s,l,s,l],r=s,i=l);for(var v=0,y=t.length;v<y;v++){var b=t[v];if("M"===b[0])o=u=b[1],a=c=b[2];else{"C"===b[0]?(h=[o,a].concat(b.slice(1)),o=h[6],a=h[7]):(h=[o,a,o,a,u,c,u,c],o=u,a=c);var _=Pr(d,h,n);if(n)f+=_;else{for(var w=0,x=_.length;w<x;w++)_[w].segment1=p,_[w].segment2=v,_[w].bez1=d,_[w].bez2=h;f=f.concat(_)}}}}}return f}(e,t)};function Ir(e,t){var n=[],r=[];return e.length&&function e(t,i){if(1===t.length)n.push(t[0]),r.push(t[0]);else{for(var o=[],a=0;a<t.length-1;a++)0===a&&n.push(t[0]),a===t.length-2&&r.push(t[a+1]),o[a]=[(1-i)*t[a][0]+i*t[a+1][0],(1-i)*t[a][1]+i*t[a+1][1]];e(o,i)}}(e,t),{left:n,right:r.reverse()}}var Rr=function(e,t,n){if(1===n)return[[].concat(e)];var r=[];if("L"===t[0]||"C"===t[0]||"Q"===t[0])r=r.concat(function(e,t,n){var r=[[e[1],e[2]]];n=n||2;var i=[];"A"===t[0]?(r.push(t[6]),r.push(t[7])):"C"===t[0]?(r.push([t[1],t[2]]),r.push([t[3],t[4]]),r.push([t[5],t[6]])):"S"===t[0]||"Q"===t[0]?(r.push([t[1],t[2]]),r.push([t[3],t[4]])):r.push([t[1],t[2]]);for(var o=r,a=1/n,s=0;s<n-1;s++){var l=Ir(o,a/(1-a*s));i.push(l.left),o=l.right}return i.push(o),i.map((function(e){var t=[];return 4===e.length&&(t.push("C"),t=t.concat(e[2])),e.length>=3&&(3===e.length&&t.push("Q"),t=t.concat(e[1])),2===e.length&&t.push("L"),t.concat(e[e.length-1])}))}(e,t,n));else{var i=[].concat(e);"M"===i[0]&&(i[0]="L");for(var o=0;o<=n-1;o++)r.push(i)}return r},Nr=function(e,t){if(1===e.length)return e;var n=e.length-1,r=t.length-1,i=n/r,o=[];if(1===e.length&&"M"===e[0][0]){for(var a=0;a<r-n;a++)e.push(e[0]);return e}for(a=0;a<r;a++){var s=Math.floor(i*a);o[s]=(o[s]||0)+1}var l=o.reduce((function(t,r,i){return i===n?t.concat(e[n]):t.concat(Rr(e[i],e[i+1],r))}),[]);return l.unshift(e[0]),"Z"!==t[r]&&"z"!==t[r]||l.push("Z"),l},Yr=function(e,t){if(e.length!==t.length)return!1;var n=!0;return(0,b.each)(e,(function(e,r){if(e!==t[r])return n=!1,!1})),n};function jr(e,t,n){var r=null,i=n;return t<i&&(i=t,r="add"),e<i&&(i=e,r="del"),{type:r,min:i}}var Fr=function(e,t){var n=function(e,t){var n,r,i=e.length,o=t.length,a=0;if(0===i||0===o)return null;for(var s=[],l=0;l<=i;l++)s[l]=[],s[l][0]={min:l};for(var u=0;u<=o;u++)s[0][u]={min:u};for(l=1;l<=i;l++)for(n=e[l-1],u=1;u<=o;u++){r=t[u-1],a=Yr(n,r)?0:1;var c=s[l-1][u].min+1,d=s[l][u-1].min+1,h=s[l-1][u-1].min+a;s[l][u]=jr(c,d,h)}return s}(e,t),r=e.length,i=t.length,o=[],a=1,s=1;if(n[r][i].min!==r){for(var l=1;l<=r;l++){var u=n[l][l].min;s=l;for(var c=a;c<=i;c++)n[l][c].min<u&&(u=n[l][c].min,s=c);a=s,n[l][a].type&&o.push({index:l-1,type:n[l][a].type})}for(l=o.length-1;l>=0;l--)a=o[l].index,"add"===o[l].type?e.splice(a,0,[].concat(e[a])):e.splice(a,1)}var d=i-(r=e.length);if(r<i)for(l=0;l<d;l++)"z"===e[r-1][0]||"Z"===e[r-1][0]?e.splice(r-2,0,e[r-2]):e.push(e[r-1]),r+=1;return e};function Br(e,t,n){for(var r,i=[].concat(e),o=1/(n+1),a=zr(t)[0],s=1;s<=n;s++)o*=s,0===(r=Math.floor(e.length*o))?i.unshift([a[0]*o+e[r][0]*(1-o),a[1]*o+e[r][1]*(1-o)]):i.splice(r,0,[a[0]*o+e[r][0]*(1-o),a[1]*o+e[r][1]*(1-o)]);return i}function zr(e){var t=[];switch(e[0]){case"M":case"L":case"T":t.push([e[1],e[2]]);break;case"A":t.push([e[6],e[7]]);break;case"Q":case"S":t.push([e[3],e[4]]),t.push([e[1],e[2]]);break;case"C":t.push([e[5],e[6]]),t.push([e[1],e[2]]),t.push([e[3],e[4]]);break;case"H":case"V":t.push([e[1],e[1]])}return t}var Hr=function(e,t){if(e.length<=1)return e;for(var n,r=0;r<t.length;r++)if(e[r][0]!==t[r][0])switch(n=zr(e[r]),t[r][0]){case"M":e[r]=["M"].concat(n[0]);break;case"L":e[r]=["L"].concat(n[0]);break;case"A":e[r]=[].concat(t[r]),e[r][6]=n[0][0],e[r][7]=n[0][1];break;case"Q":if(n.length<2){if(!(r>0)){e[r]=t[r];break}n=Br(n,e[r-1],1)}e[r]=["Q"].concat(n.reduce((function(e,t){return e.concat(t)}),[]));break;case"T":e[r]=["T"].concat(n[0]);break;case"C":if(n.length<3){if(!(r>0)){e[r]=t[r];break}n=Br(n,e[r-1],2)}e[r]=["C"].concat(n.reduce((function(e,t){return e.concat(t)}),[]));break;case"S":if(n.length<2){if(!(r>0)){e[r]=t[r];break}n=Br(n,e[r-1],1)}e[r]=["S"].concat(n.reduce((function(e,t){return e.concat(t)}),[]));break;default:e[r]=t[r]}return e};const Gr=function(){function e(e,t){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=e,this.name=e,this.originalEvent=t,this.timeStamp=t.timeStamp}return e.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){this.propagationStopped=!0},e.prototype.toString=function(){return"[Event (type="+this.type+")]"},e.prototype.save=function(){},e.prototype.restore=function(){},e}();function Wr(e,t){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}var Ur="undefined"!=typeof window&&void 0!==window.document;function Vr(e,t){if(e.isCanvas())return!0;for(var n=t.getParent(),r=!1;n;){if(n===e){r=!0;break}n=n.getParent()}return r}function Xr(e){return e.cfg.visible&&e.cfg.capture}var qr=function(e){function t(t){var n=e.call(this)||this;n.destroyed=!1;var r=n.getDefaultCfg();return n.cfg=(0,b.mix)(r,t),n}return(0,y.__extends)(t,e),t.prototype.getDefaultCfg=function(){return{}},t.prototype.get=function(e){return this.cfg[e]},t.prototype.set=function(e,t){this.cfg[e]=t},t.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},t}(S);var Kr=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},Jr=function(e,t,n){this.name=e,this.version=t,this.os=n,this.type="browser"},Zr=function(e){this.version=e,this.type="node",this.name="node",this.os=process.platform},$r=function(e,t,n,r){this.name=e,this.version=t,this.os=n,this.bot=r,this.type="bot-device"},Qr=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},ei=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},ti=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,ni=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],ri=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function ii(e){return e?ai(e):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new ei:"undefined"!=typeof navigator?ai(navigator.userAgent):"undefined"!=typeof process&&process.version?new Zr(process.version.slice(1)):null}function oi(e){return""!==e&&ni.reduce((function(t,n){var r=n[0],i=n[1];if(t)return t;var o=i.exec(e);return!!o&&[r,o]}),!1)}function ai(e){var t=oi(e);if(!t)return null;var n=t[0],r=t[1];if("searchbot"===n)return new Qr;var i=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);i?i.length<3&&(i=Kr(Kr([],i,!0),function(e){for(var t=[],n=0;n<e;n++)t.push("0");return t}(3-i.length),!0)):i=[];var o=i.join("."),a=function(e){for(var t=0,n=ri.length;t<n;t++){var r=ri[t],i=r[0];if(r[1].exec(e))return i}return null}(e),s=ti.exec(e);return s&&s[1]?new $r(n,o,a,s[1]):new Jr(n,o,a)}function si(e,t,n){var r=[0,0,0,0,0,0,0,0,0];return G(r,n),F(e,r,t)}function li(e,t,n){var r=[0,0,0,0,0,0,0,0,0];return W(r,n),F(e,r,t)}function ui(e,t,n){var r=[0,0,0,0,0,0,0,0,0];return U(r,n),F(e,r,t)}function ci(e,t,n){return F(e,n,t)}function di(e,t){var n=[],r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],d=e[8],h=t[0],f=t[1],p=t[2],m=t[3],g=t[4],v=t[5],y=t[6],b=t[7],_=t[8];return n[0]=h*r+f*a+p*u,n[1]=h*i+f*s+p*c,n[2]=h*o+f*l+p*d,n[3]=m*r+g*a+v*u,n[4]=m*i+g*s+v*c,n[5]=m*o+g*l+v*d,n[6]=y*r+b*a+_*u,n[7]=y*i+b*s+_*c,n[8]=y*o+b*l+_*d,n}function hi(e,t){var n=[],r=t[0],i=t[1];return n[0]=e[0]*r+e[3]*i+e[6],n[1]=e[1]*r+e[4]*i+e[7],n}function fi(e){var t=[],n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],d=c*a-s*u,h=-c*o+s*l,f=u*o-a*l,p=n*d+r*h+i*f;return p?(p=1/p,t[0]=d*p,t[1]=(-c*r+i*u)*p,t[2]=(s*r-i*a)*p,t[3]=h*p,t[4]=(c*n-i*l)*p,t[5]=(-s*n+i*o)*p,t[6]=f*p,t[7]=(-u*n+r*l)*p,t[8]=(a*n-r*o)*p,t):null}var pi=function(e,t){for(var n=e?[].concat(e):[1,0,0,0,1,0,0,0,1],r=0,i=t.length;r<i;r++){var o=t[r];switch(o[0]){case"t":si(n,n,[o[1],o[2]]);break;case"s":ui(n,n,[o[1],o[2]]);break;case"r":li(n,n,o[1]);break;case"m":ci(n,n,o[1])}}return n},mi="matrix",gi=["zIndex","capture","visible","type"],vi=["repeat"];function yi(e,t){var n={},r=t.attrs;for(var i in e)n[i]=r[i];return n}function bi(e,t){var n={},r=t.attr();return(0,b.each)(e,(function(e,t){-1!==vi.indexOf(t)||(0,b.isEqual)(r[t],e)||(n[t]=e)})),n}function _i(e,t){if(t.onFrame)return e;var n=t.startTime,r=t.delay,i=t.duration,o=Object.prototype.hasOwnProperty;return(0,b.each)(e,(function(e){n+r<e.startTime+e.delay+e.duration&&i>e.delay&&(0,b.each)(t.toAttrs,(function(t,n){o.call(e.toAttrs,n)&&(delete e.toAttrs[n],delete e.fromAttrs[n])}))})),e}var wi=function(e){function t(t){var n=e.call(this,t)||this;n.attrs={};var r=n.getDefaultAttrs();return(0,b.mix)(r,t.attrs),n.attrs=r,n.initAttrs(r),n.initAnimate(),n}return(0,y.__extends)(t,e),t.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},t.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},t.prototype.onCanvasChange=function(e){},t.prototype.initAttrs=function(e){},t.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},t.prototype.isGroup=function(){return!1},t.prototype.getParent=function(){return this.get("parent")},t.prototype.getCanvas=function(){return this.get("canvas")},t.prototype.attr=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t[0],i=t[1];if(!r)return this.attrs;if((0,b.isObject)(r)){for(var o in r)this.setAttr(o,r[o]);return this.afterAttrsChange(r),this}return 2===t.length?(this.setAttr(r,i),this.afterAttrsChange(((e={})[r]=i,e)),this):this.attrs[r]},t.prototype.isClipped=function(e,t){var n=this.getClip();return n&&!n.isHit(e,t)},t.prototype.setAttr=function(e,t){var n=this.attrs[e];n!==t&&(this.attrs[e]=t,this.onAttrChange(e,t,n))},t.prototype.onAttrChange=function(e,t,n){"matrix"===e&&this.set("totalMatrix",null)},t.prototype.afterAttrsChange=function(e){if(this.cfg.isClipShape){var t=this.cfg.applyTo;t&&t.onCanvasChange("clip")}else this.onCanvasChange("attr")},t.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},t.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},t.prototype.setZIndex=function(e){this.set("zIndex",e);var t=this.getParent();return t&&t.sort(),this},t.prototype.toFront=function(){var e=this.getParent();if(e){var t=e.getChildren(),n=(this.get("el"),t.indexOf(this));t.splice(n,1),t.push(this),this.onCanvasChange("zIndex")}},t.prototype.toBack=function(){var e=this.getParent();if(e){var t=e.getChildren(),n=(this.get("el"),t.indexOf(this));t.splice(n,1),t.unshift(this),this.onCanvasChange("zIndex")}},t.prototype.remove=function(e){void 0===e&&(e=!0);var t=this.getParent();t?(Wr(t.getChildren(),this),t.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),e&&this.destroy()},t.prototype.resetMatrix=function(){this.attr(mi,this.getDefaultMatrix()),this.onCanvasChange("matrix")},t.prototype.getMatrix=function(){return this.attr(mi)},t.prototype.setMatrix=function(e){this.attr(mi,e),this.onCanvasChange("matrix")},t.prototype.getTotalMatrix=function(){var e=this.cfg.totalMatrix;if(!e){var t=this.attr("matrix"),n=this.cfg.parentMatrix;e=n&&t?di(n,t):t||n,this.set("totalMatrix",e)}return e},t.prototype.applyMatrix=function(e){var t=this.attr("matrix"),n=null;n=e&&t?di(e,t):t||e,this.set("totalMatrix",n),this.set("parentMatrix",e)},t.prototype.getDefaultMatrix=function(){return null},t.prototype.applyToMatrix=function(e){var t=this.attr("matrix");return t?hi(t,e):e},t.prototype.invertFromMatrix=function(e){var t=this.attr("matrix");if(t){var n=fi(t);if(n)return hi(n,e)}return e},t.prototype.setClip=function(e){var t=this.getCanvas(),n=null;if(e){var r=this.getShapeBase()[(0,b.upperFirst)(e.type)];r&&(n=new r({type:e.type,isClipShape:!0,applyTo:this,attrs:e.attrs,canvas:t}))}return this.set("clipShape",n),this.onCanvasChange("clip"),n},t.prototype.getClip=function(){var e=this.cfg.clipShape;return e||null},t.prototype.clone=function(){var e=this,t=this.attrs,n={};(0,b.each)(t,(function(e,r){(0,b.isArray)(t[r])?n[r]=function(e){for(var t=[],n=0;n<e.length;n++)(0,b.isArray)(e[n])?t.push([].concat(e[n])):t.push(e[n]);return t}(t[r]):n[r]=t[r]}));var r=new(0,this.constructor)({attrs:n});return(0,b.each)(gi,(function(t){r.set(t,e.get(t))})),r},t.prototype.destroy=function(){this.destroyed||(this.attrs={},e.prototype.destroy.call(this))},t.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},t.prototype.animate=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(this.get("timeline")||this.get("canvas")){this.set("animating",!0);var n=this.get("timeline");n||(n=this.get("canvas").get("timeline"),this.set("timeline",n));var r=this.get("animations")||[];n.timer||n.initTimer();var i,o,a,s,l,u=e[0],c=e[1],d=e[2],h=void 0===d?"easeLinear":d,f=e[3],p=void 0===f?b.noop:f,m=e[4],g=void 0===m?0:m;(0,b.isFunction)(u)?(i=u,u={}):(0,b.isObject)(u)&&u.onFrame&&(i=u.onFrame,o=u.repeat),(0,b.isObject)(c)?(c=(l=c).duration,h=l.easing||"easeLinear",g=l.delay||0,o=l.repeat||o||!1,p=l.callback||b.noop,a=l.pauseCallback||b.noop,s=l.resumeCallback||b.noop):((0,b.isNumber)(p)&&(g=p,p=null),(0,b.isFunction)(h)?(p=h,h="easeLinear"):h=h||"easeLinear");var v=bi(u,this),y={fromAttrs:yi(v,this),toAttrs:v,duration:c,easing:h,repeat:o,callback:p,pauseCallback:a,resumeCallback:s,delay:g,startTime:n.getTime(),id:(0,b.uniqueId)(),onFrame:i,pathFormatted:!1};r.length>0?r=_i(r,y):n.addAnimator(this),r.push(y),this.set("animations",r),this.set("_pause",{isPaused:!1})}},t.prototype.stopAnimate=function(e){var t=this;void 0===e&&(e=!0);var n=this.get("animations");(0,b.each)(n,(function(n){e&&(n.onFrame?t.attr(n.onFrame(1)):t.attr(n.toAttrs)),n.callback&&n.callback()})),this.set("animating",!1),this.set("animations",[])},t.prototype.pauseAnimate=function(){var e=this.get("timeline"),t=this.get("animations"),n=e.getTime();return(0,b.each)(t,(function(e){e._paused=!0,e._pauseTime=n,e.pauseCallback&&e.pauseCallback()})),this.set("_pause",{isPaused:!0,pauseTime:n}),this},t.prototype.resumeAnimate=function(){var e=this.get("timeline").getTime(),t=this.get("animations"),n=this.get("_pause").pauseTime;return(0,b.each)(t,(function(t){t.startTime=t.startTime+(e-n),t._paused=!1,t._pauseTime=null,t.resumeCallback&&t.resumeCallback()})),this.set("_pause",{isPaused:!1}),this.set("animations",t),this},t.prototype.emitDelegation=function(e,t){var n,r=this,i=t.propagationPath;this.getEvents();"mouseenter"===e?n=t.fromShape:"mouseleave"===e&&(n=t.toShape);for(var o=function(e){var o=i[e],s=o.get("name");if(s){if((o.isGroup()||o.isCanvas&&o.isCanvas())&&n&&Vr(o,n))return"break";(0,b.isArray)(s)?(0,b.each)(s,(function(e){r.emitDelegateEvent(o,e,t)})):a.emitDelegateEvent(o,s,t)}},a=this,s=0;s<i.length;s++){if("break"===o(s))break}},t.prototype.emitDelegateEvent=function(e,t,n){var r=this.getEvents(),i=t+":"+n.type;(r[i]||r["*"])&&(n.name=i,n.currentTarget=e,n.delegateTarget=this,n.delegateObject=e.get("delegateObject"),this.emit(i,n))},t.prototype.translate=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0);var n=this.getMatrix(),r=pi(n,[["t",e,t]]);return this.setMatrix(r),this},t.prototype.move=function(e,t){var n=this.attr("x")||0,r=this.attr("y")||0;return this.translate(e-n,t-r),this},t.prototype.moveTo=function(e,t){return this.move(e,t)},t.prototype.scale=function(e,t){var n=this.getMatrix(),r=pi(n,[["s",e,t||e]]);return this.setMatrix(r),this},t.prototype.rotate=function(e){var t=this.getMatrix(),n=pi(t,[["r",e]]);return this.setMatrix(n),this},t.prototype.rotateAtStart=function(e){var t=this.attr(),n=t.x,r=t.y,i=this.getMatrix(),o=pi(i,[["t",-n,-r],["r",e],["t",n,r]]);return this.setMatrix(o),this},t.prototype.rotateAtPoint=function(e,t,n){var r=this.getMatrix(),i=pi(r,[["t",-e,-t],["r",n],["t",e,t]]);return this.setMatrix(i),this},t}(qr);const xi=wi;var Mi={};function Ei(e,t){if(e.set("canvas",t),e.isGroup()){var n=e.get("children");n.length&&n.forEach((function(e){Ei(e,t)}))}}function Si(e,t){if(e.set("timeline",t),e.isGroup()){var n=e.get("children");n.length&&n.forEach((function(e){Si(e,t)}))}}var ki=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,y.__extends)(t,e),t.prototype.isCanvas=function(){return!1},t.prototype.getBBox=function(){var e=1/0,t=-1/0,n=1/0,r=-1/0,i=[],o=[],a=this.getChildren().filter((function(e){return e.get("visible")&&(!e.isGroup()||e.isGroup()&&e.getChildren().length>0)}));return a.length>0?((0,b.each)(a,(function(e){var t=e.getBBox();i.push(t.minX,t.maxX),o.push(t.minY,t.maxY)})),e=(0,b.min)(i),t=(0,b.max)(i),n=(0,b.min)(o),r=(0,b.max)(o)):(e=0,t=0,n=0,r=0),{x:e,y:n,minX:e,minY:n,maxX:t,maxY:r,width:t-e,height:r-n}},t.prototype.getCanvasBBox=function(){var e=1/0,t=-1/0,n=1/0,r=-1/0,i=[],o=[],a=this.getChildren().filter((function(e){return e.get("visible")&&(!e.isGroup()||e.isGroup()&&e.getChildren().length>0)}));return a.length>0?((0,b.each)(a,(function(e){var t=e.getCanvasBBox();i.push(t.minX,t.maxX),o.push(t.minY,t.maxY)})),e=(0,b.min)(i),t=(0,b.max)(i),n=(0,b.min)(o),r=(0,b.max)(o)):(e=0,t=0,n=0,r=0),{x:e,y:n,minX:e,minY:n,maxX:t,maxY:r,width:t-e,height:r-n}},t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return t.children=[],t},t.prototype.onAttrChange=function(t,n,r){if(e.prototype.onAttrChange.call(this,t,n,r),"matrix"===t){var i=this.getTotalMatrix();this._applyChildrenMarix(i)}},t.prototype.applyMatrix=function(t){var n=this.getTotalMatrix();e.prototype.applyMatrix.call(this,t);var r=this.getTotalMatrix();r!==n&&this._applyChildrenMarix(r)},t.prototype._applyChildrenMarix=function(e){var t=this.getChildren();(0,b.each)(t,(function(t){t.applyMatrix(e)}))},t.prototype.addShape=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[0],r=e[1];(0,b.isObject)(n)?r=n:r.type=n;var i=Mi[r.type];i||(i=(0,b.upperFirst)(r.type),Mi[r.type]=i);var o=this.getShapeBase(),a=new o[i](r);return this.add(a),a},t.prototype.addGroup=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n,r=e[0],i=e[1];if((0,b.isFunction)(r))n=new r(i||{parent:this});else{var o=r||{},a=this.getGroupBase();n=new a(o)}return this.add(n),n},t.prototype.getCanvas=function(){return this.isCanvas()?this:this.get("canvas")},t.prototype.getShape=function(e,t,n){if(!Xr(this))return null;var r,i=this.getChildren();if(this.isCanvas())r=this._findShape(i,e,t,n);else{var o=[e,t,1];o=this.invertFromMatrix(o),this.isClipped(o[0],o[1])||(r=this._findShape(i,o[0],o[1],n))}return r},t.prototype._findShape=function(e,t,n,r){for(var i=null,o=e.length-1;o>=0;o--){var a=e[o];if(Xr(a)&&(a.isGroup()?i=a.getShape(t,n,r):a.isHit(t,n)&&(i=a)),i)break}return i},t.prototype.add=function(e){var t=this.getCanvas(),n=this.getChildren(),r=this.get("timeline"),i=e.getParent();i&&function(e,t,n){void 0===n&&(n=!0),n?t.destroy():(t.set("parent",null),t.set("canvas",null)),Wr(e.getChildren(),t)}(i,e,!1),e.set("parent",this),t&&Ei(e,t),r&&Si(e,r),n.push(e),e.onCanvasChange("add"),this._applyElementMatrix(e)},t.prototype._applyElementMatrix=function(e){var t=this.getTotalMatrix();t&&e.applyMatrix(t)},t.prototype.getChildren=function(){return this.get("children")},t.prototype.sort=function(){var e=this.getChildren();(0,b.each)(e,(function(e,t){return e._INDEX=t,e})),e.sort(function(e){return function(t,n){var r=e(t,n);return 0===r?t._INDEX-n._INDEX:r}}((function(e,t){return e.get("zIndex")-t.get("zIndex")}))),this.onCanvasChange("sort")},t.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var e=this.getChildren(),t=e.length-1;t>=0;t--)e[t].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},t.prototype.destroy=function(){this.get("destroyed")||(this.clear(),e.prototype.destroy.call(this))},t.prototype.getFirst=function(){return this.getChildByIndex(0)},t.prototype.getLast=function(){var e=this.getChildren();return this.getChildByIndex(e.length-1)},t.prototype.getChildByIndex=function(e){return this.getChildren()[e]},t.prototype.getCount=function(){return this.getChildren().length},t.prototype.contain=function(e){return this.getChildren().indexOf(e)>-1},t.prototype.removeChild=function(e,t){void 0===t&&(t=!0),this.contain(e)&&e.remove(t)},t.prototype.findAll=function(e){var t=[],n=this.getChildren();return(0,b.each)(n,(function(n){e(n)&&t.push(n),n.isGroup()&&(t=t.concat(n.findAll(e)))})),t},t.prototype.find=function(e){var t=null,n=this.getChildren();return(0,b.each)(n,(function(n){if(e(n)?t=n:n.isGroup()&&(t=n.find(e)),t)return!1})),t},t.prototype.findById=function(e){return this.find((function(t){return t.get("id")===e}))},t.prototype.findByClassName=function(e){return this.find((function(t){return t.get("className")===e}))},t.prototype.findAllByName=function(e){return this.findAll((function(t){return t.get("name")===e}))},t}(xi);const Ti=ki;var Li,Ci,Di=0,Ai=0,Pi=0,Oi=0,Ii=0,Ri=0,Ni="object"==typeof performance&&performance.now?performance:Date,Yi="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function ji(){return Ii||(Yi(Fi),Ii=Ni.now()+Ri)}function Fi(){Ii=0}function Bi(){this._call=this._time=this._next=null}function zi(e,t,n){var r=new Bi;return r.restart(e,t,n),r}function Hi(){Ii=(Oi=Ni.now())+Ri,Di=Ai=0;try{!function(){ji(),++Di;for(var e,t=Li;t;)(e=Ii-t._time)>=0&&t._call.call(null,e),t=t._next;--Di}()}finally{Di=0,function(){var e,t,n=Li,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:Li=t);Ci=e,Wi(r)}(),Ii=0}}function Gi(){var e=Ni.now(),t=e-Oi;t>1e3&&(Ri-=t,Oi=e)}function Wi(e){Di||(Ai&&(Ai=clearTimeout(Ai)),e-Ii>24?(e<1/0&&(Ai=setTimeout(Hi,e-Ni.now()-Ri)),Pi&&(Pi=clearInterval(Pi))):(Pi||(Oi=Ni.now(),Pi=setInterval(Gi,1e3)),Di=1,Yi(Hi)))}function Ui(e){return+e}function Vi(e){return e*e}function Xi(e){return e*(2-e)}function qi(e){return((e*=2)<=1?e*e:--e*(2-e)+1)/2}function Ki(e){return e*e*e}function Ji(e){return--e*e*e+1}function Zi(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}Bi.prototype=zi.prototype={constructor:Bi,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?ji():+n)+(null==t?0:+t),this._next||Ci===this||(Ci?Ci._next=this:Li=this,Ci=this),this._call=e,this._time=n,Wi()},stop:function(){this._call&&(this._call=null,this._time=1/0,Wi())}};var $i=function e(t){function n(e){return Math.pow(e,t)}return t=+t,n.exponent=e,n}(3),Qi=function e(t){function n(e){return 1-Math.pow(1-e,t)}return t=+t,n.exponent=e,n}(3),eo=function e(t){function n(e){return((e*=2)<=1?Math.pow(e,t):2-Math.pow(2-e,t))/2}return t=+t,n.exponent=e,n}(3),to=Math.PI,no=to/2;function ro(e){return 1==+e?1:1-Math.cos(e*no)}function io(e){return Math.sin(e*no)}function oo(e){return(1-Math.cos(to*e))/2}function ao(e){return 1.0009775171065494*(Math.pow(2,-10*e)-.0009765625)}function so(e){return ao(1-+e)}function lo(e){return 1-ao(e)}function uo(e){return((e*=2)<=1?ao(1-e):2-ao(e-1))/2}function co(e){return 1-Math.sqrt(1-e*e)}function ho(e){return Math.sqrt(1- --e*e)}function fo(e){return((e*=2)<=1?1-Math.sqrt(1-e*e):Math.sqrt(1-(e-=2)*e)+1)/2}var po=4/11,mo=7.5625;function go(e){return 1-vo(1-e)}function vo(e){return(e=+e)<po?mo*e*e:e<.7272727272727273?mo*(e-=.5454545454545454)*e+.75:e<.9090909090909091?mo*(e-=.8181818181818182)*e+.9375:mo*(e-=.9545454545454546)*e+.984375}function yo(e){return((e*=2)<=1?1-vo(1-e):vo(e-1)+1)/2}var bo=1.70158,_o=function e(t){function n(e){return(e=+e)*e*(t*(e-1)+e)}return t=+t,n.overshoot=e,n}(bo),wo=function e(t){function n(e){return--e*e*((e+1)*t+e)+1}return t=+t,n.overshoot=e,n}(bo),xo=function e(t){function n(e){return((e*=2)<1?e*e*((t+1)*e-t):(e-=2)*e*((t+1)*e+t)+2)/2}return t=+t,n.overshoot=e,n}(bo),Mo=2*Math.PI,Eo=function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=Mo);function i(e){return t*ao(- --e)*Math.sin((r-e)/n)}return i.amplitude=function(t){return e(t,n*Mo)},i.period=function(n){return e(t,n)},i}(1,.3),So=function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=Mo);function i(e){return 1-t*ao(e=+e)*Math.sin((e+r)/n)}return i.amplitude=function(t){return e(t,n*Mo)},i.period=function(n){return e(t,n)},i}(1,.3),ko=function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=Mo);function i(e){return((e=2*e-1)<0?t*ao(-e)*Math.sin((r-e)/n):2-t*ao(e)*Math.sin((r+e)/n))/2}return i.amplitude=function(t){return e(t,n*Mo)},i.period=function(n){return e(t,n)},i}(1,.3);function To(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Lo(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Co(){}var Do=.7,Ao=1/Do,Po="\\s*([+-]?\\d+)\\s*",Oo="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Io="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ro=/^#([0-9a-f]{3,8})$/,No=new RegExp("^rgb\\("+[Po,Po,Po]+"\\)$"),Yo=new RegExp("^rgb\\("+[Io,Io,Io]+"\\)$"),jo=new RegExp("^rgba\\("+[Po,Po,Po,Oo]+"\\)$"),Fo=new RegExp("^rgba\\("+[Io,Io,Io,Oo]+"\\)$"),Bo=new RegExp("^hsl\\("+[Oo,Io,Io]+"\\)$"),zo=new RegExp("^hsla\\("+[Oo,Io,Io,Oo]+"\\)$"),Ho={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Go(){return this.rgb().formatHex()}function Wo(){return this.rgb().formatRgb()}function Uo(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Ro.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?Vo(t):3===n?new Jo(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?Xo(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?Xo(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=No.exec(e))?new Jo(t[1],t[2],t[3],1):(t=Yo.exec(e))?new Jo(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=jo.exec(e))?Xo(t[1],t[2],t[3],t[4]):(t=Fo.exec(e))?Xo(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=Bo.exec(e))?ea(t[1],t[2]/100,t[3]/100,1):(t=zo.exec(e))?ea(t[1],t[2]/100,t[3]/100,t[4]):Ho.hasOwnProperty(e)?Vo(Ho[e]):"transparent"===e?new Jo(NaN,NaN,NaN,0):null}function Vo(e){return new Jo(e>>16&255,e>>8&255,255&e,1)}function Xo(e,t,n,r){return r<=0&&(e=t=n=NaN),new Jo(e,t,n,r)}function qo(e){return e instanceof Co||(e=Uo(e)),e?new Jo((e=e.rgb()).r,e.g,e.b,e.opacity):new Jo}function Ko(e,t,n,r){return 1===arguments.length?qo(e):new Jo(e,t,n,null==r?1:r)}function Jo(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function Zo(){return"#"+Qo(this.r)+Qo(this.g)+Qo(this.b)}function $o(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function Qo(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function ea(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new na(e,t,n,r)}function ta(e){if(e instanceof na)return new na(e.h,e.s,e.l,e.opacity);if(e instanceof Co||(e=Uo(e)),!e)return new na;if(e instanceof na)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,s=o-i,l=(o+i)/2;return s?(a=t===o?(n-r)/s+6*(n<r):n===o?(r-t)/s+2:(t-n)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=l>0&&l<1?0:a,new na(a,s,l,e.opacity)}function na(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function ra(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function ia(e,t,n,r,i){var o=e*e,a=o*e;return((1-3*e+3*o-a)*t+(4-6*o+3*a)*n+(1+3*e+3*o-3*a)*r+a*i)/6}function oa(e){return function(){return e}}function aa(e,t){return function(n){return e+n*t}}function sa(e){return 1==(e=+e)?la:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):oa(isNaN(t)?n:t)}}function la(e,t){var n=t-e;return n?aa(e,n):oa(isNaN(e)?t:e)}To(Co,Uo,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:Go,formatHex:Go,formatHsl:function(){return ta(this).formatHsl()},formatRgb:Wo,toString:Wo}),To(Jo,Ko,Lo(Co,{brighter:function(e){return e=null==e?Ao:Math.pow(Ao,e),new Jo(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?Do:Math.pow(Do,e),new Jo(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Zo,formatHex:Zo,formatRgb:$o,toString:$o})),To(na,(function(e,t,n,r){return 1===arguments.length?ta(e):new na(e,t,n,null==r?1:r)}),Lo(Co,{brighter:function(e){return e=null==e?Ao:Math.pow(Ao,e),new na(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?Do:Math.pow(Do,e),new na(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Jo(ra(e>=240?e-240:e+120,i,r),ra(e,i,r),ra(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));const ua=function e(t){var n=sa(t);function r(e,t){var r=n((e=Ko(e)).r,(t=Ko(t)).r),i=n(e.g,t.g),o=n(e.b,t.b),a=la(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=o(t),e.opacity=a(t),e+""}}return r.gamma=e,r}(1);function ca(e){return function(t){var n,r,i=t.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=Ko(t[n]),o[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return o=e(o),a=e(a),s=e(s),r.opacity=1,function(e){return r.r=o(e),r.g=a(e),r.b=s(e),r+""}}}ca((function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],o=e[r+1],a=r>0?e[r-1]:2*i-o,s=r<t-1?e[r+2]:2*o-i;return ia((n-r/t)*t,a,i,o,s)}})),ca((function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],o=e[r%t],a=e[(r+1)%t],s=e[(r+2)%t];return ia((n-r/t)*t,i,o,a,s)}}));function da(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,i=t.slice();return function(o){for(n=0;n<r;++n)i[n]=e[n]*(1-o)+t[n]*o;return i}}function ha(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function fa(e,t){return(ha(t)?da:pa)(e,t)}function pa(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=wa(e[n],t[n]);for(;n<r;++n)a[n]=t[n];return function(e){for(n=0;n<i;++n)a[n]=o[n](e);return a}}function ma(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function ga(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function va(e,t){var n,r={},i={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?r[n]=wa(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}}var ya=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ba=new RegExp(ya.source,"g");function _a(e,t){var n,r,i,o=ya.lastIndex=ba.lastIndex=0,a=-1,s=[],l=[];for(e+="",t+="";(n=ya.exec(e))&&(r=ba.exec(t));)(i=r.index)>o&&(i=t.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:ga(n,r)})),o=ba.lastIndex;return o<t.length&&(i=t.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)s[(n=l[r]).i]=n.x(e);return s.join("")})}function wa(e,t){var n,r=typeof t;return null==t||"boolean"===r?oa(t):("number"===r?ga:"string"===r?(n=Uo(t))?(t=n,ua):_a:t instanceof Uo?ua:t instanceof Date?ma:ha(t)?da:Array.isArray(t)?pa:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?va:ga)(e,t)}var xa=[1,0,0,0,1,0,0,0,1];function Ma(e,t,n){var r,i=t.startTime;if(n<i+t.delay||t._paused)return!1;var o=t.duration,a=t.easing;if(n=n-i-t.delay,t.repeat)r=n%o/o,r=l[a](r);else{if(!((r=n/o)<1))return t.onFrame?e.attr(t.onFrame(1)):e.attr(t.toAttrs),!0;r=l[a](r)}if(t.onFrame){var s=t.onFrame(r);e.attr(s)}else!function(e,t,n){var r={},i=t.fromAttrs,o=t.toAttrs;if(!e.destroyed){var a,s;for(var l in o)if(!(0,b.isEqual)(i[l],o[l]))if("path"===l){var u=o[l],c=i[l];u.length>c.length?(u=fr(o[l]),c=fr(i[l]),c=Fr(c,u),c=Hr(c,u),t.fromAttrs.path=c,t.toAttrs.path=u):t.pathFormatted||(u=fr(o[l]),c=fr(i[l]),c=Hr(c,u),t.fromAttrs.path=c,t.toAttrs.path=u,t.pathFormatted=!0),r[l]=[];for(var d=0;d<u.length;d++){for(var h=u[d],f=c[d],p=[],m=0;m<h.length;m++)(0,b.isNumber)(h[m])&&f&&(0,b.isNumber)(f[m])?(a=wa(f[m],h[m]),p.push(a(n))):p.push(h[m]);r[l].push(p)}}else if("matrix"===l){var g=fa(i[l]||xa,o[l]||xa)(n);r[l]=g}else["fill","stroke","fillStyle","strokeStyle"].includes(l)&&(s=o[l],/^[r,R,L,l]{1}[\s]*\(/.test(s))?r[l]=o[l]:(0,b.isFunction)(o[l])||(a=wa(i[l],o[l]),r[l]=a(n));e.attr(r)}}(e,t,r);return!1}var Ea=function(){function e(e){this.animators=[],this.current=0,this.timer=null,this.canvas=e}return e.prototype.initTimer=function(){var e,t,n,r=this;this.timer=zi((function(i){if(r.current=i,r.animators.length>0){for(var o=r.animators.length-1;o>=0;o--)if((e=r.animators[o]).destroyed)r.removeAnimator(o);else{if(!e.isAnimatePaused())for(var a=(t=e.get("animations")).length-1;a>=0;a--)n=t[a],Ma(e,n,i)&&(t.splice(a,1),!1,n.callback&&n.callback());0===t.length&&r.removeAnimator(o)}r.canvas.get("autoDraw")||r.canvas.draw()}}))},e.prototype.addAnimator=function(e){this.animators.push(e)},e.prototype.removeAnimator=function(e){this.animators.splice(e,1)},e.prototype.isAnimating=function(){return!!this.animators.length},e.prototype.stop=function(){this.timer&&this.timer.stop()},e.prototype.stopAllAnimations=function(e){void 0===e&&(e=!0),this.animators.forEach((function(t){t.stopAnimate(e)})),this.animators=[],this.canvas.draw()},e.prototype.getTime=function(){return this.current},e}();const Sa=Ea;var ka=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function Ta(e,t,n){n.name=t,n.target=e,n.currentTarget=e,n.delegateTarget=e,e.emit(t,n)}function La(e,t,n){if(n.bubbles){var r=void 0,i=!1;if("mouseenter"===t?(r=n.fromShape,i=!0):"mouseleave"===t&&(i=!0,r=n.toShape),e.isCanvas()&&i)return;if(r&&Vr(e,r))return void(n.bubbles=!1);n.name=t,n.currentTarget=e,n.delegateTarget=e,e.emit(t,n)}}var Ca=function(){function e(e){var t=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(e){var n=e.type;t._triggerEvent(n,e)},this._onDocumentMove=function(e){if(t.canvas.get("el")!==e.target&&(t.dragging||t.currentShape)){var n=t._getPointInfo(e);t.dragging&&t._emitEvent("drag",e,n,t.draggingShape)}},this._onDocumentMouseUp=function(e){if(t.canvas.get("el")!==e.target&&t.dragging){var n=t._getPointInfo(e);t.draggingShape&&t._emitEvent("drop",e,n,null),t._emitEvent("dragend",e,n,t.draggingShape),t._afterDrag(t.draggingShape,n,e)}},this.canvas=e.canvas}return e.prototype.init=function(){this._bindEvents()},e.prototype._bindEvents=function(){var e=this,t=this.canvas.get("el");(0,b.each)(ka,(function(n){t.addEventListener(n,e._eventCallback)})),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},e.prototype._clearEvents=function(){var e=this,t=this.canvas.get("el");(0,b.each)(ka,(function(n){t.removeEventListener(n,e._eventCallback)})),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},e.prototype._getEventObj=function(e,t,n,r,i,o){var a=new Gr(e,t);return a.fromShape=i,a.toShape=o,a.x=n.x,a.y=n.y,a.clientX=n.clientX,a.clientY=n.clientY,a.propagationPath.push(r),a},e.prototype._getShape=function(e,t){return this.canvas.getShape(e.x,e.y,t)},e.prototype._getPointInfo=function(e){var t=this.canvas,n=t.getClientByEvent(e),r=t.getPointByEvent(e);return{x:r.x,y:r.y,clientX:n.x,clientY:n.y}},e.prototype._triggerEvent=function(e,t){var n=this._getPointInfo(t),r=this._getShape(n,t),i=this["_on"+e],o=!1;if(i)i.call(this,n,r,t);else{var a=this.currentShape;"mouseenter"===e||"dragenter"===e||"mouseover"===e?(this._emitEvent(e,t,n,null,null,r),r&&this._emitEvent(e,t,n,r,null,r),"mouseenter"===e&&this.draggingShape&&this._emitEvent("dragenter",t,n,null)):"mouseleave"===e||"dragleave"===e||"mouseout"===e?(o=!0,a&&this._emitEvent(e,t,n,a,a,null),this._emitEvent(e,t,n,null,a,null),"mouseleave"===e&&this.draggingShape&&this._emitEvent("dragleave",t,n,null)):this._emitEvent(e,t,n,r,null,null)}if(o||(this.currentShape=r),r&&!r.get("destroyed")){var s=this.canvas;s.get("el").style.cursor=r.attr("cursor")||s.get("cursor")}},e.prototype._onmousedown=function(e,t,n){0===n.button&&(this.mousedownShape=t,this.mousedownPoint=e,this.mousedownTimeStamp=n.timeStamp),this._emitEvent("mousedown",n,e,t,null,null)},e.prototype._emitMouseoverEvents=function(e,t,n,r){var i=this.canvas.get("el");n!==r&&(n&&(this._emitEvent("mouseout",e,t,n,n,r),this._emitEvent("mouseleave",e,t,n,n,r),r&&!r.get("destroyed")||(i.style.cursor=this.canvas.get("cursor"))),r&&(this._emitEvent("mouseover",e,t,r,n,r),this._emitEvent("mouseenter",e,t,r,n,r)))},e.prototype._emitDragoverEvents=function(e,t,n,r,i){r?(r!==n&&(n&&this._emitEvent("dragleave",e,t,n,n,r),this._emitEvent("dragenter",e,t,r,n,r)),i||this._emitEvent("dragover",e,t,r)):n&&this._emitEvent("dragleave",e,t,n,n,r),i&&this._emitEvent("dragover",e,t,r)},e.prototype._afterDrag=function(e,t,n){e&&(e.set("capture",!0),this.draggingShape=null),this.dragging=!1;var r=this._getShape(t,n);r!==e&&this._emitMouseoverEvents(n,t,e,r),this.currentShape=r},e.prototype._onmouseup=function(e,t,n){if(0===n.button){var r=this.draggingShape;this.dragging?(r&&this._emitEvent("drop",n,e,t),this._emitEvent("dragend",n,e,r),this._afterDrag(r,e,n)):(this._emitEvent("mouseup",n,e,t),t===this.mousedownShape&&this._emitEvent("click",n,e,t),this.mousedownShape=null,this.mousedownPoint=null)}},e.prototype._ondragover=function(e,t,n){n.preventDefault();var r=this.currentShape;this._emitDragoverEvents(n,e,r,t,!0)},e.prototype._onmousemove=function(e,t,n){var r=this.canvas,i=this.currentShape,o=this.draggingShape;if(this.dragging)o&&this._emitDragoverEvents(n,e,i,t,!1),this._emitEvent("drag",n,e,o);else{var a=this.mousedownPoint;if(a){var s=this.mousedownShape,l=n.timeStamp-this.mousedownTimeStamp,u=a.clientX-e.clientX,c=a.clientY-e.clientY;l>120||u*u+c*c>40?s&&s.get("draggable")?((o=this.mousedownShape).set("capture",!1),this.draggingShape=o,this.dragging=!0,this._emitEvent("dragstart",n,e,o),this.mousedownShape=null,this.mousedownPoint=null):!s&&r.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",n,e,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(n,e,i,t),this._emitEvent("mousemove",n,e,t)):(this._emitMouseoverEvents(n,e,i,t),this._emitEvent("mousemove",n,e,t))}else this._emitMouseoverEvents(n,e,i,t),this._emitEvent("mousemove",n,e,t)}},e.prototype._emitEvent=function(e,t,n,r,i,o){var a=this._getEventObj(e,t,n,r,i,o);if(r){a.shape=r,Ta(r,e,a);for(var s=r.getParent();s;)s.emitDelegation(e,a),a.propagationStopped||La(s,e,a),a.propagationPath.push(s),s=s.getParent()}else{Ta(this.canvas,e,a)}},e.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},e}();const Da=Ca;var Aa=ii(),Pa=Aa&&"firefox"===Aa.name,Oa=function(e){function t(t){var n=e.call(this,t)||this;return n.initContainer(),n.initDom(),n.initEvents(),n.initTimeline(),n}return(0,y.__extends)(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return t.cursor="default",t.supportCSSTransform=!1,t},t.prototype.initContainer=function(){var e=this.get("container");(0,b.isString)(e)&&(e=document.getElementById(e),this.set("container",e))},t.prototype.initDom=function(){var e=this.createDom();this.set("el",e),this.get("container").appendChild(e),this.setDOMSize(this.get("width"),this.get("height"))},t.prototype.initEvents=function(){var e=new Da({canvas:this});e.init(),this.set("eventController",e)},t.prototype.initTimeline=function(){var e=new Sa(this);this.set("timeline",e)},t.prototype.setDOMSize=function(e,t){var n=this.get("el");Ur&&(n.style.width=e+"px",n.style.height=t+"px")},t.prototype.changeSize=function(e,t){this.setDOMSize(e,t),this.set("width",e),this.set("height",t),this.onCanvasChange("changeSize")},t.prototype.getRenderer=function(){return this.get("renderer")},t.prototype.getCursor=function(){return this.get("cursor")},t.prototype.setCursor=function(e){this.set("cursor",e);var t=this.get("el");Ur&&t&&(t.style.cursor=e)},t.prototype.getPointByEvent=function(e){if(this.get("supportCSSTransform")){if(Pa&&!(0,b.isNil)(e.layerX)&&e.layerX!==e.offsetX)return{x:e.layerX,y:e.layerY};if(!(0,b.isNil)(e.offsetX))return{x:e.offsetX,y:e.offsetY}}var t=this.getClientByEvent(e),n=t.x,r=t.y;return this.getPointByClient(n,r)},t.prototype.getClientByEvent=function(e){var t=e;return e.touches&&(t="touchend"===e.type?e.changedTouches[0]:e.touches[0]),{x:t.clientX,y:t.clientY}},t.prototype.getPointByClient=function(e,t){var n=this.get("el").getBoundingClientRect();return{x:e-n.left,y:t-n.top}},t.prototype.getClientByPoint=function(e,t){var n=this.get("el").getBoundingClientRect();return{x:e+n.left,y:t+n.top}},t.prototype.draw=function(){},t.prototype.removeDom=function(){var e=this.get("el");e.parentNode.removeChild(e)},t.prototype.clearEvents=function(){this.get("eventController").destroy()},t.prototype.isCanvas=function(){return!0},t.prototype.getParent=function(){return null},t.prototype.destroy=function(){var t=this.get("timeline");this.get("destroyed")||(this.clear(),t&&t.stop(),this.clearEvents(),this.removeDom(),e.prototype.destroy.call(this))},t}(Ti);const Ia=Oa;var Ra=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,y.__extends)(t,e),t.prototype.isGroup=function(){return!0},t.prototype.isEntityGroup=function(){return!1},t.prototype.clone=function(){for(var t=e.prototype.clone.call(this),n=this.getChildren(),r=0;r<n.length;r++){var i=n[r];t.add(i.clone())}return t},t}(Ti);const Na=Ra;var Ya=function(e){function t(t){return e.call(this,t)||this}return(0,y.__extends)(t,e),t.prototype._isInBBox=function(e,t){var n=this.getBBox();return n.minX<=e&&n.maxX>=e&&n.minY<=t&&n.maxY>=t},t.prototype.afterAttrsChange=function(t){e.prototype.afterAttrsChange.call(this,t),this.clearCacheBBox()},t.prototype.getBBox=function(){var e=this.cfg.bbox;return e||(e=this.calculateBBox(),this.set("bbox",e)),e},t.prototype.getCanvasBBox=function(){var e=this.cfg.canvasBBox;return e||(e=this.calculateCanvasBBox(),this.set("canvasBBox",e)),e},t.prototype.applyMatrix=function(t){e.prototype.applyMatrix.call(this,t),this.set("canvasBBox",null)},t.prototype.calculateCanvasBBox=function(){var e=this.getBBox(),t=this.getTotalMatrix(),n=e.minX,r=e.minY,i=e.maxX,o=e.maxY;if(t){var a=hi(t,[e.minX,e.minY]),s=hi(t,[e.maxX,e.minY]),l=hi(t,[e.minX,e.maxY]),u=hi(t,[e.maxX,e.maxY]);n=Math.min(a[0],s[0],l[0],u[0]),i=Math.max(a[0],s[0],l[0],u[0]),r=Math.min(a[1],s[1],l[1],u[1]),o=Math.max(a[1],s[1],l[1],u[1])}var c=this.attrs;if(c.shadowColor){var d=c.shadowBlur,h=void 0===d?0:d,f=c.shadowOffsetX,p=void 0===f?0:f,m=c.shadowOffsetY,g=void 0===m?0:m,v=n-h+p,y=i+h+p,b=r-h+g,_=o+h+g;n=Math.min(n,v),i=Math.max(i,y),r=Math.min(r,b),o=Math.max(o,_)}return{x:n,y:r,minX:n,minY:r,maxX:i,maxY:o,width:i-n,height:o-r}},t.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},t.prototype.isClipShape=function(){return this.get("isClipShape")},t.prototype.isInShape=function(e,t){return!1},t.prototype.isOnlyHitBox=function(){return!1},t.prototype.isHit=function(e,t){var n=this.get("startArrowShape"),r=this.get("endArrowShape"),i=[e,t,1],o=(i=this.invertFromMatrix(i))[0],a=i[1],s=this._isInBBox(o,a);if(this.isOnlyHitBox())return s;if(s&&!this.isClipped(o,a)){if(this.isInShape(o,a))return!0;if(n&&n.isHit(o,a))return!0;if(r&&r.isHit(o,a))return!0}return!1},t}(xi);const ja=Ya;var Fa=new Map;function Ba(e,t){Fa.set(e,t)}function za(e){return Fa.get(e)}function Ha(e){var t=e.attr();return{x:t.x,y:t.y,width:t.width,height:t.height}}function Ga(e){var t=e.attr(),n=t.x,r=t.y,i=t.r;return{x:n-i,y:r-i,width:2*i,height:2*i}}function Wa(e){return Math.min.apply(null,e)}function Ua(e){return Math.max.apply(null,e)}function Va(e,t,n,r){var i=e-n,o=t-r;return Math.sqrt(i*i+o*o)}function Xa(e,t){return Math.abs(e-t)<.001}function qa(e,t){var n=Wa(e),r=Wa(t);return{x:n,y:r,width:Ua(e)-n,height:Ua(t)-r}}function Ka(e){return(e+2*Math.PI)%(2*Math.PI)}const Ja={box:function(e,t,n,r){return qa([e,n],[t,r])},length:function(e,t,n,r){return Va(e,t,n,r)},pointAt:function(e,t,n,r,i){return{x:(1-i)*e+i*n,y:(1-i)*t+i*r}},pointDistance:function(e,t,n,r,i,o){var a=(n-e)*(i-e)+(r-t)*(o-t);return a<0?Va(e,t,i,o):a>(n-e)*(n-e)+(r-t)*(r-t)?Va(n,r,i,o):this.pointToLine(e,t,n,r,i,o)},pointToLine:function(e,t,n,r,i,o){var a=[n-e,r-t];if(qt(a,[0,0]))return Math.sqrt((i-e)*(i-e)+(o-t)*(o-t));var s=[-a[1],a[0]];Vt(s,s);var l=[i-e,o-t];return Math.abs(Xt(l,s))},tangentAngle:function(e,t,n,r){return Math.atan2(r-t,n-e)}};function Za(e,t,n,r,i,o){var a,s=1/0,l=[n,r],u=20;o&&o>200&&(u=o/10);for(var c=1/u,d=c/10,h=0;h<=u;h++){var f=h*c,p=[i.apply(null,e.concat([f])),i.apply(null,t.concat([f]))];(y=Va(l[0],l[1],p[0],p[1]))<s&&(a=f,s=y)}if(0===a)return{x:e[0],y:t[0]};if(1===a){var m=e.length;return{x:e[m-1],y:t[m-1]}}s=1/0;for(h=0;h<32&&!(d<1e-4);h++){var g=a-d,v=a+d,y=(p=[i.apply(null,e.concat([g])),i.apply(null,t.concat([g]))],Va(l[0],l[1],p[0],p[1]));if(g>=0&&y<s)a=g,s=y;else{var b=[i.apply(null,e.concat([v])),i.apply(null,t.concat([v]))],_=Va(l[0],l[1],b[0],b[1]);v<=1&&_<s?(a=v,s=_):d*=.5}}return{x:i.apply(null,e.concat([a])),y:i.apply(null,t.concat([a]))}}function $a(e,t,n,r){var i=1-r;return i*i*e+2*r*i*t+r*r*n}function Qa(e,t,n){var r=e+n-2*t;if(Xa(r,0))return[.5];var i=(e-t)/r;return i<=1&&i>=0?[i]:[]}function es(e,t,n,r){return 2*(1-r)*(t-e)+2*r*(n-t)}function ts(e,t,n,r,i,o,a){var s=$a(e,n,i,a),l=$a(t,r,o,a),u=Ja.pointAt(e,t,n,r,a),c=Ja.pointAt(n,r,i,o,a);return[[e,t,u.x,u.y,s,l],[s,l,c.x,c.y,i,o]]}function ns(e,t,n,r,i,o,a){if(0===a)return(Va(e,t,n,r)+Va(n,r,i,o)+Va(e,t,i,o))/2;var s=ts(e,t,n,r,i,o,.5),l=s[0],u=s[1];return l.push(a-1),u.push(a-1),ns.apply(null,l)+ns.apply(null,u)}const rs={box:function(e,t,n,r,i,o){var a=Qa(e,n,i)[0],s=Qa(t,r,o)[0],l=[e,i],u=[t,o];return void 0!==a&&l.push($a(e,n,i,a)),void 0!==s&&u.push($a(t,r,o,s)),qa(l,u)},length:function(e,t,n,r,i,o){return ns(e,t,n,r,i,o,3)},nearestPoint:function(e,t,n,r,i,o,a,s){return Za([e,n,i],[t,r,o],a,s,$a)},pointDistance:function(e,t,n,r,i,o,a,s){var l=this.nearestPoint(e,t,n,r,i,o,a,s);return Va(l.x,l.y,a,s)},interpolationAt:$a,pointAt:function(e,t,n,r,i,o,a){return{x:$a(e,n,i,a),y:$a(t,r,o,a)}},divide:function(e,t,n,r,i,o,a){return ts(e,t,n,r,i,o,a)},tangentAngle:function(e,t,n,r,i,o,a){var s=es(e,n,i,a),l=es(t,r,o,a);return Ka(Math.atan2(l,s))}};function is(e,t,n,r,i){var o=1-i;return o*o*o*e+3*t*i*o*o+3*n*i*i*o+r*i*i*i}function os(e,t,n,r,i){var o=1-i;return 3*(o*o*(t-e)+2*o*i*(n-t)+i*i*(r-n))}function as(e,t,n,r){var i,o,a,s=-3*e+9*t-9*n+3*r,l=6*e-12*t+6*n,u=3*t-3*e,c=[];if(Xa(s,0))Xa(l,0)||(i=-u/l)>=0&&i<=1&&c.push(i);else{var d=l*l-4*s*u;Xa(d,0)?c.push(-l/(2*s)):d>0&&(o=(-l-(a=Math.sqrt(d)))/(2*s),(i=(-l+a)/(2*s))>=0&&i<=1&&c.push(i),o>=0&&o<=1&&c.push(o))}return c}function ss(e,t,n,r,i,o,a,s,l){var u=is(e,n,i,a,l),c=is(t,r,o,s,l),d=Ja.pointAt(e,t,n,r,l),h=Ja.pointAt(n,r,i,o,l),f=Ja.pointAt(i,o,a,s,l),p=Ja.pointAt(d.x,d.y,h.x,h.y,l),m=Ja.pointAt(h.x,h.y,f.x,f.y,l);return[[e,t,d.x,d.y,p.x,p.y,u,c],[u,c,m.x,m.y,f.x,f.y,a,s]]}function ls(e,t,n,r,i,o,a,s,l){if(0===l)return function(e,t){for(var n=0,r=e.length,i=0;i<r;i++)n+=Va(e[i],t[i],e[(i+1)%r],t[(i+1)%r]);return n/2}([e,n,i,a],[t,r,o,s]);var u=ss(e,t,n,r,i,o,a,s,.5),c=u[0],d=u[1];return c.push(l-1),d.push(l-1),ls.apply(null,c)+ls.apply(null,d)}const us={extrema:as,box:function(e,t,n,r,i,o,a,s){for(var l=[e,a],u=[t,s],c=as(e,n,i,a),d=as(t,r,o,s),h=0;h<c.length;h++)l.push(is(e,n,i,a,c[h]));for(h=0;h<d.length;h++)u.push(is(t,r,o,s,d[h]));return qa(l,u)},length:function(e,t,n,r,i,o,a,s){return ls(e,t,n,r,i,o,a,s,3)},nearestPoint:function(e,t,n,r,i,o,a,s,l,u,c){return Za([e,n,i,a],[t,r,o,s],l,u,is,c)},pointDistance:function(e,t,n,r,i,o,a,s,l,u,c){var d=this.nearestPoint(e,t,n,r,i,o,a,s,l,u,c);return Va(d.x,d.y,l,u)},interpolationAt:is,pointAt:function(e,t,n,r,i,o,a,s,l){return{x:is(e,n,i,a,l),y:is(t,r,o,s,l)}},divide:function(e,t,n,r,i,o,a,s,l){return ss(e,t,n,r,i,o,a,s,l)},tangentAngle:function(e,t,n,r,i,o,a,s,l){var u=os(e,n,i,a,l),c=os(t,r,o,s,l);return Ka(Math.atan2(c,u))}};function cs(e,t,n,r,i,o){return n*Math.cos(i)*Math.cos(o)-r*Math.sin(i)*Math.sin(o)+e}function ds(e,t,n,r,i,o){return n*Math.sin(i)*Math.cos(o)+r*Math.cos(i)*Math.sin(o)+t}const hs=function(e,t,n,r,i,o,a){for(var s=function(e,t,n){return Math.atan(-t/e*Math.tan(n))}(n,r,i),l=1/0,u=-1/0,c=[o,a],d=2*-Math.PI;d<=2*Math.PI;d+=Math.PI){var h=s+d;o<a?o<h&&h<a&&c.push(h):a<h&&h<o&&c.push(h)}for(d=0;d<c.length;d++){var f=cs(e,0,n,r,i,c[d]);f<l&&(l=f),f>u&&(u=f)}var p=function(e,t,n){return Math.atan(t/(e*Math.tan(n)))}(n,r,i),m=1/0,g=-1/0,v=[o,a];for(d=2*-Math.PI;d<=2*Math.PI;d+=Math.PI){var y=p+d;o<a?o<y&&y<a&&v.push(y):a<y&&y<o&&v.push(y)}for(d=0;d<v.length;d++){var b=ds(0,t,n,r,i,v[d]);b<m&&(m=b),b>g&&(g=b)}return{x:l,y:m,width:u-l,height:g-m}};function fs(e){if(e.length<2)return 0;for(var t=0,n=0;n<e.length-1;n++){var r=e[n],i=e[n+1];t+=Va(r[0],r[1],i[0],i[1])}return t}const ps=function(e){return fs(e)};function ms(e,t){return e&&t?{minX:Math.min(e.minX,t.minX),minY:Math.min(e.minY,t.minY),maxX:Math.max(e.maxX,t.maxX),maxY:Math.max(e.maxY,t.maxY)}:e||t}function gs(e,t){var n=e.get("startArrowShape"),r=e.get("endArrowShape");return n&&(t=ms(t,n.getCanvasBBox())),r&&(t=ms(t,r.getCanvasBBox())),t}var vs=null;function ys(){if(!vs){var e=document.createElement("canvas");e.width=1,e.height=1,vs=e.getContext("2d")}return vs}function bs(e,t,n){var r=1;if((0,b.isString)(e)&&(r=e.split("\n").length),r>1){var i=function(e,t){return t?t-e:.14*e}(t,n);return t*r+i*(r-1)}return t}function _s(e){var t=e.fontSize,n=e.fontFamily,r=e.fontWeight;return[e.fontStyle,e.fontVariant,r,t+"px",n].join(" ").trim()}var ws=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,xs=/[^\s\,]+/gi;const Ms=function(e){var t=e||[];return(0,b.isArray)(t)?t:(0,b.isString)(t)?(t=t.match(ws),(0,b.each)(t,(function(e,n){if((e=e.match(xs))[0].length>1){var r=e[0].charAt(0);e.splice(1,0,e[0].substr(1)),e[0]=r}(0,b.each)(e,(function(t,n){isNaN(t)||(e[n]=+t)})),t[n]=e})),t):void 0};const Es=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=[[0,0],[1,1]]);for(var r=!!t,i=[],o=0,a=e.length;o<a;o+=2)i.push([e[o],e[o+1]]);var s,l,u,c=function(e,t,n,r){var i,o,a,s,l,u,c,d=[],h=!!r;if(h){a=r[0],s=r[1];for(var f=0,p=e.length;f<p;f+=1)a=Ht([0,0],a,g=e[f]),s=Gt([0,0],s,g)}f=0;for(var m=e.length;f<m;f+=1){var g=e[f];if(0!==f||n)if(f!==m-1||n){i=e[[f?f-1:m-1,f-1][n?0:1]],o=e[n?(f+1)%m:f+1];var v=[0,0];v=Wt(v=Kt(v,o,i),v,t);var y=Ut(g,i),b=Ut(g,o),_=y+b;0!==_&&(y/=_,b/=_);var w=Wt([0,0],v,-y),x=Wt([0,0],v,b);u=zt([0,0],g,w),l=Ht([0,0],l=zt([0,0],g,x),Gt([0,0],o,g)),l=Gt([0,0],l,Ht([0,0],o,g)),u=Ht([0,0],u=zt([0,0],g,w=Wt([0,0],w=Kt([0,0],l,g),-y/b)),Gt([0,0],i,g)),u=Gt([0,0],u,Ht([0,0],i,g)),l=zt([0,0],g,x=Wt([0,0],x=Kt([0,0],g,u),b/y)),h&&(u=Ht([0,0],u=Gt([0,0],u,a),s),l=Ht([0,0],l=Gt([0,0],l,a),s)),d.push(c),d.push(u),c=l}else u=g,d.push(c),d.push(u);else c=g}return n&&d.push(d.shift()),d}(i,.4,r,n),d=i.length,h=[];for(o=0;o<d-1;o+=1)s=c[2*o],l=c[2*o+1],u=i[o+1],h.push(["C",s[0],s[1],l[0],l[1],u[0],u[1]]);return r&&(s=c[d],l=c[d+1],u=i[0],h.push(["C",s[0],s[1],l[0],l[1],u[0],u[1]])),h};var Ss=new RegExp("([a-z])[\t\n\v\f\r \u2028\u2029,]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?[\t\n\v\f\r \u2028\u2029]*,?[\t\n\v\f\r \u2028\u2029]*)+)","ig"),ks=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)[\t\n\v\f\r \u2028\u2029]*,?[\t\n\v\f\r \u2028\u2029]*","ig");function Ts(e){if(!e)return null;if((0,b.isArray)(e))return e;var t={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},n=[];return String(e).replace(Ss,(function(e,r,i){var o=[],a=r.toLowerCase();if(i.replace(ks,(function(e,t){t&&o.push(+t)})),"m"===a&&o.length>2&&(n.push([r].concat(o.splice(0,2))),a="l",r="m"===r?"l":"L"),"o"===a&&1===o.length&&n.push([r,o[0]]),"r"===a)n.push([r].concat(o));else for(;o.length>=t[a]&&(n.push([r].concat(o.splice(0,t[a]))),t[a]););return""})),n}var Ls=/[a-z]/;function Cs(e,t){return[t[0]+(t[0]-e[0]),t[1]+(t[1]-e[1])]}function Ds(e){var t=Ts(e);if(!t||!t.length)return[["M",0,0]];for(var n=!1,r=0;r<t.length;r++){var i=t[r][0];if(Ls.test(i)||["V","H","T","S"].indexOf(i)>=0){n=!0;break}}if(!n)return t;var o=[],a=0,s=0,l=0,u=0,c=0,d=t[0];"M"!==d[0]&&"m"!==d[0]||(l=a=+d[1],u=s=+d[2],c++,o[0]=["M",a,s]);r=c;for(var h=t.length;r<h;r++){var f=t[r],p=o[r-1],m=[],g=(i=f[0]).toUpperCase();if(i!==g)switch(m[0]=g,g){case"A":m[1]=f[1],m[2]=f[2],m[3]=f[3],m[4]=f[4],m[5]=f[5],m[6]=+f[6]+a,m[7]=+f[7]+s;break;case"V":m[1]=+f[1]+s;break;case"H":m[1]=+f[1]+a;break;case"M":l=+f[1]+a,u=+f[2]+s,m[1]=l,m[2]=u;break;default:for(var v=1,y=f.length;v<y;v++)m[v]=+f[v]+(v%2?a:s)}else m=t[r];switch(g){case"Z":a=+l,s=+u;break;case"H":m=["L",a=m[1],s];break;case"V":m=["L",a,s=m[1]];break;case"T":a=m[1],s=m[2];var b=Cs([p[1],p[2]],[p[3],p[4]]);m=["Q",b[0],b[1],a,s];break;case"S":a=m[m.length-2],s=m[m.length-1];var _=p.length,w=Cs([p[_-4],p[_-3]],[p[_-2],p[_-1]]);m=["C",w[0],w[1],m[1],m[2],a,s];break;case"M":l=m[m.length-2],u=m[m.length-1];break;default:a=m[m.length-2],s=m[m.length-1]}o.push(m)}return o}Math.PI;function As(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function Ps(e,t){return As(e)*As(t)?(e[0]*t[0]+e[1]*t[1])/(As(e)*As(t)):1}function Os(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(Ps(e,t))}function Is(e,t){return e[0]===t[0]&&e[1]===t[1]}function Rs(e,t){var n=t[1],r=t[2],i=(0,b.mod)((0,b.toRadian)(t[3]),2*Math.PI),o=t[4],a=t[5],s=e[0],l=e[1],u=t[6],c=t[7],d=Math.cos(i)*(s-u)/2+Math.sin(i)*(l-c)/2,h=-1*Math.sin(i)*(s-u)/2+Math.cos(i)*(l-c)/2,f=d*d/(n*n)+h*h/(r*r);f>1&&(n*=Math.sqrt(f),r*=Math.sqrt(f));var p=n*n*(h*h)+r*r*(d*d),m=p?Math.sqrt((n*n*(r*r)-p)/p):1;o===a&&(m*=-1),isNaN(m)&&(m=0);var g=r?m*n*h/r:0,v=n?m*-r*d/n:0,y=(s+u)/2+Math.cos(i)*g-Math.sin(i)*v,_=(l+c)/2+Math.sin(i)*g+Math.cos(i)*v,w=[(d-g)/n,(h-v)/r],x=[(-1*d-g)/n,(-1*h-v)/r],M=Os([1,0],w),E=Os(w,x);return Ps(w,x)<=-1&&(E=Math.PI),Ps(w,x)>=1&&(E=0),0===a&&E>0&&(E-=2*Math.PI),1===a&&E<0&&(E+=2*Math.PI),{cx:y,cy:_,rx:Is(e,[u,c])?0:n,ry:Is(e,[u,c])?0:r,startAngle:M,endAngle:M+E,xRotation:i,arcFlag:o,sweepFlag:a}}function Ns(e,t){return[t[0]+(t[0]-e[0]),t[1]+(t[1]-e[1])]}function Ys(e){for(var t=[],n=null,r=null,i=null,o=0,a=(e=Ms(e)).length,s=0;s<a;s++){var l=e[s];r=e[s+1];var u=l[0],c={command:u,prePoint:n,params:l,startTangent:null,endTangent:null};switch(u){case"M":i=[l[1],l[2]],o=s;break;case"A":var d=Rs(n,l);c.arcParams=d}if("Z"===u)n=i,r=e[o+1];else{var h=l.length;n=[l[h-2],l[h-1]]}r&&"Z"===r[0]&&(r=e[o],t[o]&&(t[o].prePoint=n)),c.currentPoint=n,t[o]&&Is(n,t[o].currentPoint)&&(t[o].prePoint=c.prePoint);var f=r?[r[r.length-2],r[r.length-1]]:null;c.nextPoint=f;var p=c.prePoint;if(["L","H","V"].includes(u))c.startTangent=[p[0]-n[0],p[1]-n[1]],c.endTangent=[n[0]-p[0],n[1]-p[1]];else if("Q"===u){var m=[l[1],l[2]];c.startTangent=[p[0]-m[0],p[1]-m[1]],c.endTangent=[n[0]-m[0],n[1]-m[1]]}else if("T"===u){m=Ns((y=t[s-1]).currentPoint,p);"Q"===y.command?(c.command="Q",c.startTangent=[p[0]-m[0],p[1]-m[1]],c.endTangent=[n[0]-m[0],n[1]-m[1]]):(c.command="TL",c.startTangent=[p[0]-n[0],p[1]-n[1]],c.endTangent=[n[0]-p[0],n[1]-p[1]])}else if("C"===u){var g=[l[1],l[2]],v=[l[3],l[4]];c.startTangent=[p[0]-g[0],p[1]-g[1]],c.endTangent=[n[0]-v[0],n[1]-v[1]],0===c.startTangent[0]&&0===c.startTangent[1]&&(c.startTangent=[g[0]-v[0],g[1]-v[1]]),0===c.endTangent[0]&&0===c.endTangent[1]&&(c.endTangent=[v[0]-g[0],v[1]-g[1]])}else if("S"===u){var y;g=Ns((y=t[s-1]).currentPoint,p),v=[l[1],l[2]];"C"===y.command?(c.command="C",c.startTangent=[p[0]-g[0],p[1]-g[1]],c.endTangent=[n[0]-v[0],n[1]-v[1]]):(c.command="SQ",c.startTangent=[p[0]-v[0],p[1]-v[1]],c.endTangent=[n[0]-v[0],n[1]-v[1]])}else if("A"===u){var b=.001,_=c.arcParams||{},w=_.cx,x=void 0===w?0:w,M=_.cy,E=void 0===M?0:M,S=_.rx,k=void 0===S?0:S,T=_.ry,L=void 0===T?0:T,C=_.sweepFlag,D=void 0===C?0:C,A=_.startAngle,P=void 0===A?0:A,O=_.endAngle,I=void 0===O?0:O;0===D&&(b*=-1);var R=k*Math.cos(P-b)+x,N=L*Math.sin(P-b)+E;c.startTangent=[R-i[0],N-i[1]];var Y=k*Math.cos(P+I+b)+x,j=L*Math.sin(P+I-b)+E;c.endTangent=[p[0]-Y,p[1]-j]}t.push(c)}return t}function js(e,t){var n=e.prePoint,r=e.currentPoint,i=e.nextPoint,o=Math.pow(r[0]-n[0],2)+Math.pow(r[1]-n[1],2),a=Math.pow(r[0]-i[0],2)+Math.pow(r[1]-i[1],2),s=Math.pow(n[0]-i[0],2)+Math.pow(n[1]-i[1],2),l=Math.acos((o+a-s)/(2*Math.sqrt(o)*Math.sqrt(a)));if(!l||0===Math.sin(l)||(0,b.isNumberEqual)(l,0))return{xExtra:0,yExtra:0};var u=Math.abs(Math.atan2(i[1]-r[1],i[0]-r[0])),c=Math.abs(Math.atan2(i[0]-r[0],i[1]-r[1]));return u=u>Math.PI/2?Math.PI-u:u,c=c>Math.PI/2?Math.PI-c:c,{xExtra:Math.cos(l/2-u)*(t/2*(1/Math.sin(l/2)))-t/2||0,yExtra:Math.cos(c-l/2)*(t/2*(1/Math.sin(l/2)))-t/2||0}}Ba("rect",Ha),Ba("image",Ha),Ba("circle",Ga),Ba("marker",Ga),Ba("polyline",(function(e){for(var t=e.attr().points,n=[],r=[],i=0;i<t.length;i++){var o=t[i];n.push(o[0]),r.push(o[1])}var a=qa(n,r),s=a.x,l=a.y,u={minX:s,minY:l,maxX:s+a.width,maxY:l+a.height};return{x:(u=gs(e,u)).minX,y:u.minY,width:u.maxX-u.minX,height:u.maxY-u.minY}})),Ba("polygon",(function(e){for(var t=e.attr().points,n=[],r=[],i=0;i<t.length;i++){var o=t[i];n.push(o[0]),r.push(o[1])}return qa(n,r)})),Ba("text",(function(e){var t=e.attr(),n=t.x,r=t.y,i=t.text,o=t.fontSize,a=t.lineHeight,s=t.font;s||(s=_s(t));var l,u=function(e,t){var n=ys(),r=0;if((0,b.isNil)(e)||""===e)return r;if(n.save(),n.font=t,(0,b.isString)(e)&&e.includes("\n")){var i=e.split("\n");(0,b.each)(i,(function(e){var t=n.measureText(e).width;r<t&&(r=t)}))}else r=n.measureText(e).width;return n.restore(),r}(i,s);if(u){var c=t.textAlign,d=t.textBaseline,h=bs(i,o,a),f={x:n,y:r-h};c&&("end"===c||"right"===c?f.x-=u:"center"===c&&(f.x-=u/2)),d&&("top"===d?f.y+=h:"middle"===d&&(f.y+=h/2)),l={x:f.x,y:f.y,width:u,height:h}}else l={x:n,y:r,width:0,height:0};return l})),Ba("path",(function(e){var t=e.attr(),n=t.path,r=t.stroke?t.lineWidth:0,i=function(e,t){for(var n=[],r=[],i=[],o=0;o<e.length;o++){var a=(m=e[o]).currentPoint,s=m.params,l=m.prePoint,u=void 0;switch(m.command){case"Q":u=rs.box(l[0],l[1],s[1],s[2],s[3],s[4]);break;case"C":u=us.box(l[0],l[1],s[1],s[2],s[3],s[4],s[5],s[6]);break;case"A":var c=m.arcParams;u=hs(c.cx,c.cy,c.rx,c.ry,c.xRotation,c.startAngle,c.endAngle);break;default:n.push(a[0]),r.push(a[1])}u&&(m.box=u,n.push(u.x,u.x+u.width),r.push(u.y,u.y+u.height)),t&&("L"===m.command||"M"===m.command)&&m.prePoint&&m.nextPoint&&i.push(m)}n=n.filter((function(e){return!Number.isNaN(e)})),r=r.filter((function(e){return!Number.isNaN(e)}));var d=(0,b.min)(n),h=(0,b.min)(r),f=(0,b.max)(n),p=(0,b.max)(r);if(0===i.length)return{x:d,y:h,width:f-d,height:p-h};for(o=0;o<i.length;o++){var m;(a=(m=i[o]).currentPoint)[0]===d?d-=js(m,t).xExtra:a[0]===f&&(f+=js(m,t).xExtra),a[1]===h?h-=js(m,t).yExtra:a[1]===p&&(p+=js(m,t).yExtra)}return{x:d,y:h,width:f-d,height:p-h}}(e.get("segments")||Ys(n),r),o=i.x,a=i.y,s={minX:o,minY:a,maxX:o+i.width,maxY:a+i.height};return{x:(s=gs(e,s)).minX,y:s.minY,width:s.maxX-s.minX,height:s.maxY-s.minY}})),Ba("line",(function(e){var t=e.attr(),n=t.x1,r=t.y1,i=t.x2,o=t.y2,a={minX:Math.min(n,i),maxX:Math.max(n,i),minY:Math.min(r,o),maxY:Math.max(r,o)};return{x:(a=gs(e,a)).minX,y:a.minY,width:a.maxX-a.minX,height:a.maxY-a.minY}})),Ba("ellipse",(function(e){var t=e.attr(),n=t.x,r=t.y,i=t.rx,o=t.ry;return{x:n-i,y:r-o,width:2*i,height:2*o}}));var Fs=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.item=n.item,r.canvasX=n.canvasX,r.canvasY=n.canvasY,r.wheelDelta=n.wheelDelta,r.detail=n.detail,r}return(0,y.__extends)(t,e),t}(Gr),Bs=function(e){return e+"-"+Math.random()+Date.now()},zs=function(e){var t=0,n=0,r=0,i=0;if((0,b.isNumber)(e))t=n=r=i=e;else if((0,b.isString)(e)){t=n=r=i=parseInt(e,10)}else(0,b.isArray)(e)&&(t=e[0],r=(0,b.isNil)(e[1])?e[0]:e[1],i=(0,b.isNil)(e[2])?e[0]:e[2],n=(0,b.isNil)(e[3])?r:e[3]);return[t,r,i,n]},Hs=function(e){var t=new Fs(e.type,e);return t.clientX=e.clientX,t.clientY=e.clientY,t.x=e.x,t.y=e.y,t.target=e.target,t.currentTarget=e.currentTarget,t.bubbles=!0,t.item=e.item,t},Gs=function(e){if(!e)return!1;for(var t=[1,0,0,0,1,0,0,0,1],n=0;n<9;n++)if(e[n]!==t[n])return!0;return!1},Ws=function(e){return Number.isNaN(Number(e))},Us=function(e){for(var t=1/0,n=-1/0,r=1/0,i=-1/0,o=0;o<e.length;o++){var a=e[o].getBBox(),s=a.minX,l=a.minY,u=a.maxX,c=a.maxY;s<t&&(t=s),l<r&&(r=l),u>n&&(n=u),c>i&&(i=c)}return{x:Math.floor(t),y:Math.floor(r),width:Math.ceil(n)-Math.floor(t),height:Math.ceil(i)-Math.floor(r),minX:t,minY:r,maxX:n,maxY:i}},Vs=function(e,t,n,r,i){void 0===t&&(t=15),void 0===n&&(n="quadratic"),void 0===r&&(r=void 0),void 0===i&&(i=void 0);for(var o=e.length,a=2*t,s=["top","top-right","right","bottom-right","bottom","bottom-left","left","top-left"],l={},u=[],c={},d=0;d<o;d++){var h=e[d],f=h.source,p=h.target,m=f+"-"+p;if(!u[d]){l[m]||(l[m]=[]),u[d]=!0,l[m].push(h);for(var g=0;g<o;g++)if(d!==g){var v=e[g],y=v.source,b=v.target;u[g]||(f===b&&p===y?(l[m].push(v),u[g]=!0,c[y+"|"+b+"|"+(l[m].length-1)]=!0):f===y&&p===b&&(l[m].push(v),u[g]=!0))}}}for(var _ in l)for(var w=l[_],x=w.length,M=0;M<x;M++){var E=w[M];if(E.source!==E.target)if(1===x&&r&&E.source!==E.target)E.type=r;else{E.type=n;var S=(M%2==0?1:-1)*(c[E.source+"|"+E.target+"|"+M]?-1:1);E.curveOffset=x%2==1?S*Math.ceil(M/2)*a:S*(Math.floor(M/2)*a+t)}else i&&(E.type=i),E.loopCfg={position:s[M%8],dist:20*Math.floor(M/8)+50}}return e},Xs=function(){function e(e){this.destroyed=!1,this.graph=e,this.destroyed=!1}return e.prototype.getViewCenter=function(){var e=this.getFormatPadding(),t=this.graph,n=this.graph.get("width"),r=t.get("height");return{x:(n-e[1]-e[3])/2+e[3],y:(r-e[0]-e[2])/2+e[0]}},e.prototype.fitCenter=function(){var e=this.graph,t=e.get("group");t.resetMatrix();var n=t.getCanvasBBox();if(0!==n.width&&0!==n.height){var r=this.getViewCenter(),i=n.x+n.width/2,o=n.y+n.height/2;e.translate(r.x-i,r.y-o)}},e.prototype.fitView=function(){var e=this.graph,t=this.getFormatPadding(),n=e.get("width"),r=e.get("height"),i=e.get("group");i.resetMatrix();var o=i.getCanvasBBox();if(0!==o.width&&0!==o.height){var a=this.getViewCenter(),s=o.x+o.width/2,l=o.y+o.height/2;e.translate(a.x-s,a.y-l);var u=(n-t[1]-t[3])/o.width,c=(r-t[0]-t[2])/o.height,d=u;u>c&&(d=c),e.zoom(d,a)||console.warn("zoom failed, ratio out of range, ratio: %f",d)}},e.prototype.getFormatPadding=function(){var e=this.graph.get("fitViewPadding");return zs(e)},e.prototype.focusPoint=function(e,t,n){var r=this,i=this.getViewCenter(),o=this.getPointByCanvas(i.x,i.y),a=this.graph.get("group").getMatrix();if(a||(a=[1,0,0,0,1,0,0,0,1]),t){var s=(o.x-e.x)*a[0],l=(o.y-e.y)*a[4],u=0,c=0,d=0,h=0;this.graph.get("canvas").animate((function(e){d=s*e,h=l*e,r.graph.translate(d-u,h-c),u=d,c=h}),(0,y.__assign)({},n))}else this.graph.translate((o.x-e.x)*a[0],(o.y-e.y)*a[4])},e.prototype.getPointByCanvas=function(e,t){var n=this.graph.get("group").getMatrix();return n||(n=[1,0,0,0,1,0,0,0,1]),on({x:e,y:t},n)},e.prototype.getPointByClient=function(e,t){var n=this.graph.get("canvas").getPointByClient(e,t);return this.getPointByCanvas(n.x,n.y)},e.prototype.getClientByPoint=function(e,t){var n=this.graph.get("canvas"),r=this.getCanvasByPoint(e,t),i=n.getClientByPoint(r.x,r.y);return{x:i.x,y:i.y}},e.prototype.getCanvasByPoint=function(e,t){var n=this.graph.get("group").getMatrix();return n||(n=[1,0,0,0,1,0,0,0,1]),rn({x:e,y:t},n)},e.prototype.focus=function(e,t,n){if((0,b.isString)(e)&&(e=this.graph.findById(e)),e){var r=0,i=0;if(e.getType&&"edge"===e.getType()){var o=e.getSource().get("group").getMatrix(),a=e.getTarget().get("group").getMatrix();o&&a?(r=(o[6]+a[6])/2,i=(o[7]+a[7])/2):(o||a)&&(r=o?o[6]:a[6],i=o?o[7]:a[7])}else{var s=e.get("group").getMatrix();s||(s=[1,0,0,0,1,0,0,0,1]),r=s[6],i=s[7]}this.focusPoint({x:r,y:i},t,n)}},e.prototype.changeSize=function(e,t){var n=this.graph;if(!(0,b.isNumber)(e)||!(0,b.isNumber)(t))throw Error("invalid canvas width & height, please make sure width & height type is number");n.set({width:e,height:t}),n.get("canvas").changeSize(e,t),n.get("plugins").forEach((function(e){e.get("gridContainer")&&e.positionInit()}))},e.prototype.destroy=function(){this.graph=null,this.destroyed=!1},e}();const qs=Xs;function Ks(e){return Ks="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ks(e)}function Js(e){if("string"!=typeof e)return e;var t=function(e){if("string"!=typeof e)return e;try{return JSON.parse(e.trim())}catch(t){return e.trim()}},n=t(e);if("string"!=typeof n)return n;for(var r=function(e){return e[e.length-1]},i=e.trim(),o=[],a=[],s=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.some((function(e){return r(a)===e}))},l=null,u=0,c="";u<i.length;){var d=i[u],h=s('"',"'");if(h||d.trim()){var f="\\"===i[u-1],p=s("}"),m=s("]"),g=s(","),v=r(o);if(h)if(r(a)!==d||f)c+=d;else{a.pop();var y=t(c);v.push(y),l=y,c=""}else if(m&&","===d)c&&(v.push(t(c)),c="");else if(p&&":"===d)a.push(","),c&&(v.push(c),c="");else if(g&&","===d)c&&(v.push(t(c)),c=""),a.pop();else if("}"===d&&(p||g)){c&&(v.push(t(c)),c=""),g&&a.pop();for(var b={},_=1;_<v.length;_+=2)b[v[_-1]]=v[_];o.pop(),o.length&&r(o).push(b),a.pop(),l=b}else"]"===d&&m?(c&&(v.push(t(c)),c=""),o.pop(),o.length&&r(o).push(v),a.pop(),l=v):"{"===d?(o.push([]),a.push("}")):"["===d?(o.push([]),a.push("]")):'"'===d?a.push('"'):"'"===d?a.push("'"):c+=d;u+=1}else u+=1}return l||c}function Zs(e,t){var n={},r=e.getAttributeNames&&e.getAttributeNames()||[],i=e.children&&Array.from(e.children).map((function(e){return Zs(e,t)})),o={},a=e.tagName?e.tagName.toLowerCase():"group";return"text"===a&&(n.text=e.innerText),o.type=a,"img"===a&&(o.type="image"),Array.from(r).forEach((function(t){var r=function(e){return e.split("-").reduce((function(e,t){return e+t.charAt(0).toUpperCase()+t.slice(1)}))}(t),i=e.getAttribute(t);try{if("style"===r||"attrs"===r){var a=Js(i);n=(0,y.__assign)((0,y.__assign)({},n),a)}else o[r]=Js(i)}catch(e){if("style"===r)throw e;o[r]=i}})),o.attrs=n,t&&t.style&&o.name&&"object"===Ks(t.style[o.name])&&(o.attrs=(0,y.__assign)((0,y.__assign)({},o.attrs),t.style[o.name])),t&&t.style&&o.keyshape&&(o.attrs=(0,y.__assign)((0,y.__assign)({},o.attrs),t.style)),i.length&&(o.children=i),o}function $s(e,t){var n;void 0===t&&(t={x:0,y:0});var r=(0,y.__assign)({x:0,y:0,width:0,height:0},t);if(null===(n=e.children)||void 0===n?void 0:n.length){var i=e.attrs,o=void 0===i?{}:i,a=o.marginTop,s=(0,y.__assign)({},t);a&&(s.y+=a);for(var l=0;l<e.children.length;l++){e.children[l].attrs.key=(o.key||"root")+" -"+l+" ";var u=$s(e.children[l],s);if(u.bbox){var c=u.bbox;"inline"===u.attrs.next?s.x+=u.bbox.width:s.y+=u.bbox.height,c.width+c.x>r.width&&(r.width=c.width+c.x),c.height+c.y>r.height&&(r.height=c.height+c.y)}}}return e.bbox=function(e,t,n){var r,i,o=e.attrs,a=void 0===o?{}:o,s={x:t.x||0,y:t.y||0,width:n.width||0,height:n.height||0};switch(e.type){case"maker":case"circle":a.r&&(i=2*a.r,r=2*a.r);break;case"text":a.text&&(i=tr(a.text,a.fontSize||12)[0],r=16,s.y+=r,s.height=r,s.width=i,e.attrs=(0,y.__assign)({fontSize:12,fill:"#000"},a));break;default:a.width&&(i=a.width),a.height&&(r=a.height)}return r>=0&&(s.height=r),i>=0&&(s.width=i),a.marginTop&&(s.y+=a.marginTop),a.marginLeft&&(s.x+=a.marginLeft),s}(e,t,r),e.attrs=(0,y.__assign)((0,y.__assign)({},e.attrs),e.bbox),e}function Qs(e,t){var n,r,i,o,a=(e||{}).type,s=((null==t?void 0:t.attrs)||{}).key;if(s&&e&&(e.attrs.key=s),!e&&t)return{action:"delete",val:t,type:a,key:s};if(e&&!t)return{action:"add",val:e,type:a};if(!e&&!t)return{action:"same",type:a};var l=[];if((null===(n=e.children)||void 0===n?void 0:n.length)>0||(null===(r=t.children)||void 0===r?void 0:r.length)>0)for(var u=Math.max(null===(i=e.children)||void 0===i?void 0:i.length,null===(o=t.children)||void 0===o?void 0:o.length),c=t.children||[],d=e.children||[],h=0;h<u;h+=1)l.push(Qs(d[h],c[h]));var f=Object.keys(t.attrs),p=Object.keys(e.attrs);return t.type!==e.type?{action:"restructure",nowTarget:e,formerTarget:t,key:s,children:l}:f.filter((function(e){return"children"!==e})).some((function(n){return e.attrs[n]!==t.attrs[n]||!p.includes(n)}))?{action:"change",val:e,children:l,type:a,key:s}:{action:"same",children:l,type:a,key:s}}function el(e){var t={},n=function(t){var n=function(e){return function(t){for(var n=e.length,r=[],i=0,o="";i<n;)if("{"===e[i]&&"{"===e[i+1])r.push(o),o="",i+=2;else if("}"===e[i]&&"}"===e[i+1]){if(r.length){var a=r.pop();o=(0,b.get)(t,o,a.endsWith("=")?'"{'+o+'}"':o),r.push(a+o)}i+=2,o=""}else o+=e[i],i+=1;return r.push(o),r.map((function(e,t){return r[t-1]&&r[t-1].endsWith("=")?'"{'+e+'}"':e})).join("")}}("function"==typeof e?e(t):e)(t),r=document.createElement("div");r.innerHTML=n;var i=$s(Zs(r.children[0],t));return r.remove(),i};return{draw:function(e,r){var i=n(e),o=r;return function e(t){var n=t.attrs,i=void 0===n?{}:n,a=t.bbox,s=t.type,l=t.children,u=(0,y.__rest)(t,["attrs","bbox","type","children"]);if("group"!==t.type){var c=r.addShape(t.type,(0,y.__assign)({attrs:i,origin:{bbox:a,type:s,children:l}},u));t.keyshape&&(o=c)}t.children&&t.children.forEach((function(t){return e(t)}))}(i),t[e.id]=[i],o},update:function(e,r){t[e.id]||(t[e.id]=[]);var i=r.getContainer(),o=i.get("children"),a=n(e),s=Qs(a,t[e.id].pop()),l=function e(t){var n;"group"!==t.type&&i.addShape(t.type,{attrs:t.attrs}),(null===(n=t.children)||void 0===n?void 0:n.length)&&t.children.map((function(t){return e(t)}))},u=function e(t){var n,r=o.find((function(e){return e.attrs.key===t.attrs.key}));r&&i.removeChild(r),(null===(n=t.children)||void 0===n?void 0:n.length)&&t.children.map((function(t){return e(t)}))};!function e(t){var n=t.key;if("group"!==t.type){var i=o.find((function(e){return e.attrs.key===n}));switch(t.action){case"change":if(i){var a=t.val.keyshape?r.getOriginStyle():{};i.attr((0,y.__assign)((0,y.__assign)({},a),t.val.attrs))}break;case"add":l(t.val);break;case"delete":u(t.val);break;case"restructure":u(t.formerTarget),l(t.nowTarget)}}t.children&&t.children.forEach((function(t){return e(t)}))}(s),t[e.id].push(a)},getAnchorPoints:function(){return[[0,.5],[1,.5],[.5,1],[.5,0]]}}}var tl={};function nl(e){return tl[e]||(tl[e]=(0,b.upperFirst)(e)),tl[e]}var rl={defaultShapeType:"defaultType",className:null,getShape:function(e){var t=this;return t[e]||t[t.defaultShapeType]||t["simple-circle"]},draw:function(e,t,n){var r=this.getShape(e),i=r.draw(t,n);return r.afterDraw&&r.afterDraw(t,n,i),i},baseUpdate:function(e,t,n,r){var i=this.getShape(e);i.update&&i.update(t,n,r),i.afterUpdate&&i.afterUpdate(t,n)},setState:function(e,t,n,r){this.getShape(e).setState(t,n,r)},shouldUpdate:function(e){return!!this.getShape(e).update},getControlPoints:function(e,t){return this.getShape(e).getControlPoints(t)},getAnchorPoints:function(e,t){return this.getShape(e).getAnchorPoints(t)}},il={options:{},draw:function(e,t){return this.drawShape(e,t)},drawShape:function(){},afterDraw:function(){},afterUpdate:function(){},setState:function(){},getControlPoints:function(e){return e.controlPoints},getAnchorPoints:function(e){var t=this.options.anchorPoints;return e.anchorPoints||t}},ol=function(){function e(){}return e.registerFactory=function(t,n){var r=nl(t),i=rl,o=(0,y.__assign)((0,y.__assign)({},i),n);return e[r]=o,o.className=r,o},e.getFactory=function(t){return e[nl(t)]},e.registerNode=function(t,n,r){var i,o=e.Node;if("string"==typeof n||"function"==typeof n){var a=el(n);i=(0,y.__assign)((0,y.__assign)({},o.getShape("single-node")),a)}else if(n.jsx){a=el(n.jsx);i=(0,y.__assign)((0,y.__assign)((0,y.__assign)({},o.getShape("single-node")),a),n)}else{o.getShape(r);var s=r?o.getShape(r):il;i=(0,y.__assign)((0,y.__assign)({},s),n)}return i.type=t,i.itemType="node",o[t]=i,i},e.registerEdge=function(t,n,r){var i=e.Edge,o=r?i.getShape(r):il,a=(0,y.__assign)((0,y.__assign)({},o),n);return a.type=t,a.itemType="edge",i[t]=a,a},e.registerCombo=function(t,n,r){var i=e.Combo,o=r?i.getShape(r):il,a=(0,y.__assign)((0,y.__assign)({},o),n);return a.type=t,a.itemType="combo",i[t]=a,a},e}();const al=ol;ol.registerFactory("node",{defaultShapeType:"circle"}),ol.registerFactory("edge",{defaultShapeType:"line"}),ol.registerFactory("combo",{defaultShapeType:"circle"});var sl="bboxCache",ll="bboxCanvasCache",ul=function(){function e(e){this._cfg={},this.destroyed=!1;var t={id:void 0,type:"item",model:{},group:void 0,animate:!1,visible:!0,locked:!1,event:!0,keyShape:void 0,states:[]};this._cfg=Object.assign(t,this.getDefaultCfg(),e);var n=this.get("model"),r=n.id,i=this.get("type");r||(r=Bs(i),this.get("model").id=r),this.set("id",r);var o=e.group;o&&(o.set("item",this),o.set("id",r)),this.init(),this.draw();var a=n.shape||n.type||("edge"===i?"line":"circle"),s=this.get("shapeFactory");if(s&&s[a]){var l=s[a].options;if(l&&l.stateStyles){var u=this.get("styles")||n.stateStyles;u=(0,b.deepMix)({},l.stateStyles,u),this.set("styles",u)}}}return e.prototype.calculateBBox=function(){var e=this.get("keyShape"),t=this.get("group"),n=Xn(e,t);return n.x=n.minX,n.y=n.minY,n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2,n},e.prototype.calculateCanvasBBox=function(){var e=this.get("keyShape"),t=this.get("group"),n=Xn(e,t);return n.x=n.minX,n.y=n.minY,n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2,n},e.prototype.drawInner=function(){var e=this,t=e.get("shapeFactory"),n=e.get("group"),r=e.get("model");n.clear();var i=r.visible;if(void 0===i||i||e.changeVisibility(i),t){e.updatePosition(r);var o=e.getShapeCfg(r),a=o.type,s=t.draw(a,o,n);s&&(e.set("keyShape",s),s.set("isKeyShape",!0),s.set("draggable",!0)),this.setOriginStyle(),this.set("currentShape",a),this.restoreStates(t,a)}},e.prototype.setOriginStyle=function(){var e=this.get("group").get("children"),t=this.getKeyShape(),n=this,r=t.get("name");if(this.get("originStyle")){var i=this.getOriginStyle();r&&!i[r]&&(i[r]={});var o=this.getCurrentStatesStyle();(0,b.each)(e,(function(e){var t=e.get("name"),a=e.attr();if(t&&t!==r){var s=o[t];i[t]||(i[t]={}),s?Object.keys(a).forEach((function(e){var n=a[e];n!==s[e]&&(i[t][e]=n)})):i[t]="image"!==e.get("type")?(0,b.clone)(a):n.getShapeStyleByName(t)}else{var l=e.attr(),u={};Object.keys(o).forEach((function(e){var t=o[e];(0,b.isPlainObject)(t)&&e!==r||(u[e]=t)})),Object.keys(l).forEach((function(e){var t=l[e];u[e]!==t&&(r?i[r][e]=t:i[e]=t)}))}})),i.path&&delete i.path,i.matrix&&delete i.matrix,i.x&&delete i.x,i.y&&delete i.y,i[r]&&(delete i[r].x,delete i[r].y,delete i[r].matrix,delete i[r].path),n.set("originStyle",i)}else{var a={};(0,b.each)(e,(function(e){var t=e.get("type"),i=e.get("name");if(i&&i!==r)a[i]="image"!==t?(0,b.clone)(e.attr()):n.getShapeStyleByName(i),a[i]&&"text"===t&&(delete a[i].x,delete a[i].y,delete a[i].matrix);else{var o=n.getShapeStyleByName();if(delete o.path,delete o.matrix,r)if(i)a[r]=o;else{var s=Bs("shape");e.set("name",s),a[s]="image"!==t?(0,b.clone)(e.attr()):n.getShapeStyleByName(i)}else Object.assign(a,o)}})),n.set("originStyle",a)}},e.prototype.restoreStates=function(e,t){var n=this,r=n.get("states");(0,b.each)(r,(function(r){e.setState(t,r,!0,n)}))},e.prototype.init=function(){var e=al.getFactory(this.get("type"));this.set("shapeFactory",e)},e.prototype.get=function(e){return this._cfg[e]},e.prototype.set=function(e,t){(0,b.isPlainObject)(e)?this._cfg=(0,y.__assign)((0,y.__assign)({},this._cfg),e):this._cfg[e]=t},e.prototype.getDefaultCfg=function(){return{}},e.prototype.clearCache=function(){this.set(sl,null),this.set(ll,null)},e.prototype.beforeDraw=function(){},e.prototype.afterDraw=function(){},e.prototype.afterUpdate=function(){},e.prototype.draw=function(){this.beforeDraw(),this.drawInner(),this.afterDraw()},e.prototype.getShapeStyleByName=function(e){var t,n=this.get("group");if(t=e?n.find((function(t){return t.get("name")===e})):this.getKeyShape()){var r={};return(0,b.each)(t.attr(),(function(e,t){("img"!==t||(0,b.isString)(e))&&(r[t]=e)})),r}return{}},e.prototype.getShapeCfg=function(e,t){var n=this.get("styles");if(n){var r=e;return r.style=(0,y.__assign)((0,y.__assign)({},n),e.style),r}return e},e.prototype.getStateStyle=function(e){var t=this.get("styles");return t&&t[e]},e.prototype.getOriginStyle=function(){return this.get("originStyle")},e.prototype.getCurrentStatesStyle=function(){var e=this,t={},n=e.getStates();return n&&n.length?((0,b.each)(e.getStates(),(function(n){t=Object.assign(t,e.getStateStyle(n))})),t):this.getOriginStyle()},e.prototype.setState=function(e,t){var n=this.get("states"),r=this.get("shapeFactory"),i=e,o=e;(0,b.isString)(t)&&(i=e+":"+t,o=e+":");var a=n;if((0,b.isBoolean)(t)){var s=n.indexOf(o);if(t){if(s>-1)return;n.push(i)}else s>-1&&n.splice(s,1)}else if((0,b.isString)(t)){var l=n.filter((function(e){return e.includes(o)}));l.length>0&&this.clearStates(l),(a=a.filter((function(e){return!e.includes(o)}))).push(i),this.set("states",a)}if(r){var u=this.get("model").type;r.setState(u,e,t,this)}},e.prototype.clearStates=function(e){var t=this,n=t.getStates(),r=t.get("shapeFactory"),i=t.get("model").type;e||(e=n),(0,b.isString)(e)&&(e=[e]);var o=n.filter((function(t){return-1===e.indexOf(t)}));t.set("states",o),e.forEach((function(e){r.setState(i,e,!1,t)}))},e.prototype.getContainer=function(){return this.get("group")},e.prototype.getKeyShape=function(){return this.get("keyShape")},e.prototype.getModel=function(){return this.get("model")},e.prototype.getType=function(){return this.get("type")},e.prototype.getID=function(){return this.get("id")},e.prototype.isItem=function(){return!0},e.prototype.getStates=function(){return this.get("states")},e.prototype.hasState=function(e){return this.getStates().indexOf(e)>=0},e.prototype.refresh=function(e){var t=this.get("model");this.updatePosition(t),this.updateShape(e),this.afterUpdate(),this.clearCache()},e.prototype.getUpdateType=function(e){},e.prototype.update=function(e,t){void 0===t&&(t=void 0);var n=this.get("model");if("move"===t)this.updatePosition(e);else{var r=n.visible,i=e.visible;r!==i&&void 0!==i&&this.changeVisibility(i);var o={x:n.x,y:n.y};e.x=isNaN(+e.x)?n.x:+e.x,e.y=isNaN(+e.y)?n.y:+e.y;var a=this.get("styles");if(e.stateStyles){var s=e.stateStyles;(0,b.mix)(a,s),delete e.stateStyles}Object.assign(n,e),o.x===e.x&&o.y===e.y||this.updatePosition(e),this.updateShape()}this.afterUpdate(),this.clearCache()},e.prototype.updateShape=function(e){var t=this.get("shapeFactory"),n=this.get("model"),r=n.type;if(t.shouldUpdate(r)&&r===this.get("currentShape")){var i=this.getShapeCfg(n,e);t.baseUpdate(r,i,this,e),"move"!==e&&this.setOriginStyle()}else this.draw();this.restoreStates(t,r)},e.prototype.updatePosition=function(e){var t=this.get("model"),n=isNaN(+e.x)?+t.x:+e.x,r=isNaN(+e.y)?+t.y:+e.y,i=this.get("group");if(isNaN(n)||isNaN(r))return!1;t.x=n,t.y=r;var o=i.getMatrix();return(!o||o[6]!==n||o[7]!==r)&&(i.resetMatrix(),dn(i,{x:n,y:r}),this.clearCache(),!0)},e.prototype.getBBox=function(){var e=this.get(sl);return e||(e=this.calculateBBox(),this.set(sl,e)),e},e.prototype.getCanvasBBox=function(){var e=this.get(ll);return e||(e=this.calculateCanvasBBox(),this.set(ll,e)),e},e.prototype.toFront=function(){this.get("group").toFront()},e.prototype.toBack=function(){this.get("group").toBack()},e.prototype.show=function(){this.changeVisibility(!0)},e.prototype.hide=function(){this.changeVisibility(!1)},e.prototype.changeVisibility=function(e){var t=this.get("group");e?t.show():t.hide(),this.set("visible",e)},e.prototype.isVisible=function(){return this.get("visible")},e.prototype.enableCapture=function(e){var t=this.get("group");t&&t.set("capture",e)},e.prototype.destroy=function(){if(!this.destroyed){var e=this.get("animate"),t=this.get("group");e&&t.stopAnimate(),this.clearCache(),t.remove(),this._cfg=null,this.destroyed=!0}},e}();const cl=ul;var dl={source:"start",target:"end"},hl="Node",fl="Point",pl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,y.__extends)(t,e),t.prototype.getDefaultCfg=function(){return{type:"edge",sourceNode:null,targetNode:null,startPoint:null,endPoint:null,linkCenter:!1}},t.prototype.setEnd=function(e,t){var n=dl[e]+fl,r=e+hl,i=this.get(r);i&&!i.destroyed&&i.removeEdge(this),(0,b.isPlainObject)(t)?(this.set(n,t),this.set(r,null)):t&&(t.addEdge(this),this.set(r,t),this.set(n,null))},t.prototype.getLinkPoint=function(e,t,n){var r=dl[e]+fl,i=e+hl,o=this.get(r);if(!o){var a=this.get(i),s=e+"Anchor",l=this.getPrePoint(e,n),u=t[s];(0,b.isNil)(u)||(o=a.getLinkPointByAnchor(u)),o=o||a.getLinkPoint(l),(0,b.isNil)(o.index)||this.set(e+"AnchorIndex",o.index)}return o},t.prototype.getPrePoint=function(e,t){if(t&&t.length)return t["source"===e?0:t.length-1];var n="source"===e?"target":"source";return this.getEndPoint(n)},t.prototype.getEndPoint=function(e){var t=e+hl,n=dl[e]+fl,r=this.get(t);return r?r.get("model"):this.get(n)},t.prototype.getControlPointsByCenter=function(e){var t=this.getEndPoint("source"),n=this.getEndPoint("target"),r=this.get("shapeFactory"),i=e.type;return r.getControlPoints(i,{startPoint:t,endPoint:n})},t.prototype.getEndCenter=function(e){var t=e+hl,n=dl[e]+fl,r=this.get(t);if(r){var i=r.getBBox();return{x:i.centerX,y:i.centerY}}return this.get(n)},t.prototype.init=function(){e.prototype.init.call(this),this.setSource(this.get("source")),this.setTarget(this.get("target"))},t.prototype.getShapeCfg=function(t,n){var r=this,i=r.get("linkCenter"),o="move"===n?t:e.prototype.getShapeCfg.call(this,t);if(i)o.startPoint=r.getEndCenter("source"),o.endPoint=r.getEndCenter("target");else{var a=o.controlPoints||r.getControlPointsByCenter(o);o.startPoint=r.getLinkPoint("source",t,a),o.endPoint=r.getLinkPoint("target",t,a)}return o.sourceNode=r.get("sourceNode"),o.targetNode=r.get("targetNode"),o},t.prototype.getModel=function(){var e=this.get("model"),t=this.get("sourceNode"),n=this.get("targetNode");return t?delete e.sourceNode:e.source=this.get("startPoint"),n?delete e.targetNode:e.target=this.get("endPoint"),(0,b.isString)(e.source)||(0,b.isPlainObject)(e.source)||(e.source=e.source.getID()),(0,b.isString)(e.target)||(0,b.isPlainObject)(e.target)||(e.target=e.target.getID()),e},t.prototype.setSource=function(e){this.setEnd("source",e),this.set("source",e)},t.prototype.setTarget=function(e){this.setEnd("target",e),this.set("target",e)},t.prototype.getSource=function(){return this.get("source")},t.prototype.getTarget=function(){return this.get("target")},t.prototype.updatePosition=function(){return!1},t.prototype.update=function(e,t){void 0===t&&(t=void 0);var n=this.get("model"),r=n.visible,i=e.visible;r!==i&&void 0!==i&&this.changeVisibility(i);var o=this.get("styles");if(e.stateStyles){var a=e.stateStyles;(0,b.mix)(o,a),delete e.stateStyles}Object.assign(n,e),this.updateShape(t),this.afterUpdate(),this.clearCache()},t.prototype.destroy=function(){var t=this.get("sourceNode"),n=this.get("targetNode");t&&!t.destroyed&&t.removeEdge(this),n&&!n.destroyed&&n.removeEdge(this),e.prototype.destroy.call(this)},t}(cl);const ml=pl;var gl="anchorPointsCache",vl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,y.__extends)(t,e),t.prototype.getNearestPoint=function(e,t){for(var n=0,r=e[0],i=sn(e[0],t),o=0;o<e.length;o++){var a=e[o],s=sn(a,t);s<i&&(r=a,i=s,n=o)}return r.anchorIndex=n,r},t.prototype.getDefaultCfg=function(){return{type:"node",edges:[]}},t.prototype.getEdges=function(){return this.get("edges")},t.prototype.getInEdges=function(){var e=this;return this.get("edges").filter((function(t){return t.get("target")===e}))},t.prototype.getOutEdges=function(){var e=this;return this.get("edges").filter((function(t){return t.get("source")===e}))},t.prototype.getNeighbors=function(e){var t=this,n=this.get("edges");if("target"===e){return n.filter((function(e){return e.getSource()===t})).map((function(e){return e.getTarget()}))}if("source"===e){return n.filter((function(e){return e.getTarget()===t})).map((function(e){return e.getSource()}))}return n.map((function(e){return e.getSource()===t?e.getTarget():e.getSource()}))},t.prototype.getLinkPointByAnchor=function(e){return this.getAnchorPoints()[e]},t.prototype.getLinkPoint=function(e){var t,n,r=this.get("keyShape").get("type"),i=this.get("type"),o=this.getBBox();"combo"===i?(t=o.centerX||(o.maxX+o.minX)/2,n=o.centerY||(o.maxY+o.minY)/2):(t=o.centerX,n=o.centerY);var a,s=this.getAnchorPoints();switch(r){case"circle":a=tn({x:t,y:n,r:o.width/2},e);break;case"ellipse":a=nn({x:t,y:n,rx:o.width/2,ry:o.height/2},e);break;default:a=en(o,e)}var l=a;return s.length&&(l||(l=e),l=this.getNearestPoint(s,l)),l||(l={x:t,y:n}),l},t.prototype.getAnchorPoints=function(){var e=this.get(gl);if(!e){e=[];var t=this.get("shapeFactory"),n=this.getBBox(),r=this.get("model"),i=this.getShapeCfg(r),o=r.type,a=t.getAnchorPoints(o,i)||[];(0,b.each)(a,(function(t,r){var i={x:n.minX+t[0]*n.width,y:n.minY+t[1]*n.height,anchorIndex:r};e.push(i)})),this.set(gl,e)}return e},t.prototype.addEdge=function(e){this.get("edges").push(e)},t.prototype.lock=function(){this.set("locked",!0)},t.prototype.unlock=function(){this.set("locked",!1)},t.prototype.hasLocked=function(){return this.get("locked")},t.prototype.removeEdge=function(e){var t=this.getEdges(),n=t.indexOf(e);n>-1&&t.splice(n,1)},t.prototype.clearCache=function(){this.set("bboxCache",null),this.set(gl,null)},t.prototype.getUpdateType=function(e){var t,n,r,i,o;if(e){var a=!(0,b.isNil)(e.x),s=!(0,b.isNil)(e.y),l=Object.keys(e);return 1===l.length&&(a||s)||2===l.length&&a&&s?"move":(0,b.isNumber)(e.x)||(0,b.isNumber)(e.y)||e.type||e.anchorPoints||e.size||(null==e?void 0:e.style)&&((null===(t=null==e?void 0:e.style)||void 0===t?void 0:t.r)||(null===(n=null==e?void 0:e.style)||void 0===n?void 0:n.width)||(null===(r=null==e?void 0:e.style)||void 0===r?void 0:r.height)||(null===(i=null==e?void 0:e.style)||void 0===i?void 0:i.rx)||(null===(o=null==e?void 0:e.style)||void 0===o?void 0:o.ry))?"bbox":"style"}},t}(cl);const yl=vl;var bl="bboxCache",_l="bboxCanvasCache",wl="sizeCache",xl="anchorPointsCache",Ml=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,y.__extends)(t,e),t.prototype.getDefaultCfg=function(){return{type:"combo",nodes:[],edges:[],combos:[]}},t.prototype.getShapeCfg=function(e){var t=this.get("styles"),n=this.get("bbox");if(t&&n){var r=e,i={r:Math.hypot(n.height,n.width)/2||Bn.defaultCombo.size[0]/2,width:n.width||Bn.defaultCombo.size[0],height:n.height||Bn.defaultCombo.size[1]};r.style=(0,y.__assign)((0,y.__assign)((0,y.__assign)({},t),e.style),i);var o=e.padding||Bn.defaultCombo.padding;return(0,b.isNumber)(o)?(i.r+=o,i.width+=2*o,i.height+=2*o):(i.r+=o[0],i.width+=o[1]+o[3]||2*o[1],i.height+=o[0]+o[2]||2*o[0]),this.set(wl,i),r}return e},t.prototype.calculateCanvasBBox=function(){if(!this.destroyed){var e=this.get("keyShape"),t=this.get("group"),n=Xn(e,t);n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2;var r=this.get(wl),i=this.get(bl)||{},o=i.x,a=i.x;if(r)r.width=Math.max(r.width,n.width),r.height=Math.max(r.height,n.height),"circle"===e.get("type")?(n.width=2*r.r,n.height=2*r.r):(n.width=r.width,n.height=r.height),n.minX=n.centerX-n.width/2,n.minY=n.centerY-n.height/2,n.maxX=n.centerX+n.width/2,n.maxY=n.centerY+n.height/2;else n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2;return n.x=n.minX,n.y=n.minY,n.x===o&&n.y===a||this.set(xl,null),n}},t.prototype.getChildren=function(){return{nodes:this.getNodes(),combos:this.getCombos()}},t.prototype.getNodes=function(){return this.get("nodes")},t.prototype.getCombos=function(){return this.get("combos")},t.prototype.addChild=function(e){switch(e.getType()){case"node":this.addNode(e);break;case"combo":this.addCombo(e);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},t.prototype.addCombo=function(e){return this.get("combos").push(e),!0},t.prototype.addNode=function(e){return this.get("nodes").push(e),!0},t.prototype.removeChild=function(e){switch(e.getType()){case"node":this.removeNode(e);break;case"combo":this.removeCombo(e);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},t.prototype.removeCombo=function(e){if(e){var t=this.getCombos(),n=t.indexOf(e);return n>-1&&(t.splice(n,1),!0)}},t.prototype.removeNode=function(e){if(e){var t=this.getNodes(),n=t.indexOf(e);return n>-1&&(t.splice(n,1),!0)}},t.prototype.getUpdateType=function(e){},t.prototype.getBBox=function(){return this.set(_l,null),this.calculateCanvasBBox()},t.prototype.clearCache=function(){this.set(bl,null),this.set(_l,null),this.set(xl,null)},t.prototype.destroy=function(){if(!this.destroyed){var e=this.get("animate"),t=this.get("group");e&&t.stopAnimate(),this.clearCache(),this.set(wl,null),this.set("bbox",null),t.remove(),this._cfg=null,this.destroyed=!0}},t}(yl);const El=Ml;var Sl="node",kl="edge",Tl="vedge",Ll="combo",Cl="Mapper",Dl="stateStyles",Al=function(){function e(e){var t=this;this.edgeToBeUpdateMap={},this.throttleRefresh=(0,b.throttle)((function(e){var n,r=t.graph;if(r&&!r.get("destroyed")){var i=t.edgeToBeUpdateMap;i&&(null===(n=Object.keys(i))||void 0===n?void 0:n.length)&&(Object.keys(i).forEach((function(e){var t=i[e].edge;t&&!t.destroyed&&t.refresh(i[e].updateType)})),t.edgeToBeUpdateMap={})}}),16,{trailing:!0,leading:!0}),this.graph=e,this.destroyed=!1}return e.prototype.addItem=function(e,t){var n=this.graph,r=e===Tl?kl:e,i=n.get(r+"Group")||n.get("group"),o=(0,b.upperFirst)(r),a=null,s=n.get(r+(0,b.upperFirst)(Dl))||{},l=n.get("default"+o);t.stateStyles&&(s=t.stateStyles),l&&(0,b.each)(l,(function(e,n){(0,b.isObject)(e)&&!(0,b.isArray)(e)?t[n]=(0,b.deepMix)({},e,t[n]):(0,b.isArray)(e)?t[n]=t[n]||(0,b.clone)(l[n]):t[n]=t[n]||l[n]}));var u=n.get(r+Cl);if(u){var c=u(t);c.stateStyles&&(s=c.stateStyles,delete c.stateStyles),(0,b.each)(c,(function(e,n){(0,b.isObject)(e)&&!(0,b.isArray)(e)?t[n]=(0,b.deepMix)({},t[n],e):t[n]=c[n]||t[n]}))}if(n.emit("beforeadditem",{type:e,model:t}),e===kl||e===Tl){var d=void 0,h=void 0;if(d=t.source,h=t.target,d&&(0,b.isString)(d)&&(d=n.findById(d)),h&&(0,b.isString)(h)&&(h=n.findById(h)),!d||!h)return void console.warn("The source or target node of edge "+t.id+" does not exist!");d.getType&&"combo"===d.getType()&&(t.isComboEdge=!0),h.getType&&"combo"===h.getType()&&(t.isComboEdge=!0),a=new ml({model:t,source:d,target:h,styles:s,linkCenter:n.get("linkCenter"),group:i.addGroup()})}else if(e===Sl)a=new yl({model:t,styles:s,group:i.addGroup()});else if(e===Ll){var f=t.children,p=ir(f,n);isNaN(p.x)?isNaN(t.x)&&(t.x=100*Math.random()):t.x=p.x,isNaN(p.y)?isNaN(t.y)&&(t.y=100*Math.random()):t.y=p.y;var m=i.addGroup();m.setZIndex(t.depth);var g=(a=new El({model:t,styles:s,bbox:t.collapsed?ir([],n):p,group:m})).getModel();(f||[]).forEach((function(e){var t=n.findById(e.id);a.addChild(t),e.depth=g.depth+2})),t.collapsed&&setTimeout((function(){a.destroyed||n.collapseCombo(a)}),0)}if(a)return n.get(e+"s").push(a),n.get("itemMap")[a.get("id")]=a,n.emit("afteradditem",{item:a,model:t}),a},e.prototype.updateItem=function(e,t){var n,r,i=this,o=this.graph;if((0,b.isString)(e)&&(e=o.findById(e)),e&&!e.destroyed){var a="";e.getType&&(a=e.getType());var s=o.get(a+Cl),l=e.getModel(),u=e.getUpdateType(t);if(s){var c=s((0,b.deepMix)({},l,t)),d=(0,b.deepMix)({},l,c,t);c.stateStyles&&(e.set("styles",d.stateStyles),delete d.stateStyles),(0,b.each)(d,(function(e,n){t[n]=e}))}else(0,b.each)(t,(function(e,n){l[n]&&(0,b.isObject)(e)&&!(0,b.isArray)(e)&&(t[n]=(0,y.__assign)((0,y.__assign)({},l[n]),t[n]))}));if(o.emit("beforeupdateitem",{item:e,cfg:t}),a===kl){if(t.source){var h=t.source;(0,b.isString)(h)&&(h=o.findById(h)),e.setSource(h)}if(t.target){var f=t.target;(0,b.isString)(f)&&(f=o.findById(f)),e.setTarget(f)}e.update(t)}if(a===Sl||a===Ll){e.update(t,u);var p=e.getEdges(),m="bbox"===u||"move"===u;if(a===Sl)"move"===u?(0,b.each)(p,(function(e){i.edgeToBeUpdateMap[e.getID()]={edge:e,updateType:u},i.throttleRefresh()})):m&&(0,b.each)(p,(function(e){e.refresh()}));else if(m&&a===Ll){var g=e.get("shapeFactory"),v=l.type||"circle";(void 0===l.animate||void 0===t.animate?null===(r=null===(n=g[v])||void 0===n?void 0:n.options)||void 0===r?void 0:r.animate:l.animate||t.animate)?setTimeout((function(){if(e&&!e.destroyed){var t=e.getKeyShape();t&&!t.destroyed&&(0,b.each)(p,(function(e){e&&!e.destroyed&&e.refresh()}))}}),201):(0,b.each)(p,(function(e){e.refresh()}))}}o.emit("afterupdateitem",{item:e,cfg:t})}},e.prototype.updateCombo=function(e,t){var n,r,i=this,o=this.graph;if((0,b.isString)(e)&&(e=o.findById(e)),e&&!e.destroyed){var a=e.getModel(),s=ir(a.collapsed?[]:t,o),l=a.collapsed?ir(t,o):s,u=l.x,c=l.y;e.set("bbox",s),e.update({x:u,y:c});var d=e.get("shapeFactory"),h=a.type||"circle";(void 0===a.animate?null===(r=null===(n=d[h])||void 0===n?void 0:n.options)||void 0===r?void 0:r.animate:a.animate)?setTimeout((function(){if(e&&!e.destroyed){var t=e.getKeyShape();t&&!t.destroyed&&(e.getShapeCfg(a),i.updateComboEdges(e))}}),201):this.updateComboEdges(e)}},e.prototype.updateComboEdges=function(e){for(var t=e.getEdges()||[],n=0;n<t.length;n++){var r=t[n];if(r&&!r.destroyed){var i=r.get("shapeFactory"),o=r.getShapeCfg(r.getModel()),a=r.getContainer();a.clear();var s=i.draw(o.type,o,a);r.set("keyShape",s),s.set("isKeyShape",!0),s.set("draggable",!0),r.setOriginStyle()}}},e.prototype.collapseCombo=function(e){var t=this.graph;(0,b.isString)(e)&&(e=t.findById(e));var n=e.getChildren();n.nodes.forEach((function(e){t.hideItem(e)})),n.combos.forEach((function(e){t.hideItem(e)}))},e.prototype.expandCombo=function(e){var t=this.graph;(0,b.isString)(e)&&(e=t.findById(e));var n=e.getChildren();n.nodes.forEach((function(e){t.showItem(e)})),n.combos.forEach((function(e){e.getModel().collapsed?e.show():t.showItem(e)}))},e.prototype.removeItem=function(e){var t=this,n=this.graph;if((0,b.isString)(e)&&(e=n.findById(e)),e&&!e.destroyed){var r=(0,b.clone)(e.getModel());n.emit("beforeremoveitem",{item:r});var i="";e.getType&&(i=e.getType());var o=n.get(i+"s"),a=o.indexOf(e);if(a>-1&&o.splice(a,1),i===kl){var s=n.get("v"+i+"s"),l=s.indexOf(e);l>-1&&s.splice(l,1)}var u=e.get("id");delete n.get("itemMap")[u];var c=n.get("comboTrees"),d=e.get("id");if(i===Sl){var h=e.getModel().comboId;if(c&&h){var f=c,p=!1;c.forEach((function(e){p||$n(e,(function(e){if(e.id===d&&f){var t=f.indexOf(e);return f.splice(t,1),p=!0,!1}return f=e.children,!0}))}))}for(var m=(_=e.getEdges()).length-1;m>=0;m--)n.removeItem(_[m],!1);h&&n.updateCombo(h)}else if(i===Ll){var g,v=e.getModel().parentId,y=!1;(c||[]).forEach((function(e){y||$n(e,(function(e){return e.id!==d||(g=e,y=!0,!1)}))})),g.removed=!0,g&&g.children&&g.children.forEach((function(e){t.removeItem(e.id)}));var _;for(m=(_=e.getEdges()).length;m>=0;m--)n.removeItem(_[m],!1);v&&n.updateCombo(v)}e.destroy(),n.emit("afterremoveitem",{item:r})}},e.prototype.setItemState=function(e,t,n){var r=this.graph,i=t;(0,b.isString)(n)&&(i=t+":"+n),e.hasState(i)===n&&n||(0,b.isString)(n)&&e.hasState(i)||(r.emit("beforeitemstatechange",{item:e,state:i,enabled:n}),e.setState(t,n),r.autoPaint(),r.emit("afteritemstatechange",{item:e,state:i,enabled:n}))},e.prototype.priorityState=function(e,t){var n=this.graph,r=e;(0,b.isString)(e)&&(r=n.findById(e)),this.setItemState(r,t,!1),this.setItemState(r,t,!0)},e.prototype.clearItemStates=function(e,t){var n=this.graph;(0,b.isString)(e)&&(e=n.findById(e)),n.emit("beforeitemstatesclear",{item:e,states:t}),e.clearStates(t),n.emit("afteritemstatesclear",{item:e,states:t})},e.prototype.refreshItem=function(e){var t=this.graph;(0,b.isString)(e)&&(e=t.findById(e)),t.emit("beforeitemrefresh",{item:e}),e.refresh(),t.emit("afteritemrefresh",{item:e})},e.prototype.addCombos=function(e,t){var n=this,r=this.graph;(e||[]).forEach((function(e){Qn(e,(function(e){var r;return t.forEach((function(t){t.id===e.id&&(t.children=e.children,t.depth=e.depth,r=t)})),r&&n.addItem("combo",r),!0}))}));var i=r.get("comboGroup");i&&i.sort()},e.prototype.changeItemVisibility=function(e,t){var n=this,r=this.graph;if((0,b.isString)(e)&&(e=r.findById(e)),e){if(r.emit("beforeitemvisibilitychange",{item:e,visible:t}),e.changeVisibility(t),e.getType&&e.getType()===Sl){var i=e.getEdges();(0,b.each)(i,(function(e){(!t||e.get("source").isVisible()&&e.get("target").isVisible())&&n.changeItemVisibility(e,t)}))}else if(e.getType&&e.getType()===Ll){var o=r.get("comboTrees"),a=e.get("id"),s=[],l=!1;(o||[]).forEach((function(e){l||e.children&&0!==e.children.length&&$n(e,(function(e){return e.id!==a||(s=e.children,l=!0,!1)}))})),s&&(!t||t&&!e.getModel().collapsed)&&s.forEach((function(e){var i=r.findById(e.id);n.changeItemVisibility(i,t)}));i=e.getEdges();(0,b.each)(i,(function(e){(!t||e.get("source").isVisible()&&e.get("target").isVisible())&&n.changeItemVisibility(e,t)}))}return r.emit("afteritemvisibilitychange",{item:e,visible:t}),e}console.warn("The item to be shown or hidden does not exist!")},e.prototype.destroy=function(){this.graph=null,this.destroyed=!0},e}();const Pl=Al;var Ol=null,Il=function(){function e(e){this.graph=e,this.cachedStates={enabled:{},disabled:{}},this.destroyed=!1}return e.checkCache=function(e,t,n){if(n[t]){var r=n[t].indexOf(e);r>=0&&n[t].splice(r,1)}},e.cacheState=function(e,t,n){n[t]||(n[t]=[]),n[t].push(e)},e.prototype.updateState=function(t,n,r){var i=this,o=e.checkCache,a=e.cacheState;if(!t.destroyed){var s=this.cachedStates,l=s.enabled,u=s.disabled;r?(o(t,n,u),a(t,n,l)):(o(t,n,l),a(t,n,u)),Ol&&clearTimeout(Ol),Ol=setTimeout((function(){Ol=null,i.updateGraphStates()}),16)}},e.prototype.updateStates=function(e,t,n){var r=this;(0,b.isString)(t)?this.updateState(e,t,n):t.forEach((function(t){r.updateState(e,t,n)}))},e.prototype.updateGraphStates=function(){var e=this.graph.get("states"),t=this.cachedStates;(0,b.each)(t.disabled,(function(t,n){e[n]&&(e[n]=e[n].filter((function(e){return t.indexOf(e)<0&&!t.destroyed})))})),(0,b.each)(t.enabled,(function(t,n){if(e[n]){var r={};e[n].forEach((function(e){e.destroyed||(r[e.get("id")]=!0)})),t.forEach((function(t){if(!t.destroyed){var i=t.get("id");r[i]||(r[i]=!0,e[n].push(t))}}))}else e[n]=t})),this.graph.emit("graphstatechange",{states:e}),this.cachedStates={enabled:{},disabled:{}}},e.prototype.destroy=function(){this.graph=null,this.cachedStates=null,Ol&&clearTimeout(Ol),Ol=null,this.destroyed=!0},e}();const Rl=Il;var Nl=function(e,t){return e&&t?e.replace(/\\?\{([^{}]+)\}/g,(function(e,n){if("\\"===e.charAt(0))return e.slice(1);var r=t[n];return 0===r&&(r="0"),r||""})):e},Yl=function(e){var t=[];if(e.length<2)throw new Error("point length must largn than 2, now it's "+e.length);for(var n=0,r=e;n<r.length;n++){var i=r[n],o=i.x,a=i.y;t.push(o),t.push(a)}var s=Es(t);return s.unshift(["M",e[0].x,e[0].y]),s},jl=function(e,t,n,r){void 0===n&&(n=0),void 0===r&&(r=0);var i={x:(1-n)*e.x+n*t.x,y:(1-n)*e.y+n*t.y},o=[0,0];Vt(o,[t.x-e.x,t.y-e.y]),o&&(o[0]||o[1])||(o=[0,0]);var a=[-o[1]*r,o[0]*r];return i.x+=a[0],i.y+=a[1],i},Fl=function(e,t){var n=e.length;if(!n)return"";for(var r="",i=0;i<n;i++){var o=e[i];r+=Nl(0===i?"M{x} {y}":"L{x} {y}",o)}return t&&(r+="Z"),r},Bl=function(e){var t=[];return e.forEach((function(e){if("A"!==e[0])for(var n=1;n<e.length;n+=2)t.push([e[n],e[n+1]]);else{var r=e.length;t.push([e[r-2],e[r-1]])}})),t},zl=function(e){if(e.length<2)throw new Error("point length must largn than 2, now it's "+e.length);var t=e[0],n=e[1],r=e[e.length-1],i=e[e.length-2];e.unshift(r),e.unshift(i),e.push(t),e.push(n);for(var o=[],a=1;a<e.length-2;a+=1){var s=e[a-1].x,l=e[a-1].y,u=e[a].x,c=e[a].y,d=e[a+1].x,h=e[a+1].y,f=u+(d-s)/6,p=c+(h-l)/6,m=d-((a!==e.length-2?e[a+2].x:d)-u)/6,g=h-((a!==e.length-2?e[a+2].y:h)-c)/6;o.push(["C",f,p,m,g,d,h])}return o.unshift(["M",r.x,r.y]),o},Hl=function(e,t){return Wt([0,0],Vt([0,0],e),t)},Gl=function(e,t){var n=[e[1]-t[1],t[0]-e[0]],r=Math.sqrt(n[0]*n[0]+n[1]*n[1]);if(0===r)throw new Error("p0 should not be equal to p1");return[n[0]/r,n[1]/r]},Wl=function(e,t){return[t[0]-e[0],t[1]-e[1]]};function Ul(e,t){if(!e||e.length<1)return"";if(1===e.length)return function(e){var n=[e[0][0],e[0][1]-t],r=[e[0][0],e[0][1]+t];return"M "+n+" A "+t+","+t+",0,0,0,"+r+" A "+t+","+t+",0,0,0,"+n}(e);if(2===e.length)return function(e){var n=Wt([0,0],Gl(e[0],e[1]),t),r=Wt([0,0],n,-1),i=zt([0,0],e[0],n),o=zt([0,0],e[1],n),a=zt([0,0],e[1],r),s=zt([0,0],e[0],r);return"M "+i+" L "+o+" A "+[t,t,"0,0,0",a].join(",")+" L "+s+" A "+[t,t,"0,0,0",i].join(",")}(e);for(var n=new Array(e.length),r=0;r<n.length;++r){var i=0===r?e[e.length-1]:e[r-1],o=e[r],a=Wt([0,0],Gl(i,o),t);n[r]=[zt([0,0],i,a),zt([0,0],o,a)]}var s="A "+[t,t,"0,0,0,"].join(",");return n=n.map((function(e,t){var r="";return 0===t&&(r="M "+n[n.length-1][1]+" "),r+=s+e[0]+" L "+e[1]})),n.join(" ")}function Vl(e,t){var n,r,i,o=e.length;if(!e||o<1)return"";if(1===o)return r=[(n=e)[0][0],n[0][1]-t],i=[n[0][0],n[0][1]+t],"M "+r+" A "+[t,t,"0,0,0",i].join(",")+" A "+[t,t,"0,0,0",r].join(",");if(2===o)return function(e){var n=Wl(e[0],e[1]),r=Hl(n,t),i=zt([0,0],e[0],Wt([0,0],r,-1)),o=zt([0,0],e[1],r),a=1.2*t,s=Hl(Vt([0,0],n),a),l=Wt([0,0],s,-1),u=zt([0,0],i,l),c=zt([0,0],o,l),d=zt([0,0],i,s);return"M "+i+" C "+[u,c,o].join(",")+" S "+[d,i].join(",")+" Z"}(e);for(var a=e.map((function(t,n){var r=e[(n+1)%o];return{p:t,v:Vt([0,0],Wl(t,r))}})),s=0;s<a.length;++s){var l=Vt([0,0],zt([0,0],a[s>0?s-1:o-1].v,Wt([0,0],a[s].v,-1)));a[s].p=zt([0,0],a[s].p,Wt([0,0],l,t))}return a.map((function(e){var t=e.p;return{x:t[0],y:t[1]}}))}var Xl=function(e,t,n){return(e.y-n.y)*(t.x-n.x)-(e.x-n.x)*(t.y-n.y)},ql=function(e){var t=e.map((function(e){return{x:e.getModel().x,y:e.getModel().y}}));if(t.sort((function(e,t){return e.x===t.x?e.y-t.y:e.x-t.x})),1===t.length)return t;for(var n=[],r=0;r<t.length;r++){for(;n.length>=2&&Xl(n[n.length-2],n[n.length-1],t[r])<=0;)n.pop();n.push(t[r])}var i=[];for(r=t.length-1;r>=0;r--){for(;i.length>=2&&Xl(i[i.length-2],i[i.length-1],t[r])<=0;)i.pop();i.push(t[r])}return i.pop(),n.pop(),n.concat(i)},Kl={maxRoutingIterations:100,maxMarchingIterations:100,pixelGroupSize:2,edgeR0:10,edgeR1:10,nodeR0:5,nodeR1:10,morphBuffer:5,threshold:.001,skip:16,nodeInfluenceFactor:1,edgeInfluenceFactor:1,negativeNodeInfluenceFactor:-.5};function Jl(e,t,n){var r=!1,i=function(e,n){return t.cells[e+n*t.width]},o=function(e,t){var r=0;return i(e-1,t-1)>=n&&(r+=1),i(e,t-1)>n&&(r+=2),i(e-1,t)>n&&(r+=4),i(e,t)>n&&(r+=8),r},a=function(n,r){for(var i,a,s=n,l=r,u=0;u<t.width*t.height;u++){if(i=s,a=l,e.findIndex((function(e){return e.x===s&&e.y===l}))>-1){if(e[0].x===s&&e[0].y===l)return!0}else e.push({x:s,y:l});var c=o(s,l);switch(c){case-1:return console.warn("Marched out of bounds"),!0;case 0:case 3:case 2:case 7:s++;break;case 12:case 14:case 4:s--;break;case 6:0===i&&(-1===a?s-=1:s+=1);break;case 1:case 13:case 5:l--;break;case 9:1===i&&(0===a?l-=1:l+=1);break;case 10:case 8:case 11:l++;break;default:return console.warn("Marching squares invalid state: "+c),!0}}};this.march=function(){for(var e=0;e<t.width&&!r;e+=1)for(var s=0;s<t.height&&!r;s+=1)i(e,s)>n&&15!==o(e,s)&&(r=a(e,s));return r}}var Zl=function(e,t){var n=Number.POSITIVE_INFINITY,r=null;return e.forEach((function(e){var i=En(e,t);i>=0&&i<n&&(r=e,n=i)})),r};function $l(e,t,n,r,i){var o=function(e,t,n){var r=null,i=Number.POSITIVE_INFINITY;return t.forEach((function(t){var o={x:e.getModel().x,y:e.getModel().y},a={x:t.getModel().x,y:t.getModel().y},s=kn(o,a),l=new _n(o.x,o.y,a.x,a.y),u=n.reduce((function(e,t){return En(t,l)>0?e+1:e}),0);s*Math.pow(u+1,2)<i&&(r=t,i=s*Math.pow(u+1,2))})),r}(e,n,t);if(null===o)return[];var a=function(e,t,n,r){var i=[],o=[];o.push(e);for(var a=!0,s=0,l=function(e,t){var n=!1;return t.forEach((function(t){n||(Ln(e,{x:t.x1,y:t.y1})||Ln(e,{x:t.x2,y:t.y2}))&&(n=!0)})),n},u=function(e,t){for(var n=0,r=t;n<r.length;n++){var i=r[n].getBBox(),o=[[i.x,i.y],[i.x+i.width,i.y],[i.x,i.y+i.height],[i.x+i.width,i.y+i.height]];if(vn(o,e.x,e.y))return!0}return!1};a&&s<n;){a=!1;for(var c=function(){var e=o.pop(),n=Zl(t,e);if(n){var c=Mn(n,e),d=c[0];if(2===c[1]){var h=function(s){for(var c=r,h=tu(n,c,d,s),f=l(h,o)||l(h,i),p=u(h,t);!f&&p&&c>=1;)h=tu(n,c/=1.5,d,s),f=l(h,o)||l(h,i),p=u(h,t);!h||f||s&&p||(o.push(new _n(e.x1,e.y1,h.x,h.y)),o.push(new _n(h.x,h.y,e.x2,e.y2)),a=!0)};h(!0),a||h(!1)}}a||i.push(e),s+=1};!a&&o.length;)c()}for(;o.length;)i.push(o.pop());return i}(new _n(e.getModel().x,e.getModel().y,o.getModel().x,o.getModel().y),t,r,i),s=function(e){for(var n=[];e.length>0;){var r=e.pop();if(0===e.length){n.push(r);break}var i=e.pop(),o=new _n(r.x1,r.y1,i.x2,i.y2);Zl(t,o)?(n.push(r),e.push(i)):e.push(o)}return n}(a);return s}var Ql=function(e,t,n){var r=Object.assign(Kl,n),i=Sn(e.map((function(e){return{x:e.getModel().x,y:e.getModel().y}})));e=e.sort((function(e,t){return kn({x:e.getModel().x,y:e.getModel().y},i)-kn({x:t.getModel().x,y:t.getModel().y},i)}));var o=[],a=[];e.forEach((function(e){$l(e,t,o,r.maxRoutingIterations,r.morphBuffer).forEach((function(e){a.push(e)})),o.push(e)}));for(var s,l,u,c,d,h=function(e,t,n){var r={minX:Number.POSITIVE_INFINITY,minY:Number.POSITIVE_INFINITY,maxX:Number.NEGATIVE_INFINITY,maxY:Number.NEGATIVE_INFINITY,width:0,height:0,x:0,y:0},i=[];e.forEach((function(e){i.push(e.getBBox())})),t.forEach((function(e){i.push(e.getBBox())}));for(var o=0,a=i;o<a.length;o++){var s=a[o];r.minX=(s.minX<r.minX?s.minX:r.minX)-n,r.minY=(s.minY<r.minY?s.minY:r.minY)-n,r.maxX=(s.maxX>r.maxX?s.maxX:r.maxX)+n,r.maxY=(s.maxY>r.maxY?s.maxY:r.maxY)+n}return r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.x=r.minX,r.y=r.minY,r}(e,a,r.nodeR0),f=(s=h.width,l=h.height,u=r.pixelGroupSize,c=Math.ceil(s/u),d=Math.ceil(l/u),{cells:new Float32Array(Math.max(0,c*d)).fill(0),width:c,height:d}),p=[],m=[],g=0;g<r.maxMarchingIterations;g++)if(eu(e,t,a,h,f,r),m=[],new Jl(p=[],f,r.threshold).march()){var v=p.map((function(e){return{x:Math.round(e.x*r.pixelGroupSize+h.minX),y:Math.round(e.y*r.pixelGroupSize+h.minY)}}));if(v){var y=v.length;if(r.skip>1)for(y=Math.floor(v.length/r.skip);y<3&&r.skip>1;)r.skip-=1,y=Math.floor(v.length/r.skip);for(var b=0,_=0;_<y;_+=1,b+=r.skip)m.push({x:v[b].x,y:v[b].y})}if(m&&function(){for(var t=0,n=e;t<n.length;t++){var r=n[t],i=m.map((function(e){return[e.x,e.y]}));if(!vn(i,r.getBBox().centerX,r.getBBox().centerY))return!1}return!0}())return m;if(r.threshold*=.9,g<=.5*r.maxMarchingIterations)r.memberInfluenceFactor*=1.2,r.edgeInfluenceFactor*=1.2;else{if(!(0!==r.nonMemberInfluenceFactor&&t.length>0))break;r.nonMemberInfluenceFactor*=.8}}return m};function eu(e,t,n,r,i,o){function a(e,t){var n=Math.floor((e-t)/o.pixelGroupSize);return n<0?0:n}function s(e,t){return e*o.pixelGroupSize+t}var l=(o.nodeR0-o.nodeR1)*(o.nodeR0-o.nodeR1),u=(o.edgeR0-o.edgeR1)*(o.edgeR0-o.edgeR1),c=function(e,t){return[Math.min(a(e.minX,t+r.minX),i.width),Math.min(a(e.minY,t+r.minY),i.height),Math.min(a(e.maxX,-t+r.minX),i.width),Math.min(a(e.maxY,-t+r.minY),i.height)]},d=function(e,t){for(var n=e.getBBox(),a=c(n,o.nodeR1),l=a[0],u=a[1],d=a[2],h=a[3],f=u;f<h;f+=1)for(var p=l;p<d;p+=1)if(!(t<0&&i[p+f*i.width]<=0)){var m=s(p,r.minX),g=s(f,r.minY),v=Cn({x:m,y:g},{x:n.minX,y:n.minY,width:n.width,height:n.height});if(v<Math.pow(o.nodeR1,2)){var y=Math.sqrt(v)-o.nodeR1;i.cells[p+f*i.width]+=t*y*y}}};o.nodeInfluenceFactor&&e.forEach((function(e){d(e,o.nodeInfluenceFactor/l)})),o.edgeInfluenceFactor&&n.forEach((function(e){!function(e,t){for(var n=e.getBBox(),a=c(n,o.edgeR1),l=a[0],u=a[1],d=a[2],h=a[3],f=u;f<h;f+=1)for(var p=l;p<d;p+=1)if(!(t<0&&i.cells[p+f*i.width]<=0)){var m=s(p,r.minX),g=s(f,r.minY),v=Tn({x:m,y:g},e);if(v<Math.pow(o.edgeR1,2)){var y=Math.sqrt(v)-o.edgeR1;i.cells[p+f*i.width]+=t*y*y}}}(e,o.edgeInfluenceFactor/u)})),o.negativeNodeInfluenceFactor&&t.forEach((function(e){d(e,o.negativeNodeInfluenceFactor/l)}))}function tu(e,t,n,r){var i=e.getBBox(),o=n[0],a=n[1],s=n[2],l=n[3],u={topLeft:{x:i.minX-t,y:i.minY-t},topRight:{x:i.maxX+t,y:i.minY-t},bottomLeft:{x:i.minX-t,y:i.maxY+t},bottomRight:{x:i.maxX+t,y:i.maxY+t}},c=i.height*i.width;function d(e,t){return i.width*(.5*(e.y-i.minY+(t.y-i.minY)))}if(a)return o?r?u.topLeft:u.bottomRight:s?r?u.bottomLeft:u.topRight:d(a,l)<.5*c?a.y>l.y?r?u.topLeft:u.bottomRight:r?u.topRight:u.bottomLeft:a.y<l.y?r?u.bottomLeft:u.topRight:r?u.bottomRight:u.topLeft;if(l){if(o)return r?u.topRight:u.bottomLeft;if(s)return r?u.bottomRight:u.topLeft}return d(o,s)<.5*c?o.x>s.x?r?u.topLeft:u.bottomRight:r?u.bottomLeft:u.topRight:o.x<s.x?r?u.topRight:u.bottomLeft:r?u.bottomRight:u.topLeft}var nu=function(){function e(e,t){this.cfg=(0,b.deepMix)(this.getDefaultCfg(),t),this.graph=e,this.id=this.cfg.id,this.group=this.cfg.group,this.members=this.cfg.members.map((function(t){return(0,b.isString)(t)?e.findById(t):t})),this.nonMembers=this.cfg.nonMembers.map((function(t){return(0,b.isString)(t)?e.findById(t):t})),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()}return e.prototype.getDefaultCfg=function(){return{id:"g6-hull",type:"round-convex",members:[],nonMembers:[],style:{fill:"lightblue",stroke:"blue",opacity:.2},padding:10}},e.prototype.setPadding=function(){var e=this.members.length&&this.members[0].getKeyShape().getCanvasBBox().width/2;this.padding=this.cfg.padding>0?this.cfg.padding+e:10+e,this.cfg.bubbleCfg={nodeR0:this.padding-e,nodeR1:this.padding-e,morphBuffer:this.padding-e}},e.prototype.setType=function(){this.type=this.cfg.type,this.members.length<3&&(this.type="round-convex"),"round-convex"!==this.type&&"smooth-convex"!==this.type&&"bubble"!==this.type&&(console.warn("The hull type should be either round-convex, smooth-convex or bubble, round-convex is used by default."),this.type="round-convex")},e.prototype.calcPath=function(e,t){var n,r,i;switch(this.type){case"round-convex":r=Ts(i=Ul((n=ql(e)).map((function(e){return[e.x,e.y]})),this.padding));break;case"smooth-convex":2===(n=ql(e)).length?r=Ts(i=Ul(n.map((function(e){return[e.x,e.y]})),this.padding)):n.length>2&&(i=Vl(n.map((function(e){return[e.x,e.y]})),this.padding),r=zl(i));break;case"bubble":r=(n=Ql(e,t,this.cfg.bubbleCfg)).length>=2&&zl(n)}return r},e.prototype.render=function(){this.group.addShape("path",{attrs:(0,y.__assign)({path:this.path},this.cfg.style),id:this.id,name:this.cfg.id}),this.group.toBack()},e.prototype.addMember=function(e){if(e){(0,b.isString)(e)&&(e=this.graph.findById(e)),this.members.push(e);var t=this.nonMembers.indexOf(e);return t>-1&&this.nonMembers.splice(t,1),this.updateData(this.members,this.nonMembers),!0}},e.prototype.addNonMember=function(e){if(e){(0,b.isString)(e)&&(e=this.graph.findById(e)),this.nonMembers.push(e);var t=this.members.indexOf(e);return t>-1&&this.members.splice(t,1),this.updateData(this.members,this.nonMembers),!0}},e.prototype.removeMember=function(e){if(e){(0,b.isString)(e)&&(e=this.graph.findById(e));var t=this.members.indexOf(e);return t>-1&&(this.members.splice(t,1),this.updateData(this.members,this.nonMembers),!0)}},e.prototype.removeNonMember=function(e){if(e){(0,b.isString)(e)&&(e=this.graph.findById(e));var t=this.nonMembers.indexOf(e);return t>-1&&(this.nonMembers.splice(t,1),this.updateData(this.members,this.nonMembers),!0)}},e.prototype.updateData=function(e,t){var n=this;this.group.findById(this.id).remove(),e&&(this.members=e.map((function(e){return(0,b.isString)(e)?n.graph.findById(e):e}))),t&&(this.nonMembers=t.map((function(e){return(0,b.isString)(e)?n.graph.findById(e):e}))),this.path=this.calcPath(this.members,this.nonMembers),this.render()},e.prototype.updateStyle=function(e){this.group.findById(this.id).attr((0,y.__assign)({},e))},e.prototype.updateCfg=function(e){var t=this;this.cfg=(0,b.deepMix)(this.cfg,e),this.id=this.cfg.id,this.group=this.cfg.group,e.members&&(this.members=this.cfg.members.map((function(e){return(0,b.isString)(e)?t.graph.findById(e):e}))),e.nonMembers&&(this.nonMembers=this.cfg.nonMembers.map((function(e){return(0,b.isString)(e)?t.graph.findById(e):e}))),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()},e.prototype.contain=function(e){var t,n,r=this,i=(t=(0,b.isString)(e)?this.graph.findById(e):e).getKeyShape();if("path"===t.get("type"))n=Bl(i.attr("path"));else{var o=i.getCanvasBBox();n=[[o.minX,o.minY],[o.maxX,o.minY],[o.maxX,o.maxY],[o.minX,o.maxY]]}return n=n.map((function(e){var t=r.graph.getPointByCanvas(e[0],e[1]);return[t.x,t.y]})),bn(n,Bl(this.path))},e.prototype.destroy=function(){this.group.remove(),this.cfg=null},e}();const ru=nu;var iu=ce,ou=function(e){function t(t){var n=e.call(this)||this;return n.cfg=(0,b.deepMix)(n.getDefaultCfg(),t),n.init(),n.animating=!1,n.destroyed=!1,n.cfg.enabledStack&&(n.undoStack=new yt(n.cfg.maxStep),n.redoStack=new yt(n.cfg.maxStep)),n}return(0,y.__extends)(t,e),t.prototype.init=function(){this.initCanvas();var e=new qs(this),t=new ur(this),n=new Pl(this),r=new Rl(this);this.set({viewController:e,modeController:t,itemController:n,stateController:r}),this.initLayoutController(),this.initEventController(),this.initGroups(),this.initPlugins()},t.prototype.initGroups=function(){var e=this.get("canvas"),t=(null==e?void 0:e.get("el")).id,n=e.addGroup({id:t+"-root",className:Bn.rootContainerClassName});if(this.get("groupByTypes")){var r=n.addGroup({id:t+"-edge",className:Bn.edgeContainerClassName}),i=n.addGroup({id:t+"-node",className:Bn.nodeContainerClassName}),o=n.addGroup({id:t+"-combo",className:Bn.comboContainerClassName});o.toBack(),this.set({nodeGroup:i,edgeGroup:r,comboGroup:o})}var a=n.addGroup({id:t+"-delegate",className:Bn.delegateContainerClassName});this.set({delegateGroup:a}),this.set("group",n)},t.prototype.getDefaultCfg=function(){return{container:void 0,width:void 0,height:void 0,renderer:"canvas",modes:{},plugins:[],data:{},fitViewPadding:10,minZoom:.2,maxZoom:10,event:!0,groupByTypes:!0,directed:!1,autoPaint:!0,nodes:[],edges:[],combos:[],vedges:[],itemMap:{},linkCenter:!1,defaultNode:{},defaultEdge:{},nodeStateStyles:{},edgeStateStyles:{},states:{},animate:!1,animateCfg:{onFrame:void 0,duration:500,easing:"easeLinear"},callback:void 0,enabledStack:!1,maxStep:10,tooltips:[]}},t.prototype.set=function(e,t){return(0,b.isPlainObject)(e)?this.cfg=(0,y.__assign)((0,y.__assign)({},this.cfg),e):this.cfg[e]=t,this},t.prototype.get=function(e){var t;return null===(t=this.cfg)||void 0===t?void 0:t[e]},t.prototype.getGroup=function(){return this.get("group")},t.prototype.getContainer=function(){return this.get("container")},t.prototype.getMinZoom=function(){return this.get("minZoom")},t.prototype.setMinZoom=function(e){return this.set("minZoom",e)},t.prototype.getMaxZoom=function(){return this.get("maxZoom")},t.prototype.setMaxZoom=function(e){return this.set("maxZoom",e)},t.prototype.getWidth=function(){return this.get("width")},t.prototype.getHeight=function(){return this.get("height")},t.prototype.clearItemStates=function(e,t){(0,b.isString)(e)&&(e=this.findById(e));var n=this.get("itemController");t||(t=e.get("states")),n.clearItemStates(e,t),this.get("stateController").updateStates(e,t,!1)},t.prototype.node=function(e){"function"==typeof e&&this.set("nodeMapper",e)},t.prototype.edge=function(e){"function"==typeof e&&this.set("edgeMapper",e)},t.prototype.combo=function(e){"function"==typeof e&&this.set("comboMapper",e)},t.prototype.findById=function(e){return this.get("itemMap")[e]},t.prototype.find=function(e,t){var n,r=this.get(e+"s");return(0,b.each)(r,(function(e,r){if(t(e,r))return n=e})),n},t.prototype.findAll=function(e,t){var n=[];return(0,b.each)(this.get(e+"s"),(function(e,r){t(e,r)&&n.push(e)})),n},t.prototype.findAllByState=function(e,t){return this.findAll(e,(function(e){return e.hasState(t)}))},t.prototype.translate=function(e,t){var n=this.get("group"),r=(0,b.clone)(n.getMatrix());r||(r=[1,0,0,0,1,0,0,0,1]),r=iu(r,[["t",e,t]]),n.setMatrix(r),this.emit("viewportchange",{action:"translate",matrix:n.getMatrix()}),this.autoPaint()},t.prototype.moveTo=function(e,t,n,r){var i=this.get("group");hn(i,{x:e,y:t},n,r||{duration:500,easing:"easeCubic"}),this.emit("viewportchange",{action:"move",matrix:i.getMatrix()})},t.prototype.fitView=function(e){e&&this.set("fitViewPadding",e),this.get("viewController").fitView(),this.autoPaint()},t.prototype.fitCenter=function(){this.get("viewController").fitCenter(),this.autoPaint()},t.prototype.addBehaviors=function(e,t){return this.get("modeController").manipulateBehaviors(e,t,!0),this},t.prototype.removeBehaviors=function(e,t){return this.get("modeController").manipulateBehaviors(e,t,!1),this},t.prototype.updateBehavior=function(e,t,n){return this.get("modeController").updateBehavior(e,t,n),this},t.prototype.zoom=function(e,t){var n=this.get("group"),r=(0,b.clone)(n.getMatrix()),i=this.get("minZoom"),o=this.get("maxZoom");return r||(r=[1,0,0,0,1,0,0,0,1]),r=iu(r,t?[["t",-t.x,-t.y],["s",e,e],["t",t.x,t.y]]:[["s",e,e]]),!(i&&r[0]<i||o&&r[0]>o)&&(n.setMatrix(r),this.emit("viewportchange",{action:"zoom",matrix:r}),this.autoPaint(),!0)},t.prototype.zoomTo=function(e,t){var n=e/this.getZoom();return this.zoom(n,t)},t.prototype.focusItem=function(e,t,n){var r=this.get("viewController"),i=!1;t?i=!0:void 0===t&&(i=this.get("animate"));var o={};n?o=n:void 0===n&&(o=this.get("animateCfg")),r.focus(e,i,o),this.autoPaint()},t.prototype.autoPaint=function(){this.get("autoPaint")&&this.paint()},t.prototype.paint=function(){this.emit("beforepaint"),this.get("canvas").draw(),this.emit("afterpaint")},t.prototype.getPointByClient=function(e,t){return this.get("viewController").getPointByClient(e,t)},t.prototype.getClientByPoint=function(e,t){return this.get("viewController").getClientByPoint(e,t)},t.prototype.getPointByCanvas=function(e,t){return this.get("viewController").getPointByCanvas(e,t)},t.prototype.getCanvasByPoint=function(e,t){return this.get("viewController").getCanvasByPoint(e,t)},t.prototype.getGraphCenterPoint=function(){var e=this.get("group").getCanvasBBox();return{x:(e.minX+e.maxX)/2,y:(e.minY+e.maxY)/2}},t.prototype.getViewPortCenterPoint=function(){return this.getPointByCanvas(this.get("width")/2,this.get("height")/2)},t.prototype.showItem=function(e,t){void 0===t&&(t=!0);var n=this.get("itemController").changeItemVisibility(e,!0);if(t&&this.get("enabledStack")){var r=n.getID(),i={},o={};switch(n.getType()){case"node":i.nodes=[{id:r,visible:!1}],o.nodes=[{id:r,visible:!0}];break;case"edge":i.nodes=[{id:r,visible:!1}],o.edges=[{id:r,visible:!0}];break;case"combo":i.nodes=[{id:r,visible:!1}],o.combos=[{id:r,visible:!0}]}this.pushStack("visible",{before:i,after:o})}},t.prototype.hideItem=function(e,t){void 0===t&&(t=!0);var n=this.get("itemController").changeItemVisibility(e,!1);if(t&&this.get("enabledStack")){var r=n.getID(),i={},o={};switch(n.getType()){case"node":i.nodes=[{id:r,visible:!0}],o.nodes=[{id:r,visible:!1}];break;case"edge":i.nodes=[{id:r,visible:!0}],o.edges=[{id:r,visible:!1}];break;case"combo":i.nodes=[{id:r,visible:!0}],o.combos=[{id:r,visible:!1}]}this.pushStack("visible",{before:i,after:o})}},t.prototype.refreshItem=function(e){this.get("itemController").refreshItem(e)},t.prototype.setAutoPaint=function(e){this.set("autoPaint",e),this.get("canvas").set("autoDraw",e)},t.prototype.remove=function(e,t){void 0===t&&(t=!0),this.removeItem(e,t)},t.prototype.removeItem=function(e,t){void 0===t&&(t=!0);var n=e;if((0,b.isString)(e)&&(n=this.findById(e)),!n&&(0,b.isString)(e))console.warn("The item to be removed does not exist!");else if(n){var r="";if(n.getType&&(r=n.getType()),t&&this.get("enabledStack")){var i=(0,y.__assign)((0,y.__assign)({},n.getModel()),{itemType:r}),o={};switch(r){case"node":o.nodes=[i],o.edges=[];for(var a=n.getEdges(),s=a.length-1;s>=0;s--)o.edges.push((0,y.__assign)((0,y.__assign)({},a[s].getModel()),{itemType:"edge"}));break;case"edge":o.edges=[i];break;case"combo":o.combos=[i]}this.pushStack("delete",{before:o,after:{}})}if("node"===r)n.getModel().comboId&&this.updateComboTree(n,void 0,!1);if(this.get("itemController").removeItem(n),"combo"===r){var l=rr(this.get("comboTrees"));this.set("comboTrees",l)}}},t.prototype.addItem=function(e,t,n,r){void 0===n&&(n=!0),void 0===r&&(r=!0);var i=this.get("comboSorted");this.set("comboSorted",i&&!r);var o=this.get("itemController");if(!function(e,t){if("node"===e||"combo"===e){if(t.id&&!(0,b.isString)(t.id))return console.warn("G6 Warning Tips: missing 'id' property, or the 'id' %c"+t.id+"%c is not a string.","font-size: 20px; color: red;",""),!1}else if(!("edge"!==e||t.source&&t.target))return console.warn("G6 Warning Tips: missing 'source' or 'target' for the edge."),!1;return!0}(e,t))return!1;if(!t.id||!this.findById(t.id)){var a,s=this.get("comboTrees");if(s||(s=[]),"combo"===e){var l=this.get("itemMap"),u=!1;if(s.forEach((function(n){u||Qn(n,(function(n){if(t.parentId===n.id){u=!0;var r=(0,y.__assign)({id:t.id,depth:n.depth+2},t);n.children?n.children.push(r):n.children=[r],t.depth=r.depth,a=o.addItem(e,t)}var i=l[n.id];return u&&i&&i.getType&&"combo"===i.getType()&&o.updateCombo(i,n.children),!0}))})),!u){var c=(0,y.__assign)({id:t.id,depth:0},t);t.depth=c.depth,s.push(c),a=o.addItem(e,t)}this.set("comboTrees",s)}else if("node"===e&&(0,b.isString)(t.comboId)&&s){var d;(d=this.findById(t.comboId))&&d.getType&&"combo"!==d.getType()&&console.warn("'"+t.comboId+"' is not a id of a combo in the graph, the node will be added without combo."),a=o.addItem(e,t);var h=this.get("itemMap"),f=!1,p=!1;(s||[]).forEach((function(e){p||f||Qn(e,(function(e){if(e.id===t.id)return p=!0,!1;if(t.comboId===e.id&&!p){f=!0;var n=(0,b.clone)(t);n.itemType="node",e.children?e.children.push(n):e.children=[n],n.depth=e.depth+1}return f&&h[e.id].getType&&"combo"===h[e.id].getType()&&o.updateCombo(h[e.id],e.children),!0}))}))}else a=o.addItem(e,t);if("node"===e&&t.comboId||"combo"===e&&t.parentId)(d=this.findById(t.comboId||t.parentId))&&d.getType&&"combo"===d.getType()&&d.addChild(a);var m=this.get("combos");if(m&&m.length>0&&this.sortCombos(),this.autoPaint(),n&&this.get("enabledStack")){var g=(0,y.__assign)((0,y.__assign)({},a.getModel()),{itemType:e}),v={};switch(e){case"node":v.nodes=[g];break;case"edge":v.edges=[g];break;case"combo":v.combos=[g]}this.pushStack("add",{before:{},after:v})}return a}console.warn("This item exists already. Be sure the id %c"+t.id+"%c is unique.","font-size: 20px; color: red;","")},t.prototype.add=function(e,t,n,r){return void 0===n&&(n=!0),void 0===r&&(r=!0),this.addItem(e,t,n,r)},t.prototype.updateItem=function(e,t,n){var r=this;void 0===n&&(n=!0);var i,o=this.get("itemController");i=(0,b.isString)(e)?this.findById(e):e;var a=(0,b.clone)(i.getModel()),s="";i.getType&&(s=i.getType());var l=(0,y.__spreadArray)([],i.getStates());if("combo"===s&&(0,b.each)(l,(function(e){return r.setItemState(i,e,!1)})),o.updateItem(i,t),"combo"===s&&(0,b.each)(l,(function(e){return r.setItemState(i,e,!0)})),n&&this.get("enabledStack")){var u={nodes:[],edges:[],combos:[]},c={nodes:[],edges:[],combos:[]},d=(0,y.__assign)({id:a.id},t);switch(s){case"node":u.nodes.push(a),c.nodes.push(d);break;case"edge":u.edges.push(a),c.edges.push(d);break;case"combo":u.combos.push(a),c.combos.push(d)}"node"===s&&u.nodes.push(a),this.pushStack("update",{before:u,after:c})}},t.prototype.update=function(e,t,n){void 0===n&&(n=!0),this.updateItem(e,t,n)},t.prototype.setItemState=function(e,t,n){(0,b.isString)(e)&&(e=this.findById(e)),this.get("itemController").setItemState(e,t,n);var r=this.get("stateController");(0,b.isString)(n)?r.updateState(e,t+":"+n,!0):r.updateState(e,t,n)},t.prototype.priorityState=function(e,t){this.get("itemController").priorityState(e,t)},t.prototype.data=function(e){sr(e),this.set("data",e)},t.prototype.render=function(){var e=this;this.set("comboSorted",!1);var t=this.get("data");if(this.get("enabledStack")&&this.clearStack(),!t)throw new Error("data must be defined first");var n=t.nodes,r=void 0===n?[]:n,i=t.edges,o=void 0===i?[]:i,a=t.combos,s=void 0===a?[]:a;if(this.clear(!0),this.emit("beforerender"),(0,b.each)(r,(function(t){e.add("node",t,!1,!1)})),s&&0!==s.length){var l=nr(s,r);this.set("comboTrees",l),e.addCombos(s)}(0,b.each)(o,(function(t){e.add("edge",t,!1,!1)}));var u=e.get("animate");(e.get("fitView")||e.get("fitCenter"))&&e.set("animate",!1);var c=e.get("layoutController");if(c){if(c.layout((function(){e.get("fitView")?e.fitView():e.get("fitCenter")&&e.fitCenter();e.autoPaint(),e.emit("afterrender"),(e.get("fitView")||e.get("fitCenter"))&&e.set("animate",u)})),this.destroyed)return}else e.get("fitView")&&e.fitView(),e.get("fitCenter")&&e.fitCenter(),e.emit("afterrender"),e.set("animate",u);this.get("groupByTypes")||(s&&0!==s.length?this.sortCombos():t.nodes&&t.edges&&t.nodes.length<t.edges.length?this.getNodes().forEach((function(e){e.toFront()})):this.getEdges().forEach((function(e){e.toBack()})));this.get("enabledStack")&&this.pushStack("render")},t.prototype.read=function(e){this.data(e),this.render()},t.prototype.diffItems=function(e,t,n){var r,i=this,o=this.get("itemMap");(0,b.each)(n,(function(n){if(r=o[n.id]){if(i.get("animate")&&"node"===e){var a=r.getContainer().getMatrix();a||(a=[1,0,0,0,1,0,0,0,1]),r.set("originAttrs",{x:a[6],y:a[7]})}i.updateItem(r,n,!1)}else r=i.addItem(e,n,!1);r&&t[e+"s"].push(r)}))},t.prototype.changeData=function(e,t){void 0===t&&(t=!0);var n=this;if(!sr(e))return this;t&&this.get("enabledStack")&&this.pushStack("changedata",{before:n.save(),after:e}),this.set("comboSorted",!1),this.removeHulls(),this.getNodes().map((function(e){return n.clearItemStates(e)})),this.getEdges().map((function(e){return n.clearItemStates(e)}));var r=this.get("canvas"),i=r.get("localRefresh");r.set("localRefresh",!1),n.get("data")||(n.data(e),n.render());var o=this.get("itemMap"),a={nodes:[],edges:[]},s=e.combos;if(s){var l=nr(s,e.nodes);this.set("comboTrees",l)}else this.set("comboTrees",[]);this.diffItems("node",a,e.nodes),(0,b.each)(o,(function(e,t){o[t].getModel().depth=0,e.getType&&"edge"===e.getType()||(e.getType&&"combo"===e.getType()?(delete o[t],e.destroy()):a.nodes.indexOf(e)<0&&(delete o[t],n.remove(e,!1)))}));for(var u=this.getCombos(),c=u.length-1;c>=0;c--)u[c].destroyed&&u.splice(c,1);s&&(n.addCombos(s),this.get("groupByTypes")||this.sortCombos()),this.diffItems("edge",a,e.edges),(0,b.each)(o,(function(e,t){(!e.getType||"node"!==e.getType()&&"combo"!==e.getType())&&a.edges.indexOf(e)<0&&(delete o[t],n.remove(e,!1))})),this.set({nodes:a.nodes,edges:a.edges});var d=this.get("layoutController");return d&&(d.changeData(),n.get("animate")&&!d.getLayoutType()?n.positionsAnimate():n.autoPaint()),setTimeout((function(){r.set("localRefresh",i)}),16),this},t.prototype.addCombos=function(e){var t=this.get("comboTrees");this.get("itemController").addCombos(t,e)},t.prototype.createCombo=function(e,t){var n=this;this.set("comboSorted",!1);var r,i="";if(e){if((0,b.isString)(e))i=e,r={id:e};else{if(!(i=e.id))return void console.warn("Create combo failed. Please assign a unique string id for the adding combo.");r=e}var o=t.map((function(e){var t=n.findById(e),r=t.getModel(),o="";t.getType&&(o=t.getType());var a={id:t.getID(),itemType:o};return"combo"===o?(a.parentId=i,r.parentId=i):"node"===o&&(a.comboId=i,r.comboId=i),a}));r.children=o,this.addItem("combo",r,!1),this.set("comboSorted",!1);var a=this.get("comboTrees");(a||[]).forEach((function(e){Qn(e,(function(e){return e.id!==i||(e.itemType="combo",e.children=o,!1)}))})),a&&this.sortCombos()}},t.prototype.uncombo=function(e){var t=this,n=e;if((0,b.isString)(e)&&(n=this.findById(e)),!n||n.getType&&"combo"!==n.getType())console.warn("The item is not a combo!");else{var r=n.getModel().parentId,i=this.get("comboTrees");i||(i=[]);var o,a=this.get("itemMap"),s=n.get("id"),l=[],u=this.get("combos"),c=this.findById(r);if(i.forEach((function(e){o||Qn(e,(function(e){if(e.id===s){o=e,n.getEdges().forEach((function(e){t.removeItem(e,!1)}));var i=u.indexOf(n);u.splice(i,1),delete a[s],n.destroy(),t.emit("afterremoveitem",{item:n})}return!r||!o||e.id!==r||(c.removeCombo(n),-1!==(i=(l=e.children).indexOf(o))&&l.splice(i,1),o.children.forEach((function(e){var n=t.findById(e.id),i=n.getModel();n.getType&&"combo"===n.getType()?(e.parentId=r,delete e.comboId,i.parentId=r,delete i.comboId):n.getType&&"node"===n.getType()&&(e.comboId=r,i.comboId=r),c.addChild(n),l.push(e)})),!1)}))})),!r&&o){var d=i.indexOf(o);i.splice(d,1),o.children.forEach((function(e){e.parentId=void 0;var n=t.findById(e.id).getModel();delete n.parentId,delete n.comboId,"node"!==e.itemType&&i.push(e)}))}}},t.prototype.updateCombos=function(){var e=this,t=this,n=this.get("comboTrees"),r=t.get("itemController"),i=t.get("itemMap");(n||[]).forEach((function(t){Qn(t,(function(t){if(!t)return!0;var n=i[t.id];if(n&&n.getType&&"combo"===n.getType()){var o=(0,y.__spreadArray)([],n.getStates());(0,b.each)(o,(function(t){return e.setItemState(n,t,!1)})),r.updateCombo(n,t.children),(0,b.each)(o,(function(t){return e.setItemState(n,t,!0)}))}return!0}))})),t.sortCombos()},t.prototype.updateCombo=function(e){var t,n=this,r=e;if((0,b.isString)(e)&&(r=this.findById(e)),!r||r.getType&&"combo"!==r.getType())console.warn("The item to be updated is not a combo!");else{t=r.get("id");var i=this.get("comboTrees"),o=this.get("itemController"),a=this.get("itemMap");(i||[]).forEach((function(e){Qn(e,(function(e){if(!e)return!0;var r=a[e.id];if(t===e.id&&r&&r.getType&&"combo"===r.getType()){var i=(0,y.__spreadArray)([],r.getStates());(0,b.each)(i,(function(e){r.getStateStyle(e)&&n.setItemState(r,e,!1)})),o.updateCombo(r,e.children),(0,b.each)(i,(function(e){r.getStateStyle(e)&&n.setItemState(r,e,!0)})),t&&(t=e.parentId)}return!0}))}))}},t.prototype.updateComboTree=function(e,t,n){void 0===n&&(n=!0);var r;this.set("comboSorted",!1);var i,o=(r=(0,b.isString)(e)?this.findById(e):e).getModel(),a=o.comboId||o.parentId,s="";if(r.getType&&(s=r.getType()),t&&"combo"===s){var l,u=this.get("comboTrees"),c=!0;if((u||[]).forEach((function(e){l||$n(e,(function(e){if(!l)return e.id===r.getID()&&(l=e),!0}))})),$n(l,(function(e){return e.id!==t||(c=!1,!1)})),!c)return void console.warn("Failed to update the combo tree! The parentId points to a descendant of the combo!")}if(n&&this.get("enabledStack")){var d={},h={};"combo"===s?(d.combos=[{id:o.id,parentId:o.parentId}],h.combos=[{id:o.id,parentId:t}]):"node"===s&&(d.nodes=[{id:o.id,parentId:o.comboId}],h.nodes=[{id:o.id,parentId:t}]),this.pushStack("updateComboTree",{before:d,after:h})}if(o.parentId||o.comboId){var f=this.findById(o.parentId||o.comboId);f&&f.removeChild(r)}("combo"===s?o.parentId=t:"node"===s&&(o.comboId=t),t)&&((i=this.findById(t))&&i.addChild(r));a&&((i=this.findById(a))&&i.removeChild(r));var p=rr(this.get("comboTrees"),o.id,t);this.set("comboTrees",p),this.updateCombos()},t.prototype.save=function(){var e=[],t=[],n=[];return(0,b.each)(this.get("nodes"),(function(t){e.push(t.getModel())})),(0,b.each)(this.get("edges"),(function(e){t.push(e.getModel())})),(0,b.each)(this.get("combos"),(function(e){n.push(e.getModel())})),{nodes:e,edges:t,combos:n}},t.prototype.changeSize=function(e,t){return this.get("viewController").changeSize(e,t),this},t.prototype.refresh=function(){var e=this;if(e.emit("beforegraphrefresh"),e.get("animate"))e.positionsAnimate();else{var t=e.get("nodes"),n=e.get("edges"),r=e.get("edges");(0,b.each)(t,(function(e){e.refresh()})),(0,b.each)(n,(function(e){e.refresh()})),(0,b.each)(r,(function(e){e.refresh()}))}e.emit("aftergraphrefresh"),e.autoPaint()},t.prototype.getNodes=function(){return this.get("nodes")},t.prototype.getEdges=function(){return this.get("edges")},t.prototype.getCombos=function(){return this.get("combos")},t.prototype.getComboChildren=function(e){if((0,b.isString)(e)&&(e=this.findById(e)),e&&(!e.getType||"combo"===e.getType()))return e.getChildren();console.warn("The combo does not exist!")},t.prototype.positionsAnimate=function(){var e=this;e.emit("beforeanimate");var t=e.get("animateCfg"),n=t.onFrame,r=e.getNodes(),i=r.map((function(e){var t=e.getModel();return{id:t.id,x:t.x,y:t.y}}));e.isAnimating()&&e.stopAnimate(),e.get("canvas").animate((function(t){(0,b.each)(i,(function(r){var i=e.findById(r.id);if(i&&!i.destroyed){var o=i.get("originAttrs"),a=i.get("model");if(!o){var s=i.getContainer().getMatrix();s||(s=[1,0,0,0,1,0,0,0,1]),o={x:s[6],y:s[7]},i.set("originAttrs",o)}if(n){var l=n(i,t,r,o);i.set("model",Object.assign(a,l))}else a.x=o.x+(r.x-o.x)*t,a.y=o.y+(r.y-o.y)*t}})),e.refreshPositions()}),{duration:t.duration,easing:t.easing,callback:function(){(0,b.each)(r,(function(e){e.set("originAttrs",null)})),t.callback&&t.callback(),e.emit("afteranimate"),e.animating=!1}})},t.prototype.refreshPositions=function(){var e=this;e.emit("beforegraphrefreshposition");var t,n=e.get("nodes"),r=e.get("edges"),i=e.get("vedges"),o=e.get("combos"),a={};(0,b.each)(n,(function(e){t=e.getModel();var n=e.get("originAttrs");if(!n||t.x!==n.x||t.y!==n.y){var r=e.updatePosition({x:t.x,y:t.y});a[t.id]=r,t.comboId&&(a[t.comboId]=a[t.comboId]||r)}})),o&&0!==o.length&&e.updateCombos(),(0,b.each)(r,(function(e){var t=e.getSource().getModel(),n=e.getTarget();if(!(0,b.isPlainObject)(n)){var r=n.getModel();(a[t.id]||a[r.id]||e.getModel().isComboEdge)&&e.refresh()}})),(0,b.each)(i,(function(e){e.refresh()})),e.emit("aftergraphrefreshposition"),e.autoPaint()},t.prototype.stopAnimate=function(){this.get("canvas").stopAnimate()},t.prototype.isAnimating=function(){return this.animating},t.prototype.getZoom=function(){var e=this.get("group").getMatrix();return e?e[0]:1},t.prototype.getCurrentMode=function(){return this.get("modeController").getMode()},t.prototype.setMode=function(e){return this.get("modeController").setMode(e),this},t.prototype.clear=function(e){var t;return void 0===e&&(e=!1),null===(t=this.get("canvas"))||void 0===t||t.clear(),this.initGroups(),this.set({itemMap:{},nodes:[],edges:[],groups:[],combos:[],comboTrees:[]}),e||this.emit("afterrender"),this},t.prototype.updateLayout=function(e,t,n){var r=this,i=this.get("layoutController");if((0,b.isString)(e)&&(e={type:e}),t){var o=n;o||(o="begin"===t?{x:0,y:0}:{x:this.getWidth()/2,y:this.getHeight()/2}),o=this.getPointByCanvas(o.x,o.y);var a=["force","gForce","fruchterman"];a.includes(e.type)||!e.type&&a.includes(null==i?void 0:i.layoutType)?e.center=[o.x,o.y]:this.once("afterlayout",(function(e){var n=r.getGroup().getMatrix()||[1,0,0,0,1,0,0,0,1];o.x=o.x*n[0]+n[6],o.y=o.y*n[0]+n[7];var i=r.getGroup().getCanvasBBox(),a=i.minX,s=i.maxX,l=i.minY,u={x:(a+s)/2,y:(l+i.maxY)/2};"begin"===t&&(u.x=a,u.y=l),r.translate(o.x-u.x,o.y-u.y)}))}var s=this.get("layout"),l={};Object.assign(l,s,e),this.set("layout",l),i.isLayoutTypeSame(l)&&l.gpuEnabled===s.gpuEnabled?i.updateLayoutCfg(l):i.changeLayout(l)},t.prototype.destroyLayout=function(){this.get("layoutController").destroyLayout()},t.prototype.layout=function(){var e=this.get("layoutController"),t=this.get("layout");t&&e&&(t.workerEnabled?e.layout():e.layoutMethod?e.relayout(!0):e.layout())},t.prototype.collapseCombo=function(e){var t=this;if((0,b.isString)(e)&&(e=this.findById(e)),e){this.emit("beforecollapseexpandcombo",{action:"expand",item:e});var n=e.getModel();this.get("itemController").collapseCombo(e),n.collapsed=!0;var r=this.getEdges().concat(this.get("vedges")),i=[],o=[],a=this.get("comboTrees"),s=!1;(a||[]).forEach((function(e){s||$n(e,(function(e){if(s&&e.depth<=n.depth)return!1;if(n.id===e.id&&(s=!0),s){var r=t.findById(e.id);r&&r.getType&&"combo"===r.getType()&&(i=i.concat(r.getNodes()),o=o.concat(r.getCombos()))}return!0}))}));var l={},u=[];r.forEach((function(e){if(!e.isVisible()||e.getModel().isVEdge){var r=e.getSource(),a=e.getTarget();if((i.includes(r)||o.includes(r))&&!i.includes(a)&&!o.includes(a)||r.getModel().id===n.id){if((h=e.getModel()).isVEdge)return void t.removeItem(e,!1);for(var s=a.getModel();!a.isVisible();){if(!(a=t.findById(s.parentId||s.comboId))||!s.parentId&&!s.comboId)return;s=a.getModel()}var c=s.id;if(l[n.id+"-"+c])return void(l[n.id+"-"+c]+=h.size||1);var d=t.addItem("vedge",{source:n.id,target:c,isVEdge:!0},!1);l[n.id+"-"+c]=h.size||1,u.push(d)}else if(!i.includes(r)&&!o.includes(r)&&(i.includes(a)||o.includes(a))||a.getModel().id===n.id){var h;if((h=e.getModel()).isVEdge)return void t.removeItem(e,!1);for(var f=r.getModel();!r.isVisible();){if(!(r=t.findById(f.parentId||f.comboId))||!f.parentId&&!f.comboId)return;f=r.getModel()}var p=f.id;if(l[p+"-"+n.id])return void(l[p+"-"+n.id]+=h.size||1);d=t.addItem("vedge",{target:n.id,source:p,isVEdge:!0},!1);l[p+"-"+n.id]=h.size||1,u.push(d)}}})),u.forEach((function(e){var n=e.getModel();t.updateItem(e,{size:l[n.source+"-"+n.target]},!1)})),this.emit("aftercollapseexpandcombo",{action:"collapse",item:e})}else console.warn("The combo to be collapsed does not exist!")},t.prototype.expandCombo=function(e){var t=this;if((0,b.isString)(e)&&(e=this.findById(e)),!e||e.getType&&"combo"!==e.getType())console.warn("The combo to be collapsed does not exist!");else{this.emit("beforecollapseexpandcombo",{action:"expand",item:e});var n=e.getModel();this.get("itemController").expandCombo(e),n.collapsed=!1;var r=this.getEdges().concat(this.get("vedges")),i=[],o=[],a=this.get("comboTrees"),s=!1;(a||[]).forEach((function(e){s||$n(e,(function(e){if(s&&e.depth<=n.depth)return!1;if(n.id===e.id&&(s=!0),s){var r=t.findById(e.id);r&&r.getType&&"combo"===r.getType()&&(i=i.concat(r.getNodes()),o=o.concat(r.getCombos()))}return!0}))}));var l={},u={};r.forEach((function(e){if(!e.isVisible()||e.getModel().isVEdge){var r=e.getSource(),a=e.getTarget(),s=r.get("id"),c=a.get("id");if((i.includes(r)||o.includes(r))&&!i.includes(a)&&!o.includes(a)||s===n.id){if(e.getModel().isVEdge)return void t.removeItem(e,!1);for(var d=a.getModel();!a.isVisible();){if(!(a=t.findById(d.comboId||d.parentId))||!d.parentId&&!d.comboId)return;d=a.getModel()}c=d.id;for(var h=r.getModel();!r.isVisible();){if(!(r=t.findById(h.comboId||h.parentId))||!h.parentId&&!h.comboId)return;if(h.comboId===n.id||h.parentId===n.id)break;h=r.getModel()}if(s=h.id,c){if(l[p=s+"-"+c])return l[p]+=e.getModel().size||1,void t.updateItem(u[p],{size:l[p]},!1);var f=t.addItem("vedge",{source:s,target:c,isVEdge:!0},!1);l[p]=e.getModel().size||1,u[p]=f}}else if(!i.includes(r)&&!o.includes(r)&&(i.includes(a)||o.includes(a))||c===n.id){if(e.getModel().isVEdge)return void t.removeItem(e,!1);for(h=r.getModel();!r.isVisible();){if(!(r=t.findById(h.comboId||h.parentId))||!h.parentId&&!h.comboId)return;h=r.getModel()}s=h.id;for(d=a.getModel();!a.isVisible();){if(!(a=t.findById(d.comboId||d.parentId))||!d.parentId&&!d.comboId)return;if(d.comboId===n.id||d.parentId===n.id)break;d=a.getModel()}if(c=d.id,s){var p;if(l[p=s+"-"+c])return l[p]+=e.getModel().size||1,void t.updateItem(u[p],{size:l[p]},!1);f=t.addItem("vedge",{target:c,source:s,isVEdge:!0},!1);l[p]=e.getModel().size||1,u[p]=f}}else(i.includes(r)||o.includes(r))&&(i.includes(a)||o.includes(a))&&r.isVisible()&&a.isVisible()&&e.show()}})),this.emit("aftercollapseexpandcombo",{action:"expand",item:e})}},t.prototype.collapseExpandCombo=function(e){if((0,b.isString)(e)&&(e=this.findById(e)),e&&(!e.getType||"combo"===e.getType())){for(var t=e.getModel(),n=this.findById(t.parentId);n;){var r=n.getModel();if(r.collapsed)return console.warn("Fail to expand the combo since it's ancestor combo is collapsed."),void(n=void 0);n=this.findById(r.parentId)}t.collapsed?this.expandCombo(e):this.collapseCombo(e),this.updateCombo(e)}},t.prototype.sortCombos=function(){var e=this;if(!this.get("comboSorted")){this.set("comboSorted",!0);var t=[],n={};(this.get("comboTrees")||[]).forEach((function(e){$n(e,(function(e){return t[e.depth]?t[e.depth].push(e.id):t[e.depth]=[e.id],n[e.id]=e.depth,!0}))})),(this.getEdges().concat(this.get("vedges"))||[]).forEach((function(e){var r=e.getModel(),i=n[r.source]||0,o=n[r.target]||0,a=Math.max(i,o);t[a]?t[a].push(r.id):t[a]=[r.id]})),t.forEach((function(t){if(t&&t.length)for(var n=t.length-1;n>=0;n--){var r=e.findById(t[n]);r&&r.toFront()}}))}},t.prototype.getNeighbors=function(e,t){var n=e;return(0,b.isString)(e)&&(n=this.findById(e)),n.getNeighbors(t)},t.prototype.getNodeDegree=function(e,t,n){void 0===t&&(t=void 0),void 0===n&&(n=!1);var r=e;(0,b.isString)(e)&&(r=this.findById(e));var i=this.get("degrees");i&&!n||(i=Se(this.save()),this.set("degrees",i));var o=i[r.getID()],a=0;if(!o)return 0;switch(t){case"in":a=o.inDegree;break;case"out":a=o.outDegree;break;case"all":a=o;break;default:a=o.degree}return a},t.prototype.getUndoStack=function(){return this.undoStack},t.prototype.getRedoStack=function(){return this.redoStack},t.prototype.getStackData=function(){return this.get("enabledStack")?{undoStack:this.undoStack.toArray(),redoStack:this.redoStack.toArray()}:null},t.prototype.clearStack=function(){this.get("enabledStack")&&(this.undoStack.clear(),this.redoStack.clear())},t.prototype.pushStack=function(e,t,n){if(void 0===e&&(e="update"),void 0===n&&(n="undo"),this.get("enabledStack")){var r=t?(0,b.clone)(t):{before:{},after:(0,b.clone)(this.save())};"redo"===n?this.redoStack.push({action:e,data:r}):this.undoStack.push({action:e,data:r}),this.emit("stackchange",{undoStack:this.undoStack,redoStack:this.redoStack})}else console.warn(" undo & redo  Graph  enabledStack: true !")},t.prototype.getAdjMatrix=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=this.get("directed"));var n=this.get("adjMatrix");return n&&e||(n=de(this.save(),t),this.set("adjMatrix",n)),n},t.prototype.getShortestPathMatrix=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=this.get("directed"));var n=this.get("adjMatrix"),r=this.get("shortestPathMatrix");return n&&e||(n=de(this.save(),t),this.set("adjMatrix",n)),r&&e||(r=je(this.save(),t),this.set("shortestPathMatrix",r)),r},t.prototype.on=function(t,n,r){return e.prototype.on.call(this,t,n,r)},t.prototype.destroy=function(){this.clear(),this.clearStack(),this.get("itemController").destroy(),this.get("modeController").destroy(),this.get("viewController").destroy(),this.get("stateController").destroy(),this.get("canvas").destroy(),this.cfg=null,this.destroyed=!0,this.redoStack=null,this.undoStack=null},t.prototype.createHull=function(e){if(e.members&&!(e.members.length<1)){var t=this.get("hullGroup"),n=this.get("hullMap");if(n||(n={},this.set("hullMap",n)),t&&!t.get("destroyed")||((t=this.get("group").addGroup({id:"hullGroup"})).toBack(),this.set("hullGroup",t)),n[e.id])return console.warn("Existed hull id."),n[e.id];var r=t.addGroup({id:e.id+"-container"}),i=new ru(this,(0,y.__assign)((0,y.__assign)({},e),{group:r}));return n[i.id]=i,i}console.warn("Create hull failed! The members is empty.")},t.prototype.getHulls=function(){return this.get("hullMap")},t.prototype.getHullById=function(e){return this.get("hullMap")[e]},t.prototype.removeHull=function(e){var t;t=(0,b.isString)(e)?this.getHullById(e):e,delete this.get("hullMap")[t.id],t.destroy()},t.prototype.removeHulls=function(){var e=this.getHulls();e&&Object.keys(e).length&&(Object.keys(e).forEach((function(t){e[t].destroy()})),this.set("hullMap",{}))},t}(S);const au=ou;function su(e){return su="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},su(e)}var lu=ce,uu="-label",cu=["startArrow","endArrow"],du={lineWidth:1,stroke:void 0,fill:void 0,lineAppendWidth:1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,x:0,y:0,r:10,width:20,height:20,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},hu={edge:{lineWidth:1,stroke:"#000",lineDash:void 0,startArrow:!1,endArrow:!1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},node:du,combo:du},fu="-label-bg",pu={options:{},itemType:"",type:"",getCustomConfig:function(e){return{}},getOptions:function(e,t){return"move"===t||"bbox"===t?{}:(0,b.deepMix)({labelCfg:{style:{fontFamily:"undefined"!=typeof window&&window.getComputedStyle&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"}},descriptionCfg:{style:{fontFamily:"undefined"!=typeof window&&window.getComputedStyle&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"}}},this.options,this.getCustomConfig(e)||{},e)},draw:function(e,t){var n=this.drawShape(e,t);(n.set("className",this.itemType+"-shape"),e.label)&&this.drawLabel(e,t).set("className",this.itemType+uu);return n},afterDraw:function(e,t,n){},drawShape:function(e,t){return null},drawLabel:function(e,t){var n=this.getOptions(e).labelCfg||{},r=this.getLabelStyle(e,n,t),i=r.rotate;delete r.rotate;var o=t.addShape("text",{attrs:r,draggable:!0,className:"text-shape",name:"text-shape"});if(!isNaN(i)&&""!==i){var a=o.getBBox(),s=[1,0,0,0,1,0,0,0,1];if(r.rotateCenter)switch(r.rotateCenter){default:s=lu(s,[["t",-a.width/2,-a.height/2],["r",i],["t",a.width/2,a.height/2]]);break;case"lefttop":s=lu(s,[["t",-r.x,-r.y],["r",i],["t",r.x,r.y]]);break;case"leftcenter":s=lu(s,[["t",-r.x,-r.y-a.height/2],["r",i],["t",r.x,r.y+a.height/2]])}else s=lu(s,[["t",-r.x,-r.y-a.height/2],["r",i],["t",r.x,r.y+a.height/2]]);o.setMatrix(s)}if(r.background){var l=this.drawLabelBg(e,t,o),u=this.itemType+fu;l.set("classname",u),o.toFront()}return o},drawLabelBg:function(e,t,n){var r=this.options.labelCfg,i=(0,b.mix)({},r,e.labelCfg),o=this.getLabelBgStyleByPosition(n,e,i,t);return t.addShape("rect",{name:"text-bg-shape",attrs:o})},getLabelStyleByPosition:function(e,t,n){return{text:e.label}},getLabelBgStyleByPosition:function(e,t,n,r){return{}},getLabelStyle:function(e,t,n){var r=this.getLabelStyleByPosition(e,t,n),i=this.itemType+"Label",o=Bn[i]?Bn[i].style:null;return(0,y.__assign)((0,y.__assign)((0,y.__assign)({},o),r),t.style)},getShapeStyle:function(e){return e.style},update:function(e,t,n){this.updateShapeStyle(e,t,n),this.updateLabel(e,t,n)},updateShapeStyle:function(e,t,n){var r=t.getContainer(),i=t.getKeyShape(),o=(0,b.mix)({},i.attr(),e.style),a=function(e){var t,n=o[e];if((0,b.isPlainObject)(n)){var a=r.find((function(t){return t.get("name")===e}));a&&a.attr(n)}else i.attr(((t={})[e]=n,t))};for(var s in o)a(s)},updateLabel:function(e,t,n){var r=t.getContainer(),i=this.getOptions({},n).labelCfg,o=this.itemType+uu,a=r.find((function(e){return e.get("className")===o})),s=this.itemType+fu,l=r.find((function(e){return e.get("classname")===s}));if(e.label||""===e.label)if(a){var u={};t.getModel&&(u=t.getModel().labelCfg);var c=(0,b.deepMix)({},i,u,e.labelCfg),d=this.getLabelStyleByPosition(e,c,r),h=e.labelCfg?e.labelCfg.style:void 0,f=c.style&&c.style.background,p=(0,y.__assign)((0,y.__assign)((0,y.__assign)({},a.attr()),d),h),m=p.rotate;if(delete p.rotate,isNaN(m)||""===m)a.resetMatrix(),a.attr(p);else{var g=[1,0,0,0,1,0,0,0,1];g=lu(g,[["t",-p.x,-p.y],["r",m],["t",p.x,p.y]]),a.resetMatrix(),a.attr((0,y.__assign)((0,y.__assign)({},p),{matrix:g}))}if(l)if(p.background){var v=this.getLabelBgStyleByPosition(a,e,c,r),_=(0,y.__assign)((0,y.__assign)({},v),f);if(l.resetMatrix(),!isNaN(m)&&""!==m){var w=[1,0,0,0,1,0,0,0,1];w=lu(w,[["t",-_.x,-_.y],["r",m],["t",_.x,_.y]]),_.matrix=w}l.attr(_)}else r.removeChild(l);else p.background&&((l=this.drawLabelBg(e,r,a)).set("classname",s),a.toFront())}else{this.drawLabel(e,r).set("className",o)}},afterUpdate:function(e,t){},setState:function(e,t,n){var r,i,o=n.get("keyShape");if(o&&!o.destroyed){var a=n.getType(),s=(0,b.isBoolean)(t)?e:e+":"+t,l=this.getStateStyle(s,n),u=n.getStateStyle(s);if(u||l){var c=(0,b.mix)({},u||l),d=n.getContainer(),h={x:1,y:1,cx:1,cy:1};if("combo"===a&&(h.r=1,h.width=1,h.height=1),t){var f=function(e){var t,n=c[e];if((0,b.isPlainObject)(n)&&!cu.includes(e)){var r=d.find((function(t){return t.get("name")===e}));r&&r.attr(n)}else o.attr(((t={})[e]=n,t))};for(var p in c)f(p)}else{var m=ar(n.getCurrentStatesStyle()),g=n.getModel(),v=(0,b.mix)({},g.style,ar(n.getOriginStyle())),y=o.get("name"),_=o.attr(),w={};Object.keys(_).forEach((function(e){if("img"!==e){var t=_[e];t&&"object"===su(t)?w[e]=(0,b.clone)(t):w[e]=t}}));var x={},M=function(e){var t=c[e];if((0,b.isPlainObject)(t)&&!cu.includes(e)){var n=d.find((function(t){return t.get("name")===e}));if(n){var r=ar(n.attr());(0,b.each)(t,(function(t,i){if(e===y&&w[i]&&!h[i]){delete w[i];var s=v[e][i]||hu[a][i];o.attr(i,s)}else if(r[i]||0===r[i]){delete r[i];var l=v[e][i]||hu[a][i];n.attr(i,l)}})),x[e]=r}}else if(w[e]&&!h[e]){delete w[e];var i=v[e]||(v[y]?v[y][e]:void 0)||hu[a][e];o.attr(e,i)}};for(var E in c)M(E);for(var p in y?x[y]=w:(0,b.mix)(x,w),m)if(!h[p]){var S=m[p];(0,b.isPlainObject)(S)&&!cu.includes(p)||(y?((0,b.mix)(v[y],((i={})[p]=S,i)),delete v[p]):(0,b.mix)(v,((r={})[p]=S,r)),delete m[p])}var k={};(0,b.deepMix)(k,v,x,m);var T=!1,L=function(e){var t,n,r=k[e];if((0,b.isPlainObject)(r)&&!cu.includes(e)){var i=d.find((function(t){return t.get("name")===e}));i&&("text"===i.get("type")&&(delete r.x,delete r.y,delete r.matrix),e===y&&("combo"===a&&(delete r.r,delete r.width,delete r.height),T=!0),i.attr(r))}else if(!T){var s=r||hu[a][e];"combo"===a?y||o.attr(((t={})[e]=s,t)):o.attr(((n={})[e]=s,n))}};for(var C in k)L(C)}}}},getStateStyle:function(e,t){var n=t.getModel(),r=t.getType(),i=this.getOptions(n),o=i.stateStyles,a=i.style,s=void 0===a?{}:a,l=n.stateStyles?n.stateStyles[e]:o&&o[e];return"combo"===r?(0,b.clone)(l):(0,b.mix)({},s,l)},getControlPoints:function(e){return e.controlPoints},getAnchorPoints:function(e){var t,n;return(null==e?void 0:e.anchorPoints)||(null===(t=this.getCustomConfig(e))||void 0===t?void 0:t.anchorPoints)||(null===(n=this.options)||void 0===n?void 0:n.anchorPoints)}},mu={itemType:"node",shapeType:"single-node",labelPosition:"center",offset:Bn.nodeLabel.offset,getSize:function(e){var t=e.size||this.getOptions({}).size||Bn.defaultNode.size;return(0,b.isArray)(t)&&1===t.length&&(t=[t[0],t[0]]),(0,b.isArray)(t)||(t=[t,t]),t},getLabelStyleByPosition:function(e,t){var n=t.position||this.labelPosition;if("center"===n)return{x:0,y:0,text:e.label};var r=t.offset;(0,b.isNil)(r)&&(r=this.offset);var i,o=this.getSize(e),a=o[0],s=o[1];switch(n){case"top":i={x:0,y:0-s/2-r,textBaseline:"bottom"};break;case"bottom":i={x:0,y:s/2+r,textBaseline:"top"};break;case"left":i={x:0-a/2-r,y:0,textAlign:"right"};break;default:i={x:a/2+r,y:0,textAlign:"left"}}return i.text=e.label,i},getLabelBgStyleByPosition:function(e,t,n,r){if(!e)return{};var i=e.getBBox(),o=n.style&&n.style.background;if(!o)return{};var a,s=zs(o.padding),l=i.width+s[1]+s[3],u=i.height+s[0]+s[2],c=n.offset;return(0,b.isNil)(c)&&(c=this.offset),a={x:i.minX-s[3],y:i.minY-s[0]},a=(0,y.__assign)((0,y.__assign)((0,y.__assign)({},a),o),{width:l,height:u})},drawShape:function(e,t){var n=this.shapeType,r=this.getShapeStyle(e);return t.addShape(n,{attrs:r,draggable:!0,name:"node-shape"})},updateLinkPoints:function(e,t){var n,r=this.getOptions(e).linkPoints,i=t.find((function(e){return"link-point-left"===e.get("className")})),o=t.find((function(e){return"link-point-right"===e.get("className")})),a=t.find((function(e){return"link-point-top"===e.get("className")})),s=t.find((function(e){return"link-point-bottom"===e.get("className")}));i&&(n=i.attr()),o&&!n&&(n=o.attr()),a&&!n&&(n=a.attr()),s&&!n&&(n=s.attr()),n||(n=r);var l=(0,b.mix)({},n,e.linkPoints),u=l.fill,c=l.stroke,d=l.lineWidth,h=l.size/2;h||(h=l.r);var f=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},p=f.left,m=f.right,g=f.top,v=f.bottom,_=this.getSize(e),w=_[0],x=_[1],M={r:h,fill:u,stroke:c,lineWidth:d};i?p||void 0===p?i.attr((0,y.__assign)((0,y.__assign)({},M),{x:-w/2,y:0})):i.remove():p&&t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},M),{x:-w/2,y:0}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),o?(m||void 0===m||o.remove(),o.attr((0,y.__assign)((0,y.__assign)({},M),{x:w/2,y:0}))):m&&t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},M),{x:w/2,y:0}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),a?(g||void 0===g||a.remove(),a.attr((0,y.__assign)((0,y.__assign)({},M),{x:0,y:-x/2}))):g&&t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},M),{x:0,y:-x/2}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),s?v||void 0===v?s.attr((0,y.__assign)((0,y.__assign)({},M),{x:0,y:x/2})):s.remove():v&&t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},M),{x:0,y:x/2}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},updateShape:function(e,t,n,r){t.get("keyShape").attr((0,y.__assign)({},n)),this.updateLabel(e,t),r&&this.updateIcon(e,t)},updateIcon:function(e,t){var n=this,r=t.getContainer(),i=this.getOptions(e).icon,o=(e.icon?e.icon:{show:void 0}).show,a=r.find((function(e){return e.get("className")===n.type+"-icon"}));if(a)if(o||void 0===o){var s=(0,b.mix)({},a.attr(),i),l=s.width,u=void 0===l?20:l,c=s.height,d=void 0===c?20:c;a.attr((0,y.__assign)((0,y.__assign)({},s),{x:-u/2,y:-d/2}))}else a.remove();else if(o){u=i.width,d=i.height;r.addShape("image",{attrs:(0,y.__assign)((0,y.__assign)({},i),{x:-u/2,y:-d/2}),className:this.type+"-icon",name:this.type+"-icon"});var h=r.find((function(e){return"node-label"===e.get("className")}));h&&h.toFront()}}},gu=(0,y.__assign)((0,y.__assign)({},pu),mu);al.registerNode("single-node",gu);var vu="edge-shape";var yu={itemType:"edge",labelPosition:"center",refX:0,refY:0,labelAutoRotate:!1,options:{size:Bn.defaultEdge.size,style:{x:0,y:0,stroke:Bn.defaultEdge.style.stroke,lineAppendWidth:Bn.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:Bn.edgeLabel.style.fill,fontSize:Bn.edgeLabel.style.fontSize}},stateStyles:(0,y.__assign)({},Bn.edgeStateStyles)},getPath:function(e){var t=[];return(0,b.each)(e,(function(e,n){0===n?t.push(["M",e.x,e.y]):t.push(["L",e.x,e.y])})),t},getShapeStyle:function(e){var t=this.options.style,n={stroke:e.color},r=(0,b.mix)({},t,n,e.style),i=e.size||Bn.defaultEdge.size,o=(e=this.getPathPoints(e)).startPoint,a=e.endPoint,s=this.getControlPoints(e),l=[o];s&&(l=l.concat(s)),l.push(a);var u=this.getPath(l);return(0,b.mix)({},Bn.defaultEdge.style,{stroke:Bn.defaultEdge.color,lineWidth:i,path:u},r)},updateShapeStyle:function(e,t,n){var r,i=t.getContainer(),o={stroke:e.color},a=(null===(r=t.getKeyShape)||void 0===r?void 0:r.call(t))||i.find((function(e){return"edge-shape"===e.get("className")})),s=e.size,l=(e=this.getPathPoints(e)).startPoint,u=e.endPoint,c=this.getControlPoints(e),d=[l];c&&(d=d.concat(c)),d.push(u);var h=a.attr(),f=(0,b.mix)({},o,h,e.style),p=e.sourceNode,m=e.targetNode,g={radius:f.radius};c||(g={source:p,target:m,offset:f.offset,radius:f.radius});var v=this.getPath(d,g),y={};"move"===n?y={path:v}:(h.endArrow&&!1===f.endArrow&&(e.style.endArrow={path:""}),h.startArrow&&!1===f.startArrow&&(e.style.startArrow={path:""}),y=(0,b.mix)(o,h,{lineWidth:s,path:v},e.style)),a&&a.attr(y)},getLabelStyleByPosition:function(e,t,n){var r,i=t.position||this.labelPosition,o={},a=n&&n.find((function(e){return e.get("className")===vu}));r="start"===i?0:"end"===i?1:.5;var s,l=t.refX||this.refX,u=t.refY||this.refY;if(e.startPoint.x===e.endPoint.x&&e.startPoint.y===e.endPoint.y)return o.x=e.startPoint.x+l,o.y=e.startPoint.y+u,o.text=e.label,o;s=(0,b.isNil)(t.autoRotate)?this.labelAutoRotate:t.autoRotate;var c=Kn(a,r,l,u,s);return o.x=c.x,o.y=c.y,o.rotate=c.rotate,o.textAlign=this._getTextAlign(i,c.angle),o.text=e.label,o},getLabelBgStyleByPosition:function(e,t,n,r){if(!e)return{};var i=e.getBBox(),o=n.style&&n.style.background;if(!o)return{};var a,s=o.padding,l=i.width+s[1]+s[3],u=i.height+s[0]+s[2],c=n.position||this.labelPosition,d=(0,y.__assign)((0,y.__assign)({},o),{width:l,height:u,x:i.minX-s[2],y:i.minY-s[0],rotate:0});a=(0,b.isNil)(n.autoRotate)?this.labelAutoRotate:n.autoRotate;var h,f=r&&r.find((function(e){return e.get("className")===vu}));h="start"===c?0:"end"===c?1:.5;var p=n.refX||this.refX,m=n.refY||this.refY;if(t.startPoint.x===t.endPoint.x&&t.startPoint.y===t.endPoint.y)return d.x=t.startPoint.x+p-l/2,d.y=t.startPoint.y+m-u/2,d;var g=p-l/2;"start"===n.position?g=p-s[2]:"end"===n.position&&(g=p-l);var v=Kn(f,h,g,m+u/2,a);return a&&(d.x=v.x,d.y=v.y),d.rotate=v.rotate,d},_getTextAlign:function(e,t){var n="center";return t?(t%=2*Math.PI,"center"!==e&&(n=t>=0&&t<=Math.PI/2||t>=1.5*Math.PI&&t<2*Math.PI?e:function(e){var t=e;return"start"===e?t="end":"end"===e&&(t="start"),t}(e)),n):e},getControlPoints:function(e){return e.controlPoints},getPathPoints:function(e){return e},drawShape:function(e,t){var n=this.getShapeStyle(e);return t.addShape("path",{className:vu,name:vu,attrs:n})},drawLabel:function(e,t){var n,r=this.options.labelCfg;n="undefined"!=typeof window&&void 0!==window.getComputedStyle&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif";var i=(0,b.deepMix)({fontFamily:n},r,e.labelCfg),o=this.getLabelStyle(e,i,t),a=o.rotate;delete o.rotate;var s=t.addShape("text",{attrs:o,name:"text-shape"});if(isNaN(a)||""===a||s.rotateAtStart(a),o.background){var l=this.drawLabelBg(e,t,s,o,a),u=this.itemType+fu;l.set("classname",u),s.toFront()}return s},drawLabelBg:function(e,t,n,r,i){var o=this.options.labelCfg,a=(0,b.deepMix)({},o,e.labelCfg),s=this.getLabelBgStyleByPosition(n,e,a,t);delete s.rotate;var l=t.addShape("rect",{name:"text-bg-shape",attrs:s});return isNaN(i)||l.rotateAtStart(i),l}},bu=(0,y.__assign)((0,y.__assign)({},pu),yu);al.registerEdge("single-edge",bu),al.registerEdge("line",{getControlPoints:function(){}},"single-edge"),al.registerEdge("spline",{getPath:function(e){return Yl(e)}},"single-edge"),al.registerEdge("arc",{curveOffset:20,clockwise:1,getControlPoints:function(e){var t,n,r=e.startPoint,i=e.endPoint,o=(r.x+i.x)/2,a=(r.y+i.y)/2;if(void 0!==e.controlPoints){if(n=e.controlPoints[0],t=an(r,n,i),r.x<=i.x&&r.y>i.y?this.clockwise=t.x>n.x?0:1:r.x<=i.x&&r.y<i.y?this.clockwise=t.x>n.x?1:0:r.x>i.x&&r.y<=i.y?this.clockwise=t.y<n.y?0:1:this.clockwise=t.y<n.y?1:0,(n.x-r.x)/(n.y-r.y)==(i.x-r.x)/(i.y-r.y))return[]}else{void 0===e.curveOffset&&(e.curveOffset=this.curveOffset),(0,b.isArray)(e.curveOffset)&&(e.curveOffset=e.curveOffset[0]),e.curveOffset<0?this.clockwise=0:this.clockwise=1;var s={x:i.x-r.x,y:i.y-r.y},l=Math.atan2(s.y,s.x);n={x:e.curveOffset*Math.cos(-Math.PI/2+l)+o,y:e.curveOffset*Math.sin(-Math.PI/2+l)+a},t=an(r,n,i)}var u=sn(r,t);return[{x:u,y:u}]},getPath:function(e){var t=[];return t.push(["M",e[0].x,e[0].y]),2===e.length?t.push(["L",e[1].x,e[1].y]):t.push(["A",e[1].x,e[1].y,0,0,this.clockwise,e[2].x,e[2].y]),t}},"single-edge"),al.registerEdge("quadratic",{curvePosition:.5,curveOffset:-20,getControlPoints:function(e){var t=e.controlPoints;if(!t||!t.length){var n=e.startPoint,r=e.endPoint;void 0===e.curveOffset&&(e.curveOffset=this.curveOffset),void 0===e.curvePosition&&(e.curvePosition=this.curvePosition),(0,b.isArray)(this.curveOffset)&&(e.curveOffset=e.curveOffset[0]),(0,b.isArray)(this.curvePosition)&&(e.curvePosition=e.curveOffset[0]),t=[jl(n,r,e.curvePosition,e.curveOffset)]}return t},getPath:function(e){var t=[];return t.push(["M",e[0].x,e[0].y]),t.push(["Q",e[1].x,e[1].y,e[2].x,e[2].y]),t}},"single-edge"),al.registerEdge("cubic",{curvePosition:[.5,.5],curveOffset:[-20,20],getControlPoints:function(e){var t=e.controlPoints;if(void 0===e.curveOffset&&(e.curveOffset=this.curveOffset),void 0===e.curvePosition&&(e.curvePosition=this.curvePosition),(0,b.isNumber)(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),(0,b.isNumber)(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]),!t||!t.length||t.length<2){var n=e.startPoint,r=e.endPoint;t=[jl(n,r,e.curvePosition[0],e.curveOffset[0]),jl(n,r,e.curvePosition[1],e.curveOffset[1])]}return t},getPath:function(e){var t=[];return t.push(["M",e[0].x,e[0].y]),t.push(["C",e[1].x,e[1].y,e[2].x,e[2].y,e[3].x,e[3].y]),t}},"single-edge"),al.registerEdge("cubic-vertical",{curvePosition:[.5,.5],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(e){var t=e.startPoint,n=e.endPoint;void 0===e.curvePosition&&(e.curvePosition=this.curvePosition),void 0===e.curveOffset&&(e.curveOffset=this.curveOffset),void 0===e.minCurveOffset&&(e.minCurveOffset=this.minCurveOffset),(0,b.isNumber)(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),(0,b.isNumber)(e.minCurveOffset)&&(e.minCurveOffset=[e.minCurveOffset,-e.minCurveOffset]),(0,b.isNumber)(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]);var r=n.y-t.y,i=[0,0];return e.curveOffset?i=e.curveOffset:Math.abs(r)<Math.abs(e.minCurveOffset[0])&&(i=e.minCurveOffset),[{x:t.x,y:t.y+r*this.curvePosition[0]+i[0]},{x:n.x,y:n.y-r*this.curvePosition[1]+i[1]}]}},"cubic"),al.registerEdge("cubic-horizontal",{curvePosition:[.5,.5],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(e){var t=e.startPoint,n=e.endPoint;void 0===e.curvePosition&&(e.curvePosition=this.curvePosition),void 0===e.curveOffset&&(e.curveOffset=this.curveOffset),void 0===e.minCurveOffset&&(e.minCurveOffset=this.minCurveOffset),(0,b.isNumber)(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),(0,b.isNumber)(e.minCurveOffset)&&(e.minCurveOffset=[e.minCurveOffset,-e.minCurveOffset]),(0,b.isNumber)(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]);var r=n.x-t.x,i=[0,0];return e.curveOffset?i=e.curveOffset:Math.abs(r)<Math.abs(e.minCurveOffset[0])&&(i=e.minCurveOffset),[{x:t.x+r*this.curvePosition[0]+i[0],y:t.y},{x:n.x-r*this.curvePosition[1]+i[1],y:n.y}]}},"cubic"),al.registerEdge("loop",{getPathPoints:function(e){return qn(e)},getControlPoints:function(e){return e.controlPoints},afterDraw:function(e){e.controlPoints=void 0},afterUpdate:function(e){e.controlPoints=void 0}},"cubic");var _u={itemType:"combo",shapeType:"single-combo",labelPosition:"top",refX:Bn.comboLabel.refX,refY:Bn.comboLabel.refY,options:{style:{stroke:Bn.defaultCombo.style.stroke,fill:Bn.defaultCombo.style.fill,lineWidth:Bn.defaultCombo.style.lineWidth},labelCfg:{style:{fill:Bn.comboLabel.style.fill,fontSize:Bn.comboLabel.style.fontSize}},stateStyles:(0,y.__assign)({},Bn.comboStateStyles)},getSize:function(e){var t=(0,b.clone)(e.size||this.options.size||Bn.defaultCombo.size);return(0,b.isArray)(t)&&1===t.length&&(t=[t[0],t[0]]),(0,b.isArray)(t)||(t=[t,t]),t},getLabelStyleByPosition:function(e,t){var n=t.position||this.labelPosition,r=e.style,i=e.padding||this.options.padding;(0,b.isArray)(i)&&(i=i[0]);var o=t.refX,a=t.refY;(0,b.isNil)(o)&&(o=this.refX),(0,b.isNil)(a)&&(a=this.refY);var s,l=this.getSize(e),u=(Math.max(r.r,l[0]/2)||l[0]/2)+i;switch(n){case"top":s={x:0,y:-u-a,textBaseline:"bottom",textAlign:"center"};break;case"bottom":s={x:0,y:u+a,textBaseline:"bottom",textAlign:"center"};break;case"left":s={x:-u+o,y:0,textAlign:"left"};break;case"center":s={x:0,y:0,text:e.label,textAlign:"center"};break;default:s={x:u+o,y:0,textAlign:"right"}}return s.text=e.label,s},drawShape:function(e,t){var n=this.shapeType,r=this.getShapeStyle(e);return t.addShape(n,{attrs:r,draggable:!0,name:"combo-shape"})},updateShape:function(e,t,n){var r=t.get("keyShape");(void 0===e.animate?this.options.animate:e.animate)&&r.animate?r.animate(n,{duration:200,easing:"easeLinear"}):r.attr((0,y.__assign)({},n)),this.updateLabel(e,t)}},wu=(0,y.__assign)((0,y.__assign)({},pu),_u);al.registerCombo("single-combo",wu),al.registerCombo("circle",{options:{size:[Bn.defaultCombo.size[0],Bn.defaultCombo.size[0]],padding:Bn.defaultCombo.padding[0],animate:!0,style:{stroke:Bn.defaultCombo.style.stroke,fill:Bn.defaultCombo.style.fill,lineWidth:Bn.defaultCombo.style.lineWidth},labelCfg:{style:{fill:Bn.comboLabel.style.fill,fontSize:Bn.comboLabel.style.fontSize},refX:0,refY:0},stateStyles:(0,y.__assign)({},Bn.comboStateStyles)},shapeType:"circle",labelPosition:"top",drawShape:function(e,t){var n=this.getShapeStyle(e);return delete n.height,delete n.width,t.addShape("circle",{attrs:n,className:"circle-combo",name:"circle-combo",draggable:!0})},getShapeStyle:function(e){var t=this.options.style,n=e.padding||this.options.padding;(0,b.isArray)(n)&&(n=n[0]);var r,i={stroke:e.color},o=(0,b.mix)({},t,i,e.style);if(e.fixSize)r=(0,b.isNumber)(e.fixSize)?e.fixSize:e.fixSize[0];else{var a=this.getSize(e);r=!(0,b.isNumber)(o.r)||isNaN(o.r)?a[0]/2||Bn.defaultCombo.style.r:Math.max(o.r,a[0]/2)||a[0]/2}o.r=r+n;var s=(0,y.__assign)({x:0,y:0},o);return e.style?e.style.r=r:e.style={r},s},update:function(e,t){var n=this.getSize(e),r=e.padding||this.options.padding;(0,b.isArray)(r)&&(r=r[0]);var i,o=(0,b.clone)(e.style);i=e.fixSize?(0,b.isNumber)(e.fixSize)?e.fixSize:e.fixSize[0]:Math.max(o.r,n[0]/2)||n[0]/2,o.r=i+r;var a=t.get("sizeCache");a&&(a.r=o.r);var s={stroke:e.color},l=t.get("keyShape"),u=(0,b.mix)({},l.attr(),s,o);e.style?e.style.r=i:e.style={r:i},this.updateShape(e,t,u,!0)}},"single-combo"),al.registerCombo("rect",{options:{size:[40,5],padding:[25,20,15,20],animate:!0,style:{radius:0,stroke:Bn.defaultCombo.style.stroke,fill:Bn.defaultCombo.style.fill,lineWidth:Bn.defaultCombo.style.lineWidth},labelCfg:{style:{fill:Bn.comboLabel.style.fill,fontSize:Bn.comboLabel.style.fontSize}},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,y.__assign)({},Bn.comboStateStyles)},shapeType:"rect",labelPosition:"top",drawShape:function(e,t){var n=this.getShapeStyle(e);return t.addShape("rect",{attrs:n,className:"rect-combo",name:"rect-combo",draggable:!0})},getLabelStyleByPosition:function(e,t){var n=t.position||this.labelPosition,r=e.style,i=e.padding||this.options.padding;(0,b.isNumber)(i)&&(i=[i,i,i,i]);var o=t.refX,a=t.refY;(0,b.isNil)(o)&&(o=this.refX),(0,b.isNil)(a)&&(a=this.refY);var s,l=r.width/2+i[3],u=r.height/2+i[0];switch(n){case"top":s={x:0-l+o,y:0-u+a,textBaseline:"top",textAlign:"left"};break;case"bottom":s={x:0,y:u+a,textBaseline:"bottom",textAlign:"center"};break;case"left":s={x:0-l+a,y:0,textAlign:"left"};break;case"center":s={x:0,y:0,text:e.label,textAlign:"center"};break;default:s={x:l+o,y:0,textAlign:"right"}}return s.text=e.label,s},getShapeStyle:function(e){var t=this.options.style,n=e.padding||this.options.padding;(0,b.isNumber)(n)&&(n=[n,n,n,n]);var r,i,o={stroke:e.color},a=(0,b.mix)({},t,o,e.style),s=this.getSize(e),l=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize;l?(0,b.isNumber)(l)?(r=l,i=l):(r=l[0],i=l[1]):(r=!(0,b.isNumber)(a.width)||isNaN(a.width)?s[0]||Bn.defaultCombo.style.width:Math.max(a.width,s[0])||s[0],i=!(0,b.isNumber)(a.height)||isNaN(a.height)?s[1]||Bn.defaultCombo.style.height:Math.max(a.height,s[1])||s[1]);var u=-r/2-n[3],c=-i/2-n[0];a.width=r+n[1]+n[3],a.height=i+n[0]+n[2];var d=(0,y.__assign)({x:u,y:c},a);return e.style?(e.style.width=r,e.style.height=i):e.style={width:r,height:i},d},update:function(e,t){var n=this.getSize(e),r=e.padding||this.options.padding;(0,b.isNumber)(r)&&(r=[r,r,r,r]);var i,o,a=(0,b.clone)(e.style),s=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize;s?(0,b.isNumber)(s)?(i=s,o=s):(i=s[0],o=s[1]):(i=Math.max(a.width,n[0])||n[0],o=Math.max(a.height,n[1])||n[1]),a.width=i+r[1]+r[3],a.height=o+r[0]+r[2];var l=t.get("sizeCache");l&&(l.width=a.width,l.height=a.height),a.x=-i/2-r[3],a.y=-o/2-r[0];var u={stroke:e.color},c=t.get("keyShape"),d=(0,b.mix)({},c.attr(),u,a);e.style?(e.style.width=i,e.style.height=o):e.style={width:i,height:o},this.updateShape(e,t,d,!1)},updateShape:function(e,t,n){var r=t.get("keyShape");(void 0===e.animate?this.options.animate:e.animate)&&r.animate?r.animate(n,{duration:200,easing:"easeLinear"}):r.attr((0,y.__assign)({},n)),this.updateLabel(e,t)}},"single-combo"),al.registerNode("simple-circle",{options:{size:Bn.defaultNode.size,style:{x:0,y:0,stroke:Bn.defaultNode.style.stroke,fill:Bn.defaultNode.style.fill,lineWidth:Bn.defaultNode.style.lineWidth},labelCfg:{style:{fill:Bn.nodeLabel.style.fill,fontSize:Bn.nodeLabel.style.fontSize}},stateStyles:(0,y.__assign)({},Bn.nodeStateStyles)},shapeType:"simple-circle",labelPosition:"center",drawShape:function(e,t){var n=this.getShapeStyle(e);return t.addShape("circle",{attrs:n,className:this.type+"-keyShape",draggable:!0})},getShapeStyle:function(e){var t=this.getOptions(e).style,n={stroke:e.color},r=(0,b.deepMix)({},t,n),i=this.getSize(e)[0]/2;return(0,y.__assign)({x:0,y:0,r:i},r)},update:function(e,t){var n=this.getSize(e),r={stroke:e.color,r:n[0]/2},i=t.get("keyShape"),o=(0,b.deepMix)({},i.attr(),r,e.style);this.updateShape(e,t,o,!0)}},"single-node"),al.registerNode("simple-rect",{options:{size:[100,30],style:{radius:0,stroke:Bn.defaultNode.style.stroke,fill:Bn.defaultNode.style.fill,lineWidth:Bn.defaultNode.style.lineWidth},labelCfg:{style:{fill:Bn.nodeLabel.style.fill,fontSize:Bn.nodeLabel.style.fontSize}},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,y.__assign)({},Bn.nodeStateStyles)},shapeType:"simple-rect",labelPosition:"center",drawShape:function(e,t){var n=this.getShapeStyle(e);return t.addShape("rect",{attrs:n,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0})},getShapeStyle:function(e){var t=this.getOptions(e).style,n={stroke:e.color},r=(0,b.mix)({},t,n),i=this.getSize(e),o=r.width||i[0],a=r.height||i[1];return(0,y.__assign)({x:-o/2,y:-a/2,width:o,height:a},r)},update:function(e,t){t.getContainer();var n=this.getOptions({}).style,r=this.getSize(e),i=t.get("keyShape");e.size||(r[0]=i.attr("width")||n.width,r[1]=i.attr("height")||n.height);var o={stroke:e.color,x:-r[0]/2,y:-r[1]/2,width:r[0],height:r[1]},a=(0,b.mix)({},n,i.attr(),o);a=(0,b.mix)(a,e.style),this.updateShape(e,t,a,!1)}},"single-node"),al.registerNode("image",{options:{img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*eD7nT6tmYgAAAAAAAAAAAABkARQnAQ",size:200,clipCfg:{show:!1,type:"circle",r:50,rx:50,ry:35,width:50,height:35,points:[[30,12],[12,30],[30,48],[48,30]],path:[["M",25,25],["L",50,25],["A",12.5,12.5,0,1,1,50,50],["A",12.5,12.5,0,1,0,50,50],["L",25,75],["Z"]],x:0,y:0}},shapeType:"image",labelPosition:"bottom",drawShape:function(e,t){var n=this.shapeType,r=this.getShapeStyle(e);delete r.fill;var i=t.addShape(n,{attrs:r,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0});return this.drawClip(e,i),i},drawClip:function(e,t){var n=this.getOptions(e).clipCfg;if(n.show){var r=n.type,i=n.x,o=n.y,a=n.style;if("circle"===r){var s=n.r;t.setClip({type:"circle",attrs:(0,y.__assign)({r:s,x:i,y:o},a)})}else if("rect"===r){var l=n.width,u=n.height,c=i-l/2,d=o-u/2;t.setClip({type:"rect",attrs:(0,y.__assign)({x:c,y:d,width:l,height:u},a)})}else if("ellipse"===r){var h=n.rx,f=n.ry;t.setClip({type:"ellipse",attrs:(0,y.__assign)({x:i,y:o,rx:h,ry:f},a)})}else if("polygon"===r){var p=n.points;t.setClip({type:"polygon",attrs:(0,y.__assign)({points:p},a)})}else if("path"===r){var m=n.path;t.setClip({type:"path",attrs:(0,y.__assign)({path:m},a)})}}},getShapeStyle:function(e){var t=this.getOptions(e).style,n=this.getSize(e),r=this.getOptions(e).img,i=n[0],o=n[1];return t&&(i=t.width||n[0],o=t.height||n[1]),(0,y.__assign)({x:-i/2,y:-o/2,width:i,height:o,img:r},t)},updateShapeStyle:function(e,t){var n=t.getContainer(),r=this.itemType+"-shape",i=n.find((function(e){return e.get("className")===r}))||t.getKeyShape(),o=this.getShapeStyle(e);i&&i.attr(o)}},"single-node");const xu={triangle:function(e,t,n){void 0===e&&(e=10),void 0===t&&(t=15),void 0===n&&(n=0);var r=2*n;return"M "+r+",0 L "+(r+t)+",-"+e/2+" L "+(r+t)+","+e/2+" Z"},vee:function(e,t,n){void 0===e&&(e=15),void 0===t&&(t=20),void 0===n&&(n=0);var r=2*n;return"M "+r+",0 L "+(r+t)+",-"+e/2+"\n        L "+(r+2*t/3)+",0 L "+(r+t)+","+e/2+" Z"},circle:function(e,t){return void 0===e&&(e=5),void 0===t&&(t=0),"M "+2*t+", 0\n            a "+e+","+e+" 0 1,0 "+2*e+",0\n            a "+e+","+e+" 0 1,0 "+2*-e+",0"},rect:function(e,t,n){void 0===e&&(e=10),void 0===t&&(t=10),void 0===n&&(n=0);var r=2*n;return"M "+r+","+-e/2+" \n        L "+(r+t)+","+-e/2+" \n        L "+(r+t)+","+e/2+" \n        L "+r+","+e/2+" Z"},diamond:function(e,t,n){void 0===e&&(e=15),void 0===t&&(t=15),void 0===n&&(n=0);var r=2*n;return"M "+r+",0 \n        L "+(r+t/2)+","+-e/2+" \n        L "+(r+t)+",0 \n        L "+(r+t/2)+","+e/2+" Z"},triangleRect:function(e,t,n,r,i,o){void 0===e&&(e=15),void 0===t&&(t=15),void 0===n&&(n=15),void 0===r&&(r=3),void 0===i&&(i=5),void 0===o&&(o=0);var a=2*o,s=a+t+i;return"M "+a+",0 L "+(a+t)+",-"+e/2+" L "+(a+t)+","+e/2+" Z\n            M "+s+", -"+n/2+"\n            L "+(s+r)+" -"+n/2+"\n            L "+(s+r)+" "+n/2+"\n            L "+s+" "+n/2+"\n            Z"}},Mu={collapse:function(e,t,n){return[["M",e-n,t],["a",n,n,0,1,0,2*n,0],["a",n,n,0,1,0,2*-n,0],["M",e-n+4,t],["L",e+n-4,t]]},expand:function(e,t,n){return[["M",e-n,t],["a",n,n,0,1,0,2*n,0],["a",n,n,0,1,0,2*-n,0],["M",e-n+4,t],["L",e-n+2*n-4,t],["M",e-n+n,t-n+4],["L",e,t+n-4]]},upTriangle:function(e,t,n){var r=n*Math.cos(Math.PI/6),i=n*Math.sin(Math.PI/6);return[["M",e-r,t+i],["L",e+r,t+i],["L",e,t-n],["Z"]]},downTriangle:function(e,t,n){var r=n*Math.cos(Math.PI/6),i=n*Math.sin(Math.PI/6);return[["M",e-r,t-i],["L",e+r,t-i],["L",e,t+n],["Z"]]}},Eu=al;var Su=["#5F95FF","#61DDAA","#65789B","#F6BD16","#7262FD","#78D3F8","#9661BC","#F6903D","#008685","#F08BB4"],ku=ce;const Tu=(0,y.__assign)((0,y.__assign)((0,y.__assign)((0,y.__assign)((0,y.__assign)((0,y.__assign)({},u),r),c),n),d),{transform:ku,mat3:e});var Lu=function(){function e(e){this.graph=e,this.layoutCfg=e.get("layout")||{},this.layoutType=this.getLayoutType(),this.layoutMethods=[],this.initLayout()}return e.prototype.initLayout=function(){},e.prototype.getLayoutType=function(){return this.getLayoutCfgType(this.layoutCfg)},e.prototype.getLayoutCfgType=function(e){var t=e.type;if(t)return t;var n=e.pipes;return Array.isArray(n)?n.map((function(e){return(null==e?void 0:e.type)||""})):null},e.prototype.isLayoutTypeSame=function(e){var t=this.getLayoutCfgType(e);return Array.isArray(this.layoutType)?this.layoutType.every((function(e,n){return e===t[n]})):(null==e?void 0:e.type)===this.layoutType},e.prototype.refreshLayout=function(){var e=this.graph;e&&(e.get("animate")?e.positionsAnimate():e.refreshPositions())},e.prototype.changeLayout=function(e){this.layoutCfg=e,this.destoryLayoutMethods(),this.layout()},e.prototype.changeData=function(){this.destoryLayoutMethods(),this.layout()},e.prototype.destoryLayoutMethods=function(){var e=this.layoutMethods;null==e||e.forEach((function(e){e.destroy()})),this.layoutMethods=[]},e.prototype.destroyLayout=function(){var e=this.graph;this.destoryLayoutMethods(),e.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0},e.prototype.setDataFromGraph=function(){for(var e=[],t=[],n=[],r=[],i=[],o=[],a=this.graph.getNodes(),s=this.graph.getEdges(),l=this.graph.getCombos(),u=a.length,c=0;c<u;c++){var d=a[c];if(d&&!d.destroyed){var h=d.getModel();d.isVisible()?e.push(h):t.push(h)}}var f=s.length;for(c=0;c<f;c++){var p=s[c];if(p&&!p.destroyed){h=p.getModel();p.isVisible()?h.isComboEdge?i.push(h):n.push(h):r.push(h)}}var m=l.length;for(c=0;c<m;c++){var g=l[c];if(!g.destroyed){h=g.getModel();g.isVisible()?o.push(h):r.push(h)}}return{nodes:e,hiddenNodes:t,edges:n,hiddenEdges:r,combos:o,hiddenCombos:[],comboEdges:i}},e.prototype.reLayoutMethod=function(e,t){var n=this;return new Promise((function(r,i){var o=n.graph,a=null==t?void 0:t.type;t.onLayoutEnd=function(){o.emit("aftersublayout",{type:a}),r()},e.init(n.data),"force"===a&&(e.ticking=!1,e.forceSimulation.stop()),o.emit("beforesublayout",{type:a}),e.execute(),e.isCustomLayout&&t.onLayoutEnd&&t.onLayoutEnd()}))},e.prototype.relayout=function(e){var t=this,n=this,r=n.graph,i=n.layoutMethods,o=n.layoutCfg;if(e){this.data=this.setDataFromGraph();var a=this.data.nodes;if(!a)return!1;this.initPositions(o.center,a)}r.emit("beforelayout");var s=Promise.resolve();null==i||i.forEach((function(e,n){var r=o[n];s=s.then((function(){return t.reLayoutMethod(e,r)}))})),s.then((function(){o.onAllLayoutEnd&&o.onAllLayoutEnd()})).catch((function(e){console.warn("relayout failed",e)}))},e.prototype.filterLayoutData=function(e,t){var n,r,i=e.nodes,o=e.edges,a=(0,y.__rest)(e,["nodes","edges"]);if(!i)return e;n=(0,b.isFunction)(null==t?void 0:t.nodesFilter)?t.nodesFilter:function(){return!0};var s=i.filter(n);if((0,b.isFunction)(null==t?void 0:t.edgesFilter))r=t.edgesFilter;else{var l=s.reduce((function(e,t){return e[t.id]=!0,e}),{});r=function(e){return l[e.source]&&l[e.target]}}return(0,y.__assign)({nodes:s,edges:o.filter(r)},a)},e.prototype.getLayoutBBox=function(e){var t=this.graph,n=(0,b.groupBy)(t.getNodes(),(function(e){return e.getModel().layoutOrder})),r=Object.values(n).map((function(e){var t=Us(e);return t.size=[t.width,t.height],t}));return{groupNodes:Object.values((0,b.groupBy)(e,"layoutOrder")),layoutNodes:r}},e.prototype.layoutAnimate=function(){},e.prototype.moveToZero=function(){var e=this.graph.get("data").nodes;if(void 0!==e[0].x&&null!==e[0].x&&!Ws(e[0].x)){for(var t=[0,0],n=e.length,r=0;r<n;r++){var i=e[r];t[0]+=i.x,t[1]+=i.y}t[0]/=e.length,t[1]/=e.length;for(r=0;r<n;r++){(i=e[r]).x-=t[0],i.y-=t[1]}}},e.prototype.initPositions=function(e,t){var n=this.graph;if(!t)return!1;var r=t?t.length:0;if(r){var i=.85*n.get("width"),o=.85*n.get("height"),a=Math.ceil(Math.sqrt(r)*(i/o)),s=i/(a-1),l=o/(Math.ceil(r/a)-1);isFinite(s)&&s||(s=0),isFinite(l)&&s||(l=0);for(var u=e[0]-i/2,c=e[1]-o/2,d=!0,h=0;h<r;h++){var f=t[h];Ws(+f.x)&&(d=!1,f.x=h%a*s+u),Ws(+f.y)&&(d=!1,f.y=Math.floor(h/a)*l+c)}return d}},e.prototype.destroy=function(){this.graph=null,this.destoryLayoutMethods(),this.destroyed=!0},e}();const Cu=Lu;var Du=function(e){this.graph=e,this.destroyed=!1,this.initEvents()};const Au=Du;var Pu;!function(e){e.CLICK="click",e.DBLCLICK="dblclick",e.MOUSEDOWN="mousedown",e.MOUDEUP="mouseup",e.CONTEXTMENU="contextmenu",e.MOUSEENTER="mouseenter",e.MOUSEOUT="mouseout",e.MOUSEOVER="mouseover",e.MOUSEMOVE="mousemove",e.MOUSELEAVE="mouseleave",e.DRAGSTART="dragstart",e.DRAGEND="dragend",e.DRAG="drag",e.DRAGENTER="dragenter",e.DRAGLEAVE="dragleave",e.DRAGOVER="dragover",e.DRAGOUT="dragout",e.DDROP="drop",e.KEYUP="keyup",e.KEYDOWN="keydown",e.WHEEL="wheel",e.FOCUS="focus",e.BLUR="blur",e.TOUCHSTART="touchstart",e.TOUCHMOVE="touchmove",e.TOUCHEND="touchend",e.CANVAS_TOUCHSTART="canvas:touchstart",e.CANVAS_TOUCHMOVE="canvas:touchmove",e.CANVAS_TOUCHEND="canvas:touchend",e.NODE_TOUCHSTART="node:touchstart",e.NODE_TOUCHMOVE="node:touchmove",e.NODE_TOUCHEND="node:touchend",e.COMBO_TOUCHSTART="combo:touchstart",e.COMBO_TOUCHMOVE="combo:touchmove",e.COMBO_TOUCHEND="combo:touchend",e.EDGE_TOUCHSTART="edge:touchstart",e.EDGE_TOUCHMOVE="edge:touchmove",e.EDGE_TOUCHEND="edge:touchend",e.NODE_CONTEXTMENU="node:contextmenu",e.NODE_CLICK="node:click",e.NODE_DBLCLICK="node:dblclick",e.NODE_MOUSEDOWN="node:mousedown",e.NODE_MOUSEUP="node:mouseup",e.NODE_MOUSEENTER="node:mouseenter",e.NODE_MOUSELEAVE="node:mouseleave",e.NODE_MOUSEMOVE="node:mousemove",e.NODE_MOUSEOUT="node:mouseout",e.NODE_MOUSEOVER="node:mouseover",e.NODE_DROP="node:drop",e.NODE_DRAGOVER="node:dragover",e.NODE_DRAGENTER="node:dragenter",e.NODE_DRAGLEAVE="node:dragleave",e.NODE_DRAGSTART="node:dragstart",e.NODE_DRAG="node:drag",e.NODE_DRAGEND="node:dragend",e.NODE_TAP="node:tap",e.NODE_PANSTART="node:panstart",e.NODE_PANMOVE="node:panmove",e.NODE_PANEND="node:panend",e.COMBO_CONTEXTMENU="combo:contextmenu",e.COMBO_CLICK="combo:click",e.COMBO_DBLCLICK="combo:dblclick",e.COMBO_MOUSEDOWN="combo:mousedown",e.COMBO_MOUSEUP="combo:mouseup",e.COMBO_MOUSEENTER="combo:mouseenter",e.COMBO_MOUSELEAVE="combo:mouseleave",e.COMBO_MOUSEMOVE="combo:mousemove",e.COMBO_MOUSEOUT="combo:mouseout",e.COMBO_MOUSEOVER="combo:mouseover",e.COMBO_DROP="combo:drop",e.COMBO_DRAGOVER="combo:dragover",e.COMBO_DRAGENTER="combo:dragenter",e.COMBO_DRAGLEAVE="combo:dragleave",e.COMBO_DRAGSTART="combo:dragstart",e.COMBO_DRAG="combo:drag",e.COMBO_DRAGEND="combo:dragend",e.COMBO_TAP="combo:tap",e.COMBO_PANSTART="combo:panstart",e.COMBO_PANMOVE="combo:panmove",e.COMBO_PANEND="combo:panend",e.EDGE_CONTEXTMENU="edge:contextmenu",e.EDGE_CLICK="edge:click",e.EDGE_DBLCLICK="edge:dblclick",e.EDGE_MOUSEDOWN="edge:mousedown",e.EDGE_MOUSEUP="edge:mouseup",e.EDGE_MOUSEENTER="edge:mouseenter",e.EDGE_MOUSELEAVE="edge:mouseleave",e.EDGE_MOUSEMOVE="edge:mousemove",e.EDGE_MOUSEOUT="edge:mouseout",e.EDGE_MOUSEOVER="edge:mouseover",e.EDGE_DROP="edge:drop",e.EDGE_DRAGOVER="edge:dragover",e.EDGE_DRAGENTER="edge:dragenter",e.EDGE_DRAGLEAVE="edge:dragleave",e.CANVAS_CONTEXTMENU="canvas:contextmenu",e.CANVAS_CLICK="canvas:click",e.CANVAS_DBLCLICK="canvas:dblclick",e.CANVAS_MOUSEDOWN="canvas:mousedown",e.CANVAS_MOUSEUP="canvas:mouseup",e.CANVAS_MOUSEENTER="canvas:mouseenter",e.CANVAS_MOUSELEAVE="canvas:mouseleave",e.CANVAS_MOUSEMOVE="canvas:mousemove",e.CANVAS_MOUSEOUT="canvas:mouseout",e.CANVAS_MOUSEOVER="canvas:mouseover",e.CANVAS_DROP="canvas:drop",e.CANVAS_DRAGENTER="canvas:dragenter",e.CANVAS_DRAGLEAVE="canvas:dragleave",e.CANVAS_DRAGSTART="canvas:dragstart",e.CANVAS_DRAG="canvas:drag",e.CANVAS_DRAGEND="canvas:dragend",e.CANVAS_TAP="canvas:tap",e.CANVAS_PANSTART="canvas:panstart",e.CANVAS_PANMOVE="canvas:panmove",e.CANVAS_PANEND="canvas:panend",e.BEFORERENDER="beforerender",e.AFTERRENDER="afterrender",e.BEFOREADDITEM="beforeadditem",e.AFTERADDITEM="afteradditem",e.BEFOREREMOVEITEM="beforeremoveitem",e.AFTERREMOVEITEM="afterremoveitem",e.BEFOREUPDATEITEM="beforeupdateitem",e.AFTERUPDATEITEM="afterupdateitem",e.BEFOREITEMVISIBILITYCHANGE="beforeitemvisibilitychange",e.AFTERITEMVISIBILITYCHANGE="afteritemvisibilitychange",e.BEFOREITEMSTATECHANGE="beforeitemstatechange",e.AFTERITEMSTATECHANGE="afteritemstatechange",e.BEFOREITEMREFRESH="beforeitemrefresh",e.AFTERITEMREFRESH="afteritemrefresh",e.BEFOREITEMSTATESCLEAR="beforeitemstatesclear",e.AFTERITEMSTATESCLEAR="afteritemstatesclear",e.BEFOREMODECHANGE="beforemodechange",e.AFTERMODECHANGE="aftermodechange",e.BEFORELAYOUT="beforelayout",e.AFTERLAYOUT="afterlayout",e.BEFORECREATEEDGE="beforecreateedge",e.AFTERCREATEEDGE="aftercreateedge",e.BEFOREGRAPHREFRESHPOSITION="beforegraphrefreshposition",e.AFTERGRAPHREFRESHPOSITION="aftergraphrefreshposition",e.BEFOREGRAPHREFRESH="beforegraphrefresh",e.AFTERGRAPHREFRESH="aftergraphrefresh",e.BEFOREANIMATE="beforeanimate",e.AFTERANIMATE="afteranimate",e.BEFOREPAINT="beforepaint",e.AFTERPAINT="afterpaint",e.BEFORECOLLAPSEEXPANDCOMBO="beforecollapseexpandcombo",e.AFTERCOLLAPSEEXPANDCOMBO="aftercollapseexpandcombo",e.GRAPHSTATECHANGE="graphstatechange",e.AFTERACTIVATERELATIONS="afteractivaterelations",e.NODESELECTCHANGE="nodeselectchange",e.TOOLTIPCHANGE="tooltipchange",e.WHEELZOOM="wheelzoom",e.VIEWPORTCHANGE="viewportchange",e.DRAGNODEEND="dragnodeend",e.STACKCHANGE="stackchange",e.TAP="tap",e.PINCHSTART="pinchstart",e.PINCHMOVE="pinchmove",e.PANSTART="panstart",e.PANMOVE="panmove",e.PANEND="panend"}(Pu||(Pu={}));var Ou=Eu.registerNode,Iu=Eu.registerEdge,Ru=Eu.registerCombo,Nu=M.registerBehavior,Yu=Bn;Eu.registerNode,Eu.registerEdge,Eu.registerCombo,M.registerBehavior;var ju=o(10369);function Fu(e,t,n,r){var i=e-n,o=t-r;return Math.sqrt(i*i+o*o)}function Bu(e,t,n,r,i,o){return i>=e&&i<=e+n&&o>=t&&o<=t+r}function zu(e,t){return!(t.minX>e.maxX||t.maxX<e.minX||t.minY>e.maxY||t.maxY<e.minY)}function Hu(e,t){return e[0]===t[0]&&e[1]===t[1]}var Gu=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,Wu=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,Uu=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,Vu=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function Xu(e,t){var n=e.match(Vu);(0,b.each)(n,(function(e){var n=e.split(":");t.addColorStop(n[0],n[1])}))}function qu(e,t,n){var r=t.getBBox();if(isNaN(r.x)||isNaN(r.y)||isNaN(r.width)||isNaN(r.height))return n;if((0,b.isString)(n)){if("("===n[1]||"("===n[2]){if("l"===n[0])return function(e,t,n){var r,i,o=Gu.exec(n),a=parseFloat(o[1])%360*(Math.PI/180),s=o[2],l=t.getBBox();a>=0&&a<.5*Math.PI?(r={x:l.minX,y:l.minY},i={x:l.maxX,y:l.maxY}):.5*Math.PI<=a&&a<Math.PI?(r={x:l.maxX,y:l.minY},i={x:l.minX,y:l.maxY}):Math.PI<=a&&a<1.5*Math.PI?(r={x:l.maxX,y:l.maxY},i={x:l.minX,y:l.minY}):(r={x:l.minX,y:l.maxY},i={x:l.maxX,y:l.minY});var u=Math.tan(a),c=u*u,d=(i.x-r.x+u*(i.y-r.y))/(c+1)+r.x,h=u*(i.x-r.x+u*(i.y-r.y))/(c+1)+r.y,f=e.createLinearGradient(r.x,r.y,d,h);return Xu(s,f),f}(e,t,n);if("r"===n[0])return function(e,t,n){var r=Wu.exec(n),i=parseFloat(r[1]),o=parseFloat(r[2]),a=parseFloat(r[3]),s=r[4];if(0===a){var l=s.match(Vu);return l[l.length-1].split(":")[1]}var u=t.getBBox(),c=u.maxX-u.minX,d=u.maxY-u.minY,h=Math.sqrt(c*c+d*d)/2,f=e.createRadialGradient(u.minX+c*i,u.minY+d*o,0,u.minX+c/2,u.minY+d/2,a*h);return Xu(s,f),f}(e,t,n);if("p"===n[0])return function(e,t,n){if(t.get("patternSource")&&t.get("patternSource")===n)return t.get("pattern");var r,i,o=Uu.exec(n),a=o[1],s=o[2];function l(){r=e.createPattern(i,a),t.set("pattern",r),t.set("patternSource",n)}switch(a){case"a":a="repeat";break;case"x":a="repeat-x";break;case"y":a="repeat-y";break;default:a="no-repeat"}return i=new Image,s.match(/^data:/i)||(i.crossOrigin="Anonymous"),i.src=s,i.complete?l():(i.onload=l,i.src=i.src),r}(e,t,n)}return n}return n instanceof CanvasPattern?n:void 0}function Ku(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function Ju(e,t){return Ku(e)*Ku(t)?(e[0]*t[0]+e[1]*t[1])/(Ku(e)*Ku(t)):1}function Zu(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(Ju(e,t))}function $u(e,t){var n=t[1],r=t[2],i=(0,b.mod)((0,b.toRadian)(t[3]),2*Math.PI),o=t[4],a=t[5],s=e[0],l=e[1],u=t[6],c=t[7],d=Math.cos(i)*(s-u)/2+Math.sin(i)*(l-c)/2,h=-1*Math.sin(i)*(s-u)/2+Math.cos(i)*(l-c)/2,f=d*d/(n*n)+h*h/(r*r);f>1&&(n*=Math.sqrt(f),r*=Math.sqrt(f));var p=n*n*(h*h)+r*r*(d*d),m=p?Math.sqrt((n*n*(r*r)-p)/p):1;o===a&&(m*=-1),isNaN(m)&&(m=0);var g=r?m*n*h/r:0,v=n?m*-r*d/n:0,y=(s+u)/2+Math.cos(i)*g-Math.sin(i)*v,_=(l+c)/2+Math.sin(i)*g+Math.cos(i)*v,w=[(d-g)/n,(h-v)/r],x=[(-1*d-g)/n,(-1*h-v)/r],M=Zu([1,0],w),E=Zu(w,x);return Ju(w,x)<=-1&&(E=Math.PI),Ju(w,x)>=1&&(E=0),0===a&&E>0&&(E-=2*Math.PI),1===a&&E<0&&(E+=2*Math.PI),{cx:y,cy:_,rx:Hu(e,[u,c])?0:n,ry:Hu(e,[u,c])?0:r,startAngle:M,endAngle:M+E,xRotation:i,arcFlag:o,sweepFlag:a}}var Qu=Math.sin,ec=Math.cos,tc=Math.atan2,nc=Math.PI;function rc(e,t,n,r,i,o,a){var s=t.stroke,l=t.lineWidth,u=tc(r-o,n-i),c=new Jc({type:"path",canvas:e.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*ec(nc/6)+","+10*Qu(nc/6)+" L0,0 L"+10*ec(nc/6)+",-"+10*Qu(nc/6),stroke:s,lineWidth:l}});c.translate(i,o),c.rotateAtPoint(i,o,u),e.set(a?"startArrowShape":"endArrowShape",c)}function ic(e,t,n,r,i,o,a){var s=t.startArrow,l=t.endArrow,u=t.stroke,c=t.lineWidth,d=a?s:l,h=d.d,f=d.fill,p=d.stroke,m=d.lineWidth,g=(0,y.__rest)(d,["d","fill","stroke","lineWidth"]),v=tc(r-o,n-i);h&&(i-=ec(v)*h,o-=Qu(v)*h);var b=new Jc({type:"path",canvas:e.get("canvas"),isArrowShape:!0,attrs:(0,y.__assign)((0,y.__assign)({},g),{stroke:p||u,lineWidth:m||c,fill:f})});b.translate(i,o),b.rotateAtPoint(i,o,v),e.set(a?"startArrowShape":"endArrowShape",b)}function oc(e,t,n,r,i){var o=tc(r-t,n-e);return{dx:ec(o)*i,dy:Qu(o)*i}}function ac(e,t,n,r,i,o){"object"==typeof t.startArrow?ic(e,t,n,r,i,o,!0):t.startArrow?rc(e,t,n,r,i,o,!0):e.set("startArrowShape",null)}function sc(e,t,n,r,i,o){"object"==typeof t.endArrow?ic(e,t,n,r,i,o,!1):t.endArrow?rc(e,t,n,r,i,o,!1):e.set("startArrowShape",null)}var lc={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function uc(e,t){var n=t.attr();for(var r in n){var i=n[r],o=lc[r]?lc[r]:r;"matrix"===o&&i?e.transform(i[0],i[1],i[3],i[4],i[6],i[7]):"lineDash"===o&&e.setLineDash?(0,b.isArray)(i)&&e.setLineDash(i):("strokeStyle"===o||"fillStyle"===o?i=qu(e,t,i):"globalAlpha"===o&&(i*=e.globalAlpha),e[o]=i)}}function cc(e,t,n){for(var r=0;r<t.length;r++){var i=t[r];i.cfg.visible?i.draw(e,n):i.skipDraw()}}function dc(e,t,n){var r=e.get("refreshElements");(0,b.each)(r,(function(t){if(t!==e)for(var n=t.cfg.parent;n&&n!==e&&!n.cfg.refresh;)n.cfg.refresh=!0,n=n.cfg.parent})),r[0]===e?pc(t,n):hc(t,n)}function hc(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.cfg.visible)if(r.cfg.hasChanged)r.cfg.refresh=!0,r.isGroup()&&pc(r.cfg.children,t);else if(r.cfg.refresh)r.isGroup()&&hc(r.cfg.children,t);else{var i=mc(r,t);r.cfg.refresh=i,i&&r.isGroup()&&hc(r.cfg.children,t)}}}function fc(e){for(var t=0;t<e.length;t++){var n=e[t];n.cfg.hasChanged=!1,n.isGroup()&&!n.destroyed&&fc(n.cfg.children)}}function pc(e,t){for(var n=0;n<e.length;n++){var r=e[n];r.cfg.refresh=!0,r.isGroup()&&pc(r.get("children"),t)}}function mc(e,t){var n=e.cfg.cacheCanvasBBox;return e.cfg.isInView&&n&&zu(n,t)}function gc(e,t,n,r){var i=n.path,o=n.startArrow,a=n.endArrow;if(i){var s=[0,0],l=[0,0],u={dx:0,dy:0};t.beginPath();for(var c=0;c<i.length;c++){var d=i[c],h=d[0];if(0===c&&o&&o.d)u=oc((f=e.getStartTangent())[0][0],f[0][1],f[1][0],f[1][1],o.d);else if(c===i.length-2&&"Z"===i[c+1][0]&&a&&a.d){if("Z"===i[c+1][0])u=oc((f=e.getEndTangent())[0][0],f[0][1],f[1][0],f[1][1],a.d)}else if(c===i.length-1&&a&&a.d){var f;if("Z"!==i[0])u=oc((f=e.getEndTangent())[0][0],f[0][1],f[1][0],f[1][1],a.d)}var p=u.dx,m=u.dy;switch(h){case"M":t.moveTo(d[1]-p,d[2]-m),l=[d[1],d[2]];break;case"L":t.lineTo(d[1]-p,d[2]-m);break;case"Q":t.quadraticCurveTo(d[1],d[2],d[3]-p,d[4]-m);break;case"C":t.bezierCurveTo(d[1],d[2],d[3],d[4],d[5]-p,d[6]-m);break;case"A":var g=void 0;r?(g=r[c])||(g=$u(s,d),r[c]=g):g=$u(s,d);var v=g.cx,y=g.cy,b=g.rx,_=g.ry,w=g.startAngle,x=g.endAngle,M=g.xRotation,E=g.sweepFlag;if(t.ellipse)t.ellipse(v,y,b,_,M,w,x,1-E);else{var S=b>_?b:_,k=b>_?1:b/_,T=b>_?_/b:1;t.translate(v,y),t.rotate(M),t.scale(k,T),t.arc(0,0,S,w,x,1-E),t.scale(1/k,1/T),t.rotate(-M),t.translate(-v,-y)}break;case"Z":t.closePath()}if("Z"===h)s=l;else{var L=d.length;s=[d[L-2],d[L-1]]}}}}function vc(e,t){var n=e.get("canvas");n&&("remove"===t&&(e._cacheCanvasBBox=e.get("cacheCanvasBBox")),e.get("hasChanged")||(e.set("hasChanged",!0),e.cfg.parent&&e.cfg.parent.get("hasChanged")||(n.refreshElement(e,t,n),n.get("autoDraw")&&n.draw())))}function yc(e){var t,n,r;if(e.destroyed)t=e._cacheCanvasBBox;else{var i=e.get("cacheCanvasBBox"),o=i&&!(!i.width||!i.height),a=e.getCanvasBBox(),s=a&&!(!a.width||!a.height);o&&s?(r=a,t=(n=i)&&r?{minX:Math.min(n.minX,r.minX),minY:Math.min(n.minY,r.minY),maxX:Math.max(n.maxX,r.maxX),maxY:Math.max(n.maxY,r.maxY)}:n||r):o?t=i:s&&(t=a)}return t}var bc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,y.__extends)(t,e),t.prototype.onCanvasChange=function(e){vc(this,e)},t.prototype.getShapeBase=function(){return h},t.prototype.getGroupBase=function(){return t},t.prototype._applyClip=function(e,t){t&&(e.save(),uc(e,t),t.createPath(e),e.restore(),e.clip(),t._afterDraw())},t.prototype.cacheCanvasBBox=function(){var e=this.cfg.children,t=[],n=[];(0,b.each)(e,(function(e){var r=e.cfg.cacheCanvasBBox;r&&e.cfg.isInView&&(t.push(r.minX,r.maxX),n.push(r.minY,r.maxY))}));var r=null;if(t.length){var i=(0,b.min)(t),o=(0,b.max)(t),a=(0,b.min)(n),s=(0,b.max)(n);r={minX:i,minY:a,x:i,y:a,maxX:o,maxY:s,width:o-i,height:s-a};var l=this.cfg.canvas;if(l){var u=l.getViewRange();this.set("isInView",zu(r,u))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",r)},t.prototype.draw=function(e,t){var n=this.cfg.children,r=!t||this.cfg.refresh;n.length&&r&&(e.save(),uc(e,this),this._applyClip(e,this.getClip()),cc(e,n,t),e.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},t.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},t}(Na);const _c=bc;var wc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,y.__extends)(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},t.prototype.getShapeBase=function(){return h},t.prototype.getGroupBase=function(){return _c},t.prototype.onCanvasChange=function(e){vc(this,e)},t.prototype.calculateBBox=function(){var e=this.get("type"),t=this.getHitLineWidth(),n=za(e)(this),r=t/2,i=n.x-r,o=n.y-r,a=n.x+n.width+r,s=n.y+n.height+r;return{x:i,minX:i,y:o,minY:o,width:n.width+t,height:n.height+t,maxX:a,maxY:s}},t.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},t.prototype.isStroke=function(){return!!this.attrs.stroke},t.prototype._applyClip=function(e,t){t&&(e.save(),uc(e,t),t.createPath(e),e.restore(),e.clip(),t._afterDraw())},t.prototype.draw=function(e,t){var n=this.cfg.clipShape;if(t){if(!1===this.cfg.refresh)return void this.set("hasChanged",!1);if(!zu(t,this.getCanvasBBox()))return this.set("hasChanged",!1),void(this.cfg.isInView&&this._afterDraw())}e.save(),uc(e,this),this._applyClip(e,n),this.drawPath(e),e.restore(),this._afterDraw()},t.prototype.getCanvasViewBox=function(){var e=this.cfg.canvas;return e?e.getViewRange():null},t.prototype.cacheCanvasBBox=function(){var e=this.getCanvasViewBox();if(e){var t=this.getCanvasBBox(),n=zu(t,e);this.set("isInView",n),n?this.set("cacheCanvasBBox",t):this.set("cacheCanvasBBox",null)}},t.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},t.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},t.prototype.drawPath=function(e){this.createPath(e),this.strokeAndFill(e),this.afterDrawPath(e)},t.prototype.fill=function(e){e.fill()},t.prototype.stroke=function(e){e.stroke()},t.prototype.strokeAndFill=function(e){var t=this.attrs,n=t.lineWidth,r=t.opacity,i=t.strokeOpacity,o=t.fillOpacity;this.isFill()&&((0,b.isNil)(o)||1===o?this.fill(e):(e.globalAlpha=o,this.fill(e),e.globalAlpha=r)),this.isStroke()&&n>0&&((0,b.isNil)(i)||1===i||(e.globalAlpha=i),this.stroke(e)),this.afterDrawPath(e)},t.prototype.createPath=function(e){},t.prototype.afterDrawPath=function(e){},t.prototype.isInShape=function(e,t){var n=this.isStroke(),r=this.isFill(),i=this.getHitLineWidth();return this.isInStrokeOrPath(e,t,n,r,i)},t.prototype.isInStrokeOrPath=function(e,t,n,r,i){return!1},t.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var e=this.attrs;return e.lineWidth+e.lineAppendWidth},t}(ja);const xc=wc;var Mc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,y.__extends)(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},t),{x:0,y:0,r:0})},t.prototype.isInStrokeOrPath=function(e,t,n,r,i){var o=this.attr(),a=o.x,s=o.y,l=o.r,u=i/2,c=Fu(a,s,e,t);return r&&n?c<=l+u:r?c<=l:!!n&&(c>=l-u&&c<=l+u)},t.prototype.createPath=function(e){var t=this.attr(),n=t.x,r=t.y,i=t.r;e.beginPath(),e.arc(n,r,i,0,2*Math.PI,!1),e.closePath()},t}(xc);const Ec=Mc;function Sc(e,t,n,r){return e/(n*n)+t/(r*r)}var kc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,y.__extends)(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},t),{x:0,y:0,rx:0,ry:0})},t.prototype.isInStrokeOrPath=function(e,t,n,r,i){var o=this.attr(),a=i/2,s=o.x,l=o.y,u=o.rx,c=o.ry,d=(e-s)*(e-s),h=(t-l)*(t-l);return r&&n?Sc(d,h,u+a,c+a)<=1:r?Sc(d,h,u,c)<=1:!!n&&(Sc(d,h,u-a,c-a)>=1&&Sc(d,h,u+a,c+a)<=1)},t.prototype.createPath=function(e){var t=this.attr(),n=t.x,r=t.y,i=t.rx,o=t.ry;if(e.beginPath(),e.ellipse)e.ellipse(n,r,i,o,0,0,2*Math.PI,!1);else{var a=i>o?i:o,s=i>o?1:i/o,l=i>o?o/i:1;e.save(),e.translate(n,r),e.scale(s,l),e.arc(0,0,a,0,2*Math.PI),e.restore(),e.closePath()}},t}(xc);const Tc=kc;function Lc(e){return e instanceof HTMLElement&&(0,b.isString)(e.nodeName)&&"CANVAS"===e.nodeName.toUpperCase()}var Cc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,y.__extends)(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},t),{x:0,y:0,width:0,height:0})},t.prototype.initAttrs=function(e){this._setImage(e.img)},t.prototype.isStroke=function(){return!1},t.prototype.isOnlyHitBox=function(){return!0},t.prototype._afterLoading=function(){if(!0===this.get("toDraw")){var e=this.get("canvas");e?e.draw():this.createPath(this.get("context"))}},t.prototype._setImage=function(e){var t=this,n=this.attrs;if((0,b.isString)(e)){var r=new Image;r.onload=function(){if(t.destroyed)return!1;t.attr("img",r),t.set("loading",!1),t._afterLoading();var e=t.get("callback");e&&e.call(t)},r.crossOrigin="Anonymous",r.src=e,this.set("loading",!0)}else e instanceof Image?(n.width||(n.width=e.width),n.height||(n.height=e.height)):Lc(e)&&(n.width||(n.width=Number(e.getAttribute("width"))),n.height||(n.height,Number(e.getAttribute("height"))))},t.prototype.onAttrChange=function(t,n,r){e.prototype.onAttrChange.call(this,t,n,r),"img"===t&&this._setImage(n)},t.prototype.createPath=function(e){if(this.get("loading"))return this.set("toDraw",!0),void this.set("context",e);var t=this.attr(),n=t.x,r=t.y,i=t.width,o=t.height,a=t.sx,s=t.sy,l=t.swidth,u=t.sheight,c=t.img;(c instanceof Image||Lc(c))&&((0,b.isNil)(a)||(0,b.isNil)(s)||(0,b.isNil)(l)||(0,b.isNil)(u)?e.drawImage(c,n,r,i,o):e.drawImage(c,a,s,l,u,n,r,i,o))},t}(xc);const Dc=Cc;function Ac(e,t,n,r,i,o,a){var s=Math.min(e,n),l=Math.max(e,n),u=Math.min(t,r),c=Math.max(t,r),d=i/2;return o>=s-d&&o<=l+d&&a>=u-d&&a<=c+d&&Ja.pointToLine(e,t,n,r,o,a)<=i/2}var Pc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,y.__extends)(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},t.prototype.initAttrs=function(e){this.setArrow()},t.prototype.onAttrChange=function(t,n,r){e.prototype.onAttrChange.call(this,t,n,r),this.setArrow()},t.prototype.setArrow=function(){var e=this.attr(),t=e.x1,n=e.y1,r=e.x2,i=e.y2,o=e.startArrow,a=e.endArrow;o&&ac(this,e,r,i,t,n),a&&sc(this,e,t,n,r,i)},t.prototype.isInStrokeOrPath=function(e,t,n,r,i){if(!n||!i)return!1;var o=this.attr();return Ac(o.x1,o.y1,o.x2,o.y2,i,e,t)},t.prototype.createPath=function(e){var t=this.attr(),n=t.x1,r=t.y1,i=t.x2,o=t.y2,a=t.startArrow,s=t.endArrow,l={dx:0,dy:0},u={dx:0,dy:0};a&&a.d&&(l=oc(n,r,i,o,t.startArrow.d)),s&&s.d&&(u=oc(n,r,i,o,t.endArrow.d)),e.beginPath(),e.moveTo(n+l.dx,r+l.dy),e.lineTo(i-u.dx,o-u.dy)},t.prototype.afterDrawPath=function(e){var t=this.get("startArrowShape"),n=this.get("endArrowShape");t&&t.draw(e),n&&n.draw(e)},t.prototype.getTotalLength=function(){var e=this.attr(),t=e.x1,n=e.y1,r=e.x2,i=e.y2;return Ja.length(t,n,r,i)},t.prototype.getPoint=function(e){var t=this.attr(),n=t.x1,r=t.y1,i=t.x2,o=t.y2;return Ja.pointAt(n,r,i,o,e)},t}(xc);const Oc=Pc;var Ic={circle:function(e,t,n){return[["M",e-n,t],["A",n,n,0,1,0,e+n,t],["A",n,n,0,1,0,e-n,t]]},square:function(e,t,n){return[["M",e-n,t-n],["L",e+n,t-n],["L",e+n,t+n],["L",e-n,t+n],["Z"]]},diamond:function(e,t,n){return[["M",e-n,t],["L",e,t-n],["L",e+n,t],["L",e,t+n],["Z"]]},triangle:function(e,t,n){var r=n*Math.sin(1/3*Math.PI);return[["M",e-n,t+r],["L",e,t-r],["L",e+n,t+r],["Z"]]},"triangle-down":function(e,t,n){var r=n*Math.sin(1/3*Math.PI);return[["M",e-n,t-r],["L",e+n,t-r],["L",e,t+r],["Z"]]}},Rc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,y.__extends)(t,e),t.prototype.initAttrs=function(e){this._resetParamsCache()},t.prototype._resetParamsCache=function(){this.set("paramsCache",{})},t.prototype.onAttrChange=function(t,n,r){e.prototype.onAttrChange.call(this,t,n,r),-1!==["symbol","x","y","r","radius"].indexOf(t)&&this._resetParamsCache()},t.prototype.isOnlyHitBox=function(){return!0},t.prototype._getR=function(e){return(0,b.isNil)(e.r)?e.radius:e.r},t.prototype._getPath=function(){var e,n,r=this.attr(),i=r.x,o=r.y,a=r.symbol||"circle",s=this._getR(r);if((0,b.isFunction)(a))n=Ds(n=(e=a)(i,o,s));else{if(!(e=t.Symbols[a]))return console.warn(a+" marker is not supported."),null;n=e(i,o,s)}return n},t.prototype.createPath=function(e){gc(this,e,{path:this._getPath()},this.get("paramsCache"))},t.Symbols=Ic,t}(xc);const Nc=Rc;function Yc(e,t,n){var r=ys();return e.createPath(r),r.isPointInPath(t,n)}function jc(e){return Math.abs(e)<1e-6?0:e<0?-1:1}function Fc(e,t,n){return(n[0]-e[0])*(t[1]-e[1])==(t[0]-e[0])*(n[1]-e[1])&&Math.min(e[0],t[0])<=n[0]&&n[0]<=Math.max(e[0],t[0])&&Math.min(e[1],t[1])<=n[1]&&n[1]<=Math.max(e[1],t[1])}function Bc(e,t,n){var r=!1,i=e.length;if(i<=2)return!1;for(var o=0;o<i;o++){var a=e[o],s=e[(o+1)%i];if(Fc(a,s,[t,n]))return!0;jc(a[1]-n)>0!=jc(s[1]-n)>0&&jc(t-(n-a[1])*(a[0]-s[0])/(a[1]-s[1])-a[0])<0&&(r=!r)}return r}function zc(e,t,n){var r=[0,0,0,0,0,0,0,0,0];return G(r,n),F(e,r,t)}function Hc(e,t,n){var r=[0,0,0,0,0,0,0,0,0];return W(r,n),F(e,r,t)}function Gc(e,t,n){var r=[0,0,0,0,0,0,0,0,0];return U(r,n),F(e,r,t)}function Wc(e,t,n){return F(e,n,t)}function Uc(e,t,n,r,i,o,a,s){var l=(Math.atan2(s-t,a-e)+2*Math.PI)%(2*Math.PI);if(l<r||l>i)return!1;var u={x:e+n*Math.cos(l),y:t+n*Math.sin(l)};return Fu(u.x,u.y,a,s)<=o/2}var Vc=function(e,t){for(var n=e?[].concat(e):[1,0,0,0,1,0,0,0,1],r=0,i=t.length;r<i;r++){var o=t[r];switch(o[0]){case"t":zc(n,n,[o[1],o[2]]);break;case"s":Gc(n,n,[o[1],o[2]]);break;case"r":Hc(n,n,o[1]);break;case"m":Wc(n,n,o[1])}}return n};const Xc=(0,y.__assign)({hasArc:function(e){for(var t=!1,n=e.length,r=0;r<n;r++){var i=e[r][0];if("C"===i||"A"===i||"Q"===i){t=!0;break}}return t},extractPolygons:function(e){for(var t=e.length,n=[],r=[],i=[],o=0;o<t;o++){var a=e[o],s=a[0];"M"===s?(i.length&&(r.push(i),i=[]),i.push([a[1],a[2]])):"Z"===s?i.length&&(n.push(i),i=[]):i.push([a[1],a[2]])}return i.length>0&&r.push(i),{polygons:n,polylines:r}},isPointInStroke:function(e,t,n,r,i){for(var o=!1,a=t/2,s=0;s<e.length;s++){var l=e[s],u=l.currentPoint,c=l.params,d=l.prePoint,h=l.box;if(!h||Bu(h.x-a,h.y-a,h.width+t,h.height+t,n,r)){switch(l.command){case"L":case"Z":o=Ac(d[0],d[1],u[0],u[1],t,n,r);break;case"Q":o=rs.pointDistance(d[0],d[1],c[1],c[2],c[3],c[4],n,r)<=t/2;break;case"C":o=us.pointDistance(d[0],d[1],c[1],c[2],c[3],c[4],c[5],c[6],n,r,i)<=t/2;break;case"A":var f=l.arcParams,p=f.cx,m=f.cy,g=f.rx,v=f.ry,y=f.startAngle,b=f.endAngle,_=f.xRotation,w=[n,r,1],x=g>v?g:v;Nt(w,w,Vc(null,[["t",-p,-m],["r",-_],["s",1/(g>v?1:g/v),1/(g>v?v/g:1)]])),o=Uc(0,0,x,y,b,t,w[0],w[1])}if(o)break}}return o}},s);function qc(e,t,n){for(var r=!1,i=0;i<e.length;i++){if(r=Bc(e[i],t,n))break}return r}var Kc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,y.__extends)(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},t),{startArrow:!1,endArrow:!1})},t.prototype.initAttrs=function(e){this._setPathArr(e.path),this.setArrow()},t.prototype.onAttrChange=function(t,n,r){e.prototype.onAttrChange.call(this,t,n,r),"path"===t&&this._setPathArr(n),this.setArrow()},t.prototype._setPathArr=function(e){this.attrs.path=Ds(e);var t=Xc.hasArc(e);this.set("hasArc",t),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},t.prototype.getSegments=function(){var e=this.get("segements");return e||(e=Ys(this.attr("path")),this.set("segments",e)),e},t.prototype.setArrow=function(){var e,t=this.attr(),n=t.startArrow,r=t.endArrow;n&&ac(this,t,(e=this.getStartTangent())[0][0],e[0][1],e[1][0],e[1][1]);r&&sc(this,t,(e=this.getEndTangent())[0][0],e[0][1],e[1][0],e[1][1])},t.prototype.isInStrokeOrPath=function(e,t,n,r,i){var o=this.getSegments(),a=this.get("hasArc"),s=!1;if(n){var l=this.getTotalLength();s=Xc.isPointInStroke(o,i,e,t,l)}if(!s&&r)if(a)s=Yc(this,e,t);else{var u=this.attr("path"),c=Xc.extractPolygons(u);s=qc(c.polygons,e,t)||qc(c.polylines,e,t)}return s},t.prototype.createPath=function(e){gc(this,e,this.attr(),this.get("paramsCache"))},t.prototype.afterDrawPath=function(e){var t=this.get("startArrowShape"),n=this.get("endArrowShape");t&&t.draw(e),n&&n.draw(e)},t.prototype.getTotalLength=function(){var e=this.get("totalLength");return(0,b.isNil)(e)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):e},t.prototype.getPoint=function(e){var t,n,r=this.get("tCache");r||(this._calculateCurve(),this._setTcache(),r=this.get("tCache"));var i=this.get("curve");if(!r||0===r.length)return i?{x:i[0][1],y:i[0][2]}:null;(0,b.each)(r,(function(r,i){e>=r[0]&&e<=r[1]&&(t=(e-r[0])/(r[1]-r[0]),n=i)}));var o=i[n];if((0,b.isNil)(o)||(0,b.isNil)(n))return null;var a=o.length,s=i[n+1];return us.pointAt(o[a-2],o[a-1],s[1],s[2],s[3],s[4],s[5],s[6],t)},t.prototype._calculateCurve=function(){var e=this.attr().path;this.set("curve",Xc.pathToCurve(e))},t.prototype._setTcache=function(){var e,t,n,r,i=0,o=0,a=[],s=this.get("curve");s&&((0,b.each)(s,(function(e,t){n=s[t+1],r=e.length,n&&(i+=us.length(e[r-2],e[r-1],n[1],n[2],n[3],n[4],n[5],n[6])||0)})),this.set("totalLength",i),0!==i?((0,b.each)(s,(function(l,u){n=s[u+1],r=l.length,n&&((e=[])[0]=o/i,t=us.length(l[r-2],l[r-1],n[1],n[2],n[3],n[4],n[5],n[6]),o+=t||0,e[1]=o/i,a.push(e))})),this.set("tCache",a)):this.set("tCache",[]))},t.prototype.getStartTangent=function(){var e,t=this.getSegments();if(t.length>1){var n=t[0].currentPoint,r=t[1].currentPoint,i=t[1].startTangent;e=[],i?(e.push([n[0]-i[0],n[1]-i[1]]),e.push([n[0],n[1]])):(e.push([r[0],r[1]]),e.push([n[0],n[1]]))}return e},t.prototype.getEndTangent=function(){var e,t=this.getSegments(),n=t.length;if(n>1){var r=t[n-2].currentPoint,i=t[n-1].currentPoint,o=t[n-1].endTangent;e=[],o?(e.push([i[0]-o[0],i[1]-o[1]]),e.push([i[0],i[1]])):(e.push([r[0],r[1]]),e.push([i[0],i[1]]))}return e},t}(xc);const Jc=Kc;function Zc(e,t,n,r,i){var o=e.length;if(o<2)return!1;for(var a=0;a<o-1;a++){if(Ac(e[a][0],e[a][1],e[a+1][0],e[a+1][1],t,n,r))return!0}if(i){var s=e[0],l=e[o-1];if(Ac(s[0],s[1],l[0],l[1],t,n,r))return!0}return!1}var $c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,y.__extends)(t,e),t.prototype.isInStrokeOrPath=function(e,t,n,r,i){var o=this.attr().points,a=!1;return n&&(a=Zc(o,i,e,t,!0)),!a&&r&&(a=Bc(o,e,t)),a},t.prototype.createPath=function(e){var t=this.attr().points;if(!(t.length<2)){e.beginPath();for(var n=0;n<t.length;n++){var r=t[n];0===n?e.moveTo(r[0],r[1]):e.lineTo(r[0],r[1])}e.closePath()}},t}(xc);const Qc=$c;var ed=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,y.__extends)(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},t),{startArrow:!1,endArrow:!1})},t.prototype.initAttrs=function(e){this.setArrow()},t.prototype.onAttrChange=function(t,n,r){e.prototype.onAttrChange.call(this,t,n,r),this.setArrow(),-1!==["points"].indexOf(t)&&this._resetCache()},t.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},t.prototype.setArrow=function(){var e=this.attr(),t=this.attrs,n=t.points,r=t.startArrow,i=t.endArrow,o=n.length,a=n[0][0],s=n[0][1],l=n[o-1][0],u=n[o-1][1];r&&ac(this,e,n[1][0],n[1][1],a,s),i&&sc(this,e,n[o-2][0],n[o-2][1],l,u)},t.prototype.isFill=function(){return!1},t.prototype.isInStrokeOrPath=function(e,t,n,r,i){return!(!n||!i)&&Zc(this.attr().points,i,e,t,!1)},t.prototype.isStroke=function(){return!0},t.prototype.createPath=function(e){var t=this.attr(),n=t.points,r=t.startArrow,i=t.endArrow,o=n.length;if(!(n.length<2)){var a,s=n[0][0],l=n[0][1],u=n[o-1][0],c=n[o-1][1];if(r&&r.d)s+=(a=oc(s,l,n[1][0],n[1][1],r.d)).dx,l+=a.dy;if(i&&i.d)u-=(a=oc(n[o-2][0],n[o-2][1],u,c,i.d)).dx,c-=a.dy;e.beginPath(),e.moveTo(s,l);for(var d=0;d<o-1;d++){var h=n[d];e.lineTo(h[0],h[1])}e.lineTo(u,c)}},t.prototype.afterDrawPath=function(e){var t=this.get("startArrowShape"),n=this.get("endArrowShape");t&&t.draw(e),n&&n.draw(e)},t.prototype.getTotalLength=function(){var e=this.attr().points,t=this.get("totalLength");return(0,b.isNil)(t)?(this.set("totalLength",ps(e)),this.get("totalLength")):t},t.prototype.getPoint=function(e){var t,n,r=this.attr().points,i=this.get("tCache");return i||(this._setTcache(),i=this.get("tCache")),(0,b.each)(i,(function(r,i){e>=r[0]&&e<=r[1]&&(t=(e-r[0])/(r[1]-r[0]),n=i)})),Ja.pointAt(r[n][0],r[n][1],r[n+1][0],r[n+1][1],t)},t.prototype._setTcache=function(){var e=this.attr().points;if(e&&0!==e.length){var t=this.getTotalLength();if(!(t<=0)){var n,r,i=0,o=[];(0,b.each)(e,(function(a,s){e[s+1]&&((n=[])[0]=i/t,r=Ja.length(a[0],a[1],e[s+1][0],e[s+1][1]),i+=r,n[1]=i/t,o.push(n))})),this.set("tCache",o)}}},t.prototype.getStartTangent=function(){var e=this.attr().points,t=[];return t.push([e[1][0],e[1][1]]),t.push([e[0][0],e[0][1]]),t},t.prototype.getEndTangent=function(){var e=this.attr().points,t=e.length-1,n=[];return n.push([e[t-1][0],e[t-1][1]]),n.push([e[t][0],e[t][1]]),n},t}(xc);const td=ed;var nd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,y.__extends)(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},t),{x:0,y:0,width:0,height:0,radius:0})},t.prototype.isInStrokeOrPath=function(e,t,n,r,i){var o=this.attr(),a=o.x,s=o.y,l=o.width,u=o.height,c=o.radius;if(c){var d=!1;return n&&(d=function(e,t,n,r,i,o,a,s){return Ac(e+i,t,e+n-i,t,o,a,s)||Ac(e+n,t+i,e+n,t+r-i,o,a,s)||Ac(e+n-i,t+r,e+i,t+r,o,a,s)||Ac(e,t+r-i,e,t+i,o,a,s)||Uc(e+n-i,t+i,i,1.5*Math.PI,2*Math.PI,o,a,s)||Uc(e+n-i,t+r-i,i,0,.5*Math.PI,o,a,s)||Uc(e+i,t+r-i,i,.5*Math.PI,Math.PI,o,a,s)||Uc(e+i,t+i,i,Math.PI,1.5*Math.PI,o,a,s)}(a,s,l,u,c,i,e,t)),!d&&r&&(d=Yc(this,e,t)),d}var h=i/2;return r&&n?Bu(a-h,s-h,l+h,u+h,e,t):r?Bu(a,s,l,u,e,t):n?function(e,t,n,r,i,o,a){var s=i/2;return Bu(e-s,t-s,n,i,o,a)||Bu(e+n-s,t-s,i,r,o,a)||Bu(e+s,t+r-s,n,i,o,a)||Bu(e-s,t+s,i,r,o,a)}(a,s,l,u,i,e,t):void 0},t.prototype.createPath=function(e){var t=this.attr(),n=t.x,r=t.y,i=t.width,o=t.height,a=t.radius;if(e.beginPath(),0===a)e.rect(n,r,i,o);else{var s=function(e){var t=0,n=0,r=0,i=0;return(0,b.isArray)(e)?1===e.length?t=n=r=i=e[0]:2===e.length?(t=r=e[0],n=i=e[1]):3===e.length?(t=e[0],n=i=e[1],r=e[2]):(t=e[0],n=e[1],r=e[2],i=e[3]):t=n=r=i=e,[t,n,r,i]}(a),l=s[0],u=s[1],c=s[2],d=s[3];e.moveTo(n+l,r),e.lineTo(n+i-u,r),0!==u&&e.arc(n+i-u,r+u,u,-Math.PI/2,0),e.lineTo(n+i,r+o-c),0!==c&&e.arc(n+i-c,r+o-c,c,0,Math.PI/2),e.lineTo(n+d,r+o),0!==d&&e.arc(n+d,r+o-d,d,Math.PI/2,Math.PI),e.lineTo(n,r+l),0!==l&&e.arc(n+l,r+l,l,Math.PI,1.5*Math.PI),e.closePath()}},t}(xc);const rd=nd;var id=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,y.__extends)(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},t.prototype.isOnlyHitBox=function(){return!0},t.prototype.initAttrs=function(e){this._assembleFont(),e.text&&this._setText(e.text)},t.prototype._assembleFont=function(){var e=this.attrs;e.font=_s(e)},t.prototype._setText=function(e){var t=null;(0,b.isString)(e)&&-1!==e.indexOf("\n")&&(t=e.split("\n")),this.set("textArr",t)},t.prototype.onAttrChange=function(t,n,r){e.prototype.onAttrChange.call(this,t,n,r),t.startsWith("font")&&this._assembleFont(),"text"===t&&this._setText(n)},t.prototype._getSpaceingY=function(){var e=this.attrs,t=e.lineHeight,n=1*e.fontSize;return t?t-n:.14*n},t.prototype._drawTextArr=function(e,t,n){var r,i=this.attrs,o=i.textBaseline,a=i.x,s=i.y,l=1*i.fontSize,u=this._getSpaceingY(),c=bs(i.text,i.fontSize,i.lineHeight);(0,b.each)(t,(function(t,i){r=s+i*(u+l)-c+l,"middle"===o&&(r+=c-l-(c-l)/2),"top"===o&&(r+=c-l),(0,b.isNil)(t)||(n?e.fillText(t,a,r):e.strokeText(t,a,r))}))},t.prototype._drawText=function(e,t){var n=this.attr(),r=n.x,i=n.y,o=this.get("textArr");if(o)this._drawTextArr(e,o,t);else{var a=n.text;(0,b.isNil)(a)||(t?e.fillText(a,r,i):e.strokeText(a,r,i))}},t.prototype.strokeAndFill=function(e){var t=this.attrs,n=t.lineWidth,r=t.opacity,i=t.strokeOpacity,o=t.fillOpacity;this.isStroke()&&n>0&&((0,b.isNil)(i)||1===i||(e.globalAlpha=r),this.stroke(e)),this.isFill()&&((0,b.isNil)(o)||1===o?this.fill(e):(e.globalAlpha=o,this.fill(e),e.globalAlpha=r)),this.afterDrawPath(e)},t.prototype.fill=function(e){this._drawText(e,!0)},t.prototype.stroke=function(e){this._drawText(e,!1)},t}(xc);const od=id;function ad(e,t,n){var r,i,o=e.getTotalMatrix();if(o){var a=(r=[t,n,1],(i=o)?hi(fi(i),r):r);return[a[0],a[1]]}return[t,n]}function sd(e,t,n){if(e.isCanvas&&e.isCanvas())return!0;if(!Xr(e)||!1===e.cfg.isInView)return!1;if(e.cfg.clipShape){var r=ad(e,t,n),i=r[0],o=r[1];if(e.isClipped(i,o))return!1}var a=e.cfg.cacheCanvasBBox||e.getCanvasBBox();return t>=a.minX&&t<=a.maxX&&n>=a.minY&&n<=a.maxY}function ld(e,t,n){if(!sd(e,t,n))return null;for(var r=null,i=e.getChildren(),o=i.length-1;o>=0;o--){var a=i[o];if(a.isGroup())r=ld(a,t,n);else if(sd(a,t,n)){var s=a,l=ad(a,t,n),u=l[0],c=l[1];s.isInShape(u,c)&&(r=a)}if(r)break}return r}var ud=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,y.__extends)(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return t.renderer="canvas",t.autoDraw=!0,t.localRefresh=!0,t.refreshElements=[],t.clipView=!0,t.quickHit=!1,t},t.prototype.onCanvasChange=function(e){"attr"!==e&&"sort"!==e&&"changeSize"!==e||(this.set("refreshElements",[this]),this.draw())},t.prototype.getShapeBase=function(){return h},t.prototype.getGroupBase=function(){return _c},t.prototype.getPixelRatio=function(){var e=this.get("pixelRatio")||(window?window.devicePixelRatio:1);return e>=1?Math.ceil(e):1},t.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},t.prototype.createDom=function(){var e=document.createElement("canvas"),t=e.getContext("2d");return this.set("context",t),e},t.prototype.setDOMSize=function(t,n){e.prototype.setDOMSize.call(this,t,n);var r=this.get("context"),i=this.get("el"),o=this.getPixelRatio();i.width=o*t,i.height=o*n,o>1&&r.scale(o,o)},t.prototype.clear=function(){e.prototype.clear.call(this),this._clearFrame();var t=this.get("context"),n=this.get("el");t.clearRect(0,0,n.width,n.height)},t.prototype.getShape=function(t,n){return this.get("quickHit")?ld(this,t,n):e.prototype.getShape.call(this,t,n,null)},t.prototype._getRefreshRegion=function(){var e,t=this.get("refreshElements"),n=this.getViewRange();t.length&&t[0]===this?e=n:(e=function(e){if(!e.length)return null;var t=[],n=[],r=[],i=[];return(0,b.each)(e,(function(e){var o=yc(e);o&&(t.push(o.minX),n.push(o.minY),r.push(o.maxX),i.push(o.maxY))})),{minX:(0,b.min)(t),minY:(0,b.min)(n),maxX:(0,b.max)(r),maxY:(0,b.max)(i)}}(t),e&&(e.minX=Math.floor(e.minX),e.minY=Math.floor(e.minY),e.maxX=Math.ceil(e.maxX),e.maxY=Math.ceil(e.maxY),e.maxY+=1,this.get("clipView")&&(e=function(e,t){return e&&t&&zu(e,t)?{minX:Math.max(e.minX,t.minX),minY:Math.max(e.minY,t.minY),maxX:Math.min(e.maxX,t.maxX),maxY:Math.min(e.maxY,t.maxY)}:null}(e,n))));return e},t.prototype.refreshElement=function(e){this.get("refreshElements").push(e)},t.prototype._clearFrame=function(){var e=this.get("drawFrame");e&&((0,b.clearAnimationFrame)(e),this.set("drawFrame",null),this.set("refreshElements",[]))},t.prototype.draw=function(){var e=this.get("drawFrame");this.get("autoDraw")&&e||this._startDraw()},t.prototype._drawAll=function(){var e=this.get("context"),t=this.get("el"),n=this.getChildren();e.clearRect(0,0,t.width,t.height),uc(e,this),cc(e,n),this.set("refreshElements",[])},t.prototype._drawRegion=function(){var e=this.get("context"),t=this.get("refreshElements"),n=this.getChildren(),r=this._getRefreshRegion();r?(e.clearRect(r.minX,r.minY,r.maxX-r.minX,r.maxY-r.minY),e.save(),e.beginPath(),e.rect(r.minX,r.minY,r.maxX-r.minX,r.maxY-r.minY),e.clip(),uc(e,this),dc(this,n,r),cc(e,n,r),e.restore()):t.length&&fc(t),(0,b.each)(t,(function(e){e.get("hasChanged")&&e.set("hasChanged",!1)})),this.set("refreshElements",[])},t.prototype._startDraw=function(){var e=this,t=this.get("drawFrame");t||(t=(0,b.requestAnimationFrame)((function(){e.get("localRefresh")?e._drawRegion():e._drawAll(),e.set("drawFrame",null)})),this.set("drawFrame",t))},t.prototype.skipDraw=function(){},t.prototype.removeDom=function(){var e=this.get("el");e.width=0,e.height=0,e.parentNode.removeChild(e)},t}(Ia);const cd=ud;var dd={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"},hd={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"};function fd(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function pd(e){var t=dd[e.type],n=e.getParent();if(!t)throw new Error("the type "+e.type+" is not supported by svg");var r=fd(t);if(e.get("id")&&(r.id=e.get("id")),e.set("el",r),e.set("attrs",{}),n){var i=n.get("el");i||(i=n.createDom(),n.set("el",i)),i.appendChild(r)}return r}function md(e,t){var n=e.get("el"),r=(0,b.toArray)(n.children).sort(t),i=document.createDocumentFragment();r.forEach((function(e){i.appendChild(e)})),n.appendChild(i)}function gd(e){var t=e.attr().matrix;if(t){for(var n=e.cfg.el,r=[],i=0;i<9;i+=3)r.push(t[i]+","+t[i+1]);-1===(r=r.join(",")).indexOf("NaN")?n.setAttribute("transform","matrix("+r+")"):console.warn("invalid matrix:",t)}}function vd(e,t){var n=e.getClip(),r=e.get("el");if(n){if(n&&!r.hasAttribute("clip-path")){pd(n),n.createPath(t);var i=t.addClip(n);r.setAttribute("clip-path","url(#"+i+")")}}else r.removeAttribute("clip-path")}function yd(e,t){t.forEach((function(t){t.draw(e)}))}function bd(e,t){var n=e.get("canvas");if(n&&n.get("autoDraw")){var r=n.get("context"),i=e.getParent(),o=i?i.getChildren():[n],a=e.get("el");if("remove"===t)if(e.get("isClipShape")){var s=a&&a.parentNode,l=s&&s.parentNode;s&&l&&l.removeChild(s)}else a&&a.parentNode&&a.parentNode.removeChild(a);else if("show"===t)a.setAttribute("visibility","visible");else if("hide"===t)a.setAttribute("visibility","hidden");else if("zIndex"===t)!function(e,t){var n=e.parentNode,r=Array.from(n.childNodes).filter((function(e){return 1===e.nodeType&&"defs"!==e.nodeName.toLowerCase()})),i=r[t],o=r.indexOf(e);if(i){if(o>t)n.insertBefore(e,i);else if(o<t){var a=r[t+1];a?n.insertBefore(e,a):n.appendChild(e)}}else n.appendChild(e)}(a,o.indexOf(e));else if("sort"===t){var u=e.get("children");u&&u.length&&md(e,(function(e,t){return u.indexOf(e)-u.indexOf(t)?1:0}))}else"clear"===t?a&&(a.innerHTML=""):"matrix"===t?gd(e):"clip"===t?vd(e,r):"attr"===t||"add"===t&&e.draw(r)}}var _d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,y.__extends)(t,e),t.prototype.isEntityGroup=function(){return!0},t.prototype.createDom=function(){var e=fd("g");this.set("el",e);var t=this.getParent();if(t){var n=t.get("el");n||(n=t.createDom(),t.set("el",n)),n.appendChild(e)}return e},t.prototype.afterAttrsChange=function(t){e.prototype.afterAttrsChange.call(this,t);var n=this.get("canvas");if(n&&n.get("autoDraw")){var r=n.get("context");this.createPath(r,t)}},t.prototype.onCanvasChange=function(e){bd(this,e)},t.prototype.getShapeBase=function(){return f},t.prototype.getGroupBase=function(){return t},t.prototype.draw=function(e){var t=this.getChildren(),n=this.get("el");this.get("destroyed")?n&&n.parentNode.removeChild(n):(n||this.createDom(),vd(this,e),this.createPath(e),t.length&&yd(e,t))},t.prototype.createPath=function(e,t){var n=this.attr(),r=this.get("el");(0,b.each)(t||n,(function(e,t){hd[t]&&r.setAttribute(hd[t],e)})),gd(this)},t}(Na);const wd=_d;var xd=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="svg",t.canFill=!1,t.canStroke=!1,t}return(0,y.__extends)(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},t.prototype.afterAttrsChange=function(t){e.prototype.afterAttrsChange.call(this,t);var n=this.get("canvas");if(n&&n.get("autoDraw")){var r=n.get("context");this.draw(r,t)}},t.prototype.getShapeBase=function(){return f},t.prototype.getGroupBase=function(){return wd},t.prototype.onCanvasChange=function(e){bd(this,e)},t.prototype.calculateBBox=function(){var e=this.get("el"),t=null;if(e)t=e.getBBox();else{var n=za(this.get("type"));n&&(t=n(this))}if(t){var r=t.x,i=t.y,o=t.width,a=t.height,s=this.getHitLineWidth(),l=s/2,u=r-l,c=i-l;return{x:u,y:c,minX:u,minY:c,maxX:r+o+l,maxY:i+a+l,width:o+s,height:a+s}}return{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},t.prototype.isFill=function(){var e=this.attr(),t=e.fill,n=e.fillStyle;return(t||n||this.isClipShape())&&this.canFill},t.prototype.isStroke=function(){var e=this.attr(),t=e.stroke,n=e.strokeStyle;return(t||n)&&this.canStroke},t.prototype.draw=function(e,t){var n=this.get("el");this.get("destroyed")?n&&n.parentNode.removeChild(n):(n||pd(this),vd(this,e),this.createPath(e,t),this.shadow(e,t),this.strokeAndFill(e,t),this.transform(t))},t.prototype.createPath=function(e,t){},t.prototype.strokeAndFill=function(e,t){var n=t||this.attr(),r=n.fill,i=n.fillStyle,o=n.stroke,a=n.strokeStyle,s=n.fillOpacity,l=n.strokeOpacity,u=n.lineWidth,c=this.get("el");this.canFill&&(t?"fill"in n?this._setColor(e,"fill",r):"fillStyle"in n&&this._setColor(e,"fill",i):this._setColor(e,"fill",r||i),s&&c.setAttribute(hd.fillOpacity,s)),this.canStroke&&u>0&&(t?"stroke"in n?this._setColor(e,"stroke",o):"strokeStyle"in n&&this._setColor(e,"stroke",a):this._setColor(e,"stroke",o||a),l&&c.setAttribute(hd.strokeOpacity,l),u&&c.setAttribute(hd.lineWidth,u))},t.prototype._setColor=function(e,t,n){var r=this.get("el");if(n)if(n=n.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(n))(i=e.find("gradient",n))||(i=e.addGradient(n)),r.setAttribute(hd[t],"url(#"+i+")");else if(/^[p,P]{1}[\s]*\(/.test(n)){var i;(i=e.find("pattern",n))||(i=e.addPattern(n)),r.setAttribute(hd[t],"url(#"+i+")")}else r.setAttribute(hd[t],n);else r.setAttribute(hd[t],"none")},t.prototype.shadow=function(e,t){var n=this.attr(),r=t||n,i=r.shadowOffsetX,o=r.shadowOffsetY,a=r.shadowBlur,s=r.shadowColor;(i||o||a||s)&&function(e,t){var n=e.cfg.el,r=e.attr(),i={dx:r.shadowOffsetX,dy:r.shadowOffsetY,blur:r.shadowBlur,color:r.shadowColor};if(i.dx||i.dy||i.blur||i.color){var o=t.find("filter",i);o||(o=t.addShadow(i)),n.setAttribute("filter","url(#"+o+")")}else n.removeAttribute("filter")}(this,e)},t.prototype.transform=function(e){var t=this.attr();(e||t).matrix&&gd(this)},t.prototype.isInShape=function(e,t){return this.isPointInPath(e,t)},t.prototype.isPointInPath=function(e,t){var n=this.get("el"),r=this.get("canvas").get("el").getBoundingClientRect(),i=e+r.left,o=t+r.top,a=document.elementFromPoint(i,o);return!(!a||!a.isEqualNode(n))},t.prototype.getHitLineWidth=function(){var e=this.attrs,t=e.lineWidth,n=e.lineAppendWidth;return this.isStroke()?t+n:0},t}(ja);const Md=xd;var Ed=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="circle",t.canFill=!0,t.canStroke=!0,t}return(0,y.__extends)(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},t),{x:0,y:0,r:0})},t.prototype.createPath=function(e,t){var n=this.attr(),r=this.get("el");(0,b.each)(t||n,(function(e,t){"x"===t||"y"===t?r.setAttribute("c"+t,e):hd[t]&&r.setAttribute(hd[t],e)}))},t}(Md);const Sd=Ed;var kd=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="dom",t.canFill=!1,t.canStroke=!1,t}return(0,y.__extends)(t,e),t.prototype.createPath=function(e,t){var n=this.attr(),r=this.get("el");if((0,b.each)(t||n,(function(e,t){hd[t]&&r.setAttribute(hd[t],e)})),"function"==typeof n.html){var i=n.html.call(this,n);if(i instanceof Element||i instanceof HTMLDocument){for(var o=r.childNodes,a=o.length-1;a>=0;a--)r.removeChild(o[a]);r.appendChild(i)}else r.innerHTML=i}else r.innerHTML=n.html},t}(Md);const Td=kd;var Ld=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="ellipse",t.canFill=!0,t.canStroke=!0,t}return(0,y.__extends)(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},t),{x:0,y:0,rx:0,ry:0})},t.prototype.createPath=function(e,t){var n=this.attr(),r=this.get("el");(0,b.each)(t||n,(function(e,t){"x"===t||"y"===t?r.setAttribute("c"+t,e):hd[t]&&r.setAttribute(hd[t],e)}))},t}(Md);const Cd=Ld;var Dd=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="image",t.canFill=!1,t.canStroke=!1,t}return(0,y.__extends)(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},t),{x:0,y:0,width:0,height:0})},t.prototype.createPath=function(e,t){var n=this,r=this.attr(),i=this.get("el");(0,b.each)(t||r,(function(e,t){"img"===t?n._setImage(r.img):hd[t]&&i.setAttribute(hd[t],e)}))},t.prototype.setAttr=function(e,t){this.attrs[e]=t,"img"===e&&this._setImage(t)},t.prototype._setImage=function(e){var t=this.attr(),n=this.get("el");if((0,b.isString)(e))n.setAttribute("href",e);else if(e instanceof window.Image)t.width||(n.setAttribute("width",e.width),this.attr("width",e.width)),t.height||(n.setAttribute("height",e.height),this.attr("height",e.height)),n.setAttribute("href",e.src);else if(e instanceof HTMLElement&&(0,b.isString)(e.nodeName)&&"CANVAS"===e.nodeName.toUpperCase())n.setAttribute("href",e.toDataURL());else if(e instanceof ImageData){var r=document.createElement("canvas");r.setAttribute("width",""+e.width),r.setAttribute("height",""+e.height),r.getContext("2d").putImageData(e,0,0),t.width||(n.setAttribute("width",""+e.width),this.attr("width",e.width)),t.height||(n.setAttribute("height",""+e.height),this.attr("height",e.height)),n.setAttribute("href",r.toDataURL())}},t}(Md);const Ad=Dd;var Pd=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="line",t.canFill=!1,t.canStroke=!0,t}return(0,y.__extends)(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},t.prototype.createPath=function(e,t){var n=this.attr(),r=this.get("el");(0,b.each)(t||n,(function(t,i){if("startArrow"===i||"endArrow"===i)if(t){var o=(0,b.isObject)(t)?e.addArrow(n,hd[i]):e.getDefaultArrow(n,hd[i]);r.setAttribute(hd[i],"url(#"+o+")")}else r.removeAttribute(hd[i]);else hd[i]&&r.setAttribute(hd[i],t)}))},t.prototype.getTotalLength=function(){var e=this.attr(),t=e.x1,n=e.y1,r=e.x2,i=e.y2;return Ja.length(t,n,r,i)},t.prototype.getPoint=function(e){var t=this.attr(),n=t.x1,r=t.y1,i=t.x2,o=t.y2;return Ja.pointAt(n,r,i,o,e)},t}(Md);const Od=Pd;var Id={circle:function(e,t,n){return[["M",e,t],["m",-n,0],["a",n,n,0,1,0,2*n,0],["a",n,n,0,1,0,2*-n,0]]},square:function(e,t,n){return[["M",e-n,t-n],["L",e+n,t-n],["L",e+n,t+n],["L",e-n,t+n],["Z"]]},diamond:function(e,t,n){return[["M",e-n,t],["L",e,t-n],["L",e+n,t],["L",e,t+n],["Z"]]},triangle:function(e,t,n){var r=n*Math.sin(1/3*Math.PI);return[["M",e-n,t+r],["L",e,t-r],["L",e+n,t+r],["z"]]},triangleDown:function(e,t,n){var r=n*Math.sin(1/3*Math.PI);return[["M",e-n,t-r],["L",e+n,t-r],["L",e,t+r],["Z"]]}};const Rd={get:function(e){return Id[e]},register:function(e,t){Id[e]=t},remove:function(e){delete Id[e]},getAll:function(){return Id}};var Nd=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="marker",t.canFill=!0,t.canStroke=!0,t}return(0,y.__extends)(t,e),t.prototype.createPath=function(e){this.get("el").setAttribute("d",this._assembleMarker())},t.prototype._assembleMarker=function(){var e=this._getPath();return(0,b.isArray)(e)?e.map((function(e){return e.join(" ")})).join(""):e},t.prototype._getPath=function(){var e,t=this.attr(),n=t.x,r=t.y,i=t.r||t.radius,o=t.symbol||"circle";return(e=(0,b.isFunction)(o)?o:Rd.get(o))?e(n,r,i):(console.warn(e+" symbol is not exist."),null)},t.symbolsFactory=Rd,t}(Md);const Yd=Nd;var jd=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="path",t.canFill=!0,t.canStroke=!0,t}return(0,y.__extends)(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},t),{startArrow:!1,endArrow:!1})},t.prototype.createPath=function(e,t){var n=this,r=this.attr(),i=this.get("el");(0,b.each)(t||r,(function(t,o){if("path"===o&&(0,b.isArray)(t))i.setAttribute("d",n._formatPath(t));else if("startArrow"===o||"endArrow"===o)if(t){var a=(0,b.isObject)(t)?e.addArrow(r,hd[o]):e.getDefaultArrow(r,hd[o]);i.setAttribute(hd[o],"url(#"+a+")")}else i.removeAttribute(hd[o]);else hd[o]&&i.setAttribute(hd[o],t)}))},t.prototype._formatPath=function(e){var t=e.map((function(e){return e.join(" ")})).join("");return~t.indexOf("NaN")?"":t},t.prototype.getTotalLength=function(){var e=this.get("el");return e?e.getTotalLength():null},t.prototype.getPoint=function(e){var t=this.get("el"),n=this.getTotalLength();if(0===n)return null;var r=t?t.getPointAtLength(e*n):null;return r?{x:r.x,y:r.y}:null},t}(Md);const Fd=jd;var Bd=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="polygon",t.canFill=!0,t.canStroke=!0,t}return(0,y.__extends)(t,e),t.prototype.createPath=function(e,t){var n=this.attr(),r=this.get("el");(0,b.each)(t||n,(function(e,t){"points"===t&&(0,b.isArray)(e)&&e.length>=2?r.setAttribute("points",e.map((function(e){return e[0]+","+e[1]})).join(" ")):hd[t]&&r.setAttribute(hd[t],e)}))},t}(Md);const zd=Bd;var Hd=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="polyline",t.canFill=!0,t.canStroke=!0,t}return(0,y.__extends)(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},t),{startArrow:!1,endArrow:!1})},t.prototype.onAttrChange=function(t,n,r){e.prototype.onAttrChange.call(this,t,n,r),-1!==["points"].indexOf(t)&&this._resetCache()},t.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},t.prototype.createPath=function(e,t){var n=this.attr(),r=this.get("el");(0,b.each)(t||n,(function(e,t){"points"===t&&(0,b.isArray)(e)&&e.length>=2?r.setAttribute("points",e.map((function(e){return e[0]+","+e[1]})).join(" ")):hd[t]&&r.setAttribute(hd[t],e)}))},t.prototype.getTotalLength=function(){var e=this.attr().points,t=this.get("totalLength");return(0,b.isNil)(t)?(this.set("totalLength",ps(e)),this.get("totalLength")):t},t.prototype.getPoint=function(e){var t,n,r=this.attr().points,i=this.get("tCache");return i||(this._setTcache(),i=this.get("tCache")),(0,b.each)(i,(function(r,i){e>=r[0]&&e<=r[1]&&(t=(e-r[0])/(r[1]-r[0]),n=i)})),Ja.pointAt(r[n][0],r[n][1],r[n+1][0],r[n+1][1],t)},t.prototype._setTcache=function(){var e=this.attr().points;if(e&&0!==e.length){var t=this.getTotalLength();if(!(t<=0)){var n,r,i=0,o=[];(0,b.each)(e,(function(a,s){e[s+1]&&((n=[])[0]=i/t,r=Ja.length(a[0],a[1],e[s+1][0],e[s+1][1]),i+=r,n[1]=i/t,o.push(n))})),this.set("tCache",o)}}},t.prototype.getStartTangent=function(){var e=this.attr().points,t=[];return t.push([e[1][0],e[1][1]]),t.push([e[0][0],e[0][1]]),t},t.prototype.getEndTangent=function(){var e=this.attr().points,t=e.length-1,n=[];return n.push([e[t-1][0],e[t-1][1]]),n.push([e[t][0],e[t][1]]),n},t}(Md);const Gd=Hd;var Wd=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="rect",t.canFill=!0,t.canStroke=!0,t}return(0,y.__extends)(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},t),{x:0,y:0,width:0,height:0,radius:0})},t.prototype.createPath=function(e,t){var n=this,r=this.attr(),i=this.get("el"),o=!1,a=["x","y","width","height","radius"];(0,b.each)(t||r,(function(e,t){-1===a.indexOf(t)||o?-1===a.indexOf(t)&&hd[t]&&i.setAttribute(hd[t],e):(i.setAttribute("d",n._assembleRect(r)),o=!0)}))},t.prototype._assembleRect=function(e){var t=e.x,n=e.y,r=e.width,i=e.height,o=e.radius;if(!o)return"M "+t+","+n+" l "+r+",0 l 0,"+i+" l"+-r+" 0 z";var a=function(e){var t=0,n=0,r=0,i=0;return(0,b.isArray)(e)?1===e.length?t=n=r=i=e[0]:2===e.length?(t=r=e[0],n=i=e[1]):3===e.length?(t=e[0],n=i=e[1],r=e[2]):(t=e[0],n=e[1],r=e[2],i=e[3]):t=n=r=i=e,{r1:t,r2:n,r3:r,r4:i}}(o);return(0,b.isArray)(o)?1===o.length?a.r1=a.r2=a.r3=a.r4=o[0]:2===o.length?(a.r1=a.r3=o[0],a.r2=a.r4=o[1]):3===o.length?(a.r1=o[0],a.r2=a.r4=o[1],a.r3=o[2]):(a.r1=o[0],a.r2=o[1],a.r3=o[2],a.r4=o[3]):a.r1=a.r2=a.r3=a.r4=o,[["M "+(t+a.r1)+","+n],["l "+(r-a.r1-a.r2)+",0"],["a "+a.r2+","+a.r2+",0,0,1,"+a.r2+","+a.r2],["l 0,"+(i-a.r2-a.r3)],["a "+a.r3+","+a.r3+",0,0,1,"+-a.r3+","+a.r3],["l "+(a.r3+a.r4-r)+",0"],["a "+a.r4+","+a.r4+",0,0,1,"+-a.r4+","+-a.r4],["l 0,"+(a.r4+a.r1-i)],["a "+a.r1+","+a.r1+",0,0,1,"+a.r1+","+-a.r1],["z"]].join(" ")},t}(Md);const Ud=Wd;var Vd={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},Xd={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},qd={left:"left",start:"left",center:"middle",right:"end",end:"end"},Kd=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="text",t.canFill=!0,t.canStroke=!0,t}return(0,y.__extends)(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},t.prototype.createPath=function(e,t){var n=this,r=this.attr(),i=this.get("el");this._setFont(),(0,b.each)(t||r,(function(e,t){"text"===t?n._setText(""+e):"matrix"===t&&e?gd(n):hd[t]&&i.setAttribute(hd[t],e)})),i.setAttribute("paint-order","stroke"),i.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},t.prototype._setFont=function(){var e=this.get("el"),t=this.attr(),n=t.textBaseline,r=t.textAlign,i=ii();i&&"firefox"===i.name?e.setAttribute("dominant-baseline",Xd[n]||"alphabetic"):e.setAttribute("alignment-baseline",Vd[n]||"baseline"),e.setAttribute("text-anchor",qd[r]||"left")},t.prototype._setText=function(e){var t=this.get("el"),n=this.attr(),r=n.x,i=n.textBaseline,o=void 0===i?"bottom":i;if(e)if(~e.indexOf("\n")){var a=e.split("\n"),s=a.length-1,l="";(0,b.each)(a,(function(e,t){0===t?"alphabetic"===o?l+='<tspan x="'+r+'" dy="'+-s+'em">'+e+"</tspan>":"top"===o?l+='<tspan x="'+r+'" dy="0.9em">'+e+"</tspan>":"middle"===o?l+='<tspan x="'+r+'" dy="'+-(s-1)/2+'em">'+e+"</tspan>":"bottom"===o?l+='<tspan x="'+r+'" dy="-'+(s+.3)+'em">'+e+"</tspan>":"hanging"===o&&(l+='<tspan x="'+r+'" dy="'+(-(s-1)-.3)+'em">'+e+"</tspan>"):l+='<tspan x="'+r+'" dy="1em">'+e+"</tspan>"})),t.innerHTML=l}else t.innerHTML=e;else t.innerHTML=""},t}(Md);const Jd=Kd;var Zd=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,$d=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,Qd=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function eh(e){var t=e.match(Qd);if(!t)return"";var n="";return t.sort((function(e,t){return e=e.split(":"),t=t.split(":"),Number(e[0])-Number(t[0])})),(0,b.each)(t,(function(e){e=e.split(":"),n+='<stop offset="'+e[0]+'" stop-color="'+e[1]+'"></stop>'})),n}var th=function(){function e(e){this.cfg={};var t=null,n=(0,b.uniqueId)("gradient_");return"l"===e.toLowerCase()[0]?function(e,t){var n,r,i=Zd.exec(e),o=(0,b.mod)((0,b.toRadian)(parseFloat(i[1])),2*Math.PI),a=i[2];o>=0&&o<.5*Math.PI?(n={x:0,y:0},r={x:1,y:1}):.5*Math.PI<=o&&o<Math.PI?(n={x:1,y:0},r={x:0,y:1}):Math.PI<=o&&o<1.5*Math.PI?(n={x:1,y:1},r={x:0,y:0}):(n={x:0,y:1},r={x:1,y:0});var s=Math.tan(o),l=s*s,u=(r.x-n.x+s*(r.y-n.y))/(l+1)+n.x,c=s*(r.x-n.x+s*(r.y-n.y))/(l+1)+n.y;t.setAttribute("x1",n.x),t.setAttribute("y1",n.y),t.setAttribute("x2",u),t.setAttribute("y2",c),t.innerHTML=eh(a)}(e,t=fd("linearGradient")):function(e,t){var n=$d.exec(e),r=parseFloat(n[1]),i=parseFloat(n[2]),o=parseFloat(n[3]),a=n[4];t.setAttribute("cx",r),t.setAttribute("cy",i),t.setAttribute("r",o),t.innerHTML=eh(a)}(e,t=fd("radialGradient")),t.setAttribute("id",n),this.el=t,this.id=n,this.cfg=e,this}return e.prototype.match=function(e,t){return this.cfg===t},e}();const nh=th;var rh={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},ih={x:"-40%",y:"-40%",width:"200%",height:"200%"},oh=function(){function e(e){this.type="filter",this.cfg={},this.type="filter";var t=fd("filter");return(0,b.each)(ih,(function(e,n){t.setAttribute(n,e)})),this.el=t,this.id=(0,b.uniqueId)("filter_"),this.el.id=this.id,this.cfg=e,this._parseShadow(e,t),this}return e.prototype.match=function(e,t){if(this.type!==e)return!1;var n=!0,r=this.cfg;return(0,b.each)(Object.keys(r),(function(e){if(r[e]!==t[e])return n=!1,!1})),n},e.prototype.update=function(e,t){var n=this.cfg;return n[rh[e]]=t,this._parseShadow(n,this.el),this},e.prototype._parseShadow=function(e,t){var n='<feDropShadow\n      dx="'+(e.dx||0)+'"\n      dy="'+(e.dy||0)+'"\n      stdDeviation="'+(e.blur?e.blur/10:0)+'"\n      flood-color="'+(e.color?e.color:"#000")+'"\n      flood-opacity="'+(e.opacity?e.opacity:1)+'"\n      />';t.innerHTML=n},e}();const ah=oh;var sh=function(){function e(e,t){this.cfg={};var n=fd("marker"),r=(0,b.uniqueId)("marker_");n.setAttribute("id",r);var i=fd("path");i.setAttribute("stroke",e.stroke||"none"),i.setAttribute("fill",e.fill||"none"),n.appendChild(i),n.setAttribute("overflow","visible"),n.setAttribute("orient","auto-start-reverse"),this.el=n,this.child=i,this.id=r;var o=e["marker-start"===t?"startArrow":"endArrow"];return this.stroke=e.stroke||"#000",!0===o?this._setDefaultPath(t,i):(this.cfg=o,this._setMarker(e.lineWidth,i)),this}return e.prototype.match=function(){return!1},e.prototype._setDefaultPath=function(e,t){var n=this.el;t.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),n.setAttribute("refX",""+10*Math.cos(Math.PI/6)),n.setAttribute("refY","5")},e.prototype._setMarker=function(e,t){var n=this.el,r=this.cfg.path,i=this.cfg.d;(0,b.isArray)(r)&&(r=r.map((function(e){return e.join(" ")})).join("")),t.setAttribute("d",r),n.appendChild(t),i&&n.setAttribute("refX",""+i/e)},e.prototype.update=function(e){var t=this.child;t.attr?t.attr("fill",e):t.setAttribute("fill",e)},e}();const lh=sh;const uh=function(){function e(e){this.type="clip",this.cfg={};var t=fd("clipPath");this.el=t,this.id=(0,b.uniqueId)("clip_"),t.id=this.id;var n=e.cfg.el;return t.appendChild(n),this.cfg=e,this}return e.prototype.match=function(){return!1},e.prototype.remove=function(){var e=this.el;e.parentNode.removeChild(e)},e}();var ch=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i;const dh=function(){function e(e){this.cfg={};var t=fd("pattern");t.setAttribute("patternUnits","userSpaceOnUse");var n=fd("image");t.appendChild(n);var r=(0,b.uniqueId)("pattern_");t.id=r,this.el=t,this.id=r,this.cfg=e;var i=ch.exec(e)[2];n.setAttribute("href",i);var o=new Image;function a(){t.setAttribute("width",""+o.width),t.setAttribute("height",""+o.height)}return i.match(/^data:/i)||(o.crossOrigin="Anonymous"),o.src=i,o.complete?a():(o.onload=a,o.src=o.src),this}return e.prototype.match=function(e,t){return this.cfg===t},e}();var hh=function(){function e(e){var t=fd("defs"),n=(0,b.uniqueId)("defs_");t.id=n,e.appendChild(t),this.children=[],this.defaultArrow={},this.el=t,this.canvas=e}return e.prototype.find=function(e,t){for(var n=this.children,r=null,i=0;i<n.length;i++)if(n[i].match(e,t)){r=n[i].id;break}return r},e.prototype.findById=function(e){for(var t=this.children,n=null,r=0;r<t.length;r++)if(t[r].id===e){n=t[r];break}return n},e.prototype.add=function(e){this.children.push(e),e.canvas=this.canvas,e.parent=this},e.prototype.getDefaultArrow=function(e,t){var n=e.stroke||e.strokeStyle;if(this.defaultArrow[n])return this.defaultArrow[n].id;var r=new lh(e,t);return this.defaultArrow[n]=r,this.el.appendChild(r.el),this.add(r),r.id},e.prototype.addGradient=function(e){var t=new nh(e);return this.el.appendChild(t.el),this.add(t),t.id},e.prototype.addArrow=function(e,t){var n=new lh(e,t);return this.el.appendChild(n.el),this.add(n),n.id},e.prototype.addShadow=function(e){var t=new ah(e);return this.el.appendChild(t.el),this.add(t),t.id},e.prototype.addPattern=function(e){var t=new dh(e);return this.el.appendChild(t.el),this.add(t),t.id},e.prototype.addClip=function(e){var t=new uh(e);return this.el.appendChild(t.el),this.add(t),t.id},e}();const fh=hh;var ph=function(e){function t(t){return e.call(this,(0,y.__assign)((0,y.__assign)({},t),{autoDraw:!0,renderer:"svg"}))||this}return(0,y.__extends)(t,e),t.prototype.getShapeBase=function(){return f},t.prototype.getGroupBase=function(){return wd},t.prototype.getShape=function(e,t,n){var r=n.target||n.srcElement;if(!dd[r.tagName]){for(var i=r.parentNode;i&&!dd[i.tagName];)i=i.parentNode;r=i}return this.find((function(e){return e.get("el")===r}))},t.prototype.createDom=function(){var e=fd("svg"),t=new fh(e);return e.setAttribute("width",""+this.get("width")),e.setAttribute("height",""+this.get("height")),this.set("context",t),e},t.prototype.onCanvasChange=function(e){var t=this.get("context"),n=this.get("el");if("sort"===e){var r=this.get("children");r&&r.length&&md(this,(function(e,t){return r.indexOf(e)-r.indexOf(t)?1:0}))}else if("clear"===e){if(n){n.innerHTML="";var i=t.el;i.innerHTML="",n.appendChild(i)}}else"matrix"===e?gd(this):"clip"===e?vd(this,t):"changeSize"===e&&(n.setAttribute("width",""+this.get("width")),n.setAttribute("height",""+this.get("height")))},t.prototype.draw=function(){var e=this.get("context"),t=this.getChildren();vd(this,e),t.length&&yd(e,t)},t}(Ia);const mh=ph;function gh(e,t,n){var r=[0,0,0,0,0,0,0,0,0];return G(r,n),F(e,r,t)}function vh(e,t,n){var r=[0,0,0,0,0,0,0,0,0];return W(r,n),F(e,r,t)}function yh(e,t,n){var r=[0,0,0,0,0,0,0,0,0];return U(r,n),F(e,r,t)}function bh(e,t,n){return F(e,n,t)}function _h(e,t){for(var n=e?[].concat(e):[1,0,0,0,1,0,0,0,1],r=0,i=t.length;r<i;r++){var o=t[r];switch(o[0]){case"t":gh(n,n,[o[1],o[2]]);break;case"s":yh(n,n,[o[1],o[2]]);break;case"r":vh(n,n,o[1]);break;case"m":bh(n,n,o[1])}}return n}var wh=o(6767),xh=o.n(wh),Mh=o(17621),Eh=o.n(Mh),Sh=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function kh(e,t,n){var r;return(r=Math.round(e.h)>=60&&Math.round(e.h)<=240?n?Math.round(e.h)-2*t:Math.round(e.h)+2*t:n?Math.round(e.h)+2*t:Math.round(e.h)-2*t)<0?r+=360:r>=360&&(r-=360),r}function Th(e,t,n){return 0===e.h&&0===e.s?e.s:((r=n?e.s-.16*t:4===t?e.s+.16:e.s+.05*t)>1&&(r=1),n&&5===t&&r>.1&&(r=.1),r<.06&&(r=.06),Number(r.toFixed(2)));var r}function Lh(e,t,n){var r;return(r=n?e.v+.05*t:e.v-.15*t)>1&&(r=1),Number(r.toFixed(2))}function Ch(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[],r=Eh()(e),i=5;i>0;i-=1){var o=r.toHsv(),a=Eh()({h:kh(o,i,!0),s:Th(o,i,!0),v:Lh(o,i,!0)}).toHexString();n.push(a)}n.push(r.toHexString());for(var s=1;s<=4;s+=1){var l=r.toHsv(),u=Eh()({h:kh(l,s),s:Th(l,s),v:Lh(l,s)}).toHexString();n.push(u)}return"dark"===t.theme?Sh.map((function(e){var r=e.index,i=e.opacity;return Eh().mix(t.backgroundColor||"#141414",n[r],100*i).toHexString()})):n}var Dh={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},Ah={},Ph={};Object.keys(Dh).forEach((function(e){Ah[e]=Ch(Dh[e]),Ah[e].primary=Ah[e][5],Ph[e]=Ch(Dh[e],{theme:"dark",backgroundColor:"#141414"}),Ph[e].primary=Ph[e][5]}));Ah.red,Ah.volcano,Ah.gold,Ah.orange,Ah.yellow,Ah.lime,Ah.green,Ah.cyan,Ah.blue,Ah.geekblue,Ah.purple,Ah.magenta,Ah.grey;var Oh=function(e,t,n){var r=xh()(e),i=xh()(t);return xh()([(1-n)*r.red()+n*i.red(),(1-n)*r.green()+n*i.green(),(1-n)*r.blue()+n*i.blue()]).rgb()},Ih=function(e,t,n,r){return void 0===t&&(t="#fff"),void 0===n&&(n="default"),void 0===r&&(r="rgb(150, 150, 150)"),"default"===n?function(e,t,n){void 0===t&&(t="#fff"),void 0===n&&(n="rgb(150, 150, 150)");var r=Oh(t,e,.05).rgb().toString(),i=Oh(t,e,.1).rgb().toString(),o=Oh(t,e,.2).rgb().toString(),a=Oh(t,e,.4).rgb().toString(),s=Oh(t,n,.02).rgb().toString(),l=Oh(t,n,.05).rgb().toString(),u=Oh(t,n,.1).rgb().toString(),c=Oh(t,n,.2).rgb().toString(),d=Oh(t,n,.3).rgb().toString(),h=Ch(e,{theme:"default",backgroundColor:t}),f=xh()(e).hex().toLowerCase(),p=h.indexOf(f),m=e;return-1!==p&&(m=h[p+1]),{mainStroke:e,mainFill:i,activeStroke:e,activeFill:r,inactiveStroke:a,inactiveFill:r,selectedStroke:e,selectedFill:t,highlightStroke:m,highlightFill:o,disableStroke:d,disableFill:l,edgeMainStroke:d,edgeActiveStroke:e,edgeInactiveStroke:c,edgeSelectedStroke:e,edgeHighlightStroke:e,edgeDisableStroke:u,comboMainStroke:d,comboMainFill:s,comboActiveStroke:e,comboActiveFill:r,comboInactiveStroke:d,comboInactiveFill:s,comboSelectedStroke:e,comboSelectedFill:s,comboHighlightStroke:m,comboHighlightFill:s,comboDisableStroke:c,comboDisableFill:l}}(e,t,"rgb(150, 150, 150)"):function(e,t,n){void 0===t&&(t="#fff"),void 0===n&&(n="#777");var r=Oh(t,e,.2).rgb().toString(),i=Oh(t,e,.3).rgb().toString(),o=Oh(t,e,.6).rgb().toString(),a=Oh(t,e,.8).rgb().toString(),s=Oh(t,n,.2).rgb().toString(),l=Oh(t,n,.25).rgb().toString(),u=Oh(t,n,.3).rgb().toString(),c=Oh(t,n,.4).rgb().toString(),d=Oh(t,n,.5).rgb().toString(),h=Ch(e,{theme:"dark",backgroundColor:t}),f=xh()(e).hex().toLowerCase(),p=h.indexOf(f),m=e;return-1!==p&&(m=h[p+1]),{mainStroke:a,mainFill:r,activeStroke:e,activeFill:i,inactiveStroke:a,inactiveFill:r,selectedStroke:e,selectedFill:r,highlightStroke:e,highlightFill:o,disableStroke:d,disableFill:l,edgeMainStroke:n,edgeActiveStroke:e,edgeInactiveStroke:n,edgeSelectedStroke:e,edgeHighlightStroke:e,edgeDisableStroke:u,comboMainStroke:c,comboMainFill:l,comboActiveStroke:e,comboActiveFill:s,comboInactiveStroke:c,comboInactiveFill:l,comboSelectedStroke:e,comboSelectedFill:s,comboHighlightStroke:m,comboHighlightFill:l,comboDisableStroke:c,comboDisableFill:s}}(e,t,"#777")},Rh=function(e,t,n,r){void 0===t&&(t="#fff"),void 0===n&&(n="default"),void 0===r&&(r="rgb(150, 150, 150)");var i=[];return e.forEach((function(e){i.push(Ih(e,t,n,r))})),i},Nh="rgb(0, 0, 0)",Yh=Ih("rgb(95, 149, 255)","rgb(255, 255, 255)");const jh={version:"0.3.11",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:Yh.mainStroke,fill:Yh.mainFill},size:20,color:Yh.mainStroke,linkPoints:{size:8,lineWidth:1,fill:Yh.activeFill,stroke:Yh.activeStroke}},nodeStateStyles:{active:{fill:Yh.activeFill,stroke:Yh.activeStroke,lineWidth:2,shadowColor:Yh.mainStroke,shadowBlur:10},selected:{fill:Yh.selectedFill,stroke:Yh.selectedStroke,lineWidth:4,shadowColor:Yh.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:Yh.highlightFill,stroke:Yh.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:Yh.inactiveFill,stroke:Yh.inactiveStroke,lineWidth:1},disable:{fill:Yh.disableFill,stroke:Yh.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:Nh,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:Yh.edgeMainStroke,lineAppendWidth:2},color:Yh.edgeMainStroke},edgeStateStyles:{active:{stroke:Yh.edgeActiveStroke,lineWidth:1},selected:{stroke:Yh.edgeSelectedStroke,lineWidth:2,shadowColor:Yh.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:Yh.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:Yh.edgeInactiveStroke,lineWidth:1},disable:{stroke:Yh.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:Nh,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:Yh.comboMainFill,lineWidth:1,stroke:Yh.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:Yh.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:Yh.comboActiveStroke,lineWidth:1,fill:Yh.comboActiveFill},selected:{stroke:Yh.comboSelectedStroke,lineWidth:2,fill:Yh.comboSelectedFill,shadowColor:Yh.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:Yh.comboHighlightStroke,lineWidth:2,fill:Yh.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:Yh.comboInactiveStroke,fill:Yh.comboInactiveFill,lineWidth:1},disable:{stroke:Yh.comboDisableStroke,fill:Yh.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},textWaterMarkerConfig:{width:150,height:100,compatible:!1,text:{x:0,y:60,lineHeight:20,rotate:20,fontSize:14,fontFamily:"Microsoft YaHei",fill:"rgba(0, 0, 0, 0.1)",baseline:"Middle"}},imageWaterMarkerConfig:{width:150,height:130,compatible:!1,image:{x:0,y:0,width:30,height:20,rotate:0}},waterMarkerImage:"https://gw.alipayobjects.com/os/s/prod/antv/assets/image/logo-with-text-73b8a.svg"};function Fh(e,t,n){if(e){if("function"==typeof e.addEventListener)return e.addEventListener(t,n,!1),{remove:function(){e.removeEventListener(t,n,!1)}};if("function"==typeof e.attachEvent)return e.attachEvent("on"+t,n),{remove:function(){e.detachEvent("on"+t,n)}}}}var Bh=Tu.cloneEvent,zh=Tu.isViewportChanged,Hh=function(e){function t(t){var n=e.call(this,t)||this;return n.extendEvents=[],n.dragging=!1,n.preItem=null,n.graph=t,n.destroyed=!1,n.initEvents(),n}return(0,y.__extends)(t,e),t.prototype.initEvents=function(){var e=this.graph,t=this.extendEvents,n=void 0===t?[]:t,r=e.get("canvas"),i=r.get("el"),o=(0,b.wrapBehavior)(this,"onCanvasEvents"),a=(0,b.wrapBehavior)(this,"onExtendEvents"),s=(0,b.wrapBehavior)(this,"onWheelEvent");r.off("*").on("*",o),this.canvasHandler=o,n.push(Fh(i,"DOMMouseScroll",s)),n.push(Fh(i,"mousewheel",s)),"undefined"!=typeof window&&(n.push(Fh(window,"keydown",a)),n.push(Fh(window,"keyup",a)),n.push(Fh(window,"focus",a)))},t.getItemRoot=function(e){for(;e&&!e.get("item");)e=e.get("parent");return e},t.prototype.onCanvasEvents=function(e){var n=this.graph,r=n.get("canvas"),i=e.target,o=e.type;e.canvasX=e.x,e.canvasY=e.y;var a={x:e.canvasX,y:e.canvasY},s=n.get("group").getMatrix();if(s||(s=[1,0,0,0,1,0,0,0,1]),zh(s)&&(a=n.getPointByClient(e.clientX,e.clientY)),e.x=a.x,e.y=a.y,e.currentTarget=n,i===r)return"mousemove"!==o&&"mouseleave"!==o||this.handleMouseMove(e,"canvas"),e.target=r,e.item=null,n.emit(o,e),void n.emit("canvas:"+o,e);var l=t.getItemRoot(i);if(l){var u=l.get("item");if(!u.destroyed){var c=u.getType();if(e.target=i,e.item=u,e.canvasX===e.x&&e.canvasY===e.y){var d=n.getCanvasByPoint(e.x,e.y);e.canvasX=d.x,e.canvasY=d.y}n.emit(o,e),e.name&&!e.name.includes(":")?n.emit(c+":"+o,e):n.emit(e.name,e),"dragstart"===o&&(this.dragging=!0),"dragend"===o&&(this.dragging=!1),"mousemove"===o&&this.handleMouseMove(e,c)}}else n.emit(o,e)},t.prototype.onExtendEvents=function(e){this.graph.emit(e.type,e)},t.prototype.onWheelEvent=function(e){(0,b.isNil)(e.wheelDelta)&&(e.wheelDelta=-e.detail),this.graph.emit("wheel",e)},t.prototype.handleMouseMove=function(e,t){var n=this.graph,r=this.preItem,i=n.get("canvas"),o=e.target===i?null:e.item;e=Bh(e),r&&r!==o&&!r.destroyed&&(e.item=r,this.emitCustomEvent(r.getType(),"mouseleave",e),this.dragging&&this.emitCustomEvent(r.getType(),"dragleave",e)),o&&r!==o&&(e.item=o,this.emitCustomEvent(t,"mouseenter",e),this.dragging&&this.emitCustomEvent(t,"dragenter",e)),this.preItem=o},t.prototype.emitCustomEvent=function(e,t,n){n.type=t,this.graph.emit(e+":"+t,n)},t.prototype.destroy=function(){var e=this,t=e.graph,n=e.canvasHandler,r=e.extendEvents;t.get("canvas").off("*",n),(0,b.each)(r,(function(e){e.remove()})),this.dragging=!1,this.preItem=null,this.extendEvents.length=0,this.canvasHandler=null,this.destroyed=!0},t}(Au);const Gh=Hh;class Wh{constructor(){this.nodes=[],this.edges=[],this.combos=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=()=>{}}layout(e){return this.init(e),this.execute(!0)}init(e){this.nodes=e.nodes||[],this.edges=e.edges||[],this.combos=e.combos||[]}execute(e){}executeWithWorker(){}getDefaultCfg(){return{}}updateCfg(e){e&&Object.assign(this,e)}getType(){return"base"}destroy(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0}}const Uh=e=>"string"==typeof e,Vh=/-(\w)/g,Xh=((e=>{const t=Object.create(null)})((e=>e.replace(Vh,((e,t)=>t?t.toUpperCase():"")))),Array.isArray),qh=e=>"number"==typeof e,Kh=e=>Number.isNaN(Number(e)),Jh=e=>null!==e&&"object"==typeof e,Zh=e=>{if(null===e)return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof Array){const t=[];return e.forEach((e=>{t.push(e)})),t.map((e=>Zh(e)))}if("object"==typeof e&&e!=={}){const t=Object.assign({},e);return Object.keys(t).forEach((e=>{t[e]=Zh(t[e])})),t}return e},$h=(e,t)=>{const n=e[t];return Jh(n)?n.cell:n},Qh=(e,t,n)=>{const r=[];for(let t=0;t<e;t++)r[t]=0;return n?(n.forEach((e=>{const n=$h(e,"source"),i=$h(e,"target");n&&(r[t[n]]+=1),i&&(r[t[i]]+=1)})),r):r},ef=e=>{const t=[],n=e.length;for(let r=0;r<n;r+=1){t[r]=[];for(let i=0;i<n;i+=1)r===i?t[r][i]=0:0!==e[r][i]&&e[r][i]?t[r][i]=e[r][i]:t[r][i]=1/0}for(let e=0;e<n;e+=1)for(let r=0;r<n;r+=1)for(let i=0;i<n;i+=1)t[r][i]>t[r][e]+t[e][i]&&(t[r][i]=t[r][e]+t[e][i]);return t},tf=(e,t)=>{const{nodes:n,edges:r}=e,i=[],o={};if(!n)throw new Error("invalid nodes data!");return n&&n.forEach(((e,t)=>{o[e.id]=t;i.push([])})),r&&r.forEach((e=>{const n=$h(e,"source"),r=$h(e,"target"),a=o[n],s=o[r];i[a][s]=1,t||(i[s][a]=1)})),i},nf=(e,t)=>{if(e&&e.children)for(let n=e.children.length-1;n>=0;n--)if(!nf(e.children[n],t))return;return!!t(e)},rf=(e,t)=>{"function"==typeof t&&nf(e,t)},of=e=>"function"==typeof e,af=new Map,sf=(e,t)=>{if(af.get(e)&&console.warn(`The layout with the name ${e} exists already, it will be overridden`),Jh(t)){class n extends Wh{constructor(e){super();const n=this,r={},i=n.getDefaultCfg();Object.assign(r,i,t,e),Object.keys(r).forEach((e=>{const t=r[e];n[e]=t}))}}af.set(e,n)}else af.set(e,t)};const lf=(e,t)=>{let n;return n=e?qh(e)?t=>e:e:e=>t||1,n};function uf(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,o,a,s,l,u,c,d,h,f=e._root,p={data:r},m=e._x0,g=e._y0,v=e._x1,y=e._y1;if(!f)return e._root=p,e;for(;f.length;)if((u=t>=(o=(m+v)/2))?m=o:v=o,(c=n>=(a=(g+y)/2))?g=a:y=a,i=f,!(f=f[d=c<<1|u]))return i[d]=p,e;if(s=+e._x.call(null,f.data),l=+e._y.call(null,f.data),t===s&&n===l)return p.next=f,i?i[d]=p:e._root=p,e;do{i=i?i[d]=new Array(4):e._root=new Array(4),(u=t>=(o=(m+v)/2))?m=o:v=o,(c=n>=(a=(g+y)/2))?g=a:y=a}while((d=c<<1|u)==(h=(l>=a)<<1|s>=o));return i[h]=f,i[d]=p,e}function cf(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function df(e){return e[0]}function hf(e){return e[1]}function ff(e,t,n){var r=new pf(null==t?df:t,null==n?hf:n,NaN,NaN,NaN,NaN);return null==e?r:r.addAll(e)}function pf(e,t,n,r,i,o){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function mf(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var gf=ff.prototype=pf.prototype;function vf(e){return function(){return e}}function yf(e){return 1e-6*(e()-.5)}gf.copy=function(){var e,t,n=new pf(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=mf(r),n;for(e=[{source:r,target:n._root=new Array(4)}];r=e.pop();)for(var i=0;i<4;++i)(t=r.source[i])&&(t.length?e.push({source:t,target:r.target[i]=new Array(4)}):r.target[i]=mf(t));return n},gf.add=function(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return uf(this.cover(t,n),t,n,e)},gf.addAll=function(e){var t,n,r,i,o=e.length,a=new Array(o),s=new Array(o),l=1/0,u=1/0,c=-1/0,d=-1/0;for(n=0;n<o;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(i=+this._y.call(null,t))||(a[n]=r,s[n]=i,r<l&&(l=r),r>c&&(c=r),i<u&&(u=i),i>d&&(d=i));if(l>c||u>d)return this;for(this.cover(l,u).cover(c,d),n=0;n<o;++n)uf(this,a[n],s[n],e[n]);return this},gf.cover=function(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,o=(r=Math.floor(t))+1;else{for(var a,s,l=i-n||1,u=this._root;n>e||e>=i||r>t||t>=o;)switch(s=(t<r)<<1|e<n,(a=new Array(4))[s]=u,u=a,l*=2,s){case 0:i=n+l,o=r+l;break;case 1:n=i-l,o=r+l;break;case 2:i=n+l,r=o-l;break;case 3:n=i-l,r=o-l}this._root&&this._root.length&&(this._root=u)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this},gf.data=function(){var e=[];return this.visit((function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)})),e},gf.extent=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},gf.find=function(e,t,n){var r,i,o,a,s,l,u,c=this._x0,d=this._y0,h=this._x1,f=this._y1,p=[],m=this._root;for(m&&p.push(new cf(m,c,d,h,f)),null==n?n=1/0:(c=e-n,d=t-n,h=e+n,f=t+n,n*=n);l=p.pop();)if(!(!(m=l.node)||(i=l.x0)>h||(o=l.y0)>f||(a=l.x1)<c||(s=l.y1)<d))if(m.length){var g=(i+a)/2,v=(o+s)/2;p.push(new cf(m[3],g,v,a,s),new cf(m[2],i,v,g,s),new cf(m[1],g,o,a,v),new cf(m[0],i,o,g,v)),(u=(t>=v)<<1|e>=g)&&(l=p[p.length-1],p[p.length-1]=p[p.length-1-u],p[p.length-1-u]=l)}else{var y=e-+this._x.call(null,m.data),b=t-+this._y.call(null,m.data),_=y*y+b*b;if(_<n){var w=Math.sqrt(n=_);c=e-w,d=t-w,h=e+w,f=t+w,r=m.data}}return r},gf.remove=function(e){if(isNaN(o=+this._x.call(null,e))||isNaN(a=+this._y.call(null,e)))return this;var t,n,r,i,o,a,s,l,u,c,d,h,f=this._root,p=this._x0,m=this._y0,g=this._x1,v=this._y1;if(!f)return this;if(f.length)for(;;){if((u=o>=(s=(p+g)/2))?p=s:g=s,(c=a>=(l=(m+v)/2))?m=l:v=l,t=f,!(f=f[d=c<<1|u]))return this;if(!f.length)break;(t[d+1&3]||t[d+2&3]||t[d+3&3])&&(n=t,h=d)}for(;f.data!==e;)if(r=f,!(f=f.next))return this;return(i=f.next)&&delete f.next,r?(i?r.next=i:delete r.next,this):t?(i?t[d]=i:delete t[d],(f=t[0]||t[1]||t[2]||t[3])&&f===(t[3]||t[2]||t[1]||t[0])&&!f.length&&(n?n[h]=f:this._root=f),this):(this._root=i,this)},gf.removeAll=function(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this},gf.root=function(){return this._root},gf.size=function(){var e=0;return this.visit((function(t){if(!t.length)do{++e}while(t=t.next)})),e},gf.visit=function(e){var t,n,r,i,o,a,s=[],l=this._root;for(l&&s.push(new cf(l,this._x0,this._y0,this._x1,this._y1));t=s.pop();)if(!e(l=t.node,r=t.x0,i=t.y0,o=t.x1,a=t.y1)&&l.length){var u=(r+o)/2,c=(i+a)/2;(n=l[3])&&s.push(new cf(n,u,c,o,a)),(n=l[2])&&s.push(new cf(n,r,c,u,a)),(n=l[1])&&s.push(new cf(n,u,i,o,c)),(n=l[0])&&s.push(new cf(n,r,i,u,c))}return this},gf.visitAfter=function(e){var t,n=[],r=[];for(this._root&&n.push(new cf(this._root,this._x0,this._y0,this._x1,this._y1));t=n.pop();){var i=t.node;if(i.length){var o,a=t.x0,s=t.y0,l=t.x1,u=t.y1,c=(a+l)/2,d=(s+u)/2;(o=i[0])&&n.push(new cf(o,a,s,c,d)),(o=i[1])&&n.push(new cf(o,c,s,l,d)),(o=i[2])&&n.push(new cf(o,a,d,c,u)),(o=i[3])&&n.push(new cf(o,c,d,l,u))}r.push(t)}for(;t=r.pop();)e(t.node,t.x0,t.y0,t.x1,t.y1);return this},gf.x=function(e){return arguments.length?(this._x=e,this):this._x},gf.y=function(e){return arguments.length?(this._y=e,this):this._y};var bf={value:()=>{}};function _f(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new wf(r)}function wf(e){this._=e}function xf(e,t){return e.trim().split(/^|\s+/).map((function(e){var n="",r=e.indexOf(".");if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}}))}function Mf(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}function Ef(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=bf,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}wf.prototype=_f.prototype={constructor:wf,on:function(e,t){var n,r=this._,i=xf(e+"",r),o=-1,a=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++o<a;)if(n=(e=i[o]).type)r[n]=Ef(r[n],e.name,t);else if(null==t)for(n in r)r[n]=Ef(r[n],e.name,null);return this}for(;++o<a;)if((n=(e=i[o]).type)&&(n=Mf(r[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new wf(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=0,n=(r=this._[e]).length;o<n;++o)r[o].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};const Sf=_f,kf=4294967296;function Tf(e){return e.x}function Lf(e){return e.y}var Cf=Math.PI*(3-Math.sqrt(5));function Df(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,a=.6,s=new Map,l=zi(d),u=Sf("tick","end"),c=function(){let e=1;return()=>(e=(1664525*e+1013904223)%kf)/kf}();function d(){h(),u.call("tick",t),n<r&&(l.stop(),u.call("end",t))}function h(r){var l,u,c=e.length;void 0===r&&(r=1);for(var d=0;d<r;++d)for(n+=(o-n)*i,s.forEach((function(e){e(n)})),l=0;l<c;++l)null==(u=e[l]).fx?u.x+=u.vx*=a:(u.x=u.fx,u.vx=0),null==u.fy?u.y+=u.vy*=a:(u.y=u.fy,u.vy=0);return t}function f(){for(var t,n=0,r=e.length;n<r;++n){if((t=e[n]).index=n,null!=t.fx&&(t.x=t.fx),null!=t.fy&&(t.y=t.fy),isNaN(t.x)||isNaN(t.y)){var i=10*Math.sqrt(.5+n),o=n*Cf;t.x=i*Math.cos(o),t.y=i*Math.sin(o)}(isNaN(t.vx)||isNaN(t.vy))&&(t.vx=t.vy=0)}}function p(t){return t.initialize&&t.initialize(e,c),t}return null==e&&(e=[]),f(),t={tick:h,restart:function(){return l.restart(d),t},stop:function(){return l.stop(),t},nodes:function(n){return arguments.length?(e=n,f(),s.forEach(p),t):e},alpha:function(e){return arguments.length?(n=+e,t):n},alphaMin:function(e){return arguments.length?(r=+e,t):r},alphaDecay:function(e){return arguments.length?(i=+e,t):+i},alphaTarget:function(e){return arguments.length?(o=+e,t):o},velocityDecay:function(e){return arguments.length?(a=1-e,t):1-a},randomSource:function(e){return arguments.length?(c=e,s.forEach(p),t):c},force:function(e,n){return arguments.length>1?(null==n?s.delete(e):s.set(e,p(n)),t):s.get(e)},find:function(t,n,r){var i,o,a,s,l,u=0,c=e.length;for(null==r?r=1/0:r*=r,u=0;u<c;++u)(a=(i=t-(s=e[u]).x)*i+(o=n-s.y)*o)<r&&(l=s,r=a);return l},on:function(e,n){return arguments.length>1?(u.on(e,n),t):u.on(e)}}}function Af(){var e,t,n,r,i,o=vf(-30),a=1,s=1/0,l=.81;function u(n){var i,o=e.length,a=ff(e,Tf,Lf).visitAfter(d);for(r=n,i=0;i<o;++i)t=e[i],a.visit(h)}function c(){if(e){var t,n,r=e.length;for(i=new Array(r),t=0;t<r;++t)n=e[t],i[n.index]=+o(n,t,e)}}function d(e){var t,n,r,o,a,s=0,l=0;if(e.length){for(r=o=a=0;a<4;++a)(t=e[a])&&(n=Math.abs(t.value))&&(s+=t.value,l+=n,r+=n*t.x,o+=n*t.y);e.x=r/l,e.y=o/l}else{(t=e).x=t.data.x,t.y=t.data.y;do{s+=i[t.data.index]}while(t=t.next)}e.value=s}function h(e,o,u,c){if(!e.value)return!0;var d=e.x-t.x,h=e.y-t.y,f=c-o,p=d*d+h*h;if(f*f/l<p)return p<s&&(0===d&&(p+=(d=yf(n))*d),0===h&&(p+=(h=yf(n))*h),p<a&&(p=Math.sqrt(a*p)),t.vx+=d*e.value*r/p,t.vy+=h*e.value*r/p),!0;if(!(e.length||p>=s)){(e.data!==t||e.next)&&(0===d&&(p+=(d=yf(n))*d),0===h&&(p+=(h=yf(n))*h),p<a&&(p=Math.sqrt(a*p)));do{e.data!==t&&(f=i[e.data.index]*r/p,t.vx+=d*f,t.vy+=h*f)}while(e=e.next)}}return u.initialize=function(t,r){e=t,n=r,c()},u.strength=function(e){return arguments.length?(o="function"==typeof e?e:vf(+e),c(),u):o},u.distanceMin=function(e){return arguments.length?(a=e*e,u):Math.sqrt(a)},u.distanceMax=function(e){return arguments.length?(s=e*e,u):Math.sqrt(s)},u.theta=function(e){return arguments.length?(l=e*e,u):Math.sqrt(l)},u}function Pf(e){return e.index}function Of(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function If(e){var t,n,r,i,o,a,s=Pf,l=function(e){return 1/Math.min(i[e.source.index],i[e.target.index])},u=vf(30),c=1;function d(r){for(var i=0,s=e.length;i<c;++i)for(var l,u,d,h,f,p,m,g=0;g<s;++g)u=(l=e[g]).source,h=(d=l.target).x+d.vx-u.x-u.vx||yf(a),f=d.y+d.vy-u.y-u.vy||yf(a),h*=p=((p=Math.sqrt(h*h+f*f))-n[g])/p*r*t[g],f*=p,d.vx-=h*(m=o[g]),d.vy-=f*m,u.vx+=h*(m=1-m),u.vy+=f*m}function h(){if(r){var a,l,u=r.length,c=e.length,d=new Map(r.map(((e,t)=>[s(e,t,r),e])));for(a=0,i=new Array(u);a<c;++a)(l=e[a]).index=a,"object"!=typeof l.source&&(l.source=Of(d,l.source)),"object"!=typeof l.target&&(l.target=Of(d,l.target)),i[l.source.index]=(i[l.source.index]||0)+1,i[l.target.index]=(i[l.target.index]||0)+1;for(a=0,o=new Array(c);a<c;++a)l=e[a],o[a]=i[l.source.index]/(i[l.source.index]+i[l.target.index]);t=new Array(c),f(),n=new Array(c),p()}}function f(){if(r)for(var n=0,i=e.length;n<i;++n)t[n]=+l(e[n],n,e)}function p(){if(r)for(var t=0,i=e.length;t<i;++t)n[t]=+u(e[t],t,e)}return null==e&&(e=[]),d.initialize=function(e,t){r=e,a=t,h()},d.links=function(t){return arguments.length?(e=t,h(),d):e},d.id=function(e){return arguments.length?(s=e,d):s},d.iterations=function(e){return arguments.length?(c=+e,d):c},d.strength=function(e){return arguments.length?(l="function"==typeof e?e:vf(+e),f(),d):l},d.distance=function(e){return arguments.length?(u="function"==typeof e?e:vf(+e),p(),d):u},d}function Rf(e){return e.x+e.vx}function Nf(e){return e.y+e.vy}function Yf(e){var t,n,r,i=1,o=1;function a(){for(var e,a,l,u,c,d,h,f=t.length,p=0;p<o;++p)for(a=ff(t,Rf,Nf).visitAfter(s),e=0;e<f;++e)l=t[e],d=n[l.index],h=d*d,u=l.x+l.vx,c=l.y+l.vy,a.visit(m);function m(e,t,n,o,a){var s=e.data,f=e.r,p=d+f;if(!s)return t>u+p||o<u-p||n>c+p||a<c-p;if(s.index>l.index){var m=u-s.x-s.vx,g=c-s.y-s.vy,v=m*m+g*g;v<p*p&&(0===m&&(v+=(m=yf(r))*m),0===g&&(v+=(g=yf(r))*g),v=(p-(v=Math.sqrt(v)))/v*i,l.vx+=(m*=v)*(p=(f*=f)/(h+f)),l.vy+=(g*=v)*p,s.vx-=m*(p=1-p),s.vy-=g*p)}}}function s(e){if(e.data)return e.r=n[e.data.index];for(var t=e.r=0;t<4;++t)e[t]&&e[t].r>e.r&&(e.r=e[t].r)}function l(){if(t){var r,i,o=t.length;for(n=new Array(o),r=0;r<o;++r)i=t[r],n[i.index]=+e(i,r,t)}}return"function"!=typeof e&&(e=vf(null==e?1:+e)),a.initialize=function(e,n){t=e,r=n,l()},a.iterations=function(e){return arguments.length?(o=+e,a):o},a.strength=function(e){return arguments.length?(i=+e,a):i},a.radius=function(t){return arguments.length?(e="function"==typeof t?t:vf(+t),l(),a):e},a}function jf(){function e(e){return()=>e}let t,n=e=>e.cluster,r=e(1),i=e(-1),o=e(100),a=e(.1),s=[0,0],l=[],u={},c=[],d=100,h=100,f={none:{x:0,y:0}},p=[],m="force",g=!0,v=.1;function y(e){if(!g)return y;t.tick(),_();for(let t,r=0,i=l.length,o=e*v;r<i;++r)t=l[r],t.vx+=(f[n(t)].x-t.x)*o,t.vy+=(f[n(t)].y-t.y)*o}function b(){l&&function(){if(!l||!l.length)return;if(void 0===n(l[0]))throw Error("Couldnt find the grouping attribute for the nodes. Make sure to set it up with forceInABox.groupBy('clusterAttr') before calling .links()");const e=function(){const e=[],t=[],i={};let o=[],a={},s=[];return a=function(e){const t={};return e.forEach((e=>{const r=n(e);t[r]||(t[r]={count:0,sumforceNodeSize:0})})),e.forEach((e=>{const i=n(e),o=r(e),a=t[i];a.count=a.count+1,a.sumforceNodeSize=a.sumforceNodeSize+Math.PI*(o*o)*1.3,t[i]=a})),t}(l),s=function(e){const t={},r=[];e.forEach((e=>{const r=function(e){const t=$h(e,"source"),r=$h(e,"target"),i=n(u[t]),o=n(u[r]);return i<=o?`${i}~${o}`:`${o}~${i}`}(e);let i=0;void 0!==t[r]&&(i=t[r]),i+=1,t[r]=i}));return Object.entries(t).forEach((([e,t])=>{const n=e.split("~")[0],i=e.split("~")[1];void 0!==n&&void 0!==i&&r.push({source:n,target:i,count:t})})),r}(c),o=Object.keys(a),o.forEach(((t,n)=>{const r=a[t];e.push({id:t,size:r.count,r:Math.sqrt(r.sumforceNodeSize/Math.PI)}),i[t]=n})),s.forEach((e=>{const n=$h(e,"source"),r=$h(e,"target"),o=i[n],a=i[r];void 0!==o&&void 0!==a&&t.push({source:o,target:a,count:e.count})})),{nodes:e,links:t}}();t=Df(e.nodes).force("x",function(e){var t,n,r,i=vf(.1);function o(e){for(var i,o=0,a=t.length;o<a;++o)(i=t[o]).vx+=(r[o]-i.x)*n[o]*e}function a(){if(t){var o,a=t.length;for(n=new Array(a),r=new Array(a),o=0;o<a;++o)n[o]=isNaN(r[o]=+e(t[o],o,t))?0:+i(t[o],o,t)}}return"function"!=typeof e&&(e=vf(null==e?0:+e)),o.initialize=function(e){t=e,a()},o.strength=function(e){return arguments.length?(i="function"==typeof e?e:vf(+e),a(),o):i},o.x=function(t){return arguments.length?(e="function"==typeof t?t:vf(+t),a(),o):e},o}(d).strength(.1)).force("y",function(e){var t,n,r,i=vf(.1);function o(e){for(var i,o=0,a=t.length;o<a;++o)(i=t[o]).vy+=(r[o]-i.y)*n[o]*e}function a(){if(t){var o,a=t.length;for(n=new Array(a),r=new Array(a),o=0;o<a;++o)n[o]=isNaN(r[o]=+e(t[o],o,t))?0:+i(t[o],o,t)}}return"function"!=typeof e&&(e=vf(null==e?0:+e)),o.initialize=function(e){t=e,a()},o.strength=function(e){return arguments.length?(i="function"==typeof e?e:vf(+e),a(),o):i},o.y=function(t){return arguments.length?(e="function"==typeof t?t:vf(+t),a(),o):e},o}(h).strength(.1)).force("collide",Yf((e=>e.r)).iterations(4)).force("charge",Af().strength(i)).force("links",If(e.nodes.length?e.links:[]).distance(o).strength(a)),p=t.nodes(),_()}()}function _(){return f={none:{x:0,y:0}},p.forEach((e=>{f[e.id]={x:e.x-s[0],y:e.y-s[1]}})),f}function w(e){u={},e.forEach((e=>{u[e.id]=e}))}return y.initialize=e=>{l=e,b()},y.template=function(e){return arguments.length?(m=e,b(),y):m},y.groupBy=function(e){return arguments.length?"string"==typeof e?(n=t=>t[e],y):(n=e,y):n},y.enableGrouping=function(e){return arguments.length?(g=e,y):g},y.strength=function(e){return arguments.length?(v=e,y):v},y.centerX=function(e){return arguments.length?(d=e,y):d},y.centerY=function(e){return arguments.length?(h=e,y):h},y.nodes=function(e){return arguments.length?(w(e||[]),l=e||[],y):l},y.links=function(e){return arguments.length?(c=e||[],b(),y):c},y.forceNodeSize=function(t){return arguments.length?(r="function"==typeof t?t:e(+t),b(),y):r},y.nodeSize=y.forceNodeSize,y.forceCharge=function(t){return arguments.length?(i="function"==typeof t?t:e(+t),b(),y):i},y.forceLinkDistance=function(t){return arguments.length?(o="function"==typeof t?t:e(+t),b(),y):o},y.forceLinkStrength=function(t){return arguments.length?(a="function"==typeof t?t:e(+t),b(),y):a},y.offset=function(e){return arguments.length?(s=e,y):s},y.getFocis=_,y}const Ff="LAYOUT_TICK",Bf="GPU_LAYOUT_END";function zf(){return"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope}function Hf(e,t){const n=e.degree,r=t.degree;return n<r?-1:n>r?1:0}var Gf=o(70681),Wf=o.n(Gf);function Uf(e,t,n){let r;return r=e||(qh(t)?()=>t:()=>n),r}const Vf=Object.prototype.toString;function Xf(e){return Vf.call(e).endsWith("Array]")}const qf=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Xf(e))throw new TypeError("input must be an array");if(0===e.length)throw new TypeError("input must not be empty");var n=t.fromIndex,r=void 0===n?0:n,i=t.toIndex,o=void 0===i?e.length:i;if(r<0||r>=e.length||!Number.isInteger(r))throw new Error("fromIndex must be a positive integer smaller than length");if(o<=r||o>e.length||!Number.isInteger(o))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var a=e[r],s=r+1;s<o;s++)e[s]>a&&(a=e[s]);return a};const Kf=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Xf(e))throw new TypeError("input must be an array");if(0===e.length)throw new TypeError("input must not be empty");var n=t.fromIndex,r=void 0===n?0:n,i=t.toIndex,o=void 0===i?e.length:i;if(r<0||r>=e.length||!Number.isInteger(r))throw new Error("fromIndex must be a positive integer smaller than length");if(o<=r||o>e.length||!Number.isInteger(o))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var a=e[r],s=r+1;s<o;s++)e[s]<a&&(a=e[s]);return a};function Jf(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Xf(e))throw new TypeError("input must be an array");if(0===e.length)throw new TypeError("input must not be empty");if(void 0!==n.output){if(!Xf(n.output))throw new TypeError("output option must be an array if specified");t=n.output}else t=new Array(e.length);var r=Kf(e),i=qf(e);if(r===i)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var o=n.min,a=void 0===o?n.autoMinMax?r:0:o,s=n.max,l=void 0===s?n.autoMinMax?i:1:s;if(a>=l)throw new RangeError("min option must be smaller than max option");for(var u=(l-a)/(i-r),c=0;c<e.length;c++)t[c]=(e[c]-r)*u+a;return t}const Zf=" ".repeat(2),$f=" ".repeat(4);function Qf(e,t={}){const{maxRows:n=15,maxColumns:r=10,maxNumSize:i=8}=t;return`${e.constructor.name} {\n${Zf}[\n${$f}${function(e,t,n,r){const{rows:i,columns:o}=e,a=Math.min(i,t),s=Math.min(o,n),l=[];for(let t=0;t<a;t++){let n=[];for(let i=0;i<s;i++)n.push(ep(e.get(t,i),r));l.push(`${n.join(" ")}`)}s!==o&&(l[l.length-1]+=` ... ${o-n} more columns`);a!==i&&l.push(`... ${i-t} more rows`);return l.join(`\n${$f}`)}(e,n,r,i)}\n${Zf}]\n${Zf}rows: ${e.rows}\n${Zf}columns: ${e.columns}\n}`}function ep(e,t){const n=String(e);if(n.length<=t)return n.padEnd(t," ");const r=e.toPrecision(t-2);if(r.length<=t)return r;const i=e.toExponential(t-2),o=i.indexOf("e"),a=i.slice(o);return i.slice(0,t-a.length)+a}function tp(e,t,n){let r=n?e.rows:e.rows-1;if(t<0||t>r)throw new RangeError("Row index out of range")}function np(e,t,n){let r=n?e.columns:e.columns-1;if(t<0||t>r)throw new RangeError("Column index out of range")}function rp(e,t){if(t.to1DArray&&(t=t.to1DArray()),t.length!==e.columns)throw new RangeError("vector size must be the same as the number of columns");return t}function ip(e,t){if(t.to1DArray&&(t=t.to1DArray()),t.length!==e.rows)throw new RangeError("vector size must be the same as the number of rows");return t}function op(e,t){if("object"!=typeof t)throw new TypeError("unexpected type for row indices");if(t.some((t=>t<0||t>=e.rows)))throw new RangeError("row indices are out of range");return Array.isArray(t)||(t=Array.from(t)),t}function ap(e,t){if("object"!=typeof t)throw new TypeError("unexpected type for column indices");let n=t.some((t=>t<0||t>=e.columns));if(n)throw new RangeError("column indices are out of range");return Array.isArray(t)||(t=Array.from(t)),t}function sp(e,t,n,r,i){if(5!==arguments.length)throw new RangeError("expected 4 arguments");if(up("startRow",t),up("endRow",n),up("startColumn",r),up("endColumn",i),t>n||r>i||t<0||t>=e.rows||n<0||n>=e.rows||r<0||r>=e.columns||i<0||i>=e.columns)throw new RangeError("Submatrix indices are out of range")}function lp(e,t=0){let n=[];for(let r=0;r<e;r++)n.push(t);return n}function up(e,t){if("number"!=typeof t)throw new TypeError(`${e} must be a number`)}function cp(e){if(e.isEmpty())throw new Error("Empty matrix has no elements to index")}class dp{static from1DArray(e,t,n){if(e*t!==n.length)throw new RangeError("data length does not match given dimensions");let r=new fp(e,t);for(let i=0;i<e;i++)for(let e=0;e<t;e++)r.set(i,e,n[i*t+e]);return r}static rowVector(e){let t=new fp(1,e.length);for(let n=0;n<e.length;n++)t.set(0,n,e[n]);return t}static columnVector(e){let t=new fp(e.length,1);for(let n=0;n<e.length;n++)t.set(n,0,e[n]);return t}static zeros(e,t){return new fp(e,t)}static ones(e,t){return new fp(e,t).fill(1)}static rand(e,t,n={}){if("object"!=typeof n)throw new TypeError("options must be an object");const{random:r=Math.random}=n;let i=new fp(e,t);for(let n=0;n<e;n++)for(let e=0;e<t;e++)i.set(n,e,r());return i}static randInt(e,t,n={}){if("object"!=typeof n)throw new TypeError("options must be an object");const{min:r=0,max:i=1e3,random:o=Math.random}=n;if(!Number.isInteger(r))throw new TypeError("min must be an integer");if(!Number.isInteger(i))throw new TypeError("max must be an integer");if(r>=i)throw new RangeError("min must be smaller than max");let a=i-r,s=new fp(e,t);for(let n=0;n<e;n++)for(let e=0;e<t;e++){let t=r+Math.round(o()*a);s.set(n,e,t)}return s}static eye(e,t,n){void 0===t&&(t=e),void 0===n&&(n=1);let r=Math.min(e,t),i=this.zeros(e,t);for(let e=0;e<r;e++)i.set(e,e,n);return i}static diag(e,t,n){let r=e.length;void 0===t&&(t=r),void 0===n&&(n=t);let i=Math.min(r,t,n),o=this.zeros(t,n);for(let t=0;t<i;t++)o.set(t,t,e[t]);return o}static min(e,t){e=this.checkMatrix(e),t=this.checkMatrix(t);let n=e.rows,r=e.columns,i=new fp(n,r);for(let o=0;o<n;o++)for(let n=0;n<r;n++)i.set(o,n,Math.min(e.get(o,n),t.get(o,n)));return i}static max(e,t){e=this.checkMatrix(e),t=this.checkMatrix(t);let n=e.rows,r=e.columns,i=new this(n,r);for(let o=0;o<n;o++)for(let n=0;n<r;n++)i.set(o,n,Math.max(e.get(o,n),t.get(o,n)));return i}static checkMatrix(e){return dp.isMatrix(e)?e:new fp(e)}static isMatrix(e){return null!=e&&"Matrix"===e.klass}get size(){return this.rows*this.columns}apply(e){if("function"!=typeof e)throw new TypeError("callback must be a function");for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)e.call(this,t,n);return this}to1DArray(){let e=[];for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)e.push(this.get(t,n));return e}to2DArray(){let e=[];for(let t=0;t<this.rows;t++){e.push([]);for(let n=0;n<this.columns;n++)e[t].push(this.get(t,n))}return e}toJSON(){return this.to2DArray()}isRowVector(){return 1===this.rows}isColumnVector(){return 1===this.columns}isVector(){return 1===this.rows||1===this.columns}isSquare(){return this.rows===this.columns}isEmpty(){return 0===this.rows||0===this.columns}isSymmetric(){if(this.isSquare()){for(let e=0;e<this.rows;e++)for(let t=0;t<=e;t++)if(this.get(e,t)!==this.get(t,e))return!1;return!0}return!1}isEchelonForm(){let e=0,t=0,n=-1,r=!0,i=!1;for(;e<this.rows&&r;){for(t=0,i=!1;t<this.columns&&!1===i;)0===this.get(e,t)?t++:1===this.get(e,t)&&t>n?(i=!0,n=t):(r=!1,i=!0);e++}return r}isReducedEchelonForm(){let e=0,t=0,n=-1,r=!0,i=!1;for(;e<this.rows&&r;){for(t=0,i=!1;t<this.columns&&!1===i;)0===this.get(e,t)?t++:1===this.get(e,t)&&t>n?(i=!0,n=t):(r=!1,i=!0);for(let n=t+1;n<this.rows;n++)0!==this.get(e,n)&&(r=!1);e++}return r}echelonForm(){let e=this.clone(),t=0,n=0;for(;t<e.rows&&n<e.columns;){let r=t;for(let i=t;i<e.rows;i++)e.get(i,n)>e.get(r,n)&&(r=i);if(0===e.get(r,n))n++;else{e.swapRows(t,r);let i=e.get(t,n);for(let r=n;r<e.columns;r++)e.set(t,r,e.get(t,r)/i);for(let r=t+1;r<e.rows;r++){let i=e.get(r,n)/e.get(t,n);e.set(r,n,0);for(let o=n+1;o<e.columns;o++)e.set(r,o,e.get(r,o)-e.get(t,o)*i)}t++,n++}}return e}reducedEchelonForm(){let e=this.echelonForm(),t=e.columns,n=e.rows,r=n-1;for(;r>=0;)if(0===e.maxRow(r))r--;else{let i=0,o=!1;for(;i<n&&!1===o;)1===e.get(r,i)?o=!0:i++;for(let n=0;n<r;n++){let o=e.get(n,i);for(let a=i;a<t;a++){let t=e.get(n,a)-o*e.get(r,a);e.set(n,a,t)}}r--}return e}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(e={}){if("object"!=typeof e)throw new TypeError("options must be an object");const{rows:t=1,columns:n=1}=e;if(!Number.isInteger(t)||t<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(n)||n<=0)throw new TypeError("columns must be a positive integer");let r=new fp(this.rows*t,this.columns*n);for(let e=0;e<t;e++)for(let t=0;t<n;t++)r.setSubMatrix(this,this.rows*e,this.columns*t);return r}fill(e){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,e);return this}neg(){return this.mulS(-1)}getRow(e){tp(this,e);let t=[];for(let n=0;n<this.columns;n++)t.push(this.get(e,n));return t}getRowVector(e){return fp.rowVector(this.getRow(e))}setRow(e,t){tp(this,e),t=rp(this,t);for(let n=0;n<this.columns;n++)this.set(e,n,t[n]);return this}swapRows(e,t){tp(this,e),tp(this,t);for(let n=0;n<this.columns;n++){let r=this.get(e,n);this.set(e,n,this.get(t,n)),this.set(t,n,r)}return this}getColumn(e){np(this,e);let t=[];for(let n=0;n<this.rows;n++)t.push(this.get(n,e));return t}getColumnVector(e){return fp.columnVector(this.getColumn(e))}setColumn(e,t){np(this,e),t=ip(this,t);for(let n=0;n<this.rows;n++)this.set(n,e,t[n]);return this}swapColumns(e,t){np(this,e),np(this,t);for(let n=0;n<this.rows;n++){let r=this.get(n,e);this.set(n,e,this.get(n,t)),this.set(n,t,r)}return this}addRowVector(e){e=rp(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)+e[n]);return this}subRowVector(e){e=rp(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)-e[n]);return this}mulRowVector(e){e=rp(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e[n]);return this}divRowVector(e){e=rp(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)/e[n]);return this}addColumnVector(e){e=ip(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)+e[t]);return this}subColumnVector(e){e=ip(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)-e[t]);return this}mulColumnVector(e){e=ip(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e[t]);return this}divColumnVector(e){e=ip(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)/e[t]);return this}mulRow(e,t){tp(this,e);for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t);return this}mulColumn(e,t){np(this,e);for(let n=0;n<this.rows;n++)this.set(n,e,this.get(n,e)*t);return this}max(){if(this.isEmpty())return NaN;let e=this.get(0,0);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.get(t,n)>e&&(e=this.get(t,n));return e}maxIndex(){cp(this);let e=this.get(0,0),t=[0,0];for(let n=0;n<this.rows;n++)for(let r=0;r<this.columns;r++)this.get(n,r)>e&&(e=this.get(n,r),t[0]=n,t[1]=r);return t}min(){if(this.isEmpty())return NaN;let e=this.get(0,0);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.get(t,n)<e&&(e=this.get(t,n));return e}minIndex(){cp(this);let e=this.get(0,0),t=[0,0];for(let n=0;n<this.rows;n++)for(let r=0;r<this.columns;r++)this.get(n,r)<e&&(e=this.get(n,r),t[0]=n,t[1]=r);return t}maxRow(e){if(tp(this,e),this.isEmpty())return NaN;let t=this.get(e,0);for(let n=1;n<this.columns;n++)this.get(e,n)>t&&(t=this.get(e,n));return t}maxRowIndex(e){tp(this,e),cp(this);let t=this.get(e,0),n=[e,0];for(let r=1;r<this.columns;r++)this.get(e,r)>t&&(t=this.get(e,r),n[1]=r);return n}minRow(e){if(tp(this,e),this.isEmpty())return NaN;let t=this.get(e,0);for(let n=1;n<this.columns;n++)this.get(e,n)<t&&(t=this.get(e,n));return t}minRowIndex(e){tp(this,e),cp(this);let t=this.get(e,0),n=[e,0];for(let r=1;r<this.columns;r++)this.get(e,r)<t&&(t=this.get(e,r),n[1]=r);return n}maxColumn(e){if(np(this,e),this.isEmpty())return NaN;let t=this.get(0,e);for(let n=1;n<this.rows;n++)this.get(n,e)>t&&(t=this.get(n,e));return t}maxColumnIndex(e){np(this,e),cp(this);let t=this.get(0,e),n=[0,e];for(let r=1;r<this.rows;r++)this.get(r,e)>t&&(t=this.get(r,e),n[0]=r);return n}minColumn(e){if(np(this,e),this.isEmpty())return NaN;let t=this.get(0,e);for(let n=1;n<this.rows;n++)this.get(n,e)<t&&(t=this.get(n,e));return t}minColumnIndex(e){np(this,e),cp(this);let t=this.get(0,e),n=[0,e];for(let r=1;r<this.rows;r++)this.get(r,e)<t&&(t=this.get(r,e),n[0]=r);return n}diag(){let e=Math.min(this.rows,this.columns),t=[];for(let n=0;n<e;n++)t.push(this.get(n,n));return t}norm(e="frobenius"){let t=0;if("max"===e)return this.max();if("frobenius"===e){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)t+=this.get(e,n)*this.get(e,n);return Math.sqrt(t)}throw new RangeError(`unknown norm type: ${e}`)}cumulativeSum(){let e=0;for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)e+=this.get(t,n),this.set(t,n,e);return this}dot(e){dp.isMatrix(e)&&(e=e.to1DArray());let t=this.to1DArray();if(t.length!==e.length)throw new RangeError("vectors do not have the same size");let n=0;for(let r=0;r<t.length;r++)n+=t[r]*e[r];return n}mmul(e){e=fp.checkMatrix(e);let t=this.rows,n=this.columns,r=e.columns,i=new fp(t,r),o=new Float64Array(n);for(let a=0;a<r;a++){for(let t=0;t<n;t++)o[t]=e.get(t,a);for(let e=0;e<t;e++){let t=0;for(let r=0;r<n;r++)t+=this.get(e,r)*o[r];i.set(e,a,t)}}return i}strassen2x2(e){e=fp.checkMatrix(e);let t=new fp(2,2);const n=this.get(0,0),r=e.get(0,0),i=this.get(0,1),o=e.get(0,1),a=this.get(1,0),s=e.get(1,0),l=this.get(1,1),u=e.get(1,1),c=(n+l)*(r+u),d=(a+l)*r,h=n*(o-u),f=l*(s-r),p=(n+i)*u,m=c+f-p+(i-l)*(s+u),g=h+p,v=d+f,y=c-d+h+(a-n)*(r+o);return t.set(0,0,m),t.set(0,1,g),t.set(1,0,v),t.set(1,1,y),t}strassen3x3(e){e=fp.checkMatrix(e);let t=new fp(3,3);const n=this.get(0,0),r=this.get(0,1),i=this.get(0,2),o=this.get(1,0),a=this.get(1,1),s=this.get(1,2),l=this.get(2,0),u=this.get(2,1),c=this.get(2,2),d=e.get(0,0),h=e.get(0,1),f=e.get(0,2),p=e.get(1,0),m=e.get(1,1),g=e.get(1,2),v=e.get(2,0),y=e.get(2,1),b=e.get(2,2),_=(n-o)*(-h+m),w=(-n+o+a)*(d-h+m),x=(o+a)*(-d+h),M=n*d,E=(-n+l+u)*(d-f+g),S=(-n+l)*(f-g),k=(l+u)*(-d+f),T=(-i+u+c)*(m+v-y),L=(i-c)*(m-y),C=i*v,D=(u+c)*(-v+y),A=(-i+a+s)*(g+v-b),P=(i-s)*(g-b),O=(a+s)*(-v+b),I=M+C+r*p,R=(n+r+i-o-a-u-c)*m+w+x+M+T+C+D,N=M+E+k+(n+r+i-a-s-l-u)*g+C+A+O,Y=_+a*(-d+h+p-m-g-v+b)+w+M+C+A+P,j=_+w+x+M+s*y,F=C+A+P+O+o*f,B=M+E+S+u*(-d+f+p-m-g-v+y)+T+L+C,z=T+L+C+D+l*h,H=M+E+S+k+c*b;return t.set(0,0,I),t.set(0,1,R),t.set(0,2,N),t.set(1,0,Y),t.set(1,1,j),t.set(1,2,F),t.set(2,0,B),t.set(2,1,z),t.set(2,2,H),t}mmulStrassen(e){e=fp.checkMatrix(e);let t=this.clone(),n=t.rows,r=t.columns,i=e.rows,o=e.columns;function a(e,t,n){let r=e.rows,i=e.columns;if(r===t&&i===n)return e;{let r=dp.zeros(t,n);return r=r.setSubMatrix(e,0,0),r}}r!==i&&console.warn(`Multiplying ${n} x ${r} and ${i} x ${o} matrix: dimensions do not match.`);let s=Math.max(n,i),l=Math.max(r,o);return t=a(t,s,l),function e(t,n,r,i){if(r<=512||i<=512)return t.mmul(n);r%2==1&&i%2==1?(t=a(t,r+1,i+1),n=a(n,r+1,i+1)):r%2==1?(t=a(t,r+1,i),n=a(n,r+1,i)):i%2==1&&(t=a(t,r,i+1),n=a(n,r,i+1));let o=parseInt(t.rows/2,10),s=parseInt(t.columns/2,10),l=t.subMatrix(0,o-1,0,s-1),u=n.subMatrix(0,o-1,0,s-1),c=t.subMatrix(0,o-1,s,t.columns-1),d=n.subMatrix(0,o-1,s,n.columns-1),h=t.subMatrix(o,t.rows-1,0,s-1),f=n.subMatrix(o,n.rows-1,0,s-1),p=t.subMatrix(o,t.rows-1,s,t.columns-1),m=n.subMatrix(o,n.rows-1,s,n.columns-1),g=e(dp.add(l,p),dp.add(u,m),o,s),v=e(dp.add(h,p),u,o,s),y=e(l,dp.sub(d,m),o,s),b=e(p,dp.sub(f,u),o,s),_=e(dp.add(l,c),m,o,s),w=e(dp.sub(h,l),dp.add(u,d),o,s),x=e(dp.sub(c,p),dp.add(f,m),o,s),M=dp.add(g,b);M.sub(_),M.add(x);let E=dp.add(y,_),S=dp.add(v,b),k=dp.sub(g,v);k.add(y),k.add(w);let T=dp.zeros(2*M.rows,2*M.columns);return T=T.setSubMatrix(M,0,0),T=T.setSubMatrix(E,M.rows,0),T=T.setSubMatrix(S,0,M.columns),T=T.setSubMatrix(k,M.rows,M.columns),T.subMatrix(0,r-1,0,i-1)}(t,e=a(e,s,l),s,l)}scaleRows(e={}){if("object"!=typeof e)throw new TypeError("options must be an object");const{min:t=0,max:n=1}=e;if(!Number.isFinite(t))throw new TypeError("min must be a number");if(!Number.isFinite(n))throw new TypeError("max must be a number");if(t>=n)throw new RangeError("min must be smaller than max");let r=new fp(this.rows,this.columns);for(let e=0;e<this.rows;e++){const i=this.getRow(e);i.length>0&&Jf(i,{min:t,max:n,output:i}),r.setRow(e,i)}return r}scaleColumns(e={}){if("object"!=typeof e)throw new TypeError("options must be an object");const{min:t=0,max:n=1}=e;if(!Number.isFinite(t))throw new TypeError("min must be a number");if(!Number.isFinite(n))throw new TypeError("max must be a number");if(t>=n)throw new RangeError("min must be smaller than max");let r=new fp(this.rows,this.columns);for(let e=0;e<this.columns;e++){const i=this.getColumn(e);i.length&&Jf(i,{min:t,max:n,output:i}),r.setColumn(e,i)}return r}flipRows(){const e=Math.ceil(this.columns/2);for(let t=0;t<this.rows;t++)for(let n=0;n<e;n++){let e=this.get(t,n),r=this.get(t,this.columns-1-n);this.set(t,n,r),this.set(t,this.columns-1-n,e)}return this}flipColumns(){const e=Math.ceil(this.rows/2);for(let t=0;t<this.columns;t++)for(let n=0;n<e;n++){let e=this.get(n,t),r=this.get(this.rows-1-n,t);this.set(n,t,r),this.set(this.rows-1-n,t,e)}return this}kroneckerProduct(e){e=fp.checkMatrix(e);let t=this.rows,n=this.columns,r=e.rows,i=e.columns,o=new fp(t*r,n*i);for(let a=0;a<t;a++)for(let t=0;t<n;t++)for(let n=0;n<r;n++)for(let s=0;s<i;s++)o.set(r*a+n,i*t+s,this.get(a,t)*e.get(n,s));return o}kroneckerSum(e){if(e=fp.checkMatrix(e),!this.isSquare()||!e.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");let t=this.rows,n=e.rows,r=this.kroneckerProduct(fp.eye(n,n)),i=fp.eye(t,t).kroneckerProduct(e);return r.add(i)}transpose(){let e=new fp(this.columns,this.rows);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)e.set(n,t,this.get(t,n));return e}sortRows(e=hp){for(let t=0;t<this.rows;t++)this.setRow(t,this.getRow(t).sort(e));return this}sortColumns(e=hp){for(let t=0;t<this.columns;t++)this.setColumn(t,this.getColumn(t).sort(e));return this}subMatrix(e,t,n,r){sp(this,e,t,n,r);let i=new fp(t-e+1,r-n+1);for(let o=e;o<=t;o++)for(let t=n;t<=r;t++)i.set(o-e,t-n,this.get(o,t));return i}subMatrixRow(e,t,n){if(void 0===t&&(t=0),void 0===n&&(n=this.columns-1),t>n||t<0||t>=this.columns||n<0||n>=this.columns)throw new RangeError("Argument out of range");let r=new fp(e.length,n-t+1);for(let i=0;i<e.length;i++)for(let o=t;o<=n;o++){if(e[i]<0||e[i]>=this.rows)throw new RangeError(`Row index out of range: ${e[i]}`);r.set(i,o-t,this.get(e[i],o))}return r}subMatrixColumn(e,t,n){if(void 0===t&&(t=0),void 0===n&&(n=this.rows-1),t>n||t<0||t>=this.rows||n<0||n>=this.rows)throw new RangeError("Argument out of range");let r=new fp(n-t+1,e.length);for(let i=0;i<e.length;i++)for(let o=t;o<=n;o++){if(e[i]<0||e[i]>=this.columns)throw new RangeError(`Column index out of range: ${e[i]}`);r.set(o-t,i,this.get(o,e[i]))}return r}setSubMatrix(e,t,n){if((e=fp.checkMatrix(e)).isEmpty())return this;sp(this,t,t+e.rows-1,n,n+e.columns-1);for(let r=0;r<e.rows;r++)for(let i=0;i<e.columns;i++)this.set(t+r,n+i,e.get(r,i));return this}selection(e,t){let n=function(e,t,n){return{row:op(e,t),column:ap(e,n)}}(this,e,t),r=new fp(e.length,t.length);for(let e=0;e<n.row.length;e++){let t=n.row[e];for(let i=0;i<n.column.length;i++){let o=n.column[i];r.set(e,i,this.get(t,o))}}return r}trace(){let e=Math.min(this.rows,this.columns),t=0;for(let n=0;n<e;n++)t+=this.get(n,n);return t}clone(){let e=new fp(this.rows,this.columns);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)e.set(t,n,this.get(t,n));return e}sum(e){switch(e){case"row":return function(e){let t=lp(e.rows);for(let n=0;n<e.rows;++n)for(let r=0;r<e.columns;++r)t[n]+=e.get(n,r);return t}(this);case"column":return function(e){let t=lp(e.columns);for(let n=0;n<e.rows;++n)for(let r=0;r<e.columns;++r)t[r]+=e.get(n,r);return t}(this);case void 0:return function(e){let t=0;for(let n=0;n<e.rows;n++)for(let r=0;r<e.columns;r++)t+=e.get(n,r);return t}(this);default:throw new Error(`invalid option: ${e}`)}}product(e){switch(e){case"row":return function(e){let t=lp(e.rows,1);for(let n=0;n<e.rows;++n)for(let r=0;r<e.columns;++r)t[n]*=e.get(n,r);return t}(this);case"column":return function(e){let t=lp(e.columns,1);for(let n=0;n<e.rows;++n)for(let r=0;r<e.columns;++r)t[r]*=e.get(n,r);return t}(this);case void 0:return function(e){let t=1;for(let n=0;n<e.rows;n++)for(let r=0;r<e.columns;r++)t*=e.get(n,r);return t}(this);default:throw new Error(`invalid option: ${e}`)}}mean(e){const t=this.sum(e);switch(e){case"row":for(let e=0;e<this.rows;e++)t[e]/=this.columns;return t;case"column":for(let e=0;e<this.columns;e++)t[e]/=this.rows;return t;case void 0:return t/this.size;default:throw new Error(`invalid option: ${e}`)}}variance(e,t={}){if("object"==typeof e&&(t=e,e=void 0),"object"!=typeof t)throw new TypeError("options must be an object");const{unbiased:n=!0,mean:r=this.mean(e)}=t;if("boolean"!=typeof n)throw new TypeError("unbiased must be a boolean");switch(e){case"row":if(!Array.isArray(r))throw new TypeError("mean must be an array");return function(e,t,n){const r=e.rows,i=e.columns,o=[];for(let a=0;a<r;a++){let r=0,s=0,l=0;for(let t=0;t<i;t++)l=e.get(a,t)-n[a],r+=l,s+=l*l;t?o.push((s-r*r/i)/(i-1)):o.push((s-r*r/i)/i)}return o}(this,n,r);case"column":if(!Array.isArray(r))throw new TypeError("mean must be an array");return function(e,t,n){const r=e.rows,i=e.columns,o=[];for(let a=0;a<i;a++){let i=0,s=0,l=0;for(let t=0;t<r;t++)l=e.get(t,a)-n[a],i+=l,s+=l*l;t?o.push((s-i*i/r)/(r-1)):o.push((s-i*i/r)/r)}return o}(this,n,r);case void 0:if("number"!=typeof r)throw new TypeError("mean must be a number");return function(e,t,n){const r=e.rows,i=e.columns,o=r*i;let a=0,s=0,l=0;for(let t=0;t<r;t++)for(let r=0;r<i;r++)l=e.get(t,r)-n,a+=l,s+=l*l;return t?(s-a*a/o)/(o-1):(s-a*a/o)/o}(this,n,r);default:throw new Error(`invalid option: ${e}`)}}standardDeviation(e,t){"object"==typeof e&&(t=e,e=void 0);const n=this.variance(e,t);if(void 0===e)return Math.sqrt(n);for(let e=0;e<n.length;e++)n[e]=Math.sqrt(n[e]);return n}center(e,t={}){if("object"==typeof e&&(t=e,e=void 0),"object"!=typeof t)throw new TypeError("options must be an object");const{center:n=this.mean(e)}=t;switch(e){case"row":if(!Array.isArray(n))throw new TypeError("center must be an array");return function(e,t){for(let n=0;n<e.rows;n++)for(let r=0;r<e.columns;r++)e.set(n,r,e.get(n,r)-t[n])}(this,n),this;case"column":if(!Array.isArray(n))throw new TypeError("center must be an array");return function(e,t){for(let n=0;n<e.rows;n++)for(let r=0;r<e.columns;r++)e.set(n,r,e.get(n,r)-t[r])}(this,n),this;case void 0:if("number"!=typeof n)throw new TypeError("center must be a number");return function(e,t){for(let n=0;n<e.rows;n++)for(let r=0;r<e.columns;r++)e.set(n,r,e.get(n,r)-t)}(this,n),this;default:throw new Error(`invalid option: ${e}`)}}scale(e,t={}){if("object"==typeof e&&(t=e,e=void 0),"object"!=typeof t)throw new TypeError("options must be an object");let n=t.scale;switch(e){case"row":if(void 0===n)n=function(e){const t=[];for(let n=0;n<e.rows;n++){let r=0;for(let t=0;t<e.columns;t++)r+=Math.pow(e.get(n,t),2)/(e.columns-1);t.push(Math.sqrt(r))}return t}(this);else if(!Array.isArray(n))throw new TypeError("scale must be an array");return function(e,t){for(let n=0;n<e.rows;n++)for(let r=0;r<e.columns;r++)e.set(n,r,e.get(n,r)/t[n])}(this,n),this;case"column":if(void 0===n)n=function(e){const t=[];for(let n=0;n<e.columns;n++){let r=0;for(let t=0;t<e.rows;t++)r+=Math.pow(e.get(t,n),2)/(e.rows-1);t.push(Math.sqrt(r))}return t}(this);else if(!Array.isArray(n))throw new TypeError("scale must be an array");return function(e,t){for(let n=0;n<e.rows;n++)for(let r=0;r<e.columns;r++)e.set(n,r,e.get(n,r)/t[r])}(this,n),this;case void 0:if(void 0===n)n=function(e){const t=e.size-1;let n=0;for(let r=0;r<e.columns;r++)for(let i=0;i<e.rows;i++)n+=Math.pow(e.get(i,r),2)/t;return Math.sqrt(n)}(this);else if("number"!=typeof n)throw new TypeError("scale must be a number");return function(e,t){for(let n=0;n<e.rows;n++)for(let r=0;r<e.columns;r++)e.set(n,r,e.get(n,r)/t)}(this,n),this;default:throw new Error(`invalid option: ${e}`)}}toString(e){return Qf(this,e)}}function hp(e,t){return e-t}dp.prototype.klass="Matrix","undefined"!=typeof Symbol&&(dp.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return Qf(this)}),dp.random=dp.rand,dp.randomInt=dp.randInt,dp.diagonal=dp.diag,dp.prototype.diagonal=dp.prototype.diag,dp.identity=dp.eye,dp.prototype.negate=dp.prototype.neg,dp.prototype.tensorProduct=dp.prototype.kroneckerProduct;class fp extends dp{constructor(e,t){if(super(),fp.isMatrix(e))return e.clone();if(Number.isInteger(e)&&e>=0){if(this.data=[],!(Number.isInteger(t)&&t>=0))throw new TypeError("nColumns must be a positive integer");for(let n=0;n<e;n++)this.data.push(new Float64Array(t))}else{if(!Array.isArray(e))throw new TypeError("First argument must be a positive number or an array");{const n=e;if("number"!=typeof(t=(e=n.length)?n[0].length:0))throw new TypeError("Data must be a 2D array with at least one element");this.data=[];for(let r=0;r<e;r++){if(n[r].length!==t)throw new RangeError("Inconsistent array dimensions");this.data.push(Float64Array.from(n[r]))}}}this.rows=e,this.columns=t}set(e,t,n){return this.data[e][t]=n,this}get(e,t){return this.data[e][t]}removeRow(e){return tp(this,e),this.data.splice(e,1),this.rows-=1,this}addRow(e,t){return void 0===t&&(t=e,e=this.rows),tp(this,e,!0),t=Float64Array.from(rp(this,t)),this.data.splice(e,0,t),this.rows+=1,this}removeColumn(e){np(this,e);for(let t=0;t<this.rows;t++){const n=new Float64Array(this.columns-1);for(let r=0;r<e;r++)n[r]=this.data[t][r];for(let r=e+1;r<this.columns;r++)n[r-1]=this.data[t][r];this.data[t]=n}return this.columns-=1,this}addColumn(e,t){void 0===t&&(t=e,e=this.columns),np(this,e,!0),t=ip(this,t);for(let n=0;n<this.rows;n++){const r=new Float64Array(this.columns+1);let i=0;for(;i<e;i++)r[i]=this.data[n][i];for(r[i++]=t[n];i<this.columns+1;i++)r[i]=this.data[n][i-1];this.data[n]=r}return this.columns+=1,this}}!function(e,t){e.prototype.add=function(e){return"number"==typeof e?this.addS(e):this.addM(e)},e.prototype.addS=function(e){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)+e);return this},e.prototype.addM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)+e.get(t,n));return this},e.add=function(e,n){return new t(e).add(n)},e.prototype.sub=function(e){return"number"==typeof e?this.subS(e):this.subM(e)},e.prototype.subS=function(e){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)-e);return this},e.prototype.subM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)-e.get(t,n));return this},e.sub=function(e,n){return new t(e).sub(n)},e.prototype.subtract=e.prototype.sub,e.prototype.subtractS=e.prototype.subS,e.prototype.subtractM=e.prototype.subM,e.subtract=e.sub,e.prototype.mul=function(e){return"number"==typeof e?this.mulS(e):this.mulM(e)},e.prototype.mulS=function(e){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e);return this},e.prototype.mulM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e.get(t,n));return this},e.mul=function(e,n){return new t(e).mul(n)},e.prototype.multiply=e.prototype.mul,e.prototype.multiplyS=e.prototype.mulS,e.prototype.multiplyM=e.prototype.mulM,e.multiply=e.mul,e.prototype.div=function(e){return"number"==typeof e?this.divS(e):this.divM(e)},e.prototype.divS=function(e){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)/e);return this},e.prototype.divM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)/e.get(t,n));return this},e.div=function(e,n){return new t(e).div(n)},e.prototype.divide=e.prototype.div,e.prototype.divideS=e.prototype.divS,e.prototype.divideM=e.prototype.divM,e.divide=e.div,e.prototype.mod=function(e){return"number"==typeof e?this.modS(e):this.modM(e)},e.prototype.modS=function(e){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)%e);return this},e.prototype.modM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)%e.get(t,n));return this},e.mod=function(e,n){return new t(e).mod(n)},e.prototype.modulus=e.prototype.mod,e.prototype.modulusS=e.prototype.modS,e.prototype.modulusM=e.prototype.modM,e.modulus=e.mod,e.prototype.and=function(e){return"number"==typeof e?this.andS(e):this.andM(e)},e.prototype.andS=function(e){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)&e);return this},e.prototype.andM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)&e.get(t,n));return this},e.and=function(e,n){return new t(e).and(n)},e.prototype.or=function(e){return"number"==typeof e?this.orS(e):this.orM(e)},e.prototype.orS=function(e){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)|e);return this},e.prototype.orM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)|e.get(t,n));return this},e.or=function(e,n){return new t(e).or(n)},e.prototype.xor=function(e){return"number"==typeof e?this.xorS(e):this.xorM(e)},e.prototype.xorS=function(e){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)^e);return this},e.prototype.xorM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)^e.get(t,n));return this},e.xor=function(e,n){return new t(e).xor(n)},e.prototype.leftShift=function(e){return"number"==typeof e?this.leftShiftS(e):this.leftShiftM(e)},e.prototype.leftShiftS=function(e){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)<<e);return this},e.prototype.leftShiftM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)<<e.get(t,n));return this},e.leftShift=function(e,n){return new t(e).leftShift(n)},e.prototype.signPropagatingRightShift=function(e){return"number"==typeof e?this.signPropagatingRightShiftS(e):this.signPropagatingRightShiftM(e)},e.prototype.signPropagatingRightShiftS=function(e){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)>>e);return this},e.prototype.signPropagatingRightShiftM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)>>e.get(t,n));return this},e.signPropagatingRightShift=function(e,n){return new t(e).signPropagatingRightShift(n)},e.prototype.rightShift=function(e){return"number"==typeof e?this.rightShiftS(e):this.rightShiftM(e)},e.prototype.rightShiftS=function(e){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)>>>e);return this},e.prototype.rightShiftM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)>>>e.get(t,n));return this},e.rightShift=function(e,n){return new t(e).rightShift(n)},e.prototype.zeroFillRightShift=e.prototype.rightShift,e.prototype.zeroFillRightShiftS=e.prototype.rightShiftS,e.prototype.zeroFillRightShiftM=e.prototype.rightShiftM,e.zeroFillRightShift=e.rightShift,e.prototype.not=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,~this.get(e,t));return this},e.not=function(e){return new t(e).not()},e.prototype.abs=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.abs(this.get(e,t)));return this},e.abs=function(e){return new t(e).abs()},e.prototype.acos=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.acos(this.get(e,t)));return this},e.acos=function(e){return new t(e).acos()},e.prototype.acosh=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.acosh(this.get(e,t)));return this},e.acosh=function(e){return new t(e).acosh()},e.prototype.asin=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.asin(this.get(e,t)));return this},e.asin=function(e){return new t(e).asin()},e.prototype.asinh=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.asinh(this.get(e,t)));return this},e.asinh=function(e){return new t(e).asinh()},e.prototype.atan=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.atan(this.get(e,t)));return this},e.atan=function(e){return new t(e).atan()},e.prototype.atanh=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.atanh(this.get(e,t)));return this},e.atanh=function(e){return new t(e).atanh()},e.prototype.cbrt=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.cbrt(this.get(e,t)));return this},e.cbrt=function(e){return new t(e).cbrt()},e.prototype.ceil=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.ceil(this.get(e,t)));return this},e.ceil=function(e){return new t(e).ceil()},e.prototype.clz32=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.clz32(this.get(e,t)));return this},e.clz32=function(e){return new t(e).clz32()},e.prototype.cos=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.cos(this.get(e,t)));return this},e.cos=function(e){return new t(e).cos()},e.prototype.cosh=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.cosh(this.get(e,t)));return this},e.cosh=function(e){return new t(e).cosh()},e.prototype.exp=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.exp(this.get(e,t)));return this},e.exp=function(e){return new t(e).exp()},e.prototype.expm1=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.expm1(this.get(e,t)));return this},e.expm1=function(e){return new t(e).expm1()},e.prototype.floor=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.floor(this.get(e,t)));return this},e.floor=function(e){return new t(e).floor()},e.prototype.fround=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.fround(this.get(e,t)));return this},e.fround=function(e){return new t(e).fround()},e.prototype.log=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.log(this.get(e,t)));return this},e.log=function(e){return new t(e).log()},e.prototype.log1p=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.log1p(this.get(e,t)));return this},e.log1p=function(e){return new t(e).log1p()},e.prototype.log10=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.log10(this.get(e,t)));return this},e.log10=function(e){return new t(e).log10()},e.prototype.log2=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.log2(this.get(e,t)));return this},e.log2=function(e){return new t(e).log2()},e.prototype.round=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.round(this.get(e,t)));return this},e.round=function(e){return new t(e).round()},e.prototype.sign=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.sign(this.get(e,t)));return this},e.sign=function(e){return new t(e).sign()},e.prototype.sin=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.sin(this.get(e,t)));return this},e.sin=function(e){return new t(e).sin()},e.prototype.sinh=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.sinh(this.get(e,t)));return this},e.sinh=function(e){return new t(e).sinh()},e.prototype.sqrt=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.sqrt(this.get(e,t)));return this},e.sqrt=function(e){return new t(e).sqrt()},e.prototype.tan=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.tan(this.get(e,t)));return this},e.tan=function(e){return new t(e).tan()},e.prototype.tanh=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.tanh(this.get(e,t)));return this},e.tanh=function(e){return new t(e).tanh()},e.prototype.trunc=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.trunc(this.get(e,t)));return this},e.trunc=function(e){return new t(e).trunc()},e.pow=function(e,n){return new t(e).pow(n)},e.prototype.pow=function(e){return"number"==typeof e?this.powS(e):this.powM(e)},e.prototype.powS=function(e){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,Math.pow(this.get(t,n),e));return this},e.prototype.powM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,Math.pow(this.get(t,n),e.get(t,n)));return this}}(dp,fp);class pp extends dp{constructor(e){super(),this.data=e,this.rows=e.length,this.columns=e[0].length}set(e,t,n){return this.data[e][t]=n,this}get(e,t){return this.data[e][t]}}function mp(e,t){let n=0;return Math.abs(e)>Math.abs(t)?(n=t/e,Math.abs(e)*Math.sqrt(1+n*n)):0!==t?(n=e/t,Math.abs(t)*Math.sqrt(1+n*n)):0}class gp{constructor(e,t={}){if((e=pp.checkMatrix(e)).isEmpty())throw new Error("Matrix must be non-empty");let n=e.rows,r=e.columns;const{computeLeftSingularVectors:i=!0,computeRightSingularVectors:o=!0,autoTranspose:a=!1}=t;let s,l=Boolean(i),u=Boolean(o),c=!1;if(n<r)if(a){s=e.transpose(),n=s.rows,r=s.columns,c=!0;let t=l;l=u,u=t}else s=e.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else s=e.clone();let d=Math.min(n,r),h=Math.min(n+1,r),f=new Float64Array(h),p=new fp(n,d),m=new fp(r,r),g=new Float64Array(r),v=new Float64Array(n),y=new Float64Array(h);for(let e=0;e<h;e++)y[e]=e;let b=Math.min(n-1,r),_=Math.max(0,Math.min(r-2,n)),w=Math.max(b,_);for(let e=0;e<w;e++){if(e<b){f[e]=0;for(let t=e;t<n;t++)f[e]=mp(f[e],s.get(t,e));if(0!==f[e]){s.get(e,e)<0&&(f[e]=-f[e]);for(let t=e;t<n;t++)s.set(t,e,s.get(t,e)/f[e]);s.set(e,e,s.get(e,e)+1)}f[e]=-f[e]}for(let t=e+1;t<r;t++){if(e<b&&0!==f[e]){let r=0;for(let i=e;i<n;i++)r+=s.get(i,e)*s.get(i,t);r=-r/s.get(e,e);for(let i=e;i<n;i++)s.set(i,t,s.get(i,t)+r*s.get(i,e))}g[t]=s.get(e,t)}if(l&&e<b)for(let t=e;t<n;t++)p.set(t,e,s.get(t,e));if(e<_){g[e]=0;for(let t=e+1;t<r;t++)g[e]=mp(g[e],g[t]);if(0!==g[e]){g[e+1]<0&&(g[e]=0-g[e]);for(let t=e+1;t<r;t++)g[t]/=g[e];g[e+1]+=1}if(g[e]=-g[e],e+1<n&&0!==g[e]){for(let t=e+1;t<n;t++)v[t]=0;for(let t=e+1;t<n;t++)for(let n=e+1;n<r;n++)v[t]+=g[n]*s.get(t,n);for(let t=e+1;t<r;t++){let r=-g[t]/g[e+1];for(let i=e+1;i<n;i++)s.set(i,t,s.get(i,t)+r*v[i])}}if(u)for(let t=e+1;t<r;t++)m.set(t,e,g[t])}}let x=Math.min(r,n+1);if(b<r&&(f[b]=s.get(b,b)),n<x&&(f[x-1]=0),_+1<x&&(g[_]=s.get(_,x-1)),g[x-1]=0,l){for(let e=b;e<d;e++){for(let t=0;t<n;t++)p.set(t,e,0);p.set(e,e,1)}for(let e=b-1;e>=0;e--)if(0!==f[e]){for(let t=e+1;t<d;t++){let r=0;for(let i=e;i<n;i++)r+=p.get(i,e)*p.get(i,t);r=-r/p.get(e,e);for(let i=e;i<n;i++)p.set(i,t,p.get(i,t)+r*p.get(i,e))}for(let t=e;t<n;t++)p.set(t,e,-p.get(t,e));p.set(e,e,1+p.get(e,e));for(let t=0;t<e-1;t++)p.set(t,e,0)}else{for(let t=0;t<n;t++)p.set(t,e,0);p.set(e,e,1)}}if(u)for(let e=r-1;e>=0;e--){if(e<_&&0!==g[e])for(let t=e+1;t<r;t++){let n=0;for(let i=e+1;i<r;i++)n+=m.get(i,e)*m.get(i,t);n=-n/m.get(e+1,e);for(let i=e+1;i<r;i++)m.set(i,t,m.get(i,t)+n*m.get(i,e))}for(let t=0;t<r;t++)m.set(t,e,0);m.set(e,e,1)}let M=x-1,E=0,S=Number.EPSILON;for(;x>0;){let e,t;for(e=x-2;e>=-1&&-1!==e;e--){const t=Number.MIN_VALUE+S*Math.abs(f[e]+Math.abs(f[e+1]));if(Math.abs(g[e])<=t||Number.isNaN(g[e])){g[e]=0;break}}if(e===x-2)t=4;else{let n;for(n=x-1;n>=e&&n!==e;n--){let t=(n!==x?Math.abs(g[n]):0)+(n!==e+1?Math.abs(g[n-1]):0);if(Math.abs(f[n])<=S*t){f[n]=0;break}}n===e?t=3:n===x-1?t=1:(t=2,e=n)}switch(e++,t){case 1:{let t=g[x-2];g[x-2]=0;for(let n=x-2;n>=e;n--){let i=mp(f[n],t),o=f[n]/i,a=t/i;if(f[n]=i,n!==e&&(t=-a*g[n-1],g[n-1]=o*g[n-1]),u)for(let e=0;e<r;e++)i=o*m.get(e,n)+a*m.get(e,x-1),m.set(e,x-1,-a*m.get(e,n)+o*m.get(e,x-1)),m.set(e,n,i)}break}case 2:{let t=g[e-1];g[e-1]=0;for(let r=e;r<x;r++){let i=mp(f[r],t),o=f[r]/i,a=t/i;if(f[r]=i,t=-a*g[r],g[r]=o*g[r],l)for(let t=0;t<n;t++)i=o*p.get(t,r)+a*p.get(t,e-1),p.set(t,e-1,-a*p.get(t,r)+o*p.get(t,e-1)),p.set(t,r,i)}break}case 3:{const t=Math.max(Math.abs(f[x-1]),Math.abs(f[x-2]),Math.abs(g[x-2]),Math.abs(f[e]),Math.abs(g[e])),i=f[x-1]/t,o=f[x-2]/t,a=g[x-2]/t,s=f[e]/t,c=g[e]/t,d=((o+i)*(o-i)+a*a)/2,h=i*a*(i*a);let v=0;0===d&&0===h||(v=d<0?0-Math.sqrt(d*d+h):Math.sqrt(d*d+h),v=h/(d+v));let y=(s+i)*(s-i)+v,b=s*c;for(let t=e;t<x-1;t++){let i=mp(y,b);0===i&&(i=Number.MIN_VALUE);let o=y/i,a=b/i;if(t!==e&&(g[t-1]=i),y=o*f[t]+a*g[t],g[t]=o*g[t]-a*f[t],b=a*f[t+1],f[t+1]=o*f[t+1],u)for(let e=0;e<r;e++)i=o*m.get(e,t)+a*m.get(e,t+1),m.set(e,t+1,-a*m.get(e,t)+o*m.get(e,t+1)),m.set(e,t,i);if(i=mp(y,b),0===i&&(i=Number.MIN_VALUE),o=y/i,a=b/i,f[t]=i,y=o*g[t]+a*f[t+1],f[t+1]=-a*g[t]+o*f[t+1],b=a*g[t+1],g[t+1]=o*g[t+1],l&&t<n-1)for(let e=0;e<n;e++)i=o*p.get(e,t)+a*p.get(e,t+1),p.set(e,t+1,-a*p.get(e,t)+o*p.get(e,t+1)),p.set(e,t,i)}g[x-2]=y,E+=1;break}case 4:if(f[e]<=0&&(f[e]=f[e]<0?-f[e]:0,u))for(let t=0;t<=M;t++)m.set(t,e,-m.get(t,e));for(;e<M&&!(f[e]>=f[e+1]);){let t=f[e];if(f[e]=f[e+1],f[e+1]=t,u&&e<r-1)for(let n=0;n<r;n++)t=m.get(n,e+1),m.set(n,e+1,m.get(n,e)),m.set(n,e,t);if(l&&e<n-1)for(let r=0;r<n;r++)t=p.get(r,e+1),p.set(r,e+1,p.get(r,e)),p.set(r,e,t);e++}E=0,x--}}if(c){let e=m;m=p,p=e}this.m=n,this.n=r,this.s=f,this.U=p,this.V=m}solve(e){let t=e,n=this.threshold,r=this.s.length,i=fp.zeros(r,r);for(let e=0;e<r;e++)Math.abs(this.s[e])<=n?i.set(e,e,0):i.set(e,e,1/this.s[e]);let o=this.U,a=this.rightSingularVectors,s=a.mmul(i),l=a.rows,u=o.rows,c=fp.zeros(l,u);for(let e=0;e<l;e++)for(let t=0;t<u;t++){let n=0;for(let i=0;i<r;i++)n+=s.get(e,i)*o.get(t,i);c.set(e,t,n)}return c.mmul(t)}solveForDiagonal(e){return this.solve(fp.diag(e))}inverse(){let e=this.V,t=this.threshold,n=e.rows,r=e.columns,i=new fp(n,this.s.length);for(let o=0;o<n;o++)for(let n=0;n<r;n++)Math.abs(this.s[n])>t&&i.set(o,n,e.get(o,n)/this.s[n]);let o=this.U,a=o.rows,s=o.columns,l=new fp(n,a);for(let e=0;e<n;e++)for(let t=0;t<a;t++){let n=0;for(let r=0;r<s;r++)n+=i.get(e,r)*o.get(t,r);l.set(e,t,n)}return l}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){let e=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,t=0,n=this.s;for(let r=0,i=n.length;r<i;r++)n[r]>e&&t++;return t}get diagonal(){return Array.from(this.s)}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return this.U}get rightSingularVectors(){return this.V}get diagonalMatrix(){return fp.diag(this.s)}}class vp{constructor(e){this.distances=e.distances,this.dimension=e.dimension||2,this.linkDistance=e.linkDistance}layout(){const{dimension:e,distances:t,linkDistance:n}=this;try{const n=fp.mul(fp.pow(t,2),-.5),r=n.mean("row"),i=n.mean("column"),o=n.mean();n.add(o).subRowVector(r).subColumnVector(i);const a=new gp(n),s=fp.sqrt(a.diagonalMatrix).diagonal();return a.leftSingularVectors.toJSON().map((t=>fp.mul([t],[s]).toJSON()[0].splice(0,e)))}catch(e){const r=[];for(let e=0;e<t.length;e++){const e=Math.random()*n,t=Math.random()*n;r.push([e,t])}return r}}}class yp{constructor(e){this.disp=[],this.positions=e.positions,this.adjMatrix=e.adjMatrix,this.focusID=e.focusID,this.radii=e.radii,this.iterations=e.iterations||10,this.height=e.height||10,this.width=e.width||10,this.speed=e.speed||100,this.gravity=e.gravity||10,this.nodeSizeFunc=e.nodeSizeFunc,this.k=e.k||5,this.strictRadial=e.strictRadial,this.nodes=e.nodes}layout(){const e=this,t=e.positions,n=[],r=e.iterations,i=e.width/10;e.maxDisplace=i,e.disp=n;for(let i=0;i<r;i++)t.forEach(((e,t)=>{n[t]={x:0,y:0}})),e.getRepulsion(),e.updatePositions();return t}getRepulsion(){const e=this,t=e.positions,n=e.nodes,r=e.disp,i=e.k,o=e.radii||[];t.forEach(((a,s)=>{r[s]={x:0,y:0},t.forEach(((t,l)=>{if(s===l)return;if(o[s]!==o[l])return;let u=a[0]-t[0],c=a[1]-t[1],d=Math.sqrt(u*u+c*c);if(0===d){d=1;const e=s>l?1:-1;u=.01*e,c=.01*e}if(d<e.nodeSizeFunc(n[s])/2+e.nodeSizeFunc(n[l])/2){const e=i*i/d;r[s].x+=u/d*e,r[s].y+=c/d*e}}))}))}updatePositions(){const e=this,t=e.positions,n=e.disp,r=e.speed,i=e.strictRadial,o=e.focusID,a=e.maxDisplace||e.width/10;i&&n.forEach(((e,n)=>{const r=t[n][0]-t[o][0],i=t[n][1]-t[o][1],a=Math.sqrt(r*r+i*i);let s=i/a,l=-r/a;const u=Math.sqrt(e.x*e.x+e.y*e.y);let c=Math.acos((s*e.x+l*e.y)/u);c>Math.PI/2&&(c-=Math.PI/2,s*=-1,l*=-1);const d=Math.cos(c)*u;e.x=s*d,e.y=l*d}));const s=e.radii;t.forEach(((e,l)=>{if(l===o)return;const u=Math.sqrt(n[l].x*n[l].x+n[l].y*n[l].y);if(u>0&&l!==o){const c=Math.min(a*(r/800),u);if(e[0]+=n[l].x/u*c,e[1]+=n[l].y/u*c,i){let n=e[0]-t[o][0],r=e[1]-t[o][1];const i=Math.sqrt(n*n+r*r);n=n/i*s[l],r=r/i*s[l],e[0]=t[o][0]+n,e[1]=t[o][1]+r}}}))}}function bp(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))}function _p(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function wp(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Mp(e,t,n){return t&&xp(e.prototype,t),n&&xp(e,n),e}function Ep(e,t,n,r,i){var o={};return Object.keys(r).forEach((function(e){o[e]=r[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}o(28660);var Sp=o(87757),kp=o.n(Sp);function Tp(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function Lp(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Tp(o,r,i,a,s,"next",e)}function s(e){Tp(o,r,i,a,s,"throw",e)}a(void 0)}))}}var Cp=1;function Dp(){return Cp++}var Ap=function e(t){wp(this,e)},Pp=function(){function e(t){wp(this,e),this.clazz=void 0,this.components=[],this.entities=[],this.lookup={},this.clazz=t}var t;return Mp(e,[{key:"clear",value:function(){this.components=[],this.entities=[],this.lookup={}}},{key:"contains",value:function(e){return this.lookup[e]>-1}},{key:"create",value:function(e,t){this.lookup[e]=this.components.length;var n=new this.clazz(t||{});return this.components.push(n),this.entities.push(e),n}},{key:"remove",value:function(e){var t=this.lookup[e];t>-1&&t<this.components.length-1&&(this.components[t]=this.components[this.components.length-1],this.entities[t]=this.entities[this.entities.length-1],this.lookup[this.entities[t]]=t),this.components.pop(),this.entities.pop(),delete this.lookup[e]}},{key:"removeKeepSorted",value:function(e){var t=this.lookup[e];if(t>-1){var n=this.entities[t];if(t<this.components.length-1){for(var r=t+1;r<this.components.length;++r)this.components[r-1]=this.components[r];for(var i=t+1;i<this.entities.length;++i)this.entities[i-1]=this.entities[i],this.lookup[this.entities[i-1]]=i-1}this.components.pop(),this.entities.pop(),delete this.lookup[n]}}},{key:"moveItem",value:function(e,t){if(e!==t){for(var n=this.components[e],r=this.entities[e],i=e<t?1:-1,o=e;o!==t;o+=i){var a=o+i;this.components[o]=this.components[a],this.entities[o]=this.entities[a],this.lookup[this.entities[o]]=o}this.components[t]=n,this.entities[t]=r,this.lookup[r]=t}}},{key:"getEntity",value:function(e){return this.entities[e]}},{key:"getComponent",value:function(e){return this.components[e]}},{key:"getComponentByEntity",value:function(e){var t=this.lookup[e];return t>-1?this.components[t]:null}},{key:"getCount",value:function(){return this.components.length}},{key:"getEntityByComponentIndex",value:function(e){for(var t=0,n=Object.keys(this.lookup);t<n.length;t++){var r=n[t],i=Number(r);if(this.lookup[i]===e)return i}return-1}},{key:"find",value:function(e){for(var t=0;t<this.getCount();t++){var n=this.getComponent(t);if(e(n,t))return n}return null}},{key:"findIndex",value:function(e){for(var t=0;t<this.getCount();t++){if(e(this.getComponent(t),t))return t}return-1}},{key:"forEach",value:function(e){for(var t=0,n=Object.keys(this.lookup);t<n.length;t++){var r=n[t],i=Number(r),o=this.lookup[i];e(i,this.getComponent(o))}}},{key:"forEachAsync",value:(t=Lp(kp().mark((function e(t){var n,r,i,o,a;return kp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0,r=Object.keys(this.lookup);case 1:if(!(n<r.length)){e.next=10;break}return i=r[n],o=Number(i),a=this.lookup[o],e.next=7,t(o,this.getComponent(a));case 7:n++,e.next=1;break;case 10:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"map",value:function(e){for(var t=[],n=0,r=Object.keys(this.lookup);n<r.length;n++){var i=r[n],o=Number(i),a=this.lookup[o];t.push(e(o,this.getComponent(a)))}return t}}]),e}();function Op(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ip(e,t){if(e){if("string"==typeof e)return Op(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Op(e,t):void 0}}function Rp(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||Ip(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Np=o(86700),Yp={HierarchyComponentManager:Symbol("HierarchyComponentManager"),TransformComponentManager:Symbol("TransformComponentManager"),NameComponentManager:Symbol("NameComponentManager"),SceneGraphSystem:Symbol("SceneGraphSystem"),FrameGraphSystem:Symbol("FrameGraphSystem"),ResourcePool:Symbol("ResourcePool"),ResourceHandleComponentManager:Symbol("ResourceHandleComponentManager"),PassNodeComponentManager:Symbol("PassNodeComponentManager"),RendererSystem:Symbol("RendererSystem"),RenderPass:Symbol("RenderPass"),RenderPassFactory:Symbol("Factory<IRenderPass>"),Renderable:Symbol("Factory<IRenderPass>"),MeshSystem:Symbol("MeshSystem"),MeshComponentManager:Symbol("MeshComponentManager"),CullableComponentManager:Symbol("CullableComponentManager"),Geometry:Symbol("Geometry"),GeometrySystem:Symbol("GeometrySystem"),GeometryComponentManager:Symbol("GeometryComponentManager"),Material:Symbol("Material"),MaterialSystem:Symbol("MaterialSystem"),MaterialComponentManager:Symbol("MaterialComponentManager"),ForwardRenderPath:Symbol("ForwardRenderPath"),ComputeSystem:Symbol("ComputeSystem"),ComputeComponentManager:Symbol("ComputeComponentManager"),ComputeStrategy:Symbol("ComputeStrategy"),Systems:Symbol("Systems"),World:Symbol("World"),RenderEngine:Symbol("RenderEngine"),WebGPUEngine:Symbol("WebGPUEngine"),WebGLEngine:Symbol("WebGLEngine"),ShaderModuleService:Symbol("ShaderModuleService"),ConfigService:Symbol("ConfigService"),InteractorService:Symbol("InteractorService"),IEventEmitter:Symbol("IEventEmitter"),Light:Symbol("Light")},jp=function e(){wp(this,e),this.index=void 0},Fp=function e(){wp(this,e),this.name=void 0,this.data=void 0,this.execute=void 0,this.tearDown=void 0},Bp=function(){function e(){wp(this,e),this.name=void 0,this.refCount=0,this.hasSideEffect=!1,this.devirtualize=[],this.destroy=[],this.reads=[],this.writes=[]}return Mp(e,[{key:"read",value:function(e){return this.reads.find((function(t){return t.index===e.index}))||this.reads.push(e),e}},{key:"sample",value:function(e){return this.read(e),e}},{key:"write",value:function(e,t){if(this.writes.find((function(e){return e.index===t.index})))return t;var n=e.getResourceNode(t);n.resource.version++,n.resource.imported&&(this.hasSideEffect=!0);var r=e.createResourceNode(n.resource);return e.getResourceNode(r).writer=this,this.writes.push(r),r}}]),e}();function zp(e,t){return zp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},zp(e,t)}function Hp(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zp(e,t)}function Gp(e){return Gp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gp(e)}function Wp(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Up(e,t){if(t&&("object"===Gp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Wp(e)}function Vp(e){return Vp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Vp(e)}function Xp(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vp(e);if(t){var i=Vp(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Up(this,n)}}var qp,Kp,Jp,Zp,$p,Qp,em=function(e){Hp(n,e);var t=Xp(n);function n(){var e;wp(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).version=0,e.refs=0,e.name=void 0,e.imported=void 0,e.priority=void 0,e.discardStart=!0,e.discardEnd=!1,e.descriptor=void 0,e.resource=void 0,e}return Mp(n,[{key:"preExecuteDestroy",value:function(){this.discardEnd=!0}},{key:"postExecuteDestroy",value:function(){this.imported}},{key:"postExecuteDevirtualize",value:function(){this.discardStart=!1}},{key:"preExecuteDevirtualize",value:function(){this.imported}}]),n}((function e(){wp(this,e),this.first=void 0,this.last=void 0})),tm=function e(){wp(this,e),this.resource=void 0,this.writer=void 0,this.readerCount=0,this.version=void 0};function nm(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return rm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rm(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function rm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var im=(qp=(0,Np.b2)(),Kp=(0,Np.f3)(Yp.RenderEngine),qp((Qp=function(){function e(){wp(this,e),this.passNodes=[],this.resourceNodes=[],this.frameGraphPasses=[],_p(this,"engine",$p,this)}var t,n;return Mp(e,[{key:"execute",value:(n=Lp(kp().mark((function e(t){return kp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.compile(),e.next=3,this.executePassNodes(t);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"tearDown",value:function(){this.frameGraphPasses.forEach((function(e){e.tearDown&&e.tearDown()})),this.reset()}},{key:"addPass",value:function(e,t,n,r){var i=new Fp;i.execute=n,r&&(i.tearDown=r),i.name=e;var o=new Bp;return o.name=e,this.passNodes.push(o),this.frameGraphPasses.push(i),t(this,o,i),i}},{key:"getPass",value:function(e){return this.frameGraphPasses.find((function(t){return t.name===e}))}},{key:"compile",value:function(){var e,t=this,n=nm(this.passNodes);try{for(n.s();!(e=n.n()).done;){var r=e.value;r.refCount=r.writes.length+(r.hasSideEffect?1:0),r.reads.forEach((function(e){t.resourceNodes[e.index].readerCount++}))}}catch(e){n.e(e)}finally{n.f()}var i,o=[],a=nm(this.resourceNodes);try{for(a.s();!(i=a.n()).done;){var s=i.value;0===s.readerCount&&o.push(s)}}catch(e){a.e(e)}finally{a.f()}for(;o.length;){var l=o.pop(),u=l&&l.writer;if(u&&0==--u.refCount){var c,d=nm(u.reads);try{for(d.s();!(c=d.n()).done;){var h=c.value,f=this.resourceNodes[h.index];0==--f.readerCount&&o.push(f)}}catch(e){d.e(e)}finally{d.f()}}}this.resourceNodes.forEach((function(e){e.resource.refs+=e.readerCount}));var p,m=nm(this.passNodes);try{for(m.s();!(p=m.n()).done;){var g=p.value;if(g.refCount){var v,y=nm(g.reads);try{for(y.s();!(v=y.n()).done;){var b=v.value,_=this.resourceNodes[b.index].resource;_.first=_.first?_.first:g,_.last=g}}catch(e){y.e(e)}finally{y.f()}var w,x=nm(g.writes);try{for(x.s();!(w=x.n()).done;){var M=w.value,E=this.resourceNodes[M.index].resource;E.first=E.first?E.first:g,E.last=g}}catch(e){x.e(e)}finally{x.f()}}}}catch(e){m.e(e)}finally{m.f()}for(var S=0;S<2;S++){var k,T=nm(this.resourceNodes);try{for(T.s();!(k=T.n()).done;){var L=k.value.resource;if(L.priority===S&&L.refs){var C=L.first,D=L.last;C&&D&&(C.devirtualize.push(L),D.destroy.push(L))}}}catch(e){T.e(e)}finally{T.f()}}}},{key:"executePassNodes",value:(t=Lp(kp().mark((function e(t){var n,r,i,o,a,s,l,u,c,d,h,f,p;return kp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=nm(this.passNodes.entries()),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=18;break}if(i=Rp(r.value,2),o=i[0],!(a=i[1]).refCount){e.next=16;break}s=nm(a.devirtualize);try{for(s.s();!(l=s.n()).done;)l.value.preExecuteDevirtualize(this.engine)}catch(e){s.e(e)}finally{s.f()}u=nm(a.destroy);try{for(u.s();!(c=u.n()).done;)c.value.preExecuteDestroy(this.engine)}catch(e){u.e(e)}finally{u.f()}return e.next=12,this.frameGraphPasses[o].execute(this,this.frameGraphPasses[o],t);case 12:d=nm(a.devirtualize);try{for(d.s();!(h=d.n()).done;)h.value.postExecuteDevirtualize(this.engine)}catch(e){d.e(e)}finally{d.f()}f=nm(a.destroy);try{for(f.s();!(p=f.n()).done;)p.value.postExecuteDestroy(this.engine)}catch(e){f.e(e)}finally{f.f()}case 16:e.next=3;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(1),n.e(e.t0);case 23:return e.prev=23,n.f(),e.finish(23);case 26:this.reset();case 27:case"end":return e.stop()}}),e,this,[[1,20,23,26]])}))),function(e){return t.apply(this,arguments)})},{key:"reset",value:function(){this.passNodes=[],this.resourceNodes=[],this.frameGraphPasses=[]}},{key:"getResourceNode",value:function(e){return this.resourceNodes[e.index]}},{key:"createResourceNode",value:function(e){var t=new tm;t.resource=e,t.version=e.version,this.resourceNodes.push(t);var n=new jp;return n.index=this.resourceNodes.length-1,n}},{key:"createTexture",value:function(e,t,n){var r=new em;return r.name=t,r.descriptor=n,this.createResourceNode(r)}},{key:"createRenderTarget",value:function(e,t,n){var r=new em;return r.name=t,r.descriptor=n,this.createResourceNode(r)}},{key:"present",value:function(e){this.addPass("Present",(function(t,n){n.read(e),n.hasSideEffect=!0}),Lp(kp().mark((function e(){return kp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))))}}]),e}(),$p=Ep((Zp=Qp).prototype,"engine",[Kp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Jp=Zp))||Jp);function om(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function am(){var e=new T(4);return T!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function sm(e,t,n,r){var i=new T(4);return i[0]=e,i[1]=t,i[2]=n,i[3]=r,i}function lm(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,e[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,e[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,e[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,e}!function(){var e=am()}();var um=9007199254740991,cm={};cm["[object Float32Array]"]=cm["[object Float64Array]"]=cm["[object Int8Array]"]=cm["[object Int16Array]"]=cm["[object Int32Array]"]=cm["[object Uint8Array]"]=cm["[object Uint8ClampedArray]"]=cm["[object Uint16Array]"]=cm["[object Uint32Array]"]=!0,cm["[object Arguments]"]=cm["[object Array]"]=cm["[object ArrayBuffer]"]=cm["[object Boolean]"]=cm["[object DataView]"]=cm["[object Date]"]=cm["[object Error]"]=cm["[object Function]"]=cm["[object Map]"]=cm["[object Number]"]=cm["[object Object]"]=cm["[object RegExp]"]=cm["[object Set]"]=cm["[object String]"]=cm["[object WeakMap]"]=!1;var dm=Object.prototype.toString;var hm=function(e){return function(e){return!!e&&"object"===Gp(e)}(e)&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=um}(e.length)&&!!cm[dm.call(e)]};function fm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fm(Object(n),!0).forEach((function(t){om(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function mm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vp(e);if(t){var i=Vp(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Up(this,n)}}var gm,vm,ym,bm,_m,wm,xm,Mm,Em,Sm=function(e){Hp(n,e);var t=mm(n);function n(e){var r;return wp(this,n),(r=t.call(this,e)).dirty=!0,r.attributes=[],r.indices=void 0,r.indicesBuffer=void 0,r.vertexCount=0,r.maxInstancedCount=void 0,r.aabb=void 0,r.entity=void 0,Object.assign(Wp(r),e),r}return Mp(n,[{key:"setAttribute",value:function(e,t,n,r){var i=this.attributes.find((function(t){return t.name===e}));return i?(i.data=t,i.dirty=!0):this.attributes.push(pm(pm({dirty:!0,name:e,data:t},n),{},{bufferGetter:r})),this.dirty=!0,this}},{key:"setIndex",value:function(e){return this.indices=new Uint32Array(e.buffer?e.buffer:e),this.dirty=!0,this}},{key:"applyMatrix",value:function(e){var t=this.attributes.find((function(e){return"position"===e.name})),n=this.attributes.find((function(e){return"normal"===e.name}));if(t&&(t.dirty=!0,t.data&&t.data.length))for(var r=0;r<t.data.length;r+=3){var i=sm(t.data[r],t.data[r+1],t.data[r+2],1);lm(i,i,e),hm(t.data)?t.data.set([i[0],i[1],i[2]],r):(t.data[r]=i[0],t.data[r+1]=i[1],t.data[r+2]=i[2])}if(n){var o=q(L(),e);if(n.data&&n.data.length)for(var a=0;a<n.data.length;a+=3){var s=Et(n.data[a],n.data[a+1],n.data[a+2]);Nt(s,s,o),At(s,s),hm(n.data)?n.data.set([s[0],s[1],s[2]],a):(n.data[a]=s[0],n.data[a+1]=s[1],n.data[a+2]=s[2])}}}}]),n}(Ap);!function(e){e[e.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",e[e.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",e[e.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_COLOR=768]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.DST_COLOR=774]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",e[e.FUNC_ADD=32774]="FUNC_ADD",e[e.BLEND_EQUATION=32777]="BLEND_EQUATION",e[e.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",e[e.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",e[e.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",e[e.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",e[e.MAX_EXT=32776]="MAX_EXT",e[e.MIN_EXT=32775]="MIN_EXT",e[e.BLEND_DST_RGB=32968]="BLEND_DST_RGB",e[e.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",e[e.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",e[e.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",e[e.CONSTANT_COLOR=32769]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",e[e.BLEND_COLOR=32773]="BLEND_COLOR",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",e[e.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",e[e.STREAM_DRAW=35040]="STREAM_DRAW",e[e.STATIC_DRAW=35044]="STATIC_DRAW",e[e.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",e[e.BUFFER_SIZE=34660]="BUFFER_SIZE",e[e.BUFFER_USAGE=34661]="BUFFER_USAGE",e[e.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",e[e.FRONT=1028]="FRONT",e[e.BACK=1029]="BACK",e[e.FRONT_AND_BACK=1032]="FRONT_AND_BACK",e[e.CULL_FACE=2884]="CULL_FACE",e[e.BLEND=3042]="BLEND",e[e.DITHER=3024]="DITHER",e[e.STENCIL_TEST=2960]="STENCIL_TEST",e[e.DEPTH_TEST=2929]="DEPTH_TEST",e[e.SCISSOR_TEST=3089]="SCISSOR_TEST",e[e.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",e[e.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",e[e.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",e[e.NO_ERROR=0]="NO_ERROR",e[e.INVALID_ENUM=1280]="INVALID_ENUM",e[e.INVALID_VALUE=1281]="INVALID_VALUE",e[e.INVALID_OPERATION=1282]="INVALID_OPERATION",e[e.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",e[e.CW=2304]="CW",e[e.CCW=2305]="CCW",e[e.LINE_WIDTH=2849]="LINE_WIDTH",e[e.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",e[e.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",e[e.CULL_FACE_MODE=2885]="CULL_FACE_MODE",e[e.FRONT_FACE=2886]="FRONT_FACE",e[e.DEPTH_RANGE=2928]="DEPTH_RANGE",e[e.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",e[e.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",e[e.DEPTH_FUNC=2932]="DEPTH_FUNC",e[e.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",e[e.STENCIL_FUNC=2962]="STENCIL_FUNC",e[e.STENCIL_FAIL=2964]="STENCIL_FAIL",e[e.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",e[e.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",e[e.STENCIL_REF=2967]="STENCIL_REF",e[e.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",e[e.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",e[e.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",e[e.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",e[e.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",e[e.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",e[e.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",e[e.VIEWPORT=2978]="VIEWPORT",e[e.SCISSOR_BOX=3088]="SCISSOR_BOX",e[e.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",e[e.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",e[e.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",e[e.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",e[e.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",e[e.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",e[e.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",e[e.RED_BITS=3410]="RED_BITS",e[e.GREEN_BITS=3411]="GREEN_BITS",e[e.BLUE_BITS=3412]="BLUE_BITS",e[e.ALPHA_BITS=3413]="ALPHA_BITS",e[e.DEPTH_BITS=3414]="DEPTH_BITS",e[e.STENCIL_BITS=3415]="STENCIL_BITS",e[e.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",e[e.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",e[e.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",e[e.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",e[e.SAMPLES=32937]="SAMPLES",e[e.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",e[e.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",e[e.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",e[e.DONT_CARE=4352]="DONT_CARE",e[e.FASTEST=4353]="FASTEST",e[e.NICEST=4354]="NICEST",e[e.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.INT=5124]="INT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.ALPHA=6406]="ALPHA",e[e.RGB=6407]="RGB",e[e.RGBA=6408]="RGBA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",e[e.VERTEX_SHADER=35633]="VERTEX_SHADER",e[e.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",e[e.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",e[e.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",e[e.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",e[e.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",e[e.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",e[e.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",e[e.SHADER_TYPE=35663]="SHADER_TYPE",e[e.DELETE_STATUS=35712]="DELETE_STATUS",e[e.LINK_STATUS=35714]="LINK_STATUS",e[e.VALIDATE_STATUS=35715]="VALIDATE_STATUS",e[e.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",e[e.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",e[e.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",e[e.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",e[e.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",e[e.NEVER=512]="NEVER",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.GEQUAL=518]="GEQUAL",e[e.ALWAYS=519]="ALWAYS",e[e.KEEP=7680]="KEEP",e[e.REPLACE=7681]="REPLACE",e[e.INCR=7682]="INCR",e[e.DECR=7683]="DECR",e[e.INVERT=5386]="INVERT",e[e.INCR_WRAP=34055]="INCR_WRAP",e[e.DECR_WRAP=34056]="DECR_WRAP",e[e.VENDOR=7936]="VENDOR",e[e.RENDERER=7937]="RENDERER",e[e.VERSION=7938]="VERSION",e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",e[e.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",e[e.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",e[e.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",e[e.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE=5890]="TEXTURE",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e[e.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",e[e.TEXTURE0=33984]="TEXTURE0",e[e.TEXTURE1=33985]="TEXTURE1",e[e.TEXTURE2=33986]="TEXTURE2",e[e.TEXTURE3=33987]="TEXTURE3",e[e.TEXTURE4=33988]="TEXTURE4",e[e.TEXTURE5=33989]="TEXTURE5",e[e.TEXTURE6=33990]="TEXTURE6",e[e.TEXTURE7=33991]="TEXTURE7",e[e.TEXTURE8=33992]="TEXTURE8",e[e.TEXTURE9=33993]="TEXTURE9",e[e.TEXTURE10=33994]="TEXTURE10",e[e.TEXTURE11=33995]="TEXTURE11",e[e.TEXTURE12=33996]="TEXTURE12",e[e.TEXTURE13=33997]="TEXTURE13",e[e.TEXTURE14=33998]="TEXTURE14",e[e.TEXTURE15=33999]="TEXTURE15",e[e.TEXTURE16=34e3]="TEXTURE16",e[e.TEXTURE17=34001]="TEXTURE17",e[e.TEXTURE18=34002]="TEXTURE18",e[e.TEXTURE19=34003]="TEXTURE19",e[e.TEXTURE20=34004]="TEXTURE20",e[e.TEXTURE21=34005]="TEXTURE21",e[e.TEXTURE22=34006]="TEXTURE22",e[e.TEXTURE23=34007]="TEXTURE23",e[e.TEXTURE24=34008]="TEXTURE24",e[e.TEXTURE25=34009]="TEXTURE25",e[e.TEXTURE26=34010]="TEXTURE26",e[e.TEXTURE27=34011]="TEXTURE27",e[e.TEXTURE28=34012]="TEXTURE28",e[e.TEXTURE29=34013]="TEXTURE29",e[e.TEXTURE30=34014]="TEXTURE30",e[e.TEXTURE31=34015]="TEXTURE31",e[e.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",e[e.REPEAT=10497]="REPEAT",e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35678]="SAMPLER_2D",e[e.SAMPLER_CUBE=35680]="SAMPLER_CUBE",e[e.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",e[e.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",e[e.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",e[e.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",e[e.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",e[e.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",e[e.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",e[e.COMPILE_STATUS=35713]="COMPILE_STATUS",e[e.LOW_FLOAT=36336]="LOW_FLOAT",e[e.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",e[e.HIGH_FLOAT=36338]="HIGH_FLOAT",e[e.LOW_INT=36339]="LOW_INT",e[e.MEDIUM_INT=36340]="MEDIUM_INT",e[e.HIGH_INT=36341]="HIGH_INT",e[e.FRAMEBUFFER=36160]="FRAMEBUFFER",e[e.RENDERBUFFER=36161]="RENDERBUFFER",e[e.RGBA4=32854]="RGBA4",e[e.RGB5_A1=32855]="RGB5_A1",e[e.RGB565=36194]="RGB565",e[e.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",e[e.STENCIL_INDEX=6401]="STENCIL_INDEX",e[e.STENCIL_INDEX8=36168]="STENCIL_INDEX8",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",e[e.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",e[e.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",e[e.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",e[e.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",e[e.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",e[e.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",e[e.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",e[e.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",e[e.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",e[e.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",e[e.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",e[e.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",e[e.NONE=0]="NONE",e[e.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",e[e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",e[e.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",e[e.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",e[e.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",e[e.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",e[e.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",e[e.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",e[e.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",e[e.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",e[e.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",e[e.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",e[e.COPY_SRC=1]="COPY_SRC",e[e.COPY_DST=2]="COPY_DST",e[e.SAMPLED=4]="SAMPLED",e[e.STORAGE=8]="STORAGE",e[e.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"}(gm||(gm={}));var km=(vm=(0,Np.b2)(),ym=(0,Np.f3)(Yp.GeometryComponentManager),bm=(0,Np.f3)(Yp.RenderEngine),vm((Em=function(){function e(){wp(this,e),_p(this,"geometry",xm,this),_p(this,"engine",Mm,this)}var t;return Mp(e,[{key:"execute",value:(t=Lp(kp().mark((function e(){var t=this;return kp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.geometry.forEach((function(e,n){n.dirty&&(n.attributes.forEach((function(e){var n;e.dirty&&e.data&&(e.buffer?null===(n=e.buffer)||void 0===n||n.subData({data:e.data,offset:0}):e.buffer=t.engine.createBuffer({data:e.data,type:gm.FLOAT}),e.dirty=!1)})),n.indices&&(n.indicesBuffer?n.indicesBuffer.subData({data:n.indices,offset:0}):n.indicesBuffer=t.engine.createElements({data:n.indices,count:n.indices.length,type:gm.UNSIGNED_INT,usage:gm.STATIC_DRAW})),n.dirty=!1)}));case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"tearDown",value:function(){this.geometry.forEach((function(e,t){t.indicesBuffer&&t.indicesBuffer.destroy(),t.attributes.forEach((function(e){e.buffer&&e.buffer.destroy()}))})),this.geometry.clear()}},{key:"createBufferGeometry",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{vertexCount:3},t=e.vertexCount,n=Dp();return this.geometry.create(n,{vertexCount:t})}},{key:"createInstancedBufferGeometry",value:function(e){var t=e.maxInstancedCount,n=e.vertexCount,r=Dp();return this.geometry.create(r,{maxInstancedCount:t,vertexCount:n})}}]),e}(),xm=Ep((wm=Em).prototype,"geometry",[ym],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Mm=Ep(wm.prototype,"engine",[bm],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_m=wm))||_m);function Tm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Lm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tm(Object(n),!0).forEach((function(t){om(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Cm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vp(e);if(t){var i=Vp(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Up(this,n)}}var Dm,Am,Pm,Om,Im,Rm,Nm,Ym,jm,Fm,Bm=function(e){Hp(n,e);var t=Cm(n);function n(e){var r;return wp(this,n),(r=t.call(this,e)).vertexShaderGLSL=void 0,r.fragmentShaderGLSL=void 0,r.defines={},r.dirty=!0,r.uniforms=[],r.cull={enable:!0,face:gm.BACK},r.depth={enable:!0},r.blend=void 0,r.entity=void 0,r.type=void 0,Object.assign(Wp(r),e),r}return Mp(n,[{key:"setDefines",value:function(e){return this.defines=Lm(Lm({},this.defines),e),this}},{key:"setCull",value:function(e){return this.cull=e,this}},{key:"setDepth",value:function(e){return this.depth=e,this}},{key:"setBlend",value:function(e){return this.blend=e,this}},{key:"setUniform",value:function(e,t){var n=this;if("string"!=typeof e)return Object.keys(e).forEach((function(t){return n.setUniform(t,e[t])})),this;var r=this.uniforms.find((function(t){return t.name===e}));return r?(r.dirty=!0,r.data=t):this.uniforms.push({name:e,dirty:!0,data:t}),this.dirty=!0,this}}]),n}(Ap);function zm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zm(Object(n),!0).forEach((function(t){om(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Gm,Wm=(Dm=(0,Np.b2)(),Am=(0,Np.f3)(Yp.MaterialComponentManager),Pm=(0,Np.f3)(Yp.RenderEngine),Om=(0,Np.f3)(Yp.ShaderModuleService),Dm((Fm=function(){function e(){wp(this,e),_p(this,"material",Nm,this),_p(this,"engine",Ym,this),_p(this,"shaderModule",jm,this)}var t;return Mp(e,[{key:"execute",value:(t=Lp(kp().mark((function e(){return kp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})},{key:"tearDown",value:function(){this.material.clear()}},{key:"createShaderMaterial",value:function(e){var t=Dp(),n=e.vertexShader,r=e.fragmentShader,i=[];if(!this.engine.supportWebGPU){var o="material-".concat(t);this.shaderModule.registerModule(o,{vs:e.vertexShader,fs:e.fragmentShader});var a=this.shaderModule.getModule(o);n=a.vs,r=a.fs,a.uniforms&&(i=Object.keys(a.uniforms).map((function(e){return{dirty:!0,name:e,data:a.uniforms[e]}})))}return this.material.create(t,Hm(Hm({vertexShaderGLSL:n,fragmentShaderGLSL:r},e),{},{uniforms:i}))}}]),e}(),Nm=Ep((Rm=Fm).prototype,"material",[Am],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ym=Ep(Rm.prototype,"engine",[Pm],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jm=Ep(Rm.prototype,"shaderModule",[Om],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Im=Rm))||Im);function Um(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vp(e);if(t){var i=Vp(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Up(this,n)}}!function(e){e[e.Standard=0]="Standard"}(Gm||(Gm={}));var Vm=function(e){Hp(n,e);var t=Um(n);function n(e){var r;return wp(this,n),(r=t.call(this,e)).strategy=Gm.Standard,r.visibilityPlaneMask=0,r.visible=!1,Object.assign(Wp(r),e),r}return n}(Ap),Xm=function(){function e(t,n){wp(this,e),this.center=void 0,this.halfExtents=void 0,this.min=wt(),this.max=wt(),this.update(t,n)}return Mp(e,[{key:"update",value:function(e,t){this.center=e||wt(),this.halfExtents=t||Et(.5,.5,.5),this.min=jt(this.min,this.center,this.halfExtents),this.max=Tt(this.max,this.center,this.halfExtents)}},{key:"setMinMax",value:function(e,t){Tt(this.center,t,e),Dt(this.center,this.center,.5),jt(this.halfExtents,t,e),Dt(this.halfExtents,this.halfExtents,.5),St(this.min,e),St(this.max,t)}},{key:"getMin",value:function(){return this.min}},{key:"getMax",value:function(){return this.max}},{key:"add",value:function(e){var t=this.center,n=t[0],r=t[1],i=t[2],o=this.halfExtents,a=o[0],s=o[1],l=o[2],u=n-a,c=n+a,d=r-s,h=r+s,f=i-l,p=i+l,m=e.center,g=m[0],v=m[1],y=m[2],b=e.halfExtents,_=b[0],w=b[1],x=b[2],M=g-_,E=g+_,S=v-w,k=v+w,T=y-x,L=y+x;M<u&&(u=M),E>c&&(c=E),S<d&&(d=S),k>h&&(h=k),T<f&&(f=T),L>p&&(p=L),t[0]=.5*(u+c),t[1]=.5*(d+h),t[2]=.5*(f+p),o[0]=.5*(c-u),o[1]=.5*(h-d),o[2]=.5*(p-f),this.min[0]=u,this.min[1]=d,this.min[2]=f,this.max[0]=c,this.max[1]=h,this.max[2]=p}},{key:"intersects",value:function(e){var t=this.getMax(),n=this.getMin(),r=e.getMax(),i=e.getMin();return n[0]<=r[0]&&t[0]>=i[0]&&n[1]<=r[1]&&t[1]>=i[1]&&n[2]<=r[2]&&t[2]>=i[2]}},{key:"containsPoint",value:function(e){var t=this.getMin(),n=this.getMax();return!(e[0]<t[0]||e[0]>n[0]||e[1]<t[1]||e[1]>n[1]||e[2]<t[2]||e[2]>n[2])}},{key:"getNegativeFarPoint",value:function(e){return 273===e.pnVertexFlag?St(wt(),this.min):272===e.pnVertexFlag?Et(this.min[0],this.min[1],this.max[2]):257===e.pnVertexFlag?Et(this.min[0],this.max[1],this.min[2]):256===e.pnVertexFlag?Et(this.min[0],this.max[1],this.max[2]):17===e.pnVertexFlag?Et(this.max[0],this.min[1],this.min[2]):16===e.pnVertexFlag?Et(this.max[0],this.min[1],this.max[2]):1===e.pnVertexFlag?Et(this.max[0],this.max[1],this.min[2]):Et(this.max[0],this.max[1],this.max[2])}},{key:"getPositiveFarPoint",value:function(e){return 273===e.pnVertexFlag?St(wt(),this.max):272===e.pnVertexFlag?Et(this.max[0],this.max[1],this.min[2]):257===e.pnVertexFlag?Et(this.max[0],this.min[1],this.max[2]):256===e.pnVertexFlag?Et(this.max[0],this.min[1],this.min[2]):17===e.pnVertexFlag?Et(this.min[0],this.max[1],this.max[2]):16===e.pnVertexFlag?Et(this.min[0],this.max[1],this.min[2]):1===e.pnVertexFlag?Et(this.min[0],this.min[1],this.max[2]):Et(this.min[0],this.min[1],this.min[2])}}]),e}();function qm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vp(e);if(t){var i=Vp(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Up(this,n)}}var Km,Jm=function(e){Hp(n,e);var t=qm(n);function n(e){var r;return wp(this,n),(r=t.call(this,e)).material=void 0,r.geometry=void 0,r.aabb=new Xm,r.aabbDirty=!0,r.model=void 0,r.visible=!0,r.children=[],Object.assign(Wp(r),e),r}return n}(Ap),Zm=function(){function e(t,n){wp(this,e),this.distance=void 0,this.normal=void 0,this.pnVertexFlag=void 0,this.distance=t||0,this.normal=n||Et(0,1,0),this.updatePNVertexFlag()}return Mp(e,[{key:"updatePNVertexFlag",value:function(){this.pnVertexFlag=(Number(this.normal[0]>=0)<<8)+(Number(this.normal[1]>=0)<<4)+Number(this.normal[2]>=0)}},{key:"distanceToPoint",value:function(e){return Pt(e,this.normal)-this.distance}},{key:"normalize",value:function(){var e=1/Bt(this.normal);Dt(this.normal,this.normal,e),this.distance*=e}},{key:"intersectsLine",value:function(e,t,n){var r=this.distanceToPoint(e),i=r/(r-this.distanceToPoint(t)),o=i>=0&&i<=1;return o&&n&&It(n,e,t,i),o}}]),e}();!function(e){e[e.OUTSIDE=4294967295]="OUTSIDE",e[e.INSIDE=0]="INSIDE",e[e.INDETERMINATE=2147483647]="INDETERMINATE"}(Km||(Km={}));var $m,Qm,eg,tg,ng,rg,ig,og,ag,sg,lg,ug,cg,dg,hg=function(){function e(t){if(wp(this,e),this.planes=[],t)this.planes=t;else for(var n=0;n<6;n++)this.planes.push(new Zm)}return Mp(e,[{key:"extractFromVPMatrix",value:function(e){var t=Rp(e,16),n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8],d=t[9],h=t[10],f=t[11],p=t[12],m=t[13],g=t[14],v=t[15];kt(this.planes[0].normal,o-n,u-a,f-c),this.planes[0].distance=-(v-p),kt(this.planes[1].normal,o+n,u+a,f+c),this.planes[1].distance=-(v+p),kt(this.planes[2].normal,o+r,u+s,f+d),this.planes[2].distance=-(v+m),kt(this.planes[3].normal,o-r,u-s,f-d),this.planes[3].distance=-(v-m),kt(this.planes[4].normal,o-i,u-l,f-h),this.planes[4].distance=-(v-g),kt(this.planes[5].normal,o+i,u+l,f+h),this.planes[5].distance=-(v+g),this.planes.forEach((function(e){e.normalize(),e.updatePNVertexFlag()}))}}]),e}();function fg(e,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function pg(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return mg(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mg(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function mg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var gg=($m=(0,Np.b2)(),Qm=(0,Np.f3)(Yp.MeshComponentManager),eg=(0,Np.f3)(Yp.CullableComponentManager),tg=(0,Np.f3)(Yp.GeometryComponentManager),ng=(0,Np.f3)(Yp.HierarchyComponentManager),rg=(0,Np.f3)(Yp.TransformComponentManager),$m((dg=function(){function e(){wp(this,e),_p(this,"mesh",ag,this),_p(this,"cullable",sg,this),_p(this,"geometry",lg,this),_p(this,"hierarchy",ug,this),_p(this,"transform",cg,this),this.planes=void 0}var t;return Mp(e,[{key:"setFrustumPlanes",value:function(e){this.planes=e}},{key:"execute",value:(t=Lp(kp().mark((function e(t){var n,r,i,o,a,s,l,u,c,d,h,f,p,m,g,v,y,b,_,w,x;return kp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=pg(t);try{for(n.s();!(r=n.n()).done;){i=r.value,o=i.getScene(),a=i.getCamera(),s=pg(o.getEntities());try{for(s.s();!(l=s.n()).done;)u=l.value,(c=this.mesh.getComponentByEntity(u))&&(d=this.hierarchy.getComponentByEntity(u),h=this.cullable.getComponentByEntity(u),f=c.geometry,p=this.transform.getComponentByEntity(u),f&&f.aabb&&p&&c.aabbDirty&&(m=p.worldTransform,g=f.aabb,v=g.center,y=g.halfExtents,b=Rt(wt(),v,m),_=fg(m,L()),w=Nt(wt(),y,_),c.aabb.update(b,w),c.aabbDirty=!1),h&&f&&(x=this.cullable.getComponentByEntity((null==d?void 0:d.parentID)||-1),h.visibilityPlaneMask=this.computeVisibilityWithPlaneMask(c.aabb,(null==x?void 0:x.visibilityPlaneMask)||Km.INDETERMINATE,this.planes||a.getFrustum().planes),h.visible=h.visibilityPlaneMask!==Km.OUTSIDE))}catch(e){s.e(e)}finally{s.f()}}}catch(e){n.e(e)}finally{n.f()}case 2:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"tearDown",value:function(){this.cullable.clear(),this.mesh.clear()}},{key:"computeVisibilityWithPlaneMask",value:function(e,t,n){if(t===Km.OUTSIDE||t===Km.INSIDE)return t;for(var r=Km.INSIDE,i=0,o=n.length;i<o;++i){var a=i<31?1<<i:0;if(!(i<31&&0==(t&a))){var s=n[i],l=s.normal,u=s.distance;if(Pt(l,e.getNegativeFarPoint(n[i]))+u>0)return Km.OUTSIDE;Pt(l,e.getPositiveFarPoint(n[i]))+u>0&&(r|=a)}}return r}}]),e}(),ag=Ep((og=dg).prototype,"mesh",[Qm],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sg=Ep(og.prototype,"cullable",[eg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lg=Ep(og.prototype,"geometry",[tg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ug=Ep(og.prototype,"hierarchy",[ng],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cg=Ep(og.prototype,"transform",[rg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ig=og))||ig);function vg(){var e=new T(16);return T!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function yg(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function bg(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function _g(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8],d=t[9],h=t[10],f=t[11],p=t[12],m=t[13],g=t[14],v=t[15],y=n*s-r*a,b=n*l-i*a,_=n*u-o*a,w=r*l-i*s,x=r*u-o*s,M=i*u-o*l,E=c*m-d*p,S=c*g-h*p,k=c*v-f*p,T=d*g-h*m,L=d*v-f*m,C=h*v-f*g,D=y*C-b*L+_*T+w*k-x*S+M*E;return D?(D=1/D,e[0]=(s*C-l*L+u*T)*D,e[1]=(i*L-r*C-o*T)*D,e[2]=(m*M-g*x+v*w)*D,e[3]=(h*x-d*M-f*w)*D,e[4]=(l*k-a*C-u*S)*D,e[5]=(n*C-i*k+o*S)*D,e[6]=(g*_-p*M-v*b)*D,e[7]=(c*M-h*_+f*b)*D,e[8]=(a*L-s*k+u*E)*D,e[9]=(r*k-n*L-o*E)*D,e[10]=(p*x-m*_+v*y)*D,e[11]=(d*_-c*x-f*y)*D,e[12]=(s*S-a*T-l*E)*D,e[13]=(n*T-r*S+i*E)*D,e[14]=(m*b-p*w-g*y)*D,e[15]=(c*w-d*b+h*y)*D,e):null}function wg(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],d=t[8],h=t[9],f=t[10],p=t[11],m=t[12],g=t[13],v=t[14],y=t[15],b=n[0],_=n[1],w=n[2],x=n[3];return e[0]=b*r+_*s+w*d+x*m,e[1]=b*i+_*l+w*h+x*g,e[2]=b*o+_*u+w*f+x*v,e[3]=b*a+_*c+w*p+x*y,b=n[4],_=n[5],w=n[6],x=n[7],e[4]=b*r+_*s+w*d+x*m,e[5]=b*i+_*l+w*h+x*g,e[6]=b*o+_*u+w*f+x*v,e[7]=b*a+_*c+w*p+x*y,b=n[8],_=n[9],w=n[10],x=n[11],e[8]=b*r+_*s+w*d+x*m,e[9]=b*i+_*l+w*h+x*g,e[10]=b*o+_*u+w*f+x*v,e[11]=b*a+_*c+w*p+x*y,b=n[12],_=n[13],w=n[14],x=n[15],e[12]=b*r+_*s+w*d+x*m,e[13]=b*i+_*l+w*h+x*g,e[14]=b*o+_*u+w*f+x*v,e[15]=b*a+_*c+w*p+x*y,e}function xg(e,t,n){var r,i,o,a,s,l,u,c,d,h,f,p,m=n[0],g=n[1],v=n[2];return t===e?(e[12]=t[0]*m+t[4]*g+t[8]*v+t[12],e[13]=t[1]*m+t[5]*g+t[9]*v+t[13],e[14]=t[2]*m+t[6]*g+t[10]*v+t[14],e[15]=t[3]*m+t[7]*g+t[11]*v+t[15]):(r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],d=t[8],h=t[9],f=t[10],p=t[11],e[0]=r,e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=l,e[6]=u,e[7]=c,e[8]=d,e[9]=h,e[10]=f,e[11]=p,e[12]=r*m+s*g+d*v+t[12],e[13]=i*m+l*g+h*v+t[13],e[14]=o*m+u*g+f*v+t[14],e[15]=a*m+c*g+p*v+t[15]),e}function Mg(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function Eg(e,t){var n=t[0],r=t[1],i=t[2],o=t[4],a=t[5],s=t[6],l=t[8],u=t[9],c=t[10];return e[0]=Math.hypot(n,r,i),e[1]=Math.hypot(o,a,s),e[2]=Math.hypot(l,u,c),e}function Sg(e,t){var n=new T(3);Eg(n,t);var r=1/n[0],i=1/n[1],o=1/n[2],a=t[0]*r,s=t[1]*i,l=t[2]*o,u=t[4]*r,c=t[5]*i,d=t[6]*o,h=t[8]*r,f=t[9]*i,p=t[10]*o,m=a+c+p,g=0;return m>0?(g=2*Math.sqrt(m+1),e[3]=.25*g,e[0]=(d-f)/g,e[1]=(h-l)/g,e[2]=(s-u)/g):a>c&&a>p?(g=2*Math.sqrt(1+a-c-p),e[3]=(d-f)/g,e[0]=.25*g,e[1]=(s+u)/g,e[2]=(h+l)/g):c>p?(g=2*Math.sqrt(1+c-a-p),e[3]=(h-l)/g,e[0]=(s+u)/g,e[1]=.25*g,e[2]=(d+f)/g):(g=2*Math.sqrt(1+p-a-c),e[3]=(s-u)/g,e[0]=(h+l)/g,e[1]=(d+f)/g,e[2]=.25*g),e}function kg(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n+n,s=r+r,l=i+i,u=n*a,c=r*a,d=r*s,h=i*a,f=i*s,p=i*l,m=o*a,g=o*s,v=o*l;return e[0]=1-d-p,e[1]=c+v,e[2]=h-g,e[3]=0,e[4]=c-v,e[5]=1-u-p,e[6]=f+m,e[7]=0,e[8]=h+g,e[9]=f-m,e[10]=1-u-d,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}var Tg=function(e,t,n,r,i){var o,a=1/Math.tan(t/2);return e[0]=a/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0?(o=1/(r-i),e[10]=(i+r)*o,e[14]=2*i*r*o):(e[10]=-1,e[14]=-2*r),e};var Lg=function(e,t,n,r,i,o,a){var s=1/(t-n),l=1/(r-i),u=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*l,e[14]=(a+o)*u,e[15]=1,e};var Cg,Dg,Ag,Pg,Og,Ig,Rg,Ng,Yg,jg,Fg,Bg,zg,Hg,Gg,Wg,Ug,Vg,Xg,qg,Kg,Jg,Zg,$g;function Qg(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return ev(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ev(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function ev(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var tv,nv,rv,iv,ov,av,sv,lv,uv,cv,dv,hv,fv,pv=(Cg=(0,Np.b2)(),Dg=(0,Np.f3)(Yp.MeshComponentManager),Ag=(0,Np.f3)(Yp.GeometryComponentManager),Pg=(0,Np.f3)(Yp.MaterialComponentManager),Og=(0,Np.f3)(Yp.CullableComponentManager),Ig=(0,Np.f3)(Yp.TransformComponentManager),Rg=(0,Np.f3)(Yp.HierarchyComponentManager),Ng=(0,Np.f3)(Yp.Systems),Yg=(0,Np.t6)(Yp.FrameGraphSystem),jg=(0,Np.f3)(Yp.RenderEngine),Fg=(0,Np.f3)(Yp.ResourcePool),Cg(($g=Zg=function(){function e(){var t=this;wp(this,e),_p(this,"mesh",Hg,this),_p(this,"geometry",Gg,this),_p(this,"material",Wg,this),_p(this,"cullable",Ug,this),_p(this,"transform",Vg,this),_p(this,"hierarchy",Xg,this),_p(this,"frameGraphSystem",qg,this),_p(this,"engine",Kg,this),_p(this,"resourcePool",Jg,this),this.modelCache={},this.setup=function(e,t,n){var r=e.createRenderTarget(t,"color buffer",{width:1,height:1,usage:gm.RENDER_ATTACHMENT|gm.SAMPLED|gm.COPY_SRC});n.data={output:t.write(e,r)}},this.execute=function(){var e=Lp(kp().mark((function e(n,r,i){var o,a,s,l,u,c;return kp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=n.getResourceNode(r.data.output),a=t.resourcePool.getOrCreateResource(o.resource),s=Qg(i),e.prev=3,s.s();case 5:if((l=s.n()).done){e.next=11;break}return u=l.value,e.next=9,t.initView(u);case 9:e.next=5;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),s.e(e.t0);case 16:return e.prev=16,s.f(),e.finish(16);case 19:c=t.engine.getCanvas(),a.resize({width:c.width,height:c.height}),t.engine.setScissor({enable:!1}),t.engine.clear({framebuffer:a,color:i[0].getClearColor(),depth:1}),t.engine.useFramebuffer(a,(function(){var e,n=Qg(i);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.renderView(r)}}catch(e){n.e(e)}finally{n.f()}}));case 24:case"end":return e.stop()}}),e,null,[[3,13,16,19]])})));return function(t,n,r){return e.apply(this,arguments)}}()}var t,n;return Mp(e,[{key:"renderView",value:function(e){var t=e.getScene(),n=e.getCamera(),r=n.getViewTransform(),i=wg(vg(),n.getPerspective(),r);n.getFrustum().extractFromVPMatrix(i);var o=e.getViewport(),a=o.x,s=o.y,l=o.width,u=o.height;this.engine.viewport({x:a,y:s,width:l,height:u});var c,d=Qg(t.getEntities());try{for(d.s();!(c=d.n()).done;){var h=c.value;this.renderMesh(h,{camera:n,view:e,viewMatrix:r})}}catch(e){d.e(e)}finally{d.f()}}},{key:"renderMesh",value:function(e,t){var n=t.camera,r=t.view,i=t.viewMatrix,o=this.mesh.getComponentByEntity(e);if(o&&o.visible){var a=o.material,s=o.geometry;if(s&&!s.dirty&&a){var l=this.transform.getComponentByEntity(e),u=wg(vg(),i,l.worldTransform),c=r.getViewport(),d=c.width,h=c.height;a.setUniform({projectionMatrix:n.getPerspective(),modelViewMatrix:u,modelMatrix:l.worldTransform,viewMatrix:i,cameraPosition:n.getPosition(),u_viewport:[d,h]}),o.model&&(o.model.draw({uniforms:a.uniforms.reduce((function(e,t){return e[t.name]=t.data,e}),{})}),a.uniforms.forEach((function(e){e.dirty=!1})),a.dirty=!1)}}}},{key:"initMesh",value:(n=Lp(kp().mark((function e(t,n){var r,i,o,a,s,l,u,c;return kp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.mesh.getComponentByEntity(t)){e.next=3;break}return e.abrupt("return");case 3:if(i=r.material,(o=r.geometry)&&!o.dirty&&i){e.next=7;break}return e.abrupt("return");case 7:if(r.model){e.next=24;break}if(a="m-".concat(i.entity,"-g-").concat(o.entity),!this.modelCache[a]){e.next=12;break}return r.model=this.modelCache[a],e.abrupt("return");case 12:return i.setUniform({projectionMatrix:1,modelViewMatrix:1,modelMatrix:1,viewMatrix:1,cameraPosition:1,u_viewport:1}),s=this.engine,l=s.createModel,u=s.createAttribute,c={vs:i.vertexShaderGLSL,fs:i.fragmentShaderGLSL,defines:i.defines,attributes:o.attributes.reduce((function(e,t){return t.data&&t.buffer&&(e[t.name]=u({buffer:t.buffer,attributes:t.attributes,arrayStride:t.arrayStride,stepMode:t.stepMode,divisor:"vertex"===t.stepMode?0:1})),e}),{}),uniforms:i.uniforms.reduce((function(e,t){return e[t.name]=t.data,e}),{}),scissor:{enable:!0,box:function(){return n.getViewport()}}},i.cull&&(c.cull=i.cull),i.depth&&(c.depth=i.depth),i.blend&&(c.blend=i.blend),o.indicesBuffer&&(c.elements=o.indicesBuffer),o.maxInstancedCount&&(c.instances=o.maxInstancedCount,c.count=o.vertexCount||3),e.next=22,l(c);case 22:r.model=e.sent,this.modelCache[a]=r.model;case 24:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"initView",value:(t=Lp(kp().mark((function e(t){var n,r,i,o;return kp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.getScene(),r=Qg(n.getEntities()),e.prev=2,r.s();case 4:if((i=r.n()).done){e.next=10;break}return o=i.value,e.next=8,this.initMesh(o,t);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])}))),function(e){return t.apply(this,arguments)})}]),e}(),Zg.IDENTIFIER="Render Pass",Hg=Ep((zg=$g).prototype,"mesh",[Dg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Gg=Ep(zg.prototype,"geometry",[Ag],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wg=Ep(zg.prototype,"material",[Pg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ug=Ep(zg.prototype,"cullable",[Og],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Vg=Ep(zg.prototype,"transform",[Ig],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xg=Ep(zg.prototype,"hierarchy",[Rg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qg=Ep(zg.prototype,"frameGraphSystem",[Ng,Yg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Kg=Ep(zg.prototype,"engine",[jg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Jg=Ep(zg.prototype,"resourcePool",[Fg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Bg=zg))||Bg);function mv(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return gv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gv(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function gv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var vv,yv,bv,_v,wv,xv,Mv,Ev,Sv,kv,Tv,Lv,Cv,Dv,Av,Pv,Ov,Iv,Rv,Nv,Yv,jv,Fv=1,Bv=2,zv=(tv=(0,Np.b2)(),nv=(0,Np.f3)(Yp.RenderEngine),rv=(0,Np.f3)(Yp.ResourcePool),iv=(0,Np.f3)(Yp.RenderPassFactory),ov=(0,Np.f3)(Yp.MeshComponentManager),tv((fv=hv=function(){function e(){var t=this;wp(this,e),_p(this,"engine",lv,this),_p(this,"resourcePool",uv,this),_p(this,"renderPassFactory",cv,this),_p(this,"mesh",dv,this),this.pickingFBO=void 0,this.views=void 0,this.highlightEnabled=!0,this.highlightColor=[255,0,0,255],this.alreadyInRendering=!1,this.setup=function(e,t,n){var r=e.createRenderTarget(t,"picking fbo",{width:1,height:1});n.data={output:t.write(e,r)},t.hasSideEffect=!0},this.execute=function(){var e=Lp(kp().mark((function e(n,r,i){var o,a,s;return kp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.views=i,!t.alreadyInRendering){e.next=3;break}return e.abrupt("return");case 3:o=mv(i);try{for(s=function(){var e=a.value,i=e.getViewport(),o=i.width,s=i.height;t.alreadyInRendering=!0;var l=n.getResourceNode(r.data.output);t.pickingFBO=t.resourcePool.getOrCreateResource(l.resource),t.pickingFBO.resize({width:o,height:s}),t.engine.useFramebuffer(t.pickingFBO,(function(){t.engine.clear({framebuffer:t.pickingFBO,color:[0,0,0,0],stencil:0,depth:1});var n,r=t.renderPassFactory(pv.IDENTIFIER),i=[],o=mv(e.getScene().getEntities());try{for(o.s();!(n=o.n()).done;){var a=n.value,s=t.mesh.getComponentByEntity(a);s.material.setUniform("u_PickingStage",Fv),i.push(s)}}catch(e){o.e(e)}finally{o.f()}r.renderView(e),i.forEach((function(e){e.material.setUniform("u_PickingStage",Bv)})),t.alreadyInRendering=!1}))},o.s();!(a=o.n()).done;)s()}catch(e){o.e(e)}finally{o.f()}case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),this.pick=function(e,n){var r,i,o=e.x,a=e.y,s=t.engine,l=s.readPixels,u=s.useFramebuffer,c=n.getViewport(),d=c.width,h=c.height,f=o*window.devicePixelRatio,p=a*window.devicePixelRatio;if(!(f>d||f<0||p>h||p<0))return u(t.pickingFBO,(function(){0===(r=l({x:Math.round(f),y:Math.round(h-(a+1)*window.devicePixelRatio),width:1,height:1,data:new Uint8Array(4),framebuffer:t.pickingFBO}))[0]&&0===r[1]&&0===r[2]||(i=function(e){var t=Rp(e,3);return t[0]+256*t[1]+65536*t[2]-1}(r),t.highlightEnabled&&t.highlightPickedFeature(r,n))})),i}}return Mp(e,[{key:"enableHighlight",value:function(e){this.highlightEnabled=e}},{key:"setHighlightColor",value:function(e){this.highlightColor=e}},{key:"highlightPickedFeature",value:function(e,t){if(e){var n,r=mv(t.getScene().getEntities());try{for(r.s();!(n=r.n()).done;){var i=n.value,o=this.mesh.getComponentByEntity(i).material;o.setUniform("u_PickingStage",Bv),o.setUniform("u_PickingColor",[e[0],e[1],e[2]]),o.setUniform("u_HighlightColor",this.highlightColor)}}catch(e){r.e(e)}finally{r.f()}}}}]),e}(),hv.IDENTIFIER="PixelPicking Pass",lv=Ep((sv=fv).prototype,"engine",[nv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uv=Ep(sv.prototype,"resourcePool",[rv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cv=Ep(sv.prototype,"renderPassFactory",[iv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dv=Ep(sv.prototype,"mesh",[ov],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),av=sv))||av),Hv=(vv=(0,Np.b2)(),yv=(0,Np.f3)(Yp.RenderEngine),bv=(0,Np.f3)(Yp.ResourcePool),vv((Sv=Ev=function e(){var t=this;wp(this,e),_p(this,"engine",xv,this),_p(this,"resourcePool",Mv,this),this.model=void 0,this.setup=function(e,t,n){var r=e.getPass(pv.IDENTIFIER);if(r){var i=e.createRenderTarget(t,"render to screen",{width:1,height:1});n.data={input:t.read(r.data.output),output:t.write(e,i)}}},this.execute=function(){var e=Lp(kp().mark((function e(n,r){var i,o,a,s,l,u,c;return kp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.engine,o=i.createModel,a=i.createAttribute,s=i.createBuffer,t.model){e.next=6;break}return e.next=4,o({vs:t.engine.supportWebGPU?"layout(location = 0) in vec2 a_Position;\nlayout(location = 0) out vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}":"attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",fs:t.engine.supportWebGPU?"layout(set = 0, binding = 0) uniform sampler u_TextureSampler;\nlayout(set = 0, binding = 1) uniform texture2D u_Texture;\n\nlayout(location = 0) in vec2 v_UV;\nlayout(location = 0) out vec4 outColor;\n\nvoid main() {\n  outColor = texture(sampler2D(u_Texture, u_TextureSampler), v_UV);\n}":"varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\n\nvoid main() {\n  gl_FragColor = vec4(texture2D(u_Texture, v_UV));\n}",attributes:{a_Position:a({buffer:s({data:[-4,-4,4,-4,0,4],type:gm.FLOAT}),size:2,arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]})},uniforms:{u_Texture:null},depth:{enable:!1},count:3,blend:{enable:!0}});case 4:l=e.sent,t.model=l;case 6:u=n.getResourceNode(r.data.input),c=t.resourcePool.getOrCreateResource(u.resource),t.engine.useFramebuffer(null,(function(){t.engine.clear({framebuffer:null,color:[0,0,0,0],depth:1,stencil:0}),t.model.draw({uniforms:{u_Texture:c}})}));case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.tearDown=function(){t.model=void 0}},Ev.IDENTIFIER="Copy Pass",xv=Ep((wv=Sv).prototype,"engine",[yv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Mv=Ep(wv.prototype,"resourcePool",[bv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_v=wv))||_v),Gv=(kv=(0,Np.b2)(),Tv=(0,Np.f3)(Yp.Systems),Lv=(0,Np.t6)(Yp.FrameGraphSystem),Cv=(0,Np.f3)(Yp.RenderPassFactory),Dv=(0,Np.f3)(Yp.ConfigService),Av=(0,Np.f3)(Yp.ResourcePool),kv((jv=function(){function e(){wp(this,e),_p(this,"frameGraphSystem",Iv,this),_p(this,"renderPassFactory",Rv,this),_p(this,"configService",Nv,this),_p(this,"resourcePool",Yv,this)}var t;return Mp(e,[{key:"execute",value:(t=Lp(kp().mark((function e(t){var n,r,i,o,a,s,l,u;return kp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=this.renderPassFactory(pv.IDENTIFIER),r=n.setup,i=n.execute,this.frameGraphSystem.addPass(pv.IDENTIFIER,r,i),o=this.renderPassFactory(Hv.IDENTIFIER),a=o.setup,s=o.execute,l=o.tearDown,u=this.frameGraphSystem.addPass(Hv.IDENTIFIER,a,s,l),this.frameGraphSystem.present(u.data.output);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"tearDown",value:function(){this.resourcePool.clean()}},{key:"pick",value:function(e,t){return this.renderPassFactory(zv.IDENTIFIER).pick(e,t)}}]),e}(),Iv=Ep((Ov=jv).prototype,"frameGraphSystem",[Tv,Lv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Rv=Ep(Ov.prototype,"renderPassFactory",[Cv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Nv=Ep(Ov.prototype,"configService",[Dv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Yv=Ep(Ov.prototype,"resourcePool",[Av],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pv=Ov))||Pv);function Wv(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vp(e);if(t){var i=Vp(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Up(this,n)}}var Uv,Vv,Xv,qv,Kv,Jv,Zv,$v,Qv,ey,ty=function(e){Hp(n,e);var t=Wv(n);function n(e){var r;return wp(this,n),(r=t.call(this,e)).parentID=void 0,Object.assign(Wp(r),e),r}return n}(Ap),ny=(Uv=(0,Np.b2)(),Vv=(0,Np.f3)(Yp.HierarchyComponentManager),Xv=(0,Np.f3)(Yp.TransformComponentManager),qv=(0,Np.f3)(Yp.MeshComponentManager),Uv((ey=function(){function e(){wp(this,e),_p(this,"hierarchy",Zv,this),_p(this,"transform",$v,this),_p(this,"mesh",Qv,this)}var t;return Mp(e,[{key:"execute",value:(t=Lp(kp().mark((function e(){return kp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.runTransformUpdateSystem(),this.runHierarchyUpdateSystem();case 2:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"tearDown",value:function(){this.hierarchy.clear(),this.transform.clear()}},{key:"getHierarchyComponentManager",value:function(){return this.hierarchy}},{key:"getTransformComponentManager",value:function(){return this.transform}},{key:"runTransformUpdateSystem",value:function(){var e=this;this.transform.forEach((function(t,n){(n.isDirty()||n.isLocalDirty())&&(e.setMeshAABBDirty(e.mesh.getComponentByEntity(t)),n.updateTransform())}))}},{key:"runHierarchyUpdateSystem",value:function(){var e=this;this.hierarchy.forEach((function(t,n){var r=e.transform.getComponentByEntity(t),i=e.transform.getComponentByEntity(n.parentID);null!==r&&null!==i&&r.updateTransformWithParent(i)}))}},{key:"attach",value:function(e,t,n){this.hierarchy.contains(e)&&this.detach(e),this.hierarchy.create(e,{parentID:t});var r=this.mesh.getComponentByEntity(t);if(this.setMeshAABBDirty(r),r&&-1===r.children.indexOf(e)&&r.children.push(e),this.hierarchy.getCount()>1)for(var i=this.hierarchy.getCount()-1;i>0;--i)for(var o=this.hierarchy.getEntity(i),a=0;a<i;++a){if(this.hierarchy.getComponent(a).parentID===o){this.hierarchy.moveItem(i,a),++i;break}}this.hierarchy.getComponentByEntity(e);var s=this.transform.getComponentByEntity(t);null===s&&(s=this.transform.create(t));var l=this.transform.getComponentByEntity(e);null===l&&(l=this.transform.create(e),s=this.transform.getComponentByEntity(t)),l.parent=s,!n&&s&&(l.matrixTransform(_g(vg(),s.worldTransform)),l.updateTransform()),s&&l.updateTransformWithParent(s)}},{key:"detach",value:function(e){var t=this.hierarchy.getComponentByEntity(e);if(null!==t){var n=this.transform.getComponentByEntity(e);null!==n&&(n.parent=null,n.applyTransform()),this.hierarchy.removeKeepSorted(e);var r=this.mesh.getComponentByEntity(t.parentID);if(r){var i=r.children.indexOf(e);r.children.splice(i,1)}this.setMeshAABBDirty(r)}}},{key:"detachChildren",value:function(e){var t=this.mesh.getComponentByEntity(e);t&&(t.children=[]);for(var n=0;n<this.hierarchy.getCount();){var r;if((null===(r=this.hierarchy.getComponent(n))||void 0===r?void 0:r.parentID)===e){var i=this.hierarchy.getEntity(n);this.detach(i)}else++n}}},{key:"setMeshAABBDirty",value:function(e){e&&(e.aabbDirty=!0)}}]),e}(),Zv=Ep((Jv=ey).prototype,"hierarchy",[Vv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$v=Ep(Jv.prototype,"transform",[Xv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qv=Ep(Jv.prototype,"mesh",[qv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Kv=Jv))||Kv);function ry(){var e=new T(4);return T!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function iy(e,t,n){n*=.5;var r=Math.sin(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n),e}function oy(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=n[0],l=n[1],u=n[2],c=n[3];return e[0]=r*c+a*s+i*u-o*l,e[1]=i*c+a*l+o*s-r*u,e[2]=o*c+a*u+r*l-i*s,e[3]=a*c-r*s-i*l-o*u,e}function ay(e,t,n,r){var i,o,a,s,l,u=t[0],c=t[1],d=t[2],h=t[3],f=n[0],p=n[1],m=n[2],g=n[3];return(o=u*f+c*p+d*m+h*g)<0&&(o=-o,f=-f,p=-p,m=-m,g=-g),1-o>k?(i=Math.acos(o),a=Math.sin(i),s=Math.sin((1-r)*i)/a,l=Math.sin(r*i)/a):(s=1-r,l=r),e[0]=s*u+l*f,e[1]=s*c+l*p,e[2]=s*d+l*m,e[3]=s*h+l*g,e}function sy(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n*n+r*r+i*i+o*o,s=a?1/a:0;return e[0]=-n*s,e[1]=-r*s,e[2]=-i*s,e[3]=o*s,e}function ly(e,t,n,r){var i=.5*Math.PI/180;t*=i,n*=i,r*=i;var o=Math.sin(t),a=Math.cos(t),s=Math.sin(n),l=Math.cos(n),u=Math.sin(r),c=Math.cos(r);return e[0]=o*l*c-a*s*u,e[1]=a*s*c+o*l*u,e[2]=a*l*u-o*s*c,e[3]=a*l*c+o*s*u,e}var uy,cy,dy,hy,fy,py,my=sm,gy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},vy=oy,yy=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n*n+r*r+i*i+o*o;return a>0&&(a=1/Math.sqrt(a)),e[0]=n*a,e[1]=r*a,e[2]=i*a,e[3]=o*a,e};uy=wt(),cy=Et(1,0,0),dy=Et(0,1,0),hy=ry(),fy=ry(),py=L();function by(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vp(e);if(t){var i=Vp(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Up(this,n)}}var _y=function(e){Hp(n,e);var t=by(n);function n(e){var r,i,o,a,s,l,u,c,d,h,f,p,m,g,v;return wp(this,n),(r=t.call(this,e)).dirtyFlag=void 0,r.localDirtyFlag=void 0,r.parent=null,r.localPosition=Et(0,0,0),r.localRotation=my(0,0,0,1),r.localScale=Et(1,1,1),r.localTransform=vg(),r.position=Et(0,0,0),r.rotation=my(0,0,0,1),r.scaling=Et(1,1,1),r.worldTransform=vg(),r.matrixTransform=(i=vg(),function(e){wg(i,r.getLocalTransform(),e),Eg(r.localScale,i),Mg(r.localPosition,i),Sg(r.localRotation,i)}),r.rotateRollPitchYaw=(o=ry(),a=ry(),s=ry(),function(e,t,n){r.setDirty(),ly(o,e,0,0),ly(a,0,t,0),ly(s,0,0,n),oy(r.localRotation,o,r.localRotation),oy(r.localRotation,r.localRotation,a),oy(r.localRotation,s,r.localRotation),yy(r.localRotation,r.localRotation)}),r.lerp=(l=wt(),u=ry(),c=wt(),d=wt(),h=ry(),f=wt(),function(e,t,n){r.setDirty(),Eg(l,e.worldTransform),Mg(c,e.worldTransform),Sg(u,e.worldTransform),Eg(d,t.worldTransform),Mg(f,t.worldTransform),Sg(h,t.worldTransform),It(r.localScale,l,d,n),ay(r.localRotation,u,h,n),It(r.localPosition,c,f,n)}),r.translate=(p=wt(),function(e){return Tt(p,r.getPosition(),e),r.setPosition(p),r.setDirty(!0),Wp(r)}),r.translateLocal=function(e){return function(e,t,n){var r=n[0],i=n[1],o=n[2],a=n[3],s=t[0],l=t[1],u=t[2],c=i*u-o*l,d=o*s-r*u,h=r*l-i*s,f=i*h-o*d,p=o*c-r*h,m=r*d-i*c,g=2*a;c*=g,d*=g,h*=g,f*=2,p*=2,m*=2,e[0]=s+c+f,e[1]=l+d+p,e[2]=u+h+m}(e,e,r.localRotation),Tt(r.localPosition,r.localPosition,e),r.setLocalDirty(!0),Wp(r)},r.setPosition=(m=vg(),function(e){return r.position=e,r.setLocalDirty(!0),null===r.parent?St(r.localPosition,e):(yg(m,r.parent.worldTransform),_g(m,m),Rt(r.localPosition,e,m)),Wp(r)}),r.rotate=(g=ry(),function(e){if(null===r.parent)oy(r.localRotation,r.localRotation,e),yy(r.localRotation,r.localRotation);else{var t=r.getRotation(),n=r.parent.getRotation();gy(g,n),sy(g,g),oy(g,g,e),oy(r.localRotation,e,t),yy(r.localRotation,r.localRotation)}return r.setLocalDirty(),Wp(r)}),r.rotateLocal=function(e){return oy(r.localRotation,r.localRotation,e),yy(r.localRotation,r.localRotation),r.setLocalDirty(!0),Wp(r)},r.setRotation=(v=ry(),function(e){return null===r.parent?gy(r.localRotation,e):(gy(v,r.parent.getRotation()),sy(v,v),gy(r.localRotation,v),vy(r.localRotation,r.localRotation,e)),r.setLocalDirty(!0),Wp(r)}),r}return Mp(n,[{key:"setLocalPosition",value:function(e){St(this.localPosition,e),this.setLocalDirty(!0)}},{key:"setLocalScale",value:function(e){St(this.localScale,e),this.setLocalDirty(!0)}},{key:"setLocalRotation",value:function(e){return gy(this.localRotation,e),this.setLocalDirty(!0),this}},{key:"isDirty",value:function(){return this.dirtyFlag}},{key:"setDirty",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e?this.dirtyFlag|=n.DIRTY:this.dirtyFlag&=~n.DIRTY}},{key:"isLocalDirty",value:function(){return this.localDirtyFlag}},{key:"setLocalDirty",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e?(this.localDirtyFlag|=n.DIRTY,this.setDirty(!0)):this.localDirtyFlag&=~n.DIRTY}},{key:"updateTransform",value:function(){this.isLocalDirty()&&this.getLocalTransform(),this.isDirty()&&null===this.parent&&(yg(this.worldTransform,this.getLocalTransform()),this.setDirty(!1))}},{key:"updateTransformWithParent",value:function(e){wg(this.worldTransform,e.worldTransform,this.getLocalTransform())}},{key:"applyTransform",value:function(){this.setDirty(),Eg(this.localScale,this.worldTransform),Mg(this.localPosition,this.worldTransform),Sg(this.localRotation,this.worldTransform)}},{key:"clearTransform",value:function(){this.setDirty(),this.localPosition=Et(0,0,0),this.localRotation=my(0,0,0,1),this.localScale=Et(1,1,1)}},{key:"scaleLocal",value:function(e){return this.setLocalDirty(),Ct(this.localScale,this.localScale,e),this}},{key:"getLocalPosition",value:function(){return this.localPosition}},{key:"getLocalRotation",value:function(){return this.localRotation}},{key:"getLocalScale",value:function(){return this.localScale}},{key:"getLocalTransform",value:function(){return this.localDirtyFlag&&(!function(e,t,n,r){var i=t[0],o=t[1],a=t[2],s=t[3],l=i+i,u=o+o,c=a+a,d=i*l,h=i*u,f=i*c,p=o*u,m=o*c,g=a*c,v=s*l,y=s*u,b=s*c,_=r[0],w=r[1],x=r[2];e[0]=(1-(p+g))*_,e[1]=(h+b)*_,e[2]=(f-y)*_,e[3]=0,e[4]=(h-b)*w,e[5]=(1-(d+g))*w,e[6]=(m+v)*w,e[7]=0,e[8]=(f+y)*x,e[9]=(m-v)*x,e[10]=(1-(d+p))*x,e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1}(this.localTransform,this.localRotation,this.localPosition,this.localScale),this.setLocalDirty(!1)),this.localTransform}},{key:"getWorldTransform",value:function(){return this.isLocalDirty()||this.isDirty()?(this.parent&&this.parent.getWorldTransform(),this.updateTransform(),this.worldTransform):this.worldTransform}},{key:"getPosition",value:function(){return Mg(this.position,this.worldTransform),this.position}},{key:"getRotation",value:function(){return Sg(this.rotation,this.worldTransform),this.rotation}},{key:"getScale",value:function(){return Eg(this.scaling,this.worldTransform),this.scaling}}]),n}(Ap);_y.DIRTY=1;var wy,xy,My,Ey,Sy,ky,Ty=o(84879),Ly=(wy=(0,Np.b2)(),xy=(0,Np.f3)(Yp.RenderEngine),wy((ky=function(){function e(){wp(this,e),_p(this,"engine",Sy,this),this.resourcePool={}}return Mp(e,[{key:"getOrCreateResource",value:function(e){if(!this.resourcePool[e.name]){var t=e.descriptor,n=t.width,r=t.height,i=t.usage;this.resourcePool[e.name]=this.engine.createFramebuffer({color:this.engine.createTexture2D({width:n,height:r,wrapS:gm.CLAMP_TO_EDGE,wrapT:gm.CLAMP_TO_EDGE,usage:i})})}return this.resourcePool[e.name]}},{key:"clean",value:function(){this.resourcePool={}}}]),e}(),Sy=Ep((Ey=ky).prototype,"engine",[xy],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),My=Ey))||My);function Cy(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vp(e);if(t){var i=Vp(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Up(this,n)}}var Dy,Ay,Py,Oy,Iy=function(e){Hp(n,e);var t=Cy(n);function n(e){var r;return wp(this,n),(r=t.call(this,e)).name=void 0,r.name=e.name||"",r}return n}(Ap),Ry=(0,Np.b2)()((Ay=function(){function e(){wp(this,e),this.config=void 0}return Mp(e,[{key:"get",value:function(){return this.config}},{key:"set",value:function(e){this.config=e}}]),e}(),Dy=Ay))||Dy;!function(e){e.PANSTART="PANSTART",e.PANEND="PANEND",e.PANMOVE="PANMOVE",e.PINCH="PINCH",e.KEYDOWN="KEYDOWN",e.KEYUP="KEYUP",e.HOVER="HOVER"}(Oy||(Oy={}));var Ny=(0,Np.b2)()(Py=function(){function e(){wp(this,e)}return Mp(e,[{key:"listen",value:function(e){}},{key:"on",value:function(e,t){}},{key:"connect",value:function(){}},{key:"disconnect",value:function(){}},{key:"destroy",value:function(){}}]),e}())||Py;var Yy,jy,Fy=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g;function By(e){var t={};return e=e.replace(Fy,(function(e,n,r){var i=r.split(":"),o=i[0].trim(),a="";switch(i.length>1&&(a=i[1].trim()),n){case"bool":a="true"===a;break;case"float":case"int":a=Number(a);break;case"vec2":case"vec3":case"vec4":case"ivec2":case"ivec3":case"ivec4":case"mat2":case"mat3":case"mat4":a=a?a.replace("[","").replace("]","").split(",").reduce((function(e,t){return e.push(Number(t.trim())),e}),[]):new Array(function(e){var t=0;switch(e){case"vec2":case"ivec2":t=2;break;case"vec3":case"ivec3":t=3;break;case"vec4":case"ivec4":case"mat2":t=4;break;case"mat3":t=9;break;case"mat4":t=16}return t}(n)).fill(0)}return t[o]=a,"uniform ".concat(n," ").concat(o,";\n")})),{content:e,uniforms:t}}function zy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hy(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zy(Object(n),!0).forEach((function(t){om(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zy(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Gy=/precision\s+(high|low|medium)p\s+float/,Wy=/#pragma include (["^+"]?["\ "[a-zA-Z_0-9](.*)"]*?)/g,Uy=(0,Np.b2)()((jy=function(){function e(){wp(this,e),this.moduleCache={},this.rawContentCache={}}return Mp(e,[{key:"registerBuiltinModules",value:function(){this.destroy(),this.registerModule("picking",{vs:"attribute vec3 a_PickingColor;\nvarying vec4 v_PickingResult;\n\nuniform vec3 u_PickingColor : [0, 0, 0];\nuniform vec4 u_HighlightColor : [0, 0, 0, 0];\nuniform float u_PickingStage : 0.0;\nuniform float u_PickingThreshold : 1.0;\nuniform float u_PickingBuffer: 0.0;\n\n#define PICKING_ENCODE 1.0\n#define PICKING_HIGHLIGHT 2.0\n#define COLOR_SCALE 1. / 255.\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    abs(vertexColor.r - u_PickingColor.r) < u_PickingThreshold &&\n    abs(vertexColor.g - u_PickingColor.g) < u_PickingThreshold &&\n    abs(vertexColor.b - u_PickingColor.b) < u_PickingThreshold;\n}\n\nvoid setPickingColor(vec3 pickingColor) {\n  // compares only in highlight stage\n  v_PickingResult.a = float((u_PickingStage == PICKING_HIGHLIGHT) && isVertexPicked(pickingColor));\n\n  // Stores the picking color so that the fragment shader can render it during picking\n  v_PickingResult.rgb = pickingColor * COLOR_SCALE;\n}\n\nfloat setPickingSize(float x) {\n   return u_PickingStage == PICKING_ENCODE ? x + u_PickingBuffer : x;\n}",fs:"varying vec4 v_PickingResult;\nuniform vec4 u_HighlightColor : [0, 0, 0, 0];\nuniform float u_PickingStage : 0.0;\n\n#define PICKING_ENCODE 1.0\n#define PICKING_HIGHLIGHT 2.0\n#define COLOR_SCALE 1. / 255.\n\n/*\n * Returns highlight color if this item is selected.\n */\nvec4 filterHighlightColor(vec4 color) {\n  bool selected = bool(v_PickingResult.a);\n\n  if (selected) {\n    vec4 highLightColor = u_HighlightColor * COLOR_SCALE;\n\n    float highLightAlpha = highLightColor.a;\n    float highLightRatio = highLightAlpha / (highLightAlpha + color.a * (1.0 - highLightAlpha));\n\n    vec3 resultRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);\n    return vec4(resultRGB, color.a);\n  } else {\n    return color;\n  }\n}\n\n/*\n * Returns picking color if picking enabled else unmodified argument.\n */\nvec4 filterPickingColor(vec4 color) {\n  vec3 pickingColor = v_PickingResult.rgb;\n  if (u_PickingStage == PICKING_ENCODE && length(pickingColor) < 0.001) {\n    discard;\n  }\n  return u_PickingStage == PICKING_ENCODE ? vec4(pickingColor, step(0.001,color.a)): color;\n}\n\n/*\n * Returns picking color if picking is enabled if not\n * highlight color if this item is selected, otherwise unmodified argument.\n */\nvec4 filterColor(vec4 color) {\n  return filterPickingColor(filterHighlightColor(color));\n}\n"}),this.registerModule("sdf2d",{vs:"",fs:"/**\n * 2D signed distance field functions\n * @see http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm\n */\n\nfloat ndot(vec2 a, vec2 b ) { return a.x*b.x - a.y*b.y; }\n\nfloat sdCircle(vec2 p, float r) {\n  return length(p) - r;\n}\n\nfloat sdEquilateralTriangle(vec2 p) {\n  float k = sqrt(3.0);\n  p.x = abs(p.x) - 1.0;\n  p.y = p.y + 1.0/k;\n  if( p.x + k*p.y > 0.0 ) p = vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;\n  p.x -= clamp( p.x, -2.0, 0.0 );\n  return -length(p)*sign(p.y);\n}\n\nfloat sdBox(vec2 p, vec2 b) {\n  vec2 d = abs(p)-b;\n  return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0);\n}\n\nfloat sdPentagon(vec2 p, float r) {\n  vec3 k = vec3(0.809016994,0.587785252,0.726542528);\n  p.x = abs(p.x);\n  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);\n  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);\n  p -= vec2(clamp(p.x,-r*k.z,r*k.z),r);\n  return length(p)*sign(p.y);\n}\n\nfloat sdHexagon(vec2 p, float r) {\n  vec3 k = vec3(-0.866025404,0.5,0.577350269);\n  p = abs(p);\n  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;\n  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);\n  return length(p)*sign(p.y);\n}\n\nfloat sdOctogon(vec2 p, float r) {\n  vec3 k = vec3(-0.9238795325, 0.3826834323, 0.4142135623 );\n  p = abs(p);\n  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);\n  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);\n  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);\n  return length(p)*sign(p.y);\n}\n\nfloat sdHexagram(vec2 p, float r) {\n  vec4 k=vec4(-0.5,0.8660254038,0.5773502692,1.7320508076);\n  p = abs(p);\n  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;\n  p -= 2.0*min(dot(k.yx,p),0.0)*k.yx;\n  p -= vec2(clamp(p.x,r*k.z,r*k.w),r);\n  return length(p)*sign(p.y);\n}\n\nfloat sdRhombus(vec2 p, vec2 b) {\n  vec2 q = abs(p);\n  float h = clamp((-2.0*ndot(q,b)+ndot(b,b))/dot(b,b),-1.0,1.0);\n  float d = length( q - 0.5*b*vec2(1.0-h,1.0+h) );\n  return d * sign( q.x*b.y + q.y*b.x - b.x*b.y );\n}\n\nfloat sdVesica(vec2 p, float r, float d) {\n  p = abs(p);\n  float b = sqrt(r*r-d*d); // can delay this sqrt\n  return ((p.y-b)*d>p.x*b)\n          ? length(p-vec2(0.0,b))\n          : length(p-vec2(-d,0.0))-r;\n}"})}},{key:"registerModule",value:function(e,t){if(!this.rawContentCache[e]){var n=t.vs,r=void 0===n?"":n,i=t.fs,o=void 0===i?"":i,a=t.uniforms,s=By(r),l=s.content,u=s.uniforms,c=By(o),d=c.content,h=c.uniforms;this.rawContentCache[e]={fs:d,uniforms:Hy(Hy(Hy({},u),h),a),vs:l}}}},{key:"destroy",value:function(){this.moduleCache={},this.rawContentCache={}}},{key:"getModule",value:function(e){var t=this;if(this.moduleCache[e])return this.moduleCache[e];var n=this.rawContentCache[e].vs||"",r=this.rawContentCache[e].fs||"",i=this.processModule(n,[],"vs"),o=i.content,a=i.includeList,s=this.processModule(r,[],"fs"),l=s.content,u=s.includeList,c=l,d=function(e){return e.filter((function(e,t,n){return n.indexOf(e)===t}))}(a.concat(u).concat(e)).reduce((function(e,n){return Hy(Hy({},e),t.rawContentCache[n].uniforms)}),{});return Gy.test(l)||(c="#ifdef GL_FRAGMENT_PRECISION_HIGH\n precision highp float;\n #else\n precision mediump float;\n#endif\n"+l),this.moduleCache[e]={fs:c.trim(),uniforms:d,vs:o.trim()},this.moduleCache[e]}},{key:"processModule",value:function(e,t,n){var r=this;return{content:e.replace(Wy,(function(e,i){var o=i.split(" ")[0].replace(/"/g,"");if(t.indexOf(o)>-1)return"";var a=r.rawContentCache[o][n];return t.push(o),r.processModule(a||"",t,n).content})),includeList:t}}}]),e}(),Yy=jy))||Yy,Vy=new Np.W2;(0,Ty.Z)(Vy,!1);function Xy(){var e=new Np.W2;return e.parent=Vy,e.bind(Yp.Systems).to(ny).inSingletonScope().whenTargetNamed(Yp.SceneGraphSystem),e.bind(Yp.Systems).to(im).inSingletonScope().whenTargetNamed(Yp.FrameGraphSystem),e.bind(Yp.Systems).to(gg).inSingletonScope().whenTargetNamed(Yp.MeshSystem),e.bind(Yp.Systems).to(km).inSingletonScope().whenTargetNamed(Yp.GeometrySystem),e.bind(Yp.Systems).to(Wm).inSingletonScope().whenTargetNamed(Yp.MaterialSystem),e.bind(Yp.Systems).to(Gv).inSingletonScope().whenTargetNamed(Yp.RendererSystem),e.bind(Yp.ResourcePool).to(Ly).inSingletonScope(),e.bind(Yp.ConfigService).to(Ry).inSingletonScope(),e.bind(Yp.InteractorService).to(Ny).inSingletonScope(),e.bind(Yp.RenderPass).to(pv).inSingletonScope().whenTargetNamed(pv.IDENTIFIER),e.bind(Yp.RenderPass).to(Hv).inSingletonScope().whenTargetNamed(Hv.IDENTIFIER),e.bind(Yp.RenderPass).to(zv).inSingletonScope().whenTargetNamed(zv.IDENTIFIER),e.bind(Yp.RenderPassFactory).toFactory((function(e){return function(t){return e.container.getNamed(Yp.RenderPass,t)}})),e}function qy(e){for(var t=new Xm,n=Et(e[0],e[1],e[2]),r=Et(e[0],e[1],e[2]),i=3;i<e.length;){var o=e[i++],a=e[i++],s=e[i++];o<n[0]&&(n[0]=o),a<n[1]&&(n[1]=a),s<n[2]&&(n[2]=s),o>r[0]&&(r[0]=o),a>r[1]&&(r[1]=a),s>r[2]&&(r[2]=s)}return t.setMinMax(n,r),t}Vy.bind(Yp.ShaderModuleService).to(Uy).inSingletonScope(),Vy.bind(Yp.NameComponentManager).toConstantValue(new Pp(Iy)),Vy.bind(Yp.HierarchyComponentManager).toConstantValue(new Pp(ty)),Vy.bind(Yp.TransformComponentManager).toConstantValue(new Pp(_y)),Vy.bind(Yp.MeshComponentManager).toConstantValue(new Pp(Jm)),Vy.bind(Yp.CullableComponentManager).toConstantValue(new Pp(Vm)),Vy.bind(Yp.GeometryComponentManager).toConstantValue(new Pp(Sm)),Vy.bind(Yp.MaterialComponentManager).toConstantValue(new Pp(Bm));var Ky,Jy="undefined"!=typeof navigator&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent);wt(),wt(),wt(),wt(),wt(),wt(),o(59518),o(26199),o(14156),o(71468),o(48871),o(9871);!function(e){e.Normal="normal",e.PostProcessing="post-processing"}(Ky||(Ky={}));var Zy,$y,Qy,eb;o(25612),o(92777),o(20159),o(61622),o(20499),o(64851);!function(e){e.Void="Void",e.Boolean="Boolean",e.Float="Float",e.Uint32="Uint32",e.Int32="Int32",e.Vector="Vector",e.Vector2Float="vec2<f32>",e.Vector3Float="vec3<f32>",e.Vector4Float="vec4<f32>",e.Vector2Boolean="vec2<bool>",e.Vector3Boolean="vec3<bool>",e.Vector4Boolean="vec4<bool>",e.Vector2Uint="vec2<u32>",e.Vector3Uint="vec3<u32>",e.Vector4Uint="vec4<u32>",e.Vector2Int="vec2<i32>",e.Vector3Int="vec3<i32>",e.Vector4Int="vec4<i32>",e.Matrix="Matrix",e.Matrix3x3Float="mat3x3<f32>",e.Matrix4x4Float="mat4x4<i32>",e.Struct="Struct",e.FloatArray="Float[]",e.Vector4FloatArray="vec4<f32>[]"}(Zy||(Zy={})),function(e){e.Program="Program",e.Identifier="Identifier",e.VariableDeclaration="VariableDeclaration",e.BlockStatement="BlockStatement",e.ReturnStatement="ReturnStatement",e.FunctionDeclaration="FunctionDeclaration",e.VariableDeclarator="VariableDeclarator",e.AssignmentExpression="AssignmentExpression",e.LogicalExpression="LogicalExpression",e.BinaryExpression="BinaryExpression",e.ArrayExpression="ArrayExpression",e.UnaryExpression="UnaryExpression",e.UpdateExpression="UpdateExpression",e.FunctionExpression="FunctionExpression",e.MemberExpression="MemberExpression",e.ConditionalExpression="ConditionalExpression",e.ExpressionStatement="ExpressionStatement",e.CallExpression="CallExpression",e.NumThreadStatement="NumThreadStatement",e.StorageStatement="StorageStatement",e.DoWhileStatement="DoWhileStatement",e.WhileStatement="WhileStatement",e.ForStatement="ForStatement",e.BreakStatement="BreakStatement",e.ContinueStatement="ContinueStatement",e.IfStatement="IfStatement",e.ImportedFunctionStatement="ImportedFunctionStatement"}($y||($y={})),function(e){e.Input="Input",e.Output="Output",e.Uniform="Uniform",e.Workgroup="Workgroup",e.UniformConstant="UniformConstant",e.Image="Image",e.StorageBuffer="StorageBuffer",e.Private="Private",e.Function="Function"}(Qy||(Qy={})),function(e){e.GLSL100="GLSL100",e.GLSL450="GLSL450",e.WGSL="WGSL"}(eb||(eb={}));function tb(e){return"number"==typeof e}function nb(e){return void 0===e?0:e>360||e<-360?e%360:e}function rb(e,t,n){return tb(e)?Et(e,t,n):3===e.length?xt(e):Et(e[0],e[1],e[2])}var ib,ob,ab,sb,lb,ub,cb,db,hb,fb,pb=function(){function e(t,n){wp(this,e),this.name=void 0,this.matrix=void 0,this.right=void 0,this.up=void 0,this.forward=void 0,this.position=void 0,this.focalPoint=void 0,this.distanceVector=void 0,this.distance=void 0,this.dollyingStep=void 0,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.name=t,this.matrix=function(e){var t=new T(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}(n.matrix),this.right=xt(n.right),this.up=xt(n.up),this.forward=xt(n.forward),this.position=xt(n.position),this.focalPoint=xt(n.focalPoint),this.distanceVector=xt(n.distanceVector),this.azimuth=n.azimuth,this.elevation=n.elevation,this.roll=n.roll,this.relAzimuth=n.relAzimuth,this.relElevation=n.relElevation,this.relRoll=n.relRoll,this.dollyingStep=n.dollyingStep,this.distance=n.distance}return Mp(e,[{key:"getPosition",value:function(){return this.position}},{key:"getFocalPoint",value:function(){return this.focalPoint}},{key:"getRoll",value:function(){return this.roll}},{key:"retrieve",value:function(e){e.matrix=yg(e.matrix,this.matrix),e.right=St(e.right,this.right),e.up=St(e.up,this.up),e.forward=St(e.forward,this.forward),e.position=St(e.position,this.position),e.focalPoint=St(e.focalPoint,this.focalPoint),e.distanceVector=St(e.distanceVector,this.distanceVector),e.azimuth=this.azimuth,e.elevation=this.elevation,e.roll=this.roll,e.relAzimuth=this.relAzimuth,e.relElevation=this.relElevation,e.relRoll=this.relRoll,e.dollyingStep=this.dollyingStep,e.distance=this.distance}}]),e}();!function(e){e.ORBITING="ORBITING",e.EXPLORING="EXPLORING",e.TRACKING="TRACKING"}(db||(db={})),function(e){e.DEFAULT="DEFAULT",e.ROTATIONAL="ROTATIONAL",e.TRANSLATIONAL="TRANSLATIONAL",e.CINEMATIC="CINEMATIC"}(hb||(hb={})),function(e){e.ORTHOGRAPHIC="ORTHOGRAPHIC",e.PERSPECTIVE="PERSPECTIVE"}(fb||(fb={}));var mb,gb,vb,yb,bb,_b,wb,xb=Math.PI/180,Mb=180/Math.PI,Eb=(ib=(0,Np.b2)(),ob=(0,Np.f3)(Yp.InteractorService),ib((cb=ub=function(){function e(){wp(this,e),this.matrix=vg(),this.right=Et(1,0,0),this.up=Et(0,1,0),this.forward=Et(0,0,1),this.position=Et(0,0,1),this.focalPoint=Et(0,0,0),this.distanceVector=Et(0,0,0),this.distance=1,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.dollyingStep=0,this.maxDistance=1/0,this.minDistance=-1/0,this.rotateWorld=!1,_p(this,"interactor",lb,this),this.fov=30,this.near=.1,this.far=1e4,this.aspect=1,this.left=void 0,this.rright=void 0,this.top=void 0,this.bottom=void 0,this.zoom=1,this.perspective=vg(),this.view=void 0,this.following=void 0,this.type=db.EXPLORING,this.trackingMode=hb.DEFAULT,this.projectionMode=fb.PERSPECTIVE,this.frustum=new hg,this.landmarks=[],this.landmarkAnimationID=void 0}return Mp(e,[{key:"clone",value:function(){var t=new e;return t.setType(this.type,void 0),t.interactor=this.interactor,t}},{key:"getProjectionMode",value:function(){return this.projectionMode}},{key:"getPerspective",value:function(){return this.perspective}},{key:"getFrustum",value:function(){return this.frustum}},{key:"getPosition",value:function(){return this.position}},{key:"setType",value:function(e,t){return this.type=e,this.type===db.EXPLORING?this.setWorldRotation(!0):this.setWorldRotation(!1),this._getAngles(),this.type===db.TRACKING&&void 0!==t&&this.setTrackingMode(t),this}},{key:"setProjectionMode",value:function(e){return this.projectionMode=e,this}},{key:"setTrackingMode",value:function(e){if(this.type!==db.TRACKING)throw new Error("Impossible to set a tracking mode if the camera is not of tracking type");return this.trackingMode=e,this}},{key:"setWorldRotation",value:function(e){this.rotateWorld=e,this._getAngles()}},{key:"getViewTransform",value:function(){return _g(vg(),this.matrix)}},{key:"getWorldTransform",value:function(){return this.matrix}},{key:"setMatrix",value:function(e){return this.matrix=e,this._update(),this}},{key:"setAspect",value:function(e){return this.setPerspective(this.near,this.far,this.fov,e),this}},{key:"setViewOffset",value:function(e,t,n,r,i,o){return this.aspect=e/t,void 0===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.projectionMode===fb.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"clearViewOffset",value:function(){return void 0!==this.view&&(this.view.enabled=!1),this.projectionMode===fb.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"setPerspective",value:function(e,t,n,r){return this.projectionMode=fb.PERSPECTIVE,this.fov=n,this.near=e,this.far=t,this.aspect=r,Tg(this.perspective,this.fov*xb,this.aspect,this.near,this.far),this}},{key:"setOrthographic",value:function(e,t,n,r,i,o){this.projectionMode=fb.ORTHOGRAPHIC,this.rright=t,this.left=e,this.top=n,this.bottom=r,this.near=i,this.far=o;var a=(this.rright-this.left)/(2*this.zoom),s=(this.top-this.bottom)/(2*this.zoom),l=(this.rright+this.left)/2,u=(this.top+this.bottom)/2,c=l-a,d=l+a,h=u+s,f=u-s;if(void 0!==this.view&&this.view.enabled){var p=(this.rright-this.left)/this.view.fullWidth/this.zoom,m=(this.top-this.bottom)/this.view.fullHeight/this.zoom;d=(c+=p*this.view.offsetX)+p*this.view.width,f=(h-=m*this.view.offsetY)-m*this.view.height}return Lg(this.perspective,c,d,h,f,i,o),this}},{key:"setPosition",value:function(e,t,n){return this._setPosition(e,t,n),this.setFocalPoint(this.focalPoint),this}},{key:"setFocalPoint",value:function(e,t,n){var r=Et(0,1,0);if(this.focalPoint=rb(e,t,n),this.trackingMode===hb.CINEMATIC){var i=Lt(wt(),this.focalPoint,this.position);e=i[0],t=i[1],n=i[2];var o=Mt(i),a=Math.asin(t/o)*Mb,s=90+Math.atan2(n,e)*Mb,l=vg();!function(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],a=t[1],s=t[2],l=t[3],u=t[8],c=t[9],d=t[10],h=t[11];t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i-u*r,e[1]=a*i-c*r,e[2]=s*i-d*r,e[3]=l*i-h*r,e[8]=o*r+u*i,e[9]=a*r+c*i,e[10]=s*r+d*i,e[11]=l*r+h*i}(l,l,s*xb),function(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[4],a=t[5],s=t[6],l=t[7],u=t[8],c=t[9],d=t[10],h=t[11];t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*i+u*r,e[5]=a*i+c*r,e[6]=s*i+d*r,e[7]=l*i+h*r,e[8]=u*i-o*r,e[9]=c*i-a*r,e[10]=d*i-s*r,e[11]=h*i-l*r}(l,l,a*xb),r=Rt(wt(),[0,1,0],l)}return _g(this.matrix,function(e,t,n,r){var i,o,a,s,l,u,c,d,h,f,p=t[0],m=t[1],g=t[2],v=r[0],y=r[1],b=r[2],_=n[0],w=n[1],x=n[2];return Math.abs(p-_)<k&&Math.abs(m-w)<k&&Math.abs(g-x)<k?bg(e):(c=p-_,d=m-w,h=g-x,i=y*(h*=f=1/Math.hypot(c,d,h))-b*(d*=f),o=b*(c*=f)-v*h,a=v*d-y*c,(f=Math.hypot(i,o,a))?(i*=f=1/f,o*=f,a*=f):(i=0,o=0,a=0),s=d*a-h*o,l=h*i-c*a,u=c*o-d*i,(f=Math.hypot(s,l,u))?(s*=f=1/f,l*=f,u*=f):(s=0,l=0,u=0),e[0]=i,e[1]=s,e[2]=c,e[3]=0,e[4]=o,e[5]=l,e[6]=d,e[7]=0,e[8]=a,e[9]=u,e[10]=h,e[11]=0,e[12]=-(i*p+o*m+a*g),e[13]=-(s*p+l*m+u*g),e[14]=-(c*p+d*m+h*g),e[15]=1,e)}(vg(),this.position,this.focalPoint,r)),this._getAxes(),this._getDistance(),this._getAngles(),this}},{key:"setDistance",value:function(e){if(!(this.distance===e||e<0)){this.distance=e,this.distance<2e-4&&(this.distance=2e-4),this.dollyingStep=this.distance/100;var t=wt();e=this.distance;var n=this.forward,r=this.focalPoint;return t[0]=e*n[0]+r[0],t[1]=e*n[1]+r[1],t[2]=e*n[2]+r[2],this._setPosition(t),this}}},{key:"setMaxDistance",value:function(e){return this.maxDistance=e,this}},{key:"setMinDistance",value:function(e){return this.minDistance=e,this}},{key:"changeAzimuth",value:function(e){return this.setAzimuth(this.azimuth+e),this}},{key:"changeElevation",value:function(e){return this.setElevation(this.elevation+e),this}},{key:"changeRoll",value:function(e){return this.setRoll(this.roll+e),this}},{key:"setAzimuth",value:function(e){return this.azimuth=nb(e),this.computeMatrix(),this._getAxes(),this.type===db.ORBITING||this.type===db.EXPLORING?this._getPosition():this.type===db.TRACKING&&this._getFocalPoint(),this}},{key:"getAzimuth",value:function(){return this.azimuth}},{key:"setElevation",value:function(e){return this.elevation=nb(e),this.computeMatrix(),this._getAxes(),this.type===db.ORBITING||this.type===db.EXPLORING?this._getPosition():this.type===db.TRACKING&&this._getFocalPoint(),this}},{key:"setRoll",value:function(e){return this.roll=nb(e),this.computeMatrix(),this._getAxes(),this.type===db.ORBITING||this.type===db.EXPLORING?this._getPosition():this.type===db.TRACKING&&this._getFocalPoint(),this}},{key:"rotate",value:function(e,t,n){if(this.type===db.EXPLORING){e=nb(e),t=nb(t),n=nb(n);var r=iy(ry(),[1,0,0],(this.rotateWorld?1:-1)*t*xb),i=iy(ry(),[0,1,0],(this.rotateWorld?1:-1)*e*xb),o=iy(ry(),[0,0,1],n*xb),a=oy(ry(),i,r);a=oy(ry(),a,o);var s=kg(vg(),a);xg(this.matrix,this.matrix,[0,0,-this.distance]),wg(this.matrix,this.matrix,s),xg(this.matrix,this.matrix,[0,0,this.distance])}else{if(Math.abs(this.elevation+t)>90)return;this.relElevation=nb(t),this.relAzimuth=nb(e),this.relRoll=nb(n),this.elevation+=this.relElevation,this.azimuth+=this.relAzimuth,this.roll+=this.relRoll,this.computeMatrix()}return this._getAxes(),this.type===db.ORBITING||this.type===db.EXPLORING?this._getPosition():this.type===db.TRACKING&&this._getFocalPoint(),this._update(),this}},{key:"pan",value:function(e,t){var n=rb(e,t,0),r=xt(this.position);return Tt(r,r,Dt(wt(),this.right,n[0])),Tt(r,r,Dt(wt(),this.up,n[1])),this._setPosition(r),this}},{key:"dolly",value:function(e){var t=this.forward,n=xt(this.position),r=this.dollyingStep,i=this.distance+e*this.dollyingStep;return r=Math.max(Math.min(i,this.maxDistance),this.minDistance)-this.distance,n[0]+=r*t[0],n[1]+=r*t[1],n[2]+=r*t[2],this._setPosition(n),this.type===db.ORBITING||this.type===db.EXPLORING?this._getDistance():this.type===db.TRACKING&&Tt(this.focalPoint,n,this.distanceVector),this}},{key:"createLandmark",value:function(e,t){var n=this.clone();n.setPosition(t.position),n.setFocalPoint(t.focalPoint),void 0!==t.roll&&n.setRoll(t.roll);var r=new pb(e,n);return this.landmarks.push(r),r}},{key:"setLandmark",value:function(e){var t=new pb(e,this);return this.landmarks.push(t),this}},{key:"gotoLandmark",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,r=this.landmarks.find((function(t){return t.name===e}));if(r){if(0===n)return void r.retrieve(this);void 0!==this.landmarkAnimationID&&window.cancelAnimationFrame(this.landmarkAnimationID),this.interactor.disconnect();var i,o=r.getPosition(),a=r.getFocalPoint(),s=r.getRoll(),l=function e(r){void 0===i&&(i=r);var l,u=r-i,c=(1-Math.cos(u/n*Math.PI))/2,d=wt(),h=wt();if(It(d,t.focalPoint,a,c),It(h,t.position,o,c),l=t.roll*(1-c)+s*c,t.setFocalPoint(d),t.setPosition(h),t.setRoll(l),t.computeMatrix(),!(Ft(d,a)+Ft(h,o)>.01))return t.setFocalPoint(d),t.setPosition(h),t.setRoll(l),t.computeMatrix(),void t.interactor.connect();u<n&&(t.landmarkAnimationID=window.requestAnimationFrame(e))};window.requestAnimationFrame(l)}}},{key:"_update",value:function(){this._getAxes(),this._getPosition(),this._getDistance(),this._getAngles()}},{key:"computeMatrix",value:function(){var e,t,n=iy(ry(),[0,0,1],this.roll*xb);bg(this.matrix),e=iy(ry(),[1,0,0],(this.rotateWorld&&this.type!==db.TRACKING||this.type===db.TRACKING?1:-1)*this.elevation*xb),t=iy(ry(),[0,1,0],(this.rotateWorld&&this.type!==db.TRACKING||this.type===db.TRACKING?1:-1)*this.azimuth*xb);var r=oy(ry(),t,e);r=oy(ry(),r,n);var i=kg(vg(),r);this.type===db.ORBITING||this.type===db.EXPLORING?(xg(this.matrix,this.matrix,this.focalPoint),wg(this.matrix,this.matrix,i),xg(this.matrix,this.matrix,[0,0,this.distance])):this.type===db.TRACKING&&(xg(this.matrix,this.matrix,this.position),wg(this.matrix,this.matrix,i))}},{key:"_setPosition",value:function(e,t,n){this.position=rb(e,t,n);var r=this.matrix;r[12]=this.position[0],r[13]=this.position[1],r[14]=this.position[2],r[15]=1}},{key:"_getAxes",value:function(){St(this.right,rb(lm(am(),[1,0,0,0],this.matrix))),St(this.up,rb(lm(am(),[0,1,0,0],this.matrix))),St(this.forward,rb(lm(am(),[0,0,1,0],this.matrix))),At(this.right,this.right),At(this.up,this.up),At(this.forward,this.forward)}},{key:"_getAngles",value:function(){var e=this.distanceVector[0],t=this.distanceVector[1],n=this.distanceVector[2],r=Mt(this.distanceVector);if(0===r)return this.elevation=0,void(this.azimuth=0);this.type===db.TRACKING||this.rotateWorld?(this.elevation=Math.asin(t/r)*Mb,this.azimuth=Math.atan2(-e,-n)*Mb):(this.elevation=-Math.asin(t/r)*Mb,this.azimuth=-Math.atan2(-e,-n)*Mb)}},{key:"_getPosition",value:function(){St(this.position,rb(lm(am(),[0,0,0,1],this.matrix))),this._getDistance()}},{key:"_getFocalPoint",value:function(){Nt(this.distanceVector,[0,0,-this.distance],C(L(),this.matrix)),Tt(this.focalPoint,this.position,this.distanceVector),this._getDistance()}},{key:"_getDistance",value:function(){this.distanceVector=Lt(wt(),this.focalPoint,this.position),this.distance=Mt(this.distanceVector),this.dollyingStep=this.distance/100}}]),e}(),ub.ProjectionMode={ORTHOGRAPHIC:"ORTHOGRAPHIC",PERSPECTIVE:"PERSPECTIVE"},lb=Ep((sb=cb).prototype,"interactor",[ob],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ab=sb))||ab),Sb=(mb=(0,Np.b2)(),gb=(0,Np.f3)(Yp.GeometryComponentManager),mb((wb=_b=function(){function e(){wp(this,e),this.config=void 0,_p(this,"geometry",bb,this),this.entity=void 0,this.component=void 0}return Mp(e,[{key:"getEntity",value:function(){return this.entity}},{key:"getComponent",value:function(){return this.component}},{key:"setConfig",value:function(e){this.config=e}},{key:"setEntity",value:function(e){this.entity=e,this.component=this.geometry.create(e),this.component.entity=e,this.onEntityCreated()}},{key:"onEntityCreated",value:function(){}}]),e}(),_b.BOX="box",_b.SPHERE="sphere",_b.PLANE="plane",_b.MERGED="merged",bb=Ep((yb=wb).prototype,"geometry",[gb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vb=yb))||vb),kb=o(49469);function Tb(){if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}var Lb={}.toString;const Cb=function(e,t){return Lb.call(e)==="[object "+t+"]"};var Db=9007199254740991,Ab={};Ab["[object Float32Array]"]=Ab["[object Float64Array]"]=Ab["[object Int8Array]"]=Ab["[object Int16Array]"]=Ab["[object Int32Array]"]=Ab["[object Uint8Array]"]=Ab["[object Uint8ClampedArray]"]=Ab["[object Uint16Array]"]=Ab["[object Uint32Array]"]=!0,Ab["[object Arguments]"]=Ab["[object Array]"]=Ab["[object ArrayBuffer]"]=Ab["[object Boolean]"]=Ab["[object DataView]"]=Ab["[object Date]"]=Ab["[object Error]"]=Ab["[object Function]"]=Ab["[object Map]"]=Ab["[object Number]"]=Ab["[object Object]"]=Ab["[object RegExp]"]=Ab["[object Set]"]=Ab["[object String]"]=Ab["[object WeakMap]"]=!1;var Pb=Object.prototype.toString;var Ob,Ib,Rb,Nb,Yb,jb,Fb,Bb,zb=function(e){return function(e){return!!e&&"object"===Gp(e)}(e)&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Db}(e.length)&&!!Ab[Pb.call(e)]};function Hb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hb(Object(n),!0).forEach((function(t){om(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Wb,Ub,Vb,Xb,qb,Kb,Jb,Zb,$b,Qb,e_,t_,n_,r_,i_,o_,a_,s_,l_,u_,c_,d_,h_,f_,p_,m_,g_,v_,y_,b_,__,w_,x_,M_,E_,S_=(Ob=(0,Np.b2)(),Ib=(0,Np.f3)(Yp.RenderEngine),Rb=(0,Np.f3)(Yp.ConfigService),Ob((Bb=function(){function e(){wp(this,e),_p(this,"engine",jb,this),_p(this,"configService",Fb,this),this.entity=Dp(),this.model=void 0,this.dirty=!0,this.compiledBundle=void 0,this.initPromise=void 0}var t,n,r;return Mp(e,[{key:"init",value:function(){var e=this.configService.get(),t=e.canvas,n=e.engineOptions;this.initPromise=this.engine.init(Gb({canvas:t||Tb(),swapChainFormat:kb.EV.BGRA8Unorm,antialiasing:!1},n))}},{key:"setBundle",value:function(e){this.compiledBundle=JSON.parse(JSON.stringify(e))}},{key:"setDispatch",value:function(e){return this.compiledBundle.context&&(this.compiledBundle.context.dispatch=e),this}},{key:"setMaxIteration",value:function(e){return this.compiledBundle.context&&(this.compiledBundle.context.maxIteration=e),this}},{key:"setBinding",value:function(e,t){var n=this;if("string"==typeof e){var r=tb(t)||zb(t)||function(e){return Array.isArray?Array.isArray(e):Cb(e,"Array")}(t);if(this.compiledBundle&&this.compiledBundle.context){var i=this.compiledBundle.context.defines.find((function(t){return t.name===e}));if(i)return i.value=t,this;var o=this.compiledBundle.context.uniforms.find((function(t){return t.name===e}));o&&(r?(o.data=t,o.isReferer=!1,o.storageClass===Qy.Uniform?this.model&&this.model.updateUniform(e,t):this.model&&this.model.updateBuffer(e,t)):(o.isReferer=!0,o.data=t))}}else Object.keys(e).forEach((function(t){n.setBinding(t,e[t])}));return this}},{key:"execute",value:(r=Lp(kp().mark((function e(){var t,n,r=this,i=arguments;return kp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.length>0&&void 0!==i[0]?i[0]:1,!this.dirty){e.next=6;break}return this.compiledBundle.context&&(t>1?this.compiledBundle.context.maxIteration=t:this.compiledBundle.context.maxIteration++),e.next=5,this.compile();case 5:this.dirty=!1;case 6:for(this.engine.beginFrame(),this.engine.clear({}),this.compiledBundle.context&&this.compiledBundle.context.uniforms.filter((function(e){return e.isReferer})).forEach((function(e){var t=e.data,n=e.name;r.model.confirmInput(t.model,n)})),n=0;n<t;n++)this.model.run();return this.engine.endFrame(),e.abrupt("return",this);case 12:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"getOutput",value:(n=Lp(kp().mark((function e(){return kp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.model.readData());case 1:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"compile",value:(t=Lp(kp().mark((function e(){var t,n,r;return kp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:return t=Gb({},this.compiledBundle.context),n=this.engine.supportWebGPU?this.engine.useWGSL?eb.WGSL:eb.GLSL450:eb.GLSL100,r=this.compiledBundle.shaders[n],t.defines.filter((function(e){return e.runtime})).forEach((function(e){var t="".concat("__DefineValuePlaceholder__").concat(e.name);r=r.replace(t,"".concat(e.value))})),t.shader=r,t.uniforms.forEach((function(e){if(!e.data&&e.storageClass===Qy.StorageBuffer){var n=1;e.type===Zy.FloatArray?n=1:e.type===Zy.Vector4FloatArray&&(n=4),e.data=new Float32Array(t.output.length*n).fill(0)}})),this.compiledBundle.context=t,e.next=11,this.engine.createComputeModel(this.compiledBundle.context);case 11:this.model=e.sent;case 12:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}(),jb=Ep((Yb=Bb).prototype,"engine",[Ib],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fb=Ep(Yb.prototype,"configService",[Rb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Nb=Yb))||Nb),k_=(Wb=(0,Np.b2)(),Ub=(0,Np.f3)(Yp.MaterialComponentManager),Wb((Jb=Kb=function(){function e(){wp(this,e),this.config=void 0,_p(this,"material",qb,this),this.entity=void 0,this.component=void 0}return Mp(e,[{key:"getEntity",value:function(){return this.entity}},{key:"getComponent",value:function(){return this.component}},{key:"setConfig",value:function(e){this.config=e}},{key:"setEntity",value:function(e,t){this.entity=e,this.component=this.material.create(e),this.component.entity=e,this.component.type=t,this.onEntityCreated()}},{key:"onEntityCreated",value:function(){}}]),e}(),Kb.BASIC="basic",qb=Ep((Xb=Jb).prototype,"material",[Ub],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Vb=Xb))||Vb),T_=(Zb=(0,Np.b2)(),$b=(0,Np.f3)(Yp.MeshComponentManager),Qb=(0,Np.f3)(Yp.CullableComponentManager),e_=(0,Np.f3)(Yp.TransformComponentManager),t_=(0,Np.f3)(Yp.Systems),n_=(0,Np.t6)(Yp.SceneGraphSystem),Zb((c_=u_=function(){function e(){wp(this,e),this.attributes={},this.config=void 0,_p(this,"mesh",o_,this),_p(this,"cullable",a_,this),_p(this,"transform",s_,this),_p(this,"sceneGraphSystem",l_,this),this.meshComponent=void 0,this.transformComponent=void 0,this.entity=void 0}return Mp(e,[{key:"getEntity",value:function(){return this.entity}},{key:"getTransformComponent",value:function(){return this.transformComponent}},{key:"getMeshComponent",value:function(){return this.meshComponent}},{key:"setConfig",value:function(e){this.config=e}},{key:"setEntity",value:function(e){this.entity=e,this.cullable.create(e),this.meshComponent=this.mesh.create(e),this.transformComponent=this.transform.create(e),this.onEntityCreated()}},{key:"setMaterial",value:function(e){return this.meshComponent.material=e,this}},{key:"setGeometry",value:function(e){return this.meshComponent.geometry=e,this}},{key:"setAttributes",value:function(e){var t=this;Object.keys(e).forEach((function(n){void 0!==e[n]&&e[n]!==t.attributes[n]&&(t.onAttributeChanged({name:n,data:e[n]}),t.attributes[n]=e[n])}))}},{key:"setVisible",value:function(e){var t=this;return this.meshComponent.visible=e,this.meshComponent.children.forEach((function(n){var r=t.mesh.getComponentByEntity(n);r&&(r.visible=e)})),this}},{key:"isVisible",value:function(){return this.meshComponent.visible}},{key:"attach",value:function(e){return this.sceneGraphSystem.attach(this.entity,e.entity),this}},{key:"detach",value:function(){return this.sceneGraphSystem.detach(this.entity),this}},{key:"detachChildren",value:function(){return this.sceneGraphSystem.detachChildren(this.entity),this}},{key:"onEntityCreated",value:function(){}},{key:"onAttributeChanged",value:function(e){var t=e.name,n=e.data;this.meshComponent&&this.meshComponent.material&&this.meshComponent.material.setUniform(this.convertAttributeName2UniformName(t),n)}},{key:"convertAttributeName2UniformName",value:function(e){return e}}]),e}(),u_.POINT="point",u_.LINE="line",u_.GRID="grid",o_=Ep((i_=c_).prototype,"mesh",[$b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),a_=Ep(i_.prototype,"cullable",[Qb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),s_=Ep(i_.prototype,"transform",[e_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),l_=Ep(i_.prototype,"sceneGraphSystem",[t_,n_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),r_=i_))||r_),L_=o(81550),C_=o.n(L_),D_=function(){function e(t,n){wp(this,e),this.attribute=void 0,this.buffer=void 0;var r=n.buffer,i=n.offset,o=n.stride,a=n.normalized,s=n.size,l=n.divisor;this.buffer=r,this.attribute={buffer:r.get(),offset:i||0,stride:o||0,normalized:a||!1,divisor:l||0},s&&(this.attribute.size=s)}return Mp(e,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(e){this.buffer.subData(e)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),e}(),A_=(om(d_={},gm.POINTS,"points"),om(d_,gm.LINES,"lines"),om(d_,gm.LINE_LOOP,"line loop"),om(d_,gm.LINE_STRIP,"line strip"),om(d_,gm.TRIANGLES,"triangles"),om(d_,gm.TRIANGLE_FAN,"triangle fan"),om(d_,gm.TRIANGLE_STRIP,"triangle strip"),d_),P_=(om(h_={},gm.STATIC_DRAW,"static"),om(h_,gm.DYNAMIC_DRAW,"dynamic"),om(h_,gm.STREAM_DRAW,"stream"),h_),O_=(om(f_={},gm.BYTE,"int8"),om(f_,gm.UNSIGNED_INT,"int16"),om(f_,gm.INT,"int32"),om(f_,gm.UNSIGNED_BYTE,"uint8"),om(f_,gm.UNSIGNED_SHORT,"uint16"),om(f_,gm.UNSIGNED_INT,"uint32"),om(f_,gm.FLOAT,"float"),f_),I_=(om(p_={},gm.ALPHA,"alpha"),om(p_,gm.LUMINANCE,"luminance"),om(p_,gm.LUMINANCE_ALPHA,"luminance alpha"),om(p_,gm.RGB,"rgb"),om(p_,gm.RGBA,"rgba"),om(p_,gm.RGBA4,"rgba4"),om(p_,gm.RGB5_A1,"rgb5 a1"),om(p_,gm.RGB565,"rgb565"),om(p_,gm.DEPTH_COMPONENT,"depth"),om(p_,gm.DEPTH_STENCIL,"depth stencil"),p_),R_=(om(m_={},gm.DONT_CARE,"dont care"),om(m_,gm.NICEST,"nice"),om(m_,gm.FASTEST,"fast"),m_),N_=(om(g_={},gm.NEAREST,"nearest"),om(g_,gm.LINEAR,"linear"),om(g_,gm.LINEAR_MIPMAP_LINEAR,"mipmap"),om(g_,gm.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),om(g_,gm.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),om(g_,gm.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),g_),Y_=(om(v_={},gm.REPEAT,"repeat"),om(v_,gm.CLAMP_TO_EDGE,"clamp"),om(v_,gm.MIRRORED_REPEAT,"mirror"),v_),j_=(om(y_={},gm.NONE,"none"),om(y_,gm.BROWSER_DEFAULT_WEBGL,"browser"),y_),F_=(om(b_={},gm.NEVER,"never"),om(b_,gm.ALWAYS,"always"),om(b_,gm.LESS,"less"),om(b_,gm.LEQUAL,"lequal"),om(b_,gm.GREATER,"greater"),om(b_,gm.GEQUAL,"gequal"),om(b_,gm.EQUAL,"equal"),om(b_,gm.NOTEQUAL,"notequal"),b_),B_=(om(__={},gm.FUNC_ADD,"add"),om(__,gm.MIN_EXT,"min"),om(__,gm.MAX_EXT,"max"),om(__,gm.FUNC_SUBTRACT,"subtract"),om(__,gm.FUNC_REVERSE_SUBTRACT,"reverse subtract"),__),z_=(om(w_={},gm.ZERO,"zero"),om(w_,gm.ONE,"one"),om(w_,gm.SRC_COLOR,"src color"),om(w_,gm.ONE_MINUS_SRC_COLOR,"one minus src color"),om(w_,gm.SRC_ALPHA,"src alpha"),om(w_,gm.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),om(w_,gm.DST_COLOR,"dst color"),om(w_,gm.ONE_MINUS_DST_COLOR,"one minus dst color"),om(w_,gm.DST_ALPHA,"dst alpha"),om(w_,gm.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),om(w_,gm.CONSTANT_COLOR,"constant color"),om(w_,gm.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),om(w_,gm.CONSTANT_ALPHA,"constant alpha"),om(w_,gm.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),om(w_,gm.SRC_ALPHA_SATURATE,"src alpha saturate"),w_),H_=(om(x_={},gm.NEVER,"never"),om(x_,gm.ALWAYS,"always"),om(x_,gm.LESS,"less"),om(x_,gm.LEQUAL,"lequal"),om(x_,gm.GREATER,"greater"),om(x_,gm.GEQUAL,"gequal"),om(x_,gm.EQUAL,"equal"),om(x_,gm.NOTEQUAL,"notequal"),x_),G_=(om(M_={},gm.ZERO,"zero"),om(M_,gm.KEEP,"keep"),om(M_,gm.REPLACE,"replace"),om(M_,gm.INVERT,"invert"),om(M_,gm.INCR,"increment"),om(M_,gm.DECR,"decrement"),om(M_,gm.INCR_WRAP,"increment wrap"),om(M_,gm.DECR_WRAP,"decrement wrap"),M_),W_=(om(E_={},gm.FRONT,"front"),om(E_,gm.BACK,"back"),E_),U_=function(){function e(t,n){wp(this,e),this.buffer=void 0;var r=n.data,i=n.usage,o=n.type;this.buffer=t.buffer({data:r,usage:P_[i||gm.STATIC_DRAW],type:O_[o||gm.UNSIGNED_BYTE]})}return Mp(e,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){}},{key:"subData",value:function(e){var t=e.data,n=e.offset;this.buffer.subdata(t,n)}}]),e}();function V_(e){return function(e){if(Array.isArray(e))return Op(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ip(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var X_=9007199254740991,q_={};q_["[object Float32Array]"]=q_["[object Float64Array]"]=q_["[object Int8Array]"]=q_["[object Int16Array]"]=q_["[object Int32Array]"]=q_["[object Uint8Array]"]=q_["[object Uint8ClampedArray]"]=q_["[object Uint16Array]"]=q_["[object Uint32Array]"]=!0,q_["[object Arguments]"]=q_["[object Array]"]=q_["[object ArrayBuffer]"]=q_["[object Boolean]"]=q_["[object DataView]"]=q_["[object Date]"]=q_["[object Error]"]=q_["[object Function]"]=q_["[object Map]"]=q_["[object Number]"]=q_["[object Object]"]=q_["[object RegExp]"]=q_["[object Set]"]=q_["[object String]"]=q_["[object WeakMap]"]=!1;var K_=Object.prototype.toString;var J_=function(e){return function(e){return!!e&&"object"===Gp(e)}(e)&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=X_}(e.length)&&!!q_[K_.call(e)]};function Z_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z_(Object(n),!0).forEach((function(t){om(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Q_=0,ew=function(){function e(t,n){var r=this;wp(this,e),this.reGl=t,this.context=n,this.entity=Dp(),this.texFBO=void 0,this.computeCommand=void 0,this.textureCache={},this.outputTextureName=void 0,this.swapOutputTextureName=void 0,this.compiledPingpong=void 0,this.dynamicPingpong=void 0;var i={};this.context.uniforms.forEach((function(e){var t=e.name,n=e.type,o=e.data,a=e.isReferer,s=e.storageClass;if(s===Qy.StorageBuffer){if(a)r.textureCache[t]={data:void 0},i["".concat(t,"Size")]=function(){return o.compiledBundle.context.output.textureSize};else{r.textureCache[t]=r.calcDataTexture(t,n,o);var l=r.textureCache[t],u=l.textureWidth,c=l.isOutput;i["".concat(t,"Size")]=[u,u],c&&(r.outputTextureName=t,r.context.needPingpong&&(r.outputTextureName="".concat(t,"Output"),r.textureCache[r.outputTextureName]=r.calcDataTexture(t,n,o)))}i[t]=function(){return r.textureCache[t].texture}}else if(s===Qy.Uniform){if(o&&(Array.isArray(o)||J_(o))&&o.length>16)throw new Error("invalid data type ".concat(n));i[t]=function(){return e.data}}}));var o=this.getOuputDataTexture(),a=o.textureWidth,s=o.texelCount;i.u_OutputTextureSize=[a,a],i.u_OutputTexelCount=s,this.context.output.textureSize=[a,a];var l={attributes:{a_Position:[[-1,1,0],[-1,-1,0],[1,1,0],[1,-1,0]],a_TexCoord:[[0,1],[0,0],[1,1],[1,0]]},frag:"#ifdef GL_FRAGMENT_PRECISION_HIGH\n  precision highp float;\n#else\n  precision mediump float;\n#endif\n".concat(this.context.shader),uniforms:i,vert:"attribute vec3 a_Position;\nattribute vec2 a_TexCoord;\n\nvarying vec2 v_TexCoord;\n\nvoid main() {\n  gl_Position = vec4(a_Position, 1.0);\n  v_TexCoord = a_TexCoord;\n}",primitive:"triangle strip",count:4};this.computeCommand=this.reGl(l)}var t;return Mp(e,[{key:"run",value:function(){var e=this;this.context.maxIteration>1&&this.context.needPingpong&&(this.compiledPingpong=!0),(this.compiledPingpong||this.dynamicPingpong)&&this.swap(),this.texFBO=this.reGl.framebuffer({color:this.getOuputDataTexture().texture}),this.texFBO.use((function(){e.computeCommand()}))}},{key:"readData",value:(t=Lp(kp().mark((function e(){var t,n,r,i,o,a,s,l,u=this;return kp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.reGl({framebuffer:this.texFBO})((function(){t=u.reGl.read()})),!t){e.next=6;break}if(n=this.getOuputDataTexture(),r=n.originalDataLength,i=n.elementsPerTexel,o=n.typedArrayConstructor,a=void 0===o?Float32Array:o,s=[],4!==i)for(l=0;l<t.length;l+=4)1===i?s.push(t[l]):2===i?s.push(t[l],t[l+1]):s.push(t[l],t[l+1],t[l+2]);else s=t;return e.abrupt("return",new a(s.slice(0,r)));case 6:return e.abrupt("return",new Float32Array);case 7:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"confirmInput",value:function(e,t){var n;this.entity===e.entity?(this.dynamicPingpong=!0,n=this):n=e,this.textureCache[t].id=n.getOuputDataTexture().id,this.textureCache[t].texture=n.getOuputDataTexture().texture}},{key:"updateUniform",value:function(){}},{key:"updateBuffer",value:function(e,t){var n=this.context.uniforms.find((function(t){return t.name===e}));if(n){var r=this.calcDataTexture(e,n.type,t),i=r.texture,o=r.data;this.textureCache[e].data=o,this.textureCache[e].texture=i}}},{key:"destroy",value:function(){}},{key:"swap",value:function(){if(this.swapOutputTextureName||this.createSwapOutputDataTexture(),this.compiledPingpong){var e=this.context.output.name;this.textureCache[e].id=this.getOuputDataTexture().id,this.textureCache[e].texture=this.getOuputDataTexture().texture}var t=this.outputTextureName;this.outputTextureName=this.swapOutputTextureName,this.swapOutputTextureName=t}},{key:"getOuputDataTexture",value:function(){return this.textureCache[this.outputTextureName]}},{key:"createSwapOutputDataTexture",value:function(){var e=this.cloneDataTexture(this.getOuputDataTexture());this.swapOutputTextureName="".concat(this.entity,"-swap"),this.textureCache[this.swapOutputTextureName]=e}},{key:"cloneDataTexture",value:function(e){var t=e.data,n=e.textureWidth;return $_($_({},e),{},{id:Q_++,texture:this.reGl.texture({width:n,height:n,data:t,type:"float"})})}},{key:"calcDataTexture",value:function(e,t,n){var r=1;t===Zy.Vector4FloatArray&&(r=4);for(var i=[],o=0;o<n.length;o+=r)1===r?i.push(n[o],0,0,0):2===r?i.push(n[o],n[o+1],0,0):3===r?i.push(n[o],n[o+1],n[o+2],0):4===r&&i.push(n[o],n[o+1],n[o+2],n[o+3]);var a=n.length,s=Math.ceil(a/r),l=Math.ceil(Math.sqrt(s)),u=l*l;s<u&&i.push.apply(i,V_(new Array(4*(u-s)).fill(0)));var c=this.reGl.texture({width:l,height:l,data:i,type:"float"});return{id:Q_++,data:i,originalDataLength:a,typedArrayConstructor:J_(n)?n.constructor:void 0,textureWidth:l,texture:c,texelCount:s,elementsPerTexel:r,isOutput:e===this.context.output.name}}}]),e}(),tw=function(){function e(t,n){wp(this,e),this.elements=void 0;var r=n.data,i=n.usage,o=n.type,a=n.count;this.elements=t.elements({data:r,usage:P_[i||gm.STATIC_DRAW],type:O_[o||gm.UNSIGNED_BYTE],count:a})}return Mp(e,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(e){var t=e.data;this.elements.subdata(t)}},{key:"destroy",value:function(){this.elements.destroy()}}]),e}(),nw=function(){function e(t,n){wp(this,e),this.framebuffer=void 0;var r=n.width,i=n.height,o=n.color,a=n.colors,s=(n.depth,n.stencil,{width:r,height:i});Array.isArray(a)&&(s.colors=a.map((function(e){return e.get()}))),o&&"boolean"!=typeof o&&(s.color=o.get()),this.framebuffer=t.framebuffer(s)}return Mp(e,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(e){var t=e.width,n=e.height;this.framebuffer.resize(t,n)}}]),e}();function rw(e){var t={};return Object.keys(e).forEach((function(n){iw(n,e[n],t,"")})),t}function iw(e,t,n,r){null===t||"number"==typeof t||"boolean"==typeof t||Array.isArray(t)&&"number"==typeof t[0]||J_(t)||""===t||void 0!==t.resize?n["".concat(r&&r+".").concat(e)]=t:(function(e){var t=Gp(e);return null!=e&&("object"===t||"function"===t)}(t)&&Object.keys(t).forEach((function(i){iw(i,t[i],n,"".concat(r&&r+".").concat(e))})),Array.isArray(t)&&t.forEach((function(t,i){Object.keys(t).forEach((function(o){iw(o,t[o],n,"".concat(r&&r+".").concat(e,"[").concat(i,"]"))}))})))}function ow(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function aw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ow(Object(n),!0).forEach((function(t){om(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ow(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var sw,lw,uw,cw=function(){function e(t,n){wp(this,e),this.reGl=void 0,this.drawCommand=void 0,this.uniforms={},this.reGl=t;var r=n.vs,i=n.fs,o=n.defines,a=n.attributes,s=n.uniforms,l=n.primitive,u=n.count,c=n.elements,d=n.depth,h=n.blend,f=n.stencil,p=n.cull,m=n.instances,g=n.scissor,v=n.viewport,y={};s&&(this.uniforms=rw(s),Object.keys(s).forEach((function(e){y[e]=t.prop(e)})));var b={};Object.keys(a).forEach((function(e){b[e]=a[e].get()}));var _=o&&this.generateDefines(o)||"",w={attributes:b,frag:"#ifdef GL_FRAGMENT_PRECISION_HIGH\n  precision highp float;\n#else\n  precision mediump float;\n#endif\n".concat(_,"\n").concat(i),uniforms:y,vert:"\n".concat(_,"\n").concat(r),primitive:A_[void 0===l?gm.TRIANGLES:l]};m&&(w.instances=m),u&&(w.count=u),c&&(w.elements=c.get()),g&&(w.scissor=g),v&&(w.viewport=v),this.initDepthDrawParams({depth:d},w),this.initBlendDrawParams({blend:h},w),this.initStencilDrawParams({stencil:f},w),this.initCullDrawParams({cull:p},w),this.drawCommand=t(w)}return Mp(e,[{key:"addUniforms",value:function(e){this.uniforms=aw(aw({},this.uniforms),rw(e))}},{key:"draw",value:function(e){var t=aw(aw({},this.uniforms),rw(e.uniforms||{})),n={};Object.keys(t).forEach((function(e){var r=Gp(t[e]);"boolean"===r||"number"===r||Array.isArray(t[e])||t[e].BYTES_PER_ELEMENT?n[e]=t[e]:"string"===r||(n[e]=t[e].get())})),this.drawCommand(n)}},{key:"destroy",value:function(){}},{key:"initDepthDrawParams",value:function(e,t){var n=e.depth;n&&(t.depth={enable:void 0===n.enable||!!n.enable,mask:void 0===n.mask||!!n.mask,func:F_[n.func||gm.LESS],range:n.range||[0,1]})}},{key:"initBlendDrawParams",value:function(e,t){var n=e.blend;if(n){var r=n.enable,i=n.func,o=n.equation,a=n.color,s=void 0===a?[0,0,0,0]:a;t.blend={enable:!!r,func:{srcRGB:z_[i&&i.srcRGB||gm.SRC_ALPHA],srcAlpha:z_[i&&i.srcAlpha||gm.SRC_ALPHA],dstRGB:z_[i&&i.dstRGB||gm.ONE_MINUS_SRC_ALPHA],dstAlpha:z_[i&&i.dstAlpha||gm.ONE_MINUS_SRC_ALPHA]},equation:{rgb:B_[o&&o.rgb||gm.FUNC_ADD],alpha:B_[o&&o.alpha||gm.FUNC_ADD]},color:s}}}},{key:"initStencilDrawParams",value:function(e,t){var n=e.stencil;if(n){var r=n.enable,i=n.mask,o=void 0===i?-1:i,a=n.func,s=void 0===a?{cmp:gm.ALWAYS,ref:0,mask:-1}:a,l=n.opFront,u=void 0===l?{fail:gm.KEEP,zfail:gm.KEEP,zpass:gm.KEEP}:l,c=n.opBack,d=void 0===c?{fail:gm.KEEP,zfail:gm.KEEP,zpass:gm.KEEP}:c;t.stencil={enable:!!r,mask:o,func:aw(aw({},s),{},{cmp:H_[s.cmp]}),opFront:{fail:G_[u.fail],zfail:G_[u.zfail],zpass:G_[u.zpass]},opBack:{fail:G_[d.fail],zfail:G_[d.zfail],zpass:G_[d.zpass]}}}}},{key:"initCullDrawParams",value:function(e,t){var n=e.cull;if(n){var r=n.enable,i=n.face,o=void 0===i?gm.BACK:i;t.cull={enable:!!r,face:W_[o]}}}},{key:"generateDefines",value:function(e){return Object.keys(e).map((function(t){return"#define ".concat(t," ").concat(Number(e[t]))})).join("\n")}}]),e}(),dw=function(){function e(t,n){wp(this,e),this.texture=void 0,this.width=void 0,this.height=void 0;var r=n.data,i=n.type,o=void 0===i?gm.UNSIGNED_BYTE:i,a=n.width,s=n.height,l=n.flipY,u=void 0!==l&&l,c=n.format,d=void 0===c?gm.RGBA:c,h=n.mipmap,f=void 0!==h&&h,p=n.wrapS,m=void 0===p?gm.CLAMP_TO_EDGE:p,g=n.wrapT,v=void 0===g?gm.CLAMP_TO_EDGE:g,y=n.aniso,b=void 0===y?0:y,_=n.alignment,w=void 0===_?1:_,x=n.premultiplyAlpha,M=void 0!==x&&x,E=n.mag,S=void 0===E?gm.NEAREST:E,k=n.min,T=void 0===k?gm.NEAREST:k,L=n.colorSpace,C=void 0===L?gm.BROWSER_DEFAULT_WEBGL:L;this.width=a,this.height=s;var D={width:a,height:s,type:O_[o],format:I_[d],wrapS:Y_[m],wrapT:Y_[v],mag:N_[S],min:N_[T],alignment:w,flipY:u,colorSpace:j_[C],premultiplyAlpha:M,aniso:b};r&&(D.data=r),"number"==typeof f?D.mipmap=R_[f]:"boolean"==typeof f&&(D.mipmap=f),this.texture=t.texture(D)}return Mp(e,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(e){var t=e.width,n=e.height;this.texture.resize(t,n),this.width=t,this.height=n}},{key:"destroy",value:function(){this.texture.destroy()}}]),e}(),hw=(0,Np.b2)()((lw=function(){function e(){var t=this;wp(this,e),this.supportWebGPU=!1,this.useWGSL=!1,this.$canvas=void 0,this.gl=void 0,this.inited=void 0,this.createModel=function(){var e=Lp(kp().mark((function e(n){return kp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.uniforms){e.next=3;break}return e.next=3,Promise.all(Object.keys(n.uniforms).map(function(){var e=Lp(kp().mark((function e(t){var r;return kp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.uniforms[t]||void 0===n.uniforms[t].load){e.next=5;break}return e.next=3,n.uniforms[t].load();case 3:r=e.sent,n.uniforms[t]=r;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:return e.abrupt("return",new cw(t.gl,n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.createAttribute=function(e){return new D_(t.gl,e)},this.createBuffer=function(e){return new U_(t.gl,e)},this.createElements=function(e){return new tw(t.gl,e)},this.createTexture2D=function(e){return new dw(t.gl,e)},this.createFramebuffer=function(e){return new nw(t.gl,e)},this.useFramebuffer=function(e,n){t.gl({framebuffer:e?e.get():null})(n)},this.createComputeModel=function(){var e=Lp(kp().mark((function e(n){return kp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new ew(t.gl,n));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.clear=function(e){var n=e.color,r=e.depth,i=e.stencil,o=e.framebuffer,a=void 0===o?null:o,s={color:n,depth:r,stencil:i};s.framebuffer=null===a?a:a.get(),t.gl.clear(s)},this.setScissor=function(e){t.gl&&t.gl._gl&&(e.enable&&e.box?(t.gl._gl.enable(gm.SCISSOR_TEST),t.gl._gl.scissor(e.box.x,e.box.y,e.box.width,e.box.height)):t.gl._gl.disable(gm.SCISSOR_TEST),t.gl._refresh())},this.viewport=function(e){var n=e.x,r=e.y,i=e.width,o=e.height;t.gl&&t.gl._gl&&(t.gl._gl.viewport(n,r,i,o),t.gl._refresh())},this.readPixels=function(e){var n=e.framebuffer,r={x:e.x,y:e.y,width:e.width,height:e.height};return n&&(r.framebuffer=n.get()),t.gl.read(r)},this.getCanvas=function(){return t.$canvas},this.getGLContext=function(){return t.gl._gl},this.destroy=function(){t.gl&&(t.gl.destroy(),t.inited=!1)}}var t;return Mp(e,[{key:"init",value:(t=Lp(kp().mark((function e(t){return kp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.inited){e.next=2;break}return e.abrupt("return");case 2:return this.$canvas=t.canvas,e.next=5,new Promise((function(e,n){C_()({canvas:t.canvas,attributes:{alpha:!0,antialias:t.antialias,premultipliedAlpha:!0},pixelRatio:1,extensions:["OES_element_index_uint","OES_texture_float","OES_standard_derivatives","angle_instanced_arrays"],optionalExtensions:["EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(t,r){!t&&r||n(t),e(r)}})}));case 5:this.gl=e.sent,this.inited=!0;case 7:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"isFloatSupported",value:function(){return this.gl.limits.readFloat}},{key:"beginFrame",value:function(){}},{key:"endFrame",value:function(){}}]),e}(),sw=lw))||sw;function fw(e,t,n,r){if("undefined"!=typeof window){var i=document.getElementsByTagName("head")[0],o=document.createElement("script");o.setAttribute("type","text/javascript"),o.setAttribute("src",e),r&&(o.id=r),o.onload=function(){t&&t()},o.onerror=function(t){n&&n("Unable to load script '".concat(e,"'"),t)},i.appendChild(o)}}function pw(e,t){return new Promise((function(t,n){fw(e,(function(){t()}),(function(e,t){n(t)}))}))}function mw(){return gw.apply(this,arguments)}function gw(){return(gw=Lp(kp().mark((function e(){return kp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!uw){e.next=2;break}return e.abrupt("return",uw);case 2:return e.next=4,pw("https://preview.babylonjs.com/glslang/glslang.js");case 4:return uw=window.glslang("https://preview.babylonjs.com/glslang/glslang.wasm"),e.abrupt("return",uw);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var vw=function(){function e(t,n){wp(this,e),this.engine=t,this.options=n,this.attribute=void 0,this.buffer=void 0;var r=n,i=r.buffer,o=r.offset,a=r.stride,s=r.normalized,l=r.size,u=r.divisor,c=r.arrayStride,d=r.attributes,h=r.stepMode;this.buffer=i,this.attribute={buffer:i.get(),offset:o||0,stride:a||0,normalized:s||!1,divisor:u||0,arrayStride:c||0,attributes:d,stepMode:h||"vertex"},l&&(this.attribute.size=l)}return Mp(e,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(e){this.buffer.subData(e)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),e}(),yw=function(){function e(t,n){wp(this,e),this.engine=t,this.options=n,this.buffer=void 0;var r=n,i=r.data,o=r.usage;r.type;this.buffer=this.createBuffer(i instanceof Array?new Float32Array(i):i,o||kb.FB.Vertex|kb.FB.CopyDst)}return Mp(e,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){this.buffer.destroy()}},{key:"subData",value:function(e){var t=e.data,n=e.offset;this.setSubData(this.buffer,n,t instanceof Array?new Float32Array(t):t)}},{key:"createBuffer",value:function(e,t){var n=e.byteLength%4,r={size:e.byteLength+n,usage:t},i=this.engine.device.createBuffer(r);return this.setSubData(i,0,e),i}},{key:"setSubData",value:function(e,t,n){(Jy?this.engine.device.getQueue():this.engine.device.defaultQueue).writeBuffer(e,t,n)}}]),e}();function bw(e){return"number"==typeof e}var _w,ww,xw,Mw,Ew,Sw,kw,Tw=function(){function e(t,n){wp(this,e),this.engine=t,this.context=n,this.entity=Dp(),this.uniformGPUBufferLayout=[],this.uniformBuffer=void 0,this.vertexBuffers={},this.outputBuffer=void 0,this.bindGroupEntries=void 0,this.bindGroup=void 0,this.computePipeline=void 0}var t,n,r;return Mp(e,[{key:"init",value:(r=Lp(kp().mark((function e(){var t,n,r,i,o,a,s,l=this;return kp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.compileComputePipelineStageDescriptor(this.context.shader);case 2:t=e.sent,n=t.computeStage,r=this.context.uniforms.filter((function(e){return e.storageClass===Qy.StorageBuffer})),i=this.context.uniforms.filter((function(e){return e.storageClass===Qy.Uniform})),o=i.length?1:0,this.bindGroupEntries=[],o&&(a=0,s=[],i.forEach((function(e){if(bw(e.data))l.uniformGPUBufferLayout.push({name:e.name,offset:a}),a+=4,s.push(e.data);else{var t,n=(null===(t=e.data)||void 0===t?void 0:t.length)||1;3===n&&(n=4,e.data.push(0));var r=a/4%4;if(r>0){var i=4-r;if(n>1&&n<=i)2===n&&(3===i&&(a+=4,s.push(0)),s.push.apply(s,V_(e.data)),l.uniformGPUBufferLayout.push({name:e.name,offset:a}));else{for(var o=0;o<i;o++)a+=4,s.push(0);s.push.apply(s,V_(e.data)),l.uniformGPUBufferLayout.push({name:e.name,offset:a})}}a+=4*n}})),this.uniformBuffer=new yw(this.engine,{data:s instanceof Array?new Float32Array(s):s,usage:kb.FB.Uniform|kb.FB.CopyDst}),this.bindGroupEntries.push({binding:0,resource:{buffer:this.uniformBuffer.get()}})),r.forEach((function(e){var t;null!==e.data&&(e.type!==Zy.Vector4FloatArray&&e.type!==Zy.FloatArray||(e.name===l.context.output.name?(t=new yw(l.engine,{data:isFinite(Number(e.data))?[e.data]:e.data,usage:kb.FB.Storage|kb.FB.CopyDst|kb.FB.CopySrc}),l.outputBuffer=t,l.context.output={name:e.name,length:isFinite(Number(e.data))?1:e.data.length,typedArrayConstructor:Float32Array,gpuBuffer:t.get()}):e.isReferer?e.data.model&&e.data.model.outputBuffer&&(t=e.data.model.outputBuffer):t=new yw(l.engine,{data:isFinite(Number(e.data))?[e.data]:e.data,usage:kb.FB.Storage|kb.FB.CopyDst|kb.FB.CopySrc}),l.vertexBuffers[e.name]=t,l.bindGroupEntries.push({binding:o,resource:{name:e.name,refer:t?void 0:e.data,buffer:t?t.get():void 0}}),o++))})),this.computePipeline=this.engine.device.createComputePipeline({computeStage:n}),console.log(this.bindGroupEntries),this.bindGroup=this.engine.device.createBindGroup({layout:this.computePipeline.getBindGroupLayout(0),entries:this.bindGroupEntries});case 13:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"destroy",value:function(){var e=this;this.uniformBuffer&&this.uniformBuffer.destroy(),Object.keys(this.vertexBuffers).forEach((function(t){return e.vertexBuffers[t].destroy()}))}},{key:"readData",value:(n=Lp(kp().mark((function e(){var t,n,r,i,o,a,s,l,u;return kp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.context.output)){e.next=16;break}if(n=t.length,r=t.typedArrayConstructor,!(i=t.gpuBuffer)){e.next=16;break}return o=n*r.BYTES_PER_ELEMENT,a=this.engine.device.createBuffer({size:o,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),(s=this.engine.device.createCommandEncoder()).copyBufferToBuffer(i,0,a,0,o),(Jy?this.engine.device.getQueue():this.engine.device.defaultQueue).submit([s.finish()]),e.next=12,a.mapAsync(kb.gc.Read);case 12:return l=a.getMappedRange(),u=new r(l.slice(0)),a.unmap(),e.abrupt("return",u);case 16:return e.abrupt("return",new Float32Array);case 17:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"run",value:function(){var e;this.engine.currentComputePass&&(this.engine.currentComputePass.setPipeline(this.computePipeline),this.engine.currentComputePass.setBindGroup(0,this.bindGroup),(e=this.engine.currentComputePass).dispatch.apply(e,V_(this.context.dispatch)))}},{key:"updateBuffer",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this.vertexBuffers[e];r&&r.subData({data:t,offset:n})}},{key:"updateUniform",value:function(e,t){var n=this.uniformGPUBufferLayout.find((function(t){return t.name===e}));n&&this.uniformBuffer.subData({data:Number.isFinite(t)?new Float32Array([t]):new Float32Array(t),offset:n.offset})}},{key:"confirmInput",value:function(e,t){var n=this.vertexBuffers[t],r=e.outputBuffer;if(n&&r&&n!==r){var i=this.engine.device.createCommandEncoder(),o=e.context.output,a=o.length*o.typedArrayConstructor.BYTES_PER_ELEMENT;i.copyBufferToBuffer(r.get(),0,n.get(),0,a),(Jy?this.engine.device.getQueue():this.engine.device.defaultQueue).submit([i.finish()])}}},{key:"compileShaderToSpirV",value:function(e,t,n){return this.compileRawShaderToSpirV(n+e,t)}},{key:"compileRawShaderToSpirV",value:function(e,t){return this.engine.glslang.compileGLSL(e,t)}},{key:"compileComputePipelineStageDescriptor",value:(t=Lp(kp().mark((function e(t){var n;return kp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t,this.engine.options.useWGSL){e.next=6;break}return e.next=5,this.compileShaderToSpirV(t,"compute","#version 450\n");case 5:n=e.sent;case 6:return e.abrupt("return",{computeStage:{module:this.engine.device.createShaderModule({code:n,isWHLSL:Jy}),entryPoint:"main"}});case 7:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}(),Lw=function(){function e(t,n){wp(this,e),this.engine=t,this.options=n,this.indexCount=void 0,this.buffer=void 0;var r=n,i=r.data,o=(r.usage,r.type,r.count);this.indexCount=o||0,this.buffer=new yw(t,{data:i instanceof Array?new Uint16Array(i):i,usage:kb.FB.Index|kb.FB.CopyDst})}return Mp(e,[{key:"get",value:function(){return this.buffer}},{key:"subData",value:function(e){this.buffer.subData(e)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),e}(),Cw=function(){function e(t,n){wp(this,e),this.engine=t,this.options=n,this.colorTexture=void 0,this.depthTexture=void 0,this.width=0,this.height=0;var r=n,i=(r.width,r.height,r.color),o=(r.colors,r.depth);r.stencil;i&&(this.colorTexture=i),o&&(this.depthTexture=o)}return Mp(e,[{key:"get",value:function(){var e,t;return{color:null===(e=this.colorTexture)||void 0===e?void 0:e.get(),depth:null===(t=this.depthTexture)||void 0===t?void 0:t.get()}}},{key:"destroy",value:function(){var e,t;null===(e=this.colorTexture)||void 0===e||e.destroy(),null===(t=this.depthTexture)||void 0===t||t.destroy()}},{key:"resize",value:function(e){var t,n,r=e.width,i=e.height;r===this.width&&i===this.height||(null===(t=this.colorTexture)||void 0===t||t.resize({width:r,height:i}),null===(n=this.depthTexture)||void 0===n||n.resize({width:r,height:i}));this.width=r,this.height=i}}]),e}(),Dw=(om(_w={},gm.POINTS,kb.YV.PointList),om(_w,gm.LINES,kb.YV.LineList),om(_w,gm.LINE_LOOP,kb.YV.LineList),om(_w,gm.LINE_STRIP,kb.YV.LineStrip),om(_w,gm.TRIANGLES,kb.YV.TriangleList),om(_w,gm.TRIANGLE_FAN,kb.YV.TriangleList),om(_w,gm.TRIANGLE_STRIP,kb.YV.TriangleStrip),_w),Aw=(om(ww={},gm.NEVER,kb.wb.Never),om(ww,gm.ALWAYS,kb.wb.Always),om(ww,gm.LESS,kb.wb.Less),om(ww,gm.LEQUAL,kb.wb.LessEqual),om(ww,gm.GREATER,kb.wb.Greater),om(ww,gm.GEQUAL,kb.wb.GreaterEqual),om(ww,gm.EQUAL,kb.wb.Equal),om(ww,gm.NOTEQUAL,kb.wb.NotEqual),ww),Pw=(om(xw={},gm.FUNC_ADD,kb.db.Add),om(xw,gm.MIN_EXT,kb.db.Min),om(xw,gm.MAX_EXT,kb.db.Max),om(xw,gm.FUNC_SUBTRACT,kb.db.Subtract),om(xw,gm.FUNC_REVERSE_SUBTRACT,kb.db.ReverseSubtract),xw),Ow=(om(Mw={},gm.ZERO,kb.zi.Zero),om(Mw,gm.ONE,kb.zi.One),om(Mw,gm.SRC_COLOR,kb.zi.SrcColor),om(Mw,gm.ONE_MINUS_SRC_COLOR,kb.zi.OneMinusSrcColor),om(Mw,gm.SRC_ALPHA,kb.zi.SrcAlpha),om(Mw,gm.ONE_MINUS_SRC_ALPHA,kb.zi.OneMinusSrcAlpha),om(Mw,gm.DST_COLOR,kb.zi.DstColor),om(Mw,gm.ONE_MINUS_DST_COLOR,kb.zi.OneMinusDstColor),om(Mw,gm.DST_ALPHA,kb.zi.DstAlpha),om(Mw,gm.ONE_MINUS_DST_ALPHA,kb.zi.OneMinusDstAlpha),om(Mw,gm.CONSTANT_COLOR,kb.zi.BlendColor),om(Mw,gm.ONE_MINUS_CONSTANT_COLOR,kb.zi.OneMinusBlendColor),om(Mw,gm.SRC_ALPHA_SATURATE,kb.zi.SrcAlphaSaturated),Mw),Iw=(om(Ew={},gm.ALPHA,"r8unorm"),om(Ew,gm.RGBA,"rgba8unorm"),om(Ew,gm.DEPTH_COMPONENT,"depth32float"),om(Ew,gm.DEPTH_STENCIL,"depth24plus-stencil8"),Ew),Rw=(om(Sw={},gm.NEAREST,"nearest"),om(Sw,gm.LINEAR,"linear"),Sw),Nw=(om(kw={},gm.REPEAT,"repeat"),om(kw,gm.CLAMP_TO_EDGE,"clamp-to-edge"),om(kw,gm.MIRRORED_REPEAT,"mirror-repeat"),kw);function Yw(e){var t=e.cull;return t&&t.enable?t.face?t.face===gm.FRONT?kb.Wf.Front:kb.Wf.Back:void 0:kb.Wf.None}function jw(e){var t=e.depth,n=(e.stencil,{compare:kb.wb.Always,depthFailOp:kb.xS.Keep,failOp:kb.xS.Keep,passOp:kb.xS.Keep});return{depthWriteEnabled:t&&t.enable,depthCompare:Aw[(null==t?void 0:t.func)||gm.ALWAYS],format:kb.EV.Depth24PlusStencil8,stencilFront:n,stencilBack:n,stencilReadMask:4294967295,stencilWriteMask:4294967295}}function Fw(e,t){var n=e.blend;return[{format:t,alphaBlend:{srcFactor:Ow[n&&n.func&&n.func.srcAlpha||gm.ONE],dstFactor:Ow[n&&n.func&&n.func.dstAlpha||gm.ZERO],operation:Pw[n&&n.equation&&n.equation.alpha||gm.FUNC_ADD]},colorBlend:{srcFactor:Ow[n&&n.func&&n.func.srcRGB||gm.ONE],dstFactor:Ow[n&&n.func&&n.func.dstRGB||gm.ZERO],operation:Pw[n&&n.equation&&n.equation.rgb||gm.FUNC_ADD]},writeMask:kb.Yw.All}]}function Bw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bw(Object(n),!0).forEach((function(t){om(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Hw(e){for(var t=0,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var o=0,a=r;o<a.length;o++){var s=a[o];t+=s.length}for(var l=new e(t),u=0,c=0,d=r;c<d.length;c++){var h=d[c];l.set(h,u),u+=h.length}return l}var Gw,Ww,Uw,Vw=function(){function e(t,n){wp(this,e),this.engine=t,this.options=n,this.pipelineLayout=void 0,this.renderPipeline=void 0,this.uniformsBindGroupLayout=void 0,this.uniformBindGroup=void 0,this.uniformBuffer=void 0,this.uniforms={},this.uniformGPUBufferLayout=[],this.attributeCache={},this.indexBuffer=void 0,this.indexCount=void 0}var t,n;return Mp(e,[{key:"init",value:(n=Lp(kp().mark((function e(){var t,n,r,i,o,a,s,l,u,c,d,h,f,p,m,g,v=this;return kp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.options,n=t.vs,r=t.fs,i=t.attributes,o=t.uniforms,a=t.primitive,t.count,s=t.elements,l=t.depth,u=t.blend,c=t.stencil,d=t.cull,t.instances,e.next=3,this.compilePipelineStageDescriptor(n,r,null);case 3:h=e.sent,f=h.vertexStage,p=h.fragmentStage,o&&this.buildUniformBindGroup(o),s&&(this.indexBuffer=s.get(),this.indexCount=s.indexCount),m={vertexBuffers:Object.keys(i).map((function(e,t){var n=i[e],r=n.get(),o=r.arrayStride,a=r.stepMode,s=r.attributes;return v.attributeCache[e]=n,{arrayStride:o,stepMode:a,attributes:s}}))},g={sampleCount:this.engine.mainPassSampleCount,primitiveTopology:Dw[a||gm.TRIANGLES],rasterizationState:zw(zw({},this.getDefaultRasterizationStateDescriptor()),{},{cullMode:Yw({cull:d})}),depthStencilState:jw({depth:l,stencil:c}),colorStates:Fw({blend:u},this.engine.options.swapChainFormat),layout:this.pipelineLayout,vertexStage:f,fragmentStage:p,vertexState:m},this.renderPipeline=this.engine.device.createRenderPipeline(g);case 11:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"addUniforms",value:function(e){this.uniforms=zw(zw({},this.uniforms),rw(e))}},{key:"draw",value:function(e){var t=this,n=this.engine.getCurrentRenderPass(),r=zw(zw({},this.uniforms),rw(e.uniforms||{})),i=[];Object.keys(r).forEach((function(e){var n=Gp(r[e]);if("boolean"===n||"number"===n||Array.isArray(r[e])||r[e].BYTES_PER_ELEMENT){var o,a=null===(o=t.uniformGPUBufferLayout.find((function(t){return t.name===e})))||void 0===o?void 0:o.offset;null!==a&&t.uniformBuffer.subData({data:r[e],offset:a})}else{var s,l=null===(s=t.uniformGPUBufferLayout.find((function(t){return t.name===e})))||void 0===s?void 0:s.offset;if(null!==l){var u=r[e].get(),c=u.color||u,d=c.texture,h=c.sampler;h&&(i.push({binding:l,resource:h}),l++),i.push({binding:l,resource:d.createView()})}}})),this.uniformBuffer&&(i[0]={binding:0,resource:{buffer:this.uniformBuffer.get()}}),this.uniformBindGroup=this.engine.device.createBindGroup({layout:this.uniformsBindGroupLayout,entries:i}),this.renderPipeline&&n.setPipeline(this.renderPipeline),n.setBindGroup(0,this.uniformBindGroup),this.indexBuffer&&n.setIndexBuffer(this.indexBuffer.get(),kb.iD.Uint32,0),Object.keys(this.attributeCache).forEach((function(e,r){n.setVertexBuffer(0+r,t.attributeCache[e].get().buffer,0)})),this.indexBuffer?n.drawIndexed(this.indexCount,this.options.instances||1,0,0,0):n.draw(this.options.count||0,this.options.instances||0,0,0)}},{key:"destroy",value:function(){throw new Error("Method not implemented.")}},{key:"compilePipelineStageDescriptor",value:(t=Lp(kp().mark((function e(t,n,r){var i,o,a;return kp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i="#version 450\n",o=t,a=n,this.engine.options.useWGSL){e.next=10;break}return e.next=6,this.compileShaderToSpirV(t,"vertex",i);case 6:return o=e.sent,e.next=9,this.compileShaderToSpirV(n,"fragment",i);case 9:a=e.sent;case 10:return e.abrupt("return",this.createPipelineStageDescriptor(o,a));case 11:case"end":return e.stop()}}),e,this)}))),function(e,n,r){return t.apply(this,arguments)})},{key:"compileShaderToSpirV",value:function(e,t,n){return this.compileRawShaderToSpirV(n+e,t)}},{key:"compileRawShaderToSpirV",value:function(e,t){return this.engine.glslang.compileGLSL(e,t)}},{key:"createPipelineStageDescriptor",value:function(e,t){return{vertexStage:{module:this.engine.device.createShaderModule({code:e,isWHLSL:Jy}),entryPoint:"main"},fragmentStage:{module:this.engine.device.createShaderModule({code:t,isWHLSL:Jy}),entryPoint:"main"}}}},{key:"getDefaultRasterizationStateDescriptor",value:function(){return{frontFace:kb.zX.CCW,cullMode:kb.Wf.None,depthBias:0,depthBiasSlopeScale:0,depthBiasClamp:0}}},{key:"buildUniformBindGroup",value:function(e){var t=this,n=0,r=Hw.apply(void 0,[Float32Array].concat(V_(Object.keys(e).map((function(r){return e[r]?(t.uniformGPUBufferLayout.push({name:r,offset:n}),n+=4*(e[r].length||1),e[r]):[]}))))),i=[],o=!1;r.length&&(o=!0,i.push({binding:0,visibility:kb.$X.Fragment|kb.$X.Vertex,type:kb.$l.UniformBuffer})),Object.keys(e).filter((function(t){return null===e[t]})).forEach((function(e,n){t.uniformGPUBufferLayout.push({name:e,offset:2*n+(o?1:0)}),i.push({binding:2*n+(o?1:0),visibility:kb.$X.Fragment,type:kb.$l.Sampler},{binding:2*n+(o?1:0)+1,visibility:kb.$X.Fragment,type:kb.$l.SampledTexture})})),this.uniformsBindGroupLayout=this.engine.device.createBindGroupLayout({entries:i}),this.pipelineLayout=this.engine.device.createPipelineLayout({bindGroupLayouts:[this.uniformsBindGroupLayout]}),o&&(this.uniformBuffer=new yw(this.engine,{data:r instanceof Array?new Float32Array(r):r,usage:kb.FB.Uniform|kb.FB.CopyDst}))}}]),e}(),Xw=function(){function e(t,n){wp(this,e),this.engine=t,this.options=n,this.texture=void 0,this.sampler=void 0,this.width=void 0,this.height=void 0,this.createTexture()}return Mp(e,[{key:"get",value:function(){return{texture:this.texture,sampler:this.sampler}}},{key:"update",value:function(){}},{key:"resize",value:function(e){var t=e.width,n=e.height;t===this.width&&n===this.height||(this.destroy(),this.createTexture()),this.width=t,this.height=n}},{key:"destroy",value:function(){this.texture&&this.texture.destroy()}},{key:"createTexture",value:function(){var e=this.options,t=(e.data,e.type),n=(void 0===t&&gm.UNSIGNED_BYTE,e.width),r=e.height,i=(e.flipY,e.format),o=void 0===i?gm.RGBA:i,a=(e.mipmap,e.wrapS),s=void 0===a?gm.CLAMP_TO_EDGE:a,l=e.wrapT,u=void 0===l?gm.CLAMP_TO_EDGE:l,c=e.aniso,d=void 0===c?0:c,h=(e.alignment,e.premultiplyAlpha,e.mag),f=void 0===h?gm.NEAREST:h,p=e.min,m=void 0===p?gm.NEAREST:p,g=e.colorSpace,v=(void 0===g&&gm.BROWSER_DEFAULT_WEBGL,e.usage);this.width=n,this.height=r,this.texture=this.engine.device.createTexture({size:[n,r,1],mipLevelCount:1,sampleCount:1,dimension:kb.kd.E2d,format:Iw[o],usage:v||kb.v2.Sampled|kb.v2.CopyDst}),(!v||v&kb.v2.Sampled)&&(this.sampler=this.engine.device.createSampler({addressModeU:Nw[s],addressModeV:Nw[u],addressModeW:Nw[s],magFilter:Rw[f],minFilter:Rw[m],maxAnisotropy:d}))}}]),e}(),qw=(0,Np.b2)()((Ww=function(){function e(){var t=this;wp(this,e),this.supportWebGPU=!0,this.useWGSL=!1,this.options=void 0,this.canvas=void 0,this.context=void 0,this.glslang=void 0,this.adapter=void 0,this.device=void 0,this.swapChain=void 0,this.mainPassSampleCount=void 0,this.mainTexture=void 0,this.depthTexture=void 0,this.mainColorAttachments=void 0,this.mainTextureExtends=void 0,this.mainDepthAttachment=void 0,this.uploadEncoder=void 0,this.renderEncoder=void 0,this.computeEncoder=void 0,this.renderTargetEncoder=void 0,this.commandBuffers=new Array(4).fill(void 0),this.currentRenderPass=null,this.mainRenderPass=null,this.currentRenderTargetViewDescriptor=void 0,this.currentComputePass=null,this.bundleEncoder=void 0,this.tempBuffers=[],this.currentRenderTarget=null,this.uploadEncoderDescriptor={label:"upload"},this.renderEncoderDescriptor={label:"render"},this.renderTargetEncoderDescriptor={label:"renderTarget"},this.computeEncoderDescriptor={label:"compute"},this.pipelines={},this.computePipelines={},this.defaultSampleCount=4,this.clearDepthValue=1,this.clearStencilValue=0,this.transientViewport={x:1/0,y:0,width:0,height:0},this.cachedViewport={x:0,y:0,width:0,height:0},this.clear=function(e){e.framebuffer;var n=e.color,r=e.depth,i=e.stencil;t.options.supportCompute&&t.startComputePass(),t.currentRenderTarget?(t.currentRenderPass&&t.endRenderTargetRenderPass(),t.startRenderTargetRenderPass(t.currentRenderTarget,n||null,!!r,!!i)):(t.mainColorAttachments[0].loadValue=n||kb.Ws.Load,t.mainDepthAttachment.depthLoadValue=r||kb.Ws.Load,t.mainDepthAttachment.stencilLoadValue=i?t.clearStencilValue:kb.Ws.Load,t.mainRenderPass&&t.endMainRenderPass(),t.startMainRenderPass())},this.createModel=function(){var e=Lp(kp().mark((function e(n){var r;return kp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new Vw(t,n),e.next=3,r.init();case 3:return e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.createAttribute=function(e){return new vw(t,e)},this.createBuffer=function(e){return new yw(t,e)},this.createElements=function(e){return new Lw(t,e)},this.createTexture2D=function(e){return new Xw(t,e)},this.createFramebuffer=function(e){return new Cw(t,e)},this.useFramebuffer=function(e,n){t.currentRenderTarget&&t.unbindFramebuffer(t.currentRenderTarget),t.currentRenderTarget=e,t.currentRenderTargetViewDescriptor={dimension:kb.p_.E2d,arrayLayerCount:1,aspect:kb.H7.All},t.currentRenderPass=null,n()},this.createComputeModel=function(){var e=Lp(kp().mark((function e(n){var r;return kp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new Tw(t,n),e.next=3,r.init();case 3:return e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getCanvas=function(){return t.canvas},this.getGLContext=function(){throw new Error("Method not implemented.")},this.viewport=function(e){var n=e.x,r=e.y,i=e.width,o=e.height;if(t.currentRenderPass){if(t.transientViewport.x!==1/0){t.getCurrentRenderPass().setViewport(t.transientViewport.x,t.transientViewport.y,t.transientViewport.width,t.transientViewport.height,0,1)}else if(n!==t.cachedViewport.x||r!==t.cachedViewport.y||i!==t.cachedViewport.width||o!==t.cachedViewport.height){t.cachedViewport={x:n,y:r,width:i,height:o},t.getCurrentRenderPass().setViewport(n,r,i,o,0,1)}}else t.transientViewport={x:n,y:r,width:i,height:o}},this.readPixels=function(e){throw new Error("Method not implemented.")}}var t,n;return Mp(e,[{key:"isFloatSupported",value:function(){return!0}},{key:"init",value:(n=Lp(kp().mark((function e(t){return kp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.canvas=t.canvas,this.options=t,this.useWGSL=!!t.useWGSL,this.mainPassSampleCount=t.antialiasing?this.defaultSampleCount:1,e.next=6,this.initGlslang();case 6:this.initContextAndSwapChain(),this.initMainAttachments();case 8:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"setScissor",value:function(e){throw new Error("Method not implemented.")}},{key:"destroy",value:function(){this.mainTexture&&this.mainTexture.destroy(),this.depthTexture&&this.depthTexture.destroy(),this.tempBuffers.forEach((function(e){return e.destroy()})),this.tempBuffers=[]}},{key:"beginFrame",value:function(){this.uploadEncoder=this.device.createCommandEncoder(this.uploadEncoderDescriptor),this.renderEncoder=this.device.createCommandEncoder(this.renderEncoderDescriptor),this.renderTargetEncoder=this.device.createCommandEncoder(this.renderTargetEncoderDescriptor),this.options.supportCompute&&(this.computeEncoder=this.device.createCommandEncoder(this.computeEncoderDescriptor))}},{key:"endFrame",value:function(){this.options.supportCompute&&this.endComputePass(),this.endMainRenderPass(),this.commandBuffers[0]=this.uploadEncoder.finish(),this.commandBuffers[1]=this.renderEncoder.finish(),this.options.supportCompute&&(this.commandBuffers[2]=this.computeEncoder.finish()),this.commandBuffers[3]=this.renderTargetEncoder.finish(),Jy?this.device.getQueue().submit(this.commandBuffers.filter((function(e){return e}))):this.device.defaultQueue.submit(this.commandBuffers.filter((function(e){return e})))}},{key:"getCurrentRenderPass",value:function(){return this.currentRenderTarget&&!this.currentRenderPass?this.startRenderTargetRenderPass(this.currentRenderTarget,null,!1,!1):this.currentRenderPass||this.startMainRenderPass(),this.currentRenderPass}},{key:"initGlslang",value:(t=Lp(kp().mark((function e(){var t,n;return kp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mw();case 2:return this.glslang=e.sent,e.next=5,null===(t=navigator)||void 0===t||null===(n=t.gpu)||void 0===n?void 0:n.requestAdapter();case 5:return this.adapter=e.sent,e.next=8,this.adapter.requestDevice();case 8:this.device=e.sent;case 9:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"initContextAndSwapChain",value:function(){this.context=this.canvas.getContext(Jy?"gpu":"gpupresent"),this.swapChain=this.context.configureSwapChain({device:this.device,format:this.options.swapChainFormat,usage:kb.v2.OutputAttachment|kb.v2.CopySrc})}},{key:"initMainAttachments",value:function(){if(this.mainTextureExtends={width:this.canvas.width,height:this.canvas.height,depth:1},this.options.antialiasing){var e={size:this.mainTextureExtends,mipLevelCount:1,sampleCount:this.mainPassSampleCount,dimension:kb.kd.E2d,format:kb.EV.BGRA8Unorm,usage:kb.v2.OutputAttachment};this.mainTexture&&this.mainTexture.destroy(),this.mainTexture=this.device.createTexture(e),this.mainColorAttachments=[{attachment:Jy?this.mainTexture.createDefaultView():this.mainTexture.createView(),loadValue:[0,0,0,1],storeOp:kb.EG.Store}]}else this.mainColorAttachments=[{attachment:Jy?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView(),loadValue:[0,0,0,1],storeOp:kb.EG.Store}];var t={size:this.mainTextureExtends,mipLevelCount:1,sampleCount:this.mainPassSampleCount,dimension:kb.kd.E2d,format:Jy?"depth32float-stencil8":kb.EV.Depth24PlusStencil8,usage:kb.v2.OutputAttachment};this.depthTexture&&this.depthTexture.destroy(),this.depthTexture=this.device.createTexture(t),this.mainDepthAttachment={attachment:Jy?this.depthTexture.createDefaultView():this.depthTexture.createView(),depthLoadValue:this.clearDepthValue,depthStoreOp:kb.EG.Store,stencilLoadValue:this.clearStencilValue,stencilStoreOp:kb.EG.Store}}},{key:"startComputePass",value:function(){this.currentComputePass&&this.endComputePass(),this.currentComputePass=this.computeEncoder.beginComputePass()}},{key:"startMainRenderPass",value:function(){this.currentRenderPass&&!this.currentRenderTarget&&this.endMainRenderPass(),this.options.antialiasing?this.mainColorAttachments[0].resolveTarget=Jy?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView():this.mainColorAttachments[0].attachment=Jy?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView(),this.currentRenderPass=this.renderEncoder.beginRenderPass({colorAttachments:this.mainColorAttachments,depthStencilAttachment:this.mainDepthAttachment}),this.mainRenderPass=this.currentRenderPass,this.cachedViewport&&this.viewport(this.cachedViewport)}},{key:"startRenderTargetRenderPass",value:function(e,t,n){var r,i,o,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=null===(r=e.get().color)||void 0===r?void 0:r.texture;s&&(o=s.createView(this.currentRenderTargetViewDescriptor));var l,u=null===(i=e.get().depth)||void 0===i?void 0:i.texture;u&&(l=u.createView());var c=this.renderTargetEncoder.beginRenderPass({colorAttachments:[{attachment:o,loadValue:null!==t?t:kb.Ws.Load,storeOp:kb.EG.Store}],depthStencilAttachment:u&&l?{attachment:l,depthLoadValue:n?this.clearDepthValue:kb.Ws.Load,depthStoreOp:kb.EG.Store,stencilLoadValue:a?this.clearStencilValue:kb.Ws.Load,stencilStoreOp:kb.EG.Store}:void 0});this.currentRenderPass=c,this.cachedViewport&&this.viewport(this.cachedViewport)}},{key:"endMainRenderPass",value:function(){this.currentRenderPass===this.mainRenderPass&&null!==this.currentRenderPass&&(this.currentRenderPass.endPass(),this.resetCachedViewport(),this.currentRenderPass=null,this.mainRenderPass=null)}},{key:"endComputePass",value:function(){this.currentComputePass&&(this.currentComputePass.endPass(),this.currentComputePass=null)}},{key:"endRenderTargetRenderPass",value:function(){this.currentRenderPass&&(this.currentRenderPass.endPass(),this.resetCachedViewport())}},{key:"resetCachedViewport",value:function(){this.cachedViewport={x:0,y:0,width:0,height:0}}},{key:"unbindFramebuffer",value:function(e){this.currentRenderPass&&this.currentRenderPass!==this.mainRenderPass&&this.endRenderTargetRenderPass(),this.transientViewport.x=1/0,this.currentRenderTarget=null,this.currentRenderPass=this.mainRenderPass}}]),e}(),Gw=Ww))||Gw;function Kw(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vp(e);if(t){var i=Vp(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Up(this,n)}}var Jw,Zw=4/64,$w=(0,Np.b2)()(Uw=function(e){Hp(n,e);var t=Kw(n);function n(){return wp(this,n),t.apply(this,arguments)}return Mp(n,[{key:"onEntityCreated",value:function(){var e=this.config,t=e.widthSegments,n=void 0===t?1:t,r=e.heightSegments,i=void 0===r?1:r,o=e.depthSegments,a=void 0===o?1:o,s=e.halfExtents,l=n,u=i,c=a,d=Rp(void 0===s?Et(.5,.5,.5):s,3),h=d[0],f=d[1],p=d[2],m=[Et(-h,-f,p),Et(h,-f,p),Et(h,f,p),Et(-h,f,p),Et(h,-f,-p),Et(-h,-f,-p),Et(-h,f,-p),Et(h,f,-p)],g=[[0,1,3],[4,5,7],[3,2,6],[1,0,4],[1,4,2],[5,0,6]],v=[[0,0,1],[0,0,-1],[0,1,0],[0,-1,0],[1,0,0],[-1,0,0]],y=1,b=2,_=3,w=4,x=5,M=[],E=[],S=[],k=[],T=[],L=0,C=function(e,t,n){var r,i,o,a;for(o=0;o<=t;o++)for(a=0;a<=n;a++){var s=wt(),l=wt(),u=wt(),c=wt();It(s,m[g[e][0]],m[g[e][1]],o/t),It(l,m[g[e][0]],m[g[e][2]],a/n),jt(u,l,m[g[e][0]]),Tt(c,s,u),r=o/t,i=a/n,M.push(c[0],c[1],c[2]),E.push(v[e][0],v[e][1],v[e][2]),S.push(r,i),r=.875*(r/=3)+Zw,i=.875*(i/=3)+Zw,r+=e%3/3,i+=Math.floor(e/3)/3,k.push(r,i),o<t&&a<n&&(T.push(L+n+1,L+1,L),T.push(L+n+1,L+n+2,L+1)),L++}};C(0,l,u),C(y,l,u),C(b,l,c),C(_,l,c),C(w,c,u),C(x,c,u);var D=qy(M),A=this.getComponent();A.indices=Uint32Array.from(T),A.aabb=D,A.vertexCount=L,A.attributes=[{dirty:!0,name:"position",data:Float32Array.from(M),arrayStride:12,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float3"}]},{dirty:!0,name:"normal",data:Float32Array.from(E),arrayStride:12,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float3"}]},{dirty:!0,name:"uv",data:Float32Array.from(S),arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float2"}]}]}}]),n}(Sb))||Uw;function Qw(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vp(e);if(t){var i=Vp(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Up(this,n)}}var ex,tx=(0,Np.b2)()(Jw=function(e){Hp(n,e);var t=Qw(n);function n(){return wp(this,n),t.apply(this,arguments)}return Mp(n,[{key:"onEntityCreated",value:function(){var e=this.config.geometries,t=void 0===e?[]:e,n=this.getComponent();n.aabb=new Xm;var r=[],i=[],o=0;t.forEach((function(e){var t=e.aabb,a=e.indices,s=e.vertexCount,l=e.attributes;n.aabb.add(t),n.vertexCount+=s,a&&i.push.apply(i,V_(a.map((function(e){return e+o})))),o+=s,l.forEach((function(e,t){r[t]?e.data&&(tb(e.data)?r[t].push(e.data):zb(e.data)?r[t].data=function(e,t){if(!e&&!t)throw new Error("Please specify valid arguments for parameters a and b.");if(!t||0===t.length)return e;if(!e||0===e.length)return t;if(Object.prototype.toString.call(e)!==Object.prototype.toString.call(t))throw new Error("The types of the two arguments passed for parameters a and b do not match.");var n=new e.constructor(e.length+t.length);return n.set(e),n.set(t,e.length),n}(r[t].data,e.data):r[t].data=r[t].data.concat(e.data)):(r[t]=e,r[t].dirty=!0)}))})),n.attributes=r,n.indices=Uint32Array.from(i),n.dirty=!0}}]),n}(Sb))||Jw;function nx(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vp(e);if(t){var i=Vp(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Up(this,n)}}var rx,ix=(0,Np.b2)()(ex=function(e){Hp(n,e);var t=nx(n);function n(){return wp(this,n),t.apply(this,arguments)}return Mp(n,[{key:"onEntityCreated",value:function(){for(var e=this.config,t=e.halfExtents,n=void 0===t?[.5,.5]:t,r=e.widthSegments,i=void 0===r?5:r,o=e.lengthSegments,a=void 0===o?5:o,s=[],l=[],u=[],c=[],d=0,h=0;h<=i;h++)for(var f=0;f<=a;f++){var p=-n[0]+2*n[0]*h/i,m=-(-n[1]+2*n[1]*f/a),g=h/i,v=f/a;s.push(p,0,m),l.push(0,1,0),u.push(g,v),h<i&&f<a&&(c.push(d+a+1,d+1,d),c.push(d+a+1,d+a+2,d+1)),d++}var y=qy(s),b=this.getComponent();b.indices=Uint32Array.from(c),b.aabb=y,b.vertexCount=d,b.attributes=[{dirty:!0,name:"position",data:Float32Array.from(s),arrayStride:12,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float3"}]},{dirty:!0,name:"normal",data:Float32Array.from(l),arrayStride:12,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float3"}]},{dirty:!0,name:"uv",data:Float32Array.from(u),arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float2"}]}]}}]),n}(Sb))||ex;function ox(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vp(e);if(t){var i=Vp(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Up(this,n)}}var ax,sx,lx,ux,cx,dx,hx,fx,px=(0,Np.b2)()(rx=function(e){Hp(n,e);var t=ox(n);function n(){return wp(this,n),t.apply(this,arguments)}return Mp(n,[{key:"onEntityCreated",value:function(){for(var e=this.config,t=e.radius,n=void 0===t?.5:t,r=e.latitudeBands,i=void 0===r?16:r,o=e.longitudeBands,a=void 0===o?16:o,s=[],l=[],u=[],c=[],d=0;d<=i;d++)for(var h=d*Math.PI/i,f=Math.sin(h),p=Math.cos(h),m=0;m<=a;m++){var g=2*m*Math.PI/a-Math.PI/2,v=Math.sin(g),y=Math.cos(g)*f,b=p,_=v*f,w=1-m/a,x=1-d/i;s.push(y*n,b*n,_*n),l.push(y,b,_),u.push(w,x)}for(var M=0;M<i;++M)for(var E=0;E<a;++E){var S=M*(a+1)+E,k=S+a+1;c.push(S+1,k,S),c.push(S+1,k+1,k)}var T=qy(s),L=this.getComponent();L.indices=Uint32Array.from(c),L.aabb=T,L.vertexCount=s.length/3,L.attributes=[{dirty:!0,name:"position",data:Float32Array.from(s),arrayStride:12,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float3"}]},{dirty:!0,name:"normal",data:Float32Array.from(l),arrayStride:12,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float3"}]},{dirty:!0,name:"uv",data:Float32Array.from(u),arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float2"}]}]}}]),n}(Sb))||rx;function mx(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vp(e);if(t){var i=Vp(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Up(this,n)}}var gx,vx,yx,bx,_x,wx,xx,Mx,Ex,Sx,kx,Tx,Lx=(ax=(0,Np.b2)(),sx=(0,Np.f3)(Yp.RenderEngine),lx=(0,Np.f3)(Yp.ShaderModuleService),ax((fx=function(e){Hp(n,e);var t=mx(n);function n(){var e;wp(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return _p(e=t.call.apply(t,[this].concat(i)),"engine",dx,Wp(e)),_p(e,"shaderModuleService",hx,Wp(e)),e}return Mp(n,[{key:"onEntityCreated",value:function(){var e=this.getComponent(),t=this.engine.supportWebGPU?"layout(set = 0, binding = 0) uniform Uniforms {\n  vec4 color;\n  mat4 projectionMatrix;\n  mat4 modelViewMatrix;\n} uniforms;\n\nlayout(location = 0) in vec3 position;\n// layout(location = 1) in vec3 barycentric;\n\nlayout(location = 0) out vec4 fragColor;\n// layout(location = 1) out vec3 v_Barycentric;\n\nvoid main() {\n  gl_Position = uniforms.projectionMatrix * uniforms.modelViewMatrix * vec4(position, 1.0);\n  fragColor = uniforms.color;\n  // v_Barycentric = barycentric;\n}":'attribute vec3 position;\nattribute vec3 normal;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\nuniform vec4 color;\n\nvarying vec4 fragColor;\n\n#pragma include "uv.vert.declaration"\n\nvoid main() {\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n  fragColor = color;\n\n  #pragma include "uv.vert.main"\n}',n=this.engine.supportWebGPU?"// layout(set = 0, binding = 1) uniform WireframeUniforms {\n//   float lineWidth;\n//   vec4 lineColor;\n// } wireframe;\n\nlayout(location = 0) in vec4 fragColor;\n// layout(location = 1) in vec3 v_Barycentric;\n\nlayout(location = 0) out vec4 outColor;\n\n// wireframe\n// float edgeFactor() {\n//   vec3 d = fwidth(v_Barycentric);\n//   vec3 a3 = smoothstep(vec3(0.0), d * wireframe.lineWidth, v_Barycentric);\n//   return min(min(a3.x, a3.y), a3.z);\n// }\n\nvoid main() {\n  // outColor = mix(fragColor, wireframe.lineColor, (1.0 - edgeFactor()));\n  outColor = fragColor;\n}":'varying vec4 fragColor;\n\n#pragma include "uv.frag.declaration"\n#pragma include "map.frag.declaration"\n\nvoid main() {\n  vec4 diffuseColor = fragColor;\n\n  #pragma include "map.frag.main"\n\n  gl_FragColor = diffuseColor;\n}';this.shaderModuleService.registerModule("material-basic",{vs:t,fs:n});var r=this.shaderModuleService.getModule("material-basic"),i=r.vs,o=r.fs,a=r.uniforms;e.vertexShaderGLSL=i,e.fragmentShaderGLSL=o,e.setUniform(a),this.config.map&&(e.setDefines({USE_UV:1,USE_MAP:1}),e.setUniform({map:this.config.map,uvTransform:L()}))}}]),n}(k_),dx=Ep((cx=fx).prototype,"engine",[sx],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hx=Ep(cx.prototype,"shaderModuleService",[lx],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ux=cx))||ux);function Cx(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vp(e);if(t){var i=Vp(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Up(this,n)}}var Dx,Ax,Px,Ox,Ix,Rx,Nx,Yx,jx,Fx,Bx,zx,Hx=(gx=(0,Np.b2)(),vx=(0,Np.f3)(Yp.Systems),yx=(0,Np.t6)(Yp.MaterialSystem),bx=(0,Np.f3)(Yp.Systems),_x=(0,Np.t6)(Yp.GeometrySystem),wx=(0,Np.f3)(Yp.ShaderModuleService),gx((Tx=function(e){Hp(n,e);var t=Cx(n);function n(){var e;wp(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return _p(e=t.call.apply(t,[this].concat(i)),"materialSystem",Ex,Wp(e)),_p(e,"geometrySystem",Sx,Wp(e)),_p(e,"shaderModuleService",kx,Wp(e)),e}return Mp(n,[{key:"onAttributeChanged",value:function(e){var t=e.name,n=e.data,r=this.getMeshComponent();r&&r.material&&("gridColor"===t?(r.material.setUniform("u_GridColor",n),r.material.setUniform("u_GridColor2",n)):"gridSize"===t&&(r.material.setUniform("u_GridSize",n),r.material.setUniform("u_GridSize2",n)))}},{key:"onEntityCreated",value:function(){this.shaderModuleService.registerModule("grid",{vs:"attribute vec3 a_Position;\n\nvarying vec3 v_Position;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\n\nvoid main() {\n  v_Position = a_Position;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(a_Position, 1.);\n}",fs:"// generate grid, borrow from clay.gl viewer\n// @see https://github.com/pissang/clay-viewer/blob/master/src/graphic/ground.glsl\n#extension GL_OES_standard_derivatives : enable\n\nvarying vec3 v_Position;\n// varying vec3 v_Normal;\n\nuniform float u_GridSize : 5;\nuniform float u_GridSize2 : .5;\nuniform vec4 u_GridColor : [0, 0, 0, 1];\nuniform vec4 u_GridColor2 : [0.3, 0.3, 0.3, 1];\nuniform bool u_GridEnabled : true;\n\n// uniform vec3 u_LightDirection;\n// uniform vec3 u_LightColor;\n// uniform vec3 u_Camera;\n\nvoid main() {\n  // vec3 n = v_Normal;\n  // vec3 l = normalize(u_LightDirection);\n  // float NdotL = clamp(dot(n, l), 0.001, 1.0);\n\n  gl_FragColor = vec4(1.);\n\n  if (u_GridEnabled) {\n    float wx = v_Position.x;\n    float wz = v_Position.z;\n    // float x0 = abs(fract(wx / u_GridSize - 0.5) - 0.5) / fwidth(wx) * u_GridSize / 2.0;\n    // float z0 = abs(fract(wz / u_GridSize - 0.5) - 0.5) / fwidth(wz) * u_GridSize / 2.0;\n\n    float x1 = abs(fract(wx / u_GridSize2 - 0.5) - 0.5) / fwidth(wx) * u_GridSize2;\n    float z1 = abs(fract(wz / u_GridSize2 - 0.5) - 0.5) / fwidth(wz) * u_GridSize2;\n\n    // float v0 = 1.0 - clamp(min(x0, z0), 0.0, 1.0);\n    float v1 = 1.0 - clamp(min(x1, z1), 0.0, 1.0);\n    // if (v0 > 0.1) {\n        // gl_FragColor = mix(gl_FragColor, u_GridColor, v0);\n    // }\n    // else {\n        gl_FragColor = mix(gl_FragColor, u_GridColor2, v1);\n    // }\n  }\n\n  // float shadowFactor = calcShadow(u_ShadowMap, v_PositionFromLight, l, n);\n  // vec3 diffuseColor = u_LightColor * NdotL * shadowFactor;\n\n  // gl_FragColor.rgb *= diffuseColor;\n}"});var e=this.shaderModuleService.getModule("grid"),t=e.vs,n=e.fs,r=e.uniforms,i=this.materialSystem.createShaderMaterial({vertexShader:t,fragmentShader:n});this.setMaterial(i);var o=this.geometrySystem.createBufferGeometry({vertexCount:4});this.setGeometry(o),i.setCull({enable:!1,face:gm.BACK}).setDepth({enable:!0,func:gm.LESS}),i.setUniform(r),this.setAttributes({gridColor:this.config.gridColor,gridSize:this.config.gridSize}),o.setIndex([0,3,2,2,1,0]),o.setAttribute("a_Position",Float32Array.from([-4,-1,-4,4,-1,-4,4,-1,4,-4,-1,4]),{arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]})}}]),n}(T_),Ex=Ep((Mx=Tx).prototype,"materialSystem",[vx,yx],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Sx=Ep(Mx.prototype,"geometrySystem",[bx,_x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kx=Ep(Mx.prototype,"shaderModuleService",[wx],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xx=Mx))||xx),Gx=o(32644),Wx=o(40582);function Ux(e,t,n,r,i){Vx(t,r,-i),Vx(t,r,i),e.push(n),e.push(n)}function Vx(e,t,n){e.push([[t[0],t[1]],n])}function Xx(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vp(e);if(t){var i=Vp(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Up(this,n)}}var qx,Kx,Jx,Zx,$x,Qx,eM,tM,nM,rM,iM,oM,aM=(Dx=(0,Np.b2)(),Ax=(0,Np.f3)(Yp.Systems),Px=(0,Np.t6)(Yp.MaterialSystem),Ox=(0,Np.f3)(Yp.Systems),Ix=(0,Np.t6)(Yp.GeometrySystem),Rx=(0,Np.f3)(Yp.ShaderModuleService),Dx((zx=function(e){Hp(n,e);var t=Xx(n);function n(){var e;wp(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return _p(e=t.call.apply(t,[this].concat(i)),"materialSystem",jx,Wp(e)),_p(e,"geometrySystem",Fx,Wp(e)),_p(e,"shaderModuleService",Bx,Wp(e)),e.vertexCount=void 0,e}return Mp(n,[{key:"onAttributeChanged",value:function(e){var t=e.name,n=e.data,r=this.getMeshComponent();if(r&&r.material)switch(t){case"dashArray":r.material.setUniform("u_dash_array",n);break;case"dashOffset":r.material.setUniform("u_dash_offset",n);break;case"dashRatio":r.material.setUniform("u_dash_ratio",n);break;case"thickness":r.material.setUniform("u_thickness",n);break;case"color":var i=new Array(this.vertexCount).fill(void 0).map((function(){return n})).reduce((function(e,t){return[].concat(V_(e),V_(t))}),[]);r.geometry.setAttribute("a_color",Float32Array.from(i),{arrayStride:16,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float4"}]})}}},{key:"onEntityCreated",value:function(){var e=this;this.shaderModuleService.registerModule("line",{vs:"attribute vec2 a_pos;\nattribute vec4 a_color;\nattribute float a_line_miter;\nattribute vec2 a_line_normal;\nattribute float a_counters;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\nuniform float u_thickness : 0.02;\nuniform vec2 u_viewport;\n\nvarying vec4 v_color;\nvarying vec2 v_normal;\nvarying float v_counters;\n\nvoid main() {\n  v_color = a_color;\n  v_counters = a_counters;\n\n  vec3 normal = normalize(vec3(a_line_normal, 0.0));\n\n  vec4 offset = vec4(normal * u_thickness / 2.0 * a_line_miter, 0.0);\n\n  v_normal = vec2(normal * sign(a_line_miter));\n\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(a_pos, 0.0, 1.0) + offset;\n}\n",fs:"uniform float u_dash_array : 0.02;\nuniform float u_dash_offset : 0;\nuniform float u_dash_ratio : 0;\nuniform float u_thickness : 0.02;\n\nvarying vec4 v_color;\nvarying vec2 v_normal;\nvarying float v_counters;\n\nvoid main() {\n    float blur = 1. - smoothstep(0.98, 1., length(v_normal));\n\n    gl_FragColor = v_color;\n    gl_FragColor.a *= blur * ceil(mod(v_counters + u_dash_offset, u_dash_array) - (u_dash_array * u_dash_ratio));\n}"});var t=this.shaderModuleService.getModule("line"),n=t.vs,r=t.fs,i=t.uniforms,o=this.materialSystem.createShaderMaterial({vertexShader:n,fragmentShader:r}),a=function(e,t,n){var r=[0,0],i=[0,0],o=[0,0],a=[0,0],s=-1,l=!1,u=null,c=(0,Gx.create)(),d=n||0,h=[],f=[],p=[],m=[0,0];t&&(e=e.slice()).push(e[0]);for(var g=e.length,v=1;v<g;v++){var y=d,b=e[v-1],_=e[v],w=v<e.length-1?e[v+1]:null;if(m.push(v/g,v/g),(0,Wx.o7)(r,_,b),u||(u=[0,0],(0,Wx.mJ)(u,r)),l||(l=!0,Ux(f,h,b,u,1)),p.push([y+0,y+1,y+2]),w){(0,Wx.o7)(i,w,_);var x=(0,Wx.x7)(o,a,r,i,1),M=(0,Gx.dot)(o,u)<0?-1:1,E=x>3;if(!isFinite(x)){(0,Wx.mJ)(u,r),Ux(f,h,_,u,1),p.push(1===s?[y,y+2,y+3]:[y+2,y+1,y+3]),d+=2,s=M;continue}E?(x=3,m.push(v/g),Vx(h,u,-M),f.push(_),Vx(h,a,x*M),f.push(_),p.push(s!==-M?[y,y+2,y+3]:[y+2,y+1,y+3]),p.push([y+2,y+3,y+4]),(0,Wx.mJ)(c,i),(0,Gx.copy)(u,c),Vx(h,u,-M),f.push(_),d+=3):(Ux(f,h,_,a,x),p.push(1===s?[y,y+2,y+3]:[y+2,y+1,y+3]),M=-1,(0,Gx.copy)(u,a),d+=2),s=M}else(0,Wx.mJ)(u,r),Ux(f,h,_,u,1),p.push(1===s?[y,y+2,y+3]:[y+2,y+1,y+3]),d+=2}return{normals:h,attrIndex:p,attrPos:f,attrCounters:m}}(this.config.points,!1),s=a.normals,l=a.attrIndex,u=a.attrPos,c=a.attrCounters,d=u.length;this.vertexCount=d;var h=this.geometrySystem.createBufferGeometry({vertexCount:d});this.setMaterial(o),this.setGeometry(h),o.setCull({enable:!1,face:gm.BACK}).setUniform(i),this.setAttributes({dashArray:this.config.dashArray,dashOffset:this.config.dashOffset,dashRatio:this.config.dashRatio,thickness:this.config.thickness});var f=[],p=[];s.forEach((function(e){var t=e[0],n=e[1];f.push([t[0],t[1]]),p.push(n)})),h.setIndex(l.reduce((function(e,t){return[].concat(V_(e),V_(t))}),[])),h.setAttribute("a_pos",Float32Array.from(u.reduce((function(e,t){return[].concat(V_(e),V_(t))}),[])),{arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]});var m=new Array(d).fill(void 0).map((function(){return V_(e.config.color)})).reduce((function(e,t){return[].concat(V_(e),V_(t))}),[]);h.setAttribute("a_color",Float32Array.from(m),{arrayStride:16,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float4"}]}),h.setAttribute("a_line_miter",Float32Array.from(p),{arrayStride:4,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float"}]}),h.setAttribute("a_line_normal",Float32Array.from(f.reduce((function(e,t){return[].concat(V_(e),V_(t))}),[])),{arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:3,offset:0,format:"float2"}]}),h.setAttribute("a_counters",Float32Array.from(c),{arrayStride:4,stepMode:"vertex",attributes:[{shaderLocation:4,offset:0,format:"float"}]})}}]),n}(T_),jx=Ep((Yx=zx).prototype,"materialSystem",[Ax,Px],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fx=Ep(Yx.prototype,"geometrySystem",[Ox,Ix],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Bx=Ep(Yx.prototype,"shaderModuleService",[Rx],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Nx=Yx))||Nx);function sM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lM(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vp(e);if(t){var i=Vp(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Up(this,n)}}var uM,cM,dM,hM,fM,pM,mM,gM,vM,yM,bM=["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"],_M=(qx=(0,Np.b2)(),Kx=(0,Np.f3)(Yp.Systems),Jx=(0,Np.t6)(Yp.MaterialSystem),Zx=(0,Np.f3)(Yp.Systems),$x=(0,Np.t6)(Yp.GeometrySystem),Qx=(0,Np.f3)(Yp.ShaderModuleService),qx((oM=function(e){Hp(n,e);var t=lM(n);function n(){var e;wp(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return _p(e=t.call.apply(t,[this].concat(i)),"materialSystem",nM,Wp(e)),_p(e,"geometrySystem",rM,Wp(e)),_p(e,"shaderModuleService",iM,Wp(e)),e}return Mp(n,[{key:"onAttributeChanged",value:function(e){var t=e.name,n=e.data,r=this.getMeshComponent();r&&r.material&&("strokeWidth"===t?r.material.setUniform("u_stroke_width",n):"strokeColor"===t?r.material.setUniform("u_stroke_color",n):"strokeOpacity"===t?r.material.setUniform("u_stroke_opacity",n):"opacity"===t?r.material.setUniform("u_opacity",n):"blur"===t&&r.material.setUniform("u_blur",n))}},{key:"onEntityCreated",value:function(){this.shaderModuleService.registerModule("grid",{vs:'attribute vec2 position;\nattribute vec4 color;\nattribute float shape;\nattribute vec2 offset;\nattribute float size;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\n\nuniform float u_stroke_width : 0.01;\nuniform float u_device_pixel_ratio;\nuniform vec2 u_viewport;\n\nvarying vec4 v_color;\nvarying vec4 v_data;\nvarying float v_radius;\n\n#pragma include "picking"\n\nvoid main() {\n  v_color = color;\n  v_radius = size;\n\n  lowp float antialiasblur = 1.0 / u_device_pixel_ratio * (size + u_stroke_width);\n\n  // construct point coords\n  v_data = vec4(position, antialiasblur, shape);\n\n  gl_Position = projectionMatrix * modelViewMatrix\n    * vec4(position * size + offset, 0.0, 1.0);\n\n  setPickingColor(a_PickingColor);\n}',fs:"uniform float u_blur : 0.05;\nuniform float u_opacity : 0.7;\nuniform float u_stroke_width : 0.01;\nuniform vec4 u_stroke_color : [0, 0, 0, 0];\nuniform float u_stroke_opacity : 1;\n\nvarying vec4 v_color;\nvarying vec4 v_data;\nvarying float v_radius;\n\n#pragma include \"sdf2d\"\n#pragma include \"picking\"\n\nvoid main() {\n  int shape = int(floor(v_data.w + 0.5));\n\n  float antialiasblur = v_data.z;\n  float antialiased_blur = -max(u_blur, antialiasblur);\n  float r = v_radius / (v_radius + u_stroke_width);\n\n  float outer_df;\n  float inner_df;\n  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'\n  // if (shape == 0) {\n    outer_df = sdCircle(v_data.xy, 1.0);\n    inner_df = sdCircle(v_data.xy, r);\n  // } else if (shape == 1) {\n  //   outer_df = sdEquilateralTriangle(1.1 * v_data.xy);\n  //   inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);\n  // } else if (shape == 2) {\n  //   outer_df = sdBox(v_data.xy, vec2(1.));\n  //   inner_df = sdBox(v_data.xy, vec2(r));\n  // } else if (shape == 3) {\n  //   outer_df = sdPentagon(v_data.xy, 0.8);\n  //   inner_df = sdPentagon(v_data.xy, r * 0.8);\n  // } else if (shape == 4) {\n  //   outer_df = sdHexagon(v_data.xy, 0.8);\n  //   inner_df = sdHexagon(v_data.xy, r * 0.8);\n  // } else if (shape == 5) {\n  //   outer_df = sdOctogon(v_data.xy, 1.0);\n  //   inner_df = sdOctogon(v_data.xy, r);\n  // } else if (shape == 6) {\n  //   outer_df = sdHexagram(v_data.xy, 0.52);\n  //   inner_df = sdHexagram(v_data.xy, r * 0.52);\n  // } else if (shape == 7) {\n  //   outer_df = sdRhombus(v_data.xy, vec2(1.0));\n  //   inner_df = sdRhombus(v_data.xy, vec2(r));\n  // } else if (shape == 8) {\n  //   outer_df = sdVesica(v_data.xy, 1.1, 0.8);\n  //   inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);\n  // }\n\n  float opacity_t = smoothstep(0.0, antialiased_blur, outer_df);\n\n  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(\n    antialiased_blur,\n    0.0,\n    inner_df\n  );\n  vec4 strokeColor = u_stroke_color == vec4(0) ? v_color : u_stroke_color;\n\n  gl_FragColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), strokeColor * u_stroke_opacity, color_t);\n  gl_FragColor.a = gl_FragColor.a * opacity_t;\n\n  gl_FragColor = filterColor(gl_FragColor);\n}"});var e=this.shaderModuleService.getModule("grid"),t=e.vs,n=e.fs,r=e.uniforms,i=this.materialSystem.createShaderMaterial({vertexShader:t,fragmentShader:n,cull:{enable:!1},depth:{enable:!1},blend:{enable:!0,func:{srcRGB:gm.SRC_ALPHA,dstRGB:gm.ONE_MINUS_SRC_ALPHA,srcAlpha:1,dstAlpha:1}}});i.setUniform(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sM(Object(n),!0).forEach((function(t){om(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sM(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({u_device_pixel_ratio:window.devicePixelRatio},r));var o=this.buildAttributes(),a=this.geometrySystem.createInstancedBufferGeometry({maxInstancedCount:o.instancedOffsets.length/2,vertexCount:6});a.setIndex([0,2,1,0,3,2]),a.setAttribute("position",Float32Array.from(o.positions),{arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]}),a.setAttribute("offset",Float32Array.from(o.instancedOffsets),{arrayStride:8,stepMode:"instance",attributes:[{shaderLocation:1,offset:0,format:"float2"}]}),a.setAttribute("color",Float32Array.from(o.instancedColors),{arrayStride:16,stepMode:"instance",attributes:[{shaderLocation:2,offset:0,format:"float4"}]}),a.setAttribute("size",Float32Array.from(o.instancedSizes),{arrayStride:4,stepMode:"instance",attributes:[{shaderLocation:3,offset:0,format:"float"}]}),a.setAttribute("shape",Float32Array.from(o.instancedShapes),{arrayStride:4,stepMode:"instance",attributes:[{shaderLocation:4,offset:0,format:"float"}]}),a.setAttribute("a_PickingColor",Float32Array.from(o.instancedPickingColors),{arrayStride:12,stepMode:"instance",attributes:[{shaderLocation:6,offset:0,format:"float3"}]}),this.setMaterial(i),this.setGeometry(a)}},{key:"buildAttribute",value:function(e,t,n){var r,i,o,a,s;(r=t.instancedPickingColors).push.apply(r,V_([(s=e.id||n)+1&255,s+1>>8&255,s+1>>8>>8&255])),t.instancedShapes.push(bM.indexOf(e.shape||"circle")),(i=t.instancedColors).push.apply(i,V_(e.color||[1,0,0,1])),(o=t.instancedOffsets).push.apply(o,V_(e.position||[0,0])),(a=t.instancedSizes).push.apply(a,V_(e.size||[.2,.2]))}},{key:"buildAttributes",value:function(){var e=this,t={positions:[1,1,1,-1,-1,-1,-1,1],instancedOffsets:[],instancedColors:[],instancedSizes:[],instancedShapes:[],instancedPickingColors:[]};return Array.isArray(this.config)?this.config.forEach((function(n,r){e.buildAttribute(n,t,r)})):this.buildAttribute(this.config,t,0),t}}]),n}(T_),nM=Ep((tM=oM).prototype,"materialSystem",[Kx,Jx],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rM=Ep(tM.prototype,"geometrySystem",[Zx,$x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),iM=Ep(tM.prototype,"shaderModuleService",[Qx],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),eM=tM))||eM);function wM(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return xM(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xM(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function xM(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var MM,EM,SM,kM,TM,LM,CM,DM,AM,PM,OM,IM,RM=(uM=(0,Np.b2)(),cM=(0,Np.f3)(Yp.RenderEngine),dM=(0,Np.f3)(Yp.ShaderModuleService),hM=(0,Np.f3)(Yp.ConfigService),uM((yM=function(){function e(){wp(this,e),this.container=void 0,_p(this,"engine",mM,this),_p(this,"shaderModule",gM,this),_p(this,"configService",vM,this),this.inited=!1,this.rendering=!1,this.pendings=[],this.views=[],this.size=void 0}var t,n;return Mp(e,[{key:"init",value:(n=Lp(kp().mark((function e(){var t,n,r,i,o;return kp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.shaderModule.registerBuiltinModules(),this.shaderModule.registerModule("uv.vert.declaration",{vs:"#ifdef USE_UV\n  attribute vec2 uv;\n\t#ifdef UVS_VERTEX_ONLY\n    vec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif"}),this.shaderModule.registerModule("uv.vert.main",{vs:"#ifdef USE_UV\n  vUv = (uvTransform * vec3(uv, 1)).xy;\n#endif"}),this.shaderModule.registerModule("uv.frag.declaration",{fs:"#if (defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ))\n  varying vec2 vUv;\n#endif"}),this.shaderModule.registerModule("map.frag.declaration",{fs:"#ifdef USE_MAP\n  uniform sampler2D map;\n#endif"}),this.shaderModule.registerModule("map.frag.main",{fs:"#ifdef USE_MAP\n  vec4 texelColor = texture2D(map, vUv);\n  // texelColor = mapTexelToLinear(texelColor);\n  diffuseColor *= texelColor;\n#endif"}),t=this.container.getAll(Yp.Systems),!(n=this.configService.get()).canvas){e.next=30;break}return e.next=11,this.engine.init({canvas:n.canvas,swapChainFormat:kb.EV.BGRA8Unorm,antialiasing:!1});case 11:r=wM(t),e.prev=12,r.s();case 14:if((i=r.n()).done){e.next=21;break}if(!(o=i.value).initialize){e.next=19;break}return e.next=19,o.initialize();case 19:e.next=14;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(12),r.e(e.t0);case 26:return e.prev=26,r.f(),e.finish(26);case 29:this.inited=!0;case 30:case"end":return e.stop()}}),e,this,[[12,23,26,29]])}))),function(){return n.apply(this,arguments)})},{key:"render",value:(t=Lp(kp().mark((function e(){var t,n,r,i,o,a,s,l=arguments;return kp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.inited&&!this.rendering){e.next=2;break}return e.abrupt("return");case 2:for(this.pendings.length&&this.pendings.forEach((function(e){e()})),this.rendering=!0,this.engine.beginFrame(),t=this.container.getAll(Yp.Systems),n=l.length,r=new Array(n),i=0;i<n;i++)r[i]=l[i];o=wM(t),e.prev=8,o.s();case 10:if((a=o.n()).done){e.next=17;break}if(!(s=a.value).execute){e.next=15;break}return e.next=15,s.execute(r);case 15:e.next=10;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(8),o.e(e.t0);case 22:return e.prev=22,o.f(),e.finish(22);case 25:this.engine.endFrame(),this.rendering=!1;case 27:case"end":return e.stop()}}),e,this,[[8,19,22,25]])}))),function(){return t.apply(this,arguments)})},{key:"clear",value:function(e){var t=this;return this.inited?this.engine.clear(e):this.pendings.unshift((function(){t.engine.clear(e),t.pendings.shift()})),this}},{key:"setSize",value:function(e){var t=e.width,n=e.height,r=this.engine.getCanvas();return this.size={width:t,height:n},r.width=t,r.height=n,this}},{key:"getSize",value:function(){return this.size}}]),e}(),mM=Ep((pM=yM).prototype,"engine",[cM],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gM=Ep(pM.prototype,"shaderModule",[dM],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vM=Ep(pM.prototype,"configService",[hM],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fM=pM))||fM),NM=(0,Np.b2)()((EM=function(){function e(){wp(this,e),this.entities=[]}return Mp(e,[{key:"getEntities",value:function(){return this.entities}},{key:"addRenderable",value:function(e){return this.addEntity(e.getEntity()),this}},{key:"removeRenderable",value:function(e){return this.removeEntity(e.getEntity()),this}},{key:"addLight",value:function(){}},{key:"addEntity",value:function(e){return-1===this.entities.indexOf(e)&&this.entities.push(e),this}},{key:"removeEntity",value:function(e){var t=this.entities.indexOf(e);return this.entities.splice(t,1),this}}]),e}(),MM=EM))||MM,YM=(0,Np.b2)()((kM=function(){function e(){wp(this,e),this.cache={}}return Mp(e,[{key:"get",value:function(e){return this.cache[e]}},{key:"set",value:function(e,t){this.cache[e]=t}}]),e}(),SM=kM))||SM;function jM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function FM(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jM(Object(n),!0).forEach((function(t){om(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jM(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var BM,zM,HM,GM,WM,UM,VM,XM,qM,KM,JM,ZM,$M,QM=(TM=(0,Np.b2)(),LM=(0,Np.f3)(YM),CM=(0,Np.f3)(Yp.RenderEngine),TM((IM=function(){function e(){wp(this,e),_p(this,"textureCache",PM,this),_p(this,"engine",OM,this),this.config=void 0,this.loaded=!1,this.texture=void 0}var t;return Mp(e,[{key:"setConfig",value:function(e){this.config=e}},{key:"isLoaded",value:function(){return this.loaded}},{key:"load",value:(t=Lp(kp().mark((function e(){var t=this;return kp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.config.url){e.next=4;break}return e.abrupt("return",new Promise((function(e,n){var r=t.textureCache.get(t.config.url);if(r)e(r);else{var i=new Image;i.crossOrigin="Anonymous",i.src=t.config.url,i.onload=function(){var n=t.engine.createTexture2D(FM(FM({},t.config),{},{data:i,width:i.width,height:i.height,flipY:!0}));t.textureCache.set(t.config.url,n),t.texture=n,t.loaded=!0,e(n)},i.onerror=function(){n()}}})));case 4:return this.loaded=!0,this.texture=this.engine.createTexture2D(this.config),e.abrupt("return",this.texture);case 7:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}(),PM=Ep((AM=IM).prototype,"textureCache",[LM],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),OM=Ep(AM.prototype,"engine",[CM],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),DM=AM))||DM),eE=(BM=(0,Np.b2)(),zM=(0,Np.f3)(Yp.Systems),HM=(0,Np.t6)(Yp.RendererSystem),BM((VM=function(){function e(){wp(this,e),_p(this,"rendererSystem",UM,this),this.camera=void 0,this.scene=void 0,this.viewport={x:0,y:0,width:0,height:0},this.clearColor=[1,1,1,1]}return Mp(e,[{key:"getCamera",value:function(){return this.camera}},{key:"getScene",value:function(){return this.scene}},{key:"getViewport",value:function(){return this.viewport}},{key:"getClearColor",value:function(){return this.clearColor}},{key:"setCamera",value:function(e){return this.camera=e,this}},{key:"setScene",value:function(e){return this.scene=e,this}},{key:"setViewport",value:function(e){return this.viewport=e,this}},{key:"setClearColor",value:function(e){return this.clearColor=e,this}},{key:"pick",value:function(e){return this.rendererSystem.pick(e,this)}}]),e}(),UM=Ep((WM=VM).prototype,"rendererSystem",[zM,HM],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),GM=WM))||GM);function tE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tE(Object(n),!0).forEach((function(t){om(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var rE=(XM=(0,Np.b2)(),qM=(0,Np.f3)(Yp.ConfigService),XM(($M=function(){function e(){wp(this,e),_p(this,"configService",ZM,this),this.container=void 0}var t;return Mp(e,[{key:"getEngine",value:(t=Lp(kp().mark((function e(){var t,n,r,i;return kp().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.container.get(Yp.RenderEngine),n=this.configService.get(),r=n.canvas,i=n.engineOptions,e.next=4,t.init(nE({canvas:r||Tb(),swapChainFormat:kb.EV.BGRA8Unorm,antialiasing:!1},i));case 4:return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"getTransformComponent",value:function(e){return this.container.get(Yp.TransformComponentManager).getComponentByEntity(e)}},{key:"getMeshComponent",value:function(e){return this.container.get(Yp.MeshComponentManager).getComponentByEntity(e)}},{key:"setConfig",value:function(e){this.configService.set(e)}},{key:"setContainer",value:function(e){this.container=e}},{key:"getContainer",value:function(){return this.container}},{key:"createEntity",value:function(){return Dp()}},{key:"createScene",value:function(){return this.container.get(NM)}},{key:"createCamera",value:function(){return this.container.get(Eb)}},{key:"createView",value:function(){return this.container.get(eE)}},{key:"createRenderable",value:function(e,t){var n=e?this.container.getNamed(Yp.Renderable,e):this.container.get(T_),r=Dp();return n.setConfig(t||{}),n.setEntity(r),n}},{key:"createGeometry",value:function(e,t){var n=this.container.getNamed(Yp.Geometry,e),r=Dp();return n.setConfig(t||{}),n.setEntity(r),n.getComponent()}},{key:"createMaterial",value:function(e,t){var n=this.container.getNamed(Yp.Material,e),r=Dp();return n.setConfig(t||{}),n.setEntity(r,e),n.getComponent()}},{key:"createTexture2D",value:function(e){var t=this.container.get(QM);return t.setConfig(e),t}},{key:"createBufferGeometry",value:function(e){return this.container.getNamed(Yp.Systems,Yp.GeometrySystem).createBufferGeometry(e)}},{key:"createInstancedBufferGeometry",value:function(e){return this.container.getNamed(Yp.Systems,Yp.GeometrySystem).createInstancedBufferGeometry(e)}},{key:"createShaderMaterial",value:function(e){return this.container.getNamed(Yp.Systems,Yp.MaterialSystem).createShaderMaterial(e)}},{key:"createKernel",value:function(e){var t=this.container.get(S_);return"string"==typeof e?t.setBundle(JSON.parse(e)):t.setBundle(e),t.init(),t}},{key:"createRenderer",value:function(){var e=this.container.get(RM);return e.container=this.container,e.init(),e}},{key:"destroy",value:function(){this.container.getAll(Yp.Systems).forEach((function(e){e.tearDown&&e.tearDown()})),this.container.get(Yp.RenderEngine).destroy(),this.container.get(Yp.InteractorService).destroy()}}],[{key:"create",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Xy(),r=navigator.gpu?qw:hw;n.isBound(Yp.RenderEngine)||n.bind(Yp.RenderEngine).to(r).inSingletonScope(),n.bind(RM).toSelf(),n.bind(S_).toSelf(),n.bind(T_).toSelf(),n.bind(eE).toSelf(),n.bind(Eb).toSelf(),n.bind(NM).toSelf(),n.bind(e).toSelf(),n.bind(YM).toSelf(),n.bind(QM).toSelf(),n.bind(Yp.Geometry).to($w).whenTargetNamed(Sb.BOX),n.bind(Yp.Geometry).to(px).whenTargetNamed(Sb.SPHERE),n.bind(Yp.Geometry).to(ix).whenTargetNamed(Sb.PLANE),n.bind(Yp.Geometry).to(tx).whenTargetNamed(Sb.MERGED),n.bind(Yp.Material).to(Lx).whenTargetNamed(k_.BASIC),n.bind(Yp.Renderable).to(_M).whenTargetNamed(T_.POINT),n.bind(Yp.Renderable).to(aM).whenTargetNamed(T_.LINE),n.bind(Yp.Renderable).to(Hx).whenTargetNamed(T_.GRID);var i=n.get(e);return i.setContainer(n),i.setConfig(t),i}}]),e}(),ZM=Ep((JM=$M).prototype,"configService",[qM],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),KM=JM))||KM);const iE=(e,t)=>{let n;return n=e?qh(e)?()=>e:e:()=>t||1,n},oE=e=>{const t=[],n=e.length,r=e[0].length;for(let i=0;i<r;i++)e.forEach(((e,r)=>{if(t.push(e[i]),r===n-1)for(;t.length%4!=0;)t.push(0)}));return new Float32Array(t)};var aE=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}l((r=r.apply(e,t||[])).next())}))};var sE=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){e.done?i(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,s)}l((r=r.apply(e,t||[])).next())}))};class lE{constructor(e){this.id=e.id||0,this.rx=e.rx,this.ry=e.ry,this.fx=0,this.fy=0,this.mass=e.mass,this.degree=e.degree,this.g=e.g||0}distanceTo(e){const t=this.rx-e.rx,n=this.ry-e.ry;return Math.hypot(t,n)}setPos(e,t){this.rx=e,this.ry=t}resetForce(){this.fx=0,this.fy=0}addForce(e){const t=e.rx-this.rx,n=e.ry-this.ry;let r=Math.hypot(t,n);r=r<1e-4?1e-4:r;const i=this.g*(this.degree+1)*(e.degree+1)/r;this.fx+=i*t/r,this.fy+=i*n/r}in(e){return e.contains(this.rx,this.ry)}add(e){const t=this.mass+e.mass,n=(this.rx*this.mass+e.rx*e.mass)/t,r=(this.ry*this.mass+e.ry*e.mass)/t,i=this.degree+e.degree;return new lE({rx:n,ry:r,mass:t,degree:i})}}class uE{constructor(e){this.xmid=e.xmid,this.ymid=e.ymid,this.length=e.length,this.massCenter=e.massCenter||[0,0],this.mass=e.mass||1}getLength(){return this.length}contains(e,t){const n=this.length/2;return e<=this.xmid+n&&e>=this.xmid-n&&t<=this.ymid+n&&t>=this.ymid-n}NW(){const e=this.xmid-this.length/4,t=this.ymid+this.length/4,n=this.length/2;return new uE({xmid:e,ymid:t,length:n})}NE(){const e=this.xmid+this.length/4,t=this.ymid+this.length/4,n=this.length/2;return new uE({xmid:e,ymid:t,length:n})}SW(){const e=this.xmid-this.length/4,t=this.ymid-this.length/4,n=this.length/2;return new uE({xmid:e,ymid:t,length:n})}SE(){const e=this.xmid+this.length/4,t=this.ymid-this.length/4,n=this.length/2;return new uE({xmid:e,ymid:t,length:n})}}class cE{constructor(e){this.body=null,this.quad=null,this.NW=null,this.NE=null,this.SW=null,this.SE=null,this.theta=.5,null!=e&&(this.quad=e)}insert(e){null!=this.body?this._isExternal()?(this.quad&&(this.NW=new cE(this.quad.NW()),this.NE=new cE(this.quad.NE()),this.SW=new cE(this.quad.SW()),this.SE=new cE(this.quad.SE())),this._putBody(this.body),this._putBody(e),this.body=this.body.add(e)):(this.body=this.body.add(e),this._putBody(e)):this.body=e}_putBody(e){this.quad&&(e.in(this.quad.NW())&&this.NW?this.NW.insert(e):e.in(this.quad.NE())&&this.NE?this.NE.insert(e):e.in(this.quad.SW())&&this.SW?this.SW.insert(e):e.in(this.quad.SE())&&this.SE&&this.SE.insert(e))}_isExternal(){return null==this.NW&&null==this.NE&&null==this.SW&&null==this.SE}updateForce(e){if(null!=this.body&&e!==this.body)if(this._isExternal())e.addForce(this.body);else{(this.quad?this.quad.getLength():0)/this.body.distanceTo(e)<this.theta?e.addForce(this.body):(this.NW&&this.NW.updateForce(e),this.NE&&this.NE.updateForce(e),this.SW&&this.SW.updateForce(e),this.SE&&this.SE.updateForce(e))}}}const dE=new Proxy({},{get:(e,t)=>{return n=t,af.has(n)?af.get(n):null;var n},set:(e,t,n)=>(sf(t,n),!0)});var hE=o(81746),fE=o.n(hE),pE=Tu.traverseTree,mE=function(e,t){return e?(0,b.isNumber)(e)?function(t){return e}:e:function(e){return t||1}},gE=function(e,t){var n=[],r=[],i={},o=0;for(o=0;o<e.length;o++){var a=e[o];i[a.id]=o,n.push(a.x),n.push(a.y),n.push(0),n.push(0),r.push([])}for(o=0;o<t.length;o++){var s=t[o];r[i[s.source]].push(i[s.target]),r[i[s.target]].push(i[s.source])}var l=0;for(o=0;o<e.length;o++){var u=n.length,c=r[o],d=c.length;n[4*o+2]=u,n[4*o+3]=c.length,l=Math.max(l,c.length);for(var h=0;h<d;++h){var f=c[h];n.push(+f)}}for(;n.length%4!=0;)n.push(0);return{array:new Float32Array(n),maxEdgePerVetex:l}},vE=function(e,t,n){var r=[],i=[],o={},a=0;for(a=0;a<e.length;a++){var s=e[a];o[s.id]=a,r.push(s.x),r.push(s.y),r.push(0),r.push(0),i.push([])}for(a=0;a<t.length;a++){var l=t[a];i[o[l.source]].push(o[l.target]),i[o[l.source]].push(n(l)),i[o[l.target]].push(o[l.source]),i[o[l.target]].push(n(l))}var u=0;for(a=0;a<e.length;a++){var c=r.length,d=i[a],h=d.length;r[4*a+2]=c,r[4*a+3]=h/2,u=Math.max(u,h/2);for(var f=0;f<h;++f){var p=d[f];r.push(+p)}}for(;r.length%4!=0;)r.push(0);return{array:new Float32Array(r),maxEdgePerVetex:u}},yE=function(e,t,n,r){var i=[],o=[],a={},s=0;for(s=0;s<e.length;s++){var l=e[s];a[l.id]=s,i.push(l.x),i.push(l.y),i.push(0),i.push(0),o.push([])}for(s=0;s<t.length;s++){var u=t[s];o[a[u.source]].push(a[u.target]),o[a[u.source]].push(n(u)),o[a[u.source]].push(r(u)),o[a[u.source]].push(0),o[a[u.target]].push(a[u.source]),o[a[u.target]].push(n(u)),o[a[u.target]].push(r(u)),o[a[u.target]].push(0)}var c=0;for(s=0;s<e.length;s++){var d=i.length,h=o[s],f=h.length;i[4*s+2]=d+1048576*f/4,i[4*s+3]=0,c=Math.max(c,f/4);for(var p=0;p<f;++p){var m=h[p];i.push(+m)}}for(;i.length%4!=0;)i.push(0);return{array:new Float32Array(i),maxEdgePerVetex:c}},bE=function(e,t){var n=[],r=e.length,i={};return t.forEach((function(t){e.forEach((function(e,o){if(void 0===i[t[e]]&&(i[t[e]]=Object.keys(i).length),n.push(i[t[e]]),o===r-1)for(;n.length%4!=0;)n.push(0)}))})),{array:new Float32Array(n),count:Object.keys(i).length}},_E=function(e){for(var t=[],n=e.length,r=e[0].length,i=function(r){e.forEach((function(e,i){if(t.push(e[r]),i===n-1)for(;t.length%4!=0;)t.push(0)}))},o=0;o<r;o++)i(o);return new Float32Array(t)},wE=function(e,t){var n={x:1/0,y:1/0},r={x:-1/0,y:-1/0},i="x",o="y";t&&["V","TB","BT"].indexOf(t)>=0&&(o="x",i="y");var a=0;pE(e,(function(e){return a++,e.x>r.x&&(r.x=e.x),e.x<n.x&&(n.x=e.x),e.y>r.y&&(r.y=e.y),e.y<n.y&&(n.y=e.y),!0}));var s=2*Math.PI/a,l=r[o]-n[o];return 0===l||pE(e,(function(t){var r=(t[o]-n[o])/l*(2*Math.PI-s)+s,a=Math.abs("x"===i?t.x-e.x:t.y-e.y);return t.x=a*Math.cos(r),t.y=a*Math.sin(r),!0})),e},xE=function e(){return"undefined"==typeof window||"undefined"==typeof document?{}:{canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var e=document.createElement("canvas");return!(!window.WebGLRenderingContext||!e.getContext("webgl")&&!e.getContext("experimental-webgl"))}catch(e){return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var e=document.createElement("div");return e.id="webgl-error-message",e.style.fontFamily="monospace",e.style.fontSize="13px",e.style.fontWeight="normal",e.style.textAlign="center",e.style.background="#fff",e.style.color="#000",e.style.padding="1.5em",e.style.width="400px",e.style.margin="5em auto 0",this.webgl||(e.innerHTML=window.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join("\n"):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join("\n")),e},addGetWebGLMessage:function(t){var n=void 0!==(t=t||{}).parent?t.parent:document.body,r=void 0!==t.id?t.id:"oldie",i=e().getWebGLErrorMessage();i.id=r,n.appendChild(i)}}};const ME=(0,y.__assign)((0,y.__assign)((0,y.__assign)((0,y.__assign)({},Tu),p),m),g);var EE=ME.radialLayout,SE=function(){function e(e){this.type=e.type,this.radial=e.radial,this.config=e}return e.prototype.init=function(e){var t=this;this.data=e,this.radial?this.layoutMethod=function(e){var n=fE()[t.type](e,t.config);return EE(n),n}:this.layoutMethod=function(e){return fE()[t.type](e,t.config)}},e.prototype.execute=function(){return this.layoutMethod(this.data,this.config)},e.prototype.layout=function(e){return this.init(e),this.execute()},e}();const kE=SE;sf("grid",class extends Wh{constructor(e){super(),this.begin=[0,0],this.preventOverlap=!0,this.preventOverlapPadding=10,this.condense=!1,this.sortBy="degree",this.nodeSize=30,this.nodes=[],this.edges=[],this.width=300,this.height=300,this.row=0,this.col=0,this.cellWidth=0,this.cellHeight=0,this.cellUsed={},this.id2manPos={},this.onLayoutEnd=()=>{},this.updateCfg(e)}getDefaultCfg(){return{begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30}}execute(){const e=this,t=e.nodes,n=e.edges,r=t.length,i=e.begin;if(0===r)return e.onLayoutEnd&&e.onLayoutEnd(),{nodes:t,edges:n};if(1===r)return t[0].x=i[0],t[0].y=i[1],e.onLayoutEnd&&e.onLayoutEnd(),{nodes:t,edges:n};const o=[];t.forEach((e=>{o.push(e)}));const a={};if(o.forEach(((e,t)=>{a[e.id]=t})),("degree"===e.sortBy||!Uh(e.sortBy)||void 0===o[0][e.sortBy])&&(e.sortBy="degree",Kh(t[0].degree))){const e=Qh(o.length,a,n);o.forEach(((t,n)=>{t.degree=e[n]}))}o.sort(((t,n)=>n[e.sortBy]-t[e.sortBy])),e.width||"undefined"==typeof window||(e.width=window.innerWidth),e.height||"undefined"==typeof window||(e.height=window.innerHeight);const s=e.rows,l=null!=e.cols?e.cols:e.columns;if(e.cells=r,null!=s&&null!=l?(e.rows=s,e.cols=l):null!=s&&null==l?(e.rows=s,e.cols=Math.ceil(e.cells/e.rows)):null==s&&null!=l?(e.cols=l,e.rows=Math.ceil(e.cells/e.cols)):(e.splits=Math.sqrt(e.cells*e.height/e.width),e.rows=Math.round(e.splits),e.cols=Math.round(e.width/e.height*e.splits)),e.cols*e.rows>e.cells){const t=e.small(),n=e.large();(t-1)*n>=e.cells?e.small(t-1):(n-1)*t>=e.cells&&e.large(n-1)}else for(;e.cols*e.rows<e.cells;){const t=e.small(),n=e.large();(n+1)*t>=e.cells?e.large(n+1):e.small(t+1)}e.cellWidth=e.width/e.cols,e.cellHeight=e.height/e.rows,e.condense&&(e.cellWidth=0,e.cellHeight=0),e.preventOverlap&&o.forEach((t=>{let n,r;t.x&&t.y||(t.x=0,t.y=0),Xh(t.size)?(n=t.size[0],r=t.size[1]):qh(t.size)?(n=t.size,r=t.size):Jh(t.size)&&(n=t.size.width,r=t.size.height),void 0!==n&&void 0!==r||(Xh(e.nodeSize)?(n=e.nodeSize[0],r=e.nodeSize[1]):qh(e.nodeSize)?(n=e.nodeSize,r=e.nodeSize):(n=30,r=30));const i=e.preventOverlapPadding,o=n+i,a=r+i;e.cellWidth=Math.max(e.cellWidth,o),e.cellHeight=Math.max(e.cellHeight,a)})),e.cellUsed={},e.row=0,e.col=0,e.id2manPos={};for(let t=0;t<o.length;t++){const n=o[t];let r;if(e.position&&(r=e.position(n)),r&&(void 0!==r.row||void 0!==r.col)){const t={row:r.row,col:r.col};if(void 0===t.col)for(t.col=0;e.used(t.row,t.col);)t.col++;else if(void 0===t.row)for(t.row=0;e.used(t.row,t.col);)t.row++;e.id2manPos[n.id]=t,e.use(t.row,t.col)}e.getPos(n)}return e.onLayoutEnd&&e.onLayoutEnd(),{edges:n,nodes:o}}small(e){const t=this;let n;const r=t.rows||5,i=t.cols||5;if(null==e)n=Math.min(r,i);else{Math.min(r,i)===t.rows?t.rows=e:t.cols=e}return n}large(e){const t=this;let n;const r=t.rows||5,i=t.cols||5;if(null==e)n=Math.max(r,i);else{Math.max(r,i)===t.rows?t.rows=e:t.cols=e}return n}used(e,t){return this.cellUsed[`c-${e}-${t}`]||!1}use(e,t){this.cellUsed[`c-${e}-${t}`]=!0}moveToNextCell(){const e=this,t=e.cols||5;e.col++,e.col>=t&&(e.col=0,e.row++)}getPos(e){const t=this,n=t.begin,r=t.cellWidth,i=t.cellHeight;let o,a;const s=t.id2manPos[e.id];if(s)o=s.col*r+r/2+n[0],a=s.row*i+i/2+n[1];else{for(;t.used(t.row,t.col);)t.moveToNextCell();o=t.col*r+r/2+n[0],a=t.row*i+i/2+n[1],t.use(t.row,t.col),t.moveToNextCell()}e.x=o,e.y=a}getType(){return"grid"}}),sf("random",class extends Wh{constructor(e){super(),this.center=[0,0],this.width=300,this.height=300,this.nodes=[],this.edges=[],this.onLayoutEnd=()=>{},this.updateCfg(e)}getDefaultCfg(){return{center:[0,0],width:300,height:300}}execute(){const e=this,t=e.nodes,n=e.center;return e.width||"undefined"==typeof window||(e.width=window.innerWidth),e.height||"undefined"==typeof window||(e.height=window.innerHeight),t&&t.forEach((t=>{t.x=.9*(Math.random()-.5)*e.width+n[0],t.y=.9*(Math.random()-.5)*e.height+n[1]})),e.onLayoutEnd&&e.onLayoutEnd(),{nodes:t,edges:this.edges}}getType(){return"random"}}),sf("force",class extends Wh{constructor(e){super(),this.center=[0,0],this.nodeStrength=null,this.edgeStrength=null,this.preventOverlap=!1,this.clusterNodeStrength=null,this.clusterEdgeStrength=null,this.clusterEdgeDistance=null,this.clusterNodeSize=null,this.clusterFociStrength=null,this.linkDistance=50,this.alphaDecay=.028,this.alphaMin=.001,this.alpha=.3,this.collideStrength=1,this.workerEnabled=!1,this.tick=()=>{},this.onLayoutEnd=()=>{},this.ticking=void 0,e&&this.updateCfg(e)}getDefaultCfg(){return{center:[0,0],nodeStrength:null,edgeStrength:null,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,linkDistance:50,forceSimulation:null,alphaDecay:.028,alphaMin:.001,alpha:.3,collideStrength:1,clustering:!1,clusterNodeStrength:-1,clusterEdgeStrength:.1,clusterEdgeDistance:100,clusterFociStrength:.8,clusterNodeSize:10,tick(){},onLayoutEnd(){},workerEnabled:!1}}init(e){const t=this;t.nodes=e.nodes||[];const n=e.edges||[];t.edges=n.map((e=>{const t={},n=["targetNode","sourceNode","startPoint","endPoint"];return Object.keys(e).forEach((r=>{n.indexOf(r)>-1||(t[r]=e[r])})),t})),t.ticking=!1}execute(e){const t=this,n=t.nodes,r=t.edges;if(t.ticking)return;let i=t.forceSimulation;const o=t.alphaMin,a=t.alphaDecay,s=t.alpha;if(i){if(e)if(t.clustering&&t.clusterForce&&(t.clusterForce.nodes(n),t.clusterForce.links(r)),i.nodes(n),r&&t.edgeForce)t.edgeForce.links(r);else if(r&&!t.edgeForce){const e=If().id((e=>e.id)).links(r);t.edgeStrength&&e.strength(t.edgeStrength),t.linkDistance&&e.distance(t.linkDistance),t.edgeForce=e,i.force("link",e)}t.preventOverlap&&t.overlapProcess(i),i.alpha(s).restart(),this.ticking=!0}else try{const e=Af();if(t.nodeStrength&&e.strength(t.nodeStrength),i=Df().nodes(n),t.clustering){const e=jf();e.centerX(t.center[0]).centerY(t.center[1]).template("force").strength(t.clusterFociStrength),r&&e.links(r),n&&e.nodes(n),e.forceLinkDistance(t.clusterEdgeDistance).forceLinkStrength(t.clusterEdgeStrength).forceCharge(t.clusterNodeStrength).forceNodeSize(t.clusterNodeSize),t.clusterForce=e,i.force("group",e)}if(i.force("center",function(e,t){var n,r=1;function i(){var i,o,a=n.length,s=0,l=0;for(i=0;i<a;++i)s+=(o=n[i]).x,l+=o.y;for(s=(s/a-e)*r,l=(l/a-t)*r,i=0;i<a;++i)(o=n[i]).x-=s,o.y-=l}return null==e&&(e=0),null==t&&(t=0),i.initialize=function(e){n=e},i.x=function(t){return arguments.length?(e=+t,i):e},i.y=function(e){return arguments.length?(t=+e,i):t},i.strength=function(e){return arguments.length?(r=+e,i):r},i}(t.center[0],t.center[1])).force("charge",e).alpha(s).alphaDecay(a).alphaMin(o),t.preventOverlap&&t.overlapProcess(i),r){const e=If().id((e=>e.id)).links(r);t.edgeStrength&&e.strength(t.edgeStrength),t.linkDistance&&e.distance(t.linkDistance),t.edgeForce=e,i.force("link",e)}if(t.workerEnabled&&!zf()&&(t.workerEnabled=!1,console.warn("workerEnabled option is only supported when running in web worker.")),t.workerEnabled){i.stop();const e=function(e){const t=e.alphaMin(),n=e.alphaTarget(),r=e.alpha(),i=Math.log((t-n)/(r-n))/Math.log(1-e.alphaDecay());return Math.ceil(i)}(i);for(let t=1;t<=e;t++)i.tick(),postMessage({nodes:n,currentTick:t,totalTicks:e,type:Ff},void 0);t.ticking=!1}else i.on("tick",(()=>{t.tick()})).on("end",(()=>{t.ticking=!1,t.onLayoutEnd&&t.onLayoutEnd()})),t.ticking=!0;t.forceSimulation=i,t.ticking=!0}catch(e){t.ticking=!1,console.warn(e)}}overlapProcess(e){const t=this,n=t.nodeSize,r=t.nodeSpacing;let i,o;const a=t.collideStrength;if(o=qh(r)?()=>r:of(r)?r:()=>0,n)if(of(n))i=e=>n(e)+o(e);else if(Xh(n)){const e=(n[0]>n[1]?n[0]:n[1])/2;i=t=>e+o(t)}else if(qh(n)){const e=n/2;i=t=>e+o(t)}else i=()=>10;else i=e=>{if(e.size){if(Xh(e.size)){return(e.size[0]>e.size[1]?e.size[0]:e.size[1])/2+o(e)}if(Jh(e.size)){return(e.size.width>e.size.height?e.size.width:e.size.height)/2+o(e)}return e.size/2+o(e)}return 10+o(e)};e.force("collisionForce",Yf(i).strength(a))}updateCfg(e){const t=this;t.ticking&&(t.forceSimulation.stop(),t.ticking=!1),t.forceSimulation=null,Object.assign(t,e)}destroy(){const e=this;e.ticking&&(e.forceSimulation.stop(),e.ticking=!1),e.nodes=null,e.edges=null,e.destroyed=!0}}),sf("circular",class extends Wh{constructor(e){super(),this.radius=null,this.startRadius=null,this.endRadius=null,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0,this.divisions=1,this.ordering=null,this.angleRatio=1,this.nodes=[],this.edges=[],this.nodeMap={},this.degrees=[],this.width=300,this.height=300,this.updateCfg(e)}getDefaultCfg(){return{radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1}}execute(){const e=this,t=e.nodes,n=e.edges,r=t.length;if(0===r)return void(e.onLayoutEnd&&e.onLayoutEnd());e.width||"undefined"==typeof window||(e.width=window.innerWidth),e.height||"undefined"==typeof window||(e.height=window.innerHeight),e.center||(e.center=[e.width/2,e.height/2]);const i=e.center;if(1===r)return t[0].x=i[0],t[0].y=i[1],void(e.onLayoutEnd&&e.onLayoutEnd());let o=e.radius,a=e.startRadius,s=e.endRadius;const l=e.divisions,u=e.startAngle,c=e.endAngle,d=(c-u)/r,h={};t.forEach(((e,t)=>{h[e.id]=t})),e.nodeMap=h;const f=Qh(t.length,h,n);e.degrees=f,o||a||s?!a&&s?a=s:a&&!s&&(s=a):o=e.height>e.width?e.width/2:e.height/2;const p=d*e.angleRatio,m=e.ordering;let g=[];g="topology"===m?e.topologyOrdering():"topology-directed"===m?e.topologyOrdering(!0):"degree"===m?e.degreeOrdering():t;const v=e.clockwise,y=Math.ceil(r/l);for(let e=0;e<r;++e){let t=o;t||null===a||null===s||(t=a+e*(s-a)/(r-1)),t||(t=10+100*e/(r-1));let n=u+e%y*p+2*Math.PI/l*Math.floor(e/y);v||(n=c-e%y*p-2*Math.PI/l*Math.floor(e/y)),g[e].x=i[0]+Math.cos(n)*t,g[e].y=i[1]+Math.sin(n)*t,g[e].weight=f[e]}return e.onLayoutEnd&&e.onLayoutEnd(),{nodes:g,edges:this.edges}}topologyOrdering(e=!1){const t=this,n=t.degrees,r=t.edges,i=t.nodes,o=Zh(i),a=t.nodeMap,s=[o[0]],l=[i[0]],u=[],c=i.length;u[0]=!0,function(e,t,n,r){e.forEach(((t,n)=>{e[n].children=[],e[n].parent=[]})),r?t.forEach((t=>{const r=$h(t,"source"),i=$h(t,"target");let o=0;r&&(o=n[r]);let a=0;i&&(a=n[i]);const s=e[o].children,l=e[a].parent;s.push(e[a].id),l.push(e[o].id)})):t.forEach((t=>{const r=$h(t,"source"),i=$h(t,"target");let o=0;r&&(o=n[r]);let a=0;i&&(a=n[i]);const s=e[o].children,l=e[a].children;s.push(e[a].id),l.push(e[o].id)}))}(o,r,a,e);let d=0;return o.forEach(((e,t)=>{if(0!==t)if(t!==c-1&&n[t]===n[t+1]&&!function(e,t,n){const r=n.length;for(let i=0;i<r;i++){const r=$h(n[i],"source"),o=$h(n[i],"target");if(e.id===r&&t.id===o||t.id===r&&e.id===o)return!0}return!1}(s[d],e,r)||u[t]){const e=s[d].children;let r=!1;for(let c=0;c<e.length;c++){const d=a[e[c]];if(n[d]===n[t]&&!u[d]){s.push(o[d]),l.push(i[a[o[d].id]]),u[d]=!0,r=!0;break}}let h=0;for(;!r&&(u[h]||(s.push(o[h]),l.push(i[a[o[h].id]]),u[h]=!0,r=!0),h++,h!==c););}else s.push(e),l.push(i[a[e.id]]),u[t]=!0,d++})),l}degreeOrdering(){const e=this.nodes,t=[],n=this.degrees;return e.forEach(((e,r)=>{e.degree=n[r],t.push(e)})),t.sort(Hf),t}getType(){return"circular"}}),sf("dagre",class extends Wh{constructor(e){super(),this.rankdir="TB",this.nodesep=50,this.ranksep=50,this.controlPoints=!1,this.sortByCombo=!1,this.nodes=[],this.edges=[],this.onLayoutEnd=()=>{},this.updateCfg(e)}getDefaultCfg(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1}}execute(){const e=this,{nodes:t,nodeSize:n,rankdir:r,combos:i}=e;if(!t)return;const o=e.edges||[],a=new(Wf().graphlib.Graph)({multigraph:!0,compound:!0});let s;s=n?Xh(n)?()=>n:()=>[n,n]:e=>e.size?Xh(e.size)?e.size:Jh(e.size)?[e.size.width||40,e.size.height||40]:[e.size,e.size]:[40,40];let l=Uf(e.nodesepFunc,e.nodesep,50),u=Uf(e.ranksepFunc,e.ranksep,50);"LR"!==r&&"RL"!==r||(l=Uf(e.ranksepFunc,e.ranksep,50),u=Uf(e.nodesepFunc,e.nodesep,50)),a.setDefaultEdgeLabel((()=>({}))),a.setGraph(e);const c={};let d;return t.filter((e=>!1!==e.layout)).forEach((e=>{const t=s(e),n=u(e),r=l(e),i=t[0]+2*r,o=t[1]+2*n;a.setNode(e.id,{width:i,height:o}),this.sortByCombo&&e.comboId&&(c[e.comboId]||(c[e.comboId]=!0,a.setNode(e.comboId,{})),a.setParent(e.id,e.comboId))})),this.sortByCombo&&i&&i.forEach((e=>{e.parentId&&(c[e.parentId]||(c[e.parentId]=!0,a.setNode(e.parentId,{})),a.setParent(e.id,e.parentId))})),o.forEach((e=>{const t=$h(e,"source"),n=$h(e,"target");a.setEdge(t,n,{weight:e.weight||1})})),Wf().layout(a),a.nodes().forEach((e=>{d=a.node(e);const n=t.findIndex((t=>t.id===e));t[n]&&(t[n].x=d.x,t[n].y=d.y)})),a.edges().forEach((t=>{d=a.edge(t);const n=o.findIndex((e=>{const n=$h(e,"source"),r=$h(e,"target");return n===t.v&&r===t.w}));e.controlPoints&&"loop"!==o[n].type&&(o[n].controlPoints=d.points.slice(1,d.points.length-1))})),e.onLayoutEnd&&e.onLayoutEnd(),{nodes:t,edges:o}}getType(){return"dagre"}}),sf("radial",class extends Wh{constructor(e){super(),this.maxIteration=1e3,this.focusNode=null,this.unitRadius=null,this.linkDistance=50,this.preventOverlap=!1,this.strictRadial=!0,this.maxPreventOverlapIteration=200,this.sortStrength=10,this.nodes=[],this.edges=[],this.updateCfg(e)}getDefaultCfg(){return{maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,strictRadial:!0,maxPreventOverlapIteration:200,sortBy:void 0,sortStrength:10}}execute(){const e=this,t=e.nodes,n=e.edges||[];if(!t||0===t.length)return void(e.onLayoutEnd&&e.onLayoutEnd());e.width||"undefined"==typeof window||(e.width=window.innerWidth),e.height||"undefined"==typeof window||(e.height=window.innerHeight),e.center||(e.center=[e.width/2,e.height/2]);const r=e.center;if(1===t.length)return t[0].x=r[0],t[0].y=r[1],void(e.onLayoutEnd&&e.onLayoutEnd());const i=e.linkDistance;let o=null;if(Uh(e.focusNode)){let n=!1;for(let r=0;r<t.length;r++)t[r].id===e.focusNode&&(o=t[r],e.focusNode=o,n=!0,r=t.length);n||(o=null)}else o=e.focusNode;o||(o=t[0],e.focusNode=o);const a=function(e,t){let n=-1;return e.forEach(((e,r)=>{e.id===t&&(n=r)})),n}(t,o.id);e.focusIndex=a;const s=tf({nodes:t,edges:n},!1),l=ef(s),u=e.maxToFocus(l,a);e.handleInfinity(l,a,u+1),e.distances=l;const c=l[a],d=e.width||500,h=e.height||500;let f=d-r[0]>r[0]?r[0]:d-r[0],p=h-r[1]>r[1]?r[1]:h-r[1];0===f&&(f=d/2),0===p&&(p=h/2);const m=p>f?f:p,g=Math.max(...c),v=[];c.forEach(((t,n)=>{e.unitRadius||(e.unitRadius=m/g),v[n]=t*e.unitRadius})),e.radii=v;const y=e.eIdealDisMatrix();e.eIdealDistances=y;const b=function(e){const t=e.length,n=e[0].length,r=[];for(let i=0;i<t;i++){const t=[];for(let r=0;r<n;r++)0!==e[i][r]?t.push(1/(e[i][r]*e[i][r])):t.push(0);r.push(t)}return r}(y);e.weights=b;let _=new vp({linkDistance:i,distances:y}).layout();_.forEach((e=>{Kh(e[0])&&(e[0]=Math.random()*i),Kh(e[1])&&(e[1]=Math.random()*i)})),e.positions=_,_.forEach(((e,n)=>{t[n].x=e[0]+r[0],t[n].y=e[1]+r[1]})),_.forEach((e=>{e[0]-=_[a][0],e[1]-=_[a][1]})),e.run();const w=e.preventOverlap,x=e.nodeSize;let M;const E=e.strictRadial;if(w){const n=e.nodeSpacing;let r;r=qh(n)?()=>n:of(n)?n:()=>0,M=x?Xh(x)?e=>(x[0]>x[1]?x[0]:x[1])+r(e):e=>x+r(e):e=>{if(e.size){if(Xh(e.size)){return(e.size[0]>e.size[1]?e.size[0]:e.size[1])+r(e)}if(Jh(e.size)){return(e.size.width>e.size.height?e.size.width:e.size.height)+r(e)}return e.size+r(e)}return 10+r(e)};const i={nodes:t,nodeSizeFunc:M,adjMatrix:s,positions:_,radii:v,height:h,width:d,strictRadial:E,focusID:a,iterations:e.maxPreventOverlapIteration||200,k:_.length/4.5},o=new yp(i);_=o.layout()}return _.forEach(((e,n)=>{t[n].x=e[0]+r[0],t[n].y=e[1]+r[1]})),e.onLayoutEnd&&e.onLayoutEnd(),{nodes:t,edges:n}}run(){const e=this,t=e.maxIteration,n=e.positions||[],r=e.weights||[],i=e.eIdealDistances||[],o=e.radii||[];for(let a=0;a<=t;a++){const s=a/t;e.oneIteration(s,n,o,i,r)}}oneIteration(e,t,n,r,i){const o=1-e,a=this.focusIndex;t.forEach(((s,l)=>{const u=bp(s,[0,0]),c=0===u?0:1/u;if(l===a)return;let d=0,h=0,f=0;t.forEach(((e,t)=>{if(l===t)return;const n=bp(s,e),o=0===n?0:1/n,a=r[t][l];f+=i[l][t],d+=i[l][t]*(e[0]+a*(s[0]-e[0])*o),h+=i[l][t]*(e[1]+a*(s[1]-e[1])*o)}));const p=0===n[l]?0:1/n[l];f*=o,f+=e*p*p,d*=o,d+=e*p*s[0]*c,s[0]=d/f,h*=o,h+=e*p*s[1]*c,s[1]=h/f}))}eIdealDisMatrix(){const e=this,t=e.nodes;if(!t)return[];const n=e.distances,r=e.linkDistance,i=e.radii||[],o=e.unitRadius||50,a=[];return n&&n.forEach(((n,s)=>{const l=[];n.forEach(((n,a)=>{if(s===a)l.push(0);else if(i[s]===i[a])if("data"===e.sortBy)l.push(n*(Math.abs(s-a)*e.sortStrength)/(i[s]/o));else if(e.sortBy){let r=t[s][e.sortBy]||0,u=t[a][e.sortBy]||0;Uh(r)&&(r=r.charCodeAt(0)),Uh(u)&&(u=u.charCodeAt(0)),l.push(n*(Math.abs(r-u)*e.sortStrength)/(i[s]/o))}else l.push(n*r/(i[s]/o));else{const e=(r+o)/2;l.push(n*e)}})),a.push(l)})),a}handleInfinity(e,t,n){const r=e.length;for(let i=0;i<r;i++)if(e[t][i]===1/0){e[t][i]=n,e[i][t]=n;for(let o=0;o<r;o++)e[i][o]!==1/0&&e[t][o]===1/0&&(e[t][o]=n+e[i][o],e[o][t]=n+e[i][o])}for(let n=0;n<r;n++)if(n!==t)for(let i=0;i<r;i++)if(e[n][i]===1/0){let r=Math.abs(e[t][n]-e[t][i]);r=0===r?1:r,e[n][i]=r}}maxToFocus(e,t){let n=0;for(let r=0;r<e[t].length;r++)e[t][r]!==1/0&&(n=e[t][r]>n?e[t][r]:n);return n}getType(){return"radial"}}),sf("concentric",class extends Wh{constructor(e){super(),this.nodeSize=30,this.minNodeSpacing=10,this.preventOverlap=!1,this.equidistant=!1,this.startAngle=1.5*Math.PI,this.clockwise=!0,this.sortBy="degree",this.nodes=[],this.edges=[],this.width=300,this.height=300,this.onLayoutEnd=()=>{},this.updateCfg(e)}getDefaultCfg(){return{nodeSize:30,minNodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:1.5*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"}}execute(){const e=this,t=e.nodes,n=e.edges,r=t.length;if(0===r)return void(e.onLayoutEnd&&e.onLayoutEnd());e.width||"undefined"==typeof window||(e.width=window.innerWidth),e.height||"undefined"==typeof window||(e.height=window.innerHeight),e.center||(e.center=[e.width/2,e.height/2]);const i=e.center;if(1===r)return t[0].x=i[0],t[0].y=i[1],void(e.onLayoutEnd&&e.onLayoutEnd());const o=[];let a;a=Xh(e.nodeSize)?Math.max(e.nodeSize[0],e.nodeSize[1]):e.nodeSize,t.forEach((e=>{o.push(e);let t=a;Xh(e.size)?t=Math.max(e.size[0],e.size[1]):qh(e.size)?t=e.size:Jh(e.size)&&(t=Math.max(e.size.width,e.size.height)),a=Math.max(a,t)})),e.clockwise=void 0!==e.counterclockwise?!e.counterclockwise:e.clockwise;const s={},l={};if(o.forEach(((e,t)=>{s[e.id]=e,l[e.id]=t})),!("degree"!==e.sortBy&&Uh(e.sortBy)&&void 0!==o[0][e.sortBy]||(e.sortBy="degree",qh(t[0].degree)))){const e=Qh(t.length,l,n);o.forEach(((t,n)=>{t.degree=e[n]}))}o.sort(((t,n)=>n[e.sortBy]-t[e.sortBy])),e.maxValueNode=o[0],e.maxLevelDiff=e.maxLevelDiff||e.maxValueNode[e.sortBy]/4;const u=[[]];let c=u[0];o.forEach((t=>{if(c.length>0){const n=Math.abs(c[0][e.sortBy]-t[e.sortBy]);e.maxLevelDiff&&n>=e.maxLevelDiff&&(c=[],u.push(c))}c.push(t)}));let d=a+e.minNodeSpacing;if(!e.preventOverlap){const t=u.length>0&&u[0].length>1,n=(Math.min(e.width,e.height)/2-d)/(u.length+(t?1:0));d=Math.min(d,n)}let h=0;if(u.forEach((t=>{let n=e.sweep;void 0===n&&(n=2*Math.PI-2*Math.PI/t.length);const r=t.dTheta=n/Math.max(1,t.length-1);if(t.length>1&&e.preventOverlap){const e=Math.cos(r)-Math.cos(0),t=Math.sin(r)-Math.sin(0),n=Math.sqrt(d*d/(e*e+t*t));h=Math.max(n,h)}t.r=h,h+=d})),e.equidistant){let e=0,t=0;for(let n=0;n<u.length;n++){const r=u[n].r-t;e=Math.max(e,r)}t=0,u.forEach(((n,r)=>{0===r&&(t=n.r),n.r=t,t+=e}))}return u.forEach((t=>{const n=t.dTheta,r=t.r;t.forEach(((t,o)=>{const a=e.startAngle+(e.clockwise?1:-1)*n*o;t.x=i[0]+r*Math.cos(a),t.y=i[1]+r*Math.sin(a)}))})),e.onLayoutEnd&&e.onLayoutEnd(),{nodes:t,edges:n}}getType(){return"concentric"}}),sf("mds",class extends Wh{constructor(e){super(),this.center=[0,0],this.linkDistance=50,this.nodes=[],this.edges=[],this.onLayoutEnd=()=>{},this.updateCfg(e)}getDefaultCfg(){return{center:[0,0],linkDistance:50}}execute(){const e=this,{nodes:t,edges:n=[]}=e,r=e.center;if(!t||0===t.length)return void(e.onLayoutEnd&&e.onLayoutEnd());if(1===t.length)return t[0].x=r[0],t[0].y=r[1],void(e.onLayoutEnd&&e.onLayoutEnd());const i=e.linkDistance,o=tf({nodes:t,edges:n},!1),a=ef(o);e.handleInfinity(a);const s=((e,t)=>{const n=[];return e.forEach((e=>{const r=[];e.forEach((e=>{r.push(e*t)})),n.push(r)})),n})(a,i);e.scaledDistances=s;const l=e.runMDS();return e.positions=l,l.forEach(((e,n)=>{t[n].x=e[0]+r[0],t[n].y=e[1]+r[1]})),e.onLayoutEnd&&e.onLayoutEnd(),{nodes:t,edges:n}}runMDS(){const e=this.scaledDistances,t=fp.mul(fp.pow(e,2),-.5),n=t.mean("row"),r=t.mean("column"),i=t.mean();t.add(i).subRowVector(n).subColumnVector(r);const o=new gp(t),a=fp.sqrt(o.diagonalMatrix).diagonal();return o.leftSingularVectors.toJSON().map((e=>fp.mul([e],[a]).toJSON()[0].splice(0,2)))}handleInfinity(e){let t=-999999;e.forEach((e=>{e.forEach((e=>{e!==1/0&&t<e&&(t=e)}))})),e.forEach(((n,r)=>{n.forEach(((n,i)=>{n===1/0&&(e[r][i]=t)}))}))}getType(){return"mds"}}),sf("fruchterman",class extends Wh{constructor(e){super(),this.maxIteration=1e3,this.gravity=10,this.speed=5,this.clustering=!1,this.clusterGravity=10,this.nodes=[],this.edges=[],this.width=300,this.height=300,this.nodeMap={},this.nodeIdxMap={},this.onLayoutEnd=()=>{},this.tick=()=>{},this.updateCfg(e)}getDefaultCfg(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}}execute(){const e=this,t=e.nodes;if(void 0!==e.timeInterval&&"undefined"!=typeof window&&window.clearInterval(e.timeInterval),!t||0===t.length)return void(e.onLayoutEnd&&e.onLayoutEnd());e.width||"undefined"==typeof window||(e.width=window.innerWidth),e.height||"undefined"==typeof window||(e.height=window.innerHeight),e.center||(e.center=[e.width/2,e.height/2]);const n=e.center;if(1===t.length)return t[0].x=n[0],t[0].y=n[1],void(e.onLayoutEnd&&e.onLayoutEnd());const r={},i={};return t.forEach(((e,t)=>{qh(e.x)||(e.x=Math.random()*this.width),qh(e.y)||(e.y=Math.random()*this.height),r[e.id]=e,i[e.id]=t})),e.nodeMap=r,e.nodeIdxMap=i,e.run()}run(){const e=this,t=e.nodes;if(!t)return;const n=e.edges,r=e.maxIteration,i=e.center,o=e.height*e.width,a=Math.sqrt(o)/10,s=o/(t.length+1),l=Math.sqrt(s),u=e.gravity,c=e.speed,d=e.clustering,h={};if(d){t.forEach((e=>{if(void 0===h[e.cluster]){const t={name:e.cluster,cx:0,cy:0,count:0};h[e.cluster]=t}const t=h[e.cluster];qh(e.x)&&(t.cx+=e.x),qh(e.y)&&(t.cy+=e.y),t.count++}));for(const e in h)h[e].cx/=h[e].count,h[e].cy/=h[e].count}if("undefined"==typeof window)return;let f=0;return this.timeInterval=window.setInterval((()=>{if(!t)return;const o=[];if(t.forEach(((e,t)=>{o[t]={x:0,y:0}})),e.applyCalculate(t,n,o,l,s),d){const n=e.clusterGravity||u;t.forEach(((e,t)=>{if(!qh(e.x)||!qh(e.y))return;const r=h[e.cluster],i=Math.sqrt((e.x-r.cx)*(e.x-r.cx)+(e.y-r.cy)*(e.y-r.cy)),a=l*n;o[t].x-=a*(e.x-r.cx)/i,o[t].y-=a*(e.y-r.cy)/i}));for(const e in h)h[e].cx=0,h[e].cy=0,h[e].count=0;t.forEach((e=>{const t=h[e.cluster];qh(e.x)&&(t.cx+=e.x),qh(e.y)&&(t.cy+=e.y),t.count++}));for(const e in h)h[e].cx/=h[e].count,h[e].cy/=h[e].count}t.forEach(((e,t)=>{if(!qh(e.x)||!qh(e.y))return;const n=.01*l*u;o[t].x-=n*(e.x-i[0]),o[t].y-=n*(e.y-i[1])})),t.forEach(((e,t)=>{if(qh(e.fx)&&qh(e.fy))return e.x=e.fx,void(e.y=e.fy);if(!qh(e.x)||!qh(e.y))return;const n=Math.sqrt(o[t].x*o[t].x+o[t].y*o[t].y);if(n>0){const r=Math.min(a*(c/800),n);e.x+=o[t].x/n*r,e.y+=o[t].y/n*r}})),e.tick&&e.tick(),f++,f>=r&&(e.onLayoutEnd&&e.onLayoutEnd(),window.clearInterval(e.timeInterval))}),0),{nodes:t,edges:n}}applyCalculate(e,t,n,r,i){this.calRepulsive(e,n,i),t&&this.calAttractive(t,n,r)}calRepulsive(e,t,n){e.forEach(((r,i)=>{t[i]={x:0,y:0},e.forEach(((e,o)=>{if(i===o)return;if(!(qh(r.x)&&qh(e.x)&&qh(r.y)&&qh(e.y)))return;let a=r.x-e.x,s=r.y-e.y,l=a*a+s*s;if(0===l){l=1;const e=i>o?1:-1;a=.01*e,s=.01*e}const u=n/l;t[i].x+=a*u,t[i].y+=s*u}))}))}calAttractive(e,t,n){e.forEach((e=>{const r=$h(e,"source"),i=$h(e,"target");if(!r||!i)return;const o=this.nodeIdxMap[r],a=this.nodeIdxMap[i];if(o===a)return;const s=this.nodeMap[r],l=this.nodeMap[i];if(!(qh(l.x)&&qh(s.x)&&qh(l.y)&&qh(s.y)))return;const u=l.x-s.x,c=l.y-s.y,d=Math.sqrt(u*u+c*c),h=d*d/n;t[a].x-=u/d*h,t[a].y-=c/d*h,t[o].x+=u/d*h,t[o].y+=c/d*h}))}stop(){this.timeInterval&&"undefined"!=typeof window&&window.clearInterval(this.timeInterval)}destroy(){const e=this;e.stop(),e.tick=null,e.nodes=null,e.edges=null,e.destroyed=!0}getType(){return"fruchterman"}}),sf("fruchterman-gpu",class extends Wh{constructor(e){super(),this.maxIteration=1e3,this.gravity=10,this.speed=1,this.clustering=!1,this.clusterField="cluster",this.clusterGravity=10,this.workerEnabled=!1,this.nodes=[],this.edges=[],this.width=300,this.height=300,this.nodeMap={},this.nodeIdxMap={},this.updateCfg(e)}getDefaultCfg(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}}execute(){return aE(this,void 0,void 0,(function*(){const e=this,t=e.nodes;if(!t||0===t.length)return void(e.onLayoutEnd&&e.onLayoutEnd());e.width||"undefined"==typeof window||(e.width=window.innerWidth),e.height||"undefined"==typeof window||(e.height=window.innerHeight),e.center||(e.center=[e.width/2,e.height/2]);const n=e.center;if(1===t.length)return t[0].x=n[0],t[0].y=n[1],void(e.onLayoutEnd&&e.onLayoutEnd());const r={},i={};t.forEach(((e,t)=>{qh(e.x)||(e.x=Math.random()*this.width),qh(e.y)||(e.y=Math.random()*this.height),r[e.id]=e,i[e.id]=t})),e.nodeMap=r,e.nodeIdxMap=i,yield e.run()}))}executeWithWorker(e,t){return aE(this,void 0,void 0,(function*(){const n=this,r=n.nodes,i=n.center;if(!r||0===r.length)return;if(1===r.length)return r[0].x=i[0],void(r[0].y=i[1]);const o={},a={};r.forEach(((e,t)=>{qh(e.x)||(e.x=Math.random()*this.width),qh(e.y)||(e.y=Math.random()*this.height),o[e.id]=e,a[e.id]=t})),n.nodeMap=o,n.nodeIdxMap=a,yield n.run(e,t)}))}run(e,t){return aE(this,void 0,void 0,(function*(){const n=this,r=n.nodes,i=n.edges,o=n.maxIteration,a=n.center,s=n.height*n.width;let l=Math.sqrt(s)/10;const u=s/(r.length+1),c=Math.sqrt(u),d=n.speed,h=n.clustering,{array:f,count:p}=((e,t)=>{const n=[],r=e.length,i={};return t.forEach((t=>{e.forEach(((e,o)=>{if(void 0===i[t[e]]&&(i[t[e]]=Object.keys(i).length),n.push(i[t[e]]),o===r-1)for(;n.length%4!=0;)n.push(0)}))})),{array:new Float32Array(n),count:Object.keys(i).length}})([n.clusterField],r);r.forEach(((e,t)=>{let n=0,r=0;qh(e.fx)&&qh(e.fy)&&(n=e.fx||.001,r=e.fy||.001),f[4*t+1]=n,f[4*t+2]=r}));const m=r.length,{maxEdgePerVetex:g,array:v}=((e,t)=>{const n=[],r=[],i={};let o=0;for(o=0;o<e.length;o++){const t=e[o];i[t.id]=o,n.push(t.x),n.push(t.y),n.push(0),n.push(0),r.push([])}for(o=0;o<t.length;o++){const e=t[o],n=$h(e,"source"),a=$h(e,"target");r[i[n]].push(i[a]),r[i[a]].push(i[n])}let a=0;for(o=0;o<e.length;o++){const e=n.length,t=r[o],i=t.length;n[4*o+2]=e,n[4*o+3]=t.length,a=Math.max(a,t.length);for(let e=0;e<i;++e){const r=t[e];n.push(+r)}}for(;n.length%4!=0;)n.push(0);return{maxEdgePerVetex:a,array:new Float32Array(n)}})(r,i);let y;y=n.workerEnabled?rE.create({canvas:e,engineOptions:{supportCompute:!0}}):rE.create({engineOptions:{supportCompute:!0}});const b=n.onLayoutEnd,_=[];for(let e=0;e<p;e++)_.push(0,0,0,0);const w=y.createKernel('{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_K : f32;\\n  [[offset 4]] u_K2 : f32;\\n  [[offset 8]] u_Center : vec2<f32>;\\n  [[offset 16]] u_Gravity : f32;\\n  [[offset 20]] u_ClusterGravity : f32;\\n  [[offset 24]] u_Speed : f32;\\n  [[offset 28]] u_MaxDisplace : f32;\\n  [[offset 32]] u_Clustering : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AttributeArray : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_ClusterCenters : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 3, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn calcRepulsive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {if (i != j) {var nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nvar xDist : f32 = currentNode.x - nextNode.x;\\nvar yDist : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nvar param : f32 = gWebGPUUniformParams.u_K2 / dist;\\nif (dist > 0.0) {dx = dx + param * xDist;\\ndy = dy + param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {var sign : f32 = select(1.0, -1.0, i < j);\\ndx = dx + param * std::sign;\\ndy = dy + param * std::sign;}}}}\\nreturn vec2<f32>(dx, dy);}\\nfn calcGravity(currentNode : vec4<f32>, nodeAttributes : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nvar vx : f32 = currentNode.x - gWebGPUUniformParams.u_Center.x;\\nvar vy : f32 = currentNode.y - gWebGPUUniformParams.u_Center.y;\\nvar gf : f32 = (0.01 * gWebGPUUniformParams.u_K) * gWebGPUUniformParams.u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (gWebGPUUniformParams.u_Clustering == 1.0) {var clusterIdx : i32 = i32(nodeAttributes.x);\\nvar center : vec4<f32> = gWebGPUBuffer2.u_ClusterCenters[clusterIdx];\\nvar cvx : f32 = currentNode.x - center.x;\\nvar cvy : f32 = currentNode.y - center.y;\\nvar dist : f32 = std::sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nvar parma : f32 = (gWebGPUUniformParams.u_K * gWebGPUUniformParams.u_ClusterGravity) / dist;\\ndx = dx + parma * cvx;\\ndy = dy + parma * cvy;}\\nreturn vec2<f32>(dx, dy);}\\nfn calcAttractive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nvar arr_offset : i32 = i32(std::floor(currentNode.z + 0.5));\\nvar length : i32 = i32(std::floor(currentNode.w + 0.5));\\nvar node_buffer : vec4<f32>;\\nfor (var p : i32 = 0; p < __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX; p = p + 1) {if (p >= length) {break;}\\nvar arr_idx : i32 = arr_offset + i32(p);\\nvar buf_offset : i32 = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[i32(arr_idx / 4)];}\\nvar float_j : f32 = select(node_buffer.x, select(node_buffer.y, select(node_buffer.z, node_buffer.w, buf_offset == 2), buf_offset == 1), buf_offset == 0);\\nvar nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[i32(float_j)];\\nvar xDist : f32 = currentNode.x - nextNode.x;\\nvar yDist : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = std::sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nvar attractiveF : f32 = dist / gWebGPUUniformParams.u_K;\\nif (dist > 0.0) {dx = dx - xDist * attractiveF;\\ndy = dy - yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {var sign : f32 = select(1.0, -1.0, i < i32(float_j));\\ndx = dx - std::sign * attractiveF;\\ndy = dy - std::sign * attractiveF;}}}\\nreturn vec2<f32>(dx, dy);}\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar currentNode : vec4<f32> = gWebGPUBuffer0.u_Data[i];\\nvar dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nif (i >= __DefineValuePlaceholder__VERTEX_COUNT) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvar nodeAttributes : vec4<f32> = gWebGPUBuffer1.u_AttributeArray[i];\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4<f32>(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w);\\nreturn ;}\\nvar repulsive : vec2<f32> = calcRepulsive(i, currentNode);\\ndx = dx + repulsive.x;\\ndy = dy + repulsive.y;\\nvar attractive : vec2<f32> = calcAttractive(i, currentNode);\\ndx = dx + attractive.x;\\ndy = dy + attractive.y;\\nvar gravity : vec2<f32> = calcGravity(currentNode, nodeAttributes);\\ndx = dx - gravity.x;\\ndy = dy - gravity.y;\\ndx = dx * gWebGPUUniformParams.u_Speed;\\ndy = dy * gWebGPUUniformParams.u_Speed;\\nvar distLength : f32 = std::sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {var limitedDist : f32 = std::min(gWebGPUUniformParams.u_MaxDisplace * gWebGPUUniformParams.u_Speed, distLength);\\ngWebGPUBuffer0.u_Data[i] = vec4<f32>(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w);}\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_K;\\n  float u_K2;\\n  vec2 u_Center;\\n  float u_Gravity;\\n  float u_ClusterGravity;\\n  float u_Speed;\\n  float u_MaxDisplace;\\n  float u_Clustering;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer   GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_AttributeArray[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 3) buffer readonly  GWebGPUBuffer2 {\\n  vec4 u_ClusterCenters[];\\n} gWebGPUBuffer2;\\n\\n\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nvec2 calcRepulsive(int i, vec4 currentNode) {float dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = gWebGPUBuffer0.u_Data[j];\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = gWebGPUUniformParams.u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {float dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - gWebGPUUniformParams.u_Center.x;\\nfloat vy = currentNode.y - gWebGPUUniformParams.u_Center.y;\\nfloat gf = (0.01 * gWebGPUUniformParams.u_K) * gWebGPUUniformParams.u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (gWebGPUUniformParams.u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = gWebGPUBuffer2.u_ClusterCenters[clusterIdx];\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (gWebGPUUniformParams.u_K * gWebGPUUniformParams.u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {float dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[int(arr_idx / 4)];}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = gWebGPUBuffer0.u_Data[int(float_j)];\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / gWebGPUUniformParams.u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {int i = globalInvocationID.x;\\nvec4 currentNode = gWebGPUBuffer0.u_Data[i];\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvec4 nodeAttributes = gWebGPUBuffer1.u_AttributeArray[i];\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w);\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= gWebGPUUniformParams.u_Speed;\\ndy *= gWebGPUUniformParams.u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(gWebGPUUniformParams.u_MaxDisplace * gWebGPUUniformParams.u_Speed, distLength);\\ngWebGPUBuffer0.u_Data[i] = vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w);}}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_K;\\nuniform float u_K2;\\nuniform vec2 u_Center;\\nuniform float u_Gravity;\\nuniform float u_ClusterGravity;\\nuniform float u_Speed;\\nuniform float u_MaxDisplace;\\nuniform float u_Clustering;\\nuniform sampler2D u_AttributeArray;\\nuniform vec2 u_AttributeArraySize;\\nvec4 getDatau_AttributeArray(vec2 address2D) {\\n  return vec4(texture2D(u_AttributeArray, address2D).rgba);\\n}\\nvec4 getDatau_AttributeArray(float address1D) {\\n  return getDatau_AttributeArray(addrTranslation_1Dto2D(address1D, u_AttributeArraySize));\\n}\\nvec4 getDatau_AttributeArray(int address1D) {\\n  return getDatau_AttributeArray(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - u_Center.x;\\nfloat vy = currentNode.y - u_Center.y;\\nfloat gf = (0.01 * u_K) * u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = getDatau_ClusterCenters(clusterIdx);\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (u_K * u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes = getDatau_AttributeArray(i);\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w));\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= u_Speed;\\ndy *= u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(u_MaxDisplace * u_Speed, distLength);\\ngl_FragColor = vec4(vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_K","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_K2","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Center","type":"vec2<f32>","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Gravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterGravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Speed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_MaxDisplace","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Clustering","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AttributeArray","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}').setDispatch([m,1,1]).setBinding({u_Data:v,u_K:c,u_K2:u,u_Gravity:n.gravity,u_ClusterGravity:n.clusterGravity||n.gravity||1,u_Speed:d,u_MaxDisplace:l,u_Clustering:h?1:0,u_Center:a,u_AttributeArray:f,u_ClusterCenters:_,MAX_EDGE_PER_VERTEX:g,VERTEX_COUNT:m});let x;h&&(x=y.createKernel('{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\n\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 0, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributes : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_ClusterCenters : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar center : vec4<f32> = gWebGPUBuffer2.u_ClusterCenters[i];\\nvar sumx : f32 = 0.0;\\nvar sumy : f32 = 0.0;\\nvar count : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {var attributes : vec4<f32> = gWebGPUBuffer1.u_NodeAttributes[j];\\nvar clusterIdx : i32 = i32(attributes.x);\\nvar vertex : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nif (clusterIdx == i) {sumx = sumx + vertex.x;\\nsumy = sumy + vertex.y;\\ncount = count + 1.0;}}\\ngWebGPUBuffer2.u_ClusterCenters[i] = vec4<f32>(sumx / count, sumy / count, count, i);\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\n\\nlayout(std430, set = 0, binding = 0) buffer readonly  GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 1) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_NodeAttributes[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 2) buffer   GWebGPUBuffer2 {\\n  vec4 u_ClusterCenters[];\\n} gWebGPUBuffer2;\\n\\n\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\nvoid main() {int i = globalInvocationID.x;\\nvec4 center = gWebGPUBuffer2.u_ClusterCenters[i];\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = gWebGPUBuffer1.u_NodeAttributes[j];\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = gWebGPUBuffer0.u_Data[j];\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngWebGPUBuffer2.u_ClusterCenters[i] = vec4(sumx / count, sumy / count, count, i);}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributes;\\nuniform vec2 u_NodeAttributesSize;\\nvec4 getDatau_NodeAttributes(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributes, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributes(float address1D) {\\n  return getDatau_NodeAttributes(addrTranslation_1Dto2D(address1D, u_NodeAttributesSize));\\n}\\nvec4 getDatau_NodeAttributes(int address1D) {\\n  return getDatau_NodeAttributes(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 center = getDatau_ClusterCenters(i);\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = getDatau_NodeAttributes(j);\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = getDatau_Data(j);\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngl_FragColor = vec4(vec4(sumx / count, sumy / count, count, i));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"CLUSTER_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributes","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_ClusterCenters","size":[1,1],"length":1},"needPingpong":true}}').setDispatch([p,1,1]).setBinding({u_Data:v,u_NodeAttributes:f,u_ClusterCenters:_,VERTEX_COUNT:m,CLUSTER_COUNT:p}));yield(()=>aE(this,void 0,void 0,(function*(){for(let e=0;e<o;e++)yield w.execute(),h&&(x.setBinding({u_Data:w}),yield x.execute(),w.setBinding({u_ClusterCenters:x})),w.setBinding({u_MaxDisplace:l*=.99});const n=yield w.getOutput();e?t.postMessage({type:Bf,vertexEdgeData:n}):r.forEach(((e,t)=>{const r=n[4*t],i=n[4*t+1];e.x=r,e.y=i})),b&&b()})))()}))}getType(){return"fruchterman-gpu"}}),sf("gForce",class extends Wh{constructor(e){super(),this.maxIteration=1e3,this.edgeStrength=200,this.nodeStrength=1e3,this.coulombDisScale=.005,this.damping=.9,this.maxSpeed=1e3,this.minMovement=.5,this.interval=.02,this.factor=1,this.linkDistance=1,this.gravity=10,this.preventOverlap=!0,this.tick=()=>{},this.nodes=[],this.edges=[],this.width=300,this.height=300,this.nodeMap={},this.nodeIdxMap={},this.updateCfg(e)}getDefaultCfg(){return{maxIteration:500,gravity:10,enableTick:!0}}execute(){const e=this,t=e.nodes;if(void 0!==e.timeInterval&&"undefined"!=typeof window&&window.clearInterval(e.timeInterval),!t||0===t.length)return void(e.onLayoutEnd&&e.onLayoutEnd());e.width||"undefined"==typeof window||(e.width=window.innerWidth),e.height||"undefined"==typeof window||(e.height=window.innerHeight),e.center||(e.center=[e.width/2,e.height/2]);const n=e.center;if(1===t.length)return t[0].x=n[0],t[0].y=n[1],void(e.onLayoutEnd&&e.onLayoutEnd());const r={},i={};t.forEach(((t,n)=>{qh(t.x)||(t.x=Math.random()*e.width),qh(t.y)||(t.y=Math.random()*e.height),r[t.id]=t,i[t.id]=n})),e.nodeMap=r,e.nodeIdxMap=i,e.linkDistance=lf(e.linkDistance,1),e.nodeStrength=lf(e.nodeStrength,1),e.edgeStrength=lf(e.edgeStrength,1);const o=e.nodeSize;let a;if(e.preventOverlap){const t=e.nodeSpacing;let n;n=qh(t)?()=>t:of(t)?t:()=>0,a=o?Xh(o)?e=>(o[0]>o[1]?o[0]:o[1])+n(e):e=>o+n(e):e=>{if(e.size){if(Xh(e.size)){return(e.size[0]>e.size[1]?e.size[0]:e.size[1])+n(e)}if(Jh(e.size)){return(e.size.width>e.size.height?e.size.width:e.size.height)+n(e)}return e.size+n(e)}return 10+n(e)}}e.nodeSize=a;const s=e.edges;e.degrees=Qh(t.length,e.nodeIdxMap,s),e.getMass||(e.getMass=t=>e.degrees[e.nodeIdxMap[t.id]]||1),e.run()}run(){const e=this,t=e.nodes,n=e.edges,r=e.maxIteration;if("undefined"==typeof window)return;let i=0;this.timeInterval=window.setInterval((()=>{const o=[],a=[];if(!t)return;t.forEach(((e,t)=>{o[2*t]=0,o[2*t+1]=0,a[2*t]=0,a[2*t+1]=0})),e.calRepulsive(o,t),n&&e.calAttractive(o,n),e.calGravity(o,t);const s=Math.max(.02,e.interval-.002*i);e.updateVelocity(o,a,s,t);const l=[];t.forEach((e=>{l.push({x:e.x,y:e.y})})),e.updatePosition(a,s,t),e.tick&&e.tick();let u=0;t.forEach(((e,t)=>{const n=e.x-l[t].x,r=e.y-l[t].y;u+=Math.sqrt(n*n+r*r)})),u/=t.length,u<e.minMovement&&(window.clearInterval(e.timeInterval),e.onLayoutEnd&&e.onLayoutEnd()),i++,i>=r&&(e.onLayoutEnd&&e.onLayoutEnd(),window.clearInterval(e.timeInterval))}),0)}calRepulsive(e,t){const n=this,r=n.getMass,i=n.nodeStrength,o=n.factor,a=n.coulombDisScale,s=n.preventOverlap,l=n.nodeSize;t.forEach(((n,u)=>{const c=r?r(n):1;t.forEach(((t,d)=>{if(u>=d)return;const h=n.x-t.x,f=n.y-t.y,p=Math.sqrt(h*h+f*f)+.01,m=(p+.1)*a,g=h/p,v=f/p,y=(i(n)+i(t))/2*o/(m*m),b=r?r(t):1;if(e[2*u]+=g*y,e[2*u+1]+=v*y,e[2*d]-=g*y,e[2*d+1]-=v*y,s&&p<(l(n)+l(t))/2){const r=(i(n)+i(t))/2/(p*p);e[2*u]+=g*r/c,e[2*u+1]+=v*r/c,e[2*d]-=g*r/b,e[2*d+1]-=v*r/b}}))}))}calAttractive(e,t){const n=this,r=n.nodeMap,i=n.nodeIdxMap,o=n.linkDistance,a=n.edgeStrength,s=n.getMass;t.forEach(((t,n)=>{const l=$h(t,"source"),u=$h(t,"target"),c=r[l],d=r[u],h=d.x-c.x,f=d.y-c.y,p=Math.sqrt(h*h+f*f)+.01,m=h/p,g=f/p,v=((o(t)||1)-p)*a(t),y=i[l],b=i[u],_=s?s(c):1,w=s?s(d):1;e[2*y]-=m*v/_,e[2*y+1]-=g*v/_,e[2*b]+=m*v/w,e[2*b+1]+=g*v/w}))}calGravity(e,t){const n=this,r=n.center,i=n.gravity,o=n.degrees,a=t.length;for(let s=0;s<a;s++){const a=t[s];let l=a.x-r[0],u=a.y-r[1],c=i;if(n.getCenter){const e=n.getCenter(a,o[s]);e&&qh(e[0])&&qh(e[1])&&qh(e[2])&&(l=a.x-e[0],u=a.y-e[1],c=e[2])}c&&(e[2*s]-=c*l,e[2*s+1]-=c*u)}}updateVelocity(e,t,n,r){const i=this,o=n*i.damping;r.forEach(((n,r)=>{let a=e[2*r]*o||.01,s=e[2*r+1]*o||.01;const l=Math.sqrt(a*a+s*s);if(l>i.maxSpeed){const e=i.maxSpeed/l;a*=e,s*=e}t[2*r]=a,t[2*r+1]=s}))}updatePosition(e,t,n){n.forEach(((n,r)=>{if(qh(n.fx)&&qh(n.fy))return n.x=n.fx,void(n.y=n.fy);const i=e[2*r]*t,o=e[2*r+1]*t;n.x+=i,n.y+=o}))}stop(){this.timeInterval&&"undefined"!=typeof window&&window.clearInterval(this.timeInterval)}destroy(){const e=this;e.stop(),e.tick=null,e.nodes=null,e.edges=null,e.destroyed=!0}getType(){return"gForce"}}),sf("gForce-gpu",class extends Wh{constructor(e){super(),this.maxIteration=1e3,this.edgeStrength=200,this.nodeStrength=1e3,this.coulombDisScale=.005,this.damping=.9,this.maxSpeed=1e3,this.minMovement=.5,this.interval=.02,this.factor=1,this.linkDistance=1,this.gravity=10,this.workerEnabled=!1,this.nodes=[],this.edges=[],this.width=300,this.height=300,this.nodeMap={},this.nodeIdxMap={},this.updateCfg(e)}getDefaultCfg(){return{maxIteration:2e3,gravity:10,clustering:!1,clusterGravity:10}}execute(){return sE(this,void 0,void 0,(function*(){const e=this,t=e.nodes;if(!t||0===t.length)return void(e.onLayoutEnd&&e.onLayoutEnd());e.width||"undefined"==typeof window||(e.width=window.innerWidth),e.height||"undefined"==typeof window||(e.height=window.innerHeight),e.center||(e.center=[e.width/2,e.height/2]);const n=e.center;if(1===t.length)return t[0].x=n[0],t[0].y=n[1],void(e.onLayoutEnd&&e.onLayoutEnd());const r={},i={};t.forEach(((t,n)=>{qh(t.x)||(t.x=Math.random()*e.width),qh(t.y)||(t.y=Math.random()*e.height),r[t.id]=t,i[t.id]=n})),e.nodeMap=r,e.nodeIdxMap=i,e.nodeStrength=iE(e.nodeStrength,1),e.edgeStrength=iE(e.edgeStrength,1),yield e.run()}))}executeWithWorker(e,t){const n=this,r=n.nodes,i=n.center;if(!r||0===r.length)return;if(1===r.length)return r[0].x=i[0],void(r[0].y=i[1]);const o={},a={};r.forEach(((e,t)=>{qh(e.x)||(e.x=Math.random()*n.width),qh(e.y)||(e.y=Math.random()*n.height),o[e.id]=e,a[e.id]=t})),n.nodeMap=o,n.nodeIdxMap=a,n.nodeStrength=iE(n.nodeStrength,1),n.edgeStrength=iE(n.edgeStrength,1),n.run(e,t)}run(e,t){return sE(this,void 0,void 0,(function*(){const n=this,r=n.nodes,i=n.edges,o=n.maxIteration;n.width||"undefined"==typeof window||(n.width=window.innerWidth),n.height||"undefined"==typeof window||(n.height=window.innerHeight);const a=r.length;n.linkDistance=iE(n.linkDistance),n.edgeStrength=iE(n.edgeStrength);const{maxEdgePerVetex:s,array:l}=((e,t,n,r)=>{const i=[],o=[],a={};let s=0;for(s=0;s<e.length;s++){const t=e[s];a[t.id]=s,i.push(t.x),i.push(t.y),i.push(0),i.push(0),o.push([])}for(s=0;s<t.length;s++){const e=t[s],i=$h(e,"source"),l=$h(e,"target");o[a[i]].push(a[l]),o[a[i]].push(n(e)),o[a[i]].push(r(e)),o[a[i]].push(0),o[a[l]].push(a[i]),o[a[l]].push(n(e)),o[a[l]].push(r(e)),o[a[l]].push(0)}let l=0;for(s=0;s<e.length;s++){const e=i.length,t=o[s],n=t.length;i[4*s+2]=e+1048576*n/4,i[4*s+3]=0,l=Math.max(l,n/4);for(let e=0;e<n;++e){const n=t[e];i.push(+n)}}for(;i.length%4!=0;)i.push(0);return{maxEdgePerVetex:l,array:new Float32Array(i)}})(r,i,n.linkDistance,n.edgeStrength);n.degrees=Qh(r.length,n.nodeIdxMap,i);const u=[],c=[],d=[],h=[],f=[],p=[],m=[];n.getMass||(n.getMass=e=>n.degrees[n.nodeIdxMap[e.id]]||1);const g=n.gravity,v=n.center;r.forEach(((e,t)=>{u.push(n.getMass(e)),c.push(n.nodeStrength(e)),n.degrees[t]||(n.degrees[t]=0);let r=[v[0],v[1],g];if(n.getCenter){const i=n.getCenter(e,n.degrees[t]);i&&qh(i[0])&&qh(i[1])&&qh(i[2])&&(r=i)}d.push(r[0]),h.push(r[1]),f.push(r[2]),qh(e.fx)&&qh(e.fy)?(p.push(e.fx||.001),m.push(e.fy||.001)):(p.push(0),m.push(0))}));const y=oE([u,n.degrees,c,p]),b=oE([d,h,f,m]);let _;_=n.workerEnabled?rE.create({canvas:e,engineOptions:{supportCompute:!0}}):rE.create({engineOptions:{supportCompute:!0}});const w=n.onLayoutEnd,x=[];l.forEach((e=>{x.push(e)}));for(let e=0;e<4;e++)x.push(0);const M=_.createKernel('{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_damping : f32;\\n  [[offset 4]] u_maxSpeed : f32;\\n  [[offset 8]] u_minMovement : f32;\\n  \\n  [[offset 12]] u_coulombDisScale : f32;\\n  [[offset 16]] u_factor : f32;\\n  \\n  \\n  [[offset 20]] u_interval : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AveMovement : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributeArray1 : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 3, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\ntype GWebGPUBuffer3 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributeArray2 : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 4, set 0]] var<storage_buffer> gWebGPUBuffer3 : GWebGPUBuffer3;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn unpack_float(packedValue : f32) -> vec2<i32> {var packedIntValue : i32 = i32(packedValue);\\nvar v0 : i32 = packedIntValue / 1048576;\\nreturn vec2<i32>(v0, packedIntValue - (v0 * 1048576));}\\nfn calcRepulsive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {if (i != j) {var nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nvar vx : f32 = currentNode.x - nextNode.x;\\nvar vy : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.01;\\nvar n_dist : f32 = (dist + 0.1) * gWebGPUUniformParams.u_coulombDisScale;\\nvar direx : f32 = vx / dist;\\nvar direy : f32 = vy / dist;\\nvar attributesi : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvar attributesj : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[j];\\nvar massi : f32 = attributesi.x;\\nvar nodeStrengthi : f32 = attributesi.z;\\nvar nodeStrengthj : f32 = attributesj.z;\\nvar nodeStrength : f32 = (nodeStrengthi + nodeStrengthj) / 2.0;\\nvar param : f32 = (nodeStrength * gWebGPUUniformParams.u_factor) / (n_dist * n_dist);\\nax = ax + direx * param;\\nay = ay + direy * param;}}\\nreturn vec2<f32>(ax, ay);}\\nfn calcGravity(i : i32, currentNode : vec4<f32>, attributes2 : vec4<f32>) -> vec2<f32> {var vx : f32 = currentNode.x - attributes2.x;\\nvar vy : f32 = currentNode.y - attributes2.y;\\nvar ax : f32 = vx * attributes2.z;\\nvar ay : f32 = vy * attributes2.z;\\nreturn vec2<f32>(ax, ay);}\\nfn calcAttractive(i : i32, currentNode : vec4<f32>, attributes1 : vec4<f32>) -> vec2<f32> {var mass : f32 = attributes1.x;\\nvar ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nvar compressed : vec2<i32> = unpack_float(currentNode.z);\\nvar length : i32 = compressed.x;\\nvar arr_offset : i32 = compressed.y;\\nvar node_buffer : vec4<f32>;\\nfor (var p : i32 = 0; p < __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX; p = p + 1) {if (p >= length) {break;}\\nvar arr_idx : i32 = arr_offset + (4 * p);\\nvar buf_offset : i32 = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[i32(arr_idx / 4)];}\\nvar float_j : f32 = node_buffer.x;\\nvar nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[i32(float_j)];\\nvar vx : f32 = nextNode.x - currentNode.x;\\nvar vy : f32 = nextNode.y - currentNode.y;\\nvar dist : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.01;\\nvar direx : f32 = vx / dist;\\nvar direy : f32 = vy / dist;\\nvar edgeLength : f32 = node_buffer.y;\\nvar edgeStrength : f32 = node_buffer.z;\\nvar diff : f32 = edgeLength - dist;\\nvar param : f32 = (diff * edgeStrength) / mass;\\nax = ax - direx * param;\\nay = ay - direy * param;}\\nreturn vec2<f32>(ax, ay);}\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar currentNode : vec4<f32> = gWebGPUBuffer0.u_Data[i];\\nvar movement : vec4<f32> = gWebGPUBuffer1.u_AveMovement[0];\\nvar ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nif ((i >= __DefineValuePlaceholder__VERTEX_COUNT) || (movement.x < gWebGPUUniformParams.u_minMovement)) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvar nodeAttributes1 : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvar nodeAttributes2 : vec4<f32> = gWebGPUBuffer3.u_NodeAttributeArray2[i];\\nvar repulsive : vec2<f32> = calcRepulsive(i, currentNode);\\nax = ax + repulsive.x;\\nay = ay + repulsive.y;\\nvar attractive : vec2<f32> = calcAttractive(i, currentNode, nodeAttributes1);\\nax = ax + attractive.x;\\nay = ay + attractive.y;\\nvar gravity : vec2<f32> = calcGravity(i, currentNode, nodeAttributes2);\\nax = ax - gravity.x;\\nay = ay - gravity.y;\\nvar param : f32 = gWebGPUUniformParams.u_interval * gWebGPUUniformParams.u_damping;\\nvar vx : f32 = ax * param;\\nvar vy : f32 = ay * param;\\nvar vlength : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > gWebGPUUniformParams.u_maxSpeed) {var param2 : f32 = gWebGPUUniformParams.u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nvar distx : f32 = vx * gWebGPUUniformParams.u_interval;\\nvar disty : f32 = vy * gWebGPUUniformParams.u_interval;\\nvar distLength : f32 = std::sqrt((distx * distx) + (disty * disty));\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4<f32>(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0);}else {gWebGPUBuffer0.u_Data[i] = vec4<f32>(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength);}\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_damping;\\n  float u_maxSpeed;\\n  float u_minMovement;\\n  \\n  float u_coulombDisScale;\\n  float u_factor;\\n  \\n  \\n  float u_interval;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer   GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_AveMovement[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 3) buffer readonly  GWebGPUBuffer2 {\\n  vec4 u_NodeAttributeArray1[];\\n} gWebGPUBuffer2;\\n\\nlayout(std430, set = 0, binding = 4) buffer readonly  GWebGPUBuffer3 {\\n  vec4 u_NodeAttributeArray2[];\\n} gWebGPUBuffer3;\\n\\n\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nivec2 unpack_float(float packedValue) {int packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {float ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = gWebGPUBuffer0.u_Data[j];\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * gWebGPUUniformParams.u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvec4 attributesj = gWebGPUBuffer2.u_NodeAttributeArray1[j];\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * gWebGPUUniformParams.u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {float vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {float mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[int(arr_idx / 4)];}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = gWebGPUBuffer0.u_Data[int(float_j)];\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {int i = globalInvocationID.x;\\nvec4 currentNode = gWebGPUBuffer0.u_Data[i];\\nvec4 movement = gWebGPUBuffer1.u_AveMovement[0];\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < gWebGPUUniformParams.u_minMovement)) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvec4 nodeAttributes1 = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvec4 nodeAttributes2 = gWebGPUBuffer3.u_NodeAttributeArray2[i];\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = gWebGPUUniformParams.u_interval * gWebGPUUniformParams.u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > gWebGPUUniformParams.u_maxSpeed) {float param2 = gWebGPUUniformParams.u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nfloat distx = vx * gWebGPUUniformParams.u_interval;\\nfloat disty = vy * gWebGPUUniformParams.u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0);}else {gWebGPUBuffer0.u_Data[i] = vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength);}}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_damping;\\nuniform float u_maxSpeed;\\nuniform float u_minMovement;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nuniform float u_coulombDisScale;\\nuniform float u_factor;\\nuniform sampler2D u_NodeAttributeArray1;\\nuniform vec2 u_NodeAttributeArray1Size;\\nvec4 getDatau_NodeAttributeArray1(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray1, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray1(float address1D) {\\n  return getDatau_NodeAttributeArray1(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray1Size));\\n}\\nvec4 getDatau_NodeAttributeArray1(int address1D) {\\n  return getDatau_NodeAttributeArray1(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributeArray2;\\nuniform vec2 u_NodeAttributeArray2Size;\\nvec4 getDatau_NodeAttributeArray2(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray2, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray2(float address1D) {\\n  return getDatau_NodeAttributeArray2(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray2Size));\\n}\\nvec4 getDatau_NodeAttributeArray2(int address1D) {\\n  return getDatau_NodeAttributeArray2(float(address1D));\\n}\\nuniform float u_interval;\\nivec2 unpack_float(float packedValue) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = getDatau_NodeAttributeArray1(i);\\nvec4 attributesj = getDatau_NodeAttributeArray1(j);\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nvec4 movement = getDatau_AveMovement(0.0);\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < u_minMovement)) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes1 = getDatau_NodeAttributeArray1(i);\\nvec4 nodeAttributes2 = getDatau_NodeAttributeArray2(i);\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = u_interval * u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > u_maxSpeed) {float param2 = u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nfloat distx = vx * u_interval;\\nfloat disty = vy * u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0));}else {gl_FragColor = vec4(vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"SHIFT_20","type":"Float","value":1048576,"runtime":false}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_damping","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_maxSpeed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_minMovement","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_coulombDisScale","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_factor","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray1","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray2","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_interval","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}').setDispatch([a,1,1]).setBinding({u_Data:l,u_damping:n.damping,u_maxSpeed:n.maxSpeed,u_minMovement:n.minMovement,u_coulombDisScale:n.coulombDisScale,u_factor:n.factor,u_NodeAttributeArray1:y,u_NodeAttributeArray2:b,MAX_EDGE_PER_VERTEX:s,VERTEX_COUNT:a,u_AveMovement:x,u_interval:n.interval}),E=_.createKernel('{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_iter : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AveMovement : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\n\\n\\n\\n\\n\\n\\n\\n\\nfn main() -> void {var movement : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {var vertex : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nmovement = movement + vertex.w;}\\nmovement = movement / f32(__DefineValuePlaceholder__VERTEX_COUNT);\\ngWebGPUBuffer1.u_AveMovement[0] = vec4<f32>(movement, 0.0, 0.0, 0.0);\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_iter;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer readonly  GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer   GWebGPUBuffer1 {\\n  vec4 u_AveMovement[];\\n} gWebGPUBuffer1;\\n\\n\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\nvoid main() {float movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = gWebGPUBuffer0.u_Data[j];\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngWebGPUBuffer1.u_AveMovement[0] = vec4(movement, 0.0, 0.0, 0.0);}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_iter;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = getDatau_Data(j);\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngl_FragColor = vec4(vec4(movement, 0.0, 0.0, 0.0));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_iter","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_AveMovement","size":[1,1],"length":1},"needPingpong":true}}').setDispatch([1,1,1]).setBinding({u_Data:l,VERTEX_COUNT:a,u_AveMovement:[0,0,0,0]});yield(()=>sE(this,void 0,void 0,(function*(){for(let e=0;e<o;e++){yield M.execute(),E.setBinding({u_Data:M}),yield E.execute();const t=Math.max(.02,n.interval-.002*e);M.setBinding({u_interval:t,u_AveMovement:E})}const i=yield M.getOutput();e?t.postMessage({type:Bf,vertexEdgeData:i}):r.forEach(((e,t)=>{const n=i[4*t],r=i[4*t+1];e.x=n,e.y=r})),w&&w()})))()}))}getType(){return"gForce-gpu"}}),sf("comboForce",class extends Wh{constructor(e){super(),this.center=[0,0],this.maxIteration=100,this.gravity=10,this.comboGravity=10,this.linkDistance=10,this.alpha=1,this.alphaMin=.001,this.alphaDecay=1-Math.pow(this.alphaMin,1/300),this.alphaTarget=0,this.velocityDecay=.6,this.edgeStrength=.6,this.nodeStrength=30,this.preventOverlap=!1,this.preventNodeOverlap=!1,this.preventComboOverlap=!1,this.collideStrength=void 0,this.nodeCollideStrength=.5,this.comboCollideStrength=.5,this.comboSpacing=20,this.comboPadding=10,this.optimizeRangeFactor=1,this.onTick=()=>{},this.onLayoutEnd=()=>{},this.depthAttractiveForceScale=1,this.depthRepulsiveForceScale=2,this.nodes=[],this.edges=[],this.combos=[],this.comboTrees=[],this.width=300,this.height=300,this.bias=[],this.nodeMap={},this.oriComboMap={},this.indexMap={},this.comboMap={},this.previousLayouted=!1,this.updateCfg(e)}getDefaultCfg(){return{maxIteration:100,center:[0,0],gravity:10,speed:1,comboGravity:30,preventOverlap:!1,preventComboOverlap:!0,preventNodeOverlap:!0,nodeSpacing:void 0,collideStrength:void 0,nodeCollideStrength:.5,comboCollideStrength:.5,comboSpacing:20,comboPadding:10,edgeStrength:.6,nodeStrength:30,linkDistance:10}}execute(){const e=this,t=e.nodes,n=e.center;if(e.comboTree={id:"comboTreeRoot",depth:-1,children:e.comboTrees},t&&0!==t.length){if(1===t.length)return t[0].x=n[0],t[0].y=n[1],void(e.onLayoutEnd&&e.onLayoutEnd());e.initVals(),e.run(),e.onLayoutEnd&&e.onLayoutEnd()}else e.onLayoutEnd&&e.onLayoutEnd()}run(){const e=this,t=e.nodes,n=e.previousLayouted?e.maxIteration/5:e.maxIteration;e.width||"undefined"==typeof window||(e.width=window.innerWidth),e.height||"undefined"==typeof window||(e.height=window.innerHeight);const r=e.center,i=e.velocityDecay,o=e.comboMap;e.previousLayouted||e.initPos(o);for(let r=0;r<n;r++){const n=[];t.forEach(((e,t)=>{n[t]={x:0,y:0}})),e.applyCalculate(n),e.applyComboCenterForce(n),t.forEach(((e,t)=>{qh(e.x)&&qh(e.y)&&(e.x+=n[t].x*i,e.y+=n[t].y*i)})),e.alpha+=(e.alphaTarget-e.alpha)*e.alphaDecay,e.onTick()}const a=[0,0];t.forEach((e=>{qh(e.x)&&qh(e.y)&&(a[0]+=e.x,a[1]+=e.y)})),a[0]/=t.length,a[1]/=t.length;const s=[r[0]-a[0],r[1]-a[1]];t.forEach(((e,t)=>{qh(e.x)&&qh(e.y)&&(e.x+=s[0],e.y+=s[1])})),e.combos.forEach((e=>{const t=o[e.id];t&&t.empty&&(e.x=t.cx||e.x,e.y=t.cy||e.y)})),e.previousLayouted=!0}initVals(){const e=this,t=e.edges,n=e.nodes,r=e.combos,i={},o={},a={};n.forEach(((e,t)=>{o[e.id]=e,a[e.id]=t})),e.nodeMap=o,e.indexMap=a;const s={};r.forEach((e=>{s[e.id]=e})),e.oriComboMap=s,e.comboMap=e.getComboMap();const l=e.preventOverlap;e.preventComboOverlap=e.preventComboOverlap||l,e.preventNodeOverlap=e.preventNodeOverlap||l;const u=e.collideStrength;u&&(e.comboCollideStrength=u,e.nodeCollideStrength=u),e.comboCollideStrength=e.comboCollideStrength?e.comboCollideStrength:0,e.nodeCollideStrength=e.nodeCollideStrength?e.nodeCollideStrength:0;for(let e=0;e<t.length;++e){const n=$h(t[e],"source"),r=$h(t[e],"target");i[n]?i[n]++:i[n]=1,i[r]?i[r]++:i[r]=1}const c=[];for(let e=0;e<t.length;++e){const n=$h(t[e],"source"),r=$h(t[e],"target");c[e]=i[n]/(i[n]+i[r])}this.bias=c;const d=e.nodeSize,h=e.nodeSpacing;let f,p;if(p=qh(h)?()=>h:of(h)?h:()=>0,this.nodeSpacing=p,d)if(of(d))f=e=>d(e);else if(Xh(d)){const e=(d[0]>d[1]?d[0]:d[1])/2;f=t=>e}else{const e=d/2;f=t=>e}else f=e=>{if(e.size){if(Xh(e.size)){return(e.size[0]>e.size[1]?e.size[0]:e.size[1])/2}if(Jh(e.size)){return(e.size.width>e.size.height?e.size.width:e.size.height)/2}return e.size/2}return 10};this.nodeSize=f;const m=e.comboSpacing;let g;g=qh(m)?()=>m:of(m)?m:()=>0,this.comboSpacing=g;const v=e.comboPadding;let y;y=qh(v)?()=>v:Xh(v)?()=>Math.max.apply(null,v):of(v)?v:()=>0,this.comboPadding=y;let b,_=this.linkDistance;_||(_=10),b=qh(_)?e=>_:_,this.linkDistance=b;let w,x=this.edgeStrength;x||(x=1),w=qh(x)?e=>x:x,this.edgeStrength=w;let M,E=this.nodeStrength;E||(E=30),M=qh(E)?e=>E:E,this.nodeStrength=M}initPos(e){this.nodes.forEach(((t,n)=>{const r=t.comboId,i=e[r];r&&i?(t.x=i.cx+100/(n+1),t.y=i.cy+100/(n+1)):(t.x=100/(n+1),t.y=100/(n+1))}))}getComboMap(){const e=this,t=e.nodeMap,n=e.indexMap,r=e.comboTrees,i=e.oriComboMap,o={};return(r||[]).forEach((r=>{const a=[];rf(r,(r=>{if("node"===r.itemType)return!0;if(!i[r.id])return!0;if(void 0===o[r.id]){const t={id:r.id,name:r.id,cx:0,cy:0,count:0,depth:e.oriComboMap[r.id].depth||0,children:[]};o[r.id]=t}const s=r.children;s&&s.forEach((e=>{if(!o[e.id]&&!t[e.id])return!0;a.push(e)}));const l=o[r.id];if(l.cx=0,l.cy=0,0===a.length){l.empty=!0;const o=i[r.id],s=Object.keys(t).length,u=`${r.id}-visual-child-${s}`,c={id:u,x:o.x,y:o.y,depth:l.depth+1,itemType:"node"};e.nodes.push(c),t[u]=c,n[u]=s,l.cx=o.x,l.cy=o.y,a.push(c)}return a.forEach((e=>{if(l.count++,"node"!==e.itemType){const t=o[e.id];return qh(t.cx)&&(l.cx+=t.cx),void(qh(t.cy)&&(l.cy+=t.cy))}const n=t[e.id];n&&(qh(n.x)&&(l.cx+=n.x),qh(n.y)&&(l.cy+=n.y))})),l.cx/=l.count,l.cy/=l.count,l.children=a,!0}))})),o}applyComboCenterForce(e){const t=this,n=t.gravity,r=t.comboGravity||n,i=this.alpha,o=t.comboTrees,a=t.indexMap,s=t.nodeMap,l=t.comboMap;(o||[]).forEach((t=>{rf(t,(t=>{if("node"===t.itemType)return!0;if(!l[t.id])return!0;const n=l[t.id],o=(n.depth+1)/10*.5,u=n.cx,c=n.cy;return n.cx=0,n.cy=0,n.children.forEach((t=>{if("node"!==t.itemType){const e=l[t.id];return e&&qh(e.cx)&&(n.cx+=e.cx),void(e&&qh(e.cy)&&(n.cy+=e.cy))}const d=s[t.id],h=d.x-u||.005,f=d.y-c||.005,p=Math.sqrt(h*h+f*f),m=a[d.id],g=r*i/p*o;e[m].x-=h*g,e[m].y-=f*g,qh(d.x)&&(n.cx+=d.x),qh(d.y)&&(n.cy+=d.y)})),n.cx/=n.count,n.cy/=n.count,!0}))}))}applyCalculate(e){const t=this,n=t.comboMap,r=t.nodes,i={};r.forEach(((e,t)=>{r.forEach(((n,r)=>{if(t<r)return;const o=e.x-n.x||.005,a=e.y-n.y||.005;let s=o*o+a*a;const l=Math.sqrt(s);s<1&&(s=l),i[`${e.id}-${n.id}`]={vx:o,vy:a,vl2:s,vl:l},i[`${n.id}-${e.id}`]={vl2:s,vl:l,vx:-o,vy:-a}}))})),t.updateComboSizes(n),t.calRepulsive(e,i),t.calAttractive(e,i);t.preventComboOverlap&&t.comboNonOverlapping(e,n)}updateComboSizes(e){const t=this,n=t.comboTrees,r=t.nodeMap,i=t.nodeSize,o=t.comboSpacing,a=t.comboPadding;(n||[]).forEach((n=>{const s=[];rf(n,(n=>{if("node"===n.itemType)return!0;const l=e[n.id];if(!l)return!1;const u=n.children;u&&u.forEach((t=>{(e[t.id]||r[t.id])&&s.push(t)})),l.minX=1/0,l.minY=1/0,l.maxX=-1/0,l.maxY=-1/0,s.forEach((e=>{if("node"!==e.itemType)return!0;const t=r[e.id];if(!t)return!0;const n=i(t),o=t.x-n,a=t.y-n,s=t.x+n,u=t.y+n;l.minX>o&&(l.minX=o),l.minY>a&&(l.minY=a),l.maxX<s&&(l.maxX=s),l.maxY<u&&(l.maxY=u)}));let c=t.oriComboMap[n.id].size||10;Xh(c)&&(c=c[0]);const d=Math.max(l.maxX-l.minX,l.maxY-l.minY,c);return l.r=d/2+o(l)/2+a(l),!0}))}))}comboNonOverlapping(e,t){const n=this,r=n.comboTree,i=n.comboCollideStrength,o=n.indexMap,a=n.nodeMap;rf(r,(n=>{if(!t[n.id]&&!a[n.id]&&"comboTreeRoot"!==n.id)return!1;const r=n.children;return r&&r.length>1&&r.forEach(((n,s)=>{if("node"===n.itemType)return!1;const l=t[n.id];l&&r.forEach(((r,u)=>{if(s<=u)return!1;if("node"===r.itemType)return!1;const c=t[r.id];if(!c)return!1;const d=l.cx-c.cx||.005,h=l.cy-c.cy||.005,f=d*d+h*h,p=l.r||1,m=c.r||1,g=p+m,v=m*m,y=p*p;if(f<g*g){const t=n.children;if(!t||0===t.length)return!1;const s=r.children;if(!s||0===s.length)return!1;const l=Math.sqrt(f),u=(g-l)/l*i,c=d*u,p=h*u,m=v/(y+v),b=1-m;t.forEach((t=>{if("node"!==t.itemType)return!1;if(!a[t.id])return;const n=o[t.id];s.forEach((t=>{if("node"!==t.itemType)return!1;if(!a[t.id])return!1;const r=o[t.id];e[n].x+=c*m,e[n].y+=p*m,e[r].x-=c*b,e[r].y-=p*b}))}))}}))})),!0}))}calRepulsive(e,t){const n=this,r=n.nodes,i=n.width*n.optimizeRangeFactor,o=n.nodeStrength,a=n.alpha,s=n.nodeCollideStrength,l=n.preventNodeOverlap,u=n.nodeSize,c=n.nodeSpacing,d=n.depthRepulsiveForceScale,h=n.center;r.forEach(((f,p)=>{if(f.x&&f.y){if(h){const t=n.gravity,r=f.x-h[0]||.005,i=f.y-h[1]||.005,o=Math.sqrt(r*r+i*i);e[p].x-=r*t*a/o,e[p].y-=i*t*a/o}r.forEach(((n,r)=>{if(p===r)return;if(!n.x||!n.y)return;const{vl2:h,vl:m}=t[`${f.id}-${n.id}`];if(m>i)return;const{vx:g,vy:v}=t[`${f.id}-${n.id}`];let y=Math.log(Math.abs(n.depth-f.depth)/10)+1||1;y=y<1?1:y,n.comboId!==f.comboId&&(y+=1);const b=y?Math.pow(d,y):1,_=o(n)*a/h*b;if(e[p].x+=g*_,e[p].y+=v*_,p<r&&l){const t=u(f)+c(f)||1,i=u(n)+c(n)||1,o=t+i;if(h<o*o){const n=(o-m)/m*s,a=i*i;let l=a/(t*t+a);const u=g*n,c=v*n;e[p].x+=u*l,e[p].y+=c*l,l=1-l,e[r].x-=u*l,e[r].y-=c*l}}}))}}))}calAttractive(e,t){const n=this,r=n.edges,i=n.linkDistance,o=n.alpha,a=n.edgeStrength,s=n.bias,l=n.depthAttractiveForceScale;r.forEach(((r,u)=>{const c=$h(r,"source"),d=$h(r,"target");if(!c||!d||c===d)return;const h=n.indexMap[c],f=n.indexMap[d],p=n.nodeMap[c],m=n.nodeMap[d];if(!p||!m)return;let g=p.depth===m.depth?0:Math.log(Math.abs(p.depth-m.depth)/10);p.comboId===m.comboId&&(g/=2);let v=g?Math.pow(l,g):1;if(p.comboId!==m.comboId&&1===v?v=l/2:p.comboId===m.comboId&&(v=2),!(qh(m.x)&&qh(p.x)&&qh(m.y)&&qh(p.y)))return;const{vl:y,vx:b,vy:_}=t[`${d}-${c}`],w=(y-i(r))/y*o*a(r)*v,x=b*w,M=_*w,E=s[u];e[f].x-=x*E,e[f].y-=M*E,e[h].x+=x*(1-E),e[h].y+=M*(1-E)}))}getType(){return"comboForce"}}),sf("forceAtlas2",class extends Wh{constructor(e){super(),this.center=[0,0],this.width=300,this.height=300,this.nodes=[],this.edges=[],this.kr=5,this.kg=1,this.mode="normal",this.preventOverlap=!1,this.dissuadeHubs=!1,this.barnesHut=void 0,this.maxIteration=0,this.ks=.1,this.ksmax=10,this.tao=.1,this.onLayoutEnd=()=>{},this.prune=void 0,this.updateCfg(e)}getDefaultCfg(){return{}}execute(){const e=this,{nodes:t,onLayoutEnd:n,prune:r}=e;let i=e.maxIteration;e.width||"undefined"==typeof window||(e.width=window.innerWidth),e.height||"undefined"==typeof window||(e.height=window.innerHeight);const o=[],a=t.length;for(let n=0;n<a;n+=1){const r=t[n];let i=10,a=10;qh(r.size)&&(i=r.size,a=r.size),Xh(r.size)?(isNaN(r.size[0])||(i=r.size[0]),isNaN(r.size[1])||(a=r.size[1])):Jh(r.size)&&(i=r.size.width,a=r.size.height),e.getWidth&&!isNaN(e.getWidth(r))&&(a=e.getWidth(r)),e.getHeight&&!isNaN(e.getHeight(r))&&(i=e.getHeight(r));const s=Math.max(i,a);o.push(s)}void 0===e.barnesHut&&a>250&&(e.barnesHut=!0),void 0===e.prune&&a>100&&(e.prune=!0),0!==this.maxIteration||e.prune?0===this.maxIteration&&r&&(i=100,a<=200&&a>100?i=500:a>200&&(i=950),this.maxIteration=i):(i=250,a<=200&&a>100?i=1e3:a>200&&(i=1200),this.maxIteration=i),e.kr||(e.kr=50,a>100&&a<=500?e.kr=20:a>500&&(e.kr=1)),e.kg||(e.kg=20,a>100&&a<=500?e.kg=10:a>500&&(e.kg=1)),this.nodes=e.updateNodesByForces(o),n()}updateNodesByForces(e){const t=this,{edges:n,maxIteration:r}=t;let i=t.nodes;const o=n.filter((e=>$h(e,"source")!==$h(e,"target"))),a=i.length,s=o.length,l=[],u={},c={},d=[];for(let e=0;e<a;e+=1)u[i[e].id]=e,l[e]=0,(void 0===i[e].x||isNaN(i[e].x))&&(i[e].x=1e3*Math.random()),(void 0===i[e].y||isNaN(i[e].y))&&(i[e].y=1e3*Math.random()),d.push({x:i[e].x,y:i[e].y});for(let e=0;e<s;e+=1){let t,n,r=0,s=0;for(let l=0;l<a;l+=1){const a=$h(o[e],"source"),u=$h(o[e],"target");i[l].id===a?(t=i[l],r=l):i[l].id===u&&(n=i[l],s=l),c[e]={sourceIdx:r,targetIdx:s}}t&&(l[u[t.id]]+=1),n&&(l[u[n.id]]+=1)}let h=r;if(i=this.iterate(h,u,c,s,l,e),t.prune){for(let e=0;e<s;e+=1)l[c[e].sourceIdx]<=1?(i[c[e].sourceIdx].x=i[c[e].targetIdx].x,i[c[e].sourceIdx].y=i[c[e].targetIdx].y):l[c[e].targetIdx]<=1&&(i[c[e].targetIdx].x=i[c[e].sourceIdx].x,i[c[e].targetIdx].y=i[c[e].sourceIdx].y);t.prune=!1,t.barnesHut=!1,h=100,i=this.iterate(h,u,c,s,l,e)}return i}iterate(e,t,n,r,i,o){const a=this;let{nodes:s}=a;const{kr:l,preventOverlap:u}=a,{barnesHut:c}=a,d=s.length;let h=0;let f=e;let p=[];const m=[],g=[];for(let e=0;e<d;e+=1)if(p[2*e]=0,p[2*e+1]=0,c){const t={id:e,rx:s[e].x,ry:s[e].y,mass:1,g:l,degree:i[e]};g[e]=new lE(t)}for(;f>0;){for(let e=0;e<d;e+=1)m[2*e]=p[2*e],m[2*e+1]=p[2*e+1],p[2*e]=0,p[2*e+1]=0;p=this.getAttrForces(f,50,r,t,n,i,o,p),p=c&&(u&&f>50||!u)?this.getOptRepGraForces(p,g,i):this.getRepGraForces(f,50,p,100,o,i);const e=this.updatePos(p,m,h,i);s=e.nodes,h=e.sg,f--,a.tick&&a.tick()}return s}getAttrForces(e,t,n,r,i,o,a,s){const{nodes:l,preventOverlap:u,dissuadeHubs:c,mode:d,prune:h}=this;for(let f=0;f<n;f+=1){const n=l[i[f].sourceIdx],p=i[f].sourceIdx,m=l[i[f].targetIdx],g=i[f].targetIdx;if(h&&(o[p]<=1||o[g]<=1))continue;const v=[m.x-n.x,m.y-n.y];let y=Math.hypot(v[0],v[1]);y=y<1e-4?1e-4:y,v[0]=v[0]/y,v[1]=v[1]/y,u&&e<t&&(y=y-a[p]-a[g]);let b=y,_=b;"linlog"===d&&(b=Math.log(1+y),_=b),c&&(b=y/o[p],_=y/o[g]),u&&e<t&&y<=0?(b=0,_=0):u&&e<t&&y>0&&(b=y,_=y),s[2*r[n.id]]+=b*v[0],s[2*r[m.id]]-=_*v[0],s[2*r[n.id]+1]+=b*v[1],s[2*r[m.id]+1]-=_*v[1]}return s}getRepGraForces(e,t,n,r,i,o){const{nodes:a,preventOverlap:s,kr:l,kg:u,center:c,prune:d}=this,h=a.length;for(let f=0;f<h;f+=1){for(let u=f+1;u<h;u+=1){if(d&&(o[f]<=1||o[u]<=1))continue;const c=[a[u].x-a[f].x,a[u].y-a[f].y];let h=Math.hypot(c[0],c[1]);h=h<1e-4?1e-4:h,c[0]=c[0]/h,c[1]=c[1]/h,s&&e<t&&(h=h-i[f]-i[u]);let p=l*(o[f]+1)*(o[u]+1)/h;s&&e<t&&h<0?p=r*(o[f]+1)*(o[u]+1):s&&e<t&&0===h?p=0:s&&e<t&&h>0&&(p=l*(o[f]+1)*(o[u]+1)/h),n[2*f]-=p*c[0],n[2*u]+=p*c[0],n[2*f+1]-=p*c[1],n[2*u+1]+=p*c[1]}const p=[a[f].x-c[0],a[f].y-c[1]],m=Math.hypot(p[0],p[1]);p[0]=p[0]/m,p[1]=p[1]/m;const g=u*(o[f]+1);n[2*f]-=g*p[0],n[2*f+1]-=g*p[1]}return n}getOptRepGraForces(e,t,n){const{nodes:r,kg:i,center:o,prune:a}=this,s=r.length;let l=9e10,u=-9e10,c=9e10,d=-9e10;for(let e=0;e<s;e+=1)a&&n[e]<=1||(t[e].setPos(r[e].x,r[e].y),r[e].x>=u&&(u=r[e].x),r[e].x<=l&&(l=r[e].x),r[e].y>=d&&(d=r[e].y),r[e].y<=c&&(c=r[e].y));const h=Math.max(u-l,d-c),f=new uE({xmid:(u+l)/2,ymid:(d+c)/2,length:h,massCenter:o,mass:s}),p=new cE(f);for(let e=0;e<s;e+=1)a&&n[e]<=1||t[e].in(f)&&p.insert(t[e]);for(let l=0;l<s;l+=1){if(a&&n[l]<=1)continue;t[l].resetForce(),p.updateForce(t[l]),e[2*l]-=t[l].fx,e[2*l+1]-=t[l].fy;const s=[r[l].x-o[0],r[l].y-o[1]];let u=Math.hypot(s[0],s[1]);u=u<1e-4?1e-4:u,s[0]=s[0]/u,s[1]=s[1]/u;const c=i*(n[l]+1);e[2*l]-=c*s[0],e[2*l+1]-=c*s[1]}return e}updatePos(e,t,n,r){const{nodes:i,ks:o,tao:a,prune:s,ksmax:l}=this,u=i.length,c=[],d=[];let h=0,f=0;for(let n=0;n<u;n+=1){if(s&&r[n]<=1)continue;const i=[e[2*n]-t[2*n],e[2*n+1]-t[2*n+1]],o=Math.hypot(i[0],i[1]),a=[e[2*n]+t[2*n],e[2*n+1]+t[2*n+1]],l=Math.hypot(a[0],a[1]);c[n]=o,d[n]=l/2,h+=(r[n]+1)*c[n],f+=(r[n]+1)*d[n]}const p=n;n=a*f/h,0!==p&&(n=n>1.5*p?1.5*p:n);for(let t=0;t<u;t+=1){if(s&&r[t]<=1)continue;let a=o*n/(1+n*Math.sqrt(c[t])),u=Math.hypot(e[2*t],e[2*t+1]);u=u<1e-4?1e-4:u;const d=l/u;a=a>d?d:a;const h=a*e[2*t],f=a*e[2*t+1];i[t].x+=h,i[t].y+=f}return{nodes:i,sg:n}}});const TE=function(e,t){var n=e.toString(),r=new Blob(["importScripts('"+t+"');("+n+")()"],{type:"text/javascript"});return new Worker(URL.createObjectURL(r))};var LE=function(e){void 0===e&&(e="https://unpkg.com/@antv/layout@latest/dist/layout.min.js");var t=new TE((function(){var e="LAYOUT_RUN",t="LAYOUT_END",n="LAYOUT_ERROR",r="GPU_LAYOUT_RUN";layout.registerLayout("grid",layout.GridLayout),layout.registerLayout("random",layout.RandomLayout),layout.registerLayout("force",layout.ForceLayout),layout.registerLayout("circular",layout.CircularLayout),layout.registerLayout("dagre",layout.DagreLayout),layout.registerLayout("radial",layout.RadialLayout),layout.registerLayout("concentric",layout.ConcentricLayout),layout.registerLayout("mds",layout.MDSLayout),layout.registerLayout("fruchterman",layout.FruchtermanLayout),layout.registerLayout("fruchterman-gpu",layout.FruchtermanGPULayout),layout.registerLayout("gForce",layout.GForceLayout),layout.registerLayout("gForce-gpu",layout.GForceGPULayout),layout.registerLayout("comboForce",layout.ComboForceLayout),layout.registerLayout("forceAtlas2",layout.ForceAtlas2Layout),onmessage=function(i){(function(t){var n=t.data.type;return n===e||n===r})(i)&&function(i){var o=this;switch(i.data.type){case e:var a,s=i.data,l=s.nodes,u=s.edges,c=s.layoutCfg,d=(g=void 0===c?{}:c).type;if(!(h=layout.getLayoutByName(d))){this.postMessage({type:n,message:"layout "+d+" not found"});break}g.onLayoutEnd=function(){o.postMessage({type:t,nodes:l}),null==a||a.destroy()},(a=new h(g)).init({nodes:l,edges:u}),a.execute();break;case r:var h,f=i.data,p=f.nodes,m=(u=f.edges,f.layoutCfg),g=void 0===m?{}:m,v=f.canvas;if(d=g.type,!(h=layout.getLayoutByName(d))){this.postMessage({type:n,message:"layout "+d+" not found"});break}if("gpu"!==d.split("-")[1]){this.postMessage({type:n,message:"layout "+d+" does not support GPU"});break}var y=new h(g);y.init({nodes:p,edges:u}),y.executeWithWorker(v,this)}}(i)}}),e);return t},CE="LAYOUT_RUN",DE="LAYOUT_END",AE="LAYOUT_ERROR",PE="LAYOUT_TICK",OE="GPU_LAYOUT_RUN",IE="GPU_LAYOUT_END";function RE(e){return RE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},RE(e)}var NE=function(e){return setTimeout(e,16)},YE=function(e){return clearTimeout(e)},jE=function(e){return("undefined"!=typeof window&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame)||NE)(e)},FE=function(e){return("undefined"!=typeof window&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame)||YE)(e)},BE=["fruchterman","gForce"],zE=["force","grid","circular"],HE=function(e){function t(t){var n=e.call(this,t)||this;return n.graph=t,n.layoutCfg=t.get("layout")||{},n.layoutType=n.getLayoutType(),n.worker=null,n.workerData={},n.initLayout(),n}return(0,y.__extends)(t,e),t.prototype.initLayout=function(){},t.prototype.getWorker=function(){return this.worker||("undefined"==typeof Worker?(console.warn("Web worker is not supported in current browser."),this.worker=null):this.worker=LE(this.layoutCfg.workerScriptURL)),this.worker},t.prototype.stopWorker=function(){var e=this.workerData;this.worker&&(this.worker.terminate(),this.worker=null,e.requestId&&(FE(e.requestId),e.requestId=null),e.requestId2&&(FE(e.requestId2),e.requestId2=null))},t.prototype.execLayoutMethod=function(e,t){var n=this;return new Promise((function(r,i){return(0,y.__awaiter)(n,void 0,void 0,(function(){var n,o,a,s,l,u,c;return(0,y.__generator)(this,(function(d){switch(d.label){case 0:if((n=this.graph).get("destroyed"))return[2];o=e.type,e.onLayoutEnd=function(){n.emit("aftersublayout",{type:o}),r()},o&&this.isGPU&&(this.hasGPUVersion(o)?o+="-gpu":console.warn("The '"+o+"' layout does not support GPU calculation for now, it will run in CPU.")),"force"===o||"g6force"===o||"gForce"===o?(a=e.onTick,u=function(){a&&a(),n.refreshPositions()},e.tick=u):"comboForce"===e.type&&(e.comboTrees=n.get("comboTrees")),!1;try{s=new dE[o](e)}catch(e){console.warn("The layout method: '"+o+"' does not exist! Please specify it first."),i()}return s.enableTick&&(l=e.onTick,u=function(){l&&l(),n.refreshPositions()},s.tick=u),function(e,t){var n;if(!(null===(n=null==e?void 0:e.nodes)||void 0===n?void 0:n.length))return;e.nodes.forEach((function(e){e.layoutOrder=t}))}(c=this.filterLayoutData(this.data,e),t),s.init(c),n.emit("beforesublayout",{type:o}),[4,s.execute()];case 1:return d.sent(),s.isCustomLayout&&e.onLayoutEnd&&e.onLayoutEnd(),this.layoutMethods[t]=s,[2]}}))}))}))},t.prototype.updateLayoutMethod=function(e,t){var n=this;return new Promise((function(r,i){return(0,y.__awaiter)(n,void 0,void 0,(function(){var n,i,o;return(0,y.__generator)(this,(function(a){switch(a.label){case 0:return n=this.graph,i=null==t?void 0:t.type,t.onLayoutEnd=function(){n.emit("aftersublayout",{type:i}),r()},o=this.filterLayoutData(this.data,t),e.init(o),e.updateCfg(t),n.emit("beforesublayout",{type:i}),[4,e.execute()];case 1:return a.sent(),e.isCustomLayout&&t.onLayoutEnd&&t.onLayoutEnd(),[2]}}))}))}))},t.prototype.layout=function(e){var t=this,n=this.graph;this.data=this.setDataFromGraph();var r=this.data,i=r.nodes,o=r.hiddenNodes;if(!i)return!1;var a=n.get("width"),s=n.get("height"),l={};Object.assign(l,{width:a,height:s,center:[a/2,s/2]},this.layoutCfg),this.layoutCfg=l,this.destoryLayoutMethods(),n.emit("beforelayout"),this.initPositions(l.center,i),this.initPositions(l.center,o);var u=l.type;u&&"gpu"===u.split("-")[1]&&(u=u.split("-")[0],l.gpuEnabled=!0);var c=!1;l.gpuEnabled&&(c=!0,xE().webgl||(console.warn("Your browser does not support webGL or GPGPU. The layout will run in CPU."),c=!1)),this.isGPU=c;var d=l.onLayoutEnd,h=l.layoutEndFormatted,f=l.adjust;if(h||(l.layoutEndFormatted=!0,l.onAllLayoutEnd=function(){return(0,y.__awaiter)(t,void 0,void 0,(function(){return(0,y.__generator)(this,(function(e){switch(e.label){case 0:return d&&d(),this.refreshLayout(),f&&l.pipes?[4,this.adjustPipesBox(this.data,f)]:[3,2];case 1:e.sent(),this.refreshLayout(),e.label=2;case 2:return n.emit("afterlayout"),[2]}}))}))}),this.stopWorker(),l.workerEnabled&&this.layoutWithWorker(this.data))return!0;var p=Promise.resolve();return l.type?p=p.then((function(){return(0,y.__awaiter)(t,void 0,void 0,(function(){return(0,y.__generator)(this,(function(e){switch(e.label){case 0:return[4,this.execLayoutMethod(l,0)];case 1:return[2,e.sent()]}}))}))})):l.pipes&&l.pipes.forEach((function(e,n){p=p.then((function(){return(0,y.__awaiter)(t,void 0,void 0,(function(){return(0,y.__generator)(this,(function(t){switch(t.label){case 0:return[4,this.execLayoutMethod(e,n)];case 1:return[2,t.sent()]}}))}))}))})),p.then((function(){l.onAllLayoutEnd&&l.onAllLayoutEnd(),e&&e()})).catch((function(e){console.warn("graph layout failed,",e)})),!1},t.prototype.layoutWithWorker=function(e){var t=this,n=this.layoutCfg,r=this.graph,i=this.getWorker(),o=this.workerData;if(!i)return!1;o.requestId=null,o.requestId2=null,o.currentTick=null,o.currentTickData=null,r.emit("beforelayout");var a=Promise.resolve();if(n.type)a=a.then((function(){return t.runWebworker(i,e,n)}));else if(n.pipes)for(var s=function(n){a=a.then((function(){return t.runWebworker(i,e,n)}))},l=0,u=n.pipes;l<u.length;l++){s(u[l])}return a.then((function(){n.onAllLayoutEnd&&n.onAllLayoutEnd()})).catch((function(e){console.error("layout failed",e)})),!0},t.prototype.runWebworker=function(e,t,n){var r=this,i=this.isGPU,o=this.filterLayoutData(t,n),a=o.nodes,s=o.edges,l=document.createElement("canvas"),u=i&&"undefined"!=typeof window&&window.navigator&&!navigator.gpu&&"OffscreenCanvas"in window&&"transferControlToOffscreen"in l,c=function(e,t){var n={};if(e&&"object"===RE(e))return Object.keys(e).forEach((function(r){e.hasOwnProperty(r)&&t(e[r])&&(n[r]=e[r])})),n;return e}(n,(function(e){return"function"!=typeof e}));if(u){var d=l.transferControlToOffscreen();c.type=c.type+"-gpu",e.postMessage({type:OE,nodes:a,edges:s,layoutCfg:c,canvas:d},[d])}else e.postMessage({type:CE,nodes:a,edges:s,layoutCfg:c});return new Promise((function(t,i){e.onmessage=function(e){r.handleWorkerMessage(t,i,e,o,n)}}))},t.prototype.handleWorkerMessage=function(e,t,n,r,i){var o=this.graph,a=this.workerData,s=n.data,l=s.type,u=function(){i.onTick&&i.onTick()};switch(l){case PE:a.currentTick=s.currentTick,a.currentTickData=s,a.requestId||(a.requestId=jE((function(){WE(r,s),o.refreshPositions(),u(),s.currentTick===s.totalTicks?e():a.currentTick===s.totalTicks&&(a.requestId2=jE((function(){WE(r,a.currentTickData),o.refreshPositions(),a.requestId2=null,u(),e()}))),a.requestId=null})));break;case DE:null==a.currentTick&&(WE(r,s),e());break;case IE:null==a.currentTick&&(!function(e,t){for(var n=e.nodes,r=t.vertexEdgeData,i=n.length,o=0;o<i;o++){var a=n[o],s=r[4*o],l=r[4*o+1];a.x=s,a.y=l}}(r,s),e());break;case AE:console.warn("Web-Worker layout error!",s.message),t();break;default:t()}},t.prototype.updateLayoutCfg=function(e){var t=this,n=this.graph,r=this.layoutMethods,i=(0,b.mix)({},this.layoutCfg,e);if(this.layoutCfg=i,null==r?void 0:r.length){if(this.data=this.setDataFromGraph(),this.stopWorker(),!e.workerEnabled||!this.layoutWithWorker(this.data)){n.emit("beforelayout");var o=Promise.resolve();1===r.length?o=o.then((function(){return(0,y.__awaiter)(t,void 0,void 0,(function(){return(0,y.__generator)(this,(function(e){switch(e.label){case 0:return[4,this.updateLayoutMethod(r[0],i)];case 1:return[2,e.sent()]}}))}))})):null==r||r.forEach((function(e,n){var r=i.pipes[n];o=o.then((function(){return(0,y.__awaiter)(t,void 0,void 0,(function(){return(0,y.__generator)(this,(function(t){switch(t.label){case 0:return[4,this.updateLayoutMethod(e,r)];case 1:return[2,t.sent()]}}))}))}))})),o.then((function(){i.onAllLayoutEnd&&i.onAllLayoutEnd()})).catch((function(e){console.warn("layout failed",e)}))}}else this.layout()},t.prototype.adjustPipesBox=function(e,t){var n=this;return new Promise((function(r){var i=e.nodes;(null==i?void 0:i.length)||r(),zE.includes(t)||(console.warn("The adjust type "+t+" is not supported yet, please assign it with 'force', 'grid', or 'circular'."),r());var o={center:n.layoutCfg.center,nodeSize:function(e){return Math.max(e.height,e.width)},preventOverlap:!0,onLayoutEnd:function(){}},a=n.getLayoutBBox(i),s=a.groupNodes,l=a.layoutNodes,u=(0,b.clone)(l);o.onLayoutEnd=function(){null==l||l.forEach((function(e,t){var n,r,i,o=e.x-(null===(n=u[t])||void 0===n?void 0:n.x),a=e.y-(null===(r=u[t])||void 0===r?void 0:r.y);null===(i=s[t])||void 0===i||i.forEach((function(e){e.x+=o,e.y+=a}))})),r()},new dE[t](o).layout({nodes:l})}))},t.prototype.hasGPUVersion=function(e){return BE.includes(e)},t.prototype.destroy=function(){this.destoryLayoutMethods();var e=this.worker;e&&(e.terminate(),this.worker=null),this.destroyed=!0,this.graph.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0,this.graph=null},t}(Cu);const GE=HE;function WE(e,t){for(var n=e.nodes,r=t.nodes,i=n.length,o=0;o<i;o++){var a=n[o];a.x=r[o].x,a.y=r[o].y}}var UE,VE,XE,qE;function KE(e){UE||(UE=document.createElement("table"),VE=document.createElement("tr"),XE=/^\s*<(\w+|!)[^>]*>/,qE={tr:document.createElement("tbody"),tbody:UE,thead:UE,tfoot:UE,td:VE,th:VE,"*":document.createElement("div")});var t=XE.test(e)&&RegExp.$1;t&&t in qE||(t="*");var n=qE[t];e=e.replace(/(^\s*)|(\s*$)/g,""),n.innerHTML=""+e;var r=n.childNodes[0];return n.removeChild(r),r}var JE=_h,ZE=function(e){function t(t){var n=e.call(this,t)||this,r=n.get("defaultNode");return r||n.set("defaultNode",{type:"circle"}),r.type||(r.type="circle",n.set("defaultNode",r)),n.destroyed=!1,n}return(0,y.__extends)(t,e),t.prototype.initLayoutController=function(){var e=new GE(this);this.set({layoutController:e})},t.prototype.initEventController=function(){var e=new Gh(this);this.set({eventController:e})},t.prototype.initCanvas=function(){var e=this.get("container");if("string"==typeof e&&(e=document.getElementById(e),this.set("container",e)),!e)throw new Error("invalid container");var t,n=e.clientWidth,r=e.clientHeight,i=this.get("width")||n,o=this.get("height")||r;if(this.get("width")||this.get("height")||(this.set("width",n),this.set("height",r)),"svg"===this.get("renderer"))t=new mh({container:e,width:i,height:o});else{var a={container:e,width:i,height:o},s=this.get("pixelRatio");s&&(a.pixelRatio=s),t=new cd(a)}this.set("canvas",t)},t.prototype.initPlugins=function(){var e=this;(0,b.each)(e.get("plugins"),(function(t){!t.destroyed&&t.initPlugin&&t.initPlugin(e)}))},t.prototype.downloadImageWatermark=function(e,t,n,r){return(0,y.__awaiter)(this,void 0,void 0,(function(){var i,o,a;return(0,y.__generator)(this,(function(s){switch(s.label){case 0:return i=e.style.backgroundImage,o=i.slice(5,i.length-2),(a=new Image).src=o,[4,new Promise((function(e){a.onload=function(){var i=t.createPattern(a,"repeat");t.rect(0,0,n,r),t.fillStyle=i,t.fill(),e("")}}))];case 1:return s.sent(),[2]}}))}))},t.prototype.asyncToDataUrl=function(e,t,n,r,i,o){var a=this,s=document.querySelector(".g6-graph-watermarker"),l=this.get("canvas"),u=l.getRenderer(),c=o||l.get("el"),d="";e||(e="image/png"),setTimeout((function(){return(0,y.__awaiter)(a,void 0,void 0,(function(){var o,a,l,h,f,p,m,g,v,b;return(0,y.__generator)(this,(function(y){switch(y.label){case 0:return"svg"!==u?[3,1]:(o=c.cloneNode(!0),a=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),(l=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",a)).replaceChild(o,l.documentElement),h=(new XMLSerializer).serializeToString(l),d="data:image/svg+xml;charset=utf8,"+encodeURIComponent(h),[3,4]);case 1:return f=void 0,p=c.getContext("2d"),m=r||this.get("width"),g=i||this.get("height"),v=void 0,s?[4,this.downloadImageWatermark(s,p,m,g)]:[3,3];case 2:y.sent(),y.label=3;case 3:if(t){b="undefined"!=typeof window?window.devicePixelRatio:1;try{f=p.getImageData(0,0,m*b,g*b),v=p.globalCompositeOperation,p.globalCompositeOperation="destination-over",p.fillStyle=t,p.fillRect(0,0,m,g)}catch(e){console.error("Download image failed. Out of memory at ImageData creation")}}d=c.toDataURL(e),t&&(p.clearRect(0,0,m,g),p.putImageData(f,0,0),p.globalCompositeOperation=v),y.label=4;case 4:return n&&n(d),[2]}}))}))}),16)},t.prototype.toDataURL=function(e,t){var n=this.get("canvas"),r=n.getRenderer(),i=n.get("el");e||(e="image/png");var o="";if("svg"===r){var a=i.cloneNode(!0),s=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),l=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",s);l.replaceChild(a,l.documentElement);var u=(new XMLSerializer).serializeToString(l);o="data:image/svg+xml;charset=utf8,"+encodeURIComponent(u)}else{var c=void 0,d=i.getContext("2d"),h=this.get("width"),f=this.get("height"),p=void 0;if(t){var m="undefined"!=typeof window?window.devicePixelRatio:1;try{c=d.getImageData(0,0,h*m,f*m),p=d.globalCompositeOperation,d.globalCompositeOperation="destination-over",d.fillStyle=t,d.fillRect(0,0,h,f)}catch(e){console.error("Download image failed. Out of memory at ImageData creation")}}o=i.toDataURL(e),t&&(d.clearRect(0,0,h,f),d.putImageData(c,0,0),d.globalCompositeOperation=p)}return o},t.prototype.toFullDataURL=function(e,t,n){var r=this.get("group").getCanvasBBox(),i=r.height,o=r.width,a=this.get("renderer"),s=KE('<id="virtual-image"></div>'),l=n?n.backgroundColor:void 0,u=n?n.padding:void 0;u?(0,b.isNumber)(u)&&(u=[u,u,u,u]):u=[0,0,0,0];var c=i+u[0]+u[2],d=o+u[1]+u[3],h={container:s,height:c,width:d,quickHit:!0},f="svg"===a?new mh(h):new cd(h),p=this.get("group").clone(),m=(0,b.clone)(p.getMatrix());m||(m=[1,0,0,0,1,0,0,0,1]);var g=(r.maxX+r.minX)/2,v=(r.maxY+r.minY)/2;m=JE(m,[["t",-g,-v],["t",o/2+u[3],i/2+u[0]]]),p.resetMatrix(),p.setMatrix(m),f.add(p);var y=f.get("el"),_="";t||(t="image/png"),setTimeout((function(){if("svg"===a){var n=y.cloneNode(!0),r=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),i=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",r);i.replaceChild(n,i.documentElement);var o=(new XMLSerializer).serializeToString(i);_="data:image/svg+xml;charset=utf8,"+encodeURIComponent(o)}else{var s=void 0,u=y.getContext("2d"),h=void 0;if(l){var f="undefined"!=typeof window?window.devicePixelRatio:1;try{s=u.getImageData(0,0,d*f,c*f),h=u.globalCompositeOperation,u.globalCompositeOperation="destination-over",u.fillStyle=l,u.fillRect(0,0,d,c)}catch(e){console.error("Download image failed. Out of memory at ImageData creation")}}_=y.toDataURL(t),l&&(u.clearRect(0,0,d,c),u.putImageData(s,0,0),u.globalCompositeOperation=h)}e&&e(_)}),16)},t.prototype.downloadFullImage=function(e,t,n){var r=this,i=this.get("group").getCanvasBBox(),o=i.height,a=i.width,s=this.get("renderer"),l=KE('<id="virtual-image"></div>'),u=document.querySelector(".g6-graph-watermarker"),c=n?n.backgroundColor:void 0,d=n?n.padding:void 0;d?(0,b.isNumber)(d)&&(d=[d,d,d,d]):d=[0,0,0,0];var h=o+d[0]+d[2],f=a+d[1]+d[3];if(u){var p=this.get("graphWaterMarker").cfg||{},m=p.width,g=p.height;h=Math.ceil(h/g)*g,f=Math.ceil(f/m)*m}var v={container:l,height:h,width:f},y="svg"===s?new mh(v):new cd(v),_=this.get("group").clone(),w=(0,b.clone)(_.getMatrix());w||(w=[1,0,0,0,1,0,0,0,1]);var x=(i.maxX+i.minX)/2,M=(i.maxY+i.minY)/2;w=JE(w,[["t",-x,-M],["t",a/2+d[3],o/2+d[0]]]),_.resetMatrix(),_.setMatrix(w),y.add(_);var E=y.get("el");t||(t="image/png"),this.asyncToDataUrl(t,c,(function(n){var i=document.createElement("a"),o=(e||"graph")+("svg"===s?".svg":"."+t.split("/")[1]);r.dataURLToImage(n,s,i,o);var a=document.createEvent("MouseEvents");a.initEvent("click",!1,!1),i.dispatchEvent(a)}),f,h,E)},t.prototype.downloadImage=function(e,t,n){var r=this,i=this;i.isAnimating()&&i.stopAnimate();var o=i.get("canvas").getRenderer();t||(t="image/png");var a=(e||"graph")+("svg"===o?".svg":t.split("/")[1]),s=document.createElement("a");i.asyncToDataUrl(t,n,(function(e){r.dataURLToImage(e,o,s,a);var t=document.createEvent("MouseEvents");t.initEvent("click",!1,!1),s.dispatchEvent(t)}))},t.prototype.dataURLToImage=function(e,t,n,r){if(e&&"data:"!==e){if("undefined"!=typeof window)if(window.Blob&&window.URL&&"svg"!==t){var i=e.split(","),o="";if(i&&i.length>0){var a=i[0].match(/:(.*?);/);a&&a.length>=2&&(o=a[1])}for(var s=atob(i[1]),l=s.length,u=new Uint8Array(l);l--;)u[l]=s.charCodeAt(l);var c=new Blob([u],{type:o});window.navigator.msSaveBlob?window.navigator.msSaveBlob(c,r):n.addEventListener("click",(function(){n.download=r,n.href=window.URL.createObjectURL(c)}))}else n.addEventListener("click",(function(){n.download=r,n.href=e}))}else console.error("Download image failed. The graph is too large or there is invalid attribute values in graph items")},t.prototype.addPlugin=function(e){e.destroyed||(this.get("plugins").push(e),e.initPlugin(this))},t.prototype.removePlugin=function(e){var t=this.get("plugins"),n=t.indexOf(e);n>=0&&(e.destroyPlugin(),t.splice(n,1))},t.prototype.setImageWaterMarker=function(e,t){void 0===e&&(e=jh.waterMarkerImage);var n=this.get("container");(0,b.isString)(n)&&(n=document.getElementById(n)),n.style.position||(n.style.position="relative");var r=this.get("graphWaterMarker"),i=(0,b.deepMix)({},jh.imageWaterMarkerConfig,t),o=i.width,a=i.height,s=i.compatible,l=i.image;if(!r){var u={container:n,width:o,height:a,capture:!1},c=this.get("pixelRatio");c&&(u.pixelRatio=c),r=new cd(u),this.set("graphWaterMarker",r)}r.get("el").style.display="none";var d=r.get("context"),h=l.rotate,f=l.x,p=l.y;d.rotate(-h*Math.PI/180);var m=new Image;m.crossOrigin="anonymous",m.src=e,m.onload=function(){if(d.drawImage(m,f,p,l.width,l.height),d.rotate(h*Math.PI/180),s)n.style.cssText="background-image: url("+r.get("el").toDataURL("image/png")+");background-repeat:repeat;";else{var e=document.querySelector(".g6-graph-watermarker");e||((e=document.createElement("div")).className="g6-graph-watermarker"),e.className="g6-graph-watermarker",r.destroyed||(e.style.cssText="background-image: url("+r.get("el").toDataURL("image/png")+");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:-1;",n.appendChild(e))}}},t.prototype.setTextWaterMarker=function(e,t){var n=this.get("container");(0,b.isString)(n)&&(n=document.getElementById(n)),n.style.position||(n.style.position="relative");var r=this.get("graphWaterMarker"),i=(0,b.deepMix)({},jh.textWaterMarkerConfig,t),o=i.width,a=i.height,s=i.compatible,l=i.text;if(!r){var u={container:n,width:o,height:a,capture:!1},c=this.get("pixelRatio");c&&(u.pixelRatio=c),r=new cd(u),this.set("graphWaterMarker",r)}r.get("el").style.display="none";var d=r.get("context"),h=l.rotate,f=l.fill,p=l.fontFamily,m=l.fontSize,g=l.baseline,v=l.x,y=l.y,_=l.lineHeight;d.rotate(-h*Math.PI/180),d.font=m+"px "+p,d.fillStyle=f,d.textBaseline=g;for(var w=e.length-1;w>=0;w--)d.fillText(e[w],v,y+w*_);if(d.rotate(h*Math.PI/180),s)n.style.cssText="background-image: url("+r.get("el").toDataURL("image/png")+");background-repeat:repeat;";else{var x=document.querySelector(".g6-graph-watermarker");x||((x=document.createElement("div")).className="g6-graph-watermarker"),x.style.cssText="background-image: url("+r.get("el").toDataURL("image/png")+");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:99;",n.appendChild(x)}},t.prototype.destroy=function(){var t,n,r,i;(0,b.each)(this.get("plugins"),(function(e){e.destroyPlugin()}));var o=this.get("tooltips");if(o)for(var a=0;a<o.length;a++){var s=o[a];if(s){var l=s.parentElement;l&&l.removeChild(s)}}null===(t=this.get("eventController"))||void 0===t||t.destroy(),null===(n=this.get("layoutController"))||void 0===n||n.destroy(),null===(r=this.get("graphWaterMarker"))||void 0===r||r.destroy(),null===(i=document.querySelector(".g6-graph-watermarker"))||void 0===i||i.remove(),e.prototype.destroy.call(this)},t}(au);const $E=ZE;var QE=ME.radialLayout,eS=ME.traverseTree,tS=function(e){function t(t){var n=e.call(this,t)||this;return n.layoutAnimating=!1,n.set("removeList",[]),n.set("layoutMethod",n.getLayout()),n}return(0,y.__extends)(t,e),t.prototype.getLayout=function(){var e=this.get("layout");return e?"function"==typeof e?e:(e.type||(e.type="dendrogram"),e.direction||(e.direction="TB"),e.radial?function(t){var n=fE()[e.type](t,e);return QE(n),n}:function(t){return fE()[e.type](t,e)}):null},t.indexOfChild=function(e,t){var n=-1;return(0,b.each)(e,(function(e,r){if(t===e.id)return n=r,!1})),n},t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return t.animate=!0,t},t.prototype.innerAddChild=function(e,t,n){var r=this,i=e.data;i&&(i.x=e.x,i.y=e.y,i.depth=e.depth);var o=r.addItem("node",i,!1);if(t){if(o.set("parent",t),n){var a=t.get("originAttrs");if(a)o.set("originAttrs",a);else{var s=t.getModel();o.set("originAttrs",{x:s.x,y:s.y})}}var l=t.get("children");l?l.push(o):t.set("children",[o]),r.addItem("edge",{source:t.get("id"),target:o.get("id"),id:t.get("id")+":"+o.get("id")},!1)}return(0,b.each)(e.children||[],(function(e){r.innerAddChild(e,o,n)})),r.emit("afteraddchild",{item:o,parent:t}),o},t.prototype.innerUpdateChild=function(e,n,r){var i=this,o=i.findById(e.id);if(o){(0,b.each)(e.children||[],(function(e){i.innerUpdateChild(e,o,r)}));var a,s,l=o.get("children");if(l)if(l.length>0)for(var u=l.length-1;u>=0;u--){var c=l[u].getModel();-1===t.indexOfChild(e.children||[],c.id)&&(i.innerRemoveChild(c.id,{x:e.x,y:e.y},r),l.splice(u,1))}o.get("originAttrs")&&(a=o.get("originAttrs").x,s=o.get("originAttrs").y);var d=o.getModel();r&&o.set("originAttrs",{x:d.x,y:d.y}),o.set("model",e.data),a===e.x&&s===e.y||o.updatePosition({x:e.x,y:e.y})}else i.innerAddChild(e,n,r)},t.prototype.innerRemoveChild=function(e,t,n){var r=this,i=r.findById(e);if(i)if((0,b.each)(i.get("children"),(function(e){r.innerRemoveChild(e.getModel().id,t,n)})),n){var o=i.getModel();i.set("to",t),i.set("originAttrs",{x:o.x,y:o.y}),r.get("removeList").push(i)}else r.removeItem(i,!1)},t.prototype.changeData=function(e){var t=this;this.getNodes().map((function(e){return t.clearItemStates(e)})),this.getEdges().map((function(e){return t.clearItemStates(e)})),e?(t.data(e),t.render()):t.layout(this.get("fitView"))},t.prototype.changeLayout=function(e){console.warn("Please call updateLayout instead of changeLayout. changeLayout will be discarded soon");this.updateLayout(e)},t.prototype.updateLayout=function(e){var t=this;e?(t.set("layout",e),t.set("layoutMethod",t.getLayout()),t.layout()):console.warn("layout cannot be null")},t.prototype.refreshLayout=function(e){console.warn("Please call layout instead of refreshLayout. refreshLayout will be discarded soon");this.layout(e)},t.prototype.layout=function(e){var t=this,n=t.get("data"),r=t.get("layoutMethod"),i=r?r(n,t.get("layout")):n,o=t.get("animate");(t.emit("beforerefreshlayout",{data:n,layoutData:i}),t.emit("beforelayout"),t.innerUpdateChild(i,void 0,o),e)&&t.get("viewController").fitView();o?t.layoutAnimate(i):(t.refresh(),t.paint()),t.emit("afterrefreshlayout",{data:n,layoutData:i}),t.emit("afterlayout")},t.prototype.addChild=function(e,t){var n=this;n.emit("beforeaddchild",{model:e,parent:t}),(0,b.isString)(t)||(t=t.get("id"));var r=n.findDataById(t);r&&(r.children||(r.children=[]),r.children.push(e),n.changeData())},t.prototype.updateChildren=function(e,t){var n=this;t&&n.findById(t)?(n.findDataById(t).children=e,n.changeData()):console.warn("Update children failed! There is no node with id '"+t+"'")},t.prototype.updateChild=function(e,n){var r=this;if(n&&r.findById(n)){var i=r.findDataById(n),o=r.findById(e.id);if(i.children||(i.children=[]),o){var a=t.indexOfChild(i.children,e.id);i.children[a]=e}else i.children.push(e);r.changeData()}else r.changeData(e)},t.prototype.removeChild=function(e){var n=this,r=n.findById(e);if(r){var i=r.get("parent");if(i&&!i.destroyed){var o=n.findDataById(i.get("id")),a=o&&o.children||[],s=r.getModel(),l=t.indexOfChild(a,s.id);a.splice(l,1)}n.changeData()}},t.prototype.findDataById=function(e,t){var n=this;if(t||(t=n.get("data")),e===t.id)return t;var r=null;return(0,b.each)(t.children||[],(function(t){return t.id===e?(r=t,!1):!(r=n.findDataById(e,t))&&void 0})),r},t.prototype.layoutAnimate=function(e,t){var n=this,r=this.get("animateCfg");n.emit("beforeanimate",{data:e}),n.getEdges().forEach((function(e){var t=e.get("model");t.sourceAnchor||(t.sourceAnchor=e.get("sourceAnchorIndex"))})),this.get("canvas").animate((function(r){eS(e,(function(i){var o=n.findById(i.id);if(o){var a=o.get("originAttrs"),s=o.get("model");if(a||(a={x:s.x,y:s.y},o.set("originAttrs",a)),t){var l=t(o,r,a,e);o.set("model",Object.assign(s,l))}else s.x=a.x+(i.x-a.x)*r,s.y=a.y+(i.y-a.y)*r}return!0})),(0,b.each)(n.get("removeList"),(function(e){var t=e.getModel(),n=e.get("originAttrs"),i=e.get("to");t.x=n.x+(i.x-n.x)*r,t.y=n.y+(i.y-n.y)*r})),n.refreshPositions()}),{duration:r.duration,easing:r.ease,callback:function(){(0,b.each)(n.getNodes(),(function(e){e.set("originAttrs",null)})),(0,b.each)(n.get("removeList"),(function(e){n.removeItem(e)})),n.set("removeList",[]),r.callback&&r.callback(),n.emit("afteranimate",{data:e})},delay:r.delay})},t.prototype.stopLayoutAnimate=function(){this.get("canvas").stopAnimate(),this.emit("layoutanimateend",{data:this.get("data")}),this.layoutAnimating=!1},t.prototype.isLayoutAnimating=function(){return this.layoutAnimating},t.prototype.render=function(){var e=this,t=e.get("data");if(!t||!(0,b.isObject)(t)||!Object.keys(t).length)throw new Error("data must be defined first");e.clear(),e.emit("beforerender"),e.layout(this.get("fitView")),e.emit("afterrender")},t.prototype.save=function(){return this.get("data")},t}($E);const nS=tS;function rS(e,t){if(e)for(var n in t)t.hasOwnProperty(n)&&(e.style[n]=t[n]);return e}var iS=function(){function e(e){this._cfgs=(0,b.deepMix)(this.getDefaultCfgs(),e),this._events={},this.destroyed=!1}return e.prototype.getDefaultCfgs=function(){return{}},e.prototype.initPlugin=function(e){var t=this;t.set("graph",e);var n=t.getEvents(),r={};(0,b.each)(n,(function(n,i){var o=(0,b.wrapBehavior)(t,n);r[i]=o,e.on(i,o)})),this._events=r,this.init()},e.prototype.getEvents=function(){return{}},e.prototype.get=function(e){var t;return null===(t=this._cfgs)||void 0===t?void 0:t[e]},e.prototype.set=function(e,t){this._cfgs[e]=t},e.prototype.destroy=function(){},e.prototype.destroyPlugin=function(){this.destroy();var e=this.get("graph"),t=this._events;(0,b.each)(t,(function(t,n){e.off(n,t)})),this._events=null,this._cfgs=null,this.destroyed=!0},e}();const oS=iS;var aS,sS=(aS=function(e,t){return aS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},aS(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}aS(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),lS="url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAwIDEwIEwgNDAgMTAgTSAxMCAwIEwgMTAgNDAgTSAwIDIwIEwgNDAgMjAgTSAyMCAwIEwgMjAgNDAgTSAwIDMwIEwgNDAgMzAgTSAzMCAwIEwgMzAgNDAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2UwZTBlMCIgb3BhY2l0eT0iMC4yIiBzdHJva2Utd2lkdGg9IjEiLz48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZTBlMGUwIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=)",uS=function(e){function t(t){return e.call(this,t)||this}return sS(t,e),t.prototype.getDefaultCfgs=function(){return{img:lS,follow:!0}},t.prototype.init=function(){var e=this.get("graph"),t=e.get("container"),n=e.get("canvas").get("el"),r=this.get("img")||lS,i=KE("<div class='g6-grid-container' style=\"position:absolute;overflow:hidden;z-index: -1;\"></div>"),o=KE("<div\n        class='g6-grid'\n        style='position:absolute;\n        background-image: "+r+";\n        user-select: none\n        '></div>");this.set("container",i),this.set("gridContainer",o),this.positionInit(),i.appendChild(o),t.insertBefore(i,n)},t.prototype.positionInit=function(){var e=this.get("graph"),t=e.get("minZoom"),n=e.get("width"),r=e.get("height");rS(this.get("container"),{width:n+"px",height:r+"px"});var i=80*n/t,o=80*r/t;rS(this.get("gridContainer"),{width:i+"px",height:o+"px",left:"-"+i/2+"px",top:"-"+o/2+"px"})},t.prototype.getEvents=function(){return{viewportchange:"updateGrid"}},t.prototype.updateGrid=function(e){var t=this.get("gridContainer"),n=e.matrix;n||(n=[1,0,0,0,1,0,0,0,1]);var r=this.get("follow");rS(t,{transform:"matrix("+n[0]+", "+n[1]+", "+n[3]+", "+n[4]+", "+(r?n[6]:"0")+", "+(r?n[7]:"0")+")"})},t.prototype.getContainer=function(){return this.get("container")},t.prototype.destroy=function(){var e=this.get("graph").get("container"),t=this.get("container");e.removeChild(t)},t}(oS);const cS=uS;var dS=o(38186),hS=o.n(dS),fS=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();"undefined"!=typeof document&&hS()("\n  .g6-component-contextmenu {\n    border: 1px solid #e2e2e2;\n    border-radius: 4px;\n    font-size: 12px;\n    color: #545454;\n    background-color: rgba(255, 255, 255, 0.9);\n    padding: 10px 8px;\n    box-shadow: rgb(174, 174, 174) 0px 0px 10px;\n  }\n  .g6-contextmenu-ul {\n    padding: 0;\n    margin: 0;\n    list-style: none;\n  }\n\n");var pS=function(e){function t(t){return e.call(this,t)||this}return fS(t,e),t.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,handleMenuClick:void 0,getContent:function(e){return"\n          <ul class='g6-contextmenu-ul'>\n            <li>1</li>\n            <li>2</li>\n          </ul>\n        "},shouldBegin:function(e){return!0},onHide:function(){return!0},itemTypes:["node","edge","combo"],trigger:"contextmenu"}},t.prototype.getEvents=function(){return"click"===this.get("trigger")?{click:"onMenuShow"}:{contextmenu:"onMenuShow"}},t.prototype.init=function(){var e=KE("<div class="+(this.get("className")||"g6-component-contextmenu")+"></div>");rS(e,{top:"0px",position:"absolute",visibility:"hidden"});var t=this.get("container");t||(t=this.get("graph").get("container")),(0,b.isString)(t)&&(t=document.getElementById(t)),t.appendChild(e),this.set("menu",e)},t.prototype.onMenuShow=function(e){var t=this;e.preventDefault();var n=this.get("itemTypes");if(e.item){if(e.item&&e.item.getType&&-1===n.indexOf(e.item.getType()))return void t.onMenuHide()}else if(-1===n.indexOf("canvas"))return void t.onMenuHide();if(this.get("shouldBegin")(e)){var r=this.get("menu"),i=this.get("getContent"),o=this.get("graph"),a=i(e,o);(0,b.isString)(a)?r.innerHTML=a:r.innerHTML=a.outerHTML,this.removeMenuEventListener();var s=this.get("handleMenuClick");if(s){var l=function(t){s(t.target,e.item,o)};this.set("handleMenuClickWrapper",l),r.addEventListener("click",l)}var u=o.get("width"),c=o.get("height"),d=r.getBoundingClientRect(),h=this.get("offsetX")||0,f=this.get("offsetY")||0,p=o.getContainer().offsetTop,m=o.getContainer().offsetLeft,g=e.canvasX+m+h,v=e.canvasY+p+f;g+d.width>u&&(g=e.canvasX-d.width-h+m),v+d.height>c&&(v=e.canvasY-d.height-f+p),rS(r,{top:v+"px",left:g+"px",visibility:"visible"});var y="click"===this.get("trigger"),_=function(e){y?y=!1:t.onMenuHide()};document.body.addEventListener("click",_),this.set("handler",_)}},t.prototype.removeMenuEventListener=function(){var e=this.get("handleMenuClickWrapper"),t=this.get("handler");e&&(this.get("menu").removeEventListener("click",e),this.set("handleMenuClickWrapper",null));t&&document.body.removeEventListener("click",t)},t.prototype.onMenuHide=function(){var e=this.get("menu");e&&rS(e,{visibility:"hidden"}),this.removeMenuEventListener()},t.prototype.destroy=function(){var e=this.get("menu");if(this.removeMenuEventListener(),e){var t=this.get("container");t||(t=this.get("graph").get("container")),(0,b.isString)(t)&&(t=document.getElementById(t)),t.removeChild(e)}},t}(oS);const mS=pS;var gS=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),vS=function(){return vS=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},vS.apply(this,arguments)},yS=Math.max,bS=_h,_S=function(e){function t(t){var n=e.call(this,t)||this;return n.handleUpdateCanvas=(0,b.debounce)((function(e){var t=n;t.destroyed||t.updateCanvas()}),100,!1),n}return gS(t,e),t.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",type:"default",padding:50,size:[200,120],delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0}},t.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},t.prototype.disableRefresh=function(){this.set("refresh",!1)},t.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},t.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},t.prototype.initViewport=function(){var e=this,t=this._cfgs,n=t.size,r=t.graph;if(!this.destroyed){var i=this.get("canvas").get("container"),o=KE("\n      <div\n        class="+t.viewportClassName+"\n        style='position:absolute;\n          left:0;\n          top:0;\n          box-sizing:border-box;\n          outline: 2px solid #1980ff'\n        draggable=true>\n      </div>"),a=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,s=0,l=0,u=!1,c=0,d=0,h=0,f=0,p=0,m=0;o.addEventListener("dragstart",(function(i){var a,g;if(i.dataTransfer){var v=new Image;v.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' %3E%3Cpath /%3E%3C/svg%3E",null===(g=(a=i.dataTransfer).setDragImage)||void 0===g||g.call(a,v,0,0);try{i.dataTransfer.setData("text/html","view-port-minimap")}catch(e){i.dataTransfer.setData("text","view-port-minimap")}}if(t.refresh=!1,i.target===o){var y=o.style;c=parseInt(y.left,10),d=parseInt(y.top,10),h=parseInt(y.width,10),f=parseInt(y.height,10),h>n[0]||f>n[1]||(m=r.getZoom(),p=e.get("ratio"),u=!0,s=i.clientX,l=i.clientY)}}),!1),o.addEventListener(a?"dragover":"drag",(function(e){if(u&&!(0,b.isNil)(e.clientX)&&!(0,b.isNil)(e.clientY)){var t=s-e.clientX,i=l-e.clientY;(c-t<0||c-t+h>=n[0])&&(t=0),(d-i<0||d-i+f>=n[1])&&(i=0),rS(o,{left:(c-=t)+"px",top:(d-=i)+"px"}),r.translate(t*m/p,i*m/p),s=e.clientX,l=e.clientY}}),!1),o.addEventListener("dragend",(function(){u=!1,t.refresh=!0}),!1),this.set("viewport",o),i.appendChild(o)}},t.prototype.updateViewport=function(){if(!this.destroyed){var e=this.get("ratio"),t=(this.get("dx"),this.get("dy"),this.get("totaldx")),n=this.get("totaldy"),r=this.get("graph"),i=this.get("size"),o=r.get("width"),a=r.get("height"),s=r.getPointByCanvas(0,0),l=r.getPointByCanvas(o,a),u=this.get("viewport");u||this.initViewport();var c=(l.x-s.x)*e,d=(l.y-s.y)*e,h=s.x*e+t,f=s.y*e+n,p=h+c,m=f+d;h<0&&(c+=h,h=0),p>i[0]&&(c-=p-i[0]),f<0&&(d+=f,f=0),m>i[1]&&(d-=m-i[1]),this.set("ratio",e),rS(u,{left:h+"px",top:f+"px",width:c+"px",height:d+"px"})}},t.prototype.updateGraphShapes=function(){var e=this._cfgs.graph,t=this.get("canvas"),n=e.get("group");if(!n.destroyed){var r=n.clone();r.resetMatrix(),t.clear(),t.add(r),"svg"===e.get("renderer")&&this.updateVisible(r)}},t.prototype.updateVisible=function(e){var t=this;if(e.isGroup()||e.get("visible")){var n=e.get("children");if(!n||!n.length)return;n.forEach((function(e){e.get("visible")||e.hide(),t.updateVisible(e)}))}else e.hide()},t.prototype.updateKeyShapes=function(){var e=this,t=this._cfgs.graph,n=this.get("canvas"),r=n.get("children")[0]||n.addGroup();(0,b.each)(t.getEdges(),(function(t){e.updateOneEdgeKeyShape(t,r)})),(0,b.each)(t.getNodes(),(function(t){e.updateOneNodeKeyShape(t,r)}));var i=t.getCombos();if(i&&i.length){var o=r.find((function(e){return"comboGroup"===e.get("name")}))||r.addGroup({name:"comboGroup"});setTimeout((function(){e.destroyed||((0,b.each)(i,(function(t){e.updateOneComboKeyShape(t,o)})),null==o||o.sort(),null==o||o.toBack(),e.updateCanvas())}),250)}this.clearDestroyedShapes()},t.prototype.updateOneComboKeyShape=function(e,t){if(!this.destroyed){var n=this.get("itemMap")||{},r=n[e.get("id")],i=e.getBBox(),o=e.get("keyShape").clone(),a=o.attr(),s={x:i.centerX,y:i.centerY};r?s=Object.assign(a,s):(r=o,t.add(r));var l=r.get("type");"rect"!==l&&"image"!==l||(s.x=i.minX,s.y=i.minY),r.attr(s),e.isVisible()?r.show():r.hide(),r.exist=!0;var u=e.getModel().depth;isNaN(u)||r.set("zIndex",u),n[e.get("id")]=r,this.set("itemMap",n)}},t.prototype.updateOneNodeKeyShape=function(e,t){var n=this.get("itemMap")||{},r=n[e.get("id")],i=e.getBBox(),o=e.get("keyShape").clone(),a=o.attr(),s={x:i.centerX,y:i.centerY};r?s=Object.assign(a,s):(r=o,t.add(r));var l=r.get("type");"rect"!==l&&"image"!==l||(s.x=i.minX,s.y=i.minY),r.attr(s),e.isVisible()?r.show():r.hide(),r.exist=!0;var u=e.getModel().depth;isNaN(u)||r.set("zIndex",u),n[e.get("id")]=r,this.set("itemMap",n)},t.prototype.updateDelegateShapes=function(){var e=this,t=this._cfgs.graph,n=this.get("canvas"),r=n.get("children")[0]||n.addGroup();(0,b.each)(t.getEdges(),(function(t){e.updateOneEdgeKeyShape(t,r)})),(0,b.each)(t.getNodes(),(function(t){e.updateOneNodeDelegateShape(t,r)}));var i=t.getCombos();if(i&&i.length){var o=r.find((function(e){return"comboGroup"===e.get("name")}))||r.addGroup({name:"comboGroup"});setTimeout((function(){e.destroyed||((0,b.each)(i,(function(t){e.updateOneComboKeyShape(t,o)})),null==o||o.sort(),null==o||o.toBack(),e.updateCanvas())}),250)}this.clearDestroyedShapes()},t.prototype.clearDestroyedShapes=function(){var e=this.get("itemMap")||{},t=Object.keys(e);if(t&&0!==t.length)for(var n=t.length-1;n>=0;n--){var r=e[t[n]],i=r.exist;r.exist=!1,i||(r.remove(),delete e[t[n]])}},t.prototype.updateOneEdgeKeyShape=function(e,t){var n=this.get("itemMap")||{},r=n[e.get("id")];if(r){var i=e.get("keyShape").attr("path");r.attr("path",i)}else r=e.get("keyShape").clone(),t.add(r);e.isVisible()?r.show():r.hide(),r.exist=!0,n[e.get("id")]=r,this.set("itemMap",n)},t.prototype.updateOneNodeDelegateShape=function(e,t){var n=this.get("delegateStyle"),r=this.get("itemMap")||{},i=r[e.get("id")],o=e.getBBox();if(i){var a={x:o.minX,y:o.minY,width:o.width,height:o.height};i.attr(a)}else i=t.addShape("rect",{attrs:vS({x:o.minX,y:o.minY,width:o.width,height:o.height},n),name:"minimap-node-shape"});e.isVisible()?i.show():i.hide(),i.exist=!0,r[e.get("id")]=i,this.set("itemMap",r)},t.prototype.init=function(){this.initContainer(),this.get("graph").on("afterupdateitem",this.handleUpdateCanvas),this.get("graph").on("afteritemstatechange",this.handleUpdateCanvas),this.get("graph").on("afteradditem",this.handleUpdateCanvas),this.get("graph").on("afterremoveitem",this.handleUpdateCanvas),this.get("graph").on("afterrender",this.handleUpdateCanvas),this.get("graph").on("afterlayout",this.handleUpdateCanvas)},t.prototype.initContainer=function(){var e=this,t=e.get("graph"),n=e.get("size"),r=e.get("className"),i=e.get("container"),o=KE("<div class='"+r+"' style='width: "+n[0]+"px; height: "+n[1]+"px; overflow: hidden'></div>");(0,b.isString)(i)&&(i=document.getElementById(i)),i?i.appendChild(o):t.get("container").appendChild(o),e.set("container",o);var a,s=KE('<div class="g6-minimap-container" style="position: relative;"></div>');o.appendChild(s),s.addEventListener("dragenter",(function(e){e.preventDefault()})),s.addEventListener("dragover",(function(e){e.preventDefault()})),a="svg"===t.get("renderer")?new mh({container:s,width:n[0],height:n[1]}):new cd({container:s,width:n[0],height:n[1]}),e.set("canvas",a),e.updateCanvas()},t.prototype.updateCanvas=function(){if(!this.destroyed&&this.get("refresh")){var e=this.get("graph");if(!e.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var t=this.get("size"),n=this.get("canvas"),r=this.get("type"),i=this.get("padding");if(!n.destroyed){switch(r){case"default":this.updateGraphShapes();break;case"keyShape":this.updateKeyShapes();break;case"delegate":this.updateDelegateShapes()}var o=n.get("children")[0];if(o){o.resetMatrix();var a=o.getCanvasBBox(),s=e.get("canvas").getCanvasBBox(),l=e.getZoom()||1,u=s.width/l,c=s.height/l;Number.isFinite(a.width)&&(u=yS(a.width,u),c=yS(a.height,c)),u+=2*i,c+=2*i;var d=Math.min(t[0]/u,t[1]/c),h=[1,0,0,0,1,0,0,0,1],f=0,p=0;Number.isFinite(a.minX)&&(f=-a.minX),Number.isFinite(a.minY)&&(p=-a.minY);var m=(t[0]-(u-2*i)*d)/2,g=(t[1]-(c-2*i)*d)/2;h=bS(h,[["t",f,p],["s",d,d],["t",m,g]]),o.setMatrix(h),this.set("ratio",d),this.set("totaldx",m+f*d),this.set("totaldy",g+p*d),this.set("dx",m),this.set("dy",g),this.updateViewport()}}}}},t.prototype.getCanvas=function(){return this.get("canvas")},t.prototype.getViewport=function(){return this.get("viewport")},t.prototype.getContainer=function(){return this.get("container")},t.prototype.destroy=function(){this.get("canvas").destroy();var e=this.get("container");e.parentNode.removeChild(e)},t}(oS);const wS=_S;var xS=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function MS(e,t,n){var r=e.x-t.x,i=e.y-t.y;return!n||Math.abs(r)>n||Math.abs(i)>n?Math.sqrt(r*r+i*i):n}function ES(e,t){var n=(t.source.y-t.target.y)/(t.source.x-t.target.x),r=(n*n*t.source.x+n*(e.y-t.source.y)+e.x)/(n*n+1);return{x:r,y:n*(r-t.source.x)+t.source.y}}var SS=function(e){function t(t){return e.call(this,t)||this}return xS(t,e),t.prototype.getDefaultCfgs=function(){return{edgeBundles:[],edgePoints:[],K:.1,lambda:.1,divisions:1,divRate:2,cycles:6,iterations:90,iterRate:.6666667,bundleThreshold:.6,eps:1e-6,onLayoutEnd:function(){},onTick:function(){}}},t.prototype.init=function(){var e=this.get("graph"),t=this.get("onTick");this.set("tick",(function(){t&&t(),e.refreshPositions()}))},t.prototype.bundling=function(e){var t=this;if(t.set("data",e),!t.isTicking()){var n=e.edges||[],r=e.nodes||[],i={},o=!1;if(r.forEach((function(e){null!==e.x&&null!==!e.y&&void 0!==e.x&&void 0!==!e.y||(o=!0),i[e.id]=e})),o)throw new Error("please layout the graph or assign x and y for nodes first");t.set("nodeIdMap",i);var a=t.get("divisions"),s=t.get("divRate"),l=t.divideEdges(a);t.set("edgePoints",l);var u=t.getEdgeBundles();t.set("edgeBundles",u);for(var c=t.get("cycles"),d=t.get("iterations"),h=t.get("iterRate"),f=t.get("lambda"),p=0;p<c;p++){for(var m=function(e){var r=[];n.forEach((function(e,n){if(e.source!==e.target){var o=i[e.source],s=i[e.target];r[n]=t.getEdgeForces({source:o,target:s},n,a,f);for(var u=0;u<a+1;u++)l[n][u].x+=r[n][u].x,l[n][u].y+=r[n][u].y}}))},g=0;g<d;g++)m();f/=2,a*=s,d*=h,l=t.divideEdges(a),t.set("edgePoints",l)}n.forEach((function(e,t){e.source!==e.target&&(e.type="polyline",e.controlPoints=l[t].slice(1,l[t].length-1))})),t.get("graph").refresh()}},t.prototype.updateBundling=function(e){var t=this,n=e.data;if(n&&t.set("data",n),t.get("ticking")&&t.set("ticking",!1),Object.keys(e).forEach((function(n){t.set(n,e[n])})),e.onTick){var r=this.get("graph");t.set("tick",(function(){e.onTick(),r.refresh()}))}t.bundling(n)},t.prototype.divideEdges=function(e){var t=this,n=t.get("data").edges,r=t.get("nodeIdMap"),i=t.get("edgePoints");return i&&void 0!==i||(i=[]),n.forEach((function(n,o){i[o]&&void 0!==i[o]||(i[o]=[]);var a=r[n.source],s=r[n.target];if(1===e)i[o].push({x:a.x,y:a.y}),i[o].push({x:.5*(a.x+s.x),y:.5*(a.y+s.y)}),i[o].push({x:s.x,y:s.y});else{var l=(i[o]&&i[o]!==[]?t.getEdgeLength(i[o]):MS({x:a.x,y:a.y},{x:s.x,y:s.y}))/(e+1),u=l,c=[{x:a.x,y:a.y}];i[o].forEach((function(e,t){if(0!==t){for(var n=MS(e,i[o][t-1]);n>u;){var r=u/n,a={x:i[o][t-1].x,y:i[o][t-1].y};a.x+=r*(e.x-i[o][t-1].x),a.y+=r*(e.y-i[o][t-1].y),c.push(a),n-=u,u=l}u-=n}})),c.push({x:s.x,y:s.y}),i[o]=c}})),i},t.prototype.getEdgeLength=function(e){var t=0;return e.forEach((function(n,r){0!==r&&(t+=MS(n,e[r-1]))})),t},t.prototype.getEdgeBundles=function(){var e=this,t=e.get("data").edges||[],n=e.get("bundleThreshold"),r=e.get("nodeIdMap"),i=e.get("edgeBundles");return i||(i=[]),t.forEach((function(e,t){i[t]&&void 0!==i[t]||(i[t]=[])})),t.forEach((function(o,a){var s=r[o.source],l=r[o.target];t.forEach((function(t,o){if(!(o<=a)){var u=r[t.source],c=r[t.target];e.getBundleScore({source:s,target:l},{source:u,target:c})>=n&&(i[a].push(o),i[o].push(a))}}))})),i},t.prototype.getBundleScore=function(e,t){var n=this;return e.vx=e.target.x-e.source.x,e.vy=e.target.y-e.source.y,t.vx=t.target.x-t.source.x,t.vy=t.target.y-t.source.y,e.length=MS({x:e.source.x,y:e.source.y},{x:e.target.x,y:e.target.y}),t.length=MS({x:t.source.x,y:t.source.y},{x:t.target.x,y:t.target.y}),n.getAngleScore(e,t)*n.getScaleScore(e,t)*n.getPositionScore(e,t)*n.getVisibilityScore(e,t)},t.prototype.getAngleScore=function(e,t){var n=function(e,t){return e.x*t.x+e.y*t.y}({x:e.vx,y:e.vy},{x:t.vx,y:t.vy});return n/(e.length*t.length)},t.prototype.getScaleScore=function(e,t){var n=(e.length+t.length)/2;return 2/(n/Math.min(e.length,t.length)+Math.max(e.length,t.length)/n)},t.prototype.getPositionScore=function(e,t){var n=(e.length+t.length)/2;return n/(n+MS({x:(e.source.x+e.target.x)/2,y:(e.source.y+e.target.y)/2},{x:(t.source.x+t.target.x)/2,y:(t.source.y+t.target.y)/2}))},t.prototype.getVisibilityScore=function(e,t){var n=this.getEdgeVisibility(e,t),r=this.getEdgeVisibility(t,e);return n<r?n:r},t.prototype.getEdgeVisibility=function(e,t){var n=ES(t.source,e),r=ES(t.target,e),i={x:(n.x+r.x)/2,y:(n.y+r.y)/2},o={x:(e.source.x+e.target.x)/2,y:(e.source.y+e.target.y)/2};return Math.max(0,1-2*MS(i,o)/MS(n,r))},t.prototype.getEdgeForces=function(e,t,n,r){for(var i=this,o=i.get("edgePoints"),a=i.get("K")/(MS(e.source,e.target)*(n+1)),s=[{x:0,y:0}],l=1;l<n;l++){var u={x:0,y:0},c=i.getSpringForce({pre:o[t][l-1],cur:o[t][l],next:o[t][l+1]},a),d=i.getElectrostaticForce(l,t);u.x=r*(c.x+d.x),u.y=r*(c.y+d.y),s.push(u)}return s.push({x:0,y:0}),s},t.prototype.getSpringForce=function(e,t){var n=e.pre.x+e.next.x-2*e.cur.x,r=e.pre.y+e.next.y-2*e.cur.y;return{x:n*=t,y:r*=t}},t.prototype.getElectrostaticForce=function(e,t){var n=this,r=n.get("eps"),i=n.get("edgeBundles"),o=n.get("edgePoints"),a=i[t],s={x:0,y:0};return a.forEach((function(n){var i={x:o[n][e].x-o[t][e].x,y:o[n][e].y-o[t][e].y};if(Math.abs(i.x)>r||Math.abs(i.y)>r){var a=1/MS(o[n][e],o[t][e]);s.x+=i.x*a,s.y+=i.y*a}})),s},t.prototype.isTicking=function(){return this.get("ticking")},t.prototype.getSimulation=function(){return this.get("forceSimulation")},t.prototype.destroy=function(){this.get("ticking")&&this.getSimulation().stop(),e.prototype.destroy.call(this)},t}(oS);const kS=SS;var TS=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),LS=function(){return LS=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},LS.apply(this,arguments)},CS={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:.1,fill:"#ccc"},DS=function(e){function t(t){return e.call(this,t)||this}return TS(t,e),t.prototype.getDefaultCfgs=function(){return{trigger:"mousemove",d:1.5,r:300,delegateStyle:(0,b.clone)(CS),showLabel:!1,maxD:5,minD:0,scaleRBy:"unset",scaleDBy:"unset",showDPercent:!0}},t.prototype.getEvents=function(){var e;switch(this.get("trigger")){case"click":e={click:"magnify"};break;case"drag":e={click:"createDelegate"};break;default:e={mousemove:"magnify"}}return e},t.prototype.init=function(){var e=this,t=e.get("r");e.set("cachedMagnifiedModels",[]),e.set("cachedOriginPositions",{}),e.set("r2",t*t);var n=e.get("d");e.set("molecularParam",(n+1)*t)},t.prototype.createDelegate=function(e){var t=this,n=this,r=n.get("delegate");r&&!r.destroyed||(n.magnify(e),(r=n.get("delegate")).on("dragstart",(function(e){n.set("delegateCenterDiff",{x:r.attr("x")-e.x,y:r.attr("y")-e.y})})),r.on("drag",(function(e){n.magnify(e)})),"wheel"===this.get("scaleDBy")&&r.on("mousewheel",(function(e){t.scaleDByWheel(e)})),"wheel"===this.get("scaleRBy")&&r.on("mousewheel",(function(e){n.scaleRByWheel(e)})))},t.prototype.scaleRByWheel=function(e){var t=this;if(e&&e.originalEvent){e.preventDefault&&e.preventDefault();var n,r=t.get("graph"),i=t.get("delegate"),o=(i?{x:i.attr("x"),y:i.attr("y")}:void 0)||r.getPointByClient(e.clientX,e.clientY);n=e.originalEvent.wheelDelta<0?.95:1/.95;var a=t.get("maxR"),s=t.get("minR"),l=t.get("r");(l>(a||r.get("height"))&&n>1||l<(s||.05*r.get("height"))&&n<1)&&(n=1),l*=n,t.set("r",l),t.set("r2",l*l);var u=t.get("d");t.set("molecularParam",(u+1)*l),t.set("delegateCenterDiff",void 0),t.magnify(e,o)}},t.prototype.scaleRByDrag=function(e){var t=this;if(e){var n,r=t.get("dragPrePos"),i=t.get("graph"),o=i.getPointByClient(e.clientX,e.clientY);n=e.x-r.x<0?.95:1/.95;var a=t.get("maxR"),s=t.get("minR"),l=t.get("r");(l>(a||i.get("height"))&&n>1||l<(s||.05*i.get("height"))&&n<1)&&(n=1),l*=n,t.set("r",l),t.set("r2",l*l);var u=t.get("d");t.set("molecularParam",(u+1)*l),t.magnify(e,o),t.set("dragPrePos",{x:e.x,y:e.y})}},t.prototype.scaleDByWheel=function(e){var t=this;if(e||e.originalEvent){e.preventDefault&&e.preventDefault();var n=0;n=e.originalEvent.wheelDelta<0?-.1:.1;var r=t.get("d")+n,i=t.get("maxD"),o=t.get("minD");if(r<i&&r>o){t.set("d",r);var a=t.get("r");t.set("molecularParam",(r+1)*a);var s=t.get("delegate"),l=s?{x:s.attr("x"),y:s.attr("y")}:void 0;t.set("delegateCenterDiff",void 0),t.magnify(e,l)}}},t.prototype.scaleDByDrag=function(e){var t=this,n=t.get("dragPrePos"),r=e.x-n.x>0?.1:-.1,i=t.get("d")+r,o=t.get("maxD"),a=t.get("minD");if(i<o&&i>a){t.set("d",i);var s=t.get("r");t.set("molecularParam",(i+1)*s),t.magnify(e)}t.set("dragPrePos",{x:e.x,y:e.y})},t.prototype.magnify=function(e,t){var n=this;n.restoreCache();var r=n.get("graph"),i=n.get("cachedMagnifiedModels"),o=n.get("cachedOriginPositions"),a=n.get("showLabel"),s=n.get("r"),l=n.get("r2"),u=n.get("d"),c=n.get("molecularParam"),d=r.getNodes(),h=d.length,f=t?{x:t.x,y:t.y}:{x:e.x,y:e.y};!n.get("dragging")||"mousemove"!==n.get("trigger")&&"click"!==n.get("trigger")||(f=n.get("cacheCenter"));var p=n.get("delegateCenterDiff");p&&(f.x+=p.x,f.y+=p.y),n.updateDelegate(f,s);for(var m=0;m<h;m++){var g=d[m].getModel(),v=g.x,y=g.y;if(!isNaN(v)&&!isNaN(y)){var b=(v-f.x)*(v-f.x)+(y-f.y)*(y-f.y);if(!isNaN(b)&&b<l&&0!==b){var _=Math.sqrt(b),w=c*_/(u*_+s),x=(v-f.x)/_,M=(y-f.y)/_;if(g.x=x*w+f.x,g.y=M*w+f.y,o[g.id]||(o[g.id]={x:v,y,texts:[]}),i.push(g),a&&2*_<s)for(var E=d[m].getContainer().getChildren(),S=E.length,k=0;k<S;k++){var T=E[k];"text"===T.get("type")&&(o[g.id].texts.push({visible:T.get("visible"),shape:T}),T.set("visible",!0))}}}}r.refreshPositions()},t.prototype.restoreCache=function(){for(var e=this,t=e.get("cachedMagnifiedModels"),n=e.get("cachedOriginPositions"),r=t.length,i=0;i<r;i++){var o=t[i],a=n[o.id];o.x=a.x,o.y=a.y;for(var s=a.texts.length,l=0;l<s;l++){var u=a.texts[l];u.shape.set("visible",u.visible)}}e.set("cachedMagnifiedModels",[]),e.set("cachedOriginPositions",{})},t.prototype.updateParams=function(e){var t=this,n=e.r,r=e.d,i=e.trigger,o=e.minD,a=e.maxD,s=e.minR,l=e.maxR,u=e.scaleDBy,c=e.scaleRBy;isNaN(e.r)||(t.set("r",n),t.set("r2",n*n)),isNaN(r)||t.set("d",r),isNaN(a)||t.set("maxD",a),isNaN(o)||t.set("minD",o),isNaN(l)||t.set("maxR",l),isNaN(s)||t.set("minR",s);var d,h=t.get("d"),f=t.get("r");(t.set("molecularParam",(h+1)*f),"mousemove"!==i&&"click"!==i&&"drag"!==i||t.set("trigger",i),"drag"===u||"wheel"===u||"unset"===u)&&(t.set("scaleDBy",u),t.get("delegate").remove(),t.get("delegate").destroy(),(d=t.get("dPercentText"))&&(d.remove(),d.destroy()));"drag"!==c&&"wheel"!==c&&"unset"!==c||(t.set("scaleRBy",c),t.get("delegate").remove(),t.get("delegate").destroy(),(d=t.get("dPercentText"))&&(d.remove(),d.destroy()))},t.prototype.updateDelegate=function(e,t){var n=this,r=this,i=r.get("graph"),o=r.get("delegate");if(!o||o.destroyed){var a=i.get("group"),s=r.get("delegateStyle")||CS;o=a.addShape("circle",{attrs:LS({r:t/1.5,x:e.x,y:e.y},s),name:"lens-shape",draggable:!0}),"drag"!==this.get("trigger")&&("wheel"===this.get("scaleRBy")?o.on("mousewheel",(function(e){r.scaleRByWheel(e)})):"drag"===this.get("scaleRBy")&&(o.on("dragstart",(function(e){r.set("dragging",!0),r.set("cacheCenter",{x:e.x,y:e.y}),r.set("dragPrePos",{x:e.x,y:e.y})})),o.on("drag",(function(e){r.scaleRByDrag(e)})),o.on("dragend",(function(e){r.set("dragging",!1)}))),"wheel"===this.get("scaleDBy")?o.on("mousewheel",(function(e){n.scaleDByWheel(e)})):"drag"===this.get("scaleDBy")&&(o.on("dragstart",(function(e){r.set("dragging",!0),r.set("cacheCenter",{x:e.x,y:e.y}),r.set("dragPrePos",{x:e.x,y:e.y})})),o.on("drag",(function(e){n.scaleDByDrag(e)})),o.on("dragend",(function(e){r.set("dragging",!1)}))))}else o.attr({x:e.x,y:e.y,r:t/1.5});if(r.get("showDPercent")){var l=Math.round((r.get("d")-r.get("minD"))/(r.get("maxD")-r.get("minD"))*100),u=r.get("dPercentText"),c=e.y+t/1.5+16;if(!u||u.destroyed)u=i.get("group").addShape("text",{attrs:{text:l+"%",x:e.x,y:c,fill:"#aaa",stroke:"#fff",lineWidth:1,fontSize:12}}),r.set("dPercentText",u);else u.attr({text:l+"%",x:e.x,y:c})}r.set("delegate",o)},t.prototype.clear=function(){var e=this.get("graph");this.restoreCache(),e.refreshPositions();var t=this.get("delegate");t&&!t.destroyed&&(t.remove(),t.destroy());var n=this.get("dPercentText");n&&!n.destroyed&&(n.remove(),n.destroy())},t.prototype.destroy=function(){this.clear()},t}(oS);const AS=DS;var PS=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();"undefined"!=typeof document&&hS()("\n  .g6-component-toolbar {\n    position: absolute;\n    list-style-type: none;\n    padding: 6px;\n    left: 0px;\n    top: 0px;\n    background-color: rgba(255, 255, 255, 0.9);\n    border: 1px solid #e2e2e2;\n    border-radius: 4px;\n    font-size: 12px;\n    color: #545454;\n    margin: 0;\n  }\n  .g6-component-toolbar li {\n    float: left;\n    text-align: center;\n    width: 35px;\n    height: 24px;\n    cursor: pointer;\n\t\tlist-style-type:none;\n    list-style: none;\n    margin-left: 0px;\n  }\n  .g6-component-toolbar li .icon {\n    opacity: 0.7;\n  }\n  .g6-component-toolbar li .icon:hover {\n    opacity: 1;\n  }\n");var OS=function(e){function t(t){return e.call(this,t)||this}return PS(t,e),t.prototype.getDefaultCfgs=function(){return{handleClick:void 0,getContent:function(e){return'\n          <ul class=\'g6-component-toolbar\'>\n            <li code=\'redo\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">\n                <path d="M256 682.666667c0-102.741333 66.730667-213.333333 213.333333-213.333334 107.008 0 190.762667 56.576 230.570667 125.354667L611.968 682.666667H853.333333v-241.365334l-91.562666 91.562667C704.768 448.469333 601.130667 384 469.333333 384c-196.096 0-298.666667 150.229333-298.666666 298.666667h85.333333z" fill="" p-id="2041"></path>\n              </svg>\n            </li>\n            <li code=\'undo\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">\n                <path d="M170.666667 682.666667h241.365333l-87.936-87.978667C363.904 525.909333 447.658667 469.333333 554.666667 469.333333c146.602667 0 213.333333 110.592 213.333333 213.333334h85.333333c0-148.437333-102.570667-298.666667-298.666666-298.666667-131.797333 0-235.392 64.469333-292.48 148.821333L170.666667 441.301333V682.666667z" fill="" p-id="2764"></path>\n              </svg>\n            </li>\n            <li  code=\'zoomOut\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">\n                <path d="M658.432 428.736a33.216 33.216 0 0 1-33.152 33.152H525.824v99.456a33.216 33.216 0 0 1-66.304 0V461.888H360.064a33.152 33.152 0 0 1 0-66.304H459.52V296.128a33.152 33.152 0 0 1 66.304 0V395.52H625.28c18.24 0 33.152 14.848 33.152 33.152z m299.776 521.792a43.328 43.328 0 0 1-60.864-6.912l-189.248-220.992a362.368 362.368 0 0 1-215.36 70.848 364.8 364.8 0 1 1 364.8-364.736 363.072 363.072 0 0 1-86.912 235.968l192.384 224.64a43.392 43.392 0 0 1-4.8 61.184z m-465.536-223.36a298.816 298.816 0 0 0 298.432-298.432 298.816 298.816 0 0 0-298.432-298.432A298.816 298.816 0 0 0 194.24 428.8a298.816 298.816 0 0 0 298.432 298.432z"></path>\n              </svg>\n            </li>\n            <li code=\'zoomIn\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">\n                <path d="M639.936 416a32 32 0 0 1-32 32h-256a32 32 0 0 1 0-64h256a32 32 0 0 1 32 32z m289.28 503.552a41.792 41.792 0 0 1-58.752-6.656l-182.656-213.248A349.76 349.76 0 0 1 480 768 352 352 0 1 1 832 416a350.4 350.4 0 0 1-83.84 227.712l185.664 216.768a41.856 41.856 0 0 1-4.608 59.072zM479.936 704c158.784 0 288-129.216 288-288S638.72 128 479.936 128a288.32 288.32 0 0 0-288 288c0 158.784 129.216 288 288 288z" p-id="3853"></path>\n              </svg>\n            </li>\n            <li code=\'realZoom\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">\n                <path d="M384 320v384H320V320h64z m256 0v384H576V320h64zM512 576v64H448V576h64z m0-192v64H448V384h64z m355.968 576H92.032A28.16 28.16 0 0 1 64 931.968V28.032C64 12.608 76.608 0 95.168 0h610.368L896 192v739.968a28.16 28.16 0 0 1-28.032 28.032zM704 64v128h128l-128-128z m128 192h-190.464V64H128v832h704V256z"></path>\n              </svg>\n            </li>\n            <li code=\'autoZoom\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">\n                <path d="M684.288 305.28l0.128-0.64-0.128-0.64V99.712c0-19.84 15.552-35.904 34.496-35.712a35.072 35.072 0 0 1 34.56 35.776v171.008h170.944c19.648 0 35.84 15.488 35.712 34.432a35.072 35.072 0 0 1-35.84 34.496h-204.16l-0.64-0.128a32.768 32.768 0 0 1-20.864-7.552c-1.344-1.024-2.816-1.664-3.968-2.816-0.384-0.32-0.512-0.768-0.832-1.088a33.472 33.472 0 0 1-9.408-22.848zM305.28 64a35.072 35.072 0 0 0-34.56 35.776v171.008H99.776A35.072 35.072 0 0 0 64 305.216c0 18.944 15.872 34.496 35.84 34.496h204.16l0.64-0.128a32.896 32.896 0 0 0 20.864-7.552c1.344-1.024 2.816-1.664 3.904-2.816 0.384-0.32 0.512-0.768 0.768-1.088a33.024 33.024 0 0 0 9.536-22.848l-0.128-0.64 0.128-0.704V99.712A35.008 35.008 0 0 0 305.216 64z m618.944 620.288h-204.16l-0.64 0.128-0.512-0.128c-7.808 0-14.72 3.2-20.48 7.68-1.28 1.024-2.752 1.664-3.84 2.752-0.384 0.32-0.512 0.768-0.832 1.088a33.664 33.664 0 0 0-9.408 22.912l0.128 0.64-0.128 0.704v204.288c0 19.712 15.552 35.904 34.496 35.712a35.072 35.072 0 0 0 34.56-35.776V753.28h170.944c19.648 0 35.84-15.488 35.712-34.432a35.072 35.072 0 0 0-35.84-34.496z m-593.92 11.52c-0.256-0.32-0.384-0.768-0.768-1.088-1.088-1.088-2.56-1.728-3.84-2.688a33.088 33.088 0 0 0-20.48-7.68l-0.512 0.064-0.64-0.128H99.84a35.072 35.072 0 0 0-35.84 34.496 35.072 35.072 0 0 0 35.712 34.432H270.72v171.008c0 19.84 15.552 35.84 34.56 35.776a35.008 35.008 0 0 0 34.432-35.712V720l-0.128-0.64 0.128-0.704a33.344 33.344 0 0 0-9.472-22.848zM512 374.144a137.92 137.92 0 1 0 0.128 275.84A137.92 137.92 0 0 0 512 374.08z"></path>\n              </svg>\n            </li>\n          </ul>\n        '},zoomSensitivity:2}},t.prototype.init=function(){var e=this,t=this.get("graph"),n=this.get("getContent")(t),r=n;(0,b.isString)(n)&&(r=KE(n));var i=this.get("className");r.setAttribute("class",i||"g6-component-toolbar");var o=this.get("container");o||(o=this.get("graph").get("container")),(0,b.isString)(o)&&(o=document.getElementById(o)),o.appendChild(r),this.set("toolBar",r);var a=this.get("handleClick");r.addEventListener("click",(function(n){var r=function(e){if(!e)return[];if(e.composedPath)return e.composedPath();for(var t=[],n=e.target;n;){if(t.push(n),"HTML"===n.tagName)return t.push(document,window),t;n=n.parentElement}return t}(n).filter((function(e){return"LI"===e.nodeName}));if(0!==r.length){var i=r[0].getAttribute("code");i&&(a?a(i,t):e.handleDefaultOperator(i,t))}}));var s=this.get("position");s&&rS(r,{top:s.y+"px",left:s.x+"px"}),this.bindUndoRedo()},t.prototype.bindUndoRedo=function(){var e=this.get("graph"),t=document.querySelector('.g6-component-toolbar li[code="undo"]'),n=document.querySelector('.g6-component-toolbar li[code="undo"] svg'),r=document.querySelector('.g6-component-toolbar li[code="redo"]'),i=document.querySelector('.g6-component-toolbar li[code="redo"] svg');t&&n&&r&&i&&e.on("stackchange",(function(e){var o=e.undoStack,a=e.redoStack,s=o.length,l=a.length;1===s?(t.setAttribute("style","cursor: not-allowed"),n.setAttribute("style","opacity: 0.4")):(t.removeAttribute("style"),n.removeAttribute("style")),0===l?(r.setAttribute("style","cursor: not-allowed"),i.setAttribute("style","opacity: 0.4")):(r.removeAttribute("style"),i.removeAttribute("style"))}))},t.prototype.undo=function(){var e=this.get("graph"),t=e.getUndoStack();if(t&&1!==t.length){var n=t.pop();if(n){var r=n.action;e.pushStack(r,(0,b.clone)(n.data),"redo");var i=n.data.before;if("add"===r&&(i=n.data.after),!i)return;switch(r){case"visible":Object.keys(i).forEach((function(t){var n=i[t];n&&n.forEach((function(t){var n=e.findById(t.id);t.visible?e.showItem(n,!1):e.hideItem(n,!1)}))}));break;case"render":case"update":Object.keys(i).forEach((function(t){var n=i[t];n&&n.forEach((function(t){e.updateItem(t.id,t,!1)}))}));break;case"changedata":e.changeData(i,!1);break;case"delete":Object.keys(i).forEach((function(t){var n=i[t];n&&n.forEach((function(t){var n=t.itemType;delete t.itemType,e.addItem(n,t,!1)}))}));break;case"add":Object.keys(i).forEach((function(t){var n=i[t];n&&n.forEach((function(t){e.removeItem(t.id,!1)}))}));break;case"updateComboTree":Object.keys(i).forEach((function(t){var n=i[t];n&&n.forEach((function(t){e.updateComboTree(t.id,t.parentId,!1)}))}))}}}},t.prototype.redo=function(){var e=this.get("graph"),t=e.getRedoStack();if(t&&0!==t.length){var n=t.pop();if(n){var r=n.action,i=n.data.after;if(e.pushStack(r,(0,b.clone)(n.data)),"delete"===r&&(i=n.data.before),!i)return;switch(r){case"visible":Object.keys(i).forEach((function(t){var n=i[t];n&&n.forEach((function(t){var n=e.findById(t.id);t.visible?e.showItem(n,!1):e.hideItem(n,!1)}))}));break;case"render":case"update":Object.keys(i).forEach((function(t){var n=i[t];n&&n.forEach((function(t){e.updateItem(t.id,t,!1)}))}));break;case"changedata":e.changeData(i,!1);break;case"delete":i.edges&&i.edges.forEach((function(t){e.removeItem(t.id,!1)})),i.nodes&&i.nodes.forEach((function(t){e.removeItem(t.id,!1)})),i.combos&&i.combos.forEach((function(t){e.removeItem(t.id,!1)}));break;case"add":Object.keys(i).forEach((function(t){var n=i[t];n&&n.forEach((function(t){var n=t.itemType;delete t.itemType,e.addItem(n,t,!1)}))}));break;case"updateComboTree":Object.keys(i).forEach((function(t){var n=i[t];n&&n.forEach((function(t){e.updateComboTree(t.id,t.parentId,!1)}))}))}}}},t.prototype.handleDefaultOperator=function(e,t){var n=t.getZoom();switch(e){case"redo":this.redo();break;case"undo":this.undo();break;case"zoomOut":var r=1/(1-.05*this.get("zoomSensitivity"));if(r*n>(this.get("maxZoom")||t.get("maxZoom")))return;t.zoomTo(n*r);break;case"zoomIn":var i=1-.05*this.get("zoomSensitivity");if(i*n<(this.get("minZoom")||t.get("minZoom")))return;t.zoomTo(n*i);break;case"realZoom":t.zoomTo(1);break;case"autoZoom":t.fitView([20,20])}},t.prototype.destroy=function(){var e=this.get("toolBar");if(e){var t=this.get("container");t||(t=this.get("graph").get("container")),(0,b.isString)(t)&&(t=document.getElementById(t)),t.removeChild(e)}var n=this.get("handleClick");n&&e.removeEventListener("click",n)},t}(oS);const IS=OS;var RS=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();"undefined"!=typeof document&&hS()("\n  .g6-component-tooltip {\n    border: 1px solid #e2e2e2;\n    border-radius: 4px;\n    font-size: 12px;\n    color: #545454;\n    background-color: rgba(255, 255, 255, 0.9);\n    padding: 10px 8px;\n    box-shadow: rgb(174, 174, 174) 0px 0px 10px;\n  }\n  .tooltip-type {\n    padding: 0;\n    margin: 0;\n  }\n  .tooltip-id {\n    color: #531dab;\n  }\n");var NS=function(e){function t(t){return e.call(this,t)||this}return RS(t,e),t.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,getContent:function(e){return"\n          <h4 class='tooltip-type'>"+e.item.getType()+"</h4>\n          <span class='tooltip-id'>ID"+e.item.getID()+"</span>\n        "},shouldBegin:function(e){return!0},itemTypes:["node","edge","combo"],trigger:"mouseenter",fixToNode:void 0}},t.prototype.getEvents=function(){return"click"===this.get("trigger")?{"node:click":"onClick","edge:click":"onClick","combo:click":"onClick","canvas:click":"onMouseLeave",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave",drag:"onMouseLeave"}:{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove","edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove","combo:mouseenter":"onMouseEnter","combo:mouseleave":"onMouseLeave","combo:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave","node:drag":"onMouseLeave"}},t.prototype.init=function(){var e=this,t=KE("<div class="+(e.get("className")||"g6-component-tooltip")+"></div>"),n=e.get("container");n||(n=e.get("graph").get("container")),(0,b.isString)(n)&&(n=document.getElementById(n)),rS(t,{position:"absolute",visibility:"hidden",display:"none"}),n.appendChild(t),"click"!==e.get("trigger")&&(t.addEventListener("mouseenter",(function(e){rS(t,{visibility:"visible",display:"unset"})})),t.addEventListener("mouseleave",(function(t){e.hideTooltip()}))),e.set("tooltip",t)},t.prototype.onClick=function(e){var t=this.get("itemTypes");if(!e.item||!e.item.getType||-1!==t.indexOf(e.item.getType())){var n=e.item,r=this.get("graph");this.currentTarget===n?(this.currentTarget=null,this.hideTooltip(),r.emit("tooltipchange",{item:e.item,action:"hide"})):(this.currentTarget=n,this.showTooltip(e),r.emit("tooltipchange",{item:e.item,action:"show"}))}},t.prototype.onMouseEnter=function(e){var t=this.get("itemTypes");if(!e.item||!e.item.getType||-1!==t.indexOf(e.item.getType())){var n=e.item,r=this.get("graph");this.currentTarget=n,this.showTooltip(e),r.emit("tooltipchange",{item:e.item,action:"show"})}},t.prototype.onMouseMove=function(e){var t=this.get("itemTypes");e.item&&e.item.getType&&-1===t.indexOf(e.item.getType())||this.currentTarget&&e.item===this.currentTarget&&this.showTooltip(e)},t.prototype.onMouseLeave=function(){this.hideTooltip(),this.get("graph").emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null},t.prototype.showTooltip=function(e){if(e.item){var t=this.get("itemTypes");if(!e.item.getType||-1!==t.indexOf(e.item.getType())){var n=this.get("tooltip"),r=this.get("getContent")(e);(0,b.isString)(r)?n.innerHTML=r:n.innerHTML=r.outerHTML,this.updatePosition(e)}}},t.prototype.hideTooltip=function(){var e=this.get("tooltip");e&&rS(e,{visibility:"hidden",display:"none"})},t.prototype.updatePosition=function(e){var t=this.get("shouldBegin"),n=this.get("tooltip");if(t(e)){var r=this.get("graph"),i=r.get("width"),o=r.get("height"),a=this.get("offsetX")||0,s=this.get("offsetY")||0,l=r.getPointByClient(e.clientX,e.clientY),u=this.get("fixToNode"),c=e.item;if(c.getType&&"node"===c.getType()&&u&&(0,b.isArray)(u)&&u.length>=2){var d=c.getBBox();l={x:d.minX+d.width*u[0],y:d.minY+d.height*u[1]}}var h=r.getCanvasByPoint(l.x,l.y),f=h.x,p=h.y,m=r.getContainer(),g={x:f+m.offsetLeft+a,y:p+m.offsetTop+s};rS(n,{visibility:"visible",display:"unset"});var v=n.getBoundingClientRect();f+v.width+a>i&&(g.x-=v.width+a),p+v.height+s>o&&(g.y-=v.height+s),rS(n,{left:g.x+"px",top:g.y+"px"})}else rS(n,{visibility:"hidden",display:"none"})},t.prototype.hide=function(){this.onMouseLeave()},t.prototype.destroy=function(){var e=this.get("tooltip");if(e){var t=this.get("container");t||(t=this.get("graph").get("container")),(0,b.isString)(t)&&(t=document.getElementById(t)),t.removeChild(e)}},t}(oS);const YS=NS;var jS={};function FS(e,t){jS[e]=t}var BS=function(){function e(e){this.type="base",this.isCategory=!1,this.isLinear=!1,this.isContinuous=!1,this.isIdentity=!1,this.values=[],this.range=[0,1],this.ticks=[],this.__cfg__=e,this.initCfg(),this.init()}return e.prototype.translate=function(e){return e},e.prototype.change=function(e){(0,b.assign)(this.__cfg__,e),this.init()},e.prototype.clone=function(){return this.constructor(this.__cfg__)},e.prototype.getTicks=function(){var e=this;return(0,b.map)(this.ticks,(function(t,n){return(0,b.isObject)(t)?t:{text:e.getText(t,n),tickValue:t,value:e.scale(t)}}))},e.prototype.getText=function(e,t){var n=this.formatter,r=n?n(e,t):e;return(0,b.isNil)(r)||!(0,b.isFunction)(r.toString)?"":r.toString()},e.prototype.getConfig=function(e){return this.__cfg__[e]},e.prototype.init=function(){(0,b.assign)(this,this.__cfg__),this.setDomain(),(0,b.isEmpty)(this.getConfig("ticks"))&&(this.ticks=this.calculateTicks())},e.prototype.initCfg=function(){},e.prototype.setDomain=function(){},e.prototype.calculateTicks=function(){var e=this.tickMethod,t=[];if((0,b.isString)(e)){var n=jS[e];if(!n)throw new Error("There is no method to to calculate ticks!");t=n(this)}else(0,b.isFunction)(e)&&(t=e(this));return t},e.prototype.rangeMin=function(){return this.range[0]},e.prototype.rangeMax=function(){return this.range[1]},e.prototype.calcPercent=function(e,t,n){return(0,b.isNumber)(e)?(e-t)/(n-t):NaN},e.prototype.calcValue=function(e,t,n){return t+e*(n-t)},e}();const zS=BS;var HS=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="cat",t.isCategory=!0,t}return(0,y.__extends)(t,e),t.prototype.buildIndexMap=function(){if(!this.translateIndexMap){this.translateIndexMap=new Map;for(var e=0;e<this.values.length;e++)this.translateIndexMap.set(this.values[e],e)}},t.prototype.translate=function(e){this.buildIndexMap();var t=this.translateIndexMap.get(e);return void 0===t&&(t=(0,b.isNumber)(e)?e:NaN),t},t.prototype.scale=function(e){var t=this.translate(e),n=this.calcPercent(t,this.min,this.max);return this.calcValue(n,this.rangeMin(),this.rangeMax())},t.prototype.invert=function(e){var t=this.max-this.min,n=this.calcPercent(e,this.rangeMin(),this.rangeMax()),r=Math.round(t*n)+this.min;return r<this.min||r>this.max?NaN:this.values[r]},t.prototype.getText=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=t;return(0,b.isNumber)(t)&&!this.values.includes(t)&&(i=this.values[i]),e.prototype.getText.apply(this,(0,y.__spreadArray)([i],n,!1))},t.prototype.initCfg=function(){this.tickMethod="cat"},t.prototype.setDomain=function(){if((0,b.isNil)(this.getConfig("min"))&&(this.min=0),(0,b.isNil)(this.getConfig("max"))){var e=this.values.length;this.max=e>1?e-1:e}this.translateIndexMap&&(this.translateIndexMap=void 0)},t}(zS);const GS=HS;var WS=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,US="[1-9]\\d?",VS="\\d\\d",XS="[^\\s]+",qS=/\[([^]*?)\]/gm;function KS(e,t){for(var n=[],r=0,i=e.length;r<i;r++)n.push(e[r].substr(0,t));return n}var JS=function(e){return function(t,n){var r=n[e].map((function(e){return e.toLowerCase()})),i=r.indexOf(t.toLowerCase());return i>-1?i:null}};function ZS(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,i=t;r<i.length;r++){var o=i[r];for(var a in o)e[a]=o[a]}return e}var $S=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],QS=["January","February","March","April","May","June","July","August","September","October","November","December"],ek=KS(QS,3),tk={dayNamesShort:KS($S,3),dayNames:$S,monthNamesShort:ek,monthNames:QS,amPm:["am","pm"],DoFn:function(e){return e+["th","st","nd","rd"][e%10>3?0:(e-e%10!=10?1:0)*e%10]}},nk=ZS({},tk),rk=function(e){return nk=ZS(nk,e)},ik=function(e){return e.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},ok=function(e,t){for(void 0===t&&(t=2),e=String(e);e.length<t;)e="0"+e;return e},ak={D:function(e){return String(e.getDate())},DD:function(e){return ok(e.getDate())},Do:function(e,t){return t.DoFn(e.getDate())},d:function(e){return String(e.getDay())},dd:function(e){return ok(e.getDay())},ddd:function(e,t){return t.dayNamesShort[e.getDay()]},dddd:function(e,t){return t.dayNames[e.getDay()]},M:function(e){return String(e.getMonth()+1)},MM:function(e){return ok(e.getMonth()+1)},MMM:function(e,t){return t.monthNamesShort[e.getMonth()]},MMMM:function(e,t){return t.monthNames[e.getMonth()]},YY:function(e){return ok(String(e.getFullYear()),4).substr(2)},YYYY:function(e){return ok(e.getFullYear(),4)},h:function(e){return String(e.getHours()%12||12)},hh:function(e){return ok(e.getHours()%12||12)},H:function(e){return String(e.getHours())},HH:function(e){return ok(e.getHours())},m:function(e){return String(e.getMinutes())},mm:function(e){return ok(e.getMinutes())},s:function(e){return String(e.getSeconds())},ss:function(e){return ok(e.getSeconds())},S:function(e){return String(Math.round(e.getMilliseconds()/100))},SS:function(e){return ok(Math.round(e.getMilliseconds()/10),2)},SSS:function(e){return ok(e.getMilliseconds(),3)},a:function(e,t){return e.getHours()<12?t.amPm[0]:t.amPm[1]},A:function(e,t){return e.getHours()<12?t.amPm[0].toUpperCase():t.amPm[1].toUpperCase()},ZZ:function(e){var t=e.getTimezoneOffset();return(t>0?"-":"+")+ok(100*Math.floor(Math.abs(t)/60)+Math.abs(t)%60,4)},Z:function(e){var t=e.getTimezoneOffset();return(t>0?"-":"+")+ok(Math.floor(Math.abs(t)/60),2)+":"+ok(Math.abs(t)%60,2)}},sk=function(e){return+e-1},lk=[null,US],uk=[null,XS],ck=["isPm",XS,function(e,t){var n=e.toLowerCase();return n===t.amPm[0]?0:n===t.amPm[1]?1:null}],dk=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(e){var t=(e+"").match(/([+-]|\d\d)/gi);if(t){var n=60*+t[1]+parseInt(t[2],10);return"+"===t[0]?n:-n}return 0}],hk={D:["day",US],DD:["day",VS],Do:["day","[1-9]\\d?[^\\s]+",function(e){return parseInt(e,10)}],M:["month",US,sk],MM:["month",VS,sk],YY:["year",VS,function(e){var t=+(""+(new Date).getFullYear()).substr(0,2);return+(""+(+e>68?t-1:t)+e)}],h:["hour",US,void 0,"isPm"],hh:["hour",VS,void 0,"isPm"],H:["hour",US],HH:["hour",VS],m:["minute",US],mm:["minute",VS],s:["second",US],ss:["second",VS],YYYY:["year","\\d{4}"],S:["millisecond","\\d",function(e){return 100*+e}],SS:["millisecond",VS,function(e){return 10*+e}],SSS:["millisecond","\\d{3}"],d:lk,dd:lk,ddd:uk,dddd:uk,MMM:["month",XS,JS("monthNamesShort")],MMMM:["month",XS,JS("monthNames")],a:ck,A:ck,ZZ:dk,Z:dk},fk={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},pk=function(e){return ZS(fk,e)},mk=function(e,t,n){if(void 0===t&&(t=fk.default),void 0===n&&(n={}),"number"==typeof e&&(e=new Date(e)),"[object Date]"!==Object.prototype.toString.call(e)||isNaN(e.getTime()))throw new Error("Invalid Date pass to format");var r=[];t=(t=fk[t]||t).replace(qS,(function(e,t){return r.push(t),"@@@"}));var i=ZS(ZS({},nk),n);return(t=t.replace(WS,(function(t){return ak[t](e,i)}))).replace(/@@@/g,(function(){return r.shift()}))};function gk(e,t,n){if(void 0===n&&(n={}),"string"!=typeof t)throw new Error("Invalid format in fecha parse");if(t=fk[t]||t,e.length>1e3)return null;var r={year:(new Date).getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},i=[],o=[],a=t.replace(qS,(function(e,t){return o.push(ik(t)),"@@@"})),s={},l={};a=ik(a).replace(WS,(function(e){var t=hk[e],n=t[0],r=t[1],o=t[3];if(s[n])throw new Error("Invalid format. "+n+" specified twice in format");return s[n]=!0,o&&(l[o]=!0),i.push(t),"("+r+")"})),Object.keys(l).forEach((function(e){if(!s[e])throw new Error("Invalid format. "+e+" is required in specified format")})),a=a.replace(/@@@/g,(function(){return o.shift()}));var u=e.match(new RegExp(a,"i"));if(!u)return null;for(var c=ZS(ZS({},nk),n),d=1;d<u.length;d++){var h=i[d-1],f=h[0],p=h[2],m=p?p(u[d],c):+u[d];if(null==m)return null;r[f]=m}1===r.isPm&&null!=r.hour&&12!=+r.hour?r.hour=+r.hour+12:0===r.isPm&&12==+r.hour&&(r.hour=0);for(var g=new Date(r.year,r.month,r.day,r.hour,r.minute,r.second,r.millisecond),v=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],y=(d=0,v.length);d<y;d++)if(s[v[d][0]]&&r[v[d][0]]!==g[v[d][1]]())return null;return null==r.timezoneOffset?g:new Date(Date.UTC(r.year,r.month,r.day,r.hour,r.minute-r.timezoneOffset,r.second,r.millisecond))}const vk={format:mk,parse:gk,defaultI18n:tk,setGlobalDateI18n:rk,setGlobalDateMasks:pk};function yk(e,t){return(v.format||vk.format)(e,t)}function bk(e){return(0,b.isString)(e)&&(e=e.indexOf("T")>0?new Date(e).getTime():new Date(e.replace(/-/gi,"/")).getTime()),(0,b.isDate)(e)&&(e=e.getTime()),e}var _k=1e3,wk=6e4,xk=36e5,Mk=24*xk,Ek=31*Mk,Sk=365*Mk,kk=[["HH:mm:ss",_k],["HH:mm:ss",1e4],["HH:mm:ss",3e4],["HH:mm",wk],["HH:mm",6e5],["HH:mm",18e5],["HH",xk],["HH",6*xk],["HH",12*xk],["YYYY-MM-DD",Mk],["YYYY-MM-DD",4*Mk],["YYYY-WW",7*Mk],["YYYY-MM",Ek],["YYYY-MM",4*Ek],["YYYY-MM",6*Ek],["YYYY",380*Mk]];function Tk(e,t,n){var r,i=(r=function(e){return e[1]},function(e,t,n,i){for(var o=(0,b.isNil)(n)?0:n,a=(0,b.isNil)(i)?e.length:i;o<a;){var s=o+a>>>1;r(e[s])>t?a=s:o=s+1}return o})(kk,(t-e)/n)-1,o=kk[i];return i<0?o=kk[0]:i>=kk.length&&(o=(0,b.last)(kk)),o}var Lk=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="timeCat",t}return(0,y.__extends)(t,e),t.prototype.translate=function(e){e=bk(e);var t=this.values.indexOf(e);return-1===t&&(t=(0,b.isNumber)(e)&&e<this.values.length?e:NaN),t},t.prototype.getText=function(e,t){var n=this.translate(e);if(n>-1){var r=this.values[n],i=this.formatter;return r=i?i(r,t):yk(r,this.mask)}return e},t.prototype.initCfg=function(){this.tickMethod="time-cat",this.mask="YYYY-MM-DD",this.tickCount=7},t.prototype.setDomain=function(){var t=this.values;(0,b.each)(t,(function(e,n){t[n]=bk(e)})),t.sort((function(e,t){return e-t})),e.prototype.setDomain.call(this)},t}(GS);const Ck=Lk;var Dk=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isContinuous=!0,t}return(0,y.__extends)(t,e),t.prototype.scale=function(e){if((0,b.isNil)(e))return NaN;var t=this.rangeMin(),n=this.rangeMax();return this.max===this.min?t:t+this.getScalePercent(e)*(n-t)},t.prototype.init=function(){e.prototype.init.call(this);var t=this.ticks,n=(0,b.head)(t),r=(0,b.last)(t);n<this.min&&(this.min=n),r>this.max&&(this.max=r),(0,b.isNil)(this.minLimit)||(this.min=n),(0,b.isNil)(this.maxLimit)||(this.max=r)},t.prototype.setDomain=function(){var e=(0,b.getRange)(this.values),t=e.min,n=e.max;(0,b.isNil)(this.min)&&(this.min=t),(0,b.isNil)(this.max)&&(this.max=n),this.min>this.max&&(this.min=t,this.max=n)},t.prototype.calculateTicks=function(){var t=this,n=e.prototype.calculateTicks.call(this);return this.nice||(n=(0,b.filter)(n,(function(e){return e>=t.min&&e<=t.max}))),n},t.prototype.getScalePercent=function(e){var t=this.max,n=this.min;return(e-n)/(t-n)},t.prototype.getInvertPercent=function(e){return(e-this.rangeMin())/(this.rangeMax()-this.rangeMin())},t}(zS);const Ak=Dk;var Pk=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="linear",t.isLinear=!0,t}return(0,y.__extends)(t,e),t.prototype.invert=function(e){var t=this.getInvertPercent(e);return this.min+t*(this.max-this.min)},t.prototype.initCfg=function(){this.tickMethod="wilkinson-extended",this.nice=!1},t}(Ak);const Ok=Pk;function Ik(e,t){var n=Math.E;return t>=0?Math.pow(n,Math.log(t)/e):-1*Math.pow(n,Math.log(-t)/e)}function Rk(e,t){return 1===e?1:Math.log(t)/Math.log(e)}function Nk(e,t,n){(0,b.isNil)(n)&&(n=Math.max.apply(null,e));var r=n;return(0,b.each)(e,(function(e){e>0&&e<r&&(r=e)})),r===n&&(r=n/t),r>1&&(r=1),r}var Yk=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="log",t}return(0,y.__extends)(t,e),t.prototype.invert=function(e){var t,n=this.base,r=Rk(n,this.max),i=this.rangeMin(),o=this.rangeMax()-i,a=this.positiveMin;if(a){if(0===e)return 0;var s=1/(r-(t=Rk(n,a/n)))*o;if(e<s)return e/s*a}else t=Rk(n,this.min);var l=(e-i)/o*(r-t)+t;return Math.pow(n,l)},t.prototype.initCfg=function(){this.tickMethod="log",this.base=10,this.tickCount=6,this.nice=!0},t.prototype.setDomain=function(){e.prototype.setDomain.call(this);var t=this.min;if(t<0)throw new Error("When you use log scale, the minimum value must be greater than zero!");0===t&&(this.positiveMin=Nk(this.values,this.base,this.max))},t.prototype.getScalePercent=function(e){var t=this.max,n=this.min;if(t===n)return 0;if(e<=0)return 0;var r=this.base,i=this.positiveMin;return i&&(n=1*i/r),e<i?e/i/(Rk(r,t)-Rk(r,n)):(Rk(r,e)-Rk(r,n))/(Rk(r,t)-Rk(r,n))},t}(Ak);const jk=Yk;var Fk=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="pow",t}return(0,y.__extends)(t,e),t.prototype.invert=function(e){var t=this.getInvertPercent(e),n=this.exponent,r=Ik(n,this.max),i=Ik(n,this.min),o=t*(r-i)+i,a=o>=0?1:-1;return Math.pow(o,n)*a},t.prototype.initCfg=function(){this.tickMethod="pow",this.exponent=2,this.tickCount=5,this.nice=!0},t.prototype.getScalePercent=function(e){var t=this.max,n=this.min;if(t===n)return 0;var r=this.exponent;return(Ik(r,e)-Ik(r,n))/(Ik(r,t)-Ik(r,n))},t}(Ak);const Bk=Fk;var zk=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="time",t}return(0,y.__extends)(t,e),t.prototype.getText=function(e,t){var n=this.translate(e),r=this.formatter;return r?r(n,t):yk(n,this.mask)},t.prototype.scale=function(t){var n=t;return((0,b.isString)(n)||(0,b.isDate)(n))&&(n=this.translate(n)),e.prototype.scale.call(this,n)},t.prototype.translate=function(e){return bk(e)},t.prototype.initCfg=function(){this.tickMethod="time-pretty",this.mask="YYYY-MM-DD",this.tickCount=7,this.nice=!1},t.prototype.setDomain=function(){var e=this.values,t=this.getConfig("min"),n=this.getConfig("max");if((0,b.isNil)(t)&&(0,b.isNumber)(t)||(this.min=this.translate(this.min)),(0,b.isNil)(n)&&(0,b.isNumber)(n)||(this.max=this.translate(this.max)),e&&e.length){var r=[],i=1/0,o=i,a=0;(0,b.each)(e,(function(e){var t=bk(e);if(isNaN(t))throw new TypeError("Invalid Time: "+e+" in time scale!");i>t?(o=i,i=t):o>t&&(o=t),a<t&&(a=t),r.push(t)})),e.length>1&&(this.minTickInterval=o-i),(0,b.isNil)(t)&&(this.min=i),(0,b.isNil)(n)&&(this.max=a)}},t}(Ok);const Hk=zk;var Gk=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="quantize",t}return(0,y.__extends)(t,e),t.prototype.invert=function(e){var t=this.ticks,n=t.length,r=this.getInvertPercent(e),i=Math.floor(r*(n-1));if(i>=n-1)return(0,b.last)(t);if(i<0)return(0,b.head)(t);var o=t[i],a=i/(n-1);return o+(r-a)/((i+1)/(n-1)-a)*(t[i+1]-o)},t.prototype.initCfg=function(){this.tickMethod="r-pretty",this.tickCount=5,this.nice=!0},t.prototype.calculateTicks=function(){var t=e.prototype.calculateTicks.call(this);return this.nice||((0,b.last)(t)!==this.max&&t.push(this.max),(0,b.head)(t)!==this.min&&t.unshift(this.min)),t},t.prototype.getScalePercent=function(e){var t=this.ticks;if(e<(0,b.head)(t))return 0;if(e>(0,b.last)(t))return 1;var n=0;return(0,b.each)(t,(function(t,r){if(!(e>=t))return!1;n=r})),n/(t.length-1)},t}(Ak);const Wk=Gk;const Uk=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="quantile",t}return(0,y.__extends)(t,e),t.prototype.initCfg=function(){this.tickMethod="quantile",this.tickCount=5,this.nice=!0},t}(Wk);var Vk={};function Xk(e,t){if(function(e){return Vk[e]}(e))throw new Error("type '"+e+"' existed.");Vk[e]=t}var qk=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="identity",t.isIdentity=!0,t}return(0,y.__extends)(t,e),t.prototype.calculateTicks=function(){return this.values},t.prototype.scale=function(e){return this.values[0]!==e&&(0,b.isNumber)(e)?e:this.range[0]},t.prototype.invert=function(e){var t=this.range;return e<t[0]||e>t[1]?NaN:this.values[0]},t}(zS);const Kk=qk;function Jk(e){return Math.abs(e)<1e-15?e:parseFloat(e.toFixed(15))}var Zk=[1,5,2,2.5,4,3],$k=100*Number.EPSILON;function Qk(e,t,n,r,i,o){var a=(0,b.size)(t),s=(0,b.indexOf)(t,e),l=0,u=function(e,t){return(e%t+t)%t}(r,o);return(u<$k||o-u<$k)&&r<=0&&i>=0&&(l=1),1-s/(a-1)-n+l}function eT(e,t,n){var r=(0,b.size)(t);return 1-(0,b.indexOf)(t,e)/(r-1)-n+1}function tT(e,t,n,r,i,o){var a=(e-1)/(o-i),s=(t-1)/(Math.max(o,r)-Math.min(n,i));return 2-Math.max(a/s,s/a)}function nT(e,t){return e>=t?2-(e-1)/(t-1):1}function rT(e,t,n,r){var i=t-e;return 1-.5*(Math.pow(t-r,2)+Math.pow(e-n,2))/Math.pow(.1*i,2)}function iT(e,t,n){var r=t-e;if(n>r){var i=(n-r)/2;return 1-Math.pow(i,2)/Math.pow(.1*r,2)}return 1}function oT(e,t,n,r,i,o){void 0===n&&(n=5),void 0===r&&(r=!0),void 0===i&&(i=Zk),void 0===o&&(o=[.25,.2,.5,.05]);var a=n<0?0:Math.round(n);if(Number.isNaN(e)||Number.isNaN(t)||"number"!=typeof e||"number"!=typeof t||!a)return{min:0,max:0,ticks:[]};if(t-e<1e-15||1===a)return{min:e,max:t,ticks:[e]};for(var s={score:-2,lmin:0,lmax:0,lstep:0},l=1;l<1/0;){for(var u=0;u<i.length;u+=1){var c=i[u],d=eT(c,i,l);if(o[0]*d+o[1]+o[2]+o[3]<s.score){l=1/0;break}for(var h=2;h<1/0;){var f=nT(h,a);if(o[0]*d+o[1]+o[2]*f+o[3]<s.score)break;for(var p=(t-e)/(h+1)/l/c,m=Math.ceil(Math.log10(p));m<1/0;){var g=l*c*Math.pow(10,m),v=iT(e,t,g*(h-1));if(o[0]*d+o[1]*v+o[2]*f+o[3]<s.score)break;var y=Math.floor(t/g)*l-(h-1)*l,_=Math.ceil(e/g)*l;if(y<=_)for(var w=_-y,x=0;x<=w;x+=1){var M=(y+x)*(g/l),E=M+g*(h-1),S=g,k=Qk(c,i,l,M,E,S),T=rT(e,t,M,E),L=tT(h,a,e,t,M,E),C=o[0]*k+o[1]*T+o[2]*L+1*o[3];C>s.score&&(!r||M<=e&&E>=t)&&(s.lmin=M,s.lmax=E,s.lstep=S,s.score=C)}m+=1}h+=1}}l+=1}var D=Jk(s.lmax),A=Jk(s.lmin),P=Jk(s.lstep),O=Math.floor(function(e){return Math.round(1e12*e)/1e12}((D-A)/P))+1,I=new Array(O);I[0]=Jk(A);for(u=1;u<O;u++)I[u]=Jk(I[u-1]+P);return{min:Math.min(e,(0,b.head)(I)),max:Math.max(t,(0,b.last)(I)),ticks:I}}function aT(e){var t=e.values,n=e.tickInterval,r=e.tickCount,i=t;if((0,b.isNumber)(n))return(0,b.filter)(i,(function(e,t){return t%n==0}));var o=e.min,a=e.max;if((0,b.isNil)(o)&&(o=0),(0,b.isNil)(a)&&(a=t.length-1),(0,b.isNumber)(r)&&r<a-o){var s=oT(o,a,r,!1,[1,2,5,3,4,7,6,8,9]).ticks;return(0,b.filter)(s,(function(e){return e>=o&&e<=a})).map((function(e){return t[e]}))}return t.slice(o,a+1)}var sT=Math.sqrt(50),lT=Math.sqrt(10),uT=Math.sqrt(2),cT=function(){function e(){this._domain=[0,1]}return e.prototype.domain=function(e){return e?(this._domain=Array.from(e,Number),this):this._domain.slice()},e.prototype.nice=function(e){var t,n;void 0===e&&(e=5);var r,i=this._domain.slice(),o=0,a=this._domain.length-1,s=this._domain[o],l=this._domain[a];return l<s&&(s=(t=[l,s])[0],l=t[1],o=(n=[a,o])[0],a=n[1]),(r=dT(s,l,e))>0?r=dT(s=Math.floor(s/r)*r,l=Math.ceil(l/r)*r,e):r<0&&(r=dT(s=Math.ceil(s*r)/r,l=Math.floor(l*r)/r,e)),r>0?(i[o]=Math.floor(s/r)*r,i[a]=Math.ceil(l/r)*r,this.domain(i)):r<0&&(i[o]=Math.ceil(s*r)/r,i[a]=Math.floor(l*r)/r,this.domain(i)),this},e.prototype.ticks=function(e){return void 0===e&&(e=5),function(e,t,n){var r,i,o,a,s=-1;if(n=+n,(e=+e)===(t=+t)&&n>0)return[e];(r=t<e)&&(i=e,e=t,t=i);if(0===(a=dT(e,t,n))||!isFinite(a))return[];if(a>0)for(e=Math.ceil(e/a),t=Math.floor(t/a),o=new Array(i=Math.ceil(t-e+1));++s<i;)o[s]=(e+s)*a;else for(e=Math.floor(e*a),t=Math.ceil(t*a),o=new Array(i=Math.ceil(e-t+1));++s<i;)o[s]=(e-s)/a;r&&o.reverse();return o}(this._domain[0],this._domain[this._domain.length-1],e||5)},e}();function dT(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=sT?10:o>=lT?5:o>=uT?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=sT?10:o>=lT?5:o>=uT?2:1)}function hT(e,t,n){return("ceil"===n?Math.ceil(e/t):"floor"===n?Math.floor(e/t):Math.round(e/t))*t}function fT(e,t,n){var r=hT(e,n,"floor"),i=hT(t,n,"ceil");r=(0,b.fixedBase)(r,n),i=(0,b.fixedBase)(i,n);for(var o=[],a=r;a<=i;a+=n){var s=(0,b.fixedBase)(a,n);o.push(s)}return{min:r,max:i,ticks:o}}function pT(e,t,n){var r,i=e.minLimit,o=e.maxLimit,a=e.min,s=e.max,l=e.tickCount,u=void 0===l?5:l,c=(0,b.isNil)(i)?(0,b.isNil)(t)?a:t:i,d=(0,b.isNil)(o)?(0,b.isNil)(n)?s:n:o;if(c>d&&(d=(r=[c,d])[0],c=r[1]),u<=2)return[c,d];for(var h=(d-c)/(u-1),f=[],p=0;p<u;p++)f.push(c+h*p);return f}function mT(e,t,n){if(void 0===n&&(n=5),e===t)return{max:t,min:e,ticks:[e]};var r=n<0?0:Math.round(n);if(0===r)return{max:t,min:e,ticks:[]};var i=(t-e)/r,o=Math.pow(10,Math.floor(Math.log10(i))),a=o;2*o-i<1.5*(i-a)&&5*o-i<2.75*(i-(a=2*o))&&10*o-i<1.5*(i-(a=5*o))&&(a=10*o);for(var s=Math.ceil(t/a),l=Math.floor(e/a),u=Math.max(s*a,t),c=Math.min(l*a,e),d=Math.floor((u-c)/a)+1,h=new Array(d),f=0;f<d;f++)h[f]=Jk(c+f*a);return{min:c,max:u,ticks:h}}function gT(e,t){var n=e.length*t;return 1===t?e[e.length-1]:0===t?e[0]:n%1!=0?e[Math.ceil(n)-1]:e.length%2==0?(e[n-1]+e[n])/2:e[n]}function vT(e){return new Date(e).getFullYear()}function yT(e){return new Date(e,0,1).getTime()}function bT(e){return new Date(e).getMonth()}function _T(e,t){return new Date(e,t,1).getTime()}FS("cat",aT),FS("time-cat",(function(e){var t=aT(e),n=(0,b.last)(e.values);return n!==(0,b.last)(t)&&t.push(n),t})),FS("wilkinson-extended",(function(e){var t=e.min,n=e.max,r=e.tickCount,i=e.nice,o=e.tickInterval,a=e.minLimit,s=e.maxLimit,l=oT(t,n,r,i).ticks;return(0,b.isNil)(a)&&(0,b.isNil)(s)?o?fT(t,n,o).ticks:l:pT(e,(0,b.head)(l),(0,b.last)(l))})),FS("r-pretty",(function(e){var t=e.min,n=e.max,r=e.tickCount,i=e.tickInterval,o=e.minLimit,a=e.maxLimit,s=mT(t,n,r).ticks;return(0,b.isNil)(o)&&(0,b.isNil)(a)?i?fT(t,n,i).ticks:s:pT(e,(0,b.head)(s),(0,b.last)(s))})),FS("time",(function(e){var t=e.min,n=e.max,r=e.minTickInterval,i=e.tickInterval,o=e.tickCount;if(i)o=Math.ceil((n-t)/i);else{var a=(n-t)/(i=Tk(t,n,o)[1])/o;a>1&&(i*=Math.ceil(a)),r&&i<r&&(i=r)}for(var s=[],l=t;l<n+i;l+=i)s.push(l);return s})),FS("time-pretty",(function(e){var t=e.min,n=e.max,r=e.minTickInterval,i=e.tickCount,o=e.tickInterval,a=[];o||(o=(n-t)/i,r&&o<r&&(o=r));var s=vT(t);if(o>Sk)for(var l=vT(n),u=Math.ceil(o/Sk),c=s;c<=l+u;c+=u)a.push(yT(c));else if(o>Ek){var d=Math.ceil(o/Ek),h=bT(t),f=function(e,t){var n=vT(e),r=vT(t),i=bT(e);return 12*(r-n)+(bT(t)-i)%12}(t,n);for(c=0;c<=f+d;c+=d)a.push(_T(s,c+h))}else if(o>Mk){var p=(b=new Date(t)).getFullYear(),m=b.getMonth(),g=b.getDate(),v=Math.ceil(o/Mk),y=function(e,t){return Math.ceil((t-e)/Mk)}(t,n);for(c=0;c<y+v;c+=v)a.push(new Date(p,m,g+c).getTime())}else if(o>xk){p=(b=new Date(t)).getFullYear(),m=b.getMonth(),v=b.getDate();var b,_=b.getHours(),w=Math.ceil(o/xk),x=function(e,t){return Math.ceil((t-e)/xk)}(t,n);for(c=0;c<=x+w;c+=w)a.push(new Date(p,m,v,_+c).getTime())}else if(o>wk){var M=function(e,t){return Math.ceil((t-e)/6e4)}(t,n),E=Math.ceil(o/wk);for(c=0;c<=M+E;c+=E)a.push(t+c*wk)}else{var S=o;S<_k&&(S=_k);var k=Math.floor(t/_k)*_k,T=Math.ceil((n-t)/_k),L=Math.ceil(S/_k);for(c=0;c<T+L;c+=L)a.push(k+c*_k)}return a.length>=512&&console.warn("Notice: current ticks length("+a.length+') >= 512, may cause performance issues, even out of memory. Because of the configure "tickInterval"(in milliseconds, current is '+o+") is too small, increase the value to solve the problem!"),a})),FS("log",(function(e){var t,n=e.base,r=e.tickCount,i=e.min,o=e.max,a=e.values,s=Rk(n,o);if(i>0)t=Math.floor(Rk(n,i));else{var l=Nk(a,n,o);t=Math.floor(Rk(n,l))}for(var u=s-t,c=Math.ceil(u/r),d=[],h=t;h<s+c;h+=c)d.push(Math.pow(n,h));return i<=0&&d.unshift(0),d})),FS("pow",(function(e){var t=e.exponent,n=e.tickCount,r=Math.ceil(Ik(t,e.max));return mT(Math.floor(Ik(t,e.min)),r,n).ticks.map((function(e){var n=e>=0?1:-1;return Math.pow(e,t)*n}))})),FS("quantile",(function(e){var t=e.tickCount,n=e.values;if(!n||!n.length)return[];for(var r=n.slice().sort((function(e,t){return e-t})),i=[],o=0;o<t;o++){var a=o/(t-1);i.push(gT(r,a))}return i})),FS("d3-linear",(function(e){var t=e.min,n=e.max,r=e.tickInterval,i=e.minLimit,o=e.maxLimit,a=function(e){var t=e.min,n=e.max,r=e.nice,i=e.tickCount,o=new cT;return o.domain([t,n]),r&&o.nice(i),o.ticks(i)}(e);return(0,b.isNil)(i)&&(0,b.isNil)(o)?r?fT(t,n,r).ticks:a:pT(e,(0,b.head)(a),(0,b.last)(a))})),Xk("cat",GS),Xk("category",GS),Xk("identity",Kk),Xk("linear",Ok),Xk("log",jk),Xk("pow",Bk),Xk("time",Hk),Xk("timeCat",Ck),Xk("quantize",Wk),Xk("quantile",Uk);var wT=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};function xT(e){return function(e){return(0,b.map)(e,(function(e,t){return[0===t?"M":"L",e[0],e[1]]}))}(e)}function MT(e,t,n,r){void 0===r&&(r=!0);var i=new Ok({values:e}),o=new GS({values:(0,b.map)(e,(function(e,t){return t}))}),a=(0,b.map)(e,(function(e,r){return[o.scale(r)*t,n-i.scale(e)*n]}));return r?function(e){if(e.length<=2)return xT(e);var t=[];(0,b.each)(e,(function(e){(0,b.isEqual)(e,t.slice(t.length-2))||t.push(e[0],e[1])}));var n=Es(t,!1),r=(0,b.head)(e),i=r[0],o=r[1];return n.unshift(["M",i,o]),n}(a):xT(a)}function ET(e,t,n,r){void 0===r&&(r=5);for(var i=new Ok({values:e}),o=new GS({values:(0,b.map)(e,(function(e,t){return t}))}),a=(0,b.map)(e,(function(e,r){return[o.scale(r)*t,n-i.scale(e)*n]})),s=[],l=0;l<a.length;l++){var u=a[l],c=kT({x:u[0],y:u[1],y0:n,size:r});s.push.apply(s,c)}return function(e,t){void 0===t&&(t=!0);var n=[],r=e[0];n.push(["M",r.x,r.y]);for(var i=1,o=e.length;i<o;i++)n.push(["L",e[i].x,e[i].y]);t&&(n.push(["L",r.x,r.y]),n.push(["z"]));return n}(s)}function ST(e,t,n,r){var i=wT([],e),o=function(e,t){var n=new Ok({values:e}),r=Math.max(0,n.min);return t-n.scale(r)*t}(r,n);return i.push(["L",t,o]),i.push(["L",0,o]),i.push(["Z"]),i}function kT(e){var t,n,r,i,o=e.x,a=e.y,s=e.y0,l=e.size;(0,b.isArray)(a)?(t=a[0],n=a[1]):(t=s,n=a),(0,b.isArray)(o)?(r=o[0],i=o[1]):(r=o-l/2,i=o+l/2);var u=[{x:r,y:t},{x:r,y:n}];return u.push({x:i,y:n},{x:i,y:t}),u}var TT=function(){return TT=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},TT.apply(this,arguments)},LT={stroke:"#C5C5C5",strokeOpacity:.85},CT={fill:"#CACED4",opacity:.85},DT=function(){function e(e){var t=e.x,n=void 0===t?0:t,r=e.y,i=void 0===r?0:r,o=e.width,a=void 0===o?200:o,s=e.height,l=void 0===s?26:s,u=e.smooth,c=void 0===u||u,d=e.isArea,h=void 0!==d&&d,f=e.data,p=void 0===f?[]:f,m=e.lineStyle,g=e.areaStyle,v=e.group,y=e.interval,b=void 0===y?null:y;this.group=v,this.x=n,this.y=i,this.width=a,this.height=l,this.data=p,this.smooth=c,this.isArea=h,this.lineStyle=Object.assign({},LT,m),this.areaStyle=Object.assign({},CT,g),this.intervalConfig=b,this.renderLine()}return e.prototype.renderLine=function(){var e=this,t=e.x,n=e.y,r=e.width,i=e.height,o=(e.barWidth,e.data),a=e.smooth,s=e.isArea,l=e.lineStyle,u=e.areaStyle,c=this.group.addGroup({name:"trend-group"});if(o){var d=MT(o,r,i,a);if(c.addShape("path",{attrs:TT({path:d},l)}),s){var h=ST(d,r,i,o);c.addShape("path",{attrs:TT({path:h},u)})}}this.intervalConfig&&c.addShape("path",{attrs:TT({path:ET(this.intervalConfig.data,r,i,this.intervalConfig.style.barWidth)},this.intervalConfig.style)}),c.move(t,n)},e.prototype.destory=function(){this.group.destroy()},e}();const AT=DT;var PT=function(){return PT=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},PT.apply(this,arguments)},OT={fill:"#1890ff",stroke:"#1890ff",type:"trend",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#0050b3"},IT={fill:"#fff",stroke:"#1890ff",radius:2,opacity:1,cursor:"ew-resize"},RT=function(){function e(e){var t=e.group,n=e.name,r=e.type,i=e.x,o=void 0===i?0:i,a=e.y,s=void 0===a?0:a,l=e.width,u=void 0===l?2:l,c=e.height,d=void 0===c?24:c,h=e.style,f=void 0===h?{}:h;this.group=t,this.name=n,this.handleType=r,this.x=o,this.y=s,this.width=u,this.height=d,"trend"===r?this.style=PT(PT({},OT),f):"simple"===r&&(this.style=PT(PT({},IT),f)),this.renderHandle()}return e.prototype.setX=function(e){this.setXY(e,void 0)},e.prototype.setY=function(e){this.setXY(void 0,e)},e.prototype.setXY=function(e,t){(0,b.isNumber)(e)&&(this.x=e),(0,b.isNumber)(t)&&(this.y=t),this.updateXY()},e.prototype.renderHandle=function(){var e=this,t=e.width,n=e.height,r=e.style,i=e.name,o=r.fill,a=r.stroke,s=r.radius,l=r.opacity,u=r.cursor;this.handleGroup=this.group.addGroup(),"trend"===this.handleType?(this.verticalLine=this.handleGroup.addShape("rect",{attrs:{x:0,y:0,width:t,height:n,fill:o,stroke:a,radius:s,opacity:l,cursor:u},name:i+"-handler"}),this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:0,r:2*t,fill:o,stroke:a,radius:s,opacity:l,cursor:u},name:i+"-handler"}),this.bottomCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:n,r:2*t,fill:o,stroke:a,radius:s,opacity:l,cursor:u},name:i+"-handler"})):"simple"===this.handleType&&(this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:n/2,r:2*t,fill:o,stroke:a,radius:s,opacity:l,cursor:u,lineWidth:2},name:i+"-handler"})),this.updateXY(),"trend"===this.handleType?this.bindTrendEvents():"simple"===this.handleType&&this.bindSimpleEvents()},e.prototype.bindSimpleEvents=function(){var e=this,t=this.name;this.handleGroup.on(t+"-handler:mouseenter",(function(){var t=e.style.highLightFill;e.topCircle.attr("fill",t)})),this.handleGroup.on(t+"-handler:mouseleave",(function(){var t=e.style.fill;e.topCircle.attr("fill",t)}))},e.prototype.bindTrendEvents=function(){var e=this,t=this.name;this.handleGroup.on(t+"-handler:mouseenter",(function(){var t=e.style.highLightFill;e.verticalLine.attr("fill",t),e.topCircle.attr("fill",t),e.bottomCircle.attr("fill",t)})),this.handleGroup.on(t+"-handler:mouseleave",(function(){var t=e.style.fill;e.verticalLine.attr("fill",t),e.topCircle.attr("fill",t),e.bottomCircle.attr("fill",t)}))},e.prototype.show=function(){this.handleGroup.show()},e.prototype.hide=function(){this.handleGroup.hide()},e.prototype.updateXY=function(){this.handleGroup.setMatrix([1,0,0,0,1,0,this.x,this.y,1])},e}();const NT=RT;var YT="timebarstartplay",jT="timebarendplay",FT="valuechange",BT="timebarConfigChanged",zT="playPauseBtn",HT="nextStepBtn",GT="preStepBtn",WT=function(){return WT=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},WT.apply(this,arguments)},UT=function(){function e(e){this.config=(0,b.deepMix)({},e),this.init()}return e.prototype.update=function(e){this.config=(0,b.deepMix)({},this.config,e),this.updateElement(),this.renderMarker()},e.prototype.init=function(){this.initElement(),this.renderMarker()},e.prototype.initElement=function(){var e=this.config,t=e.group,n=e.style,r=n.scale,i=void 0===r?1:r,o=n.offsetX,a=void 0===o?0:o,s=n.offsetY,l=void 0===s?0:s,u=this.config.x+a,c=this.config.y+l,d=t.addGroup({name:zT});this.startMarkerGroup=d.addGroup({name:zT}),this.circle=t.addShape("circle",{attrs:WT({x:u,y:c,r:this.config.r*i},n),name:zT}),this.startMarker=this.startMarkerGroup.addShape("path",{attrs:{path:this.getStartMarkerPath(u,c,i),fill:n.stroke||"#aaa"}}),this.pauseMarkerGroup=d.addGroup({name:zT});var h=.25*this.config.r*i,f=.5*this.config.r*Math.sqrt(3)*i;this.pauseLeftMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:u-.375*this.config.r*i,y:c-f/2,width:h,height:f,fill:n.stroke||"#aaa",lineWidth:0}}),this.pauseRightMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:u+1/8*this.config.r*i,y:c-f/2,width:h,height:f,fill:n.stroke||"#aaa",lineWidth:0}})},e.prototype.updateElement=function(){var e=this.config.style,t=e.scale,n=void 0===t?1:t,r=e.offsetX,i=void 0===r?0:r,o=e.offsetY,a=void 0===o?0:o,s=this.config.x+i,l=this.config.y+a;this.circle.attr("x",s),this.circle.attr("y",l),this.circle.attr("r",this.config.r*n),this.startMarker.attr("path",this.getStartMarkerPath(s,l,n));var u=.25*this.config.r*n,c=.5*this.config.r*Math.sqrt(3)*n;this.pauseLeftMarker.attr("x",s-.375*this.config.r*n),this.pauseLeftMarker.attr("y",l-c/2),this.pauseLeftMarker.attr("width",u),this.pauseLeftMarker.attr("height",c),this.pauseRightMarker.attr("x",s+1/8*this.config.r*n),this.pauseRightMarker.attr("y",l-c/2),this.pauseRightMarker.attr("width",u),this.pauseRightMarker.attr("height",c)},e.prototype.renderMarker=function(){this.config.isPlay?(this.startMarkerGroup.hide(),this.pauseMarkerGroup.show()):(this.startMarkerGroup.show(),this.pauseMarkerGroup.hide())},e.prototype.getStartMarkerPath=function(e,t,n){var r=.5*this.config.r*Math.sqrt(3)*n;return[["M",e-r/Math.sqrt(3)/2,t-r/2],["L",e+r/Math.sqrt(3),t],["L",e-r/Math.sqrt(3)/2,t+r/2]]},e}();const VT=UT;var XT=function(){return XT=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},XT.apply(this,arguments)},qT=_h,KT={fill:"#aaa",fillOpacity:.35,stroke:"#aaa"},JT={fill:"#fff"},ZT={fill:"green"},$T={pointer:{fill:"#aaa",lineWidth:0},scroller:{stroke:"#aaa",fill:"#aaa",lineWidth:1,lineAppendWidth:5,cursor:"pointer"},text:{fill:"#aaa",textBaseline:"top"}},QT={check:{stroke:"green",lineWidth:3},box:{fill:"#fff",stroke:"#aaa",lineWidth:2,radius:3,width:12,height:12},text:{fill:"#aaa",fontSize:12,textBaseline:"top"}},eL={speed:1,loop:!1,fill:"#fff",stroke:"#fff",hideTimeTypeController:!1,preBtnStyle:{fill:"#aaa",stroke:"#aaa"},nextBtnStyle:{fill:"#aaa",stroke:"#aaa"},playBtnStyle:{fill:"#aaa",stroke:"#aaa",fillOpacity:.05},speedControllerStyle:$T,timeTypeControllerStyle:QT},tL=50,nL=function(){function e(e){this.controllerCfg=(0,b.deepMix)({},eL,e),this.group=e.group,this.controllerGroup=this.group.addGroup({name:"controller-group"}),this.speedAxisY=[],this.currentSpeed=this.controllerCfg.speed,this.currentType="range",this.fontFamily=e.fontFamily||"Arial, sans-serif",this.init()}return e.prototype.init=function(){this.renderPlayButton()},e.prototype.getNextMarkerPath=function(e,t,n){return[["M",e,t-n],["L",e+n,t],["L",e,t+n],["Z",e,t-n],["M",e,t],["L",e-n,t-n],["L",e-n,t+n],["Z"]]},e.prototype.getPreMarkerPath=function(e,t,n){return[["M",e,t-n],["L",e-n,t],["L",e,t+n],["L",e,t-n],["M",e,t],["L",e+n,t-n],["L",e+n,t+n],["Z"]]},e.prototype.renderPlayButton=function(){var e=this.controllerCfg,t=e.width,n=e.height,r=e.x,i=e.y,o=e.hideTimeTypeController,a=e.fill,s=void 0===a?"#aaa":a,l=e.stroke,u=void 0===l?"green":l,c=XT(XT({},KT),e.playBtnStyle||{}),d=XT(XT({},JT),e.preBtnStyle||{}),h=XT(XT({},ZT),e.nextBtnStyle||{}),f=n/2-5,p=i+10,m=this.controllerGroup.addShape("rect",{attrs:{x:r,y:p,width:t,height:n,stroke:u,fill:s},name:"container-rect"});this.playButton?this.playButton.update({x:t/2,y:p,r:f}):this.playButton=new VT({group:this.controllerGroup,x:t/2,y:p+f+5,r:f,isPlay:this.isPlay,style:c});var g=d.offsetX||0,v=d.offsetY||0,y=(d.scale||1)*f;this.controllerGroup.addShape("path",{attrs:XT({path:this.getPreMarkerPath(t/2-5*f+g,p+f+5+v,.5*y)},d),name:GT});var b=h.offsetX||0,_=h.offsetY||0,w=(h.scale||1)*f;this.controllerGroup.addShape("path",{attrs:XT({path:this.getNextMarkerPath(t/2+5*f+b,p+f+5+_,.5*w)},h),name:HT}),m.toBack(),this.renderSpeedBtn(),o||this.renderToggleTime(),this.bindEvent();var x=this.controllerCfg.scale,M=void 0===x?1:x,E=this.controllerGroup.getCanvasBBox(),S=(E.maxX+E.minX)/2,k=(E.maxY+E.minY)/2,T=qT([1,0,0,0,1,0,0,0,1],[["t",-S,-k],["s",M,M],["t",S,k]]);this.controllerGroup.setMatrix(T)},e.prototype.renderSpeedBtn=function(){var e=this.controllerCfg,t=e.y,n=e.width,r=e.hideTimeTypeController,i=XT(XT({},$T),this.controllerCfg.speedControllerStyle||{}),o=i.scroller,a=void 0===o?{}:o,s=i.text,l=void 0===s?{}:s,u=i.pointer,c=void 0===u?{}:u,d=i.scale,h=void 0===d?1:d,f=i.offsetX,p=void 0===f?0:f,m=i.offsetY,g=void 0===m?0:m,v=this.controllerGroup.addGroup({name:"speed-group"});this.speedGroup=v;var y=[],b=5;this.speedAxisY=[19,22,26,32,39];for(var _=0;_<5;_++){var w=t+this.speedAxisY[_],x=n-(r?tL:110);v.addShape("line",{attrs:XT({x1:x,x2:x+15,y1:w,y2:w},a),speed:b,name:"speed-rect"}),this.speedAxisY[_]=w,y.push(b),b-=1}this.speedText=v.addShape("text",{attrs:XT({x:n-(r?tL:110)+20,y:this.speedAxisY[0]+4,text:"1.0X",fontFamily:this.fontFamily||"Arial, sans-serif"},l)}),this.speedPoint=v.addShape("path",{attrs:XT({path:this.getPointerPath(n-(r?tL:110),0),matrix:[1,0,0,0,1,0,0,this.speedAxisY[4],1]},c)});var M=this.speedGroup.getCanvasBBox(),E=(M.maxX+M.minX)/2,S=(M.maxY+M.minY)/2,k=this.speedGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];k=qT(k,[["t",-E,-S],["s",h,h],["t",E+p*h,S+g*h]]),this.speedGroup.setMatrix(k)},e.prototype.getPointerPath=function(e,t){return[["M",e,t],["L",e-10,t-4],["L",e-10,t+4],["Z"]]},e.prototype.renderToggleTime=function(){var e,t=this.controllerCfg.width,n=XT(XT({},QT),this.controllerCfg.timeTypeControllerStyle||{}),r=n.scale,i=void 0===r?1:r,o=n.offsetX,a=void 0===o?0:o,s=n.offsetY,l=void 0===s?0:s,u=n.box,c=void 0===u?{}:u,d=n.check,h=void 0===d?{}:d,f=n.text,p=void 0===f?{}:f;this.toggleGroup=this.controllerGroup.addGroup({name:"toggle-group"}),this.toggleGroup.addShape("rect",{attrs:XT({x:t-tL,y:this.speedAxisY[0]+3.5},c),isChecked:!1,name:"toggle-model"}),this.checkedIcon=this.toggleGroup.addShape("path",{attrs:XT({path:[["M",t-tL+3,this.speedAxisY[1]+6],["L",t-tL+7,this.speedAxisY[1]+10],["L",t-tL+12,this.speedAxisY[1]+4]]},h),capture:!1}),this.checkedIcon.hide(),this.checkedText=this.toggleGroup.addShape("text",{attrs:XT({text:(null===(e=this.controllerCfg)||void 0===e?void 0:e.timePointControllerText)||"",x:t-tL+15,y:this.speedAxisY[0]+4,fontFamily:"undefined"!=typeof window&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},p)});var m=this.toggleGroup.getCanvasBBox(),g=(m.maxX+m.minX)/2,v=(m.maxY+m.minY)/2,y=this.toggleGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];y=qT(y,[["t",-g,-v],["s",i,i],["t",g+a*i,v+l*i]]),this.toggleGroup.setMatrix(y)},e.prototype.bindEvent=function(){var e=this;this.speedGroup.on("speed-rect:click",(function(t){var n=t.target.attr("y1"),r=e.speedPoint.attr("matrix"),i=e.speedAxisY.indexOf(r[7]||0),o=e.speedAxisY.indexOf(n),a=e.speedAxisY[o]-e.speedAxisY[i];r=qT(r,[["t",0,a]]),e.speedPoint.setMatrix(r),e.currentSpeed=e.speedAxisY.length-o,e.speedText.attr("text",e.currentSpeed+".0X"),e.group.emit(BT,{speed:e.currentSpeed,type:e.currentType})})),this.speedGroup.on("mousewheel",(function(t){t.preventDefault();var n=e.speedPoint.attr("matrix")||[1,0,0,0,1,0,0,0,1],r=n[7],i=e.speedAxisY.indexOf(r);if(-1===i){var o=1/0;e.speedAxisY.forEach((function(e,t){var n=Math.abs(e-r);o>n&&(o=n,i=t)}))}i=t.originalEvent.deltaY>0?Math.max(0,i-1):Math.min(e.speedAxisY.length-1,i+1);var a=e.speedAxisY[i]-r;n=qT(n,[["t",0,a]]),e.speedPoint.setMatrix(n),e.currentSpeed=e.speedAxisY.length-i,e.speedText.attr("text",e.currentSpeed+".0X"),e.group.emit(BT,{speed:e.currentSpeed,type:e.currentType})})),this.toggleGroup&&this.toggleGroup.on("toggle-model:click",(function(t){var n,r,i=t.target.get("isChecked");i?(e.checkedIcon.hide(),e.checkedText.attr("text",(null===(r=e.controllerCfg)||void 0===r?void 0:r.timePointControllerText)||""),e.currentType="range"):(e.checkedIcon.show(),e.checkedText.attr("text",(null===(n=e.controllerCfg)||void 0===n?void 0:n.timeRangeControllerText)||""),e.currentType="single"),t.target.set("isChecked",!i),e.group.emit(BT,{type:e.currentType,speed:e.currentSpeed})}))},e.prototype.destroy=function(){this.speedGroup.off("speed-rect:click"),this.toggleGroup&&(this.toggleGroup.off("toggle-model:click"),this.toggleGroup.destroy()),this.speedGroup.destroy()},e}();const rL=nL;var iL=function(){return iL=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},iL.apply(this,arguments)},oL={fill:"#416180",opacity:.05},aL={fill:"#416180",opacity:.15,radius:5},sL={fill:"#5B8FF9",opacity:.3,cursor:"grab"},lL={width:2,height:24},uL={textBaseline:"middle",fill:"#000",opacity:.45},cL={textAlign:"center",textBaseline:"top",fill:"#607889",opacity:.35},dL={lineWidth:1,stroke:"#ccc"},hL=function(){function e(e){var t=this;this.prevX=0,this.onMouseDown=function(e){return function(n){t.currentHandler=e;var r=n.originalEvent;r.stopPropagation(),r.preventDefault(),t.prevX=(0,b.get)(r,"touches.0.pageX",r.pageX);var i=t.canvas.get("container");i.addEventListener("mousemove",t.onMouseMove),i.addEventListener("mouseup",t.onMouseUp),i.addEventListener("mouseleave",t.onMouseUp),i.addEventListener("touchmove",t.onMouseMove),i.addEventListener("touchend",t.onMouseUp),i.addEventListener("touchcancel",t.onMouseUp)}},this.onMouseMove=function(e){e.stopPropagation(),e.preventDefault();var n=(0,b.get)(e,"touches.0.pageX",e.pageX),r=n-t.prevX,i=t.adjustOffsetRange(r/t.width);t.updateStartEnd(i),t.updateUI(),t.prevX=n},this.onMouseUp=function(){t.currentHandler&&(t.currentHandler=void 0);var e=t.canvas.get("container");e&&(e.removeEventListener("mousemove",t.onMouseMove),e.removeEventListener("mouseup",t.onMouseUp),e.removeEventListener("mouseleave",t.onMouseUp),e.removeEventListener("touchmove",t.onMouseMove),e.removeEventListener("touchend",t.onMouseUp),e.removeEventListener("touchcancel",t.onMouseUp))};var n=e.x,r=void 0===n?0:n,i=e.y,o=void 0===i?0:i,a=e.width,s=void 0===a?100:a,l=e.height,u=e.padding,c=void 0===u?10:u,d=e.trendCfg,h=e.controllerCfg,f=void 0===h?{speed:1}:h,p=e.backgroundStyle,m=void 0===p?{}:p,g=e.foregroundStyle,v=void 0===g?{}:g,y=e.handlerStyle,_=void 0===y?{}:y,w=e.textStyle,x=void 0===w?{}:w,M=e.start,E=void 0===M?0:M,S=e.end,k=void 0===S?1:S,T=e.minText,L=void 0===T?"":T,C=e.maxText,D=void 0===C?"":C,A=e.group,P=e.graph,O=e.canvas,I=e.tick,R=void 0===I?{tickLabelStyle:{},tickLineStyle:{},tickLabelFormatter:function(e){return e},ticks:[]}:I,N=e.type;this.graph=P,this.canvas=O,this.group=A,this.timeBarType=N,this.x=r,this.y=o,this.width=s,this.height=l,this.padding=c,this.ticks=R.ticks,this.trendCfg=d,this.controllerCfg=f,this.currentSpeed=f.speed||1,this.tickLabelFormatter=R.tickLabelFormatter,"trend"===N?this.backgroundStyle=iL(iL({},oL),m):"simple"===N&&(this.backgroundStyle=iL(iL({},aL),m)),this.foregroundStyle=iL(iL({},sL),v),this.handlerStyle=iL(iL({},lL),_),this.textStyle=iL(iL({},uL),x),this.tickLabelStyle=iL(iL({},cL),R.tickLabelStyle),this.tickLineStyle=iL(iL({},dL),R.tickLineStyle),this.currentMode="range",this.start=E,this.end=k,this.minText=L,this.maxText=D,this.fontFamily="undefined"!=typeof window&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlider()}return e.prototype.update=function(e){var t=e.x,n=e.y,r=e.width,i=e.height,o=e.minText,a=e.maxText,s=e.start,l=e.end;this.start=Math.min(1,Math.max(s,0)),this.end=Math.min(1,Math.max(l,0)),(0,b.assign)(this,{x:t,y:n,width:r,height:i,minText:o,maxText:a}),this.updateUI()},e.prototype.setText=function(e,t){this.minTextShape.attr("text",e),this.maxTextShape.attr("text",t)},e.prototype.renderSlider=function(){var e=this,t=this,n=t.width,r=t.height,i=t.timeBarType;if("trend"===i&&(0,b.size)((0,b.get)(this.trendCfg,"data"))){var o=new AT(iL(iL({x:this.x,y:this.y,width:n,height:r},this.trendCfg),{group:this.group}));this.trendComponent=o}var a=this.group.addGroup({name:"slider-group"});a.addShape("rect",{attrs:iL({x:0,y:0,width:n,height:r},this.backgroundStyle)});var s=this.group.addGroup();"trend"===i?(this.minTextShape=s.addShape("text",{attrs:iL({x:0,y:r/2+this.y,textAlign:"right",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif"},this.textStyle),capture:!1}),this.maxTextShape=s.addShape("text",{attrs:iL({y:r/2+this.y,textAlign:"left",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif"},this.textStyle),capture:!1})):(this.minTextShape=s.addShape("text",{attrs:iL({x:0,y:this.y-10,textAlign:"center",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif"},this.textStyle),capture:!1}),this.maxTextShape=s.addShape("text",{attrs:iL({y:this.y-10,textAlign:"center",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif"},this.textStyle),capture:!1})),this.foregroundShape=this.group.addGroup().addShape("rect",{attrs:iL({x:0,y:this.y,height:r},this.foregroundStyle)}),this.foregroundShape.on("mousedown",(function(e){e.target.attr("cursor","grabbing")})),this.foregroundShape.on("mouseup",(function(t){t.target.attr("cursor",e.foregroundStyle.cursor||"grab")}));var l=(0,b.get)(this.handlerStyle,"width",2),u=(0,b.get)(this.handlerStyle,"height",24),c=this.group.addGroup({name:"minHandlerShape"});this.minHandlerShape=new NT({name:"minHandlerShape",group:c,type:i,x:this.x,y:this.y,width:l,height:u,style:this.handlerStyle});var d=this.group.addGroup({name:"maxHandlerShape"});this.maxHandlerShape=new NT({name:"maxHandlerShape",group:d,type:i,x:this.x,y:this.y,width:l,height:u,style:this.handlerStyle});var h=this.ticks,f=n/(h.length-1);this.tickPosList=[],this.textList&&this.textList.length&&this.textList.forEach((function(e){e.destroy()}));var p=-1/0;this.textList=h.map((function(t,n){var i;e.tickPosList.push(e.x+n*f),e.tickLabelFormatter?(i=e.tickLabelFormatter(t),!(0,b.isString)(i)&&i&&(i=t.date)):i=t.date;var o=e.group.addShape("text",{attrs:iL({x:e.x+n*f,y:e.y+r+5,text:i,fontFamily:e.fontFamily||"Arial, sans-serif"},e.tickLabelStyle)}),a=e.group.addShape("line",{attrs:iL({x1:e.x+n*f,y1:e.y+r+2,x2:e.x+n*f,y2:e.y+r+6},e.tickLineStyle)});a.toBack();var s=o.getBBox();return s.minX>p?(o.show(),a.show(),p=s.minX+s.width+10):(o.hide(),a.hide()),o})),this.controllerBtnGroup=new rL(iL({group:this.group,x:this.x,y:this.y+r+25,width:n,height:35},this.controllerCfg)),this.updateStartEnd(0),this.updateUI(),a.move(this.x,this.y),this.bindEvents()},e.prototype.bindEvents=function(){var e=this,t=this.group.find((function(e){return"minHandlerShape"===e.get("name")}));t&&(t.on("minHandlerShape-handler:mousedown",this.onMouseDown(this.minHandlerShape)),t.on("minHandlerShape-handler:touchstart",this.onMouseDown(this.minHandlerShape)));var n=this.group.find((function(e){return"maxHandlerShape"===e.get("name")}));n&&(n.on("maxHandlerShape-handler:mousedown",this.onMouseDown(this.maxHandlerShape)),n.on("maxHandlerShape-handler:touchstart",this.onMouseDown(this.maxHandlerShape))),this.foregroundShape.on("mousedown",this.onMouseDown(this.foregroundShape)),this.foregroundShape.on("touchstart",this.onMouseDown(this.foregroundShape)),this.group.on("playPauseBtn:click",(function(){e.isPlay=!e.isPlay,e.currentHandler=e.maxHandlerShape,e.changePlayStatus()})),this.group.on("nextStepBtn:click",(function(){e.currentHandler=e.maxHandlerShape,e.updateStartEnd(.01),e.updateUI()})),this.group.on("preStepBtn:click",(function(){e.currentHandler=e.maxHandlerShape,e.updateStartEnd(-.01),e.updateUI()})),this.group.on(BT,(function(t){var n=t.type,r=t.speed;e.currentSpeed=r,e.currentMode=n,"single"===n?(e.minHandlerShape.hide(),e.foregroundShape.hide(),e.minTextShape.hide()):"range"===n&&(e.minHandlerShape.show(),e.foregroundShape.show(),e.minTextShape.show())}))},e.prototype.adjustTickIndex=function(e){for(var t=0;t<this.tickPosList.length-1;t++)if(this.tickPosList[t]<=e&&e<=this.tickPosList[t+1])return Math.abs(this.tickPosList[t]-e)<Math.abs(e-this.tickPosList[t+1])?t:t+1;return 0},e.prototype.adjustOffsetRange=function(e){switch(this.currentHandler){case this.minHandlerShape:var t=0-this.start,n=1-this.start;return Math.min(n,Math.max(t,e));case this.maxHandlerShape:t=0-this.end,n=1-this.end;return Math.min(n,Math.max(t,e));case this.foregroundShape:t=0-this.start,n=1-this.end;return Math.min(n,Math.max(t,e));default:return 0}},e.prototype.updateStartEnd=function(e){var t=this.ticks[this.adjustTickIndex(this.start*this.width)],n=this.ticks[this.adjustTickIndex(this.end*this.width)];if(!this.currentHandler)return this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):t.date,void(this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(n):n.date);switch(this.currentHandler){case this.minHandlerShape:this.maxText=this.maxTextShape.attr("text"),this.start+=e,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):t.date;break;case this.maxHandlerShape:this.minText=this.minTextShape.attr("text"),this.end+=e,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(n):n.date;break;case this.foregroundShape:this.start+=e,this.end+=e,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):t.date,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(n):n.date}},e.prototype.updateUI=function(){var e=this;this.start<0&&(this.start=0),this.end>1&&(this.end=1);var t=this.x+this.start*this.width,n=this.x+this.end*this.width;this.foregroundShape.attr("x",t),this.foregroundShape.attr("width",n-t);var r=(0,b.get)(this.handlerStyle,"width",2);this.setText(this.minText,this.maxText);var i=this.dodgeText([t,n]),o=i[0],a=i[1];this.minHandlerShape.setX(t-r/2),(0,b.each)(o,(function(t,n){return e.minTextShape.attr(n,t)})),this.maxHandlerShape.setX(n-r/2),(0,b.each)(a,(function(t,n){return e.maxTextShape.attr(n,t)})),"range"===this.currentMode?this.graph.emit(FT,{value:[this.start,this.end].sort()}):"single"===this.currentMode&&this.graph.emit(FT,{value:[this.end,this.end]})},e.prototype.dodgeText=function(e){var t,n,r=(0,b.get)(this.handlerStyle,"width",2),i=this.minTextShape,o=this.maxTextShape,a=e[0],s=e[1],l=!1;a>s&&(a=(t=[s,a])[0],s=t[1],i=(n=[o,i])[0],o=n[1],l=!0);var u=i.getBBox(),c=o.getBBox(),d=null,h=null;return"trend"===this.timeBarType?(d=a-u.width<this.x+2?{x:a+r/2+2,textAlign:"left"}:{x:a-r/2-2,textAlign:"right"},h=s+c.width>this.x+this.width?{x:s-r/2-2,textAlign:"right"}:{x:s+r/2+2,textAlign:"left"}):"simple"===this.timeBarType&&(d=u.width>a-2?{x:a+r/2+2,textAlign:"center"}:{x:a-r/2-2,textAlign:"center"},h=c.width>this.width-s-2?{x:s-r/2-2,textAlign:"center"}:{x:s+r/2+2,textAlign:"center"}),l?[h,d]:[d,h]},e.prototype.startPlay=function(){var e=this;return"undefined"!=typeof window?window.requestAnimationFrame((function(){var t=e,n=t.ticks,r=t.width,i=e.currentSpeed,o=r/n.length/(1e3*(10-i)/60),a=e.adjustOffsetRange(o/e.width);e.updateStartEnd(a),e.updateUI(),e.isPlay&&(e.playHandler=e.startPlay())})):void 0},e.prototype.changePlayStatus=function(e){void 0===e&&(e=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(YT,null)):this.playHandler&&("undefined"!=typeof window&&window.cancelAnimationFrame(this.playHandler),e&&this.graph.emit(jT,null))},e.prototype.destory=function(){this.graph.off(FT);var e=this.group,t=e.find((function(e){return"minHandlerShape"===e.get("name")}));t&&(t.off("minHandlerShape-handler:mousedown"),t.off("minHandlerShape-handler:touchstart"),t.destroy());var n=e.find((function(e){return"maxHandlerShape"===e.get("name")}));n&&(n.off("maxHandlerShape-handler:mousedown"),n.off("maxHandlerShape-handler:touchstart"),n.destroy()),this.foregroundShape.off("mousedown"),this.foregroundShape.off("touchstart"),this.foregroundShape.destroy(),e.off("playPauseBtn:click"),e.off("nextStepBtn:click"),e.off("preStepBtn:click"),e.off(BT),e.destroy(),this.trendComponent&&this.trendComponent.destory()},e}();const fL=hL;var pL=function(){function e(e){var t=e.x,n=void 0===t?0:t,r=e.y,i=void 0===r?0:r,o=e.container,a=e.text,s=e.padding,l=void 0===s?[4,4,4,4]:s,u=e.className,c=void 0===u?"g6-component-timebar-tooltip":u,d=e.backgroundColor,h=void 0===d?"#000":d,f=e.textColor,p=void 0===f?"#fff":f,m=e.opacity,g=void 0===m?.8:m,v=e.fontSize,y=void 0===v?12:v;this.container=o,this.className=c,this.backgroundColor=h,this.textColor=p,this.x=n,this.y=i,this.text=a,this.padding=l,this.opacity=g,this.fontSize=y,this.render()}return e.prototype.render=function(){var e=this,t=e.className,n=(e.x,e.y,e.backgroundColor),r=e.textColor,i=e.text,o=e.padding,a=e.opacity,s=e.fontSize,l=e.container,u=KE("<div class='"+t+"' style=\"position: absolute; width: fit-content; height: fit-content; opacity: "+a+'"></div>');(0,b.isString)(l)&&(l=document.getElementById(l)),l.appendChild(u),e.parentHeight=l.offsetHeight,e.parentWidth=l.offsetWidth,rS(u,{visibility:"hidden",top:0,left:0});var c=KE("\n      <div style='position: absolute; white-space:nowrap; background-color: "+n+"; font-size: "+s+"px; border-radius: 4px; width: fit-content; height: fit-content; color: "+r+"; padding: "+o[0]+"px "+o[1]+"px "+o[2]+"px "+o[3]+"px'></div>");c.innerHTML=i,u.appendChild(c),e.backgroundDOM=c;var d=KE("<div style='position: absolute; width: 0px; height: 0px; border-left: 5px solid transparent; border-right: 5px solid transparent; border-top: 10px solid "+n+"'></div>");u.appendChild(d),e.arrowDOM=d,e.container=u},e.prototype.show=function(e){var t=this,n=e.text,r=e.x;e.y,e.clientX,e.clientY;t.backgroundDOM.innerHTML=n;var i=t.backgroundDOM.offsetWidth,o=t.backgroundDOM.offsetHeight,a=t.arrowDOM.offsetWidth,s=t.arrowDOM.offsetHeight;rS(t.container,{top:-o-s+"px",left:r+"px",visibility:"visible"}),rS(t.backgroundDOM,{marginLeft:-i/2+"px"}),rS(t.arrowDOM,{marginLeft:-a/2+"px",top:o+"px"});var l=r-i/2,u=r+i/2;l<0?rS(t.backgroundDOM,{marginLeft:-i/2-l+"px"}):u>t.parentWidth&&rS(t.backgroundDOM,{marginLeft:-i/2-u+t.parentWidth+12+"px"})},e.prototype.hide=function(){rS(this.container,{top:0,left:0,visibility:"hidden"})},e}();const mL=pL;var gL=function(){return gL=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},gL.apply(this,arguments)},vL={fill:"#5B8FF9"},yL={fill:"#e6e8e9"},bL=function(){function e(e){this.frameCount=0,this.fontFamily="Arial, sans-serif";var t=e.graph,n=e.canvas,r=e.group,i=e.width,o=e.height,a=e.padding,s=e.data,l=e.start,u=e.end,c=e.x,d=void 0===c?0:c,h=e.y,f=void 0===h?0:h,p=e.tickLabelFormatter,m=e.selectedTickStyle,g=void 0===m?vL:m,v=e.unselectedTickStyle,y=void 0===v?yL:v,b=e.tooltipBackgroundColor,_=e.tooltipFomatter;this.graph=t,this.group=r,this.sliceGroup=r.addGroup({name:"slice-group"}),this.canvas=n,this.width=i,this.height=o,this.padding=a,this.data=s,this.start=l,this.end=u,this.tickLabelFormatter=p,this.selectedTickStyle=g,this.unselectedTickStyle=y,this.x=d,this.y=f,this.tooltipBackgroundColor=b,this.tooltipFomatter=_,this.fontFamily="undefined"!=typeof window&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlices(),this.initEvent()}return e.prototype.renderSlices=function(){var e=this,t=this,n=t.width,r=t.height,i=t.padding,o=t.data,a=t.start,s=t.end,l=t.tickLabelFormatter,u=t.selectedTickStyle,c=t.unselectedTickStyle,d=n-2*i,h=r-(3*i+4+10)-2*i,f=o.length,p=(d-2*(f-1))/f;this.tickWidth=p;var m=this.sliceGroup,g=[],v=[],y=Math.round(f*a),_=Math.round(f*s);this.startTickRectId=y,this.endTickRectId=_,o.forEach((function(t,r){var o=r>=y&&r<=_?u:c,a=m.addShape("rect",{attrs:gL({x:i+r*(p+2),y:i,width:p,height:h},o),draggable:!0,name:"tick-rect-"+r}),s=m.addShape("rect",{attrs:{x:i+r*p+2*(2*r-1)/2,y:i,width:0===r||r===f-1?p+1:p+2,height:h,fill:"#fff",opacity:0},draggable:!0,name:"pick-rect-"+r});s.toFront();var d,w=a.getBBox(),x=(w.minX+w.maxX)/2;if(g.push({rect:a,pickRect:s,value:t.date,x,y:w.minY}),l?(d=l(t),!(0,b.isString)(d)&&d&&(d=t.date)):r%Math.round(f/10)==0&&(d=t.date),d){v.push(d);var M=w.maxY+2*i;m.addShape("line",{attrs:{stroke:"#BFBFBF",x1:x,y1:M,x2:x,y2:M+4}});var E=M+4+i,S=m.addShape("text",{attrs:{fill:"#8c8c8c",stroke:"#fff",lineWidth:1,x,y:E,textAlign:"center",text:d,textBaseline:"top",fontSize:10,fontFamily:e.fontFamily||"Arial, sans-serif"},capture:!1}),k=S.getBBox();k.maxX>n?S.attr("textAlign","right"):k.minX<0&&S.attr("textAlign","left")}})),this.tickRects=g;var w=this.group;this.currentSpeed=1,this.controllerBtnGroup=new rL({group:w,x:this.x,y:this.y+r+5,width:n,height:40,hideTimeTypeController:!0,speed:this.currentSpeed,fontFamily:this.fontFamily||"Arial, sans-serif"})},e.prototype.initEvent=function(){var e=this,t=this.sliceGroup;t.on("click",(function(t){var n=t.target;if("rect"===n.get("type")&&n.get("name")){var r=parseInt(n.get("name").split("-")[2],10);if(!isNaN(r)){var i=e.tickRects,o=e.unselectedTickStyle;i.forEach((function(e){e.rect.attr(o)}));var a=e.selectedTickStyle;i[r].rect.attr(a),e.startTickRectId=r,e.endTickRectId=r;var s=r/i.length;e.graph.emit(FT,{value:[s,s]})}}})),t.on("dragstart",(function(t){var n=e.tickRects,r=e.unselectedTickStyle;n.forEach((function(e){e.rect.attr(r)}));var i=t.target,o=parseInt(i.get("name").split("-")[2],10),a=e.selectedTickStyle;n[o].rect.attr(a),e.startTickRectId=o;var s=o/n.length;e.graph.emit(FT,{value:[s,s]}),e.dragging=!0})),t.on("dragover",(function(t){if(e.dragging&&"rect"===t.target.get("type")){for(var n=parseInt(t.target.get("name").split("-")[2],10),r=e.startTickRectId,i=e.tickRects,o=e.selectedTickStyle,a=e.unselectedTickStyle,s=0;s<i.length;s++){var l=s>=r&&s<=n?o:a;i[s].rect.attr(l)}var u=i.length;e.endTickRectId=n;var c=r/u,d=n/u;e.graph.emit(FT,{value:[c,d]})}})),t.on("drop",(function(t){if(e.dragging&&(e.dragging=!1,"rect"===t.target.get("type"))){var n=e.startTickRectId,r=parseInt(t.target.get("name").split("-")[2],10);if(!(r<n)){var i=e.selectedTickStyle,o=e.tickRects;o[r].rect.attr(i),e.endTickRectId=r;var a=o.length,s=n/a,l=r/a;e.graph.emit(FT,{value:[s,l]})}}}));var n=this,r=n.tooltipBackgroundColor,i=n.tooltipFomatter,o=n.canvas,a=new mL({container:o.get("container"),backgroundColor:r}),s=this.tickRects;s.forEach((function(e){var t=e.pickRect;t.on("mouseenter",(function(e){var t=e.target;if("rect"===t.get("type")){var n=parseInt(t.get("name").split("-")[2],10),r=o.getClientByPoint(s[n].x,s[n].y);a.show({x:s[n].x,y:s[n].y,clientX:r.x,clientY:r.y,text:i?i(s[n].value):s[n].value})}})),t.on("mouseleave",(function(e){a.hide()}))}));var l=this.group;l.on("playPauseBtn:click",(function(){e.isPlay=!e.isPlay,e.changePlayStatus()})),l.on("nextStepBtn:click",(function(){e.updateStartEnd(1)})),l.on("preStepBtn:click",(function(){e.updateStartEnd(-1)})),l.on(BT,(function(t){t.type;var n=t.speed;e.currentSpeed=n}))},e.prototype.changePlayStatus=function(e){void 0===e&&(e=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(YT,null)):this.playHandler&&("undefined"!=typeof window&&window.cancelAnimationFrame(this.playHandler),e&&this.graph.emit(jT,null))},e.prototype.startPlay=function(){var e=this;return"undefined"!=typeof window?window.requestAnimationFrame((function(){var t=e.currentSpeed;e.frameCount%(60/t)==0&&(e.frameCount=0,e.updateStartEnd(1)),e.frameCount++,e.isPlay&&(e.playHandler=e.startPlay())})):void 0},e.prototype.updateStartEnd=function(e){var t=this,n=this.tickRects,r=n.length,i=this.unselectedTickStyle,o=this.selectedTickStyle,a=t.endTickRectId;if(e>0?t.endTickRectId++:(n[t.endTickRectId].rect.attr(i),t.endTickRectId--),a!==t.startTickRectId)t.endTickRectId<t.startTickRectId&&(t.startTickRectId=t.endTickRectId);else{for(var s=t.startTickRectId;s<=t.endTickRectId-1;s++)n[s].rect.attr(i);t.startTickRectId=t.endTickRectId}if(n[t.endTickRectId]){n[t.endTickRectId].rect.attr(o);var l=t.startTickRectId/r,u=t.endTickRectId/r;this.graph.emit(FT,{value:[l,u]})}},e.prototype.destory=function(){this.graph.off(FT);var e=this.sliceGroup;e.off("click"),e.off("dragstart"),e.off("dragover"),e.off("drop"),this.tickRects.forEach((function(e){var t=e.pickRect;t.off("mouseenter"),t.off("mouseleave")})),this.tickRects.length=0,e.off("playPauseBtn:click"),e.off("nextStepBtn:click"),e.off("preStepBtn:click"),e.off(BT),this.sliceGroup.destroy()},e}();const _L=bL;var wL=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),xL=function(){return xL=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},xL.apply(this,arguments)},ML=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},EL=function(e){function t(t){return e.call(this,t)||this}return wL(t,e),t.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-component-timebar",padding:10,type:"trend",trend:{data:[],isArea:!1,smooth:!0},controllerCfg:{speed:1,loop:!1},slider:{start:.1,end:.9,minText:"min",maxText:"max"},tick:{start:.1,end:.9,data:[]},textStyle:{},filterEdge:!1}},t.prototype.initContainer=function(){var e,t,n=this.get("graph"),r=this._cfgs,i=r.width,o=r.height,a=this.get("className")||"g6-component-timebar",s=this.get("container"),l=this.get("graph").get("container");s?((0,b.isString)(s)&&(s=document.getElementById(s)),e=s):rS(e=KE("<div class='"+a+"'></div>"),{position:"relative"}),l.appendChild(e),this.set("timeBarContainer",e),t="SVG"===n.get("renderer")?new mh({container:e,width:i,height:o}):new cd({container:e,width:i,height:o}),this.set("canvas",t)},t.prototype.init=function(){this.initContainer();var e=this.get("canvas").addGroup({name:"timebar-group"});this.set("timeBarGroup",e),this.renderTrend(),this.initEvent();var t="undefined"!=typeof window&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif";this.set("fontFamily",t)},t.prototype.renderTrend=function(){var e=this._cfgs,t=e.width,n=e.x,r=e.y,i=e.padding,o=e.type,a=e.trend,s=e.slider,l=e.controllerCfg,u=e.textStyle,c=e.tick,d=e.backgroundStyle,h=e.foregroundStyle,f=a.data,p=ML(a,["data"]),m=t-2*i,g="trend"===o?26:4,v=this.get("graph"),y=this.get("timeBarGroup"),b=this.get("canvas"),_=null;"trend"===o||"simple"===o?_=new fL(xL(xL({graph:v,canvas:b,group:y,type:o,x:n+i,y:"trend"===o?r+i:r+i+15,width:m,height:g,padding:i,backgroundStyle:d,foregroundStyle:h,trendCfg:xL(xL({},p),{data:f.map((function(e){return e.value}))})},s),{tick:{ticks:f,tickLabelFormatter:c.tickLabelFormatter,tickLabelStyle:c.tickLabelStyle,tickLineStyle:c.tickLineStyle},handlerStyle:xL(xL({},s.handlerStyle),{height:s.height||g}),controllerCfg:l,textStyle:u})):"tick"===o&&(_=new _L(xL({graph:v,canvas:b,group:y,x:n+i,y:r+i},c))),this.set("timebar",_)},t.prototype.filterData=function(e){var t,n=e.value,r=null,i=this._cfgs.type;if("trend"===i||"simple"===i?r=this._cfgs.trend.data:"tick"===i&&(r=this._cfgs.tick.data),r&&0!==r.length){var o=this.get("rangeChange"),a=this.get("graph"),s=Math.round(r.length*n[0]),l=Math.round(r.length*n[1]);l=l>=r.length?r.length-1:l,s=s>=r.length?r.length-1:s;var u=null===(t=this._cfgs.tick)||void 0===t?void 0:t.tickLabelFormatter,c=u?u(r[s]):r[s].date,d=u?u(r[l]):r[l].date;if("tick"!==i)this.get("timebar").setText(c,d);if(o)o(a,c,d);else{(!this.cacheGraphData||this.cacheGraphData.nodes&&0===this.cacheGraphData.nodes.length)&&(this.cacheGraphData=a.get("data"));var h=this.cacheGraphData.nodes.filter((function(e){return e.date>=r[s].date&&e.date<=r[l].date})),f=h.map((function(e){return e.id})),p=[];this.cacheGraphData.edges&&(p=this.cacheGraphData.edges.filter((function(e){return f.includes(e.source)&&f.includes(e.target)})),this.get("filterEdge")&&(p=p.filter((function(e){return e.date>=r[s].date&&e.date<=r[l].date})))),a.changeData({nodes:h,edges:p})}}else console.warn(" TimeBar ")},t.prototype.initEvent=function(){var e=this,t=0,n=0,r=this._cfgs.type;r&&"trend"!==r&&"simple"!==r?"tick"===r&&(t=this._cfgs.tick.start,n=this._cfgs.tick.end):(t=this._cfgs.slider.start,n=this._cfgs.slider.end);var i=this.get("graph");i.on("afterrender",(function(r){e.filterData({value:[t,n]})})),i.on(FT,(0,b.throttle)((function(t){e.filterData(t)}),200,{trailing:!0,leading:!0}))},t.prototype.destroy=function(){var t=this.get("timebar");t&&t.destory&&t.destory(),e.prototype.destroy.call(this);var n=this.get("timeBarContainer");if(n){var r=this.get("container");r||(r=this.get("graph").get("container")),(0,b.isString)(r)&&(r=document.getElementById(r)),r.removeChild(n)}},t}(oS);const SL=EL;var kL=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),TL=Tu.applyMatrix;var LL=function(e){function t(t){return e.call(this,t)||this}return kL(t,e),t.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",width:200,delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0}},t.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},t.prototype.disableRefresh=function(){this.set("refresh",!1)},t.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},t.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},t.prototype.initViewport=function(){var e=this,t=this._cfgs,n=t.graph;if(!this.destroyed){var r=this.get("container");(0,b.isString)(r)&&(r=document.getElementById(r));var i=KE("<div class="+t.viewportClassName+"\n      style='position:absolute;\n        left:0;\n        top:0;\n        box-sizing:border-box;\n        border: 2px solid #1980ff'>\n      </div>"),o=0,a=0,s=!1,l=0,u=0,c=0,d=0,h=0,f=0;r.addEventListener("mousedown",(function(r){if(t.refresh=!1,r.target===i){var l=i.style;c=parseInt(l.width,10),d=parseInt(l.height,10);var u=e.get("width"),p=e.get("height");c>u||d>p||(f=n.getZoom(),h=e.get("ratio"),s=!0,o=r.clientX,a=r.clientY)}}),!1),r.addEventListener("mousemove",(function(t){if(s&&!(0,b.isNil)(t.clientX)&&!(0,b.isNil)(t.clientY)){var r=e.get("width"),p=e.get("height"),m=i.style;l=parseInt(m.left,10),u=parseInt(m.top,10),c=parseInt(m.width,10),d=parseInt(m.height,10);var g=o-t.clientX,v=a-t.clientY;l-g<0?g=l:l-g+c>=r&&(g=0),u-v<0?v=u:u-v+d>=p&&(v=0),rS(i,{left:(l-=g)+"px",top:(u-=v)+"px"}),n.translate(g*f/h,v*f/h),o=t.clientX,a=t.clientY}}),!1),r.addEventListener("mouseleave",(function(){s=!1,t.refresh=!0}),!1),r.addEventListener("mouseup",(function(){s=!1,t.refresh=!0}),!1),this.set("viewport",i),r.appendChild(i)}},t.prototype.updateViewport=function(){if(!this.destroyed){var e=this.get("ratio"),t=this.get("width"),n=this.get("height"),r=this.get("graph"),i=r.get("width"),o=i/r.get("height"),a=r.getGroup(),s=a.getCanvasBBox(),l=[(s.minX+s.maxX)/2,(s.minY+s.maxY)/2],u=[s.maxX-s.minX,s.maxY-s.minY],c={centerX:l[0],centerY:l[1],width:0,height:0,minX:0,minY:0};s[0]/s[1]>o?(c.width=u[0],c.height=c.width/o):(c.height=u[1],c.width=c.height*o),c.minX=l[0]-c.width/2,c.minY=l[1]-c.height/2;var d=a.getMatrix();d||(d=[1,0,0,0,1,0,0,0,1]);var h=N([1,0,0,0,1,0,0,0,1],d),f=TL({x:c.minX,y:c.minY},h),p=r.getCanvasByPoint(f.x,f.y),m=this.get("viewport");m||this.initViewport();var g=i/c.width,v=g*t,y=g*n,b=t*-p.x/c.width,_=n*-p.y/c.height,w=b+v,x=_+y;b<0&&(v+=b,b=0),w>t&&(v-=w-t),_<0&&(y+=_,_=0),x>n&&(y-=x-n),this.set("ratio",e),rS(m,{left:b+"px",top:_+"px",width:v+"px",height:y+"px"})}},t.prototype.init=function(){this.initContainer()},t.prototype.initContainer=function(){var e=this,t=e.get("graph"),n=t.get("width"),r=t.get("height")/n,i=e.get("className"),o=e.get("container"),a=e.get("width"),s=e.get("height");a||s||(a=200),a?(s=r*a,e.set("height",s)):(a=1/r*s,e.set("width",a));var l=KE("<div class='"+i+"' style='width: "+a+"px; height: "+s+"px; overflow: hidden; position: relative;'></div>");(0,b.isString)(o)&&(o=document.getElementById(o)),o?o.appendChild(l):t.get("container").appendChild(l),e.set("container",l);var u=KE('<div class="g6-minimap-container" style="position: relative; width: 100%; height: 100%; text-align: center; display: table;"></div>');l.appendChild(u);var c=KE('<span style="display: table-cell; vertical-align: middle; "></span>');u.appendChild(c),e.set("containerDOM",u),e.set("containerSpan",c);var d=KE('<img alt="" src="'+this.get("graphImg")+'" style="display: inline-block; user-select: none;" draggable="false" />');e.set("imgDOM",d),e.updateImgSize(),c.appendChild(d),e.updateCanvas()},t.prototype.updateImgSize=function(){var e=this,t=e.get("imgDOM"),n=e.get("width"),r=e.get("height");t.onload=function(){var e=function(e,t){var n,r;if(e.naturalWidth)n=e.naturalWidth,r=e.naturalHeight;else{var i=new Image;i.src=e.src,i.onload=function(){t&&t(i.width,i.height)}}return[n,r]}(t);e[0]>e[1]?t.width=n:t.height=r}},t.prototype.updateCanvas=function(){if(this.get("refresh")){var e=this.get("graph");if(!e.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var t=this.get("width")/e.get("canvas").getCanvasBBox().width;this.set("ratio",t),this.updateViewport()}}},t.prototype.getViewport=function(){return this.get("viewport")},t.prototype.getContainer=function(){return this.get("container")},t.prototype.updateGraphImg=function(e){var t=this;t.get("imgDOM").remove(),t.set("graphImg",e);var n=KE('<img alt="" src="'+e+'" style="display: inline-block;" ondragstart="return false;" onselectstart="return false;"/>');t.set("imgDOM",n),n.src=e,t.updateImgSize(),t.get("containerSpan").appendChild(n),t.updateCanvas()},t.prototype.destroy=function(){var e=this.get("container");e.parentNode.removeChild(e)},t}(oS);const CL=LL;var DL=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),AL=function(){return AL=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},AL.apply(this,arguments)},PL=Tu.distance,OL={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:1,fill:"#fff"},IL=function(e){function t(t){return e.call(this,t)||this}return DL(t,e),t.prototype.getDefaultCfgs=function(){return{type:"both",trigger:"mousemove",r:60,delegateStyle:(0,b.clone)(OL),showLabel:"edge",scaleRBy:"wheel"}},t.prototype.getEvents=function(){var e;switch(this.get("trigger")){case"click":e={click:"filter"};break;case"drag":e={click:"createDelegate"};break;default:e={mousemove:"filter"}}return e},t.prototype.init=function(){var e=this,t=e.get("showLabel"),n="node"===t||"both"===t,r="edge"===t||"both"===t;e.set("showNodeLabel",n),e.set("showEdgeLabel",r),e.get("shouldShow")||e.set("shouldShow",(function(){return!0}))},t.prototype.createDelegate=function(e){var t=this,n=t.get("delegate");n&&!n.destroyed||(t.filter(e),(n=t.get("delegate")).on("dragstart",(function(e){})),n.on("drag",(function(e){t.filter(e)})),"wheel"===this.get("scaleRBy")&&n.on("mousewheel",(function(e){t.scaleRByWheel(e)})))},t.prototype.scaleRByWheel=function(e){var t=this;if(e&&e.originalEvent){e.preventDefault&&e.preventDefault();var n,r=t.get("graph"),i=t.get("delegate");(i?{x:i.attr("x"),y:i.attr("y")}:void 0)||r.getPointByClient(e.clientX,e.clientY);n=e.originalEvent.wheelDelta<0?.95:1/.95;var o=t.get("maxR"),a=t.get("minR"),s=t.get("r");(s>(o||r.get("height"))&&n>1||s<(a||.05*r.get("height"))&&n<1)&&(n=1),s*=n,t.set("r",s),t.filter(e)}},t.prototype.filter=function(e){var t=this,n=t.get("graph"),r=n.getNodes(),i={},o=t.get("r"),a=t.get("type"),s={x:e.x,y:e.y};t.updateDelegate(s,o);var l=t.get("shouldShow"),u=t.get("vShapes");u&&u.forEach((function(e){e.remove(),e.destroy()})),u=[],r.forEach((function(e){var t=e.getModel(),n=t.x,r=t.y;PL({x:n,y:r},s)<o&&(i[t.id]=e)}));var c=n.getEdges(),d=[];c.forEach((function(e){var t=e.getModel(),n=t.source,r=t.target;l(t)&&("only-source"===a||"one"===a?i[n]&&!i[r]&&d.push(e):"only-target"===a||"one"===a?i[r]&&!i[n]&&d.push(e):"both"===a&&i[n]&&i[r]&&d.push(e))}));var h=t.get("showNodeLabel"),f=t.get("showEdgelabel"),p=n.get("group");d.forEach((function(e){e.get("group").get("children").forEach((function(e){var t=e.get("type"),n=p.addShape(t,{attrs:e.attr()});u.push(n),h&&"text"===t&&n.set("visible",!0)}))})),Object.keys(i).forEach((function(e){var t=i[e].get("group").clone();if(p.add(t),u.push(t),f)for(var n=t.get("children"),r=0;r<n.length;r++){var o=n[r];"text"===o.get("type")&&o.set("visible",!0)}})),t.set("vShapes",u)},t.prototype.updateParams=function(e){var t=this,n=e.r,r=e.trigger,i=e.minR,o=e.maxR,a=e.scaleRBy,s=e.showLabel,l=e.shouldShow;if(isNaN(e.r)||t.set("r",n),isNaN(o)||t.set("maxR",o),isNaN(i)||t.set("minR",i),"mousemove"!==r&&"click"!==r||t.set("trigger",r),"wheel"===a||"unset"===a){t.set("scaleRBy",a),t.get("delegate").remove(),t.get("delegate").destroy();var u=t.get("dPercentText");u&&(u.remove(),u.destroy())}"node"!==s&&"both"!==s||t.set("showNodeLabel",!0),"edge"!==s&&"both"!==s||t.set("showEdgeLabel",!0),l&&t.set("shouldShow",l)},t.prototype.updateDelegate=function(e,t){var n=this,r=n.get("graph"),i=n.get("delegate");if(!i||i.destroyed){var o=r.get("group"),a=n.get("delegateStyle")||OL;i=o.addShape("circle",{attrs:AL({r:t,x:e.x,y:e.y},a),name:"lens-shape",draggable:!0}),"drag"!==this.get("trigger")&&"wheel"===this.get("scaleRBy")&&i.on("mousewheel",(function(e){n.scaleRByWheel(e)}))}else i.attr({x:e.x,y:e.y,r:t});n.set("delegate",i)},t.prototype.clear=function(){var e=this,t=e.get("vShapes");t&&t.forEach((function(e){e.remove(),e.destroy()})),t=[],e.set("vShapes",t);var n=e.get("delegate");n&&!n.destroyed&&(n.remove(),n.destroy())},t.prototype.destroy=function(){this.clear()},t}(oS);const RL=IL;var NL=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),YL=Tu.pointLineDistance,jL={stroke:"#FA8C16",lineWidth:1},FL=function(e){function t(t){return e.call(this,t)||this}return NL(t,e),t.prototype.getDefaultCfgs=function(){return{line:jL,itemAlignType:"center",tolerance:5,horizontalLines:{},verticalLines:{},alignLines:[]}},t.prototype.init=function(){},t.prototype.getEvents=function(){return{"node:dragstart":"onDragStart","node:drag":"onDrag","node:dragend":"onDragEnd"}},t.prototype.onDragStart=function(){this.initBoxLine()},t.prototype.onDrag=function(e){var t=e.item,n=(t.get("delegateShape")||t).getBBox(),r=t.getModel(),i=r.x-n.x,o=r.y-n.y;this.show({x:n.minX+i,y:n.minY+o},{width:n.width,height:n.height})},t.prototype.onDragEnd=function(){this.destory()},t.prototype.initBoxLine=function(){var e=this._cfgs,t=e.horizontalLines,n=e.verticalLines,r=e.itemAlignType;this.get("graph").getNodes().forEach((function(e){var i=e.getBBox(),o=e.get("id");!0===r||"horizontal"===r?(t[o+"tltr"]=[i.minX,i.minY,i.maxX,i.minY,e],t[o+"lcrc"]=[i.minX,i.centerY,i.maxX,i.centerY,e],t[o+"blbr"]=[i.minX,i.maxY,i.maxX,i.maxY,e]):"center"===r&&(t[o+"lcrc"]=[i.minX,i.centerY,i.maxX,i.centerY,e]),!0===r||"vertical"===r?(n[o+"tlbl"]=[i.minX,i.minY,i.minX,i.maxY,e],n[o+"tcbc"]=[i.centerX,i.minY,i.centerX,i.maxY,e],n[o+"trbr"]=[i.maxX,i.minY,i.maxX,i.maxY,e]):"center"===r&&(n[o+"tcbc"]=[i.centerX,i.minY,i.centerX,i.maxY,e])}))},t.prototype.show=function(e,t){var n=(0,b.mix)({},e);return this.itemAlign(e,t,n),e},t.prototype.itemAlign=function(e,t,n){var r=this,i=this._cfgs,o=i.horizontalLines,a=i.verticalLines,s=i.tolerance,l={x:n.x+t.width/2,y:n.y},u={x:n.x+t.width/2,y:n.y+t.height/2},c={x:n.x+t.width/2,y:n.y+t.height},d={x:n.x,y:n.y+t.height/2},h={x:n.x+t.width,y:n.y+t.height/2},f=[],p=[],m=null;if(this.clearAlignLine(),(0,b.each)(o,(function(e){e[4].isVisible&&(f.push(r.getLineDisObject(e,l)),f.push(r.getLineDisObject(e,u)),f.push(r.getLineDisObject(e,c)))})),(0,b.each)(a,(function(e){e[4].isVisible&&(p.push(r.getLineDisObject(e,d)),p.push(r.getLineDisObject(e,u)),p.push(r.getLineDisObject(e,h)))})),f.sort((function(e,t){return e.dis-t.dis})),p.sort((function(e,t){return e.dis-t.dis})),0!==f.length&&f[0].dis<s){e.y=f[0].line[1]-f[0].point.y+n.y,m={type:"item",horizontals:[f[0]]};for(var g=1;g<3;g++)f[0].dis===f[g].dis&&m.horizontals.push(f[g])}if(0!==p.length&&p[0].dis<s){e.x=p[0].line[0]-p[0].point.x+n.x,m?m.verticals=[p[0]]:m={type:"item",verticals:[p[0]]};for(g=1;g<3;g++)p[0].dis===p[g].dis&&m.verticals.push(p[g])}m&&(m.bbox=t,this.addAlignLine(m))},t.prototype.addAlignLine=function(e){var t=e.bbox,n=e.type,r=e.horizontals,i=e.verticals,o=this._cfgs,a=o.line,s=o.alignLines,l=this.get("graph").get("group");"item"===n&&(r&&(0,b.each)(r,(function(e){var n,r,i=e.line,o=e.point,u=(i[0]+i[2])/2;o.x<u?(n=o.x-t.width/2,r=Math.max(i[0],i[2])):(n=o.x+t.width/2,r=Math.min(i[0],i[2]));var c=(0,b.mix)({x1:n,y1:i[1],x2:r,y2:i[1]},a),d=l.addShape("line",{attrs:c,capture:!1});s.push(d)})),i&&(0,b.each)(i,(function(e){var n,r,i=e.line,o=e.point,u=(i[1]+i[3])/2;o.y<u?(n=o.y-t.height/2,r=Math.max(i[1],i[3])):(n=o.y+t.height/2,r=Math.min(i[1],i[3]));var c=(0,b.mix)({x1:i[0],y1:n,x2:i[0],y2:r},a),d=l.addShape("line",{attrs:c,capture:!1});s.push(d)})))},t.prototype.getLineDisObject=function(e,t){return{line:e,point:t,dis:YL(e,t)}},t.prototype.getContainer=function(){return this.get("container")},t.prototype.clearAlignLine=function(){var e=this._cfgs.alignLines;(0,b.each)(e,(function(e){e.remove()})),e.length=0},t.prototype.destory=function(){var e=this._cfgs,t=e.horizontalLines,n=e.verticalLines;this.get("graph").getNodes().forEach((function(e){var r=e.get("id");delete t[r+"tltr"],delete t[r+"lcrc"],delete t[r+"blbr"],delete n[r+"tlbl"],delete n[r+"tcbc"],delete n[r+"trbr"]})),this.clearAlignLine()},t}(oS);const BL=FL;var zL=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),HL=function(){return HL=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},HL.apply(this,arguments)},GL=["click","mouseenter"],WL=function(e){function t(t){return e.call(this,t)||this}return zL(t,e),t.prototype.getDefaultCfgs=function(){return{data:{},position:"top",padding:8,margin:8,offsetX:0,offsetY:0,layout:"horizontal",flipPage:!1,containerStyle:{},align:void 0,horiSep:8,vertiSep:8,filter:{enable:!1,trigger:"click"}}},t.prototype.init=function(){this.formatArray("padding"),this.formatArray("margin");var e=this.get("filter")||{};e.multiple&&"mouseenter"===e.trigger&&this.set("multiple",!1);var t=this.get("align");if(!t){var n=this.get("position").split("-");n.includes("left")&&(t="left"),t=n.includes("right")?"right":"center",this.set("align",t)}var r=this.get("graph").get("container"),i=KE("<div class='g6-legend-container' style=\"position: absolute;\"></div>");r.appendChild(i),this.set("container",i);var o=this.render();rS(i,this.getContainerPos(o)),this.bindEvents()},t.prototype.getContainerPos=function(e){void 0===e&&(e=[0,0]);var t=this.get("graph"),n=this.get("offsetX"),r=this.get("offsetY"),i=this.get("margin"),o=this.get("position").split("-"),a={top:0,right:1,bottom:2,left:3},s={left:(t.getWidth()-e[0])/2+0,top:(t.getHeight()-e[1])/2+0};return o.forEach((function(n){var r=i[a[n]],o=n;switch(n){case"top":case"left":r+=0;break;case"bottom":r=t.getHeight()-e[1]-r+0,o="top";break;default:r=t.getWidth()-e[0]-r+0,o="left"}s[o]=r})),s.top+=r+t.getContainer().offsetTop,s.left+=n+t.getContainer().offsetLeft,Object.keys(s).forEach((function(e){s[e]=s[e]+"px"})),s},t.prototype.bindEvents=function(){var e=this,t=e.get("filter");if(t&&t.enable){var n=t.trigger||"click";GL.includes(n)||(console.warn("Trigger for legend filterling must be 'click' or 'mouseenter', 'click' will take effect by default."),n="click");var r=e.get("legendCanvas");"mouseenter"===n?(r.on("node-container:mouseenter",(function(t){return e.filterData(t)})),r.on("node-container:mouseleave",(function(t){e.clearFilter(),e.clearActiveLegend()}))):(r.on("node-container:click",(function(t){return e.filterData(t)})),r.on("click",(function(t){t.target&&t.target.isCanvas&&t.target.isCanvas()&&(e.clearFilter(),e.clearActiveLegend())})))}},t.prototype.changeData=function(e){this.set("data",e);var t=this.render();rS(this.get("container"),this.getContainerPos(t))},t.prototype.activateLegend=function(e){var t=this.get("filter");(null==t?void 0:t.multiple)||this.clearActiveLegend();var n=e.get("parent");n.get("active")?(n.set("active",!1),this.findLegendItemsByState("active").length&&n.set("inactive",!0)):(n.set("inactive",!1),n.set("active",!0)),this.findLegendItemsByState("active").length?this.findLegendItemsByState("active","all",!1).forEach((function(e){e.set("inactive",!0)})):this.clearActiveLegend();var r=(null==t?void 0:t.lengedStateStyles)||{},i=(null==r?void 0:r.inactive)||{opacity:.5,"text-shape":{opacity:.5}},o=i["text-shape"]||{};this.findLegendItemsByState("inactive").forEach((function(e){var t=e.get("children"),n=t[0],r=t[1];n.attr(HL(HL({},n.get("oriAttrs")),i)),r.attr(HL(HL({},r.get("oriAttrs")),o))}));var a=(null==r?void 0:r.active)||{stroke:"#000",lineWidth:2,"text-shape":{fontWeight:"bold"}},s=a["text-shape"]||{};this.findLegendItemsByState("active").forEach((function(e){var t=e.get("children"),n=t[0],r=t[1];n.attr(HL(HL({},n.get("oriAttrs")),a)),r.attr(HL(HL({},r.get("oriAttrs")),s))}))},t.prototype.findLegendItemsByState=function(e,t,n){void 0===t&&(t="all"),void 0===n&&(n=!0);var r=this.get("legendCanvas").find((function(e){return"root"===e.get("name")})),i=r.find((function(e){return"node-group"===e.get("name")})),o=r.find((function(e){return"edge-group"===e.get("name")}));return"node"===t?i.get("children").filter((function(t){return!!t.get(e)===n})):"edge"===t?o.get("children").filter((function(t){return!!t.get(e)===n})):i.get("children").filter((function(t){return!!t.get(e)===n})).concat(o.get("children").filter((function(t){return!!t.get(e)===n})))},t.prototype.clearActiveLegend=function(){var e=this.get("legendCanvas").find((function(e){return"root"===e.get("name")})),t=[e.find((function(e){return"node-group"===e.get("name")})),e.find((function(e){return"edge-group"===e.get("name")}))];t.forEach((function(e){e.get("children").forEach((function(e){e.set("active",!1),e.set("inactive",!1);var t=e.get("children"),n=t[0],r=t[1];n.attr(n.get("oriAttrs")),r.attr(r.get("oriAttrs"))}))}))},t.prototype.filterData=function(e){var t=this.get("filter"),n=null==t?void 0:t.filterFunctions;if(t&&n){var r=this.get("legendCanvas"),i=this.get("graph"),o=t.graphActiveState||"active",a=t.graphInactiveState||"inactive",s=t.multiple;this.clearFilter(),s||this.clearActiveLegend(),this.activateLegend(e.target);var l=r.find((function(e){return"root"===e.get("name")})),u=l.find((function(e){return"node-group"===e.get("name")})),c=l.find((function(e){return"edge-group"===e.get("name")})),d=u.get("children").filter((function(e){return e.get("active")})),h=c.get("children").filter((function(e){return e.get("active")})),f=0,p=["getNodes","getEdges"];p.forEach((function(e){i[e]().forEach((function(t){var r=!1;("getNodes"===e?d:h).forEach((function(e){var i=n[e.get("id")];r=r||i(t.getModel())})),r?(i.setItemState(t,a,!1),i.setItemState(t,o,!0),f++):(i.setItemState(t,o,!1),i.setItemState(t,a,!0))}))})),f||p.forEach((function(e){i[e]().forEach((function(e){i.clearItemStates(e,[a])}))}))}},t.prototype.clearFilter=function(){var e=this.get("graph"),t=this.get("filter");if(t){var n=t.graphActiveState||"active",r=t.graphInactiveState||"inactive";e.getNodes().forEach((function(t){e.clearItemStates(t,[n,r])})),e.getEdges().forEach((function(t){e.clearItemStates(t,[n,r])}))}},t.prototype.render=function(){var e=this;this.processData();var t=this.get("legendCanvas");if(!t){var n=(t=new cd({container:this.get("container"),width:200,height:200})).addGroup({name:"root"});n.addGroup({name:"node-group"}),n.addGroup({name:"edge-group"}),this.set("legendCanvas",t)}var r=t.find((function(e){return"root"===e.get("name")})),i=r.find((function(e){return"node-group"===e.get("name")})),o=r.find((function(e){return"edge-group"===e.get("name")})),a=this.get("itemsData"),s=[i,o];["nodes","edges"].forEach((function(t,n){a[t].forEach((function(r){var i,o,a=s[n].addGroup({id:r.id,name:"node-container"}),l=r.type,u=e.getShapeSize(r),c=u.width,d=u.height,h=u.r,f=e.getStyle(t.substr(0,4),r);switch(r.type){default:o={r:h,x:0,y:0};break;case"rect":o={width:c,height:d,x:-c/2,y:-d/2};break;case"ellipse":o={r1:c,r2:d,x:0,y:0};break;case"line":o={x1:-c/2,y1:0,x2:c/2,y2:0},l="line";break;case"quadratic":o={path:[["M",-c/2,0],["Q",0,c/2,c/2,0]]},l="path";break;case"cubic":o={path:[["M",-c/2,0],["C",-c/6,c/2,c/6,-c/2,c/2,0]]},l="path"}var p=a.addShape(l,{attrs:HL(HL({},o),f),name:r.type+"-node-keyShape",oriAttrs:HL({opacity:1},f)});if(r.label){var m=p.getBBox(),g=(null===(i=r.labelCfg)||void 0===i?void 0:i.style)||{},v=HL({textAlign:"begin",fontSize:12,textBaseline:"middle",fill:"#000",opacity:1,fontWeight:"normal"},g);a.addShape("text",{attrs:HL({x:m.maxX+4,y:0,text:r.label},v),className:"legend-label",name:r.type+"-node-text",oriAttrs:v})}}))}));var l,u=this.get("padding"),c=r.find((function(e){return"title-container"===e.get("name")})),d={height:0,maxY:0,width:0};if(this.get("title")){c||(c=r.addGroup({name:"title-container"}));var h={fontSize:20,fontFamily:"Arial",fontWeight:300,textBaseline:"top",textAlign:"center",fill:"#000",x:0,y:u[0]},f=this.get("titleConfig")||{},p=Object.assign(h,f.style||{});l=c.addShape("text",{attrs:HL({text:this.get("title")},p)}),d=c.getCanvasBBox(),c.setMatrix([1,0,0,0,1,0,f.offsetX,f.offsetY,1])}this.layoutItems();var m=r.getCanvasBBox(),g=i.getCanvasBBox(),v=g.minX<0?Math.abs(g.minX)+u[3]:u[3],y=d.maxY<g.minY?Math.abs(d.maxY-g.minY)+u[0]:d.maxY+u[0],b=[1,0,0,0,1,0,v,y,1];i.setMatrix(b);var _=[(m=r.getCanvasBBox()).minX+m.width+u[1],m.minY+m.height+u[2]];if(l){f=HL({position:"center",offsetX:0,offsetY:0},this.get("titleConfig"));d=c.getCanvasBBox();var w=c.getMatrix()||[1,0,0,0,1,0,0,0,1];"center"===f.position?w[6]=_[0]/2+f.offsetX:"right"===f.position?(w[6]=_[0]-u[3]+f.offsetX,l.attr({textAlign:"right"})):(w[6]=u[3]+f.offsetX,l.attr({textAlign:"left"})),c.setMatrix(w),d=c.getCanvasBBox(),b=[1,0,0,0,1,0,v=g.minX<0?Math.abs(g.minX)+u[3]:u[3],y=g.minY<d.maxY?Math.abs(d.maxY-g.minY)+u[0]:d.maxY+u[0],1],i.setMatrix(b);var x=[1,0,0,0,1,0,v,y,1];"vertical"===this.get("layout")?x[6]+=g.maxX+this.get("horiSep"):x[7]+=g.maxY+this.get("vertiSep"),o.setMatrix(x)}else{g=i.getCanvasBBox();var M=[1,0,0,0,1,0,0,0,1];"vertical"===this.get("layout")?M[6]+=b[6]+g.maxX+this.get("horiSep"):M[7]+=b[7]+g.maxY+this.get("vertiSep"),o.setMatrix(M)}m=r.getCanvasBBox(),g=i.getCanvasBBox(),b=i.getMatrix()||[1,0,0,0,1,0,0,0,1];var E=o.getMatrix()||[1,0,0,0,1,0,0,0,1],S=o.getCanvasBBox();_=[Math.max(g.width+b[6],S.width+E[6])+u[1],Math.max(g.height+b[7],S.height+E[7])+u[2]],t.changeSize(_[0],_[1]);var k=this.get("containerStyle"),T=r.getMatrix()||[1,0,0,0,1,0,0,0,1],L=Tu.invertMatrix({x:0,y:0},T);return r.addShape("rect",{attrs:HL({x:L.x+(k.lineWidth||1),y:L.y+(k.lineWidth||1),width:_[0]-2*(k.lineWidth||1),height:_[1]-2*(k.lineWidth||1),fill:"#f00",stroke:"#000",lineWidth:1,opacity:.5},k),name:"legend-back-rect",capture:!1}).toBack(),_},t.prototype.layoutItems=function(){var e=this.get("legendCanvas"),t=this.get("horiSep"),n=this.get("vertiSep"),r=this.get("layout"),i=this.get("align"),o=[0,0],a=e.find((function(e){return"root"===e.get("name")})),s=a.find((function(e){return"node-group"===e.get("name")})),l=a.find((function(e){return"edge-group"===e.get("name")})),u={min:0,max:-1/0},c=-1/0;s.get("children").forEach((function(e,i){0===i&&(u.min=o[0]);var a=e.get("children")[0],s=e.getCanvasBBox(),l=a.getBBox(),d=l.width,h=l.height,f=0,p=0,m=0;"vertical"===r?(p=o[1],m=o[0]+d/2,o[0]=m+s.height+n,f=s.maxX+p+d/2):(p=o[0]+d/2,m=o[1],o[0]=p+s.width+t,f=s.maxY+m+h/2),o[0]>u.max&&(u.max=o[0]),f>c&&(c=f),e.setMatrix([1,0,0,0,1,0,p,m,1])}));var d=u.max-u.min,h={min:0,max:-1/0},f=s.getCanvasBBox();o[0]=0,o[1]="vertical"===r?f.maxX+t:f.maxY+n,l.get("children").forEach((function(e,i){0===i&&(h.min=o[0]);var a=e.get("children")[0],s=e.getCanvasBBox(),l=a.getBBox(),u=l.width,c=l.height,d=0,f=0;"vertical"===r?(d=o[1],f=o[0],o[0]=f+s.height+n,e.setMatrix([1,0,0,0,1,0,0,f+c/2,1])):(d=o[0],f=o[1],o[0]=d+s.width+t,e.setMatrix([1,0,0,0,1,0,d+u/2,0,1])),o[0]>h.max&&(h.max=o[0])}));var p=h.max-h.min;if(i&&""!==i&&"left"!==i){var m=d-p,g="center"===i?Math.abs(m)/2:Math.abs(m);(m<0?s:l).get("children").forEach((function(e){var t=e.getMatrix()||[1,0,0,0,1,0,0,0,1];"vertical"===r?t[7]+=g:t[6]+=g,e.setMatrix(t)}))}},t.prototype.processData=function(){var e=this.get("data"),t={nodes:[],edges:[]};e.nodes&&(e.nodes.sort((function(e,t){return e.order-t.order})),e.nodes.forEach((function(e){var n,r,i,o,a,s=e.size||[(null===(n=e.style)||void 0===n?void 0:n.width)||(null===(r=e.style)||void 0===r?void 0:r.r)||8,(null===(i=e.style)||void 0===i?void 0:i.height)||(null===(o=e.style)||void 0===o?void 0:o.r)||8],l=(null===(a=e.labelCfg)||void 0===a?void 0:a.style)||{};t.nodes.push({id:e.id||(0,b.uniqueId)(),type:e.type||"circle",style:HL({},e.style),order:e.order,label:e.label,itemType:"node",size:s,labelCfg:{position:"right",style:HL({fontFamily:"Arial"},l)}})}))),e.edges&&(e.edges.sort((function(e,t){return e.order-t.order})),e.edges.forEach((function(e){var n,r,i=e.type||"line";"cubic-horizontal"===e.type&&(i="cubic");var o=(null===(n=e.labelCfg)||void 0===n?void 0:n.style)||{},a=e.size||[(null===(r=e.style)||void 0===r?void 0:r.width)||8,1];t.edges.push({id:e.id||(0,b.uniqueId)(),type:i,size:a,style:HL({lineWidth:(0,b.isArray)(a)?a[1]:1},e.style),order:e.order,label:e.label,itemType:"edge",labelCfg:{position:"right",style:HL({fontFamily:"Arial"},o)}})}))),this.set("itemsData",t)},t.prototype.getContainer=function(){return this.get("container")},t.prototype.formatArray=function(e){var t=this.get(e);if((0,b.isNumber)(t))this.set(e,[t,t,t,t]);else if((0,b.isArray)(t))switch(t.length){case 0:this.set(e,[0,0,0,0]);break;case 1:this.set(e,[t[0],t[0],t[0],t[0]]);break;case 2:this.set(e,[t[0],t[1],t[0],t[1]]);break;case 3:this.set(e,[t[0],t[1],t[2],t[1]])}return this.get(e)},t.prototype.getShapeSize=function(e){var t,n,r;return e.size&&((0,b.isArray)(e.size)?(t=e.size[0],n=e.size[1]||e.size[0],r=e.size[0]/2):(0,b.isNumber)(e.size)&&(t=e.size,n=e.size,r=e.size/2)),e.style&&(e.style.width&&(t=e.style.width),e.style.height&&(n=e.style.height),e.style.r&&(r=e.style.r)),r||(r=5),t||(t=r),n||(n=r),{width:t,height:n,r}},t.prototype.getStyle=function(e,t){return HL(HL({},"node"===e?{fill:"#ccc",lineWidth:0}:{stroke:"#000",lineWidth:1}),t.style||{})},t.prototype.destroy=function(){var e=this.get("graph").get("container"),t=this.get("container");e.removeChild(t)},t}(oS);const UL={PluginBase:oS,Menu:mS,Grid:cS,Minimap:wS,Bundling:kS,ToolBar:IS,Tooltip:YS,Fisheye:AS,TimeBar:SL,ImageMinimap:CL,EdgeFilterLens:RL,SnapLine:BL,Legend:WL};Ou("circle",{options:{size:Yu.defaultNode.size,style:{x:0,y:0,stroke:Yu.defaultNode.style.stroke,fill:Yu.defaultNode.style.fill,lineWidth:Yu.defaultNode.style.lineWidth},labelCfg:{style:{fill:Yu.nodeLabel.style.fill,fontSize:Yu.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Yu.defaultNode.linkPoints.size,lineWidth:Yu.defaultNode.linkPoints.lineWidth,fill:Yu.defaultNode.linkPoints.fill,stroke:Yu.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,y.__assign)({},Yu.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(e,t){var n=this.getOptions(e).icon,r=void 0===n?{}:n,i=this.getShapeStyle(e),o=(0,b.deepMix)({},r,e.icon),a=t.addShape("circle",{attrs:i,className:this.type+"-keyShape",draggable:!0}),s=o.width,l=o.height,u=o.show,c=o.text;return u&&(c?t.addShape("text",{attrs:(0,y.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},o),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}):t.addShape("image",{attrs:(0,y.__assign)({x:-s/2,y:-l/2},o),className:this.type+"-icon",name:this.type+"-icon",draggable:!0})),this.drawLinkPoints(e,t),a},drawLinkPoints:function(e,t){var n=this.getOptions(e).linkPoints,r=void 0===n?{}:n,i=r.top,o=r.left,a=r.right,s=r.bottom,l=r.size,u=r.r,c=(0,y.__rest)(r,["top","left","right","bottom","size","r"]),d=this.getSize(e)[0]/2;o&&t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},c),{x:-d,y:0,r:l/2||u||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),a&&t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},c),{x:d,y:0,r:l/2||u||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),i&&t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},c),{x:0,y:-d,r:l/2||u||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),s&&t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},c),{x:0,y:d,r:l/2||u||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},getShapeStyle:function(e){var t=this.getOptions(e).style,n={stroke:e.color},r=(0,b.deepMix)({},t,n),i=this.getSize(e)[0]/2;return(0,y.__assign)({x:0,y:0,r:i},r)},update:function(e,t){var n=t.getContainer(),r=this.getSize(e),i={stroke:e.color,r:r[0]/2},o=t.get("keyShape"),a=(0,b.deepMix)({},o.attr(),i,e.style);this.updateShape(e,t,a,!0),this.updateLinkPoints(e,n)}},"single-node"),Ou("rect",{options:{size:[100,30],style:{radius:0,stroke:Yu.defaultNode.style.stroke,fill:Yu.defaultNode.style.fill,lineWidth:Yu.defaultNode.style.lineWidth},labelCfg:{style:{fill:Yu.nodeLabel.style.fill,fontSize:Yu.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Yu.defaultNode.linkPoints.size,lineWidth:Yu.defaultNode.linkPoints.lineWidth,fill:Yu.defaultNode.linkPoints.fill,stroke:Yu.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,y.__assign)({},Yu.nodeStateStyles)},shapeType:"rect",labelPosition:"center",drawShape:function(e,t){var n=this.getShapeStyle(e),r=t.addShape("rect",{attrs:n,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0});return this.drawLinkPoints(e,t),r},drawLinkPoints:function(e,t){var n=this.getOptions(e).linkPoints,r=void 0===n?{}:n,i=r.top,o=r.left,a=r.right,s=r.bottom,l=r.size,u=r.r,c=(0,y.__rest)(r,["top","left","right","bottom","size","r"]),d=this.getSize(e),h=d[0],f=d[1];o&&t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},c),{x:-h/2,y:0,r:l/2||u||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),a&&t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},c),{x:h/2,y:0,r:l/2||u||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),i&&t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},c),{x:0,y:-f/2,r:l/2||u||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),s&&t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},c),{x:0,y:f/2,r:l/2||u||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},getShapeStyle:function(e){var t=this.getOptions(e).style,n={stroke:e.color},r=(0,b.mix)({},t,n),i=this.getSize(e),o=r.width||i[0],a=r.height||i[1];return(0,y.__assign)({x:-o/2,y:-a/2,width:o,height:a},r)},update:function(e,t){var n=t.getContainer(),r=this.getOptions({}).style,i=this.getSize(e),o=t.get("keyShape");e.size||(i[0]=o.attr("width")||r.width,i[1]=o.attr("height")||r.height);var a={stroke:e.color,x:-i[0]/2,y:-i[1]/2,width:i[0],height:i[1]},s=(0,b.mix)({},r,o.attr(),a);s=(0,b.mix)(s,e.style),this.updateShape(e,t,s,!1),this.updateLinkPoints(e,n)}},"single-node"),Ou("ellipse",{options:{size:[80,40],style:{x:0,y:0,stroke:Yu.defaultNode.style.stroke,fill:Yu.defaultNode.style.fill,lineWidth:Yu.defaultNode.style.lineWidth},labelCfg:{style:{fill:Yu.nodeLabel.style.fill,fontSize:Yu.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Yu.defaultNode.linkPoints.size,lineWidth:Yu.defaultNode.linkPoints.lineWidth,fill:Yu.defaultNode.linkPoints.fill,stroke:Yu.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,y.__assign)({},Yu.nodeStateStyles)},shapeType:"ellipse",labelPosition:"center",drawShape:function(e,t){var n=this.getOptions(e).icon,r=void 0===n?{}:n,i=this.getShapeStyle(e),o=t.addShape("ellipse",{attrs:i,className:"ellipse-keyShape",name:"ellipse-keyShape",draggable:!0}),a=r.width,s=r.height,l=r.show,u=r.text;return l&&(u?t.addShape("text",{attrs:(0,y.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},r),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}):t.addShape("image",{attrs:(0,y.__assign)({x:-a/2,y:-s/2},r),className:this.type+"-icon",name:this.type+"-icon",draggable:!0})),this.drawLinkPoints(e,t),o},drawLinkPoints:function(e,t){var n=this.getOptions(e).linkPoints,r=void 0===n?{}:n,i=r.top,o=r.left,a=r.right,s=r.bottom,l=r.size,u=r.r,c=(0,y.__rest)(r,["top","left","right","bottom","size","r"]),d=this.getSize(e),h=d[0]/2,f=d[1]/2;o&&t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},c),{x:-h,y:0,r:l/2||u||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),a&&t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},c),{x:h,y:0,r:l/2||u||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),i&&t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},c),{x:0,y:-f,r:l/2||u||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),s&&t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},c),{x:0,y:f,r:l/2||u||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},getShapeStyle:function(e){var t=this.getOptions(e).style,n={stroke:e.color},r=(0,b.mix)({},t,n),i=this.getSize(e),o=i[0]/2,a=i[1]/2;return(0,y.__assign)({x:0,y:0,rx:o,ry:a},r)},update:function(e,t){var n=t.getContainer(),r=this.getOptions({}).style,i=this.getSize(e),o={stroke:e.color,rx:i[0]/2,ry:i[1]/2},a=t.get("keyShape"),s=(0,b.mix)({},r,a.attr(),o);s=(0,b.mix)(s,e.style),this.updateShape(e,t,s,!0),this.updateLinkPoints(e,n)}},"single-node"),Ou("diamond",{options:{size:[80,80],style:{stroke:Yu.defaultNode.style.stroke,fill:Yu.defaultNode.style.fill,lineWidth:Yu.defaultNode.style.lineWidth},labelCfg:{style:{fill:Yu.nodeLabel.style.fill,fontSize:Yu.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Yu.defaultNode.linkPoints.size,lineWidth:Yu.defaultNode.linkPoints.lineWidth,fill:Yu.defaultNode.linkPoints.fill,stroke:Yu.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,y.__assign)({},Yu.nodeStateStyles)},shapeType:"diamond",labelPosition:"center",drawShape:function(e,t){var n=this.getOptions(e).icon,r=void 0===n?{}:n,i=this.getShapeStyle(e),o=t.addShape("path",{attrs:i,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0}),a=r.width,s=r.height,l=r.show,u=r.text;return l&&(u?t.addShape("text",{attrs:(0,y.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},r),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}):t.addShape("image",{attrs:(0,y.__assign)({x:-a/2,y:-s/2},r),className:this.type+"-icon",name:this.type+"-icon",draggable:!0})),this.drawLinkPoints(e,t),o},drawLinkPoints:function(e,t){var n=this.getOptions(e).linkPoints,r=void 0===n?{}:n,i=r.top,o=r.left,a=r.right,s=r.bottom,l=r.size,u=r.r,c=(0,y.__rest)(r,["top","left","right","bottom","size","r"]),d=this.getSize(e),h=d[0],f=d[1];o&&t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},c),{x:-h/2,y:0,r:l/2||u||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),a&&t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},c),{x:h/2,y:0,r:l/2||u||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),i&&t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},c),{x:0,y:-f/2,r:l/2||u||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),s&&t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},c),{x:0,y:f/2,r:l/2||u||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},getPath:function(e){var t=this.getSize(e),n=t[0],r=t[1];return[["M",0,-r/2],["L",n/2,0],["L",0,r/2],["L",-n/2,0],["Z"]]},getShapeStyle:function(e){var t=this.getOptions(e).style,n={stroke:e.color},r=(0,b.mix)({},t,n),i=this.getPath(e);return(0,y.__assign)({path:i},r)},update:function(e,t){var n=t.getContainer(),r=this.getOptions({}).style,i=this.getPath(e),o={stroke:e.color,path:i},a=t.get("keyShape"),s=(0,b.mix)({},r,a.attr(),o);s=(0,b.mix)(s,e.style),this.updateShape(e,t,s,!0),this.updateLinkPoints(e,n)}},"single-node"),Ou("triangle",{options:{size:40,direction:"up",style:{stroke:Yu.defaultNode.style.stroke,fill:Yu.defaultNode.style.fill,lineWidth:Yu.defaultNode.style.lineWidth},labelCfg:{style:{fill:Yu.nodeLabel.style.fill,fontSize:Yu.nodeLabel.style.fontSize},offset:15},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Yu.defaultNode.linkPoints.size,lineWidth:Yu.defaultNode.linkPoints.lineWidth,fill:Yu.defaultNode.linkPoints.fill,stroke:Yu.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20,offset:6},stateStyles:(0,y.__assign)({},Yu.nodeStateStyles)},shapeType:"triangle",labelPosition:"bottom",drawShape:function(e,t){var n=this.getOptions(e),r=n.icon,i=void 0===r?{}:r,o=n.direction,a=this.getShapeStyle(e),s=e.direction||o,l=t.addShape("path",{attrs:a,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0}),u=i.width,c=i.height,d=i.show,h=i.offset,f=i.text;if(d)if(f)t.addShape("text",{attrs:(0,y.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},i),className:this.type+"-icon",name:this.type+"-icon",draggable:!0});else{var p=-u/2,m=-c/2;"up"!==s&&"down"!==s||(m+=h),"left"!==s&&"right"!==s||(p+=h),t.addShape("image",{attrs:(0,y.__assign)({x:p,y:m},i),className:this.type+"-icon",name:this.type+"-icon",draggable:!0})}return this.drawLinkPoints(e,t),l},drawLinkPoints:function(e,t){var n=this.getOptions(e),r=n.linkPoints,i=void 0===r?{}:r,o=n.direction,a=e.direction||o,s=i.top,l=i.left,u=i.right,c=i.bottom,d=i.size,h=i.r,f=(0,y.__rest)(i,["top","left","right","bottom","size","r"]),p=this.getSize(e)[0];if(l){var m=null,g=p*Math.sin(1/3*Math.PI),v=p*Math.sin(1/3*Math.PI);"up"===a?m=[-v,g]:"down"===a?m=[-v,-g]:"left"===a&&(m=[-v,v-g]),m&&t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},f),{x:m[0],y:m[1],r:d/2||h||5}),className:"link-point-left",name:"link-point-left"})}if(u){var b=null;g=p*Math.sin(1/3*Math.PI),v=p*Math.sin(1/3*Math.PI);"up"===a?b=[v,g]:"down"===a?b=[v,-g]:"right"===a&&(b=[v,v-g]),b&&t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},f),{x:b[0],y:b[1],r:d/2||h||5}),className:"link-point-right",name:"link-point-right"})}if(s){var _=null;g=p*Math.sin(1/3*Math.PI),v=p*Math.sin(1/3*Math.PI);"up"===a?_=[v-g,-g]:"left"===a?_=[v,-g]:"right"===a&&(_=[-v,-g]),_&&t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},f),{x:_[0],y:_[1],r:d/2||h||5}),className:"link-point-top",name:"link-point-top"})}if(c){var w=null;g=p*Math.sin(1/3*Math.PI),v=p*Math.sin(1/3*Math.PI);"down"===a?w=[-v+g,g]:"left"===a?w=[v,g]:"right"===a&&(w=[-v,g]),w&&t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},f),{x:w[0],y:w[1],r:d/2||h||5}),className:"link-point-bottom",name:"link-point-bottom"})}},getPath:function(e){var t=this.getOptions(e).direction,n=e.direction||t,r=this.getSize(e)[0],i=r*Math.sin(1/3*Math.PI),o=r*Math.sin(1/3*Math.PI),a=[["M",-o,i],["L",0,-i],["L",o,i],["Z"]];return"down"===n?a=[["M",-o,-i],["L",o,-i],["L",0,i],["Z"]]:"left"===n?a=[["M",-o,o-i],["L",o,-o],["L",o,o],["Z"]]:"right"===n&&(a=[["M",o,o-i],["L",-o,o],["L",-o,-o],["Z"]]),a},getShapeStyle:function(e){var t=this.getOptions(e).style,n={stroke:e.color},r=(0,b.mix)({},t,n),i=this.getPath(e);return(0,y.__assign)({path:i},r)},update:function(e,t){var n=t.getContainer(),r=this.getOptions({}).style,i=this.getPath(e),o={stroke:e.color,path:i},a=t.get("keyShape"),s=(0,b.mix)({},r,a.attr(),o);s=(0,b.mix)(s,e.style),this.updateShape(e,t,s,!0),this.updateLinkPoints(e,n)},updateLinkPoints:function(e,t){var n=this.getOptions({}),r=n.linkPoints,i=n.direction,o=e.direction||i,a=t.find((function(e){return"link-point-left"===e.get("className")})),s=t.find((function(e){return"link-point-right"===e.get("className")})),l=t.find((function(e){return"link-point-top"===e.get("className")})),u=t.find((function(e){return"link-point-bottom"===e.get("className")})),c=r,d=a||s||l||u;d&&(c=d.attr());var h=(0,b.mix)({},c,e.linkPoints),f=h.fill,p=h.stroke,m=h.lineWidth,g=h.size/2;g||(g=h.r);var v=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},_=v.left,w=v.right,x=v.top,M=v.bottom,E=this.getSize(e)[0],S={r:g,fill:f,stroke:p,lineWidth:m},k=null,T=E*Math.sin(1/3*Math.PI),L=E*Math.sin(1/3*Math.PI);"up"===o?k=[-L,T]:"down"===o?k=[-L,-T]:"left"===o&&(k=[-L,L-T]),k&&(a?_||void 0===_?a.attr((0,y.__assign)((0,y.__assign)({},S),{x:k[0],y:k[1]})):a.remove():_&&t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},S),{x:k[0],y:k[1]}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}));var C=null;"up"===o?C=[L,T]:"down"===o?C=[L,-T]:"right"===o&&(C=[L,L-T]),C&&(s?w||void 0===w?s.attr((0,y.__assign)((0,y.__assign)({},S),{x:C[0],y:C[1]})):s.remove():w&&t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},S),{x:C[0],y:C[1]}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}));var D=null;"up"===o?D=[L-T,-T]:"left"===o?D=[L,-T]:"right"===o&&(D=[-L,-T]),D&&(l?x||void 0===x?l.attr((0,y.__assign)((0,y.__assign)({},S),{x:D[0],y:D[1]})):l.remove():x&&t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},S),{x:D[0],y:D[1]}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}));var A=null;"down"===o?A=[-L+T,T]:"left"===o?A=[L,T]:"right"===o&&(A=[-L,T]),A&&(u?M||void 0===M?u.attr((0,y.__assign)((0,y.__assign)({},S),{x:A[0],y:A[1]})):u.remove():M&&t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},S),{x:A[0],y:A[1]}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))}},"single-node"),Ou("modelRect",{options:{size:[185,70],style:{radius:5,stroke:"#69c0ff",fill:"#ffffff",lineWidth:Yu.defaultNode.style.lineWidth,fillOpacity:1},labelCfg:{style:{fill:"#595959",fontSize:14},offset:30},descriptionCfg:{style:{fontSize:12,fill:"#bfbfbf"},paddingTop:0},preRect:{show:!0,width:4,fill:"#40a9ff",radius:2},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:10,lineWidth:1,fill:"#72CC4A",stroke:"#72CC4A"},logoIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/4f81893c-1806-4de4-aff3-9a6b266bc8a2.svg",width:16,height:16,offset:0},stateIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/300a2523-67e0-4cbf-9d4a-67c077b40395.svg",width:16,height:16,offset:-5},anchorPoints:[[0,.5],[1,.5]]},shapeType:"modelRect",drawShape:function(e,t){var n=this.getOptions(e).preRect,r=void 0===n?{}:n,i=this.getShapeStyle(e),o=this.getSize(e),a=o[0],s=o[1],l=t.addShape("rect",{attrs:i,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0}),u=r.show,c=(0,y.__rest)(r,["show"]);return u&&t.addShape("rect",{attrs:(0,y.__assign)({x:-a/2,y:-s/2,height:s},c),className:"pre-rect",name:"pre-rect",draggable:!0}),this.drawLogoIcon(e,t),this.drawStateIcon(e,t),this.drawLinkPoints(e,t),l},drawLogoIcon:function(e,t){var n=this.getOptions(e).logoIcon,r=void 0===n?{}:n,i=this.getSize(e)[0];if(r.show){var o=r.width,a=r.height,s=r.x,l=r.y,u=r.offset,c=r.text,d=(0,y.__rest)(r,["width","height","x","y","offset","text"]);c?t.addShape("text",{attrs:(0,y.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},d),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0}):t.addShape("image",{attrs:(0,y.__assign)((0,y.__assign)({},d),{x:s||-i/2+o+u,y:l||-a/2,width:o,height:a}),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0})}},drawStateIcon:function(e,t){var n=this.getOptions(e).stateIcon,r=void 0===n?{}:n,i=this.getSize(e)[0];if(r.show){var o=r.width,a=r.height,s=r.x,l=r.y,u=r.offset,c=r.text,d=(0,y.__rest)(r,["width","height","x","y","offset","text"]);c?t.addShape("text",{attrs:(0,y.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},d),className:"rect-state-icon",name:"rect-state-icon",draggable:!0}):t.addShape("image",{attrs:(0,y.__assign)((0,y.__assign)({},d),{x:s||i/2-o+u,y:l||-a/2,width:o,height:a}),className:"rect-state-icon",name:"rect-state-icon",draggable:!0})}},drawLinkPoints:function(e,t){var n=this.getOptions(e).linkPoints,r=void 0===n?{}:n,i=r.top,o=r.left,a=r.right,s=r.bottom,l=r.size,u=r.r,c=(0,y.__rest)(r,["top","left","right","bottom","size","r"]),d=this.getSize(e),h=d[0],f=d[1];o&&t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},c),{x:-h/2,y:0,r:l/2||u||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),a&&t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},c),{x:h/2,y:0,r:l/2||u||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),i&&t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},c),{x:0,y:-f/2,r:l/2||u||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),s&&t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},c),{x:0,y:f/2,r:l/2||u||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},drawLabel:function(e,t){var n=this.getOptions(e),r=n.labelCfg,i=void 0===r?{}:r,o=n.logoIcon,a=void 0===o?{}:o,s=n.descriptionCfg,l=void 0===s?{}:s,u=this.getSize(e)[0],c=null,d=a.show,h=a.width,f=-u/2+i.offset;d&&(f=-u/2+h+i.offset);var p=i.style,m=l.style,g=l.paddingTop;return(0,b.isString)(e.description)?(c=t.addShape("text",{attrs:(0,y.__assign)((0,y.__assign)({},p),{x:f,y:-5,text:e.label}),className:"text-shape",name:"text-shape",draggable:!0}),t.addShape("text",{attrs:(0,y.__assign)((0,y.__assign)({},m),{x:f,y:17+(g||0),text:e.description}),className:"rect-description",name:"rect-description",draggable:!0})):c=t.addShape("text",{attrs:(0,y.__assign)((0,y.__assign)({},p),{x:f,y:7,text:e.label}),className:"text-shape",name:"text-shape",draggable:!0}),c},getShapeStyle:function(e){var t=this.getOptions(e).style,n={stroke:e.color},r=(0,b.mix)({},t,n),i=this.getSize(e),o=r.width||i[0],a=r.height||i[1];return(0,y.__assign)({x:-o/2,y:-a/2,width:o,height:a},r)},update:function(e,t){var n=this.getOptions(e),r=n.style,i=void 0===r?{}:r,o=n.labelCfg,a=void 0===o?{}:o,s=n.descriptionCfg,l=void 0===s?{}:s,u=this.getSize(e),c=u[0],d=u[1];t.get("keyShape").attr((0,y.__assign)((0,y.__assign)({},i),{x:-c/2,y:-d/2,width:c,height:d}));var h=t.getContainer(),f=h.find((function(e){return"rect-logo-icon"===e.get("className")})),p=f?f.attr():{},m=(0,b.mix)({},p,e.logoIcon),g=m.width;void 0===g&&(g=this.options.logoIcon.width);var v=e.logoIcon?e.logoIcon.show:void 0,_=a.offset,w=-c/2+g+_;v||void 0===v||(w=-c/2+_);var x=h.find((function(e){return"node-label"===e.get("className")})),M=h.find((function(e){return"rect-description"===e.get("className")}));if(e.label)if(x){var E=e.labelCfg?e.labelCfg.style:{},S=(0,b.mix)({},x.attr(),E);e.label&&(S.text=e.label),S.x=w,(0,b.isString)(e.description)&&(S.y=-5),M&&(M.resetMatrix(),M.attr({x:w})),x.resetMatrix(),x.attr(S)}else h.addShape("text",{attrs:(0,y.__assign)((0,y.__assign)({},a.style),{x:w,y:e.description?-5:7,text:e.label}),className:"node-label",name:"node-label",draggable:!0});if((0,b.isString)(e.description)){var k=l.paddingTop;if(M){E=e.descriptionCfg?e.descriptionCfg.style:{};var T=(0,b.mix)({},M.attr(),E);(0,b.isString)(e.description)&&(T.text=e.description),T.x=w,M.resetMatrix(),M.attr((0,y.__assign)((0,y.__assign)({},T),{y:17+(k||0)}))}else h.addShape("text",{attrs:(0,y.__assign)((0,y.__assign)({},l.style),{x:w,y:17+(k||0),text:e.description}),className:"rect-description",name:"rect-description",draggable:!0})}var L=h.find((function(e){return"pre-rect"===e.get("className")}));if(L){var C=(0,b.mix)({},L.attr(),e.preRect);L.attr((0,y.__assign)((0,y.__assign)({},C),{x:-c/2,y:-d/2,height:d}))}if(f)if(v||void 0===v){var D=m.width,A=m.height,P=m.x,O=m.y,I=m.offset,R=(0,y.__rest)(m,["width","height","x","y","offset"]);f.attr((0,y.__assign)((0,y.__assign)({},R),{x:P||-c/2+D+I,y:O||-A/2,width:D,height:A}))}else f.remove();else v&&this.drawLogoIcon(e,h);var N=h.find((function(e){return"rect-state-icon"===e.get("className")})),Y=N?N.attr():{},j=(0,b.mix)({},Y,e.stateIcon);if(N){j.show||void 0===j.show||N.remove();var F=j.width,B=(A=j.height,P=j.x,O=j.y,j.offset),z=(0,y.__rest)(j,["width","height","x","y","offset"]);N.attr((0,y.__assign)((0,y.__assign)({},z),{x:P||c/2-F+B,y:O||-A/2,width:F,height:A}))}else j.show&&this.drawStateIcon(e,h);this.updateLinkPoints(e,h)}},"single-node"),Ou("star",{options:{size:60,style:{stroke:Yu.defaultNode.style.stroke,fill:Yu.defaultNode.style.fill,lineWidth:Yu.defaultNode.style.lineWidth},labelCfg:{style:{fill:Yu.nodeLabel.style.fill,fontSize:Yu.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Yu.defaultNode.linkPoints.size,lineWidth:Yu.defaultNode.linkPoints.lineWidth,fill:Yu.defaultNode.linkPoints.fill,stroke:Yu.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,y.__assign)({},Yu.nodeStateStyles)},shapeType:"star",labelPosition:"center",drawShape:function(e,t){var n=this.getOptions(e).icon,r=void 0===n?{}:n,i=this.getShapeStyle(e),o=t.addShape("path",{attrs:i,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0}),a=r.width,s=r.height,l=r.show,u=r.text;return l&&(u?t.addShape("text",{attrs:(0,y.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},r),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}):t.addShape("image",{attrs:(0,y.__assign)({x:-a/2,y:-s/2},r),className:this.type+"-icon",name:this.type+"-icon",draggable:!0})),this.drawLinkPoints(e,t),o},drawLinkPoints:function(e,t){var n=this.getOptions(e).linkPoints,r=void 0===n?{}:n,i=r.top,o=r.left,a=r.right,s=r.leftBottom,l=r.rightBottom,u=r.size,c=r.r,d=(0,y.__rest)(r,["top","left","right","leftBottom","rightBottom","size","r"]),h=this.getSize(e)[0];if(a){var f=Math.cos(.1*Math.PI)*h,p=Math.sin(.1*Math.PI)*h;t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},d),{x:f,y:-p,r:u/2||c||5}),className:"link-point-right",name:"link-point-right"})}if(i){f=Math.cos(.5*Math.PI)*h,p=Math.sin(.5*Math.PI)*h;t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},d),{x:f,y:-p,r:u/2||c||5}),className:"link-point-top",name:"link-point-top"})}if(o){f=Math.cos(.9*Math.PI)*h,p=Math.sin(.9*Math.PI)*h;t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},d),{x:f,y:-p,r:u/2||c||5}),className:"link-point-left",name:"link-point-left"})}if(s){f=Math.cos(1.3*Math.PI)*h,p=Math.sin(1.3*Math.PI)*h;t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},d),{x:f,y:-p,r:u/2||c||5}),className:"link-point-left-bottom",name:"link-point-left-bottom"})}if(l){f=Math.cos(1.7*Math.PI)*h,p=Math.sin(1.7*Math.PI)*h;t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},d),{x:f,y:-p,r:u/2||c||5}),className:"link-point-right-bottom",name:"link-point-right-bottom"})}},getPath:function(e){for(var t=this.getSize(e)[0],n=3*t/8,r=e.innerR||n,i=[],o=0;o<5;o++){var a=Math.cos((18+72*o)/180*Math.PI)*t,s=Math.sin((18+72*o)/180*Math.PI)*t,l=Math.cos((54+72*o)/180*Math.PI)*r,u=Math.sin((54+72*o)/180*Math.PI)*r;0===o?i.push(["M",a,-s]):i.push(["L",a,-s]),i.push(["L",l,-u])}return i.push(["Z"]),i},getShapeStyle:function(e){var t=this.getOptions(e).style,n={stroke:e.color},r=(0,b.mix)({},t,n),i=this.getPath(e);return(0,y.__assign)({path:i},r)},update:function(e,t){var n=t.getContainer(),r=this.getOptions({}).style,i=this.getPath(e),o={stroke:e.color,path:i},a=t.get("keyShape"),s=(0,b.mix)({},r,a.attr(),o);s=(0,b.mix)(s,e.style),this.updateShape(e,t,s,!0),this.updateLinkPoints(e,n)},updateLinkPoints:function(e,t){var n=this.getOptions({}).linkPoints,r=t.find((function(e){return"link-point-left"===e.get("className")})),i=t.find((function(e){return"link-point-right"===e.get("className")})),o=t.find((function(e){return"link-point-top"===e.get("className")})),a=t.find((function(e){return"link-point-left-bottom"===e.get("className")})),s=t.find((function(e){return"link-point-right-bottom"===e.get("className")})),l=n,u=r||i||o||a||s;u&&(l=u.attr());var c=(0,b.mix)({},l,e.linkPoints),d=c.fill,h=c.stroke,f=c.lineWidth,p=c.size/2;p||(p=c.r);var m=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,leftBottom:void 0,rightBottom:void 0},g=m.left,v=m.right,_=m.top,w=m.leftBottom,x=m.rightBottom,M=this.getSize(e)[0],E={r:p,fill:d,stroke:h,lineWidth:f},S=Math.cos(.1*Math.PI)*M,k=Math.sin(.1*Math.PI)*M;i?v||void 0===v?i.attr((0,y.__assign)((0,y.__assign)({},E),{x:S,y:-k})):i.remove():v&&t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},E),{x:S,y:-k}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),S=Math.cos(.5*Math.PI)*M,k=Math.sin(.5*Math.PI)*M,o?_||void 0===_?o.attr((0,y.__assign)((0,y.__assign)({},E),{x:S,y:-k})):o.remove():_&&t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},E),{x:S,y:-k}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),S=Math.cos(.9*Math.PI)*M,k=Math.sin(.9*Math.PI)*M,r?g||void 0===g?r.attr((0,y.__assign)((0,y.__assign)({},E),{x:S,y:-k})):r.remove():g&&t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},E),{x:S,y:-k}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),S=Math.cos(1.3*Math.PI)*M,k=Math.sin(1.3*Math.PI)*M,a?w||void 0===w?a.attr((0,y.__assign)((0,y.__assign)({},E),{x:S,y:-k})):a.remove():w&&t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},E),{x:S,y:-k}),className:"link-point-left-bottom",name:"link-point-left-bottom",isAnchorPoint:!0}),S=Math.cos(1.7*Math.PI)*M,k=Math.sin(1.7*Math.PI)*M,s?x||void 0===x?s.attr((0,y.__assign)((0,y.__assign)({},E),{x:S,y:-k})):a.remove():x&&t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},E),{x:S,y:-k}),className:"link-point-right-bottom",name:"link-point-right-bottom",isAnchorPoint:!0})}},"single-node");var VL=Tu.defaultSubjectColors;Ou("donut",{options:{size:Yu.defaultNode.size,style:{x:0,y:0,stroke:Yu.defaultNode.style.stroke,fill:Yu.defaultNode.style.fill,lineWidth:Yu.defaultNode.style.lineWidth},labelCfg:{style:{fill:Yu.nodeLabel.style.fill,fontSize:Yu.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Yu.defaultNode.linkPoints.size,lineWidth:Yu.defaultNode.linkPoints.lineWidth,fill:Yu.defaultNode.linkPoints.fill,stroke:Yu.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,y.__assign)({},Yu.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(e,t){var n=this.getOptions(e).icon,r=void 0===n?{}:n,i=this.getShapeStyle(e),o=(0,b.deepMix)({},r,e.icon),a=t.addShape("circle",{attrs:i,className:this.type+"-keyShape",draggable:!0,name:this.type+"-keyShape"}),s=o.width,l=o.height,u=o.show,c=o.text;u&&(c?t.addShape("text",{attrs:(0,y.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},o),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}):t.addShape("image",{attrs:(0,y.__assign)({x:-s/2,y:-l/2},o),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}));var d=a.attr("r"),h=.6*d,f=(d+h)/2,p=e,m=p.donutAttrs,g=void 0===m?{}:m,v=p.donutColorMap,_=void 0===v?{}:v,w=Object.keys(g).length;if(g&&w>1){var x=[],M=0;if(Object.keys(g).forEach((function(e){var t=g[e]||0;(0,b.isNumber)(t)&&(x.push({key:e,value:t,color:_[e]}),M+=t)})),M){var E=d-h;if(1===w)return void t.addShape("circle",{attrs:{r:f,x:0,y:0,stroke:x[0].color||VL[0],lineWidth:E},name:"fan-shape-0"});var S=[f,0],k=0;x.forEach((function(e,n){var r=e.value/M;if(!(r<.001))if(r>.999&&(r=1),1!==r){e.percent=r,e.angle=r*Math.PI*2,e.beginAgnle=k,k+=e.angle,e.endAngle=k,e.arcBegin=S,e.arcEnd=[f*Math.cos(e.endAngle),-f*Math.sin(e.endAngle)];var i=e.angle>Math.PI?1:0,o=[["M",e.arcBegin[0],e.arcBegin[1]],["A",f,f,0,i,0,e.arcEnd[0],e.arcEnd[1]],["L",e.arcEnd[0],e.arcEnd[1]]];t.addShape("path",{attrs:{path:o,lineWidth:E,stroke:e.color||VL[n%VL.length]},name:"fan-shape-"+n}),S=e.arcEnd}else t.addShape("circle",{attrs:{r:f,x:0,y:0,stroke:e.color||VL[n%VL.length],lineWidth:E},name:"fan-shape-"+n})}))}}return this.drawLinkPoints(e,t),a},update:void 0},"circle");var XL=function(e){var t=e.x,n=e.y;return{x:t,y:n,centerX:t,centerY:n,minX:t,minY:n,maxX:t,maxY:n,height:0,width:0}},qL=function(e){for(var t=[],n={},r=e.length-1;r>=0;r--){var i=e[r];i.id=i.x+"|||"+i.y,n[i.id]=i,t.push(i)}return t},KL=function(e){return qL(e)},JL=function(e,t){return e.width||e.height?{centerX:e.centerX,centerY:e.centerY,minX:e.minX-t,minY:e.minY-t,maxX:e.maxX+t,maxY:e.maxY+t,height:e.height+2*t,width:e.width+2*t}:e},ZL=function(e,t,n){var r=function(e,t){var n=Math.abs(e.x-t.centerX),r=Math.abs(e.y-t.centerY);return 0===n&&0===r?0:n/t.width>r/t.height}(t,e);if(0===r){var i=e.centerX,o=e.centerY;return n.y<t.y?o=e.minY:n.x>t.x?i=e.maxX:n.x<t.x?i=e.minX:n.x===t.x&&(o=e.maxY),{x:i,y:o}}return r?{x:t.x>e.centerX?e.maxX:e.minX,y:t.y}:{x:t.x,y:t.y>e.centerY?e.maxY:e.minY}},$L=function(e,t){var n=Math.min(e.minX,t.minX),r=Math.min(e.minY,t.minY),i=Math.max(e.maxX,t.maxX),o=Math.max(e.maxY,t.maxY);return{centerX:(n+i)/2,centerY:(r+o)/2,minX:n,minY:r,maxX:i,maxY:o,height:o-r,width:i-n}},QL=function(e){return[{x:e.minX,y:e.minY},{x:e.maxX,y:e.minY},{x:e.maxX,y:e.maxY},{x:e.minX,y:e.maxY}]},eC=function(e,t){var n=e.x,r=e.y;return n<t.minX||n>t.maxX||r<t.minY||r>t.maxY},tC=function(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},nC=function(e,t,n,r,i){return tC(e,t)+tC(e,n)+function(e,t){var n=0;return t.forEach((function(t){t&&(e.x===t.x&&(n+=-2),e.y===t.y&&(n+=-2))})),n}(e,[t,n,r,i])},rC=function e(t,n,r,i,o){void 0===o&&(o=0),t.unshift(n[i]),r[i]&&r[i]!==i&&o<=100&&e(t,n,r,r[i],o+1)},iC=function(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)},oC=function(e,t,n,r){var i=n.x-e.x,o=n.y-e.y,a=r.x-e.x,s=r.y-e.y,l=n.x-t.x,u=n.y-t.y,c=r.x-t.x,d=r.y-t.y;return(i*s-o*a)*(l*d-u*c)<=0&&(i*u-o*l)*(a*d-s*c)<=0},aC=function(e,t,n){if(n.width||n.height){var r=QL(n),i=r[0],o=r[1],a=r[2],s=r[3];return oC(e,t,i,o)||oC(e,t,i,s)||oC(e,t,o,a)||oC(e,t,a,s)}return!1},sC=function(e,t,n,r){var i=[];return e.forEach((function(e){if(e!==t&&(e.x===t.x||e.y===t.y)){if(aC(e,t,n)||aC(e,t,r))return;i.push(e)}})),qL(i)},lC=function(e,t){var n=[],r=e[0];return n.push("M"+r.x+" "+r.y),e.forEach((function(r,i){var o=e[i+1],a=e[i+2];if(o&&a)if(function(e,t,n){return!(e.x===t.x&&t.x===n.x||e.y===t.y&&t.y===n.y)}(r,o,a)){var s=function(e,t,n,r){var i=tC(e,t),o=tC(n,t);return i<r&&(r=i),o<r&&(r=o),[{x:t.x-r/i*(t.x-e.x),y:t.y-r/i*(t.y-e.y)},{x:t.x-r/o*(t.x-n.x),y:t.y-r/o*(t.y-n.y)}]}(r,o,a,t),l=s[0],u=s[1];n.push("L"+l.x+" "+l.y),n.push("Q"+o.x+" "+o.y+" "+u.x+" "+u.y),n.push("L"+u.x+" "+u.y)}else n.push("L"+o.x+" "+o.y);else o&&n.push("L"+o.x+" "+o.y)})),n.join("")},uC=function(e,t,n,r,i){var o,a;if(n&&n.getType())if("combo"===n.getType()){(o=n.getKeyShape().getCanvasBBox()||XL(e)).centerX=(o.minX+o.maxX)/2,o.centerY=(o.minY+o.maxY)/2}else o=n.getBBox();else o=XL(e);if(r&&r.getType())if("combo"===r.getType()){var s=r.getKeyShape().getBBox();if(s){var l=r.getModel(),u=l.x,c=l.y;(a={x:u,y:c,width:s.width,height:s.height,minX:s.minX+u,maxX:s.maxX+u,minY:s.minY+c,maxY:s.maxY+c}).centerX=(a.minX+a.maxX)/2,a.centerY=(a.minY+a.maxY)/2}else a=XL(t)}else a=r&&r.getBBox();else a=XL(t);var d=JL(o,i),h=JL(a,i),f=ZL(d,e,t),p=ZL(h,t,e),m=function(e){void 0===e&&(e=[]);var t=[],n=[];e.forEach((function(e){t.push(e.x),n.push(e.y)}));var r=Math.min.apply(Math,t),i=Math.max.apply(Math,t),o=Math.min.apply(Math,n),a=Math.max.apply(Math,n);return{centerX:(r+i)/2,centerY:(o+a)/2,maxX:i,maxY:a,minX:r,minY:o,height:a-o,width:i-r}}([f,p]),g=$L(d,m),v=$L(h,m),y=[];y=y.concat(QL(g)).concat(QL(v));var b={x:(e.x+t.x)/2,y:(e.y+t.y)/2};[m,g,v].forEach((function(e){y=y.concat(function(e,t){return function(e,t){return t<e.minX||t>e.maxX?[]:[{x:t,y:e.minY},{x:t,y:e.maxY}]}(e,t.x).concat(function(e,t){return t<e.minY||t>e.maxY?[]:[{x:e.minX,y:t},{x:e.maxX,y:t}]}(e,t.y))}(e,b).filter((function(e){return eC(e,d)&&eC(e,h)})))})),[{x:f.x,y:p.y},{x:p.x,y:f.y}].forEach((function(e){eC(e,d)&&eC(e,h)&&y.push(e)})),y.unshift(f),y.push(p);var _=function(e,t,n,r,i,o,a){var s=[],l=[t],u={},c={},d={};c[t.id]=0,d[t.id]=nC(t,n,t);var h,f,p={};for(e.forEach((function(e){p[e.id]=e}));l.length;){if(h=void 0,f=1/0,l.forEach((function(e){d[e.id]<=f&&(f=d[e.id],h=e)})),h===n){var m=[];return rC(m,p,u,n.id),m}iC(l,h),s.push(h),sC(e,h,r,i).forEach((function(e){if(-1===s.indexOf(e)){-1===l.indexOf(e)&&l.push(e);var r=d[h.id]+tC(h,e);c[e.id]&&r>=c[e.id]||(u[e.id]=h.id,c[e.id]=r,d[e.id]=c[e.id]+nC(e,n,t,o,a))}}))}return[t,n]}(y=qL(y),f,p,o,a,e,t);return _.unshift(e),_.push(t),KL(_)},cC={offset:20,maxAllowedDirectionChange:Math.PI/2,maximumLoops:2e3,gridSize:10,directions:[{stepX:1,stepY:0},{stepX:-1,stepY:0},{stepX:0,stepY:1},{stepX:0,stepY:-1}],get penalties(){return{0:0,45:this.gridSize/2,90:this.gridSize/2}},distFunc:function(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},fallbackRoute:function(e,t,n,r,i){return KL(uC(e,t,n,r,i.offset))}},dC=(Math.PI,function(e,t){var n=Math.round(Math.abs(e/t));return n<0?0:(e<0?-1:1)*n}),hC=function(e,t){var n=t.x-e.x,r=t.y-e.y;return n||r?Math.atan2(r,n):0},fC=function(e,t){var n=Math.abs(e-t);return n>Math.PI?2*Math.PI-n:n},pC=function(e,t,n){for(var r=1/0,i=0,o=t.length;i<o;i++){var a=n(e,t[i]);a<r&&(r=a)}return r},mC=function(e,t,n,r,i){var o=[];if(!n)return[e];var a=i.directions,s=i.offset,l=n.getBBox(),u=t.x>l.minX&&t.x<l.maxX&&t.y>l.minY&&t.y<l.maxY,c=JL(l,s);for(var d in c)c[d]=dC(c[d],i.gridSize);if(u){for(var h=0,f=a;h<f.length;h++){var p=f[h],m=[[{x:c.minX,y:c.minY},{x:c.maxX,y:c.minY}],[{x:c.minX,y:c.minY},{x:c.minX,y:c.maxY}],[{x:c.maxX,y:c.minY},{x:c.maxX,y:c.maxY}],[{x:c.minX,y:c.maxY},{x:c.maxX,y:c.maxY}]];for(d=0;d<4;d++){var g=m[d],v=Tu.getLineIntersect(e,{x:e.x+p.stepX*c.width,y:e.y+p.stepY*c.height},g[0],g[1]);v&&!aC(e,v,l)&&(v.id=v.x+"|||"+v.y,o.push(v))}}return o}var y=ZL(c,e,r);return y.id=y.x+"|||"+y.y,[y]},gC=function(e,t,n,r){var i=hC(e,t);if(!n[e.id]){var o=hC(r,e);return fC(o,i)}var a=hC({x:n[e.id].x,y:n[e.id].y},e);return fC(a,i)},vC=function(e,t,n,r,i,o,a){var s=[r],l=e.id,u=e.x,c=e.y,d={x:u,y:c,id:l};for(gC(d,o,t,n)&&s.unshift({x:o.x===r.x?r.x:d.x*a,y:o.y===r.y?r.y:d.y*a});t[l]&&t[l].id!==l;){var h={x:u,y:c,id:l},f=t[l].id,p=t[l].x,m=t[l].y,g={x:p,y:m,id:f};gC(g,h,t,n)&&s.unshift({x:g.x===h.x?s[0].x:g.x*a,y:g.y===h.y?s[0].y:g.y*a}),l=f,u=p,c=m}var v=u,y=c;return s[0].x=v===n.x?i.x:s[0].x,s[0].y=y===n.y?i.y:s[0].y,s.unshift(i),s},yC=function(e,t,n,r,i){if(isNaN(e.x)||isNaN(t.x))return[];var o=(0,b.deepMix)(cC,i);o.obstacles=o.obstacles||[];var a=o.gridSize,s=function(e,t,n){var r={};return e.forEach((function(e){if(e)for(var i=JL(e.getBBox(),n),o=dC(i.minX,t);o<=dC(i.maxX,t);o+=1)for(var a=dC(i.minY,t);a<=dC(i.maxY,t);a+=1)r[o+"|||"+a]=!0})),r}(o.obstacles.concat([n,r]),a,o.offset),l={x:dC(e.x,a),y:dC(e.y,a)},u={x:dC(t.x,a),y:dC(t.y,a)};e.id=l.x+"|||"+l.y,t.id=u.x+"|||"+u.y;var c=mC(l,e,n,u,o),d=mC(u,t,r,l,o);c.forEach((function(e){delete s[e.id]})),d.forEach((function(e){delete s[e.id]}));for(var h={},f={},p={},m={},g={},v=0;v<c.length;v++){var y=c[v];h[y.id]=y,m[y.id]=0,g[y.id]=pC(y,d,o.distFunc)}for(var _,w,x,M,E,S,k,T=o.maximumLoops,L=o.penalties;Object.keys(h).length>0&&T>0&&(_=void 0,w=1/0,Object.keys(h).forEach((function(e){var t=h[e].id;g[t]<=w&&(w=g[t],_=h[t])})),_);){if(d.findIndex((function(e){return e.x===_.x&&e.y===_.y}))>-1)return vC(_,p,l,t,e,u,a);delete h[_.id],f[_.id]=!0;for(v=0;v<o.directions.length;v++)x=o.directions[v],f[(M={x:_.x+x.stepX,y:_.y+x.stepY,id:Math.round(_.x)+x.stepX+"|||"+(Math.round(_.y)+x.stepY)}).id]||(k=gC(_,M,p,l))>o.maxAllowedDirectionChange||s[M.id]||(h[M.id]||(h[M.id]=M),E=o.distFunc(_,M)+(isNaN(L[k])?a:L[k]),S=m[_.id]+E,m[M.id]&&S>=m[M.id]||(p[M.id]=_,m[M.id]=S,g[M.id]=S+pC(M,d,o.distFunc)));T-=1}return o.fallbackRoute(e,t,n,r,o)};Iu("polyline",{options:{color:Yu.defaultEdge.color,size:Yu.defaultEdge.size,style:{radius:0,offset:15,x:0,y:0,stroke:Yu.defaultEdge.style.stroke,lineAppendWidth:Yu.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:Yu.edgeLabel.style.fill,fontSize:Yu.edgeLabel.style.fontSize}},routeCfg:{obstacles:[],maxAllowedDirectionChange:Math.PI,maximumLoops:500,gridSize:10},stateStyles:(0,y.__assign)({},Yu.edgeStateStyles)},shapeType:"polyline",labelPosition:"center",drawShape:function(e,t){var n=this.getShapeStyle(e);return 0===n.radius&&delete n.radius,t.addShape("path",{className:"edge-shape",name:"edge-shape",attrs:n})},getShapeStyle:function(e){var t=this.options.style,n={stroke:e.color},r=(0,b.mix)({},t,n,e.style);e=this.getPathPoints(e),this.radius=r.radius,this.offset=r.offset;var i=e.startPoint,o=e.endPoint,a=this.getControlPoints(e),s=[i];a&&(s=s.concat(a)),s.push(o);var l=e.sourceNode,u=e.targetNode,c=r.radius,d=this.options.routeCfg,h=(0,b.mix)({},d,e.routeCfg);h.offset=r.offset;var f=this.getPath(s,l,u,c,h);return((0,b.isArray)(f)&&f.length<=1||(0,b.isString)(f)&&-1===f.indexOf("L"))&&(f="M0 0, L0 0"),(isNaN(i.x)||isNaN(i.y)||isNaN(o.x)||isNaN(o.y))&&(f="M0 0, L0 0"),(0,b.mix)({},Yu.defaultEdge.style,r,{lineWidth:e.size,path:f})},updateShapeStyle:function(e,t){var n=t.getContainer();if(t.isVisible()){var r={stroke:e.color},i=n.find((function(e){return"edge-shape"===e.get("className")}))||t.getKeyShape(),o=e.size,a=(e=this.getPathPoints(e)).startPoint,s=e.endPoint,l=this.getControlPoints(e),u=[a];l&&(u=u.concat(l)),u.push(s);var c=i.attr(),d=(0,b.mix)({},r,c,e.style),h=e.sourceNode,f=e.targetNode,p=d.radius,m=this.options.routeCfg,g=(0,b.mix)({},m,e.routeCfg);g.offset=d.offset;var v=this.getPath(u,h,f,p,g);((0,b.isArray)(v)&&v.length<=1||(0,b.isString)(v)&&-1===v.indexOf("L"))&&(v="M0 0, L0 0"),(isNaN(a.x)||isNaN(a.y)||isNaN(s.x)||isNaN(s.y))&&(v="M0 0, L0 0"),c.endArrow&&!1===d.endArrow&&(e.style.endArrow={path:""}),c.startArrow&&!1===d.startArrow&&(e.style.startArrow={path:""});var y=(0,b.mix)(r,i.attr(),{lineWidth:o,path:v},e.style);i&&i.attr(y)}},getPath:function(e,t,n,r,i){var o=i.offset,a=i.simple;if(!o||e.length>2){if(r)return lC(e,r);var s=[];return(0,b.each)(e,(function(e,t){0===t?s.push(["M",e.x,e.y]):s.push(["L",e.x,e.y])})),s}var l=a?uC(e[e.length-1],e[0],n,t,o):yC(e[0],e[e.length-1],t,n,i);return l&&l.length?r?lC(l,r):Tu.pointsToPolygon(l):"M0 0, L0 0"}},"single-edge");var bC=ME.cloneEvent,_C=ME.isNaN,wC=Math.abs,xC=["shift","ctrl","alt","control"];const MC={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,scalableRange:0,allowDragOnItem:!1}},getEvents:function(){return{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"onMouseUp",keyup:"onKeyUp",focus:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onMouseUp"}},updateViewport:function(e){var t=this.origin,n=+e.clientX,r=+e.clientY;if(!_C(n)&&!_C(r)){var i=n-t.x,o=r-t.y;"x"===this.get("direction")?o=0:"y"===this.get("direction")&&(i=0),this.origin={x:n,y:r};var a=this.graph.get("width"),s=this.graph.get("height"),l=this.graph.get("canvas").getCanvasBBox(),u=this.scalableRange,c=this.scalableRange;u<1&&u>-1&&(u*=a,c*=s),(l.minX<=a+u&&l.minX+i>a+u||l.maxX+u>=0&&l.maxX+u+i<0)&&(i=0),(l.minY<=s+c&&l.minY+o>s+c||l.maxY+c>=0&&l.maxY+c+o<0)&&(o=0),this.graph.translate(i,o)}},onTouchStart:function(e){var t=e.originalEvent.touches,n=t[0],r=t[1];n&&r||(e.preventDefault(),this.onMouseDown(e))},onMouseDown:function(e){var t=this,n=e.originalEvent;if((!n||e.name===Pu.TOUCHSTART||0===n.button)&&(e.name===Pu.TOUCHSTART||"undefined"==typeof window||!window.event||window.event.buttons||window.event.button)&&this.shouldBegin.call(this,e)&&!t.keydown){var r=e.target,i=r&&r.isCanvas&&r.isCanvas();if((this.allowDragOnItem||i)&&(t.origin={x:e.clientX,y:e.clientY},t.dragging=!1,this.enableOptimize)){for(var o=this.graph,a=o.getEdges(),s=0,l=a.length;s<l;s++){var u=a[s].get("group").get("children");u&&u.forEach((function(e){e.set("ori-visibility",e.get("ori-visibility")||e.get("visible")),e.hide()}))}for(var c=o.getNodes(),d=0,h=c.length;d<h;d++)for(var f=0,p=c[d].getContainer().get("children");f<p.length;f++){var m=p[f];m.get("isKeyShape")||(m.set("ori-visibility",m.get("ori-visibility")||m.get("visible")),m.hide())}}}},onTouchMove:function(e){var t=e.originalEvent.touches,n=t[0],r=t[1];n&&r?this.onMouseUp(e):(e.preventDefault(),this.onMouseMove(e))},onMouseMove:function(e){var t=this.graph;if(!this.keydown){var n=e.target,r=n&&n.isCanvas&&n.isCanvas();if((this.allowDragOnItem||r)&&(e=bC(e),this.origin)){if(this.dragging)e.type="drag",t.emit("canvas:drag",e);else{if(wC(this.origin.x-e.clientX)+wC(this.origin.y-e.clientY)<10)return;this.shouldBegin.call(this,e)&&(e.type="dragstart",t.emit("canvas:dragstart",e),this.dragging=!0)}this.shouldUpdate.call(this,e)&&this.updateViewport(e)}}},onMouseUp:function(e){var t,n,r=this.graph;if(!this.keydown){var i=r.getZoom(),o=r.get("modeController"),a=null===(n=null===(t=null==o?void 0:o.modes[o.mode])||void 0===t?void 0:t.filter((function(e){return"zoom-canvas"===e.type})))||void 0===n?void 0:n[0],s=a?a.optimizeZoom||.1:0;if(this.enableOptimize){for(var l=r.getEdges(),u=0,c=l.length;u<c;u++){var d=l[u].get("group").get("children");d&&d.forEach((function(e){e.get("ori-visibility")&&e.show()}))}if(i>s)for(var h=r.getNodes(),f=0,p=h.length;f<p;f++)for(var m=0,g=h[f].getContainer().get("children");m<g.length;m++){var v=g[m];if(!v.get("isKeyShape"))v.get("ori-visibility")&&v.show()}}this.dragging?(e=bC(e),this.shouldEnd.call(this,e)&&this.updateViewport(e),e.type="dragend",r.emit("canvas:dragend",e),this.endDrag()):this.origin=null}},endDrag:function(){this.origin=null,this.dragging=!1,this.dragbegin=!1},onKeyDown:function(e){var t=e.key;t&&(xC.indexOf(t.toLowerCase())>-1?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.keydown=!1,this.origin=null,this.dragging=!1,this.dragbegin=!1}},EC={getDefaultCfg:function(){return{updateEdge:!0,delegateStyle:{},enableDelegate:!1,onlyChangeComboSize:!1,comboActiveState:"",selectedState:"selected",enableOptimize:!1,enableDebounce:!1,enableStack:!0}},getEvents:function(){return{"node:dragstart":"onDragStart","node:drag":"onDrag","node:dragend":"onDragEnd","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave","combo:drop":"onDropCombo","node:drop":"onDropNode","canvas:drop":"onDropCanvas",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onDragEnd"}},validationCombo:function(e){return!(!this.origin||!e||e.destroyed)&&"combo"===e.getType()},onTouchStart:function(e){if(e.item){try{var t=e.originalEvent.touches,n=t[0],r=t[1];if(n&&r)return;e.preventDefault()}catch(e){console.warn("Touch original event not exist!")}this.onDragStart(e)}},onTouchMove:function(e){try{var t=e.originalEvent.touches,n=t[0],r=t[1];if(n&&r)return void this.onDragEnd(e);e.preventDefault()}catch(e){console.warn("Touch original event not exist!")}this.onDrag(e)},onDragStart:function(e){var t=this;if(this.currentShouldEnd=!0,this.shouldBegin.call(this,e)){var n=e.item;if(n&&!n.destroyed&&!n.hasLocked()){n.getContainer().set("capture",!1),this.cachedCaptureItems||(this.cachedCaptureItems=[]),this.cachedCaptureItems.push(n);var r=e.target;if(r)if(r.get("isAnchorPoint"))return;var i=this.graph;this.targets=[],this.targetCombo=null;var o=i.findAllByState("node",this.selectedState),a=n.get("id"),s=o.filter((function(e){var t=e.get("id");return a===t}));0===s.length?this.targets.push(n):o.length>1?o.forEach((function(e){e.hasLocked()||t.targets.push(e)})):this.targets.push(n);var l=[];this.targets.forEach((function(e){l.push((0,b.clone)(e.getModel()))})),this.set("beforeDragNodes",l),this.hidenEdge={},this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach((function(e){e.getEdges().forEach((function(e){e.isVisible()&&(t.hidenEdge[e.getID()]=!0,e.hide())}))})),this.origin={x:e.x,y:e.y},this.point={},this.originPoint={}}}},onDrag:function(e){var t=this;this.origin&&this.shouldUpdate(this,e)&&(this.get("enableDelegate")?this.updateDelegate(e):this.enableDebounce?this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:e,updateEdge:this.get("updateEdge")}):this.targets.map((function(n){t.update(n,e)})))},onDragEnd:function(e){var t,n=this;if(this.origin){null===(t=this.cachedCaptureItems)||void 0===t||t.forEach((function(e){e.getContainer().set("capture",!0)})),this.cachedCaptureItems=[],this.delegateRect&&(this.delegateRect.remove(),this.delegateRect=null),this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach((function(e){e.getEdges().forEach((function(e){n.hidenEdge[e.getID()]&&e.show(),e.refresh()}))})),this.hidenEdge={};var r=this.graph;if(r.get("enabledStack")&&this.enableStack){var i={before:{nodes:[],edges:[],combos:[]},after:{nodes:[],edges:[],combos:[]}};this.get("beforeDragNodes").forEach((function(e){i.before.nodes.push({id:e.id,x:e.x,y:e.y})})),this.targets.forEach((function(e){var t=e.getModel();i.after.nodes.push({id:t.id,x:t.x,y:t.y})})),r.pushStack("update",(0,b.clone)(i))}r.emit("dragnodeend",{items:this.targets,targetItem:null}),this.point={},this.origin=null,this.originPoint={},this.targets.length=0,this.targetCombo=null}},onDropCombo:function(e){var t=e.item;if(this.currentShouldEnd=this.shouldEnd.call(this,e,t),this.updatePositions(e,!this.currentShouldEnd),this.currentShouldEnd&&this.validationCombo(t)){var n=this.graph;if(this.comboActiveState&&n.setItemState(t,this.comboActiveState,!1),this.targetCombo=t,this.onlyChangeComboSize)n.updateCombos();else{var r=t.getModel();this.targets.map((function(e){e.getModel().comboId!==r.id&&n.updateComboTree(e,r.id)})),n.updateCombo(t)}n.emit("dragnodeend",{items:this.targets,targetItem:this.targetCombo})}},onDropCanvas:function(e){var t=this.graph;this.currentShouldEnd=this.shouldEnd.call(this,e,void 0),this.updatePositions(e,!this.currentShouldEnd),this.targets&&0!==this.targets.length&&this.currentShouldEnd&&(this.onlyChangeComboSize?t.updateCombos():this.targets.map((function(e){e.getModel().comboId&&t.updateComboTree(e)})))},onDropNode:function(e){if(this.targets&&0!==this.targets.length){var t=this,n=e.item,r=t.graph,i=n.getModel().comboId,o=i?r.findById(i):void 0;if(this.currentShouldEnd=this.shouldEnd.call(this,e,o),this.updatePositions(e,!this.currentShouldEnd),this.currentShouldEnd){if(this.onlyChangeComboSize)r.updateCombos();else if(i){var a=r.findById(i);t.comboActiveState&&r.setItemState(a,t.comboActiveState,!1),this.targets.map((function(e){var t=e.getModel();i!==t.comboId&&r.updateComboTree(e,i)})),r.updateCombo(a)}else this.targets.map((function(e){e.getModel().comboId&&r.updateComboTree(e)}));r.emit("dragnodeend",{items:this.targets,targetItem:n})}}},onDragEnter:function(e){var t=e.item;if(this.validationCombo(t)){var n=this.graph;this.comboActiveState&&n.setItemState(t,this.comboActiveState,!0)}},onDragLeave:function(e){var t=e.item;if(this.validationCombo(t)){var n=this.graph;this.comboActiveState&&n.setItemState(t,this.comboActiveState,!1)}},updatePositions:function(e,t){var n=this;this.targets&&0!==this.targets.length&&(this.get("enableDelegate")?this.enableDebounce?this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:e,updateEdge:this.get("updateEdge"),updateFunc:this.update}):t||this.targets.map((function(t){return n.update(t,e)})):this.targets.map((function(r){return n.update(r,e,t)})))},update:function(e,t,n){var r=this.origin,i=e.get("model"),o=e.get("id");this.point[o]||(this.point[o]={x:i.x||0,y:i.y||0});var a=t.x-r.x+this.point[o].x,s=t.y-r.y+this.point[o].y;n&&(a+=r.x-t.x,s+=r.y-t.y);var l={x:a,y:s};this.get("updateEdge")?this.graph.updateItem(e,l,!1):e.updatePosition(l)},debounceUpdate:(0,b.debounce)((function(e){var t=e.targets,n=e.graph,r=e.point,i=e.origin,o=e.evt,a=e.updateEdge;e.updateFunc;t.map((function(e){var t=e.get("model"),s=e.get("id");r[s]||(r[s]={x:t.x||0,y:t.y||0});var l={x:o.x-i.x+r[s].x,y:o.y-i.y+r[s].y};a?n.updateItem(e,l,!1):e.updatePosition(l)}))}),50,!0),updateDelegate:function(e){var t=this.graph;if(this.delegateRect){var n=e.x-this.origin.x+this.originPoint.minX,r=e.y-this.origin.y+this.originPoint.minY;this.delegateRect.attr({x:n,y:r})}else{var i=t.get("group"),o=(0,b.deepMix)({},jh.delegateStyle,this.delegateStyle),a=this.calculationGroupPosition(e),s=a.x,l=a.y,u=a.width,c=a.height,d=a.minX,h=a.minY;this.originPoint={x:s,y:l,width:u,height:c,minX:d,minY:h},this.delegateRect=i.addShape("rect",{attrs:(0,y.__assign)({width:u,height:c,x:s,y:l},o),name:"rect-delegate-shape"}),this.delegate=this.delegateRect,this.delegateRect.set("capture",!1)}},calculationGroupPosition:function(e){var t=this.targets;0===t.length&&t.push(e.item);for(var n=1/0,r=-1/0,i=1/0,o=-1/0,a=0;a<t.length;a++){var s=t[a].getBBox(),l=s.minX,u=s.minY,c=s.maxX,d=s.maxY;l<n&&(n=l),u<i&&(i=u),c>r&&(r=c),d>o&&(o=d)}return{x:Math.floor(n),y:Math.floor(i),width:Math.ceil(r)-Math.floor(n),height:Math.ceil(o)-Math.floor(i),minX:n,minY:i}}},SC={getDefaultCfg:function(){return{trigger:"mouseenter",activeState:"active",inactiveState:"inactive",resetSelected:!1,shouldUpdate:function(){return!0}}},getEvents:function(){return"mouseenter"===this.get("trigger")?{"node:mouseenter":"setAllItemStates","combo:mouseenter":"setAllItemStates","node:mouseleave":"clearActiveState","combo:mouseleave":"clearActiveState"}:{"node:click":"setAllItemStates","combo:click":"setAllItemStates","canvas:click":"clearActiveState","node:touchstart":"setOnTouchStart","combo:touchstart":"setOnTouchStart","canvas:touchstart":"clearOnTouchStart"}},setOnTouchStart:function(e){try{var t=e.originalEvent.touches,n=t[0],r=t[1];if(n&&r)return;e.preventDefault()}catch(e){console.warn("Touch original event not exist!")}this.setAllItemStates(e)},clearOnTouchStart:function(e){try{var t=e.originalEvent.touches,n=t[0],r=t[1];if(n&&r)return;e.preventDefault()}catch(e){console.warn("Touch original event not exist!")}this.clearActiveState(e)},setAllItemStates:function(e){var t=e.item,n=this.graph;if(this.item=t,this.shouldUpdate(e.item,{event:e,action:"activate"})){for(var r=this.activeState,i=this.inactiveState,o=n.getNodes(),a=n.getCombos(),s=n.getEdges(),l=n.get("vedges"),u=o.length,c=a.length,d=s.length,h=l.length,f=0;f<u;f++){var p=o[f],m=p.hasState("selected");this.resetSelected&&m&&n.setItemState(p,"selected",!1),n.setItemState(p,r,!1),i&&n.setItemState(p,i,!0)}for(f=0;f<c;f++){var g=a[f];m=g.hasState("selected");this.resetSelected&&m&&n.setItemState(g,"selected",!1),n.setItemState(g,r,!1),i&&n.setItemState(g,i,!0)}for(f=0;f<d;f++){var v=s[f];n.setItemState(v,r,!1),i&&n.setItemState(v,i,!0)}for(f=0;f<h;f++){var y=l[f];n.setItemState(y,r,!1),i&&n.setItemState(y,i,!0)}i&&n.setItemState(t,i,!1),n.setItemState(t,r,!0);var b=t.getEdges(),_=b.length;for(f=0;f<_;f++){var w=void 0;w=(v=b[f]).getSource()===t?v.getTarget():v.getSource(),i&&n.setItemState(w,i,!1),n.setItemState(w,r,!0),n.setItemState(v,i,!1),n.setItemState(v,r,!0),v.toFront()}n.emit("afteractivaterelations",{item:e.item,action:"activate"})}},clearActiveState:function(e){var t=this,n=t.get("graph");if(t.shouldUpdate(e.item,{event:e,action:"deactivate"})){var r=this.activeState,i=this.inactiveState,o=n.get("autoPaint");n.setAutoPaint(!1);for(var a=n.getNodes()||[],s=n.getCombos()||[],l=n.getEdges()||[],u=n.get("vedges")||[],c=a.length,d=s.length,h=l.length,f=u.length,p=0;p<c;p++){var m=a[p];n.clearItemStates(m,[r,i])}for(p=0;p<d;p++){var g=s[p];n.clearItemStates(g,[r,i])}for(p=0;p<h;p++){var v=l[p];n.clearItemStates(v,[r,i,"deactivate"])}for(p=0;p<f;p++){var y=u[p];n.clearItemStates(y,[r,i,"deactivate"])}n.paint(),n.setAutoPaint(o),n.emit("afteractivaterelations",{item:e.item||t.get("item"),action:"deactivate"})}}};var kC=Math.min,TC=Math.max,LC=Math.abs,CC="shift",DC=["drag","shift","ctrl","alt","control"];const AC={getDefaultCfg:function(){return{brushStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:CC,includeEdges:!0,selectedEdges:[],selectedNodes:[]}},getEvents:function(){return DC.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=CC,console.warn("Behavior brush-select  trigger  'drag''shift''ctrl'  'alt'")),"drag"===this.trigger?{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates"}:{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates",keyup:"onKeyUp",keydown:"onKeyDown"}},onMouseDown:function(e){var t=e.item,n=this.brush;t||("drag"===this.trigger||this.keydown)&&(this.selectedNodes&&0!==this.selectedNodes.length&&this.clearStates(),n||(n=this.createBrush()),this.originPoint={x:e.canvasX,y:e.canvasY},n.attr({width:0,height:0}),n.show(),this.dragging=!0)},onMouseMove:function(e){this.dragging&&("drag"===this.trigger||this.keydown)&&this.updateBrush(e)},onMouseUp:function(e){this.graph;(this.brush||this.dragging)&&("drag"===this.trigger||this.keydown)&&(this.brush.remove(!0),this.brush=null,this.getSelectedNodes(e),this.dragging=!1)},clearStates:function(){var e=this.graph,t=this.selectedState,n=e.findAllByState("node",t),r=e.findAllByState("edge",t);n.forEach((function(n){return e.setItemState(n,t,!1)})),r.forEach((function(n){return e.setItemState(n,t,!1)})),this.selectedNodes=[],this.selectedEdges=[],this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges),e.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[]},select:!1})},getSelectedNodes:function(e){var t=this,n=this,r=n.graph,i=n.originPoint,o=n.shouldUpdate,a=this.selectedState,s={x:e.x,y:e.y},l=r.getPointByCanvas(i.x,i.y),u=kC(s.x,l.x),c=TC(s.x,l.x),d=kC(s.y,l.y),h=TC(s.y,l.y),f=[],p=[];r.getNodes().forEach((function(e){if(e.isVisible()){var t=e.getBBox();if(t.centerX>=u&&t.centerX<=c&&t.centerY>=d&&t.centerY<=h&&o(e,"select")){f.push(e);var n=e.getModel();p.push(n.id),r.setItemState(e,a,!0)}}}));var m=[];this.includeEdges&&f.forEach((function(e){e.getOutEdges().forEach((function(e){if(e.isVisible()){var n=e.getModel(),i=n.source,a=n.target;p.includes(i)&&p.includes(a)&&o(e,"select")&&(m.push(e),r.setItemState(e,t.selectedState,!0))}}))})),this.selectedEdges=m,this.selectedNodes=f,this.onSelect&&this.onSelect(f,m),r.emit("nodeselectchange",{selectedItems:{nodes:f,edges:m},select:!0})},createBrush:function(){var e=this.graph.get("canvas").addShape("rect",{attrs:this.brushStyle,capture:!1,name:"brush-shape"});return this.brush=e,this.delegate=e,e},updateBrush:function(e){var t=this.originPoint;this.brush.attr({width:LC(e.canvasX-t.x),height:LC(e.canvasY-t.y),x:kC(e.canvasX,t.x),y:kC(e.canvasY,t.y)})},onKeyDown:function(e){var t=e.key;if(t){var n=this.trigger.toLowerCase(),r=t.toLowerCase();this.keydown=r===n||"control"===r&&"ctrl"===n||"ctrl"===r&&"control"===n}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.keydown=!1}};var PC="shift",OC=["shift","ctrl","alt","control"];const IC={getDefaultCfg:function(){return{multiple:!0,trigger:PC,selectedState:"selected"}},getEvents:function(){var e=this;return OC.indexOf(e.trigger.toLowerCase())>-1||(e.trigger=PC,console.warn("Behavior brush-select  trigger  'drag''shift''ctrl'  'alt'")),e.multiple?{"node:click":"onClick","combo:click":"onClick","canvas:click":"onCanvasClick",keyup:"onKeyUp",keydown:"onKeyDown"}:{"node:click":"onClick","combo:click":"onClick","canvas:click":"onCanvasClick"}},onClick:function(e){var t=this,n=e.item;if(n&&!n.destroyed){n.getType();var r=t.graph,i=t.keydown,o=t.multiple,a=t.shouldUpdate;if(t.shouldBegin.call(t,e)){if(!i||!o){var s=r.findAllByState("node",t.selectedState).concat(r.findAllByState("combo",t.selectedState));(0,b.each)(s,(function(e){e!==n&&r.setItemState(e,t.selectedState,!1)}))}if(n.hasState(t.selectedState)){a.call(t,e)&&r.setItemState(n,t.selectedState,!1);var l=r.findAllByState("node",t.selectedState),u=r.findAllByState("combo",t.selectedState);r.emit("nodeselectchange",{target:n,selectedItems:{nodes:l,combos:u},select:!1})}else{a.call(t,e)&&r.setItemState(n,t.selectedState,!0);l=r.findAllByState("node",t.selectedState),u=r.findAllByState("combo",t.selectedState);r.emit("nodeselectchange",{target:n,selectedItems:{nodes:l,combos:u},select:!0})}}}},onCanvasClick:function(){var e=this,t=this.graph,n=t.findAllByState("node",this.selectedState);(0,b.each)(n,(function(n){t.setItemState(n,e.selectedState,!1)}));var r=t.findAllByState("combo",this.selectedState);(0,b.each)(r,(function(n){t.setItemState(n,e.selectedState,!1)})),t.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})},onKeyDown:function(e){var t=e.key;t&&(t.toLowerCase()===this.trigger.toLowerCase()||"control"===t.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.keydown=!1}};var RC=_h;const NC={getDefaultCfg:function(){return{sensitivity:2,minZoom:void 0,maxZoom:void 0,enableOptimize:!1,optimizeZoom:.1,fixSelectedItems:{fixAll:!1,fixLineWidth:!1,fixLabel:!1,fixState:"selected"}}},getEvents:function(){var e=this.fixSelectedItems;return e.fixState||(e.fixState="selected"),e.fixAll&&(e.fixLineWidth=!0,e.fixLabel=!0),{wheel:"onWheel",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd"}},onTouchStart:function(e){var t=e.originalEvent.touches,n=t[0],r=t[1];e.preventDefault(),r&&(this.shouldBegin&&!this.shouldBegin.call(this,e)||(this.startPoint={pageX:n.pageX,pageY:n.pageY},this.moveable=!0,r&&(this.endPoint={pageX:r.pageX,pageY:r.pageY}),this.originScale=this.graph.getZoom()||this.currentScale||1))},onTouchMove:function(e){if(this.moveable){e.preventDefault();var t=e.originalEvent.touches,n=t[0],r=t[1];if(r){this.endPoint||(this.endPoint={pageX:r.pageX,pageY:r.pageY});var i=function(e,t){return Math.hypot(t.x-e.x,t.y-e.y)},o=i({x:n.pageX,y:n.pageY},{x:r.pageX,y:r.pageY})/i({x:this.startPoint.pageX,y:this.startPoint.pageY},{x:this.endPoint.pageX,y:this.endPoint.pageY}),a=this.originScale*o;this.currentScale=a;var s=this.get("minZoom")||this.graph.get("minZoom");if(!(a>(this.get("maxZoom")||this.graph.get("maxZoom"))||a<s)){var l=this.graph.get("canvas").getPointByClient(e.clientX,e.clientY);this.graph.zoomTo(a,{x:l.x,y:l.y}),this.graph.emit("wheelzoom",e)}}}},onTouchEnd:function(){this.moveable=!1,this.endPoint=null},onWheel:function(e){var t=this,n=this.graph,r=this.fixSelectedItems;if((!this.shouldBegin||this.shouldBegin.call(this,e))&&this.shouldUpdate.call(this,e)){e.preventDefault();var i,o=n.get("canvas").getPointByClient(e.clientX,e.clientY),a=this.get("sensitivity"),s=n.getZoom();i=s*(e.wheelDelta<0?1-.05*a:1/(1-.05*a));var l=this.get("minZoom")||n.get("minZoom");if(!(i>(this.get("maxZoom")||n.get("maxZoom"))||i<l)){if(this.get("enableOptimize")){var u=this.get("optimizeZoom"),c=this.get("optimized"),d=n.getNodes(),h=n.getEdges(),f=d.length,p=h.length;if(!c){for(var m=0;m<f;m++){if(!(k=d[m]).destroyed)for(var g=(q=k.get("group").get("children")).length,v=0;v<g;v++){(N=q[v]).destoryed||N.get("isKeyShape")||(N.set("ori-visibility",N.get("ori-visibility")||N.get("visible")),N.hide())}}for(var y=0;y<p;y++)for(g=(q=(X=h[y]).get("group").get("children")).length,v=0;v<g;v++){(N=q[v]).set("ori-visibility",N.get("ori-visibility")||N.get("visible")),N.hide()}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var _=setTimeout((function(){var e=n.getZoom();if(t.get("optimized")){t.set("optimized",!1);for(var r=0;r<f;r++){var i=d[r],o=(c=i.get("group").get("children")).length;if(e<u)(s=(m=i.getKeyShape()).get("ori-visibility"))&&m.show();else for(var a=0;a<o;a++){var s=(v=c[a]).get("ori-visibility");!v.get("visible")&&s&&s&&v.show()}}for(var l=0;l<p;l++){var c,m,g=h[l];o=(c=g.get("group").get("children")).length;if(e<u)(s=(m=g.getKeyShape()).get("ori-visibility"))&&m.show();else for(a=0;a<o;a++){var v;if(!(v=c[a]).get("visible"))(s=v.get("ori-visibility"))&&v.show()}}}}),100);this.set("timeout",_)}if(s<=1){var w=void 0,x=void 0;if(r.fixAll||r.fixLineWidth||r.fixLabel){w=n.findAllByState("node",r.fixState),x=n.findAllByState("edge",r.fixState);for(var M=s/i,E=w.length,S=0;S<E;S++){var k,T=(k=w[S]).getContainer(),L=k.getModel(),C=k.getOriginStyle(),D=k.getStateStyle(r.fixState),A=k.get("shapeFactory").getShape(L.type).getStateStyle(r.fixState,k)[r.fixState];if(r.fixAll){if(i<=1){var P=(0,b.clone)(T.getMatrix());P||(P=[1,0,0,0,1,0,0,0,1]);var O=k.getModel(),I=O.x,R=O.y;P=RC(P,[["t",-I,-R],["s",M,M],["t",I,R]]),T.setMatrix(P)}}else for(g=(q=T.get("children")).length,v=0;v<g;v++){var N=q[v],Y=void 0,j=void 0;if(r.fixLabel)if("text"===N.get("type")){Y=N.attr("fontSize")||12;var F=D[N.get("name")],B=A[N.get("name")],z=F?F.fontSize:12,H=B?B.fontSize:12,G=z||H||12;if(i<=1&&N.attr("fontSize",G/i),j)break}if(r.fixLineWidth&&N.get("isKeyShape")){j=N.attr("lineWidth")||0;var W=D.lineWidth||A.lineWidth||C.lineWidth||0;if(i<=1&&N.attr("lineWidth",W/i),Y)break}}}for(var U=x.length,V=0;V<U;V++){var X,q=(T=(X=x[V]).getContainer()).get("children");for(L=X.getModel(),D=X.getStateStyle(r.fixState),A=X.get("shapeFactory").getShape(L.type).getStateStyle(r.fixState,X)[r.fixState],g=q.length,v=0;v<g;v++){N=q[v],Y=void 0,j=void 0;if(r.fixLabel||r.fixAll)if("text"===N.get("type")){Y=N.attr("fontSize")||12;F=D[N.get("name")],B=A[N.get("name")],z=F?F.fontSize:12,H=B?B.fontSize:12,G=z||H||12;if(i<=1&&N.attr("fontSize",G/i),j)break}if((r.fixLineWidth||r.fixAll)&&N.get("isKeyShape")){j=N.attr("lineWidth")||0;W=D.lineWidth||A.lineWidth||1;if(i<=1&&N.attr("lineWidth",W/i),Y)break}}}}}n.zoomTo(i,{x:o.x,y:o.y}),n.emit("wheelzoom",e)}}}},YC={onMouseEnter:function(e){var t=e.item;this.currentTarget=t,this.showTooltip(e),this.graph.emit("tooltipchange",{item:e.item,action:"show"})},onMouseMove:function(e){this.shouldUpdate(e)?this.currentTarget&&e.item===this.currentTarget&&this.updatePosition(e):this.hideTooltip()},onMouseLeave:function(e){this.shouldEnd(e)&&(this.hideTooltip(),this.graph.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null)},showTooltip:function(e){var t=this.container;if(e.item&&!e.item.destroyed){t||(t=this.createTooltip(this.graph.get("canvas")),this.container=t);var n=this.formatText(e.item.get("model"),e);t.innerHTML=n,rS(this.container,{visibility:"visible"}),this.updatePosition(e)}},hideTooltip:function(){rS(this.container,{visibility:"hidden"})},updatePosition:function(e){var t=this.get("shouldBegin"),n=this,r=n.width,i=n.height,o=n.container,a=n.graph;if(t(e)){var s=a.getPointByClient(e.clientX,e.clientY),l=a.getCanvasByPoint(s.x,s.y),u=l.x,c=l.y,d=o.getBoundingClientRect();u>r/2?u-=d.width:u+=this.offset,c>i/2?c-=d.height:c+=this.offset;var h=u+"px",f=c+"px";rS(this.container,{left:h,top:f,visibility:"visible"})}else rS(o,{visibility:"hidden"})},createTooltip:function(e){var t=e.get("el");t.style.position="relative";var n=KE('<div class="g6-tooltip g6-'+this.item+'-tooltip"></div>');return t.parentNode.appendChild(n),rS(n,{position:"absolute",visibility:"visible"}),this.width=e.get("width"),this.height=e.get("height"),this.container=n,this.graph.get("tooltips").push(n),n}},jC=(0,y.__assign)({getDefaultCfg:function(){return{item:"node",offset:12,formatText:function(e){return e.label}}},getEvents:function(){return{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},YC),FC=(0,y.__assign)({getDefaultCfg:function(){return{item:"edge",offset:12,formatText:function(e){return"source: "+e.source+" target: "+e.target}}},getEvents:function(){return{"edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},YC);var BC="click",zC=["click","dblclick"];const HC={getDefaultCfg:function(){return{trigger:BC,onChange:function(){}}},getEvents:function(){var e,t;return zC.includes(this.trigger)?t=this.trigger:(t=BC,console.warn("Behavior collapse-expand  trigger  'click'  'dblclick'")),(e={})["node:"+t]="onNodeClick",e.touchstart="onNodeClick",e},onNodeClick:function(e){var t=e.item;if(t){var n=this.graph.findDataById(t.get("id"));if(n){var r=n.children;if(r&&0!==r.length){var i=!n.collapsed;this.shouldBegin(e,i)&&(n.collapsed=i,t.getModel().collapsed=i,this.graph.emit("itemcollapsed",{item:e.item,collapsed:i}),this.shouldUpdate(e,i)&&(this.onChange(t,i),this.graph.layout()))}}}}};var GC=ME.calculationItemsBBox,WC=function e(t,n){if(!1!==n(t)&&t){var r=t.get("combos");if(0===r.length)return!1;(0,b.each)(r,(function(t){e(t,n)}))}};const UC={getDefaultCfg:function(){return{enableDelegate:!1,delegateStyle:{},onlyChangeComboSize:!1,activeState:"",selectedState:"selected"}},getEvents:function(){return{"combo:dragstart":"onDragStart","combo:drag":"onDrag","combo:dragend":"onDragEnd","combo:drop":"onDrop","node:drop":"onNodeDrop","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave"}},validationCombo:function(e){var t=e.item;return!(!t||t.destroyed)&&(!!this.shouldUpdate(this,e)&&"combo"===t.getType())},onDragStart:function(e){var t=this,n=this.graph,r=e.item;if(this.currentShouldEnd=!0,this.validationCombo(e)){this.targets=[];var i=n.findAllByState("combo",this.selectedState),o=r.get("id"),a=i.filter((function(e){var t=e.get("id");return o===t}));0===a.length?this.targets.push(r):this.targets=i,this.activeState&&this.targets.map((function(e){var r=e.getModel();if(r.parentId){var i=n.findById(r.parentId);i&&n.setItemState(i,t.activeState,!0)}})),this.point={},this.originPoint={},this.origin={x:e.x,y:e.y},this.currentItemChildCombos=[],WC(r,(function(e){if(e.destroyed)return!1;var n=e.getModel();return t.currentItemChildCombos.push(n.id),!0}))}},onDrag:function(e){var t=this;if(this.origin&&this.validationCombo(e))if(this.enableDelegate)this.updateDelegate(e);else{if(this.activeState){var n=this.graph,r=e.item,i=r.getModel(),o=n.getCombos(),a=r.getBBox(),s=a.centerX,l=a.centerY,u=a.width,c=o.filter((function(e){var n=e.getModel();return i.parentId,n.id!==i.id&&!t.currentItemChildCombos.includes(n.id)}));c.map((function(e){var r=e.getBBox(),i=r.centerX,o=r.centerY,a=r.width,c=s-i,d=l-o,h=2*Math.sqrt(c*c+d*d);u+a-h>.8*u?n.setItemState(e,t.activeState,!0):n.setItemState(e,t.activeState,!1)}))}(0,b.each)(this.targets,(function(n){t.updateCombo(n,e)}))}},updatePositions:function(e,t){var n=this;(this.enableDelegate||t)&&(0,b.each)(this.targets,(function(r){n.updateCombo(r,e,t)}))},onDrop:function(e){var t=this,n=e.item;if(this.currentShouldEnd=this.shouldEnd.call(this,e,n),this.updatePositions(e,!this.currentShouldEnd),this.currentShouldEnd&&n&&this.targets&&!n.destroyed){var r=this.graph,i=n.getModel();this.targets.map((function(e){e.getModel().parentId!==i.id?(t.activeState&&r.setItemState(n,t.activeState,!1),t.onlyChangeComboSize?r.updateCombo(e):r.updateComboTree(e,i.id)):r.updateCombo(n)})),this.end(n,e),this.endComparison=!0}},onNodeDrop:function(e){var t=this;if(this.targets&&0!==this.targets.length){var n=this.graph,r=e.item.getModel().comboId,i=r?n.findById(r):void 0;if(this.currentShouldEnd=this.shouldEnd.call(this,e,i),this.updatePositions(e,!this.currentShouldEnd),this.currentShouldEnd){var o;if(r){if(this.activeState){var a=n.findById(r);n.setItemState(a,this.activeState,!1)}this.targets.map((function(e){t.onlyChangeComboSize?n.updateCombo(e):r!==e.getID()&&(o=n.findById(r),r!==e.getModel().parentId&&n.updateComboTree(e,r))}))}else this.targets.map((function(e){t.onlyChangeComboSize?n.updateCombo(e):e.getModel().comboId&&n.updateComboTree(e)}));this.endComparison=!0,this.end(o,e)}}},onDragEnter:function(e){if(this.origin&&this.validationCombo(e)){var t=e.item,n=this.graph;this.activeState&&n.setItemState(t,this.activeState,!0)}},onDragLeave:function(e){if(this.origin&&this.validationCombo(e)){var t=e.item,n=this.graph;this.activeState&&n.setItemState(t,this.activeState,!1)}},onDragEnd:function(e){if(this.targets&&0!==this.targets.length){var t=e.item;this.currentShouldEnd&&this.updatePositions(e);var n=this.getParentCombo(t.getModel().parentId),r=this.graph;n&&this.activeState&&r.setItemState(n,this.activeState,!1),this.end(void 0,e)}},end:function(e,t){var n=this;if(this.origin){var r=this.graph;if(this.delegateShape)r.get("delegateGroup").clear(),this.delegateShape=null;e&&this.activeState&&r.setItemState(e,this.activeState,!1),e||this.targets.map((function(e){n.onlyChangeComboSize?r.updateCombo(e):r.updateComboTree(e)})),this.point=[],this.origin=null,this.originPoint=null,this.targets.length=0}},traverse:function(e,t){var n=this;if(!1!==t(e)&&e){var r=e.get("combos");(0,b.each)(r,(function(e){n.traverse(e,t)}));var i=e.get("nodes");(0,b.each)(i,(function(e){n.traverse(e,t)}))}},updateCombo:function(e,t,n){var r=this;this.traverse(e,(function(e){return!e.destroyed&&(r.updateSignleItem(e,t,n),!0)}))},updateSignleItem:function(e,t,n){var r=this.origin,i=this.graph,o=e.getModel(),a=e.get("id");this.point[a]||(this.point[a]={x:o.x,y:o.y});var s=t.x-r.x+this.point[a].x,l=t.y-r.y+this.point[a].y;n&&(s+=r.x-t.x,l+=r.y-t.y),i.updateItem(e,{x:s,y:l})},getParentCombo:function(e){var t=this.graph;if(e){var n=t.findById(e);if(n)return n}},updateDelegate:function(e){var t=this.graph;if(this.delegateShape){var n=e.x-this.origin.x+this.originPoint.minX,r=e.y-this.origin.y+this.originPoint.minY;this.delegateShape.attr({x:n,y:r})}else{var i=t.get("delegateGroup"),o=null,a=(o=this.targets.length>1?GC(this.targets):this.targets[0].getBBox()).x,s=o.y,l=o.width,u=o.height,c=o.minX,d=o.minY;this.originPoint={x:a,y:s,width:l,height:u,minX:c,minY:d};var h=(0,y.__assign)((0,y.__assign)({},jh.delegateStyle),this.delegateStyle);this.delegateShape=i.addShape("rect",{attrs:(0,y.__assign)({width:o.width,height:o.height,x:o.x,y:o.y},h),name:"combo-delegate-shape"}),this.delegateShape.set("capture",!1),this.delegate=this.delegateShape}}};var VC="dblclick",XC=["click","dblclick"];const qC={getDefaultCfg:function(){return{trigger:VC,relayout:!0}},getEvents:function(){var e,t;return XC.includes(this.trigger)?t=this.trigger:(t=VC,console.warn("Behavior collapse-expand-group  trigger  'click'  'dblclick'")),(e={})["combo:"+t]="onComboClick",e},onComboClick:function(e){var t=e.item,n=this.graph,r=this.relayout;if(t&&!t.destroyed&&"combo"===t.getType()){var i=t.getModel().id;i&&(n.collapseExpandCombo(i),r&&n.get("layout")?n.layout():n.refreshPositions())}}};var KC=ME.isPolygonsIntersect,JC=ME.pathToPoints,ZC="shift",$C=["drag","shift","ctrl","alt","control"];const QC={getDefaultCfg:function(){return{delegateStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:ZC,includeEdges:!0,selectedEdges:[],selectedNodes:[]}},getEvents:function(){return $C.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=ZC,console.warn("Behavior lasso-select  trigger  'drag''shift''ctrl'  'alt'")),"drag"===this.trigger?{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd","canvas:click":"clearStates"}:{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd",keyup:"onKeyUp",keydown:"onKeyDown","canvas:click":"clearStates"}},onDragStart:function(e){var t=this.lasso;e.item||("drag"===this.trigger||this.keydown)&&(this.selectedNodes&&0!==this.selectedNodes.length&&this.clearStates(),t||(t=this.createLasso()),this.dragging=!0,this.originPoint={x:e.x,y:e.y},this.points.push(this.originPoint),t.show())},onDragMove:function(e){this.dragging&&("drag"===this.trigger||this.keydown)&&(this.points.push({x:e.x,y:e.y}),this.updateLasso(e))},onDragEnd:function(e){(this.lasso||this.dragging)&&("drag"===this.trigger||this.keydown)&&(this.points.push(this.originPoint),this.getSelectedItems(),this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1)},getLassoPath:function(){var e=this.points,t=[];return e.length&&(e.forEach((function(e,n){0===n?t.push(["M",e.x,e.y]):t.push(["L",e.x,e.y])})),t.push(["L",e[0].x,e[0].y])),t},clearStates:function(){var e=this.graph,t=this.selectedState,n=e.findAllByState("node",t),r=e.findAllByState("edge",t);n.forEach((function(n){return e.setItemState(n,t,!1)})),r.forEach((function(n){return e.setItemState(n,t,!1)})),this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges),this.selectedNodes=[],this.selectedEdges=[],e.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[]},select:!1})},getSelectedItems:function(){var e=this,t=this.graph,n=this.shouldUpdate,r=this.points.map((function(e){return[t.getCanvasByPoint(e.x,e.y).x,t.getCanvasByPoint(e.x,e.y).y]})),i=this.selectedState,o=[],a=[];t.getNodes().forEach((function(e){if(e.isVisible()&&function(e,t){var n,r=e.getKeyShape();if("path"===e.get("type"))n=JC(r.attr("path"));else{var i=r.getCanvasBBox();n=[[i.minX,i.minY],[i.maxX,i.minY],[i.maxX,i.maxY],[i.minX,i.maxY]]}return KC(t,n)}(e,r)&&n(e,"select")){o.push(e);var s=e.getModel();a.push(s.id),t.setItemState(e,i,!0)}}));var s=[];this.includeEdges&&o.forEach((function(r){r.getOutEdges().forEach((function(r){if(r.isVisible()){var i=r.getModel(),o=i.source,l=i.target;a.includes(o)&&a.includes(l)&&n(r,"select")&&(s.push(r),t.setItemState(r,e.selectedState,!0))}}))})),this.selectedEdges=s,this.selectedNodes=o,this.onSelect&&this.onSelect(o,s),t.emit("nodeselectchange",{selectedItems:{nodes:o,edges:s},select:!0})},createLasso:function(){var e=this.graph.get("delegateGroup").addShape("path",{attrs:(0,y.__assign)({path:[]},this.delegateStyle),capture:!1,name:"lasso-shape"});return this.lasso=e,this.delegate=e,this.points=[],e},updateLasso:function(e){this.lasso.attr({path:this.getLassoPath()})},onKeyDown:function(e){var t=e.key;t&&(t.toLowerCase()===this.trigger.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.lasso&&(this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1),this.keydown=!1}};var eD="click",tD=["click","drag"],nD=void 0,rD=["shift","ctrl","control","alt","meta",void 0];const iD={getDefaultCfg:function(){return{trigger:eD,key:nD,edgeConfig:{},getEdgeConfig:void 0}},getEvents:function(){var e,t=this;return tD.indexOf(t.trigger.toLowerCase())>-1||(t.trigger=eD,console.warn("Behavior create-edge  trigger  'click''drag'")),t.key&&-1===rD.indexOf(t.key.toLowerCase())&&(t.trigger=nD,console.warn("Behavior create-edge  key  'shift''ctrl''alt''control' undefined")),"drag"===t.trigger?e={"node:dragstart":"onClick","combo:dragstart":"onClick",drag:"updateEndPoint","node:drop":"onClick","combo:drop":"onClick",dragend:"onDragEnd"}:"click"===t.trigger&&(e={"node:click":"onClick",mousemove:"updateEndPoint","edge:click":"cancelCreating","canvas:click":"cancelCreating","combo:click":"onClick"}),t.key&&(e.keydown="onKeyDown",e.keyup="onKeyUp"),e},onDragEnd:function(e){var t=this;if(!t.key||t.keydown){var n=e.item;n&&n.getID()!==t.source&&"node"===n.getType()||t.cancelCreating({item:t.edge,x:e.x,y:e.y})}},onClick:function(e){var t=this;if(!t.key||t.keydown){var n=e.item,r=t.graph,i=n.getModel(),o=t.getEdgeConfig;if(t.addingEdge&&t.edge){if(!t.shouldEnd.call(t,e))return;var a=void 0;a=o&&(0,b.isFunction)(o)?o({source:t.source,target:i.id}):t.edgeConfig;var s=(0,y.__assign)({target:i.id},a);if(t.source===i.id&&(s.type="loop"),r.emit("beforecreateedge",{}),r.updateItem(t.edge,s,!1),r.get("enabledStack")){var l=(0,y.__assign)((0,y.__assign)({},t.edge.getModel()),{itemType:"edge"}),u={};u.edges=[l],r.pushStack("add",{before:{},after:u})}r.emit("aftercreateedge",{edge:t.edge}),t.edge.getKeyShape().set("capture",!0),t.edge=null,t.addingEdge=!1}else{if(!t.shouldBegin.call(t,e))return;a=void 0;a=o&&(0,b.isFunction)(o)?o({source:i.id,target:i.id}):t.edgeConfig,t.edge=r.addItem("edge",(0,y.__assign)({source:i.id,target:i.id},a),!1),t.source=i.id,t.addingEdge=!0,t.edge.getKeyShape().set("capture",!1)}}},updateEndPoint:function(e){var t=this;if(!t.key||t.keydown){var n={x:e.x,y:e.y};t.graph.findById(t.source)?t.addingEdge&&t.edge&&t.graph.updateItem(t.edge,{target:n},!1):t.addingEdge=!1}},cancelCreating:function(e){var t=this;if(!t.key||t.keydown){var n=t.graph,r=e.item;if(t.addingEdge&&e.target&&e.target.isCanvas&&e.target.isCanvas())return n.removeItem(t.edge,!1),t.edge=null,void(t.addingEdge=!1);t.addingEdge&&t.edge===r&&(n.removeItem(t.edge,!1),t.edge=null,t.addingEdge=!1)}},onKeyDown:function(e){var t=this,n=e.key;n&&(n.toLowerCase()===t.key.toLowerCase()?t.keydown=!0:t.keydown=!1)},onKeyUp:function(){var e=this;e.addingEdge&&e.edge&&(e.graph.removeItem(e.edge,!1),e.addingEdge=!1,e.edge=null),this.keydown=!1}};var oD="ctrl",aD=["shift","ctrl","alt","control"];const sD={getDefaultCfg:function(){return{trigger:oD,combinedKey:"1",functionName:"fitView",functionParams:[]}},getEvents:function(){return aD.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=oD,console.warn("Behavior shortcuts-fit-view  trigger  '"+this.trigger+"'  'drag''shift''ctrl'  'alt'")),this.combinedKey===this.trigger&&(this.combinedKey=void 0),{keyup:"onKeyUp",keydown:"onKeyDown"}},onKeyDown:function(e){var t=e.key;if(t){var n=this.trigger.toLowerCase(),r=t.toLowerCase();this.triggerKeydown||(this.triggerKeydown=r===n||"control"===r&&"ctrl"===n||"ctrl"===r&&"control"===n);var i=this.graph;if(!i[this.functionName])return console.warn("Behavior shortcuts-fit-view  functionName  '"+this.functionName+"'  Graph "),{};if(!this.triggerKeydown||this.combinedKey){var o=this.combinedKey.toLowerCase();this.triggerKeydown&&(r===o||"control"===r&&"ctrl"===o||"ctrl"===r&&"control"===o)&&(this.functionParams&&this.functionParams.length?i[this.functionName].apply(i,this.functionParams):i[this.functionName]())}else this.functionParams&&this.functionParams.length?i[this.functionName].apply(i,this.functionParams):i[this.functionName]()}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.triggerKeydown=!1}};var lD=["shift","ctrl","alt","control"];const uD={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,zoomKey:"ctrl",scalableRange:0}},getEvents:function(){return this.zoomKey&&-1!==lD.indexOf(this.zoomKey)||(this.zoomKey="ctrl"),{wheel:"onWheel"}},onWheel:function(e){var t=this,n=this.graph,r=e[this.zoomKey+"Key"];if("control"===this.zoomKey&&(r=e.ctrlKey),r){var i=n.get("canvas").getPointByClient(e.clientX,e.clientY),o=n.getZoom();e.wheelDelta>0?o+=.05*o:o-=.05*o,n.zoomTo(o,{x:i.x,y:i.y})}else{var a=e.deltaX||e.movementX,s=e.deltaY||e.movementY;!s&&navigator.userAgent.indexOf("Firefox")>-1&&(s=125*-e.wheelDelta/3);var l=this.graph.get("width"),u=this.graph.get("height"),c=this.graph.get("canvas").getCanvasBBox(),d=this.scalableRange,h=this.scalableRange;d<1&&d>-1&&(d*=l,h*=u);var f=c.minX,p=c.maxX,m=c.minY,g=c.maxY;a>0?p<-d?a=0:p-a<-d&&(a=p+d):a<0&&(f>l+d?a=0:f-a>l+d&&(a=f-(l+d))),s>0?g<-h?s=0:g-s<-h&&(s=g+h):s<0&&(m>u+h?s=0:m-s>u+h&&(s=m-(u+h))),"x"===this.get("direction")?s=0:"y"===this.get("direction")&&(a=0),n.translate(-a,-s)}if(e.preventDefault(),this.get("enableOptimize")){var v=this.get("optimizeZoom"),y=this.get("optimized"),b=n.getNodes(),_=n.getEdges(),w=b.length,x=_.length;if(!y){for(var M=0;M<w;M++){var E=b[M];if(!E.destroyed)for(var S=(L=E.get("group").get("children")).length,k=0;k<S;k++){(C=L[k]).destoryed||C.get("isKeyShape")||(C.set("ori-visibility",C.get("ori-visibility")||C.get("visible")),C.hide())}}for(var T=0;T<x;T++){var L;for(S=(L=_[T].get("group").get("children")).length,k=0;k<S;k++){var C;(C=L[k]).set("ori-visibility",C.get("ori-visibility")||C.get("visible")),C.hide()}}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var D=setTimeout((function(){var e=n.getZoom();if(t.get("optimized")){t.set("optimized",!1);for(var r=0;r<w;r++){var i=b[r],o=(u=i.get("group").get("children")).length;if(e<v)(s=(c=i.getKeyShape()).get("ori-visibility"))&&c.show();else for(var a=0;a<o;a++){var s=(h=u[a]).get("ori-visibility");!h.get("visible")&&s&&s&&h.show()}}for(var l=0;l<x;l++){var u,c,d=_[l];o=(u=d.get("group").get("children")).length;if(e<v)(s=(c=d.getKeyShape()).get("ori-visibility"))&&c.show();else for(a=0;a<o;a++){var h;if(!(h=u[a]).get("visible"))(s=h.get("ori-visibility"))&&h.show()}}}}),100);this.set("timeout",D)}}};var cD={"drag-canvas":MC,"zoom-canvas":NC,"drag-node":EC,"activate-relations":SC,"brush-select":AC,"click-select":IC,"lasso-select":QC,tooltip:jC,"edge-tooltip":FC,"collapse-expand":HC,"drag-combo":UC,"collapse-expand-combo":qC,"create-edge":iD,"shortcuts-call":sD,"scroll-canvas":uD};(0,b.each)(cD,(function(e,t){Nu(t,e)}));var dD=(0,y.__assign)((0,y.__assign)({},t),ju);const hD={version:(jh.version,"4.3.11"),Graph:$E,TreeGraph:nS,Util:ME,Layout:dE,TreeLayout:kE,registerLayout:function(e,t){t.isCustomLayout=!0,sf(e,t)},Global:jh,registerBehavior:Nu,registerCombo:Ru,registerEdge:Iu,registerNode:Ou,Minimap:UL.Minimap,Grid:UL.Grid,Bundling:UL.Bundling,Menu:UL.Menu,ToolBar:UL.ToolBar,Tooltip:UL.Tooltip,Legend:UL.Legend,TimeBar:UL.TimeBar,SnapLine:UL.SnapLine,Fisheye:UL.Fisheye,ImageMinimap:UL.ImageMinimap,EdgeFilterLens:UL.EdgeFilterLens,Algorithm:dD,Arrow:xu,Marker:Mu,Shape:Eu},fD=hD;o(82492);var pD=o(23279),mD=o.n(pD),gD=o(30381),vD=o.n(gD);fD.registerNode("bubble",{setState:function(e,t,n){var r=n.get("keyShape"),i=n.getModel().uColor;"focused"===e&&(r.attr("stroke","white"),r.attr("lineWidth",10)),"dark"===e&&(t?"#fff"!==r.attr("fill")?(r.oriFill=r.attr("fill"),r.attr("fill",i),r.attr("opacity",.5)):r.attr("opacity",.2):"#fff"!==r.attr("fill")?(r.attr("fill",r.oriFill||r.attr("fill")),r.attr("opacity",1)):r.attr("opacity",1))}},"circle"),fD.registerNode("bubblexxx",{drawShape:function(e,t){var n=this,r=e.size/2,i=[["M",-r,0],["C",-r,r/2,-r/2,r,0,r],["C",r/2,r,r,r/2,r,0],["C",r,-r/2,r/2,-r,0,-r],["C",-r/2,-r,-r,-r/2,-r,0],["Z"]],o=t.addShape("path",{attrs:{x:0,y:0,path:i,fill:e.color||"steelblue"},name:"path-shape"}),a=t.addShape("path",{attrs:{x:0,y:0,path:i,opacity:.25,fill:e.color||"steelblue",shadowColor:e.color.split(" ")[2].substr(2),shadowBlur:40,shadowOffsetX:0,shadowOffsetY:30},name:"mask-shape"}),s=10,l=[],u=[];n.changeDirections(s,l);for(var c=0;c<s;c++){var d=r+l[c]*(Math.random()*r/1e3);u[c]<.97*r?u[c]=.97*r:u[c]>1.03*r&&(u[c]=1.03*r),u.push(d)}o.animate((function(){return{path:n.getBubblePath(r,s,l,u)}}),{repeat:!0,duration:1e4});var h=[],f=[];n.changeDirections(s,h);for(var p=0;p<s;p++){var m=r+h[p]*(Math.random()*r/1e3);f[p]<.97*r?f[p]=.97*r:f[p]>1.03*r&&(f[p]=1.03*r),f.push(m)}return a.animate((function(){return{path:n.getBubblePath(r,s,h,f)}}),{repeat:!0,duration:1e4}),o},changeDirections:function(e,t){for(var n=0;n<e;n++)if(t[n])t[n]=-1*t[n];else{var r=Math.random()>.5?1:-1;t.push(r)}return t},getBubblePath:function(e,t,n,r){for(var i=[],o=2*t,a=2*Math.PI/t,s=0,l=[],u=[],c=0;c<t;c++){var d=.001*Math.random();r[c]=r[c]+n[c]*d*e,r[c]<.97*e?(r[c]=.97*e,n[c]=-1*n[c]):r[c]>1.03*e&&(r[c]=1.03*e,n[c]=-1*n[c]);var h=r[c]*Math.cos(s),f=r[c]*Math.sin(s);l.push({x:h,y:f});for(var p=0;p<2;p++){var m=a/3,g=r[c]/Math.cos(m),v=0===p?-1:1,y=g*Math.cos(s+v*m),b=g*Math.sin(s+v*m);u.push({x:y,y:b})}s+=a}i.push(["M",l[0].x,l[0].y]);for(var _=1;_<t;_++)i.push(["C",u[2*_-1].x,u[2*_-1].y,u[2*_].x,u[2*_].y,l[_].x,l[_].y]);return i.push(["C",u[o-1].x,u[o-1].y,u[0].x,u[0].y,l[0].x,l[0].y]),i.push(["Z"]),i},setState:function(e,t,n){var r=n.get("keyShape"),i=n.getModel().uColor;"focused"===e&&(r.attr("stroke","white"),r.attr("lineWidth",10)),"dark"===e&&(t?"#fff"!==r.attr("fill")?(r.oriFill=r.attr("fill"),r.attr("fill",i),r.attr("opacity",0)):r.attr("opacity",.2):"#fff"!==r.attr("fill")?(r.attr("fill",r.oriFill||r.attr("fill")),r.attr("opacity",1)):r.attr("opacity",1))}},"single-node"),fD.registerNode("animate-circle",{setState:function(e,t,n){var r=n.get("keyShape"),i=r.get("parent").get("children")[1];if("disappearing"===e&&t)r.animate((function(e){return{opacity:1-e,r:r.attr("r")*(1-e)}}),{duration:200}),i.animate((function(e){return{opacity:1-e}}),{duration:500});else if("appearing"===e&&t){var o=n.getModel().size/2;r.animate((function(e){return{opacity:e,r:o*e,fill:r.attr("fill")}}),{duration:300}),i.animate({onFrame:function(e){return{opacity:e}}},{duration:300})}else if("dark"===e)if(t)if("#fff"!==r.attr("fill")){r.oriFill=r.attr("fill");var a=n.getModel().uColor;r.attr("fill",a)}else r.attr("opacity",.2),i.attr("fill","#A3B1BF"),i.attr("opacity",0);else"#fff"!==r.attr("fill")?r.attr("fill",r.oriFill||r.attr("fill")):(r.attr("opacity",1),i.attr("fill","#697B8C"),i.attr("opacity",1));"focused"===e&&(t?r.attr("lineWidth",5):r.attr("lineWidth",1))}},"circle"),fD.registerEdge("animate-line",{drawShape:function(e,t){var n=this.getShapeStyle(e);return n=Object.assign(n,{opacity:0,strokeOpacity:0}),t.addShape("path",{attrs:n,name:"path-shape"})},afterDraw:function(e,t){t.get("children")[0].animate((function(t){var n=t*e.style.opacity,r=t*e.style.strokeOpacity;return{opacity:t||n,strokeOpacity:t||r}}),{duration:300})},setState:function(e,t,n){var r=n.get("keyShape");"disappearing"===e&&t?r.animate((function(e){return{opacity:1-e,strokeOpacity:1-e}}),{duration:200}):"dark"===e&&(t?r.attr("opacity",.2):r.attr("opacity",1)),"active"===e&&(t?r.attr("lineWidth",3):r.attr("lineWidth",r.cfg.attrs.lineWidth))}},"line");var yD=o(7625),bD=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},_D=function(e,t){var n=(0,yD.getNeighborItems)(t);e.setAutoPaint(!1);var r=e.getNodes(),i=e.getEdges();r.forEach((function(t){e.setItemState(t,"dark",!0)})),i.forEach((function(t){e.setItemState(t,"dark",!0),e.setItemState(t,"active",!1)})),(0,yD.setItemStates)(n,"dark",!1),(0,yD.setItemStates)({edge:n.edge,inEdges:n.inEdges,outEdges:n.outEdges},"active",!0),e.paint(),e.setAutoPaint(!0)},wD=function(e,t){var n=e.getNodes();e.getEdges().forEach((function(t){e.setItemState(t,"dark",!1),e.setItemState(t,"active",!1)})),n.forEach((function(t){e.setItemState(t,"dark",!1)}))};fD.registerBehavior("xsj-hover-item",{getEvents:function(){return{"node:mouseenter":"onHoverItem","node:mouseleave":"onUnHoverItem"}},onHoverItem:function(e){var t=this.graph;if(t.xsjState.currentFocus){var n=e.item;_D(t,n)}},onUnHoverItem:function(e){var t=this.graph;if(t.xsjState.currentFocus){e.item;wD(t)}}});class xD{constructor(e){this.table=e}reloadData(e,t){return this.table.dataLoader.load(e,void 0,void 0,void 0,t)}langText(){return this.table.modules.localize.getText(...arguments)}langBind(){return this.table.modules.localize.bind(...arguments)}langLocale(){return this.table.modules.localize.getLocale(...arguments)}commsConnections(){return this.table.modules.comms.getConnections(...arguments)}commsSend(){return this.table.modules.comms.send(...arguments)}layoutMode(){return this.table.modules.layout.getMode()}layoutRefresh(){return this.table.modules.layout.layout()}subscribe(){return this.table.eventBus.subscribe(...arguments)}unsubscribe(){return this.table.eventBus.unsubscribe(...arguments)}subscribed(e){return this.table.eventBus.subscribed(e)}subscriptionChange(){return this.table.eventBus.subscriptionChange(...arguments)}dispatch(){return this.table.eventBus.dispatch(...arguments)}chain(){return this.table.eventBus.chain(...arguments)}confirm(){return this.table.eventBus.confirm(...arguments)}dispatchExternal(){return this.table.externalEvents.dispatch(...arguments)}subscribedExternal(e){return this.table.externalEvents.subscribed(e)}subscriptionChangeExternal(){return this.table.externalEvents.subscriptionChange(...arguments)}options(e,t){return void 0!==t&&(this.table.options[e]=t),this.table.options[e]}setOption(e,t){return void 0!==t&&(this.table.options[e]=t),this.table.options[e]}module(e){return this.table.module(e)}}class MD extends xD{constructor(e,t){super(e),this._handler=null}initialize(){}registerTableOption(e,t){this.table.optionsList.register(e,t)}registerColumnOption(e,t){this.table.columnManager.optionsList.register(e,t)}registerTableFunction(e,t){void 0===this.table[e]?this.table[e]=t:console.warn("Unable to bind table function, name already in use",e)}registerComponentFunction(e,t,n){return this.table.componentFunctionBinder.bind(e,t,n)}registerDataHandler(e,t){this.table.rowManager.registerDataPipelineHandler(e,t),this._handler=e}registerDisplayHandler(e,t){this.table.rowManager.registerDisplayPipelineHandler(e,t),this._handler=e}refreshData(e,t){t||(t=this._handler),t&&this.table.rowManager.refreshActiveData(t,!1,e)}}class ED{static elVisible(e){return!(e.offsetWidth<=0&&e.offsetHeight<=0)}static elOffset(e){var t=e.getBoundingClientRect();return{top:t.top+window.pageYOffset-document.documentElement.clientTop,left:t.left+window.pageXOffset-document.documentElement.clientLeft}}static deepClone(e,t,n=[]){var r={}.__proto__,i=[].__proto__;for(var o in t||(t=Object.assign(Array.isArray(e)?[]:{},e)),e){let a,s,l=e[o];null==l||"object"!=typeof l||l.__proto__!==r&&l.__proto__!==i||(a=n.findIndex((e=>e.subject===l)),a>-1?t[o]=n[a].copy:(s=Object.assign(Array.isArray(l)?[]:{},l),n.unshift({subject:l,copy:s}),t[o]=this.deepClone(l,s,n)))}return t}}class SD extends MD{constructor(e){super(e),this.allowedTypes=["","data","download","clipboard","print","htmlOutput"],this.registerColumnOption("accessor"),this.registerColumnOption("accessorParams"),this.registerColumnOption("accessorData"),this.registerColumnOption("accessorDataParams"),this.registerColumnOption("accessorDownload"),this.registerColumnOption("accessorDownloadParams"),this.registerColumnOption("accessorClipboard"),this.registerColumnOption("accessorClipboardParams"),this.registerColumnOption("accessorPrint"),this.registerColumnOption("accessorPrintParams"),this.registerColumnOption("accessorHtmlOutput"),this.registerColumnOption("accessorHtmlOutputParams")}initialize(){this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("row-data-retrieve",this.transformRow.bind(this))}initializeColumn(e){var t=!1,n={};this.allowedTypes.forEach((r=>{var i,o="accessor"+(r.charAt(0).toUpperCase()+r.slice(1));e.definition[o]&&(i=this.lookupAccessor(e.definition[o]))&&(t=!0,n[o]={accessor:i,params:e.definition[o+"Params"]||{}})})),t&&(e.modules.accessor=n)}lookupAccessor(e){var t=!1;switch(typeof e){case"string":SD.accessors[e]?t=SD.accessors[e]:console.warn("Accessor Error - No such accessor found, ignoring: ",e);break;case"function":t=e}return t}transformRow(e,t){var n="accessor"+(t.charAt(0).toUpperCase()+t.slice(1)),r=e.getComponent(),i=ED.deepClone(e.data||{});return this.table.columnManager.traverse((function(e){var o,a,s,l;e.modules.accessor&&(a=e.modules.accessor[n]||e.modules.accessor.accessor||!1)&&"undefined"!=(o=e.getFieldValue(i))&&(l=e.getComponent(),s="function"==typeof a.params?a.params(o,i,t,l,r):a.params,e.setFieldValue(i,a.accessor(o,i,t,s,l,r)))})),i}}SD.moduleName="accessor",SD.accessors={};function kD(e,t){var n=[];if(t=t||"",Array.isArray(e))e.forEach(((e,r)=>{n=n.concat(kD(e,t?t+"["+r+"]":r))}));else if("object"==typeof e)for(var r in e)n=n.concat(kD(e[r],t?t+"["+r+"]":r));else n.push({key:t,value:e});return n}function TD(e){var t=kD(e),n=[];return t.forEach((function(e){n.push(encodeURIComponent(e.key)+"="+encodeURIComponent(e.value))})),n.join("&")}function LD(e,t){var n=[];if(t=t||"",Array.isArray(e))e.forEach(((e,r)=>{n=n.concat(LD(e,t?t+"["+r+"]":r))}));else if("object"==typeof e)for(var r in e)n=n.concat(LD(e[r],t?t+"["+r+"]":r));else n.push({key:t,value:e});return n}var CD={json:{headers:{"Content-Type":"application/json"},body:function(e,t,n){return JSON.stringify(n)}},form:{headers:{},body:function(e,t,n){var r=LD(n),i=new FormData;return r.forEach((function(e){i.append(e.key,e.value)})),i}}};class DD extends MD{constructor(e){super(e),this.config=!1,this.url="",this.urlGenerator=!1,this.params=!1,this.loaderPromise=!1,this.registerTableOption("ajaxURL",!1),this.registerTableOption("ajaxURLGenerator",!1),this.registerTableOption("ajaxParams",{}),this.registerTableOption("ajaxConfig","get"),this.registerTableOption("ajaxContentType","form"),this.registerTableOption("ajaxRequestFunc",!1),this.registerTableOption("ajaxRequesting",(function(){})),this.registerTableOption("ajaxResponse",!1),this.contentTypeFormatters=DD.contentTypeFormatters}initialize(){this.loaderPromise=this.table.options.ajaxRequestFunc||DD.defaultLoaderPromise,this.urlGenerator=this.table.options.ajaxURLGenerator||DD.defaultURLGenerator,this.table.options.ajaxParams&&this.setParams(this.table.options.ajaxParams),this.table.options.ajaxConfig&&this.setConfig(this.table.options.ajaxConfig),this.table.options.ajaxURL&&this.setUrl(this.table.options.ajaxURL),this.registerTableFunction("getAjaxUrl",this.getUrl.bind(this)),this.subscribe("data-loading",this.requestDataCheck.bind(this)),this.subscribe("data-load",this.requestData.bind(this))}requestDataCheck(e,t,n,r){return!((e||!this.url)&&"string"!=typeof e)}requestData(e,t,n,r,i){return this.requestDataCheck(e)?(e&&this.setUrl(e),t&&this.setParams(t,!0),n&&this.setConfig(n),this.sendRequest()):i}setParams(e,t){if(t){this.params=this.params||{};for(let t in e)this.params[t]=e[t]}else this.params=e}getParams(){return this.params||{}}setConfig(e){if(this._loadDefaultConfig(),"string"==typeof e)this.config.method=e;else for(let t in e)this.config[t]=e[t]}_loadDefaultConfig(e){if(!this.config||e){this.config={};for(let e in DD.defaultConfig)this.config[e]=DD.defaultConfig[e]}}setUrl(e){this.url=e}getUrl(){return this.url}sendRequest(e){var t=this.url;return this._loadDefaultConfig(),!1!==this.table.options.ajaxRequesting.call(this.table,this.url,this.params)?this.loaderPromise(t,this.config,this.params).then((e=>(this.table.options.ajaxResponse&&(e=this.table.options.ajaxResponse.call(this.table,this.url,this.params,e)),e))):Promise.reject()}}DD.moduleName="ajax",DD.defaultConfig={method:"GET"},DD.defaultURLGenerator=function(e,t,n){return e&&n&&Object.keys(n).length&&(t.method&&"get"!=t.method.toLowerCase()||(t.method="get",e+=(e.includes("?")?"&":"?")+TD(n))),e},DD.defaultLoaderPromise=function(e,t,n){var r;return new Promise(((i,o)=>{if(e=this.urlGenerator.call(this.table,e,t,n),"GET"!=t.method.toUpperCase())if(r="object"==typeof this.table.options.ajaxContentType?this.table.options.ajaxContentType:this.contentTypeFormatters[this.table.options.ajaxContentType]){for(var a in r.headers)t.headers||(t.headers={}),void 0===t.headers[a]&&(t.headers[a]=r.headers[a]);t.body=r.body.call(this,e,t,n)}else console.warn("Ajax Error - Invalid ajaxContentType value:",this.table.options.ajaxContentType);e?(void 0===t.headers&&(t.headers={}),void 0===t.headers.Accept&&(t.headers.Accept="application/json"),void 0===t.headers["X-Requested-With"]&&(t.headers["X-Requested-With"]="XMLHttpRequest"),void 0===t.mode&&(t.mode="cors"),"cors"==t.mode?(void 0===t.headers.Origin&&(t.headers.Origin=window.location.origin),void 0===t.credentials&&(t.credentials="same-origin")):void 0===t.credentials&&(t.credentials="include"),fetch(e,t).then((e=>{e.ok?e.json().then((e=>{i(e)})).catch((e=>{o(e),console.warn("Ajax Load Error - Invalid JSON returned",e)})):(console.error("Ajax Load Error - Connection Error: "+e.status,e.statusText),o(e))})).catch((e=>{console.error("Ajax Load Error - Connection Error: ",e),o(e)}))):(console.warn("Ajax Load Error - No URL Set"),i([]))}))},DD.contentTypeFormatters=CD;class AD extends MD{constructor(e){super(e),this.mode=!0,this.pasteParser=function(){},this.pasteAction=function(){},this.customSelection=!1,this.rowRange=!1,this.blocked=!0,this.registerTableOption("clipboard",!1),this.registerTableOption("clipboardCopyStyled",!0),this.registerTableOption("clipboardCopyConfig",!1),this.registerTableOption("clipboardCopyFormatter",!1),this.registerTableOption("clipboardCopyRowRange","active"),this.registerTableOption("clipboardPasteParser","table"),this.registerTableOption("clipboardPasteAction","insert"),this.registerColumnOption("clipboard"),this.registerColumnOption("titleClipboard")}initialize(){this.mode=this.table.options.clipboard,this.rowRange=this.table.options.clipboardCopyRowRange,!0!==this.mode&&"copy"!==this.mode||this.table.element.addEventListener("copy",(e=>{var t,n;if(!this.blocked){if(e.preventDefault(),this.customSelection)t=this.customSelection,this.table.options.clipboardCopyFormatter&&(t=this.table.options.clipboardCopyFormatter("plain",t));else{var r=this.table.modules.export.generateExportList(this.table.options.clipboardCopyConfig,this.table.options.clipboardCopyStyled,this.rowRange,"clipboard");t=(n=this.table.modules.export.genereateHTMLTable(r))?this.generatePlainContent(r):"",this.table.options.clipboardCopyFormatter&&(t=this.table.options.clipboardCopyFormatter("plain",t),n=this.table.options.clipboardCopyFormatter("html",n))}window.clipboardData&&window.clipboardData.setData?window.clipboardData.setData("Text",t):e.clipboardData&&e.clipboardData.setData?(e.clipboardData.setData("text/plain",t),n&&e.clipboardData.setData("text/html",n)):e.originalEvent&&e.originalEvent.clipboardData.setData&&(e.originalEvent.clipboardData.setData("text/plain",t),n&&e.originalEvent.clipboardData.setData("text/html",n)),this.dispatchExternal("clipboardCopied",t,n),this.reset()}})),!0!==this.mode&&"paste"!==this.mode||this.table.element.addEventListener("paste",(e=>{this.paste(e)})),this.setPasteParser(this.table.options.clipboardPasteParser),this.setPasteAction(this.table.options.clipboardPasteAction),this.registerTableFunction("copyToClipboard",this.copy.bind(this))}reset(){this.blocked=!0,this.customSelection=!1}generatePlainContent(e){var t=[];return e.forEach((e=>{var n=[];e.columns.forEach((t=>{var r="";if(t)if("group"===e.type&&(t.value=t.component.getKey()),null===t.value)r="";else switch(typeof t.value){case"object":r=JSON.stringify(t.value);break;case"undefined":r="";break;default:r=t.value}n.push(r)})),t.push(n.join("\t"))})),t.join("\n")}copy(e,t){var n,r;this.blocked=!1,this.customSelection=!1,!0!==this.mode&&"copy"!==this.mode||(this.rowRange=e||this.table.options.clipboardCopyRowRange,void 0!==window.getSelection&&void 0!==document.createRange?((e=document.createRange()).selectNodeContents(this.table.element),(n=window.getSelection()).toString()&&t&&(this.customSelection=n.toString()),n.removeAllRanges(),n.addRange(e)):void 0!==document.selection&&void 0!==document.body.createTextRange&&((r=document.body.createTextRange()).moveToElementText(this.table.element),r.select()),document.execCommand("copy"),n&&n.removeAllRanges())}setPasteAction(e){switch(typeof e){case"string":this.pasteAction=AD.pasteActions[e],this.pasteAction||console.warn("Clipboard Error - No such paste action found:",e);break;case"function":this.pasteAction=e}}setPasteParser(e){switch(typeof e){case"string":this.pasteParser=AD.pasteParsers[e],this.pasteParser||console.warn("Clipboard Error - No such paste parser found:",e);break;case"function":this.pasteParser=e}}paste(e){var t,n,r;this.checkPaseOrigin(e)&&(t=this.getPasteData(e),(n=this.pasteParser.call(this,t))?(e.preventDefault(),this.table.modExists("mutator")&&(n=this.mutateData(n)),r=this.pasteAction.call(this,n),this.dispatchExternal("clipboardPasted",t,n,r)):this.dispatchExternal("clipboardPasteError",t))}mutateData(e){var t=[];return Array.isArray(e)?e.forEach((e=>{t.push(this.table.modules.mutator.transformRow(e,"clipboard"))})):t=e,t}checkPaseOrigin(e){var t=!0;return("DIV"!=e.target.tagName||this.table.modules.edit.currentCell)&&(t=!1),t}getPasteData(e){var t;return window.clipboardData&&window.clipboardData.getData?t=window.clipboardData.getData("Text"):e.clipboardData&&e.clipboardData.getData?t=e.clipboardData.getData("text/plain"):e.originalEvent&&e.originalEvent.clipboardData.getData&&(t=e.originalEvent.clipboardData.getData("text/plain")),t}}AD.moduleName="clipboard",AD.pasteActions={replace:function(e){return this.table.setData(e)},update:function(e){return this.table.updateOrAddData(e)},insert:function(e){return this.table.addData(e)}},AD.pasteParsers={table:function(e){var t=[],n=!0,r=this.table.columnManager.columns,i=[],o=[];return(e=e.split("\n")).forEach((function(e){t.push(e.split("\t"))})),!(!t.length||1===t.length&&t[0].length<2)&&(t[0].forEach((function(e){var t=r.find((function(t){return e&&t.definition.title&&e.trim()&&t.definition.title.trim()===e.trim()}));t?i.push(t):n=!1})),n||(n=!0,i=[],t[0].forEach((function(e){var t=r.find((function(t){return e&&t.field&&e.trim()&&t.field.trim()===e.trim()}));t?i.push(t):n=!1})),n||(i=this.table.columnManager.columnsByIndex)),n&&t.shift(),t.forEach((function(e){var t={};e.forEach((function(e,n){i[n]&&(t[i[n].field]=e)})),o.push(t)})),o)}};class PD{constructor(e){return this._row=e,new Proxy(this,{get:function(e,t,n){return void 0!==e[t]?e[t]:e._row.table.componentFunctionBinder.handle("row",e._row,t)}})}getData(e){return this._row.getData(e)}getElement(){return this._row.getElement()}getTable(){return this._row.table}getCells(){var e=[];return this._row.getCells().forEach((function(t){e.push(t.getComponent())})),e}getCell(e){var t=this._row.getCell(e);return!!t&&t.getComponent()}_getSelf(){return this._row}}class OD{constructor(e){return this._cell=e,new Proxy(this,{get:function(e,t,n){return void 0!==e[t]?e[t]:e._cell.table.componentFunctionBinder.handle("cell",e._cell,t)}})}getValue(){return this._cell.getValue()}getOldValue(){return this._cell.getOldValue()}getInitialValue(){return this._cell.initialValue}getElement(){return this._cell.getElement()}getRow(){return this._cell.row.getComponent()}getData(){return this._cell.row.getData()}getField(){return this._cell.column.getField()}getColumn(){return this._cell.column.getComponent()}setValue(e,t){void 0===t&&(t=!0),this._cell.setValue(e,t)}restoreOldValue(){this._cell.setValueActual(this._cell.getOldValue())}restoreInitialValue(){this._cell.setValueActual(this._cell.initialValue)}checkHeight(){this._cell.checkHeight()}getTable(){return this._cell.table}_getSelf(){return this._cell}}class ID extends xD{constructor(e,t){super(e.table),this.table=e.table,this.column=e,this.row=t,this.element=null,this.value=null,this.initialValue,this.oldValue=null,this.modules={},this.height=null,this.width=null,this.minWidth=null,this.component=null,this.loaded=!1,this.build()}build(){this.generateElement(),this.setWidth(),this._configureCell(),this.setValueActual(this.column.getFieldValue(this.row.data)),this.initialValue=this.value}generateElement(){this.element=document.createElement("div"),this.element.className="tabulator-cell",this.element.setAttribute("role","gridcell"),this.element=this.element}_configureCell(){var e=this.element,t=this.column.getField();(e.style.textAlign=this.column.hozAlign,this.column.vertAlign&&(e.style.display="inline-flex",e.style.alignItems={top:"flex-start",bottom:"flex-end",middle:"center"}[this.column.vertAlign]||"",this.column.hozAlign&&(e.style.justifyContent={left:"flex-start",right:"flex-end",center:"center"}[this.column.hozAlign]||"")),t&&e.setAttribute("tabulator-field",t),this.column.definition.cssClass)&&this.column.definition.cssClass.split(" ").forEach((t=>{e.classList.add(t)}));"hover"===this.table.options.tooltipGenerationMode&&e.addEventListener("mouseenter",(e=>{this._generateTooltip()})),this.dispatch("cell-init",this),this.column.visible||this.hide()}_generateContents(){var e;switch(typeof(e=this.chain("cell-format",this,null,(()=>this.element.innerHTML=this.value)))){case"object":if(e instanceof Node){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.element.appendChild(e)}else this.element.innerHTML="",null!=e&&console.warn("Format Error - Formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:",e);break;case"undefined":case"null":this.element.innerHTML="";break;default:this.element.innerHTML=e}}cellRendered(){this.dispatch("cell-rendered",this)}_generateTooltip(){var e=this.column.tooltip;e?(!0===e?e=this.value:"function"==typeof e&&!1===(e=e(this.getComponent()))&&(e=""),void 0===e&&(e=""),this.element.setAttribute("title",e)):this.element.setAttribute("title","")}getElement(e){return this.loaded||(this.loaded=!0,e||this.layoutElement()),this.element}getValue(){return this.value}getOldValue(){return this.oldValue}setValue(e,t){this.setValueProcessData(e,t)&&(this.dispatch("cell-value-updated",this),this.cellRendered(),this.dispatchExternal("cellEdited",this.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()))}setValueProcessData(e,t){var n=!1;return this.value!=e&&(n=!0,t&&(e=this.chain("cell-value-changing",[this,e],null,e))),this.setValueActual(e),n&&this.dispatch("cell-value-changed",this),n}setValueActual(e){this.oldValue=this.value,this.value=e,this.dispatch("cell-value-save-before",this),this.column.setFieldValue(this.row.data,e),this.dispatch("cell-value-save-after",this),this.loaded&&this.layoutElement()}layoutElement(){this._generateContents(),this._generateTooltip(),this.dispatch("cell-layout",this)}setWidth(){this.width=this.column.width,this.element.style.width=this.column.widthStyled}clearWidth(){this.width="",this.element.style.width=""}getWidth(){return this.width||this.element.offsetWidth}setMinWidth(){this.minWidth=this.column.minWidth,this.element.style.minWidth=this.column.minWidthStyled}setMaxWidth(){this.maxWidth=this.column.maxWidth,this.element.style.maxWidth=this.column.maxWidthStyled}checkHeight(){this.row.reinitializeHeight()}clearHeight(){this.element.style.height="",this.height=null}setHeight(){this.height=this.row.height,this.element.style.height=this.row.heightStyled}getHeight(){return this.height||this.element.offsetHeight}show(){this.element.style.display=this.column.vertAlign?"inline-flex":""}hide(){this.element.style.display="none"}delete(){this.dispatch("cell-delete",this),!this.table.rowManager.redrawBlock&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=!1,this.column.deleteCell(this),this.row.deleteCell(this),this.calcs={}}getIndex(){return this.row.getCellIndex(this)}getComponent(){return this.component||(this.component=new OD(this)),this.component}}class RD{constructor(e){return this._column=e,this.type="ColumnComponent",new Proxy(this,{get:function(e,t,n){return void 0!==e[t]?e[t]:e._column.table.componentFunctionBinder.handle("column",e._column,t)}})}getElement(){return this._column.getElement()}getDefinition(){return this._column.getDefinition()}getField(){return this._column.getField()}getCells(){var e=[];return this._column.cells.forEach((function(t){e.push(t.getComponent())})),e}isVisible(){return this._column.visible}show(){this._column.isGroup?this._column.columns.forEach((function(e){e.show()})):this._column.show()}hide(){this._column.isGroup?this._column.columns.forEach((function(e){e.hide()})):this._column.hide()}toggle(){this._column.visible?this.hide():this.show()}delete(){return this._column.delete()}getSubColumns(){var e=[];return this._column.columns.length&&this._column.columns.forEach((function(t){e.push(t.getComponent())})),e}getParentColumn(){return this._column.parent instanceof Column&&this._column.parent.getComponent()}_getSelf(){return this._column}scrollTo(){return this._column.table.columnManager.scrollToColumn(this._column)}getTable(){return this._column.table}move(e,t){var n=this._column.table.columnManager.findColumn(e);n?this._column.table.columnManager.moveColumn(this._column,n,t):console.warn("Move Error - No matching column found:",n)}getNextColumn(){var e=this._column.nextColumn();return!!e&&e.getComponent()}getPrevColumn(){var e=this._column.prevColumn();return!!e&&e.getComponent()}updateDefinition(e){return this._column.updateDefinition(e)}getWidth(){return this._column.getWidth()}setWidth(e){var t;return t=!0===e?this._column.reinitializeWidth(!0):this._column.setWidth(e),this._column.table.columnManager.renderer.rerenderColumns(!0),t}}var ND={title:void 0,field:void 0,columns:void 0,visible:void 0,hozAlign:void 0,vertAlign:void 0,width:void 0,minWidth:40,maxWidth:void 0,tooltip:void 0,cssClass:void 0,variableHeight:void 0,headerTooltip:void 0,headerVertical:void 0,headerHozAlign:void 0,editableTitle:void 0};class YD extends xD{constructor(e,t){super(t.table),this.definition=e,this.parent=t,this.type="column",this.columns=[],this.cells=[],this.element=this.createElement(),this.contentElement=!1,this.titleHolderElement=!1,this.titleElement=!1,this.groupElement=this.createGroupElement(),this.isGroup=!1,this.tooltip=!1,this.hozAlign="",this.vertAlign="",this.field="",this.fieldStructure="",this.getFieldValue="",this.setFieldValue="",this.titleFormatterRendered=!1,this.mapDefinitions(),this.setField(this.definition.field),this.modules={},this.width=null,this.widthStyled="",this.maxWidth=null,this.maxWidthStyled="",this.minWidth=null,this.minWidthStyled="",this.widthFixed=!1,this.visible=!0,this.component=null,this.definition.columns?(this.isGroup=!0,this.definition.columns.forEach(((e,t)=>{var n=new YD(e,this);this.attachColumn(n)})),this.checkColumnVisibility()):t.registerColumnField(this),this._initialize(),this.bindModuleColumns()}createElement(){var e=document.createElement("div");return e.classList.add("tabulator-col"),e.setAttribute("role","columnheader"),e.setAttribute("aria-sort","none"),e}createGroupElement(){var e=document.createElement("div");return e.classList.add("tabulator-col-group-cols"),e}mapDefinitions(){var e=this.table.options.columnDefaults;if(e)for(let t in e)void 0===this.definition[t]&&(this.definition[t]=e[t]);this.definition=this.table.columnManager.optionsList.generate(YD.defaultOptionList,this.definition)}checkDefinition(){Object.keys(this.definition).forEach((e=>{-1===YD.defaultOptionList.indexOf(e)&&console.warn("Invalid column definition option in '"+(this.field||this.definition.title)+"' column:",e)}))}setField(e){this.field=e,this.fieldStructure=e?this.table.options.nestedFieldSeparator?e.split(this.table.options.nestedFieldSeparator):[e]:[],this.getFieldValue=this.fieldStructure.length>1?this._getNestedData:this._getFlatData,this.setFieldValue=this.fieldStructure.length>1?this._setNestedData:this._setFlatData}registerColumnPosition(e){this.parent.registerColumnPosition(e)}registerColumnField(e){this.parent.registerColumnField(e)}reRegisterPosition(){this.isGroup?this.columns.forEach((function(e){e.reRegisterPosition()})):this.registerColumnPosition(this)}_mapDepricatedFunctionality(){}setTooltip(){var e=this.definition,t=void 0===e.headerTooltip?e.tooltip:e.headerTooltip;t?!0===t?e.field?this.langBind("columns|"+e.field,(t=>{this.element.setAttribute("title",t||e.title)})):this.element.setAttribute("title",e.title):("function"==typeof t&&!1===(t=t(this.getComponent()))&&(t=""),this.element.setAttribute("title",t)):this.element.setAttribute("title","")}_initialize(){for(var e=this.definition;this.element.firstChild;)this.element.removeChild(this.element.firstChild);e.headerVertical&&(this.element.classList.add("tabulator-col-vertical"),"flip"===e.headerVertical&&this.element.classList.add("tabulator-col-vertical-flip")),this.contentElement=this._bindEvents(),this.contentElement=this._buildColumnHeaderContent(),this.element.appendChild(this.contentElement),this.isGroup?this._buildGroupHeader():this._buildColumnHeader(),this.setTooltip(),this.dispatch("column-init",this),this.element.addEventListener("mouseenter",(e=>{this.setTooltip()}))}_bindEvents(){var e,t,n,r=this.definition;"function"==typeof r.headerClick&&this.element.addEventListener("click",(e=>{r.headerClick(e,this.getComponent())})),"function"==typeof r.headerDblClick&&this.element.addEventListener("dblclick",(e=>{r.headerDblClick(e,this.getComponent())})),"function"==typeof r.headerContext&&this.element.addEventListener("contextmenu",(e=>{r.headerContext(e,this.getComponent())})),"function"==typeof r.headerTap&&(n=!1,this.element.addEventListener("touchstart",(e=>{n=!0}),{passive:!0}),this.element.addEventListener("touchend",(e=>{n&&r.headerTap(e,this.getComponent()),n=!1}))),"function"==typeof r.headerDblTap&&(e=null,this.element.addEventListener("touchend",(t=>{e?(clearTimeout(e),e=null,r.headerDblTap(t,this.getComponent())):e=setTimeout((()=>{clearTimeout(e),e=null}),300)}))),"function"==typeof r.headerTapHold&&(t=null,this.element.addEventListener("touchstart",(e=>{clearTimeout(t),t=setTimeout((function(){clearTimeout(t),t=null,n=!1,r.headerTapHold(e,this.getComponent())}),1e3)}),{passive:!0}),this.element.addEventListener("touchend",(e=>{clearTimeout(t),t=null})))}_buildColumnHeader(){var e=this.definition;this.table;(this.dispatch("column-layout",this),void 0!==e.visible&&(e.visible?this.show(!0):this.hide(!0)),e.cssClass)&&e.cssClass.split(" ").forEach((e=>{this.element.classList.add(e)}));e.field&&this.element.setAttribute("tabulator-field",e.field),this.setMinWidth(parseInt(e.minWidth)),e.maxWidth&&this.setMaxWidth(parseInt(e.maxWidth)),this.reinitializeWidth(),this.tooltip=this.definition.tooltip,this.hozAlign=this.definition.hozAlign,this.vertAlign=this.definition.vertAlign,this.titleElement.style.textAlign=this.definition.headerHozAlign}_buildColumnHeaderContent(){this.definition,this.table;var e=document.createElement("div");return e.classList.add("tabulator-col-content"),this.titleHolderElement=document.createElement("div"),this.titleHolderElement.classList.add("tabulator-col-title-holder"),e.appendChild(this.titleHolderElement),this.titleElement=this._buildColumnHeaderTitle(),this.titleHolderElement.appendChild(this.titleElement),e}_buildColumnHeaderTitle(){var e=this.definition,t=document.createElement("div");if(t.classList.add("tabulator-col-title"),e.editableTitle){var n=document.createElement("input");n.classList.add("tabulator-title-editor"),n.addEventListener("click",(e=>{e.stopPropagation(),n.focus()})),n.addEventListener("change",(()=>{e.title=n.value,this.dispatchExternal("columnTitleChanged",this.getComponent())})),t.appendChild(n),e.field?this.langBind("columns|"+e.field,(t=>{n.value=t||e.title||"&nbsp;"})):n.value=e.title||"&nbsp;"}else e.field?this.langBind("columns|"+e.field,(n=>{this._formatColumnHeaderTitle(t,n||e.title||"&nbsp;")})):this._formatColumnHeaderTitle(t,e.title||"&nbsp;");return t}_formatColumnHeaderTitle(e,t){var n=this.chain("column-format",[this,t,e],null,(()=>t));switch(typeof n){case"object":n instanceof Node?e.appendChild(n):(e.innerHTML="",console.warn("Format Error - Title formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:",n));break;case"undefined":case"null":e.innerHTML="";break;default:e.innerHTML=n}}_buildGroupHeader(){(this.element.classList.add("tabulator-col-group"),this.element.setAttribute("role","columngroup"),this.element.setAttribute("aria-title",this.definition.title),this.definition.cssClass)&&this.definition.cssClass.split(" ").forEach((e=>{this.element.classList.add(e)}));this.titleElement.style.textAlign=this.definition.headerHozAlign,this.element.appendChild(this.groupElement)}_getFlatData(e){return e[this.field]}_getNestedData(e){var t,n=e,r=this.fieldStructure,i=r.length;for(let e=0;e<i&&(t=n=n[r[e]],n);e++);return t}_setFlatData(e,t){this.field&&(e[this.field]=t)}_setNestedData(e,t){var n=e,r=this.fieldStructure,i=r.length;for(let e=0;e<i;e++)if(e==i-1)n[r[e]]=t;else{if(!n[r[e]]){if(void 0===t)break;n[r[e]]={}}n=n[r[e]]}}attachColumn(e){this.groupElement?(this.columns.push(e),this.groupElement.appendChild(e.getElement())):console.warn("Column Warning - Column being attached to another column instead of column group")}verticalAlign(e,t){var n=this.parent.isGroup?this.parent.getGroupElement().clientHeight:t||this.parent.getHeadersElement().clientHeight;this.element.style.height=n+"px",this.isGroup&&(this.groupElement.style.minHeight=n-this.contentElement.offsetHeight+"px"),this.isGroup||"top"===e||(this.element.style.paddingTop="bottom"===e?this.element.clientHeight-this.contentElement.offsetHeight+"px":(this.element.clientHeight-this.contentElement.offsetHeight)/2+"px"),this.columns.forEach((function(t){t.verticalAlign(e)}))}clearVerticalAlign(){this.element.style.paddingTop="",this.element.style.height="",this.element.style.minHeight="",this.groupElement.style.minHeight="",this.columns.forEach((function(e){e.clearVerticalAlign()}))}bindModuleColumns(){"rownum"==this.definition.formatter&&(this.table.rowManager.rowNumColumn=this)}getElement(){return this.element}getGroupElement(){return this.groupElement}getField(){return this.field}getFirstColumn(){return this.isGroup?!!this.columns.length&&this.columns[0].getFirstColumn():this}getLastColumn(){return this.isGroup?!!this.columns.length&&this.columns[this.columns.length-1].getLastColumn():this}getColumns(){return this.columns}getCells(){return this.cells}getTopColumn(){return this.parent.isGroup?this.parent.getTopColumn():this}getDefinition(e){var t=[];return this.isGroup&&e&&(this.columns.forEach((function(e){t.push(e.getDefinition(!0))})),this.definition.columns=t),this.definition}checkColumnVisibility(){var e=!1;this.columns.forEach((function(t){t.visible&&(e=!0)})),e?(this.show(),this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!1)):this.hide()}show(e,t){this.visible||(this.visible=!0,this.element.style.display="",this.parent.isGroup&&this.parent.checkColumnVisibility(),this.cells.forEach((function(e){e.show()})),this.isGroup||null!==this.width||this.reinitializeWidth(),this.table.columnManager.verticalAlignHeaders(),this.dispatch("column-show",this,t),e||this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!0),this.parent.isGroup&&this.parent.matchChildWidths(),this.silent||this.table.columnManager.renderer.rerenderColumns())}hide(e,t){this.visible&&(this.visible=!1,this.element.style.display="none",this.table.columnManager.verticalAlignHeaders(),this.parent.isGroup&&this.parent.checkColumnVisibility(),this.cells.forEach((function(e){e.hide()})),this.dispatch("column-hide",this),e||this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!1),this.parent.isGroup&&this.parent.matchChildWidths(),this.silent||this.table.columnManager.renderer.rerenderColumns())}matchChildWidths(){var e=0;this.contentElement&&this.columns.length&&(this.columns.forEach((function(t){t.visible&&(e+=t.getWidth())})),this.contentElement.style.maxWidth=e-1+"px",this.parent.isGroup&&this.parent.matchChildWidths())}removeChild(e){var t=this.columns.indexOf(e);t>-1&&this.columns.splice(t,1),this.columns.length||this.delete()}setWidth(e){this.widthFixed=!0,this.setWidthActual(e)}setWidthActual(e){isNaN(e)&&(e=Math.floor(this.table.element.clientWidth/100*parseInt(e))),e=Math.max(this.minWidth,e),this.maxWidth&&(e=Math.min(this.maxWidth,e)),this.width=e,this.widthStyled=e?e+"px":"",this.element.style.width=this.widthStyled,this.isGroup||this.cells.forEach((function(e){e.setWidth()})),this.parent.isGroup&&this.parent.matchChildWidths(),this.dispatch("column-width",this)}checkCellHeights(){var e=[];this.cells.forEach((function(t){t.row.heightInitialized&&(null!==t.row.getElement().offsetParent?(e.push(t.row),t.row.clearCellHeight()):t.row.heightInitialized=!1)})),e.forEach((function(e){e.calcHeight()})),e.forEach((function(e){e.setCellHeight()}))}getWidth(){var e=0;return this.isGroup?this.columns.forEach((function(t){t.visible&&(e+=t.getWidth())})):e=this.width,e}getHeight(){return this.element.offsetHeight}setMinWidth(e){this.minWidth=e,this.minWidthStyled=e?e+"px":"",this.element.style.minWidth=this.minWidthStyled,this.cells.forEach((function(e){e.setMinWidth()}))}setMaxWidth(e){this.maxWidth=e,this.maxWidthStyled=e?e+"px":"",this.element.style.maxWidth=this.maxWidthStyled,this.cells.forEach((function(e){e.setMaxWidth()}))}delete(){return new Promise(((e,t)=>{this.isGroup&&this.columns.forEach((function(e){e.delete()})),this.dispatch("column-delete",this);var n=this.cells.length;for(let e=0;e<n;e++)this.cells[0].delete();this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=!1,this.contentElement=!1,this.titleElement=!1,this.groupElement=!1,this.parent.isGroup&&this.parent.removeChild(this),this.table.columnManager.deregisterColumn(this),this.table.columnManager.renderer.rerenderColumns(!0),e()}))}columnRendered(){this.titleFormatterRendered&&this.titleFormatterRendered()}generateCell(e){var t=new ID(this,e);return this.cells.push(t),t}nextColumn(){var e=this.table.columnManager.findColumnIndex(this);return e>-1&&this._nextVisibleColumn(e+1)}_nextVisibleColumn(e){var t=this.table.columnManager.getColumnByIndex(e);return!t||t.visible?t:this._nextVisibleColumn(e+1)}prevColumn(){var e=this.table.columnManager.findColumnIndex(this);return e>-1&&this._prevVisibleColumn(e-1)}_prevVisibleColumn(e){var t=this.table.columnManager.getColumnByIndex(e);return!t||t.visible?t:this._prevVisibleColumn(e-1)}reinitializeWidth(e){this.widthFixed=!1,void 0===this.definition.width||e||this.setWidth(this.definition.width),this.dispatch("column-width-fit-before",this),this.fitToData(),this.dispatch("column-width-fit-after",this)}fitToData(){if(!this.isGroup){this.widthFixed||(this.element.style.width="",this.cells.forEach((e=>{e.clearWidth()})));var e=this.element.offsetWidth;this.width&&this.widthFixed||(this.cells.forEach((t=>{var n=t.getWidth();n>e&&(e=n)})),e&&this.setWidthActual(e+1))}}updateDefinition(e){var t;return this.isGroup||this.parent.isGroup?(console.error("Column Update Error - The updateDefinition function is only available on ungrouped columns"),Promise.reject("Column Update Error - The updateDefinition function is only available on columns, not column groups")):(t=Object.assign({},this.getDefinition()),t=Object.assign(t,e),this.table.columnManager.addColumn(t,!1,this).then((e=>(t.field==this.field&&(this.field=!1),this.delete().then((()=>e.getComponent()))))))}deleteCell(e){var t=this.cells.indexOf(e);t>-1&&this.cells.splice(t,1)}getComponent(){return this.component||(this.component=new RD(this)),this.component}}YD.defaultOptionList=ND;class jD{constructor(e){return this._row=e,new Proxy(this,{get:function(e,t,n){return void 0!==e[t]?e[t]:e._row.table.componentFunctionBinder.handle("row",e._row,t)}})}getData(e){return this._row.getData(e)}getElement(){return this._row.getElement()}getCells(){var e=[];return this._row.getCells().forEach((function(t){e.push(t.getComponent())})),e}getCell(e){var t=this._row.getCell(e);return!!t&&t.getComponent()}getIndex(){return this._row.getData("data")[this._row.table.options.index]}getPosition(e){return this._row.table.rowManager.getRowPosition(this._row,e)}delete(){return this._row.delete()}scrollTo(){return this._row.table.rowManager.scrollToRow(this._row)}move(e,t){this._row.moveToRow(e,t)}update(e){return this._row.updateData(e)}normalizeHeight(){this._row.normalizeHeight(!0)}_getSelf(){return this._row}reformat(){return this._row.reinitialize()}getTable(){return this._row.table}getNextRow(){var e=this._row.nextRow();return e?e.getComponent():e}getPrevRow(){var e=this._row.prevRow();return e?e.getComponent():e}}class FD extends xD{constructor(e,t,n="row"){super(t.table),this.parent=t,this.data={},this.type=n,this.element=!1,this.modules={},this.cells=[],this.height=0,this.heightStyled="",this.manualHeight=!1,this.outerHeight=0,this.initialized=!1,this.heightInitialized=!1,this.component=null,this.created=!1,this.setData(e)}create(){this.created||(this.created=!0,this.generateElement())}createElement(){var e=document.createElement("div");e.classList.add("tabulator-row"),e.setAttribute("role","row"),this.element=e}getElement(){return this.create(),this.element}detachElement(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)}generateElement(){this.createElement(),this.dispatch("row-init",this)}generateCells(){this.cells=this.table.columnManager.generateCells(this)}initialize(e){if(this.create(),!this.initialized||e){for(this.deleteCells();this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.dispatch("row-layout-before",this),this.generateCells(),this.table.columnManager.renderer.renderRowCells(this),e&&this.normalizeHeight(),this.dispatch("row-layout",this),this.table.options.rowFormatter&&this.table.options.rowFormatter(this.getComponent()),this.initialized=!0,this.dispatch("row-layout-after",this)}else this.table.columnManager.renderer.rerenderRowCells(this)}reinitializeHeight(){this.heightInitialized=!1,this.element&&null!==this.element.offsetParent&&this.normalizeHeight(!0)}deinitializeHeight(){this.heightInitialized=!1}reinitialize(e){this.initialized=!1,this.heightInitialized=!1,this.manualHeight||(this.height=0,this.heightStyled=""),this.element&&null!==this.element.offsetParent&&this.initialize(!0),this.dispatch("row-relayout",this)}calcHeight(e){var t=0,n=this.table.options.resizableRows?this.element.clientHeight:0;this.cells.forEach((function(e){var n=e.getHeight();n>t&&(t=n)})),this.height=e?Math.max(t,n):this.manualHeight?this.height:Math.max(t,n),this.heightStyled=this.height?this.height+"px":"",this.outerHeight=this.element.offsetHeight}setCellHeight(){this.cells.forEach((function(e){e.setHeight()})),this.heightInitialized=!0}clearCellHeight(){this.cells.forEach((function(e){e.clearHeight()}))}normalizeHeight(e){e&&this.clearCellHeight(),this.calcHeight(e),this.setCellHeight()}setHeight(e,t){(this.height!=e||t)&&(this.manualHeight=!0,this.height=e,this.heightStyled=e?e+"px":"",this.setCellHeight(),this.outerHeight=this.element.offsetHeight)}getHeight(){return this.outerHeight}getWidth(){return this.element.offsetWidth}deleteCell(e){var t=this.cells.indexOf(e);t>-1&&this.cells.splice(t,1)}setData(e){this.data=this.chain("row-data-init-before",[this,e],void 0,e),this.dispatch("row-data-init-after",this)}updateData(e){var t,n=this.element&&ED.elVisible(this.element),r={};return new Promise(((i,o)=>{for(var a in"string"==typeof e&&(e=JSON.parse(e)),this.dispatch("row-data-save-before",this),this.subscribed("row-data-changing")&&(r=Object.assign(r,this.data),r=Object.assign(r,e)),t=this.chain("row-data-changing",[this,r,e],null,e))this.data[a]=t[a];for(var a in this.dispatch("row-data-save-after",this),e){this.table.columnManager.getColumnsByFieldRoot(a).forEach((e=>{let r=this.getCell(e.getField());if(r){let i=e.getFieldValue(t);r.getValue()!=i&&(r.setValueProcessData(i),n&&r.cellRendered())}}))}n?(this.normalizeHeight(!0),this.table.options.rowFormatter&&this.table.options.rowFormatter(this.getComponent())):(this.initialized=!1,this.height=0,this.heightStyled=""),this.dispatch("row-data-changed",this,n,e),this.dispatchExternal("rowUpdated",this.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()),i()}))}getData(e){return e?this.chain("row-data-retrieve",[this,e],null,this.data):this.data}getCell(e){return e=this.table.columnManager.findColumn(e),this.initialized||this.generateCells(),this.cells.find((function(t){return t.column===e}))}getCellIndex(e){return this.cells.findIndex((function(t){return t===e}))}findCell(e){return this.cells.find((t=>t.element===e))}getCells(){return this.initialized||this.generateCells(),this.cells}nextRow(){return this.table.rowManager.nextDisplayRow(this,!0)||!1}prevRow(){return this.table.rowManager.prevDisplayRow(this,!0)||!1}moveToRow(e,t){var n=this.table.rowManager.findRow(e);n?(this.table.rowManager.moveRowActual(this,n,!t),this.table.rowManager.refreshActiveData("display",!1,!0)):console.warn("Move Error - No matching row found:",e)}delete(){return this.dispatch("row-delete",this),this.deleteActual(),Promise.resolve()}deleteActual(e){this.table.rowManager.getRowIndex(this);this.detatchModules(),this.table.rowManager.deleteRow(this,e),this.deleteCells(),this.initialized=!1,this.heightInitialized=!1,this.element=!1,this.dispatch("row-deleted",this)}detatchModules(){this.dispatch("row-deleting",this)}deleteCells(){var e=this.cells.length;for(let t=0;t<e;t++)this.cells[0].delete()}wipe(){if(this.detatchModules(),this.deleteCells(),this.element){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.element.parentNode&&this.element.parentNode.removeChild(this.element)}this.element=!1,this.modules={}}getGroup(){return this.modules.group||!1}getComponent(){return this.component||(this.component=new jD(this)),this.component}}var BD={avg:function(e,t,n){var r=0,i=void 0!==n.precision?n.precision:2;return e.length&&(r=e.reduce((function(e,t){return Number(e)+Number(t)})),r/=e.length,r=!1!==i?r.toFixed(i):r),parseFloat(r).toString()},max:function(e,t,n){var r=null,i=void 0!==n.precision&&n.precision;return e.forEach((function(e){((e=Number(e))>r||null===r)&&(r=e)})),null!==r?!1!==i?r.toFixed(i):r:""},min:function(e,t,n){var r=null,i=void 0!==n.precision&&n.precision;return e.forEach((function(e){((e=Number(e))<r||null===r)&&(r=e)})),null!==r?!1!==i?r.toFixed(i):r:""},sum:function(e,t,n){var r=0,i=void 0!==n.precision&&n.precision;return e.length&&e.forEach((function(e){e=Number(e),r+=isNaN(e)?0:Number(e)})),!1!==i?r.toFixed(i):r},concat:function(e,t,n){var r=0;return e.length&&(r=e.reduce((function(e,t){return String(e)+String(t)}))),r},count:function(e,t,n){var r=0;return e.length&&e.forEach((function(e){e&&r++})),r}};class zD extends MD{constructor(e){super(e),this.topCalcs=[],this.botCalcs=[],this.genColumn=!1,this.topElement=this.createElement(),this.botElement=this.createElement(),this.topRow=!1,this.botRow=!1,this.topInitialized=!1,this.botInitialized=!1,this.registerTableOption("columnCalcs",!0),this.registerColumnOption("topCalc"),this.registerColumnOption("topCalcParams"),this.registerColumnOption("topCalcFormatter"),this.registerColumnOption("topCalcFormatterParams"),this.registerColumnOption("bottomCalc"),this.registerColumnOption("bottomCalcParams"),this.registerColumnOption("bottomCalcFormatter"),this.registerColumnOption("bottomCalcFormatterParams")}createElement(){var e=document.createElement("div");return e.classList.add("tabulator-calcs-holder"),e}initialize(){this.genColumn=new YD({field:"value"},this),this.subscribe("cell-value-changed",this.cellValueChanged.bind(this)),this.subscribe("column-init",this.initializeColumnCheck.bind(this)),this.subscribe("row-deleted",this.rowsUpdated.bind(this)),this.subscribe("scroll-horizontal",this.scrollHorizontal.bind(this)),this.subscribe("row-added",this.rowsUpdated.bind(this)),this.subscribe("column-moved",this.recalcActiveRows.bind(this)),this.subscribe("column-add",this.recalcActiveRows.bind(this)),this.subscribe("data-refeshed",this.recalcActiveRows.bind(this)),this.subscribe("table-redraw",this.tableRedraw.bind(this)),this.registerTableFunction("getCalcResults",this.getResults.bind(this)),this.registerTableFunction("recalc",this.userRecalc.bind(this))}tableRedraw(e){this.recalc(this.table.rowManager.activeRows),e&&this.redraw()}userRecalc(){this.recalc(this.table.rowManager.activeRows)}rowsUpdated(e){this.table.options.groupBy?this.recalcRowGroup(this):this.recalcActiveRows()}recalcActiveRows(){this.recalc(this.table.rowManager.activeRows)}cellValueChanged(e){(e.column.definition.topCalc||e.column.definition.bottomCalc)&&(this.table.options.groupBy?("table"!=this.table.options.columnCalcs&&"both"!=this.table.options.columnCalcs||this.recalcActiveRows(),"table"!=this.table.options.columnCalcs&&this.recalcRowGroup(e.row)):this.recalcActiveRows())}initializeColumnCheck(e){(e.definition.topCalc||e.definition.bottomCalc)&&this.initializeColumn(e)}initializeColumn(e){var t=e.definition,n={topCalcParams:t.topCalcParams||{},botCalcParams:t.bottomCalcParams||{}};if(t.topCalc){switch(typeof t.topCalc){case"string":zD.calculations[t.topCalc]?n.topCalc=zD.calculations[t.topCalc]:console.warn("Column Calc Error - No such calculation found, ignoring: ",t.topCalc);break;case"function":n.topCalc=t.topCalc}n.topCalc&&(e.modules.columnCalcs=n,this.topCalcs.push(e),"group"!=this.table.options.columnCalcs&&this.initializeTopRow())}if(t.bottomCalc){switch(typeof t.bottomCalc){case"string":zD.calculations[t.bottomCalc]?n.botCalc=zD.calculations[t.bottomCalc]:console.warn("Column Calc Error - No such calculation found, ignoring: ",t.bottomCalc);break;case"function":n.botCalc=t.bottomCalc}n.botCalc&&(e.modules.columnCalcs=n,this.botCalcs.push(e),"group"!=this.table.options.columnCalcs&&this.initializeBottomRow())}}registerColumnField(){}removeCalcs(){var e=!1;this.topInitialized&&(this.topInitialized=!1,this.topElement.parentNode.removeChild(this.topElement),e=!0),this.botInitialized&&(this.botInitialized=!1,this.table.footerManager.remove(this.botElement),e=!0),e&&this.table.rowManager.adjustTableSize()}initializeTopRow(){this.topInitialized||(this.table.columnManager.getElement().insertBefore(this.topElement,this.table.columnManager.headersElement.nextSibling),this.topInitialized=!0)}initializeBottomRow(){this.botInitialized||(this.table.footerManager.prepend(this.botElement),this.botInitialized=!0)}scrollHorizontal(e){this.botInitialized&&this.botRow&&(this.botRow.getElement().style.marginLeft=-e+"px")}recalc(e){var t;if(this.topInitialized||this.botInitialized){if(this.rowsToData(e),this.topInitialized){for(this.topRow&&this.topRow.deleteCells(),t=this.generateRow("top",this.rowsToData(e)),this.topRow=t;this.topElement.firstChild;)this.topElement.removeChild(this.topElement.firstChild);this.topElement.appendChild(t.getElement()),t.initialize(!0)}if(this.botInitialized){for(this.botRow&&this.botRow.deleteCells(),t=this.generateRow("bottom",this.rowsToData(e)),this.botRow=t;this.botElement.firstChild;)this.botElement.removeChild(this.botElement.firstChild);this.botElement.appendChild(t.getElement()),t.initialize(!0)}this.table.rowManager.adjustTableSize(),this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layout()}}recalcRowGroup(e){this.recalcGroup(this.table.modules.groupRows.getRowGroup(e))}recalcAll(){(this.topCalcs.length||this.botCalcs.length)&&("group"!==this.table.options.columnCalcs&&this.recalcActiveRows(),this.table.options.groupBy&&"table"!==this.table.options.columnCalcs&&this.table.modules.groupRows.getChildGroups().forEach((e=>{this.recalcGroup(e)})))}recalcGroup(e){var t,n;e&&e.calcs&&(e.calcs.bottom&&(t=this.rowsToData(e.rows),n=this.generateRowData("bottom",t),e.calcs.bottom.updateData(n),e.calcs.bottom.reinitialize()),e.calcs.top&&(t=this.rowsToData(e.rows),n=this.generateRowData("top",t),e.calcs.top.updateData(n),e.calcs.top.reinitialize()))}generateTopRow(e){return this.generateRow("top",this.rowsToData(e))}generateBottomRow(e){return this.generateRow("bottom",this.rowsToData(e))}rowsToData(e){var t=[];return e.forEach((e=>{if(t.push(e.getData()),this.table.options.dataTree&&this.table.options.dataTreeChildColumnCalcs&&e.modules.dataTree.open){var n=this.rowsToData(this.table.modules.dataTree.getFilteredTreeChildren(e));t=t.concat(n)}})),t}generateRow(e,t){var n,r=this.generateRowData(e,t);return this.table.modExists("mutator")&&this.table.modules.mutator.disable(),n=new FD(r,this,"calc"),this.table.modExists("mutator")&&this.table.modules.mutator.enable(),n.getElement().classList.add("tabulator-calcs","tabulator-calcs-"+e),n.component=!1,n.getComponent=()=>(n.component||(n.component=new PD(this)),n.component),n.generateCells=()=>{var t=[];this.table.columnManager.columnsByIndex.forEach((r=>{this.genColumn.setField(r.getField()),this.genColumn.hozAlign=r.hozAlign,r.definition[e+"CalcFormatter"]&&this.table.modExists("format")?this.genColumn.modules.format={formatter:this.table.modules.format.getFormatter(r.definition[e+"CalcFormatter"]),params:r.definition[e+"CalcFormatterParams"]||{}}:this.genColumn.modules.format={formatter:this.table.modules.format.getFormatter("plaintext"),params:{}},this.genColumn.definition.cssClass=r.definition.cssClass;var i=new ID(this.genColumn,n);i.getElement(),i.column=r,i.setWidth(),r.cells.push(i),t.push(i),r.visible||i.hide()})),n.cells=t},n}generateRowData(e,t){var n,r,i={},o="top"==e?this.topCalcs:this.botCalcs,a="top"==e?"topCalc":"botCalc";return o.forEach((function(e){var o=[];e.modules.columnCalcs&&e.modules.columnCalcs[a]&&(t.forEach((function(t){o.push(e.getFieldValue(t))})),r=a+"Params",n="function"==typeof e.modules.columnCalcs[r]?e.modules.columnCalcs[r](o,t):e.modules.columnCalcs[r],e.setFieldValue(i,e.modules.columnCalcs[a](o,t,n)))})),i}hasTopCalcs(){return!!this.topCalcs.length}hasBottomCalcs(){return!!this.botCalcs.length}redraw(){this.topRow&&this.topRow.normalizeHeight(!0),this.botRow&&this.botRow.normalizeHeight(!0)}getResults(){var e={};return this.table.options.groupBy&&this.table.modExists("groupRows")?this.table.modules.groupRows.getGroups(!0).forEach((t=>{e[t.getKey()]=this.getGroupResults(t)})):e={top:this.topRow?this.topRow.getData():{},bottom:this.botRow?this.botRow.getData():{}},e}getGroupResults(e){var t=e._getSelf(),n=e.getSubGroups(),r={};return n.forEach((e=>{r[e.getKey()]=this.getGroupResults(e)})),{top:t.calcs.top?t.calcs.top.getData():{},bottom:t.calcs.bottom?t.calcs.bottom.getData():{},groups:r}}}zD.moduleName="columnCalcs",zD.calculations=BD;class HD extends MD{constructor(e){super(e),this.indent=10,this.field="",this.collapseEl=null,this.expandEl=null,this.branchEl=null,this.elementField=!1,this.startOpen=function(){},this.displayIndex=0,this.registerTableOption("dataTree",!1),this.registerTableOption("dataTreeFilter",!0),this.registerTableOption("dataTreeSort",!0),this.registerTableOption("dataTreeElementColumn",!1),this.registerTableOption("dataTreeBranchElement",!0),this.registerTableOption("dataTreeChildIndent",9),this.registerTableOption("dataTreeChildField","_children"),this.registerTableOption("dataTreeCollapseElement",!1),this.registerTableOption("dataTreeExpandElement",!1),this.registerTableOption("dataTreeStartExpanded",!1),this.registerTableOption("dataTreeChildColumnCalcs",!1),this.registerTableOption("dataTreeSelectPropagate",!1),this.registerComponentFunction("row","treeCollapse",this.collapseRow.bind(this)),this.registerComponentFunction("row","treeExpand",this.expandRow.bind(this)),this.registerComponentFunction("row","treeToggle",this.toggleRow.bind(this)),this.registerComponentFunction("row","getTreeParent",this.getTreeParent.bind(this)),this.registerComponentFunction("row","getTreeChildren",this.getRowChildren.bind(this)),this.registerComponentFunction("row","addTreeChild",this.addTreeChildRow.bind(this))}initialize(){if(this.table.options.dataTree){var e=null,t=this.table.columnManager.getFirstVisibileColumn(),n=this.table.options;switch(this.field=n.dataTreeChildField,this.indent=n.dataTreeChildIndent,this.elementField=n.dataTreeElementColumn||!!t&&t.field,n.dataTreeBranchElement&&(!0===n.dataTreeBranchElement?(this.branchEl=document.createElement("div"),this.branchEl.classList.add("tabulator-data-tree-branch")):"string"==typeof n.dataTreeBranchElement?((e=document.createElement("div")).innerHTML=n.dataTreeBranchElement,this.branchEl=e.firstChild):this.branchEl=n.dataTreeBranchElement),n.dataTreeCollapseElement?"string"==typeof n.dataTreeCollapseElement?((e=document.createElement("div")).innerHTML=n.dataTreeCollapseElement,this.collapseEl=e.firstChild):this.collapseEl=n.dataTreeCollapseElement:(this.collapseEl=document.createElement("div"),this.collapseEl.classList.add("tabulator-data-tree-control"),this.collapseEl.tabIndex=0,this.collapseEl.innerHTML="<div class='tabulator-data-tree-control-collapse'></div>"),n.dataTreeExpandElement?"string"==typeof n.dataTreeExpandElement?((e=document.createElement("div")).innerHTML=n.dataTreeExpandElement,this.expandEl=e.firstChild):this.expandEl=n.dataTreeExpandElement:(this.expandEl=document.createElement("div"),this.expandEl.classList.add("tabulator-data-tree-control"),this.expandEl.tabIndex=0,this.expandEl.innerHTML="<div class='tabulator-data-tree-control-expand'></div>"),typeof n.dataTreeStartExpanded){case"boolean":this.startOpen=function(e,t){return n.dataTreeStartExpanded};break;case"function":this.startOpen=n.dataTreeStartExpanded;break;default:this.startOpen=function(e,t){return n.dataTreeStartExpanded[t]}}this.subscribe("row-init",this.initializeRow.bind(this)),this.subscribe("row-layout-after",this.layoutRow.bind(this)),this.subscribe("row-relayout",this.layoutRow.bind(this)),this.subscribe("row-deleted",this.rowDelete.bind(this),0),this.subscribe("row-data-changed",this.rowDataChanged.bind(this),10),this.subscribe("column-moving-rows",this.columnMoving.bind(this)),this.registerDisplayHandler(this.getRows.bind(this),30)}}getRowChildren(e){return this.getTreeChildren(e,!0)}columnMoving(){var e=[];return this.table.rowManager.rows.forEach((t=>{e=e.concat(this.getTreeChildren(t,!1,!0))})),e}rowDataChanged(e,t,n){this.redrawNeeded(n)&&(this.initializeRow(e),t&&(this.layoutRow(e),this.refreshData(!0)))}initializeRow(e){var t=e.getData()[this.field],n=Array.isArray(t),r=n||!n&&"object"==typeof t&&null!==t;!r&&e.modules.dataTree&&e.modules.dataTree.branchEl&&e.modules.dataTree.branchEl.parentNode.removeChild(e.modules.dataTree.branchEl),!r&&e.modules.dataTree&&e.modules.dataTree.controlEl&&e.modules.dataTree.controlEl.parentNode.removeChild(e.modules.dataTree.controlEl),e.modules.dataTree={index:e.modules.dataTree?e.modules.dataTree.index:0,open:!!r&&(e.modules.dataTree?e.modules.dataTree.open:this.startOpen(e.getComponent(),0)),controlEl:!(!e.modules.dataTree||!r)&&e.modules.dataTree.controlEl,branchEl:!(!e.modules.dataTree||!r)&&e.modules.dataTree.branchEl,parent:!!e.modules.dataTree&&e.modules.dataTree.parent,children:r}}reinitializeRowChildren(e){this.getTreeChildren(e,!1,!0).forEach((function(e){e.reinitialize(!0)}))}layoutRow(e){var t=(this.elementField?e.getCell(this.elementField):e.getCells()[0]).getElement(),n=e.modules.dataTree;n.branchEl&&(n.branchEl.parentNode&&n.branchEl.parentNode.removeChild(n.branchEl),n.branchEl=!1),n.controlEl&&(n.controlEl.parentNode&&n.controlEl.parentNode.removeChild(n.controlEl),n.controlEl=!1),this.generateControlElement(e,t),e.getElement().classList.add("tabulator-tree-level-"+n.index),n.index&&(this.branchEl?(n.branchEl=this.branchEl.cloneNode(!0),t.insertBefore(n.branchEl,t.firstChild),this.table.rtl?n.branchEl.style.marginRight=(n.branchEl.offsetWidth+n.branchEl.style.marginLeft)*(n.index-1)+n.index*this.indent+"px":n.branchEl.style.marginLeft=(n.branchEl.offsetWidth+n.branchEl.style.marginRight)*(n.index-1)+n.index*this.indent+"px"):this.table.rtl?t.style.paddingRight=parseInt(window.getComputedStyle(t,null).getPropertyValue("padding-right"))+n.index*this.indent+"px":t.style.paddingLeft=parseInt(window.getComputedStyle(t,null).getPropertyValue("padding-left"))+n.index*this.indent+"px")}generateControlElement(e,t){var n=e.modules.dataTree,r=(t=t||e.getCells()[0].getElement(),n.controlEl);!1!==n.children&&(n.open?(n.controlEl=this.collapseEl.cloneNode(!0),n.controlEl.addEventListener("click",(t=>{t.stopPropagation(),this.collapseRow(e)}))):(n.controlEl=this.expandEl.cloneNode(!0),n.controlEl.addEventListener("click",(t=>{t.stopPropagation(),this.expandRow(e)}))),n.controlEl.addEventListener("mousedown",(e=>{e.stopPropagation()})),r&&r.parentNode===t?r.parentNode.replaceChild(n.controlEl,r):t.insertBefore(n.controlEl,t.firstChild))}setDisplayIndex(e){this.displayIndex=e}getDisplayIndex(){return this.displayIndex}getRows(e){var t=[];return e.forEach(((e,n)=>{var r;t.push(e),e instanceof FD&&(e.create(),(r=e.modules.dataTree.children).index||!1===r.children||this.getChildren(e).forEach((e=>{e.create(),t.push(e)})))})),t}getChildren(e,t){var n=e.modules.dataTree,r=[],i=[];return!1!==n.children&&(n.open||t)&&(Array.isArray(n.children)||(n.children=this.generateChildren(e)),r=this.table.modExists("filter")&&this.table.options.dataTreeFilter?this.table.modules.filter.filter(n.children):n.children,this.table.modExists("sort")&&this.table.options.dataTreeSort&&this.table.modules.sort.sort(r),r.forEach((e=>{i.push(e),this.getChildren(e).forEach((e=>{i.push(e)}))}))),i}generateChildren(e){var t=[],n=e.getData()[this.field];return Array.isArray(n)||(n=[n]),n.forEach((n=>{var r=new FD(n||{},this.table.rowManager);r.create(),r.modules.dataTree.index=e.modules.dataTree.index+1,r.modules.dataTree.parent=e,r.modules.dataTree.children&&(r.modules.dataTree.open=this.startOpen(r.getComponent(),r.modules.dataTree.index)),t.push(r)})),t}expandRow(e,t){var n=e.modules.dataTree;!1!==n.children&&(n.open=!0,e.reinitialize(),this.refreshData(!0),this.dispatchExternal("dataTreeRowExpanded",e.getComponent(),e.modules.dataTree.index))}collapseRow(e){var t=e.modules.dataTree;!1!==t.children&&(t.open=!1,e.reinitialize(),this.refreshData(!0),this.dispatchExternal("dataTreeRowCollapsed",e.getComponent(),e.modules.dataTree.index))}toggleRow(e){var t=e.modules.dataTree;!1!==t.children&&(t.open?this.collapseRow(e):this.expandRow(e))}getTreeParent(e){return!!e.modules.dataTree.parent&&e.modules.dataTree.parent.getComponent()}getFilteredTreeChildren(e){var t=e.modules.dataTree,n=[];return t.children&&(Array.isArray(t.children)||(t.children=this.generateChildren(e)),(this.table.modExists("filter")&&this.table.options.dataTreeFilter?this.table.modules.filter.filter(t.children):t.children).forEach((e=>{e instanceof FD&&n.push(e)}))),n}rowDelete(e){var t,n=e.modules.dataTree.parent;n&&(!1!==(t=this.findChildIndex(e,n))&&n.data[this.field].splice(t,1),n.data[this.field].length||delete n.data[this.field],this.initializeRow(n),this.layoutRow(n)),this.refreshData(!0)}addTreeChildRow(e,t,n,r){var i=!1;"string"==typeof t&&(t=JSON.parse(t)),Array.isArray(e.data[this.field])||(e.data[this.field]=[],e.modules.dataTree.open=this.startOpen(e.getComponent(),e.modules.dataTree.index)),void 0!==r&&!1!==(i=this.findChildIndex(r,e))&&e.data[this.field].splice(n?i:i+1,0,t),!1===i&&(n?e.data[this.field].unshift(t):e.data[this.field].push(t)),this.initializeRow(e),this.layoutRow(e),this.refreshData(!0)}findChildIndex(e,t){var n=!1;return"object"==typeof e?e instanceof FD?n=e.data:e instanceof RowComponent?n=e._getSelf().data:"undefined"!=typeof HTMLElement&&e instanceof HTMLElement&&t.modules.dataTree&&(n=t.modules.dataTree.children.find((t=>t instanceof FD&&t.element===e)))&&(n=n.data):n=null!=e&&t.data[this.field].find((t=>t.data[this.table.options.index]==e)),n&&(Array.isArray(t.data[this.field])&&(n=t.data[this.field].indexOf(n)),-1==n&&(n=!1)),n}getTreeChildren(e,t,n){var r=e.modules.dataTree,i=[];return r.children&&(Array.isArray(r.children)||(r.children=this.generateChildren(e)),r.children.forEach((e=>{e instanceof FD&&(i.push(t?e.getComponent():e),n&&(i=i.concat(this.getTreeChildren(e,t,n))))}))),i}checkForRestyle(e){e.row.cells.indexOf(e)||this.layoutRow(e.row)}getChildField(){return this.field}redrawNeeded(e){return!!this.field&&void 0!==e[this.field]||!!this.elementField&&void 0!==e[this.elementField]}}HD.moduleName="dataTree";var GD={csv:function(e,t,n){var r=t&&t.delimiter?t.delimiter:",",i=[],o=[];e.forEach((e=>{var t=[];switch(e.type){case"group":console.warn("Download Warning - CSV downloader cannot process row groups");break;case"calc":console.warn("Download Warning - CSV downloader cannot process column calculations");break;case"header":e.columns.forEach(((e,t)=>{e&&1===e.depth&&(o[t]=void 0===e.value||null===e.value?"":'"'+String(e.value).split('"').join('""')+'"')}));break;case"row":e.columns.forEach((e=>{if(e){switch(typeof e.value){case"object":e.value=JSON.stringify(e.value);break;case"undefined":case"null":e.value=""}t.push('"'+String(e.value).split('"').join('""')+'"')}})),i.push(t.join(r))}})),o.length&&i.unshift(o.join(r)),i=i.join("\n"),t.bom&&(i="\ufeff"+i),n(i,"text/csv")},json:function(e,t,n){var r=[];e.forEach((e=>{var t={};switch(e.type){case"header":break;case"group":console.warn("Download Warning - JSON downloader cannot process row groups");break;case"calc":console.warn("Download Warning - JSON downloader cannot process column calculations");break;case"row":e.columns.forEach((e=>{e&&(t[e.component.getField()]=e.value)})),r.push(t)}})),n(r=JSON.stringify(r,null,"\t"),"application/json")},pdf:function(e,t,n){var r=[],i=[],o={},a=t.rowGroupStyles||{fontStyle:"bold",fontSize:12,cellPadding:6,fillColor:220},s=t.rowCalcStyles||{fontStyle:"bold",fontSize:10,cellPadding:4,fillColor:232},l=t.jsPDF||{},u=t&&t.title?t.title:"";function c(e,t){var n=[];return e.columns.forEach((e=>{var r;if(e){switch(typeof e.value){case"object":e.value=JSON.stringify(e.value);break;case"undefined":case"null":e.value=""}r={content:e.value,colSpan:e.width,rowSpan:e.height},t&&(r.styles=t),n.push(r)}else n.push("")})),n}l.orientation||(l.orientation=t.orientation||"landscape"),l.unit||(l.unit="pt"),e.forEach((e=>{switch(e.type){case"header":r.push(c(e));break;case"group":i.push(c(e,a));break;case"calc":i.push(c(e,s));break;case"row":i.push(c(e))}}));var d=new jspdf.jsPDF(l);t&&t.autoTable&&(o="function"==typeof t.autoTable?t.autoTable(d)||{}:t.autoTable),u&&(o.didDrawPage=function(e){d.text(u,40,30)}),o.head=r,o.body=i,d.autoTable(o),t&&t.documentProcessing&&t.documentProcessing(d),n(d.output("arraybuffer"),"application/pdf")},xlsx:function(e,t,n){var r=t.sheetName||"Sheet1",i=XLSX.utils.book_new(),o=new xD(this);function a(){var t=[],n=[],r={},i={s:{c:0,r:0},e:{c:e[0]?e[0].columns.reduce(((e,t)=>e+(t&&t.width?t.width:1)),0):0,r:e.length}};return e.forEach(((e,r)=>{var i=[];e.columns.forEach((function(e,t){e?(i.push(e.value instanceof Date||"object"!=typeof e.value?e.value:JSON.stringify(e.value)),(e.width>1||e.height>-1)&&n.push({s:{r,c:t},e:{r:r+e.height-1,c:t+e.width-1}})):i.push("")})),t.push(i)})),XLSX.utils.sheet_add_aoa(r,t),r["!ref"]=XLSX.utils.encode_range(i),n.length&&(r["!merges"]=n),r}if(i.SheetNames=[],i.Sheets={},t.sheetOnly)n(a());else{if(t.sheets)for(var s in t.sheets)!0===t.sheets[s]?(i.SheetNames.push(s),i.Sheets[s]=a()):(i.SheetNames.push(s),o.commsSend(t.sheets[s],"download","intercept",{type:"xlsx",options:{sheetOnly:!0},active:this.active,intercept:function(e){i.Sheets[s]=e}}));else i.SheetNames.push(r),i.Sheets[r]=a();t.documentProcessing&&(i=t.documentProcessing(i)),n(function(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r!=e.length;++r)n[r]=255&e.charCodeAt(r);return t}(XLSX.write(i,{bookType:"xlsx",bookSST:!0,type:"binary"})),"application/octet-stream")}},html:function(e,t,n){this.modExists("export",!0)&&n(this.modules.export.genereateHTMLTable(e),"text/html")}};class WD extends MD{constructor(e){super(e),this.registerTableOption("downloadReady",(function(e,t){return t})),this.registerTableOption("downloadConfig",{}),this.registerTableOption("downloadRowRange","active"),this.registerColumnOption("download"),this.registerColumnOption("titleDownload")}initialize(){this.registerTableFunction("download",this.download.bind(this)),this.registerTableFunction("downloadToTab",this.downloadToTab.bind(this))}downloadToTab(e,t,n,r){this.download(e,t,n,r,!0)}download(e,t,n,r,i){var o=!1;if("function"==typeof e?o=e:WD.downloaders[e]?o=WD.downloaders[e]:console.warn("Download Error - No such download type found: ",e),o){var a=this.generateExportList(r);o.call(this.table,a,n||{},function(n,r){i?!0===i?this.triggerDownload(n,r,e,t,!0):i(n):this.triggerDownload(n,r,e,t)}.bind(this))}}generateExportList(e){var t=this.table.modules.export.generateExportList(this.table.options.downloadConfig,!1,e||this.table.options.downloadRowRange,"download"),n=this.table.options.groupHeaderDownload;return n&&!Array.isArray(n)&&(n=[n]),t.forEach((e=>{var t;"group"===e.type&&(t=e.columns[0],n&&n[e.indent]&&(t.value=n[e.indent](t.value,e.component._group.getRowCount(),e.component._group.getData(),e.component)))})),t}triggerDownload(e,t,n,r,i){var o=document.createElement("a"),a=new Blob([e],{type:t});r=r||"Tabulator."+("function"==typeof n?"txt":n);(a=this.table.options.downloadReady(e,a))&&(i?window.open(window.URL.createObjectURL(a)):navigator.msSaveOrOpenBlob?navigator.msSaveOrOpenBlob(a,r):(o.setAttribute("href",window.URL.createObjectURL(a)),o.setAttribute("download",r),o.style.display="none",document.body.appendChild(o),o.click(),document.body.removeChild(o)),this.dispatchExternal("downloadComplete"))}commsReceived(e,t,n){if("intercept"===t)this.download(n.type,"",n.options,n.active,n.intercept)}}function UD(e,t){var n=t.mask,r=void 0!==t.maskLetterChar?t.maskLetterChar:"A",i=void 0!==t.maskNumberChar?t.maskNumberChar:"9",o=void 0!==t.maskWildcardChar?t.maskWildcardChar:"*";function a(t){var s=n[t];void 0!==s&&s!==o&&s!==r&&s!==i&&(e.value=e.value+""+s,a(t+1))}e.addEventListener("keydown",(t=>{var a=e.value.length,s=t.key;if(t.keyCode>46){if(a>=n.length)return t.preventDefault(),t.stopPropagation(),!1;switch(n[a]){case r:if(s.toUpperCase()==s.toLowerCase())return t.preventDefault(),t.stopPropagation(),!1;break;case i:if(isNaN(s))return t.preventDefault(),t.stopPropagation(),!1;break;case o:break;default:if(s!==n[a])return t.preventDefault(),t.stopPropagation(),!1}}})),e.addEventListener("keyup",(n=>{n.keyCode>46&&t.maskAutoFill&&a(e.value.length)})),e.placeholder||(e.placeholder=n),t.maskAutoFill&&a(e.value.length)}WD.moduleName="download",WD.downloaders=GD;var VD={input:function(e,t,n,r,i){var o=e.getValue(),a=document.createElement("input");if(a.setAttribute("type",i.search?"search":"text"),a.style.padding="4px",a.style.width="100%",a.style.boxSizing="border-box",i.elementAttributes&&"object"==typeof i.elementAttributes)for(let e in i.elementAttributes)"+"==e.charAt(0)?(e=e.slice(1),a.setAttribute(e,a.getAttribute(e)+i.elementAttributes["+"+e])):a.setAttribute(e,i.elementAttributes[e]);function s(e){null==o&&""!==a.value||a.value!==o?n(a.value)&&(o=a.value):r()}return a.value=void 0!==o?o:"",t((function(){a.focus({preventScroll:!0}),a.style.height="100%"})),a.addEventListener("change",s),a.addEventListener("blur",s),a.addEventListener("keydown",(function(e){switch(e.keyCode){case 13:s();break;case 27:r();break;case 35:case 36:e.stopPropagation()}})),i.mask&&UD(a,i),a},textarea:function(e,t,n,r,i){var o=e.getValue(),a=i.verticalNavigation||"hybrid",s=String(null!=o?o:""),l=((s.match(/(?:\r\n|\r|\n)/g)||[]).length,document.createElement("textarea")),u=0;if(l.style.display="block",l.style.padding="2px",l.style.height="100%",l.style.width="100%",l.style.boxSizing="border-box",l.style.whiteSpace="pre-wrap",l.style.resize="none",i.elementAttributes&&"object"==typeof i.elementAttributes)for(let e in i.elementAttributes)"+"==e.charAt(0)?(e=e.slice(1),l.setAttribute(e,l.getAttribute(e)+i.elementAttributes["+"+e])):l.setAttribute(e,i.elementAttributes[e]);function c(t){null==o&&""!==l.value||l.value!==o?(n(l.value)&&(o=l.value),setTimeout((function(){e.getRow().normalizeHeight()}),300)):r()}return l.value=s,t((function(){l.focus({preventScroll:!0}),l.style.height="100%",l.scrollHeight,l.style.height=l.scrollHeight+"px",e.getRow().normalizeHeight()})),l.addEventListener("change",c),l.addEventListener("blur",c),l.addEventListener("keyup",(function(){l.style.height="";var t=l.scrollHeight;l.style.height=t+"px",t!=u&&(u=t,e.getRow().normalizeHeight())})),l.addEventListener("keydown",(function(e){switch(e.keyCode){case 27:r();break;case 38:("editor"==a||"hybrid"==a&&l.selectionStart)&&(e.stopImmediatePropagation(),e.stopPropagation());break;case 40:("editor"==a||"hybrid"==a&&l.selectionStart!==l.value.length)&&(e.stopImmediatePropagation(),e.stopPropagation());break;case 35:case 36:e.stopPropagation()}})),i.mask&&UD(l,i),l},number:function(e,t,n,r,i){var o=e.getValue(),a=i.verticalNavigation||"editor",s=document.createElement("input");if(s.setAttribute("type","number"),void 0!==i.max&&s.setAttribute("max",i.max),void 0!==i.min&&s.setAttribute("min",i.min),void 0!==i.step&&s.setAttribute("step",i.step),s.style.padding="4px",s.style.width="100%",s.style.boxSizing="border-box",i.elementAttributes&&"object"==typeof i.elementAttributes)for(let e in i.elementAttributes)"+"==e.charAt(0)?(e=e.slice(1),s.setAttribute(e,s.getAttribute(e)+i.elementAttributes["+"+e])):s.setAttribute(e,i.elementAttributes[e]);s.value=o;var l=function(e){u()};function u(){var e=s.value;isNaN(e)||""===e||(e=Number(e)),e!==o?n(e)&&(o=e):r()}return t((function(){s.removeEventListener("blur",l),s.focus({preventScroll:!0}),s.style.height="100%",s.addEventListener("blur",l)})),s.addEventListener("keydown",(function(e){switch(e.keyCode){case 13:u();break;case 27:r();break;case 38:case 40:"editor"==a&&(e.stopImmediatePropagation(),e.stopPropagation());break;case 35:case 36:e.stopPropagation()}})),i.mask&&UD(s,i),s},range:function(e,t,n,r,i){var o=e.getValue(),a=document.createElement("input");if(a.setAttribute("type","range"),void 0!==i.max&&a.setAttribute("max",i.max),void 0!==i.min&&a.setAttribute("min",i.min),void 0!==i.step&&a.setAttribute("step",i.step),a.style.padding="4px",a.style.width="100%",a.style.boxSizing="border-box",i.elementAttributes&&"object"==typeof i.elementAttributes)for(let e in i.elementAttributes)"+"==e.charAt(0)?(e=e.slice(1),a.setAttribute(e,a.getAttribute(e)+i.elementAttributes["+"+e])):a.setAttribute(e,i.elementAttributes[e]);function s(){var e=a.value;isNaN(e)||""===e||(e=Number(e)),e!=o?n(e)&&(o=e):r()}return a.value=o,t((function(){a.focus({preventScroll:!0}),a.style.height="100%"})),a.addEventListener("blur",(function(e){s()})),a.addEventListener("keydown",(function(e){switch(e.keyCode){case 13:s();break;case 27:r()}})),a},select:function(e,t,n,r,i){var o=this,a=e.getElement(),s=e.getValue(),l=i.verticalNavigation||"editor",u=void 0!==s||null===s?Array.isArray(s)?s:[s]:void 0!==i.defaultValue?i.defaultValue:[],c=document.createElement("input"),d=document.createElement("div"),h=i.multiselect,f=[],p={},m=[],g=[],v=!0,y=!1,b="",_=null;function w(t){var n,r={},i=o.table.getData();return(n=t?o.table.columnManager.getColumnByField(t):e.getColumn()._getSelf())?i.forEach((function(e){var t=n.getFieldValue(e);null!=t&&""!==t&&(r[t]=!0)})):console.warn("unable to find matching column to create select lookup list:",t),Object.keys(r)}function x(t,n){var r=[],o=[];function a(e){e={label:e.label,value:e.value,itemParams:e.itemParams,elementAttributes:e.elementAttributes,element:!1};return n.indexOf(e.value)>-1&&E(e),r.push(e),o.push(e),e}if("function"==typeof t&&(t=t(e)),Array.isArray(t))t.forEach((function(e){var t;"object"==typeof e?e.options?(t={label:e.label,group:!0,itemParams:e.itemParams,elementAttributes:e.elementAttributes,element:!1},o.push(t),e.options.forEach((function(e){a(e)}))):a(e):(t={label:e,value:e,element:!1},n.indexOf(t.value)>-1&&E(t),r.push(t),o.push(t))}));else for(var s in t){var l={label:t[s],value:s,element:!1};n.indexOf(l.value)>-1&&E(l),r.push(l),o.push(l)}i.sortValuesList&&(r.sort(((e,t)=>e.label<t.label?-1:e.label>t.label?1:0)),o.sort(((e,t)=>e.label<t.label?-1:e.label>t.label?1:0)),"asc"!==i.sortValuesList&&(r.reverse(),o.reverse())),f=r,m=o,function(){for(;d.firstChild;)d.removeChild(d.firstChild);m.forEach((function(t){var n=t.element;if(!n){if(n=document.createElement("div"),t.label=i.listItemFormatter?i.listItemFormatter(t.value,t.label,e,n,t.itemParams):t.label,t.group?(n.classList.add("tabulator-edit-select-list-group"),n.tabIndex=0,n.innerHTML=""===t.label?"&nbsp;":t.label):(n.classList.add("tabulator-edit-select-list-item"),n.tabIndex=0,n.innerHTML=""===t.label?"&nbsp;":t.label,n.addEventListener("click",(function(){y=!0,setTimeout((()=>{y=!1}),10),h?(k(t),c.focus()):T(t)})),g.indexOf(t)>-1&&n.classList.add("active")),t.elementAttributes&&"object"==typeof t.elementAttributes)for(let e in t.elementAttributes)"+"==e.charAt(0)?(e=e.slice(1),n.setAttribute(e,c.getAttribute(e)+t.elementAttributes["+"+e])):n.setAttribute(e,t.elementAttributes[e]);n.addEventListener("mousedown",(function(){v=!1,setTimeout((function(){v=!0}),10)})),t.element=n}d.appendChild(n)}))}()}function M(e,t){!h&&p&&p.element&&p.element.classList.remove("active"),p&&p.element&&p.element.classList.remove("focused"),p=e,e.element&&(e.element.classList.add("focused"),t&&e.element.classList.add("active")),e&&e.element&&e.element.scrollIntoView&&e.element.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})}function E(e){-1==g.indexOf(e)&&(g.push(e),M(e,!0)),C()}function S(e){var t=g[e];e>-1&&(g.splice(e,1),t.element&&t.element.classList.remove("active"))}function k(e){e||(e=p);var t=g.indexOf(e);t>-1?S(t):(!0!==h&&g.length>=h&&S(0),E(e)),C()}function T(e){A(),e||(e=p),e&&(c.value=e.label,n(e.value)),u=[e.value]}function L(e){e||A();var t=[];g.forEach((e=>{t.push(e.value)})),u=t,n(t)}function C(){var e=[];g.forEach((t=>{e.push(t.label)})),c.value=e.join(", "),!1===o.currentCell&&L(!0)}function D(){A(),r()}function A(){d.parentNode&&d.parentNode.removeChild(d),o.table.rowManager.element.removeEventListener("scroll",D)}if((Array.isArray(i)||!Array.isArray(i)&&"object"==typeof i&&!i.values)&&(console.warn("DEPRECATION WARNING - values for the select editor must now be passed into the values property of the editorParams object, not as the editorParams object"),i={values:i}),c.setAttribute("type","text"),c.style.padding="4px",c.style.width="100%",c.style.boxSizing="border-box",c.style.cursor="default",c.readOnly=0!=this.currentCell,i.elementAttributes&&"object"==typeof i.elementAttributes)for(let e in i.elementAttributes)"+"==e.charAt(0)?(e=e.slice(1),c.setAttribute(e,c.getAttribute(e)+i.elementAttributes["+"+e])):c.setAttribute(e,i.elementAttributes[e]);return c.value=void 0!==s||null===s?s:"",c.addEventListener("search",(function(e){c.value||(!function(){var e=g.length;for(let t=0;t<e;t++)S(0)}(),L())})),c.addEventListener("keydown",(function(e){var t;switch(e.keyCode){case 38:t=f.indexOf(p),("editor"==l||"hybrid"==l&&t)&&(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),t>0&&M(f[t-1],!h));break;case 40:t=f.indexOf(p),("editor"==l||"hybrid"==l&&t<f.length-1)&&(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),t<f.length-1&&M(-1==t?f[0]:f[t+1],!h));break;case 37:case 39:e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault();break;case 13:h?k():T();break;case 27:D();break;case 9:break;default:!1===o.currentCell&&e.preventDefault(),e.keyCode>=38&&e.keyCode<=90&&function(e){clearTimeout(_);var t=String.fromCharCode(event.keyCode).toLowerCase();b+=t.toLowerCase();var n=f.find((e=>void 0!==e.label&&e.label.toLowerCase().startsWith(b)));n&&M(n,!h),_=setTimeout((()=>{b=""}),800)}(e.keyCode)}})),c.addEventListener("blur",(function(e){v&&(h?L():D())})),c.addEventListener("focus",(function(e){y||function(){if(g=[],!d.parentNode){!0===i.values?x(w(),u):"string"==typeof i.values?x(w(i.values),u):x(i.values||[],u);var e=ED.elOffset(a);d.style.minWidth=a.offsetWidth+"px",d.style.top=e.top+a.offsetHeight+"px",d.style.left=e.left+"px",d.addEventListener("mousedown",(function(e){v=!1,setTimeout((function(){v=!0}),10)})),document.body.appendChild(d)}}()})),(d=document.createElement("div")).classList.add("tabulator-edit-select-list"),t((function(){c.style.height="100%",c.focus({preventScroll:!0})})),setTimeout((()=>{this.table.rowManager.element.addEventListener("scroll",D)}),10),c},autocomplete:function(e,t,n,r,i){var o=this,a=e.getElement(),s=e.getValue(),l=i.verticalNavigation||"editor",u=void 0!==s||null===s?s:void 0!==i.defaultValue?i.defaultValue:"",c=document.createElement("input"),d=document.createElement("div"),h=[],f=!1,p=!0,m=!1;if(c.setAttribute("type","search"),c.style.padding="4px",c.style.width="100%",c.style.boxSizing="border-box",i.elementAttributes&&"object"==typeof i.elementAttributes)for(let e in i.elementAttributes)"+"==e.charAt(0)?(e=e.slice(1),c.setAttribute(e,c.getAttribute(e)+i.elementAttributes["+"+e])):c.setAttribute(e,i.elementAttributes[e]);function g(){!0===i.values?m=v():"string"==typeof i.values&&(m=v(i.values))}function v(t){var n,r={},a=o.table.getData();return(n=t?o.table.columnManager.getColumnByField(t):e.getColumn()._getSelf())?(a.forEach((function(e){var t=n.getFieldValue(e);null!=t&&""!==t&&(r[t]=!0)})),r=i.sortValuesList?"asc"==i.sortValuesList?Object.keys(r).sort():Object.keys(r).sort().reverse():Object.keys(r)):console.warn("unable to find matching column to create autocomplete lookup list:",t),r}function y(e,t){var n,r,o=[];n=m||(i.values||[]),i.searchFunc?(o=i.searchFunc(e,n))instanceof Promise?(b(void 0!==i.searchingPlaceholder?i.searchingPlaceholder:"Searching..."),o.then((e=>{x(_(e),t)})).catch((e=>{console.err("error in autocomplete search promise:",e)}))):x(_(o),t):(r=_(n),""===e?i.showListOnEmpty&&(o=r):r.forEach((function(t){null===t.value&&void 0===t.value||(String(t.value).toLowerCase().indexOf(String(e).toLowerCase())>-1||String(t.title).toLowerCase().indexOf(String(e).toLowerCase())>-1)&&o.push(t)})),x(o,t))}function b(e){var t=document.createElement("div");w(),!1!==e&&(t.classList.add("tabulator-edit-select-list-notice"),t.tabIndex=0,e instanceof Node?t.appendChild(e):t.innerHTML=e,d.appendChild(t))}function _(e){var t=[];if(Array.isArray(e))e.forEach((function(e){var n={};"object"==typeof e?(n.title=i.listItemFormatter?i.listItemFormatter(e.value,e.label):e.label,n.value=e.value):(n.title=i.listItemFormatter?i.listItemFormatter(e,e):e,n.value=e),t.push(n)}));else for(var n in e){var r={title:i.listItemFormatter?i.listItemFormatter(n,e[n]):e[n],value:n};t.push(r)}return t}function w(){for(;d.firstChild;)d.removeChild(d.firstChild)}function x(e,t){e.length?function(e,t){var n=!1;w(),(h=e).forEach((function(e){var r=e.element;r||((r=document.createElement("div")).classList.add("tabulator-edit-select-list-item"),r.tabIndex=0,r.innerHTML=e.title,r.addEventListener("click",(function(t){E(e),M()})),r.addEventListener("mousedown",(function(e){p=!1,setTimeout((function(){p=!0}),10)})),e.element=r,t&&e.value==s&&(c.value=e.title,e.element.classList.add("active"),n=!0),e===f&&(e.element.classList.add("active"),n=!0)),d.appendChild(r)})),n||E(!1)}(e,t):i.emptyPlaceholder&&b(i.emptyPlaceholder)}function M(){S(),f?s!==f.value?(s=f.value,c.value=f.title,n(f.value)):r():i.freetext||i.allowEmpty&&""===c.value?(s=c.value,n(c.value)):r()}function E(e,t){f&&f.element&&f.element.classList.remove("active"),f=e,e&&e.element&&e.element.classList.add("active"),e&&e.element&&e.element.scrollIntoView&&e.element.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})}function S(){d.parentNode&&d.parentNode.removeChild(d),o.table.rowManager.element.removeEventListener("scroll",k)}function k(){S(),r()}return d.classList.add("tabulator-edit-select-list"),d.addEventListener("mousedown",(function(e){p=!1,setTimeout((function(){p=!0}),10)})),c.addEventListener("keydown",(function(e){var t;switch(e.keyCode){case 38:t=h.indexOf(f),("editor"==l||"hybrid"==l&&t)&&(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),E(t>0&&h[t-1]));break;case 40:t=h.indexOf(f),("editor"==l||"hybrid"==l&&t<h.length-1)&&(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),t<h.length-1&&E(-1==t?h[0]:h[t+1]));break;case 37:case 39:e.stopImmediatePropagation(),e.stopPropagation();break;case 13:M();break;case 27:k();break;case 36:case 35:e.stopImmediatePropagation()}})),c.addEventListener("keyup",(function(e){switch(e.keyCode){case 38:case 37:case 39:case 40:case 13:case 27:break;default:y(c.value)}})),c.addEventListener("search",(function(e){y(c.value)})),c.addEventListener("blur",(function(e){p&&M()})),c.addEventListener("focus",(function(e){var t=u;g(),function(){if(!d.parentNode){for(;d.firstChild;)d.removeChild(d.firstChild);var e=ED.elOffset(a);d.style.minWidth=a.offsetWidth+"px",d.style.top=e.top+a.offsetHeight+"px",d.style.left=e.left+"px",document.body.appendChild(d)}}(),c.value=t,y(t,!0)})),t((function(){c.style.height="100%",c.focus({preventScroll:!0})})),i.mask&&UD(c,i),setTimeout((()=>{this.table.rowManager.element.addEventListener("scroll",k)}),10),g(),c.value=u,y(u,!0),c},star:function(e,t,n,r,i){var o=this,a=e.getElement(),s=e.getValue(),l=a.getElementsByTagName("svg").length||5,u=a.getElementsByTagName("svg")[0]?a.getElementsByTagName("svg")[0].getAttribute("width"):14,c=[],d=document.createElement("div"),h=document.createElementNS("http://www.w3.org/2000/svg","svg");function f(e){c.forEach((function(t,n){n<e?("ie"==o.table.browser?t.setAttribute("class","tabulator-star-active"):t.classList.replace("tabulator-star-inactive","tabulator-star-active"),t.innerHTML='<polygon fill="#488CE9" stroke="#014AAE" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>'):("ie"==o.table.browser?t.setAttribute("class","tabulator-star-inactive"):t.classList.replace("tabulator-star-active","tabulator-star-inactive"),t.innerHTML='<polygon fill="#010155" stroke="#686868" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>')}))}function p(e){var t=document.createElement("span"),r=h.cloneNode(!0);c.push(r),t.addEventListener("mouseenter",(function(t){t.stopPropagation(),t.stopImmediatePropagation(),f(e)})),t.addEventListener("mousemove",(function(e){e.stopPropagation(),e.stopImmediatePropagation()})),t.addEventListener("click",(function(t){t.stopPropagation(),t.stopImmediatePropagation(),n(e),a.blur()})),t.appendChild(r),d.appendChild(t)}function m(e){s=e,f(e)}if(a.style.whiteSpace="nowrap",a.style.overflow="hidden",a.style.textOverflow="ellipsis",d.style.verticalAlign="middle",d.style.display="inline-block",d.style.padding="4px",h.setAttribute("width",u),h.setAttribute("height",u),h.setAttribute("viewBox","0 0 512 512"),h.setAttribute("xml:space","preserve"),h.style.padding="0 1px",i.elementAttributes&&"object"==typeof i.elementAttributes)for(let e in i.elementAttributes)"+"==e.charAt(0)?(e=e.slice(1),d.setAttribute(e,d.getAttribute(e)+i.elementAttributes["+"+e])):d.setAttribute(e,i.elementAttributes[e]);for(var g=1;g<=l;g++)p(g);return f(s=Math.min(parseInt(s),l)),d.addEventListener("mousemove",(function(e){f(0)})),d.addEventListener("click",(function(e){n(0)})),a.addEventListener("blur",(function(e){r()})),a.addEventListener("keydown",(function(e){switch(e.keyCode){case 39:m(s+1);break;case 37:m(s-1);break;case 13:n(s);break;case 27:r()}})),d},progress:function(e,t,n,r,i){var o,a,s=e.getElement(),l=void 0===i.max?s.getElementsByTagName("div")[0]?.getAttribute("max")||100:i.max,u=void 0===i.min?s.getElementsByTagName("div")[0]?.getAttribute("min")||0:i.min,c=(l-u)/100,d=e.getValue()||0,h=document.createElement("div"),f=document.createElement("div");function p(){var e=window.getComputedStyle(s,null),t=c*Math.round(f.offsetWidth/((s.clientWidth-parseInt(e.getPropertyValue("padding-left"))-parseInt(e.getPropertyValue("padding-right")))/100))+u;n(t),s.setAttribute("aria-valuenow",t),s.setAttribute("aria-label",d)}if(h.style.position="absolute",h.style.right="0",h.style.top="0",h.style.bottom="0",h.style.width="5px",h.classList.add("tabulator-progress-handle"),f.style.display="inline-block",f.style.position="relative",f.style.height="100%",f.style.backgroundColor="#488CE9",f.style.maxWidth="100%",f.style.minWidth="0%",i.elementAttributes&&"object"==typeof i.elementAttributes)for(let e in i.elementAttributes)"+"==e.charAt(0)?(e=e.slice(1),f.setAttribute(e,f.getAttribute(e)+i.elementAttributes["+"+e])):f.setAttribute(e,i.elementAttributes[e]);return s.style.padding="4px 4px",d=Math.min(parseFloat(d),l),d=Math.max(parseFloat(d),u),d=Math.round((d-u)/c),f.style.width=d+"%",s.setAttribute("aria-valuemin",u),s.setAttribute("aria-valuemax",l),f.appendChild(h),h.addEventListener("mousedown",(function(e){o=e.screenX,a=f.offsetWidth})),h.addEventListener("mouseover",(function(){h.style.cursor="ew-resize"})),s.addEventListener("mousemove",(function(e){o&&(f.style.width=a+e.screenX-o+"px")})),s.addEventListener("mouseup",(function(e){o&&(e.stopPropagation(),e.stopImmediatePropagation(),o=!1,a=!1,p())})),s.addEventListener("keydown",(function(e){switch(e.keyCode){case 39:e.preventDefault(),f.style.width=f.clientWidth+s.clientWidth/100+"px";break;case 37:e.preventDefault(),f.style.width=f.clientWidth-s.clientWidth/100+"px";break;case 9:case 13:p();break;case 27:r()}})),s.addEventListener("blur",(function(){r()})),f},tickCross:function(e,t,n,r,i){var o=e.getValue(),a=document.createElement("input"),s=i.tristate,l=void 0===i.indeterminateValue?null:i.indeterminateValue,u=!1;if(a.setAttribute("type","checkbox"),a.style.marginTop="5px",a.style.boxSizing="border-box",i.elementAttributes&&"object"==typeof i.elementAttributes)for(let e in i.elementAttributes)"+"==e.charAt(0)?(e=e.slice(1),a.setAttribute(e,a.getAttribute(e)+i.elementAttributes["+"+e])):a.setAttribute(e,i.elementAttributes[e]);function c(e){return s?e?u?l:a.checked:a.checked&&!u?(a.checked=!1,a.indeterminate=!0,u=!0,l):(u=!1,a.checked):a.checked}return a.value=o,!s||void 0!==o&&o!==l&&""!==o||(u=!0,a.indeterminate=!0),"firefox"!=this.table.browser&&t((function(){a.focus({preventScroll:!0})})),a.checked=!0===o||"true"===o||"True"===o||1===o,t((function(){a.focus()})),a.addEventListener("change",(function(e){n(c())})),a.addEventListener("blur",(function(e){n(c(!0))})),a.addEventListener("keydown",(function(e){13==e.keyCode&&n(c()),27==e.keyCode&&r()})),a}};class XD extends MD{constructor(e){super(e),this.currentCell=!1,this.mouseClick=!1,this.recursionBlock=!1,this.invalidEdit=!1,this.editedCells=[],this.editors=XD.editors,this.registerColumnOption("editable"),this.registerColumnOption("editor"),this.registerColumnOption("editorParams"),this.registerColumnOption("cellEditing"),this.registerColumnOption("cellEdited"),this.registerColumnOption("cellEditCancelled"),this.registerTableFunction("getEditedCells",this.getEditedCells.bind(this)),this.registerTableFunction("clearCellEdited",this.clearCellEdited.bind(this)),this.registerTableFunction("navigatePrev",this.navigatePrev.bind(this)),this.registerTableFunction("navigateNext",this.navigateNext.bind(this)),this.registerTableFunction("navigateLeft",this.navigateLeft.bind(this)),this.registerTableFunction("navigateRight",this.navigateRight.bind(this)),this.registerTableFunction("navigateUp",this.navigateUp.bind(this)),this.registerTableFunction("navigateDown",this.navigateDown.bind(this)),this.registerComponentFunction("cell","isEdited",this.cellisEdited.bind(this)),this.registerComponentFunction("cell","clearEdited",this.clearEdited.bind(this)),this.registerComponentFunction("cell","edit",this.editCell.bind(this)),this.registerComponentFunction("cell","cancelEdit",this.cellCancelEdit.bind(this)),this.registerComponentFunction("cell","navigatePrev",this.navigatePrev.bind(this)),this.registerComponentFunction("cell","navigateNext",this.navigateNext.bind(this)),this.registerComponentFunction("cell","navigateLeft",this.navigateLeft.bind(this)),this.registerComponentFunction("cell","navigateRight",this.navigateRight.bind(this)),this.registerComponentFunction("cell","navigateUp",this.navigateUp.bind(this)),this.registerComponentFunction("cell","navigateDown",this.navigateDown.bind(this))}initialize(){this.subscribe("cell-init",this.bindEditor.bind(this)),this.subscribe("cell-delete",this.clearEdited.bind(this)),this.subscribe("column-layout",this.initializeColumnCheck.bind(this)),this.subscribe("column-delete",this.columnDeleteCheck.bind(this)),this.subscribe("row-deleting",this.rowDeleteCheck.bind(this)),this.subscribe("data-refeshing",this.cancelEdit.bind(this)),this.subscribe("keybinding-nav-prev",this.navigatePrev.bind(this)),this.subscribe("keybinding-nav-next",this.keybindingNavigateNext.bind(this)),this.subscribe("keybinding-nav-left",this.navigateLeft.bind(this)),this.subscribe("keybinding-nav-right",this.navigateRight.bind(this)),this.subscribe("keybinding-nav-up",this.navigateUp.bind(this)),this.subscribe("keybinding-nav-down",this.navigateDown.bind(this))}keybindingNavigateNext(e){var t=this.currentCell,n=this.options("tabEndNewRow");t&&(this.navigateNext(e)||n&&(t.getElement().firstChild.blur(),(n=!0===n?this.table.addRow({}):"function"==typeof n?this.table.addRow(n(t.row.getComponent())):this.table.addRow(Object.assign({},n))).then((()=>{setTimeout((()=>{nav.next()}))}))))}cellisEdited(e){return!!e.modules.edit&&e.modules.edit.edited}cellCancelEdit(e){e===this.currentCell?this.table.modules.edit.cancelEdit():console.warn("Cancel Editor Error - This cell is not currently being edited ")}clearCellEdited(e){e||(e=this.modules.edit.getEditedCells()),Array.isArray(e)||(e=[e]),e.forEach((e=>{this.modules.edit.clearEdited(e._getSelf())}))}navigatePrev(e){var t,n,r=this.currentCell;if(r){if(e&&e.preventDefault(),t=this.navigateLeft())return!0;if((n=this.table.rowManager.prevDisplayRow(r.row,!0))&&(t=this.findNextEditableCell(n,n.cells.length)))return t.getComponent().edit(),!0}return!1}navigateNext(e){var t,n,r=this.currentCell;if(r){if(e&&e.preventDefault(),t=this.navigateRight())return!0;if((n=this.table.rowManager.nextDisplayRow(r.row,!0))&&(t=this.findNextEditableCell(n,-1)))return t.getComponent().edit(),!0}return!1}navigateLeft(e){var t,n,r=this.currentCell;return!!(r&&(e&&e.preventDefault(),t=r.getIndex(),n=this.findPrevEditableCell(r.row,t)))&&(n.getComponent().edit(),!0)}navigateRight(e){var t,n,r=this.currentCell;return!!(r&&(e&&e.preventDefault(),t=r.getIndex(),n=this.findNextEditableCell(r.row,t)))&&(n.getComponent().edit(),!0)}navigateUp(e){var t,n,r=this.currentCell;return!!(r&&(e&&e.preventDefault(),t=r.getIndex(),n=this.table.rowManager.prevDisplayRow(r.row,!0)))&&(n.cells[t].getComponent().edit(),!0)}navigateDown(e){var t,n,r=this.currentCell;return!!(r&&(e&&e.preventDefault(),t=r.getIndex(),n=this.table.rowManager.nextDisplayRow(r.row,!0)))&&(n.cells[t].getComponent().edit(),!0)}findNextEditableCell(e,t){var n=!1;if(t<e.cells.length-1)for(var r=t+1;r<e.cells.length;r++){let t=e.cells[r];if(t.column.modules.edit&&ED.elVisible(t.getElement())){let e=!0;if("function"==typeof t.column.modules.edit.check&&(e=t.column.modules.edit.check(t.getComponent())),e){n=t;break}}}return n}findPrevEditableCell(e,t){var n=!1;if(t>0)for(var r=t-1;r>=0;r--){let t=e.cells[r],i=!0;if(t.column.modules.edit&&ED.elVisible(t.getElement())&&("function"==typeof t.column.modules.edit.check&&(i=t.column.modules.edit.check(t.getComponent())),i)){n=t;break}}return n}initializeColumnCheck(e){void 0!==e.definition.editor&&this.initializeColumn(e)}columnDeleteCheck(e){this.currentCell&&this.currentCell.column===e&&this.cancelEdit()}rowDeleteCheck(e){this.currentCell&&this.currentCell.row===e&&this.cancelEdit()}initializeColumn(e){var t={editor:!1,blocked:!1,check:e.definition.editable,params:e.definition.editorParams||{}};switch(typeof e.definition.editor){case"string":this.editors[e.definition.editor]?t.editor=this.editors[e.definition.editor]:console.warn("Editor Error - No such editor found: ",e.definition.editor);break;case"function":t.editor=e.definition.editor;break;case"boolean":!0===e.definition.editor&&("function"!=typeof e.definition.formatter?this.editors[e.definition.formatter]?t.editor=this.editors[e.definition.formatter]:t.editor=this.editors.input:console.warn("Editor Error - Cannot auto lookup editor for a custom formatter: ",e.definition.formatter))}t.editor&&(e.modules.edit=t)}getCurrentCell(){return!!this.currentCell&&this.currentCell.getComponent()}clearEditor(e){var t,n=this.currentCell;if(this.invalidEdit=!1,n){for(this.currentCell=!1,t=n.getElement(),e?n.validate&&n.validate():t.classList.remove("tabulator-validation-fail"),t.classList.remove("tabulator-editing");t.firstChild;)t.removeChild(t.firstChild);n.row.getElement().classList.remove("tabulator-row-editing")}}cancelEdit(){if(this.currentCell){var e=this.currentCell,t=this.currentCell.getComponent();this.clearEditor(!0),e.setValueActual(e.getValue()),e.cellRendered(),("textarea"==e.column.definition.editor||e.column.definition.variableHeight)&&e.row.normalizeHeight(!0),e.column.definition.cellEditCancelled&&e.column.definition.cellEditCancelled.call(this.table,t),this.dispatchExternal("cellEditCancelled",t)}}bindEditor(e){if(e.column.modules.edit){var t=this,n=e.getElement(!0);n.setAttribute("tabindex",0),n.addEventListener("click",(function(e){n.classList.contains("tabulator-editing")||n.focus({preventScroll:!0})})),n.addEventListener("mousedown",(function(e){2===e.button?e.preventDefault():t.mouseClick=!0})),n.addEventListener("focus",(function(n){t.recursionBlock||t.edit(e,n,!1)}))}}focusCellNoEvent(e,t){this.recursionBlock=!0,t&&"ie"===this.table.browser||e.getElement().focus({preventScroll:!0}),this.recursionBlock=!1}editCell(e,t){this.focusCellNoEvent(e),this.edit(e,!1,t)}focusScrollAdjust(e){if("virtual"==this.table.rowManager.getRenderMode()){var t=this.table.rowManager.element.scrollTop,n=this.table.rowManager.element.clientHeight+this.table.rowManager.element.scrollTop,r=e.row.getElement();r.offsetTop;r.offsetTop<t?this.table.rowManager.element.scrollTop-=t-r.offsetTop:r.offsetTop+r.offsetHeight>n&&(this.table.rowManager.element.scrollTop+=r.offsetTop+r.offsetHeight-n);var i=this.table.rowManager.element.scrollLeft,o=this.table.rowManager.element.clientWidth+this.table.rowManager.element.scrollLeft,a=e.getElement();a.offsetLeft;this.table.modExists("frozenColumns")&&(i+=parseInt(this.table.modules.frozenColumns.leftMargin),o-=parseInt(this.table.modules.frozenColumns.rightMargin)),"virtual"===this.table.options.renderHorizontal&&(i-=parseInt(this.table.columnManager.renderer.vDomPadLeft),o-=parseInt(this.table.columnManager.renderer.vDomPadLeft)),a.offsetLeft<i?this.table.rowManager.element.scrollLeft-=i-a.offsetLeft:a.offsetLeft+a.offsetWidth>o&&(this.table.rowManager.element.scrollLeft+=a.offsetLeft+a.offsetWidth-o)}}edit(e,t,n){var r,i,o,a=this,s=!0,l=function(){},u=e.getElement();if(!this.currentCell){if(e.column.modules.edit.blocked)return this.mouseClick=!1,u.blur(),!1;switch(t&&t.stopPropagation(),typeof e.column.modules.edit.check){case"function":s=e.column.modules.edit.check(e.getComponent());break;case"boolean":s=e.column.modules.edit.check}if(s||n){if(a.cancelEdit(),a.currentCell=e,this.focusScrollAdjust(e),i=e.getComponent(),this.mouseClick&&(this.mouseClick=!1,e.column.definition.cellClick&&e.column.definition.cellClick.call(this.table,t,i)),e.column.definition.cellEditing&&e.column.definition.cellEditing.call(this.table,i),this.dispatchExternal("cellEditing",i),o="function"==typeof e.column.modules.edit.params?e.column.modules.edit.params(i):e.column.modules.edit.params,r=e.column.modules.edit.editor.call(a,i,(function(e){l=e}),(function(t){if(a.currentCell===e){var n=!0;return e.column.modules.validate&&a.table.modExists("validate")&&"manual"!=a.table.options.validationMode&&(n=a.table.modules.validate.validate(e.column.modules.validate,e,t)),!0===n||"highlight"===a.table.options.validationMode?(a.clearEditor(),e.modules.edit||(e.modules.edit={}),e.modules.edit.edited=!0,-1==a.editedCells.indexOf(e)&&a.editedCells.push(e),e.setValue(t,!0),a.table.options.dataTree&&a.table.modExists("dataTree")&&a.table.modules.dataTree.checkForRestyle(e),!0===n||(u.classList.add("tabulator-validation-fail"),a.table.externalEvents.dispatch("validationFailed",e.getComponent(),t,n),!1)):(a.invalidEdit=!0,u.classList.add("tabulator-validation-fail"),a.focusCellNoEvent(e,!0),l(),a.table.externalEvents.dispatch("validationFailed",e.getComponent(),t,n),!1)}}),(function(){a.currentCell===e&&(a.cancelEdit(),a.table.options.dataTree&&a.table.modExists("dataTree")&&a.table.modules.dataTree.checkForRestyle(e))}),o),!1===r)return u.blur(),!1;if(!(r instanceof Node))return console.warn("Edit Error - Editor should return an instance of Node, the editor returned:",r),u.blur(),!1;for(u.classList.add("tabulator-editing"),e.row.getElement().classList.add("tabulator-row-editing");u.firstChild;)u.removeChild(u.firstChild);u.appendChild(r),l();for(var c=u.children,d=0;d<c.length;d++)c[d].addEventListener("click",(function(e){e.stopPropagation()}));return!0}return this.mouseClick=!1,u.blur(),!1}this.invalidEdit||this.cancelEdit()}getEditedCells(){var e=[];return this.editedCells.forEach((t=>{e.push(t.getComponent())})),e}clearEdited(e){var t;e.modules.edit&&e.modules.edit.edited&&(e.modules.edit.edited=!1,e.modules.validate&&(e.modules.validate.invalid=!1)),(t=this.editedCells.indexOf(e))>-1&&this.editedCells.splice(t,1)}}XD.moduleName="edit",XD.editors=VD;class qD{constructor(e,t,n,r){this.type=e,this.columns=t,this.component=n||!1,this.indent=r||0}}class KD{constructor(e,t,n,r,i){this.value=e,this.component=t||!1,this.width=n,this.height=r,this.depth=i}}class JD extends MD{constructor(e){super(e),this.config={},this.cloneTableStyle=!0,this.colVisProp="",this.registerTableOption("htmlOutputConfig",!1),this.registerColumnOption("htmlOutput"),this.registerColumnOption("titleHtmlOutput")}initialize(){this.registerTableFunction("getHtml",this.getHtml.bind(this))}generateExportList(e,t,n,r){this.cloneTableStyle=t,this.config=e||{},this.colVisProp=r;var i=!1!==this.config.columnHeaders?this.headersToExportRows(this.generateColumnGroupHeaders()):[],o=this.bodyToExportRows(this.rowLookup(n));return i.concat(o)}genereateTable(e,t,n,r){var i=this.generateExportList(e,t,n,r);return this.genereateTableElement(i)}rowLookup(e){var t=[];if("function"==typeof e)e.call(this.table).forEach((e=>{(e=this.table.rowManager.findRow(e))&&t.push(e)}));else switch(e){case!0:case"visible":t=this.table.rowManager.getVisibleRows(!0);break;case"all":t=this.table.rowManager.rows;break;case"selected":t=this.table.modules.selectRow.selectedRows;break;default:t=this.table.options.pagination?this.table.rowManager.getDisplayRows(this.table.rowManager.displayRows.length-2):this.table.rowManager.getDisplayRows()}return Object.assign([],t)}generateColumnGroupHeaders(){var e=[];return(!1!==this.config.columnGroups?this.table.columnManager.columns:this.table.columnManager.columnsByIndex).forEach((t=>{var n=this.processColumnGroup(t);n&&e.push(n)})),e}processColumnGroup(e){var t=e.columns,n=0,r={title:e.definition["title"+(this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1))]||e.definition.title,column:e,depth:1};if(t.length){if(r.subGroups=[],r.width=0,t.forEach((e=>{var t=this.processColumnGroup(e);t&&(r.width+=t.width,r.subGroups.push(t),t.depth>n&&(n=t.depth))})),r.depth+=n,!r.width)return!1}else{if(!this.columnVisCheck(e))return!1;r.width=1}return r}columnVisCheck(e){return!1!==e.definition[this.colVisProp]&&(e.visible||!e.visible&&e.definition[this.colVisProp])}headersToExportRows(e){var t=[],n=0,r=[];function i(e,r){var o=n-r;if(void 0===t[r]&&(t[r]=[]),e.height=e.subGroups?1:o-e.depth+1,t[r].push(e),e.height>1)for(let n=1;n<e.height;n++)void 0===t[r+n]&&(t[r+n]=[]),t[r+n].push(!1);if(e.width>1)for(let n=1;n<e.width;n++)t[r].push(!1);e.subGroups&&e.subGroups.forEach((function(e){i(e,r+1)}))}return e.forEach((function(e){e.depth>n&&(n=e.depth)})),e.forEach((function(e){i(e,0)})),t.forEach((e=>{var t=[];e.forEach((e=>{e?t.push(new KD(e.title,e.column.getComponent(),e.width,e.height,e.depth)):t.push(null)})),r.push(new qD("header",t))})),r}bodyToExportRows(e){var t=[],n=[];return this.table.columnManager.columnsByIndex.forEach((e=>{this.columnVisCheck(e)&&t.push(e.getComponent())})),!1!==this.config.columnCalcs&&this.table.modExists("columnCalcs")&&(this.table.modules.columnCalcs.topInitialized&&e.unshift(this.table.modules.columnCalcs.topRow),this.table.modules.columnCalcs.botInitialized&&e.push(this.table.modules.columnCalcs.botRow)),(e=e.filter((e=>{switch(e.type){case"group":return!1!==this.config.rowGroups;case"calc":return!1!==this.config.columnCalcs;case"row":return!(this.table.options.dataTree&&!1===this.config.dataTree&&e.modules.dataTree.parent)}return!0}))).forEach(((e,r)=>{var i=e.getData(this.colVisProp),o=[],a=0;switch(e.type){case"group":a=e.level,o.push(new KD(e.key,e.getComponent(),t.length,1));break;case"calc":case"row":t.forEach((e=>{o.push(new KD(e._column.getFieldValue(i),e,1,1))})),this.table.options.dataTree&&!1!==this.config.dataTree&&(a=e.modules.dataTree.index)}n.push(new qD(e.type,o,e.getComponent(),a))})),n}genereateTableElement(e){var t=document.createElement("table"),n=document.createElement("thead"),r=document.createElement("tbody"),i=this.lookupTableStyles(),o=this.table.options["rowFormatter"+(this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1))],a={};return a.rowFormatter=null!==o?o:this.table.options.rowFormatter,this.table.options.dataTree&&!1!==this.config.dataTree&&this.table.modExists("columnCalcs")&&(a.treeElementField=this.table.modules.dataTree.elementField),a.groupHeader=this.table.options["groupHeader"+(this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1))],a.groupHeader&&!Array.isArray(a.groupHeader)&&(a.groupHeader=[a.groupHeader]),t.classList.add("tabulator-print-table"),this.mapElementStyles(this.table.columnManager.getHeadersElement(),n,["border-top","border-left","border-right","border-bottom","background-color","color","font-weight","font-family","font-size"]),e.length>1e3&&console.warn("It may take a long time to render an HTML table with more than 1000 rows"),e.forEach(((e,t)=>{switch(e.type){case"header":n.appendChild(this.genereateHeaderElement(e,a,i));break;case"group":r.appendChild(this.genereateGroupElement(e,a,i));break;case"calc":r.appendChild(this.genereateCalcElement(e,a,i));break;case"row":let o=this.genereateRowElement(e,a,i);this.mapElementStyles(t%2&&i.evenRow?i.evenRow:i.oddRow,o,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),r.appendChild(o)}})),n.innerHTML&&t.appendChild(n),t.appendChild(r),this.mapElementStyles(this.table.element,t,["border-top","border-left","border-right","border-bottom"]),t}lookupTableStyles(){var e={};return this.cloneTableStyle&&window.getComputedStyle&&(e.oddRow=this.table.element.querySelector(".tabulator-row-odd:not(.tabulator-group):not(.tabulator-calcs)"),e.evenRow=this.table.element.querySelector(".tabulator-row-even:not(.tabulator-group):not(.tabulator-calcs)"),e.calcRow=this.table.element.querySelector(".tabulator-row.tabulator-calcs"),e.firstRow=this.table.element.querySelector(".tabulator-row:not(.tabulator-group):not(.tabulator-calcs)"),e.firstGroup=this.table.element.getElementsByClassName("tabulator-group")[0],e.firstRow&&(e.styleCells=e.firstRow.getElementsByClassName("tabulator-cell"),e.firstCell=e.styleCells[0],e.lastCell=e.styleCells[e.styleCells.length-1])),e}genereateHeaderElement(e,t,n){var r=document.createElement("tr");return e.columns.forEach((e=>{if(e){var t=document.createElement("th"),n=e.component._column.definition.cssClass?e.component._column.definition.cssClass.split(" "):[];t.colSpan=e.width,t.rowSpan=e.height,t.innerHTML=e.value,this.cloneTableStyle&&(t.style.boxSizing="border-box"),n.forEach((function(e){t.classList.add(e)})),this.mapElementStyles(e.component.getElement(),t,["text-align","border-top","border-left","border-right","border-bottom","background-color","color","font-weight","font-family","font-size"]),this.mapElementStyles(e.component._column.contentElement,t,["padding-top","padding-left","padding-right","padding-bottom"]),e.component._column.visible?this.mapElementStyles(e.component.getElement(),t,["width"]):e.component._column.definition.width&&(t.style.width=e.component._column.definition.width+"px"),e.component._column.parent&&this.mapElementStyles(e.component._column.parent.groupElement,t,["border-top"]),r.appendChild(t)}})),r}genereateGroupElement(e,t,n){var r=document.createElement("tr"),i=document.createElement("td"),o=e.columns[0];return r.classList.add("tabulator-print-table-row"),t.groupHeader&&t.groupHeader[e.indent]?o.value=t.groupHeader[e.indent](o.value,e.component._group.getRowCount(),e.component._group.getData(),e.component):!1===t.groupHeader?o.value=o.value:o.value=e.component._group.generator(o.value,e.component._group.getRowCount(),e.component._group.getData(),e.component),i.colSpan=o.width,i.innerHTML=o.value,r.classList.add("tabulator-print-table-group"),r.classList.add("tabulator-group-level-"+e.indent),o.component.isVisible()&&r.classList.add("tabulator-group-visible"),this.mapElementStyles(n.firstGroup,r,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),this.mapElementStyles(n.firstGroup,i,["padding-top","padding-left","padding-right","padding-bottom"]),r.appendChild(i),r}genereateCalcElement(e,t,n){var r=this.genereateRowElement(e,t,n);return r.classList.add("tabulator-print-table-calcs"),this.mapElementStyles(n.calcRow,r,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),r}genereateRowElement(e,t,n){var r=document.createElement("tr");return r.classList.add("tabulator-print-table-row"),e.columns.forEach((o=>{if(o){var a=document.createElement("td"),s=o.component._column,l=o.value,u={modules:{},getValue:function(){return l},getField:function(){return s.definition.field},getElement:function(){return a},getColumn:function(){return s.getComponent()},getData:function(){return e.component.getData()},getRow:function(){return e.component},getComponent:function(){return u},column:s};if((s.definition.cssClass?s.definition.cssClass.split(" "):[]).forEach((function(e){a.classList.add(e)})),this.table.modExists("format")&&!1!==this.config.formatCells)l=this.table.modules.format.formatExportValue(u,this.colVisProp);else switch(typeof l){case"object":l=JSON.stringify(l);break;case"undefined":case"null":l="";break;default:l=l}l instanceof Node?a.appendChild(l):a.innerHTML=l,n.firstCell&&(this.mapElementStyles(n.firstCell,a,["padding-top","padding-left","padding-right","padding-bottom","border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size"]),s.definition.align&&(a.style.textAlign=s.definition.align)),this.table.options.dataTree&&!1!==this.config.dataTree&&(t.treeElementField&&t.treeElementField==s.field||!t.treeElementField&&0==i)&&(e.component._row.modules.dataTree.controlEl&&a.insertBefore(e.component._row.modules.dataTree.controlEl.cloneNode(!0),a.firstChild),e.component._row.modules.dataTree.branchEl&&a.insertBefore(e.component._row.modules.dataTree.branchEl.cloneNode(!0),a.firstChild)),r.appendChild(a),u.modules.format&&u.modules.format.renderedCallback&&u.modules.format.renderedCallback(),t.rowFormatter&&!1!==this.config.formatCells&&t.rowFormatter(e.component)}})),r}genereateHTMLTable(e){var t=document.createElement("div");return t.appendChild(this.genereateTableElement(e)),t.innerHTML}getHtml(e,t,n,r){var i=this.generateExportList(n||this.table.options.htmlOutputConfig,t,e,r||"htmlOutput");return this.genereateHTMLTable(i)}mapElementStyles(e,t,n){if(this.cloneTableStyle&&e&&t){var r={"background-color":"backgroundColor",color:"fontColor",width:"width","font-weight":"fontWeight","font-family":"fontFamily","font-size":"fontSize","text-align":"textAlign","border-top":"borderTop","border-left":"borderLeft","border-right":"borderRight","border-bottom":"borderBottom","padding-top":"paddingTop","padding-left":"paddingLeft","padding-right":"paddingRight","padding-bottom":"paddingBottom"};if(window.getComputedStyle){var i=window.getComputedStyle(e);n.forEach((function(e){t.style[r[e]]=i.getPropertyValue(e)}))}}}}JD.moduleName="export";var ZD={"=":function(e,t,n,r){return t==e},"<":function(e,t,n,r){return t<e},"<=":function(e,t,n,r){return t<=e},">":function(e,t,n,r){return t>e},">=":function(e,t,n,r){return t>=e},"!=":function(e,t,n,r){return t!=e},regex:function(e,t,n,r){return"string"==typeof e&&(e=new RegExp(e)),e.test(t)},like:function(e,t,n,r){return null==e?t===e:null!=t&&String(t).toLowerCase().indexOf(e.toLowerCase())>-1},keywords:function(e,t,n,r){var i=e.toLowerCase().split(void 0===r.separator?" ":r.separator),o=String(null==t?"":t).toLowerCase(),a=[];return i.forEach((e=>{o.includes(e)&&a.push(!0)})),r.matchAll?a.length===i.length:!!a.length},starts:function(e,t,n,r){return null==e?t===e:null!=t&&String(t).toLowerCase().startsWith(e.toLowerCase())},ends:function(e,t,n,r){return null==e?t===e:null!=t&&String(t).toLowerCase().endsWith(e.toLowerCase())},in:function(e,t,n,r){return Array.isArray(e)?!e.length||e.indexOf(t)>-1:(console.warn("Filter Error - filter value is not an array:",e),!1)}};class $D extends MD{constructor(e){super(e),this.filterList=[],this.headerFilters={},this.headerFilterColumns=[],this.prevHeaderFilterChangeCheck="",this.prevHeaderFilterChangeCheck="{}",this.changed=!1,this.tableInitialized=!1,this.registerTableOption("filterMode","local"),this.registerTableOption("initialFilter",!1),this.registerTableOption("initialHeaderFilter",!1),this.registerTableOption("headerFilterLiveFilterDelay",300),this.registerColumnOption("headerFilter"),this.registerColumnOption("headerFilterPlaceholder"),this.registerColumnOption("headerFilterParams"),this.registerColumnOption("headerFilterEmptyCheck"),this.registerColumnOption("headerFilterFunc"),this.registerColumnOption("headerFilterFuncParams"),this.registerColumnOption("headerFilterLiveFilter"),this.registerTableFunction("searchRows",this.searchRows.bind(this)),this.registerTableFunction("searchData",this.searchData.bind(this)),this.registerTableFunction("setFilter",this.userSetFilter.bind(this)),this.registerTableFunction("refreshFilter",this.userRefreshFilter.bind(this)),this.registerTableFunction("addFilter",this.userAddFilter.bind(this)),this.registerTableFunction("getFilters",this.getFilters.bind(this)),this.registerTableFunction("setHeaderFilterFocus",this.userSetHeaderFilterFocus.bind(this)),this.registerTableFunction("getHeaderFilterValue",this.userGetHeaderFilterValue.bind(this)),this.registerTableFunction("setHeaderFilterValue",this.userSetHeaderFilterValue.bind(this)),this.registerTableFunction("getHeaderFilters",this.getHeaderFilters.bind(this)),this.registerTableFunction("removeFilter",this.userRemoveFilter.bind(this)),this.registerTableFunction("clearFilter",this.userClearFilter.bind(this)),this.registerTableFunction("clearHeaderFilter",this.userClearHeaderFilter.bind(this)),this.registerComponentFunction("column","headerFilterFocus",this.setHeaderFilterFocus.bind(this)),this.registerComponentFunction("column","reloadHeaderFilter",this.reloadHeaderFilter.bind(this)),this.registerComponentFunction("column","getHeaderFilterValue",this.getHeaderFilterValue.bind(this)),this.registerComponentFunction("column","setHeaderFilterValue",this.setHeaderFilterValue.bind(this))}initialize(){this.subscribe("column-init",this.initializeColumnHeaderFilter.bind(this)),this.subscribe("column-width-fit-before",this.hideHeaderFilterElements.bind(this)),this.subscribe("column-width-fit-after",this.showHeaderFilterElements.bind(this)),this.subscribe("table-built",this.tableBuilt.bind(this)),"remote"===this.table.options.filterMode&&this.subscribe("data-params",this.remoteFilterParams.bind(this)),this.registerDataHandler(this.filter.bind(this),10)}tableBuilt(){this.table.options.initialFilter&&this.setFilter(this.table.options.initialFilter),this.table.options.initialHeaderFilter&&this.table.options.initialHeaderFilter.forEach((e=>{var t=this.table.columnManager.findColumn(e.field);if(!t)return console.warn("Column Filter Error - No matching column found:",e.field),!1;this.setHeaderFilterValue(t,e.value)})),this.tableInitialized=!0}remoteFilterParams(e,t,n,r){return r.filter=this.getFilters(!0,!0),r}userSetFilter(e,t,n,r){this.setFilter(e,t,n,r),this.refreshFilter()}userRefreshFilter(){this.refreshFilter()}userAddFilter(e,t,n,r){this.addFilter(e,t,n,r),this.refreshFilter()}userSetHeaderFilterFocus(e){var t=this.table.columnManager.findColumn(e);if(!t)return console.warn("Column Filter Focus Error - No matching column found:",e),!1;this.setHeaderFilterFocus(t)}userGetHeaderFilterValue(e){var t=this.table.columnManager.findColumn(e);if(t)return this.getHeaderFilterValue(t);console.warn("Column Filter Error - No matching column found:",e)}userSetHeaderFilterValue(e,t){var n=this.table.columnManager.findColumn(e);if(!n)return console.warn("Column Filter Error - No matching column found:",e),!1;this.setHeaderFilterValue(n,t)}userRemoveFilter(e,t,n){this.removeFilter(e,t,n),this.refreshFilter()}userClearFilter(e){this.clearFilter(e),this.refreshFilter()}userClearHeaderFilter(){this.clearHeaderFilter(),this.refreshFilter()}searchRows(e,t,n){return this.search("rows",e,t,n)}searchData(e,t,n){return this.search("data",e,t,n)}initializeColumnHeaderFilter(e){var t=e.definition;t.headerFilter&&(void 0!==t.headerFilterPlaceholder&&t.field&&this.module("localize").setHeaderFilterColumnPlaceholder(t.field,t.headerFilterPlaceholder),this.initializeColumn(e))}initializeColumn(e,t){var n=this,r=e.getField();e.modules.filter={success:function(t){var i,o="input"==e.modules.filter.tagType&&"text"==e.modules.filter.attrType||"textarea"==e.modules.filter.tagType?"partial":"match",a="",s="";if(void 0===e.modules.filter.prevSuccess||e.modules.filter.prevSuccess!==t){if(e.modules.filter.prevSuccess=t,e.modules.filter.emptyFunc(t))delete n.headerFilters[r];else{switch(e.modules.filter.value=t,typeof e.definition.headerFilterFunc){case"string":$D.filters[e.definition.headerFilterFunc]?(a=e.definition.headerFilterFunc,i=function(n){var r=e.definition.headerFilterFuncParams||{},i=e.getFieldValue(n);return r="function"==typeof r?r(t,i,n):r,$D.filters[e.definition.headerFilterFunc](t,i,n,r)}):console.warn("Header Filter Error - Matching filter function not found: ",e.definition.headerFilterFunc);break;case"function":i=function(n){var r=e.definition.headerFilterFuncParams||{},i=e.getFieldValue(n);return r="function"==typeof r?r(t,i,n):r,e.definition.headerFilterFunc(t,i,n,r)},a=i}if(!i)if("partial"===o)i=function(n){var r=e.getFieldValue(n);return null!=r&&String(r).toLowerCase().indexOf(String(t).toLowerCase())>-1},a="like";else i=function(n){return e.getFieldValue(n)==t},a="=";n.headerFilters[r]={value:t,func:i,type:a,params:{}}}s=JSON.stringify(n.headerFilters),n.prevHeaderFilterChangeCheck!==s&&(n.prevHeaderFilterChangeCheck=s,n.trackChanges(),n.refreshFilter())}return!0},attrType:!1,tagType:!1,emptyFunc:!1},this.generateHeaderFilterElement(e)}generateHeaderFilterElement(e,t,n){var r,i,o,a,s,l,u,c=this,d=e.modules.filter.success,h=e.getField();if(e.modules.filter.headerElement&&e.modules.filter.headerElement.parentNode&&e.contentElement.removeChild(e.modules.filter.headerElement.parentNode),h){switch(e.modules.filter.emptyFunc=e.definition.headerFilterEmptyCheck||function(e){return!e&&"0"!==e&&0!==e},(r=document.createElement("div")).classList.add("tabulator-header-filter"),typeof e.definition.headerFilter){case"string":c.table.modules.edit.editors[e.definition.headerFilter]?(i=c.table.modules.edit.editors[e.definition.headerFilter],"tick"!==e.definition.headerFilter&&"tickCross"!==e.definition.headerFilter||e.definition.headerFilterEmptyCheck||(e.modules.filter.emptyFunc=function(e){return!0!==e&&!1!==e})):console.warn("Filter Error - Cannot build header filter, No such editor found: ",e.definition.editor);break;case"function":i=e.definition.headerFilter;break;case"boolean":e.modules.edit&&e.modules.edit.editor?i=e.modules.edit.editor:e.definition.formatter&&c.table.modules.edit.editors[e.definition.formatter]?(i=c.table.modules.edit.editors[e.definition.formatter],"tick"!==e.definition.formatter&&"tickCross"!==e.definition.formatter||e.definition.headerFilterEmptyCheck||(e.modules.filter.emptyFunc=function(e){return!0!==e&&!1!==e})):i=c.table.modules.edit.editors.input}if(i){if(a={getValue:function(){return void 0!==t?t:""},getField:function(){return e.definition.field},getElement:function(){return r},getColumn:function(){return e.getComponent()},getRow:function(){return{normalizeHeight:function(){}}}},u="function"==typeof(u=e.definition.headerFilterParams||{})?u.call(c.table):u,!(o=i.call(this.table.modules.edit,a,(function(){}),d,(function(){}),u)))return void console.warn("Filter Error - Cannot add filter to "+h+" column, editor returned a value of false");if(!(o instanceof Node))return void console.warn("Filter Error - Cannot add filter to "+h+" column, editor should return an instance of Node, the editor returned:",o);h?c.langBind("headerFilters|columns|"+e.definition.field,(function(e){o.setAttribute("placeholder",void 0!==e&&e?e:c.langText("headerFilters|default"))})):c.langBind("headerFilters|default",(function(e){o.setAttribute("placeholder",e)})),o.addEventListener("click",(function(e){e.stopPropagation(),o.focus()})),o.addEventListener("focus",(e=>{var t=this.table.columnManager.element.scrollLeft;t!==this.table.rowManager.element.scrollLeft&&(this.table.rowManager.scrollHorizontal(t),this.table.columnManager.scrollHorizontal(t))})),s=!1,l=function(e){s&&clearTimeout(s),s=setTimeout((function(){d(o.value)}),c.table.options.headerFilterLiveFilterDelay)},e.modules.filter.headerElement=o,e.modules.filter.attrType=o.hasAttribute("type")?o.getAttribute("type").toLowerCase():"",e.modules.filter.tagType=o.tagName.toLowerCase(),!1!==e.definition.headerFilterLiveFilter&&("autocomplete"!==e.definition.headerFilter&&"tickCross"!==e.definition.headerFilter&&("autocomplete"!==e.definition.editor&&"tickCross"!==e.definition.editor||!0!==e.definition.headerFilter)&&(o.addEventListener("keyup",l),o.addEventListener("search",l),"number"==e.modules.filter.attrType&&o.addEventListener("change",(function(e){d(o.value)})),"text"==e.modules.filter.attrType&&"ie"!==this.table.browser&&o.setAttribute("type","search")),"input"!=e.modules.filter.tagType&&"select"!=e.modules.filter.tagType&&"textarea"!=e.modules.filter.tagType||o.addEventListener("mousedown",(function(e){e.stopPropagation()}))),r.appendChild(o),e.contentElement.appendChild(r),n||c.headerFilterColumns.push(e)}}else console.warn("Filter Error - Cannot add header filter, column has no field set:",e.definition.title)}hideHeaderFilterElements(){this.headerFilterColumns.forEach((function(e){e.modules.filter&&e.modules.filter.headerElement&&(e.modules.filter.headerElement.style.display="none")}))}showHeaderFilterElements(){this.headerFilterColumns.forEach((function(e){e.modules.filter&&e.modules.filter.headerElement&&(e.modules.filter.headerElement.style.display="")}))}setHeaderFilterFocus(e){e.modules.filter&&e.modules.filter.headerElement?e.modules.filter.headerElement.focus():console.warn("Column Filter Focus Error - No header filter set on column:",e.getField())}getHeaderFilterValue(e){if(e.modules.filter&&e.modules.filter.headerElement)return e.modules.filter.headerElement.value;console.warn("Column Filter Error - No header filter set on column:",e.getField())}setHeaderFilterValue(e,t){e&&(e.modules.filter&&e.modules.filter.headerElement?(this.generateHeaderFilterElement(e,t,!0),e.modules.filter.success(t)):console.warn("Column Filter Error - No header filter set on column:",e.getField()))}reloadHeaderFilter(e){e&&(e.modules.filter&&e.modules.filter.headerElement?this.generateHeaderFilterElement(e,e.modules.filter.value,!0):console.warn("Column Filter Error - No header filter set on column:",e.getField()))}refreshFilter(){this.tableInitialized&&("remote"===this.table.options.filterMode?this.reloadData():this.refreshData())}trackChanges(){this.changed=!0,this.dispatch("filter-changed")}hasChanged(){var e=this.changed;return this.changed=!1,e}setFilter(e,t,n,r){this.filterList=[],Array.isArray(e)||(e=[{field:e,type:t,value:n,params:r}]),this.addFilter(e)}addFilter(e,t,n,r){Array.isArray(e)||(e=[{field:e,type:t,value:n,params:r}]),e.forEach((e=>{(e=this.findFilter(e))&&(this.filterList.push(e),this.changed=!0)}))}findFilter(e){var t;if(Array.isArray(e))return this.findSubFilters(e);var n=!1;return"function"==typeof e.field?n=function(t){return e.field(t,e.type||{})}:$D.filters[e.type]?n=(t=this.table.columnManager.getColumnByField(e.field))?function(n){return $D.filters[e.type](e.value,t.getFieldValue(n),n,e.params||{})}:function(t){return $D.filters[e.type](e.value,t[e.field],t,e.params||{})}:console.warn("Filter Error - No such filter type found, ignoring: ",e.type),e.func=n,!!e.func&&e}findSubFilters(e){var t=[];return e.forEach((e=>{(e=this.findFilter(e))&&t.push(e)})),!!t.length&&t}getFilters(e,t){var n=[];return e&&(n=this.getHeaderFilters()),t&&n.forEach((function(e){"function"==typeof e.type&&(e.type="function")})),n=n.concat(this.filtersToArray(this.filterList,t))}filtersToArray(e,t){var n=[];return e.forEach((e=>{var r;Array.isArray(e)?n.push(this.filtersToArray(e,t)):(r={field:e.field,type:e.type,value:e.value},t&&"function"==typeof r.type&&(r.type="function"),n.push(r))})),n}getHeaderFilters(){var e=[];for(var t in this.headerFilters)e.push({field:t,type:this.headerFilters[t].type,value:this.headerFilters[t].value});return e}removeFilter(e,t,n){Array.isArray(e)||(e=[{field:e,type:t,value:n}]),e.forEach((e=>{var t=-1;(t="object"==typeof e.field?this.filterList.findIndex((t=>e===t)):this.filterList.findIndex((t=>e.field===t.field&&e.type===t.type&&e.value===t.value)))>-1?this.filterList.splice(t,1):console.warn("Filter Error - No matching filter type found, ignoring: ",e.type)})),this.trackChanges()}clearFilter(e){this.filterList=[],e&&this.clearHeaderFilter(),this.trackChanges()}clearHeaderFilter(){this.headerFilters={},this.prevHeaderFilterChangeCheck="{}",this.headerFilterColumns.forEach((e=>{void 0!==e.modules.filter.value&&delete e.modules.filter.value,e.modules.filter.prevSuccess=void 0,this.reloadHeaderFilter(e)})),this.trackChanges()}search(e,t,n,r){var i=[],o=[];return Array.isArray(t)||(t=[{field:t,type:n,value:r}]),t.forEach((e=>{(e=this.findFilter(e))&&o.push(e)})),this.table.rowManager.rows.forEach((t=>{var n=!0;o.forEach((e=>{this.filterRecurse(e,t.getData())||(n=!1)})),n&&i.push("data"===e?t.getData("data"):t.getComponent())})),i}filter(e,t){var n=[],r=[];return this.subscribedExternal("dataFiltering")&&this.dispatchExternal("dataFiltering",this.getFilters()),"remote"!==this.table.options.filterMode&&(this.filterList.length||Object.keys(this.headerFilters).length)?e.forEach((e=>{this.filterRow(e)&&n.push(e)})):n=e.slice(0),this.subscribedExternal("dataFiltered")&&(n.forEach((e=>{r.push(e.getComponent())})),this.dispatchExternal("dataFiltered",this.getFilters(),r)),n}filterRow(e,t){var n=!0,r=e.getData();for(var i in this.filterList.forEach((e=>{this.filterRecurse(e,r)||(n=!1)})),this.headerFilters)this.headerFilters[i].func(r)||(n=!1);return n}filterRecurse(e,t){var n=!1;return Array.isArray(e)?e.forEach((e=>{this.filterRecurse(e,t)&&(n=!0)})):n=e.func(t),n}}$D.moduleName="filter",$D.filters=ZD;var QD={plaintext:function(e,t,n){return this.emptyToSpace(this.sanitizeHTML(e.getValue()))},html:function(e,t,n){return e.getValue()},textarea:function(e,t,n){return e.getElement().style.whiteSpace="pre-wrap",this.emptyToSpace(this.sanitizeHTML(e.getValue()))},money:function(e,t,n){var r,i,o,a,s=parseFloat(e.getValue()),l="",u=t.decimal||".",c=t.thousand||",",d=t.negativeSign||"-",h=t.symbol||"",f=!!t.symbolAfter,p=void 0!==t.precision?t.precision:2;if(isNaN(s))return this.emptyToSpace(this.sanitizeHTML(e.getValue()));for(s<0&&(s=Math.abs(s),l=d),r=!1!==p?s.toFixed(p):s,i=(r=String(r).split("."))[0],o=r.length>1?u+r[1]:"",a=/(\d+)(\d{3})/;a.test(i);)i=i.replace(a,"$1"+c+"$2");return f?l+i+o+h:l+h+i+o},link:function(e,t,n){var r=e.getValue(),i=t.urlPrefix||"",o=t.download,a=r,s=document.createElement("a");if(t.labelField&&(a=e.getData()[t.labelField]),t.label)switch(typeof t.label){case"string":a=t.label;break;case"function":a=t.label(e)}if(a){if(t.urlField&&(r=e.getData()[t.urlField]),t.url)switch(typeof t.url){case"string":r=t.url;break;case"function":r=t.url(e)}return s.setAttribute("href",i+r),t.target&&s.setAttribute("target",t.target),t.download&&(o="function"==typeof o?o(e):!0===o?"":o,s.setAttribute("download",o)),s.innerHTML=this.emptyToSpace(this.sanitizeHTML(a)),s}return"&nbsp;"},image:function(e,t,n){var r=document.createElement("img"),i=e.getValue();switch(t.urlPrefix&&(i=t.urlPrefix+e.getValue()),t.urlSuffix&&(i+=t.urlSuffix),r.setAttribute("src",i),typeof t.height){case"number":r.style.height=t.height+"px";break;case"string":r.style.height=t.height}switch(typeof t.width){case"number":r.style.width=t.width+"px";break;case"string":r.style.width=t.width}return r.addEventListener("load",(function(){e.getRow().normalizeHeight()})),r},tickCross:function(e,t,n){var r=e.getValue(),i=e.getElement(),o=t.allowEmpty,a=t.allowTruthy,s=void 0!==t.tickElement?t.tickElement:'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#2DC214" clip-rule="evenodd" d="M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z" fill-rule="evenodd"/></svg>',l=void 0!==t.crossElement?t.crossElement:'<svg enable-background="new 0 0 24 24" height="14" width="14"  viewBox="0 0 24 24" xml:space="preserve" ><path fill="#CE1515" d="M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z"/></svg>';return a&&r||!0===r||"true"===r||"True"===r||1===r||"1"===r?(i.setAttribute("aria-checked",!0),s||""):!o||"null"!==r&&""!==r&&null!=r?(i.setAttribute("aria-checked",!1),l||""):(i.setAttribute("aria-checked","mixed"),"")},datetime:function(e,t,n){var r=window.DateTime||luxon.DateTime,i=t.inputFormat||"yyyy-MM-dd HH:mm:ss",o=t.outputFormat||"dd/MM/yyyy HH:mm:ss",a=void 0!==t.invalidPlaceholder?t.invalidPlaceholder:"",s=e.getValue();if(void 0!==r){var l=(window.DateTime||luxon.DateTime).fromFormat(s,i);return l.isValid?(t.timezone&&(l=l.shiftTimezone(t.timezone)),l.toFormat(o)):!0===a?s:"function"==typeof a?a(s):a}console.error("Format Error - 'datetime' formatter is dependant on luxon.js")},datetimediff:function(e,t,n){var r=window.DateTime||luxon.DateTime,i=t.inputFormat||"yyyy-MM-dd HH:mm:ss",o=void 0!==t.invalidPlaceholder?t.invalidPlaceholder:"",a=void 0!==t.suffix&&t.suffix,s=void 0!==t.unit?t.unit:"days",l=void 0!==t.humanize&&t.humanize,u=void 0!==t.date?t.date:r.now(),c=e.getValue();if(void 0!==r){var d=r.fromFormat(c,i);if(!d.isValid)return!0===o?c:"function"==typeof o?o(c):o;if(!l)return parseInt(d.diff(u,s)[s])+(a?" "+a:"")}else console.error("Format Error - 'datetimediff' formatter is dependant on luxon.js")},lookup:function(e,t,n){var r=e.getValue();return void 0===t[r]?(console.warn("Missing display value for "+r),r):t[r]},star:function(e,t,n){var r=e.getValue(),i=e.getElement(),o=t&&t.stars?t.stars:5,a=document.createElement("span"),s=document.createElementNS("http://www.w3.org/2000/svg","svg");a.style.verticalAlign="middle",s.setAttribute("width","14"),s.setAttribute("height","14"),s.setAttribute("viewBox","0 0 512 512"),s.setAttribute("xml:space","preserve"),s.style.padding="0 1px",r=r&&!isNaN(r)?parseInt(r):0,r=Math.max(0,Math.min(r,o));for(var l=1;l<=o;l++){var u=s.cloneNode(!0);u.innerHTML=l<=r?'<polygon fill="#FFEA00" stroke="#C1AB60" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>':'<polygon fill="#D2D2D2" stroke="#686868" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>',a.appendChild(u)}return i.style.whiteSpace="nowrap",i.style.overflow="hidden",i.style.textOverflow="ellipsis",i.setAttribute("aria-label",r),a},traffic:function(e,t,n){var r,i,o=this.sanitizeHTML(e.getValue())||0,a=document.createElement("span"),s=t&&t.max?t.max:100,l=t&&t.min?t.min:0,u=t&&void 0!==t.color?t.color:["red","orange","green"],c="#666666";if(!isNaN(o)&&void 0!==e.getValue()){switch(a.classList.add("tabulator-traffic-light"),i=parseFloat(o)<=s?parseFloat(o):s,i=parseFloat(i)>=l?parseFloat(i):l,r=(s-l)/100,i=Math.round((i-l)/r),typeof u){case"string":c=u;break;case"function":c=u(o);break;case"object":if(Array.isArray(u)){var d=100/u.length,h=Math.floor(i/d);h=Math.min(h,u.length-1),c=u[h=Math.max(h,0)];break}}return a.style.backgroundColor=c,a}},progress:function(e,t,n){var r,i,o,a,s,l=this.sanitizeHTML(e.getValue())||0,u=e.getElement(),c=t&&t.max?t.max:100,d=t&&t.min?t.min:0,h=t&&t.legendAlign?t.legendAlign:"center";switch(i=parseFloat(l)<=c?parseFloat(l):c,i=parseFloat(i)>=d?parseFloat(i):d,r=(c-d)/100,i=Math.round((i-d)/r),typeof t.color){case"string":o=t.color;break;case"function":o=t.color(l);break;case"object":if(Array.isArray(t.color)){var f=100/t.color.length,p=Math.floor(i/f);p=Math.min(p,t.color.length-1),p=Math.max(p,0),o=t.color[p];break}default:o="#2DC214"}switch(typeof t.legend){case"string":a=t.legend;break;case"function":a=t.legend(l);break;case"boolean":a=l;break;default:a=!1}switch(typeof t.legendColor){case"string":s=t.legendColor;break;case"function":s=t.legendColor(l);break;case"object":if(Array.isArray(t.legendColor)){f=100/t.legendColor.length,p=Math.floor(i/f);p=Math.min(p,t.legendColor.length-1),p=Math.max(p,0),s=t.legendColor[p]}break;default:s="#000"}u.style.minWidth="30px",u.style.position="relative",u.setAttribute("aria-label",i);var m=document.createElement("div");m.style.display="inline-block",m.style.position="absolute",m.style.width=i+"%",m.style.backgroundColor=o,m.style.height="100%",m.setAttribute("data-max",c),m.setAttribute("data-min",d);var g=document.createElement("div");if(g.style.position="relative",g.style.width="100%",g.style.height="100%",a){var v=document.createElement("div");v.style.position="absolute",v.style.top=0,v.style.left=0,v.style.textAlign=h,v.style.width="100%",v.style.color=s,v.innerHTML=a}return n((function(){if(!(e instanceof OD)){var t=document.createElement("div");t.style.position="absolute",t.style.top="4px",t.style.bottom="4px",t.style.left="4px",t.style.right="4px",u.appendChild(t),u=t}u.appendChild(g),g.appendChild(m),a&&g.appendChild(v)})),""},color:function(e,t,n){return e.getElement().style.backgroundColor=this.sanitizeHTML(e.getValue()),""},buttonTick:function(e,t,n){return'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#2DC214" clip-rule="evenodd" d="M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z" fill-rule="evenodd"/></svg>'},buttonCross:function(e,t,n){return'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#CE1515" d="M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z"/></svg>'},rownum:function(e,t,n){return this.table.rowManager.activeRows.indexOf(e.getRow()._getSelf())+1},handle:function(e,t,n){return e.getElement().classList.add("tabulator-row-handle"),"<div class='tabulator-row-handle-box'><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div></div>"},responsiveCollapse:function(e,t,n){var r=document.createElement("div"),i=e.getRow()._row.modules.responsiveLayout;function o(e){var t=i.element;i.open=e,t&&(i.open?(r.classList.add("open"),t.style.display=""):(r.classList.remove("open"),t.style.display="none"))}return r.classList.add("tabulator-responsive-collapse-toggle"),r.innerHTML="<span class='tabulator-responsive-collapse-toggle-open'>+</span><span class='tabulator-responsive-collapse-toggle-close'>-</span>",e.getElement().classList.add("tabulator-row-handle"),r.addEventListener("click",(function(e){e.stopImmediatePropagation(),o(!i.open)})),o(i.open),r},rowSelection:function(e,t,n){var r=document.createElement("input");if(r.type="checkbox",this.table.modExists("selectRow",!0))if(r.addEventListener("click",(e=>{e.stopPropagation()})),"function"==typeof e.getRow){var i=e.getRow();i instanceof jD?(r.addEventListener("change",(e=>{i.toggleSelect()})),r.checked=i.isSelected&&i.isSelected(),this.table.modules.selectRow.registerRowSelectCheckbox(i,r)):r=""}else r.addEventListener("change",(e=>{this.table.modules.selectRow.selectedRows.length?this.table.deselectRow():this.table.selectRow(t.rowRange)})),this.table.modules.selectRow.registerHeaderSelectCheckbox(r);return r}};class eA extends MD{constructor(e){super(e),this.registerColumnOption("formatter"),this.registerColumnOption("formatterParams"),this.registerColumnOption("formatterPrint"),this.registerColumnOption("formatterPrintParams"),this.registerColumnOption("formatterClipboard"),this.registerColumnOption("formatterClipboardParams"),this.registerColumnOption("formatterHtmlOutput"),this.registerColumnOption("formatterHtmlOutputParams"),this.registerColumnOption("titleFormatter"),this.registerColumnOption("titleFormatterParams")}initialize(){this.subscribe("cell-format",this.formatValue.bind(this)),this.subscribe("cell-rendered",this.cellRendered.bind(this)),this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("column-format",this.formatHeader.bind(this))}initializeColumn(e){e.modules.format=this.lookupFormatter(e,""),void 0!==e.definition.formatterPrint&&(e.modules.format.print=this.lookupFormatter(e,"Print")),void 0!==e.definition.formatterClipboard&&(e.modules.format.clipboard=this.lookupFormatter(e,"Clipboard")),void 0!==e.definition.formatterHtmlOutput&&(e.modules.format.htmlOutput=this.lookupFormatter(e,"HtmlOutput"))}lookupFormatter(e,t){var n={params:e.definition["formatter"+t+"Params"]||{}},r=e.definition["formatter"+t];switch(typeof r){case"string":eA.formatters[r]?n.formatter=eA.formatters[r]:(console.warn("Formatter Error - No such formatter found: ",r),n.formatter=eA.formatters.plaintext);break;case"function":n.formatter=r;break;default:n.formatter=eA.formatters.plaintext}return n}cellRendered(e){e.modules.format&&e.modules.format.renderedCallback&&!e.modules.format.rendered&&(e.modules.format.renderedCallback(),e.modules.format.rendered=!0)}formatHeader(e,t,n){var r,i,o,a;return e.definition.titleFormatter?(r=this.getFormatter(e.definition.titleFormatter),o=t=>{e.titleFormatterRendered=t},a={getValue:function(){return t},getElement:function(){return n}},i="function"==typeof(i=e.definition.titleFormatterParams||{})?i():i,r.call(this,a,i,o)):t}formatValue(e){var t=e.getComponent(),n="function"==typeof e.column.modules.format.params?e.column.modules.format.params(t):e.column.modules.format.params;return e.column.modules.format.formatter.call(this,t,n,(function(t){e.modules.format||(e.modules.format={}),e.modules.format.renderedCallback=t,e.modules.format.rendered=!1}))}formatExportValue(e,t){var n,r=e.column.modules.format[t];if(r){function t(t){e.modules.format||(e.modules.format={}),e.modules.format.renderedCallback=t,e.modules.format.rendered=!1}return n="function"==typeof r.params?r.params(component):r.params,r.formatter.call(this,e.getComponent(),n,t)}return this.formatValue(e)}sanitizeHTML(e){if(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return String(e).replace(/[&<>"'`=\/]/g,(function(e){return t[e]}))}return e}emptyToSpace(e){return null==e||""===e?"&nbsp;":e}getFormatter(e){switch(typeof e){case"string":eA.formatters[e]?e=eA.formatters[e]:(console.warn("Formatter Error - No such formatter found: ",e),e=eA.formatters.plaintext);break;case"function":e=e;break;default:e=eA.formatters.plaintext}return e}}eA.moduleName="format",eA.formatters=QD;class tA extends MD{constructor(e){super(e),this.leftColumns=[],this.rightColumns=[],this.leftMargin=0,this.rightMargin=0,this.rightPadding=0,this.initializationMode="left",this.active=!1,this.scrollEndTimer=!1,this.registerColumnOption("frozen")}reset(){this.initializationMode="left",this.leftColumns=[],this.rightColumns=[],this.leftMargin=0,this.rightMargin=0,this.rightMargin=0,this.active=!1,this.table.columnManager.headersElement.style.marginLeft=0,this.table.columnManager.element.style.paddingRight=0}initialize(){this.subscribe("cell-layout",this.layoutCell.bind(this)),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("column-width",this.layout.bind(this)),this.subscribe("row-layout-before",this.layoutRow.bind(this)),this.subscribe("table-layout",this.layout.bind(this)),this.subscribe("scroll-horizontal",this.scrollHorizontal.bind(this)),this.subscribe("columns-loading",this.reset.bind(this)),this.subscribe("table-redraw",this.layout.bind(this))}layoutCell(e){this.layoutElement(e.element,e.column)}initializeColumn(e){var t={margin:0,edge:!1};e.isGroup||(this.frozenCheck(e)?(t.position=this.initializationMode,"left"==this.initializationMode?this.leftColumns.push(e):this.rightColumns.unshift(e),this.active=!0,e.modules.frozen=t):this.initializationMode="right")}frozenCheck(e){return e.parent.isGroup&&e.definition.frozen&&console.warn("Frozen Column Error - Parent column group must be frozen, not individual columns or sub column groups"),e.parent.isGroup?this.frozenCheck(e.parent):e.definition.frozen}scrollHorizontal(){var e;this.active&&(clearTimeout(this.scrollEndTimer),this.scrollEndTimer=setTimeout((()=>{this.layout()}),100),e=this.table.rowManager.getVisibleRows(),this.calcMargins(),this.layoutColumnPosition(),this.layoutCalcRows(),e.forEach((e=>{"row"===e.type&&this.layoutRow(e)})),this.table.rowManager.tableElement.style.marginRight=this.rightMargin)}calcMargins(){this.leftMargin=this._calcSpace(this.leftColumns,this.leftColumns.length)+"px",this.table.columnManager.headersElement.style.marginLeft=this.leftMargin,this.rightMargin=this._calcSpace(this.rightColumns,this.rightColumns.length)+"px",this.table.columnManager.element.style.paddingRight=this.rightMargin,this.rightPadding=this.table.rowManager.element.clientWidth+this.table.columnManager.scrollLeft}layoutCalcRows(){this.table.modExists("columnCalcs")&&(this.table.modules.columnCalcs.topInitialized&&this.table.modules.columnCalcs.topRow&&this.layoutRow(this.table.modules.columnCalcs.topRow),this.table.modules.columnCalcs.botInitialized&&this.table.modules.columnCalcs.botRow&&this.layoutRow(this.table.modules.columnCalcs.botRow),this.table.modExists("groupRows")&&this.layoutGroupCalcs(this.table.modules.groupRows.getGroups()))}layoutGroupCalcs(e){e.forEach((e=>{e.calcs.top&&this.layoutRow(e.calcs.top),e.calcs.bottom&&this.layoutRow(e.calcs.bottom),e.groupList&&e.groupList.length&&this.layoutGroupCalcs(e.groupList&&e.groupList)}))}layoutColumnPosition(e){var t=[];this.leftColumns.forEach(((n,r)=>{if(n.modules.frozen.margin=this._calcSpace(this.leftColumns,r)+this.table.columnManager.scrollLeft+"px",r==this.leftColumns.length-1?n.modules.frozen.edge=!0:n.modules.frozen.edge=!1,n.parent.isGroup){var i=this.getColGroupParentElement(n);t.includes(i)||(this.layoutElement(i,n),t.push(i)),n.modules.frozen.edge&&i.classList.add("tabulator-frozen-"+n.modules.frozen.position)}else this.layoutElement(n.getElement(),n);e&&n.cells.forEach((e=>{this.layoutElement(e.getElement(!0),n)}))})),this.rightColumns.forEach(((t,n)=>{t.modules.frozen.margin=this.rightPadding-this._calcSpace(this.rightColumns,n+1)+"px",n==this.rightColumns.length-1?t.modules.frozen.edge=!0:t.modules.frozen.edge=!1,t.parent.isGroup?this.layoutElement(this.getColGroupParentElement(t),t):this.layoutElement(t.getElement(),t),e&&t.cells.forEach((e=>{this.layoutElement(e.getElement(!0),t)}))}))}getColGroupParentElement(e){return e.parent.isGroup?this.getColGroupParentElement(e.parent):e.getElement()}layout(){this.active&&(this.calcMargins(),this.table.rowManager.getDisplayRows().forEach((e=>{"row"===e.type&&this.layoutRow(e)})),this.layoutCalcRows(),this.layoutColumnPosition(!0),this.table.rowManager.tableElement.style.marginRight=this.rightMargin)}layoutRow(e){e.getElement().style.paddingLeft=this.leftMargin,this.leftColumns.forEach((t=>{var n=e.getCell(t);n&&this.layoutElement(n.getElement(!0),t)})),this.rightColumns.forEach((t=>{var n=e.getCell(t);n&&this.layoutElement(n.getElement(!0),t)}))}layoutElement(e,t){t.modules.frozen&&(e.style.position="absolute",e.style.left=t.modules.frozen.margin,e.classList.add("tabulator-frozen"),t.modules.frozen.edge&&e.classList.add("tabulator-frozen-"+t.modules.frozen.position))}_calcSpace(e,t){var n=0;for(let r=0;r<t;r++)e[r].visible&&(n+=e[r].getWidth());return n}}tA.moduleName="frozenColumns";class nA extends MD{constructor(e){super(e),this.topElement=document.createElement("div"),this.rows=[],this.registerComponentFunction("row","freeze",this.freezeRow.bind(this)),this.registerComponentFunction("row","unfreeze",this.unfreezeRow.bind(this)),this.registerComponentFunction("row","isFrozen",this.isRowFrozen.bind(this))}initialize(){this.rows=[],this.topElement.classList.add("tabulator-frozen-rows-holder"),this.table.columnManager.getElement().insertBefore(this.topElement,this.table.columnManager.headersElement.nextSibling),this.subscribe("row-deleting",this.detachRow.bind(this)),this.registerDisplayHandler(this.getRows.bind(this),10)}isRowFrozen(e){return this.rows.indexOf(e)>-1}isFrozen(){return!!this.rows.length}getRows(e){var t=e.slice(0);return this.rows.forEach((function(e){var n=t.indexOf(e);n>-1&&t.splice(n,1)})),t}freezeRow(e){e.modules.frozen?console.warn("Freeze Error - Row is already frozen"):(e.modules.frozen=!0,this.topElement.appendChild(e.getElement()),e.initialize(),e.normalizeHeight(),this.table.rowManager.adjustTableSize(),this.rows.push(e),this.refreshData(!1,"display"),this.styleRows())}unfreezeRow(e){this.rows.indexOf(e);e.modules.frozen?(e.modules.frozen=!1,this.detachRow(e),this.table.rowManager.adjustTableSize(),this.refreshData(!1,"display"),this.rows.length&&this.styleRows()):console.warn("Freeze Error - Row is already unfrozen")}detachRow(e){var t=this.rows.indexOf(e);if(t>-1){var n=e.getElement();n.parentNode&&n.parentNode.removeChild(n),this.rows.splice(t,1)}}styleRows(e){this.rows.forEach(((e,t)=>{this.table.rowManager.styleRow(e,t)}))}}nA.moduleName="frozenRows";class rA{constructor(e){return this._group=e,this.type="GroupComponent",new Proxy(this,{get:function(e,t,n){return void 0!==e[t]?e[t]:e._group.table.componentFunctionBinder.handle("row",e._group,t)}})}getKey(){return this._group.key}getField(){return this._group.field}getElement(){return this._group.element}getRows(){return this._group.getRows(!0)}getSubGroups(){return this._group.getSubGroups(!0)}getParentGroup(){return!!this._group.parent&&this._group.parent.getComponent()}isVisible(){return this._group.visible}show(){this._group.show()}hide(){this._group.hide()}toggle(){this._group.toggleVisibility()}_getSelf(){return this._group}getTable(){return this._group.groupManager.table}}class iA{constructor(e,t,n,r,i,o,a){this.groupManager=e,this.parent=t,this.key=r,this.level=n,this.field=i,this.hasSubGroups=n<e.groupIDLookups.length-1,this.addRow=this.hasSubGroups?this._addRowToGroup:this._addRow,this.type="group",this.old=a,this.rows=[],this.groups=[],this.groupList=[],this.generator=o,this.elementContents=!1,this.height=0,this.outerHeight=0,this.initialized=!1,this.calcs={},this.initialized=!1,this.modules={},this.arrowElement=!1,this.visible=a?a.visible:void 0!==e.startOpen[n]?e.startOpen[n]:e.startOpen[0],this.component=null,this.createElements(),this.addBindings(),this.createValueGroups()}wipe(){this.groupList.length?this.groupList.forEach((function(e){e.wipe()})):(this.element=!1,this.arrowElement=!1,this.elementContents=!1)}createElements(){var e=document.createElement("div");e.classList.add("tabulator-arrow"),this.element=document.createElement("div"),this.element.classList.add("tabulator-row"),this.element.classList.add("tabulator-group"),this.element.classList.add("tabulator-group-level-"+this.level),this.element.setAttribute("role","rowgroup"),this.arrowElement=document.createElement("div"),this.arrowElement.classList.add("tabulator-group-toggle"),this.arrowElement.appendChild(e),!1!==this.groupManager.table.options.movableRows&&this.groupManager.table.modExists("moveRow")&&this.groupManager.table.modules.moveRow.initializeGroupHeader(this)}createValueGroups(){var e=this.level+1;this.groupManager.allowedValues&&this.groupManager.allowedValues[e]&&this.groupManager.allowedValues[e].forEach((t=>{this._createGroup(t,e)}))}addBindings(){var e,t,n;(this.groupManager.table.options.groupContextMenu||this.groupManager.table.options.groupClickMenu)&&this.groupManager.table.modExists("menu")&&this.groupManager.table.modules.menu.initializeGroup.call(this.groupManager.table.modules.menu,this),this.groupManager.table.options.groupTap&&(n=!1,this.element.addEventListener("touchstart",(e=>{n=!0}),{passive:!0}),this.element.addEventListener("touchend",(e=>{n&&this.groupManager.table.options.groupTap(e,this.getComponent()),n=!1}))),this.groupManager.table.options.groupDblTap&&(e=null,this.element.addEventListener("touchend",(t=>{e?(clearTimeout(e),e=null,this.groupManager.table.options.groupDblTap(t,this.getComponent())):e=setTimeout((()=>{clearTimeout(e),e=null}),300)}))),this.groupManager.table.options.groupTapHold&&(t=null,this.element.addEventListener("touchstart",(e=>{clearTimeout(t),t=setTimeout((()=>{clearTimeout(t),t=null,n=!1,this.groupManager.table.options.groupTapHold(e,this.getComponent())}),1e3)}),{passive:!0}),this.element.addEventListener("touchend",(e=>{clearTimeout(t),t=null}))),this.groupManager.table.options.groupToggleElement&&("arrow"==this.groupManager.table.options.groupToggleElement?this.arrowElement:this.element).addEventListener("click",(e=>{e.stopPropagation(),e.stopImmediatePropagation(),this.toggleVisibility()}))}_createGroup(e,t){var n=t+"_"+e,r=new iA(this.groupManager,this,t,e,this.groupManager.groupIDLookups[t].field,this.groupManager.headerGenerator[t]||this.groupManager.headerGenerator[0],!!this.old&&this.old.groups[n]);this.groups[n]=r,this.groupList.push(r)}_addRowToGroup(e){var t=this.level+1;if(this.hasSubGroups){var n=this.groupManager.groupIDLookups[t].func(e.getData()),r=t+"_"+n;this.groupManager.allowedValues&&this.groupManager.allowedValues[t]?this.groups[r]&&this.groups[r].addRow(e):(this.groups[r]||this._createGroup(n,t),this.groups[r].addRow(e))}}_addRow(e){this.rows.push(e),e.modules.group=this}insertRow(e,t,n){var r=this.conformRowData({});e.updateData(r);var i=this.rows.indexOf(t);i>-1?n?this.rows.splice(i+1,0,e):this.rows.splice(i,0,e):n?this.rows.push(e):this.rows.unshift(e),e.modules.group=this,this.generateGroupHeaderContents(),this.groupManager.table.modExists("columnCalcs")&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modules.columnCalcs.recalcGroup(this),this.groupManager.updateGroupRows(!0)}scrollHeader(e){this.arrowElement.style.marginLeft=e,this.groupList.forEach((function(t){t.scrollHeader(e)}))}getRowIndex(e){}conformRowData(e){return this.field?e[this.field]=this.key:console.warn("Data Conforming Error - Cannot conform row data to match new group as groupBy is a function"),this.parent&&(e=this.parent.conformRowData(e)),e}removeRow(e){var t=this.rows.indexOf(e),n=e.getElement();t>-1&&this.rows.splice(t,1),this.groupManager.table.options.groupValues||this.rows.length?(n.parentNode&&n.parentNode.removeChild(n),this.generateGroupHeaderContents(),this.groupManager.table.modExists("columnCalcs")&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modules.columnCalcs.recalcGroup(this)):(this.parent?this.parent.removeGroup(this):this.groupManager.removeGroup(this),this.groupManager.updateGroupRows(!0))}removeGroup(e){var t,n=e.level+"_"+e.key;this.groups[n]&&(delete this.groups[n],(t=this.groupList.indexOf(e))>-1&&this.groupList.splice(t,1),this.groupList.length||(this.parent?this.parent.removeGroup(this):this.groupManager.removeGroup(this)))}getHeadersAndRows(e){var t=[];return t.push(this),this._visSet(),this.visible?this.groupList.length?this.groupList.forEach((function(n){t=t.concat(n.getHeadersAndRows(e))})):(!e&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.modules.columnCalcs.hasTopCalcs()&&(this.calcs.top&&(this.calcs.top.detachElement(),this.calcs.top.deleteCells()),this.calcs.top=this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows),t.push(this.calcs.top)),t=t.concat(this.rows),!e&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.modules.columnCalcs.hasBottomCalcs()&&(this.calcs.bottom&&(this.calcs.bottom.detachElement(),this.calcs.bottom.deleteCells()),this.calcs.bottom=this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows),t.push(this.calcs.bottom))):this.groupList.length||"table"==this.groupManager.table.options.columnCalcs||this.groupManager.table.modExists("columnCalcs")&&(!e&&this.groupManager.table.modules.columnCalcs.hasTopCalcs()&&(this.calcs.top&&(this.calcs.top.detachElement(),this.calcs.top.deleteCells()),this.groupManager.table.options.groupClosedShowCalcs&&(this.calcs.top=this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows),t.push(this.calcs.top))),!e&&this.groupManager.table.modules.columnCalcs.hasBottomCalcs()&&(this.calcs.bottom&&(this.calcs.bottom.detachElement(),this.calcs.bottom.deleteCells()),this.groupManager.table.options.groupClosedShowCalcs&&(this.calcs.bottom=this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows),t.push(this.calcs.bottom)))),t}getData(e,t){var n=[];return this._visSet(),(!e||e&&this.visible)&&this.rows.forEach((e=>{n.push(e.getData(t||"data"))})),n}getRowCount(){var e=0;return this.groupList.length?this.groupList.forEach((t=>{e+=t.getRowCount()})):e=this.rows.length,e}toggleVisibility(){this.visible?this.hide():this.show()}hide(){this.visible=!1,"classic"!=this.groupManager.table.rowManager.getRenderMode()||this.groupManager.table.options.pagination?this.groupManager.updateGroupRows(!0):(this.element.classList.remove("tabulator-group-visible"),this.groupList.length?this.groupList.forEach((e=>{e.getHeadersAndRows().forEach((e=>{e.detachElement()}))})):this.rows.forEach((e=>{var t=e.getElement();t.parentNode.removeChild(t)})),this.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(),this.groupManager.getDisplayIndex()),this.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth()),this.groupManager.table.externalEvents.dispatch("groupVisibilityChanged",this.getComponent(),!1)}show(){if(this.visible=!0,"classic"!=this.groupManager.table.rowManager.getRenderMode()||this.groupManager.table.options.pagination)this.groupManager.updateGroupRows(!0);else{this.element.classList.add("tabulator-group-visible");var e=this.getElement();this.groupList.length?this.groupList.forEach((t=>{t.getHeadersAndRows().forEach((t=>{var n=t.getElement();e.parentNode.insertBefore(n,e.nextSibling),t.initialize(),e=n}))})):this.rows.forEach((t=>{var n=t.getElement();e.parentNode.insertBefore(n,e.nextSibling),t.initialize(),e=n})),this.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(),this.groupManager.getDisplayIndex()),this.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth()}this.groupManager.table.externalEvents.dispatch("groupVisibilityChanged",this.getComponent(),!0)}_visSet(){var e=[];"function"==typeof this.visible&&(this.rows.forEach((function(t){e.push(t.getData())})),this.visible=this.visible(this.key,this.getRowCount(),e,this.getComponent()))}getRowGroup(e){var t=!1;return this.groupList.length?this.groupList.forEach((function(n){var r=n.getRowGroup(e);r&&(t=r)})):this.rows.find((function(t){return t===e}))&&(t=this),t}getSubGroups(e){var t=[];return this.groupList.forEach((function(n){t.push(e?n.getComponent():n)})),t}getRows(e){var t=[];return this.rows.forEach((function(n){t.push(e?n.getComponent():n)})),t}generateGroupHeaderContents(){var e=[];for(this.rows.forEach((function(t){e.push(t.getData())})),this.elementContents=this.generator(this.key,this.getRowCount(),e,this.getComponent());this.element.firstChild;)this.element.removeChild(this.element.firstChild);"string"==typeof this.elementContents?this.element.innerHTML=this.elementContents:this.element.appendChild(this.elementContents),this.element.insertBefore(this.arrowElement,this.element.firstChild)}getPath(e=[]){return e.unshift(this.key),this.parent&&this.parent.getPath(e),e}getElement(){this.addBindingsd=!1,this._visSet(),this.visible?this.element.classList.add("tabulator-group-visible"):this.element.classList.remove("tabulator-group-visible");for(var e=0;e<this.element.childNodes.length;++e)this.element.childNodes[e].parentNode.removeChild(this.element.childNodes[e]);return this.generateGroupHeaderContents(),this.element}detachElement(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)}normalizeHeight(){this.setHeight(this.element.clientHeight)}initialize(e){this.initialized&&!e||(this.normalizeHeight(),this.initialized=!0)}reinitialize(){this.initialized=!1,this.height=0,ED.elVisible(this.element)&&this.initialize(!0)}setHeight(e){this.height!=e&&(this.height=e,this.outerHeight=this.element.offsetHeight)}getHeight(){return this.outerHeight}getGroup(){return this}reinitializeHeight(){}calcHeight(){}setCellHeight(){}clearCellHeight(){}deinitializeHeight(){}getComponent(){return this.component||(this.component=new rA(this)),this.component}}class oA extends MD{constructor(e){super(e),this.groupIDLookups=!1,this.startOpen=[function(){return!1}],this.headerGenerator=[function(){return""}],this.groupList=[],this.allowedValues=!1,this.groups={},this.displayIndex=0,this.displayHandler=this.getRows.bind(this),this.registerTableOption("groupBy",!1),this.registerTableOption("groupStartOpen",!0),this.registerTableOption("groupValues",!1),this.registerTableOption("groupUpdateOnCellEdit",!1),this.registerTableOption("groupHeader",!1),this.registerTableOption("groupHeaderPrint",null),this.registerTableOption("groupHeaderClipboard",null),this.registerTableOption("groupHeaderHtmlOutput",null),this.registerTableOption("groupHeaderDownload",null),this.registerTableOption("groupToggleElement","arrow"),this.registerTableOption("groupClosedShowCalcs",!1),this.registerTableFunction("setGroupBy",this.setGroupBy.bind(this)),this.registerTableFunction("setGroupValues",this.setGroupValues.bind(this)),this.registerTableFunction("setGroupStartOpen",this.setGroupStartOpen.bind(this)),this.registerTableFunction("setGroupHeader",this.setGroupHeader.bind(this)),this.registerTableFunction("getGroups",this.userGetGroups.bind(this)),this.registerTableFunction("getGroupedData",this.userGetGroupedData.bind(this)),this.registerComponentFunction("row","getGroup",this.rowGetGroup.bind(this))}initialize(){this.table.options.groupBy&&(this.configureGroupSetup(),this.table.options.groupUpdateOnCellEdit&&(this.subscribe("cell-value-updated",this.cellUpdated.bind(this)),this.subscribe("row-data-changed",this.reassignRowToGroup.bind(this),0)),this.subscribe("row-deleting",this.rowDeleting.bind(this)),this.subscribe("row-deleted",this.rowsUpdated.bind(this)),this.subscribe("scroll-horizontal",this.scrollHeaders.bind(this)),this.subscribe("rows-wipe",this.wipe.bind(this)),this.subscribe("rows-added",this.rowsUpdated.bind(this)),this.subscribe("row-moving",this.rowMoving.bind(this)),this.subscribe("row-adding-index",this.rowAddingIndex.bind(this)),this.subscribe("rows-sample",this.rowSample.bind(this)),this.subscribe("render-virtual-fill",this.virtualRenderFill.bind(this)),this.registerDisplayHandler(this.displayHandler,20),this.initialized=!0)}configureGroupSetup(){if(this.table.options.groupBy){var e=this.table.options.groupBy,t=this.table.options.groupStartOpen,n=this.table.options.groupHeader;if(this.allowedValues=this.table.options.groupValues,Array.isArray(e)&&Array.isArray(n)&&e.length>n.length&&console.warn("Error creating group headers, groupHeader array is shorter than groupBy array"),this.headerGenerator=[function(){return""}],this.startOpen=[function(){return!1}],this.langBind("groups|item",((e,t)=>{this.headerGenerator[0]=(n,r,i)=>(void 0===n?"":n)+"<span>("+r+" "+(1===r?e:t.groups.items)+")</span>"})),this.groupIDLookups=[],Array.isArray(e)||e)this.table.modExists("columnCalcs")&&"table"!=this.table.options.columnCalcs&&"both"!=this.table.options.columnCalcs&&this.table.modules.columnCalcs.removeCalcs();else if(this.table.modExists("columnCalcs")&&"group"!=this.table.options.columnCalcs)this.table.columnManager.getRealColumns().forEach((e=>{e.definition.topCalc&&this.table.modules.columnCalcs.initializeTopRow(),e.definition.bottomCalc&&this.table.modules.columnCalcs.initializeBottomRow()}));Array.isArray(e)||(e=[e]),e.forEach(((e,t)=>{var n,r;n="function"==typeof e?e:(r=this.table.columnManager.getColumnByField(e))?function(e){return r.getFieldValue(e)}:function(t){return t[e]},this.groupIDLookups.push({field:"function"!=typeof e&&e,func:n,values:!!this.allowedValues&&this.allowedValues[t]})})),t&&(Array.isArray(t)||(t=[t]),t.forEach((e=>{})),this.startOpen=t),n&&(this.headerGenerator=Array.isArray(n)?n:[n])}}rowSample(e,t){var n=this.getGroups(!1)[0];return t.push(n.getRows(!1)[0]),t}virtualRenderFill(){var e=this.table.rowManager.tableElement,t=this.table.rowManager.getVisibleRows();t=t.filter((e=>"group"!==e.type)),e.style.minWidth=t.length?"":this.table.columnManager.getWidth()+"px"}rowAddingIndex(e,t,n){this.assignRowToGroup(e);var r=e.modules.group.rows;return r.length>1&&(!t||t&&-1==r.indexOf(t)?n?r[0]!==e&&(t=r[0],this.table.rowManager.moveRowInArray(e.modules.group.rows,e,t,!n)):r[r.length-1]!==e&&(t=r[r.length-1],this.table.rowManager.moveRowInArray(e.modules.group.rows,e,t,!n)):this.table.rowManager.moveRowInArray(e.modules.group.rows,e,t,!n)),t}trackChanges(){this.dispatch("group-changed")}setGroupBy(e){this.table.options.groupBy=e,this.configureGroupSetup(),this.refreshData(),this.trackChanges()}setGroupValues(e){this.table.options.groupValues=e,this.configureGroupSetup(),this.refreshData(),this.trackChanges()}setGroupStartOpen(e){this.table.options.groupStartOpen=e,this.configureGroupSetup(),this.table.options.groupBy?(this.refreshData(),this.trackChanges()):console.warn("Grouping Update - cant refresh view, no groups have been set")}setGroupHeader(e){this.table.options.groupHeader=e,this.configureGroupSetup(),this.table.options.groupBy?(this.refreshData(),this.trackChanges()):console.warn("Grouping Update - cant refresh view, no groups have been set")}userGetGroups(e){return this.getGroups(!0)}userGetGroupedData(){return this.table.options.groupBy?this.getGroupedData():this.getData()}rowGetGroup(e){return!!e.modules.group&&e.modules.group.getComponent()}rowMoving(e,t,n){!n&&t instanceof iA&&(t=this.table.rowManager.prevDisplayRow(e)||t);var r=t instanceof iA?t:t.modules.group,i=e instanceof iA?e:e.modules.group;r===i?this.table.rowManager.moveRowInArray(r.rows,e,t,n):(i&&i.removeRow(e),r.insertRow(e,t,n))}rowDeleting(e){e.modules.group&&e.modules.group.removeRow(e)}rowsUpdated(e){this.updateGroupRows(!0)}cellUpdated(e){this.reassignRowToGroup(e.row)}setDisplayIndex(e){this.displayIndex=e}getDisplayIndex(){return this.displayIndex}getRows(e){return this.table.options.groupBy&&this.groupIDLookups.length?(this.dispatchExternal("dataGrouping"),this.generateGroups(e),this.subscribedExternal("dataGrouped")&&this.dispatchExternal("dataGrouped",this.getGroups(!0)),this.updateGroupRows()):e.slice(0)}getGroups(e){var t=[];return this.groupList.forEach((function(n){t.push(e?n.getComponent():n)})),t}getChildGroups(e){var t=[];return e||(e=this),e.groupList.forEach((e=>{e.groupList.length?t=t.concat(this.getChildGroups(e)):t.push(e)})),t}wipe(){this.groupList.forEach((function(e){e.wipe()}))}pullGroupListData(e){var t=[];return e.forEach((e=>{var n={level:0,rowCount:0,headerContent:""},r=[];e.hasSubGroups?(r=this.pullGroupListData(e.groupList),n.level=e.level,n.rowCount=r.length-e.groupList.length,n.headerContent=e.generator(e.key,n.rowCount,e.rows,e),t.push(n),t=t.concat(r)):(n.level=e.level,n.headerContent=e.generator(e.key,e.rows.length,e.rows,e),n.rowCount=e.getRows().length,t.push(n),e.getRows().forEach((e=>{t.push(e.getData("data"))})))})),t}getGroupedData(){return this.pullGroupListData(this.groupList)}getRowGroup(e){var t=!1;return this.groupList.forEach((n=>{var r=n.getRowGroup(e);r&&(t=r)})),t}countGroups(){return this.groupList.length}generateGroups(e){var t=this.groups;this.groups={},this.groupList=[],this.allowedValues&&this.allowedValues[0]?(this.allowedValues[0].forEach((e=>{this.createGroup(e,0,t)})),e.forEach((e=>{this.assignRowToExistingGroup(e,t)}))):e.forEach((e=>{this.assignRowToGroup(e,t)}))}createGroup(e,t,n){var r,i=t+"_"+e;n=n||[],r=new iA(this,!1,t,e,this.groupIDLookups[0].field,this.headerGenerator[0],n[i]),this.groups[i]=r,this.groupList.push(r)}assignRowToExistingGroup(e,t){var n="0_"+this.groupIDLookups[0].func(e.getData());this.groups[n]&&this.groups[n].addRow(e)}assignRowToGroup(e,t){var n=this.groupIDLookups[0].func(e.getData()),r=!this.groups["0_"+n];return r&&this.createGroup(n,0,t),this.groups["0_"+n].addRow(e),!r}reassignRowToGroup(e){if("row"===e.type){var t=e.modules.group,n=t.getPath(),r=this.getExpectedPath(e),i=n.length==r.length&&n.every(((e,t)=>e===r[t]));i||(t.removeRow(e),this.assignRowToGroup(e,this.groups),this.refreshData(!0))}}getExpectedPath(e){var t=[],n=e.getData();return this.groupIDLookups.forEach((e=>{t.push(e.func(n))})),t}updateGroupRows(e){var t=[];return this.groupList.forEach((e=>{t=t.concat(e.getHeadersAndRows())})),e&&this.refreshData(!0,this.displayHandler),t}scrollHeaders(e){"virtual"===this.table.options.renderHorizontal&&(e-=this.table.columnManager.renderer.vDomPadLeft),e+="px",this.groupList.forEach((t=>{t.scrollHeader(e)}))}removeGroup(e){var t,n=e.level+"_"+e.key;this.groups[n]&&(delete this.groups[n],(t=this.groupList.indexOf(e))>-1&&this.groupList.splice(t,1))}}oA.moduleName="groupRows";class aA extends MD{constructor(e){super(e),this.history=[],this.index=-1,this.registerTableOption("history",!1)}initialize(){this.table.options.history&&(this.subscribe("cell-value-updated",this.cellUpdated.bind(this)),this.subscribe("cell-delete",this.clearComponentHistory.bind(this)),this.subscribe("row-delete",this.rowDeleted.bind(this)),this.subscribe("rows-wipe",this.clear.bind(this)),this.subscribe("row-added",this.rowAdded.bind(this)),this.subscribe("row-move",this.rowMoved.bind(this))),this.registerTableFunction("undo",this.undo.bind(this)),this.registerTableFunction("redo",this.redo.bind(this)),this.registerTableFunction("getHistoryUndoSize",this.getHistoryUndoSize.bind(this)),this.registerTableFunction("getHistoryRedoSize",this.getHistoryRedoSize.bind(this)),this.registerTableFunction("clearHistory",this.clear.bind(this))}rowMoved(e,t,n){this.action("rowMove",e,{posFrom:this.table.rowManager.getRowPosition(e),posTo:this.table.rowManager.getRowPosition(t),to:t,after:n})}rowAdded(e,t,n,r){this.action("rowAdd",e,{data:t,pos:n,index:r})}rowDeleted(e){var t,n;this.table.options.groupBy?(t=(n=e.getComponent().getGroup().rows).indexOf(e))&&(t=n[t-1]):(t=e.table.rowManager.getRowIndex(e))&&(t=e.table.rowManager.rows[t-1]),this.action("rowDelete",e,{data:e.getData(),pos:!t,index:t})}cellUpdated(e){this.action("cellEdit",e,{oldValue:e.oldValue,newValue:e.value})}clear(){this.history=[],this.index=-1}action(e,t,n){this.history=this.history.slice(0,this.index+1),this.history.push({type:e,component:t,data:n}),this.index++}getHistoryUndoSize(){return this.index+1}getHistoryRedoSize(){return this.history.length-(this.index+1)}clearComponentHistory(e){var t=this.history.findIndex((function(t){return t.component===e}));t>-1&&(this.history.splice(t,1),t<=this.index&&this.index--,this.clearComponentHistory(e))}undo(){if(this.index>-1){let e=this.history[this.index];return aA.undoers[e.type].call(this,e),this.index--,this.dispatchExternal("historyUndo",e.type,e.component.getComponent(),e.data),!0}return console.warn("History Undo Error - No more history to undo"),!1}redo(){if(this.history.length-1>this.index){this.index++;let e=this.history[this.index];return aA.redoers[e.type].call(this,e),this.dispatchExternal("historyRedo",e.type,e.component.getComponent(),e.data),!0}return console.warn("History Redo Error - No more history to redo"),!1}_rebindRow(e,t){this.history.forEach((function(n){if(n.component instanceof FD)n.component===e&&(n.component=t);else if(n.component instanceof ID&&n.component.row===e){var r=n.component.column.getField();r&&(n.component=t.getCell(r))}}))}}aA.moduleName="history",aA.undoers={cellEdit:function(e){e.component.setValueProcessData(e.data.oldValue),e.component.cellRendered()},rowAdd:function(e){e.component.deleteActual()},rowDelete:function(e){var t=this.table.rowManager.addRowActual(e.data.data,e.data.pos,e.data.index);this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.updateGroupRows(!0),this._rebindRow(e.component,t)},rowMove:function(e){this.table.rowManager.moveRowActual(e.component,this.table.rowManager.rows[e.data.posFrom],!e.data.after),this.table.rowManager.redraw()}},aA.redoers={cellEdit:function(e){e.component.setValueProcessData(e.data.newValue),e.component.cellRendered()},rowAdd:function(e){var t=this.table.rowManager.addRowActual(e.data.data,e.data.pos,e.data.index);this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.updateGroupRows(!0),this._rebindRow(e.component,t)},rowDelete:function(e){e.component.deleteActual()},rowMove:function(e){this.table.rowManager.moveRowActual(e.component,this.table.rowManager.rows[e.data.posTo],e.data.after),this.table.rowManager.redraw()}};class sA extends MD{constructor(e){super(e),this.fieldIndex=[],this.hasIndex=!1}initialize(){this.tableElementCheck()}tableElementCheck(){this.table.originalElement&&"TABLE"===this.table.originalElement.tagName&&this.parseTable()}parseTable(){var e=this.table.originalElement,t=this.table.options,n=(t.columns,e.getElementsByTagName("th")),r=e.getElementsByTagName("tbody")[0],i=[];this.hasIndex=!1,this.dispatchExternal("htmlImporting"),r=r?r.getElementsByTagName("tr"):[],this._extractOptions(e,t),n.length?this._extractHeaders(n,r):this._generateBlankHeaders(n,r);for(var o=0;o<r.length;o++){var a=r[o].getElementsByTagName("td"),s={};this.hasIndex||(s[t.index]=o);for(var l=0;l<a.length;l++){var u=a[l];void 0!==this.fieldIndex[l]&&(s[this.fieldIndex[l]]=u.innerHTML)}i.push(s)}t.data=i,this.dispatchExternal("htmlImported")}_extractOptions(e,t,n){var r=e.attributes,i=n?Object.assign([],n):Object.keys(t),o={};for(var a in i.forEach((e=>{o[e.toLowerCase()]=e})),r){var s,l=r[a];l&&"object"==typeof l&&l.name&&0===l.name.indexOf("tabulator-")&&(s=l.name.replace("tabulator-",""),void 0!==o[s]&&(t[o[s]]=this._attribValue(l.value)))}}_attribValue(e){return"true"===e||"false"!==e&&e}_findCol(e){return this.table.options.columns.find((t=>t.title===e))||!1}_extractHeaders(e,t){for(var n=0;n<e.length;n++){var r,i=e[n],o=!1,a=this._findCol(i.textContent);a?o=!0:a={title:i.textContent.trim()},a.field||(a.field=i.textContent.trim().toLowerCase().replace(" ","_")),(r=i.getAttribute("width"))&&!a.width&&(a.width=r),i.attributes,this._extractOptions(i,a,YD.prototype.defaultOptionList),this.fieldIndex[n]=a.field,a.field==this.table.options.index&&(this.hasIndex=!0),o||this.table.options.columns.push(a)}}_generateBlankHeaders(e,t){for(var n=0;n<e.length;n++){var r=e[n],i={title:"",field:"col"+n};this.fieldIndex[n]=i.field;var o=r.getAttribute("width");o&&(i.width=o),this.table.options.columns.push(i)}}}sA.moduleName="htmlTableImport";class lA extends MD{constructor(e){super(e),this.eventMap={rowClick:"row-click",rowDblClick:"row-dblclick",rowContext:"row-contextmenu",rowMouseEnter:"row-mouseenter",rowMouseLeave:"row-mouseleave",rowMouseOver:"row-mouseover",rowMouseOut:"row-mouseout",rowMouseMove:"row-mousemove",rowTap:"row",rowDblTap:"row",rowTapHold:"row",cellClick:"cell-click",cellDblClick:"cell-dblclick",cellContext:"cell-contextmenu",cellMouseEnter:"cell-mouseenter",cellMouseLeave:"cell-mouseleave",cellMouseOver:"cell-mouseover",cellMouseOut:"cell-mouseout",cellMouseMove:"cell-mousemove",cellTap:"cell",cellDblTap:"cell",cellTapHold:"cell",headerClick:"column-click",headerDblClick:"column-dblclick",headerContext:"column-contextmenu",headerMouseEnter:"column-mouseenter",headerMouseLeave:"column-mouseleave",headerMouseOver:"column-mouseover",headerMouseOut:"column-mouseout",headerMouseMove:"column-mousemove",headerTap:"column",headerDblTap:"column",headerTapHold:"column",groupClick:"group-click",groupDblClick:"group-dblclick",groupContext:"group-contextmenu",groupMouseEnter:"group-mouseenter",groupMouseLeave:"group-mouseleave",groupMouseOver:"group-mouseover",groupMouseOut:"group-mouseout",groupMouseMove:"group-mousemove",groupTap:"group",groupDblTap:"group",groupTapHold:"group"},this.subscribers={},this.touchSubscribers={},this.columnSubscribers={},this.touchWatchers={row:{tap:null,tapDbl:null,tapHold:null},cell:{tap:null,tapDbl:null,tapHold:null},column:{tap:null,tapDbl:null,tapHold:null}},this.registerColumnOption("headerClick"),this.registerColumnOption("headerDblClick"),this.registerColumnOption("headerContext"),this.registerColumnOption("headerMouseEnter"),this.registerColumnOption("headerMouseLeave"),this.registerColumnOption("headerMouseOver"),this.registerColumnOption("headerMouseOut"),this.registerColumnOption("headerMouseMove"),this.registerColumnOption("headerTap"),this.registerColumnOption("headerDblTap"),this.registerColumnOption("headerTapHold"),this.registerColumnOption("cellClick"),this.registerColumnOption("cellDblClick"),this.registerColumnOption("cellContext"),this.registerColumnOption("cellMouseEnter"),this.registerColumnOption("cellMouseLeave"),this.registerColumnOption("cellMouseOver"),this.registerColumnOption("cellMouseOut"),this.registerColumnOption("cellMouseMove"),this.registerColumnOption("cellTap"),this.registerColumnOption("cellDblTap"),this.registerColumnOption("cellTapHold")}initialize(){this.initializeExternalEvents(),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("cell-dblclick",this.cellContentsSelectionFixer.bind(this))}cellContentsSelectionFixer(e,t){if(!this.table.modExists("edit")||this.table.modules.edit.currentCell!==this){e.preventDefault();try{if(document.selection)(n=document.body.createTextRange()).moveToElementText(this.element),n.select();else if(window.getSelection){var n;(n=document.createRange()).selectNode(this.element),window.getSelection().removeAllRanges(),window.getSelection().addRange(n)}}catch(e){}}}initializeExternalEvents(){for(let e in this.eventMap)this.subscriptionChangeExternal(e,this.subscriptionChanged.bind(this,e))}subscriptionChanged(e,t){t?this.subscribers[e]||(this.eventMap[e].includes("-")?(this.subscribers[e]=this.handle.bind(this,e),this.subscribe(this.eventMap[e],this.subscribers[e])):this.subscribeTouchEvents(e)):this.eventMap[e].includes("-")?!this.subscribers[e]||this.columnSubscribers[e]||this.subscribedExternal(e)||(this.unsubscribe(this.eventMap[e],this.subscribers[e]),delete this.subscribers[e]):this.unsubscribeTouchEvents(e)}subscribeTouchEvents(e){var t=this.eventMap[e];this.touchSubscribers[t+"-touchstart"]||(this.touchSubscribers[t+"-touchstart"]=this.handleTouch.bind(this,t,"start"),this.touchSubscribers[t+"-touchend"]=this.handleTouch.bind(this,t,"end"),this.subscribe(t+"-touchstart",this.touchSubscribers[t+"-touchstart"]),this.subscribe(t+"-touchend",this.touchSubscribers[t+"-touchend"])),this.subscribers[e]=!0}unsubscribeTouchEvents(e){var t=!0,n=this.eventMap[e];if(this.subscribers[e]&&!this.subscribedExternal(e)){delete this.subscribers[e];for(let e in this.eventMap)this.eventMap[e]===n&&this.subscribers[e]&&(t=!1);t&&(this.unsubscribe(n+"-touchstart",this.touchSubscribers[n+"-touchstart"]),this.unsubscribe(n+"-touchend",this.touchSubscribers[n+"-touchend"]),delete this.touchSubscribers[n+"-touchstart"],delete this.touchSubscribers[n+"-touchend"])}}initializeColumn(e){var t=e.definition;for(let n in this.eventMap)t[n]&&(this.subscriptionChanged(n,!0),this.columnSubscribers[n]||(this.columnSubscribers[n]=[]),this.columnSubscribers[n].push(e))}handle(e,t,n){this.dispatchEvent(e,t,n)}handleTouch(e,t,n,r){var i=this.touchWatchers[e];switch("column"===e&&(e="header"),t){case"start":i.tap=!0,clearTimeout(i.tapHold),i.tapHold=setTimeout((()=>{clearTimeout(i.tapHold),i.tapHold=null,i.tap=null,clearTimeout(i.tapDbl),i.tapDbl=null,this.dispatchEvent(e+"TapHold",n,r)}),1e3);break;case"end":i.tap&&(i.tap=null,this.dispatchEvent(e+"Tap",n,r)),i.tapDbl?(clearTimeout(i.tapDbl),i.tapDbl=null,this.dispatchEvent(e+"DblTap",n,r)):i.tapDbl=setTimeout((()=>{clearTimeout(i.tapDbl),i.tapDbl=null}),300),clearTimeout(i.tapHold),i.tapHold=null}}dispatchEvent(e,t,n){var r,i=n.getComponent();this.columnSubscribers[e]&&(n instanceof ID?r=n.column.definition[e]:n instanceof YD&&(r=n.definition[e]),r&&r(t,i)),this.dispatchExternal(e,t,i)}}lA.moduleName="interaction";class uA extends MD{constructor(e){super(e),this.watchKeys=null,this.pressedKeys=null,this.keyupBinding=!1,this.keydownBinding=!1,this.registerTableOption("keybindings",[]),this.registerTableOption("tabEndNewRow",!1)}initialize(){var e=this.table.options.keybindings,t={};if(this.watchKeys={},this.pressedKeys=[],!1!==e){for(let e in uA.bindings)t[e]=uA.bindings[e];if(Object.keys(e).length)for(let n in e)t[n]=e[n];this.mapBindings(t),this.bindEvents()}this.subscribe("table-destroy",this.clearBindings.bind(this))}mapBindings(e){for(let t in e)uA.actions[t]?e[t]&&("object"!=typeof e[t]&&(e[t]=[e[t]]),e[t].forEach((e=>{this.mapBinding(t,e)}))):console.warn("Key Binding Error - no such action:",t)}mapBinding(e,t){var n={action:uA.actions[e],keys:[],ctrl:!1,shift:!1,meta:!1};t.toString().toLowerCase().split(" ").join("").split("+").forEach((e=>{switch(e){case"ctrl":n.ctrl=!0;break;case"shift":n.shift=!0;break;case"meta":n.meta=!0;break;default:e=parseInt(e),n.keys.push(e),this.watchKeys[e]||(this.watchKeys[e]=[]),this.watchKeys[e].push(n)}}))}bindEvents(){var e=this;this.keyupBinding=function(t){var n=t.keyCode,r=e.watchKeys[n];r&&(e.pressedKeys.push(n),r.forEach((function(n){e.checkBinding(t,n)})))},this.keydownBinding=function(t){var n=t.keyCode;if(e.watchKeys[n]){var r=e.pressedKeys.indexOf(n);r>-1&&e.pressedKeys.splice(r,1)}},this.table.element.addEventListener("keydown",this.keyupBinding),this.table.element.addEventListener("keyup",this.keydownBinding)}clearBindings(){this.keyupBinding&&this.table.element.removeEventListener("keydown",this.keyupBinding),this.keydownBinding&&this.table.element.removeEventListener("keyup",this.keydownBinding)}checkBinding(e,t){var n=!0;return e.ctrlKey==t.ctrl&&e.shiftKey==t.shift&&e.metaKey==t.meta&&(t.keys.forEach((e=>{-1==this.pressedKeys.indexOf(e)&&(n=!1)})),n&&t.action.call(this,e),!0)}}uA.moduleName="keybindings",uA.bindings={navPrev:"shift + 9",navNext:9,navUp:38,navDown:40,scrollPageUp:33,scrollPageDown:34,scrollToStart:36,scrollToEnd:35,undo:"ctrl + 90",redo:"ctrl + 89",copyToClipboard:"ctrl + 67"},uA.actions={keyBlock:function(e){e.stopPropagation(),e.preventDefault()},scrollPageUp:function(e){var t=this.table.rowManager,n=t.scrollTop-t.element.clientHeight;t.element.scrollHeight;e.preventDefault(),t.displayRowsCount&&(n>=0?t.element.scrollTop=n:t.scrollToRow(t.getDisplayRows()[0])),this.table.element.focus()},scrollPageDown:function(e){var t=this.table.rowManager,n=t.scrollTop+t.element.clientHeight,r=t.element.scrollHeight;e.preventDefault(),t.displayRowsCount&&(n<=r?t.element.scrollTop=n:t.scrollToRow(t.getDisplayRows()[t.displayRowsCount-1])),this.table.element.focus()},scrollToStart:function(e){var t=this.table.rowManager;e.preventDefault(),t.displayRowsCount&&t.scrollToRow(t.getDisplayRows()[0]),this.table.element.focus()},scrollToEnd:function(e){var t=this.table.rowManager;e.preventDefault(),t.displayRowsCount&&t.scrollToRow(t.getDisplayRows()[t.displayRowsCount-1]),this.table.element.focus()},navPrev:function(e){this.dispatch("keybinding-nav-prev",e)},navNext:function(e){this.dispatch("keybinding-nav-next",e)},navLeft:function(e){this.dispatch("keybinding-nav-left",e)},navRight:function(e){this.dispatch("keybinding-nav-right",e)},navUp:function(e){this.dispatch("keybinding-nav-up",e)},navDown:function(e){this.dispatch("keybinding-nav-down",e)},undo:function(e){this.table.options.history&&this.table.modExists("history")&&this.table.modExists("edit")&&(this.table.modules.edit.currentCell||(e.preventDefault(),this.table.modules.history.undo()))},redo:function(e){this.table.options.history&&this.table.modExists("history")&&this.table.modExists("edit")&&(this.table.modules.edit.currentCell||(e.preventDefault(),this.table.modules.history.redo()))},copyToClipboard:function(e){this.table.modules.edit.currentCell||this.table.modExists("clipboard",!0)&&this.table.modules.clipboard.copy(!1,!0)}};class cA extends MD{constructor(e){super(e),this.menuElements=[],this.blurEvent=this.hideMenu.bind(this),this.escEvent=this.escMenu.bind(this),this.nestedMenuBlock=!1,this.positionReversedX=!1,this.registerTableOption("rowContextMenu",!1),this.registerTableOption("rowClickMenu",!1),this.registerTableOption("groupContextMenu",!1),this.registerTableOption("groupClickMenu",!1),this.registerColumnOption("headerContextMenu"),this.registerColumnOption("headerMenu"),this.registerColumnOption("contextMenu"),this.registerColumnOption("clickMenu")}initialize(){this.subscribe("cell-layout",this.layoutCell.bind(this)),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("row-init",this.initializeRow.bind(this))}layoutCell(e){(e.column.definition.contextMenu||e.column.definition.clickMenu)&&this.initializeCell(e)}initializeColumn(e){var t=e.definition;(t.headerContextMenu||t.headerClickMenu||t.headerMenu)&&this.initializeColumnHeader(e)}initializeColumnHeader(e){var t;e.definition.headerContextMenu&&(e.getElement().addEventListener("contextmenu",this.LoadMenuEvent.bind(this,e,e.definition.headerContextMenu)),this.tapHold(e,e.definition.headerContextMenu)),e.definition.headerMenu&&((t=document.createElement("span")).classList.add("tabulator-header-menu-button"),t.innerHTML="&vellip;",t.addEventListener("click",(t=>{t.stopPropagation(),t.preventDefault(),this.LoadMenuEvent(e,e.definition.headerMenu,t)})),e.titleElement.insertBefore(t,e.titleElement.firstChild))}LoadMenuEvent(e,t,n){t="function"==typeof t?t.call(this.table,e.getComponent(),n):t,this.loadMenu(n,e,t)}tapHold(e,t){var n=e.getElement(),r=null,i=!1;n.addEventListener("touchstart",(n=>{clearTimeout(r),i=!1,r=setTimeout((()=>{clearTimeout(r),r=null,i=!0,this.LoadMenuEvent(e,t,n)}),1e3)}),{passive:!0}),n.addEventListener("touchend",(e=>{clearTimeout(r),r=null,i&&e.preventDefault()}))}initializeCell(e){e.column.definition.contextMenu&&(e.getElement(!0).addEventListener("contextmenu",this.LoadMenuEvent.bind(this,e,e.column.definition.contextMenu)),this.tapHold(e,e.column.definition.contextMenu)),e.column.definition.clickMenu&&e.getElement(!0).addEventListener("click",this.LoadMenuEvent.bind(this,e,e.column.definition.clickMenu))}initializeRow(e){this.table.options.rowContextMenu&&(e.getElement().addEventListener("contextmenu",this.LoadMenuEvent.bind(this,e,this.table.options.rowContextMenu)),this.tapHold(e,this.table.options.rowContextMenu)),this.table.options.rowClickMenu&&e.getElement().addEventListener("click",this.LoadMenuEvent.bind(this,e,this.table.options.rowClickMenu))}initializeGroup(e){this.table.options.groupContextMenu&&(e.getElement().addEventListener("contextmenu",this.LoadMenuEvent.bind(this,e,this.table.options.groupContextMenu)),this.tapHold(e,this.table.options.groupContextMenu)),this.table.options.groupClickMenu&&e.getElement().addEventListener("click",this.LoadMenuEvent.bind(this,e,this.table.options.groupClickMenu))}loadMenu(e,t,n,r){var i=!(e instanceof MouseEvent),o=document.createElement("div");if(o.classList.add("tabulator-menu"),i||e.preventDefault(),n&&n.length){if(!r){if(this.nestedMenuBlock){if(this.isOpen())return}else this.nestedMenuBlock=setTimeout((()=>{this.nestedMenuBlock=!1}),100);this.hideMenu(),this.menuElements=[]}n.forEach((e=>{var n=document.createElement("div"),r=e.label,i=e.disabled;e.separator?n.classList.add("tabulator-menu-separator"):(n.classList.add("tabulator-menu-item"),"function"==typeof r&&(r=r.call(this.table,t.getComponent())),r instanceof Node?n.appendChild(r):n.innerHTML=r,"function"==typeof i&&(i=i.call(this.table,t.getComponent())),i?(n.classList.add("tabulator-menu-item-disabled"),n.addEventListener("click",(e=>{e.stopPropagation()}))):e.menu&&e.menu.length?n.addEventListener("click",(r=>{r.stopPropagation(),this.hideOldSubMenus(o),this.loadMenu(r,t,e.menu,n)})):e.action&&n.addEventListener("click",(n=>{e.action(n,t.getComponent())})),e.menu&&e.menu.length&&n.classList.add("tabulator-menu-item-submenu")),o.appendChild(n)})),o.addEventListener("click",(e=>{this.hideMenu()})),this.menuElements.push(o),this.positionMenu(o,r,i,e)}}hideOldSubMenus(e){var t=this.menuElements.indexOf(e);if(t>-1)for(let e=this.menuElements.length-1;e>t;e--){var n=this.menuElements[e];n.parentNode&&n.parentNode.removeChild(n),this.menuElements.pop()}}positionMenu(e,t,n,r){var i,o,a,s=Math.max(document.body.offsetHeight,window.innerHeight);t?(i=(a=ED.elOffset(t)).left+t.offsetWidth,o=a.top-1):(i=n?r.touches[0].pageX:r.pageX,o=n?r.touches[0].pageY:r.pageY,this.positionReversedX=!1),e.style.top=o+"px",e.style.left=i+"px",setTimeout((()=>{this.table.rowManager.element.addEventListener("scroll",this.blurEvent),document.body.addEventListener("click",this.blurEvent),document.body.addEventListener("contextmenu",this.blurEvent),window.addEventListener("resize",this.blurEvent),document.body.addEventListener("keydown",this.escEvent)}),100),document.body.appendChild(e),o+e.offsetHeight>=s&&(e.style.top="",e.style.bottom=t?s-a.top-t.offsetHeight-1+"px":s-o+"px"),(i+e.offsetWidth>=document.body.offsetWidth||this.positionReversedX)&&(e.style.left="",e.style.right=t?document.documentElement.offsetWidth-a.left+"px":document.documentElement.offsetWidth-i+"px",this.positionReversedX=!0)}isOpen(){return!!this.menuElements.length}escMenu(e){27==e.keyCode&&this.hideMenu()}hideMenu(){this.menuElements.forEach((e=>{e.parentNode&&e.parentNode.removeChild(e)})),document.body.removeEventListener("keydown",this.escEvent),document.body.removeEventListener("click",this.blurEvent),document.body.removeEventListener("contextmenu",this.blurEvent),window.removeEventListener("resize",this.blurEvent),this.table.rowManager.element.removeEventListener("scroll",this.blurEvent)}}cA.moduleName="menu";class dA extends MD{constructor(e){super(e),this.placeholderElement=this.createPlaceholderElement(),this.hoverElement=!1,this.checkTimeout=!1,this.checkPeriod=250,this.moving=!1,this.toCol=!1,this.toColAfter=!1,this.startX=0,this.autoScrollMargin=40,this.autoScrollStep=5,this.autoScrollTimeout=!1,this.touchMove=!1,this.moveHover=this.moveHover.bind(this),this.endMove=this.endMove.bind(this),this.registerTableOption("movableColumns",!1)}createPlaceholderElement(){var e=document.createElement("div");return e.classList.add("tabulator-col"),e.classList.add("tabulator-col-placeholder"),e}initialize(){this.subscribe("column-init",this.initializeColumn.bind(this))}initializeColumn(e){var t,n=this,r={};e.modules.frozen||(t=e.getElement(),r.mousemove=function(r){e.parent===n.moving.parent&&((n.touchMove?r.touches[0].pageX:r.pageX)-ED.elOffset(t).left+n.table.columnManager.element.scrollLeft>e.getWidth()/2?n.toCol===e&&n.toColAfter||(t.parentNode.insertBefore(n.placeholderElement,t.nextSibling),n.moveColumn(e,!0)):(n.toCol!==e||n.toColAfter)&&(t.parentNode.insertBefore(n.placeholderElement,t),n.moveColumn(e,!1)))}.bind(n),t.addEventListener("mousedown",(function(t){n.touchMove=!1,1===t.which&&(n.checkTimeout=setTimeout((function(){n.startMove(t,e)}),n.checkPeriod))})),t.addEventListener("mouseup",(function(e){1===e.which&&n.checkTimeout&&clearTimeout(n.checkTimeout)})),n.bindTouchEvents(e)),e.modules.moveColumn=r}bindTouchEvents(e){var t,n,r,i,o,a,s=e.getElement(),l=!1;s.addEventListener("touchstart",(s=>{this.checkTimeout=setTimeout((()=>{this.touchMove=!0,t=e.nextColumn(),r=t?t.getWidth()/2:0,n=e.prevColumn(),i=n?n.getWidth()/2:0,o=0,a=0,l=!1,this.startMove(s,e)}),this.checkPeriod)}),{passive:!0}),s.addEventListener("touchmove",(s=>{var u,c;this.moving&&(this.moveHover(s),l||(l=s.touches[0].pageX),(u=s.touches[0].pageX-l)>0?t&&u-o>r&&(c=t)!==e&&(l=s.touches[0].pageX,c.getElement().parentNode.insertBefore(this.placeholderElement,c.getElement().nextSibling),this.moveColumn(c,!0)):n&&-u-a>i&&(c=n)!==e&&(l=s.touches[0].pageX,c.getElement().parentNode.insertBefore(this.placeholderElement,c.getElement()),this.moveColumn(c,!1)),c&&(t=c.nextColumn(),o=r,r=t?t.getWidth()/2:0,n=c.prevColumn(),a=i,i=n?n.getWidth()/2:0))}),{passive:!0}),s.addEventListener("touchend",(e=>{this.checkTimeout&&clearTimeout(this.checkTimeout),this.moving&&this.endMove(e)}))}startMove(e,t){var n=t.getElement(),r=this.table.columnManager.getElement(),i=this.table.columnManager.getHeadersElement();this.moving=t,this.startX=(this.touchMove?e.touches[0].pageX:e.pageX)-ED.elOffset(n).left,this.table.element.classList.add("tabulator-block-select"),this.placeholderElement.style.width=t.getWidth()+"px",this.placeholderElement.style.height=t.getHeight()+"px",n.parentNode.insertBefore(this.placeholderElement,n),n.parentNode.removeChild(n),this.hoverElement=n.cloneNode(!0),this.hoverElement.classList.add("tabulator-moving"),this.table.columnManager.getElement().appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.bottom=r.clientHeight-i.offsetHeight+"px",this.touchMove||(this._bindMouseMove(),document.body.addEventListener("mousemove",this.moveHover),document.body.addEventListener("mouseup",this.endMove)),this.moveHover(e)}_bindMouseMove(){this.table.columnManager.columnsByIndex.forEach((function(e){e.modules.moveColumn.mousemove&&e.getElement().addEventListener("mousemove",e.modules.moveColumn.mousemove)}))}_unbindMouseMove(){this.table.columnManager.columnsByIndex.forEach((function(e){e.modules.moveColumn.mousemove&&e.getElement().removeEventListener("mousemove",e.modules.moveColumn.mousemove)}))}moveColumn(e,t){var n=this.moving.getCells();this.toCol=e,this.toColAfter=t,t?e.getCells().forEach((function(e,t){var r=e.getElement(!0);r.parentNode&&n[t]&&r.parentNode.insertBefore(n[t].getElement(),r.nextSibling)})):e.getCells().forEach((function(e,t){var r=e.getElement(!0);r.parentNode&&n[t]&&r.parentNode.insertBefore(n[t].getElement(),r)}))}endMove(e){(1===e.which||this.touchMove)&&(this._unbindMouseMove(),this.placeholderElement.parentNode.insertBefore(this.moving.getElement(),this.placeholderElement.nextSibling),this.placeholderElement.parentNode.removeChild(this.placeholderElement),this.hoverElement.parentNode.removeChild(this.hoverElement),this.table.element.classList.remove("tabulator-block-select"),this.toCol&&this.table.columnManager.moveColumnActual(this.moving,this.toCol,this.toColAfter),this.moving=!1,this.toCol=!1,this.toColAfter=!1,this.touchMove||(document.body.removeEventListener("mousemove",this.moveHover),document.body.removeEventListener("mouseup",this.endMove)))}moveHover(e){var t,n=this.table.columnManager.getElement(),r=n.scrollLeft,i=(this.touchMove?e.touches[0].pageX:e.pageX)-ED.elOffset(n).left+r;this.hoverElement.style.left=i-this.startX+"px",i-r<this.autoScrollMargin&&(this.autoScrollTimeout||(this.autoScrollTimeout=setTimeout((()=>{t=Math.max(0,r-5),this.table.rowManager.getElement().scrollLeft=t,this.autoScrollTimeout=!1}),1))),r+n.clientWidth-i<this.autoScrollMargin&&(this.autoScrollTimeout||(this.autoScrollTimeout=setTimeout((()=>{t=Math.min(n.clientWidth,r+5),this.table.rowManager.getElement().scrollLeft=t,this.autoScrollTimeout=!1}),1)))}}dA.moduleName="moveColumn";class hA extends MD{constructor(e){super(e),this.placeholderElement=this.createPlaceholderElement(),this.hoverElement=!1,this.checkTimeout=!1,this.checkPeriod=150,this.moving=!1,this.toRow=!1,this.toRowAfter=!1,this.hasHandle=!1,this.startY=0,this.startX=0,this.moveHover=this.moveHover.bind(this),this.endMove=this.endMove.bind(this),this.tableRowDropEvent=!1,this.touchMove=!1,this.connection=!1,this.connectionSelectorsTables=!1,this.connectionSelectorsElements=!1,this.connectionElements=[],this.connections=[],this.connectedTable=!1,this.connectedRow=!1,this.registerTableOption("movableRows",!1),this.registerTableOption("movableRowsConnectedTables",!1),this.registerTableOption("movableRowsConnectedElements",!1),this.registerTableOption("movableRowsSender",!1),this.registerTableOption("movableRowsReceiver","insert"),this.registerColumnOption("rowHandle")}createPlaceholderElement(){var e=document.createElement("div");return e.classList.add("tabulator-row"),e.classList.add("tabulator-row-placeholder"),e}initialize(){this.table.options.movableRows&&(this.connectionSelectorsTables=this.table.options.movableRowsConnectedTables,this.connectionSelectorsElements=this.table.options.movableRowsConnectedElements,this.connection=this.connectionSelectorsTables||this.connectionSelectorsElements,this.subscribe("cell-init",this.initializeCell.bind(this)),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("row-init",this.initializeRow.bind(this)))}initializeGroupHeader(e){var t=this,n={};n.mouseup=function(e){t.tableRowDrop(e,row)}.bind(t),n.mousemove=function(n){var r;n.pageY-ED.elOffset(e.element).top+t.table.rowManager.element.scrollTop>e.getHeight()/2?t.toRow===e&&t.toRowAfter||((r=e.getElement()).parentNode.insertBefore(t.placeholderElement,r.nextSibling),t.moveRow(e,!0)):(t.toRow!==e||t.toRowAfter)&&(r=e.getElement()).previousSibling&&(r.parentNode.insertBefore(t.placeholderElement,r),t.moveRow(e,!1))}.bind(t),e.modules.moveRow=n}initializeRow(e){var t,n=this,r={};r.mouseup=function(t){n.tableRowDrop(t,e)}.bind(n),r.mousemove=function(t){var r=e.getElement();t.pageY-ED.elOffset(r).top+n.table.rowManager.element.scrollTop>e.getHeight()/2?n.toRow===e&&n.toRowAfter||(r.parentNode.insertBefore(n.placeholderElement,r.nextSibling),n.moveRow(e,!0)):(n.toRow!==e||n.toRowAfter)&&(r.parentNode.insertBefore(n.placeholderElement,r),n.moveRow(e,!1))}.bind(n),this.hasHandle||((t=e.getElement()).addEventListener("mousedown",(function(t){1===t.which&&(n.checkTimeout=setTimeout((function(){n.startMove(t,e)}),n.checkPeriod))})),t.addEventListener("mouseup",(function(e){1===e.which&&n.checkTimeout&&clearTimeout(n.checkTimeout)})),this.bindTouchEvents(e,e.getElement())),e.modules.moveRow=r}initializeColumn(e){e.definition.rowHandle&&!1!==this.table.options.movableRows&&(this.hasHandle=!0)}initializeCell(e){if(e.column.definition.rowHandle&&!1!==this.table.options.movableRows){var t=this,n=e.getElement(!0);n.addEventListener("mousedown",(function(n){1===n.which&&(t.checkTimeout=setTimeout((function(){t.startMove(n,e.row)}),t.checkPeriod))})),n.addEventListener("mouseup",(function(e){1===e.which&&t.checkTimeout&&clearTimeout(t.checkTimeout)})),this.bindTouchEvents(e.row,n)}}bindTouchEvents(e,t){var n,r,i,o,a,s,l=!1;t.addEventListener("touchstart",(t=>{this.checkTimeout=setTimeout((()=>{this.touchMove=!0,n=e.nextRow(),i=n?n.getHeight()/2:0,r=e.prevRow(),o=r?r.getHeight()/2:0,a=0,s=0,l=!1,this.startMove(t,e)}),this.checkPeriod)}),{passive:!0}),this.moving,this.toRow,this.toRowAfter,t.addEventListener("touchmove",(t=>{var u,c;this.moving&&(t.preventDefault(),this.moveHover(t),l||(l=t.touches[0].pageY),(u=t.touches[0].pageY-l)>0?n&&u-a>i&&(c=n)!==e&&(l=t.touches[0].pageY,c.getElement().parentNode.insertBefore(this.placeholderElement,c.getElement().nextSibling),this.moveRow(c,!0)):r&&-u-s>o&&(c=r)!==e&&(l=t.touches[0].pageY,c.getElement().parentNode.insertBefore(this.placeholderElement,c.getElement()),this.moveRow(c,!1)),c&&(n=c.nextRow(),a=i,i=n?n.getHeight()/2:0,r=c.prevRow(),s=o,o=r?r.getHeight()/2:0))})),t.addEventListener("touchend",(e=>{this.checkTimeout&&clearTimeout(this.checkTimeout),this.moving&&(this.endMove(e),this.touchMove=!1)}))}_bindMouseMove(){this.table.rowManager.getDisplayRows().forEach((e=>{("row"===e.type||"group"===e.type)&&e.modules.moveRow&&e.modules.moveRow.mousemove&&e.getElement().addEventListener("mousemove",e.modules.moveRow.mousemove)}))}_unbindMouseMove(){this.table.rowManager.getDisplayRows().forEach((e=>{("row"===e.type||"group"===e.type)&&e.modules.moveRow&&e.modules.moveRow.mousemove&&e.getElement().removeEventListener("mousemove",e.modules.moveRow.mousemove)}))}startMove(e,t){var n=t.getElement();this.setStartPosition(e,t),this.moving=t,this.table.element.classList.add("tabulator-block-select"),this.placeholderElement.style.width=t.getWidth()+"px",this.placeholderElement.style.height=t.getHeight()+"px",this.connection?(this.table.element.classList.add("tabulator-movingrow-sending"),this.connectToTables(t)):(n.parentNode.insertBefore(this.placeholderElement,n),n.parentNode.removeChild(n)),this.hoverElement=n.cloneNode(!0),this.hoverElement.classList.add("tabulator-moving"),this.connection?(document.body.appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.top="0",this.hoverElement.style.width=this.table.element.clientWidth+"px",this.hoverElement.style.whiteSpace="nowrap",this.hoverElement.style.overflow="hidden",this.hoverElement.style.pointerEvents="none"):(this.table.rowManager.getTableElement().appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.top="0",this._bindMouseMove()),document.body.addEventListener("mousemove",this.moveHover),document.body.addEventListener("mouseup",this.endMove),this.moveHover(e)}setStartPosition(e,t){var n,r,i=this.touchMove?e.touches[0].pageX:e.pageX,o=this.touchMove?e.touches[0].pageY:e.pageY;n=t.getElement(),this.connection?(r=n.getBoundingClientRect(),this.startX=r.left-i+window.pageXOffset,this.startY=r.top-o+window.pageYOffset):this.startY=o-n.getBoundingClientRect().top}endMove(e){e&&1!==e.which&&!this.touchMove||(this._unbindMouseMove(),this.connection||(this.placeholderElement.parentNode.insertBefore(this.moving.getElement(),this.placeholderElement.nextSibling),this.placeholderElement.parentNode.removeChild(this.placeholderElement)),this.hoverElement.parentNode.removeChild(this.hoverElement),this.table.element.classList.remove("tabulator-block-select"),this.toRow&&this.table.rowManager.moveRow(this.moving,this.toRow,this.toRowAfter),this.moving=!1,this.toRow=!1,this.toRowAfter=!1,document.body.removeEventListener("mousemove",this.moveHover),document.body.removeEventListener("mouseup",this.endMove),this.connection&&(this.table.element.classList.remove("tabulator-movingrow-sending"),this.disconnectFromTables()))}moveRow(e,t){this.toRow=e,this.toRowAfter=t}moveHover(e){this.connection?this.moveHoverConnections.call(this,e):this.moveHoverTable.call(this,e)}moveHoverTable(e){var t=this.table.rowManager.getElement(),n=t.scrollTop,r=(this.touchMove?e.touches[0].pageY:e.pageY)-t.getBoundingClientRect().top+n;this.hoverElement.style.top=r-this.startY+"px"}moveHoverConnections(e){this.hoverElement.style.left=this.startX+(this.touchMove?e.touches[0].pageX:e.pageX)+"px",this.hoverElement.style.top=this.startY+(this.touchMove?e.touches[0].pageY:e.pageY)+"px"}elementRowDrop(e,t,n){this.dispatchExternal("movableRowsElementDrop",e,t,!!n&&n.getComponent())}connectToTables(e){var t;this.connectionSelectorsTables&&(t=this.commsConnections(this.connectionSelectorsTables),this.dispatchExternal("movableRowsSendingStart",t),this.commsSend(this.connectionSelectorsTables,"moveRow","connect",{row:e})),this.connectionSelectorsElements&&(this.connectionElements=[],Array.isArray(this.connectionSelectorsElements)||(this.connectionSelectorsElements=[this.connectionSelectorsElements]),this.connectionSelectorsElements.forEach((e=>{"string"==typeof e?this.connectionElements=this.connectionElements.concat(Array.prototype.slice.call(document.querySelectorAll(e))):this.connectionElements.push(e)})),this.connectionElements.forEach((e=>{var t=t=>{this.elementRowDrop(t,e,this.moving)};e.addEventListener("mouseup",t),e.tabulatorElementDropEvent=t,e.classList.add("tabulator-movingrow-receiving")})))}disconnectFromTables(){var e;this.connectionSelectorsTables&&(e=this.commsConnections(this.connectionSelectorsTables),this.dispatchExternal("movableRowsSendingStop",e),this.commsSend(this.connectionSelectorsTables,"moveRow","disconnect")),this.connectionElements.forEach((e=>{e.classList.remove("tabulator-movingrow-receiving"),e.removeEventListener("mouseup",e.tabulatorElementDropEvent),delete e.tabulatorElementDropEvent}))}connect(e,t){return this.connectedTable?(console.warn("Move Row Error - Table cannot accept connection, already connected to table:",this.connectedTable),!1):(this.connectedTable=e,this.connectedRow=t,this.table.element.classList.add("tabulator-movingrow-receiving"),this.table.rowManager.getDisplayRows().forEach((e=>{"row"===e.type&&e.modules.moveRow&&e.modules.moveRow.mouseup&&e.getElement().addEventListener("mouseup",e.modules.moveRow.mouseup)})),this.tableRowDropEvent=this.tableRowDrop.bind(this),this.table.element.addEventListener("mouseup",this.tableRowDropEvent),this.dispatchExternal("movableRowsReceivingStart",t,e),!0)}disconnect(e){e===this.connectedTable?(this.connectedTable=!1,this.connectedRow=!1,this.table.element.classList.remove("tabulator-movingrow-receiving"),this.table.rowManager.getDisplayRows().forEach((e=>{"row"===e.type&&e.modules.moveRow&&e.modules.moveRow.mouseup&&e.getElement().removeEventListener("mouseup",e.modules.moveRow.mouseup)})),this.table.element.removeEventListener("mouseup",this.tableRowDropEvent),this.dispatchExternal("movableRowsReceivingStop",e)):console.warn("Move Row Error - trying to disconnect from non connected table")}dropComplete(e,t,n){var r=!1;if(n){switch(typeof this.table.options.movableRowsSender){case"string":r=this.senders[this.table.options.movableRowsSender];break;case"function":r=this.table.options.movableRowsSender}r?r.call(this,this.moving.getComponent(),t?t.getComponent():void 0,e):this.table.options.movableRowsSender&&console.warn("Mover Row Error - no matching sender found:",this.table.options.movableRowsSender),this.dispatchExternal("movableRowsSent",this.moving.getComponent(),t?t.getComponent():void 0,e)}else this.dispatchExternal("movableRowsSentFailed",this.moving.getComponent(),t?t.getComponent():void 0,e);this.endMove()}tableRowDrop(e,t){var n=!1,r=!1;switch(e.stopImmediatePropagation(),typeof this.table.options.movableRowsReceiver){case"string":n=this.receivers[this.table.options.movableRowsReceiver];break;case"function":n=this.table.options.movableRowsReceiver}n?r=n.call(this,this.connectedRow.getComponent(),t?t.getComponent():void 0,this.connectedTable):console.warn("Mover Row Error - no matching receiver found:",this.table.options.movableRowsReceiver),r?this.dispatchExternal("movableRowsReceived",this.connectedRow.getComponent(),t?t.getComponent():void 0,this.connectedTable):this.dispatchExternal("movableRowsReceivedFailed",this.connectedRow.getComponent(),t?t.getComponent():void 0,this.connectedTable),this.commsSend(this.connectedTable,"moveRow","dropcomplete",{row:t,success:r})}commsReceived(e,t,n){switch(t){case"connect":return this.connect(e,n.row);case"disconnect":return this.disconnect(e);case"dropcomplete":return this.dropComplete(e,n.row,n.success)}}}hA.prototype.receivers={insert:function(e,t,n){return this.table.addRow(e.getData(),void 0,t),!0},add:function(e,t,n){return this.table.addRow(e.getData()),!0},update:function(e,t,n){return!!t&&(t.update(e.getData()),!0)},replace:function(e,t,n){return!!t&&(this.table.addRow(e.getData(),void 0,t),t.delete(),!0)}},hA.prototype.senders={delete:function(e,t,n){e.delete()}},hA.moduleName="moveRow";class fA extends MD{constructor(e){super(e),this.allowedTypes=["","data","edit","clipboard"],this.enabled=!0,this.registerColumnOption("mutator"),this.registerColumnOption("mutatorParams"),this.registerColumnOption("mutatorData"),this.registerColumnOption("mutatorDataParams"),this.registerColumnOption("mutatorEdit"),this.registerColumnOption("mutatorEditParams"),this.registerColumnOption("mutatorClipboard"),this.registerColumnOption("mutatorClipboardParams")}initialize(){this.subscribe("cell-value-changing",this.transformCell.bind(this)),this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("row-data-init-before",this.rowDataChanged.bind(this)),this.subscribe("row-data-changing",this.rowDataChanged.bind(this))}rowDataChanged(e,t,n){return this.transformRow(t,"data",n)}initializeColumn(e){var t=!1,n={};this.allowedTypes.forEach((r=>{var i,o="mutator"+(r.charAt(0).toUpperCase()+r.slice(1));e.definition[o]&&(i=this.lookupMutator(e.definition[o]))&&(t=!0,n[o]={mutator:i,params:e.definition[o+"Params"]||{}})})),t&&(e.modules.mutate=n)}lookupMutator(e){var t=!1;switch(typeof e){case"string":fA.mutators[e]?t=fA.mutators[e]:console.warn("Mutator Error - No such mutator found, ignoring: ",e);break;case"function":t=e}return t}transformRow(e,t,n){var r,i="mutator"+(t.charAt(0).toUpperCase()+t.slice(1));return this.enabled&&this.table.columnManager.traverse((o=>{var a,s,l;o.modules.mutate&&(a=o.modules.mutate[i]||o.modules.mutate.mutator||!1)&&(r=o.getFieldValue(void 0!==n?n:e),"data"!=t&&void 0===r||(l=o.getComponent(),s="function"==typeof a.params?a.params(r,e,t,l):a.params,o.setFieldValue(e,a.mutator(r,e,t,s,l))))})),e}transformCell(e,t){if(e.column.modules.mutate){var n=e.column.modules.mutate.mutatorEdit||e.column.modules.mutate.mutator||!1,r={};if(n)return r=Object.assign(r,e.row.getData()),e.column.setFieldValue(r,t),n.mutator(t,r,"edit",n.params,e.getComponent())}return t}enable(){this.enabled=!0}disable(){this.enabled=!1}}fA.moduleName="mutator",fA.mutators={};class pA extends MD{constructor(e){super(e),this.mode="local",this.progressiveLoad=!1,this.size=0,this.page=1,this.count=5,this.max=1,this.displayIndex=0,this.initialLoad=!0,this.dataChanging=!1,this.pageSizes=[],this.dataReceivedNames={},this.dataSentNames={},this.registerTableOption("pagination",!1),this.registerTableOption("paginationMode","local"),this.registerTableOption("paginationSize",!1),this.registerTableOption("paginationInitialPage",1),this.registerTableOption("paginationButtonCount",5),this.registerTableOption("paginationSizeSelector",!1),this.registerTableOption("paginationElement",!1),this.registerTableOption("paginationAddRow","page"),this.registerTableOption("progressiveLoad",!1),this.registerTableOption("progressiveLoadDelay",0),this.registerTableOption("progressiveLoadScrollMargin",0),this.registerTableFunction("setMaxPage",this.setMaxPage.bind(this)),this.registerTableFunction("setPage",this.setPage.bind(this)),this.registerTableFunction("setPageToRow",this.userSetPageToRow.bind(this)),this.registerTableFunction("setPageSize",this.userSetPageSize.bind(this)),this.registerTableFunction("getPageSize",this.getPageSize.bind(this)),this.registerTableFunction("previousPage",this.previousPage.bind(this)),this.registerTableFunction("nextPage",this.nextPage.bind(this)),this.registerTableFunction("getPage",this.getPage.bind(this)),this.registerTableFunction("getPageMax",this.getPageMax.bind(this)),this.registerComponentFunction("row","pageTo",this.setPageToRow.bind(this))}initialize(){this.table.options.pagination?(this.subscribe("row-deleted",this.rowsUpdated.bind(this)),this.subscribe("row-adding-position",this.rowAddingPosition.bind(this)),this.subscribe("row-added",this.rowsUpdated.bind(this)),this.subscribe("data-processed",this.initialLoadComplete.bind(this)),this.subscribe("table-built",this.calculatePageSizes.bind(this)),"remote"===this.table.options.paginationMode&&(this.subscribe("data-params",this.remotePageParams.bind(this)),this.subscribe("data-loaded",this._parseRemoteData.bind(this))),this.table.options.progressiveLoad&&console.error("Progressive Load Error - Pagination and progressive load cannot be used at the same time"),this.registerDisplayHandler(this.restOnRenderBefore.bind(this),40),this.registerDisplayHandler(this.getRows.bind(this),50),this.createElements(),this.initializePaginator()):this.table.options.progressiveLoad&&(this.subscribe("data-params",this.remotePageParams.bind(this)),this.subscribe("data-loaded",this._parseRemoteData.bind(this)),this.subscribe("table-built",this.calculatePageSizes.bind(this)),this.initializeProgressive(this.table.options.progressiveLoad),"scroll"===this.table.options.progressiveLoad&&this.subscribe("scroll-vertical",this.scrollVertical.bind(this)))}rowAddingPosition(e,t){var n,r=this.table.rowManager,i=r.getDisplayRows();return t?i.length?n=i[0]:r.activeRows.length&&(n=r.activeRows[r.activeRows.length-1],t=!1):i.length&&(n=i[i.length-1],t=!(i.length<this.size)),{index:n,top:t}}calculatePageSizes(){var e,t;this.table.options.paginationSize?this.size=this.table.options.paginationSize:((e=document.createElement("div")).classList.add("tabulator-row"),e.style.visibility="hidden",(t=document.createElement("div")).classList.add("tabulator-cell"),t.innerHTML="Page Row Test",e.appendChild(t),this.table.rowManager.getTableElement().appendChild(e),this.size=Math.floor(this.table.rowManager.getElement().clientHeight/e.offsetHeight),this.table.rowManager.getTableElement().removeChild(e)),this.generatePageSizeSelectList()}initialLoadComplete(){this.initialLoad=!1}remotePageParams(e,t,n,r){return this.initialLoad||(this.progressiveLoad&&!n||!this.progressiveLoad&&!this.dataChanging)&&this.reset(!0),r.page=this.page,this.size&&(r.size=this.size),r}userSetPageToRow(e){return this.table.options.pagination&&(e=this.rowManager.findRow(e))?this.setPageToRow(e):Promise.reject()}userSetPageSize(e){return!!this.table.options.pagination&&(this.setPageSize(e),this.setPage(1))}scrollVertical(e,t){var n;t||this.table.dataLoader.loading||(n=this.table.rowManager.getElement()).scrollHeight-n.clientHeight-e<(this.table.options.progressiveLoadScrollMargin||2*n.clientHeight)&&this.nextPage()}restOnRenderBefore(e,t){return t||"local"===this.mode&&this.reset(),e}rowsUpdated(){this.refreshData(!0,"all")}createElements(){var e;this.element=document.createElement("span"),this.element.classList.add("tabulator-paginator"),this.pagesElement=document.createElement("span"),this.pagesElement.classList.add("tabulator-pages"),(e=document.createElement("button")).classList.add("tabulator-page"),e.setAttribute("type","button"),e.setAttribute("role","button"),e.setAttribute("aria-label",""),e.setAttribute("title",""),this.firstBut=e.cloneNode(!0),this.firstBut.setAttribute("data-page","first"),this.prevBut=e.cloneNode(!0),this.prevBut.setAttribute("data-page","prev"),this.nextBut=e.cloneNode(!0),this.nextBut.setAttribute("data-page","next"),this.lastBut=e.cloneNode(!0),this.lastBut.setAttribute("data-page","last"),this.table.options.paginationSizeSelector&&(this.pageSizeSelect=document.createElement("select"),this.pageSizeSelect.classList.add("tabulator-page-size"))}generatePageSizeSelectList(){var e=[];if(this.pageSizeSelect){if(Array.isArray(this.table.options.paginationSizeSelector))e=this.table.options.paginationSizeSelector,this.pageSizes=e,-1==this.pageSizes.indexOf(this.size)&&e.unshift(this.size);else if(-1==this.pageSizes.indexOf(this.size)){e=[];for(let t=1;t<5;t++)e.push(this.size*t);this.pageSizes=e}else e=this.pageSizes;for(;this.pageSizeSelect.firstChild;)this.pageSizeSelect.removeChild(this.pageSizeSelect.firstChild);e.forEach((e=>{var t=document.createElement("option");t.value=e,!0===e?this.langBind("pagination|all",(function(e){t.innerHTML=e})):t.innerHTML=e,this.pageSizeSelect.appendChild(t)})),this.pageSizeSelect.value=this.size}}initializePaginator(e){var t;e||(this.langBind("pagination|first",(e=>{this.firstBut.innerHTML=e})),this.langBind("pagination|first_title",(e=>{this.firstBut.setAttribute("aria-label",e),this.firstBut.setAttribute("title",e)})),this.langBind("pagination|prev",(e=>{this.prevBut.innerHTML=e})),this.langBind("pagination|prev_title",(e=>{this.prevBut.setAttribute("aria-label",e),this.prevBut.setAttribute("title",e)})),this.langBind("pagination|next",(e=>{this.nextBut.innerHTML=e})),this.langBind("pagination|next_title",(e=>{this.nextBut.setAttribute("aria-label",e),this.nextBut.setAttribute("title",e)})),this.langBind("pagination|last",(e=>{this.lastBut.innerHTML=e})),this.langBind("pagination|last_title",(e=>{this.lastBut.setAttribute("aria-label",e),this.lastBut.setAttribute("title",e)})),this.firstBut.addEventListener("click",(()=>{this.setPage(1)})),this.prevBut.addEventListener("click",(()=>{this.previousPage()})),this.nextBut.addEventListener("click",(()=>{this.nextPage()})),this.lastBut.addEventListener("click",(()=>{this.setPage(this.max)})),this.table.options.paginationElement&&(this.element=this.table.options.paginationElement),this.pageSizeSelect&&(t=document.createElement("label"),this.langBind("pagination|page_size",(e=>{this.pageSizeSelect.setAttribute("aria-label",e),this.pageSizeSelect.setAttribute("title",e),t.innerHTML=e})),this.element.appendChild(t),this.element.appendChild(this.pageSizeSelect),this.pageSizeSelect.addEventListener("change",(e=>{this.setPageSize("true"==this.pageSizeSelect.value||this.pageSizeSelect.value),this.setPage(1)}))),this.element.appendChild(this.firstBut),this.element.appendChild(this.prevBut),this.element.appendChild(this.pagesElement),this.element.appendChild(this.nextBut),this.element.appendChild(this.lastBut),this.table.options.paginationElement||e||this.table.footerManager.append(this.element,this),this.page=this.table.options.paginationInitialPage,this.count=this.table.options.paginationButtonCount),this.mode=this.table.options.paginationMode}initializeProgressive(e){this.initializePaginator(!0),this.mode="progressive_"+e,this.progressiveLoad=!0}trackChanges(){this.dispatch("page-changed")}setDisplayIndex(e){this.displayIndex=e}getDisplayIndex(){return this.displayIndex}setMaxRows(e){this.max=e?!0===this.size?1:Math.ceil(e/this.size):1,this.page>this.max&&(this.page=this.max)}reset(e){this.initialLoad||("local"==this.mode||e)&&(this.page=1)}setMaxPage(e){e=parseInt(e),this.max=e||1,this.page>this.max&&(this.page=this.max,this.trigger())}setPage(e){switch(e){case"first":return this.setPage(1);case"prev":return this.previousPage();case"next":return this.nextPage();case"last":return this.setPage(this.max)}return(e=parseInt(e))>0&&e<=this.max||"local"!==this.mode?(this.page=e,this.trackChanges(),this.trigger()):(console.warn("Pagination Error - Requested page is out of range of 1 - "+this.max+":",e),Promise.reject())}setPageToRow(e){var t=this.table.rowManager.getDisplayRows(this.displayIndex-1).indexOf(e);if(t>-1){var n=!0===this.size?1:Math.ceil((t+1)/this.size);return this.setPage(n)}return console.warn("Pagination Error - Requested row is not visible"),Promise.reject()}setPageSize(e){!0!==e&&(e=parseInt(e)),e>0&&(this.size=e),this.pageSizeSelect&&this.generatePageSizeSelectList(),this.trackChanges()}_setPageButtons(){let e=Math.floor((this.count-1)/2),t=Math.ceil((this.count-1)/2),n=this.max-this.page+e+1<this.count?this.max-this.count+1:Math.max(this.page-e,1),r=this.page<=t?Math.min(this.count,this.max):Math.min(this.page+t,this.max);for(;this.pagesElement.firstChild;)this.pagesElement.removeChild(this.pagesElement.firstChild);1==this.page?(this.firstBut.disabled=!0,this.prevBut.disabled=!0):(this.firstBut.disabled=!1,this.prevBut.disabled=!1),this.page==this.max?(this.lastBut.disabled=!0,this.nextBut.disabled=!0):(this.lastBut.disabled=!1,this.nextBut.disabled=!1);for(let e=n;e<=r;e++)e>0&&e<=this.max&&this.pagesElement.appendChild(this._generatePageButton(e));this.footerRedraw()}_generatePageButton(e){var t=document.createElement("button");return t.classList.add("tabulator-page"),e==this.page&&t.classList.add("active"),t.setAttribute("type","button"),t.setAttribute("role","button"),this.langBind("pagination|page_title",(n=>{t.setAttribute("aria-label",n+" "+e),t.setAttribute("title",n+" "+e)})),t.setAttribute("data-page",e),t.textContent=e,t.addEventListener("click",(t=>{this.setPage(e)})),t}previousPage(){return this.page>1?(this.page--,this.trackChanges(),this.trigger()):(console.warn("Pagination Error - Previous page would be less than page 1:",0),Promise.reject())}nextPage(){return this.page<this.max?(this.page++,this.trackChanges(),this.trigger()):(this.progressiveLoad||console.warn("Pagination Error - Next page would be greater than maximum page of "+this.max+":",this.max+1),Promise.reject())}getPage(){return this.page}getPageMax(){return this.max}getPageSize(e){return this.size}getMode(){return this.mode}getRows(e){var t,n,r;if("local"==this.mode){t=[],this.setMaxRows(e.length),!0===this.size?(n=0,r=e.length):r=(n=this.size*(this.page-1))+parseInt(this.size),this._setPageButtons();for(let i=n;i<r;i++)e[i]&&t.push(e[i]);return t}return this._setPageButtons(),e.slice(0)}trigger(){var e;switch(this.mode){case"local":return e=this.table.rowManager.scrollLeft,this.refreshData(),this.table.rowManager.scrollHorizontal(e),this.dispatchExternal("pageLoaded",this.getPage()),Promise.resolve();case"remote":return this.dataChanging=!0,this.reloadData(null).finally((()=>{this.dataChanging=!1}));case"progressive_load":case"progressive_scroll":return this.reloadData(null,!0);default:return console.warn("Pagination Error - no such pagination mode:",this.mode),Promise.reject()}}_parseRemoteData(e){var t;if(void 0===e.last_page&&console.warn("Remote Pagination Error - Server response missing '"+this.dataReceivedNames.last_page+"' property"),e.data){if(this.max=parseInt(e.last_page)||1,this.progressiveLoad){switch(this.mode){case"progressive_load":1==this.page?this.table.rowManager.setData(e.data,!1,1==this.page):this.table.rowManager.addRows(e.data),this.page<this.max&&setTimeout((()=>{this.nextPage()}),this.table.options.progressiveLoadDelay);break;case"progressive_scroll":e=this.table.rowManager.getData().concat(e.data),this.table.rowManager.setData(e,1!==this.page,1==this.page),t=this.table.options.progressiveLoadScrollMargin||2*this.table.rowManager.element.clientHeight,this.table.rowManager.element.scrollHeight<=this.table.rowManager.element.clientHeight+t&&setTimeout((()=>{this.nextPage()}))}return!1}this.dispatchExternal("pageLoaded",this.getPage())}else console.warn("Remote Pagination Error - Server response missing '"+this.dataReceivedNames.data+"' property");return e.data}footerRedraw(){var e=this.table.footerManager.element;Math.ceil(e.clientWidth)-e.scrollWidth<0?this.pagesElement.style.display="none":(this.pagesElement.style.display="",Math.ceil(e.clientWidth)-e.scrollWidth<0&&(this.pagesElement.style.display="none"))}}pA.moduleName="page";var mA={local:function(e,t){var n=localStorage.getItem(e+"-"+t);return!!n&&JSON.parse(n)},cookie:function(e,t){var n,r,i=document.cookie,o=e+"-"+t,a=i.indexOf(o+"=");return a>-1&&((n=(i=i.substr(a)).indexOf(";"))>-1&&(i=i.substr(0,n)),r=i.replace(o+"=","")),!!r&&JSON.parse(r)}},gA={local:function(e,t,n){localStorage.setItem(e+"-"+t,JSON.stringify(n))},cookie:function(e,t,n){var r=new Date;r.setDate(r.getDate()+1e4),document.cookie=e+"-"+t+"="+JSON.stringify(n)+"; expires="+r.toUTCString()}};class vA extends MD{constructor(e){super(e),this.mode="",this.id="",this.defWatcherBlock=!1,this.config={},this.readFunc=!1,this.writeFunc=!1,this.registerTableOption("persistence",!1),this.registerTableOption("persistenceID",""),this.registerTableOption("persistenceMode",!0),this.registerTableOption("persistenceReaderFunc",!1),this.registerTableOption("persistenceWriterFunc",!1)}localStorageTest(){var e="_tabulator_test";try{return window.localStorage.setItem(e,e),window.localStorage.removeItem(e),!0}catch(e){return!1}}initialize(){if(this.table.options.persistence){var e,t=this.table.options.persistenceMode,n=this.table.options.persistenceID;this.mode=!0!==t?t:this.localStorageTest()?"local":"cookie",this.table.options.persistenceReaderFunc?"function"==typeof this.table.options.persistenceReaderFunc?this.readFunc=this.table.options.persistenceReaderFunc:vA.readers[this.table.options.persistenceReaderFunc]?this.readFunc=vA.readers[this.table.options.persistenceReaderFunc]:console.warn("Persistence Read Error - invalid reader set",this.table.options.persistenceReaderFunc):vA.readers[this.mode]?this.readFunc=vA.readers[this.mode]:console.warn("Persistence Read Error - invalid reader set",this.mode),this.table.options.persistenceWriterFunc?"function"==typeof this.table.options.persistenceWriterFunc?this.writeFunc=this.table.options.persistenceWriterFunc:vA.writers[this.table.options.persistenceWriterFunc]?this.writeFunc=vA.writers[this.table.options.persistenceWriterFunc]:console.warn("Persistence Write Error - invalid reader set",this.table.options.persistenceWriterFunc):vA.writers[this.mode]?this.writeFunc=vA.writers[this.mode]:console.warn("Persistence Write Error - invalid writer set",this.mode),this.id="tabulator-"+(n||this.table.element.getAttribute("id")||""),this.config={sort:!0===this.table.options.persistence||this.table.options.persistence.sort,filter:!0===this.table.options.persistence||this.table.options.persistence.filter,group:!0===this.table.options.persistence||this.table.options.persistence.group,page:!0===this.table.options.persistence||this.table.options.persistence.page,columns:!0===this.table.options.persistence?["title","width","visible"]:this.table.options.persistence.columns},this.config.page&&(e=this.retreiveData("page"))&&(void 0===e.paginationSize||!0!==this.config.page&&!this.config.page.size||(this.table.options.paginationSize=e.paginationSize),void 0===e.paginationInitialPage||!0!==this.config.page&&!this.config.page.page||(this.table.options.paginationInitialPage=e.paginationInitialPage)),this.config.group&&(e=this.retreiveData("group"))&&(void 0===e.groupBy||!0!==this.config.group&&!this.config.group.groupBy||(this.table.options.groupBy=e.groupBy),void 0===e.groupStartOpen||!0!==this.config.group&&!this.config.group.groupStartOpen||(this.table.options.groupStartOpen=e.groupStartOpen),void 0===e.groupHeader||!0!==this.config.group&&!this.config.group.groupHeader||(this.table.options.groupHeader=e.groupHeader)),this.config.columns&&(this.table.options.columns=this.load("columns",this.table.options.columns),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("column-show",this.save.bind(this,"columns")),this.subscribe("column-hide",this.save.bind(this,"columns")),this.subscribe("column-moved",this.save.bind(this,"columns")),this.subscribe("table-built",this.tableBuilt.bind(this),0)),this.subscribe("table-redraw",this.tableRedraw.bind(this)),this.subscribe("filter-changed",this.eventSave.bind(this,"filter")),this.subscribe("sort-changed",this.eventSave.bind(this,"sort")),this.subscribe("group-changed",this.eventSave.bind(this,"group")),this.subscribe("page-changed",this.eventSave.bind(this,"page")),this.subscribe("column-resized",this.eventSave.bind(this,"columns")),this.subscribe("layout-refreshed",this.eventSave.bind(this,"columns"))}this.registerTableFunction("getColumnLayout",this.getColumnLayout.bind(this)),this.registerTableFunction("setColumnLayout",this.setColumnLayout.bind(this))}eventSave(e){this.config[e]&&this.save(e)}tableBuilt(){var e,t;this.table.options;this.config.sort&&!1==!(e=this.load("sort"))&&(this.table.initialSort=e),this.config.filter&&!1==!(t=this.load("filter"))&&(this.table.initialFilter=t)}tableRedraw(e){e&&this.config.columns&&this.save("columns")}getColumnLayout(){return this.parseColumns(this.table.columnManager.getColumns())}setColumnLayout(e){return this.table.columnManager.setColumns(this.mergeDefinition(this.table.options.columns,e)),!0}initializeColumn(e){var t;this.config.columns&&(this.defWatcherBlock=!0,t=e.getDefinition(),(!0===this.config.columns?Object.keys(t):this.config.columns).forEach((e=>{var n=Object.getOwnPropertyDescriptor(t,e),r=t[e];n&&Object.defineProperty(t,e,{set:function(e){r=e,this.defWatcherBlock||this.save("columns"),n.set&&n.set(e)},get:function(){return n.get&&n.get(),r}})})),this.defWatcherBlock=!1)}load(e,t){var n=this.retreiveData(e);return t&&(n=n?this.mergeDefinition(t,n):t),n}retreiveData(e){return!!this.readFunc&&this.readFunc(this.id,e)}mergeDefinition(e,t){var n=[];return(t=t||[]).forEach(((t,r)=>{var i,o=this._findColumn(e,t);o&&(!0===this.config.columns||null==this.config.columns?(i=Object.keys(o)).push("width"):i=this.config.columns,i.forEach((e=>{"columns"!==e&&void 0!==t[e]&&(o[e]=t[e])})),o.columns&&(o.columns=this.mergeDefinition(o.columns,t.columns)),n.push(o))})),e.forEach(((e,r)=>{this._findColumn(t,e)||(n.length>r?n.splice(r,0,e):n.push(e))})),n}_findColumn(e,t){var n=t.columns?"group":t.field?"field":"object";return e.find((function(e){switch(n){case"group":return e.title===t.title&&e.columns.length===t.columns.length;case"field":return e.field===t.field;case"object":return e===t}}))}save(e){var t={};switch(e){case"columns":t=this.parseColumns(this.table.columnManager.getColumns());break;case"filter":t=this.table.modules.filter.getFilters();break;case"sort":t=this.validateSorters(this.table.modules.sort.getSort());break;case"group":t=this.getGroupConfig();break;case"page":t=this.getPageConfig()}this.writeFunc&&this.writeFunc(this.id,e,t)}validateSorters(e){return e.forEach((function(e){e.column=e.field,delete e.field})),e}getGroupConfig(){var e={};return this.config.group&&((!0===this.config.group||this.config.group.groupBy)&&(e.groupBy=this.table.options.groupBy),(!0===this.config.group||this.config.group.groupStartOpen)&&(e.groupStartOpen=this.table.options.groupStartOpen),(!0===this.config.group||this.config.group.groupHeader)&&(e.groupHeader=this.table.options.groupHeader)),e}getPageConfig(){var e={};return this.config.page&&((!0===this.config.page||this.config.page.size)&&(e.paginationSize=this.table.modules.page.getPageSize()),(!0===this.config.page||this.config.page.page)&&(e.paginationInitialPage=this.table.modules.page.getPage())),e}parseColumns(e){var t=[],n=["headerContextMenu","headerMenu","contextMenu","clickMenu"];return e.forEach((e=>{var r,i={},o=e.getDefinition();e.isGroup?(i.title=o.title,i.columns=this.parseColumns(e.getColumns())):(i.field=e.getField(),!0===this.config.columns||null==this.config.columns?(r=Object.keys(o)).push("width"):r=this.config.columns,r.forEach((t=>{switch(t){case"width":i.width=e.getWidth();break;case"visible":i.visible=e.visible;break;default:"function"!=typeof o[t]&&-1===n.indexOf(t)&&(i[t]=o[t])}}))),t.push(i)})),t}}vA.moduleName="persistence",vA.readers=mA,vA.writers=gA;class yA extends MD{constructor(e){super(e),this.element=!1,this.manualBlock=!1,this.registerTableOption("printAsHtml",!1),this.registerTableOption("printFormatter",!1),this.registerTableOption("printHeader",!1),this.registerTableOption("printFooter",!1),this.registerTableOption("printStyled",!0),this.registerTableOption("printRowRange","visible"),this.registerTableOption("printConfig",{}),this.registerColumnOption("print"),this.registerColumnOption("titlePrint")}initialize(){this.table.options.printAsHtml&&(window.addEventListener("beforeprint",this.replaceTable.bind(this)),window.addEventListener("afterprint",this.cleanup.bind(this))),this.registerTableFunction("print",this.printFullscreen.bind(this))}replaceTable(){this.manualBlock||(this.element=document.createElement("div"),this.element.classList.add("tabulator-print-table"),this.element.appendChild(this.table.modules.export.genereateTable(this.table.options.printConfig,this.table.options.printStyled,this.table.options.printRowRange,"print")),this.table.element.style.display="none",this.table.element.parentNode.insertBefore(this.element,this.table.element))}cleanup(){document.body.classList.remove("tabulator-print-fullscreen-hide"),this.element&&this.element.parentNode&&(this.element.parentNode.removeChild(this.element),this.table.element.style.display="")}printFullscreen(e,t,n){var r,i,o=window.scrollX,a=window.scrollY,s=document.createElement("div"),l=document.createElement("div"),u=this.table.modules.export.genereateTable(void 0!==n?n:this.table.options.printConfig,void 0!==t?t:this.table.options.printStyled,e||this.table.options.printRowRange,"print");this.manualBlock=!0,this.element=document.createElement("div"),this.element.classList.add("tabulator-print-fullscreen"),this.table.options.printHeader&&(s.classList.add("tabulator-print-header"),"string"==typeof(r="function"==typeof this.table.options.printHeader?this.table.options.printHeader.call(this.table):this.table.options.printHeader)?s.innerHTML=r:s.appendChild(r),this.element.appendChild(s)),this.element.appendChild(u),this.table.options.printFooter&&(l.classList.add("tabulator-print-footer"),"string"==typeof(i="function"==typeof this.table.options.printFooter?this.table.options.printFooter.call(this.table):this.table.options.printFooter)?l.innerHTML=i:l.appendChild(i),this.element.appendChild(l)),document.body.classList.add("tabulator-print-fullscreen-hide"),document.body.appendChild(this.element),this.table.options.printFormatter&&this.table.options.printFormatter(this.element,u),window.print(),this.cleanup(),window.scrollTo(o,a),this.manualBlock=!1}}yA.moduleName="print";class bA extends MD{constructor(e){super(e),this.data=!1,this.blocked=!1,this.origFuncs={},this.currentVersion=0,this.registerTableOption("reactiveData",!1)}initialize(){this.table.options.reactiveData&&(this.subscribe("cell-value-save-before",this.block.bind(this)),this.subscribe("cell-value-save-after",this.unblock.bind(this)),this.subscribe("row-data-save-before",this.block.bind(this)),this.subscribe("row-data-save-after",this.unblock.bind(this)),this.subscribe("row-data-init-after",this.watchRow.bind(this)),this.subscribe("data-processing",this.watchData.bind(this)),this.subscribe("table-destroy",this.unwatchData.bind(this)))}watchData(e){var t,n=this;this.currentVersion++,t=this.currentVersion,this.unwatchData(),this.data=e,this.origFuncs.push=e.push,Object.defineProperty(this.data,"push",{enumerable:!1,configurable:!0,value:function(){var r=Array.from(arguments);return n.blocked||t!==n.currentVersion||r.forEach((e=>{n.table.rowManager.addRowActual(e,!1)})),n.origFuncs.push.apply(e,arguments)}}),this.origFuncs.unshift=e.unshift,Object.defineProperty(this.data,"unshift",{enumerable:!1,configurable:!0,value:function(){var r=Array.from(arguments);return n.blocked||t!==n.currentVersion||r.forEach((e=>{n.table.rowManager.addRowActual(e,!0)})),n.origFuncs.unshift.apply(e,arguments)}}),this.origFuncs.shift=e.shift,Object.defineProperty(this.data,"shift",{enumerable:!1,configurable:!0,value:function(){var r;return n.blocked||t!==n.currentVersion||n.data.length&&(r=n.table.rowManager.getRowFromDataObject(n.data[0]))&&r.deleteActual(),n.origFuncs.shift.call(e)}}),this.origFuncs.pop=e.pop,Object.defineProperty(this.data,"pop",{enumerable:!1,configurable:!0,value:function(){var r;return n.blocked||t!==n.currentVersion||n.data.length&&(r=n.table.rowManager.getRowFromDataObject(n.data[n.data.length-1]))&&r.deleteActual(),n.origFuncs.pop.call(e)}}),this.origFuncs.splice=e.splice,Object.defineProperty(this.data,"splice",{enumerable:!1,configurable:!0,value:function(){var r,i=Array.from(arguments),o=i[0]<0?e.length+i[0]:i[0],a=i[1],s=!!i[2]&&i.slice(2);if(!n.blocked&&t===n.currentVersion){if(s&&((r=!!e[o]&&n.table.rowManager.getRowFromDataObject(e[o]))?s.forEach((e=>{n.table.rowManager.addRowActual(e,!0,r,!0)})):(s=s.slice().reverse()).forEach((e=>{n.table.rowManager.addRowActual(e,!0,!1,!0)}))),0!==a){var l=e.slice(o,void 0===i[1]?i[1]:o+a);l.forEach(((e,t)=>{var r=n.table.rowManager.getRowFromDataObject(e);r&&r.deleteActual(t!==l.length-1)}))}(s||0!==a)&&n.table.rowManager.reRenderInPosition()}return n.origFuncs.splice.apply(e,arguments)}})}unwatchData(){if(!1!==this.data)for(var e in this.origFuncs)Object.defineProperty(this.data,e,{enumerable:!0,configurable:!0,writable:!0,value:this.origFuncs.key})}watchRow(e){var t=e.getData();for(var n in this.blocked=!0,t)this.watchKey(e,t,n);this.table.options.dataTree&&this.watchTreeChildren(e),this.blocked=!1}watchTreeChildren(e){var t=e.getData()[this.table.options.dataTreeChildField],n={};function r(){this.table.modules.dataTree.initializeRow(e),this.table.modules.dataTree.layoutRow(e),this.table.rowManager.refreshActiveData("tree",!1,!0)}t&&(n.push=t.push,Object.defineProperty(t,"push",{enumerable:!1,configurable:!0,value:()=>{var e=n.push.apply(t,arguments);return r(),e}}),n.unshift=t.unshift,Object.defineProperty(t,"unshift",{enumerable:!1,configurable:!0,value:()=>{var e=n.unshift.apply(t,arguments);return r(),e}}),n.shift=t.shift,Object.defineProperty(t,"shift",{enumerable:!1,configurable:!0,value:()=>{var e=n.shift.call(t);return r(),e}}),n.pop=t.pop,Object.defineProperty(t,"pop",{enumerable:!1,configurable:!0,value:()=>{var e=n.pop.call(t);return r(),e}}),n.splice=t.splice,Object.defineProperty(t,"splice",{enumerable:!1,configurable:!0,value:()=>{var e=n.splice.apply(t,arguments);return r(),e}}))}watchKey(e,t,n){var r=Object.getOwnPropertyDescriptor(t,n),i=t[n],o=this.currentVersion;Object.defineProperty(t,n,{set:t=>{if(i=t,!this.blocked&&o===this.currentVersion){var a={};a[n]=t,e.updateData(a)}r.set&&r.set(t)},get:()=>(r.get&&r.get(),i)})}unwatchRow(e){var t=e.getData();for(var n in t)Object.defineProperty(t,n,{value:t[n]})}block(){this.blocked=!0}unblock(){this.blocked=!1}}bA.moduleName="reactiveData";class _A extends MD{constructor(e){super(e),this.startColumn=!1,this.startX=!1,this.startWidth=!1,this.handle=null,this.prevHandle=null,this.registerColumnOption("resizable",!0)}initialize(){this.subscribe("cell-layout",this.layoutCellHandles.bind(this)),this.subscribe("column-init",this.layoutColumnHeader.bind(this))}layoutCellHandles(e){"row"===e.row.type&&this.initializeColumn("cell",e.column,e.element)}layoutColumnHeader(e){this.initializeColumn("header",e,e.element)}initializeColumn(e,t,n){var r=this,i=!1,o=t.definition.resizable;if("header"===e&&(i="textarea"==t.definition.formatter||t.definition.variableHeight,t.modules.resize={variableHeight:i}),!0===o||o==e){var a=document.createElement("div");a.className="tabulator-col-resize-handle";var s=document.createElement("div");s.className="tabulator-col-resize-handle prev",a.addEventListener("click",(function(e){e.stopPropagation()}));var l=function(e){var n=t.getLastColumn();n&&r._checkResizability(n)&&(r.startColumn=t,r._mouseDown(e,n,a))};a.addEventListener("mousedown",l),a.addEventListener("touchstart",l,{passive:!0}),a.addEventListener("dblclick",(function(e){var n=t.getLastColumn();n&&r._checkResizability(n)&&(e.stopPropagation(),n.reinitializeWidth(!0))})),s.addEventListener("click",(function(e){e.stopPropagation()}));var u=function(e){var n,i,o;(n=t.getFirstColumn())&&(o=(i=r.table.columnManager.findColumnIndex(n))>0&&r.table.columnManager.getColumnByIndex(i-1))&&r._checkResizability(o)&&(r.startColumn=t,r._mouseDown(e,o,s))};s.addEventListener("mousedown",u),s.addEventListener("touchstart",u,{passive:!0}),s.addEventListener("dblclick",(function(e){var n,i,o;(n=t.getFirstColumn())&&(o=(i=r.table.columnManager.findColumnIndex(n))>0&&r.table.columnManager.getColumnByIndex(i-1))&&r._checkResizability(o)&&(e.stopPropagation(),o.reinitializeWidth(!0))})),n.appendChild(a),n.appendChild(s)}}_checkResizability(e){return e.definition.resizable}_mouseDown(e,t,n){var r=this;function i(e){r.table.rtl?t.setWidth(r.startWidth-((void 0===e.screenX?e.touches[0].screenX:e.screenX)-r.startX)):t.setWidth(r.startWidth+((void 0===e.screenX?e.touches[0].screenX:e.screenX)-r.startX)),r.table.columnManager.renderer.rerenderColumns(!0),!r.table.browserSlow&&t.modules.resize&&t.modules.resize.variableHeight&&t.checkCellHeights()}function o(e){r.startColumn.modules.edit&&(r.startColumn.modules.edit.blocked=!1),r.table.browserSlow&&t.modules.resize&&t.modules.resize.variableHeight&&t.checkCellHeights(),document.body.removeEventListener("mouseup",o),document.body.removeEventListener("mousemove",i),n.removeEventListener("touchmove",i),n.removeEventListener("touchend",o),r.table.element.classList.remove("tabulator-block-select"),r.dispatch("column-resized",t),r.table.externalEvents.dispatch("columnResized",t.getComponent())}r.table.element.classList.add("tabulator-block-select"),e.stopPropagation(),r.startColumn.modules.edit&&(r.startColumn.modules.edit.blocked=!0),r.startX=void 0===e.screenX?e.touches[0].screenX:e.screenX,r.startWidth=t.getWidth(),document.body.addEventListener("mousemove",i),document.body.addEventListener("mouseup",o),n.addEventListener("touchmove",i,{passive:!0}),n.addEventListener("touchend",o)}}_A.moduleName="resizeColumns";class wA extends MD{constructor(e){super(e),this.startColumn=!1,this.startY=!1,this.startHeight=!1,this.handle=null,this.prevHandle=null,this.registerTableOption("resizableRows",!1)}initialize(){this.table.options.resizableRows&&this.subscribe("row-layout-after",this.initializeRow.bind(this))}initializeRow(e){var t=this,n=e.getElement(),r=document.createElement("div");r.className="tabulator-row-resize-handle";var i=document.createElement("div");i.className="tabulator-row-resize-handle prev",r.addEventListener("click",(function(e){e.stopPropagation()}));var o=function(n){t.startRow=e,t._mouseDown(n,e,r)};r.addEventListener("mousedown",o),r.addEventListener("touchstart",o,{passive:!0}),i.addEventListener("click",(function(e){e.stopPropagation()}));var a=function(n){var r=t.table.rowManager.prevDisplayRow(e);r&&(t.startRow=r,t._mouseDown(n,r,i))};i.addEventListener("mousedown",a),i.addEventListener("touchstart",a,{passive:!0}),n.appendChild(r),n.appendChild(i)}_mouseDown(e,t,n){var r=this;function i(e){t.setHeight(r.startHeight+((void 0===e.screenY?e.touches[0].screenY:e.screenY)-r.startY))}function o(e){document.body.removeEventListener("mouseup",i),document.body.removeEventListener("mousemove",i),n.removeEventListener("touchmove",i),n.removeEventListener("touchend",o),r.table.element.classList.remove("tabulator-block-select"),this.dispatchExternal("rowResized",t.getComponent())}r.table.element.classList.add("tabulator-block-select"),e.stopPropagation(),r.startY=void 0===e.screenY?e.touches[0].screenY:e.screenY,r.startHeight=t.getHeight(),document.body.addEventListener("mousemove",i),document.body.addEventListener("mouseup",o),n.addEventListener("touchmove",i,{passive:!0}),n.addEventListener("touchend",o)}}wA.moduleName="resizeRows";class xA extends MD{constructor(e){super(e),this.binding=!1,this.observer=!1,this.containerObserver=!1,this.tableHeight=0,this.tableWidth=0,this.containerHeight=0,this.containerWidth=0,this.autoResize=!1,this.registerTableOption("autoResize",!0)}initialize(){if(this.table.options.autoResize){var e,t=this.table;this.tableHeight=t.element.clientHeight,this.tableWidth=t.element.clientWidth,t.element.parentNode&&(this.containerHeight=t.element.parentNode.clientHeight,this.containerWidth=t.element.parentNode.clientWidth),"undefined"!=typeof ResizeObserver&&"virtual"===t.rowManager.getRenderMode()?(this.autoResize=!0,this.observer=new ResizeObserver((e=>{if(!t.browserMobile||t.browserMobile&&!t.modules.edit.currentCell){var n=Math.floor(e[0].contentRect.height),r=Math.floor(e[0].contentRect.width);this.tableHeight==n&&this.tableWidth==r||(this.tableHeight=n,this.tableWidth=r,t.element.parentNode&&(this.containerHeight=t.element.parentNode.clientHeight,this.containerWidth=t.element.parentNode.clientWidth),this.table.columnManager.renderer.rerenderColumns(!0),t.redraw())}})),this.observer.observe(t.element),e=window.getComputedStyle(t.element),this.table.element.parentNode&&!this.table.rowManager.fixedHeight&&(e.getPropertyValue("max-height")||e.getPropertyValue("min-height"))&&(this.containerObserver=new ResizeObserver((e=>{if(!t.browserMobile||t.browserMobile&&!t.modules.edit.currentCell){var n=Math.floor(e[0].contentRect.height),r=Math.floor(e[0].contentRect.width);this.containerHeight==n&&this.containerWidth==r||(this.containerHeight=n,this.containerWidth=r,this.tableHeight=t.element.clientHeight,this.tableWidth=t.element.clientWidth),t.columnManager.renderer.rerenderColumns(!0),t.redraw()}})),this.containerObserver.observe(this.table.element.parentNode)),this.subscribe("table-resize",this.tableResized.bind(this))):(this.binding=function(){(!t.browserMobile||t.browserMobile&&!t.modules.edit.currentCell)&&(t.columnManager.renderer.rerenderColumns(!0),t.redraw())},window.addEventListener("resize",this.binding)),this.subscribe("table-destroy",this.clearBindings.bind(this))}}tableResized(){this.table.rowManager.redraw()}clearBindings(){this.binding&&window.removeEventListener("resize",this.binding),this.observer&&this.observer.unobserve(this.table.element),this.containerObserver&&this.containerObserver.unobserve(this.table.element.parentNode)}}xA.moduleName="resizeTable";class MA extends MD{constructor(e){super(e),this.columns=[],this.hiddenColumns=[],this.mode="",this.index=0,this.collapseFormatter=[],this.collapseStartOpen=!0,this.collapseHandleColumn=!1,this.registerTableOption("responsiveLayout",!1),this.registerTableOption("responsiveLayoutCollapseStartOpen",!0),this.registerTableOption("responsiveLayoutCollapseUseFormatters",!0),this.registerTableOption("responsiveLayoutCollapseFormatter",!1),this.registerColumnOption("responsive")}initialize(){this.table.options.responsiveLayout&&(this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("column-show",this.updateColumnVisibility.bind(this)),this.subscribe("column-hide",this.updateColumnVisibility.bind(this)),this.subscribe("columns-loaded",this.initializeResponsivity.bind(this)),this.subscribe("column-moved",this.initializeResponsivity.bind(this)),this.subscribe("column-add",this.initializeResponsivity.bind(this)),this.subscribe("column-delete",this.initializeResponsivity.bind(this)),this.subscribe("table-redrawing",this.tableRedraw.bind(this)),"collapse"===this.table.options.responsiveLayout&&(this.subscribe("row-init",this.initializeRow.bind(this)),this.subscribe("row-layout",this.layoutRow.bind(this))))}tableRedraw(e){-1===["fitColumns","fitDataStretch"].indexOf(this.layoutMode())&&(e||this.update())}initializeResponsivity(){var e=[];this.mode=this.table.options.responsiveLayout,this.collapseFormatter=this.table.options.responsiveLayoutCollapseFormatter||this.formatCollapsedData,this.collapseStartOpen=this.table.options.responsiveLayoutCollapseStartOpen,this.hiddenColumns=[],this.table.columnManager.columnsByIndex.forEach((function(t,n){t.modules.responsive&&t.modules.responsive.order&&t.modules.responsive.visible&&(t.modules.responsive.index=n,e.push(t),t.visible||"collapse"!==self.mode||self.hiddenColumns.push(t))})),e=(e=e.reverse()).sort((function(e,t){return t.modules.responsive.order-e.modules.responsive.order||t.modules.responsive.index-e.modules.responsive.index})),this.columns=e,"collapse"===this.mode&&this.generateCollapsedContent();for(let e of this.table.columnManager.columnsByIndex)if("responsiveCollapse"==e.definition.formatter){this.collapseHandleColumn=e;break}this.collapseHandleColumn&&(this.hiddenColumns.length?this.collapseHandleColumn.show():this.collapseHandleColumn.hide())}initializeColumn(e){var t=e.getDefinition();e.modules.responsive={order:void 0===t.responsive?1:t.responsive,visible:!1!==t.visible}}initializeRow(e){var t;"calc"!==e.type&&((t=document.createElement("div")).classList.add("tabulator-responsive-collapse"),e.modules.responsiveLayout={element:t,open:this.collapseStartOpen},this.collapseStartOpen||(t.style.display="none"))}layoutRow(e){var t=e.getElement();e.modules.responsiveLayout&&(t.appendChild(e.modules.responsiveLayout.element),this.generateCollapsedRowContent(e))}updateColumnVisibility(e,t){!t&&e.modules.responsive&&(e.modules.responsive.visible=e.visible,this.initialize())}hideColumn(e){var t=this.hiddenColumns.length;e.hide(!1,!0),"collapse"===this.mode&&(this.hiddenColumns.unshift(e),this.generateCollapsedContent(),this.collapseHandleColumn&&!t&&this.collapseHandleColumn.show())}showColumn(e){var t;e.show(!1,!0),e.setWidth(e.getWidth()),"collapse"===this.mode&&((t=this.hiddenColumns.indexOf(e))>-1&&this.hiddenColumns.splice(t,1),this.generateCollapsedContent(),this.collapseHandleColumn&&!this.hiddenColumns.length&&this.collapseHandleColumn.hide())}update(){for(var e=this,t=!0;t;){let n="fitColumns"==e.table.modules.layout.getMode()?e.table.columnManager.getFlexBaseWidth():e.table.columnManager.getWidth(),r=(e.table.options.headerVisible?e.table.columnManager.element.clientWidth:e.table.element.clientWidth)-n;if(r<0){let n=e.columns[e.index];n?(e.hideColumn(n),e.index++):t=!1}else{let n=e.columns[e.index-1];n&&r>0&&r>=n.getWidth()?(e.showColumn(n),e.index--):t=!1}e.table.rowManager.activeRowsCount||e.table.rowManager.renderEmptyScroll()}}generateCollapsedContent(){var e=this;this.table.rowManager.getDisplayRows().forEach((function(t){e.generateCollapsedRowContent(t)}))}generateCollapsedRowContent(e){var t,n;if(e.modules.responsiveLayout){for(t=e.modules.responsiveLayout.element;t.firstChild;)t.removeChild(t.firstChild);(n=this.collapseFormatter(this.generateCollapsedRowData(e)))&&t.appendChild(n)}}generateCollapsedRowData(e){var t,n=this,r=e.getData(),i=[];return this.hiddenColumns.forEach((function(o){var a=o.getFieldValue(r);if(o.definition.title&&o.field)if(o.modules.format&&n.table.options.responsiveLayoutCollapseUseFormatters){function s(e){e()}t={value:!1,data:{},getValue:function(){return a},getData:function(){return r},getElement:function(){return document.createElement("div")},getRow:function(){return e.getComponent()},getColumn:function(){return o.getComponent()}},i.push({field:o.field,title:o.definition.title,value:o.modules.format.formatter.call(n.table.modules.format,t,o.modules.format.params,s)})}else i.push({field:o.field,title:o.definition.title,value:a})})),i}formatCollapsedData(e){var t=document.createElement("table");return e.forEach((function(e){var n,r=document.createElement("tr"),i=document.createElement("td"),o=document.createElement("td"),a=document.createElement("strong");i.appendChild(a),this.langBind("columns|"+e.field,(function(t){a.innerText=t||e.title})),e.value instanceof Node?((n=document.createElement("div")).appendChild(e.value),o.appendChild(n)):o.innerHTML=e.value,r.appendChild(i),r.appendChild(o),t.appendChild(r)}),this),Object.keys(e).length?t:""}}MA.moduleName="responsiveLayout";class EA extends MD{constructor(e){super(e),this.selecting=!1,this.lastClickedRow=!1,this.selectPrev=[],this.selectedRows=[],this.headerCheckboxElement=null,this.registerTableOption("selectable","highlight"),this.registerTableOption("selectableRangeMode","drag"),this.registerTableOption("selectableRollingSelection",!0),this.registerTableOption("selectablePersistence",!0),this.registerTableOption("selectableCheck",(function(e,t){return!0})),this.registerTableFunction("selectRow",this.selectRows.bind(this)),this.registerTableFunction("deselectRow",this.deselectRows.bind(this)),this.registerTableFunction("toggleSelectRow",this.toggleRow.bind(this)),this.registerTableFunction("getSelectedRows",this.getSelectedRows.bind(this)),this.registerTableFunction("getSelectedData",this.getSelectedData.bind(this)),this.registerComponentFunction("row","select",this.selectRows.bind(this)),this.registerComponentFunction("row","deselect",this.deselectRows.bind(this)),this.registerComponentFunction("row","toggleSelect",this.toggleRow.bind(this)),this.registerComponentFunction("row","isSelected",this.isRowSelected.bind(this))}initialize(){!1!==this.table.options.selectable&&(this.subscribe("row-init",this.initializeRow.bind(this)),this.subscribe("row-deleting",this.rowDeleted.bind(this)),this.subscribe("rows-wipe",this.clearSelectionData.bind(this)),this.subscribe("rows-retrieve",this.rowRetrieve.bind(this)),this.table.options.selectable&&this.table.options.selectablePersistence&&this.subscribe("data-refeshing",this.deselectRows.bind(this)))}rowRetrieve(e,t){return"selected"===e?this.selectedRows:t}rowDeleted(e){this._deselectRow(e,!0)}clearSelectionData(e){this.selecting=!1,this.lastClickedRow=!1,this.selectPrev=[],this.selectedRows=[],!0!==e&&this._rowSelectionChanged()}initializeRow(e){var t=this,n=e.getElement(),r=function(){setTimeout((function(){t.selecting=!1}),50),document.body.removeEventListener("mouseup",r)};e.modules.select={selected:!1},t.table.options.selectableCheck.call(this.table,e.getComponent())?(n.classList.add("tabulator-selectable"),n.classList.remove("tabulator-unselectable"),t.table.options.selectable&&"highlight"!=t.table.options.selectable&&("click"===t.table.options.selectableRangeMode?n.addEventListener("click",(function(n){if(n.shiftKey){t.table._clearSelection(),t.lastClickedRow=t.lastClickedRow||e;var r=t.table.rowManager.getDisplayRowIndex(t.lastClickedRow),i=t.table.rowManager.getDisplayRowIndex(e),o=r<=i?r:i,a=r>=i?r:i,s=t.table.rowManager.getDisplayRows().slice(0).splice(o,a-o+1);n.ctrlKey||n.metaKey?(s.forEach((function(n){n!==t.lastClickedRow&&(!0===t.table.options.selectable||t.isRowSelected(e)||t.selectedRows.length<t.table.options.selectable)&&t.toggleRow(n)})),t.lastClickedRow=e):(t.deselectRows(void 0,!0),!0!==t.table.options.selectable&&s.length>t.table.options.selectable&&(s=s.slice(0,t.table.options.selectable)),t.selectRows(s)),t.table._clearSelection()}else n.ctrlKey||n.metaKey?(t.toggleRow(e),t.lastClickedRow=e):(t.deselectRows(void 0,!0),t.selectRows(e),t.lastClickedRow=e)})):(n.addEventListener("click",(function(n){t.table.modExists("edit")&&t.table.modules.edit.getCurrentCell()||t.table._clearSelection(),t.selecting||t.toggleRow(e)})),n.addEventListener("mousedown",(function(n){if(n.shiftKey)return t.table._clearSelection(),t.selecting=!0,t.selectPrev=[],document.body.addEventListener("mouseup",r),document.body.addEventListener("keyup",r),t.toggleRow(e),!1})),n.addEventListener("mouseenter",(function(n){t.selecting&&(t.table._clearSelection(),t.toggleRow(e),t.selectPrev[1]==e&&t.toggleRow(t.selectPrev[0]))})),n.addEventListener("mouseout",(function(n){t.selecting&&(t.table._clearSelection(),t.selectPrev.unshift(e))}))))):(n.classList.add("tabulator-unselectable"),n.classList.remove("tabulator-selectable"))}toggleRow(e){this.table.options.selectableCheck.call(this.table,e.getComponent())&&(e.modules.select&&e.modules.select.selected?this._deselectRow(e):this._selectRow(e))}selectRows(e){var t;switch(typeof e){case"undefined":this.table.rowManager.rows.forEach((e=>{this._selectRow(e,!0,!0)})),this._rowSelectionChanged();break;case"string":(t=this.table.rowManager.findRow(e))?this._selectRow(t,!0,!0):this.table.rowManager.getRows(e).forEach((e=>{this._selectRow(e,!0,!0)})),this._rowSelectionChanged();break;default:Array.isArray(e)?(e.forEach((e=>{this._selectRow(e,!0,!0)})),this._rowSelectionChanged()):this._selectRow(e,!1,!0)}}_selectRow(e,t,n){if(!isNaN(this.table.options.selectable)&&!0!==this.table.options.selectable&&!n&&this.selectedRows.length>=this.table.options.selectable){if(!this.table.options.selectableRollingSelection)return!1;this._deselectRow(this.selectedRows[0])}var r=this.table.rowManager.findRow(e);r?-1==this.selectedRows.indexOf(r)&&(r.getElement().classList.add("tabulator-selected"),r.modules.select||(r.modules.select={}),r.modules.select.selected=!0,r.modules.select.checkboxEl&&(r.modules.select.checkboxEl.checked=!0),this.selectedRows.push(r),this.table.options.dataTreeSelectPropagate&&this.childRowSelection(r,!0),t||this.dispatchExternal("rowSelected",r.getComponent()),this._rowSelectionChanged(t)):t||console.warn("Selection Error - No such row found, ignoring selection:"+e)}isRowSelected(e){return-1!==this.selectedRows.indexOf(e)}deselectRows(e,t){var n,r=this;if(void 0===e){n=r.selectedRows.length;for(let e=0;e<n;e++)r._deselectRow(r.selectedRows[0],!0);r._rowSelectionChanged(t)}else Array.isArray(e)?(e.forEach((function(e){r._deselectRow(e,!0)})),r._rowSelectionChanged(t)):r._deselectRow(e,t)}_deselectRow(e,t){var n,r=this,i=r.table.rowManager.findRow(e);i?(n=r.selectedRows.findIndex((function(e){return e==i})))>-1&&(i.getElement().classList.remove("tabulator-selected"),i.modules.select||(i.modules.select={}),i.modules.select.selected=!1,i.modules.select.checkboxEl&&(i.modules.select.checkboxEl.checked=!1),r.selectedRows.splice(n,1),this.table.options.dataTreeSelectPropagate&&this.childRowSelection(i,!1),t||this.dispatchExternal("rowDeselected",i.getComponent()),r._rowSelectionChanged(t)):t||console.warn("Deselection Error - No such row found, ignoring selection:"+e)}getSelectedData(){var e=[];return this.selectedRows.forEach((function(t){e.push(t.getData())})),e}getSelectedRows(){var e=[];return this.selectedRows.forEach((function(t){e.push(t.getComponent())})),e}_rowSelectionChanged(e){this.headerCheckboxElement&&(0===this.selectedRows.length?(this.headerCheckboxElement.checked=!1,this.headerCheckboxElement.indeterminate=!1):this.table.rowManager.rows.length===this.selectedRows.length?(this.headerCheckboxElement.checked=!0,this.headerCheckboxElement.indeterminate=!1):(this.headerCheckboxElement.indeterminate=!0,this.headerCheckboxElement.checked=!1)),e||this.dispatchExternal("rowSelectionChanged",this.getSelectedData(),this.getSelectedRows())}registerRowSelectCheckbox(e,t){e._row.modules.select||(e._row.modules.select={}),e._row.modules.select.checkboxEl=t}registerHeaderSelectCheckbox(e){this.headerCheckboxElement=e}childRowSelection(e,t){var n=this.table.modules.dataTree.getChildren(e,!0);if(t)for(let e of n)this._selectRow(e,!0);else for(let e of n)this._deselectRow(e,!0)}}function SA(e,t,n,r,i,o,a){var s=window.DateTime||luxon.DateTime,l=a.format||"dd/MM/yyyy HH:mm:ss",u=a.alignEmptyValues,c=0;if(void 0!==s){if(e=s.fromFormat(e,l),t=s.fromFormat(t,l),e.isValid){if(t.isValid)return e-t;c=1}else c=t.isValid?-1:0;return("top"===u&&"desc"===o||"bottom"===u&&"asc"===o)&&(c*=-1),c}console.error("Sort Error - 'datetime' sorter is dependant on luxon.js")}EA.moduleName="selectRow";var kA={number:function(e,t,n,r,i,o,a){var s=a.alignEmptyValues,l=a.decimalSeparator,u=a.thousandSeparator,c=0;if(e=String(e),t=String(t),u&&(e=e.split(u).join(""),t=t.split(u).join("")),l&&(e=e.split(l).join("."),t=t.split(l).join(".")),e=parseFloat(e),t=parseFloat(t),isNaN(e))c=isNaN(t)?0:-1;else{if(!isNaN(t))return e-t;c=1}return("top"===s&&"desc"===o||"bottom"===s&&"asc"===o)&&(c*=-1),c},string:function(e,t,n,r,i,o,a){var s,l=a.alignEmptyValues,u=0;if(e){if(t){switch(typeof a.locale){case"boolean":a.locale&&(s=this.langLocale());break;case"string":s=a.locale}return String(e).toLowerCase().localeCompare(String(t).toLowerCase(),s)}u=1}else u=t?-1:0;return("top"===l&&"desc"===o||"bottom"===l&&"asc"===o)&&(u*=-1),u},date:function(e,t,n,r,i,o,a){return a.format||(a.format="dd/MM/yyyy"),SA.call(this,e,t,n,r,i,o,a)},time:function(e,t,n,r,i,o,a){return a.format||(a.format="HH:mm"),SA.call(this,e,t,n,r,i,o,a)},datetime:SA,boolean:function(e,t,n,r,i,o,a){return(!0===e||"true"===e||"True"===e||1===e?1:0)-(!0===t||"true"===t||"True"===t||1===t?1:0)},array:function(e,t,n,r,i,o,a){var s=a.type||"length",l=a.alignEmptyValues,u=0;function c(e){switch(s){case"length":return e.length;case"sum":return e.reduce((function(e,t){return e+t}));case"max":return Math.max.apply(null,e);case"min":return Math.min.apply(null,e);case"avg":return e.reduce((function(e,t){return e+t}))/e.length}}if(Array.isArray(e)){if(Array.isArray(t))return(e?c(e):0)-(t?c(t):0);l=1}else l=Array.isArray(t)?-1:0;return("top"===l&&"desc"===o||"bottom"===l&&"asc"===o)&&(u*=-1),u},exists:function(e,t,n,r,i,o,a){return(void 0===e?0:1)-(void 0===t?0:1)},alphanum:function(e,t,n,r,i,o,a){var s,l,u,c,d,h=0,f=/(\d+)|(\D+)/g,p=/\d/,m=a.alignEmptyValues,g=0;if(e||0===e){if(t||0===t){if(isFinite(e)&&isFinite(t))return e-t;if((s=String(e).toLowerCase())===(l=String(t).toLowerCase()))return 0;if(!p.test(s)||!p.test(l))return s>l?1:-1;for(s=s.match(f),l=l.match(f),d=s.length>l.length?l.length:s.length;h<d;)if((u=s[h])!==(c=l[h++]))return isFinite(u)&&isFinite(c)?("0"===u.charAt(0)&&(u="."+u),"0"===c.charAt(0)&&(c="."+c),u-c):u>c?1:-1;return s.length>l.length}g=1}else g=t||0===t?-1:0;return("top"===m&&"desc"===o||"bottom"===m&&"asc"===o)&&(g*=-1),g}};class TA extends MD{constructor(e){super(e),this.sortList=[],this.changed=!1,this.registerTableOption("sortMode","local"),this.registerTableOption("initialSort",!1),this.registerTableOption("columnHeaderSortMulti",!0),this.registerTableOption("sortOrderReverse",!1),this.registerTableOption("headerSortElement","<div class='tabulator-arrow'></div>"),this.registerColumnOption("sorter"),this.registerColumnOption("sorterParams"),this.registerColumnOption("headerSort",!0),this.registerColumnOption("headerSortStartingDir"),this.registerColumnOption("headerSortTristate")}initialize(){this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("table-built",this.tableBuilt.bind(this)),this.registerDataHandler(this.sort.bind(this),20),this.registerTableFunction("setSort",this.userSetSort.bind(this)),this.registerTableFunction("getSorters",this.getSort.bind(this)),this.registerTableFunction("clearSort",this.clearSort.bind(this)),"remote"===this.table.options.sortMode&&this.subscribe("data-params",this.remoteSortParams.bind(this))}tableBuilt(){this.table.options.initialSort&&this.setSort(this.table.options.initialSort)}remoteSortParams(e,t,n,r){var i=this.getSort();return i.forEach((e=>{delete e.column})),r.sort=i,r}userSetSort(e,t){this.setSort(e,t),this.refreshSort()}clearSort(){this.clear(),this.refreshSort()}initializeColumn(e){var t,n,r=!1;switch(typeof e.definition.sorter){case"string":TA.sorters[e.definition.sorter]?r=TA.sorters[e.definition.sorter]:console.warn("Sort Error - No such sorter found: ",e.definition.sorter);break;case"function":r=e.definition.sorter}e.modules.sort={sorter:r,dir:"none",params:e.definition.sorterParams||{},startingDir:e.definition.headerSortStartingDir||"asc",tristate:e.definition.headerSortTristate},!1!==e.definition.headerSort&&((t=e.getElement()).classList.add("tabulator-sortable"),(n=document.createElement("div")).classList.add("tabulator-col-sorter"),"object"==typeof this.table.options.headerSortElement?n.appendChild(this.table.options.headerSortElement):n.innerHTML=this.table.options.headerSortElement,e.titleHolderElement.appendChild(n),e.modules.sort.element=n,t.addEventListener("click",(t=>{var n="",r=[],i=!1;if(e.modules.sort){if(e.modules.sort.tristate)n="none"==e.modules.sort.dir?e.modules.sort.startingDir:e.modules.sort.dir==e.modules.sort.startingDir?"asc"==e.modules.sort.dir?"desc":"asc":"none";else switch(e.modules.sort.dir){case"asc":n="desc";break;case"desc":n="asc";break;default:n=e.modules.sort.startingDir}this.table.options.columnHeaderSortMulti&&(t.shiftKey||t.ctrlKey)?(i=(r=this.getSort()).findIndex((t=>t.field===e.getField())),i>-1?(r[i].dir=n,i!=r.length-1&&(i=r.splice(i,1)[0],"none"!=n&&r.push(i))):"none"!=n&&r.push({column:e,dir:n}),this.setSort(r)):"none"==n?this.clear():this.setSort(e,n),this.refreshSort()}})))}refreshSort(){"remote"===this.table.options.sortMode?this.reloadData():this.refreshData()}hasChanged(){var e=this.changed;return this.changed=!1,e}getSort(){var e=[];return this.sortList.forEach((function(t){t.column&&e.push({column:t.column.getComponent(),field:t.column.getField(),dir:t.dir})})),e}setSort(e,t){var n=this,r=[];Array.isArray(e)||(e=[{column:e,dir:t}]),e.forEach((function(e){var t;(t=n.table.columnManager.findColumn(e.column))?(e.column=t,r.push(e),n.changed=!0):console.warn("Sort Warning - Sort field does not exist and is being ignored: ",e.column)})),n.sortList=r,this.dispatch("sort-changed")}clear(){this.setSort([])}findSorter(e){var t,n=this.table.rowManager.activeRows[0],r="string";if(n&&(n=n.getData(),e.getField()))switch(typeof(t=e.getFieldValue(n))){case"undefined":r="string";break;case"boolean":r="boolean";break;default:isNaN(t)||""===t?t.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)&&(r="alphanum"):r="number"}return TA.sorters[r]}sort(e){var t=this,n=this.table.options.sortOrderReverse?t.sortList.slice().reverse():t.sortList,r=[],i=[];return this.subscribedExternal("dataSorting")&&this.dispatchExternal("dataSorting",t.getSort()),t.clearColumnHeaders(),"remote"!==this.table.options.sortMode?(n.forEach((function(e,n){var i=e.column.modules.sort;e.column&&i&&(i.sorter||(i.sorter=t.findSorter(e.column)),e.params="function"==typeof i.params?i.params(e.column.getComponent(),e.dir):i.params,r.push(e)),t.setColumnHeader(e.column,e.dir)})),r.length&&t._sortItems(e,r)):n.forEach((function(e,n){t.setColumnHeader(e.column,e.dir)})),this.subscribedExternal("dataSorted")&&(e.forEach((e=>{i.push(e.getComponent())})),this.dispatchExternal("dataSorted",t.getSort(),i)),e}clearColumnHeaders(){this.table.columnManager.getRealColumns().forEach((function(e){e.modules.sort&&(e.modules.sort.dir="none",e.getElement().setAttribute("aria-sort","none"))}))}setColumnHeader(e,t){e.modules.sort.dir=t,e.getElement().setAttribute("aria-sort",t)}_sortItems(e,t){var n=t.length-1;e.sort(((e,r)=>{for(var i,o=n;o>=0;o--){let n=t[o];if(0!==(i=this._sortRow(e,r,n.column,n.dir,n.params)))break}return i}))}_sortRow(e,t,n,r,i){var o,a,s="asc"==r?e:t,l="asc"==r?t:e;return e=void 0!==(e=n.getFieldValue(s.getData()))?e:"",t=void 0!==(t=n.getFieldValue(l.getData()))?t:"",o=s.getComponent(),a=l.getComponent(),n.modules.sort.sorter.call(this,e,t,o,a,n.getComponent(),r,i)}}TA.moduleName="sort",TA.sorters=kA;var LA={integer:function(e,t,n){return""===t||null==t||"number"==typeof(t=Number(t))&&isFinite(t)&&Math.floor(t)===t},float:function(e,t,n){return""===t||null==t||"number"==typeof(t=Number(t))&&isFinite(t)&&t%1!=0},numeric:function(e,t,n){return""===t||null==t||!isNaN(t)},string:function(e,t,n){return""===t||null==t||isNaN(t)},max:function(e,t,n){return""===t||null==t||parseFloat(t)<=n},min:function(e,t,n){return""===t||null==t||parseFloat(t)>=n},starts:function(e,t,n){return""===t||null==t||String(t).toLowerCase().startsWith(String(n).toLowerCase())},ends:function(e,t,n){return""===t||null==t||String(t).toLowerCase().endsWith(String(n).toLowerCase())},minLength:function(e,t,n){return""===t||null==t||String(t).length>=n},maxLength:function(e,t,n){return""===t||null==t||String(t).length<=n},in:function(e,t,n){return""===t||null==t||("string"==typeof n&&(n=n.split("|")),""===t||n.indexOf(t)>-1)},regex:function(e,t,n){return""===t||null==t||new RegExp(n).test(t)},unique:function(e,t,n){if(""===t||null==t)return!0;var r=!0,i=e.getData(),o=e.getColumn()._getSelf();return this.table.rowManager.rows.forEach((function(e){var n=e.getData();n!==i&&t==o.getFieldValue(n)&&(r=!1)})),r},required:function(e,t,n){return""!==t&&null!=t}};class CA extends MD{constructor(e){super(e),this.invalidCells=[],this.registerTableOption("validationMode","blocking"),this.registerColumnOption("validator"),this.registerTableFunction("getInvalidCells",this.getInvalidCells.bind(this)),this.registerTableFunction("clearCellValidation",this.userClearCellValidation.bind(this)),this.registerTableFunction("validate",this.userValidate.bind(this)),this.registerComponentFunction("cell","isValid",this.cellIsValid.bind(this)),this.registerComponentFunction("cell","clearValidation",this.clearValidation.bind(this)),this.registerComponentFunction("cell","validate",this.cellValidate.bind(this)),this.registerComponentFunction("column","validate",this.columnValidate.bind(this)),this.registerComponentFunction("row","validate",this.rowValidate.bind(this))}initialize(){this.subscribe("cell-delete",this.clearValidation.bind(this)),this.subscribe("column-layout",this.initializeColumnCheck.bind(this))}cellIsValid(e){return!e.modules.validate||!e.modules.validate.invalid}cellValidate(e){return this.validate(e.column.modules.validate,e,e.getValue())}columnValidate(e){var t=[];return e.cells.forEach((function(e){this.cellValidate(e)||t.push(e.getComponent())})),!t.length||t}rowValidate(e){var t=[];return e.cells.forEach((function(e){this.cellValidate(e)||t.push(e.getComponent())})),!t.length||t}userClearCellValidation(e){e||(e=this.getInvalidCells()),Array.isArray(e)||(e=[e]),e.forEach((e=>{this.clearValidation(e._getSelf())}))}userValidate(e){var t=[];return this.table.rowManager.rows.forEach((function(e){var n=e.validate();!0!==n&&(t=t.concat(n))})),!t.length||t}initializeColumnCheck(e){void 0!==e.definition.validator&&this.initializeColumn(e)}initializeColumn(e){var t,n=this,r=[];e.definition.validator&&(Array.isArray(e.definition.validator)?e.definition.validator.forEach((function(e){(t=n._extractValidator(e))&&r.push(t)})):(t=this._extractValidator(e.definition.validator))&&r.push(t),e.modules.validate=!!r.length&&r)}_extractValidator(e){var t,n,r;switch(typeof e){case"string":return(r=e.indexOf(":"))>-1?(t=e.substring(0,r),n=e.substring(r+1)):t=e,this._buildValidator(t,n);case"function":return this._buildValidator(e);case"object":return this._buildValidator(e.type,e.parameters)}}_buildValidator(e,t){var n="function"==typeof e?e:CA.validators[e];return n?{type:"function"==typeof e?"function":e,func:n,params:t}:(console.warn("Validator Setup Error - No matching validator found:",e),!1)}validate(e,t,n){var r=this,i=[],o=this.invalidCells.indexOf(t);return e&&e.forEach((function(e){e.func.call(r,t.getComponent(),n,e.params)||i.push({type:e.type,parameters:e.params})})),i=!i.length||i,t.modules.validate||(t.modules.validate={}),!0===i?(t.modules.validate.invalid=!1,t.getElement().classList.remove("tabulator-validation-fail"),o>-1&&this.invalidCells.splice(o,1)):(t.modules.validate.invalid=!0,"manual"!==this.table.options.validationMode&&t.getElement().classList.add("tabulator-validation-fail"),-1==o&&this.invalidCells.push(t)),i}getInvalidCells(){var e=[];return this.invalidCells.forEach((t=>{e.push(t.getComponent())})),e}clearValidation(e){var t;e.modules.validate&&e.modules.validate.invalid&&(e.getElement().classList.remove("tabulator-validation-fail"),e.modules.validate.invalid=!1,(t=this.invalidCells.indexOf(e))>-1&&this.invalidCells.splice(t,1))}}CA.moduleName="validate",CA.validators=LA;var DA=Object.freeze({__proto__:null,AccessorModule:SD,AjaxModule:DD,ClipboardModule:AD,ColumnCalcsModule:zD,DataTreeModule:HD,DownloadModule:WD,EditModule:XD,ExportModule:JD,FilterModule:$D,FormatModule:eA,FrozenColumnsModule:tA,FrozenRowsModule:nA,GroupRowsModule:oA,HistoryModule:aA,HtmlTableImportModule:sA,InteractionModule:lA,KeybindingsModule:uA,MenuModule:cA,MoveColumnsModule:dA,MoveRowsModule:hA,MutatorModule:fA,PageModule:pA,PersistenceModule:vA,PrintModule:yA,ReactiveDataModule:bA,ResizeColumnsModule:_A,ResizeRowsModule:wA,ResizeTableModule:xA,ResponsiveLayoutModule:MA,SelectRowModule:EA,SortModule:TA,ValidateModule:CA});class AA{constructor(e,t){this.table=e,this.msgType=t,this.registeredDefaults={}}register(e,t){this.registeredDefaults[e]=t}generate(e,t={}){var n=Object.assign({},this.registeredDefaults);if(Object.assign(n,e),!1!==t.debugInvalidOptions||this.table.options.debugInvalidOptions)for(var r in t)n.hasOwnProperty(r)||console.warn("Invalid "+this.msgType+" option:",r);for(var r in n)r in t?n[r]=t[r]:Array.isArray(n[r])?n[r]=Object.assign([],n[r]):"object"==typeof n[r]&&null!==n[r]?n[r]=Object.assign({},n[r]):void 0===n[r]&&delete n[r];return n}}class PA extends xD{constructor(e){super(e),this.elementVertical=e.rowManager.element,this.elementHorizontal=e.columnManager.element,this.tableElement=e.rowManager.tableElement,this.verticalFillMode="fit"}initialize(){}clearRows(){}clearColumns(){}reinitializeColumnWidths(e){}renderRows(){}renderColumns(){}rerenderRows(e){e&&e()}rerenderColumns(e,t){}renderRowCells(e){}rerenderRowCells(e,t){}scrollColumns(e,t){}scrollRows(e,t){}resize(){}scrollToRow(e){}scrollToRowNearestTop(e){}visibleRows(e){return[]}rows(){return this.table.rowManager.getDisplayRows()}styleRow(e,t){var n=e.getElement();t%2?(n.classList.add("tabulator-row-even"),n.classList.remove("tabulator-row-odd")):(n.classList.add("tabulator-row-odd"),n.classList.remove("tabulator-row-even"))}clear(){this.clearRows(),this.clearColumns()}render(){this.renderRows(),this.renderColumns()}rerender(e){this.rerenderRows(),this.rerenderColumns()}scrollToRowPosition(e,t,n){var r=this.rows().indexOf(e),i=e.getElement(),o=0;return new Promise(((a,s)=>{if(r>-1){if(void 0===n&&(n=this.table.options.scrollToRowIfVisible),!n&&ED.elVisible(i)&&(o=ED.elOffset(i).top-ED.elOffset(this.elementVertical).top)>0&&o<this.elementVertical.clientHeight-i.offsetHeight)return!1;switch(void 0===t&&(t=this.table.options.scrollToRowPosition),"nearest"===t&&(t=this.scrollToRowNearestTop(e)?"top":"bottom"),this.scrollToRow(e),t){case"middle":case"center":this.elementVertical.scrollHeight-this.elementVertical.scrollTop==this.elementVertical.clientHeight?this.elementVertical.scrollTop=this.elementVertical.scrollTop+(i.offsetTop-this.elementVertical.scrollTop)-(this.elementVertical.scrollHeight-i.offsetTop)/2:this.elementVertical.scrollTop=this.elementVertical.scrollTop-this.elementVertical.clientHeight/2;break;case"bottom":this.elementVertical.scrollHeight-this.elementVertical.scrollTop==this.elementVertical.clientHeight?this.elementVertical.scrollTop=this.elementVertical.scrollTop-(this.elementVertical.scrollHeight-i.offsetTop)+i.offsetHeight:this.elementVertical.scrollTop=this.elementVertical.scrollTop-this.elementVertical.clientHeight+i.offsetHeight}a()}else console.warn("Scroll Error - Row not visible"),s("Scroll Error - Row not visible")}))}}class OA extends PA{constructor(e){super(e)}renderRowCells(e){e.cells.forEach((t=>{e.element.appendChild(t.getElement()),t.cellRendered()}))}reinitializeColumnWidths(e){e.forEach((function(e){e.reinitializeWidth()}))}}class IA extends PA{constructor(e){super(e),this.leftCol=0,this.rightCol=0,this.scrollLeft=0,this.vDomScrollPosLeft=0,this.vDomScrollPosRight=0,this.vDomPadLeft=0,this.vDomPadRight=0,this.fitDataColAvg=0,this.window=200,this.initialized=!1,this.columns=[]}initialize(){this.compatabilityCheck()}compatabilityCheck(){var e=this.options("columns"),t=!0;return"fitDataTable"==this.options("layout")&&(console.warn("Horizontal Vitrual DOM is not compatible with fitDataTable layout mode"),t=!1),this.options("responsiveLayout")&&(console.warn("Horizontal Vitrual DOM is not compatible with responsive columns"),t=!1),this.options("rtl")&&(console.warn("Horizontal Vitrual DOM is not currently compatible with RTL text direction"),t=!1),e&&e.find((e=>e.frozen))&&(console.warn("Horizontal Vitrual DOM is not compatible with frozen columns"),t=!1),t}renderColumns(e,t){this.dataChange()}scrollColumns(e,t){this.scrollLeft!=e&&(this.scrollLeft=e,this.scroll(e-(this.vDomScrollPosLeft+this.window)))}rerenderColumns(e,t){var n={cols:this.columns,leftCol:this.leftCol,rightCol:this.rightCol};if(!e||this.initialized){this.clear(),this.scrollLeft=this.elementVertical.scrollLeft,this.vDomScrollPosLeft=this.scrollLeft-this.window,this.vDomScrollPosRight=this.scrollLeft+this.elementVertical.clientWidth+this.window;var r=0;this.table.columnManager.columnsByIndex.forEach((e=>{var t={};if(e.visible){var n=e.getWidth();t.leftPos=r,t.rightPos=r+n,t.width=n,"fitData"===this.options("layout")&&(t.fitDataCheck=!0),r+n>this.vDomScrollPosLeft&&r<this.vDomScrollPosRight?(-1==this.leftCol&&(this.leftCol=this.columns.length,this.vDomPadLeft=r),this.rightCol=this.columns.length):-1!==this.leftCol&&(this.vDomPadRight+=n),this.columns.push(e),e.modules.vdomHoz=t,r+=n}})),this.tableElement.style.paddingLeft=this.vDomPadLeft+"px",this.tableElement.style.paddingRight=this.vDomPadRight+"px",this.initialized=!0,t||e&&!this.reinitChanged(n)||this.renitializeRows(),this.elementVertical.scrollLeft=this.scrollLeft}}renderRowCells(e){this.initialized?this.initializeRow(e):e.cells.forEach((t=>{e.element.appendChild(t.getElement()),t.cellRendered()}))}rerenderRowCells(e,t){this.reinitializeRow(e,t)}reinitializeColumnWidths(e){for(let e=this.leftCol;e<=this.rightCol;e++)this.columns[e].reinitializeWidth()}deinitialize(){this.initialized=!1}clear(){this.columns=[],this.leftCol=-1,this.rightCol=0,this.vDomScrollPosLeft=0,this.vDomScrollPosRight=0,this.vDomPadLeft=0,this.vDomPadRight=0}dataChange(){var e,t,n=!1,r=0,i=0;if("fitData"===this.options("layout")){if(this.table.columnManager.columnsByIndex.forEach((e=>{!e.definition.width&&e.visible&&(n=!0)})),n&&n&&this.table.rowManager.getDisplayRows().length&&(this.vDomScrollPosRight=this.scrollLeft+this.elementVertical.clientWidth+this.window,t=this.chain("rows-sample",[1],[],(()=>this.table.rowManager.getDisplayRows()[0]))[0])){e=t.getElement(),t.generateCells(),this.tableElement.appendChild(e);for(i=0;i<t.cells.length;i++){let n=t.cells[i];if(e.appendChild(n.getElement()),n.column.reinitializeWidth(),(r+=n.column.getWidth())>this.vDomScrollPosRight)break}for(e.parentNode.removeChild(e),this.fitDataColAvg=Math.floor(r/(i+1));i<this.table.columnManager.columnsByIndex.length;i++)this.table.columnManager.columnsByIndex[i].setWidth(this.fitDataColAvg);this.rerenderColumns(!1,!0)}}else"fitColumns"===this.options("layout")&&(this.layoutRefresh(),this.rerenderColumns(!1,!0))}reinitChanged(e){var t=!0;return e.cols.length!==this.columns.length||e.leftCol!==this.leftCol||e.rightCol!==this.rightCol||(e.cols.forEach(((e,n)=>{e!==this.columns[n]&&(t=!1)})),!t)}renitializeRows(){this.table.rowManager.getVisibleRows().forEach((e=>{this.reinitializeRow(e,!0)}))}scroll(e){this.vDomScrollPosLeft+=e,this.vDomScrollPosRight+=e,e>.8*this.elementVertical.clientWidth?this.rerenderColumns():e>0?(this.addColRight(),this.removeColLeft()):(this.addColLeft(),this.removeColRight())}colPositionAdjust(e,t,n){for(let r=e;r<t;r++){let e=this.columns[r];e.modules.vdomHoz.leftPos+=n,e.modules.vdomHoz.rightPos+=n}}addColRight(){var e=this.columns[this.rightCol+1];e&&e.modules.vdomHoz.leftPos<=this.vDomScrollPosRight&&(this.table.rowManager.getVisibleRows().forEach((t=>{if("group"!==t.type){var n=t.getCell(e);t.getElement().appendChild(n.getElement()),n.cellRendered()}})),this.fitDataColActualWidthCheck(e),this.rightCol++,this.rightCol>=this.columns.length-1?this.vDomPadRight=0:this.vDomPadRight-=e.getWidth(),this.tableElement.style.paddingRight=this.vDomPadRight+"px",this.addColRight())}addColLeft(){var e=this.columns[this.leftCol-1];e&&e.modules.vdomHoz.rightPos>=this.vDomScrollPosLeft&&(this.table.rowManager.getVisibleRows().forEach((t=>{if("group"!==t.type){var n=t.getCell(e);t.getElement().prepend(n.getElement()),n.cellRendered()}})),this.fitDataColActualWidthCheck(e),this.leftCol?this.vDomPadLeft-=e.getWidth():this.vDomPadLeft=0,this.tableElement.style.paddingLeft=this.vDomPadLeft+"px",this.leftCol--,this.addColLeft())}removeColRight(e){var t;(e=this.columns[this.rightCol])&&e.modules.vdomHoz.leftPos>this.vDomScrollPosRight&&(t=this.table.rowManager.getVisibleRows(),e.modules.vdomHoz.visible=!1,t.forEach((t=>{if("group"!==t.type){var n=t.getCell(e);t.getElement().removeChild(n.getElement())}})),this.vDomPadRight+=e.getWidth(),this.tableElement.style.paddingRight=this.vDomPadRight+"px",this.rightCol--,this.removeColRight())}removeColLeft(){var e=this.columns[this.leftCol];e&&e.modules.vdomHoz.rightPos<this.vDomScrollPosLeft&&(this.table.rowManager.getVisibleRows().forEach((t=>{if("group"!==t.type){var n=t.getCell(e);n.parentNode&&t.getElement().removeChild(n.getElement())}})),this.vDomPadLeft+=e.getWidth(),this.tableElement.style.paddingLeft=this.vDomPadLeft+"px",this.leftCol++,this.removeColLeft())}fitDataColActualWidthCheck(e){var t,n;e.modules.vdomHoz.fitDataCheck&&(e.reinitializeWidth(),(n=(t=e.getWidth())-e.modules.vdomHoz.width)&&(e.modules.vdomHoz.rightPos+=n,e.modules.vdomHoz.width=t,this.colPositionAdjust(this.rightCol+2,this.columns.length,n)),e.modules.vdomHoz.fitDataCheck=!1)}initializeRow(e){if("group"!==e.type){e.modules.vdomHoz={leftCol:this.leftCol,rightCol:this.rightCol};for(let t=this.leftCol;t<=this.rightCol;t++){let n=this.columns[t];if(n&&n.visible){let t=e.getCell(n);e.getElement().appendChild(t.getElement()),t.cellRendered()}}}}reinitializeRow(e,t){if("group"!==e.type&&(t||!e.modules.vdomHoz||e.modules.vdomHoz.leftCol!==this.leftCol||e.modules.vdomHoz.rightCol!==this.rightCol)){for(var n=e.getElement();n.firstChild;)n.removeChild(n.firstChild);this.initializeRow(e)}}}class RA extends xD{constructor(e){super(e),this.blockHozScrollEvent=!1,this.headersElement=null,this.element=null,this.columns=[],this.columnsByIndex=[],this.columnsByField={},this.scrollLeft=0,this.optionsList=new AA(this.table,"column definition"),this.renderer=null}initialize(){this.initializeRenderer(),this.headersElement=this.createHeadersElement(),this.element=this.createHeaderElement(),this.element.insertBefore(this.headersElement,this.element.firstChild),this.subscribe("scroll-horizontal",this.scrollHorizontal.bind(this))}initializeRenderer(){var e,t={virtual:IA,basic:OA};(e="string"==typeof this.table.options.renderHorizontal?t[this.table.options.renderHorizontal]:this.table.options.renderHorizontal)?(this.renderer=new e(this.table,this.element,this.tableElement),this.renderer.initialize()):console.error("Unable to find matching renderer:",table.options.renderHorizontal)}createHeadersElement(){var e=document.createElement("div");return e.classList.add("tabulator-headers"),e.setAttribute("role","row"),e}createHeaderElement(){var e=document.createElement("div");return e.classList.add("tabulator-header"),e.setAttribute("role","rowgroup"),this.table.options.headerVisible||e.classList.add("tabulator-header-hidden"),e}getElement(){return this.element}getHeadersElement(){return this.headersElement}scrollHorizontal(e){var t=0,n=this.element.scrollWidth-this.table.element.clientWidth;this.element.scrollLeft=e,e>n?(t=e-n,this.element.style.marginLeft=-t+"px"):this.element.style.marginLeft=0,this.scrollLeft=e,this.renderer.scrollColumns(e)}generateColumnsFromRowData(e){var t,n,r=[],i=this.table.options.autoColumnsDefinitions;if(e&&e.length){for(var o in t=e[0]){let e={field:o,title:o},i=t[o];switch(typeof i){case"undefined":n="string";break;case"boolean":n="boolean";break;case"object":n=Array.isArray(i)?"array":"string";break;default:n=isNaN(i)||""===i?i.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)?"alphanum":"string":"number"}e.sorter=n,r.push(e)}if(i)switch(typeof i){case"function":this.table.options.columns=i.call(this.table,r);break;case"object":Array.isArray(i)?r.forEach((e=>{var t=i.find((t=>t.field===e.field));t&&Object.assign(e,t)})):r.forEach((e=>{i[e.field]&&Object.assign(e,i[e.field])})),this.table.options.columns=r}else this.table.options.columns=r;this.setColumns(this.table.options.columns)}}setColumns(e,t){for(;this.headersElement.firstChild;)this.headersElement.removeChild(this.headersElement.firstChild);this.columns=[],this.columnsByIndex=[],this.columnsByField={},this.dispatch("columns-loading"),e.forEach(((e,t)=>{this._addColumn(e)})),this._reIndexColumns(),this.dispatch("columns-loaded"),this.renderer.rerenderColumns(!1,!0),this.redraw(!0)}_addColumn(e,t,n){var r=new YD(e,this),i=r.getElement(),o=n?this.findColumnIndex(n):n;if(n&&o>-1){var a=n.getTopColumn(),s=this.columns.indexOf(a),l=a.getElement();t?(this.columns.splice(s,0,r),l.parentNode.insertBefore(i,l)):(this.columns.splice(s+1,0,r),l.parentNode.insertBefore(i,l.nextSibling))}else t?(this.columns.unshift(r),this.headersElement.insertBefore(r.getElement(),this.headersElement.firstChild)):(this.columns.push(r),this.headersElement.appendChild(r.getElement()));return r.columnRendered(),r}registerColumnField(e){e.definition.field&&(this.columnsByField[e.definition.field]=e)}registerColumnPosition(e){this.columnsByIndex.push(e)}_reIndexColumns(){this.columnsByIndex=[],this.columns.forEach((function(e){e.reRegisterPosition()}))}verticalAlignHeaders(){var e=0;this.columns.forEach((t=>{var n;t.clearVerticalAlign(),(n=t.getHeight())>e&&(e=n)})),this.columns.forEach((t=>{t.verticalAlign(this.table.options.columnHeaderVertAlign,e)})),this.table.rowManager.adjustTableSize()}findColumn(e){if("object"!=typeof e)return this.columnsByField[e]||!1;if(e instanceof YD)return e;if(e instanceof RD)return e._getSelf()||!1;if("undefined"!=typeof HTMLElement&&e instanceof HTMLElement){return this.columns.find((t=>t.element===e))||!1}return!1}getColumnByField(e){return this.columnsByField[e]}getColumnsByFieldRoot(e){var t=[];return Object.keys(this.columnsByField).forEach((n=>{n.split(".")[0]===e&&t.push(this.columnsByField[n])})),t}getColumnByIndex(e){return this.columnsByIndex[e]}getFirstVisibileColumn(e){return(e=this.columnsByIndex.findIndex((e=>e.visible)))>-1&&this.columnsByIndex[e]}getColumns(){return this.columns}findColumnIndex(e){return this.columnsByIndex.findIndex((t=>e===t))}getRealColumns(){return this.columnsByIndex}traverse(e){this.columnsByIndex.forEach(((t,n)=>{e(t,n)}))}getDefinitions(e){var t=[];return this.columnsByIndex.forEach((n=>{(!e||e&&n.visible)&&t.push(n.getDefinition())})),t}getDefinitionTree(){var e=[];return this.columns.forEach((t=>{e.push(t.getDefinition(!0))})),e}getComponents(e){var t=[];return(e?this.columns:this.columnsByIndex).forEach((e=>{t.push(e.getComponent())})),t}getWidth(){var e=0;return this.columnsByIndex.forEach((t=>{t.visible&&(e+=t.getWidth())})),e}moveColumn(e,t,n){this.moveColumnActual(e,t,n),t.element.parentNode.insertBefore(e.element,t.element),n&&t.element.parentNode.insertBefore(t.element,e.element),this.verticalAlignHeaders(),this.table.rowManager.reinitialize()}moveColumnActual(e,t,n){e.parent.isGroup?this._moveColumnInArray(e.parent.columns,e,t,n):this._moveColumnInArray(this.columns,e,t,n),this._moveColumnInArray(this.columnsByIndex,e,t,n,!0),this.renderer.rerenderColumns(!0),this.dispatch("column-moved",e,t,n),this.subscribedExternal("columnMoved")&&this.dispatchExternal("columnMoved",e.getComponent(),this.table.columnManager.getComponents())}_moveColumnInArray(e,t,n,r,i){var o,a=e.indexOf(t);a>-1&&(e.splice(a,1),(o=e.indexOf(n))>-1?r&&(o+=1):o=a,e.splice(o,0,t),i&&(this.chain("column-moving-rows",[t,n,r],null,[])||[]).concat(this.table.rowManager.rows).forEach((function(e){if(e.cells.length){var t=e.cells.splice(a,1)[0];e.cells.splice(o,0,t)}})))}scrollToColumn(e,t,n){var r=0,i=0,o=0,a=e.getElement();return new Promise(((s,l)=>{if(void 0===t&&(t=this.table.options.scrollToColumnPosition),void 0===n&&(n=this.table.options.scrollToColumnIfVisible),e.visible){switch(t){case"middle":case"center":o=-this.element.clientWidth/2;break;case"right":o=a.clientWidth-this.headersElement.clientWidth}if(!n&&(i=a.offsetLeft)>0&&i+a.offsetWidth<this.element.clientWidth)return!1;r=a.offsetLeft+o,r=Math.max(Math.min(r,this.table.rowManager.element.scrollWidth-this.table.rowManager.element.clientWidth),0),this.table.rowManager.scrollHorizontal(r),this.scrollHorizontal(r),s()}else console.warn("Scroll Error - Column not visible"),l("Scroll Error - Column not visible")}))}generateCells(e){var t=[];return this.columnsByIndex.forEach((n=>{t.push(n.generateCell(e))})),t}getFlexBaseWidth(){var e=this.table.element.clientWidth,t=0;return this.table.rowManager.element.scrollHeight>this.table.rowManager.element.clientHeight&&(e-=this.table.rowManager.element.offsetWidth-this.table.rowManager.element.clientWidth),this.columnsByIndex.forEach((function(n){var r,i,o;n.visible&&(r=n.definition.width||0,i=parseInt(n.minWidth),o="string"==typeof r?r.indexOf("%")>-1?e/100*parseInt(r):parseInt(r):r,t+=o>i?o:i)})),t}addColumn(e,t,n){return new Promise(((r,i)=>{var o=this._addColumn(e,t,n);this._reIndexColumns(),this.dispatch("column-add",e,t,n),"fitColumns"!=this.layoutMode()&&o.reinitializeWidth(),this.redraw(!0),this.table.rowManager.reinitialize(),this.renderer.rerenderColumns(),r(o)}))}deregisterColumn(e){var t,n=e.getField();n&&delete this.columnsByField[n],(t=this.columnsByIndex.indexOf(e))>-1&&this.columnsByIndex.splice(t,1),(t=this.columns.indexOf(e))>-1&&this.columns.splice(t,1),this.verticalAlignHeaders(),this.redraw()}redraw(e){ED.elVisible(this.element)&&this.verticalAlignHeaders(),e&&(this.table.rowManager.resetScroll(),this.table.rowManager.reinitialize()),this.confirm("table-redrawing",e)||this.layoutRefresh(),this.dispatch("table-redraw",e),this.table.footerManager.redraw()}}class NA extends PA{constructor(e){super(e),this.verticalFillMode="fill",this.scrollTop=0,this.scrollLeft=0,this.scrollTop=0,this.scrollLeft=0}clearRows(){for(var e=this.tableElement;e.firstChild;)e.removeChild(e.firstChild);e.scrollTop=0,e.scrollLeft=0,e.style.minWidth="",e.style.minHeight="",e.style.display="",e.style.visibility=""}renderRows(){var e=this.tableElement,t=!0;this.rows().forEach(((n,r)=>{this.styleRow(n,r),e.appendChild(n.getElement()),n.initialize(!0),"group"!==n.type&&(t=!1)})),e.style.minWidth=t?this.table.columnManager.getWidth()+"px":""}rerenderRows(e){this.render(),e&&e()}scrollToRowNearestTop(e){var t=ED.elOffset(e.getElement()).top;return!(Math.abs(this.elementVertical.scrollTop-t)>Math.abs(this.elementVertical.scrollTop+this.elementVertical.clientHeight-t))}scrollToRow(e){var t=e.getElement();this.elementVertical.scrollTop=ED.elOffset(t).top-ED.elOffset(this.elementVertical).top+this.elementVertical.scrollTop}visibleRows(e){return this.rows()}}class YA extends PA{constructor(e){super(e),this.verticalFillMode="fill",this.scrollTop=0,this.scrollLeft=0,this.vDomRowHeight=20,this.vDomTop=0,this.vDomBottom=0,this.vDomScrollPosTop=0,this.vDomScrollPosBottom=0,this.vDomTopPad=0,this.vDomBottomPad=0,this.vDomMaxRenderChain=90,this.vDomWindowBuffer=0,this.vDomWindowMinTotalRows=20,this.vDomWindowMinMarginRows=5,this.vDomTopNewRows=[],this.vDomBottomNewRows=[]}clearRows(){for(var e=this.tableElement;e.firstChild;)e.removeChild(e.firstChild);e.style.paddingTop="",e.style.paddingBottom="",e.style.minWidth="",e.style.minHeight="",e.style.display="",e.style.visibility="",this.elementVertical.scrollTop=0,this.elementVertical.scrollLeft=0,this.scrollTop=0,this.scrollLeft=0,this.vDomTop=0,this.vDomBottom=0,this.vDomTopPad=0,this.vDomBottomPad=0,this.vDomScrollPosTop=0,this.vDomScrollPosBottom=0}renderRows(){this._virtualRenderFill()}rerenderRows(e){for(var t=this.elementVertical.scrollTop,n=!1,r=!1,i=this.table.rowManager.scrollLeft,o=this.rows(),a=this.vDomTop;a<=this.vDomBottom;a++)if(o[a]){var s=t-o[a].getElement().offsetTop;if(!(!1===r||Math.abs(s)<r))break;r=s,n=a}o.forEach((e=>{e.deinitializeHeight()})),e&&e(),this._virtualRenderFill(!1===n?this.rows.length-1:n,!0,r||0),this.scrollColumns(i)}scrollColumns(e){this.table.rowManager.scrollHorizontal(e)}scrollRows(e,t){var n=e-this.vDomScrollPosTop,r=e-this.vDomScrollPosBottom,i=2*this.vDomWindowBuffer,o=this.rows();if(this.scrollTop=e,-n>i||r>i){var a=this.table.rowManager.scrollLeft;this._virtualRenderFill(Math.floor(this.elementVertical.scrollTop/this.elementVertical.scrollHeight*o.length)),this.scrollColumns(a)}else t?(n<0&&this._addTopRow(o,-n),r<0&&(this.vDomScrollHeight-this.scrollTop>this.vDomWindowBuffer?this._removeBottomRow(o,-r):this.vDomScrollPosBottom=this.scrollTop)):(r>=0&&this._addBottomRow(o,r),n>=0&&(this.scrollTop>this.vDomWindowBuffer?this._removeTopRow(o,n):this.vDomScrollPosTop=this.scrollTop))}resize(){this.vDomWindowBuffer=this.table.options.renderVerticalBuffer||this.elementVertical.clientHeight}scrollToRowNearestTop(e){var t=this.rows().indexOf(e);return!(Math.abs(this.vDomTop-t)>Math.abs(this.vDomBottom-t))}scrollToRow(e){var t=this.rows().indexOf(e);t>-1&&this._virtualRenderFill(t,!0)}visibleRows(e){var t=this.elementVertical.scrollTop,n=this.elementVertical.clientHeight+t,r=!1,i=0,o=0,a=this.rows();if(e)i=this.vDomTop,o=this.vDomBottom;else for(var s=this.vDomTop;s<=this.vDomBottom;s++)if(a[s])if(r){if(!(n-a[s].getElement().offsetTop>=0))break;o=s}else if(t-a[s].getElement().offsetTop>=0)i=s;else{if(r=!0,!(n-a[s].getElement().offsetTop>=0))break;o=s}return a.slice(i,o+1)}_virtualRenderFill(e,t,n){var r=this.tableElement,i=this.elementVertical,o=0,a=0,s=0,l=0,u=0,c=this.rows(),d=c.length,h=this.elementVertical.clientHeight;if(n=n||0,e=e||0){for(;r.firstChild;)r.removeChild(r.firstChild);(s=(d-e+1)*this.vDomRowHeight)<h&&(e-=Math.ceil((h-s)/this.vDomRowHeight))<0&&(e=0),e-=o=Math.min(Math.max(Math.floor(this.vDomWindowBuffer/this.vDomRowHeight),this.vDomWindowMinMarginRows),e)}else this.clear();if(d&&ED.elVisible(this.elementVertical)){for(this.vDomTop=e,this.vDomBottom=e-1;(a<=h+this.vDomWindowBuffer||u<this.vDomWindowMinTotalRows)&&this.vDomBottom<d-1;){var f,p=this.vDomBottom+1,m=c[p];this.styleRow(m,p),r.appendChild(m.getElement()),m.initialize(),m.heightInitialized||m.normalizeHeight(!0),f=m.getHeight(),u<o?l+=f:a+=f,f>this.vDomWindowBuffer&&(this.vDomWindowBuffer=2*f),this.vDomBottom++,u++}e?(this.vDomTopPad=t?this.vDomRowHeight*this.vDomTop+n:this.scrollTop-l,this.vDomBottomPad=this.vDomBottom==d-1?0:Math.max(this.vDomScrollHeight-this.vDomTopPad-a-l,0)):(this.vDomTopPad=0,this.vDomRowHeight=Math.floor((a+l)/u),this.vDomBottomPad=this.vDomRowHeight*(d-this.vDomBottom-1),this.vDomScrollHeight=l+a+this.vDomBottomPad-h),r.style.paddingTop=this.vDomTopPad+"px",r.style.paddingBottom=this.vDomBottomPad+"px",t&&(this.scrollTop=this.vDomTopPad+l+n-(this.elementVertical.scrollWidth>this.elementVertical.clientWidth?this.elementVertical.offsetHeight-h:0)),this.scrollTop=Math.min(this.scrollTop,this.elementVertical.scrollHeight-h),this.elementVertical.scrollWidth>this.elementVertical.offsetWidth&&t&&(this.scrollTop+=this.elementVertical.offsetHeight-h),this.vDomScrollPosTop=this.scrollTop,this.vDomScrollPosBottom=this.scrollTop,i.scrollTop=this.scrollTop,this.dispatch("render-virtual-fill")}}_addTopRow(e,t){for(var n=this.tableElement,r=[],i=0,o=this.vDomTop-1,a=0;this.vDomTop;){let s,l,u=e[o];if(!(u&&a<this.vDomMaxRenderChain))break;if(s=u.getHeight()||this.vDomRowHeight,l=u.initialized,!(t>=s))break;this.styleRow(u,o),n.insertBefore(u.getElement(),n.firstChild),u.initialized&&u.heightInitialized||r.push(u),u.initialize(),l||(s=u.getElement().offsetHeight,s>this.vDomWindowBuffer&&(this.vDomWindowBuffer=2*s)),t-=s,i+=s,this.vDomTop--,o--,a++}for(let e of r)e.clearCellHeight();this._quickNormalizeRowHeight(r),i&&(this.vDomTopPad-=i,this.vDomTopPad<0&&(this.vDomTopPad=o*this.vDomRowHeight),o<1&&(this.vDomTopPad=0),n.style.paddingTop=this.vDomTopPad+"px",this.vDomScrollPosTop-=i)}_removeTopRow(e,t){for(var n=[],r=0,i=0;;){let o,a=e[this.vDomTop];if(!(a&&i<this.vDomMaxRenderChain))break;if(o=a.getHeight()||this.vDomRowHeight,!(t>=o))break;this.vDomTop++,t-=o,r+=o,n.push(a),i++}for(let e of n){let t=e.getElement();t.parentNode&&t.parentNode.removeChild(t)}r&&(this.vDomTopPad+=r,this.tableElement.style.paddingTop=this.vDomTopPad+"px",this.vDomScrollPosTop+=this.vDomTop?r:r+this.vDomWindowBuffer)}_addBottomRow(e,t){for(var n=this.tableElement,r=[],i=0,o=this.vDomBottom+1,a=0;;){let s,l,u=e[o];if(!(u&&a<this.vDomMaxRenderChain))break;if(s=u.getHeight()||this.vDomRowHeight,l=u.initialized,!(t>=s))break;this.styleRow(u,o),n.appendChild(u.getElement()),u.initialized&&u.heightInitialized||r.push(u),u.initialize(),l||(s=u.getElement().offsetHeight,s>this.vDomWindowBuffer&&(this.vDomWindowBuffer=2*s)),t-=s,i+=s,this.vDomBottom++,o++,a++}for(let e of r)e.clearCellHeight();this._quickNormalizeRowHeight(r),i&&(this.vDomBottomPad-=i,(this.vDomBottomPad<0||o==e.length-1)&&(this.vDomBottomPad=0),n.style.paddingBottom=this.vDomBottomPad+"px",this.vDomScrollPosBottom+=i)}_removeBottomRow(e,t){for(var n=[],r=0,i=0;;){let o,a=e[this.vDomBottom];if(!(a&&i<this.vDomMaxRenderChain))break;if(o=a.getHeight()||this.vDomRowHeight,!(t>=o))break;this.vDomBottom--,t-=o,r+=o,n.push(a),i++}for(let e of n){let t=e.getElement();t.parentNode&&t.parentNode.removeChild(t)}r&&(this.vDomBottomPad+=r,this.vDomBottomPad<0&&(this.vDomBottomPad=0),this.tableElement.style.paddingBottom=this.vDomBottomPad+"px",this.vDomScrollPosBottom-=r)}_quickNormalizeRowHeight(e){for(let t of e)t.calcHeight();for(let t of e)t.setCellHeight()}}class jA extends xD{constructor(e){super(e),this.element=this.createHolderElement(),this.tableElement=this.createTableElement(),this.heightFixer=this.createTableElement(),this.firstRender=!1,this.renderMode="virtual",this.fixedHeight=!1,this.rows=[],this.activeRowsPipeline=[],this.activeRows=[],this.activeRowsCount=0,this.displayRows=[],this.displayRowsCount=0,this.scrollTop=0,this.scrollLeft=0,this.rowNumColumn=!1,this.redrawBlock=!1,this.redrawBlockRestoreConfig=!1,this.redrawBlockRederInPosition=!1,this.dataPipeline=[],this.displayPipeline=[],this.renderer=null}createHolderElement(){var e=document.createElement("div");return e.classList.add("tabulator-tableholder"),e.setAttribute("tabindex",0),e.setAttribute("role","rowgroup"),e}createTableElement(){var e=document.createElement("div");return e.classList.add("tabulator-table"),e.setAttribute("role","rowgroup"),e}getElement(){return this.element}getTableElement(){return this.tableElement}getRowPosition(e,t){return t?this.activeRows.indexOf(e):this.rows.indexOf(e)}initialize(){this.initializeRenderer(),this.element.appendChild(this.tableElement),this.firstRender=!0,this.element.addEventListener("scroll",(()=>{var e=this.element.scrollLeft,t=this.scrollLeft>e,n=this.element.scrollTop,r=this.scrollTop>n;this.scrollLeft!=e&&(this.scrollLeft=e,this.dispatch("scroll-horizontal",e,t),this.dispatchExternal("scrollHorizontal",e,t)),this.scrollTop!=n&&(this.scrollTop=n,this.renderer.scrollRows(n,r),this.dispatch("scroll-vertical",n,r),this.dispatchExternal("scrollVertical",n,r))}))}findRow(e){if("object"!=typeof e){if(null==e)return!1;return this.rows.find((t=>t.data[this.table.options.index]==e))||!1}if(e instanceof FD)return e;if(e instanceof jD)return e._getSelf()||!1;if("undefined"!=typeof HTMLElement&&e instanceof HTMLElement){return this.rows.find((t=>t.getElement()===e))||!1}return!1}getRowFromDataObject(e){return this.rows.find((t=>t.data===e))||!1}getRowFromPosition(e,t){return t?this.activeRows[e]:this.rows[e]}scrollToRow(e,t,n){return this.renderer.scrollToRowPosition(e,t,n)}setData(e,t,n){return new Promise(((r,i)=>{t&&this.getDisplayRows().length?this.table.options.pagination?this._setDataActual(e,!0):this.reRenderInPosition((()=>{this._setDataActual(e)})):(this.table.options.autoColumns&&n&&this.table.initialized&&this.table.columnManager.generateColumnsFromRowData(e),this.resetScroll(),this._setDataActual(e)),r()}))}_setDataActual(e,t){this.dispatchExternal("dataProcessing",e),this._wipeElements(),Array.isArray(e)?(this.dispatch("data-processing",e),e.forEach(((e,t)=>{if(e&&"object"==typeof e){var n=new FD(e,this);this.rows.push(n)}else console.warn("Data Loading Warning - Invalid row data detected and ignored, expecting object but received:",e)})),this.refreshActiveData(!1,!1,t),this.dispatch("data-processed",e),this.dispatchExternal("dataProcessed",e)):console.error("Data Loading Error - Unable to process data due to invalid data type \nExpecting: array \nReceived: ",typeof e,"\nData:     ",e)}_wipeElements(){this.dispatch("rows-wipe"),this.rows.forEach((e=>{e.wipe()})),this.rows=[],this.activeRows=[],this.activeRowsPipeline=[],this.activeRowsCount=0,this.displayRows=[],this.displayRowsCount=0,this.adjustTableSize()}deleteRow(e,t){var n=this.rows.indexOf(e),r=this.activeRows.indexOf(e);r>-1&&this.activeRows.splice(r,1),n>-1&&this.rows.splice(n,1),this.setActiveRows(this.activeRows),this.displayRowIterator((t=>{var n=t.indexOf(e);n>-1&&t.splice(n,1)})),t||this.reRenderInPosition(),this.regenerateRowNumbers(),this.dispatchExternal("rowDeleted",e.getComponent()),this.displayRowsCount||this._showPlaceholder(),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.getData())}addRow(e,t,n,r){var i=this.addRowActual(e,t,n,r);return this.dispatch("row-added",i,e,t,n),i}addRows(e,t,n){var r=[];return new Promise(((i,o)=>{t=this.findAddRowPos(t),Array.isArray(e)||(e=[e]),e.length,(void 0===n&&t||void 0!==n&&!t)&&e.reverse(),e.forEach(((i,o)=>{var a=this.addRow(i,t,n,!0);r.push(a),this.dispatch("row-added",a,e,t,n)})),this.refreshActiveData(!1,!1,!0),this.regenerateRowNumbers(),r.length&&this._clearPlaceholder(),i(r)}))}findAddRowPos(e){return void 0===e&&(e=this.table.options.addRowPos),"pos"===e&&(e=!0),"bottom"===e&&(e=!1),e}addRowActual(e,t,n,r){var i,o,a=e instanceof FD?e:new FD(e||{},this),s=this.findAddRowPos(t),l=-1;return n||(o=this.chain("row-adding-position",[a,s],null,{index:n,top:s}),n=o.index,s=o.top),void 0!==n&&(n=this.findRow(n)),(n=this.chain("row-adding-index",[a,n,s],null,n))&&(l=this.rows.indexOf(n)),n&&l>-1?(i=this.activeRows.indexOf(n),this.displayRowIterator((function(e){var t=e.indexOf(n);t>-1&&e.splice(s?t:t+1,0,a)})),i>-1&&this.activeRows.splice(s?i:i+1,0,a),this.rows.splice(s?l:l+1,0,a)):s?(this.displayRowIterator((function(e){e.unshift(a)})),this.activeRows.unshift(a),this.rows.unshift(a)):(this.displayRowIterator((function(e){e.push(a)})),this.activeRows.push(a),this.rows.push(a)),this.setActiveRows(this.activeRows),this.dispatchExternal("rowAdded",a.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()),r||this.reRenderInPosition(),a}moveRow(e,t,n){this.dispatch("row-move",e,t,n),this.moveRowActual(e,t,n),this.regenerateRowNumbers(),this.dispatch("row-moved",e,t,n),this.dispatchExternal("rowMoved",e.getComponent())}moveRowActual(e,t,n){this.moveRowInArray(this.rows,e,t,n),this.moveRowInArray(this.activeRows,e,t,n),this.displayRowIterator((r=>{this.moveRowInArray(r,e,t,n)})),this.dispatch("row-moving",e,t,n)}moveRowInArray(e,t,n,r){var i,o,a;if(t!==n&&((i=e.indexOf(t))>-1&&(e.splice(i,1),(o=e.indexOf(n))>-1?r?e.splice(o+1,0,t):e.splice(o,0,t):e.splice(i,0,t)),e===this.getDisplayRows())){a=o>i?o:i+1;for(let t=i<o?i:o;t<=a;t++)e[t]&&this.styleRow(e[t],t)}}clearData(){this.setData([])}getRowIndex(e){return this.findRowIndex(e,this.rows)}getDisplayRowIndex(e){var t=this.getDisplayRows().indexOf(e);return t>-1&&t}nextDisplayRow(e,t){var n=this.getDisplayRowIndex(e),r=!1;return!1!==n&&n<this.displayRowsCount-1&&(r=this.getDisplayRows()[n+1]),!r||r instanceof FD&&"row"==r.type?r:this.nextDisplayRow(r,t)}prevDisplayRow(e,t){var n=this.getDisplayRowIndex(e),r=!1;return n&&(r=this.getDisplayRows()[n-1]),!t||!r||r instanceof FD&&"row"==r.type?r:this.prevDisplayRow(r,t)}findRowIndex(e,t){var n;return!!((e=this.findRow(e))&&(n=t.indexOf(e))>-1)&&n}getData(e,t){var n=[];return this.getRows(e).forEach((function(e){"row"==e.type&&n.push(e.getData(t||"data"))})),n}getComponents(e){var t=[];return this.getRows(e).forEach((function(e){t.push(e.getComponent())})),t}getDataCount(e){return this.getRows(e).length}scrollHorizontal(e){this.scrollLeft=e,this.element.scrollLeft=e,this.dispatch("scroll-horizontal",e)}registerDataPipelineHandler(e,t){void 0!==t?(this.dataPipeline.push({handler:e,priority:t}),this.dataPipeline.sort(((e,t)=>e.priority-t.priority))):console.error("Data pipeline handlers must have a priority in order to be registered")}registerDisplayPipelineHandler(e,t){void 0!==t?(this.displayPipeline.push({handler:e,priority:t}),this.displayPipeline.sort(((e,t)=>e.priority-t.priority))):console.error("Display pipeline handlers must have a priority in order to be registered")}refreshActiveData(e,t,n){var r=this.table,i="",o=0,a=["all","dataPipeline","display","displayPipeline","end"];if("function"==typeof e)if(o=this.dataPipeline.findIndex((t=>t.handler===e)),o>-1)i="dataPipeline",t&&(o==this.dataPipeline.length-1?i="display":o++);else{if(o=this.displayPipeline.findIndex((t=>t.handler===e)),!(o>-1))return void console.error("Unable to refresh data, invalid handler provided",e);i="displayPipeline",t&&(o==this.displayPipeline.length-1?i="end":o++)}else i=e||"all",o=0;if(this.redrawBlock)(!this.redrawBlockRestoreConfig||this.redrawBlockRestoreConfig&&(this.redrawBlockRestoreConfig.stage===i&&o<this.redrawBlockRestoreConfig.index||a.indexOf(i)<a.indexOf(this.redrawBlockRestoreConfig.stage)))&&(this.redrawBlockRestoreConfig={handler:e,skipStage:t,renderInPosition:n,stage:i,index:o});else{switch(this.dispatch("data-refeshing"),e||(this.activeRowsPipeline[0]=this.rows.slice(0)),i){case"all":case"dataPipeline":for(let e=o;e<this.dataPipeline.length;e++){let t=this.dataPipeline[e].handler(this.activeRowsPipeline[e].slice(0));this.activeRowsPipeline[e+1]=t||this.activeRowsPipeline[e].slice(0)}this.setActiveRows(this.activeRowsPipeline[this.dataPipeline.length]),this.regenerateRowNumbers();case"display":o=0,this.resetDisplayRows();case"displayPipeline":for(let e=o;e<this.displayPipeline.length;e++){let t=this.displayPipeline[e].handler((e?this.getDisplayRows(e-1):this.activeRows).slice(0),n);this.setDisplayRows(t||this.getDisplayRows(e-1).slice(0),e)}}ED.elVisible(this.element)&&(n?this.reRenderInPosition():(e||this.table.columnManager.renderer.renderColumns(),this.renderTable(),r.options.layoutColumnsOnNewData&&this.table.columnManager.redraw(!0))),this.dispatch("data-refeshed")}}regenerateRowNumbers(){this.rowNumColumn&&this.activeRows.forEach((e=>{var t=e.getCell(this.rowNumColumn);t&&t._generateContents()}))}setActiveRows(e){this.activeRows=e,this.activeRowsCount=this.activeRows.length}resetDisplayRows(){this.displayRows=[],this.displayRows.push(this.activeRows.slice(0)),this.displayRowsCount=this.displayRows[0].length}getNextDisplayIndex(){return this.displayRows.length}setDisplayRows(e,t){var n=!0;return t&&void 0!==this.displayRows[t]?(this.displayRows[t]=e,n=!0):(this.displayRows.push(e),n=t=this.displayRows.length-1),t==this.displayRows.length-1&&(this.displayRowsCount=this.displayRows[this.displayRows.length-1].length),n}getDisplayRows(e){return void 0===e?this.displayRows.length?this.displayRows[this.displayRows.length-1]:[]:this.displayRows[e]||[]}getVisibleRows(e){return this.renderer.visibleRows(!e)}displayRowIterator(e){this.activeRowsPipeline.forEach(e),this.displayRows.forEach(e),this.displayRowsCount=this.displayRows[this.displayRows.length-1].length}getRows(e){var t;switch(e){case"active":t=this.activeRows;break;case"display":t=this.table.rowManager.getDisplayRows();break;case"visible":t=this.getVisibleRows(!0);break;default:t=this.chain("rows-retrieve",e,null,this.rows)||this.rows}return t}reRenderInPosition(e){this.redrawBlock?e?e():this.redrawBlockRederInPosition=!0:this.renderer.rerenderRows(e)}initializeRenderer(){var e,t={virtual:YA,basic:NA};(e="string"==typeof this.table.options.renderVertical?t[this.table.options.renderVertical]:this.table.options.renderVertical)?(this.renderer=new e(this.table,this.element,this.tableElement),this.renderer.initialize(),this.table.element.clientHeight||this.table.options.height?this.fixedHeight=!0:this.fixedHeight=!1):console.error("Unable to find matching renderer:",table.options.renderVertical)}getRenderMode(){return this.renderMode}renderTable(){this.dispatchExternal("renderStarted"),this.element.scrollTop=0,this._clearTable(),this.displayRowsCount?(this.renderer.renderRows(),this.firstRender&&(this.firstRender=!1,this.layoutRefresh())):this.renderEmptyScroll(),this.fixedHeight||this.adjustTableSize(),this.dispatch("table-layout"),this.displayRowsCount||this._showPlaceholder(),this.dispatchExternal("renderComplete")}renderEmptyScroll(){this.table.options.placeholder?this.tableElement.style.display="none":this.tableElement.style.minWidth=this.table.columnManager.getWidth()+"px"}_clearTable(){this.tableElement;this._clearPlaceholder(),this.scrollTop=0,this.scrollLeft=0,this.renderer.clearRows()}_showPlaceholder(){this.table.options.placeholder&&(this.table.options.placeholder.setAttribute("tabulator-render-mode",this.renderMode),this.getElement().appendChild(this.table.options.placeholder),this.table.options.placeholder.style.width=this.table.columnManager.getWidth()+"px")}_clearPlaceholder(){this.table.options.placeholder&&this.table.options.placeholder.parentNode&&this.table.options.placeholder.parentNode.removeChild(this.table.options.placeholder)}styleRow(e,t){var n=e.getElement();t%2?(n.classList.add("tabulator-row-even"),n.classList.remove("tabulator-row-odd")):(n.classList.add("tabulator-row-odd"),n.classList.remove("tabulator-row-even"))}normalizeHeight(){this.activeRows.forEach((function(e){e.normalizeHeight()}))}adjustTableSize(){var e=this.element.clientHeight;if("fill"===this.renderer.verticalFillMode){let t=Math.floor(this.table.columnManager.getElement().getBoundingClientRect().height+(this.table.footerManager&&this.table.footerManager.active&&!this.table.footerManager.external?this.table.footerManager.getElement().getBoundingClientRect().height:0));this.fixedHeight?(this.element.style.minHeight="calc(100% - "+t+"px)",this.element.style.height="calc(100% - "+t+"px)",this.element.style.maxHeight="calc(100% - "+t+"px)"):(this.element.style.height="",this.element.style.height=this.table.element.clientHeight-t+"px",this.element.scrollTop=this.scrollTop),this.renderer.resize(),this.fixedHeight||e==this.element.clientHeight||(this.subscribed("table-resize")?this.dispatch("table-resize"):this.redraw())}}reinitialize(){this.rows.forEach((function(e){e.reinitialize(!0)}))}blockRedraw(){this.redrawBlock=!0,this.redrawBlockRestoreConfig=!1}restoreRedraw(){this.redrawBlock=!1,this.redrawBlockRestoreConfig?(this.refreshActiveData(this.redrawBlockRestoreConfig.handler,this.redrawBlockRestoreConfig.skipStage,this.redrawBlockRestoreConfig.renderInPosition),this.redrawBlockRestoreConfig=!1):this.redrawBlockRederInPosition&&this.reRenderInPosition(),this.redrawBlockRederInPosition=!1}redraw(e){var t=this.scrollLeft;this.adjustTableSize(),this.table.tableWidth=this.table.element.clientWidth,e?this.renderTable():(this.reRenderInPosition(),this.scrollHorizontal(t),this.displayRowsCount||this.table.options.placeholder&&this.getElement().appendChild(this.table.options.placeholder))}resetScroll(){if(this.element.scrollLeft=0,this.element.scrollTop=0,"ie"===this.table.browser){var e=document.createEvent("Event");e.initEvent("scroll",!1,!0),this.element.dispatchEvent(e)}else this.element.dispatchEvent(new Event("scroll"))}}class FA extends xD{constructor(e){super(e),this.active=!1,this.element=this.createElement(),this.external=!1,this.links=[],this.initializeElement()}initialize(){this.initializeElement()}createElement(){var e=document.createElement("div");return e.classList.add("tabulator-footer"),e}initializeElement(){if(this.table.options.footerElement)if("string"==typeof this.table.options.footerElement)"<"===this.table.options.footerElement[0]?this.element.innerHTML=this.table.options.footerElement:(this.external=!0,this.element=document.querySelector(this.table.options.footerElement));else this.element=this.table.options.footerElement}getElement(){return this.element}append(e,t){this.activate(t),this.element.appendChild(e),this.table.rowManager.adjustTableSize()}prepend(e,t){this.activate(t),this.element.insertBefore(e,this.element.firstChild),this.table.rowManager.adjustTableSize()}remove(e){e.parentNode.removeChild(e),this.deactivate()}deactivate(e){this.element.firstChild&&!e||(this.external||this.element.parentNode.removeChild(this.element),this.active=!1)}activate(e){this.active||(this.active=!0,this.external||(this.table.element.appendChild(this.getElement()),this.table.element.style.display="")),e&&this.links.push(e)}redraw(){this.links.forEach((function(e){e.footerRedraw()}))}}class BA extends xD{constructor(e){super(e),this.el=this.table.element,this.abortClasses=["tabulator-headers","tabulator-table"],this.previousTargets={},this.listeners=["click","dblclick","contextmenu","mouseenter","mouseleave","mouseover","mouseout","mousemove","touchstart","touchend"],this.componentMap={"tabulator-cell":"cell","tabulator-row":"row","tabulator-group":"group","tabulator-col":"column"},this.buildListenerMap(),this.bindSubscriptionWatchers()}buildListenerMap(){var e={};this.listeners.forEach((t=>{e[t]={handler:null,components:[]}})),this.listeners=e}bindSubscriptionWatchers(){var e=Object.keys(this.listeners),t=Object.values(this.componentMap);for(let n of t)for(let t of e){let e=n+"-"+t;this.subscriptionChange(e,this.subscriptionChanged.bind(this,n,t))}}subscriptionChanged(e,t,n){var r=this.listeners[t].components,i=r.indexOf(e),o=!1;n?-1===i&&(r.push(e),o=!0):this.subscribed(e+"-"+t)||i>-1&&(r.splice(i,1),o=!0),o&&this.updateEventListeners()}updateEventListeners(){for(let e in this.listeners){let t=this.listeners[e];t.components.length?t.handler||(t.handler=this.track.bind(this,e),this.el.addEventListener(e,t.handler)):t.handler&&(this.el.removeEventListener(e,t.handler),t.handler=null)}}track(e,t){var n=t.composedPath&&t.composedPath()||t.path,r=this.findTargets(n);r=this.bindComponents(e,r),this.triggerEvents(e,t,r)}findTargets(e){var t={};let n=Object.keys(this.componentMap);for(let r of e){let e=r.classList?[...r.classList]:[],i=e.filter((e=>this.abortClasses.includes(e)));if(i.length)break;let o=e.filter((e=>n.includes(e)));for(let e of o)t[this.componentMap[e]]=r}return t.group&&t.group===t.row&&delete t.row,t}bindComponents(e,t){var n=Object.keys(t).reverse(),r=this.listeners[e],i={};for(let e of n){let n,o=t[e],a=this.previousTargets[e];if(a&&a.target===o)n=a.component;else switch(e){case"row":case"group":if(r.components.includes("row")||r.components.includes("cell")){n=this.table.rowManager.getVisibleRows().find((e=>e.getElement()===o))}break;case"column":r.components.includes("column")&&(n=this.table.columnManager.findColumn(o));break;case"cell":r.components.includes("cell")&&(n=t.row.findCell(o))}n&&(t[e]=n,i[e]={target:o,component:n})}return this.previousTargets=i,t}triggerEvents(e,t,n){var r=this.listeners[e];for(let i in n)n[i]&&r.components.includes(i)&&this.dispatch(i+"-"+e,t,n[i])}}class zA{constructor(e){this.table=e,this.bindings={}}bind(e,t,n){this.bindings[e]||(this.bindings[e]={}),this.bindings[e][t]?console.warn("Unable to bind component handler, a matching function name is already bound",e,t,hanlder):this.bindings[e][t]=n}handle(e,t,n){if(this.bindings[e]&&this.bindings[e][n])return this.bindings[e][n].bind(null,t);"then"===n||"string"!=typeof n||n.startsWith("_")||console.error("The "+e+" component does not have a "+n+" function, have you checked that you have the correct Tabulator module installed?")}}class HA extends xD{constructor(e){super(e),this.loaderElement=this.createLoaderElement(),this.msgElement=this.createMsgElement(),this.loadingElement=null,this.errorElement=null,this.requestOrder=0,this.loading=!1}initialize(){var e;this.loaderElement.appendChild(this.msgElement),this.table.options.dataLoaderLoading&&("string"==typeof this.table.options.dataLoaderLoading?((e=document.createElement("template")).innerHTML=this.table.options.dataLoaderLoading.trim(),this.loadingElement=e.firstElementChild):this.loadingElement=this.table.options.dataLoaderLoading),this.table.options.dataLoaderError&&("string"==typeof this.table.options.dataLoaderError?((e=document.createElement("template")).innerHTML=this.table.options.dataLoaderError.trim(),this.errorElement=e.firstElementChild):this.errorElement=this.table.options.dataLoaderError)}createLoaderElement(){var e=document.createElement("div");return e.classList.add("tabulator-loader"),e}createMsgElement(){var e=document.createElement("div");return e.classList.add("tabulator-loader-msg"),e.setAttribute("role","alert"),e}load(e,t,n,r,i){var o=++this.requestOrder;if(this.dispatchExternal("dataLoading",e),!e||0!=e.indexOf("{")&&0!=e.indexOf("[")||(e=JSON.parse(e)),this.confirm("data-loading",e,t,n,i)){this.loading=!0,i||this.showLoader();t=this.chain("data-params",[e,n,i],t||{},{});return t=this.mapParams(t,this.table.options.dataSendParams),this.chain("data-load",[e,t,n,i],Promise.resolve([])).then((e=>{Array.isArray(e)||"object"!=typeof e||(e=this.mapParams(e,this.objectInvert(this.table.options.dataReceiveParams)));var t=this.chain("data-loaded",e,null,e);o==this.requestOrder?(this.hideLoader(),!1!==t&&(this.dispatchExternal("dataLoaded",t),this.table.rowManager.setData(t,r,!r))):console.warn("Data Load Response Blocked - An active data load request was blocked by an attempt to change table data while the request was being made")})).catch((e=>{console.error("Data Load Error: ",e),this.dispatchExternal("dataLoadError",e),i||this.showError(),setTimeout((()=>{this.hideLoader()}),3e3)})).finally((()=>{this.loading=!1}))}return this.dispatchExternal("dataLoaded",e),e||(e=[]),this.table.rowManager.setData(e,r,!r),Promise.resolve()}mapParams(e,t){var n={};for(let r in e)n[t.hasOwnProperty(r)?t[r]:r]=e[r];return n}objectInvert(e){var t={};for(let n in e)t[e[n]]=n;return t}blockActiveLoad(){this.requestOrder++}showLoader(){if("function"==typeof this.table.options.dataLoader?this.table.options.dataLoader():this.table.options.dataLoader){for(this.hideLoader();this.msgElement.firstChild;)this.msgElement.removeChild(this.msgElement.firstChild);this.msgElement.classList.remove("tabulator-error"),this.msgElement.classList.add("tabulator-loading"),this.loadingElement?this.msgElement.appendChild(this.loadingElement):this.msgElement.innerHTML=this.langText("data|loading"),this.table.element.appendChild(this.loaderElement)}}showError(){for(this.hideLoader();this.msgElement.firstChild;)this.msgElement.removeChild(this.msgElement.firstChild);this.msgElement.classList.remove("tabulator-loading"),this.msgElement.classList.add("tabulator-error"),this.errorElement?this.msgElement.appendChild(this.errorElement):this.msgElement.innerHTML=this.langText("data|error"),this.table.element.appendChild(this.loaderElement)}hideLoader(){this.loaderElement.parentNode&&this.loaderElement.parentNode.removeChild(this.loaderElement)}}class GA{constructor(e,t,n){this.table=e,this.events={},this.optionsList=t||{},this.subscriptionNotifiers={},this.dispatch=n?this._debugDispatch.bind(this):this._dispatch.bind(this),this.debug=n}subscriptionChange(e,t){this.subscriptionNotifiers[e]||(this.subscriptionNotifiers[e]=[]),this.subscriptionNotifiers[e].push(t),this.subscribed(e)&&this._notifiySubscriptionChange(e,!0)}subscribe(e,t){this.events[e]||(this.events[e]=[]),this.events[e].push(t),this._notifiySubscriptionChange(e,!0)}unsubscribe(e,t){var n;if(this.events[e]){if(t){if(n=this.events[e].findIndex((e=>e===t)),!(n>-1))return void console.warn("Cannot remove event, no matching event found:",e,t);this.events[e].splice(n,1)}else delete this.events[e];this._notifiySubscriptionChange(e,!1)}else console.warn("Cannot remove event, no events set on:",e)}subscribed(e){return this.events[e]&&this.events[e].length}_notifiySubscriptionChange(e,t){var n=this.subscriptionNotifiers[e];n&&n.forEach((e=>{e(t)}))}_dispatch(){var e,t=Array.from(arguments),n=t.shift();return this.events[n]&&this.events[n].forEach(((n,r)=>{let i=n.apply(this.table,t);r||(e=i)})),e}_debugDispatch(){var e=Array.from(arguments),t=e[0];return e[0]="ExternalEvent:"+e[0],(!0===this.debug||this.debug.includes(t))&&console.log(...e),this._dispatch(...arguments)}}class WA{constructor(e){this.events={},this.subscriptionNotifiers={},this.dispatch=e?this._debugDispatch.bind(this):this._dispatch.bind(this),this.chain=e?this._debugChain.bind(this):this._chain.bind(this),this.confirm=e?this._debugConfirm.bind(this):this._confirm.bind(this),this.debug=e}subscriptionChange(e,t){this.subscriptionNotifiers[e]||(this.subscriptionNotifiers[e]=[]),this.subscriptionNotifiers[e].push(t),this.subscribed(e)&&this._notifiySubscriptionChange(e,!0)}subscribe(e,t,n=1e4){this.events[e]||(this.events[e]=[]),this.events[e].push({callback:t,priority:n}),this.events[e].sort(((e,t)=>e.priority-t.priority)),this._notifiySubscriptionChange(e,!0)}unsubscribe(e,t){var n;if(this.events[e]){if(t){if(n=this.events[e].findIndex((e=>e.callback===t)),!(n>-1))return void console.warn("Cannot remove event, no matching event found:",e,t);this.events[e].splice(n,1)}this._notifiySubscriptionChange(e,!1)}else console.warn("Cannot remove event, no events set on:",e)}subscribed(e){return this.events[e]&&this.events[e].length}_chain(e,t,n,r){var i=n;return Array.isArray(t)||(t=[t]),this.subscribed(e)?(this.events[e].forEach(((e,n)=>{i=e.callback.apply(this,t.concat([i]))})),i):"function"==typeof r?r():r}_confirm(e,t){var n=!1;return Array.isArray(t)||(t=[t]),this.subscribed(e)&&this.events[e].forEach(((e,r)=>{e.callback.apply(this,t)&&(n=!0)})),n}_notifiySubscriptionChange(e,t){var n=this.subscriptionNotifiers[e];n&&n.forEach((e=>{e(t)}))}_dispatch(){var e=Array.from(arguments),t=e.shift();this.events[t]&&this.events[t].forEach((t=>{t.callback.apply(this,e)}))}_debugDispatch(){var e=Array.from(arguments),t=e[0];return e[0]="InternalEvent:"+t,(!0===this.debug||this.debug.includes(t))&&console.log(...e),this._dispatch(...arguments)}_debugChain(){var e=Array.from(arguments),t=e[0];return e[0]="InternalEvent:"+t,(!0===this.debug||this.debug.includes(t))&&console.log(...e),this._chain(...arguments)}_debugConfirm(){var e=Array.from(arguments),t=e[0];return e[0]="InternalEvent:"+t,(!0===this.debug||this.debug.includes(t))&&console.log(...e),this._confirm(...arguments)}}class UA{static register(e){UA.tables.push(e)}static deregister(e){var t=UA.tables.indexOf(e);t>-1&&UA.tables.splice(t,1)}static lookupTable(e,t){var n,r,i=[];if("string"==typeof e){if((n=document.querySelectorAll(e)).length)for(var o=0;o<n.length;o++)(r=UA.matchElement(n[o]))&&i.push(r)}else"undefined"!=typeof HTMLElement&&e instanceof HTMLElement||e instanceof QA?(r=UA.matchElement(e))&&i.push(r):Array.isArray(e)?e.forEach((function(e){i=i.concat(UA.lookupTable(e))})):t||console.warn("Table Connection Error - Invalid Selector",e);return i}static matchElement(e){return UA.tables.find((function(t){return e instanceof QA?t===e:t.element===e}))}}function VA(e){e.forEach((function(e){e.reinitializeWidth()})),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()}UA.tables=[];var XA={fitData:function(e){this.table.columnManager.renderer.reinitializeColumnWidths(e),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()},fitDataFill:VA,fitDataTable:VA,fitDataStretch:function(e){var t=0,n=this.table.rowManager.element.clientWidth,r=0,i=!1;e.forEach(((e,n)=>{e.widthFixed||e.reinitializeWidth(),(this.table.options.responsiveLayout?e.modules.responsive.visible:e.visible)&&(i=e),e.visible&&(t+=e.getWidth())})),i?(r=n-t+i.getWidth(),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&(i.setWidth(0),this.table.modules.responsiveLayout.update()),r>0?i.setWidth(r):i.reinitializeWidth()):this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()},fitColumns:function(e){var t,n,r=this.table.element.clientWidth,i=0,o=0,a=0,s=[],l=[],u=0,c=0;function d(e){return"string"==typeof e?e.indexOf("%")>-1?r/100*parseInt(e):parseInt(e):e}function h(e,t,n,r){var i=[],o=0,s=0,l=0,u=a,c=0,f=0,p=[];function m(e){return n*(e.column.definition.widthGrow||1)}function g(e){return d(e.width)-n*(e.column.definition.widthShrink||0)}return e.forEach((function(e,o){var a=r?g(e):m(e);e.column.minWidth>=a?i.push(e):e.column.maxWidth&&e.column.maxWidth<a?(e.width=e.column.maxWidth,t-=e.column.maxWidth,(u-=r?e.column.definition.widthShrink||1:e.column.definition.widthGrow||1)&&(n=Math.floor(t/u))):(p.push(e),f+=r?e.column.definition.widthShrink||1:e.column.definition.widthGrow||1)})),i.length?(i.forEach((function(e){o+=r?e.width-e.column.minWidth:e.column.minWidth,e.width=e.column.minWidth})),c=(s=t-o)-(l=f?Math.floor(s/f):s)*f,c+=h(p,s,l,r)):(c=f?t-Math.floor(t/f)*f:t,p.forEach((function(e){e.width=r?g(e):m(e)}))),c}this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update(),this.table.rowManager.element.scrollHeight>this.table.rowManager.element.clientHeight&&(r-=this.table.rowManager.element.offsetWidth-this.table.rowManager.element.clientWidth),e.forEach((function(e){var t,n,r;e.visible&&(t=e.definition.width,n=parseInt(e.minWidth),t?(r=d(t),i+=r>n?r:n,e.definition.widthShrink&&(l.push({column:e,width:r>n?r:n}),u+=e.definition.widthShrink)):(s.push({column:e,width:0}),a+=e.definition.widthGrow||1))})),o=r-i,t=Math.floor(o/a),c=h(s,o,t,!1),s.length&&c>0&&(s[s.length-1].width+=+c),s.forEach((function(e){o-=e.width})),(n=Math.abs(c)+o)>0&&u&&(c=h(l,n,Math.floor(n/u),!0)),l.length&&(l[l.length-1].width-=c),s.forEach((function(e){e.column.setWidth(e.width)})),l.forEach((function(e){e.column.setWidth(e.width)}))}};class qA extends MD{constructor(e){super(e,"layout"),this.mode=null,this.registerTableOption("layout","fitData"),this.registerTableOption("layoutColumnsOnNewData",!1),this.registerColumnOption("widthGrow"),this.registerColumnOption("widthShrink")}initialize(){var e=this.table.options.layout;qA.modes[e]?this.mode=e:(console.warn("Layout Error - invalid mode set, defaulting to 'fitData' : "+e),this.mode="fitData"),this.table.element.setAttribute("tabulator-layout",this.mode)}getMode(){return this.mode}layout(){qA.modes[this.mode].call(this,this.table.columnManager.columnsByIndex),this.dispatch("layout-refreshed")}}qA.moduleName="layout",qA.modes=XA;class KA extends MD{constructor(e){super(e),this.locale="default",this.lang=!1,this.bindings={},this.langList={},this.registerTableOption("locale",!1),this.registerTableOption("langs",{})}initialize(){this.langList=ED.deepClone(KA.langs),!1!==this.table.options.columnDefaults.headerFilterPlaceholder&&this.setHeaderFilterPlaceholder(this.table.options.columnDefaults.headerFilterPlaceholder);for(let e in this.table.options.langs)this.installLang(e,this.table.options.langs[e]);this.setLocale(this.table.options.locale),this.registerTableFunction("setLocale",this.setLocale.bind(this)),this.registerTableFunction("getLocale",this.getLocale.bind(this)),this.registerTableFunction("getLang",this.getLang.bind(this))}setHeaderFilterPlaceholder(e){this.langList.default.headerFilters.default=e}setHeaderFilterColumnPlaceholder(e,t){this.langList.default.headerFilters.columns[e]=t,this.lang&&!this.lang.headerFilters.columns[e]&&(this.lang.headerFilters.columns[e]=t)}installLang(e,t){this.langList[e]?this._setLangProp(this.langList[e],t):this.langList[e]=t}_setLangProp(e,t){for(let n in t)e[n]&&"object"==typeof e[n]?this._setLangProp(e[n],t[n]):e[n]=t[n]}setLocale(e){if(!0===(e=e||"default")&&navigator.language&&(e=navigator.language.toLowerCase()),e&&!this.langList[e]){let t=e.split("-")[0];this.langList[t]?(console.warn("Localization Error - Exact matching locale not found, using closest match: ",e,t),e=t):(console.warn("Localization Error - Matching locale not found, using default: ",e),e="default")}this.locale=e,this.lang=ED.deepClone(this.langList.default||{}),"default"!=e&&function e(t,n){for(var r in t)"object"==typeof t[r]?(n[r]||(n[r]={}),e(t[r],n[r])):n[r]=t[r]}(this.langList[e],this.lang),this.dispatchExternal("localized",this.locale,this.lang),this._executeBindings()}getLocale(e){return this.locale}getLang(e){return e?this.langList[e]:this.lang}getText(e,t){var n=(e=t?e+"|"+t:e).split("|");return this._getLangElement(n,this.locale)||""}_getLangElement(e,t){var n=this.lang;return e.forEach((function(e){var t;n&&(t=n[e],n=void 0!==t&&t)})),n}bind(e,t){this.bindings[e]||(this.bindings[e]=[]),this.bindings[e].push(t),t(this.getText(e),this.lang)}_executeBindings(){for(let e in this.bindings)this.bindings[e].forEach((t=>{t(this.getText(e),this.lang)}))}}KA.moduleName="localize",KA.langs={default:{groups:{item:"item",items:"items"},columns:{},data:{loading:"Loading",error:"Error"},pagination:{page_size:"Page Size",page_title:"Show Page",first:"First",first_title:"First Page",last:"Last",last_title:"Last Page",prev:"Prev",prev_title:"Prev Page",next:"Next",next_title:"Next Page",all:"All"},headerFilters:{default:"filter column...",columns:{}}}};class JA extends MD{constructor(e){super(e)}initialize(){this.registerTableFunction("tableComms",this.receive.bind(this))}getConnections(e){var t=[];return UA.lookupTable(e).forEach((e=>{this.table!==e&&t.push(e)})),t}send(e,t,n,r){var i=this.getConnections(e);i.forEach((e=>{e.tableComms(this.table.element,t,n,r)})),!i.length&&e&&console.warn("Table Connection Error - No tables matching selector found",e)}receive(e,t,n,r){if(this.table.modExists(t))return this.table.modules[t].commsReceived(e,n,r);console.warn("Inter-table Comms Error - no such module:",t)}}JA.moduleName="comms";var ZA=Object.freeze({__proto__:null,LayoutModule:qA,LocalizeModule:KA,CommsModule:JA});class $A{constructor(e,t){this.bindStaticFuctionality(e),this.bindModules(e,ZA,!0),t&&this.bindModules(e,t)}bindStaticFuctionality(e){e.moduleBindings={},e.extendModule=function(t,n,r){if(e.moduleBindings[t]){var i=e.moduleBindings[t][n];if(i)if("object"==typeof r)for(let e in r)i[e]=r[e];else console.warn("Module Error - Invalid value type, it must be an object");else console.warn("Module Error - property does not exist:",n)}else console.warn("Module Error - module does not exist:",t)},e.registerModule=function(t){Array.isArray(t)||(t=[t]),t.forEach((t=>{e.registerModuleBinding(t)}))},e.registerModuleBinding=function(t){e.moduleBindings[t.moduleName]=t},e.findTable=function(e){var t=UA.lookupTable(e,!0);return!(Array.isArray(t)&&!t.length)&&t},e.prototype.bindModules=function(){for(var t in this.modules={},e.moduleBindings){let n=e.moduleBindings[t];this.modules[t]=new n(this),n.prototype.moduleCore?this.modulesCore[t]=this.modules[t]:this.modulesRegular[t]=this.modules[t]}}}bindModules(e,t,n){var r=Object.values(t);n&&r.forEach((e=>{e.prototype.moduleCore=!0})),e.registerModule(r)}}class QA{constructor(e,t){this.options={},this.columnManager=null,this.rowManager=null,this.footerManager=null,this.vdomHoz=null,this.externalEvents=null,this.eventBus=null,this.interactionMonitor=!1,this.browser="",this.browserSlow=!1,this.browserMobile=!1,this.rtl=!1,this.originalElement=null,this.componentFunctionBinder=new zA(this),this.dataLoader=!1,this.modules={},this.modulesCore={},this.modulesRegular={},this.optionsList=new AA(this,"table constructor"),this.initialized=!1,this.initializeElement(e)&&(this.initialzeCoreSystems(t),setTimeout((()=>{this._create()}))),UA.register(this)}initializeElement(e){return"undefined"!=typeof HTMLElement&&e instanceof HTMLElement?(this.element=e,!0):"string"==typeof e?(this.element=document.querySelector(e),!!this.element||(console.error("Tabulator Creation Error - no element found matching selector: ",e),!1)):(console.error("Tabulator Creation Error - Invalid element provided:",e),!1)}initialzeCoreSystems(e){this.columnManager=new RA(this),this.rowManager=new jA(this),this.footerManager=new FA(this),this.dataLoader=new HA(this),this.bindModules(),this.options=this.optionsList.generate(QA.defaultOptions,e),this._clearObjectPointers(),this._mapDepricatedFunctionality(),this.externalEvents=new GA(this,this.options,this.options.debugEventsExternal),this.eventBus=new WA(this.options.debugEventsInternal),this.interactionMonitor=new BA(this),this.dataLoader.initialize(),this.columnManager.initialize(),this.rowManager.initialize(),this.footerManager.initialize()}_mapDepricatedFunctionality(){}_clearSelection(){this.element.classList.add("tabulator-block-select"),window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty(),this.element.classList.remove("tabulator-block-select")}_create(){this.externalEvents.dispatch("tableBuilding"),this.eventBus.dispatch("table-building"),this._rtlCheck(),this._buildElement(),this._initializeTable(),this._loadInitialData(),this.initialized=!0,this.externalEvents.dispatch("tableBuilt")}_rtlCheck(){var e=window.getComputedStyle(this.element);switch(this.options.textDirection){case"auto":if("rtl"!==e.direction)break;case"rtl":this.element.classList.add("tabulator-rtl"),this.rtl=!0;break;case"ltr":this.element.classList.add("tabulator-ltr");default:this.rtl=!1}}_clearObjectPointers(){this.options.columns=this.options.columns.slice(0),this.options.data&&!this.options.reactiveData&&(this.options.data=this.options.data.slice(0))}_buildElement(){var e,t=this.element,n=this.options;if("TABLE"===t.tagName){this.originalElement=this.element,e=document.createElement("div");var r=t.attributes;for(var i in r)"object"==typeof r[i]&&e.setAttribute(r[i].name,r[i].value);t.parentNode.replaceChild(e,t),this.element=t=e}for(t.classList.add("tabulator"),t.setAttribute("role","grid");t.firstChild;)t.removeChild(t.firstChild);n.height&&(n.height=isNaN(n.height)?n.height:n.height+"px",t.style.height=n.height),!1!==n.minHeight&&(n.minHeight=isNaN(n.minHeight)?n.minHeight:n.minHeight+"px",t.style.minHeight=n.minHeight),!1!==n.maxHeight&&(n.maxHeight=isNaN(n.maxHeight)?n.maxHeight:n.maxHeight+"px",t.style.maxHeight=n.maxHeight)}_initializeTable(){var e=this.element,t=this.options;this.columnManager.initialize(),this.rowManager.initialize(),this._detectBrowser();for(let e in this.modulesCore){this.modulesCore[e].initialize()}if("string"==typeof t.placeholder){var n=document.createElement("div");n.classList.add("tabulator-placeholder");var r=document.createElement("span");r.innerHTML=t.placeholder,n.appendChild(r),t.placeholder=n}e.appendChild(this.columnManager.getElement()),e.appendChild(this.rowManager.getElement()),t.footerElement&&this.footerManager.activate(),t.autoColumns&&t.data&&this.columnManager.generateColumnsFromRowData(this.options.data);for(let e in this.modulesRegular){this.modulesRegular[e].initialize()}this.columnManager.setColumns(t.columns),this.eventBus.dispatch("table-built")}_loadInitialData(){this.dataLoader.load(this.options.data)}destroy(){var e=this.element;for(UA.deregister(this),this.eventBus.dispatch("table-destroy"),this.rowManager.rows.forEach((function(e){e.wipe()})),this.rowManager.rows=[],this.rowManager.activeRows=[],this.rowManager.displayRows=[];e.firstChild;)e.removeChild(e.firstChild);e.classList.remove("tabulator")}_detectBrowser(){var e=navigator.userAgent||navigator.vendor||window.opera;e.indexOf("Trident")>-1?(this.browser="ie",this.browserSlow=!0):e.indexOf("Edge")>-1?(this.browser="edge",this.browserSlow=!0):e.indexOf("Firefox")>-1?(this.browser="firefox",this.browserSlow=!1):(this.browser="other",this.browserSlow=!1),this.browserMobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}blockRedraw(){return this.rowManager.blockRedraw()}restoreRedraw(){return this.rowManager.restoreRedraw()}setDataFromLocalFile(e){return new Promise(((t,n)=>{var r=document.createElement("input");r.type="file",r.accept=e||".json,application/json",r.addEventListener("change",(e=>{var i,o=r.files[0],a=new FileReader;a.readAsText(o),a.onload=e=>{try{i=JSON.parse(a.result)}catch(e){return console.warn("File Load Error - File contents is invalid JSON",e),void n(e)}this.setData(i).then((e=>{t(e)})).catch((e=>{t(e)}))},a.onerror=e=>{console.warn("File Load Error - Unable to read file"),n()}})),r.click()}))}setData(e,t,n){if(this.initialized)return this.dataLoader.load(e,t,n,!1);console.warn("setData failed - table not yet initialized. To set initial data please use the 'data' property in the table constructor.")}clearData(){this.dataLoader.blockActiveLoad(),this.rowManager.clearData()}getData(e){return this.rowManager.getData(e)}getDataCount(e){return this.rowManager.getDataCount(e)}replaceData(e,t,n){if(this.initialized)return this.dataLoader.load(e,t,n,!0,!0);console.warn("replaceData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}updateData(e){var t=0;if(this.initialized)return new Promise(((n,r)=>{this.dataLoader.blockActiveLoad(),"string"==typeof e&&(e=JSON.parse(e)),e?e.forEach((e=>{var r=this.rowManager.findRow(e[this.options.index]);r&&(t++,r.updateData(e).then((()=>{--t||n()})))})):(console.warn("Update Error - No data provided"),r("Update Error - No data provided"))}));console.warn("updateData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}addData(e,t,n){if(this.initialized)return new Promise(((r,i)=>{this.dataLoader.blockActiveLoad(),"string"==typeof e&&(e=JSON.parse(e)),e?this.rowManager.addRows(e,t,n).then((e=>{var t=[];e.forEach((function(e){t.push(e.getComponent())})),r(t)})):(console.warn("Update Error - No data provided"),i("Update Error - No data provided"))}));console.warn("addData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}updateOrAddData(e){var t=[],n=0;if(this.initialized)return new Promise(((r,i)=>{this.dataLoader.blockActiveLoad(),"string"==typeof e&&(e=JSON.parse(e)),e?e.forEach((e=>{var i=this.rowManager.findRow(e[this.options.index]);n++,i?i.updateData(e).then((()=>{n--,t.push(i.getComponent()),n||r(t)})):this.rowManager.addRows(e).then((e=>{n--,t.push(e[0].getComponent()),n||r(t)}))})):(console.warn("Update Error - No data provided"),i("Update Error - No data provided"))}));console.warn("updateOrAddData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}getRow(e){var t=this.rowManager.findRow(e);return t?t.getComponent():(console.warn("Find Error - No matching row found:",e),!1)}getRowFromPosition(e,t){var n=this.rowManager.getRowFromPosition(e,t);return n?n.getComponent():(console.warn("Find Error - No matching row found:",e),!1)}deleteRow(e){var t=[];Array.isArray(e)||(e=[e]);for(let n of e){let e=this.rowManager.findRow(n,!0);if(!e)return console.error("Delete Error - No matching row found:",n),Promise.reject("Delete Error - No matching row found");t.push(e)}return t.sort(((e,t)=>this.rowManager.rows.indexOf(e)>this.rowManager.rows.indexOf(t)?1:-1)),t.forEach((e=>{e.delete()})),this.rowManager.reRenderInPosition(),Promise.resolve()}addRow(e,t,n){if(this.initialized)return"string"==typeof e&&(e=JSON.parse(e)),this.rowManager.addRows(e,t,n).then((e=>e[0].getComponent()));console.warn("addRow failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}updateOrAddRow(e,t){var n=this.rowManager.findRow(e);return"string"==typeof t&&(t=JSON.parse(t)),n?n.updateData(t).then((()=>n.getComponent())):this.rowManager.addRows(t).then((e=>e[0].getComponent()))}updateRow(e,t){var n=this.rowManager.findRow(e);return"string"==typeof t&&(t=JSON.parse(t)),n?n.updateData(t).then((()=>{resolve(n.getComponent())})):(console.warn("Update Error - No matching row found:",e),Promise.reject("Update Error - No matching row found"))}scrollToRow(e,t,n){var r=this.rowManager.findRow(e);return r?this.rowManager.scrollToRow(r,t,n):(console.warn("Scroll Error - No matching row found:",e),Promise.reject("Scroll Error - No matching row found"))}moveRow(e,t,n){var r=this.rowManager.findRow(e);r?r.moveToRow(t,n):console.warn("Move Error - No matching row found:",e)}getRows(e){if(this.initialized)return this.rowManager.getComponents(e);console.warn("getRows failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}getRowPosition(e,t){var n=this.rowManager.findRow(e);return n?this.rowManager.getRowPosition(n,t):(console.warn("Position Error - No matching row found:",e),!1)}setColumns(e){this.initialized?this.columnManager.setColumns(e):console.warn("setColumns failed - table not yet initialized. To set initial data please use the 'columns' property in the table constructor.")}getColumns(e){return this.columnManager.getComponents(e)}getColumn(e){var t=this.columnManager.findColumn(e);return t?t.getComponent():(console.warn("Find Error - No matching column found:",e),!1)}getColumnDefinitions(){return this.columnManager.getDefinitionTree()}showColumn(e){var t=this.columnManager.findColumn(e);if(!t)return console.warn("Column Show Error - No matching column found:",e),!1;t.show()}hideColumn(e){var t=this.columnManager.findColumn(e);if(!t)return console.warn("Column Hide Error - No matching column found:",e),!1;t.hide()}toggleColumn(e){var t=this.columnManager.findColumn(e);if(!t)return console.warn("Column Visibility Toggle Error - No matching column found:",e),!1;t.visible?t.hide():t.show()}addColumn(e,t,n){var r=this.columnManager.findColumn(n);return this.columnManager.addColumn(e,t,r).then((e=>e.getComponent()))}deleteColumn(e){var t=this.columnManager.findColumn(e);return t?t.delete():(console.warn("Column Delete Error - No matching column found:",e),Promise.reject())}updateColumnDefinition(e,t){var n=this.columnManager.findColumn(e);return n?n.updateDefinition(t):(console.warn("Column Update Error - No matching column found:",e),Promise.reject())}moveColumn(e,t,n){var r=this.columnManager.findColumn(e),i=this.columnManager.findColumn(t);r?i?this.columnManager.moveColumn(r,i,n):console.warn("Move Error - No matching column found:",i):console.warn("Move Error - No matching column found:",e)}scrollToColumn(e,t,n){return new Promise(((r,i)=>{var o=this.columnManager.findColumn(e);return o?this.columnManager.scrollToColumn(o,t,n):(console.warn("Scroll Error - No matching column found:",e),Promise.reject("Scroll Error - No matching column found"))}))}redraw(e){this.initialized?(this.columnManager.redraw(e),this.rowManager.redraw(e)):console.warn("redraw failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}setHeight(e){this.options.height=isNaN(e)?e:e+"px",this.element.style.height=this.options.height,this.rowManager.initializeRenderer(),this.rowManager.redraw()}on(e,t){this.externalEvents.subscribe(e,t)}off(e,t){this.externalEvents.unsubscribe(e,t)}dispatchEvent(){Array.from(arguments).shift();this.externalEvents.dispatch(...arguments)}modExists(e,t){return!!this.modules[e]||(t&&console.error("Tabulator Module Not Installed: "+e),!1)}module(e){var t=this.modules[e];return t||console.error("Tabulator module not installed: "+e),t}}QA.defaultOptions={debugEventsExternal:!1,debugEventsInternal:!1,debugInvalidOptions:!0,height:!1,minHeight:!1,maxHeight:!1,columnMaxWidth:!1,columnHeaderVertAlign:"top",columns:[],columnDefaults:{},data:!1,autoColumns:!1,autoColumnsDefinitions:!1,nestedFieldSeparator:".",tooltipGenerationMode:"load",footerElement:!1,index:"id",textDirection:"auto",addRowPos:"bottom",headerVisible:!0,renderVertical:"virtual",renderHorizontal:"basic",renderVerticalBuffer:0,scrollToRowPosition:"top",scrollToRowIfVisible:!0,scrollToColumnPosition:"left",scrollToColumnIfVisible:!0,rowFormatter:!1,rowFormatterPrint:null,rowFormatterClipboard:null,rowFormatterHtmlOutput:null,placeholder:!1,dataLoader:!0,dataLoaderLoading:!1,dataLoaderError:!1,dataSendParams:{},dataReceiveParams:{}},new $A(QA);new $A(class extends QA{},DA);QA.registerModule([cA,lA,tA,TA,$D,eA,EA]);var eP=o(25435),tP=o.n(eP);const nP=(()=>{if("undefined"==typeof self)return!1;if("top"in self&&self!==top)try{top.location}catch{return!1}else if("showOpenFilePicker"in self)return"showOpenFilePicker";return!1})(),rP=nP?o.e(784).then(o.bind(o,87784)):o.e(193).then(o.bind(o,6193));async function iP(...e){return(await rP).default(...e)}nP?o.e(557).then(o.bind(o,18557)):o.e(302).then(o.bind(o,24302));nP?o.e(173).then(o.bind(o,2173)):o.e(729).then(o.bind(o,91729));var oP=o(93162);function aP(e,t){var n=e.__state.conversionName.toString(),r=Math.round(e.r),i=Math.round(e.g),o=Math.round(e.b),a=e.a,s=Math.round(e.h),l=e.s.toFixed(1),u=e.v.toFixed(1);if(t||"THREE_CHAR_HEX"===n||"SIX_CHAR_HEX"===n){for(var c=e.hex.toString(16);c.length<6;)c="0"+c;return"#"+c}return"CSS_RGB"===n?"rgb("+r+","+i+","+o+")":"CSS_RGBA"===n?"rgba("+r+","+i+","+o+","+a+")":"HEX"===n?"0x"+e.hex.toString(16):"RGB_ARRAY"===n?"["+r+","+i+","+o+"]":"RGBA_ARRAY"===n?"["+r+","+i+","+o+","+a+"]":"RGB_OBJ"===n?"{r:"+r+",g:"+i+",b:"+o+"}":"RGBA_OBJ"===n?"{r:"+r+",g:"+i+",b:"+o+",a:"+a+"}":"HSV_OBJ"===n?"{h:"+s+",s:"+l+",v:"+u+"}":"HSVA_OBJ"===n?"{h:"+s+",s:"+l+",v:"+u+",a:"+a+"}":"unknown format"}var sP=Array.prototype.forEach,lP=Array.prototype.slice,uP={BREAK:{},extend:function(e){return this.each(lP.call(arguments,1),(function(t){(this.isObject(t)?Object.keys(t):[]).forEach(function(n){this.isUndefined(t[n])||(e[n]=t[n])}.bind(this))}),this),e},defaults:function(e){return this.each(lP.call(arguments,1),(function(t){(this.isObject(t)?Object.keys(t):[]).forEach(function(n){this.isUndefined(e[n])&&(e[n]=t[n])}.bind(this))}),this),e},compose:function(){var e=lP.call(arguments);return function(){for(var t=lP.call(arguments),n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},each:function(e,t,n){if(e)if(sP&&e.forEach&&e.forEach===sP)e.forEach(t,n);else if(e.length===e.length+0){var r,i=void 0;for(i=0,r=e.length;i<r;i++)if(i in e&&t.call(n,e[i],i)===this.BREAK)return}else for(var o in e)if(t.call(n,e[o],o)===this.BREAK)return},defer:function(e){setTimeout(e,0)},debounce:function(e,t,n){var r=void 0;return function(){var i=this,o=arguments;function a(){r=null,n||e.apply(i,o)}var s=n||!r;clearTimeout(r),r=setTimeout(a,t),s&&e.apply(i,o)}},toArray:function(e){return e.toArray?e.toArray():lP.call(e)},isUndefined:function(e){return void 0===e},isNull:function(e){return null===e},isNaN:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return isNaN(e)})),isArray:Array.isArray||function(e){return e.constructor===Array},isObject:function(e){return e===Object(e)},isNumber:function(e){return e===e+0},isString:function(e){return e===e+""},isBoolean:function(e){return!1===e||!0===e},isFunction:function(e){return e instanceof Function}},cP=[{litmus:uP.isString,conversions:{THREE_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString()+t[1].toString()+t[2].toString()+t[2].toString()+t[3].toString()+t[3].toString(),0)}},write:aP},SIX_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9]{6})$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString(),0)}},write:aP},CSS_RGB:{read:function(e){var t=e.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3])}},write:aP},CSS_RGBA:{read:function(e){var t=e.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3]),a:parseFloat(t[4])}},write:aP}}},{litmus:uP.isNumber,conversions:{HEX:{read:function(e){return{space:"HEX",hex:e,conversionName:"HEX"}},write:function(e){return e.hex}}}},{litmus:uP.isArray,conversions:{RGB_ARRAY:{read:function(e){return 3===e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2]}},write:function(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function(e){return 4===e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2],a:e[3]}},write:function(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:uP.isObject,conversions:{RGBA_OBJ:{read:function(e){return!!(uP.isNumber(e.r)&&uP.isNumber(e.g)&&uP.isNumber(e.b)&&uP.isNumber(e.a))&&{space:"RGB",r:e.r,g:e.g,b:e.b,a:e.a}},write:function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function(e){return!!(uP.isNumber(e.r)&&uP.isNumber(e.g)&&uP.isNumber(e.b))&&{space:"RGB",r:e.r,g:e.g,b:e.b}},write:function(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function(e){return!!(uP.isNumber(e.h)&&uP.isNumber(e.s)&&uP.isNumber(e.v)&&uP.isNumber(e.a))&&{space:"HSV",h:e.h,s:e.s,v:e.v,a:e.a}},write:function(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function(e){return!!(uP.isNumber(e.h)&&uP.isNumber(e.s)&&uP.isNumber(e.v))&&{space:"HSV",h:e.h,s:e.s,v:e.v}},write:function(e){return{h:e.h,s:e.s,v:e.v}}}}}],dP=void 0,hP=void 0,fP=function(){hP=!1;var e=arguments.length>1?uP.toArray(arguments):arguments[0];return uP.each(cP,(function(t){if(t.litmus(e))return uP.each(t.conversions,(function(t,n){if(dP=t.read(e),!1===hP&&!1!==dP)return hP=dP,dP.conversionName=n,dP.conversion=t,uP.BREAK})),uP.BREAK})),hP},pP=void 0,mP={hsv_to_rgb:function(e,t,n){var r=Math.floor(e/60)%6,i=e/60-Math.floor(e/60),o=n*(1-t),a=n*(1-i*t),s=n*(1-(1-i)*t),l=[[n,s,o],[a,n,o],[o,n,s],[o,a,n],[s,o,n],[n,o,a]][r];return{r:255*l[0],g:255*l[1],b:255*l[2]}},rgb_to_hsv:function(e,t,n){var r=Math.min(e,t,n),i=Math.max(e,t,n),o=i-r,a=void 0;return 0===i?{h:NaN,s:0,v:0}:(a=e===i?(t-n)/o:t===i?2+(n-e)/o:4+(e-t)/o,(a/=6)<0&&(a+=1),{h:360*a,s:o/i,v:i/255})},rgb_to_hex:function(e,t,n){var r=this.hex_with_component(0,2,e);return r=this.hex_with_component(r,1,t),r=this.hex_with_component(r,0,n)},component_from_hex:function(e,t){return e>>8*t&255},hex_with_component:function(e,t,n){return n<<(pP=8*t)|e&~(255<<pP)}},gP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vP=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},yP=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),bP=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0},_P=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},wP=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},xP=function(){function e(){if(vP(this,e),this.__state=fP.apply(this,arguments),!1===this.__state)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return yP(e,[{key:"toString",value:function(){return aP(this)}},{key:"toHexString",value:function(){return aP(this,!0)}},{key:"toOriginal",value:function(){return this.__state.conversion.write(this)}}]),e}();function MP(e,t,n){Object.defineProperty(e,t,{get:function(){return"RGB"===this.__state.space||xP.recalculateRGB(this,t,n),this.__state[t]},set:function(e){"RGB"!==this.__state.space&&(xP.recalculateRGB(this,t,n),this.__state.space="RGB"),this.__state[t]=e}})}function EP(e,t){Object.defineProperty(e,t,{get:function(){return"HSV"===this.__state.space||xP.recalculateHSV(this),this.__state[t]},set:function(e){"HSV"!==this.__state.space&&(xP.recalculateHSV(this),this.__state.space="HSV"),this.__state[t]=e}})}xP.recalculateRGB=function(e,t,n){if("HEX"===e.__state.space)e.__state[t]=mP.component_from_hex(e.__state.hex,n);else{if("HSV"!==e.__state.space)throw new Error("Corrupted color state");uP.extend(e.__state,mP.hsv_to_rgb(e.__state.h,e.__state.s,e.__state.v))}},xP.recalculateHSV=function(e){var t=mP.rgb_to_hsv(e.r,e.g,e.b);uP.extend(e.__state,{s:t.s,v:t.v}),uP.isNaN(t.h)?uP.isUndefined(e.__state.h)&&(e.__state.h=0):e.__state.h=t.h},xP.COMPONENTS=["r","g","b","h","s","v","hex","a"],MP(xP.prototype,"r",2),MP(xP.prototype,"g",1),MP(xP.prototype,"b",0),EP(xP.prototype,"h"),EP(xP.prototype,"s"),EP(xP.prototype,"v"),Object.defineProperty(xP.prototype,"a",{get:function(){return this.__state.a},set:function(e){this.__state.a=e}}),Object.defineProperty(xP.prototype,"hex",{get:function(){return"HEX"!==this.__state.space&&(this.__state.hex=mP.rgb_to_hex(this.r,this.g,this.b),this.__state.space="HEX"),this.__state.hex},set:function(e){this.__state.space="HEX",this.__state.hex=e}});var SP=function(){function e(t,n){vP(this,e),this.initialValue=t[n],this.domElement=document.createElement("div"),this.object=t,this.property=n,this.__onChange=void 0,this.__onFinishChange=void 0}return yP(e,[{key:"onChange",value:function(e){return this.__onChange=e,this}},{key:"onFinishChange",value:function(e){return this.__onFinishChange=e,this}},{key:"setValue",value:function(e){return this.object[this.property]=e,this.__onChange&&this.__onChange.call(this,e),this.updateDisplay(),this}},{key:"getValue",value:function(){return this.object[this.property]}},{key:"updateDisplay",value:function(){return this}},{key:"isModified",value:function(){return this.initialValue!==this.getValue()}}]),e}(),kP={};uP.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},(function(e,t){uP.each(e,(function(e){kP[e]=t}))}));var TP=/(\d+(\.\d+)?)px/;function LP(e){if("0"===e||uP.isUndefined(e))return 0;var t=e.match(TP);return uP.isNull(t)?0:parseFloat(t[1])}var CP={makeSelectable:function(e,t){void 0!==e&&void 0!==e.style&&(e.onselectstart=t?function(){return!1}:function(){},e.style.MozUserSelect=t?"auto":"none",e.style.KhtmlUserSelect=t?"auto":"none",e.unselectable=t?"on":"off")},makeFullscreen:function(e,t,n){var r=n,i=t;uP.isUndefined(i)&&(i=!0),uP.isUndefined(r)&&(r=!0),e.style.position="absolute",i&&(e.style.left=0,e.style.right=0),r&&(e.style.top=0,e.style.bottom=0)},fakeEvent:function(e,t,n,r){var i=n||{},o=kP[t];if(!o)throw new Error("Event type "+t+" not supported.");var a=document.createEvent(o);switch(o){case"MouseEvents":var s=i.x||i.clientX||0,l=i.y||i.clientY||0;a.initMouseEvent(t,i.bubbles||!1,i.cancelable||!0,window,i.clickCount||1,0,0,s,l,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var u=a.initKeyboardEvent||a.initKeyEvent;uP.defaults(i,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),u(t,i.bubbles||!1,i.cancelable,window,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,i.keyCode,i.charCode);break;default:a.initEvent(t,i.bubbles||!1,i.cancelable||!0)}uP.defaults(a,r),e.dispatchEvent(a)},bind:function(e,t,n,r){var i=r||!1;return e.addEventListener?e.addEventListener(t,n,i):e.attachEvent&&e.attachEvent("on"+t,n),CP},unbind:function(e,t,n,r){var i=r||!1;return e.removeEventListener?e.removeEventListener(t,n,i):e.detachEvent&&e.detachEvent("on"+t,n),CP},addClass:function(e,t){if(void 0===e.className)e.className=t;else if(e.className!==t){var n=e.className.split(/ +/);-1===n.indexOf(t)&&(n.push(t),e.className=n.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return CP},removeClass:function(e,t){if(t)if(e.className===t)e.removeAttribute("class");else{var n=e.className.split(/ +/),r=n.indexOf(t);-1!==r&&(n.splice(r,1),e.className=n.join(" "))}else e.className=void 0;return CP},hasClass:function(e,t){return new RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)").test(e.className)||!1},getWidth:function(e){var t=getComputedStyle(e);return LP(t["border-left-width"])+LP(t["border-right-width"])+LP(t["padding-left"])+LP(t["padding-right"])+LP(t.width)},getHeight:function(e){var t=getComputedStyle(e);return LP(t["border-top-width"])+LP(t["border-bottom-width"])+LP(t["padding-top"])+LP(t["padding-bottom"])+LP(t.height)},getOffset:function(e){var t=e,n={left:0,top:0};if(t.offsetParent)do{n.left+=t.offsetLeft,n.top+=t.offsetTop,t=t.offsetParent}while(t);return n},isActive:function(e){return e===document.activeElement&&(e.type||e.href)}},DP=function(e){function t(e,n){vP(this,t);var r=wP(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),i=r;return r.__prev=r.getValue(),r.__checkbox=document.createElement("input"),r.__checkbox.setAttribute("type","checkbox"),CP.bind(r.__checkbox,"change",(function(){i.setValue(!i.__prev)}),!1),r.domElement.appendChild(r.__checkbox),r.updateDisplay(),r}return _P(t,e),yP(t,[{key:"setValue",value:function(e){var n=bP(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),n}},{key:"updateDisplay",value:function(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),bP(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(SP),AP=function(e){function t(e,n,r){vP(this,t);var i=wP(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),o=r,a=i;if(i.__select=document.createElement("select"),uP.isArray(o)){var s={};uP.each(o,(function(e){s[e]=e})),o=s}return uP.each(o,(function(e,t){var n=document.createElement("option");n.innerHTML=t,n.setAttribute("value",e),a.__select.appendChild(n)})),i.updateDisplay(),CP.bind(i.__select,"change",(function(){var e=this.options[this.selectedIndex].value;a.setValue(e)})),i.domElement.appendChild(i.__select),i}return _P(t,e),yP(t,[{key:"setValue",value:function(e){var n=bP(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),n}},{key:"updateDisplay",value:function(){return CP.isActive(this.__select)?this:(this.__select.value=this.getValue(),bP(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this))}}]),t}(SP),PP=function(e){function t(e,n){vP(this,t);var r=wP(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),i=r;function o(){i.setValue(i.__input.value)}return r.__input=document.createElement("input"),r.__input.setAttribute("type","text"),CP.bind(r.__input,"keyup",o),CP.bind(r.__input,"change",o),CP.bind(r.__input,"blur",(function(){i.__onFinishChange&&i.__onFinishChange.call(i,i.getValue())})),CP.bind(r.__input,"keydown",(function(e){13===e.keyCode&&this.blur()})),r.updateDisplay(),r.domElement.appendChild(r.__input),r}return _P(t,e),yP(t,[{key:"updateDisplay",value:function(){return CP.isActive(this.__input)||(this.__input.value=this.getValue()),bP(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(SP);function OP(e){var t=e.toString();return t.indexOf(".")>-1?t.length-t.indexOf(".")-1:0}var IP=function(e){function t(e,n,r){vP(this,t);var i=wP(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),o=r||{};return i.__min=o.min,i.__max=o.max,i.__step=o.step,uP.isUndefined(i.__step)?0===i.initialValue?i.__impliedStep=1:i.__impliedStep=Math.pow(10,Math.floor(Math.log(Math.abs(i.initialValue))/Math.LN10))/10:i.__impliedStep=i.__step,i.__precision=OP(i.__impliedStep),i}return _P(t,e),yP(t,[{key:"setValue",value:function(e){var n=e;return void 0!==this.__min&&n<this.__min?n=this.__min:void 0!==this.__max&&n>this.__max&&(n=this.__max),void 0!==this.__step&&n%this.__step!=0&&(n=Math.round(n/this.__step)*this.__step),bP(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,n)}},{key:"min",value:function(e){return this.__min=e,this}},{key:"max",value:function(e){return this.__max=e,this}},{key:"step",value:function(e){return this.__step=e,this.__impliedStep=e,this.__precision=OP(e),this}}]),t}(SP);var RP=function(e){function t(e,n,r){vP(this,t);var i=wP(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r));i.__truncationSuspended=!1;var o=i,a=void 0;function s(){o.__onFinishChange&&o.__onFinishChange.call(o,o.getValue())}function l(e){var t=a-e.clientY;o.setValue(o.getValue()+t*o.__impliedStep),a=e.clientY}function u(){CP.unbind(window,"mousemove",l),CP.unbind(window,"mouseup",u),s()}return i.__input=document.createElement("input"),i.__input.setAttribute("type","text"),CP.bind(i.__input,"change",(function(){var e=parseFloat(o.__input.value);uP.isNaN(e)||o.setValue(e)})),CP.bind(i.__input,"blur",(function(){s()})),CP.bind(i.__input,"mousedown",(function(e){CP.bind(window,"mousemove",l),CP.bind(window,"mouseup",u),a=e.clientY})),CP.bind(i.__input,"keydown",(function(e){13===e.keyCode&&(o.__truncationSuspended=!0,this.blur(),o.__truncationSuspended=!1,s())})),i.updateDisplay(),i.domElement.appendChild(i.__input),i}return _P(t,e),yP(t,[{key:"updateDisplay",value:function(){return this.__input.value=this.__truncationSuspended?this.getValue():function(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n}(this.getValue(),this.__precision),bP(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(IP);function NP(e,t,n,r,i){return r+(e-t)/(n-t)*(i-r)}var YP=function(e){function t(e,n,r,i,o){vP(this,t);var a=wP(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,{min:r,max:i,step:o})),s=a;function l(e){e.preventDefault();var t=s.__background.getBoundingClientRect();return s.setValue(NP(e.clientX,t.left,t.right,s.__min,s.__max)),!1}function u(){CP.unbind(window,"mousemove",l),CP.unbind(window,"mouseup",u),s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}function c(e){var t=e.touches[0].clientX,n=s.__background.getBoundingClientRect();s.setValue(NP(t,n.left,n.right,s.__min,s.__max))}function d(){CP.unbind(window,"touchmove",c),CP.unbind(window,"touchend",d),s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}return a.__background=document.createElement("div"),a.__foreground=document.createElement("div"),CP.bind(a.__background,"mousedown",(function(e){document.activeElement.blur(),CP.bind(window,"mousemove",l),CP.bind(window,"mouseup",u),l(e)})),CP.bind(a.__background,"touchstart",(function(e){if(1!==e.touches.length)return;CP.bind(window,"touchmove",c),CP.bind(window,"touchend",d),c(e)})),CP.addClass(a.__background,"slider"),CP.addClass(a.__foreground,"slider-fg"),a.updateDisplay(),a.__background.appendChild(a.__foreground),a.domElement.appendChild(a.__background),a}return _P(t,e),yP(t,[{key:"updateDisplay",value:function(){var e=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*e+"%",bP(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(IP),jP=function(e){function t(e,n,r){vP(this,t);var i=wP(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),o=i;return i.__button=document.createElement("div"),i.__button.innerHTML=void 0===r?"Fire":r,CP.bind(i.__button,"click",(function(e){return e.preventDefault(),o.fire(),!1})),CP.addClass(i.__button,"button"),i.domElement.appendChild(i.__button),i}return _P(t,e),yP(t,[{key:"fire",value:function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}]),t}(SP),FP=function(e){function t(e,n){vP(this,t);var r=wP(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));r.__color=new xP(r.getValue()),r.__temp=new xP(0);var i=r;r.domElement=document.createElement("div"),CP.makeSelectable(r.domElement,!1),r.__selector=document.createElement("div"),r.__selector.className="selector",r.__saturation_field=document.createElement("div"),r.__saturation_field.className="saturation-field",r.__field_knob=document.createElement("div"),r.__field_knob.className="field-knob",r.__field_knob_border="2px solid ",r.__hue_knob=document.createElement("div"),r.__hue_knob.className="hue-knob",r.__hue_field=document.createElement("div"),r.__hue_field.className="hue-field",r.__input=document.createElement("input"),r.__input.type="text",r.__input_textShadow="0 1px 1px ",CP.bind(r.__input,"keydown",(function(e){13===e.keyCode&&d.call(this)})),CP.bind(r.__input,"blur",d),CP.bind(r.__selector,"mousedown",(function(){CP.addClass(this,"drag").bind(window,"mouseup",(function(){CP.removeClass(i.__selector,"drag")}))})),CP.bind(r.__selector,"touchstart",(function(){CP.addClass(this,"drag").bind(window,"touchend",(function(){CP.removeClass(i.__selector,"drag")}))}));var o,a=document.createElement("div");function s(e){f(e),CP.bind(window,"mousemove",f),CP.bind(window,"touchmove",f),CP.bind(window,"mouseup",u),CP.bind(window,"touchend",u)}function l(e){p(e),CP.bind(window,"mousemove",p),CP.bind(window,"touchmove",p),CP.bind(window,"mouseup",c),CP.bind(window,"touchend",c)}function u(){CP.unbind(window,"mousemove",f),CP.unbind(window,"touchmove",f),CP.unbind(window,"mouseup",u),CP.unbind(window,"touchend",u),h()}function c(){CP.unbind(window,"mousemove",p),CP.unbind(window,"touchmove",p),CP.unbind(window,"mouseup",c),CP.unbind(window,"touchend",c),h()}function d(){var e=fP(this.value);!1!==e?(i.__color.__state=e,i.setValue(i.__color.toOriginal())):this.value=i.__color.toString()}function h(){i.__onFinishChange&&i.__onFinishChange.call(i,i.__color.toOriginal())}function f(e){-1===e.type.indexOf("touch")&&e.preventDefault();var t=i.__saturation_field.getBoundingClientRect(),n=e.touches&&e.touches[0]||e,r=n.clientX,o=n.clientY,a=(r-t.left)/(t.right-t.left),s=1-(o-t.top)/(t.bottom-t.top);return s>1?s=1:s<0&&(s=0),a>1?a=1:a<0&&(a=0),i.__color.v=s,i.__color.s=a,i.setValue(i.__color.toOriginal()),!1}function p(e){-1===e.type.indexOf("touch")&&e.preventDefault();var t=i.__hue_field.getBoundingClientRect(),n=1-((e.touches&&e.touches[0]||e).clientY-t.top)/(t.bottom-t.top);return n>1?n=1:n<0&&(n=0),i.__color.h=360*n,i.setValue(i.__color.toOriginal()),!1}return uP.extend(r.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),uP.extend(r.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:r.__field_knob_border+(r.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),uP.extend(r.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),uP.extend(r.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),uP.extend(a.style,{width:"100%",height:"100%",background:"none"}),zP(a,"top","rgba(0,0,0,0)","#000"),uP.extend(r.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),(o=r.__hue_field).style.background="",o.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",o.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",o.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",o.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",o.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",uP.extend(r.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:r.__input_textShadow+"rgba(0,0,0,0.7)"}),CP.bind(r.__saturation_field,"mousedown",s),CP.bind(r.__saturation_field,"touchstart",s),CP.bind(r.__field_knob,"mousedown",s),CP.bind(r.__field_knob,"touchstart",s),CP.bind(r.__hue_field,"mousedown",l),CP.bind(r.__hue_field,"touchstart",l),r.__saturation_field.appendChild(a),r.__selector.appendChild(r.__field_knob),r.__selector.appendChild(r.__saturation_field),r.__selector.appendChild(r.__hue_field),r.__hue_field.appendChild(r.__hue_knob),r.domElement.appendChild(r.__input),r.domElement.appendChild(r.__selector),r.updateDisplay(),r}return _P(t,e),yP(t,[{key:"updateDisplay",value:function(){var e=fP(this.getValue());if(!1!==e){var t=!1;uP.each(xP.COMPONENTS,(function(n){if(!uP.isUndefined(e[n])&&!uP.isUndefined(this.__color.__state[n])&&e[n]!==this.__color.__state[n])return t=!0,{}}),this),t&&uP.extend(this.__color.__state,e)}uP.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var n=this.__color.v<.5||this.__color.s>.5?255:0,r=255-n;uP.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+n+","+n+","+n+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,zP(this.__saturation_field,"left","#fff",this.__temp.toHexString()),this.__input.value=this.__color.toString(),uP.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+n+","+n+","+n+")",textShadow:this.__input_textShadow+"rgba("+r+","+r+","+r+",.7)"})}}]),t}(SP),BP=["-moz-","-o-","-webkit-","-ms-",""];function zP(e,t,n,r){e.style.background="",uP.each(BP,(function(i){e.style.cssText+="background: "+i+"linear-gradient("+t+", "+n+" 0%, "+r+" 100%); "}))}var HP=function(e,t){var n=t||document,r=document.createElement("style");r.type="text/css",r.innerHTML=e;var i=n.getElementsByTagName("head")[0];try{i.appendChild(r)}catch(e){}},GP='<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n\n    </div>\n\n  </div>\n\n</div>',WP=function(e,t){var n=e[t];return uP.isArray(arguments[2])||uP.isObject(arguments[2])?new AP(e,t,arguments[2]):uP.isNumber(n)?uP.isNumber(arguments[2])&&uP.isNumber(arguments[3])?uP.isNumber(arguments[4])?new YP(e,t,arguments[2],arguments[3],arguments[4]):new YP(e,t,arguments[2],arguments[3]):uP.isNumber(arguments[4])?new RP(e,t,{min:arguments[2],max:arguments[3],step:arguments[4]}):new RP(e,t,{min:arguments[2],max:arguments[3]}):uP.isString(n)?new PP(e,t):uP.isFunction(n)?new jP(e,t,""):uP.isBoolean(n)?new DP(e,t):null};var UP=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,1e3/60)},VP=function(){function e(){vP(this,e),this.backgroundElement=document.createElement("div"),uP.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),CP.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),uP.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var t=this;CP.bind(this.backgroundElement,"click",(function(){t.hide()}))}return yP(e,[{key:"show",value:function(){var e=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),uP.defer((function(){e.backgroundElement.style.opacity=1,e.domElement.style.opacity=1,e.domElement.style.webkitTransform="scale(1)"}))}},{key:"hide",value:function(){var e=this,t=function t(){e.domElement.style.display="none",e.backgroundElement.style.display="none",CP.unbind(e.domElement,"webkitTransitionEnd",t),CP.unbind(e.domElement,"transitionend",t),CP.unbind(e.domElement,"oTransitionEnd",t)};CP.bind(this.domElement,"webkitTransitionEnd",t),CP.bind(this.domElement,"transitionend",t),CP.bind(this.domElement,"oTransitionEnd",t),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"}},{key:"layout",value:function(){this.domElement.style.left=window.innerWidth/2-CP.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-CP.getHeight(this.domElement)/2+"px"}}]),e}(),XP=function(e){if(e&&"undefined"!=typeof window){var t=document.createElement("style");return t.setAttribute("type","text/css"),t.innerHTML=e,document.head.appendChild(t),e}}(".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n");HP(XP);var qP="Default",KP=function(){try{return!!window.localStorage}catch(e){return!1}}(),JP=void 0,ZP=!0,$P=void 0,QP=!1,eO=[],tO=function e(t){var n=this,r=t||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),CP.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],r=uP.defaults(r,{closeOnTop:!1,autoPlace:!0,width:e.DEFAULT_WIDTH}),r=uP.defaults(r,{resizable:r.autoPlace,hideable:r.autoPlace}),uP.isUndefined(r.load)?r.load={preset:qP}:r.preset&&(r.load.preset=r.preset),uP.isUndefined(r.parent)&&r.hideable&&eO.push(this),r.resizable=uP.isUndefined(r.parent)&&r.resizable,r.autoPlace&&uP.isUndefined(r.scrollable)&&(r.scrollable=!0);var i=KP&&"true"===localStorage.getItem(sO(this,"isLocal")),o=void 0,a=void 0;if(Object.defineProperties(this,{parent:{get:function(){return r.parent}},scrollable:{get:function(){return r.scrollable}},autoPlace:{get:function(){return r.autoPlace}},closeOnTop:{get:function(){return r.closeOnTop}},preset:{get:function(){return n.parent?n.getRoot().preset:r.load.preset},set:function(e){n.parent?n.getRoot().preset=e:r.load.preset=e,function(e){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].value===e.preset&&(e.__preset_select.selectedIndex=t)}(this),n.revert()}},width:{get:function(){return r.width},set:function(e){r.width=e,hO(n,e)}},name:{get:function(){return r.name},set:function(e){r.name=e,a&&(a.innerHTML=r.name)}},closed:{get:function(){return r.closed},set:function(t){r.closed=t,r.closed?CP.addClass(n.__ul,e.CLASS_CLOSED):CP.removeClass(n.__ul,e.CLASS_CLOSED),this.onResize(),n.__closeButton&&(n.__closeButton.innerHTML=t?e.TEXT_OPEN:e.TEXT_CLOSED)}},load:{get:function(){return r.load}},useLocalStorage:{get:function(){return i},set:function(e){KP&&(i=e,e?CP.bind(window,"unload",o):CP.unbind(window,"unload",o),localStorage.setItem(sO(n,"isLocal"),e))}}}),uP.isUndefined(r.parent)){if(this.closed=r.closed||!1,CP.addClass(this.domElement,e.CLASS_MAIN),CP.makeSelectable(this.domElement,!1),KP&&i){n.useLocalStorage=!0;var s=localStorage.getItem(sO(this,"gui"));s&&(r.load=JSON.parse(s))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=e.TEXT_CLOSED,CP.addClass(this.__closeButton,e.CLASS_CLOSE_BUTTON),r.closeOnTop?(CP.addClass(this.__closeButton,e.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(CP.addClass(this.__closeButton,e.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),CP.bind(this.__closeButton,"click",(function(){n.closed=!n.closed}))}else{void 0===r.closed&&(r.closed=!0);var l=document.createTextNode(r.name);CP.addClass(l,"controller-name"),a=nO(n,l);CP.addClass(this.__ul,e.CLASS_CLOSED),CP.addClass(a,"title"),CP.bind(a,"click",(function(e){return e.preventDefault(),n.closed=!n.closed,!1})),r.closed||(this.closed=!1)}r.autoPlace&&(uP.isUndefined(r.parent)&&(ZP&&($P=document.createElement("div"),CP.addClass($P,"dg"),CP.addClass($P,e.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild($P),ZP=!1),$P.appendChild(this.domElement),CP.addClass(this.domElement,e.CLASS_AUTO_PLACE)),this.parent||hO(n,r.width)),this.__resizeHandler=function(){n.onResizeDebounced()},CP.bind(window,"resize",this.__resizeHandler),CP.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),CP.bind(this.__ul,"transitionend",this.__resizeHandler),CP.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),r.resizable&&dO(this),o=function(){KP&&"true"===localStorage.getItem(sO(n,"isLocal"))&&localStorage.setItem(sO(n,"gui"),JSON.stringify(n.getSaveObject()))},this.saveToLocalStorageIfPossible=o,r.parent||function(){var e=n.getRoot();e.width+=1,uP.defer((function(){e.width-=1}))}()};function nO(e,t,n){var r=document.createElement("li");return t&&r.appendChild(t),n?e.__ul.insertBefore(r,n):e.__ul.appendChild(r),e.onResize(),r}function rO(e){CP.unbind(window,"resize",e.__resizeHandler),e.saveToLocalStorageIfPossible&&CP.unbind(window,"unload",e.saveToLocalStorageIfPossible)}function iO(e,t){var n=e.__preset_select[e.__preset_select.selectedIndex];n.innerHTML=t?n.value+"*":n.value}function oO(e,t){var n=e.getRoot(),r=n.__rememberedObjects.indexOf(t.object);if(-1!==r){var i=n.__rememberedObjectIndecesToControllers[r];if(void 0===i&&(i={},n.__rememberedObjectIndecesToControllers[r]=i),i[t.property]=t,n.load&&n.load.remembered){var o=n.load.remembered,a=void 0;if(o[e.preset])a=o[e.preset];else{if(!o.Default)return;a=o.Default}if(a[r]&&void 0!==a[r][t.property]){var s=a[r][t.property];t.initialValue=s,t.setValue(s)}}}}function aO(e,t,n,r){if(void 0===t[n])throw new Error('Object "'+t+'" has no property "'+n+'"');var i=void 0;if(r.color)i=new FP(t,n);else{var o=[t,n].concat(r.factoryArgs);i=WP.apply(e,o)}r.before instanceof SP&&(r.before=r.before.__li),oO(e,i),CP.addClass(i.domElement,"c");var a=document.createElement("span");CP.addClass(a,"property-name"),a.innerHTML=i.property;var s=document.createElement("div");s.appendChild(a),s.appendChild(i.domElement);var l=nO(e,s,r.before);return CP.addClass(l,tO.CLASS_CONTROLLER_ROW),i instanceof FP?CP.addClass(l,"color"):CP.addClass(l,gP(i.getValue())),function(e,t,n){if(n.__li=t,n.__gui=e,uP.extend(n,{options:function(t){if(arguments.length>1){var r=n.__li.nextElementSibling;return n.remove(),aO(e,n.object,n.property,{before:r,factoryArgs:[uP.toArray(arguments)]})}if(uP.isArray(t)||uP.isObject(t)){var i=n.__li.nextElementSibling;return n.remove(),aO(e,n.object,n.property,{before:i,factoryArgs:[t]})}},name:function(e){return n.__li.firstElementChild.firstElementChild.innerHTML=e,n},listen:function(){return n.__gui.listen(n),n},remove:function(){return n.__gui.remove(n),n}}),n instanceof YP){var r=new RP(n.object,n.property,{min:n.__min,max:n.__max,step:n.__step});uP.each(["updateDisplay","onChange","onFinishChange","step","min","max"],(function(e){var t=n[e],i=r[e];n[e]=r[e]=function(){var e=Array.prototype.slice.call(arguments);return i.apply(r,e),t.apply(n,e)}})),CP.addClass(t,"has-slider"),n.domElement.insertBefore(r.domElement,n.domElement.firstElementChild)}else if(n instanceof RP){var i=function(t){if(uP.isNumber(n.__min)&&uP.isNumber(n.__max)){var r=n.__li.firstElementChild.firstElementChild.innerHTML,i=n.__gui.__listening.indexOf(n)>-1;n.remove();var o=aO(e,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[n.__min,n.__max,n.__step]});return o.name(r),i&&o.listen(),o}return t};n.min=uP.compose(i,n.min),n.max=uP.compose(i,n.max)}else n instanceof DP?(CP.bind(t,"click",(function(){CP.fakeEvent(n.__checkbox,"click")})),CP.bind(n.__checkbox,"click",(function(e){e.stopPropagation()}))):n instanceof jP?(CP.bind(t,"click",(function(){CP.fakeEvent(n.__button,"click")})),CP.bind(t,"mouseover",(function(){CP.addClass(n.__button,"hover")})),CP.bind(t,"mouseout",(function(){CP.removeClass(n.__button,"hover")}))):n instanceof FP&&(CP.addClass(t,"color"),n.updateDisplay=uP.compose((function(e){return t.style.borderLeftColor=n.__color.toString(),e}),n.updateDisplay),n.updateDisplay());n.setValue=uP.compose((function(t){return e.getRoot().__preset_select&&n.isModified()&&iO(e.getRoot(),!0),t}),n.setValue)}(e,l,i),e.__controllers.push(i),i}function sO(e,t){return document.location.href+"."+t}function lO(e,t,n){var r=document.createElement("option");r.innerHTML=t,r.value=t,e.__preset_select.appendChild(r),n&&(e.__preset_select.selectedIndex=e.__preset_select.length-1)}function uO(e,t){t.style.display=e.useLocalStorage?"block":"none"}function cO(e){var t=e.__save_row=document.createElement("li");CP.addClass(e.domElement,"has-save"),e.__ul.insertBefore(t,e.__ul.firstChild),CP.addClass(t,"save-row");var n=document.createElement("span");n.innerHTML="&nbsp;",CP.addClass(n,"button gears");var r=document.createElement("span");r.innerHTML="Save",CP.addClass(r,"button"),CP.addClass(r,"save");var i=document.createElement("span");i.innerHTML="New",CP.addClass(i,"button"),CP.addClass(i,"save-as");var o=document.createElement("span");o.innerHTML="Revert",CP.addClass(o,"button"),CP.addClass(o,"revert");var a=e.__preset_select=document.createElement("select");if(e.load&&e.load.remembered?uP.each(e.load.remembered,(function(t,n){lO(e,n,n===e.preset)})):lO(e,qP,!1),CP.bind(a,"change",(function(){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].innerHTML=e.__preset_select[t].value;e.preset=this.value})),t.appendChild(a),t.appendChild(n),t.appendChild(r),t.appendChild(i),t.appendChild(o),KP){var s=document.getElementById("dg-local-explain"),l=document.getElementById("dg-local-storage");document.getElementById("dg-save-locally").style.display="block","true"===localStorage.getItem(sO(0,"isLocal"))&&l.setAttribute("checked","checked"),uO(e,s),CP.bind(l,"change",(function(){e.useLocalStorage=!e.useLocalStorage,uO(e,s)}))}var u=document.getElementById("dg-new-constructor");CP.bind(u,"keydown",(function(e){!e.metaKey||67!==e.which&&67!==e.keyCode||JP.hide()})),CP.bind(n,"click",(function(){u.innerHTML=JSON.stringify(e.getSaveObject(),void 0,2),JP.show(),u.focus(),u.select()})),CP.bind(r,"click",(function(){e.save()})),CP.bind(i,"click",(function(){var t=prompt("Enter a new preset name.");t&&e.saveAs(t)})),CP.bind(o,"click",(function(){e.revert()}))}function dO(e){var t=void 0;function n(n){return n.preventDefault(),e.width+=t-n.clientX,e.onResize(),t=n.clientX,!1}function r(){CP.removeClass(e.__closeButton,tO.CLASS_DRAG),CP.unbind(window,"mousemove",n),CP.unbind(window,"mouseup",r)}function i(i){return i.preventDefault(),t=i.clientX,CP.addClass(e.__closeButton,tO.CLASS_DRAG),CP.bind(window,"mousemove",n),CP.bind(window,"mouseup",r),!1}e.__resize_handle=document.createElement("div"),uP.extend(e.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"}),CP.bind(e.__resize_handle,"mousedown",i),CP.bind(e.__closeButton,"mousedown",i),e.domElement.insertBefore(e.__resize_handle,e.domElement.firstElementChild)}function hO(e,t){e.domElement.style.width=t+"px",e.__save_row&&e.autoPlace&&(e.__save_row.style.width=t+"px"),e.__closeButton&&(e.__closeButton.style.width=t+"px")}function fO(e,t){var n={};return uP.each(e.__rememberedObjects,(function(r,i){var o={},a=e.__rememberedObjectIndecesToControllers[i];uP.each(a,(function(e,n){o[n]=t?e.initialValue:e.getValue()})),n[i]=o})),n}function pO(e){0!==e.length&&UP.call(window,(function(){pO(e)})),uP.each(e,(function(e){e.updateDisplay()}))}tO.toggleHide=function(){QP=!QP,uP.each(eO,(function(e){e.domElement.style.display=QP?"none":""}))},tO.CLASS_AUTO_PLACE="a",tO.CLASS_AUTO_PLACE_CONTAINER="ac",tO.CLASS_MAIN="main",tO.CLASS_CONTROLLER_ROW="cr",tO.CLASS_TOO_TALL="taller-than-window",tO.CLASS_CLOSED="closed",tO.CLASS_CLOSE_BUTTON="close-button",tO.CLASS_CLOSE_TOP="close-top",tO.CLASS_CLOSE_BOTTOM="close-bottom",tO.CLASS_DRAG="drag",tO.DEFAULT_WIDTH=245,tO.TEXT_CLOSED="Close Controls",tO.TEXT_OPEN="Open Controls",tO._keydownHandler=function(e){"text"===document.activeElement.type||72!==e.which&&72!==e.keyCode||tO.toggleHide()},CP.bind(window,"keydown",tO._keydownHandler,!1),uP.extend(tO.prototype,{add:function(e,t){return aO(this,e,t,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(e,t){return aO(this,e,t,{color:!0})},remove:function(e){this.__ul.removeChild(e.__li),this.__controllers.splice(this.__controllers.indexOf(e),1);var t=this;uP.defer((function(){t.onResize()}))},destroy:function(){if(this.parent)throw new Error("Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.");this.autoPlace&&$P.removeChild(this.domElement);var e=this;uP.each(this.__folders,(function(t){e.removeFolder(t)})),CP.unbind(window,"keydown",tO._keydownHandler,!1),rO(this)},addFolder:function(e){if(void 0!==this.__folders[e])throw new Error('You already have a folder in this GUI by the name "'+e+'"');var t={name:e,parent:this};t.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[e]&&(t.closed=this.load.folders[e].closed,t.load=this.load.folders[e]);var n=new tO(t);this.__folders[e]=n;var r=nO(this,n.domElement);return CP.addClass(r,"folder"),n},removeFolder:function(e){this.__ul.removeChild(e.domElement.parentElement),delete this.__folders[e.name],this.load&&this.load.folders&&this.load.folders[e.name]&&delete this.load.folders[e.name],rO(e);var t=this;uP.each(e.__folders,(function(t){e.removeFolder(t)})),uP.defer((function(){t.onResize()}))},open:function(){this.closed=!1},close:function(){this.closed=!0},hide:function(){this.domElement.style.display="none"},show:function(){this.domElement.style.display=""},onResize:function(){var e=this.getRoot();if(e.scrollable){var t=CP.getOffset(e.__ul).top,n=0;uP.each(e.__ul.childNodes,(function(t){e.autoPlace&&t===e.__save_row||(n+=CP.getHeight(t))})),window.innerHeight-t-20<n?(CP.addClass(e.domElement,tO.CLASS_TOO_TALL),e.__ul.style.height=window.innerHeight-t-20+"px"):(CP.removeClass(e.domElement,tO.CLASS_TOO_TALL),e.__ul.style.height="auto")}e.__resize_handle&&uP.defer((function(){e.__resize_handle.style.height=e.__ul.offsetHeight+"px"})),e.__closeButton&&(e.__closeButton.style.width=e.width+"px")},onResizeDebounced:uP.debounce((function(){this.onResize()}),50),remember:function(){if(uP.isUndefined(JP)&&((JP=new VP).domElement.innerHTML=GP),this.parent)throw new Error("You can only call remember on a top level GUI.");var e=this;uP.each(Array.prototype.slice.call(arguments),(function(t){0===e.__rememberedObjects.length&&cO(e),-1===e.__rememberedObjects.indexOf(t)&&e.__rememberedObjects.push(t)})),this.autoPlace&&hO(this,this.width)},getRoot:function(){for(var e=this;e.parent;)e=e.parent;return e},getSaveObject:function(){var e=this.load;return e.closed=this.closed,this.__rememberedObjects.length>0&&(e.preset=this.preset,e.remembered||(e.remembered={}),e.remembered[this.preset]=fO(this)),e.folders={},uP.each(this.__folders,(function(t,n){e.folders[n]=t.getSaveObject()})),e},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=fO(this),iO(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(e){this.load.remembered||(this.load.remembered={},this.load.remembered.Default=fO(this,!0)),this.load.remembered[e]=fO(this),this.preset=e,lO(this,e,!0),this.saveToLocalStorageIfPossible()},revert:function(e){uP.each(this.__controllers,(function(t){this.getRoot().load.remembered?oO(e||this.getRoot(),t):t.setValue(t.initialValue),t.__onFinishChange&&t.__onFinishChange.call(t,t.getValue())}),this),uP.each(this.__folders,(function(e){e.revert(e)})),e||iO(this.getRoot(),!1)},listen:function(e){var t=0===this.__listening.length;this.__listening.push(e),t&&pO(this.__listening)},updateDisplay:function(){uP.each(this.__controllers,(function(e){e.updateDisplay()})),uP.each(this.__folders,(function(e){e.updateDisplay()}))}});var mO=tO;function gO(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function vO(e,t,n){var r,i,o=null,a={user:"suziwen",token:"",helpFn:n.helpFn,saveFileFn:function(){o?(0,oP.saveAs)(new Blob([JSON.stringify(o)]),a.user+"_github.json"):alert(" github ")},loadFileFn:(r=regeneratorRuntime.mark((function e(){var t,r,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,iP([{description:"Json files",mimeTypes:["application/json"],extensions:[".json"]}]);case 2:return t=e.sent,e.next=5,t.text();case 5:r=e.sent,i=JSON.parse(r),a={},i.forEach((function(e){a[e._id]=e})),o=i,n.afterLoadDemo(a,i);case 11:case"end":return e.stop()}}),e)})),i=function(){var e=this,t=arguments;return new Promise((function(n,i){var o=r.apply(e,t);function a(e){gO(o,n,i,a,s,"next",e)}function s(e){gO(o,n,i,a,s,"throw",e)}a(void 0)}))},function(){return i.apply(this,arguments)}),githubStarsFn:function(){n&&(n.showDimmer(),function(e,t,n,r){r=r||function(){};var i={};t&&(i.token=t),e||t||(e="suziwen"),new(tP())(i).getUser(e).listStarredRepos().then((function(e){var t=[],n={},i=e.data,o={},a=[];i.forEach((function(e){e.topics.forEach((function(e){n[e]?n[e]++:n[e]=1}))})),(t=Object.keys(n)).sort((function(e,t){return n[t]-n[e]})),console.log("usedTags",t),console.log("usedTagslength",t.length),i.forEach((function(e){e.topics,o[e.html_url]=e,a.push({_id:e.html_url,title:e.full_name,tagNames:e.topics,createDate:e.created_at,content:e.description,stars:e.stargazers_count})})),r(null,o,a)})).catch((function(e){console.log("err:",e),r(e)}))}(a.user,a.token,0,(function(e,t,r){n.hideDimmer(),e?n.showError(e):(o=r,n.afterLoadDemo(t,r))})))}},s=new mO({autoPlace:!1});e.prepend(s.domElement);var l=s.addFolder("Github Stars ");l.close();var u=l.add(a,"user");return u.name(""),(u=l.add(a,"token")).name("token()"),(u=l.add(a,"githubStarsFn")).name(""),nP&&((u=l.add(a,"saveFileFn")).name("github"),(u=l.add(a,"loadFileFn")).name("")),wO(t,s),(u=s.add(a,"helpFn")).name(""),s}var yO,bO,_O,wO=function(e,t){var n={fisheye:!1,fisheyeD:5,fisheyeR:300,fisheyeScaleRBy:"unset",fisheyeScaleDBy:"unset"},r=null,i=t.addFolder(""),o=i.add(n,"fisheye");o.name(""),o.onChange((function(t){t?(r&&!r.destroyed||(r=new fD.Fisheye({r:n.fisheyeR,d:n.fisheyeD,showLabel:!0,delegateStyle:{fill:"#f00",lineDash:[5,5],stroke:"#666"}})),e.addPlugin(r)):(e.removePlugin(r),r=null)})),(o=i.add(n,"fisheyeD",1,10,.1)).name(""),o.onChange((function(e){r&&r.updateParams({d:e})})),(o=i.add(n,"fisheyeR",200,500,50)).name(""),o.onChange((function(e){r&&r.updateParams({r:e})})),i.close(),n.fisheye&&(r=new fD.Fisheye({r:n.fisheyeR,d:n.fisheyeD,showLabel:!0,delegateStyle:{fill:"#f00",lineDash:[5,5],stroke:"#666"}}),e.addPlugin(r))},xO={type:"xsj"},MO=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=[],i=[],o={};if(!n||0===n.length){var a={};e.forEach((function(e){(e.tagNames||[]).forEach((function(e){a[e]?a[e]++:a[e]=1}))})),(n=Object.keys(a)).sort((function(e,t){return a[t]-a[e]})),t>0&&n.splice(t)}return e.forEach((function(e){var t=(e.tagNames||[]).filter((function(e){return n.indexOf(e)>=0})).map((function(e){return e.replace(/-/g,"_")})),a=e.title;a.length>20&&(a=a.substring(0,20)+"..."),r.push({id:"doc_"+e._id,name:a,doc:e,level:2,isLeaf:!0,tags:t.map((function(e){return"tag_"+e}))}),t.forEach((function(t){o[t]?o[t]++:o[t]=1,i.push({source:"tag_"+t,target:"doc_"+e._id})}))})),Object.keys(o).forEach((function(e){r.push({id:"tag_"+e,name:e,level:0,childrenNum:o[e],tag:"tag_"+e})})),{nodes:r,edges:i}},EO=function(){bO&&(bO.destroy(),bO=null),_O&&(_O.destroy(),_O=null)},SO=function(e,t,n){var r=[],i=[],o=[],a=[],s=[],l=[],u=new Map,c=new Map,d=new Map,h=document.body.scrollWidth,f=document.body.scrollHeight||500;t.databaseInfo&&(xO=t.databaseInfo);var p=["#7DA8FF","#44E6C1","#FF68A7","#7F86FF","#AE6CFF","#FF5A34","#5D7092","#FF6565","#6BFFDE"],m=["#CFF6FF","#BCFCFF","#FFECF5","#ECFBFF","#EAD9FF","#FFF8DA","#DCE2EE","#FFE7F0","#EEFFCE"],g=["#CADBFF","#A9FFEB","#FFC4DD","#CACDFF","#FFD4F2","#FFD3C9","#EBF2FF","#FFCBCB","#CAFFF3"],v=[],y=new Map;["#8FE9FF","#87EAEF","#FFC9E3","#A7C2FF","#FFA1E3","#FFE269","#BFCFEE","#FFA0C5","#D5FF86"].forEach((function(e,t){v.push("l(0) 0:"+e+" 1:"+p[t]),y.set(v[t],"l(0) 0:"+m[t]+" 1:"+g[t])}));var b={type:"force",nodeSize:function(e){return e.size/2+5},nodeStrength:25,collideStrength:.8,alphaDecay:.01,preventOverlap:!0,onTick:function(){var e=yO.getNodes(),t=yO.get("height"),n=yO.get("width"),r=10;e.forEach((function(e){var i=e.getModel();i.x>n-r?i.x=n-r:i.x<r&&(i.x=r),i.y>t-r?i.y=t-r:i.y<r&&(i.y=r)}))}},_=new fD.Minimap({container:document.querySelector(".minimap-container"),size:[150,100]}),w=new fD.Tooltip({offsetX:10,offsetY:10,itemTypes:["node"],getContent:function(e){var t=e.item.getModel().doc;if(!t)return"";var n=t.tagNames||[],r=function(){var e=function(e){var t=/^---\s*\n([\s\S]+?)\n---\s*\n*/.exec(e);return t?e.substring(t[0].trim().length+1):e};return e(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")}(t.content).substring(0,300),i=vD()(t.createDate),o=document.createElement("div");return o.classList.add("g6-tooltip-container"),o.innerHTML="\n    <div>: ".concat(bD(t.title),"</div>\n    <div>: ").concat(n.map((function(e){return"#"+bD(e)})).join(","),"</div>\n    <div>: ").concat(i.format("YYYY-MM-DD"),"</div>\n    <div>: <pre>").concat(bD(r),"</pre></div>\n    "),o},shouldBegin:function(e){return!!e.item.getModel().doc}}),x=new fD.Menu({shouldBegin:function(e){return!!e.item.get("model").doc},getContent:function(e){var t=[];if(e.item.get("model").doc)switch(xO.type){case"xsj":t.push('\n          <li data-type="edit"></li>\n            '),t.push('\n          <li data-type="free-edit"></li>\n            ');break;case"github":t.push('\n          <li data-type="open-url"></li>\n            ')}return'\n    <ul class="g6-contextmenu-ul">\n      '.concat(t.join(""),"\n    </uL>\n    ")},handleMenuClick:function(e,n){var r=e.dataset.type,i=n.get("model");switch(r){case"edit":t.changeFileModel(i.id);break;case"free-edit":t.changeFileModel(i.id,!0);break;case"open-url":t.openTarget(i.doc._id)}},itemTypes:["node"]});function M(e){var t=e.item.get("model");t.fx=e.x,t.fy=e.y}(yO=new fD.Graph({container:document.body,width:h,height:f,linkCenter:!0,layout:b,modes:{default:["drag-canvas","drag-node","zoom-canvas","xsj-hover-item"]},plugins:[_,x,w],defaultNode:{type:"bubble",size:95,labelCfg:{position:"center",style:{fill:"white",fontSize:25,fontStyle:"bold",shadowColor:"#C7D2D4",shadowBlur:10}}},defaultEdge:{color:"#888",type:"animate-line"}})).get("canvas").set("localRefresh",!1),yO.xsjState={currentFocus:null},bO=function(e){var t=e.graph,n=e.height,r=new QA(".files-table-container",{height:n,data:[],columnDefaults:{tooltips:function(e){return"vvvv:"+e.getValue()}},rowContextMenu:function(t,n){var r=[],i=t.getData();return"xsj"===i.fileType?(r.push({label:"",action:function(t,n){var r=n.getData();e.changeFileModel(r.id)}}),r.push({label:"",action:function(t,n){var r=n.getData();e.changeFileModel(r.id,!0)}})):"github"===i.fileType&&r.push({label:"",action:function(t,n){var r=n.getData();e.openTarget(r.id)}}),r},columns:[{title:"#",field:"id",hozAlign:"center",headerHozAlign:"center",formatter:"rownum",headerSort:!1,frozen:!0},{title:"",field:"title",width:150,tooltip:!0,frozen:!0},{title:"",field:"createDate",formatter:function(e){return vD()(e.getValue()).format("YYYY-MM-DD")},hozAlign:"center"},{title:"",field:"tagNames",headerSort:!1}]});return r.on("rowClick",(function(e,n){var i=n.getData(),o=t.findById("doc_"+i.id);if(o){var a=t.get("canvas");if(a&&a.get("el")){var s=a.get("el"),l=o.getModel(),u=t.getClientByPoint(l.x,l.y),c=new MouseEvent("mouseleave",{view:window,bubbles:!0,cancelable:!0,clientX:u.x,clientY:u.y});s.dispatchEvent(c)}t.focusItem(o,!0,{duration:500,callback:function(){t.getNodes().map((function(e){e.getModel().isLeaf&&e.clearStates("focused")})),r.deselectRow(),t.setItemState(o,"focused",!0);var e=t.get("canvas");if(e&&e.get("el")){var n=e.get("el"),i=o.getModel(),a=t.getClientByPoint(i.x,i.y),s=new MouseEvent("mousemove",{view:window,bubbles:!0,cancelable:!0,clientX:a.x,clientY:a.y});n.dispatchEvent(s)}else _D(t,o)}})}})),r.on("rowMouseEnter",(function(e,n){var r=n.getData(),i=t.findById("doc_"+r.id);i&&_D(t,i)})),r.on("rowMouseLeave",(function(e,n){var r=n.getData();t.findById("doc_"+r.id)&&wD(t)})),r}({graph:yO,height:f,openTarget:t.openTarget,changeFileModel:t.changeFileModel}),_O=vO(document.querySelector(".minimap-container"),yO,{showDimmer:t.showDimmer,hideDimmer:t.hideDimmer,showError:t.showError,helpFn:function(){console.log("helpfn")},afterLoadDemo:function(e,t){xO.type="github",E(MO(t,100))}}),yO.on("node:dragstart",(function(e){yO.layout(),M(e)})),yO.on("node:drag",(function(e){M(e)})),yO.on("node:dragend",(function(e){e.item.get("model").fx=null,e.item.get("model").fy=null}));var E=function(e){bO.clearData(),document.querySelector(".files-table-container").classList.add("files-table-hidden"),yO.xsjState={};var t=yO.get("layoutController");t.layoutCfg.nodeStrength=2500,t.layoutCfg.collideStrength=.8,t.layoutCfg.alphaDecay=.01,s=e.nodes,l=e.edges,r=[],i=[],u=new Map,c=new Map,s.forEach((function(e){if(0===e.level&&(e.color=v[r.length%v.length],e.uColor=y.get(v[r.length%v.length]),e.style={fill:v[r.length%v.length],lineWidth:0},e.labelCfg={style:{fontSize:20,fill:"#F8F4ED"}},e.x=800*Math.random(),e.y=800*Math.random(),r.push(e)),e.isLeaf)e.label=e.name;else{var t=e.childrenNum?"\n(".concat(e.childrenNum,")"):"";e.label="".concat(e.name).concat(t)}u.set(e.id,e)})),function(e,t,n){var r=9999999999,i=-9999999999;e.forEach((function(e){r=e[t]<r?e[t]:r,i=e[t]>i?e[t]:i}));var o=i-r,a=n[1]-n[0];e.forEach((function(e){e.size=(e[t]-r)/o*a+n[0]}))}(r,"childrenNum",[120,180]),s.forEach((function(e){if(0!==e.level&&!e.isLeaf){var t=u.get(e.tags[0]);e.color=t.color,e.uColor=y.get(t.color),e.style={fill:t.color}}})),l.forEach((function(e){e.id="".concat(e.source,"-").concat(e.target),e.style={opacity:1,strokeOpacity:1},c.set(e.id,e)})),yO.data({nodes:r,edges:i}),yO.render()};setTimeout((function(){E(MO(e))}),600);var S=function(){var e=[];o.forEach((function(t){if(t.doc){var n=t.doc;e.push({id:n._id,fileType:xO.type,title:n.title,tagNames:n.tagNames,createDate:n.createDate})}})),e.length>0?(document.querySelector(".files-table-container").classList.remove("files-table-hidden"),bO.setData(e)):(bO.clearData(),document.querySelector(".files-table-container").classList.add("files-table-hidden"))};yO.on("node:click",(function(e){var t=e.item,n=t.getModel();if(n.isLeaf){var l=n.id.substring(4);bO.deselectRow(),bO.selectRow(l),bO.scrollToRow(l,"center")}if((n.isLeaf||0===n.level)&&0===n.level){var p=yO.get("layoutController");if(p.layoutMethods[0].forceSimulation.stop(),r.forEach((function(e){var t=yO.findById(e.id);yO.setItemState(t,"dark",!1),e.x<.5*h?e.x=300:e.x=h-300})),n.x=h/2,n.y=f/2,a.length&&a.forEach((function(e){var t=yO.findById(e.id);t&&yO.setItemState(t,"disappearing",!0)})),o.forEach((function(e){var t=yO.findById(e.id);t&&yO.setItemState(t,"disappearing",!0)})),yO.positionsAnimate(),o=[],a=[],yO.xsjState.currentFocus&&yO.xsjState.currentFocus.id===n.id)yO.xsjState.currentFocus=null,p.layoutCfg.nodeStrength=2500,p.layoutCfg.collideStrength=.8,p.layoutCfg.alphaDecay=.01;else{yO.xsjState.currentFocus=n;var m=yO.get("layoutController");m.layoutCfg.nodeStrength=function(){return-80},m.layoutCfg.collideStrength=.2,m.layoutCfg.linkDistance=function(e){if(0!==e.source.level)return 120;return 250},m.layoutCfg.edgeStrength=function(){return 2};var g=n.tag,v=[];d=new Map,s.forEach((function(e){if(e.tags){for(var t=e.tags,r=t.length,i=!1,s=[],l=0;l<r;l++){var h=t[l].split("-");h[0]===g&&(i=!0),s.push(u.get(h[0]))}if(i){var f=2*Math.random()*Math.PI;if(e.x=n.x+Math.cos(f)*n.size/2+10,e.y=n.y+Math.sin(f)*n.size/2+10,e.style||(e.style={}),e.style.lineWidth=0,e.style.opacity=1,e.isLeaf){e.type="animate-circle";var p="l(0)",m=s.length;s.forEach((function(e,t){var n=e.color.split(" ")[1].substr(2);p+=" ".concat(t/(m-1),":").concat(n)})),1===m&&(p=n.color.split(" ")[1].substr(2)),e.color=p,e.style.fill=p,e.uColor=y.get(p),e.style.fill="#fff",e.style.lineWidth=1,e.size=60,e.labelCfg={style:{fontSize:11,lineHeight:19,fill:"#697B8C"},position:"center"}}else 0!==e.level&&(e.type="bubble",e.size=95,e.style||(e.style={}),e.color=n.color,e.uColor=y.get(n.color),e.style.fill=n.color,e.labelCfg={style:{fill:"#fff",fontSize:25},position:"center"});o.push(e),d.set(e.id,e);var b="".concat(n.id,"-").concat(e.id),_=c.get(b);_&&(_.color=n.color,_.size=2,a.push(_)),t.forEach((function(e){var t=e.split("-");t[0]!==g&&v.push(t[0]),t[1]&&v.push(t[1])}))}}})),s.forEach((function(e){for(var t=v.length,n=0;n<t;n++)if(e.tag===v[n]&&void 0===d.get(e.id))return o.push(e),void d.set(e.id,e)})),o.forEach((function(e,t){var r=e.level;o.forEach((function(i,o){if(!(o<=t)){var s,l=i.level;s=r<l?"".concat(e.id,"-").concat(i.id):"".concat(i.id,"-").concat(e.id);var u=n.color;e.isLeaf?0===i.level&&i.tag!==n.tag?u="#DFE5EB":i.isLeaf||i.tags[0]===n.tag||(u="#DFE5EB"):i.isLeaf&&(0===e.level&&e.tag!==n.tag?u="#DFE5EB":e.isLeaf||e.tags[0]===n.tag||(u="#DFE5EB"));var d=c.get(s);d&&(d.color=u,d.size=1,a.push(d))}}))}))}setTimeout((function(){yO.changeData({nodes:r.concat(o),edges:[]}),yO.changeData({nodes:r.concat(o),edges:i.concat(a)});var e=yO.getNodes();yO.getEdges().forEach((function(e){yO.clearItemStates(e)})),e.forEach((function(e){yO.clearItemStates(e),yO.setItemState(e,"appearing",!0)})),yO.xsjState.currentFocus&&t.setState("focused"),S()}),400)}})),yO.on("canvas:click",(function(){if(yO.xsjState.currentFocus){var e=yO.findById(yO.xsjState.currentFocus.id);e&&yO.clearItemStates(e),yO.xsjState.currentFocus=null,yO.get("layoutController").layoutMethods[0].forceSimulation.stop();var t=yO.getNodes(),n=yO.getEdges();t.forEach((function(e){0===e.getModel().level?yO.setItemState(e,"dark",!1):yO.setItemState(e,"disappearing",!0)})),n.forEach((function(e){yO.setItemState(e,"disappearing",!0)})),o=[],a=[],setTimeout((function(){var e=yO.get("layoutController");e.layoutCfg.nodeStrength=2500,e.layoutCfg.collideStrength=.8,e.layoutCfg.alphaDecay=.01,S(),yO.changeData({nodes:r,edges:i})}),400)}})),t.hideDimmer(),n(null,{graphInstance:yO,dataLoading:function(e,t,n){n=n||function(){},xO.type="github",E(MO(e,100)),n()},destroy:EO})},kO=mD()((function(){yO&&!yO.get("destroyed")&&(yO.changeSize(document.body.clientWidth,document.body.clientHeight),bO&&bO.setHeight(document.body.clientHeight))}),300);const TO=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;e.pending=!1,window.onresize=kO;var t=document.createElement("div");t.classList.add("right-sidebar");var n=document.createElement("div");n.classList.add("minimap-container"),t.append(n);var r=document.createElement("div");return r.classList.add("files-table-container","files-table-hidden"),t.append(r),document.body.append(t),{initDecisionMap:SO}}})(),(G6Decision=void 0===G6Decision?{}:G6Decision).app=a})();